var W$=Object.defineProperty;var H$=(e,t,s)=>t in e?W$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var ee=(e,t,s)=>(H$(e,typeof t!="symbol"?t+"":t,s),s);function BI(e,t){for(var s=0;s<t.length;s++){const i=t[s];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const y=Object.getOwnPropertyDescriptor(i,o);y&&Object.defineProperty(e,o,y.get?y:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const y of o)if(y.type==="childList")for(const r of y.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const y={};return o.integrity&&(y.integrity=o.integrity),o.referrerPolicy&&(y.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?y.credentials="include":o.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function i(o){if(o.ep)return;o.ep=!0;const y=s(o);fetch(o.href,y)}})();var qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function X$(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function i(){if(this instanceof i){var o=[null];o.push.apply(o,arguments);var y=Function.bind.apply(t,o);return new y}return t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(s,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),s}var kI={exports:{}},gm={},zI={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mc=Symbol.for("react.element"),Y$=Symbol.for("react.portal"),K$=Symbol.for("react.fragment"),j$=Symbol.for("react.strict_mode"),Z$=Symbol.for("react.profiler"),J$=Symbol.for("react.provider"),Q$=Symbol.for("react.context"),q$=Symbol.for("react.forward_ref"),_$=Symbol.for("react.suspense"),tB=Symbol.for("react.memo"),eB=Symbol.for("react.lazy"),Xw=Symbol.iterator;function nB(e){return e===null||typeof e!="object"?null:(e=Xw&&e[Xw]||e["@@iterator"],typeof e=="function"?e:null)}var VI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GI=Object.assign,UI={};function gu(e,t,s){this.props=e,this.context=t,this.refs=UI,this.updater=s||VI}gu.prototype.isReactComponent={};gu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function WI(){}WI.prototype=gu.prototype;function b1(e,t,s){this.props=e,this.context=t,this.refs=UI,this.updater=s||VI}var A1=b1.prototype=new WI;A1.constructor=b1;GI(A1,gu.prototype);A1.isPureReactComponent=!0;var Yw=Array.isArray,HI=Object.prototype.hasOwnProperty,I1={current:null},XI={key:!0,ref:!0,__self:!0,__source:!0};function YI(e,t,s){var i,o={},y=null,r=null;if(t!=null)for(i in t.ref!==void 0&&(r=t.ref),t.key!==void 0&&(y=""+t.key),t)HI.call(t,i)&&!XI.hasOwnProperty(i)&&(o[i]=t[i]);var g=arguments.length-2;if(g===1)o.children=s;else if(1<g){for(var n=Array(g),a=0;a<g;a++)n[a]=arguments[a+2];o.children=n}if(e&&e.defaultProps)for(i in g=e.defaultProps,g)o[i]===void 0&&(o[i]=g[i]);return{$$typeof:mc,type:e,key:y,ref:r,props:o,_owner:I1.current}}function sB(e,t){return{$$typeof:mc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function R1(e){return typeof e=="object"&&e!==null&&e.$$typeof===mc}function iB(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Kw=/\/+/g;function r0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?iB(""+e.key):t.toString(36)}function Ld(e,t,s,i,o){var y=typeof e;(y==="undefined"||y==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(y){case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case mc:case Y$:r=!0}}if(r)return r=e,o=o(r),e=i===""?"."+r0(r,0):i,Yw(o)?(s="",e!=null&&(s=e.replace(Kw,"$&/")+"/"),Ld(o,t,s,"",function(a){return a})):o!=null&&(R1(o)&&(o=sB(o,s+(!o.key||r&&r.key===o.key?"":(""+o.key).replace(Kw,"$&/")+"/")+e)),t.push(o)),1;if(r=0,i=i===""?".":i+":",Yw(e))for(var g=0;g<e.length;g++){y=e[g];var n=i+r0(y,g);r+=Ld(y,t,s,n,o)}else if(n=nB(e),typeof n=="function")for(e=n.call(e),g=0;!(y=e.next()).done;)y=y.value,n=i+r0(y,g++),r+=Ld(y,t,s,n,o);else if(y==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return r}function Qf(e,t,s){if(e==null)return e;var i=[],o=0;return Ld(e,i,"","",function(y){return t.call(s,y,o++)}),i}function rB(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gs={current:null},Md={transition:null},aB={ReactCurrentDispatcher:gs,ReactCurrentBatchConfig:Md,ReactCurrentOwner:I1};ce.Children={map:Qf,forEach:function(e,t,s){Qf(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Qf(e,function(){t++}),t},toArray:function(e){return Qf(e,function(t){return t})||[]},only:function(e){if(!R1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=gu;ce.Fragment=K$;ce.Profiler=Z$;ce.PureComponent=b1;ce.StrictMode=j$;ce.Suspense=_$;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aB;ce.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=GI({},e.props),o=e.key,y=e.ref,r=e._owner;if(t!=null){if(t.ref!==void 0&&(y=t.ref,r=I1.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(n in t)HI.call(t,n)&&!XI.hasOwnProperty(n)&&(i[n]=t[n]===void 0&&g!==void 0?g[n]:t[n])}var n=arguments.length-2;if(n===1)i.children=s;else if(1<n){g=Array(n);for(var a=0;a<n;a++)g[a]=arguments[a+2];i.children=g}return{$$typeof:mc,type:e.type,key:o,ref:y,props:i,_owner:r}};ce.createContext=function(e){return e={$$typeof:Q$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:J$,_context:e},e.Consumer=e};ce.createElement=YI;ce.createFactory=function(e){var t=YI.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:q$,render:e}};ce.isValidElement=R1;ce.lazy=function(e){return{$$typeof:eB,_payload:{_status:-1,_result:e},_init:rB}};ce.memo=function(e,t){return{$$typeof:tB,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=Md.transition;Md.transition={};try{e()}finally{Md.transition=t}};ce.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ce.useCallback=function(e,t){return gs.current.useCallback(e,t)};ce.useContext=function(e){return gs.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return gs.current.useDeferredValue(e)};ce.useEffect=function(e,t){return gs.current.useEffect(e,t)};ce.useId=function(){return gs.current.useId()};ce.useImperativeHandle=function(e,t,s){return gs.current.useImperativeHandle(e,t,s)};ce.useInsertionEffect=function(e,t){return gs.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return gs.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return gs.current.useMemo(e,t)};ce.useReducer=function(e,t,s){return gs.current.useReducer(e,t,s)};ce.useRef=function(e){return gs.current.useRef(e)};ce.useState=function(e){return gs.current.useState(e)};ce.useSyncExternalStore=function(e,t,s){return gs.current.useSyncExternalStore(e,t,s)};ce.useTransition=function(){return gs.current.useTransition()};ce.version="18.2.0";zI.exports=ce;var dt=zI.exports;const oB=vm(dt),ux=BI({__proto__:null,default:oB},[dt]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lB=dt,uB=Symbol.for("react.element"),hB=Symbol.for("react.fragment"),cB=Object.prototype.hasOwnProperty,fB=lB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dB={key:!0,ref:!0,__self:!0,__source:!0};function KI(e,t,s){var i,o={},y=null,r=null;s!==void 0&&(y=""+s),t.key!==void 0&&(y=""+t.key),t.ref!==void 0&&(r=t.ref);for(i in t)cB.call(t,i)&&!dB.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:uB,type:e,key:y,ref:r,props:o,_owner:fB.current}}gm.Fragment=hB;gm.jsx=KI;gm.jsxs=KI;kI.exports=gm;var Ut=kI.exports,hx={},jI={exports:{}},Qs={},ZI={exports:{}},JI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,k){var V=L.length;L.push(k);t:for(;0<V;){var W=V-1>>>1,K=L[W];if(0<o(K,k))L[W]=k,L[V]=K,V=W;else break t}}function s(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var k=L[0],V=L.pop();if(V!==k){L[0]=V;t:for(var W=0,K=L.length,B=K>>>1;W<B;){var G=2*(W+1)-1,O=L[G],$=G+1,z=L[$];if(0>o(O,V))$<K&&0>o(z,O)?(L[W]=z,L[$]=V,W=$):(L[W]=O,L[G]=V,W=G);else if($<K&&0>o(z,V))L[W]=z,L[$]=V,W=$;else break t}}return k}function o(L,k){var V=L.sortIndex-k.sortIndex;return V!==0?V:L.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var y=performance;e.unstable_now=function(){return y.now()}}else{var r=Date,g=r.now();e.unstable_now=function(){return r.now()-g}}var n=[],a=[],p=1,h=null,u=3,d=!1,l=!1,c=!1,m=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var k=s(a);k!==null;){if(k.callback===null)i(a);else if(k.startTime<=L)i(a),k.sortIndex=k.expirationTime,t(n,k);else break;k=s(a)}}function x(L){if(c=!1,S(L),!l)if(s(n)!==null)l=!0,D(T);else{var k=s(a);k!==null&&M(x,k.startTime-L)}}function T(L,k){l=!1,c&&(c=!1,f(b),b=-1),d=!0;var V=u;try{for(S(k),h=s(n);h!==null&&(!(h.expirationTime>k)||L&&!I());){var W=h.callback;if(typeof W=="function"){h.callback=null,u=h.priorityLevel;var K=W(h.expirationTime<=k);k=e.unstable_now(),typeof K=="function"?h.callback=K:h===s(n)&&i(n),S(k)}else i(n);h=s(n)}if(h!==null)var B=!0;else{var G=s(a);G!==null&&M(x,G.startTime-k),B=!1}return B}finally{h=null,u=V,d=!1}}var C=!1,w=null,b=-1,E=5,A=-1;function I(){return!(e.unstable_now()-A<E)}function R(){if(w!==null){var L=e.unstable_now();A=L;var k=!0;try{k=w(!0,L)}finally{k?N():(C=!1,w=null)}}else C=!1}var N;if(typeof v=="function")N=function(){v(R)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,P=F.port2;F.port1.onmessage=R,N=function(){P.postMessage(null)}}else N=function(){m(R,0)};function D(L){w=L,C||(C=!0,N())}function M(L,k){b=m(function(){L(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){l||d||(l=!0,D(T))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return s(n)},e.unstable_next=function(L){switch(u){case 1:case 2:case 3:var k=3;break;default:k=u}var V=u;u=k;try{return L()}finally{u=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,k){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=u;u=L;try{return k()}finally{u=V}},e.unstable_scheduleCallback=function(L,k,V){var W=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?W+V:W):V=W,L){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=V+K,L={id:p++,callback:k,priorityLevel:L,startTime:V,expirationTime:K,sortIndex:-1},V>W?(L.sortIndex=V,t(a,L),s(n)===null&&L===s(a)&&(c?(f(b),b=-1):c=!0,M(x,V-W))):(L.sortIndex=K,t(n,L),l||d||(l=!0,D(T))),L},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(L){var k=u;return function(){var V=u;u=k;try{return L.apply(this,arguments)}finally{u=V}}}})(JI);ZI.exports=JI;var pB=ZI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI=dt,Ys=pB;function It(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qI=new Set,Fh={};function Wo(e,t){Kl(e,t),Kl(e+"Capture",t)}function Kl(e,t){for(Fh[e]=t,e=0;e<t.length;e++)qI.add(t[e])}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cx=Object.prototype.hasOwnProperty,mB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jw={},Zw={};function vB(e){return cx.call(Zw,e)?!0:cx.call(jw,e)?!1:mB.test(e)?Zw[e]=!0:(jw[e]=!0,!1)}function gB(e,t,s,i){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xB(e,t,s,i){if(t===null||typeof t>"u"||gB(e,t,s,i))return!0;if(i)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xs(e,t,s,i,o,y,r){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=y,this.removeEmptyString=r}var Xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xn[e]=new xs(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xn[t]=new xs(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xn[e]=new xs(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xn[e]=new xs(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xn[e]=new xs(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xn[e]=new xs(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xn[e]=new xs(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xn[e]=new xs(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xn[e]=new xs(e,5,!1,e.toLowerCase(),null,!1,!1)});var N1=/[\-:]([a-z])/g;function P1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(N1,P1);Xn[t]=new xs(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(N1,P1);Xn[t]=new xs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(N1,P1);Xn[t]=new xs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xn[e]=new xs(e,1,!1,e.toLowerCase(),null,!1,!1)});Xn.xlinkHref=new xs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xn[e]=new xs(e,1,!1,e.toLowerCase(),null,!0,!0)});function F1(e,t,s,i){var o=Xn.hasOwnProperty(t)?Xn[t]:null;(o!==null?o.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xB(t,s,o,i)&&(s=null),i||o===null?vB(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):o.mustUseProperty?e[o.propertyName]=s===null?o.type===3?!1:"":s:(t=o.attributeName,i=o.attributeNamespace,s===null?e.removeAttribute(t):(o=o.type,s=o===3||o===4&&s===!0?"":""+s,i?e.setAttributeNS(i,t,s):e.setAttribute(t,s))))}var Zr=QI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qf=Symbol.for("react.element"),Sl=Symbol.for("react.portal"),Tl=Symbol.for("react.fragment"),O1=Symbol.for("react.strict_mode"),fx=Symbol.for("react.profiler"),_I=Symbol.for("react.provider"),tR=Symbol.for("react.context"),D1=Symbol.for("react.forward_ref"),dx=Symbol.for("react.suspense"),px=Symbol.for("react.suspense_list"),L1=Symbol.for("react.memo"),aa=Symbol.for("react.lazy"),eR=Symbol.for("react.offscreen"),Jw=Symbol.iterator;function Ku(e){return e===null||typeof e!="object"?null:(e=Jw&&e[Jw]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,a0;function lh(e){if(a0===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);a0=t&&t[1]||""}return`
`+a0+e}var o0=!1;function l0(e,t){if(!e||o0)return"";o0=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(a){var i=a}Reflect.construct(e,[],t)}else{try{t.call()}catch(a){i=a}e.call(t.prototype)}else{try{throw Error()}catch(a){i=a}e()}}catch(a){if(a&&i&&typeof a.stack=="string"){for(var o=a.stack.split(`
`),y=i.stack.split(`
`),r=o.length-1,g=y.length-1;1<=r&&0<=g&&o[r]!==y[g];)g--;for(;1<=r&&0<=g;r--,g--)if(o[r]!==y[g]){if(r!==1||g!==1)do if(r--,g--,0>g||o[r]!==y[g]){var n=`
`+o[r].replace(" at new "," at ");return e.displayName&&n.includes("<anonymous>")&&(n=n.replace("<anonymous>",e.displayName)),n}while(1<=r&&0<=g);break}}}finally{o0=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?lh(e):""}function yB(e){switch(e.tag){case 5:return lh(e.type);case 16:return lh("Lazy");case 13:return lh("Suspense");case 19:return lh("SuspenseList");case 0:case 2:case 15:return e=l0(e.type,!1),e;case 11:return e=l0(e.type.render,!1),e;case 1:return e=l0(e.type,!0),e;default:return""}}function mx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tl:return"Fragment";case Sl:return"Portal";case fx:return"Profiler";case O1:return"StrictMode";case dx:return"Suspense";case px:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case tR:return(e.displayName||"Context")+".Consumer";case _I:return(e._context.displayName||"Context")+".Provider";case D1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L1:return t=e.displayName||null,t!==null?t:mx(e.type)||"Memo";case aa:t=e._payload,e=e._init;try{return mx(e(t))}catch{}}return null}function SB(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mx(t);case 8:return t===O1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TB(e){var t=nR(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,y=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(r){i=""+r,y.call(this,r)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(r){i=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _f(e){e._valueTracker||(e._valueTracker=TB(e))}function sR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),i="";return e&&(i=nR(e)?e.checked?"true":"false":e.value),e=i,e!==s?(t.setValue(e),!0):!1}function sp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vx(e,t){var s=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Qw(e,t){var s=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;s=Pa(t.value!=null?t.value:s),e._wrapperState={initialChecked:i,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function iR(e,t){t=t.checked,t!=null&&F1(e,"checked",t,!1)}function gx(e,t){iR(e,t);var s=Pa(t.value),i=t.type;if(s!=null)i==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xx(e,t.type,s):t.hasOwnProperty("defaultValue")&&xx(e,t.type,Pa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qw(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function xx(e,t,s){(t!=="number"||sp(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var uh=Array.isArray;function Dl(e,t,s,i){if(e=e.options,t){t={};for(var o=0;o<s.length;o++)t["$"+s[o]]=!0;for(s=0;s<e.length;s++)o=t.hasOwnProperty("$"+e[s].value),e[s].selected!==o&&(e[s].selected=o),o&&i&&(e[s].defaultSelected=!0)}else{for(s=""+Pa(s),t=null,o=0;o<e.length;o++){if(e[o].value===s){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function yx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(It(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _w(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(It(92));if(uh(s)){if(1<s.length)throw Error(It(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Pa(s)}}function rR(e,t){var s=Pa(t.value),i=Pa(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),i!=null&&(e.defaultValue=""+i)}function tE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function aR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?aR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var td,oR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,s,i,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(td=td||document.createElement("div"),td.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=td.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Oh(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var yh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CB=["Webkit","ms","Moz","O"];Object.keys(yh).forEach(function(e){CB.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yh[t]=yh[e]})});function lR(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||yh.hasOwnProperty(e)&&yh[e]?(""+t).trim():t+"px"}function uR(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var i=s.indexOf("--")===0,o=lR(s,t[s],i);s==="float"&&(s="cssFloat"),i?e.setProperty(s,o):e[s]=o}}var wB=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tx(e,t){if(t){if(wB[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(It(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(It(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(It(61))}if(t.style!=null&&typeof t.style!="object")throw Error(It(62))}}function Cx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wx=null;function M1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ex=null,Ll=null,Ml=null;function eE(e){if(e=xc(e)){if(typeof Ex!="function")throw Error(It(280));var t=e.stateNode;t&&(t=Cm(t),Ex(e.stateNode,e.type,t))}}function hR(e){Ll?Ml?Ml.push(e):Ml=[e]:Ll=e}function cR(){if(Ll){var e=Ll,t=Ml;if(Ml=Ll=null,eE(e),t)for(e=0;e<t.length;e++)eE(t[e])}}function fR(e,t){return e(t)}function dR(){}var u0=!1;function pR(e,t,s){if(u0)return e(t,s);u0=!0;try{return fR(e,t,s)}finally{u0=!1,(Ll!==null||Ml!==null)&&(dR(),cR())}}function Dh(e,t){var s=e.stateNode;if(s===null)return null;var i=Cm(s);if(i===null)return null;s=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(It(231,t,typeof s));return s}var bx=!1;if(Ur)try{var ju={};Object.defineProperty(ju,"passive",{get:function(){bx=!0}}),window.addEventListener("test",ju,ju),window.removeEventListener("test",ju,ju)}catch{bx=!1}function EB(e,t,s,i,o,y,r,g,n){var a=Array.prototype.slice.call(arguments,3);try{t.apply(s,a)}catch(p){this.onError(p)}}var Sh=!1,ip=null,rp=!1,Ax=null,bB={onError:function(e){Sh=!0,ip=e}};function AB(e,t,s,i,o,y,r,g,n){Sh=!1,ip=null,EB.apply(bB,arguments)}function IB(e,t,s,i,o,y,r,g,n){if(AB.apply(this,arguments),Sh){if(Sh){var a=ip;Sh=!1,ip=null}else throw Error(It(198));rp||(rp=!0,Ax=a)}}function Ho(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function mR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nE(e){if(Ho(e)!==e)throw Error(It(188))}function RB(e){var t=e.alternate;if(!t){if(t=Ho(e),t===null)throw Error(It(188));return t!==e?null:e}for(var s=e,i=t;;){var o=s.return;if(o===null)break;var y=o.alternate;if(y===null){if(i=o.return,i!==null){s=i;continue}break}if(o.child===y.child){for(y=o.child;y;){if(y===s)return nE(o),e;if(y===i)return nE(o),t;y=y.sibling}throw Error(It(188))}if(s.return!==i.return)s=o,i=y;else{for(var r=!1,g=o.child;g;){if(g===s){r=!0,s=o,i=y;break}if(g===i){r=!0,i=o,s=y;break}g=g.sibling}if(!r){for(g=y.child;g;){if(g===s){r=!0,s=y,i=o;break}if(g===i){r=!0,i=y,s=o;break}g=g.sibling}if(!r)throw Error(It(189))}}if(s.alternate!==i)throw Error(It(190))}if(s.tag!==3)throw Error(It(188));return s.stateNode.current===s?e:t}function vR(e){return e=RB(e),e!==null?gR(e):null}function gR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gR(e);if(t!==null)return t;e=e.sibling}return null}var xR=Ys.unstable_scheduleCallback,sE=Ys.unstable_cancelCallback,NB=Ys.unstable_shouldYield,PB=Ys.unstable_requestPaint,an=Ys.unstable_now,FB=Ys.unstable_getCurrentPriorityLevel,$1=Ys.unstable_ImmediatePriority,yR=Ys.unstable_UserBlockingPriority,ap=Ys.unstable_NormalPriority,OB=Ys.unstable_LowPriority,SR=Ys.unstable_IdlePriority,xm=null,fr=null;function DB(e){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(xm,e,void 0,(e.current.flags&128)===128)}catch{}}var Vi=Math.clz32?Math.clz32:$B,LB=Math.log,MB=Math.LN2;function $B(e){return e>>>=0,e===0?32:31-(LB(e)/MB|0)|0}var ed=64,nd=4194304;function hh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function op(e,t){var s=e.pendingLanes;if(s===0)return 0;var i=0,o=e.suspendedLanes,y=e.pingedLanes,r=s&268435455;if(r!==0){var g=r&~o;g!==0?i=hh(g):(y&=r,y!==0&&(i=hh(y)))}else r=s&~o,r!==0?i=hh(r):y!==0&&(i=hh(y));if(i===0)return 0;if(t!==0&&t!==i&&!(t&o)&&(o=i&-i,y=t&-t,o>=y||o===16&&(y&4194240)!==0))return t;if(i&4&&(i|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)s=31-Vi(t),o=1<<s,i|=e[s],t&=~o;return i}function BB(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kB(e,t){for(var s=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,y=e.pendingLanes;0<y;){var r=31-Vi(y),g=1<<r,n=o[r];n===-1?(!(g&s)||g&i)&&(o[r]=BB(g,t)):n<=t&&(e.expiredLanes|=g),y&=~g}}function Ix(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TR(){var e=ed;return ed<<=1,!(ed&4194240)&&(ed=64),e}function h0(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function vc(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vi(t),e[t]=s}function zB(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<s;){var o=31-Vi(s),y=1<<o;t[o]=0,i[o]=-1,e[o]=-1,s&=~y}}function B1(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var i=31-Vi(s),o=1<<i;o&t|e[i]&t&&(e[i]|=t),s&=~o}}var Ce=0;function CR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wR,k1,ER,bR,AR,Rx=!1,sd=[],ga=null,xa=null,ya=null,Lh=new Map,Mh=new Map,ua=[],VB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iE(e,t){switch(e){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":Lh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(t.pointerId)}}function Zu(e,t,s,i,o,y){return e===null||e.nativeEvent!==y?(e={blockedOn:t,domEventName:s,eventSystemFlags:i,nativeEvent:y,targetContainers:[o]},t!==null&&(t=xc(t),t!==null&&k1(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function GB(e,t,s,i,o){switch(t){case"focusin":return ga=Zu(ga,e,t,s,i,o),!0;case"dragenter":return xa=Zu(xa,e,t,s,i,o),!0;case"mouseover":return ya=Zu(ya,e,t,s,i,o),!0;case"pointerover":var y=o.pointerId;return Lh.set(y,Zu(Lh.get(y)||null,e,t,s,i,o)),!0;case"gotpointercapture":return y=o.pointerId,Mh.set(y,Zu(Mh.get(y)||null,e,t,s,i,o)),!0}return!1}function IR(e){var t=po(e.target);if(t!==null){var s=Ho(t);if(s!==null){if(t=s.tag,t===13){if(t=mR(s),t!==null){e.blockedOn=t,AR(e.priority,function(){ER(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $d(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Nx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var i=new s.constructor(s.type,s);wx=i,s.target.dispatchEvent(i),wx=null}else return t=xc(s),t!==null&&k1(t),e.blockedOn=s,!1;t.shift()}return!0}function rE(e,t,s){$d(e)&&s.delete(t)}function UB(){Rx=!1,ga!==null&&$d(ga)&&(ga=null),xa!==null&&$d(xa)&&(xa=null),ya!==null&&$d(ya)&&(ya=null),Lh.forEach(rE),Mh.forEach(rE)}function Ju(e,t){e.blockedOn===t&&(e.blockedOn=null,Rx||(Rx=!0,Ys.unstable_scheduleCallback(Ys.unstable_NormalPriority,UB)))}function $h(e){function t(o){return Ju(o,e)}if(0<sd.length){Ju(sd[0],e);for(var s=1;s<sd.length;s++){var i=sd[s];i.blockedOn===e&&(i.blockedOn=null)}}for(ga!==null&&Ju(ga,e),xa!==null&&Ju(xa,e),ya!==null&&Ju(ya,e),Lh.forEach(t),Mh.forEach(t),s=0;s<ua.length;s++)i=ua[s],i.blockedOn===e&&(i.blockedOn=null);for(;0<ua.length&&(s=ua[0],s.blockedOn===null);)IR(s),s.blockedOn===null&&ua.shift()}var $l=Zr.ReactCurrentBatchConfig,lp=!0;function WB(e,t,s,i){var o=Ce,y=$l.transition;$l.transition=null;try{Ce=1,z1(e,t,s,i)}finally{Ce=o,$l.transition=y}}function HB(e,t,s,i){var o=Ce,y=$l.transition;$l.transition=null;try{Ce=4,z1(e,t,s,i)}finally{Ce=o,$l.transition=y}}function z1(e,t,s,i){if(lp){var o=Nx(e,t,s,i);if(o===null)S0(e,t,i,up,s),iE(e,i);else if(GB(o,e,t,s,i))i.stopPropagation();else if(iE(e,i),t&4&&-1<VB.indexOf(e)){for(;o!==null;){var y=xc(o);if(y!==null&&wR(y),y=Nx(e,t,s,i),y===null&&S0(e,t,i,up,s),y===o)break;o=y}o!==null&&i.stopPropagation()}else S0(e,t,i,null,s)}}var up=null;function Nx(e,t,s,i){if(up=null,e=M1(i),e=po(e),e!==null)if(t=Ho(e),t===null)e=null;else if(s=t.tag,s===13){if(e=mR(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return up=e,null}function RR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FB()){case $1:return 1;case yR:return 4;case ap:case OB:return 16;case SR:return 536870912;default:return 16}default:return 16}}var ca=null,V1=null,Bd=null;function NR(){if(Bd)return Bd;var e,t=V1,s=t.length,i,o="value"in ca?ca.value:ca.textContent,y=o.length;for(e=0;e<s&&t[e]===o[e];e++);var r=s-e;for(i=1;i<=r&&t[s-i]===o[y-i];i++);return Bd=o.slice(e,1<i?1-i:void 0)}function kd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function id(){return!0}function aE(){return!1}function qs(e){function t(s,i,o,y,r){this._reactName=s,this._targetInst=o,this.type=i,this.nativeEvent=y,this.target=r,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(s=e[g],this[g]=s?s(y):y[g]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?id:aE,this.isPropagationStopped=aE,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=id)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=id)},persist:function(){},isPersistent:id}),t}var xu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},G1=qs(xu),gc=je({},xu,{view:0,detail:0}),XB=qs(gc),c0,f0,Qu,ym=je({},gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qu&&(Qu&&e.type==="mousemove"?(c0=e.screenX-Qu.screenX,f0=e.screenY-Qu.screenY):f0=c0=0,Qu=e),c0)},movementY:function(e){return"movementY"in e?e.movementY:f0}}),oE=qs(ym),YB=je({},ym,{dataTransfer:0}),KB=qs(YB),jB=je({},gc,{relatedTarget:0}),d0=qs(jB),ZB=je({},xu,{animationName:0,elapsedTime:0,pseudoElement:0}),JB=qs(ZB),QB=je({},xu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qB=qs(QB),_B=je({},xu,{data:0}),lE=qs(_B),t9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=n9[e])?!!t[e]:!1}function U1(){return s9}var i9=je({},gc,{key:function(e){if(e.key){var t=t9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?e9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U1,charCode:function(e){return e.type==="keypress"?kd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),r9=qs(i9),a9=je({},ym,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uE=qs(a9),o9=je({},gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U1}),l9=qs(o9),u9=je({},xu,{propertyName:0,elapsedTime:0,pseudoElement:0}),h9=qs(u9),c9=je({},ym,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),f9=qs(c9),d9=[9,13,27,32],W1=Ur&&"CompositionEvent"in window,Th=null;Ur&&"documentMode"in document&&(Th=document.documentMode);var p9=Ur&&"TextEvent"in window&&!Th,PR=Ur&&(!W1||Th&&8<Th&&11>=Th),hE=String.fromCharCode(32),cE=!1;function FR(e,t){switch(e){case"keyup":return d9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cl=!1;function m9(e,t){switch(e){case"compositionend":return OR(t);case"keypress":return t.which!==32?null:(cE=!0,hE);case"textInput":return e=t.data,e===hE&&cE?null:e;default:return null}}function v9(e,t){if(Cl)return e==="compositionend"||!W1&&FR(e,t)?(e=NR(),Bd=V1=ca=null,Cl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return PR&&t.locale!=="ko"?null:t.data;default:return null}}var g9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!g9[e.type]:t==="textarea"}function DR(e,t,s,i){hR(i),t=hp(t,"onChange"),0<t.length&&(s=new G1("onChange","change",null,s,i),e.push({event:s,listeners:t}))}var Ch=null,Bh=null;function x9(e){HR(e,0)}function Sm(e){var t=bl(e);if(sR(t))return e}function y9(e,t){if(e==="change")return t}var LR=!1;if(Ur){var p0;if(Ur){var m0="oninput"in document;if(!m0){var dE=document.createElement("div");dE.setAttribute("oninput","return;"),m0=typeof dE.oninput=="function"}p0=m0}else p0=!1;LR=p0&&(!document.documentMode||9<document.documentMode)}function pE(){Ch&&(Ch.detachEvent("onpropertychange",MR),Bh=Ch=null)}function MR(e){if(e.propertyName==="value"&&Sm(Bh)){var t=[];DR(t,Bh,e,M1(e)),pR(x9,t)}}function S9(e,t,s){e==="focusin"?(pE(),Ch=t,Bh=s,Ch.attachEvent("onpropertychange",MR)):e==="focusout"&&pE()}function T9(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sm(Bh)}function C9(e,t){if(e==="click")return Sm(t)}function w9(e,t){if(e==="input"||e==="change")return Sm(t)}function E9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hi=typeof Object.is=="function"?Object.is:E9;function kh(e,t){if(Hi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var o=s[i];if(!cx.call(t,o)||!Hi(e[o],t[o]))return!1}return!0}function mE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vE(e,t){var s=mE(e);e=0;for(var i;s;){if(s.nodeType===3){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=mE(s)}}function $R(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$R(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function BR(){for(var e=window,t=sp();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=sp(e.document)}return t}function H1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function b9(e){var t=BR(),s=e.focusedElem,i=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&$R(s.ownerDocument.documentElement,s)){if(i!==null&&H1(s)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=s.textContent.length,y=Math.min(i.start,o);i=i.end===void 0?y:Math.min(i.end,o),!e.extend&&y>i&&(o=i,i=y,y=o),o=vE(s,y);var r=vE(s,i);o&&r&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),y>i?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var A9=Ur&&"documentMode"in document&&11>=document.documentMode,wl=null,Px=null,wh=null,Fx=!1;function gE(e,t,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Fx||wl==null||wl!==sp(i)||(i=wl,"selectionStart"in i&&H1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),wh&&kh(wh,i)||(wh=i,i=hp(Px,"onSelect"),0<i.length&&(t=new G1("onSelect","select",null,t,s),e.push({event:t,listeners:i}),t.target=wl)))}function rd(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var El={animationend:rd("Animation","AnimationEnd"),animationiteration:rd("Animation","AnimationIteration"),animationstart:rd("Animation","AnimationStart"),transitionend:rd("Transition","TransitionEnd")},v0={},kR={};Ur&&(kR=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function Tm(e){if(v0[e])return v0[e];if(!El[e])return e;var t=El[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in kR)return v0[e]=t[s];return e}var zR=Tm("animationend"),VR=Tm("animationiteration"),GR=Tm("animationstart"),UR=Tm("transitionend"),WR=new Map,xE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ua(e,t){WR.set(e,t),Wo(t,[e])}for(var g0=0;g0<xE.length;g0++){var x0=xE[g0],I9=x0.toLowerCase(),R9=x0[0].toUpperCase()+x0.slice(1);Ua(I9,"on"+R9)}Ua(zR,"onAnimationEnd");Ua(VR,"onAnimationIteration");Ua(GR,"onAnimationStart");Ua("dblclick","onDoubleClick");Ua("focusin","onFocus");Ua("focusout","onBlur");Ua(UR,"onTransitionEnd");Kl("onMouseEnter",["mouseout","mouseover"]);Kl("onMouseLeave",["mouseout","mouseover"]);Kl("onPointerEnter",["pointerout","pointerover"]);Kl("onPointerLeave",["pointerout","pointerover"]);Wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N9=new Set("cancel close invalid load scroll toggle".split(" ").concat(ch));function yE(e,t,s){var i=e.type||"unknown-event";e.currentTarget=s,IB(i,t,void 0,e),e.currentTarget=null}function HR(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var i=e[s],o=i.event;i=i.listeners;t:{var y=void 0;if(t)for(var r=i.length-1;0<=r;r--){var g=i[r],n=g.instance,a=g.currentTarget;if(g=g.listener,n!==y&&o.isPropagationStopped())break t;yE(o,g,a),y=n}else for(r=0;r<i.length;r++){if(g=i[r],n=g.instance,a=g.currentTarget,g=g.listener,n!==y&&o.isPropagationStopped())break t;yE(o,g,a),y=n}}}if(rp)throw e=Ax,rp=!1,Ax=null,e}function Me(e,t){var s=t[$x];s===void 0&&(s=t[$x]=new Set);var i=e+"__bubble";s.has(i)||(XR(t,e,2,!1),s.add(i))}function y0(e,t,s){var i=0;t&&(i|=4),XR(s,e,i,t)}var ad="_reactListening"+Math.random().toString(36).slice(2);function zh(e){if(!e[ad]){e[ad]=!0,qI.forEach(function(s){s!=="selectionchange"&&(N9.has(s)||y0(s,!1,e),y0(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ad]||(t[ad]=!0,y0("selectionchange",!1,t))}}function XR(e,t,s,i){switch(RR(t)){case 1:var o=WB;break;case 4:o=HB;break;default:o=z1}s=o.bind(null,t,s,e),o=void 0,!bx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,s,{capture:!0,passive:o}):e.addEventListener(t,s,!0):o!==void 0?e.addEventListener(t,s,{passive:o}):e.addEventListener(t,s,!1)}function S0(e,t,s,i,o){var y=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var g=i.stateNode.containerInfo;if(g===o||g.nodeType===8&&g.parentNode===o)break;if(r===4)for(r=i.return;r!==null;){var n=r.tag;if((n===3||n===4)&&(n=r.stateNode.containerInfo,n===o||n.nodeType===8&&n.parentNode===o))return;r=r.return}for(;g!==null;){if(r=po(g),r===null)return;if(n=r.tag,n===5||n===6){i=y=r;continue t}g=g.parentNode}}i=i.return}pR(function(){var a=y,p=M1(s),h=[];t:{var u=WR.get(e);if(u!==void 0){var d=G1,l=e;switch(e){case"keypress":if(kd(s)===0)break t;case"keydown":case"keyup":d=r9;break;case"focusin":l="focus",d=d0;break;case"focusout":l="blur",d=d0;break;case"beforeblur":case"afterblur":d=d0;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=oE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=KB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=l9;break;case zR:case VR:case GR:d=JB;break;case UR:d=h9;break;case"scroll":d=XB;break;case"wheel":d=f9;break;case"copy":case"cut":case"paste":d=qB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=uE}var c=(t&4)!==0,m=!c&&e==="scroll",f=c?u!==null?u+"Capture":null:u;c=[];for(var v=a,S;v!==null;){S=v;var x=S.stateNode;if(S.tag===5&&x!==null&&(S=x,f!==null&&(x=Dh(v,f),x!=null&&c.push(Vh(v,x,S)))),m)break;v=v.return}0<c.length&&(u=new d(u,l,null,s,p),h.push({event:u,listeners:c}))}}if(!(t&7)){t:{if(u=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",u&&s!==wx&&(l=s.relatedTarget||s.fromElement)&&(po(l)||l[Wr]))break t;if((d||u)&&(u=p.window===p?p:(u=p.ownerDocument)?u.defaultView||u.parentWindow:window,d?(l=s.relatedTarget||s.toElement,d=a,l=l?po(l):null,l!==null&&(m=Ho(l),l!==m||l.tag!==5&&l.tag!==6)&&(l=null)):(d=null,l=a),d!==l)){if(c=oE,x="onMouseLeave",f="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(c=uE,x="onPointerLeave",f="onPointerEnter",v="pointer"),m=d==null?u:bl(d),S=l==null?u:bl(l),u=new c(x,v+"leave",d,s,p),u.target=m,u.relatedTarget=S,x=null,po(p)===a&&(c=new c(f,v+"enter",l,s,p),c.target=S,c.relatedTarget=m,x=c),m=x,d&&l)e:{for(c=d,f=l,v=0,S=c;S;S=hl(S))v++;for(S=0,x=f;x;x=hl(x))S++;for(;0<v-S;)c=hl(c),v--;for(;0<S-v;)f=hl(f),S--;for(;v--;){if(c===f||f!==null&&c===f.alternate)break e;c=hl(c),f=hl(f)}c=null}else c=null;d!==null&&SE(h,u,d,c,!1),l!==null&&m!==null&&SE(h,m,l,c,!0)}}t:{if(u=a?bl(a):window,d=u.nodeName&&u.nodeName.toLowerCase(),d==="select"||d==="input"&&u.type==="file")var T=y9;else if(fE(u))if(LR)T=w9;else{T=T9;var C=S9}else(d=u.nodeName)&&d.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(T=C9);if(T&&(T=T(e,a))){DR(h,T,s,p);break t}C&&C(e,u,a),e==="focusout"&&(C=u._wrapperState)&&C.controlled&&u.type==="number"&&xx(u,"number",u.value)}switch(C=a?bl(a):window,e){case"focusin":(fE(C)||C.contentEditable==="true")&&(wl=C,Px=a,wh=null);break;case"focusout":wh=Px=wl=null;break;case"mousedown":Fx=!0;break;case"contextmenu":case"mouseup":case"dragend":Fx=!1,gE(h,s,p);break;case"selectionchange":if(A9)break;case"keydown":case"keyup":gE(h,s,p)}var w;if(W1)t:{switch(e){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Cl?FR(e,s)&&(b="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(b="onCompositionStart");b&&(PR&&s.locale!=="ko"&&(Cl||b!=="onCompositionStart"?b==="onCompositionEnd"&&Cl&&(w=NR()):(ca=p,V1="value"in ca?ca.value:ca.textContent,Cl=!0)),C=hp(a,b),0<C.length&&(b=new lE(b,e,null,s,p),h.push({event:b,listeners:C}),w?b.data=w:(w=OR(s),w!==null&&(b.data=w)))),(w=p9?m9(e,s):v9(e,s))&&(a=hp(a,"onBeforeInput"),0<a.length&&(p=new lE("onBeforeInput","beforeinput",null,s,p),h.push({event:p,listeners:a}),p.data=w))}HR(h,t)})}function Vh(e,t,s){return{instance:e,listener:t,currentTarget:s}}function hp(e,t){for(var s=t+"Capture",i=[];e!==null;){var o=e,y=o.stateNode;o.tag===5&&y!==null&&(o=y,y=Dh(e,s),y!=null&&i.unshift(Vh(e,y,o)),y=Dh(e,t),y!=null&&i.push(Vh(e,y,o))),e=e.return}return i}function hl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function SE(e,t,s,i,o){for(var y=t._reactName,r=[];s!==null&&s!==i;){var g=s,n=g.alternate,a=g.stateNode;if(n!==null&&n===i)break;g.tag===5&&a!==null&&(g=a,o?(n=Dh(s,y),n!=null&&r.unshift(Vh(s,n,g))):o||(n=Dh(s,y),n!=null&&r.push(Vh(s,n,g)))),s=s.return}r.length!==0&&e.push({event:t,listeners:r})}var P9=/\r\n?/g,F9=/\u0000|\uFFFD/g;function TE(e){return(typeof e=="string"?e:""+e).replace(P9,`
`).replace(F9,"")}function od(e,t,s){if(t=TE(t),TE(e)!==t&&s)throw Error(It(425))}function cp(){}var Ox=null,Dx=null;function Lx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mx=typeof setTimeout=="function"?setTimeout:void 0,O9=typeof clearTimeout=="function"?clearTimeout:void 0,CE=typeof Promise=="function"?Promise:void 0,D9=typeof queueMicrotask=="function"?queueMicrotask:typeof CE<"u"?function(e){return CE.resolve(null).then(e).catch(L9)}:Mx;function L9(e){setTimeout(function(){throw e})}function T0(e,t){var s=t,i=0;do{var o=s.nextSibling;if(e.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(i===0){e.removeChild(o),$h(t);return}i--}else s!=="$"&&s!=="$?"&&s!=="$!"||i++;s=o}while(s);$h(t)}function Sa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var yu=Math.random().toString(36).slice(2),or="__reactFiber$"+yu,Gh="__reactProps$"+yu,Wr="__reactContainer$"+yu,$x="__reactEvents$"+yu,M9="__reactListeners$"+yu,$9="__reactHandles$"+yu;function po(e){var t=e[or];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Wr]||s[or]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=wE(e);e!==null;){if(s=e[or])return s;e=wE(e)}return t}e=s,s=e.parentNode}return null}function xc(e){return e=e[or]||e[Wr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(It(33))}function Cm(e){return e[Gh]||null}var Bx=[],Al=-1;function Wa(e){return{current:e}}function Be(e){0>Al||(e.current=Bx[Al],Bx[Al]=null,Al--)}function Fe(e,t){Al++,Bx[Al]=e.current,e.current=t}var Fa={},rs=Wa(Fa),Is=Wa(!1),Eo=Fa;function jl(e,t){var s=e.type.contextTypes;if(!s)return Fa;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={},y;for(y in s)o[y]=t[y];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Rs(e){return e=e.childContextTypes,e!=null}function fp(){Be(Is),Be(rs)}function EE(e,t,s){if(rs.current!==Fa)throw Error(It(168));Fe(rs,t),Fe(Is,s)}function YR(e,t,s){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return s;i=i.getChildContext();for(var o in i)if(!(o in t))throw Error(It(108,SB(e)||"Unknown",o));return je({},s,i)}function dp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fa,Eo=rs.current,Fe(rs,e),Fe(Is,Is.current),!0}function bE(e,t,s){var i=e.stateNode;if(!i)throw Error(It(169));s?(e=YR(e,t,Eo),i.__reactInternalMemoizedMergedChildContext=e,Be(Is),Be(rs),Fe(rs,e)):Be(Is),Fe(Is,s)}var Pr=null,wm=!1,C0=!1;function KR(e){Pr===null?Pr=[e]:Pr.push(e)}function B9(e){wm=!0,KR(e)}function Ha(){if(!C0&&Pr!==null){C0=!0;var e=0,t=Ce;try{var s=Pr;for(Ce=1;e<s.length;e++){var i=s[e];do i=i(!0);while(i!==null)}Pr=null,wm=!1}catch(o){throw Pr!==null&&(Pr=Pr.slice(e+1)),xR($1,Ha),o}finally{Ce=t,C0=!1}}return null}var Il=[],Rl=0,pp=null,mp=0,oi=[],li=0,bo=null,Mr=1,$r="";function ao(e,t){Il[Rl++]=mp,Il[Rl++]=pp,pp=e,mp=t}function jR(e,t,s){oi[li++]=Mr,oi[li++]=$r,oi[li++]=bo,bo=e;var i=Mr;e=$r;var o=32-Vi(i)-1;i&=~(1<<o),s+=1;var y=32-Vi(t)+o;if(30<y){var r=o-o%5;y=(i&(1<<r)-1).toString(32),i>>=r,o-=r,Mr=1<<32-Vi(t)+o|s<<o|i,$r=y+e}else Mr=1<<y|s<<o|i,$r=e}function X1(e){e.return!==null&&(ao(e,1),jR(e,1,0))}function Y1(e){for(;e===pp;)pp=Il[--Rl],Il[Rl]=null,mp=Il[--Rl],Il[Rl]=null;for(;e===bo;)bo=oi[--li],oi[li]=null,$r=oi[--li],oi[li]=null,Mr=oi[--li],oi[li]=null}var Hs=null,Gs=null,Ge=!1,Bi=null;function ZR(e,t){var s=hi(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function AE(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Hs=e,Gs=Sa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Hs=e,Gs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=bo!==null?{id:Mr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=hi(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Hs=e,Gs=null,!0):!1;default:return!1}}function kx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zx(e){if(Ge){var t=Gs;if(t){var s=t;if(!AE(e,t)){if(kx(e))throw Error(It(418));t=Sa(s.nextSibling);var i=Hs;t&&AE(e,t)?ZR(i,s):(e.flags=e.flags&-4097|2,Ge=!1,Hs=e)}}else{if(kx(e))throw Error(It(418));e.flags=e.flags&-4097|2,Ge=!1,Hs=e}}}function IE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Hs=e}function ld(e){if(e!==Hs)return!1;if(!Ge)return IE(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Lx(e.type,e.memoizedProps)),t&&(t=Gs)){if(kx(e))throw JR(),Error(It(418));for(;t;)ZR(e,t),t=Sa(t.nextSibling)}if(IE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(It(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Gs=Sa(e.nextSibling);break t}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Gs=null}}else Gs=Hs?Sa(e.stateNode.nextSibling):null;return!0}function JR(){for(var e=Gs;e;)e=Sa(e.nextSibling)}function Zl(){Gs=Hs=null,Ge=!1}function K1(e){Bi===null?Bi=[e]:Bi.push(e)}var k9=Zr.ReactCurrentBatchConfig;function Mi(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}var vp=Wa(null),gp=null,Nl=null,j1=null;function Z1(){j1=Nl=gp=null}function J1(e){var t=vp.current;Be(vp),e._currentValue=t}function Vx(e,t,s){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===s)break;e=e.return}}function Bl(e,t){gp=e,j1=Nl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bs=!0),e.firstContext=null)}function wi(e){var t=e._currentValue;if(j1!==e)if(e={context:e,memoizedValue:t,next:null},Nl===null){if(gp===null)throw Error(It(308));Nl=e,gp.dependencies={lanes:0,firstContext:e}}else Nl=Nl.next=e;return t}var mo=null;function Q1(e){mo===null?mo=[e]:mo.push(e)}function QR(e,t,s,i){var o=t.interleaved;return o===null?(s.next=s,Q1(t)):(s.next=o.next,o.next=s),t.interleaved=s,Hr(e,i)}function Hr(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var oa=!1;function q1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qR(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Br(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ta(e,t,s){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ve&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,Hr(e,s)}return o=i.interleaved,o===null?(t.next=t,Q1(i)):(t.next=o.next,o.next=t),i.interleaved=t,Hr(e,s)}function zd(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,B1(e,s)}}function RE(e,t){var s=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var o=null,y=null;if(s=s.firstBaseUpdate,s!==null){do{var r={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};y===null?o=y=r:y=y.next=r,s=s.next}while(s!==null);y===null?o=y=t:y=y.next=t}else o=y=t;s={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:y,shared:i.shared,effects:i.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function xp(e,t,s,i){var o=e.updateQueue;oa=!1;var y=o.firstBaseUpdate,r=o.lastBaseUpdate,g=o.shared.pending;if(g!==null){o.shared.pending=null;var n=g,a=n.next;n.next=null,r===null?y=a:r.next=a,r=n;var p=e.alternate;p!==null&&(p=p.updateQueue,g=p.lastBaseUpdate,g!==r&&(g===null?p.firstBaseUpdate=a:g.next=a,p.lastBaseUpdate=n))}if(y!==null){var h=o.baseState;r=0,p=a=n=null,g=y;do{var u=g.lane,d=g.eventTime;if((i&u)===u){p!==null&&(p=p.next={eventTime:d,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});t:{var l=e,c=g;switch(u=t,d=s,c.tag){case 1:if(l=c.payload,typeof l=="function"){h=l.call(d,h,u);break t}h=l;break t;case 3:l.flags=l.flags&-65537|128;case 0:if(l=c.payload,u=typeof l=="function"?l.call(d,h,u):l,u==null)break t;h=je({},h,u);break t;case 2:oa=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,u=o.effects,u===null?o.effects=[g]:u.push(g))}else d={eventTime:d,lane:u,tag:g.tag,payload:g.payload,callback:g.callback,next:null},p===null?(a=p=d,n=h):p=p.next=d,r|=u;if(g=g.next,g===null){if(g=o.shared.pending,g===null)break;u=g,g=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}while(1);if(p===null&&(n=h),o.baseState=n,o.firstBaseUpdate=a,o.lastBaseUpdate=p,t=o.shared.interleaved,t!==null){o=t;do r|=o.lane,o=o.next;while(o!==t)}else y===null&&(o.shared.lanes=0);Io|=r,e.lanes=r,e.memoizedState=h}}function NE(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(o!==null){if(i.callback=null,i=s,typeof o!="function")throw Error(It(191,o));o.call(i)}}}var _R=new QI.Component().refs;function Gx(e,t,s,i){t=e.memoizedState,s=s(i,t),s=s==null?t:je({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Em={isMounted:function(e){return(e=e._reactInternals)?Ho(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var i=ps(),o=wa(e),y=Br(i,o);y.payload=t,s!=null&&(y.callback=s),t=Ta(e,y,o),t!==null&&(Gi(t,e,o,i),zd(t,e,o))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var i=ps(),o=wa(e),y=Br(i,o);y.tag=1,y.payload=t,s!=null&&(y.callback=s),t=Ta(e,y,o),t!==null&&(Gi(t,e,o,i),zd(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ps(),i=wa(e),o=Br(s,i);o.tag=2,t!=null&&(o.callback=t),t=Ta(e,o,i),t!==null&&(Gi(t,e,i,s),zd(t,e,i))}};function PE(e,t,s,i,o,y,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,y,r):t.prototype&&t.prototype.isPureReactComponent?!kh(s,i)||!kh(o,y):!0}function tN(e,t,s){var i=!1,o=Fa,y=t.contextType;return typeof y=="object"&&y!==null?y=wi(y):(o=Rs(t)?Eo:rs.current,i=t.contextTypes,y=(i=i!=null)?jl(e,o):Fa),t=new t(s,y),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Em,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=y),t}function FE(e,t,s,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,i),t.state!==e&&Em.enqueueReplaceState(t,t.state,null)}function Ux(e,t,s,i){var o=e.stateNode;o.props=s,o.state=e.memoizedState,o.refs=_R,q1(e);var y=t.contextType;typeof y=="object"&&y!==null?o.context=wi(y):(y=Rs(t)?Eo:rs.current,o.context=jl(e,y)),o.state=e.memoizedState,y=t.getDerivedStateFromProps,typeof y=="function"&&(Gx(e,t,y,s),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Em.enqueueReplaceState(o,o.state,null),xp(e,s,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function qu(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(It(309));var i=s.stateNode}if(!i)throw Error(It(147,e));var o=i,y=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===y?t.ref:(t=function(r){var g=o.refs;g===_R&&(g=o.refs={}),r===null?delete g[y]:g[y]=r},t._stringRef=y,t)}if(typeof e!="string")throw Error(It(284));if(!s._owner)throw Error(It(290,e))}return e}function ud(e,t){throw e=Object.prototype.toString.call(t),Error(It(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function OE(e){var t=e._init;return t(e._payload)}function eN(e){function t(f,v){if(e){var S=f.deletions;S===null?(f.deletions=[v],f.flags|=16):S.push(v)}}function s(f,v){if(!e)return null;for(;v!==null;)t(f,v),v=v.sibling;return null}function i(f,v){for(f=new Map;v!==null;)v.key!==null?f.set(v.key,v):f.set(v.index,v),v=v.sibling;return f}function o(f,v){return f=Ea(f,v),f.index=0,f.sibling=null,f}function y(f,v,S){return f.index=S,e?(S=f.alternate,S!==null?(S=S.index,S<v?(f.flags|=2,v):S):(f.flags|=2,v)):(f.flags|=1048576,v)}function r(f){return e&&f.alternate===null&&(f.flags|=2),f}function g(f,v,S,x){return v===null||v.tag!==6?(v=N0(S,f.mode,x),v.return=f,v):(v=o(v,S),v.return=f,v)}function n(f,v,S,x){var T=S.type;return T===Tl?p(f,v,S.props.children,x,S.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===aa&&OE(T)===v.type)?(x=o(v,S.props),x.ref=qu(f,v,S),x.return=f,x):(x=Xd(S.type,S.key,S.props,null,f.mode,x),x.ref=qu(f,v,S),x.return=f,x)}function a(f,v,S,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=P0(S,f.mode,x),v.return=f,v):(v=o(v,S.children||[]),v.return=f,v)}function p(f,v,S,x,T){return v===null||v.tag!==7?(v=To(S,f.mode,x,T),v.return=f,v):(v=o(v,S),v.return=f,v)}function h(f,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=N0(""+v,f.mode,S),v.return=f,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case qf:return S=Xd(v.type,v.key,v.props,null,f.mode,S),S.ref=qu(f,null,v),S.return=f,S;case Sl:return v=P0(v,f.mode,S),v.return=f,v;case aa:var x=v._init;return h(f,x(v._payload),S)}if(uh(v)||Ku(v))return v=To(v,f.mode,S,null),v.return=f,v;ud(f,v)}return null}function u(f,v,S,x){var T=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return T!==null?null:g(f,v,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case qf:return S.key===T?n(f,v,S,x):null;case Sl:return S.key===T?a(f,v,S,x):null;case aa:return T=S._init,u(f,v,T(S._payload),x)}if(uh(S)||Ku(S))return T!==null?null:p(f,v,S,x,null);ud(f,S)}return null}function d(f,v,S,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return f=f.get(S)||null,g(v,f,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case qf:return f=f.get(x.key===null?S:x.key)||null,n(v,f,x,T);case Sl:return f=f.get(x.key===null?S:x.key)||null,a(v,f,x,T);case aa:var C=x._init;return d(f,v,S,C(x._payload),T)}if(uh(x)||Ku(x))return f=f.get(S)||null,p(v,f,x,T,null);ud(v,x)}return null}function l(f,v,S,x){for(var T=null,C=null,w=v,b=v=0,E=null;w!==null&&b<S.length;b++){w.index>b?(E=w,w=null):E=w.sibling;var A=u(f,w,S[b],x);if(A===null){w===null&&(w=E);break}e&&w&&A.alternate===null&&t(f,w),v=y(A,v,b),C===null?T=A:C.sibling=A,C=A,w=E}if(b===S.length)return s(f,w),Ge&&ao(f,b),T;if(w===null){for(;b<S.length;b++)w=h(f,S[b],x),w!==null&&(v=y(w,v,b),C===null?T=w:C.sibling=w,C=w);return Ge&&ao(f,b),T}for(w=i(f,w);b<S.length;b++)E=d(w,f,b,S[b],x),E!==null&&(e&&E.alternate!==null&&w.delete(E.key===null?b:E.key),v=y(E,v,b),C===null?T=E:C.sibling=E,C=E);return e&&w.forEach(function(I){return t(f,I)}),Ge&&ao(f,b),T}function c(f,v,S,x){var T=Ku(S);if(typeof T!="function")throw Error(It(150));if(S=T.call(S),S==null)throw Error(It(151));for(var C=T=null,w=v,b=v=0,E=null,A=S.next();w!==null&&!A.done;b++,A=S.next()){w.index>b?(E=w,w=null):E=w.sibling;var I=u(f,w,A.value,x);if(I===null){w===null&&(w=E);break}e&&w&&I.alternate===null&&t(f,w),v=y(I,v,b),C===null?T=I:C.sibling=I,C=I,w=E}if(A.done)return s(f,w),Ge&&ao(f,b),T;if(w===null){for(;!A.done;b++,A=S.next())A=h(f,A.value,x),A!==null&&(v=y(A,v,b),C===null?T=A:C.sibling=A,C=A);return Ge&&ao(f,b),T}for(w=i(f,w);!A.done;b++,A=S.next())A=d(w,f,b,A.value,x),A!==null&&(e&&A.alternate!==null&&w.delete(A.key===null?b:A.key),v=y(A,v,b),C===null?T=A:C.sibling=A,C=A);return e&&w.forEach(function(R){return t(f,R)}),Ge&&ao(f,b),T}function m(f,v,S,x){if(typeof S=="object"&&S!==null&&S.type===Tl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case qf:t:{for(var T=S.key,C=v;C!==null;){if(C.key===T){if(T=S.type,T===Tl){if(C.tag===7){s(f,C.sibling),v=o(C,S.props.children),v.return=f,f=v;break t}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===aa&&OE(T)===C.type){s(f,C.sibling),v=o(C,S.props),v.ref=qu(f,C,S),v.return=f,f=v;break t}s(f,C);break}else t(f,C);C=C.sibling}S.type===Tl?(v=To(S.props.children,f.mode,x,S.key),v.return=f,f=v):(x=Xd(S.type,S.key,S.props,null,f.mode,x),x.ref=qu(f,v,S),x.return=f,f=x)}return r(f);case Sl:t:{for(C=S.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){s(f,v.sibling),v=o(v,S.children||[]),v.return=f,f=v;break t}else{s(f,v);break}else t(f,v);v=v.sibling}v=P0(S,f.mode,x),v.return=f,f=v}return r(f);case aa:return C=S._init,m(f,v,C(S._payload),x)}if(uh(S))return l(f,v,S,x);if(Ku(S))return c(f,v,S,x);ud(f,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(s(f,v.sibling),v=o(v,S),v.return=f,f=v):(s(f,v),v=N0(S,f.mode,x),v.return=f,f=v),r(f)):s(f,v)}return m}var Jl=eN(!0),nN=eN(!1),yc={},dr=Wa(yc),Uh=Wa(yc),Wh=Wa(yc);function vo(e){if(e===yc)throw Error(It(174));return e}function _1(e,t){switch(Fe(Wh,t),Fe(Uh,e),Fe(dr,yc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Sx(t,e)}Be(dr),Fe(dr,t)}function Ql(){Be(dr),Be(Uh),Be(Wh)}function sN(e){vo(Wh.current);var t=vo(dr.current),s=Sx(t,e.type);t!==s&&(Fe(Uh,e),Fe(dr,s))}function t2(e){Uh.current===e&&(Be(dr),Be(Uh))}var Xe=Wa(0);function yp(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var w0=[];function e2(){for(var e=0;e<w0.length;e++)w0[e]._workInProgressVersionPrimary=null;w0.length=0}var Vd=Zr.ReactCurrentDispatcher,E0=Zr.ReactCurrentBatchConfig,Ao=0,Ke=null,Cn=null,Pn=null,Sp=!1,Eh=!1,Hh=0,z9=0;function Zn(){throw Error(It(321))}function n2(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Hi(e[s],t[s]))return!1;return!0}function s2(e,t,s,i,o,y){if(Ao=y,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vd.current=e===null||e.memoizedState===null?W9:H9,e=s(i,o),Eh){y=0;do{if(Eh=!1,Hh=0,25<=y)throw Error(It(301));y+=1,Pn=Cn=null,t.updateQueue=null,Vd.current=X9,e=s(i,o)}while(Eh)}if(Vd.current=Tp,t=Cn!==null&&Cn.next!==null,Ao=0,Pn=Cn=Ke=null,Sp=!1,t)throw Error(It(300));return e}function i2(){var e=Hh!==0;return Hh=0,e}function _i(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Ke.memoizedState=Pn=e:Pn=Pn.next=e,Pn}function Ei(){if(Cn===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=Cn.next;var t=Pn===null?Ke.memoizedState:Pn.next;if(t!==null)Pn=t,Cn=e;else{if(e===null)throw Error(It(310));Cn=e,e={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},Pn===null?Ke.memoizedState=Pn=e:Pn=Pn.next=e}return Pn}function Xh(e,t){return typeof t=="function"?t(e):t}function b0(e){var t=Ei(),s=t.queue;if(s===null)throw Error(It(311));s.lastRenderedReducer=e;var i=Cn,o=i.baseQueue,y=s.pending;if(y!==null){if(o!==null){var r=o.next;o.next=y.next,y.next=r}i.baseQueue=o=y,s.pending=null}if(o!==null){y=o.next,i=i.baseState;var g=r=null,n=null,a=y;do{var p=a.lane;if((Ao&p)===p)n!==null&&(n=n.next={lane:0,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null}),i=a.hasEagerState?a.eagerState:e(i,a.action);else{var h={lane:p,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null};n===null?(g=n=h,r=i):n=n.next=h,Ke.lanes|=p,Io|=p}a=a.next}while(a!==null&&a!==y);n===null?r=i:n.next=g,Hi(i,t.memoizedState)||(bs=!0),t.memoizedState=i,t.baseState=r,t.baseQueue=n,s.lastRenderedState=i}if(e=s.interleaved,e!==null){o=e;do y=o.lane,Ke.lanes|=y,Io|=y,o=o.next;while(o!==e)}else o===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function A0(e){var t=Ei(),s=t.queue;if(s===null)throw Error(It(311));s.lastRenderedReducer=e;var i=s.dispatch,o=s.pending,y=t.memoizedState;if(o!==null){s.pending=null;var r=o=o.next;do y=e(y,r.action),r=r.next;while(r!==o);Hi(y,t.memoizedState)||(bs=!0),t.memoizedState=y,t.baseQueue===null&&(t.baseState=y),s.lastRenderedState=y}return[y,i]}function iN(){}function rN(e,t){var s=Ke,i=Ei(),o=t(),y=!Hi(i.memoizedState,o);if(y&&(i.memoizedState=o,bs=!0),i=i.queue,r2(lN.bind(null,s,i,e),[e]),i.getSnapshot!==t||y||Pn!==null&&Pn.memoizedState.tag&1){if(s.flags|=2048,Yh(9,oN.bind(null,s,i,o,t),void 0,null),Dn===null)throw Error(It(349));Ao&30||aN(s,t,o)}return o}function aN(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function oN(e,t,s,i){t.value=s,t.getSnapshot=i,uN(t)&&hN(e)}function lN(e,t,s){return s(function(){uN(t)&&hN(e)})}function uN(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Hi(e,s)}catch{return!0}}function hN(e){var t=Hr(e,1);t!==null&&Gi(t,e,1,-1)}function DE(e){var t=_i();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xh,lastRenderedState:e},t.queue=e,e=e.dispatch=U9.bind(null,Ke,e),[t.memoizedState,e]}function Yh(e,t,s,i){return e={tag:e,create:t,destroy:s,deps:i,next:null},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(i=s.next,s.next=e,e.next=i,t.lastEffect=e)),e}function cN(){return Ei().memoizedState}function Gd(e,t,s,i){var o=_i();Ke.flags|=e,o.memoizedState=Yh(1|t,s,void 0,i===void 0?null:i)}function bm(e,t,s,i){var o=Ei();i=i===void 0?null:i;var y=void 0;if(Cn!==null){var r=Cn.memoizedState;if(y=r.destroy,i!==null&&n2(i,r.deps)){o.memoizedState=Yh(t,s,y,i);return}}Ke.flags|=e,o.memoizedState=Yh(1|t,s,y,i)}function LE(e,t){return Gd(8390656,8,e,t)}function r2(e,t){return bm(2048,8,e,t)}function fN(e,t){return bm(4,2,e,t)}function dN(e,t){return bm(4,4,e,t)}function pN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mN(e,t,s){return s=s!=null?s.concat([e]):null,bm(4,4,pN.bind(null,t,e),s)}function a2(){}function vN(e,t){var s=Ei();t=t===void 0?null:t;var i=s.memoizedState;return i!==null&&t!==null&&n2(t,i[1])?i[0]:(s.memoizedState=[e,t],e)}function gN(e,t){var s=Ei();t=t===void 0?null:t;var i=s.memoizedState;return i!==null&&t!==null&&n2(t,i[1])?i[0]:(e=e(),s.memoizedState=[e,t],e)}function xN(e,t,s){return Ao&21?(Hi(s,t)||(s=TR(),Ke.lanes|=s,Io|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=s)}function V9(e,t){var s=Ce;Ce=s!==0&&4>s?s:4,e(!0);var i=E0.transition;E0.transition={};try{e(!1),t()}finally{Ce=s,E0.transition=i}}function yN(){return Ei().memoizedState}function G9(e,t,s){var i=wa(e);if(s={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null},SN(e))TN(t,s);else if(s=QR(e,t,s,i),s!==null){var o=ps();Gi(s,e,i,o),CN(s,t,i)}}function U9(e,t,s){var i=wa(e),o={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null};if(SN(e))TN(t,o);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=t.lastRenderedReducer,y!==null))try{var r=t.lastRenderedState,g=y(r,s);if(o.hasEagerState=!0,o.eagerState=g,Hi(g,r)){var n=t.interleaved;n===null?(o.next=o,Q1(t)):(o.next=n.next,n.next=o),t.interleaved=o;return}}catch{}finally{}s=QR(e,t,o,i),s!==null&&(o=ps(),Gi(s,e,i,o),CN(s,t,i))}}function SN(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function TN(e,t){Eh=Sp=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function CN(e,t,s){if(s&4194240){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,B1(e,s)}}var Tp={readContext:wi,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useInsertionEffect:Zn,useLayoutEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useMutableSource:Zn,useSyncExternalStore:Zn,useId:Zn,unstable_isNewReconciler:!1},W9={readContext:wi,useCallback:function(e,t){return _i().memoizedState=[e,t===void 0?null:t],e},useContext:wi,useEffect:LE,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Gd(4194308,4,pN.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Gd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gd(4,2,e,t)},useMemo:function(e,t){var s=_i();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var i=_i();return t=s!==void 0?s(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=G9.bind(null,Ke,e),[i.memoizedState,e]},useRef:function(e){var t=_i();return e={current:e},t.memoizedState=e},useState:DE,useDebugValue:a2,useDeferredValue:function(e){return _i().memoizedState=e},useTransition:function(){var e=DE(!1),t=e[0];return e=V9.bind(null,e[1]),_i().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var i=Ke,o=_i();if(Ge){if(s===void 0)throw Error(It(407));s=s()}else{if(s=t(),Dn===null)throw Error(It(349));Ao&30||aN(i,t,s)}o.memoizedState=s;var y={value:s,getSnapshot:t};return o.queue=y,LE(lN.bind(null,i,y,e),[e]),i.flags|=2048,Yh(9,oN.bind(null,i,y,s,t),void 0,null),s},useId:function(){var e=_i(),t=Dn.identifierPrefix;if(Ge){var s=$r,i=Mr;s=(i&~(1<<32-Vi(i)-1)).toString(32)+s,t=":"+t+"R"+s,s=Hh++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=z9++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},H9={readContext:wi,useCallback:vN,useContext:wi,useEffect:r2,useImperativeHandle:mN,useInsertionEffect:fN,useLayoutEffect:dN,useMemo:gN,useReducer:b0,useRef:cN,useState:function(){return b0(Xh)},useDebugValue:a2,useDeferredValue:function(e){var t=Ei();return xN(t,Cn.memoizedState,e)},useTransition:function(){var e=b0(Xh)[0],t=Ei().memoizedState;return[e,t]},useMutableSource:iN,useSyncExternalStore:rN,useId:yN,unstable_isNewReconciler:!1},X9={readContext:wi,useCallback:vN,useContext:wi,useEffect:r2,useImperativeHandle:mN,useInsertionEffect:fN,useLayoutEffect:dN,useMemo:gN,useReducer:A0,useRef:cN,useState:function(){return A0(Xh)},useDebugValue:a2,useDeferredValue:function(e){var t=Ei();return Cn===null?t.memoizedState=e:xN(t,Cn.memoizedState,e)},useTransition:function(){var e=A0(Xh)[0],t=Ei().memoizedState;return[e,t]},useMutableSource:iN,useSyncExternalStore:rN,useId:yN,unstable_isNewReconciler:!1};function ql(e,t){try{var s="",i=t;do s+=yB(i),i=i.return;while(i);var o=s}catch(y){o=`
Error generating stack: `+y.message+`
`+y.stack}return{value:e,source:t,stack:o,digest:null}}function I0(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Wx(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Y9=typeof WeakMap=="function"?WeakMap:Map;function wN(e,t,s){s=Br(-1,s),s.tag=3,s.payload={element:null};var i=t.value;return s.callback=function(){wp||(wp=!0,_x=i),Wx(e,t)},s}function EN(e,t,s){s=Br(-1,s),s.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=t.value;s.payload=function(){return i(o)},s.callback=function(){Wx(e,t)}}var y=e.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(s.callback=function(){Wx(e,t),typeof i!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var r=t.stack;this.componentDidCatch(t.value,{componentStack:r!==null?r:""})}),s}function ME(e,t,s){var i=e.pingCache;if(i===null){i=e.pingCache=new Y9;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(s)||(o.add(s),e=ak.bind(null,e,t,s),t.then(e,e))}function $E(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function BE(e,t,s,i,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Br(-1,1),t.tag=2,Ta(s,t,1))),s.lanes|=1),e)}var K9=Zr.ReactCurrentOwner,bs=!1;function hs(e,t,s,i){t.child=e===null?nN(t,null,s,i):Jl(t,e.child,s,i)}function kE(e,t,s,i,o){s=s.render;var y=t.ref;return Bl(t,o),i=s2(e,t,s,i,y,o),s=i2(),e!==null&&!bs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Xr(e,t,o)):(Ge&&s&&X1(t),t.flags|=1,hs(e,t,i,o),t.child)}function zE(e,t,s,i,o){if(e===null){var y=s.type;return typeof y=="function"&&!p2(y)&&y.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=y,bN(e,t,y,i,o)):(e=Xd(s.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(y=e.child,!(e.lanes&o)){var r=y.memoizedProps;if(s=s.compare,s=s!==null?s:kh,s(r,i)&&e.ref===t.ref)return Xr(e,t,o)}return t.flags|=1,e=Ea(y,i),e.ref=t.ref,e.return=t,t.child=e}function bN(e,t,s,i,o){if(e!==null){var y=e.memoizedProps;if(kh(y,i)&&e.ref===t.ref)if(bs=!1,t.pendingProps=i=y,(e.lanes&o)!==0)e.flags&131072&&(bs=!0);else return t.lanes=e.lanes,Xr(e,t,o)}return Hx(e,t,s,i,o)}function AN(e,t,s){var i=t.pendingProps,o=i.children,y=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Fl,zs),zs|=s;else{if(!(s&1073741824))return e=y!==null?y.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(Fl,zs),zs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=y!==null?y.baseLanes:s,Fe(Fl,zs),zs|=i}else y!==null?(i=y.baseLanes|s,t.memoizedState=null):i=s,Fe(Fl,zs),zs|=i;return hs(e,t,o,s),t.child}function IN(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Hx(e,t,s,i,o){var y=Rs(s)?Eo:rs.current;return y=jl(t,y),Bl(t,o),s=s2(e,t,s,i,y,o),i=i2(),e!==null&&!bs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Xr(e,t,o)):(Ge&&i&&X1(t),t.flags|=1,hs(e,t,s,o),t.child)}function VE(e,t,s,i,o){if(Rs(s)){var y=!0;dp(t)}else y=!1;if(Bl(t,o),t.stateNode===null)Ud(e,t),tN(t,s,i),Ux(t,s,i,o),i=!0;else if(e===null){var r=t.stateNode,g=t.memoizedProps;r.props=g;var n=r.context,a=s.contextType;typeof a=="object"&&a!==null?a=wi(a):(a=Rs(s)?Eo:rs.current,a=jl(t,a));var p=s.getDerivedStateFromProps,h=typeof p=="function"||typeof r.getSnapshotBeforeUpdate=="function";h||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(g!==i||n!==a)&&FE(t,r,i,a),oa=!1;var u=t.memoizedState;r.state=u,xp(t,i,r,o),n=t.memoizedState,g!==i||u!==n||Is.current||oa?(typeof p=="function"&&(Gx(t,s,p,i),n=t.memoizedState),(g=oa||PE(t,s,g,i,u,n,a))?(h||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=n),r.props=i,r.state=n,r.context=a,i=g):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,qR(e,t),g=t.memoizedProps,a=t.type===t.elementType?g:Mi(t.type,g),r.props=a,h=t.pendingProps,u=r.context,n=s.contextType,typeof n=="object"&&n!==null?n=wi(n):(n=Rs(s)?Eo:rs.current,n=jl(t,n));var d=s.getDerivedStateFromProps;(p=typeof d=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(g!==h||u!==n)&&FE(t,r,i,n),oa=!1,u=t.memoizedState,r.state=u,xp(t,i,r,o);var l=t.memoizedState;g!==h||u!==l||Is.current||oa?(typeof d=="function"&&(Gx(t,s,d,i),l=t.memoizedState),(a=oa||PE(t,s,a,i,u,l,n)||!1)?(p||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,l,n),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,l,n)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||g===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=l),r.props=i,r.state=l,r.context=n,i=a):(typeof r.componentDidUpdate!="function"||g===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),i=!1)}return Xx(e,t,s,i,y,o)}function Xx(e,t,s,i,o,y){IN(e,t);var r=(t.flags&128)!==0;if(!i&&!r)return o&&bE(t,s,!1),Xr(e,t,y);i=t.stateNode,K9.current=t;var g=r&&typeof s.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&r?(t.child=Jl(t,e.child,null,y),t.child=Jl(t,null,g,y)):hs(e,t,g,y),t.memoizedState=i.state,o&&bE(t,s,!0),t.child}function RN(e){var t=e.stateNode;t.pendingContext?EE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&EE(e,t.context,!1),_1(e,t.containerInfo)}function GE(e,t,s,i,o){return Zl(),K1(o),t.flags|=256,hs(e,t,s,i),t.child}var Yx={dehydrated:null,treeContext:null,retryLane:0};function Kx(e){return{baseLanes:e,cachePool:null,transitions:null}}function NN(e,t,s){var i=t.pendingProps,o=Xe.current,y=!1,r=(t.flags&128)!==0,g;if((g=r)||(g=e!==null&&e.memoizedState===null?!1:(o&2)!==0),g?(y=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Fe(Xe,o&1),e===null)return zx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(r=i.children,e=i.fallback,y?(i=t.mode,y=t.child,r={mode:"hidden",children:r},!(i&1)&&y!==null?(y.childLanes=0,y.pendingProps=r):y=Rm(r,i,0,null),e=To(e,i,s,null),y.return=t,e.return=t,y.sibling=e,t.child=y,t.child.memoizedState=Kx(s),t.memoizedState=Yx,e):o2(t,r));if(o=e.memoizedState,o!==null&&(g=o.dehydrated,g!==null))return j9(e,t,r,i,g,o,s);if(y){y=i.fallback,r=t.mode,o=e.child,g=o.sibling;var n={mode:"hidden",children:i.children};return!(r&1)&&t.child!==o?(i=t.child,i.childLanes=0,i.pendingProps=n,t.deletions=null):(i=Ea(o,n),i.subtreeFlags=o.subtreeFlags&14680064),g!==null?y=Ea(g,y):(y=To(y,r,s,null),y.flags|=2),y.return=t,i.return=t,i.sibling=y,t.child=i,i=y,y=t.child,r=e.child.memoizedState,r=r===null?Kx(s):{baseLanes:r.baseLanes|s,cachePool:null,transitions:r.transitions},y.memoizedState=r,y.childLanes=e.childLanes&~s,t.memoizedState=Yx,i}return y=e.child,e=y.sibling,i=Ea(y,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=s),i.return=t,i.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=i,t.memoizedState=null,i}function o2(e,t){return t=Rm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hd(e,t,s,i){return i!==null&&K1(i),Jl(t,e.child,null,s),e=o2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function j9(e,t,s,i,o,y,r){if(s)return t.flags&256?(t.flags&=-257,i=I0(Error(It(422))),hd(e,t,r,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(y=i.fallback,o=t.mode,i=Rm({mode:"visible",children:i.children},o,0,null),y=To(y,o,r,null),y.flags|=2,i.return=t,y.return=t,i.sibling=y,t.child=i,t.mode&1&&Jl(t,e.child,null,r),t.child.memoizedState=Kx(r),t.memoizedState=Yx,y);if(!(t.mode&1))return hd(e,t,r,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var g=i.dgst;return i=g,y=Error(It(419)),i=I0(y,i,void 0),hd(e,t,r,i)}if(g=(r&e.childLanes)!==0,bs||g){if(i=Dn,i!==null){switch(r&-r){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|r)?0:o,o!==0&&o!==y.retryLane&&(y.retryLane=o,Hr(e,o),Gi(i,e,o,-1))}return d2(),i=I0(Error(It(421))),hd(e,t,r,i)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=ok.bind(null,e),o._reactRetry=t,null):(e=y.treeContext,Gs=Sa(o.nextSibling),Hs=t,Ge=!0,Bi=null,e!==null&&(oi[li++]=Mr,oi[li++]=$r,oi[li++]=bo,Mr=e.id,$r=e.overflow,bo=t),t=o2(t,i.children),t.flags|=4096,t)}function UE(e,t,s){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Vx(e.return,t,s)}function R0(e,t,s,i,o){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:o}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=i,y.tail=s,y.tailMode=o)}function PN(e,t,s){var i=t.pendingProps,o=i.revealOrder,y=i.tail;if(hs(e,t,i.children,s),i=Xe.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&UE(e,s,t);else if(e.tag===19)UE(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Fe(Xe,i),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(s=t.child,o=null;s!==null;)e=s.alternate,e!==null&&yp(e)===null&&(o=s),s=s.sibling;s=o,s===null?(o=t.child,t.child=null):(o=s.sibling,s.sibling=null),R0(t,!1,o,s,y);break;case"backwards":for(s=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&yp(e)===null){t.child=o;break}e=o.sibling,o.sibling=s,s=o,o=e}R0(t,!0,s,null,y);break;case"together":R0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ud(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Io|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(It(153));if(t.child!==null){for(e=t.child,s=Ea(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Ea(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Z9(e,t,s){switch(t.tag){case 3:RN(t),Zl();break;case 5:sN(t);break;case 1:Rs(t.type)&&dp(t);break;case 4:_1(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,o=t.memoizedProps.value;Fe(vp,i._currentValue),i._currentValue=o;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Fe(Xe,Xe.current&1),t.flags|=128,null):s&t.child.childLanes?NN(e,t,s):(Fe(Xe,Xe.current&1),e=Xr(e,t,s),e!==null?e.sibling:null);Fe(Xe,Xe.current&1);break;case 19:if(i=(s&t.childLanes)!==0,e.flags&128){if(i)return PN(e,t,s);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Fe(Xe,Xe.current),i)break;return null;case 22:case 23:return t.lanes=0,AN(e,t,s)}return Xr(e,t,s)}var FN,jx,ON,DN;FN=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};jx=function(){};ON=function(e,t,s,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,vo(dr.current);var y=null;switch(s){case"input":o=vx(e,o),i=vx(e,i),y=[];break;case"select":o=je({},o,{value:void 0}),i=je({},i,{value:void 0}),y=[];break;case"textarea":o=yx(e,o),i=yx(e,i),y=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=cp)}Tx(s,i);var r;s=null;for(a in o)if(!i.hasOwnProperty(a)&&o.hasOwnProperty(a)&&o[a]!=null)if(a==="style"){var g=o[a];for(r in g)g.hasOwnProperty(r)&&(s||(s={}),s[r]="")}else a!=="dangerouslySetInnerHTML"&&a!=="children"&&a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Fh.hasOwnProperty(a)?y||(y=[]):(y=y||[]).push(a,null));for(a in i){var n=i[a];if(g=o!=null?o[a]:void 0,i.hasOwnProperty(a)&&n!==g&&(n!=null||g!=null))if(a==="style")if(g){for(r in g)!g.hasOwnProperty(r)||n&&n.hasOwnProperty(r)||(s||(s={}),s[r]="");for(r in n)n.hasOwnProperty(r)&&g[r]!==n[r]&&(s||(s={}),s[r]=n[r])}else s||(y||(y=[]),y.push(a,s)),s=n;else a==="dangerouslySetInnerHTML"?(n=n?n.__html:void 0,g=g?g.__html:void 0,n!=null&&g!==n&&(y=y||[]).push(a,n)):a==="children"?typeof n!="string"&&typeof n!="number"||(y=y||[]).push(a,""+n):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&(Fh.hasOwnProperty(a)?(n!=null&&a==="onScroll"&&Me("scroll",e),y||g===n||(y=[])):(y=y||[]).push(a,n))}s&&(y=y||[]).push("style",s);var a=y;(t.updateQueue=a)&&(t.flags|=4)}};DN=function(e,t,s,i){s!==i&&(t.flags|=4)};function _u(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Jn(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,i=0;if(t)for(var o=e.child;o!==null;)s|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)s|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=s,t}function J9(e,t,s){var i=t.pendingProps;switch(Y1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(t),null;case 1:return Rs(t.type)&&fp(),Jn(t),null;case 3:return i=t.stateNode,Ql(),Be(Is),Be(rs),e2(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ld(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bi!==null&&(ny(Bi),Bi=null))),jx(e,t),Jn(t),null;case 5:t2(t);var o=vo(Wh.current);if(s=t.type,e!==null&&t.stateNode!=null)ON(e,t,s,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(It(166));return Jn(t),null}if(e=vo(dr.current),ld(t)){i=t.stateNode,s=t.type;var y=t.memoizedProps;switch(i[or]=t,i[Gh]=y,e=(t.mode&1)!==0,s){case"dialog":Me("cancel",i),Me("close",i);break;case"iframe":case"object":case"embed":Me("load",i);break;case"video":case"audio":for(o=0;o<ch.length;o++)Me(ch[o],i);break;case"source":Me("error",i);break;case"img":case"image":case"link":Me("error",i),Me("load",i);break;case"details":Me("toggle",i);break;case"input":Qw(i,y),Me("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!y.multiple},Me("invalid",i);break;case"textarea":_w(i,y),Me("invalid",i)}Tx(s,y),o=null;for(var r in y)if(y.hasOwnProperty(r)){var g=y[r];r==="children"?typeof g=="string"?i.textContent!==g&&(y.suppressHydrationWarning!==!0&&od(i.textContent,g,e),o=["children",g]):typeof g=="number"&&i.textContent!==""+g&&(y.suppressHydrationWarning!==!0&&od(i.textContent,g,e),o=["children",""+g]):Fh.hasOwnProperty(r)&&g!=null&&r==="onScroll"&&Me("scroll",i)}switch(s){case"input":_f(i),qw(i,y,!0);break;case"textarea":_f(i),tE(i);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(i.onclick=cp)}i=o,t.updateQueue=i,i!==null&&(t.flags|=4)}else{r=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=aR(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=r.createElement(s,{is:i.is}):(e=r.createElement(s),s==="select"&&(r=e,i.multiple?r.multiple=!0:i.size&&(r.size=i.size))):e=r.createElementNS(e,s),e[or]=t,e[Gh]=i,FN(e,t,!1,!1),t.stateNode=e;t:{switch(r=Cx(s,i),s){case"dialog":Me("cancel",e),Me("close",e),o=i;break;case"iframe":case"object":case"embed":Me("load",e),o=i;break;case"video":case"audio":for(o=0;o<ch.length;o++)Me(ch[o],e);o=i;break;case"source":Me("error",e),o=i;break;case"img":case"image":case"link":Me("error",e),Me("load",e),o=i;break;case"details":Me("toggle",e),o=i;break;case"input":Qw(e,i),o=vx(e,i),Me("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=je({},i,{value:void 0}),Me("invalid",e);break;case"textarea":_w(e,i),o=yx(e,i),Me("invalid",e);break;default:o=i}Tx(s,o),g=o;for(y in g)if(g.hasOwnProperty(y)){var n=g[y];y==="style"?uR(e,n):y==="dangerouslySetInnerHTML"?(n=n?n.__html:void 0,n!=null&&oR(e,n)):y==="children"?typeof n=="string"?(s!=="textarea"||n!=="")&&Oh(e,n):typeof n=="number"&&Oh(e,""+n):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Fh.hasOwnProperty(y)?n!=null&&y==="onScroll"&&Me("scroll",e):n!=null&&F1(e,y,n,r))}switch(s){case"input":_f(e),qw(e,i,!1);break;case"textarea":_f(e),tE(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Pa(i.value));break;case"select":e.multiple=!!i.multiple,y=i.value,y!=null?Dl(e,!!i.multiple,y,!1):i.defaultValue!=null&&Dl(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=cp)}switch(s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jn(t),null;case 6:if(e&&t.stateNode!=null)DN(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(It(166));if(s=vo(Wh.current),vo(dr.current),ld(t)){if(i=t.stateNode,s=t.memoizedProps,i[or]=t,(y=i.nodeValue!==s)&&(e=Hs,e!==null))switch(e.tag){case 3:od(i.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&od(i.nodeValue,s,(e.mode&1)!==0)}y&&(t.flags|=4)}else i=(s.nodeType===9?s:s.ownerDocument).createTextNode(i),i[or]=t,t.stateNode=i}return Jn(t),null;case 13:if(Be(Xe),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&Gs!==null&&t.mode&1&&!(t.flags&128))JR(),Zl(),t.flags|=98560,y=!1;else if(y=ld(t),i!==null&&i.dehydrated!==null){if(e===null){if(!y)throw Error(It(318));if(y=t.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(It(317));y[or]=t}else Zl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jn(t),y=!1}else Bi!==null&&(ny(Bi),Bi=null),y=!0;if(!y)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Xe.current&1?En===0&&(En=3):d2())),t.updateQueue!==null&&(t.flags|=4),Jn(t),null);case 4:return Ql(),jx(e,t),e===null&&zh(t.stateNode.containerInfo),Jn(t),null;case 10:return J1(t.type._context),Jn(t),null;case 17:return Rs(t.type)&&fp(),Jn(t),null;case 19:if(Be(Xe),y=t.memoizedState,y===null)return Jn(t),null;if(i=(t.flags&128)!==0,r=y.rendering,r===null)if(i)_u(y,!1);else{if(En!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=yp(e),r!==null){for(t.flags|=128,_u(y,!1),i=r.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=s,s=t.child;s!==null;)y=s,e=i,y.flags&=14680066,r=y.alternate,r===null?(y.childLanes=0,y.lanes=e,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=r.childLanes,y.lanes=r.lanes,y.child=r.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=r.memoizedProps,y.memoizedState=r.memoizedState,y.updateQueue=r.updateQueue,y.type=r.type,e=r.dependencies,y.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Fe(Xe,Xe.current&1|2),t.child}e=e.sibling}y.tail!==null&&an()>_l&&(t.flags|=128,i=!0,_u(y,!1),t.lanes=4194304)}else{if(!i)if(e=yp(r),e!==null){if(t.flags|=128,i=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),_u(y,!0),y.tail===null&&y.tailMode==="hidden"&&!r.alternate&&!Ge)return Jn(t),null}else 2*an()-y.renderingStartTime>_l&&s!==1073741824&&(t.flags|=128,i=!0,_u(y,!1),t.lanes=4194304);y.isBackwards?(r.sibling=t.child,t.child=r):(s=y.last,s!==null?s.sibling=r:t.child=r,y.last=r)}return y.tail!==null?(t=y.tail,y.rendering=t,y.tail=t.sibling,y.renderingStartTime=an(),t.sibling=null,s=Xe.current,Fe(Xe,i?s&1|2:s&1),t):(Jn(t),null);case 22:case 23:return f2(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?zs&1073741824&&(Jn(t),t.subtreeFlags&6&&(t.flags|=8192)):Jn(t),null;case 24:return null;case 25:return null}throw Error(It(156,t.tag))}function Q9(e,t){switch(Y1(t),t.tag){case 1:return Rs(t.type)&&fp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ql(),Be(Is),Be(rs),e2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return t2(t),null;case 13:if(Be(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(It(340));Zl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(Xe),null;case 4:return Ql(),null;case 10:return J1(t.type._context),null;case 22:case 23:return f2(),null;case 24:return null;default:return null}}var cd=!1,ts=!1,q9=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Pl(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(i){Je(e,t,i)}else s.current=null}function Zx(e,t,s){try{s()}catch(i){Je(e,t,i)}}var WE=!1;function _9(e,t){if(Ox=lp,e=BR(),H1(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else t:{s=(s=e.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var o=i.anchorOffset,y=i.focusNode;i=i.focusOffset;try{s.nodeType,y.nodeType}catch{s=null;break t}var r=0,g=-1,n=-1,a=0,p=0,h=e,u=null;e:for(;;){for(var d;h!==s||o!==0&&h.nodeType!==3||(g=r+o),h!==y||i!==0&&h.nodeType!==3||(n=r+i),h.nodeType===3&&(r+=h.nodeValue.length),(d=h.firstChild)!==null;)u=h,h=d;for(;;){if(h===e)break e;if(u===s&&++a===o&&(g=r),u===y&&++p===i&&(n=r),(d=h.nextSibling)!==null)break;h=u,u=h.parentNode}h=d}s=g===-1||n===-1?null:{start:g,end:n}}else s=null}s=s||{start:0,end:0}}else s=null;for(Dx={focusedElem:e,selectionRange:s},lp=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){t=Lt;try{var l=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(l!==null){var c=l.memoizedProps,m=l.memoizedState,f=t.stateNode,v=f.getSnapshotBeforeUpdate(t.elementType===t.type?c:Mi(t.type,c),m);f.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(It(163))}}catch(x){Je(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}return l=WE,WE=!1,l}function bh(e,t,s){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var y=o.destroy;o.destroy=void 0,y!==void 0&&Zx(t,s,y)}o=o.next}while(o!==i)}}function Am(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var i=s.create;s.destroy=i()}s=s.next}while(s!==t)}}function Jx(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function LN(e){var t=e.alternate;t!==null&&(e.alternate=null,LN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[or],delete t[Gh],delete t[$x],delete t[M9],delete t[$9])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function MN(e){return e.tag===5||e.tag===3||e.tag===4}function HE(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||MN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qx(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=cp));else if(i!==4&&(e=e.child,e!==null))for(Qx(e,t,s),e=e.sibling;e!==null;)Qx(e,t,s),e=e.sibling}function qx(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(qx(e,t,s),e=e.sibling;e!==null;)qx(e,t,s),e=e.sibling}var Gn=null,$i=!1;function sa(e,t,s){for(s=s.child;s!==null;)$N(e,t,s),s=s.sibling}function $N(e,t,s){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(xm,s)}catch{}switch(s.tag){case 5:ts||Pl(s,t);case 6:var i=Gn,o=$i;Gn=null,sa(e,t,s),Gn=i,$i=o,Gn!==null&&($i?(e=Gn,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Gn.removeChild(s.stateNode));break;case 18:Gn!==null&&($i?(e=Gn,s=s.stateNode,e.nodeType===8?T0(e.parentNode,s):e.nodeType===1&&T0(e,s),$h(e)):T0(Gn,s.stateNode));break;case 4:i=Gn,o=$i,Gn=s.stateNode.containerInfo,$i=!0,sa(e,t,s),Gn=i,$i=o;break;case 0:case 11:case 14:case 15:if(!ts&&(i=s.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var y=o,r=y.destroy;y=y.tag,r!==void 0&&(y&2||y&4)&&Zx(s,t,r),o=o.next}while(o!==i)}sa(e,t,s);break;case 1:if(!ts&&(Pl(s,t),i=s.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=s.memoizedProps,i.state=s.memoizedState,i.componentWillUnmount()}catch(g){Je(s,t,g)}sa(e,t,s);break;case 21:sa(e,t,s);break;case 22:s.mode&1?(ts=(i=ts)||s.memoizedState!==null,sa(e,t,s),ts=i):sa(e,t,s);break;default:sa(e,t,s)}}function XE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new q9),t.forEach(function(i){var o=lk.bind(null,e,i);s.has(i)||(s.add(i),i.then(o,o))})}}function Oi(e,t){var s=t.deletions;if(s!==null)for(var i=0;i<s.length;i++){var o=s[i];try{var y=e,r=t,g=r;t:for(;g!==null;){switch(g.tag){case 5:Gn=g.stateNode,$i=!1;break t;case 3:Gn=g.stateNode.containerInfo,$i=!0;break t;case 4:Gn=g.stateNode.containerInfo,$i=!0;break t}g=g.return}if(Gn===null)throw Error(It(160));$N(y,r,o),Gn=null,$i=!1;var n=o.alternate;n!==null&&(n.return=null),o.return=null}catch(a){Je(o,t,a)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)BN(t,e),t=t.sibling}function BN(e,t){var s=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Oi(t,e),qi(e),i&4){try{bh(3,e,e.return),Am(3,e)}catch(c){Je(e,e.return,c)}try{bh(5,e,e.return)}catch(c){Je(e,e.return,c)}}break;case 1:Oi(t,e),qi(e),i&512&&s!==null&&Pl(s,s.return);break;case 5:if(Oi(t,e),qi(e),i&512&&s!==null&&Pl(s,s.return),e.flags&32){var o=e.stateNode;try{Oh(o,"")}catch(c){Je(e,e.return,c)}}if(i&4&&(o=e.stateNode,o!=null)){var y=e.memoizedProps,r=s!==null?s.memoizedProps:y,g=e.type,n=e.updateQueue;if(e.updateQueue=null,n!==null)try{g==="input"&&y.type==="radio"&&y.name!=null&&iR(o,y),Cx(g,r);var a=Cx(g,y);for(r=0;r<n.length;r+=2){var p=n[r],h=n[r+1];p==="style"?uR(o,h):p==="dangerouslySetInnerHTML"?oR(o,h):p==="children"?Oh(o,h):F1(o,p,h,a)}switch(g){case"input":gx(o,y);break;case"textarea":rR(o,y);break;case"select":var u=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!y.multiple;var d=y.value;d!=null?Dl(o,!!y.multiple,d,!1):u!==!!y.multiple&&(y.defaultValue!=null?Dl(o,!!y.multiple,y.defaultValue,!0):Dl(o,!!y.multiple,y.multiple?[]:"",!1))}o[Gh]=y}catch(c){Je(e,e.return,c)}}break;case 6:if(Oi(t,e),qi(e),i&4){if(e.stateNode===null)throw Error(It(162));o=e.stateNode,y=e.memoizedProps;try{o.nodeValue=y}catch(c){Je(e,e.return,c)}}break;case 3:if(Oi(t,e),qi(e),i&4&&s!==null&&s.memoizedState.isDehydrated)try{$h(t.containerInfo)}catch(c){Je(e,e.return,c)}break;case 4:Oi(t,e),qi(e);break;case 13:Oi(t,e),qi(e),o=e.child,o.flags&8192&&(y=o.memoizedState!==null,o.stateNode.isHidden=y,!y||o.alternate!==null&&o.alternate.memoizedState!==null||(h2=an())),i&4&&XE(e);break;case 22:if(p=s!==null&&s.memoizedState!==null,e.mode&1?(ts=(a=ts)||p,Oi(t,e),ts=a):Oi(t,e),qi(e),i&8192){if(a=e.memoizedState!==null,(e.stateNode.isHidden=a)&&!p&&e.mode&1)for(Lt=e,p=e.child;p!==null;){for(h=Lt=p;Lt!==null;){switch(u=Lt,d=u.child,u.tag){case 0:case 11:case 14:case 15:bh(4,u,u.return);break;case 1:Pl(u,u.return);var l=u.stateNode;if(typeof l.componentWillUnmount=="function"){i=u,s=u.return;try{t=i,l.props=t.memoizedProps,l.state=t.memoizedState,l.componentWillUnmount()}catch(c){Je(i,s,c)}}break;case 5:Pl(u,u.return);break;case 22:if(u.memoizedState!==null){KE(h);continue}}d!==null?(d.return=u,Lt=d):KE(h)}p=p.sibling}t:for(p=null,h=e;;){if(h.tag===5){if(p===null){p=h;try{o=h.stateNode,a?(y=o.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(g=h.stateNode,n=h.memoizedProps.style,r=n!=null&&n.hasOwnProperty("display")?n.display:null,g.style.display=lR("display",r))}catch(c){Je(e,e.return,c)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=a?"":h.memoizedProps}catch(c){Je(e,e.return,c)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break t;for(;h.sibling===null;){if(h.return===null||h.return===e)break t;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Oi(t,e),qi(e),i&4&&XE(e);break;case 21:break;default:Oi(t,e),qi(e)}}function qi(e){var t=e.flags;if(t&2){try{t:{for(var s=e.return;s!==null;){if(MN(s)){var i=s;break t}s=s.return}throw Error(It(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Oh(o,""),i.flags&=-33);var y=HE(e);qx(e,y,o);break;case 3:case 4:var r=i.stateNode.containerInfo,g=HE(e);Qx(e,g,r);break;default:throw Error(It(161))}}catch(n){Je(e,e.return,n)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tk(e,t,s){Lt=e,kN(e)}function kN(e,t,s){for(var i=(e.mode&1)!==0;Lt!==null;){var o=Lt,y=o.child;if(o.tag===22&&i){var r=o.memoizedState!==null||cd;if(!r){var g=o.alternate,n=g!==null&&g.memoizedState!==null||ts;g=cd;var a=ts;if(cd=r,(ts=n)&&!a)for(Lt=o;Lt!==null;)r=Lt,n=r.child,r.tag===22&&r.memoizedState!==null?jE(o):n!==null?(n.return=r,Lt=n):jE(o);for(;y!==null;)Lt=y,kN(y),y=y.sibling;Lt=o,cd=g,ts=a}YE(e)}else o.subtreeFlags&8772&&y!==null?(y.return=o,Lt=y):YE(e)}}function YE(e){for(;Lt!==null;){var t=Lt;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ts||Am(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ts)if(s===null)i.componentDidMount();else{var o=t.elementType===t.type?s.memoizedProps:Mi(t.type,s.memoizedProps);i.componentDidUpdate(o,s.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var y=t.updateQueue;y!==null&&NE(t,y,i);break;case 3:var r=t.updateQueue;if(r!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}NE(t,r,s)}break;case 5:var g=t.stateNode;if(s===null&&t.flags&4){s=g;var n=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break;case"img":n.src&&(s.src=n.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var a=t.alternate;if(a!==null){var p=a.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&$h(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(It(163))}ts||t.flags&512&&Jx(t)}catch(u){Je(t,t.return,u)}}if(t===e){Lt=null;break}if(s=t.sibling,s!==null){s.return=t.return,Lt=s;break}Lt=t.return}}function KE(e){for(;Lt!==null;){var t=Lt;if(t===e){Lt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Lt=s;break}Lt=t.return}}function jE(e){for(;Lt!==null;){var t=Lt;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Am(4,t)}catch(n){Je(t,s,n)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var o=t.return;try{i.componentDidMount()}catch(n){Je(t,o,n)}}var y=t.return;try{Jx(t)}catch(n){Je(t,y,n)}break;case 5:var r=t.return;try{Jx(t)}catch(n){Je(t,r,n)}}}catch(n){Je(t,t.return,n)}if(t===e){Lt=null;break}var g=t.sibling;if(g!==null){g.return=t.return,Lt=g;break}Lt=t.return}}var ek=Math.ceil,Cp=Zr.ReactCurrentDispatcher,l2=Zr.ReactCurrentOwner,xi=Zr.ReactCurrentBatchConfig,ve=0,Dn=null,cn=null,Wn=0,zs=0,Fl=Wa(0),En=0,Kh=null,Io=0,Im=0,u2=0,Ah=null,ws=null,h2=0,_l=1/0,Nr=null,wp=!1,_x=null,Ca=null,fd=!1,fa=null,Ep=0,Ih=0,ty=null,Wd=-1,Hd=0;function ps(){return ve&6?an():Wd!==-1?Wd:Wd=an()}function wa(e){return e.mode&1?ve&2&&Wn!==0?Wn&-Wn:k9.transition!==null?(Hd===0&&(Hd=TR()),Hd):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:RR(e.type)),e):1}function Gi(e,t,s,i){if(50<Ih)throw Ih=0,ty=null,Error(It(185));vc(e,s,i),(!(ve&2)||e!==Dn)&&(e===Dn&&(!(ve&2)&&(Im|=s),En===4&&ha(e,Wn)),Ns(e,i),s===1&&ve===0&&!(t.mode&1)&&(_l=an()+500,wm&&Ha()))}function Ns(e,t){var s=e.callbackNode;kB(e,t);var i=op(e,e===Dn?Wn:0);if(i===0)s!==null&&sE(s),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(s!=null&&sE(s),t===1)e.tag===0?B9(ZE.bind(null,e)):KR(ZE.bind(null,e)),D9(function(){!(ve&6)&&Ha()}),s=null;else{switch(CR(i)){case 1:s=$1;break;case 4:s=yR;break;case 16:s=ap;break;case 536870912:s=SR;break;default:s=ap}s=YN(s,zN.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function zN(e,t){if(Wd=-1,Hd=0,ve&6)throw Error(It(327));var s=e.callbackNode;if(kl()&&e.callbackNode!==s)return null;var i=op(e,e===Dn?Wn:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=bp(e,i);else{t=i;var o=ve;ve|=2;var y=GN();(Dn!==e||Wn!==t)&&(Nr=null,_l=an()+500,So(e,t));do try{ik();break}catch(g){VN(e,g)}while(1);Z1(),Cp.current=y,ve=o,cn!==null?t=0:(Dn=null,Wn=0,t=En)}if(t!==0){if(t===2&&(o=Ix(e),o!==0&&(i=o,t=ey(e,o))),t===1)throw s=Kh,So(e,0),ha(e,i),Ns(e,an()),s;if(t===6)ha(e,i);else{if(o=e.current.alternate,!(i&30)&&!nk(o)&&(t=bp(e,i),t===2&&(y=Ix(e),y!==0&&(i=y,t=ey(e,y))),t===1))throw s=Kh,So(e,0),ha(e,i),Ns(e,an()),s;switch(e.finishedWork=o,e.finishedLanes=i,t){case 0:case 1:throw Error(It(345));case 2:oo(e,ws,Nr);break;case 3:if(ha(e,i),(i&130023424)===i&&(t=h2+500-an(),10<t)){if(op(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){ps(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Mx(oo.bind(null,e,ws,Nr),t);break}oo(e,ws,Nr);break;case 4:if(ha(e,i),(i&4194240)===i)break;for(t=e.eventTimes,o=-1;0<i;){var r=31-Vi(i);y=1<<r,r=t[r],r>o&&(o=r),i&=~y}if(i=o,i=an()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ek(i/1960))-i,10<i){e.timeoutHandle=Mx(oo.bind(null,e,ws,Nr),i);break}oo(e,ws,Nr);break;case 5:oo(e,ws,Nr);break;default:throw Error(It(329))}}}return Ns(e,an()),e.callbackNode===s?zN.bind(null,e):null}function ey(e,t){var s=Ah;return e.current.memoizedState.isDehydrated&&(So(e,t).flags|=256),e=bp(e,t),e!==2&&(t=ws,ws=s,t!==null&&ny(t)),e}function ny(e){ws===null?ws=e:ws.push.apply(ws,e)}function nk(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var i=0;i<s.length;i++){var o=s[i],y=o.getSnapshot;o=o.value;try{if(!Hi(y(),o))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ha(e,t){for(t&=~u2,t&=~Im,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Vi(t),i=1<<s;e[s]=-1,t&=~i}}function ZE(e){if(ve&6)throw Error(It(327));kl();var t=op(e,0);if(!(t&1))return Ns(e,an()),null;var s=bp(e,t);if(e.tag!==0&&s===2){var i=Ix(e);i!==0&&(t=i,s=ey(e,i))}if(s===1)throw s=Kh,So(e,0),ha(e,t),Ns(e,an()),s;if(s===6)throw Error(It(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,oo(e,ws,Nr),Ns(e,an()),null}function c2(e,t){var s=ve;ve|=1;try{return e(t)}finally{ve=s,ve===0&&(_l=an()+500,wm&&Ha())}}function Ro(e){fa!==null&&fa.tag===0&&!(ve&6)&&kl();var t=ve;ve|=1;var s=xi.transition,i=Ce;try{if(xi.transition=null,Ce=1,e)return e()}finally{Ce=i,xi.transition=s,ve=t,!(ve&6)&&Ha()}}function f2(){zs=Fl.current,Be(Fl)}function So(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,O9(s)),cn!==null)for(s=cn.return;s!==null;){var i=s;switch(Y1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&fp();break;case 3:Ql(),Be(Is),Be(rs),e2();break;case 5:t2(i);break;case 4:Ql();break;case 13:Be(Xe);break;case 19:Be(Xe);break;case 10:J1(i.type._context);break;case 22:case 23:f2()}s=s.return}if(Dn=e,cn=e=Ea(e.current,null),Wn=zs=t,En=0,Kh=null,u2=Im=Io=0,ws=Ah=null,mo!==null){for(t=0;t<mo.length;t++)if(s=mo[t],i=s.interleaved,i!==null){s.interleaved=null;var o=i.next,y=s.pending;if(y!==null){var r=y.next;y.next=o,i.next=r}s.pending=i}mo=null}return e}function VN(e,t){do{var s=cn;try{if(Z1(),Vd.current=Tp,Sp){for(var i=Ke.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Sp=!1}if(Ao=0,Pn=Cn=Ke=null,Eh=!1,Hh=0,l2.current=null,s===null||s.return===null){En=1,Kh=t,cn=null;break}t:{var y=e,r=s.return,g=s,n=t;if(t=Wn,g.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){var a=n,p=g,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var u=p.alternate;u?(p.updateQueue=u.updateQueue,p.memoizedState=u.memoizedState,p.lanes=u.lanes):(p.updateQueue=null,p.memoizedState=null)}var d=$E(r);if(d!==null){d.flags&=-257,BE(d,r,g,y,t),d.mode&1&&ME(y,a,t),t=d,n=a;var l=t.updateQueue;if(l===null){var c=new Set;c.add(n),t.updateQueue=c}else l.add(n);break t}else{if(!(t&1)){ME(y,a,t),d2();break t}n=Error(It(426))}}else if(Ge&&g.mode&1){var m=$E(r);if(m!==null){!(m.flags&65536)&&(m.flags|=256),BE(m,r,g,y,t),K1(ql(n,g));break t}}y=n=ql(n,g),En!==4&&(En=2),Ah===null?Ah=[y]:Ah.push(y),y=r;do{switch(y.tag){case 3:y.flags|=65536,t&=-t,y.lanes|=t;var f=wN(y,n,t);RE(y,f);break t;case 1:g=n;var v=y.type,S=y.stateNode;if(!(y.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ca===null||!Ca.has(S)))){y.flags|=65536,t&=-t,y.lanes|=t;var x=EN(y,g,t);RE(y,x);break t}}y=y.return}while(y!==null)}WN(s)}catch(T){t=T,cn===s&&s!==null&&(cn=s=s.return);continue}break}while(1)}function GN(){var e=Cp.current;return Cp.current=Tp,e===null?Tp:e}function d2(){(En===0||En===3||En===2)&&(En=4),Dn===null||!(Io&268435455)&&!(Im&268435455)||ha(Dn,Wn)}function bp(e,t){var s=ve;ve|=2;var i=GN();(Dn!==e||Wn!==t)&&(Nr=null,So(e,t));do try{sk();break}catch(o){VN(e,o)}while(1);if(Z1(),ve=s,Cp.current=i,cn!==null)throw Error(It(261));return Dn=null,Wn=0,En}function sk(){for(;cn!==null;)UN(cn)}function ik(){for(;cn!==null&&!NB();)UN(cn)}function UN(e){var t=XN(e.alternate,e,zs);e.memoizedProps=e.pendingProps,t===null?WN(e):cn=t,l2.current=null}function WN(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=Q9(s,t),s!==null){s.flags&=32767,cn=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{En=6,cn=null;return}}else if(s=J9(s,t,zs),s!==null){cn=s;return}if(t=t.sibling,t!==null){cn=t;return}cn=t=e}while(t!==null);En===0&&(En=5)}function oo(e,t,s){var i=Ce,o=xi.transition;try{xi.transition=null,Ce=1,rk(e,t,s,i)}finally{xi.transition=o,Ce=i}return null}function rk(e,t,s,i){do kl();while(fa!==null);if(ve&6)throw Error(It(327));s=e.finishedWork;var o=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(It(177));e.callbackNode=null,e.callbackPriority=0;var y=s.lanes|s.childLanes;if(zB(e,y),e===Dn&&(cn=Dn=null,Wn=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||fd||(fd=!0,YN(ap,function(){return kl(),null})),y=(s.flags&15990)!==0,s.subtreeFlags&15990||y){y=xi.transition,xi.transition=null;var r=Ce;Ce=1;var g=ve;ve|=4,l2.current=null,_9(e,s),BN(s,e),b9(Dx),lp=!!Ox,Dx=Ox=null,e.current=s,tk(s),PB(),ve=g,Ce=r,xi.transition=y}else e.current=s;if(fd&&(fd=!1,fa=e,Ep=o),y=e.pendingLanes,y===0&&(Ca=null),DB(s.stateNode),Ns(e,an()),t!==null)for(i=e.onRecoverableError,s=0;s<t.length;s++)o=t[s],i(o.value,{componentStack:o.stack,digest:o.digest});if(wp)throw wp=!1,e=_x,_x=null,e;return Ep&1&&e.tag!==0&&kl(),y=e.pendingLanes,y&1?e===ty?Ih++:(Ih=0,ty=e):Ih=0,Ha(),null}function kl(){if(fa!==null){var e=CR(Ep),t=xi.transition,s=Ce;try{if(xi.transition=null,Ce=16>e?16:e,fa===null)var i=!1;else{if(e=fa,fa=null,Ep=0,ve&6)throw Error(It(331));var o=ve;for(ve|=4,Lt=e.current;Lt!==null;){var y=Lt,r=y.child;if(Lt.flags&16){var g=y.deletions;if(g!==null){for(var n=0;n<g.length;n++){var a=g[n];for(Lt=a;Lt!==null;){var p=Lt;switch(p.tag){case 0:case 11:case 15:bh(8,p,y)}var h=p.child;if(h!==null)h.return=p,Lt=h;else for(;Lt!==null;){p=Lt;var u=p.sibling,d=p.return;if(LN(p),p===a){Lt=null;break}if(u!==null){u.return=d,Lt=u;break}Lt=d}}}var l=y.alternate;if(l!==null){var c=l.child;if(c!==null){l.child=null;do{var m=c.sibling;c.sibling=null,c=m}while(c!==null)}}Lt=y}}if(y.subtreeFlags&2064&&r!==null)r.return=y,Lt=r;else t:for(;Lt!==null;){if(y=Lt,y.flags&2048)switch(y.tag){case 0:case 11:case 15:bh(9,y,y.return)}var f=y.sibling;if(f!==null){f.return=y.return,Lt=f;break t}Lt=y.return}}var v=e.current;for(Lt=v;Lt!==null;){r=Lt;var S=r.child;if(r.subtreeFlags&2064&&S!==null)S.return=r,Lt=S;else t:for(r=v;Lt!==null;){if(g=Lt,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Am(9,g)}}catch(T){Je(g,g.return,T)}if(g===r){Lt=null;break t}var x=g.sibling;if(x!==null){x.return=g.return,Lt=x;break t}Lt=g.return}}if(ve=o,Ha(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(xm,e)}catch{}i=!0}return i}finally{Ce=s,xi.transition=t}}return!1}function JE(e,t,s){t=ql(s,t),t=wN(e,t,1),e=Ta(e,t,1),t=ps(),e!==null&&(vc(e,1,t),Ns(e,t))}function Je(e,t,s){if(e.tag===3)JE(e,e,s);else for(;t!==null;){if(t.tag===3){JE(t,e,s);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ca===null||!Ca.has(i))){e=ql(s,e),e=EN(t,e,1),t=Ta(t,e,1),e=ps(),t!==null&&(vc(t,1,e),Ns(t,e));break}}t=t.return}}function ak(e,t,s){var i=e.pingCache;i!==null&&i.delete(t),t=ps(),e.pingedLanes|=e.suspendedLanes&s,Dn===e&&(Wn&s)===s&&(En===4||En===3&&(Wn&130023424)===Wn&&500>an()-h2?So(e,0):u2|=s),Ns(e,t)}function HN(e,t){t===0&&(e.mode&1?(t=nd,nd<<=1,!(nd&130023424)&&(nd=4194304)):t=1);var s=ps();e=Hr(e,t),e!==null&&(vc(e,t,s),Ns(e,s))}function ok(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),HN(e,s)}function lk(e,t){var s=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(s=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(It(314))}i!==null&&i.delete(t),HN(e,s)}var XN;XN=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Is.current)bs=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return bs=!1,Z9(e,t,s);bs=!!(e.flags&131072)}else bs=!1,Ge&&t.flags&1048576&&jR(t,mp,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ud(e,t),e=t.pendingProps;var o=jl(t,rs.current);Bl(t,s),o=s2(null,t,i,e,o,s);var y=i2();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rs(i)?(y=!0,dp(t)):y=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,q1(t),o.updater=Em,t.stateNode=o,o._reactInternals=t,Ux(t,i,e,s),t=Xx(null,t,i,!0,y,s)):(t.tag=0,Ge&&y&&X1(t),hs(null,t,o,s),t=t.child),t;case 16:i=t.elementType;t:{switch(Ud(e,t),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=hk(i),e=Mi(i,e),o){case 0:t=Hx(null,t,i,e,s);break t;case 1:t=VE(null,t,i,e,s);break t;case 11:t=kE(null,t,i,e,s);break t;case 14:t=zE(null,t,i,Mi(i.type,e),s);break t}throw Error(It(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Mi(i,o),Hx(e,t,i,o,s);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Mi(i,o),VE(e,t,i,o,s);case 3:t:{if(RN(t),e===null)throw Error(It(387));i=t.pendingProps,y=t.memoizedState,o=y.element,qR(e,t),xp(t,i,null,s);var r=t.memoizedState;if(i=r.element,y.isDehydrated)if(y={element:i,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},t.updateQueue.baseState=y,t.memoizedState=y,t.flags&256){o=ql(Error(It(423)),t),t=GE(e,t,i,s,o);break t}else if(i!==o){o=ql(Error(It(424)),t),t=GE(e,t,i,s,o);break t}else for(Gs=Sa(t.stateNode.containerInfo.firstChild),Hs=t,Ge=!0,Bi=null,s=nN(t,null,i,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Zl(),i===o){t=Xr(e,t,s);break t}hs(e,t,i,s)}t=t.child}return t;case 5:return sN(t),e===null&&zx(t),i=t.type,o=t.pendingProps,y=e!==null?e.memoizedProps:null,r=o.children,Lx(i,o)?r=null:y!==null&&Lx(i,y)&&(t.flags|=32),IN(e,t),hs(e,t,r,s),t.child;case 6:return e===null&&zx(t),null;case 13:return NN(e,t,s);case 4:return _1(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Jl(t,null,i,s):hs(e,t,i,s),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Mi(i,o),kE(e,t,i,o,s);case 7:return hs(e,t,t.pendingProps,s),t.child;case 8:return hs(e,t,t.pendingProps.children,s),t.child;case 12:return hs(e,t,t.pendingProps.children,s),t.child;case 10:t:{if(i=t.type._context,o=t.pendingProps,y=t.memoizedProps,r=o.value,Fe(vp,i._currentValue),i._currentValue=r,y!==null)if(Hi(y.value,r)){if(y.children===o.children&&!Is.current){t=Xr(e,t,s);break t}}else for(y=t.child,y!==null&&(y.return=t);y!==null;){var g=y.dependencies;if(g!==null){r=y.child;for(var n=g.firstContext;n!==null;){if(n.context===i){if(y.tag===1){n=Br(-1,s&-s),n.tag=2;var a=y.updateQueue;if(a!==null){a=a.shared;var p=a.pending;p===null?n.next=n:(n.next=p.next,p.next=n),a.pending=n}}y.lanes|=s,n=y.alternate,n!==null&&(n.lanes|=s),Vx(y.return,s,t),g.lanes|=s;break}n=n.next}}else if(y.tag===10)r=y.type===t.type?null:y.child;else if(y.tag===18){if(r=y.return,r===null)throw Error(It(341));r.lanes|=s,g=r.alternate,g!==null&&(g.lanes|=s),Vx(r,s,t),r=y.sibling}else r=y.child;if(r!==null)r.return=y;else for(r=y;r!==null;){if(r===t){r=null;break}if(y=r.sibling,y!==null){y.return=r.return,r=y;break}r=r.return}y=r}hs(e,t,o.children,s),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,Bl(t,s),o=wi(o),i=i(o),t.flags|=1,hs(e,t,i,s),t.child;case 14:return i=t.type,o=Mi(i,t.pendingProps),o=Mi(i.type,o),zE(e,t,i,o,s);case 15:return bN(e,t,t.type,t.pendingProps,s);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Mi(i,o),Ud(e,t),t.tag=1,Rs(i)?(e=!0,dp(t)):e=!1,Bl(t,s),tN(t,i,o),Ux(t,i,o,s),Xx(null,t,i,!0,e,s);case 19:return PN(e,t,s);case 22:return AN(e,t,s)}throw Error(It(156,t.tag))};function YN(e,t){return xR(e,t)}function uk(e,t,s,i){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(e,t,s,i){return new uk(e,t,s,i)}function p2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hk(e){if(typeof e=="function")return p2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===D1)return 11;if(e===L1)return 14}return 2}function Ea(e,t){var s=e.alternate;return s===null?(s=hi(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Xd(e,t,s,i,o,y){var r=2;if(i=e,typeof e=="function")p2(e)&&(r=1);else if(typeof e=="string")r=5;else t:switch(e){case Tl:return To(s.children,o,y,t);case O1:r=8,o|=8;break;case fx:return e=hi(12,s,t,o|2),e.elementType=fx,e.lanes=y,e;case dx:return e=hi(13,s,t,o),e.elementType=dx,e.lanes=y,e;case px:return e=hi(19,s,t,o),e.elementType=px,e.lanes=y,e;case eR:return Rm(s,o,y,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _I:r=10;break t;case tR:r=9;break t;case D1:r=11;break t;case L1:r=14;break t;case aa:r=16,i=null;break t}throw Error(It(130,e==null?e:typeof e,""))}return t=hi(r,s,t,o),t.elementType=e,t.type=i,t.lanes=y,t}function To(e,t,s,i){return e=hi(7,e,i,t),e.lanes=s,e}function Rm(e,t,s,i){return e=hi(22,e,i,t),e.elementType=eR,e.lanes=s,e.stateNode={isHidden:!1},e}function N0(e,t,s){return e=hi(6,e,null,t),e.lanes=s,e}function P0(e,t,s){return t=hi(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ck(e,t,s,i,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h0(0),this.expirationTimes=h0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h0(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function m2(e,t,s,i,o,y,r,g,n){return e=new ck(e,t,s,g,n),t===1?(t=1,y===!0&&(t|=8)):t=0,y=hi(3,null,null,t),e.current=y,y.stateNode=e,y.memoizedState={element:i,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},q1(y),e}function fk(e,t,s){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sl,key:i==null?null:""+i,children:e,containerInfo:t,implementation:s}}function KN(e){if(!e)return Fa;e=e._reactInternals;t:{if(Ho(e)!==e||e.tag!==1)throw Error(It(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Rs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(It(171))}if(e.tag===1){var s=e.type;if(Rs(s))return YR(e,s,t)}return t}function jN(e,t,s,i,o,y,r,g,n){return e=m2(s,i,!0,e,o,y,r,g,n),e.context=KN(null),s=e.current,i=ps(),o=wa(s),y=Br(i,o),y.callback=t??null,Ta(s,y,o),e.current.lanes=o,vc(e,o,i),Ns(e,i),e}function Nm(e,t,s,i){var o=t.current,y=ps(),r=wa(o);return s=KN(s),t.context===null?t.context=s:t.pendingContext=s,t=Br(y,r),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Ta(o,t,r),e!==null&&(Gi(e,o,r,y),zd(e,o,r)),r}function Ap(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function QE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function v2(e,t){QE(e,t),(e=e.alternate)&&QE(e,t)}function dk(){return null}var ZN=typeof reportError=="function"?reportError:function(e){console.error(e)};function g2(e){this._internalRoot=e}Pm.prototype.render=g2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(It(409));Nm(e,t,null,null)};Pm.prototype.unmount=g2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ro(function(){Nm(null,e,null,null)}),t[Wr]=null}};function Pm(e){this._internalRoot=e}Pm.prototype.unstable_scheduleHydration=function(e){if(e){var t=bR();e={blockedOn:null,target:e,priority:t};for(var s=0;s<ua.length&&t!==0&&t<ua[s].priority;s++);ua.splice(s,0,e),s===0&&IR(e)}};function x2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qE(){}function pk(e,t,s,i,o){if(o){if(typeof i=="function"){var y=i;i=function(){var a=Ap(r);y.call(a)}}var r=jN(t,i,e,0,null,!1,!1,"",qE);return e._reactRootContainer=r,e[Wr]=r.current,zh(e.nodeType===8?e.parentNode:e),Ro(),r}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var g=i;i=function(){var a=Ap(n);g.call(a)}}var n=m2(e,0,!1,null,null,!1,!1,"",qE);return e._reactRootContainer=n,e[Wr]=n.current,zh(e.nodeType===8?e.parentNode:e),Ro(function(){Nm(t,n,s,i)}),n}function Om(e,t,s,i,o){var y=s._reactRootContainer;if(y){var r=y;if(typeof o=="function"){var g=o;o=function(){var n=Ap(r);g.call(n)}}Nm(t,r,e,o)}else r=pk(s,t,e,o,i);return Ap(r)}wR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=hh(t.pendingLanes);s!==0&&(B1(t,s|1),Ns(t,an()),!(ve&6)&&(_l=an()+500,Ha()))}break;case 13:Ro(function(){var i=Hr(e,1);if(i!==null){var o=ps();Gi(i,e,1,o)}}),v2(e,1)}};k1=function(e){if(e.tag===13){var t=Hr(e,134217728);if(t!==null){var s=ps();Gi(t,e,134217728,s)}v2(e,134217728)}};ER=function(e){if(e.tag===13){var t=wa(e),s=Hr(e,t);if(s!==null){var i=ps();Gi(s,e,t,i)}v2(e,t)}};bR=function(){return Ce};AR=function(e,t){var s=Ce;try{return Ce=e,t()}finally{Ce=s}};Ex=function(e,t,s){switch(t){case"input":if(gx(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var i=s[t];if(i!==e&&i.form===e.form){var o=Cm(i);if(!o)throw Error(It(90));sR(i),gx(i,o)}}}break;case"textarea":rR(e,s);break;case"select":t=s.value,t!=null&&Dl(e,!!s.multiple,t,!1)}};fR=c2;dR=Ro;var mk={usingClientEntryPoint:!1,Events:[xc,bl,Cm,hR,cR,c2]},th={findFiberByHostInstance:po,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vk={bundleType:th.bundleType,version:th.version,rendererPackageName:th.rendererPackageName,rendererConfig:th.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vR(e),e===null?null:e.stateNode},findFiberByHostInstance:th.findFiberByHostInstance||dk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{xm=dd.inject(vk),fr=dd}catch{}}Qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;Qs.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x2(t))throw Error(It(200));return fk(e,t,null,s)};Qs.createRoot=function(e,t){if(!x2(e))throw Error(It(299));var s=!1,i="",o=ZN;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=m2(e,1,!1,null,null,s,!1,i,o),e[Wr]=t.current,zh(e.nodeType===8?e.parentNode:e),new g2(t)};Qs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(It(188)):(e=Object.keys(e).join(","),Error(It(268,e)));return e=vR(t),e=e===null?null:e.stateNode,e};Qs.flushSync=function(e){return Ro(e)};Qs.hydrate=function(e,t,s){if(!Fm(t))throw Error(It(200));return Om(null,e,t,!0,s)};Qs.hydrateRoot=function(e,t,s){if(!x2(e))throw Error(It(405));var i=s!=null&&s.hydratedSources||null,o=!1,y="",r=ZN;if(s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(y=s.identifierPrefix),s.onRecoverableError!==void 0&&(r=s.onRecoverableError)),t=jN(t,null,e,1,s??null,o,!1,y,r),e[Wr]=t.current,zh(e),i)for(e=0;e<i.length;e++)s=i[e],o=s._getVersion,o=o(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,o]:t.mutableSourceEagerHydrationData.push(s,o);return new Pm(t)};Qs.render=function(e,t,s){if(!Fm(t))throw Error(It(200));return Om(null,e,t,!1,s)};Qs.unmountComponentAtNode=function(e){if(!Fm(e))throw Error(It(40));return e._reactRootContainer?(Ro(function(){Om(null,null,e,!1,function(){e._reactRootContainer=null,e[Wr]=null})}),!0):!1};Qs.unstable_batchedUpdates=c2;Qs.unstable_renderSubtreeIntoContainer=function(e,t,s,i){if(!Fm(s))throw Error(It(200));if(e==null||e._reactInternals===void 0)throw Error(It(38));return Om(e,t,s,!1,i)};Qs.version="18.2.0-next-9e3b772b8-20220608";function JN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JN)}catch(e){console.error(e)}}JN(),jI.exports=Qs;var QN=jI.exports,_E=QN;hx.createRoot=_E.createRoot,hx.hydrateRoot=_E.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jh(){return jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},jh.apply(this,arguments)}var da;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(da||(da={}));const tb="popstate";function gk(e){e===void 0&&(e={});function t(i,o){let{pathname:y,search:r,hash:g}=i.location;return sy("",{pathname:y,search:r,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(i,o){return typeof o=="string"?o:Ip(o)}return yk(t,s,null,e)}function mn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function y2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xk(){return Math.random().toString(36).substr(2,8)}function eb(e,t){return{usr:e.state,key:e.key,idx:t}}function sy(e,t,s,i){return s===void 0&&(s=null),jh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Su(t):t,{state:s,key:t&&t.key||i||xk()})}function Ip(e){let{pathname:t="/",search:s="",hash:i=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Su(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function yk(e,t,s,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:y=!1}=i,r=o.history,g=da.Pop,n=null,a=p();a==null&&(a=0,r.replaceState(jh({},r.state,{idx:a}),""));function p(){return(r.state||{idx:null}).idx}function h(){g=da.Pop;let m=p(),f=m==null?null:m-a;a=m,n&&n({action:g,location:c.location,delta:f})}function u(m,f){g=da.Push;let v=sy(c.location,m,f);s&&s(v,m),a=p()+1;let S=eb(v,a),x=c.createHref(v);try{r.pushState(S,"",x)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;o.location.assign(x)}y&&n&&n({action:g,location:c.location,delta:1})}function d(m,f){g=da.Replace;let v=sy(c.location,m,f);s&&s(v,m),a=p();let S=eb(v,a),x=c.createHref(v);r.replaceState(S,"",x),y&&n&&n({action:g,location:c.location,delta:0})}function l(m){let f=o.location.origin!=="null"?o.location.origin:o.location.href,v=typeof m=="string"?m:Ip(m);return mn(f,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,f)}let c={get action(){return g},get location(){return e(o,r)},listen(m){if(n)throw new Error("A history only accepts one active listener");return o.addEventListener(tb,h),n=m,()=>{o.removeEventListener(tb,h),n=null}},createHref(m){return t(o,m)},createURL:l,encodeLocation(m){let f=l(m);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:u,replace:d,go(m){return r.go(m)}};return c}var nb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(nb||(nb={}));function Sk(e,t,s){s===void 0&&(s="/");let i=typeof t=="string"?Su(t):t,o=S2(i.pathname||"/",s);if(o==null)return null;let y=qN(e);Tk(y);let r=null;for(let g=0;r==null&&g<y.length;++g)r=Pk(y[g],Dk(o));return r}function qN(e,t,s,i){t===void 0&&(t=[]),s===void 0&&(s=[]),i===void 0&&(i="");let o=(y,r,g)=>{let n={relativePath:g===void 0?y.path||"":g,caseSensitive:y.caseSensitive===!0,childrenIndex:r,route:y};n.relativePath.startsWith("/")&&(mn(n.relativePath.startsWith(i),'Absolute route path "'+n.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),n.relativePath=n.relativePath.slice(i.length));let a=ba([i,n.relativePath]),p=s.concat(n);y.children&&y.children.length>0&&(mn(y.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+a+'".')),qN(y.children,t,p,a)),!(y.path==null&&!y.index)&&t.push({path:a,score:Rk(a,y.index),routesMeta:p})};return e.forEach((y,r)=>{var g;if(y.path===""||!((g=y.path)!=null&&g.includes("?")))o(y,r);else for(let n of _N(y.path))o(y,r,n)}),t}function _N(e){let t=e.split("/");if(t.length===0)return[];let[s,...i]=t,o=s.endsWith("?"),y=s.replace(/\?$/,"");if(i.length===0)return o?[y,""]:[y];let r=_N(i.join("/")),g=[];return g.push(...r.map(n=>n===""?y:[y,n].join("/"))),o&&g.push(...r),g.map(n=>e.startsWith("/")&&n===""?"/":n)}function Tk(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Nk(t.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}const Ck=/^:\w+$/,wk=3,Ek=2,bk=1,Ak=10,Ik=-2,sb=e=>e==="*";function Rk(e,t){let s=e.split("/"),i=s.length;return s.some(sb)&&(i+=Ik),t&&(i+=Ek),s.filter(o=>!sb(o)).reduce((o,y)=>o+(Ck.test(y)?wk:y===""?bk:Ak),i)}function Nk(e,t){return e.length===t.length&&e.slice(0,-1).every((i,o)=>i===t[o])?e[e.length-1]-t[t.length-1]:0}function Pk(e,t){let{routesMeta:s}=e,i={},o="/",y=[];for(let r=0;r<s.length;++r){let g=s[r],n=r===s.length-1,a=o==="/"?t:t.slice(o.length)||"/",p=Fk({path:g.relativePath,caseSensitive:g.caseSensitive,end:n},a);if(!p)return null;Object.assign(i,p.params);let h=g.route;y.push({params:i,pathname:ba([o,p.pathname]),pathnameBase:Bk(ba([o,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(o=ba([o,p.pathnameBase]))}return y}function Fk(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,i]=Ok(e.path,e.caseSensitive,e.end),o=t.match(s);if(!o)return null;let y=o[0],r=y.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:i.reduce((a,p,h)=>{if(p==="*"){let u=g[h]||"";r=y.slice(0,y.length-u.length).replace(/(.)\/+$/,"$1")}return a[p]=Lk(g[h]||"",p),a},{}),pathname:y,pathnameBase:r,pattern:e}}function Ok(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),y2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(r,g)=>(i.push(g),"/([^\\/]+)"));return e.endsWith("*")?(i.push("*"),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function Dk(e){try{return decodeURI(e)}catch(t){return y2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Lk(e,t){try{return decodeURIComponent(e)}catch(s){return y2(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),e}}function S2(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,i=e.charAt(s);return i&&i!=="/"?null:e.slice(s)||"/"}function Mk(e,t){t===void 0&&(t="/");let{pathname:s,search:i="",hash:o=""}=typeof e=="string"?Su(e):e;return{pathname:s?s.startsWith("/")?s:$k(s,t):t,search:kk(i),hash:zk(o)}}function $k(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function F0(e,t,s,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tP(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function eP(e,t,s,i){i===void 0&&(i=!1);let o;typeof e=="string"?o=Su(e):(o=jh({},e),mn(!o.pathname||!o.pathname.includes("?"),F0("?","pathname","search",o)),mn(!o.pathname||!o.pathname.includes("#"),F0("#","pathname","hash",o)),mn(!o.search||!o.search.includes("#"),F0("#","search","hash",o)));let y=e===""||o.pathname==="",r=y?"/":o.pathname,g;if(i||r==null)g=s;else{let h=t.length-1;if(r.startsWith("..")){let u=r.split("/");for(;u[0]==="..";)u.shift(),h-=1;o.pathname=u.join("/")}g=h>=0?t[h]:"/"}let n=Mk(o,g),a=r&&r!=="/"&&r.endsWith("/"),p=(y||r===".")&&s.endsWith("/");return!n.pathname.endsWith("/")&&(a||p)&&(n.pathname+="/"),n}const ba=e=>e.join("/").replace(/\/\/+/g,"/"),Bk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Vk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nP=["post","put","patch","delete"];new Set(nP);const Gk=["get",...nP];new Set(Gk);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Rp.apply(this,arguments)}const T2=dt.createContext(null),Uk=dt.createContext(null),Tu=dt.createContext(null),Dm=dt.createContext(null),Xo=dt.createContext({outlet:null,matches:[],isDataRoute:!1}),sP=dt.createContext(null);function Wk(e,t){let{relative:s}=t===void 0?{}:t;Sc()||mn(!1);let{basename:i,navigator:o}=dt.useContext(Tu),{hash:y,pathname:r,search:g}=rP(e,{relative:s}),n=r;return i!=="/"&&(n=r==="/"?i:ba([i,r])),o.createHref({pathname:n,search:g,hash:y})}function Sc(){return dt.useContext(Dm)!=null}function Cu(){return Sc()||mn(!1),dt.useContext(Dm).location}function iP(e){dt.useContext(Tu).static||dt.useLayoutEffect(e)}function Tc(){let{isDataRoute:e}=dt.useContext(Xo);return e?n8():Hk()}function Hk(){Sc()||mn(!1);let e=dt.useContext(T2),{basename:t,navigator:s}=dt.useContext(Tu),{matches:i}=dt.useContext(Xo),{pathname:o}=Cu(),y=JSON.stringify(tP(i).map(n=>n.pathnameBase)),r=dt.useRef(!1);return iP(()=>{r.current=!0}),dt.useCallback(function(n,a){if(a===void 0&&(a={}),!r.current)return;if(typeof n=="number"){s.go(n);return}let p=eP(n,JSON.parse(y),o,a.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ba([t,p.pathname])),(a.replace?s.replace:s.push)(p,a.state,a)},[t,s,y,o,e])}function rP(e,t){let{relative:s}=t===void 0?{}:t,{matches:i}=dt.useContext(Xo),{pathname:o}=Cu(),y=JSON.stringify(tP(i).map(r=>r.pathnameBase));return dt.useMemo(()=>eP(e,JSON.parse(y),o,s==="path"),[e,y,o,s])}function Xk(e,t){return Yk(e,t)}function Yk(e,t,s){Sc()||mn(!1);let{navigator:i}=dt.useContext(Tu),{matches:o}=dt.useContext(Xo),y=o[o.length-1],r=y?y.params:{};y&&y.pathname;let g=y?y.pathnameBase:"/";y&&y.route;let n=Cu(),a;if(t){var p;let c=typeof t=="string"?Su(t):t;g==="/"||(p=c.pathname)!=null&&p.startsWith(g)||mn(!1),a=c}else a=n;let h=a.pathname||"/",u=g==="/"?h:h.slice(g.length)||"/",d=Sk(e,{pathname:u}),l=Qk(d&&d.map(c=>Object.assign({},c,{params:Object.assign({},r,c.params),pathname:ba([g,i.encodeLocation?i.encodeLocation(c.pathname).pathname:c.pathname]),pathnameBase:c.pathnameBase==="/"?g:ba([g,i.encodeLocation?i.encodeLocation(c.pathnameBase).pathname:c.pathnameBase])})),o,s);return t&&l?dt.createElement(Dm.Provider,{value:{location:Rp({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:da.Pop}},l):l}function Kk(){let e=e8(),t=Vk(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},y=null;return dt.createElement(dt.Fragment,null,dt.createElement("h2",null,"Unexpected Application Error!"),dt.createElement("h3",{style:{fontStyle:"italic"}},t),s?dt.createElement("pre",{style:o},s):null,y)}const jk=dt.createElement(Kk,null);class Zk extends dt.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error?dt.createElement(Xo.Provider,{value:this.props.routeContext},dt.createElement(sP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jk(e){let{routeContext:t,match:s,children:i}=e,o=dt.useContext(T2);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),dt.createElement(Xo.Provider,{value:t},i)}function Qk(e,t,s){var i;if(t===void 0&&(t=[]),s===void 0&&(s=null),e==null){var o;if((o=s)!=null&&o.errors)e=s.matches;else return null}let y=e,r=(i=s)==null?void 0:i.errors;if(r!=null){let g=y.findIndex(n=>n.route.id&&(r==null?void 0:r[n.route.id]));g>=0||mn(!1),y=y.slice(0,Math.min(y.length,g+1))}return y.reduceRight((g,n,a)=>{let p=n.route.id?r==null?void 0:r[n.route.id]:null,h=null;s&&(h=n.route.errorElement||jk);let u=t.concat(y.slice(0,a+1)),d=()=>{let l;return p?l=h:n.route.Component?l=dt.createElement(n.route.Component,null):n.route.element?l=n.route.element:l=g,dt.createElement(Jk,{match:n,routeContext:{outlet:g,matches:u,isDataRoute:s!=null},children:l})};return s&&(n.route.ErrorBoundary||n.route.errorElement||a===0)?dt.createElement(Zk,{location:s.location,revalidation:s.revalidation,component:h,error:p,children:d(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):d()},null)}var iy;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(iy||(iy={}));var Zh;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(Zh||(Zh={}));function qk(e){let t=dt.useContext(T2);return t||mn(!1),t}function _k(e){let t=dt.useContext(Uk);return t||mn(!1),t}function t8(e){let t=dt.useContext(Xo);return t||mn(!1),t}function aP(e){let t=t8(),s=t.matches[t.matches.length-1];return s.route.id||mn(!1),s.route.id}function e8(){var e;let t=dt.useContext(sP),s=_k(Zh.UseRouteError),i=aP(Zh.UseRouteError);return t||((e=s.errors)==null?void 0:e[i])}function n8(){let{router:e}=qk(iy.UseNavigateStable),t=aP(Zh.UseNavigateStable),s=dt.useRef(!1);return iP(()=>{s.current=!0}),dt.useCallback(function(o,y){y===void 0&&(y={}),s.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Rp({fromRouteId:t},y)))},[e,t])}function ra(e){mn(!1)}function s8(e){let{basename:t="/",children:s=null,location:i,navigationType:o=da.Pop,navigator:y,static:r=!1}=e;Sc()&&mn(!1);let g=t.replace(/^\/*/,"/"),n=dt.useMemo(()=>({basename:g,navigator:y,static:r}),[g,y,r]);typeof i=="string"&&(i=Su(i));let{pathname:a="/",search:p="",hash:h="",state:u=null,key:d="default"}=i,l=dt.useMemo(()=>{let c=S2(a,g);return c==null?null:{location:{pathname:c,search:p,hash:h,state:u,key:d},navigationType:o}},[g,a,p,h,u,d,o]);return l==null?null:dt.createElement(Tu.Provider,{value:n},dt.createElement(Dm.Provider,{children:s,value:l}))}function i8(e){let{children:t,location:s}=e;return Xk(ry(t),s)}var ib;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(ib||(ib={}));new Promise(()=>{});function ry(e,t){t===void 0&&(t=[]);let s=[];return dt.Children.forEach(e,(i,o)=>{if(!dt.isValidElement(i))return;let y=[...t,o];if(i.type===dt.Fragment){s.push.apply(s,ry(i.props.children,y));return}i.type!==ra&&mn(!1),!i.props.index||!i.props.children||mn(!1);let r={id:i.props.id||y.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(r.children=ry(i.props.children,y)),s.push(r)}),s}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},ay.apply(this,arguments)}function r8(e,t){if(e==null)return{};var s={},i=Object.keys(e),o,y;for(y=0;y<i.length;y++)o=i[y],!(t.indexOf(o)>=0)&&(s[o]=e[o]);return s}function a8(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function o8(e,t){return e.button===0&&(!t||t==="_self")&&!a8(e)}const l8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],u8="startTransition",rb=ux[u8];function h8(e){let{basename:t,children:s,future:i,window:o}=e,y=dt.useRef();y.current==null&&(y.current=gk({window:o,v5Compat:!0}));let r=y.current,[g,n]=dt.useState({action:r.action,location:r.location}),{v7_startTransition:a}=i||{},p=dt.useCallback(h=>{a&&rb?rb(()=>n(h)):n(h)},[n,a]);return dt.useLayoutEffect(()=>r.listen(p),[r,p]),dt.createElement(s8,{basename:t,children:s,location:g.location,navigationType:g.action,navigator:r})}const c8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",f8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d8=dt.forwardRef(function(t,s){let{onClick:i,relative:o,reloadDocument:y,replace:r,state:g,target:n,to:a,preventScrollReset:p}=t,h=r8(t,l8),{basename:u}=dt.useContext(Tu),d,l=!1;if(typeof a=="string"&&f8.test(a)&&(d=a,c8))try{let v=new URL(window.location.href),S=a.startsWith("//")?new URL(v.protocol+a):new URL(a),x=S2(S.pathname,u);S.origin===v.origin&&x!=null?a=x+S.search+S.hash:l=!0}catch{}let c=Wk(a,{relative:o}),m=p8(a,{replace:r,state:g,target:n,preventScrollReset:p,relative:o});function f(v){i&&i(v),v.defaultPrevented||m(v)}return dt.createElement("a",ay({},h,{href:d||c,onClick:l||y?i:f,ref:s,target:n}))});var ab;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(ab||(ab={}));var ob;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ob||(ob={}));function p8(e,t){let{target:s,replace:i,state:o,preventScrollReset:y,relative:r}=t===void 0?{}:t,g=Tc(),n=Cu(),a=rP(e,{relative:r});return dt.useCallback(p=>{if(o8(p,s)){p.preventDefault();let h=i!==void 0?i:Ip(n)===Ip(a);g(e,{replace:h,state:o,preventScrollReset:y,relative:r})}},[n,g,a,i,o,s,e,y,r])}const m8=()=>Ut.jsxs("div",{className:"App",children:[Ut.jsx("h1",{className:"text-4xl font-extrabold my-5",children:"MOSAIC"}),Ut.jsx(h8,{basename:"/MOSAIC",children:Ut.jsxs(i8,{children:[Ut.jsx(ra,{path:"",element:Ut.jsx(v8,{})}),Ut.jsx(ra,{path:"/play",element:Ut.jsx(iyt,{})}),Ut.jsx(ra,{path:"/game",element:Ut.jsx(bI,{})}),Ut.jsx(ra,{path:"/online",element:Ut.jsx(E1t,{})}),Ut.jsx(ra,{path:"/online/lobby",element:Ut.jsx(b1t,{})}),Ut.jsx(ra,{path:"/online/game",element:Ut.jsx(bI,{})}),Ut.jsx(ra,{path:"/*",element:Ut.jsx(A1t,{})})]})})]}),v8=()=>{const e=Tc();return Ut.jsx("div",{className:"MainMenu flex flex-col",children:Ut.jsx(jg,{id:"playButton",label:"Play",onClick:()=>{e("/play")}})})};function No(e){"@babel/helpers - typeof";return No=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},No(e)}function g8(e,t){if(No(e)!=="object"||e===null)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var i=s.call(e,t||"default");if(No(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oP(e){var t=g8(e,"string");return No(t)==="symbol"?t:String(t)}function fh(e,t,s){return t=oP(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function lb(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),s.push.apply(s,i)}return s}function Xt(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?lb(Object(s),!0).forEach(function(i){fh(e,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lb(Object(s)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(s,i))})}return e}function x8(e){if(Array.isArray(e))return e}function y8(e,t){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var i,o,y,r,g=[],n=!0,a=!1;try{if(y=(s=s.call(e)).next,t===0){if(Object(s)!==s)return;n=!1}else for(;!(n=(i=y.call(s)).done)&&(g.push(i.value),g.length!==t);n=!0);}catch(p){a=!0,o=p}finally{try{if(!n&&s.return!=null&&(r=s.return(),Object(r)!==r))return}finally{if(a)throw o}}return g}}function oy(e,t){(t==null||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}function lP(e,t){if(e){if(typeof e=="string")return oy(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return oy(e,t)}}function S8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kr(e,t){return x8(e)||y8(e,t)||lP(e,t)||S8()}function T8(e,t){if(e==null)return{};var s={},i=Object.keys(e),o,y;for(y=0;y<i.length;y++)o=i[y],!(t.indexOf(o)>=0)&&(s[o]=e[o]);return s}function Jr(e,t){if(e==null)return{};var s=T8(e,t),i,o;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(o=0;o<y.length;o++)i=y[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}var C8=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function w8(e){var t=e.defaultInputValue,s=t===void 0?"":t,i=e.defaultMenuIsOpen,o=i===void 0?!1:i,y=e.defaultValue,r=y===void 0?null:y,g=e.inputValue,n=e.menuIsOpen,a=e.onChange,p=e.onInputChange,h=e.onMenuClose,u=e.onMenuOpen,d=e.value,l=Jr(e,C8),c=dt.useState(g!==void 0?g:s),m=kr(c,2),f=m[0],v=m[1],S=dt.useState(n!==void 0?n:o),x=kr(S,2),T=x[0],C=x[1],w=dt.useState(d!==void 0?d:r),b=kr(w,2),E=b[0],A=b[1],I=dt.useCallback(function(L,k){typeof a=="function"&&a(L,k),A(L)},[a]),R=dt.useCallback(function(L,k){var V;typeof p=="function"&&(V=p(L,k)),v(V!==void 0?V:L)},[p]),N=dt.useCallback(function(){typeof u=="function"&&u(),C(!0)},[u]),F=dt.useCallback(function(){typeof h=="function"&&h(),C(!1)},[h]),P=g!==void 0?g:f,D=n!==void 0?n:T,M=d!==void 0?d:E;return Xt(Xt({},l),{},{inputValue:P,menuIsOpen:D,onChange:I,onInputChange:R,onMenuClose:F,onMenuOpen:N,value:M})}function Kt(){return Kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Kt.apply(this,arguments)}function E8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ub(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,oP(i.key),i)}}function b8(e,t,s){return t&&ub(e.prototype,t),s&&ub(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function ly(e,t){return ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},ly(e,t)}function A8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ly(e,t)}function Np(e){return Np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Np(e)}function I8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N8(e,t){if(t&&(No(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R8(e)}function P8(e){var t=I8();return function(){var i=Np(e),o;if(t){var y=Np(this).constructor;o=Reflect.construct(i,arguments,y)}else o=i.apply(this,arguments);return N8(this,o)}}function F8(e){if(Array.isArray(e))return oy(e)}function O8(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function D8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uP(e){return F8(e)||O8(e)||lP(e)||D8()}function L8(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function M8(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var $8=function(){function e(s){var i=this;this._insertTag=function(o){var y;i.tags.length===0?i.insertionPoint?y=i.insertionPoint.nextSibling:i.prepend?y=i.container.firstChild:y=i.before:y=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(o,y),i.tags.push(o)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(M8(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var y=L8(o);try{y.insertRule(i,y.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},e}(),Qn="-ms-",Pp="-moz-",xe="-webkit-",hP="comm",C2="rule",w2="decl",B8="@import",cP="@keyframes",k8="@layer",z8=Math.abs,Lm=String.fromCharCode,V8=Object.assign;function G8(e,t){return Un(e,0)^45?(((t<<2^Un(e,0))<<2^Un(e,1))<<2^Un(e,2))<<2^Un(e,3):0}function fP(e){return e.trim()}function U8(e,t){return(e=t.exec(e))?e[0]:e}function ye(e,t,s){return e.replace(t,s)}function uy(e,t){return e.indexOf(t)}function Un(e,t){return e.charCodeAt(t)|0}function Jh(e,t,s){return e.slice(t,s)}function nr(e){return e.length}function E2(e){return e.length}function pd(e,t){return t.push(e),e}function W8(e,t){return e.map(t).join("")}var Mm=1,tu=1,dP=0,Fs=0,hn=0,wu="";function $m(e,t,s,i,o,y,r){return{value:e,root:t,parent:s,type:i,props:o,children:y,line:Mm,column:tu,length:r,return:""}}function eh(e,t){return V8($m("",null,null,"",null,null,0),e,{length:-e.length},t)}function H8(){return hn}function X8(){return hn=Fs>0?Un(wu,--Fs):0,tu--,hn===10&&(tu=1,Mm--),hn}function Xs(){return hn=Fs<dP?Un(wu,Fs++):0,tu++,hn===10&&(tu=1,Mm++),hn}function pr(){return Un(wu,Fs)}function Yd(){return Fs}function Cc(e,t){return Jh(wu,e,t)}function Qh(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function pP(e){return Mm=tu=1,dP=nr(wu=e),Fs=0,[]}function mP(e){return wu="",e}function Kd(e){return fP(Cc(Fs-1,hy(e===91?e+2:e===40?e+1:e)))}function Y8(e){for(;(hn=pr())&&hn<33;)Xs();return Qh(e)>2||Qh(hn)>3?"":" "}function K8(e,t){for(;--t&&Xs()&&!(hn<48||hn>102||hn>57&&hn<65||hn>70&&hn<97););return Cc(e,Yd()+(t<6&&pr()==32&&Xs()==32))}function hy(e){for(;Xs();)switch(hn){case e:return Fs;case 34:case 39:e!==34&&e!==39&&hy(hn);break;case 40:e===41&&hy(e);break;case 92:Xs();break}return Fs}function j8(e,t){for(;Xs()&&e+hn!==47+10;)if(e+hn===42+42&&pr()===47)break;return"/*"+Cc(t,Fs-1)+"*"+Lm(e===47?e:Xs())}function Z8(e){for(;!Qh(pr());)Xs();return Cc(e,Fs)}function J8(e){return mP(jd("",null,null,null,[""],e=pP(e),0,[0],e))}function jd(e,t,s,i,o,y,r,g,n){for(var a=0,p=0,h=r,u=0,d=0,l=0,c=1,m=1,f=1,v=0,S="",x=o,T=y,C=i,w=S;m;)switch(l=v,v=Xs()){case 40:if(l!=108&&Un(w,h-1)==58){uy(w+=ye(Kd(v),"&","&\f"),"&\f")!=-1&&(f=-1);break}case 34:case 39:case 91:w+=Kd(v);break;case 9:case 10:case 13:case 32:w+=Y8(l);break;case 92:w+=K8(Yd()-1,7);continue;case 47:switch(pr()){case 42:case 47:pd(Q8(j8(Xs(),Yd()),t,s),n);break;default:w+="/"}break;case 123*c:g[a++]=nr(w)*f;case 125*c:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+p:f==-1&&(w=ye(w,/\f/g,"")),d>0&&nr(w)-h&&pd(d>32?cb(w+";",i,s,h-1):cb(ye(w," ","")+";",i,s,h-2),n);break;case 59:w+=";";default:if(pd(C=hb(w,t,s,a,p,o,g,S,x=[],T=[],h),y),v===123)if(p===0)jd(w,t,C,C,x,y,h,g,T);else switch(u===99&&Un(w,3)===110?100:u){case 100:case 108:case 109:case 115:jd(e,C,C,i&&pd(hb(e,C,C,0,0,o,g,S,o,x=[],h),T),o,T,h,g,i?x:T);break;default:jd(w,C,C,C,[""],T,0,g,T)}}a=p=d=0,c=f=1,S=w="",h=r;break;case 58:h=1+nr(w),d=l;default:if(c<1){if(v==123)--c;else if(v==125&&c++==0&&X8()==125)continue}switch(w+=Lm(v),v*c){case 38:f=p>0?1:(w+="\f",-1);break;case 44:g[a++]=(nr(w)-1)*f,f=1;break;case 64:pr()===45&&(w+=Kd(Xs())),u=pr(),p=h=nr(S=w+=Z8(Yd())),v++;break;case 45:l===45&&nr(w)==2&&(c=0)}}return y}function hb(e,t,s,i,o,y,r,g,n,a,p){for(var h=o-1,u=o===0?y:[""],d=E2(u),l=0,c=0,m=0;l<i;++l)for(var f=0,v=Jh(e,h+1,h=z8(c=r[l])),S=e;f<d;++f)(S=fP(c>0?u[f]+" "+v:ye(v,/&\f/g,u[f])))&&(n[m++]=S);return $m(e,t,s,o===0?C2:g,n,a,p)}function Q8(e,t,s){return $m(e,t,s,hP,Lm(H8()),Jh(e,2,-2),0)}function cb(e,t,s,i){return $m(e,t,s,w2,Jh(e,0,i),Jh(e,i+1,-1),i)}function zl(e,t){for(var s="",i=E2(e),o=0;o<i;o++)s+=t(e[o],o,e,t)||"";return s}function q8(e,t,s,i){switch(e.type){case k8:if(e.children.length)break;case B8:case w2:return e.return=e.return||e.value;case hP:return"";case cP:return e.return=e.value+"{"+zl(e.children,i)+"}";case C2:e.value=e.props.join(",")}return nr(s=zl(e.children,i))?e.return=e.value+"{"+s+"}":""}function _8(e){var t=E2(e);return function(s,i,o,y){for(var r="",g=0;g<t;g++)r+=e[g](s,i,o,y)||"";return r}}function t7(e){return function(t){t.root||(t=t.return)&&e(t)}}function e7(e){var t=Object.create(null);return function(s){return t[s]===void 0&&(t[s]=e(s)),t[s]}}var n7=function(t,s,i){for(var o=0,y=0;o=y,y=pr(),o===38&&y===12&&(s[i]=1),!Qh(y);)Xs();return Cc(t,Fs)},s7=function(t,s){var i=-1,o=44;do switch(Qh(o)){case 0:o===38&&pr()===12&&(s[i]=1),t[i]+=n7(Fs-1,s,i);break;case 2:t[i]+=Kd(o);break;case 4:if(o===44){t[++i]=pr()===58?"&\f":"",s[i]=t[i].length;break}default:t[i]+=Lm(o)}while(o=Xs());return t},i7=function(t,s){return mP(s7(pP(t),s))},fb=new WeakMap,r7=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var s=t.value,i=t.parent,o=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&s.charCodeAt(0)!==58&&!fb.get(i))&&!o){fb.set(t,!0);for(var y=[],r=i7(s,y),g=i.props,n=0,a=0;n<r.length;n++)for(var p=0;p<g.length;p++,a++)t.props[a]=y[n]?r[n].replace(/&\f/g,g[p]):g[p]+" "+r[n]}}},a7=function(t){if(t.type==="decl"){var s=t.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(t.return="",t.value="")}};function vP(e,t){switch(G8(e,t)){case 5103:return xe+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return xe+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return xe+e+Pp+e+Qn+e+e;case 6828:case 4268:return xe+e+Qn+e+e;case 6165:return xe+e+Qn+"flex-"+e+e;case 5187:return xe+e+ye(e,/(\w+).+(:[^]+)/,xe+"box-$1$2"+Qn+"flex-$1$2")+e;case 5443:return xe+e+Qn+"flex-item-"+ye(e,/flex-|-self/,"")+e;case 4675:return xe+e+Qn+"flex-line-pack"+ye(e,/align-content|flex-|-self/,"")+e;case 5548:return xe+e+Qn+ye(e,"shrink","negative")+e;case 5292:return xe+e+Qn+ye(e,"basis","preferred-size")+e;case 6060:return xe+"box-"+ye(e,"-grow","")+xe+e+Qn+ye(e,"grow","positive")+e;case 4554:return xe+ye(e,/([^-])(transform)/g,"$1"+xe+"$2")+e;case 6187:return ye(ye(ye(e,/(zoom-|grab)/,xe+"$1"),/(image-set)/,xe+"$1"),e,"")+e;case 5495:case 3959:return ye(e,/(image-set\([^]*)/,xe+"$1$`$1");case 4968:return ye(ye(e,/(.+:)(flex-)?(.*)/,xe+"box-pack:$3"+Qn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+xe+e+e;case 4095:case 3583:case 4068:case 2532:return ye(e,/(.+)-inline(.+)/,xe+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(nr(e)-1-t>6)switch(Un(e,t+1)){case 109:if(Un(e,t+4)!==45)break;case 102:return ye(e,/(.+:)(.+)-([^]+)/,"$1"+xe+"$2-$3$1"+Pp+(Un(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~uy(e,"stretch")?vP(ye(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Un(e,t+1)!==115)break;case 6444:switch(Un(e,nr(e)-3-(~uy(e,"!important")&&10))){case 107:return ye(e,":",":"+xe)+e;case 101:return ye(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+xe+(Un(e,14)===45?"inline-":"")+"box$3$1"+xe+"$2$3$1"+Qn+"$2box$3")+e}break;case 5936:switch(Un(e,t+11)){case 114:return xe+e+Qn+ye(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return xe+e+Qn+ye(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return xe+e+Qn+ye(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return xe+e+Qn+e+e}return e}var o7=function(t,s,i,o){if(t.length>-1&&!t.return)switch(t.type){case w2:t.return=vP(t.value,t.length);break;case cP:return zl([eh(t,{value:ye(t.value,"@","@"+xe)})],o);case C2:if(t.length)return W8(t.props,function(y){switch(U8(y,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return zl([eh(t,{props:[ye(y,/:(read-\w+)/,":"+Pp+"$1")]})],o);case"::placeholder":return zl([eh(t,{props:[ye(y,/:(plac\w+)/,":"+xe+"input-$1")]}),eh(t,{props:[ye(y,/:(plac\w+)/,":"+Pp+"$1")]}),eh(t,{props:[ye(y,/:(plac\w+)/,Qn+"input-$1")]})],o)}return""})}},l7=[o7],u7=function(t){var s=t.key;if(s==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(c){var m=c.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(c),c.setAttribute("data-s",""))})}var o=t.stylisPlugins||l7,y={},r,g=[];r=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(c){for(var m=c.getAttribute("data-emotion").split(" "),f=1;f<m.length;f++)y[m[f]]=!0;g.push(c)});var n,a=[r7,a7];{var p,h=[q8,t7(function(c){p.insert(c)})],u=_8(a.concat(o,h)),d=function(m){return zl(J8(m),u)};n=function(m,f,v,S){p=v,d(m?m+"{"+f.styles+"}":f.styles),S&&(l.inserted[f.name]=!0)}}var l={key:s,sheet:new $8({key:s,container:r,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:y,registered:{},insert:n};return l.sheet.hydrate(g),l},gP={exports:{}},Ee={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mn=typeof Symbol=="function"&&Symbol.for,b2=Mn?Symbol.for("react.element"):60103,A2=Mn?Symbol.for("react.portal"):60106,Bm=Mn?Symbol.for("react.fragment"):60107,km=Mn?Symbol.for("react.strict_mode"):60108,zm=Mn?Symbol.for("react.profiler"):60114,Vm=Mn?Symbol.for("react.provider"):60109,Gm=Mn?Symbol.for("react.context"):60110,I2=Mn?Symbol.for("react.async_mode"):60111,Um=Mn?Symbol.for("react.concurrent_mode"):60111,Wm=Mn?Symbol.for("react.forward_ref"):60112,Hm=Mn?Symbol.for("react.suspense"):60113,h7=Mn?Symbol.for("react.suspense_list"):60120,Xm=Mn?Symbol.for("react.memo"):60115,Ym=Mn?Symbol.for("react.lazy"):60116,c7=Mn?Symbol.for("react.block"):60121,f7=Mn?Symbol.for("react.fundamental"):60117,d7=Mn?Symbol.for("react.responder"):60118,p7=Mn?Symbol.for("react.scope"):60119;function _s(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case b2:switch(e=e.type,e){case I2:case Um:case Bm:case zm:case km:case Hm:return e;default:switch(e=e&&e.$$typeof,e){case Gm:case Wm:case Ym:case Xm:case Vm:return e;default:return t}}case A2:return t}}}function xP(e){return _s(e)===Um}Ee.AsyncMode=I2;Ee.ConcurrentMode=Um;Ee.ContextConsumer=Gm;Ee.ContextProvider=Vm;Ee.Element=b2;Ee.ForwardRef=Wm;Ee.Fragment=Bm;Ee.Lazy=Ym;Ee.Memo=Xm;Ee.Portal=A2;Ee.Profiler=zm;Ee.StrictMode=km;Ee.Suspense=Hm;Ee.isAsyncMode=function(e){return xP(e)||_s(e)===I2};Ee.isConcurrentMode=xP;Ee.isContextConsumer=function(e){return _s(e)===Gm};Ee.isContextProvider=function(e){return _s(e)===Vm};Ee.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===b2};Ee.isForwardRef=function(e){return _s(e)===Wm};Ee.isFragment=function(e){return _s(e)===Bm};Ee.isLazy=function(e){return _s(e)===Ym};Ee.isMemo=function(e){return _s(e)===Xm};Ee.isPortal=function(e){return _s(e)===A2};Ee.isProfiler=function(e){return _s(e)===zm};Ee.isStrictMode=function(e){return _s(e)===km};Ee.isSuspense=function(e){return _s(e)===Hm};Ee.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Bm||e===Um||e===zm||e===km||e===Hm||e===h7||typeof e=="object"&&e!==null&&(e.$$typeof===Ym||e.$$typeof===Xm||e.$$typeof===Vm||e.$$typeof===Gm||e.$$typeof===Wm||e.$$typeof===f7||e.$$typeof===d7||e.$$typeof===p7||e.$$typeof===c7)};Ee.typeOf=_s;gP.exports=Ee;var m7=gP.exports,yP=m7,v7={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},g7={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},SP={};SP[yP.ForwardRef]=v7;SP[yP.Memo]=g7;var x7=!0;function y7(e,t,s){var i="";return s.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]+";"):i+=o+" "}),i}var TP=function(t,s,i){var o=t.key+"-"+s.name;(i===!1||x7===!1)&&t.registered[o]===void 0&&(t.registered[o]=s.styles)},S7=function(t,s,i){TP(t,s,i);var o=t.key+"-"+s.name;if(t.inserted[s.name]===void 0){var y=s;do t.insert(s===y?"."+o:"",y,t.sheet,!0),y=y.next;while(y!==void 0)}};function T7(e){for(var t=0,s,i=0,o=e.length;o>=4;++i,o-=4)s=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,t=(s&65535)*1540483477+((s>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var C7={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},w7=/[A-Z]|^ms/g,E7=/_EMO_([^_]+?)_([^]*?)_EMO_/g,CP=function(t){return t.charCodeAt(1)===45},db=function(t){return t!=null&&typeof t!="boolean"},O0=e7(function(e){return CP(e)?e:e.replace(w7,"-$&").toLowerCase()}),pb=function(t,s){switch(t){case"animation":case"animationName":if(typeof s=="string")return s.replace(E7,function(i,o,y){return sr={name:o,styles:y,next:sr},o})}return C7[t]!==1&&!CP(t)&&typeof s=="number"&&s!==0?s+"px":s};function qh(e,t,s){if(s==null)return"";if(s.__emotion_styles!==void 0)return s;switch(typeof s){case"boolean":return"";case"object":{if(s.anim===1)return sr={name:s.name,styles:s.styles,next:sr},s.name;if(s.styles!==void 0){var i=s.next;if(i!==void 0)for(;i!==void 0;)sr={name:i.name,styles:i.styles,next:sr},i=i.next;var o=s.styles+";";return o}return b7(e,t,s)}case"function":{if(e!==void 0){var y=sr,r=s(e);return sr=y,qh(e,t,r)}break}}if(t==null)return s;var g=t[s];return g!==void 0?g:s}function b7(e,t,s){var i="";if(Array.isArray(s))for(var o=0;o<s.length;o++)i+=qh(e,t,s[o])+";";else for(var y in s){var r=s[y];if(typeof r!="object")t!=null&&t[r]!==void 0?i+=y+"{"+t[r]+"}":db(r)&&(i+=O0(y)+":"+pb(y,r)+";");else if(Array.isArray(r)&&typeof r[0]=="string"&&(t==null||t[r[0]]===void 0))for(var g=0;g<r.length;g++)db(r[g])&&(i+=O0(y)+":"+pb(y,r[g])+";");else{var n=qh(e,t,r);switch(y){case"animation":case"animationName":{i+=O0(y)+":"+n+";";break}default:i+=y+"{"+n+"}"}}}return i}var mb=/label:\s*([^\s;\n{]+)\s*(;|$)/g,sr,wP=function(t,s,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var o=!0,y="";sr=void 0;var r=t[0];r==null||r.raw===void 0?(o=!1,y+=qh(i,s,r)):y+=r[0];for(var g=1;g<t.length;g++)y+=qh(i,s,t[g]),o&&(y+=r[g]);mb.lastIndex=0;for(var n="",a;(a=mb.exec(y))!==null;)n+="-"+a[1];var p=T7(y)+n;return{name:p,styles:y,next:sr}},A7=function(t){return t()},I7=ux["useInsertionEffect"]?ux["useInsertionEffect"]:!1,R7=I7||A7,R2={}.hasOwnProperty,EP=dt.createContext(typeof HTMLElement<"u"?u7({key:"css"}):null);EP.Provider;var N7=function(t){return dt.forwardRef(function(s,i){var o=dt.useContext(EP);return t(s,o,i)})},P7=dt.createContext({}),cy="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",F7=function(t,s){var i={};for(var o in s)R2.call(s,o)&&(i[o]=s[o]);return i[cy]=t,i},O7=function(t){var s=t.cache,i=t.serialized,o=t.isStringTag;return TP(s,i,o),R7(function(){return S7(s,i,o)}),null},D7=N7(function(e,t,s){var i=e.css;typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var o=e[cy],y=[i],r="";typeof e.className=="string"?r=y7(t.registered,y,e.className):e.className!=null&&(r=e.className+" ");var g=wP(y,void 0,dt.useContext(P7));r+=t.key+"-"+g.name;var n={};for(var a in e)R2.call(e,a)&&a!=="css"&&a!==cy&&(n[a]=e[a]);return n.ref=s,n.className=r,dt.createElement(dt.Fragment,null,dt.createElement(O7,{cache:t,serialized:g,isStringTag:typeof o=="string"}),dt.createElement(o,n))}),L7=D7,Yt=function(t,s){var i=arguments;if(s==null||!R2.call(s,"css"))return dt.createElement.apply(void 0,i);var o=i.length,y=new Array(o);y[0]=L7,y[1]=F7(t,s);for(var r=2;r<o;r++)y[r]=i[r];return dt.createElement.apply(null,y)};function N2(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return wP(t)}var M7=function(){var t=N2.apply(void 0,arguments),s="animation-"+t.name;return{name:s,styles:"@keyframes "+s+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function $7(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const B7=Math.min,k7=Math.max,Fp=Math.round,md=Math.floor,Op=e=>({x:e,y:e});function z7(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function bP(e){return IP(e)?(e.nodeName||"").toLowerCase():"#document"}function Ui(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function AP(e){var t;return(t=(IP(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function IP(e){return e instanceof Node||e instanceof Ui(e).Node}function fy(e){return e instanceof Element||e instanceof Ui(e).Element}function P2(e){return e instanceof HTMLElement||e instanceof Ui(e).HTMLElement}function vb(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ui(e).ShadowRoot}function RP(e){const{overflow:t,overflowX:s,overflowY:i,display:o}=F2(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+s)&&!["inline","contents"].includes(o)}function V7(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function G7(e){return["html","body","#document"].includes(bP(e))}function F2(e){return Ui(e).getComputedStyle(e)}function U7(e){if(bP(e)==="html")return e;const t=e.assignedSlot||e.parentNode||vb(e)&&e.host||AP(e);return vb(t)?t.host:t}function NP(e){const t=U7(e);return G7(t)?e.ownerDocument?e.ownerDocument.body:e.body:P2(t)&&RP(t)?t:NP(t)}function dy(e,t){var s;t===void 0&&(t=[]);const i=NP(e),o=i===((s=e.ownerDocument)==null?void 0:s.body),y=Ui(i);return o?t.concat(y,y.visualViewport||[],RP(i)?i:[]):t.concat(i,dy(i))}function W7(e){const t=F2(e);let s=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const o=P2(e),y=o?e.offsetWidth:s,r=o?e.offsetHeight:i,g=Fp(s)!==y||Fp(i)!==r;return g&&(s=y,i=r),{width:s,height:i,$:g}}function O2(e){return fy(e)?e:e.contextElement}function D0(e){const t=O2(e);if(!P2(t))return Op(1);const s=t.getBoundingClientRect(),{width:i,height:o,$:y}=W7(t);let r=(y?Fp(s.width):s.width)/i,g=(y?Fp(s.height):s.height)/o;return(!r||!Number.isFinite(r))&&(r=1),(!g||!Number.isFinite(g))&&(g=1),{x:r,y:g}}const H7=Op(0);function X7(e){const t=Ui(e);return!V7()||!t.visualViewport?H7:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Y7(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==Ui(e)?!1:t}function gb(e,t,s,i){t===void 0&&(t=!1),s===void 0&&(s=!1);const o=e.getBoundingClientRect(),y=O2(e);let r=Op(1);t&&(i?fy(i)&&(r=D0(i)):r=D0(e));const g=Y7(y,s,i)?X7(y):Op(0);let n=(o.left+g.x)/r.x,a=(o.top+g.y)/r.y,p=o.width/r.x,h=o.height/r.y;if(y){const u=Ui(y),d=i&&fy(i)?Ui(i):i;let l=u.frameElement;for(;l&&i&&d!==u;){const c=D0(l),m=l.getBoundingClientRect(),f=F2(l),v=m.left+(l.clientLeft+parseFloat(f.paddingLeft))*c.x,S=m.top+(l.clientTop+parseFloat(f.paddingTop))*c.y;n*=c.x,a*=c.y,p*=c.x,h*=c.y,n+=v,a+=S,l=Ui(l).frameElement}}return z7({width:p,height:h,x:n,y:a})}function K7(e,t){let s=null,i;const o=AP(e);function y(){clearTimeout(i),s&&s.disconnect(),s=null}function r(g,n){g===void 0&&(g=!1),n===void 0&&(n=1),y();const{left:a,top:p,width:h,height:u}=e.getBoundingClientRect();if(g||t(),!h||!u)return;const d=md(p),l=md(o.clientWidth-(a+h)),c=md(o.clientHeight-(p+u)),m=md(a),v={rootMargin:-d+"px "+-l+"px "+-c+"px "+-m+"px",threshold:k7(0,B7(1,n))||1};let S=!0;function x(T){const C=T[0].intersectionRatio;if(C!==n){if(!S)return r();C?r(!1,C):i=setTimeout(()=>{r(!1,1e-7)},100)}S=!1}try{s=new IntersectionObserver(x,{...v,root:o.ownerDocument})}catch{s=new IntersectionObserver(x,v)}s.observe(e)}return r(!0),y}function j7(e,t,s,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:y=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:g=typeof IntersectionObserver=="function",animationFrame:n=!1}=i,a=O2(e),p=o||y?[...a?dy(a):[],...dy(t)]:[];p.forEach(f=>{o&&f.addEventListener("scroll",s,{passive:!0}),y&&f.addEventListener("resize",s)});const h=a&&g?K7(a,s):null;let u=-1,d=null;r&&(d=new ResizeObserver(f=>{let[v]=f;v&&v.target===a&&d&&(d.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{d&&d.observe(t)})),s()}),a&&!n&&d.observe(a),d.observe(t));let l,c=n?gb(e):null;n&&m();function m(){const f=gb(e);c&&(f.x!==c.x||f.y!==c.y||f.width!==c.width||f.height!==c.height)&&s(),c=f,l=requestAnimationFrame(m)}return s(),()=>{p.forEach(f=>{o&&f.removeEventListener("scroll",s),y&&f.removeEventListener("resize",s)}),h&&h(),d&&d.disconnect(),d=null,n&&cancelAnimationFrame(l)}}var py=dt.useLayoutEffect,Z7=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Dp=function(){};function J7(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Q7(e,t){for(var s=arguments.length,i=new Array(s>2?s-2:0),o=2;o<s;o++)i[o-2]=arguments[o];var y=[].concat(i);if(t&&e)for(var r in t)t.hasOwnProperty(r)&&t[r]&&y.push("".concat(J7(e,r)));return y.filter(function(g){return g}).map(function(g){return String(g).trim()}).join(" ")}var xb=function(t){return az(t)?t.filter(Boolean):No(t)==="object"&&t!==null?[t]:[]},PP=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var s=Jr(t,Z7);return Xt({},s)},qe=function(t,s,i){var o=t.cx,y=t.getStyles,r=t.getClassNames,g=t.className;return{css:y(s,t),className:o(i??{},r(s,t),g)}};function Km(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function q7(e){return Km(e)?window.innerHeight:e.clientHeight}function FP(e){return Km(e)?window.pageYOffset:e.scrollTop}function Lp(e,t){if(Km(e)){window.scrollTo(0,t);return}e.scrollTop=t}function _7(e){var t=getComputedStyle(e),s=t.position==="absolute",i=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var o=e;o=o.parentElement;)if(t=getComputedStyle(o),!(s&&t.position==="static")&&i.test(t.overflow+t.overflowY+t.overflowX))return o;return document.documentElement}function tz(e,t,s,i){return s*((e=e/i-1)*e*e+1)+t}function vd(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Dp,o=FP(e),y=t-o,r=10,g=0;function n(){g+=r;var a=tz(g,o,y,s);Lp(e,a),g<s?window.requestAnimationFrame(n):i(e)}n()}function yb(e,t){var s=e.getBoundingClientRect(),i=t.getBoundingClientRect(),o=t.offsetHeight/3;i.bottom+o>s.bottom?Lp(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+o,e.scrollHeight)):i.top-o<s.top&&Lp(e,Math.max(t.offsetTop-o,0))}function ez(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function Sb(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function nz(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var OP=!1,sz={get passive(){return OP=!0}},gd=typeof window<"u"?window:{};gd.addEventListener&&gd.removeEventListener&&(gd.addEventListener("p",Dp,sz),gd.removeEventListener("p",Dp,!1));var iz=OP;function rz(e){return e!=null}function az(e){return Array.isArray(e)}function xd(e,t,s){return e?t:s}var oz=function(t){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];var y=Object.entries(t).filter(function(r){var g=kr(r,1),n=g[0];return!i.includes(n)});return y.reduce(function(r,g){var n=kr(g,2),a=n[0],p=n[1];return r[a]=p,r},{})},lz=["children","innerProps"],uz=["children","innerProps"];function hz(e){var t=e.maxHeight,s=e.menuEl,i=e.minHeight,o=e.placement,y=e.shouldScroll,r=e.isFixedPosition,g=e.controlHeight,n=_7(s),a={placement:"bottom",maxHeight:t};if(!s||!s.offsetParent)return a;var p=n.getBoundingClientRect(),h=p.height,u=s.getBoundingClientRect(),d=u.bottom,l=u.height,c=u.top,m=s.offsetParent.getBoundingClientRect(),f=m.top,v=r?window.innerHeight:q7(n),S=FP(n),x=parseInt(getComputedStyle(s).marginBottom,10),T=parseInt(getComputedStyle(s).marginTop,10),C=f-T,w=v-c,b=C+S,E=h-S-c,A=d-v+S+x,I=S+c-T,R=160;switch(o){case"auto":case"bottom":if(w>=l)return{placement:"bottom",maxHeight:t};if(E>=l&&!r)return y&&vd(n,A,R),{placement:"bottom",maxHeight:t};if(!r&&E>=i||r&&w>=i){y&&vd(n,A,R);var N=r?w-x:E-x;return{placement:"bottom",maxHeight:N}}if(o==="auto"||r){var F=t,P=r?C:b;return P>=i&&(F=Math.min(P-x-g,t)),{placement:"top",maxHeight:F}}if(o==="bottom")return y&&Lp(n,A),{placement:"bottom",maxHeight:t};break;case"top":if(C>=l)return{placement:"top",maxHeight:t};if(b>=l&&!r)return y&&vd(n,I,R),{placement:"top",maxHeight:t};if(!r&&b>=i||r&&C>=i){var D=t;return(!r&&b>=i||r&&C>=i)&&(D=r?C-T:b-T),y&&vd(n,I,R),{placement:"top",maxHeight:D}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(o,'".'))}return a}function cz(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var DP=function(t){return t==="auto"?"bottom":t},fz=function(t,s){var i,o=t.placement,y=t.theme,r=y.borderRadius,g=y.spacing,n=y.colors;return Xt((i={label:"menu"},fh(i,cz(o),"100%"),fh(i,"position","absolute"),fh(i,"width","100%"),fh(i,"zIndex",1),i),s?{}:{backgroundColor:n.neutral0,borderRadius:r,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:g.menuGutter,marginTop:g.menuGutter})},LP=dt.createContext(null),dz=function(t){var s=t.children,i=t.minMenuHeight,o=t.maxMenuHeight,y=t.menuPlacement,r=t.menuPosition,g=t.menuShouldScrollIntoView,n=t.theme,a=dt.useContext(LP)||{},p=a.setPortalPlacement,h=dt.useRef(null),u=dt.useState(o),d=kr(u,2),l=d[0],c=d[1],m=dt.useState(null),f=kr(m,2),v=f[0],S=f[1],x=n.spacing.controlHeight;return py(function(){var T=h.current;if(T){var C=r==="fixed",w=g&&!C,b=hz({maxHeight:o,menuEl:T,minHeight:i,placement:y,shouldScroll:w,isFixedPosition:C,controlHeight:x});c(b.maxHeight),S(b.placement),p==null||p(b.placement)}},[o,y,r,g,i,p,x]),s({ref:h,placerProps:Xt(Xt({},t),{},{placement:v||DP(y),maxHeight:l})})},pz=function(t){var s=t.children,i=t.innerRef,o=t.innerProps;return Yt("div",Kt({},qe(t,"menu",{menu:!0}),{ref:i},o),s)},mz=pz,vz=function(t,s){var i=t.maxHeight,o=t.theme.spacing.baseUnit;return Xt({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},s?{}:{paddingBottom:o,paddingTop:o})},gz=function(t){var s=t.children,i=t.innerProps,o=t.innerRef,y=t.isMulti;return Yt("div",Kt({},qe(t,"menuList",{"menu-list":!0,"menu-list--is-multi":y}),{ref:o},i),s)},MP=function(t,s){var i=t.theme,o=i.spacing.baseUnit,y=i.colors;return Xt({textAlign:"center"},s?{}:{color:y.neutral40,padding:"".concat(o*2,"px ").concat(o*3,"px")})},xz=MP,yz=MP,Sz=function(t){var s=t.children,i=s===void 0?"No options":s,o=t.innerProps,y=Jr(t,lz);return Yt("div",Kt({},qe(Xt(Xt({},y),{},{children:i,innerProps:o}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),o),i)},Tz=function(t){var s=t.children,i=s===void 0?"Loading...":s,o=t.innerProps,y=Jr(t,uz);return Yt("div",Kt({},qe(Xt(Xt({},y),{},{children:i,innerProps:o}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),o),i)},Cz=function(t){var s=t.rect,i=t.offset,o=t.position;return{left:s.left,position:o,top:i,width:s.width,zIndex:1}},wz=function(t){var s=t.appendTo,i=t.children,o=t.controlElement,y=t.innerProps,r=t.menuPlacement,g=t.menuPosition,n=dt.useRef(null),a=dt.useRef(null),p=dt.useState(DP(r)),h=kr(p,2),u=h[0],d=h[1],l=dt.useMemo(function(){return{setPortalPlacement:d}},[]),c=dt.useState(null),m=kr(c,2),f=m[0],v=m[1],S=dt.useCallback(function(){if(o){var w=ez(o),b=g==="fixed"?0:window.pageYOffset,E=w[u]+b;(E!==(f==null?void 0:f.offset)||w.left!==(f==null?void 0:f.rect.left)||w.width!==(f==null?void 0:f.rect.width))&&v({offset:E,rect:w})}},[o,g,u,f==null?void 0:f.offset,f==null?void 0:f.rect.left,f==null?void 0:f.rect.width]);py(function(){S()},[S]);var x=dt.useCallback(function(){typeof a.current=="function"&&(a.current(),a.current=null),o&&n.current&&(a.current=j7(o,n.current,S,{elementResize:"ResizeObserver"in window}))},[o,S]);py(function(){x()},[x]);var T=dt.useCallback(function(w){n.current=w,x()},[x]);if(!s&&g!=="fixed"||!f)return null;var C=Yt("div",Kt({ref:T},qe(Xt(Xt({},t),{},{offset:f.offset,position:g,rect:f.rect}),"menuPortal",{"menu-portal":!0}),y),i);return Yt(LP.Provider,{value:l},s?QN.createPortal(C,s):C)},Ez=function(t){var s=t.isDisabled,i=t.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:s?"none":void 0,position:"relative"}},bz=function(t){var s=t.children,i=t.innerProps,o=t.isDisabled,y=t.isRtl;return Yt("div",Kt({},qe(t,"container",{"--is-disabled":o,"--is-rtl":y}),i),s)},Az=function(t,s){var i=t.theme.spacing,o=t.isMulti,y=t.hasValue,r=t.selectProps.controlShouldRenderValue;return Xt({alignItems:"center",display:o&&y&&r?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},s?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},Iz=function(t){var s=t.children,i=t.innerProps,o=t.isMulti,y=t.hasValue;return Yt("div",Kt({},qe(t,"valueContainer",{"value-container":!0,"value-container--is-multi":o,"value-container--has-value":y}),i),s)},Rz=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Nz=function(t){var s=t.children,i=t.innerProps;return Yt("div",Kt({},qe(t,"indicatorsContainer",{indicators:!0}),i),s)},Tb,Pz=["size"],Fz=["innerProps","isRtl","size"],Oz={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},$P=function(t){var s=t.size,i=Jr(t,Pz);return Yt("svg",Kt({height:s,width:s,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Oz},i))},D2=function(t){return Yt($P,Kt({size:20},t),Yt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},BP=function(t){return Yt($P,Kt({size:20},t),Yt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},kP=function(t,s){var i=t.isFocused,o=t.theme,y=o.spacing.baseUnit,r=o.colors;return Xt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},s?{}:{color:i?r.neutral60:r.neutral20,padding:y*2,":hover":{color:i?r.neutral80:r.neutral40}})},Dz=kP,Lz=function(t){var s=t.children,i=t.innerProps;return Yt("div",Kt({},qe(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),s||Yt(BP,null))},Mz=kP,$z=function(t){var s=t.children,i=t.innerProps;return Yt("div",Kt({},qe(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),s||Yt(D2,null))},Bz=function(t,s){var i=t.isDisabled,o=t.theme,y=o.spacing.baseUnit,r=o.colors;return Xt({label:"indicatorSeparator",alignSelf:"stretch",width:1},s?{}:{backgroundColor:i?r.neutral10:r.neutral20,marginBottom:y*2,marginTop:y*2})},kz=function(t){var s=t.innerProps;return Yt("span",Kt({},s,qe(t,"indicatorSeparator",{"indicator-separator":!0})))},zz=M7(Tb||(Tb=$7([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Vz=function(t,s){var i=t.isFocused,o=t.size,y=t.theme,r=y.colors,g=y.spacing.baseUnit;return Xt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:o,lineHeight:1,marginRight:o,textAlign:"center",verticalAlign:"middle"},s?{}:{color:i?r.neutral60:r.neutral20,padding:g*2})},L0=function(t){var s=t.delay,i=t.offset;return Yt("span",{css:N2({animation:"".concat(zz," 1s ease-in-out ").concat(s,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Gz=function(t){var s=t.innerProps,i=t.isRtl,o=t.size,y=o===void 0?4:o,r=Jr(t,Fz);return Yt("div",Kt({},qe(Xt(Xt({},r),{},{innerProps:s,isRtl:i,size:y}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),s),Yt(L0,{delay:0,offset:i}),Yt(L0,{delay:160,offset:!0}),Yt(L0,{delay:320,offset:!i}))},Uz=function(t,s){var i=t.isDisabled,o=t.isFocused,y=t.theme,r=y.colors,g=y.borderRadius,n=y.spacing;return Xt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:n.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},s?{}:{backgroundColor:i?r.neutral5:r.neutral0,borderColor:i?r.neutral10:o?r.primary:r.neutral20,borderRadius:g,borderStyle:"solid",borderWidth:1,boxShadow:o?"0 0 0 1px ".concat(r.primary):void 0,"&:hover":{borderColor:o?r.primary:r.neutral30}})},Wz=function(t){var s=t.children,i=t.isDisabled,o=t.isFocused,y=t.innerRef,r=t.innerProps,g=t.menuIsOpen;return Yt("div",Kt({ref:y},qe(t,"control",{control:!0,"control--is-disabled":i,"control--is-focused":o,"control--menu-is-open":g}),r),s)},Hz=Wz,Xz=["data"],Yz=function(t,s){var i=t.theme.spacing;return s?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},Kz=function(t){var s=t.children,i=t.cx,o=t.getStyles,y=t.getClassNames,r=t.Heading,g=t.headingProps,n=t.innerProps,a=t.label,p=t.theme,h=t.selectProps;return Yt("div",Kt({},qe(t,"group",{group:!0}),n),Yt(r,Kt({},g,{selectProps:h,theme:p,getStyles:o,getClassNames:y,cx:i}),a),Yt("div",null,s))},jz=function(t,s){var i=t.theme,o=i.colors,y=i.spacing;return Xt({label:"group",cursor:"default",display:"block"},s?{}:{color:o.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:y.baseUnit*3,paddingRight:y.baseUnit*3,textTransform:"uppercase"})},Zz=function(t){var s=PP(t);s.data;var i=Jr(s,Xz);return Yt("div",Kt({},qe(t,"groupHeading",{"group-heading":!0}),i))},Jz=Kz,Qz=["innerRef","isDisabled","isHidden","inputClassName"],qz=function(t,s){var i=t.isDisabled,o=t.value,y=t.theme,r=y.spacing,g=y.colors;return Xt(Xt({visibility:i?"hidden":"visible",transform:o?"translateZ(0)":""},_z),s?{}:{margin:r.baseUnit/2,paddingBottom:r.baseUnit/2,paddingTop:r.baseUnit/2,color:g.neutral80})},zP={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},_z={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Xt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},zP)},tV=function(t){return Xt({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},zP)},eV=function(t){var s=t.cx,i=t.value,o=PP(t),y=o.innerRef,r=o.isDisabled,g=o.isHidden,n=o.inputClassName,a=Jr(o,Qz);return Yt("div",Kt({},qe(t,"input",{"input-container":!0}),{"data-value":i||""}),Yt("input",Kt({className:s({input:!0},n),ref:y,style:tV(g),disabled:r},a)))},nV=eV,sV=function(t,s){var i=t.theme,o=i.spacing,y=i.borderRadius,r=i.colors;return Xt({label:"multiValue",display:"flex",minWidth:0},s?{}:{backgroundColor:r.neutral10,borderRadius:y/2,margin:o.baseUnit/2})},iV=function(t,s){var i=t.theme,o=i.borderRadius,y=i.colors,r=t.cropWithEllipsis;return Xt({overflow:"hidden",textOverflow:r||r===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},s?{}:{borderRadius:o/2,color:y.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},rV=function(t,s){var i=t.theme,o=i.spacing,y=i.borderRadius,r=i.colors,g=t.isFocused;return Xt({alignItems:"center",display:"flex"},s?{}:{borderRadius:y/2,backgroundColor:g?r.dangerLight:void 0,paddingLeft:o.baseUnit,paddingRight:o.baseUnit,":hover":{backgroundColor:r.dangerLight,color:r.danger}})},VP=function(t){var s=t.children,i=t.innerProps;return Yt("div",i,s)},aV=VP,oV=VP;function lV(e){var t=e.children,s=e.innerProps;return Yt("div",Kt({role:"button"},s),t||Yt(D2,{size:14}))}var uV=function(t){var s=t.children,i=t.components,o=t.data,y=t.innerProps,r=t.isDisabled,g=t.removeProps,n=t.selectProps,a=i.Container,p=i.Label,h=i.Remove;return Yt(a,{data:o,innerProps:Xt(Xt({},qe(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":r})),y),selectProps:n},Yt(p,{data:o,innerProps:Xt({},qe(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:n},s),Yt(h,{data:o,innerProps:Xt(Xt({},qe(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(s||"option")},g),selectProps:n}))},hV=uV,cV=function(t,s){var i=t.isDisabled,o=t.isFocused,y=t.isSelected,r=t.theme,g=r.spacing,n=r.colors;return Xt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},s?{}:{backgroundColor:y?n.primary:o?n.primary25:"transparent",color:i?n.neutral20:y?n.neutral0:"inherit",padding:"".concat(g.baseUnit*2,"px ").concat(g.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:y?n.primary:n.primary50}})},fV=function(t){var s=t.children,i=t.isDisabled,o=t.isFocused,y=t.isSelected,r=t.innerRef,g=t.innerProps;return Yt("div",Kt({},qe(t,"option",{option:!0,"option--is-disabled":i,"option--is-focused":o,"option--is-selected":y}),{ref:r,"aria-disabled":i},g),s)},dV=fV,pV=function(t,s){var i=t.theme,o=i.spacing,y=i.colors;return Xt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},s?{}:{color:y.neutral50,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},mV=function(t){var s=t.children,i=t.innerProps;return Yt("div",Kt({},qe(t,"placeholder",{placeholder:!0}),i),s)},vV=mV,gV=function(t,s){var i=t.isDisabled,o=t.theme,y=o.spacing,r=o.colors;return Xt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},s?{}:{color:i?r.neutral40:r.neutral80,marginLeft:y.baseUnit/2,marginRight:y.baseUnit/2})},xV=function(t){var s=t.children,i=t.isDisabled,o=t.innerProps;return Yt("div",Kt({},qe(t,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),o),s)},yV=xV,SV={ClearIndicator:$z,Control:Hz,DropdownIndicator:Lz,DownChevron:BP,CrossIcon:D2,Group:Jz,GroupHeading:Zz,IndicatorsContainer:Nz,IndicatorSeparator:kz,Input:nV,LoadingIndicator:Gz,Menu:mz,MenuList:gz,MenuPortal:wz,LoadingMessage:Tz,NoOptionsMessage:Sz,MultiValue:hV,MultiValueContainer:aV,MultiValueLabel:oV,MultiValueRemove:lV,Option:dV,Placeholder:vV,SelectContainer:bz,SingleValue:yV,ValueContainer:Iz},TV=function(t){return Xt(Xt({},SV),t.components)},Cb=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function CV(e,t){return!!(e===t||Cb(e)&&Cb(t))}function wV(e,t){if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++)if(!CV(e[s],t[s]))return!1;return!0}function EV(e,t){t===void 0&&(t=wV);var s=null;function i(){for(var o=[],y=0;y<arguments.length;y++)o[y]=arguments[y];if(s&&s.lastThis===this&&t(o,s.lastArgs))return s.lastResult;var r=e.apply(this,o);return s={lastResult:r,lastArgs:o,lastThis:this},r}return i.clear=function(){s=null},i}var bV={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},AV=function(t){return Yt("span",Kt({css:bV},t))},wb=AV,IV={guidance:function(t){var s=t.isSearchable,i=t.isMulti,o=t.isDisabled,y=t.tabSelectsValue,r=t.context;switch(r){case"menu":return"Use Up and Down to choose options".concat(o?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(y?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(t["aria-label"]||"Select"," is focused ").concat(s?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var s=t.action,i=t.label,o=i===void 0?"":i,y=t.labels,r=t.isDisabled;switch(s){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(o,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(y.length>1?"s":""," ").concat(y.join(","),", selected.");case"select-option":return r?"option ".concat(o," is disabled. Select another option."):"option ".concat(o,", selected.");default:return""}},onFocus:function(t){var s=t.context,i=t.focused,o=t.options,y=t.label,r=y===void 0?"":y,g=t.selectValue,n=t.isDisabled,a=t.isSelected,p=function(l,c){return l&&l.length?"".concat(l.indexOf(c)+1," of ").concat(l.length):""};if(s==="value"&&g)return"value ".concat(r," focused, ").concat(p(g,i),".");if(s==="menu"){var h=n?" disabled":"",u="".concat(a?"selected":"focused").concat(h);return"option ".concat(r," ").concat(u,", ").concat(p(o,i),".")}return""},onFilter:function(t){var s=t.inputValue,i=t.resultsMessage;return"".concat(i).concat(s?" for search term "+s:"",".")}},RV=function(t){var s=t.ariaSelection,i=t.focusedOption,o=t.focusedValue,y=t.focusableOptions,r=t.isFocused,g=t.selectValue,n=t.selectProps,a=t.id,p=n.ariaLiveMessages,h=n.getOptionLabel,u=n.inputValue,d=n.isMulti,l=n.isOptionDisabled,c=n.isSearchable,m=n.menuIsOpen,f=n.options,v=n.screenReaderStatus,S=n.tabSelectsValue,x=n["aria-label"],T=n["aria-live"],C=dt.useMemo(function(){return Xt(Xt({},IV),p||{})},[p]),w=dt.useMemo(function(){var F="";if(s&&C.onChange){var P=s.option,D=s.options,M=s.removedValue,L=s.removedValues,k=s.value,V=function(z){return Array.isArray(z)?null:z},W=M||P||V(k),K=W?h(W):"",B=D||L||void 0,G=B?B.map(h):[],O=Xt({isDisabled:W&&l(W,g),label:K,labels:G},s);F=C.onChange(O)}return F},[s,C,l,g,h]),b=dt.useMemo(function(){var F="",P=i||o,D=!!(i&&g&&g.includes(i));if(P&&C.onFocus){var M={focused:P,label:h(P),isDisabled:l(P,g),isSelected:D,options:y,context:P===i?"menu":"value",selectValue:g};F=C.onFocus(M)}return F},[i,o,h,l,C,y,g]),E=dt.useMemo(function(){var F="";if(m&&f.length&&C.onFilter){var P=v({count:y.length});F=C.onFilter({inputValue:u,resultsMessage:P})}return F},[y,u,m,C,f,v]),A=dt.useMemo(function(){var F="";if(C.guidance){var P=o?"value":m?"menu":"input";F=C.guidance({"aria-label":x,context:P,isDisabled:i&&l(i,g),isMulti:d,isSearchable:c,tabSelectsValue:S})}return F},[x,i,o,d,l,c,m,C,g,S]),I="".concat(b," ").concat(E," ").concat(A),R=Yt(dt.Fragment,null,Yt("span",{id:"aria-selection"},w),Yt("span",{id:"aria-context"},I)),N=(s==null?void 0:s.action)==="initial-input-focus";return Yt(dt.Fragment,null,Yt(wb,{id:a},N&&R),Yt(wb,{"aria-live":T,"aria-atomic":"false","aria-relevant":"additions text"},r&&!N&&R))},NV=RV,my=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],PV=new RegExp("["+my.map(function(e){return e.letters}).join("")+"]","g"),GP={};for(var M0=0;M0<my.length;M0++)for(var $0=my[M0],B0=0;B0<$0.letters.length;B0++)GP[$0.letters[B0]]=$0.base;var UP=function(t){return t.replace(PV,function(s){return GP[s]})},FV=EV(UP),Eb=function(t){return t.replace(/^\s+|\s+$/g,"")},OV=function(t){return"".concat(t.label," ").concat(t.value)},DV=function(t){return function(s,i){if(s.data.__isNew__)return!0;var o=Xt({ignoreCase:!0,ignoreAccents:!0,stringify:OV,trim:!0,matchFrom:"any"},t),y=o.ignoreCase,r=o.ignoreAccents,g=o.stringify,n=o.trim,a=o.matchFrom,p=n?Eb(i):i,h=n?Eb(g(s)):g(s);return y&&(p=p.toLowerCase(),h=h.toLowerCase()),r&&(p=FV(p),h=UP(h)),a==="start"?h.substr(0,p.length)===p:h.indexOf(p)>-1}},LV=["innerRef"];function MV(e){var t=e.innerRef,s=Jr(e,LV),i=oz(s,"onExited","in","enter","exit","appear");return Yt("input",Kt({ref:t},i,{css:N2({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var $V=function(t){t.preventDefault(),t.stopPropagation()};function BV(e){var t=e.isEnabled,s=e.onBottomArrive,i=e.onBottomLeave,o=e.onTopArrive,y=e.onTopLeave,r=dt.useRef(!1),g=dt.useRef(!1),n=dt.useRef(0),a=dt.useRef(null),p=dt.useCallback(function(m,f){if(a.current!==null){var v=a.current,S=v.scrollTop,x=v.scrollHeight,T=v.clientHeight,C=a.current,w=f>0,b=x-T-S,E=!1;b>f&&r.current&&(i&&i(m),r.current=!1),w&&g.current&&(y&&y(m),g.current=!1),w&&f>b?(s&&!r.current&&s(m),C.scrollTop=x,E=!0,r.current=!0):!w&&-f>S&&(o&&!g.current&&o(m),C.scrollTop=0,E=!0,g.current=!0),E&&$V(m)}},[s,i,o,y]),h=dt.useCallback(function(m){p(m,m.deltaY)},[p]),u=dt.useCallback(function(m){n.current=m.changedTouches[0].clientY},[]),d=dt.useCallback(function(m){var f=n.current-m.changedTouches[0].clientY;p(m,f)},[p]),l=dt.useCallback(function(m){if(m){var f=iz?{passive:!1}:!1;m.addEventListener("wheel",h,f),m.addEventListener("touchstart",u,f),m.addEventListener("touchmove",d,f)}},[d,u,h]),c=dt.useCallback(function(m){m&&(m.removeEventListener("wheel",h,!1),m.removeEventListener("touchstart",u,!1),m.removeEventListener("touchmove",d,!1))},[d,u,h]);return dt.useEffect(function(){if(t){var m=a.current;return l(m),function(){c(m)}}},[t,l,c]),function(m){a.current=m}}var bb=["boxSizing","height","overflow","paddingRight","position"],Ab={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Ib(e){e.preventDefault()}function Rb(e){e.stopPropagation()}function Nb(){var e=this.scrollTop,t=this.scrollHeight,s=e+this.offsetHeight;e===0?this.scrollTop=1:s===t&&(this.scrollTop=e-1)}function Pb(){return"ontouchstart"in window||navigator.maxTouchPoints}var Fb=!!(typeof window<"u"&&window.document&&window.document.createElement),nh=0,cl={capture:!1,passive:!1};function kV(e){var t=e.isEnabled,s=e.accountForScrollbars,i=s===void 0?!0:s,o=dt.useRef({}),y=dt.useRef(null),r=dt.useCallback(function(n){if(Fb){var a=document.body,p=a&&a.style;if(i&&bb.forEach(function(l){var c=p&&p[l];o.current[l]=c}),i&&nh<1){var h=parseInt(o.current.paddingRight,10)||0,u=document.body?document.body.clientWidth:0,d=window.innerWidth-u+h||0;Object.keys(Ab).forEach(function(l){var c=Ab[l];p&&(p[l]=c)}),p&&(p.paddingRight="".concat(d,"px"))}a&&Pb()&&(a.addEventListener("touchmove",Ib,cl),n&&(n.addEventListener("touchstart",Nb,cl),n.addEventListener("touchmove",Rb,cl))),nh+=1}},[i]),g=dt.useCallback(function(n){if(Fb){var a=document.body,p=a&&a.style;nh=Math.max(nh-1,0),i&&nh<1&&bb.forEach(function(h){var u=o.current[h];p&&(p[h]=u)}),a&&Pb()&&(a.removeEventListener("touchmove",Ib,cl),n&&(n.removeEventListener("touchstart",Nb,cl),n.removeEventListener("touchmove",Rb,cl)))}},[i]);return dt.useEffect(function(){if(t){var n=y.current;return r(n),function(){g(n)}}},[t,r,g]),function(n){y.current=n}}var zV=function(){return document.activeElement&&document.activeElement.blur()},VV={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function GV(e){var t=e.children,s=e.lockEnabled,i=e.captureEnabled,o=i===void 0?!0:i,y=e.onBottomArrive,r=e.onBottomLeave,g=e.onTopArrive,n=e.onTopLeave,a=BV({isEnabled:o,onBottomArrive:y,onBottomLeave:r,onTopArrive:g,onTopLeave:n}),p=kV({isEnabled:s}),h=function(d){a(d),p(d)};return Yt(dt.Fragment,null,s&&Yt("div",{onClick:zV,css:VV}),t(h))}var UV={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},WV=function(t){var s=t.name,i=t.onFocus;return Yt("input",{required:!0,name:s,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:UV,value:"",onChange:function(){}})},HV=WV,XV=function(t){return t.label},YV=function(t){return t.label},KV=function(t){return t.value},jV=function(t){return!!t.isDisabled},ZV={clearIndicator:Mz,container:Ez,control:Uz,dropdownIndicator:Dz,group:Yz,groupHeading:jz,indicatorsContainer:Rz,indicatorSeparator:Bz,input:qz,loadingIndicator:Vz,loadingMessage:yz,menu:fz,menuList:vz,menuPortal:Cz,multiValue:sV,multiValueLabel:iV,multiValueRemove:rV,noOptionsMessage:xz,option:cV,placeholder:pV,singleValue:gV,valueContainer:Az},JV={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},QV=4,WP=4,qV=38,_V=WP*2,tG={baseUnit:WP,controlHeight:qV,menuGutter:_V},k0={borderRadius:QV,colors:JV,spacing:tG},eG={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Sb(),captureMenuScroll:!Sb(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:DV(),formatGroupLabel:XV,getOptionLabel:YV,getOptionValue:KV,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:jV,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!nz(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var s=t.count;return"".concat(s," result").concat(s!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Ob(e,t,s,i){var o=KP(e,t,s),y=jP(e,t,s),r=YP(e,t),g=Mp(e,t);return{type:"option",data:t,isDisabled:o,isSelected:y,label:r,value:g,index:i}}function HP(e,t){return e.options.map(function(s,i){if("options"in s){var o=s.options.map(function(r,g){return Ob(e,r,t,g)}).filter(function(r){return Db(e,r)});return o.length>0?{type:"group",data:s,options:o,index:i}:void 0}var y=Ob(e,s,t,i);return Db(e,y)?y:void 0}).filter(rz)}function XP(e){return e.reduce(function(t,s){return s.type==="group"?t.push.apply(t,uP(s.options.map(function(i){return i.data}))):t.push(s.data),t},[])}function nG(e,t){return XP(HP(e,t))}function Db(e,t){var s=e.inputValue,i=s===void 0?"":s,o=t.data,y=t.isSelected,r=t.label,g=t.value;return(!JP(e)||!y)&&ZP(e,{label:r,value:g,data:o},i)}function sG(e,t){var s=e.focusedValue,i=e.selectValue,o=i.indexOf(s);if(o>-1){var y=t.indexOf(s);if(y>-1)return s;if(o<t.length)return t[o]}return null}function iG(e,t){var s=e.focusedOption;return s&&t.indexOf(s)>-1?s:t[0]}var YP=function(t,s){return t.getOptionLabel(s)},Mp=function(t,s){return t.getOptionValue(s)};function KP(e,t,s){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,s):!1}function jP(e,t,s){if(s.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,s);var i=Mp(e,t);return s.some(function(o){return Mp(e,o)===i})}function ZP(e,t,s){return e.filterOption?e.filterOption(t,s):!0}var JP=function(t){var s=t.hideSelectedOptions,i=t.isMulti;return s===void 0?i:s},rG=1,QP=function(e){A8(s,e);var t=P8(s);function s(i){var o;if(E8(this,s),o=t.call(this,i),o.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.instancePrefix="",o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.controlRef=null,o.getControlRef=function(g){o.controlRef=g},o.focusedOptionRef=null,o.getFocusedOptionRef=function(g){o.focusedOptionRef=g},o.menuListRef=null,o.getMenuListRef=function(g){o.menuListRef=g},o.inputRef=null,o.getInputRef=function(g){o.inputRef=g},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(g,n){var a=o.props,p=a.onChange,h=a.name;n.name=h,o.ariaOnChange(g,n),p(g,n)},o.setValue=function(g,n,a){var p=o.props,h=p.closeMenuOnSelect,u=p.isMulti,d=p.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:d}),h&&(o.setState({inputIsHiddenAfterUpdate:!u}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(g,{action:n,option:a})},o.selectOption=function(g){var n=o.props,a=n.blurInputOnSelect,p=n.isMulti,h=n.name,u=o.state.selectValue,d=p&&o.isOptionSelected(g,u),l=o.isOptionDisabled(g,u);if(d){var c=o.getOptionValue(g);o.setValue(u.filter(function(m){return o.getOptionValue(m)!==c}),"deselect-option",g)}else if(!l)p?o.setValue([].concat(uP(u),[g]),"select-option",g):o.setValue(g,"select-option");else{o.ariaOnChange(g,{action:"select-option",option:g,name:h});return}a&&o.blurInput()},o.removeValue=function(g){var n=o.props.isMulti,a=o.state.selectValue,p=o.getOptionValue(g),h=a.filter(function(d){return o.getOptionValue(d)!==p}),u=xd(n,h,h[0]||null);o.onChange(u,{action:"remove-value",removedValue:g}),o.focusInput()},o.clearValue=function(){var g=o.state.selectValue;o.onChange(xd(o.props.isMulti,[],null),{action:"clear",removedValues:g})},o.popValue=function(){var g=o.props.isMulti,n=o.state.selectValue,a=n[n.length-1],p=n.slice(0,n.length-1),h=xd(g,p,p[0]||null);o.onChange(h,{action:"pop-value",removedValue:a})},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var g=arguments.length,n=new Array(g),a=0;a<g;a++)n[a]=arguments[a];return Q7.apply(void 0,[o.props.classNamePrefix].concat(n))},o.getOptionLabel=function(g){return YP(o.props,g)},o.getOptionValue=function(g){return Mp(o.props,g)},o.getStyles=function(g,n){var a=o.props.unstyled,p=ZV[g](n,a);p.boxSizing="border-box";var h=o.props.styles[g];return h?h(p,n):p},o.getClassNames=function(g,n){var a,p;return(a=(p=o.props.classNames)[g])===null||a===void 0?void 0:a.call(p,n)},o.getElementId=function(g){return"".concat(o.instancePrefix,"-").concat(g)},o.getComponents=function(){return TV(o.props)},o.buildCategorizedOptions=function(){return HP(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return XP(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(g,n){o.setState({ariaSelection:Xt({value:g},n)})},o.onMenuMouseDown=function(g){g.button===0&&(g.stopPropagation(),g.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(g){o.blockOptionHover=!1},o.onControlMouseDown=function(g){if(!g.defaultPrevented){var n=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?g.target.tagName!=="INPUT"&&g.target.tagName!=="TEXTAREA"&&o.onMenuClose():n&&o.openMenu("first"):(n&&(o.openAfterFocus=!0),o.focusInput()),g.target.tagName!=="INPUT"&&g.target.tagName!=="TEXTAREA"&&g.preventDefault()}},o.onDropdownIndicatorMouseDown=function(g){if(!(g&&g.type==="mousedown"&&g.button!==0)&&!o.props.isDisabled){var n=o.props,a=n.isMulti,p=n.menuIsOpen;o.focusInput(),p?(o.setState({inputIsHiddenAfterUpdate:!a}),o.onMenuClose()):o.openMenu("first"),g.preventDefault()}},o.onClearIndicatorMouseDown=function(g){g&&g.type==="mousedown"&&g.button!==0||(o.clearValue(),g.preventDefault(),o.openAfterFocus=!1,g.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(g){typeof o.props.closeMenuOnScroll=="boolean"?g.target instanceof HTMLElement&&Km(g.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(g)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(g){var n=g.touches,a=n&&n.item(0);a&&(o.initialTouchX=a.clientX,o.initialTouchY=a.clientY,o.userIsDragging=!1)},o.onTouchMove=function(g){var n=g.touches,a=n&&n.item(0);if(a){var p=Math.abs(a.clientX-o.initialTouchX),h=Math.abs(a.clientY-o.initialTouchY),u=5;o.userIsDragging=p>u||h>u}},o.onTouchEnd=function(g){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(g.target)&&o.menuListRef&&!o.menuListRef.contains(g.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(g){o.userIsDragging||o.onControlMouseDown(g)},o.onClearIndicatorTouchEnd=function(g){o.userIsDragging||o.onClearIndicatorMouseDown(g)},o.onDropdownIndicatorTouchEnd=function(g){o.userIsDragging||o.onDropdownIndicatorMouseDown(g)},o.handleInputChange=function(g){var n=o.props.inputValue,a=g.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(a,{action:"input-change",prevInputValue:n}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(g){o.props.onFocus&&o.props.onFocus(g),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(g){var n=o.props.inputValue;if(o.menuListRef&&o.menuListRef.contains(document.activeElement)){o.inputRef.focus();return}o.props.onBlur&&o.props.onBlur(g),o.onInputChange("",{action:"input-blur",prevInputValue:n}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1})},o.onOptionHover=function(g){o.blockOptionHover||o.state.focusedOption===g||o.setState({focusedOption:g})},o.shouldHideSelectedOptions=function(){return JP(o.props)},o.onValueInputFocus=function(g){g.preventDefault(),g.stopPropagation(),o.focus()},o.onKeyDown=function(g){var n=o.props,a=n.isMulti,p=n.backspaceRemovesValue,h=n.escapeClearsValue,u=n.inputValue,d=n.isClearable,l=n.isDisabled,c=n.menuIsOpen,m=n.onKeyDown,f=n.tabSelectsValue,v=n.openMenuOnFocus,S=o.state,x=S.focusedOption,T=S.focusedValue,C=S.selectValue;if(!l&&!(typeof m=="function"&&(m(g),g.defaultPrevented))){switch(o.blockOptionHover=!0,g.key){case"ArrowLeft":if(!a||u)return;o.focusValue("previous");break;case"ArrowRight":if(!a||u)return;o.focusValue("next");break;case"Delete":case"Backspace":if(u)return;if(T)o.removeValue(T);else{if(!p)return;a?o.popValue():d&&o.clearValue()}break;case"Tab":if(o.isComposing||g.shiftKey||!c||!f||!x||v&&o.isOptionSelected(x,C))return;o.selectOption(x);break;case"Enter":if(g.keyCode===229)break;if(c){if(!x||o.isComposing)return;o.selectOption(x);break}return;case"Escape":c?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:u}),o.onMenuClose()):d&&h&&o.clearValue();break;case" ":if(u)return;if(!c){o.openMenu("first");break}if(!x)return;o.selectOption(x);break;case"ArrowUp":c?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":c?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!c)return;o.focusOption("pageup");break;case"PageDown":if(!c)return;o.focusOption("pagedown");break;case"Home":if(!c)return;o.focusOption("first");break;case"End":if(!c)return;o.focusOption("last");break;default:return}g.preventDefault()}},o.instancePrefix="react-select-"+(o.props.instanceId||++rG),o.state.selectValue=xb(i.value),i.menuIsOpen&&o.state.selectValue.length){var y=o.buildFocusableOptions(),r=y.indexOf(o.state.selectValue[0]);o.state.focusedOption=y[r]}return o}return b8(s,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&yb(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(o){var y=this.props,r=y.isDisabled,g=y.menuIsOpen,n=this.state.isFocused;(n&&!r&&o.isDisabled||n&&g&&!o.menuIsOpen)&&this.focusInput(),n&&r&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!n&&!r&&o.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(yb(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,y){this.props.onInputChange(o,y)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var y=this,r=this.state,g=r.selectValue,n=r.isFocused,a=this.buildFocusableOptions(),p=o==="first"?0:a.length-1;if(!this.props.isMulti){var h=a.indexOf(g[0]);h>-1&&(p=h)}this.scrollToFocusedOptionOnUpdate=!(n&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:a[p]},function(){return y.onMenuOpen()})}},{key:"focusValue",value:function(o){var y=this.state,r=y.selectValue,g=y.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var n=r.indexOf(g);g||(n=-1);var a=r.length-1,p=-1;if(r.length){switch(o){case"previous":n===0?p=0:n===-1?p=a:p=n-1;break;case"next":n>-1&&n<a&&(p=n+1);break}this.setState({inputIsHidden:p!==-1,focusedValue:r[p]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",y=this.props.pageSize,r=this.state.focusedOption,g=this.getFocusableOptions();if(g.length){var n=0,a=g.indexOf(r);r||(a=-1),o==="up"?n=a>0?a-1:g.length-1:o==="down"?n=(a+1)%g.length:o==="pageup"?(n=a-y,n<0&&(n=0)):o==="pagedown"?(n=a+y,n>g.length-1&&(n=g.length-1)):o==="last"&&(n=g.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:g[n],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(k0):Xt(Xt({},k0),this.props.theme):k0}},{key:"getCommonProps",value:function(){var o=this.clearValue,y=this.cx,r=this.getStyles,g=this.getClassNames,n=this.getValue,a=this.selectOption,p=this.setValue,h=this.props,u=h.isMulti,d=h.isRtl,l=h.options,c=this.hasValue();return{clearValue:o,cx:y,getStyles:r,getClassNames:g,getValue:n,hasValue:c,isMulti:u,isRtl:d,options:l,selectOption:a,selectProps:h,setValue:p,theme:this.getTheme()}}},{key:"hasValue",value:function(){var o=this.state.selectValue;return o.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,y=o.isClearable,r=o.isMulti;return y===void 0?r:y}},{key:"isOptionDisabled",value:function(o,y){return KP(this.props,o,y)}},{key:"isOptionSelected",value:function(o,y){return jP(this.props,o,y)}},{key:"filterOption",value:function(o,y){return ZP(this.props,o,y)}},{key:"formatOptionLabel",value:function(o,y){if(typeof this.props.formatOptionLabel=="function"){var r=this.props.inputValue,g=this.state.selectValue;return this.props.formatOptionLabel(o,{context:y,inputValue:r,selectValue:g})}else return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var o=this.props,y=o.isDisabled,r=o.isSearchable,g=o.inputId,n=o.inputValue,a=o.tabIndex,p=o.form,h=o.menuIsOpen,u=o.required,d=this.getComponents(),l=d.Input,c=this.state,m=c.inputIsHidden,f=c.ariaSelection,v=this.commonProps,S=g||this.getElementId("input"),x=Xt(Xt(Xt({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":u,role:"combobox"},h&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?(f==null?void 0:f.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?dt.createElement(l,Kt({},v,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:S,innerRef:this.getInputRef,isDisabled:y,isHidden:m,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:a,form:p,type:"text",value:n},x)):dt.createElement(MV,Kt({id:S,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Dp,onFocus:this.onInputFocus,disabled:y,tabIndex:a,inputMode:"none",form:p,value:""},x))}},{key:"renderPlaceholderOrValue",value:function(){var o=this,y=this.getComponents(),r=y.MultiValue,g=y.MultiValueContainer,n=y.MultiValueLabel,a=y.MultiValueRemove,p=y.SingleValue,h=y.Placeholder,u=this.commonProps,d=this.props,l=d.controlShouldRenderValue,c=d.isDisabled,m=d.isMulti,f=d.inputValue,v=d.placeholder,S=this.state,x=S.selectValue,T=S.focusedValue,C=S.isFocused;if(!this.hasValue()||!l)return f?null:dt.createElement(h,Kt({},u,{key:"placeholder",isDisabled:c,isFocused:C,innerProps:{id:this.getElementId("placeholder")}}),v);if(m)return x.map(function(b,E){var A=b===T,I="".concat(o.getOptionLabel(b),"-").concat(o.getOptionValue(b));return dt.createElement(r,Kt({},u,{components:{Container:g,Label:n,Remove:a},isFocused:A,isDisabled:c,key:I,index:E,removeProps:{onClick:function(){return o.removeValue(b)},onTouchEnd:function(){return o.removeValue(b)},onMouseDown:function(N){N.preventDefault()}},data:b}),o.formatOptionLabel(b,"value"))});if(f)return null;var w=x[0];return dt.createElement(p,Kt({},u,{data:w,isDisabled:c}),this.formatOptionLabel(w,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents(),y=o.ClearIndicator,r=this.commonProps,g=this.props,n=g.isDisabled,a=g.isLoading,p=this.state.isFocused;if(!this.isClearable()||!y||n||!this.hasValue()||a)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return dt.createElement(y,Kt({},r,{innerProps:h,isFocused:p}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents(),y=o.LoadingIndicator,r=this.commonProps,g=this.props,n=g.isDisabled,a=g.isLoading,p=this.state.isFocused;if(!y||!a)return null;var h={"aria-hidden":"true"};return dt.createElement(y,Kt({},r,{innerProps:h,isDisabled:n,isFocused:p}))}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),y=o.DropdownIndicator,r=o.IndicatorSeparator;if(!y||!r)return null;var g=this.commonProps,n=this.props.isDisabled,a=this.state.isFocused;return dt.createElement(r,Kt({},g,{isDisabled:n,isFocused:a}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents(),y=o.DropdownIndicator;if(!y)return null;var r=this.commonProps,g=this.props.isDisabled,n=this.state.isFocused,a={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return dt.createElement(y,Kt({},r,{innerProps:a,isDisabled:g,isFocused:n}))}},{key:"renderMenu",value:function(){var o=this,y=this.getComponents(),r=y.Group,g=y.GroupHeading,n=y.Menu,a=y.MenuList,p=y.MenuPortal,h=y.LoadingMessage,u=y.NoOptionsMessage,d=y.Option,l=this.commonProps,c=this.state.focusedOption,m=this.props,f=m.captureMenuScroll,v=m.inputValue,S=m.isLoading,x=m.loadingMessage,T=m.minMenuHeight,C=m.maxMenuHeight,w=m.menuIsOpen,b=m.menuPlacement,E=m.menuPosition,A=m.menuPortalTarget,I=m.menuShouldBlockScroll,R=m.menuShouldScrollIntoView,N=m.noOptionsMessage,F=m.onMenuScrollToTop,P=m.onMenuScrollToBottom;if(!w)return null;var D=function(B,G){var O=B.type,$=B.data,z=B.isDisabled,X=B.isSelected,Y=B.label,Z=B.value,J=c===$,tt=z?void 0:function(){return o.onOptionHover($)},et=z?void 0:function(){return o.selectOption($)},lt="".concat(o.getElementId("option"),"-").concat(G),ut={id:lt,onClick:et,onMouseMove:tt,onMouseOver:tt,tabIndex:-1};return dt.createElement(d,Kt({},l,{innerProps:ut,data:$,isDisabled:z,isSelected:X,key:lt,label:Y,type:O,value:Z,isFocused:J,innerRef:J?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(B.data,"menu"))},M;if(this.hasOptions())M=this.getCategorizedOptions().map(function(K){if(K.type==="group"){var B=K.data,G=K.options,O=K.index,$="".concat(o.getElementId("group"),"-").concat(O),z="".concat($,"-heading");return dt.createElement(r,Kt({},l,{key:$,data:B,options:G,Heading:g,headingProps:{id:z,data:K.data},label:o.formatGroupLabel(K.data)}),K.options.map(function(X){return D(X,"".concat(O,"-").concat(X.index))}))}else if(K.type==="option")return D(K,"".concat(K.index))});else if(S){var L=x({inputValue:v});if(L===null)return null;M=dt.createElement(h,l,L)}else{var k=N({inputValue:v});if(k===null)return null;M=dt.createElement(u,l,k)}var V={minMenuHeight:T,maxMenuHeight:C,menuPlacement:b,menuPosition:E,menuShouldScrollIntoView:R},W=dt.createElement(dz,Kt({},l,V),function(K){var B=K.ref,G=K.placerProps,O=G.placement,$=G.maxHeight;return dt.createElement(n,Kt({},l,V,{innerRef:B,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove,id:o.getElementId("listbox")},isLoading:S,placement:O}),dt.createElement(GV,{captureEnabled:f,onTopArrive:F,onBottomArrive:P,lockEnabled:I},function(z){return dt.createElement(a,Kt({},l,{innerRef:function(Y){o.getMenuListRef(Y),z(Y)},isLoading:S,maxHeight:$,focusedOption:c}),M)}))});return A||E==="fixed"?dt.createElement(p,Kt({},l,{appendTo:A,controlElement:this.controlRef,menuPlacement:b,menuPosition:E}),W):W}},{key:"renderFormField",value:function(){var o=this,y=this.props,r=y.delimiter,g=y.isDisabled,n=y.isMulti,a=y.name,p=y.required,h=this.state.selectValue;if(p&&!this.hasValue()&&!g)return dt.createElement(HV,{name:a,onFocus:this.onValueInputFocus});if(!(!a||g))if(n)if(r){var u=h.map(function(c){return o.getOptionValue(c)}).join(r);return dt.createElement("input",{name:a,type:"hidden",value:u})}else{var d=h.length>0?h.map(function(c,m){return dt.createElement("input",{key:"i-".concat(m),name:a,type:"hidden",value:o.getOptionValue(c)})}):dt.createElement("input",{name:a,type:"hidden",value:""});return dt.createElement("div",null,d)}else{var l=h[0]?this.getOptionValue(h[0]):"";return dt.createElement("input",{name:a,type:"hidden",value:l})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,y=this.state,r=y.ariaSelection,g=y.focusedOption,n=y.focusedValue,a=y.isFocused,p=y.selectValue,h=this.getFocusableOptions();return dt.createElement(NV,Kt({},o,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:g,focusedValue:n,isFocused:a,selectValue:p,focusableOptions:h}))}},{key:"render",value:function(){var o=this.getComponents(),y=o.Control,r=o.IndicatorsContainer,g=o.SelectContainer,n=o.ValueContainer,a=this.props,p=a.className,h=a.id,u=a.isDisabled,d=a.menuIsOpen,l=this.state.isFocused,c=this.commonProps=this.getCommonProps();return dt.createElement(g,Kt({},c,{className:p,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:u,isFocused:l}),this.renderLiveRegion(),dt.createElement(y,Kt({},c,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:u,isFocused:l,menuIsOpen:d}),dt.createElement(n,Kt({},c,{isDisabled:u}),this.renderPlaceholderOrValue(),this.renderInput()),dt.createElement(r,Kt({},c,{isDisabled:u}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(o,y){var r=y.prevProps,g=y.clearFocusValueOnUpdate,n=y.inputIsHiddenAfterUpdate,a=y.ariaSelection,p=y.isFocused,h=y.prevWasFocused,u=o.options,d=o.value,l=o.menuIsOpen,c=o.inputValue,m=o.isMulti,f=xb(d),v={};if(r&&(d!==r.value||u!==r.options||l!==r.menuIsOpen||c!==r.inputValue)){var S=l?nG(o,f):[],x=g?sG(y,f):null,T=iG(y,S);v={selectValue:f,focusedOption:T,focusedValue:x,clearFocusValueOnUpdate:!1}}var C=n!=null&&o!==r?{inputIsHidden:n,inputIsHiddenAfterUpdate:void 0}:{},w=a,b=p&&h;return p&&!b&&(w={value:xd(m,f,f[0]||null),options:f,action:"initial-input-focus"},b=!h),(a==null?void 0:a.action)==="initial-input-focus"&&(w=null),Xt(Xt(Xt({},v),C),{},{prevProps:o,ariaSelection:w,prevWasFocused:b})}}]),s}(dt.Component);QP.defaultProps=eG;var aG=dt.forwardRef(function(e,t){var s=w8(e);return dt.createElement(QP,Kt({ref:t},s))}),oG=aG,qP={exports:{}};(function(e,t){(function(i,o){e.exports=o()})(qn,()=>(()=>{var s={6659:r=>{var g=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function p(l,c,m){this.fn=l,this.context=c,this.once=m||!1}function h(l,c,m,f,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var S=new p(m,f||l,v),x=n?n+c:c;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],S]:l._events[x].push(S):(l._events[x]=S,l._eventsCount++),l}function u(l,c){--l._eventsCount===0?l._events=new a:delete l._events[c]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var c=[],m,f;if(this._eventsCount===0)return c;for(f in m=this._events)g.call(m,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(m)):c},d.prototype.listeners=function(c){var m=n?n+c:c,f=this._events[m];if(!f)return[];if(f.fn)return[f.fn];for(var v=0,S=f.length,x=new Array(S);v<S;v++)x[v]=f[v].fn;return x},d.prototype.listenerCount=function(c){var m=n?n+c:c,f=this._events[m];return f?f.fn?1:f.length:0},d.prototype.emit=function(c,m,f,v,S,x){var T=n?n+c:c;if(!this._events[T])return!1;var C=this._events[T],w=arguments.length,b,E;if(C.fn){switch(C.once&&this.removeListener(c,C.fn,void 0,!0),w){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,m),!0;case 3:return C.fn.call(C.context,m,f),!0;case 4:return C.fn.call(C.context,m,f,v),!0;case 5:return C.fn.call(C.context,m,f,v,S),!0;case 6:return C.fn.call(C.context,m,f,v,S,x),!0}for(E=1,b=new Array(w-1);E<w;E++)b[E-1]=arguments[E];C.fn.apply(C.context,b)}else{var A=C.length,I;for(E=0;E<A;E++)switch(C[E].once&&this.removeListener(c,C[E].fn,void 0,!0),w){case 1:C[E].fn.call(C[E].context);break;case 2:C[E].fn.call(C[E].context,m);break;case 3:C[E].fn.call(C[E].context,m,f);break;case 4:C[E].fn.call(C[E].context,m,f,v);break;default:if(!b)for(I=1,b=new Array(w-1);I<w;I++)b[I-1]=arguments[I];C[E].fn.apply(C[E].context,b)}}return!0},d.prototype.on=function(c,m,f){return h(this,c,m,f,!1)},d.prototype.once=function(c,m,f){return h(this,c,m,f,!0)},d.prototype.removeListener=function(c,m,f,v){var S=n?n+c:c;if(!this._events[S])return this;if(!m)return u(this,S),this;var x=this._events[S];if(x.fn)x.fn===m&&(!v||x.once)&&(!f||x.context===f)&&u(this,S);else{for(var T=0,C=[],w=x.length;T<w;T++)(x[T].fn!==m||v&&!x[T].once||f&&x[T].context!==f)&&C.push(x[T]);C.length?this._events[S]=C.length===1?C[0]:C:u(this,S)}return this},d.prototype.removeAllListeners=function(c){var m;return c?(m=n?n+c:c,this._events[m]&&u(this,m)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,r.exports=d},62270:(r,g,n)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82590),p=function(h,u,d,l){for(var c=h[0],m=1;m<h.length;m++){var f=h[m];a(f,c,u,d,l),c=f}return h};r.exports=p},61148:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6124),p=function(h,u,d,l,c){return a(h,"angle",u,d,l,c)};r.exports=p},22015:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){for(var h=0;h<n.length;h++){var u=n[h];a.call(p,u)}return n};r.exports=g},31060:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){p===void 0&&(p=0);for(var h=p;h<n.length;h++){var u=n[h],d=!0;for(var l in a)u[l]!==a[l]&&(d=!1);if(d)return u}return null};r.exports=g},52367:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){p===void 0&&(p=0);for(var h=p;h<n.length;h++){var u=n[h],d=!0;for(var l in a)u[l]!==a[l]&&(d=!1);if(d)return u}return null};r.exports=g},12673:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(40327),p=n(84093),h=n(72632),u=n(72283),d=n(71030),l=new d({sys:{queueDepthSort:u,events:{once:u}}},0,0,1,1).setOrigin(0,0),c=function(m,f){f===void 0&&(f={});var v=f.hasOwnProperty("width"),S=f.hasOwnProperty("height"),x=h(f,"width",-1),T=h(f,"height",-1),C=h(f,"cellWidth",1),w=h(f,"cellHeight",C),b=h(f,"position",p.TOP_LEFT),E=h(f,"x",0),A=h(f,"y",0),I=0,R=0,N=x*C,F=T*w;l.setPosition(E,A),l.setSize(C,w);for(var P=0;P<m.length;P++)if(a(m[P],l,b),v&&x===-1)l.x+=C;else if(S&&T===-1)l.y+=w;else if(S&&!v){if(R+=w,l.y+=w,R===F&&(R=0,I+=C,l.y=A,l.x+=C,I===N))break}else if(I+=C,l.x+=C,I===N&&(I=0,R+=w,l.x=E,l.y+=w,R===F))break;return m};r.exports=c},691:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6124),p=function(h,u,d,l,c){return a(h,"alpha",u,d,l,c)};r.exports=p},3877:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6124),p=function(h,u,d,l,c){return a(h,"x",u,d,l,c)};r.exports=p},71020:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6124),p=function(h,u,d,l,c,m,f){return d==null&&(d=u),a(h,"x",u,l,m,f),a(h,"y",d,c,m,f)};r.exports=p},28970:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6124),p=function(h,u,d,l,c){return a(h,"y",u,d,l,c)};r.exports=p},82249:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){p===void 0&&(p=0),h===void 0&&(h=6.28);for(var u=p,d=(h-p)/n.length,l=a.x,c=a.y,m=a.radius,f=0;f<n.length;f++)n[f].x=l+m*Math.cos(u),n[f].y=c+m*Math.sin(u),u+=d;return n};r.exports=g},30285:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){p===void 0&&(p=0),h===void 0&&(h=6.28);for(var u=p,d=(h-p)/n.length,l=a.width/2,c=a.height/2,m=0;m<n.length;m++)n[m].x=a.x+l*Math.cos(u),n[m].y=a.y+c*Math.sin(u),u+=d;return n};r.exports=g},61557:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(8570),p=function(h,u){for(var d=a(u,h.length),l=0;l<h.length;l++){var c=h[l],m=d[l];c.x=m.x,c.y=m.y}return h};r.exports=p},63549:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(40053),p=n(77640),h=n(38487),u=function(d,l,c){c===void 0&&(c=0);var m=a(l,!1,d.length);c>0?p(m,c):c<0&&h(m,Math.abs(c));for(var f=0;f<d.length;f++)d[f].x=m[f].x,d[f].y=m[f].y;return d};r.exports=u},51629:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(58813),p=function(h,u,d){var l=a({x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2},d),c=a({x1:u.x2,y1:u.y2,x2:u.x3,y2:u.y3},d),m=a({x1:u.x3,y1:u.y3,x2:u.x1,y2:u.y1},d);l.pop(),c.pop(),m.pop(),l=l.concat(c,m);for(var f=l.length/h.length,v=0,S=0;S<h.length;S++){var x=h[S],T=l[Math.floor(v)];x.x=T.x,x.y=T.y,v+=f}return h};r.exports=p},1045:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){for(var h=0;h<n.length;h++){var u=n[h];u.anims&&u.anims.play(a,p)}return n};r.exports=g},6124:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u,d){h===void 0&&(h=0),u===void 0&&(u=0),d===void 0&&(d=1);var l,c=0,m=n.length;if(d===1)for(l=u;l<m;l++)n[l][a]+=p+c*h,c++;else for(l=u;l>=0;l--)n[l][a]+=p+c*h,c++;return n};r.exports=g},23646:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u,d){h===void 0&&(h=0),u===void 0&&(u=0),d===void 0&&(d=1);var l,c=0,m=n.length;if(d===1)for(l=u;l<m;l++)n[l][a]=p+c*h,c++;else for(l=u;l>=0;l--)n[l][a]=p+c*h,c++;return n};r.exports=g},4392:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(30977),p=function(h,u){for(var d=0;d<h.length;d++)a(u,h[d]);return h};r.exports=p},94985:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72006),p=function(h,u){for(var d=0;d<h.length;d++)a(u,h[d]);return h};r.exports=p},63305:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74077),p=function(h,u){for(var d=0;d<h.length;d++)a(u,h[d]);return h};r.exports=p},90739:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(30001),p=function(h,u){for(var d=0;d<h.length;d++)a(u,h[d]);return h};r.exports=p},91417:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(99761),p=function(h,u){for(var d=0;d<h.length;d++)a(u,h[d]);return h};r.exports=p},26182:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6124),p=function(h,u,d,l,c){return a(h,"rotation",u,d,l,c)};r.exports=p},87299:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72395),p=n(53996),h=function(u,d,l){for(var c=d.x,m=d.y,f=0;f<u.length;f++){var v=u[f];a(v,c,m,l,Math.max(1,p(v.x,v.y,c,m)))}return u};r.exports=h},92194:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72395),p=function(h,u,d,l){var c=u.x,m=u.y;if(l===0)return h;for(var f=0;f<h.length;f++)a(h[f],c,m,d,l);return h};r.exports=p},30363:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6124),p=function(h,u,d,l,c){return a(h,"scaleX",u,d,l,c)};r.exports=p},51449:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6124),p=function(h,u,d,l,c,m,f){return d==null&&(d=u),a(h,"scaleX",u,l,m,f),a(h,"scaleY",d,c,m,f)};r.exports=p},64895:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6124),p=function(h,u,d,l,c){return a(h,"scaleY",u,d,l,c)};r.exports=p},30329:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c){return a(h,"alpha",u,d,l,c)};r.exports=p},43954:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l){return a(h,"blendMode",u,0,d,l)};r.exports=p},70688:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c){return a(h,"depth",u,d,l,c)};r.exports=p},8314:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){for(var h=0;h<n.length;h++)n[h].setInteractive(a,p);return n};r.exports=g},12894:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c,m,f){return d==null&&(d=u),a(h,"originX",u,l,m,f),a(h,"originY",d,c,m,f),h.forEach(function(v){v.updateDisplayOrigin()}),h};r.exports=p},38767:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c){return a(h,"rotation",u,d,l,c)};r.exports=p},18584:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c,m,f){return d==null&&(d=u),a(h,"scaleX",u,l,m,f),a(h,"scaleY",d,c,m,f)};r.exports=p},17381:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c){return a(h,"scaleX",u,d,l,c)};r.exports=p},74370:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c){return a(h,"scaleY",u,d,l,c)};r.exports=p},27773:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c,m,f){return d==null&&(d=u),a(h,"scrollFactorX",u,l,m,f),a(h,"scrollFactorY",d,c,m,f)};r.exports=p},75257:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c){return a(h,"scrollFactorX",u,d,l,c)};r.exports=p},54512:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c){return a(h,"scrollFactorY",u,d,l,c)};r.exports=p},69423:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u){for(var d=0;d<n.length;d++)n[d].setTint(a,p,h,u);return n};r.exports=g},58291:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l){return a(h,"visible",u,0,d,l)};r.exports=p},94833:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c){return a(h,"x",u,d,l,c)};r.exports=p},14284:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c,m,f){return d==null&&(d=u),a(h,"x",u,l,m,f),a(h,"y",d,c,m,f)};r.exports=p},96574:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23646),p=function(h,u,d,l,c){return a(h,"y",u,d,l,c)};r.exports=p},74086:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=function(h,u,d,l,c){l===void 0&&(l=0),c===void 0&&(c=new a);var m,f,v=h.length;if(v===1)m=h[0].x,f=h[0].y,h[0].x=u,h[0].y=d;else{var S=1,x=0;l===0&&(x=v-1,S=v-2),m=h[x].x,f=h[x].y,h[x].x=u,h[x].y=d;for(var T=0;T<v;T++)if(!(S>=v||S===-1)){var C=h[S],w=C.x,b=C.y;C.x=m,C.y=f,m=w,f=b,l===0?S--:S++}}return c.x=m,c.y=f,c};r.exports=p},86347:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(18592),p=function(h){return a(h)};r.exports=p},1558:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(5514),p=function(h,u,d,l,c){c===void 0&&(c=!1);var m=Math.abs(l-d)/h.length,f;if(c)for(f=0;f<h.length;f++)h[f][u]+=a(f*m,d,l);else for(f=0;f<h.length;f++)h[f][u]=a(f*m,d,l);return h};r.exports=p},9938:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(87736),p=function(h,u,d,l,c){c===void 0&&(c=!1);var m=Math.abs(l-d)/h.length,f;if(c)for(f=0;f<h.length;f++)h[f][u]+=a(f*m,d,l);else for(f=0;f<h.length;f++)h[f][u]=a(f*m,d,l);return h};r.exports=p},71060:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u){if(u===void 0&&(u=!1),n.length===0)return n;if(n.length===1)return u?n[0][a]+=(h+p)/2:n[0][a]=(h+p)/2,n;var d=Math.abs(h-p)/(n.length-1),l;if(u)for(l=0;l<n.length;l++)n[l][a]+=l*d+p;else for(l=0;l<n.length;l++)n[l][a]=l*d+p;return n};r.exports=g},11207:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){for(var a=0;a<n.length;a++)n[a].visible=!n[a].visible;return n};r.exports=g},24404:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(1071),p=function(h,u,d){d===void 0&&(d=0);for(var l=0;l<h.length;l++){var c=h[l];c.x=a(c.x,u.left-d,u.right+d),c.y=a(c.y,u.top-d,u.bottom+d)}return h};r.exports=p},83979:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AlignTo:n(62270),Angle:n(61148),Call:n(22015),GetFirst:n(31060),GetLast:n(52367),GridAlign:n(12673),IncAlpha:n(691),IncX:n(3877),IncXY:n(71020),IncY:n(28970),PlaceOnCircle:n(82249),PlaceOnEllipse:n(30285),PlaceOnLine:n(61557),PlaceOnRectangle:n(63549),PlaceOnTriangle:n(51629),PlayAnimation:n(1045),PropertyValueInc:n(6124),PropertyValueSet:n(23646),RandomCircle:n(4392),RandomEllipse:n(94985),RandomLine:n(63305),RandomRectangle:n(90739),RandomTriangle:n(91417),Rotate:n(26182),RotateAround:n(87299),RotateAroundDistance:n(92194),ScaleX:n(30363),ScaleXY:n(51449),ScaleY:n(64895),SetAlpha:n(30329),SetBlendMode:n(43954),SetDepth:n(70688),SetHitArea:n(8314),SetOrigin:n(12894),SetRotation:n(38767),SetScale:n(18584),SetScaleX:n(17381),SetScaleY:n(74370),SetScrollFactor:n(27773),SetScrollFactorX:n(75257),SetScrollFactorY:n(54512),SetTint:n(69423),SetVisible:n(58291),SetX:n(94833),SetXY:n(14284),SetY:n(96574),ShiftPosition:n(74086),Shuffle:n(86347),SmootherStep:n(9938),SmoothStep:n(1558),Spread:n(71060),ToggleVisible:n(11207),WrapInRectangle:n(24404)}},85463:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=n(56694),h=n(16938),u=n(2406),d=n(71519),l=n(10850),c=n(28834),m=new p({initialize:function(v,S,x){this.manager=v,this.key=S,this.type="frame",this.frames=this.getFrames(v.textureManager,l(x,"frames",[]),l(x,"defaultTextureKey",null),l(x,"sortFrames",!0)),this.frameRate=l(x,"frameRate",null),this.duration=l(x,"duration",null),this.msPerFrame,this.skipMissedFrames=l(x,"skipMissedFrames",!0),this.delay=l(x,"delay",0),this.repeat=l(x,"repeat",0),this.repeatDelay=l(x,"repeatDelay",0),this.yoyo=l(x,"yoyo",!1),this.showBeforeDelay=l(x,"showBeforeDelay",!1),this.showOnStart=l(x,"showOnStart",!1),this.hideOnComplete=l(x,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(h.PAUSE_ALL,this.pause,this),this.manager.on(h.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(f,v,S,x){S===null&&x===null?(f.frameRate=24,f.duration=24/v*1e3):S&&x===null?(f.duration=S,f.frameRate=v/(S/1e3)):(f.frameRate=x,f.duration=v/x*1e3),f.msPerFrame=1e3/f.frameRate},addFrame:function(f){return this.addFrameAt(this.frames.length,f)},addFrameAt:function(f,v){var S=this.getFrames(this.manager.textureManager,v);if(S.length>0){if(f===0)this.frames=S.concat(this.frames);else if(f===this.frames.length)this.frames=this.frames.concat(S);else{var x=this.frames.slice(0,f),T=this.frames.slice(f);this.frames=x.concat(S,T)}this.updateFrameSequence()}return this},checkFrame:function(f){return f>=0&&f<this.frames.length},getFirstTick:function(f){f.accumulator=0,f.nextTick=f.msPerFrame+f.currentFrame.duration},getFrameAt:function(f){return this.frames[f]},getFrames:function(f,v,S,x){x===void 0&&(x=!0);var T=[],C,w,b=1,E,A;if(typeof v=="string"){if(A=v,!f.exists(A))return console.warn('Texture "%s" not found',A),T;var I=f.get(A),R=I.getFrameNames();x&&c(R),v=[],R.forEach(function(L){v.push({key:A,frame:L})})}if(!Array.isArray(v)||v.length===0)return T;for(E=0;E<v.length;E++){var N=v[E],F=l(N,"key",S);if(F){var P=l(N,"frame",0),D=f.getFrame(F,P);if(!D){console.warn('Texture "%s" not found',F);continue}w=new d(F,P,b,D),w.duration=l(N,"duration",0),w.isFirst=!C,C&&(C.nextFrame=w,w.prevFrame=C),T.push(w),C=w,b++}}if(T.length>0){w.isLast=!0,w.nextFrame=T[0],T[0].prevFrame=w;var M=1/(T.length-1);for(E=0;E<T.length;E++)T[E].progress=E*M}return T},getNextTick:function(f){f.accumulator-=f.nextTick,f.nextTick=f.msPerFrame+f.currentFrame.duration},getFrameByProgress:function(f){return f=a(f,0,1),u(f,this.frames,"progress")},nextFrame:function(f){var v=f.currentFrame;v.isLast?f.yoyo?this.handleYoyoFrame(f,!1):f.repeatCounter>0?f.inReverse&&f.forward?f.forward=!1:this.repeatAnimation(f):f.complete():this.updateAndGetNextTick(f,v.nextFrame)},handleYoyoFrame:function(f,v){if(v||(v=!1),f.inReverse===!v&&f.repeatCounter>0){(f.repeatDelay===0||f.pendingRepeat)&&(f.forward=v),this.repeatAnimation(f);return}if(f.inReverse!==v&&f.repeatCounter===0){f.complete();return}f.forward=v;var S=v?f.currentFrame.nextFrame:f.currentFrame.prevFrame;this.updateAndGetNextTick(f,S)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(f){var v=f.currentFrame;v.isFirst?f.yoyo?this.handleYoyoFrame(f,!0):f.repeatCounter>0?f.inReverse&&!f.forward?this.repeatAnimation(f):(f.forward=!0,this.repeatAnimation(f)):f.complete():this.updateAndGetNextTick(f,v.prevFrame)},updateAndGetNextTick:function(f,v){f.setCurrentFrame(v),this.getNextTick(f)},removeFrame:function(f){var v=this.frames.indexOf(f);return v!==-1&&this.removeFrameAt(v),this},removeFrameAt:function(f){return this.frames.splice(f,1),this.updateFrameSequence(),this},repeatAnimation:function(f){if(f._pendingStop===2){if(f._pendingStopValue===0)return f.stop();f._pendingStopValue--}f.repeatDelay>0&&!f.pendingRepeat?(f.pendingRepeat=!0,f.accumulator-=f.nextTick,f.nextTick+=f.repeatDelay):(f.repeatCounter--,f.forward?f.setCurrentFrame(f.currentFrame.nextFrame):f.setCurrentFrame(f.currentFrame.prevFrame),f.isPlaying&&(this.getNextTick(f),f.handleRepeat()))},toJSON:function(){var f={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(v){f.frames.push(v.toJSON())}),f},updateFrameSequence:function(){for(var f=this.frames.length,v=1/(f-1),S,x=0;x<f;x++)S=this.frames[x],S.index=x+1,S.isFirst=!1,S.isLast=!1,S.progress=x*v,x===0?(S.isFirst=!0,f===1?(S.isLast=!0,S.nextFrame=S,S.prevFrame=S):(S.isLast=!1,S.prevFrame=this.frames[f-1],S.nextFrame=this.frames[x+1])):x===f-1&&f>1?(S.isLast=!0,S.prevFrame=this.frames[f-2],S.nextFrame=this.frames[0]):f>1&&(S.prevFrame=this.frames[x-1],S.nextFrame=this.frames[x+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(h.PAUSE_ALL,this.pause,this),this.manager.off(h.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var f=0;f<this.frames.length;f++)this.frames[f].destroy();this.frames=[],this.manager=null}});r.exports=m},71519:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d,l,c,m){m===void 0&&(m=!1),this.textureKey=u,this.textureFrame=d,this.index=l,this.frame=c,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=m},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});r.exports=p},90249:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(85463),p=n(56694),h=n(33885),u=n(6659),d=n(16938),l=n(97081),c=n(72632),m=n(10850),f=n(83392),v=n(13401),S=n(76400),x=new p({Extends:u,initialize:function(C){u.call(this),this.game=C,this.textureManager=null,this.globalTimeScale=1,this.anims=new h,this.mixes=new h,this.paused=!1,this.name="AnimationManager",C.events.once(l.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(l.DESTROY,this.destroy,this)},addMix:function(T,C,w){var b=this.anims,E=this.mixes,A=typeof T=="string"?T:T.key,I=typeof C=="string"?C:C.key;if(b.has(A)&&b.has(I)){var R=E.get(A);R||(R={}),R[I]=w,E.set(A,R)}return this},removeMix:function(T,C){var w=this.mixes,b=typeof T=="string"?T:T.key,E=w.get(b);if(E)if(C){var A=typeof C=="string"?C:C.key;E.hasOwnProperty(A)&&delete E[A]}else C||w.delete(b);return this},getMix:function(T,C){var w=this.mixes,b=typeof T=="string"?T:T.key,E=typeof C=="string"?C:C.key,A=w.get(b);return A&&A.hasOwnProperty(E)?A[E]:0},add:function(T,C){return this.anims.has(T)?(console.warn("Animation key exists: "+T),this):(C.key=T,this.anims.set(T,C),this.emit(d.ADD_ANIMATION,T,C),this)},exists:function(T){return this.anims.has(T)},createFromAseprite:function(T,C,w){var b=[],E=this.game.cache.json.get(T);if(!E)return console.warn("No Aseprite data found for: "+T),b;var A=this,I=m(E,"meta",null),R=m(E,"frames",null);if(I&&R){var N=m(I,"frameTags",[]);N.forEach(function(F){var P=[],D=c(F,"name",null),M=c(F,"from",0),L=c(F,"to",0),k=c(F,"direction","forward");if(D&&(!C||C&&C.indexOf(D)>-1)){for(var V=0,W=M;W<=L;W++){var K=W.toString(),B=R[K];if(B){var G=c(B,"duration",f.MAX_SAFE_INTEGER);P.push({key:T,frame:K,duration:G}),V+=G}}var O=V/P.length;P.forEach(function(X){X.duration-=O}),k==="reverse"&&(P=P.reverse());var $={key:D,frames:P,duration:V,yoyo:k==="pingpong"},z;w?w.anims&&(z=w.anims.create($)):z=A.create($),z&&b.push(z)}})}return b},create:function(T){var C=T.key,w=!1;return C&&(w=this.get(C),w?console.warn("AnimationManager key already exists: "+C):(w=new a(this,C,T),this.anims.set(C,w),this.emit(d.ADD_ANIMATION,C,w))),w},fromJSON:function(T,C){C===void 0&&(C=!1),C&&this.anims.clear(),typeof T=="string"&&(T=JSON.parse(T));var w=[];if(T.hasOwnProperty("anims")&&Array.isArray(T.anims)){for(var b=0;b<T.anims.length;b++)w.push(this.create(T.anims[b]));T.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=T.globalTimeScale)}else T.hasOwnProperty("key")&&T.type==="frame"&&w.push(this.create(T));return w},generateFrameNames:function(T,C){var w=m(C,"prefix",""),b=m(C,"start",0),E=m(C,"end",0),A=m(C,"suffix",""),I=m(C,"zeroPad",0),R=m(C,"outputArray",[]),N=m(C,"frames",!1);if(!this.textureManager.exists(T))return console.warn('Texture "%s" not found',T),R;var F=this.textureManager.get(T);if(!F)return R;var P;if(C)for(N||(N=v(b,E)),P=0;P<N.length;P++){var D=w+S(N[P],I,"0",1)+A;F.has(D)?R.push({key:T,frame:D}):console.warn('Frame "%s" not found in texture "%s"',D,T)}else for(N=F.getFrameNames(),P=0;P<N.length;P++)R.push({key:T,frame:N[P]});return R},generateFrameNumbers:function(T,C){var w=m(C,"start",0),b=m(C,"end",-1),E=m(C,"first",!1),A=m(C,"outputArray",[]),I=m(C,"frames",!1);if(!this.textureManager.exists(T))return console.warn('Texture "%s" not found',T),A;var R=this.textureManager.get(T);if(!R)return A;E&&R.has(E)&&A.push({key:T,frame:E}),I||(b===-1&&(b=R.frameTotal-2),I=v(w,b));for(var N=0;N<I.length;N++){var F=I[N];R.has(F)?A.push({key:T,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,T)}return A},get:function(T){return this.anims.get(T)},getAnimsFromTexture:function(T){for(var C=this.textureManager.get(T),w=C.key,b=this.anims.getArray(),E=[],A=0;A<b.length;A++)for(var I=b[A],R=I.frames,N=0;N<R.length;N++)if(R[N].textureKey===w){E.push(I.key);break}return E},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(d.PAUSE_ALL)),this},play:function(T,C){Array.isArray(C)||(C=[C]);for(var w=0;w<C.length;w++)C[w].anims.play(T);return this},staggerPlay:function(T,C,w,b){w===void 0&&(w=0),b===void 0&&(b=!0),Array.isArray(C)||(C=[C]);var E=C.length;b||E--;for(var A=0;A<C.length;A++){var I=w<0?Math.abs(w)*(E-A):w*A;C[A].anims.playAfterDelay(T,I)}return this},remove:function(T){var C=this.get(T);return C&&(this.emit(d.REMOVE_ANIMATION,T,C),this.anims.delete(T),this.removeMix(T)),C},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(d.RESUME_ALL)),this},toJSON:function(T){var C={anims:[],globalTimeScale:this.globalTimeScale};return T!==void 0&&T!==""?C.anims.push(this.anims.get(T).toJSON()):this.anims.each(function(w,b){C.anims.push(b.toJSON())}),C},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});r.exports=x},16569:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(33885),h=n(72632),u=n(16938),d=n(85463),l=new a({initialize:function(m){this.parent=m,this.animationManager=m.scene.sys.anims,this.animationManager.on(u.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(c){var m=this.parent;if(c===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,m;Array.isArray(c)||(c=[c]);for(var f=0;f<c.length;f++){var v=c[f];this.nextAnim?this.nextAnimsQueue.push(v):this.nextAnim=v}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(c){this.isPlaying&&this.stop();var m=this.animationManager,f=typeof c=="string"?c:h(c,"key",null),v=this.exists(f)?this.get(f):m.get(f);if(!v)console.warn("Missing animation: "+f);else{this.currentAnim=v;var S=v.getTotalFrames(),x=h(c,"frameRate",v.frameRate),T=h(c,"duration",v.duration);v.calculateDuration(this,S,T,x),this.delay=h(c,"delay",v.delay),this.repeat=h(c,"repeat",v.repeat),this.repeatDelay=h(c,"repeatDelay",v.repeatDelay),this.yoyo=h(c,"yoyo",v.yoyo),this.showBeforeDelay=h(c,"showBeforeDelay",v.showBeforeDelay),this.showOnStart=h(c,"showOnStart",v.showOnStart),this.hideOnComplete=h(c,"hideOnComplete",v.hideOnComplete),this.skipMissedFrames=h(c,"skipMissedFrames",v.skipMissedFrames),this.timeScale=h(c,"timeScale",this.timeScale);var C=h(c,"startFrame",0);C>v.getTotalFrames()&&(C=0);var w=v.frames[C];C===0&&!this.forward&&(w=v.getLastFrame()),this.currentFrame=w}return this.parent},pause:function(c){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),c!==void 0&&this.setCurrentFrame(c),this.parent},resume:function(c){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),c!==void 0&&this.setCurrentFrame(c),this.parent},playAfterDelay:function(c,m){if(!this.isPlaying)this.delayCounter=m,this.play(c,!0);else{var f=this.nextAnim,v=this.nextAnimsQueue;f&&v.unshift(f),this.nextAnim=c,this._pendingStop=1,this._pendingStopValue=m}return this.parent},playAfterRepeat:function(c,m){if(m===void 0&&(m=1),!this.isPlaying)this.play(c);else{var f=this.nextAnim,v=this.nextAnimsQueue;f&&v.unshift(f),this.repeatCounter!==-1&&m>this.repeatCounter&&(m=this.repeatCounter),this.nextAnim=c,this._pendingStop=2,this._pendingStopValue=m}return this.parent},play:function(c,m){m===void 0&&(m=!1);var f=this.currentAnim,v=this.parent,S=typeof c=="string"?c:c.key;if(m&&this.isPlaying&&f.key===S)return v;if(f&&this.isPlaying){var x=this.animationManager.getMix(f.key,c);if(x>0)return this.playAfterDelay(c,x)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(c)},playReverse:function(c,m){m===void 0&&(m=!1);var f=typeof c=="string"?c:c.key;return m&&this.isPlaying&&this.currentAnim.key===f?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(c))},startAnimation:function(c){this.load(c);var m=this.currentAnim,f=this.parent;return m&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,m.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),f},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(u.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(u.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(u.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(u.ANIMATION_COMPLETE,u.ANIMATION_COMPLETE_KEY)},emitEvents:function(c,m){var f=this.currentAnim;if(f){var v=this.currentFrame,S=this.parent,x=v.textureFrame;S.emit(c,f,v,S,x),m&&S.emit(m+f.key,f,v,S,x)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var c=this.currentFrame;if(!c)return 0;var m=c.progress;return this.inReverse&&(m*=-1),m},setProgress:function(c){return this.forward||(c=1-c),this.setCurrentFrame(this.currentAnim.getFrameByProgress(c)),this.parent},setRepeat:function(c){return this.repeatCounter=c===-1?Number.MAX_VALUE:c,this.parent},globalRemove:function(c,m){m===void 0&&(m=this.currentAnim),this.isPlaying&&m.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(c,m){c===void 0&&(c=!1),m===void 0&&(m=!1);var f=this.currentAnim,v=this.parent;return f?(m&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),f.getFirstTick(this),this.emitEvents(u.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!c,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(f.frames[0]),this.parent):v},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var c=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(c)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var c=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(c)}return this.parent},stopAfterDelay:function(c){return this._pendingStop=1,this._pendingStopValue=c,this.parent},stopAfterRepeat:function(c){return c===void 0&&(c=1),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=c,this.parent},stopOnFrame:function(c){return this._pendingStop=3,this._pendingStopValue=c,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(c,m){var f=this.currentAnim;if(!(!this.isPlaying||!f||f.paused)){if(this.accumulator+=m*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=m,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?f.nextFrame(this):f.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var v=0;do this.forward?f.nextFrame(this):f.previousFrame(this),v++;while(this.isPlaying&&this.accumulator>this.nextTick&&v<60)}}},setCurrentFrame:function(c){var m=this.parent;return this.currentFrame=c,m.texture=c.frame.texture,m.frame=c.frame,m.isCropped&&m.frame.updateCropUVs(m._crop,m.flipX,m.flipY),c.setAlpha&&(m.alpha=c.alpha),m.setSizeToFrame(),m._originComponent&&(c.frame.customPivot?m.setOrigin(c.frame.pivotX,c.frame.pivotY):m.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(u.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===c&&this.stop()),m},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(c){return this.anims?this.anims.get(c):null},exists:function(c){return this.anims?this.anims.has(c):!1},create:function(c){var m=c.key,f=!1;return m&&(f=this.get(m),f?console.warn("Animation key already exists: "+m):(f=new d(this,m,c),this.anims||(this.anims=new p),this.anims.set(m,f))),f},createFromAseprite:function(c,m){return this.animationManager.createFromAseprite(c,m,this.parent)},generateFrameNames:function(c,m){return this.animationManager.generateFrameNames(c,m)},generateFrameNumbers:function(c,m){return this.animationManager.generateFrameNumbers(c,m)},remove:function(c){var m=this.get(c);return m&&(this.currentAnim===m&&this.stop(),this.anims.delete(c)),m},destroy:function(){this.animationManager.off(u.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});r.exports=l},44509:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="add"},84563:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationcomplete"},61586:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationcomplete-"},72175:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationrepeat"},568:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationrestart"},37690:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationstart"},58525:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationstop"},5243:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="animationupdate"},10598:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pauseall"},4860:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="remove"},31865:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resumeall"},16938:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD_ANIMATION:n(44509),ANIMATION_COMPLETE:n(84563),ANIMATION_COMPLETE_KEY:n(61586),ANIMATION_REPEAT:n(72175),ANIMATION_RESTART:n(568),ANIMATION_START:n(37690),ANIMATION_STOP:n(58525),ANIMATION_UPDATE:n(5243),PAUSE_ALL:n(10598),REMOVE_ANIMATION:n(4860),RESUME_ALL:n(31865)}},13517:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Animation:n(85463),AnimationFrame:n(71519),AnimationManager:n(90249),AnimationState:n(16569),Events:n(16938)}},23740:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(33885),h=n(6659),u=n(69773),d=new a({initialize:function(){this.entries=new p,this.events=new h},add:function(l,c){return this.entries.set(l,c),this.events.emit(u.ADD,this,l,c),this},has:function(l){return this.entries.has(l)},exists:function(l){return this.entries.has(l)},get:function(l){return this.entries.get(l)},remove:function(l){var c=this.get(l);return c&&(this.entries.delete(l),this.events.emit(u.REMOVE,this,l,c.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});r.exports=d},43474:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23740),p=n(56694),h=n(97081),u=new p({initialize:function(l){this.game=l,this.binary=new a,this.bitmapFont=new a,this.json=new a,this.physics=new a,this.shader=new a,this.audio=new a,this.video=new a,this.text=new a,this.html=new a,this.obj=new a,this.tilemap=new a,this.xml=new a,this.custom={},this.game.events.once(h.DESTROY,this.destroy,this)},addCustom:function(d){return this.custom.hasOwnProperty(d)||(this.custom[d]=new a),this.custom[d]},destroy:function(){for(var d=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],l=0;l<d.length;l++)this[d[l]].destroy(),this[d[l]]=null;for(var c in this.custom)this.custom[c].destroy();this.custom=null,this.game=null}});r.exports=u},94762:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="add"},75968:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="remove"},69773:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD:n(94762),REMOVE:n(75968)}},45820:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BaseCache:n(23740),CacheManager:n(43474),Events:n(69773)}},51052:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(75606),u=n(6659),d=n(89787),l=n(74118),c=n(69360),m=n(93222),f=n(93736),v=new a({Extends:u,Mixins:[p.AlphaSingle,p.Visible],initialize:function(x,T,C,w){x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=0),w===void 0&&(w=0),u.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new l,this.dirty=!0,this._x=x,this._y=T,this._width=C,this._height=w,this._bounds=new l,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new c,this.transparent=!0,this.backgroundColor=m("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new f(C/2,w/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(S){this.renderList.push(S)},setOrigin:function(S,x){return S===void 0&&(S=.5),x===void 0&&(x=S),this.originX=S,this.originY=x,this},getScroll:function(S,x,T){T===void 0&&(T=new f);var C=this.width*.5,w=this.height*.5;return T.x=S-C,T.y=x-w,this.useBounds&&(T.x=this.clampX(T.x),T.y=this.clampY(T.y)),T},centerOnX:function(S){var x=this.width*.5;return this.midPoint.x=S,this.scrollX=S-x,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(S){var x=this.height*.5;return this.midPoint.y=S,this.scrollY=S-x,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(S,x){return this.centerOnX(S),this.centerOnY(x),this},centerToBounds:function(){if(this.useBounds){var S=this._bounds,x=this.width*.5,T=this.height*.5;this.midPoint.set(S.centerX,S.centerY),this.scrollX=S.centerX-x,this.scrollY=S.centerY-T}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(S){if(this.disableCull)return S;var x=this.matrix.matrix,T=x[0],C=x[1],w=x[2],b=x[3],E=T*b-C*w;if(!E)return S;var A=x[4],I=x[5],R=this.scrollX,N=this.scrollY,F=this.width,P=this.height,D=this.y,M=D+P,L=this.x,k=L+F,V=this.culledObjects,W=S.length;E=1/E,V.length=0;for(var K=0;K<W;++K){var B=S[K];if(!B.hasOwnProperty("width")||B.parentContainer){V.push(B);continue}var G=B.width,O=B.height,$=B.x-R*B.scrollFactorX-G*B.originX,z=B.y-N*B.scrollFactorY-O*B.originY,X=$*T+z*w+A,Y=$*C+z*b+I,Z=($+G)*T+(z+O)*w+A,J=($+G)*C+(z+O)*b+I;Z>L&&X<k&&J>D&&Y<M&&V.push(B)}return V},getWorldPoint:function(S,x,T){T===void 0&&(T=new f);var C=this.matrix.matrix,w=C[0],b=C[1],E=C[2],A=C[3],I=C[4],R=C[5],N=w*A-b*E;if(!N)return T.x=S,T.y=x,T;N=1/N;var F=A*N,P=-b*N,D=-E*N,M=w*N,L=(E*R-A*I)*N,k=(b*I-w*R)*N,V=Math.cos(this.rotation),W=Math.sin(this.rotation),K=this.zoomX,B=this.zoomY,G=this.scrollX,O=this.scrollY,$=S+(G*V-O*W)*K,z=x+(G*W+O*V)*B;return T.x=$*F+z*D+L,T.y=$*P+z*M+k,T},ignore:function(S){var x=this.id;Array.isArray(S)||(S=[S]);for(var T=0;T<S.length;T++){var C=S[T];Array.isArray(C)?this.ignore(C):C.isParent?this.ignore(C.getChildren()):C.cameraFilter|=x}return this},preRender:function(){this.renderList.length=0;var S=this.width,x=this.height,T=S*.5,C=x*.5,w=this.zoomX,b=this.zoomY,E=this.matrix,A=S*this.originX,I=x*this.originY,R=this.scrollX,N=this.scrollY;this.useBounds&&(R=this.clampX(R),N=this.clampY(N)),this.roundPixels&&(A=Math.round(A),I=Math.round(I)),this.scrollX=R,this.scrollY=N;var F=R+T,P=N+C;this.midPoint.set(F,P);var D=S/w,M=x/b;this.worldView.setTo(F-D/2,P-M/2,D,M),E.applyITRS(this.x+A,this.y+I,this.rotation,w,b),E.translate(-A,-I)},clampX:function(S){var x=this._bounds,T=this.displayWidth,C=x.x+(T-this.width)/2,w=Math.max(C,C+x.width-T);return S<C?S=C:S>w&&(S=w),S},clampY:function(S){var x=this._bounds,T=this.displayHeight,C=x.y+(T-this.height)/2,w=Math.max(C,C+x.height-T);return S<C?S=C:S>w&&(S=w),S},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(S){return S===void 0&&(S=0),this.rotation=h(S),this},setBackgroundColor:function(S){return S===void 0&&(S="rgba(0,0,0,0)"),this.backgroundColor=m(S),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(S,x,T,C,w){return w===void 0&&(w=!1),this._bounds.setTo(S,x,T,C),this.dirty=!0,this.useBounds=!0,w?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(S){S===void 0&&(S=new l);var x=this._bounds;return S.setTo(x.x,x.y,x.width,x.height),S},setName:function(S){return S===void 0&&(S=""),this.name=S,this},setPosition:function(S,x){return x===void 0&&(x=S),this.x=S,this.y=x,this},setRotation:function(S){return S===void 0&&(S=0),this.rotation=S,this},setRoundPixels:function(S){return this.roundPixels=S,this},setScene:function(S,x){x===void 0&&(x=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=S,this.isSceneCamera=x;var T=S.sys;return this.sceneManager=T.game.scene,this.scaleManager=T.scale,this.cameraManager=T.cameras,this.updateSystem(),this},setScroll:function(S,x){return x===void 0&&(x=S),this.scrollX=S,this.scrollY=x,this},setSize:function(S,x){return x===void 0&&(x=S),this.width=S,this.height=x,this},setViewport:function(S,x,T,C){return this.x=S,this.y=x,this.width=T,this.height=C,this},setZoom:function(S,x){return S===void 0&&(S=1),x===void 0&&(x=S),S===0&&(S=.001),x===0&&(x=.001),this.zoomX=S,this.zoomY=x,this},setMask:function(S,x){return x===void 0&&(x=!0),this.mask=S,this._maskCamera=x?this.cameraManager.default:this,this},clearMask:function(S){return S===void 0&&(S=!1),S&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var S={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(S.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),S},update:function(){},setIsSceneCamera:function(S){return this.isSceneCamera=S,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var S=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,x=this.sceneManager;S&&!this._customViewport?x.customViewports++:!S&&this._customViewport&&x.customViewports--,this.dirty=!0,this._customViewport=S}},destroy:function(){this.emit(d.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(S){this._x=S,this.updateSystem()}},y:{get:function(){return this._y},set:function(S){this._y=S,this.updateSystem()}},width:{get:function(){return this._width},set:function(S){this._width=S,this.updateSystem()}},height:{get:function(){return this._height},set:function(S){this._height=S,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(S){S!==this._scrollX&&(this._scrollX=S,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(S){S!==this._scrollY&&(this._scrollY=S,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(S){this._zoomX=S,this._zoomY=S,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(S){this._zoomX=S,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(S){this._zoomY=S,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(S){this._rotation=S,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});r.exports=v},47751:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(51052),p=n(79993),h=n(82897),u=n(56694),d=n(64937),l=n(53030),c=n(89787),m=n(42798),f=n(74118),v=n(93736),S=new u({Extends:a,Mixins:[d.PostPipeline],initialize:function(T,C,w,b){a.call(this,T,C,w,b),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new l.Fade(this),this.flashEffect=new l.Flash(this),this.shakeEffect=new l.Shake(this),this.panEffect=new l.Pan(this),this.rotateToEffect=new l.RotateTo(this),this.zoomEffect=new l.Zoom(this),this.lerp=new v(1,1),this.followOffset=new v,this.deadzone=null,this._follow=null},setDeadzone:function(x,T){if(x===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=x,this.deadzone.height=T):this.deadzone=new f(0,0,x,T),this._follow){var C=this.width/2,w=this.height/2,b=this._follow.x-this.followOffset.x,E=this._follow.y-this.followOffset.y;this.midPoint.set(b,E),this.scrollX=b-C,this.scrollY=E-w}p(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(x,T,C,w,b,E){return this.fadeEffect.start(!1,x,T,C,w,!0,b,E)},fadeOut:function(x,T,C,w,b,E){return this.fadeEffect.start(!0,x,T,C,w,!0,b,E)},fadeFrom:function(x,T,C,w,b,E,A){return this.fadeEffect.start(!1,x,T,C,w,b,E,A)},fade:function(x,T,C,w,b,E,A){return this.fadeEffect.start(!0,x,T,C,w,b,E,A)},flash:function(x,T,C,w,b,E,A){return this.flashEffect.start(x,T,C,w,b,E,A)},shake:function(x,T,C,w,b){return this.shakeEffect.start(x,T,C,w,b)},pan:function(x,T,C,w,b,E,A){return this.panEffect.start(x,T,C,w,b,E,A)},rotateTo:function(x,T,C,w,b,E,A){return this.rotateToEffect.start(x,T,C,w,b,E,A)},zoomTo:function(x,T,C,w,b,E){return this.zoomEffect.start(x,T,C,w,b,E)},preRender:function(){this.renderList.length=0;var x=this.width,T=this.height,C=x*.5,w=T*.5,b=this.zoom,E=this.matrix,A=x*this.originX,I=T*this.originY,R=this._follow,N=this.deadzone,F=this.scrollX,P=this.scrollY;N&&p(N,this.midPoint.x,this.midPoint.y);var D=!1;if(this.roundPixels&&(A=Math.floor(A),I=Math.floor(I)),R&&!this.panEffect.isRunning){var M=this.lerp,L=R.x-this.followOffset.x,k=R.y-this.followOffset.y;this.roundPixels&&(L=Math.floor(L),k=Math.floor(k)),N?(L<N.x?F=m(F,F-(N.x-L),M.x):L>N.right&&(F=m(F,F+(L-N.right),M.x)),k<N.y?P=m(P,P-(N.y-k),M.y):k>N.bottom&&(P=m(P,P+(k-N.bottom),M.y))):(F=m(F,L-A,M.x),P=m(P,k-I,M.y)),D=!0}this.useBounds&&(F=this.clampX(F),P=this.clampY(P)),this.roundPixels&&(F=Math.floor(F),P=Math.floor(P)),this.scrollX=F,this.scrollY=P;var V=F+C,W=P+w;this.midPoint.set(V,W);var K=x/b,B=T/b,G=V-K/2,O=W-B/2;this.roundPixels&&(G=Math.floor(G),O=Math.floor(O)),this.worldView.setTo(G,O,K,B),E.applyITRS(Math.floor(this.x+A),Math.floor(this.y+I),this.rotation,b,b),E.translate(-A,-I),this.shakeEffect.preRender(),D&&this.emit(c.FOLLOW_UPDATE,this,R)},setLerp:function(x,T){return x===void 0&&(x=1),T===void 0&&(T=x),this.lerp.set(x,T),this},setFollowOffset:function(x,T){return x===void 0&&(x=0),T===void 0&&(T=0),this.followOffset.set(x,T),this},startFollow:function(x,T,C,w,b,E){T===void 0&&(T=!1),C===void 0&&(C=1),w===void 0&&(w=C),b===void 0&&(b=0),E===void 0&&(E=b),this._follow=x,this.roundPixels=T,C=h(C,0,1),w=h(w,0,1),this.lerp.set(C,w),this.followOffset.set(b,E);var A=this.width/2,I=this.height/2,R=x.x-b,N=x.y-E;return this.midPoint.set(R,N),this.scrollX=R-A,this.scrollY=N-I,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(x,T){this.visible&&(this.rotateToEffect.update(x,T),this.panEffect.update(x,T),this.zoomEffect.update(x,T),this.shakeEffect.update(x,T),this.flashEffect.update(x,T),this.fadeEffect.update(x,T))},destroy:function(){this.resetFX(),a.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});r.exports=S},62382:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(47751),p=n(56694),h=n(72632),u=n(91963),d=n(94287),l=n(40444),c=n(7599),m=new p({initialize:function(v){this.scene=v,this.systems=v.sys,this.roundPixels=v.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,v.sys.events.once(c.BOOT,this.boot,this),v.sys.events.on(c.START,this.start,this)},boot:function(){var f=this.systems;f.settings.cameras?this.fromJSON(f.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new a(0,0,f.scale.width,f.scale.height).setScene(this.scene),f.game.scale.on(l.RESIZE,this.onResize,this),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){if(!this.main){var f=this.systems;f.settings.cameras?this.fromJSON(f.settings.cameras):this.add(),this.main=this.cameras[0]}var v=this.systems.events;v.on(c.UPDATE,this.update,this),v.once(c.SHUTDOWN,this.shutdown,this)},add:function(f,v,S,x,T,C){f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=this.scene.sys.scale.width),x===void 0&&(x=this.scene.sys.scale.height),T===void 0&&(T=!1),C===void 0&&(C="");var w=new a(f,v,S,x);return w.setName(C),w.setScene(this.scene),w.setRoundPixels(this.roundPixels),w.id=this.getNextID(),this.cameras.push(w),T&&(this.main=w),w},addExisting:function(f,v){v===void 0&&(v=!1);var S=this.cameras.indexOf(f);return S===-1?(f.id=this.getNextID(),f.setRoundPixels(this.roundPixels),this.cameras.push(f),v&&(this.main=f),f):null},getNextID:function(){for(var f=this.cameras,v=1,S=0;S<32;S++){for(var x=!1,T=0;T<f.length;T++){var C=f[T];if(C&&C.id===v){x=!0;continue}}if(x)v=v<<1;else return v}return 0},getTotal:function(f){f===void 0&&(f=!1);for(var v=0,S=this.cameras,x=0;x<S.length;x++){var T=S[x];(!f||f&&T.visible)&&v++}return v},fromJSON:function(f){Array.isArray(f)||(f=[f]);for(var v=this.scene.sys.scale.width,S=this.scene.sys.scale.height,x=0;x<f.length;x++){var T=f[x],C=h(T,"x",0),w=h(T,"y",0),b=h(T,"width",v),E=h(T,"height",S),A=this.add(C,w,b,E);A.name=h(T,"name",""),A.zoom=h(T,"zoom",1),A.rotation=h(T,"rotation",0),A.scrollX=h(T,"scrollX",0),A.scrollY=h(T,"scrollY",0),A.roundPixels=h(T,"roundPixels",!1),A.visible=h(T,"visible",!0);var I=h(T,"backgroundColor",!1);I&&A.setBackgroundColor(I);var R=h(T,"bounds",null);if(R){var N=h(R,"x",0),F=h(R,"y",0),P=h(R,"width",v),D=h(R,"height",S);A.setBounds(N,F,P,D)}}return this},getCamera:function(f){for(var v=this.cameras,S=0;S<v.length;S++)if(v[S].name===f)return v[S];return null},getCamerasBelowPointer:function(f){for(var v=this.cameras,S=f.x,x=f.y,T=[],C=0;C<v.length;C++){var w=v[C];w.visible&&w.inputEnabled&&d(w,S,x)&&T.unshift(w)}return T},remove:function(f,v){v===void 0&&(v=!0),Array.isArray(f)||(f=[f]);for(var S=0,x=this.cameras,T=0;T<f.length;T++){var C=x.indexOf(f[T]);C!==-1&&(v?x[C].destroy():x[C].renderList=[],x.splice(C,1),S++)}return!this.main&&x[0]&&(this.main=x[0]),S},render:function(f,v){for(var S=this.scene,x=this.cameras,T=0;T<x.length;T++){var C=x[T];if(C.visible&&C.alpha>0){C.preRender();var w=this.getVisibleChildren(v.getChildren(),C);f.render(S,w,C)}}},getVisibleChildren:function(f,v){return f.filter(function(S){return S.willRender(v)})},resetAll:function(){for(var f=0;f<this.cameras.length;f++)this.cameras[f].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(f,v){for(var S=0;S<this.cameras.length;S++)this.cameras[S].update(f,v)},onResize:function(f,v,S,x,T){for(var C=0;C<this.cameras.length;C++){var w=this.cameras[C];w._x===0&&w._y===0&&w._width===x&&w._height===T&&w.setSize(v.width,v.height)}},resize:function(f,v){for(var S=0;S<this.cameras.length;S++)this.cameras[S].setSize(f,v)},shutdown:function(){this.main=void 0;for(var f=0;f<this.cameras.length;f++)this.cameras[f].destroy();this.cameras=[];var v=this.systems.events;v.off(c.UPDATE,this.update,this),v.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(c.START,this.start,this),this.systems.events.off(c.DESTROY,this.destroy,this),this.systems.game.scale.off(l.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});u.register("CameraManager",m,"cameras"),r.exports=m},92522:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=n(56694),h=n(89787),u=new p({initialize:function(l){this.camera=l,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(d,l,c,m,f,v,S,x){if(d===void 0&&(d=!0),l===void 0&&(l=1e3),c===void 0&&(c=0),m===void 0&&(m=0),f===void 0&&(f=0),v===void 0&&(v=!1),S===void 0&&(S=null),x===void 0&&(x=this.camera.scene),!v&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=l,this.direction=d,this.progress=0,this.red=c,this.green=m,this.blue=f,this.alpha=d?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=S,this._onUpdateScope=x;var T=d?h.FADE_OUT_START:h.FADE_IN_START;return this.camera.emit(T,this.camera,this,l,c,m,f),this.camera},update:function(d,l){this.isRunning&&(this._elapsed+=l,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(d){if(!this.isRunning&&!this.isComplete)return!1;var l=this.camera;return d.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",d.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(d,l){if(!this.isRunning&&!this.isComplete)return!1;var c=this.camera,m=this.red/255,f=this.green/255,v=this.blue/255;return d.drawFillRect(c.x,c.y,c.width,c.height,l(v,f,m,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var d=this.direction?h.FADE_OUT_COMPLETE:h.FADE_IN_COMPLETE;this.camera.emit(d,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=u},22151:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=n(56694),h=n(89787),u=new p({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(d,l,c,m,f,v,S){return d===void 0&&(d=250),l===void 0&&(l=255),c===void 0&&(c=255),m===void 0&&(m=255),f===void 0&&(f=!1),v===void 0&&(v=null),S===void 0&&(S=this.camera.scene),!f&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=d,this.progress=0,this.red=l,this.green=c,this.blue=m,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=S,this.camera.emit(h.FLASH_START,this.camera,this,d,l,c,m),this.camera)},update:function(d,l){this.isRunning&&(this._elapsed+=l,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(d){if(!this.isRunning)return!1;var l=this.camera;return d.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",d.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(d,l){if(!this.isRunning)return!1;var c=this.camera,m=this.red/255,f=this.green/255,v=this.blue/255;return d.drawFillRect(c.x,c.y,c.width,c.height,l(v,f,m,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=u},37551:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=n(56694),h=n(35060),u=n(89787),d=n(93736),l=new p({initialize:function(m){this.camera=m,this.isRunning=!1,this.duration=0,this.source=new d,this.current=new d,this.destination=new d,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(c,m,f,v,S,x,T){f===void 0&&(f=1e3),v===void 0&&(v=h.Linear),S===void 0&&(S=!1),x===void 0&&(x=null),T===void 0&&(T=this.camera.scene);var C=this.camera;return!S&&this.isRunning||(this.isRunning=!0,this.duration=f,this.progress=0,this.source.set(C.scrollX,C.scrollY),this.destination.set(c,m),C.getScroll(c,m,this.current),typeof v=="string"&&h.hasOwnProperty(v)?this.ease=h[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=x,this._onUpdateScope=T,this.camera.emit(u.PAN_START,this.camera,this,f,c,m)),C},update:function(c,m){if(this.isRunning){this._elapsed+=m;var f=a(this._elapsed/this.duration,0,1);this.progress=f;var v=this.camera;if(this._elapsed<this.duration){var S=this.ease(f);v.getScroll(this.destination.x,this.destination.y,this.current);var x=this.source.x+(this.current.x-this.source.x)*S,T=this.source.y+(this.current.y-this.source.y)*S;v.setScroll(x,T),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,f,x,T)}else v.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,f,v.scrollX,v.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});r.exports=l},1771:(r,g,n)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var a=n(82897),p=n(56694),h=n(89787),u=n(35060),d=new p({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(l,c,m,f,v,S,x){m===void 0&&(m=1e3),f===void 0&&(f=u.Linear),v===void 0&&(v=!1),S===void 0&&(S=null),x===void 0&&(x=this.camera.scene),c===void 0&&(c=!1),this.shortestPath=c;var T=l;l<0?(T=-1*l,this.clockwise=!1):this.clockwise=!0;var C=360*Math.PI/180;T=T-Math.floor(T/C)*C;var w=this.camera;if(!v&&this.isRunning)return w;if(this.isRunning=!0,this.duration=m,this.progress=0,this.source=w.rotation,this.destination=T,typeof f=="string"&&u.hasOwnProperty(f)?this.ease=u[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=S,this._onUpdateScope=x,this.shortestPath){var b=0,E=0;this.destination>this.source?b=Math.abs(this.destination-this.source):b=Math.abs(this.destination+C)-this.source,this.source>this.destination?E=Math.abs(this.source-this.destination):E=Math.abs(this.source+C)-this.destination,b<E?this.clockwise=!0:b>E&&(this.clockwise=!1)}return this.camera.emit(h.ROTATE_START,this.camera,this,m,T),w},update:function(l,c){if(this.isRunning){this._elapsed+=c;var m=a(this._elapsed/this.duration,0,1);this.progress=m;var f=this.camera;if(this._elapsed<this.duration){var v=this.ease(m);this.current=f.rotation;var S=0,x=360*Math.PI/180,T=this.destination,C=this.current;this.clockwise===!1&&(T=this.current,C=this.destination),T>=C?S=Math.abs(T-C):S=Math.abs(T+x)-C;var w=0;this.clockwise?w=f.rotation+S*v:w=f.rotation-S*v,f.rotation=w,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,m,w)}else f.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,m,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});r.exports=d},3241:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=n(56694),h=n(89787),u=n(93736),d=new p({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.intensity=new u,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(l,c,m,f,v){return l===void 0&&(l=100),c===void 0&&(c=.05),m===void 0&&(m=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene),!m&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,typeof c=="number"?this.intensity.set(c):this.intensity.set(c.x,c.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=f,this._onUpdateScope=v,this.camera.emit(h.SHAKE_START,this.camera,this,l,c),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(l,c){if(this.isRunning)if(this._elapsed+=c,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var m=this.intensity,f=this.camera.width,v=this.camera.height,S=this.camera.zoom;this._offsetX=(Math.random()*m.x*f*2-m.x*f)*S,this._offsetY=(Math.random()*m.y*v*2-m.y*v)*S,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});r.exports=d},13383:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=n(56694),h=n(35060),u=n(89787),d=new p({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,c,m,f,v,S){c===void 0&&(c=1e3),m===void 0&&(m=h.Linear),f===void 0&&(f=!1),v===void 0&&(v=null),S===void 0&&(S=this.camera.scene);var x=this.camera;return!f&&this.isRunning||(this.isRunning=!0,this.duration=c,this.progress=0,this.source=x.zoom,this.destination=l,typeof m=="string"&&h.hasOwnProperty(m)?this.ease=h[m]:typeof m=="function"&&(this.ease=m),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=S,this.camera.emit(u.ZOOM_START,this.camera,this,c,l)),x},update:function(l,c){this.isRunning&&(this._elapsed+=c,this.progress=a(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});r.exports=d},53030:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Fade:n(92522),Flash:n(22151),Pan:n(37551),Shake:n(3241),RotateTo:n(1771),Zoom:n(13383)}},39577:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="cameradestroy"},85373:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeincomplete"},92057:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeinstart"},1903:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeoutcomplete"},96131:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerafadeoutstart"},85409:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="cameraflashcomplete"},25500:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="cameraflashstart"},44071:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="followupdate"},19818:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerapancomplete"},80002:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerapanstart"},87966:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postrender"},74217:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"},34805:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerarotatecomplete"},30408:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerarotatestart"},49856:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerashakecomplete"},69189:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerashakestart"},67657:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerazoomcomplete"},14229:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="camerazoomstart"},89787:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DESTROY:n(39577),FADE_IN_COMPLETE:n(85373),FADE_IN_START:n(92057),FADE_OUT_COMPLETE:n(1903),FADE_OUT_START:n(96131),FLASH_COMPLETE:n(85409),FLASH_START:n(25500),FOLLOW_UPDATE:n(44071),PAN_COMPLETE:n(19818),PAN_START:n(80002),POST_RENDER:n(87966),PRE_RENDER:n(74217),ROTATE_COMPLETE:n(34805),ROTATE_START:n(30408),SHAKE_COMPLETE:n(49856),SHAKE_START:n(69189),ZOOM_COMPLETE:n(67657),ZOOM_START:n(14229)}},32356:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Camera:n(47751),BaseCamera:n(51052),CameraManager:n(62382),Effects:n(53030),Events:n(89787)}},84219:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(10850),h=new a({initialize:function(d){this.camera=p(d,"camera",null),this.left=p(d,"left",null),this.right=p(d,"right",null),this.up=p(d,"up",null),this.down=p(d,"down",null),this.zoomIn=p(d,"zoomIn",null),this.zoomOut=p(d,"zoomOut",null),this.zoomSpeed=p(d,"zoomSpeed",.01),this.minZoom=p(d,"minZoom",.001),this.maxZoom=p(d,"maxZoom",1e3),this.speedX=0,this.speedY=0;var l=p(d,"speed",null);typeof l=="number"?(this.speedX=l,this.speedY=l):(this.speedX=p(d,"speed.x",0),this.speedY=p(d,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(this.active){u===void 0&&(u=1);var d=this.camera;this.up&&this.up.isDown?d.scrollY-=this.speedY*u|0:this.down&&this.down.isDown&&(d.scrollY+=this.speedY*u|0),this.left&&this.left.isDown?d.scrollX-=this.speedX*u|0:this.right&&this.right.isDown&&(d.scrollX+=this.speedX*u|0),this.zoomIn&&this.zoomIn.isDown?(d.zoom-=this.zoomSpeed,d.zoom<this.minZoom&&(d.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(d.zoom+=this.zoomSpeed,d.zoom>this.maxZoom&&(d.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});r.exports=h},69370:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(10850),h=new a({initialize:function(d){this.camera=p(d,"camera",null),this.left=p(d,"left",null),this.right=p(d,"right",null),this.up=p(d,"up",null),this.down=p(d,"down",null),this.zoomIn=p(d,"zoomIn",null),this.zoomOut=p(d,"zoomOut",null),this.zoomSpeed=p(d,"zoomSpeed",.01),this.minZoom=p(d,"minZoom",.001),this.maxZoom=p(d,"maxZoom",1e3),this.accelX=0,this.accelY=0;var l=p(d,"acceleration",null);typeof l=="number"?(this.accelX=l,this.accelY=l):(this.accelX=p(d,"acceleration.x",0),this.accelY=p(d,"acceleration.y",0)),this.dragX=0,this.dragY=0;var c=p(d,"drag",null);typeof c=="number"?(this.dragX=c,this.dragY=c):(this.dragX=p(d,"drag.x",0),this.dragY=p(d,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var m=p(d,"maxSpeed",null);typeof m=="number"?(this.maxSpeedX=m,this.maxSpeedY=m):(this.maxSpeedX=p(d,"maxSpeed.x",0),this.maxSpeedY=p(d,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(this.active){u===void 0&&(u=1);var d=this.camera;this._speedX>0?(this._speedX-=this.dragX*u,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*u,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*u,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*u,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(d.scrollX-=this._speedX*u|0),this._speedY!==0&&(d.scrollY-=this._speedY*u|0),this._zoom!==0&&(d.zoom+=this._zoom,d.zoom<this.minZoom?d.zoom=this.minZoom:d.zoom>this.maxZoom&&(d.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});r.exports=h},6524:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={FixedKeyControl:n(84219),SmoothedKeyControl:n(69370)}},44143:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Controls:n(6524),Scene2D:n(32356)}},86459:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={VERSION:"3.60.0",BlendModes:n(95723),ScaleModes:n(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};r.exports=a},14033:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(86459),h=n(18360),u=n(77290),d=n(72632),l=n(10850),c=n(42911),m=n(72283),f=n(5923),v=n(65641),S=n(93222),x=new a({initialize:function(C){C===void 0&&(C={});var w=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],b="#ffffff",E=l(C,"scale",null);this.width=l(E,"width",1024,C),this.height=l(E,"height",768,C),this.zoom=l(E,"zoom",1,C),this.parent=l(E,"parent",void 0,C),this.scaleMode=l(E,E?"mode":"scaleMode",0,C),this.expandParent=l(E,"expandParent",!0,C),this.autoRound=l(E,"autoRound",!1,C),this.autoCenter=l(E,"autoCenter",0,C),this.resizeInterval=l(E,"resizeInterval",500,C),this.fullscreenTarget=l(E,"fullscreenTarget",null,C),this.minWidth=l(E,"minWidth",0,C),this.maxWidth=l(E,"maxWidth",0,C),this.minHeight=l(E,"minHeight",0,C),this.maxHeight=l(E,"maxHeight",0,C),this.renderType=l(C,"type",p.AUTO),this.canvas=l(C,"canvas",null),this.context=l(C,"context",null),this.canvasStyle=l(C,"canvasStyle",null),this.customEnvironment=l(C,"customEnvironment",!1),this.sceneConfig=l(C,"scene",null),this.seed=l(C,"seed",[(Date.now()*Math.random()).toString()]),f.RND=new f.RandomDataGenerator(this.seed),this.gameTitle=l(C,"title",""),this.gameURL=l(C,"url","https://phaser.io"),this.gameVersion=l(C,"version",""),this.autoFocus=l(C,"autoFocus",!0),this.stableSort=l(C,"stableSort",-1),this.stableSort===-1&&(this.stableSort=u.browser.es2019?1:0),u.features.stableSort=this.stableSort,this.domCreateContainer=l(C,"dom.createContainer",!1),this.domPointerEvents=l(C,"dom.pointerEvents","none"),this.inputKeyboard=l(C,"input.keyboard",!0),this.inputKeyboardEventTarget=l(C,"input.keyboard.target",window),this.inputKeyboardCapture=l(C,"input.keyboard.capture",[]),this.inputMouse=l(C,"input.mouse",!0),this.inputMouseEventTarget=l(C,"input.mouse.target",null),this.inputMousePreventDefaultDown=l(C,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=l(C,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=l(C,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=l(C,"input.mouse.preventDefaultWheel",!0),this.inputTouch=l(C,"input.touch",u.input.touch),this.inputTouchEventTarget=l(C,"input.touch.target",null),this.inputTouchCapture=l(C,"input.touch.capture",!0),this.inputActivePointers=l(C,"input.activePointers",1),this.inputSmoothFactor=l(C,"input.smoothFactor",0),this.inputWindowEvents=l(C,"input.windowEvents",!0),this.inputGamepad=l(C,"input.gamepad",!1),this.inputGamepadEventTarget=l(C,"input.gamepad.target",window),this.disableContextMenu=l(C,"disableContextMenu",!1),this.audio=l(C,"audio",{}),this.hideBanner=l(C,"banner",null)===!1,this.hidePhaser=l(C,"banner.hidePhaser",!1),this.bannerTextColor=l(C,"banner.text",b),this.bannerBackgroundColor=l(C,"banner.background",w),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=l(C,"fps",null);var A=l(C,"render",null);this.pipeline=l(A,"pipeline",null,C),this.autoMobilePipeline=l(A,"autoMobilePipeline",!0,C),this.defaultPipeline=l(A,"defaultPipeline",v.MULTI_PIPELINE,C),this.antialias=l(A,"antialias",!0,C),this.antialiasGL=l(A,"antialiasGL",!0,C),this.mipmapFilter=l(A,"mipmapFilter","",C),this.desynchronized=l(A,"desynchronized",!1,C),this.roundPixels=l(A,"roundPixels",!1,C),this.pixelArt=l(A,"pixelArt",this.zoom!==1,C),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=l(A,"transparent",!1,C),this.clearBeforeRender=l(A,"clearBeforeRender",!0,C),this.preserveDrawingBuffer=l(A,"preserveDrawingBuffer",!1,C),this.premultipliedAlpha=l(A,"premultipliedAlpha",!0,C),this.failIfMajorPerformanceCaveat=l(A,"failIfMajorPerformanceCaveat",!1,C),this.powerPreference=l(A,"powerPreference","default",C),this.batchSize=l(A,"batchSize",4096,C),this.maxTextures=l(A,"maxTextures",-1,C),this.maxLights=l(A,"maxLights",10,C);var I=l(C,"backgroundColor",0);this.backgroundColor=S(I),this.transparent&&(this.backgroundColor=S(0),this.backgroundColor.alpha=0),this.preBoot=l(C,"callbacks.preBoot",m),this.postBoot=l(C,"callbacks.postBoot",m),this.physics=l(C,"physics",{}),this.defaultPhysicsSystem=l(this.physics,"default",!1),this.loaderBaseURL=l(C,"loader.baseURL",""),this.loaderPath=l(C,"loader.path",""),this.loaderMaxParallelDownloads=l(C,"loader.maxParallelDownloads",u.os.android?6:32),this.loaderCrossOrigin=l(C,"loader.crossOrigin",void 0),this.loaderResponseType=l(C,"loader.responseType",""),this.loaderAsync=l(C,"loader.async",!0),this.loaderUser=l(C,"loader.user",""),this.loaderPassword=l(C,"loader.password",""),this.loaderTimeout=l(C,"loader.timeout",0),this.loaderWithCredentials=l(C,"loader.withCredentials",!1),this.loaderImageLoadType=l(C,"loader.imageLoadType","XHR"),this.loaderLocalScheme=l(C,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=l(C,"fx.glow.quality",.1),this.glowFXDistance=l(C,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var R=l(C,"plugins",null),N=h.DefaultScene;R&&(Array.isArray(R)?this.defaultPlugins=R:c(R)&&(this.installGlobalPlugins=d(R,"global",[]),this.installScenePlugins=d(R,"scene",[]),Array.isArray(R.default)?N=R.default:Array.isArray(R.defaultMerge)&&(N=N.concat(R.defaultMerge)))),this.defaultPlugins=N;var F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=l(C,"images.default",F+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=l(C,"images.missing",F+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=l(C,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=p.WEBGL:window.FORCE_CANVAS&&(this.renderType=p.CANVAS))}});r.exports=x},50150:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(70616),p=n(61068),h=n(86459),u=n(90185),d=function(l){var c=l.config;if((c.customEnvironment||c.canvas)&&c.renderType===h.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!c.customEnvironment&&!c.canvas&&c.renderType!==h.HEADLESS)if(c.renderType===h.AUTO&&(c.renderType=u.webGL?h.WEBGL:h.CANVAS),c.renderType===h.WEBGL){if(!u.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(c.renderType===h.CANVAS){if(!u.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+c.renderType);c.antialias||p.disableSmoothing();var m=l.scale.baseSize,f=m.width,v=m.height;if(c.canvas?(l.canvas=c.canvas,l.canvas.width=f,l.canvas.height=v):l.canvas=p.create(l,f,v,c.renderType),c.canvasStyle&&(l.canvas.style=c.canvasStyle),c.antialias||a.setCrisp(l.canvas),c.renderType!==h.HEADLESS){var S,x;S=n(91135),x=n(11857),c.renderType===h.WEBGL?l.renderer=new x(l):(l.renderer=new S(l),l.context=l.renderer.gameContext)}};r.exports=d},77291:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(86459),p=function(h){var u=h.config;if(!u.hideBanner){var d="WebGL";u.renderType===a.CANVAS?d="Canvas":u.renderType===a.HEADLESS&&(d="Headless");var l=u.audio,c=h.device.audio,m;if(c.webAudio&&!l.disableWebAudio?m="Web Audio":l.noAudio||!c.webAudio&&!c.audioData?m="No Audio":m="HTML5 Audio",h.device.browser.ie)window.console&&console.log("Phaser v"+a.VERSION+" / https://phaser.io");else{var f="",v=[f];if(Array.isArray(u.bannerBackgroundColor)){var S;u.bannerBackgroundColor.forEach(function(T){f=f.concat("%c "),v.push("background: "+T),S=T}),v[v.length-1]="color: "+u.bannerTextColor+"; background: "+S}else f=f.concat("%c "),v.push("color: "+u.bannerTextColor+"; background: "+u.bannerBackgroundColor);v.push("background: transparent"),u.gameTitle&&(f=f.concat(u.gameTitle),u.gameVersion&&(f=f.concat(" v"+u.gameVersion)),u.hidePhaser||(f=f.concat(" / ")));var x="";u.hidePhaser||(f=f.concat("Phaser v"+a.VERSION+x+" ("+d+" | "+m+")")),f=f.concat(" %c "+u.gameURL),v[0]=f,console.log.apply(console,v)}}};r.exports=p},15213:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(99584),p=n(90249),h=n(43474),u=n(61068),d=n(56694),l=n(14033),c=n(85178),m=n(50150),f=n(81078),v=n(77291),S=n(77290),x=n(21546),T=n(6659),C=n(97081),w=n(69898),b=n(91963),E=n(49274),A=n(756),I=n(13553),R=n(38203),N=n(6237),F=n(26617),P=n(26493),D=n(84191),M=new d({initialize:function(k){this.config=new l(k),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new T,this.anims=new p(this),this.textures=new N(this),this.cache=new h(this),this.registry=new f(this,new T),this.input=new w(this,this.config),this.scene=new I(this,this.config.sceneConfig),this.device=S,this.scale=new A(this,this.config),this.sound=null,this.sound=D.create(this),this.loop=new F(this,this.config.fps),this.plugins=new E(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,x(this.boot.bind(this))},boot:function(){if(!b.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),m(this),c(this),v(this),a(this.canvas,this.config.parent),this.textures.once(R.READY,this.texturesReady,this),this.events.emit(C.BOOT)},texturesReady:function(){this.events.emit(C.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),P(this);var L=this.events;L.on(C.HIDDEN,this.onHidden,this),L.on(C.VISIBLE,this.onVisible,this),L.on(C.BLUR,this.onBlur,this),L.on(C.FOCUS,this.onFocus,this)},step:function(L,k){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var V=this.events;V.emit(C.PRE_STEP,L,k),V.emit(C.STEP,L,k),this.scene.update(L,k),V.emit(C.POST_STEP,L,k);var W=this.renderer;W.preRender(),V.emit(C.PRE_RENDER,W,L,k),this.scene.render(W),W.postRender(),V.emit(C.POST_RENDER,W,L,k)}},headlessStep:function(L,k){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var V=this.events;V.emit(C.PRE_STEP,L,k),V.emit(C.STEP,L,k),this.scene.update(L,k),V.emit(C.POST_STEP,L,k),this.scene.isProcessing=!1,V.emit(C.PRE_RENDER,null,L,k),V.emit(C.POST_RENDER,null,L,k)}},onHidden:function(){this.loop.pause(),this.events.emit(C.PAUSE)},pause:function(){var L=this.isPaused;this.isPaused=!0,L||this.events.emit(C.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(C.RESUME)},resume:function(){var L=this.isPaused;this.isPaused=!1,L&&this.events.emit(C.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(L,k){k===void 0&&(k=!1),this.pendingDestroy=!0,this.removeCanvas=L,this.noReturn=k},runDestroy:function(){this.scene.destroy(),this.events.emit(C.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(u.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});r.exports=M},26617:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(10850),h=n(72283),u=n(27385),d=new a({initialize:function(c,m){this.game=c,this.raf=new u,this.started=!1,this.running=!1,this.minFps=p(m,"min",5),this.targetFps=p(m,"target",60),this.fpsLimit=p(m,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=h,this.forceSetTimeOut=p(m,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=p(m,"deltaHistory",10),this.panicMax=p(m,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=p(m,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var l=window.performance.now();this.time=l,this.lastTime=l,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0;for(var c=0;c<this.deltaSmoothingMax;c++)this.deltaHistory[c]=Math.min(this._target,this.deltaHistory[c]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(l){if(this.started)return this;this.started=!0,this.running=!0;for(var c=0;c<this.deltaSmoothingMax;c++)this.deltaHistory[c]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=l;var m=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(m,this.forceSetTimeOut,this._target)},smoothDelta:function(l){var c=this.deltaIndex,m=this.deltaHistory,f=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,l=Math.min(l,this._target)),l>this._min&&(l=m[c],l=Math.min(l,this._min)),m[c]=l,this.deltaIndex++,this.deltaIndex>=f&&(this.deltaIndex=0);for(var v=0,S=0;S<f;S++)v+=m[S];return v/=f,v},updateFPS:function(l){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0},stepLimitFPS:function(l){this.now=l;var c=Math.max(0,l-this.lastTime);this.rawDelta=c,this.time+=this.rawDelta,this.smoothStep&&(c=this.smoothDelta(c)),this.delta+=c,l>=this.nextFpsUpdate&&this.updateFPS(l),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(l,this.delta),this.delta=0),this.lastTime=l,this.frame++},step:function(l){this.now=l;var c=Math.max(0,l-this.lastTime);this.rawDelta=c,this.time+=this.rawDelta,this.smoothStep&&(c=this.smoothDelta(c)),this.delta=c,l>=this.nextFpsUpdate&&this.updateFPS(l),this.framesThisSecond++,this.callback(l,c),this.lastTime=l,this.frame++},tick:function(){var l=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(l):this.step(l)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(l){l===void 0&&(l=!1);var c=window.performance.now();if(!this.running){l&&(this.startTime+=-this.lastTime+(this.lastTime+c));var m=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(m,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=c+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});r.exports=d},26493:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(97081),p=function(h){var u,d=h.events;if(document.hidden!==void 0)u="visibilitychange";else{var l=["webkit","moz","ms"];l.forEach(function(m){document[m+"Hidden"]!==void 0&&(document.hidden=function(){return document[m+"Hidden"]},u=m+"visibilitychange")})}var c=function(m){document.hidden||m.type==="pause"?d.emit(a.HIDDEN):d.emit(a.VISIBLE)};u&&document.addEventListener(u,c,!1),window.onblur=function(){d.emit(a.BLUR)},window.onfocus=function(){d.emit(a.FOCUS)},window.focus&&h.config.autoFocus&&window.focus()};r.exports=p},41651:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="blur"},5520:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"},51673:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="contextlost"},25055:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},23767:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="focus"},57564:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="hidden"},38327:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},43807:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postrender"},73652:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="poststep"},780:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"},13781:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prestep"},38247:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="ready"},29129:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},34994:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="step"},98704:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="visible"},97081:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BLUR:n(41651),BOOT:n(5520),CONTEXT_LOST:n(51673),DESTROY:n(25055),FOCUS:n(23767),HIDDEN:n(57564),PAUSE:n(38327),POST_RENDER:n(43807),POST_STEP:n(73652),PRE_RENDER:n(780),PRE_STEP:n(13781),READY:n(38247),RESUME:n(29129),STEP:n(34994),VISIBLE:n(98704)}},80293:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Config:n(14033),CreateRenderer:n(50150),DebugHeader:n(77291),Events:n(97081),TimeStep:n(26617),VisibilityHandler:n(26493)}},52780:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(81543),p=n(61068),h=n(10850),u=function(d){var l=h(d,"data",[]),c=h(d,"canvas",null),m=h(d,"palette",a),f=h(d,"pixelWidth",1),v=h(d,"pixelHeight",f),S=h(d,"resizeCanvas",!0),x=h(d,"clearCanvas",!0),T=h(d,"preRender",null),C=h(d,"postRender",null),w=Math.floor(Math.abs(l[0].length*f)),b=Math.floor(Math.abs(l.length*v));c||(c=p.create2D(this,w,b),S=!1,x=!1),S&&(c.width=w,c.height=b);var E=c.getContext("2d",{willReadFrequently:!0});x&&E.clearRect(0,0,w,b),T&&T(c,E);for(var A=0;A<l.length;A++)for(var I=l[A],R=0;R<I.length;R++){var N=I[R];N!=="."&&N!==" "&&(E.fillStyle=m[N],E.fillRect(R*f,A*v,f,v))}return C&&C(c,E),c};r.exports=u},84106:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={GenerateTexture:n(52780),Palettes:n(25235)}},81543:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},75846:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},83206:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},13194:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},50686:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},25235:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ARNE16:n(81543),C64:n(75846),CGA:n(83206),JMP:n(13194),MSX:n(50686)}},63120:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(34631),h=n(38517),u=n(93736),d=new a({Extends:h,initialize:function(c,m,f,v){h.call(this,"CubicBezierCurve"),Array.isArray(c)&&(v=new u(c[6],c[7]),f=new u(c[4],c[5]),m=new u(c[2],c[3]),c=new u(c[0],c[1])),this.p0=c,this.p1=m,this.p2=f,this.p3=v},getStartPoint:function(l){return l===void 0&&(l=new u),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,c){c===void 0&&(c=new u);var m=this.p0,f=this.p1,v=this.p2,S=this.p3;return c.set(p(l,m.x,f.x,v.x,S.x),p(l,m.y,f.y,v.y,S.y))},draw:function(l,c){c===void 0&&(c=32);var m=this.getPoints(c);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var f=1;f<m.length;f++)l.lineTo(m[f].x,m[f].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});d.fromJSON=function(l){var c=l.points,m=new u(c[0],c[1]),f=new u(c[2],c[3]),v=new u(c[4],c[5]),S=new u(c[6],c[7]);return new d(m,f,v,S)},r.exports=d},38517:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(80222),h=n(74118),u=n(93736),d=new a({initialize:function(c){this.type=c,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new u,this._tmpVec2B=new u},draw:function(l,c){return c===void 0&&(c=32),l.strokePoints(this.getPoints(c))},getBounds:function(l,c){l||(l=new h),c===void 0&&(c=16);var m=this.getLength();c>m&&(c=m/2);var f=Math.max(1,Math.round(m/c));return p(this.getSpacedPoints(f),l)},getDistancePoints:function(l){var c=this.getLength(),m=Math.max(1,c/l);return this.getSpacedPoints(m)},getEndPoint:function(l){return l===void 0&&(l=new u),this.getPointAt(1,l)},getLength:function(){var l=this.getLengths();return l[l.length-1]},getLengths:function(l){if(l===void 0&&(l=this.arcLengthDivisions),this.cacheArcLengths.length===l+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var c=[],m,f=this.getPoint(0,this._tmpVec2A),v=0;c.push(0);for(var S=1;S<=l;S++)m=this.getPoint(S/l,this._tmpVec2B),v+=m.distance(f),c.push(v),f.copy(m);return this.cacheArcLengths=c,c},getPointAt:function(l,c){var m=this.getUtoTmapping(l);return this.getPoint(m,c)},getPoints:function(l,c,m){m===void 0&&(m=[]),l||(c?l=this.getLength()/c:l=this.defaultDivisions);for(var f=0;f<=l;f++)m.push(this.getPoint(f/l));return m},getRandomPoint:function(l){return l===void 0&&(l=new u),this.getPoint(Math.random(),l)},getSpacedPoints:function(l,c,m){m===void 0&&(m=[]),l||(c?l=this.getLength()/c:l=this.defaultDivisions);for(var f=0;f<=l;f++){var v=this.getUtoTmapping(f/l,null,l);m.push(this.getPoint(v))}return m},getStartPoint:function(l){return l===void 0&&(l=new u),this.getPointAt(0,l)},getTangent:function(l,c){c===void 0&&(c=new u);var m=1e-4,f=l-m,v=l+m;return f<0&&(f=0),v>1&&(v=1),this.getPoint(f,this._tmpVec2A),this.getPoint(v,c),c.subtract(this._tmpVec2A).normalize()},getTangentAt:function(l,c){var m=this.getUtoTmapping(l);return this.getTangent(m,c)},getTFromDistance:function(l,c){return l<=0?0:this.getUtoTmapping(0,l,c)},getUtoTmapping:function(l,c,m){var f=this.getLengths(m),v=0,S=f.length,x;c?x=Math.min(c,f[S-1]):x=l*f[S-1];for(var T=0,C=S-1,w;T<=C;)if(v=Math.floor(T+(C-T)/2),w=f[v]-x,w<0)T=v+1;else if(w>0)C=v-1;else{C=v;break}if(v=C,f[v]===x)return v/(S-1);var b=f[v],E=f[v+1],A=E-b,I=(x-b)/A;return(v+I)/(S-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});r.exports=d},48835:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(38517),h=n(75606),u=n(10850),d=n(23701),l=n(93736),c=new a({Extends:p,initialize:function(f,v,S,x,T,C,w,b){if(typeof f=="object"){var E=f;f=u(E,"x",0),v=u(E,"y",0),S=u(E,"xRadius",0),x=u(E,"yRadius",S),T=u(E,"startAngle",0),C=u(E,"endAngle",360),w=u(E,"clockwise",!1),b=u(E,"rotation",0)}else x===void 0&&(x=S),T===void 0&&(T=0),C===void 0&&(C=360),w===void 0&&(w=!1),b===void 0&&(b=0);p.call(this,"EllipseCurve"),this.p0=new l(f,v),this._xRadius=S,this._yRadius=x,this._startAngle=h(T),this._endAngle=h(C),this._clockwise=w,this._rotation=h(b)},getStartPoint:function(m){return m===void 0&&(m=new l),this.getPoint(0,m)},getResolution:function(m){return m*2},getPoint:function(m,f){f===void 0&&(f=new l);for(var v=Math.PI*2,S=this._endAngle-this._startAngle,x=Math.abs(S)<Number.EPSILON;S<0;)S+=v;for(;S>v;)S-=v;S<Number.EPSILON&&(x?S=0:S=v),this._clockwise&&!x&&(S===v?S=-v:S=S-v);var T=this._startAngle+m*S,C=this.p0.x+this._xRadius*Math.cos(T),w=this.p0.y+this._yRadius*Math.sin(T);if(this._rotation!==0){var b=Math.cos(this._rotation),E=Math.sin(this._rotation),A=C-this.p0.x,I=w-this.p0.y;C=A*b-I*E+this.p0.x,w=A*E+I*b+this.p0.y}return f.set(C,w)},setXRadius:function(m){return this.xRadius=m,this},setYRadius:function(m){return this.yRadius=m,this},setWidth:function(m){return this.xRadius=m/2,this},setHeight:function(m){return this.yRadius=m/2,this},setStartAngle:function(m){return this.startAngle=m,this},setEndAngle:function(m){return this.endAngle=m,this},setClockwise:function(m){return this.clockwise=m,this},setRotation:function(m){return this.rotation=m,this},x:{get:function(){return this.p0.x},set:function(m){this.p0.x=m}},y:{get:function(){return this.p0.y},set:function(m){this.p0.y=m}},xRadius:{get:function(){return this._xRadius},set:function(m){this._xRadius=m}},yRadius:{get:function(){return this._yRadius},set:function(m){this._yRadius=m}},startAngle:{get:function(){return d(this._startAngle)},set:function(m){this._startAngle=h(m)}},endAngle:{get:function(){return d(this._endAngle)},set:function(m){this._endAngle=h(m)}},clockwise:{get:function(){return this._clockwise},set:function(m){this._clockwise=m}},angle:{get:function(){return d(this._rotation)},set:function(m){this._rotation=h(m)}},rotation:{get:function(){return this._rotation},set:function(m){this._rotation=m}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:d(this._startAngle),endAngle:d(this._endAngle),clockwise:this._clockwise,rotation:d(this._rotation)}}});c.fromJSON=function(m){return new c(m)},r.exports=c},58084:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(38517),h=n(80222),u=n(74118),d=n(93736),l=new a({Extends:p,initialize:function(m,f){p.call(this,"LineCurve"),Array.isArray(m)&&(f=new d(m[2],m[3]),m=new d(m[0],m[1])),this.p0=m,this.p1=f,this.arcLengthDivisions=1},getBounds:function(c){return c===void 0&&(c=new u),h([this.p0,this.p1],c)},getStartPoint:function(c){return c===void 0&&(c=new d),c.copy(this.p0)},getResolution:function(c){return c===void 0&&(c=1),c},getPoint:function(c,m){return m===void 0&&(m=new d),c===1?m.copy(this.p1):(m.copy(this.p1).subtract(this.p0).scale(c).add(this.p0),m)},getPointAt:function(c,m){return this.getPoint(c,m)},getTangent:function(c,m){return m===void 0&&(m=new d),m.copy(this.p1).subtract(this.p0).normalize(),m},getUtoTmapping:function(c,m,f){var v;if(m){var S=this.getLengths(f),x=S[S.length-1],T=Math.min(m,x);v=T/x}else v=c;return v},draw:function(c){return c.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),c},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});l.fromJSON=function(c){var m=c.points,f=new d(m[0],m[1]),v=new d(m[2],m[3]);return new l(f,v)},r.exports=l},64761:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(38517),h=n(16252),u=n(93736),d=new a({Extends:p,initialize:function(c,m,f){p.call(this,"QuadraticBezierCurve"),Array.isArray(c)&&(f=new u(c[4],c[5]),m=new u(c[2],c[3]),c=new u(c[0],c[1])),this.p0=c,this.p1=m,this.p2=f},getStartPoint:function(l){return l===void 0&&(l=new u),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,c){c===void 0&&(c=new u);var m=this.p0,f=this.p1,v=this.p2;return c.set(h(l,m.x,f.x,v.x),h(l,m.y,f.y,v.y))},draw:function(l,c){c===void 0&&(c=32);var m=this.getPoints(c);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var f=1;f<m.length;f++)l.lineTo(m[f].x,m[f].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});d.fromJSON=function(l){var c=l.points,m=new u(c[0],c[1]),f=new u(c[2],c[3]),v=new u(c[4],c[5]);return new d(m,f,v)},r.exports=d},11956:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(14976),p=n(56694),h=n(38517),u=n(93736),d=new p({Extends:h,initialize:function(c){c===void 0&&(c=[]),h.call(this,"SplineCurve"),this.points=[],this.addPoints(c)},addPoints:function(l){for(var c=0;c<l.length;c++){var m=new u;typeof l[c]=="number"?(m.x=l[c],m.y=l[c+1],c++):Array.isArray(l[c])?(m.x=l[c][0],m.y=l[c][1]):(m.x=l[c].x,m.y=l[c].y),this.points.push(m)}return this},addPoint:function(l,c){var m=new u(l,c);return this.points.push(m),m},getStartPoint:function(l){return l===void 0&&(l=new u),l.copy(this.points[0])},getResolution:function(l){return l*this.points.length},getPoint:function(l,c){c===void 0&&(c=new u);var m=this.points,f=(m.length-1)*l,v=Math.floor(f),S=f-v,x=m[v===0?v:v-1],T=m[v],C=m[v>m.length-2?m.length-1:v+1],w=m[v>m.length-3?m.length-1:v+2];return c.set(a(S,x.x,T.x,C.x,w.x),a(S,x.y,T.y,C.y,w.y))},toJSON:function(){for(var l=[],c=0;c<this.points.length;c++)l.push(this.points[c].x),l.push(this.points[c].y);return{type:this.type,points:l}}});d.fromJSON=function(l){return new d(l.points)},r.exports=d},73962:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Path:n(12822),MoveTo:n(53639),CubicBezier:n(63120),Curve:n(38517),Ellipse:n(48835),Line:n(58084),QuadraticBezier:n(64761),Spline:n(11956)}},53639:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(93736),h=new a({initialize:function(d,l){this.active=!1,this.p0=new p(d,l)},getPoint:function(u,d){return d===void 0&&(d=new p),d.copy(this.p0)},getPointAt:function(u,d){return this.getPoint(u,d)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});r.exports=h},12822:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(63120),h=n(48835),u=n(61286),d=n(58084),l=n(53639),c=n(64761),m=n(74118),f=n(11956),v=n(93736),S=n(83392),x=new a({initialize:function(C,w){C===void 0&&(C=0),w===void 0&&(w=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new v,this._tmpVec2A=new v,this._tmpVec2B=new v,typeof C=="object"?this.fromJSON(C):this.startPoint.set(C,w)},add:function(T){return this.curves.push(T),this},circleTo:function(T,C,w){return C===void 0&&(C=!1),this.ellipseTo(T,T,0,360,C,w)},closePath:function(){var T=this.curves[0].getPoint(0),C=this.curves[this.curves.length-1].getPoint(1);return T.equals(C)||this.curves.push(new d(C,T)),this},cubicBezierTo:function(T,C,w,b,E,A){var I=this.getEndPoint(),R,N,F;return T instanceof v?(R=T,N=C,F=w):(R=new v(w,b),N=new v(E,A),F=new v(T,C)),this.add(new p(I,R,N,F))},quadraticBezierTo:function(T,C,w,b){var E=this.getEndPoint(),A,I;return T instanceof v?(A=T,I=C):(A=new v(w,b),I=new v(T,C)),this.add(new c(E,A,I))},draw:function(T,C){for(var w=0;w<this.curves.length;w++){var b=this.curves[w];b.active&&b.draw(T,C)}return T},ellipseTo:function(T,C,w,b,E,A){var I=new h(0,0,T,C,w,b,E,A),R=this.getEndPoint(this._tmpVec2A),N=I.getStartPoint(this._tmpVec2B);return R.subtract(N),I.x=R.x,I.y=R.y,this.add(I)},fromJSON:function(T){this.curves=[],this.cacheLengths=[],this.startPoint.set(T.x,T.y),this.autoClose=T.autoClose;for(var C=0;C<T.curves.length;C++){var w=T.curves[C];switch(w.type){case"LineCurve":this.add(d.fromJSON(w));break;case"EllipseCurve":this.add(h.fromJSON(w));break;case"SplineCurve":this.add(f.fromJSON(w));break;case"CubicBezierCurve":this.add(p.fromJSON(w));break;case"QuadraticBezierCurve":this.add(c.fromJSON(w));break}}return this},getBounds:function(T,C){T===void 0&&(T=new m),C===void 0&&(C=16),T.x=Number.MAX_VALUE,T.y=Number.MAX_VALUE;for(var w=new m,b=S.MIN_SAFE_INTEGER,E=S.MIN_SAFE_INTEGER,A=0;A<this.curves.length;A++){var I=this.curves[A];I.active&&(I.getBounds(w,C),T.x=Math.min(T.x,w.x),T.y=Math.min(T.y,w.y),b=Math.max(b,w.right),E=Math.max(E,w.bottom))}return T.right=b,T.bottom=E,T},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var T=[],C=0,w=0;w<this.curves.length;w++)C+=this.curves[w].getLength(),T.push(C);return this.cacheLengths=T,T},getCurveAt:function(T){for(var C=T*this.getLength(),w=this.getCurveLengths(),b=0;b<w.length;){if(w[b]>=C)return this.curves[b];b++}return null},getEndPoint:function(T){return T===void 0&&(T=new v),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,T):T.copy(this.startPoint),T},getLength:function(){var T=this.getCurveLengths();return T[T.length-1]},getPoint:function(T,C){C===void 0&&(C=new v);for(var w=T*this.getLength(),b=this.getCurveLengths(),E=0;E<b.length;){if(b[E]>=w){var A=b[E]-w,I=this.curves[E],R=I.getLength(),N=R===0?0:1-A/R;return I.getPointAt(N,C)}E++}return null},getPoints:function(T){T===void 0&&(T=12);for(var C=[],w,b=0;b<this.curves.length;b++){var E=this.curves[b];if(E.active)for(var A=E.getResolution(T),I=E.getPoints(A),R=0;R<I.length;R++){var N=I[R];w&&w.equals(N)||(C.push(N),w=N)}}return this.autoClose&&C.length>1&&!C[C.length-1].equals(C[0])&&C.push(C[0]),C},getRandomPoint:function(T){return T===void 0&&(T=new v),this.getPoint(Math.random(),T)},getSpacedPoints:function(T){T===void 0&&(T=40);for(var C=[],w=0;w<=T;w++)C.push(this.getPoint(w/T));return this.autoClose&&C.push(C[0]),C},getStartPoint:function(T){return T===void 0&&(T=new v),T.copy(this.startPoint)},getTangent:function(T,C){C===void 0&&(C=new v);for(var w=T*this.getLength(),b=this.getCurveLengths(),E=0;E<b.length;){if(b[E]>=w){var A=b[E]-w,I=this.curves[E],R=I.getLength(),N=R===0?0:1-A/R;return I.getTangentAt(N,C)}E++}return null},lineTo:function(T,C){T instanceof v?this._tmpVec2B.copy(T):this._tmpVec2B.set(T,C);var w=this.getEndPoint(this._tmpVec2A);return this.add(new d([w.x,w.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(T){return T.unshift(this.getEndPoint()),this.add(new f(T))},moveTo:function(T,C){return T instanceof v?this.add(new l(T.x,T.y)):this.add(new l(T,C))},toJSON:function(){for(var T=[],C=0;C<this.curves.length;C++)T.push(this.curves[C].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:T}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});u.register("path",function(T,C){return new x(T,C)}),r.exports=x},81078:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(35026),h=new a({initialize:function(d,l){this.parent=d,this.events=l,l||(this.events=d.events?d.events:d),this.list={},this.values={},this._frozen=!1,!d.hasOwnProperty("sys")&&this.events&&this.events.once(p.DESTROY,this.destroy,this)},get:function(u){var d=this.list;if(Array.isArray(u)){for(var l=[],c=0;c<u.length;c++)l.push(d[u[c]]);return l}else return d[u]},getAll:function(){var u={};for(var d in this.list)this.list.hasOwnProperty(d)&&(u[d]=this.list[d]);return u},query:function(u){var d={};for(var l in this.list)this.list.hasOwnProperty(l)&&l.match(u)&&(d[l]=this.list[l]);return d},set:function(u,d){if(this._frozen)return this;if(typeof u=="string")return this.setValue(u,d);for(var l in u)this.setValue(l,u[l]);return this},inc:function(u,d){if(this._frozen)return this;d===void 0&&(d=1);var l=this.get(u);return l===void 0&&(l=0),this.set(u,l+d),this},toggle:function(u){return this._frozen?this:(this.set(u,!this.get(u)),this)},setValue:function(u,d){if(this._frozen)return this;if(this.has(u))this.values[u]=d;else{var l=this,c=this.list,m=this.events,f=this.parent;Object.defineProperty(this.values,u,{enumerable:!0,configurable:!0,get:function(){return c[u]},set:function(v){if(!l._frozen){var S=c[u];c[u]=v,m.emit(p.CHANGE_DATA,f,u,v,S),m.emit(p.CHANGE_DATA_KEY+u,f,v,S)}}}),c[u]=d,m.emit(p.SET_DATA,f,u,d)}return this},each:function(u,d){for(var l=[this.parent,null,void 0],c=1;c<arguments.length;c++)l.push(arguments[c]);for(var m in this.list)l[1]=m,l[2]=this.list[m],u.apply(d,l);return this},merge:function(u,d){d===void 0&&(d=!0);for(var l in u)u.hasOwnProperty(l)&&(d||!d&&!this.has(l))&&this.setValue(l,u[l]);return this},remove:function(u){if(this._frozen)return this;if(Array.isArray(u))for(var d=0;d<u.length;d++)this.removeValue(u[d]);else return this.removeValue(u);return this},removeValue:function(u){if(this.has(u)){var d=this.list[u];delete this.list[u],delete this.values[u],this.events.emit(p.REMOVE_DATA,this.parent,u,d)}return this},pop:function(u){var d=void 0;return!this._frozen&&this.has(u)&&(d=this.list[u],delete this.list[u],delete this.values[u],this.events.emit(p.REMOVE_DATA,this.parent,u,d)),d},has:function(u){return this.list.hasOwnProperty(u)},setFreeze:function(u){return this._frozen=u,this},reset:function(){for(var u in this.list)delete this.list[u],delete this.values[u];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(p.CHANGE_DATA),this.events.off(p.SET_DATA),this.events.off(p.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(u){this._frozen=!!u}},count:{get:function(){var u=0;for(var d in this.list)this.list[d]!==void 0&&u++;return u}}});r.exports=h},76508:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(81078),h=n(91963),u=n(7599),d=new a({Extends:p,initialize:function(c){p.call(this,c,c.sys.events),this.scene=c,this.systems=c.sys,c.sys.events.once(u.BOOT,this.boot,this),c.sys.events.on(u.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){p.prototype.destroy.call(this),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});h.register("DataManagerPlugin",d,"data"),r.exports=d},73569:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="changedata"},15590:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="changedata-"},37669:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},87090:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removedata"},90142:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="setdata"},35026:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CHANGE_DATA:n(73569),CHANGE_DATA_KEY:n(15590),DESTROY:n(37669),REMOVE_DATA:n(87090),SET_DATA:n(90142)}},1999:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DataManager:n(81078),DataManagerPlugin:n(76508),Events:n(35026)}},10720:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(1350),p={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function h(){if(typeof importScripts=="function")return p;p.audioData=!!window.Audio,p.webAudio=!!(window.AudioContext||window.webkitAudioContext);var u=document.createElement("audio"),d=!!u.canPlayType;try{if(d){var l=function(f,v){var S=u.canPlayType("audio/"+f).replace(/^no$/,"");return v?!!(S||u.canPlayType("audio/"+v).replace(/^no$/,"")):!!S};if(p.ogg=l('ogg; codecs="vorbis"'),p.opus=l('ogg; codecs="opus"',"opus"),p.mp3=l("mpeg"),p.wav=l("wav"),p.m4a=l("x-m4a"),p.aac=l("aac"),p.flac=l("flac","x-flac"),p.webm=l('webm; codecs="vorbis"'),u.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(a.edge)p.dolby=!0;else if(a.safari&&a.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var c=parseInt(RegExp.$1,10),m=parseInt(RegExp.$2,10);(c===10&&m>=11||c>10)&&(p.dolby=!0)}}}}catch{}return p}r.exports=h()},1350:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(36580),p={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function h(){var u=navigator.userAgent;return/Edg\/\d+/.test(u)?(p.edge=!0,p.es2019=!0):/OPR/.test(u)?(p.opera=!0,p.es2019=!0):/Chrome\/(\d+)/.test(u)&&!a.windowsPhone?(p.chrome=!0,p.chromeVersion=parseInt(RegExp.$1,10),p.es2019=p.chromeVersion>69):/Firefox\D+(\d+)/.test(u)?(p.firefox=!0,p.firefoxVersion=parseInt(RegExp.$1,10),p.es2019=p.firefoxVersion>10):/AppleWebKit/.test(u)&&a.iOS?p.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(u)?(p.ie=!0,p.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(u)&&!a.windowsPhone?(p.safari=!0,p.safariVersion=parseInt(RegExp.$1,10),p.es2019=p.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(u)&&(p.ie=!0,p.trident=!0,p.tridentVersion=parseInt(RegExp.$1,10),p.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(u)&&(p.silk=!0),p}r.exports=h()},98581:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61068),p={supportInverseAlpha:!1,supportNewBlendModes:!1};function h(){var l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",c="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",m=new Image;return m.onload=function(){var f=new Image;f.onload=function(){var v=a.create2D(f,6),S=v.getContext("2d",{willReadFrequently:!0});if(S.globalCompositeOperation="multiply",S.drawImage(m,0,0),S.drawImage(f,2,0),!S.getImageData(2,0,1,1))return!1;var x=S.getImageData(2,0,1,1).data;a.remove(f),p.supportNewBlendModes=x[0]===255&&x[1]===0&&x[2]===0},f.src=l+"/wCKxvRF"+c},m.src=l+"AP804Oa6"+c,!1}function u(){var l=a.create2D(this,2),c=l.getContext("2d",{willReadFrequently:!0});c.fillStyle="rgba(10, 20, 30, 0.5)",c.fillRect(0,0,1,1);var m=c.getImageData(0,0,1,1);if(m===null)return!1;c.putImageData(m,1,0);var f=c.getImageData(1,0,1,1),v=f.data[0]===m.data[0]&&f.data[1]===m.data[1]&&f.data[2]===m.data[2]&&f.data[3]===m.data[3];return a.remove(this),v}function d(){return typeof importScripts!="function"&&document!==void 0&&(p.supportNewBlendModes=h(),p.supportInverseAlpha=u()),p}r.exports=d()},90185:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(36580),p=n(1350),h=n(61068),u={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function d(){var c=new ArrayBuffer(4),m=new Uint8Array(c),f=new Uint32Array(c);return m[0]=161,m[1]=178,m[2]=195,m[3]=212,f[0]===3569595041?!0:f[0]===2712847316?!1:null}function l(){if(typeof importScripts=="function")return u;u.canvas=!!window.CanvasRenderingContext2D;try{u.localStorage=!!localStorage.getItem}catch{u.localStorage=!1}u.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,u.fileSystem=!!window.requestFileSystem;var c=!1,m=function(){if(window.WebGLRenderingContext)try{var f=h.createWebGL(this),v=f.getContext("webgl")||f.getContext("experimental-webgl"),S=h.create2D(this),x=S.getContext("2d",{willReadFrequently:!0}),T=x.createImageData(1,1);return c=T.data instanceof Uint8ClampedArray,h.remove(f),h.remove(S),!!v}catch{return!1}return!1};return u.webGL=m(),u.worker=!!window.Worker,u.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,u.getUserMedia=u.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,p.firefox&&p.firefoxVersion<21&&(u.getUserMedia=!1),!a.iOS&&(p.ie||p.firefox||p.chrome)&&(u.canvasBitBltShift=!0),(p.safari||p.mobileSafari)&&(u.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(u.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(u.littleEndian=d()),u.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&u.littleEndian!==null&&c,u}r.exports=l()},33553:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={available:!1,cancel:"",keyboard:!1,request:""};function n(){if(typeof importScripts=="function")return g;var a,p="Fullscreen",h="FullScreen",u=["request"+p,"request"+h,"webkitRequest"+p,"webkitRequest"+h,"msRequest"+p,"msRequest"+h,"mozRequest"+h,"mozRequest"+p];for(a=0;a<u.length;a++)if(document.documentElement[u[a]]){g.available=!0,g.request=u[a];break}var d=["cancel"+h,"exit"+p,"webkitCancel"+h,"webkitExit"+p,"msCancel"+h,"msExit"+p,"mozCancel"+h,"mozExit"+p];if(g.available){for(a=0;a<d.length;a++)if(document[d[a]]){g.cancel=d[a];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(g.keyboard=!0),Object.defineProperty(g,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),g}r.exports=n()},95872:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(1350),p={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function h(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(p.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(p.mspointer=!0),navigator.getGamepads&&(p.gamepads=!0),"onwheel"in window||a.ie&&"WheelEvent"in window?p.wheelEvent="wheel":"onmousewheel"in window?p.wheelEvent="mousewheel":a.firefox&&"MouseScrollEvent"in window&&(p.wheelEvent="DOMMouseScroll")),p}r.exports=h()},36580:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function n(){if(typeof importScripts=="function")return g;var a=navigator.userAgent;/Windows/.test(a)?g.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(g.iOS=!0,g.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),g.iOSVersion=parseInt(RegExp.$1,10)):g.macOS=!0:/Android/.test(a)?g.android=!0:/Linux/.test(a)?g.linux=!0:/iP[ao]d|iPhone/i.test(a)?(g.iOS=!0,navigator.appVersion.match(/OS (\d+)/),g.iOSVersion=parseInt(RegExp.$1,10),g.iPhone=a.toLowerCase().indexOf("iphone")!==-1,g.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?g.kindle=!0:/CrOS/.test(a)&&(g.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(g.android=!1,g.iOS=!1,g.macOS=!1,g.windows=!0,g.windowsPhone=!0);var p=/Silk/.test(a);return(g.windows||g.macOS||g.linux&&!p||g.chromeOS)&&(g.desktop=!0),(g.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(g.desktop=!1),navigator.standalone&&(g.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(g.cordova=!0),window.ejecta!==void 0&&(g.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(g.node=!0),g.node&&typeof process.versions=="object"&&(g.nodeWebkit=!!process.versions["node-webkit"],g.electron=!!process.versions.electron),/Crosswalk/.test(a)&&(g.crosswalk=!0),g.pixelRatio=window.devicePixelRatio||1,g}r.exports=n()},53861:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72632),p={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function h(){if(typeof importScripts=="function")return p;var u=document.createElement("video"),d=!!u.canPlayType,l=/^no$/;try{d&&(u.canPlayType('video/ogg; codecs="theora"').replace(l,"")&&(p.ogg=!0),u.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(l,"")&&(p.h264=!0,p.mp4=!0),u.canPlayType("video/x-m4v").replace(l,"")&&(p.m4v=!0),u.canPlayType('video/webm; codecs="vp8, vorbis"').replace(l,"")&&(p.webm=!0),u.canPlayType('video/webm; codecs="vp9"').replace(l,"")&&(p.vp9=!0),u.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(l,"")&&(p.hls=!0))}catch{}return u.parentNode&&u.parentNode.removeChild(u),p.getVideoURL=function(c){Array.isArray(c)||(c=[c]);for(var m=0;m<c.length;m++){var f=a(c[m],"url",c[m]);if(f.indexOf("blob:")===0)return{url:f,type:""};var v;if(f.indexOf("data:")===0?v=f.split(",")[0].match(/\/(.*?);/):v=f.match(/\.([a-zA-Z0-9]+)($|\?)/),v=a(c[m],"type",v?v[1]:"").toLowerCase(),p[v])return{url:f,type:v}}return null},p}r.exports=h()},77290:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={os:n(36580),browser:n(1350),features:n(90185),input:n(95872),audio:n(10720),video:n(53861),fullscreen:n(33553),canvasFeatures:n(98581)}},65246:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new Float32Array(20),h=new a({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(u){return this._matrix.set(u),this._dirty=!0,this},reset:function(){var u=this._matrix;return u.fill(0),u[0]=1,u[6]=1,u[12]=1,u[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var u=this._data;return this._dirty&&(u.set(this._matrix),u[4]/=255,u[9]/=255,u[14]/=255,u[19]/=255,this._dirty=!1),u},brightness:function(u,d){u===void 0&&(u=0),d===void 0&&(d=!1);var l=u;return this.multiply([l,0,0,0,0,0,l,0,0,0,0,0,l,0,0,0,0,0,1,0],d)},saturate:function(u,d){u===void 0&&(u=0),d===void 0&&(d=!1);var l=u*2/3+1,c=(l-1)*-.5;return this.multiply([l,c,c,0,0,c,l,c,0,0,c,c,l,0,0,0,0,0,1,0],d)},desaturate:function(u){return u===void 0&&(u=!1),this.saturate(-1,u)},hue:function(u,d){u===void 0&&(u=0),d===void 0&&(d=!1),u=u/180*Math.PI;var l=Math.cos(u),c=Math.sin(u),m=.213,f=.715,v=.072;return this.multiply([m+l*(1-m)+c*-m,f+l*-f+c*-f,v+l*-v+c*(1-v),0,0,m+l*-m+c*.143,f+l*(1-f)+c*.14,v+l*-v+c*-.283,0,0,m+l*-m+c*-(1-m),f+l*-f+c*f,v+l*(1-v)+c*v,0,0,0,0,0,1,0],d)},grayscale:function(u,d){return u===void 0&&(u=1),d===void 0&&(d=!1),this.saturate(-u,d)},blackWhite:function(u){return u===void 0&&(u=!1),this.multiply(h.BLACK_WHITE,u)},contrast:function(u,d){u===void 0&&(u=0),d===void 0&&(d=!1);var l=u+1,c=-.5*(l-1);return this.multiply([l,0,0,0,c,0,l,0,0,c,0,0,l,0,c,0,0,0,1,0],d)},negative:function(u){return u===void 0&&(u=!1),this.multiply(h.NEGATIVE,u)},desaturateLuminance:function(u){return u===void 0&&(u=!1),this.multiply(h.DESATURATE_LUMINANCE,u)},sepia:function(u){return u===void 0&&(u=!1),this.multiply(h.SEPIA,u)},night:function(u,d){return u===void 0&&(u=.1),d===void 0&&(d=!1),this.multiply([u*-2,-u,0,0,0,-u,0,u,0,0,0,u,u*2,0,0,0,0,0,1,0],d)},lsd:function(u){return u===void 0&&(u=!1),this.multiply(h.LSD,u)},brown:function(u){return u===void 0&&(u=!1),this.multiply(h.BROWN,u)},vintagePinhole:function(u){return u===void 0&&(u=!1),this.multiply(h.VINTAGE,u)},kodachrome:function(u){return u===void 0&&(u=!1),this.multiply(h.KODACHROME,u)},technicolor:function(u){return u===void 0&&(u=!1),this.multiply(h.TECHNICOLOR,u)},polaroid:function(u){return u===void 0&&(u=!1),this.multiply(h.POLAROID,u)},shiftToBGR:function(u){return u===void 0&&(u=!1),this.multiply(h.SHIFT_BGR,u)},multiply:function(u,d){d===void 0&&(d=!1),d||this.reset();var l=this._matrix,c=p;return c.set(l),l.set([c[0]*u[0]+c[1]*u[5]+c[2]*u[10]+c[3]*u[15],c[0]*u[1]+c[1]*u[6]+c[2]*u[11]+c[3]*u[16],c[0]*u[2]+c[1]*u[7]+c[2]*u[12]+c[3]*u[17],c[0]*u[3]+c[1]*u[8]+c[2]*u[13]+c[3]*u[18],c[0]*u[4]+c[1]*u[9]+c[2]*u[14]+c[3]*u[19]+c[4],c[5]*u[0]+c[6]*u[5]+c[7]*u[10]+c[8]*u[15],c[5]*u[1]+c[6]*u[6]+c[7]*u[11]+c[8]*u[16],c[5]*u[2]+c[6]*u[7]+c[7]*u[12]+c[8]*u[17],c[5]*u[3]+c[6]*u[8]+c[7]*u[13]+c[8]*u[18],c[5]*u[4]+c[6]*u[9]+c[7]*u[14]+c[8]*u[19]+c[9],c[10]*u[0]+c[11]*u[5]+c[12]*u[10]+c[13]*u[15],c[10]*u[1]+c[11]*u[6]+c[12]*u[11]+c[13]*u[16],c[10]*u[2]+c[11]*u[7]+c[12]*u[12]+c[13]*u[17],c[10]*u[3]+c[11]*u[8]+c[12]*u[13]+c[13]*u[18],c[10]*u[4]+c[11]*u[9]+c[12]*u[14]+c[13]*u[19]+c[14],c[15]*u[0]+c[16]*u[5]+c[17]*u[10]+c[18]*u[15],c[15]*u[1]+c[16]*u[6]+c[17]*u[11]+c[18]*u[16],c[15]*u[2]+c[16]*u[7]+c[17]*u[12]+c[18]*u[17],c[15]*u[3]+c[16]*u[8]+c[17]*u[13]+c[18]*u[18],c[15]*u[4]+c[16]*u[9]+c[17]*u[14]+c[18]*u[19]+c[19]]),this._dirty=!0,this}});h.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],h.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],h.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],h.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],h.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],h.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],h.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],h.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],h.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],h.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],h.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],r.exports=h},39298:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72283),h=new a({initialize:function(d,l,c){this._rgb=[0,0,0],this.onChangeCallback=p,this.dirty=!1,this.set(d,l,c)},set:function(u,d,l){return u===void 0&&(u=0),d===void 0&&(d=0),l===void 0&&(l=0),this._rgb=[u,d,l],this.onChange(),this},equals:function(u,d,l){var c=this._rgb;return c[0]===u&&c[1]===d&&c[2]===l},onChange:function(){this.dirty=!0;var u=this._rgb;this.onChangeCallback.call(this,u[0],u[1],u[2])},r:{get:function(){return this._rgb[0]},set:function(u){this._rgb[0]=u,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(u){this._rgb[1]=u,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(u){this._rgb[2]=u,this.onChange()}},destroy:function(){this.onChangeCallback=null}});r.exports=h},84093:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};r.exports=g},32058:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(97328),p=n(59994),h=n(73174),u=n(28417),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,p(c)+m),h(l,a(c)+f),l};r.exports=d},85535:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(97328),p=n(40163),h=n(73174),u=n(74465),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,p(c)-m),h(l,a(c)+f),l};r.exports=d},9605:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(97328),p=n(70271),h=n(73174),u=n(19298),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,p(c)+m),h(l,a(c)+f),l};r.exports=d},22529:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(21843),p=n(59994),h=n(29568),u=function(d,l,c,m){return c===void 0&&(c=0),m===void 0&&(m=0),a(d,p(l)+c,h(l)+m),d};r.exports=u},5739:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(29568),p=n(40163),h=n(81711),u=n(74465),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,p(c)-m),h(l,a(c)+f),l};r.exports=d},40327:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(84093),p=[];p[a.BOTTOM_CENTER]=n(32058),p[a.BOTTOM_LEFT]=n(85535),p[a.BOTTOM_RIGHT]=n(9605),p[a.CENTER]=n(22529),p[a.LEFT_CENTER]=n(5739),p[a.RIGHT_CENTER]=n(27683),p[a.TOP_CENTER]=n(96439),p[a.TOP_LEFT]=n(81447),p[a.TOP_RIGHT]=n(47888),p[a.LEFT_BOTTOM]=p[a.BOTTOM_LEFT],p[a.LEFT_TOP]=p[a.TOP_LEFT],p[a.RIGHT_BOTTOM]=p[a.BOTTOM_RIGHT],p[a.RIGHT_TOP]=p[a.TOP_RIGHT];var h=function(u,d,l,c,m){return p[l](u,d,c,m)};r.exports=h},27683:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(29568),p=n(70271),h=n(81711),u=n(19298),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,p(c)+m),h(l,a(c)+f),l};r.exports=d},96439:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(59994),p=n(47196),h=n(28417),u=n(84349),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),h(l,a(c)+m),u(l,p(c)-f),l};r.exports=d},81447:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(40163),p=n(47196),h=n(74465),u=n(84349),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),h(l,a(c)-m),u(l,p(c)-f),l};r.exports=d},47888:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(70271),p=n(47196),h=n(19298),u=n(84349),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),h(l,a(c)+m),u(l,p(c)-f),l};r.exports=d},46997:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BottomCenter:n(32058),BottomLeft:n(85535),BottomRight:n(9605),Center:n(22529),LeftCenter:n(5739),QuickSet:n(40327),RightCenter:n(27683),TopCenter:n(96439),TopLeft:n(81447),TopRight:n(47888)}},93545:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(84093),p=n(98611),h={In:n(46997),To:n(86639)};h=p(!1,h,a),r.exports=h},27118:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(97328),p=n(59994),h=n(28417),u=n(84349),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),h(l,p(c)+m),u(l,a(c)+f),l};r.exports=d},84469:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(97328),p=n(40163),h=n(74465),u=n(84349),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),h(l,p(c)-m),u(l,a(c)+f),l};r.exports=d},51577:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(97328),p=n(70271),h=n(19298),u=n(84349),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),h(l,p(c)+m),u(l,a(c)+f),l};r.exports=d},90271:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(97328),p=n(40163),h=n(73174),u=n(19298),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,p(c)-m),h(l,a(c)+f),l};r.exports=d},30466:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(29568),p=n(40163),h=n(81711),u=n(19298),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,p(c)-m),h(l,a(c)+f),l};r.exports=d},50087:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(40163),p=n(47196),h=n(19298),u=n(84349),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),h(l,a(c)-m),u(l,p(c)-f),l};r.exports=d},82590:(r,g,n)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(84093),p=[];p[a.BOTTOM_CENTER]=n(27118),p[a.BOTTOM_LEFT]=n(84469),p[a.BOTTOM_RIGHT]=n(51577),p[a.LEFT_BOTTOM]=n(90271),p[a.LEFT_CENTER]=n(30466),p[a.LEFT_TOP]=n(50087),p[a.RIGHT_BOTTOM]=n(13555),p[a.RIGHT_CENTER]=n(99049),p[a.RIGHT_TOP]=n(67788),p[a.TOP_CENTER]=n(78170),p[a.TOP_LEFT]=n(54145),p[a.TOP_RIGHT]=n(75548);var h=function(u,d,l,c,m){return p[l](u,d,c,m)};r.exports=h},13555:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(97328),p=n(70271),h=n(73174),u=n(74465),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,p(c)+m),h(l,a(c)+f),l};r.exports=d},99049:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(29568),p=n(70271),h=n(81711),u=n(74465),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,p(c)+m),h(l,a(c)+f),l};r.exports=d},67788:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(70271),p=n(47196),h=n(74465),u=n(84349),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),h(l,a(c)+m),u(l,p(c)-f),l};r.exports=d},78170:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(59994),p=n(47196),h=n(73174),u=n(28417),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,a(c)+m),h(l,p(c)-f),l};r.exports=d},54145:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(40163),p=n(47196),h=n(73174),u=n(74465),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,a(c)-m),h(l,p(c)-f),l};r.exports=d},75548:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(70271),p=n(47196),h=n(73174),u=n(19298),d=function(l,c,m,f){return m===void 0&&(m=0),f===void 0&&(f=0),u(l,a(c)+m),h(l,p(c)-f),l};r.exports=d},86639:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BottomCenter:n(27118),BottomLeft:n(84469),BottomRight:n(51577),LeftBottom:n(90271),LeftCenter:n(30466),LeftTop:n(50087),QuickSet:n(82590),RightBottom:n(13555),RightCenter:n(99049),RightTop:n(67788),TopCenter:n(78170),TopLeft:n(54145),TopRight:n(75548)}},21843:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(28417),p=n(81711),h=function(u,d,l){return a(u,d),p(u,l)};r.exports=h},97328:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.y+n.height-n.height*n.originY};r.exports=g},7126:(r,g,n)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(97328),p=n(40163),h=n(70271),u=n(47196),d=n(74118),l=function(c,m){m===void 0&&(m=new d);var f=p(c),v=u(c);return m.x=f,m.y=v,m.width=h(c)-f,m.height=a(c)-v,m};r.exports=l},59994:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.x-n.width*n.originX+n.width*.5};r.exports=g},29568:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.y-n.height*n.originY+n.height*.5};r.exports=g},40163:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.x-n.width*n.originX};r.exports=g},52088:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.width*n.originX};r.exports=g},23379:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.height*n.originY};r.exports=g},70271:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.x+n.width-n.width*n.originX};r.exports=g},47196:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.y-n.height*n.originY};r.exports=g},73174:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.y=a-n.height+n.height*n.originY,n};r.exports=g},28417:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.width*n.originX;return n.x=a+p-n.width*.5,n};r.exports=g},81711:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.height*n.originY;return n.y=a+p-n.height*.5,n};r.exports=g},74465:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x=a+n.width*n.originX,n};r.exports=g},19298:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x=a-n.width+n.width*n.originX,n};r.exports=g},84349:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.y=a+n.height*n.originY,n};r.exports=g},15252:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CenterOn:n(21843),GetBottom:n(97328),GetBounds:n(7126),GetCenterX:n(59994),GetCenterY:n(29568),GetLeft:n(40163),GetOffsetX:n(52088),GetOffsetY:n(23379),GetRight:n(70271),GetTop:n(47196),SetBottom:n(73174),SetCenterX:n(28417),SetCenterY:n(81711),SetLeft:n(74465),SetRight:n(19298),SetTop:n(84349)}},70616:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setCrisp:function(n){var a=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return a.forEach(function(p){n.style["image-rendering"]=p}),n.style.msInterpolationMode="nearest-neighbor",n},setBicubic:function(n){return n.style["image-rendering"]="auto",n.style.msInterpolationMode="bicubic",n}};r.exports=g},61068:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(86459),p=n(8213),h=[],u=!1,d=function(){var l=function(w,b,E,A,I){b===void 0&&(b=1),E===void 0&&(E=1),A===void 0&&(A=a.CANVAS),I===void 0&&(I=!1);var R,N=f(A);return N===null?(N={parent:w,canvas:document.createElement("canvas"),type:A},A===a.CANVAS&&h.push(N),R=N.canvas):(N.parent=w,R=N.canvas),I&&(N.parent=R),R.width=b,R.height=E,u&&A===a.CANVAS&&p.disable(R.getContext("2d",{willReadFrequently:!1})),R},c=function(w,b,E){return l(w,b,E,a.CANVAS)},m=function(w,b,E){return l(w,b,E,a.WEBGL)},f=function(w){if(w===void 0&&(w=a.CANVAS),w===a.WEBGL)return null;for(var b=0;b<h.length;b++){var E=h[b];if(!E.parent&&E.type===w)return E}return null},v=function(w){var b=w instanceof HTMLCanvasElement;h.forEach(function(E){(b&&E.canvas===w||!b&&E.parent===w)&&(E.parent=null,E.canvas.width=1,E.canvas.height=1)})},S=function(){var w=0;return h.forEach(function(b){b.parent&&w++}),w},x=function(){return h.length-S()},T=function(){u=!0},C=function(){u=!1};return{create2D:c,create:l,createWebGL:m,disableSmoothing:T,enableSmoothing:C,first:f,free:x,pool:h,remove:v,total:S}};r.exports=d()},8213:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g="",n=function(){var a=function(d){for(var l=["i","webkitI","msI","mozI","oI"],c=0;c<l.length;c++){var m=l[c]+"mageSmoothingEnabled";if(m in d)return m}return null},p=function(d){return g===""&&(g=a(d)),g&&(d[g]=!0),d},h=function(d){return g===""&&(g=a(d)),g&&(d[g]=!1),d},u=function(d){return g!==null?d[g]:null};return{disable:h,enable:p,getPrefix:a,isEnabled:u}};r.exports=n()},59271:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a===void 0&&(a="none"),n.style.msTouchAction=a,n.style["ms-touch-action"]=a,n.style["touch-action"]=a,n};r.exports=g},36505:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a===void 0&&(a="none");var p=["-webkit-","-khtml-","-moz-","-ms-",""];return p.forEach(function(h){n.style[h+"user-select"]=a}),n.style["-webkit-touch-callout"]=a,n.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",n};r.exports=g},23514:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CanvasInterpolation:n(70616),CanvasPool:n(61068),Smoothing:n(8213),TouchAction:n(59271),UserSelect:n(36505)}},27119:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(22946),h=n(5657),u=n(24650),d=n(68033),l=new a({initialize:function(m,f,v,S){m===void 0&&(m=0),f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(m,f,v,S)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(c,m,f,v,S){return v===void 0&&(v=255),S===void 0&&(S=!0),this._locked=!0,this.red=c,this.green=m,this.blue=f,this.alpha=v,this._locked=!1,this.update(S)},setGLTo:function(c,m,f,v){return v===void 0&&(v=1),this._locked=!0,this.redGL=c,this.greenGL=m,this.blueGL=f,this.alphaGL=v,this._locked=!1,this.update(!0)},setFromRGB:function(c){return this._locked=!0,this.red=c.r,this.green=c.g,this.blue=c.b,c.hasOwnProperty("a")&&(this.alpha=c.a),this._locked=!1,this.update(!0)},setFromHSV:function(c,m,f){return u(c,m,f,this)},update:function(c){if(c===void 0&&(c=!1),this._locked)return this;var m=this.r,f=this.g,v=this.b,S=this.a;return this._color=p(m,f,v),this._color32=h(m,f,v,S),this._rgba="rgba("+m+","+f+","+v+","+S/255+")",c&&d(m,f,v,this),this},updateHSV:function(){var c=this.r,m=this.g,f=this.b;return d(c,m,f,this),this},clone:function(){return new l(this.r,this.g,this.b,this.a)},gray:function(c){return this.setTo(c,c,c)},random:function(c,m){c===void 0&&(c=0),m===void 0&&(m=255);var f=Math.floor(c+Math.random()*(m-c)),v=Math.floor(c+Math.random()*(m-c)),S=Math.floor(c+Math.random()*(m-c));return this.setTo(f,v,S)},randomGray:function(c,m){c===void 0&&(c=0),m===void 0&&(m=255);var f=Math.floor(c+Math.random()*(m-c));return this.setTo(f,f,f)},saturate:function(c){return this.s+=c/100,this},desaturate:function(c){return this.s-=c/100,this},lighten:function(c){return this.v+=c/100,this},darken:function(c){return this.v-=c/100,this},brighten:function(c){var m=this.r,f=this.g,v=this.b;return m=Math.max(0,Math.min(255,m-Math.round(255*-(c/100)))),f=Math.max(0,Math.min(255,f-Math.round(255*-(c/100)))),v=Math.max(0,Math.min(255,v-Math.round(255*-(c/100)))),this.setTo(m,f,v)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(c){this.gl[0]=Math.min(Math.abs(c),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(c){this.gl[1]=Math.min(Math.abs(c),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(c){this.gl[2]=Math.min(Math.abs(c),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(c){this.gl[3]=Math.min(Math.abs(c),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(c){c=Math.floor(Math.abs(c)),this.r=Math.min(c,255),this.gl[0]=c/255,this.update(!0)}},green:{get:function(){return this.g},set:function(c){c=Math.floor(Math.abs(c)),this.g=Math.min(c,255),this.gl[1]=c/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(c){c=Math.floor(Math.abs(c)),this.b=Math.min(c,255),this.gl[2]=c/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(c){c=Math.floor(Math.abs(c)),this.a=Math.min(c,255),this.gl[3]=c/255,this.update()}},h:{get:function(){return this._h},set:function(c){this._h=c,u(c,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(c){this._s=c,u(this._h,c,this._v,this)}},v:{get:function(){return this._v},set:function(c){this._v=c,u(this._h,this._s,c,this)}}});r.exports=l},30245:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(22946),p=function(h){h===void 0&&(h=1024);var u=[],d=255,l,c=255,m=0,f=0;for(l=0;l<=d;l++)u.push({r:c,g:l,b:f,color:a(c,l,f)});for(m=255,l=d;l>=0;l--)u.push({r:l,g:m,b:f,color:a(l,m,f)});for(c=0,l=0;l<=d;l++,m--)u.push({r:c,g:m,b:l,color:a(c,m,l)});for(m=0,f=255,l=0;l<=d;l++,f--,c++)u.push({r:c,g:m,b:f,color:a(c,m,f)});if(h===1024)return u;var v=[],S=0,x=1024/h;for(l=0;l<h;l++)v.push(u[Math.floor(S)]),S+=x;return v};r.exports=p},86672:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a={r:n>>16&255,g:n>>8&255,b:n&255,a:255};return n>16777215&&(a.a=n>>>24),a};r.exports=g},25409:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a=n.toString(16);return a.length===1?"0"+a:a};r.exports=g},22946:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n<<16|a<<8|p};r.exports=g},5657:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){return h<<24|n<<16|a<<8|p};r.exports=g},74777:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(27119),p=n(59998),h=function(u,d,l){var c=l,m=l,f=l;if(d!==0){var v=l<.5?l*(1+d):l+d-l*d,S=2*l-v;c=p(S,v,u+1/3),m=p(S,v,u),f=p(S,v,u-1/3)}var x=new a;return x.setGLTo(c,m,f,1)};r.exports=h},89263:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(24650),p=function(h,u){h===void 0&&(h=1),u===void 0&&(u=1);for(var d=[],l=0;l<=359;l++)d.push(a(l/359,h,u));return d};r.exports=p},24650:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(22946);function p(u,d,l,c){var m=(u+d*6)%6,f=Math.min(m,4-m,1);return Math.round(255*(c-c*l*Math.max(0,f)))}var h=function(u,d,l,c){d===void 0&&(d=1),l===void 0&&(l=1);var m=p(5,u,d,l),f=p(3,u,d,l),v=p(1,u,d,l);return c?c.setTo?c.setTo(m,f,v,c.alpha,!0):(c.r=m,c.g=f,c.b=v,c.color=a(m,f,v),c):{r:m,g:f,b:v,color:a(m,f,v)}};r.exports=h},91487:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(27119),p=function(h){var u=new a;h=h.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(f,v,S,x){return v+v+S+S+x+x});var d=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);if(d){var l=parseInt(d[1],16),c=parseInt(d[2],16),m=parseInt(d[3],16);u.setTo(l,c,m)}return u};r.exports=p},59998:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return p<0&&(p+=1),p>1&&(p-=1),p<.16666666666666666?n+(a-n)*6*p:p<.5?a:p<.6666666666666666?n+(a-n)*(.6666666666666666-p)*6:n};r.exports=g},74853:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(27119),p=n(15978),h=function(u){var d=p(u);return new a(d.r,d.g,d.b,d.a)};r.exports=h},15978:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n>16777215?{a:n>>>24,r:n>>16&255,g:n>>8&255,b:n&255}:{a:255,r:n>>16&255,g:n>>8&255,b:n&255}};r.exports=g},53756:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(42798),p=function(d,l,c,m,f,v,S,x){S===void 0&&(S=100),x===void 0&&(x=0);var T=x/S;return{r:a(d,m,T),g:a(l,f,T),b:a(c,v,T)}},h=function(d,l,c,m){return c===void 0&&(c=100),m===void 0&&(m=0),p(d.r,d.g,d.b,l.r,l.g,l.b,c,m)},u=function(d,l,c,m,f,v){return f===void 0&&(f=100),v===void 0&&(v=0),p(d.r,d.g,d.b,l,c,m,f,v)};r.exports={RGBWithRGB:p,ColorWithRGB:u,ColorWithColor:h}},73904:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(27119),p=function(h){return new a(h.r,h.g,h.b,h.a)};r.exports=p},26841:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(27119),p=function(h){var u=new a,d=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(h.toLowerCase());if(d){var l=parseInt(d[1],10),c=parseInt(d[2],10),m=parseInt(d[3],10),f=d[4]!==void 0?parseFloat(d[4]):1;u.setTo(l,c,m,f*255)}return u};r.exports=p},68033:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){h===void 0&&(h={h:0,s:0,v:0}),n/=255,a/=255,p/=255;var u=Math.min(n,a,p),d=Math.max(n,a,p),l=d-u,c=0,m=d===0?0:l/d,f=d;return d!==u&&(d===n?c=(a-p)/l+(a<p?6:0):d===a?c=(p-n)/l+2:d===p&&(c=(n-a)/l+4),c/=6),h.hasOwnProperty("_h")?(h._h=c,h._s=m,h._v=f):(h.h=c,h.s=m,h.v=f),h};r.exports=g},4880:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(25409),p=function(h,u,d,l,c){return l===void 0&&(l=255),c===void 0&&(c="#"),c==="#"?"#"+((1<<24)+(h<<16)+(u<<8)+d).toString(16).slice(1,7):"0x"+a(l)+a(h)+a(u)+a(d)};r.exports=p},37243:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(17489),p=n(27119),h=function(u,d){return u===void 0&&(u=0),d===void 0&&(d=255),new p(a(u,d),a(u,d),a(u,d))};r.exports=h},93222:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(91487),p=n(74853),h=n(73904),u=n(26841),d=function(l){var c=typeof l;switch(c){case"string":return l.substr(0,3).toLowerCase()==="rgb"?u(l):a(l);case"number":return p(l);case"object":return h(l)}};r.exports=d},95509:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(27119);a.ColorSpectrum=n(30245),a.ColorToRGBA=n(86672),a.ComponentToHex=n(25409),a.GetColor=n(22946),a.GetColor32=n(5657),a.HexStringToColor=n(91487),a.HSLToColor=n(74777),a.HSVColorWheel=n(89263),a.HSVToRGB=n(24650),a.HueToComponent=n(59998),a.IntegerToColor=n(74853),a.IntegerToRGB=n(15978),a.Interpolate=n(53756),a.ObjectToColor=n(73904),a.RandomRGB=n(37243),a.RGBStringToColor=n(26841),a.RGBToHSV=n(68033),a.RGBToString=n(4880),a.ValueToColor=n(93222),r.exports=a},24816:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Align:n(93545),BaseShader:n(31053),Bounds:n(15252),Canvas:n(23514),Color:n(95509),ColorMatrix:n(65246),Masks:n(93310),RGB:n(39298)}},76756:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(61286),h=new a({initialize:function(d,l,c,m,f,v){l||(l=d.sys.make.image({x:c,y:m,key:f,frame:v,add:!1})),this.bitmapMask=l,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(u){this.bitmapMask=u},preRenderWebGL:function(u,d,l){u.pipelines.BITMAPMASK_PIPELINE.beginMask(this,d,l)},postRenderWebGL:function(u,d,l){u.pipelines.BITMAPMASK_PIPELINE.endMask(this,d,l)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});p.register("bitmapMask",function(u,d,l,c,m){return new h(this.scene,u,d,l,c,m)}),r.exports=h},63037:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d){this.geometryMask=d,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(h){return this.geometryMask=h,this},setInvertAlpha:function(h){return h===void 0&&(h=!0),this.invertAlpha=h,this},preRenderWebGL:function(h,u,d){var l=h.gl;h.flush(),h.maskStack.length===0&&(l.enable(l.STENCIL_TEST),l.clear(l.STENCIL_BUFFER_BIT),h.maskCount=0),h.currentCameraMask.mask!==this&&(h.currentMask.mask=this),h.maskStack.push({mask:this,camera:d}),this.applyStencil(h,d,!0),h.maskCount++},applyStencil:function(h,u,d){var l=h.gl,c=this.geometryMask,m=h.maskCount,f=255;l.colorMask(!1,!1,!1,!1),d?(l.stencilFunc(l.EQUAL,m,f),l.stencilOp(l.KEEP,l.KEEP,l.INCR),m++):(l.stencilFunc(l.EQUAL,m+1,f),l.stencilOp(l.KEEP,l.KEEP,l.DECR)),this.level=m,c.renderWebGL(h,c,u),h.flush(),l.colorMask(!0,!0,!0,!0),l.stencilOp(l.KEEP,l.KEEP,l.KEEP),this.invertAlpha?l.stencilFunc(l.NOTEQUAL,m,f):l.stencilFunc(l.EQUAL,m,f)},postRenderWebGL:function(h){var u=h.gl;h.maskStack.pop(),h.maskCount--,h.flush();var d=h.currentMask;if(h.maskStack.length===0)d.mask=null,u.disable(u.STENCIL_TEST);else{var l=h.maskStack[h.maskStack.length-1];l.mask.applyStencil(h,l.camera,!1),h.currentCameraMask.mask!==l.mask?(d.mask=l.mask,d.camera=l.camera):d.mask=null}},preRenderCanvas:function(h,u,d){var l=this.geometryMask;h.currentContext.save(),l.renderCanvas(h,l,d,null,null,!0),h.currentContext.clip()},postRenderCanvas:function(h){h.currentContext.restore()},destroy:function(){this.geometryMask=null}});r.exports=p},93310:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BitmapMask:n(76756),GeometryMask:n(63037)}},31053:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d,l,c){(!d||d==="")&&(d=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!l||l==="")&&(l=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),c===void 0&&(c=null),this.key=u,this.fragmentSrc=d,this.vertexSrc=l,this.uniforms=c}});r.exports=p},99584:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p;if(a)typeof a=="string"?p=document.getElementById(a):typeof a=="object"&&a.nodeType===1&&(p=a);else if(n.parentElement||a===null)return n;return p||(p=document.body),p.appendChild(n),n};r.exports=g},85178:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(99584),p=function(h){var u=h.config;if(!(!u.parent||!u.domCreateContainer)){var d=document.createElement("div");d.style.cssText=["display: block;","width: "+h.scale.width+"px;","height: "+h.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+u.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),h.domContainer=d,a(d,u.parent)}};r.exports=p},21546:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(36580),p=function(h){if(document.readyState==="complete"||document.readyState==="interactive"){h();return}var u=function(){document.removeEventListener("deviceready",u,!0),document.removeEventListener("DOMContentLoaded",u,!0),window.removeEventListener("load",u,!0),h()};document.body?a.cordova?document.addEventListener("deviceready",u,!1):(document.addEventListener("DOMContentLoaded",u,!0),window.addEventListener("load",u,!0)):window.setTimeout(u,20)};r.exports=p},74181:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){if(!n)return window.innerHeight;var a=Math.abs(window.orientation),p={w:0,h:0},h=document.createElement("div");return h.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(h),p.w=a===90?h.offsetHeight:window.innerWidth,p.h=a===90?window.innerWidth:h.offsetHeight,document.documentElement.removeChild(h),h=null,Math.abs(window.orientation)!==90?p.h:p.w};r.exports=g},9229:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(55301),p=function(h,u){var d=window.screen,l=d?d.orientation||d.mozOrientation||d.msOrientation:!1;if(l&&typeof l.type=="string")return l.type;if(typeof l=="string")return l;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return a.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return a.ORIENTATION.LANDSCAPE}else return u>h?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE};r.exports=p},2893:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a;return n!==""&&(typeof n=="string"?a=document.getElementById(n):n&&n.nodeType===1&&(a=n)),a||(a=document.body),a};r.exports=g},89200:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a="";try{if(window.DOMParser){var p=new DOMParser;a=p.parseFromString(n,"text/xml")}else a=new ActiveXObject("Microsoft.XMLDOM"),a.loadXML(n)}catch{a=null}return!a||!a.documentElement||a.getElementsByTagName("parsererror").length?null:a};r.exports=g},55638:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){n.parentNode&&n.parentNode.removeChild(n)};r.exports=g},27385:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72283),h=new a({initialize:function(){this.isRunning=!1,this.callback=p,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var d=this;this.step=function l(c){d.callback(c),d.isRunning&&(d.timeOutID=window.requestAnimationFrame(l))},this.stepTimeout=function l(){d.isRunning&&(d.timeOutID=window.setTimeout(l,d.delay)),d.callback(window.performance.now())}},start:function(u,d,l){this.isRunning||(this.callback=u,this.isSetTimeOut=d,this.delay=l,this.isRunning=!0,this.timeOutID=d?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=p}});r.exports=h},3590:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={AddToDOM:n(99584),DOMContentLoaded:n(21546),GetInnerHeight:n(74181),GetScreenOrientation:n(9229),GetTarget:n(2893),ParseXML:n(89200),RemoveFromDOM:n(55638),RequestAnimationFrame:n(27385)};r.exports=a},78491:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(6659),h=n(91963),u=new a({Extends:p,initialize:function(){p.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});h.register("EventEmitter",u,"events"),r.exports=u},95146:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={EventEmitter:n(78491)}},20170:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c){c===void 0&&(c=1),p.call(this,h.BARREL,l),this.amount=c}});r.exports=u},51182:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c,m,f,v,S,x){m===void 0&&(m=1),f===void 0&&(f=1),v===void 0&&(v=1),S===void 0&&(S=1),x===void 0&&(x=4),p.call(this,h.BLOOM,l),this.steps=x,this.offsetX=m,this.offsetY=f,this.blurStrength=v,this.strength=S,this.glcolor=[1,1,1],c!=null&&(this.color=c)},color:{get:function(){var d=this.glcolor;return(d[0]*255<<16)+(d[1]*255<<8)+(d[2]*255|0)},set:function(d){var l=this.glcolor;l[0]=(d>>16&255)/255,l[1]=(d>>8&255)/255,l[2]=(d&255)/255}}});r.exports=u},51498:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c,m,f,v,S,x){m===void 0&&(m=2),f===void 0&&(f=2),v===void 0&&(v=1),x===void 0&&(x=4),p.call(this,h.BLUR,l),this.quality=0,this.x=m,this.y=f,this.steps=x,this.strength=v,this.glcolor=[1,1,1],S!=null&&(this.color=S)},color:{get:function(){var d=this.glcolor;return(d[0]*255<<16)+(d[1]*255<<8)+(d[2]*255|0)},set:function(d){var l=this.glcolor;l[0]=(d>>16&255)/255,l[1]=(d>>8&255)/255,l[2]=(d&255)/255}}});r.exports=u},12042:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c,m,f,v,S,x,T){c===void 0&&(c=.5),m===void 0&&(m=1),f===void 0&&(f=.2),v===void 0&&(v=!1),S===void 0&&(S=1),x===void 0&&(x=1),T===void 0&&(T=1),p.call(this,h.BOKEH,l),this.radius=c,this.amount=m,this.contrast=f,this.isTiltShift=v,this.strength=T,this.blurX=S,this.blurY=x}});r.exports=u},69900:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c,m,f,v,S){c===void 0&&(c=8),v===void 0&&(v=1),S===void 0&&(S=.005),p.call(this,h.CIRCLE,l),this.scale=v,this.feather=S,this.thickness=c,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],m!=null&&(this.color=m),f!=null&&(this.backgroundColor=f)},color:{get:function(){var d=this.glcolor;return(d[0]*255<<16)+(d[1]*255<<8)+(d[2]*255|0)},set:function(d){var l=this.glcolor;l[0]=(d>>16&255)/255,l[1]=(d>>8&255)/255,l[2]=(d&255)/255}},backgroundColor:{get:function(){var d=this.glcolor2;return(d[0]*255<<16)+(d[1]*255<<8)+(d[2]*255|0)},set:function(d){var l=this.glcolor2;l[0]=(d>>16&255)/255,l[1]=(d>>8&255)/255,l[2]=(d&255)/255}}});r.exports=u},48991:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(65246),h=n(47406),u=new a({Extends:p,initialize:function(l){p.call(this),this.type=h.COLOR_MATRIX,this.gameObject=l,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});r.exports=u},47551:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d){this.type=u,this.gameObject=d,this.active=!0},setActive:function(h){return this.active=h,this},destroy:function(){this.gameObject=null,this.active=!1}});r.exports=p},47909:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c,m,f){c===void 0&&(c="__WHITE"),m===void 0&&(m=.005),f===void 0&&(f=.005),p.call(this,h.DISPLACEMENT,l),this.x=m,this.y=f,this.glTexture,this.setTexture(c)},setTexture:function(d){var l=this.gameObject.scene.sys.textures.getFrame(d);return l&&(this.glTexture=l.glTexture),this}});r.exports=u},18919:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c,m,f,v){m===void 0&&(m=4),f===void 0&&(f=0),v===void 0&&(v=!1),p.call(this,h.GLOW,l),this.outerStrength=m,this.innerStrength=f,this.knockout=v,this.glcolor=[1,1,1,1],c!==void 0&&(this.color=c)},color:{get:function(){var d=this.glcolor;return(d[0]*255<<16)+(d[1]*255<<8)+(d[2]*255|0)},set:function(d){var l=this.glcolor;l[0]=(d>>16&255)/255,l[1]=(d>>8&255)/255,l[2]=(d&255)/255}}});r.exports=u},62494:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c,m,f,v,S,x,T,C){f===void 0&&(f=.2),v===void 0&&(v=0),S===void 0&&(S=0),x===void 0&&(x=0),T===void 0&&(T=1),C===void 0&&(C=0),p.call(this,h.GRADIENT,l),this.alpha=f,this.size=C,this.fromX=v,this.fromY=S,this.toX=x,this.toY=T,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],c!=null&&(this.color1=c),m!=null&&(this.color2=m)},color1:{get:function(){var d=this.glcolor1;return(d[0]<<16)+(d[1]<<8)+(d[2]|0)},set:function(d){var l=this.glcolor1;l[0]=d>>16&255,l[1]=d>>8&255,l[2]=d&255}},color2:{get:function(){var d=this.glcolor2;return(d[0]<<16)+(d[1]<<8)+(d[2]|0)},set:function(d){var l=this.glcolor2;l[0]=d>>16&255,l[1]=d>>8&255,l[2]=d&255}}});r.exports=u},68897:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c){c===void 0&&(c=1),p.call(this,h.PIXELATE,l),this.amount=c}});r.exports=u},58575:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c,m,f,v,S,x,T){c===void 0&&(c=0),m===void 0&&(m=0),f===void 0&&(f=.1),v===void 0&&(v=1),x===void 0&&(x=6),T===void 0&&(T=1),p.call(this,h.SHADOW,l),this.x=c,this.y=m,this.decay=f,this.power=v,this.glcolor=[0,0,0,1],this.samples=x,this.intensity=T,S!==void 0&&(this.color=S)},color:{get:function(){var d=this.glcolor;return(d[0]*255<<16)+(d[1]*255<<8)+(d[2]*255|0)},set:function(d){var l=this.glcolor;l[0]=(d>>16&255)/255,l[1]=(d>>8&255)/255,l[2]=(d&255)/255}}});r.exports=u},33755:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c,m,f,v){c===void 0&&(c=.5),m===void 0&&(m=.5),f===void 0&&(f=3),v===void 0&&(v=!1),p.call(this,h.SHINE,l),this.speed=c,this.lineWidth=m,this.gradient=f,this.reveal=v}});r.exports=u},24949:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c,m,f,v){c===void 0&&(c=.5),m===void 0&&(m=.5),f===void 0&&(f=.5),v===void 0&&(v=.5),p.call(this,h.VIGNETTE,l),this.x=c,this.y=m,this.radius=f,this.strength=v}});r.exports=u},66241:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47551),h=n(47406),u=new a({Extends:p,initialize:function(l,c,m,f,v){c===void 0&&(c=.1),m===void 0&&(m=0),f===void 0&&(f=0),v===void 0&&(v=!1),p.call(this,h.WIPE,l),this.progress=0,this.wipeWidth=c,this.direction=m,this.axis=f,this.reveal=v}});r.exports=u},47406:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};r.exports=g},96910:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(98611),p=n(47406),h={Barrel:n(20170),Controller:n(47551),Bloom:n(51182),Blur:n(51498),Bokeh:n(12042),Circle:n(69900),ColorMatrix:n(48991),Displacement:n(47909),Glow:n(18919),Gradient:n(62494),Pixelate:n(68897),Shadow:n(58575),Shine:n(33755),Vignette:n(24949),Wipe:n(66241)};h=a(!1,h,p),r.exports=h},88933:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(95723),p=n(20494),h=function(u,d,l){d.x=p(l,"x",0),d.y=p(l,"y",0),d.depth=p(l,"depth",0),d.flipX=p(l,"flipX",!1),d.flipY=p(l,"flipY",!1);var c=p(l,"scale",null);typeof c=="number"?d.setScale(c):c!==null&&(d.scaleX=p(c,"x",1),d.scaleY=p(c,"y",1));var m=p(l,"scrollFactor",null);typeof m=="number"?d.setScrollFactor(m):m!==null&&(d.scrollFactorX=p(m,"x",1),d.scrollFactorY=p(m,"y",1)),d.rotation=p(l,"rotation",0);var f=p(l,"angle",null);f!==null&&(d.angle=f),d.alpha=p(l,"alpha",1);var v=p(l,"origin",null);if(typeof v=="number")d.setOrigin(v);else if(v!==null){var S=p(v,"x",.5),x=p(v,"y",.5);d.setOrigin(S,x)}d.blendMode=p(l,"blendMode",a.NORMAL),d.visible=p(l,"visible",!0);var T=p(l,"add",!0);return T&&u.sys.displayList.add(d),d.preUpdate&&u.sys.updateList.add(d),d};r.exports=h},32291:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(20494),p=function(h,u){var d=a(u,"anims",null);if(d===null)return h;if(typeof d=="string")h.anims.play(d);else if(typeof d=="object"){var l=h.anims,c=a(d,"key",void 0);if(c){var m=a(d,"startFrame",void 0),f=a(d,"delay",0),v=a(d,"repeat",0),S=a(d,"repeatDelay",0),x=a(d,"yoyo",!1),T=a(d,"play",!1),C=a(d,"delayedPlay",0),w={key:c,delay:f,repeat:v,repeatDelay:S,yoyo:x,startFrame:m};T?l.play(w):C>0?l.playAfterDelay(w,C):l.load(w)}}return h};r.exports=p},91713:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(71207),h=n(91963),u=n(56631),d=n(7599),l=n(17922),c=new a({Extends:p,initialize:function(f){p.call(this,f),this.sortChildrenFlag=!1,this.scene=f,this.systems=f.sys,this.events=f.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(d.BOOT,this.boot,this),this.events.on(d.START,this.start,this)},boot:function(){this.events.once(d.DESTROY,this.destroy,this)},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.parentContainer&&m.parentContainer.remove(m),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(u.ADDED_TO_SCENE,m,this.scene),this.events.emit(d.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(u.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(d.REMOVED_FROM_SCENE,m,this.scene)},start:function(){this.events.once(d.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(l(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,f){return m._depth-f._depth},getChildren:function(){return this.list},shutdown:function(){for(var m=this.list;m.length;)m[0].destroy(!0);this.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});h.register("DisplayList",c,"displayList"),r.exports=c},89980:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(48129),h=n(81078),u=n(6659),d=n(56631),l=n(7599),c=new a({Extends:u,initialize:function(f,v){u.call(this),this.scene=f,this.displayList=null,this.type=v,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(d.ADDED_TO_SCENE,this.addedToScene,this),this.on(d.REMOVED_FROM_SCENE,this.removedFromScene,this),f.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(m,f){return this.data||(this.data=new h(this)),this.data.set(m,f),this},incData:function(m,f){return this.data||(this.data=new h(this)),this.data.inc(m,f),this},toggleData:function(m){return this.data||(this.data=new h(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new h(this)),this.data.get(m)},setInteractive:function(m,f,v){return this.scene.sys.input.enable(this,m,f,v),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return p(this)},willRender:function(m){var f=this.displayList&&this.displayList.active?this.displayList.willRender(m):!0;return!(!f||c.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,f=this.parentContainer,v=[];f&&(v.unshift(f.getIndex(m)),m=f,f.parentContainer);)f=f.parentContainer;return this.displayList?v.unshift(this.displayList.getIndex(m)):v.unshift(this.scene.sys.displayList.getIndex(m)),v},addToDisplayList:function(m){return m===void 0&&(m=this.scene.sys.displayList),this.displayList&&this.displayList!==m&&this.removeFromDisplayList(),m.exists(this)||(this.displayList=m,m.add(this,!0),m.queueDepthSort(),this.emit(d.ADDED_TO_SCENE,this,this.scene),m.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var m=this.displayList||this.scene.sys.displayList;return m&&m.exists(this)&&(m.remove(this,!0),m.queueDepthSort(),this.displayList=null,this.emit(d.REMOVED_FROM_SCENE,this,this.scene),m.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(m){!this.scene||this.ignoreDestroy||(m===void 0&&(m=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(d.DESTROY,this,m),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});c.RENDER_MASK=15,r.exports=c},99325:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(91963),h=n(7599),u=new a({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(d,l){u.prototype.hasOwnProperty(d)||(u.prototype[d]=l)},u.remove=function(d){u.prototype.hasOwnProperty(d)&&delete u.prototype[d]},p.register("GameObjectCreator",u,"make"),r.exports=u},61286:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(91963),h=n(7599),u=new a({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},existing:function(d){return(d.renderCanvas||d.renderWebGL)&&this.displayList.add(d),d.preUpdate&&this.updateList.add(d),d},shutdown:function(){this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(d,l){u.prototype.hasOwnProperty(d)||(u.prototype[d]=l)},u.remove=function(d){u.prototype.hasOwnProperty(d)&&delete u.prototype[d]},p.register("GameObjectFactory",u,"add"),r.exports=u},73329:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(69360),p=new a,h=new a,u=new a,d={camera:p,sprite:h,calc:u},l=function(c,m,f){var v=p,S=h,x=u;return S.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY),v.copyFrom(m.matrix),f?(v.multiplyWithOffset(f,-m.scrollX*c.scrollFactorX,-m.scrollY*c.scrollFactorY),S.e=c.x,S.f=c.y):(S.e-=m.scrollX*c.scrollFactorX,S.f-=m.scrollY*c.scrollFactorY),v.multiply(S,x),d};r.exports=l},92034:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(74623),h=n(91963),u=n(7599),d=new a({Extends:p,initialize:function(c){p.call(this),this.checkQueue=!0,this.scene=c,this.systems=c.sys,c.sys.events.once(u.BOOT,this.boot,this),c.sys.events.on(u.START,this.start,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){var l=this.systems.events;l.on(u.PRE_UPDATE,this.update,this),l.on(u.UPDATE,this.sceneUpdate,this),l.once(u.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(l,c){for(var m=this._active,f=m.length,v=0;v<f;v++){var S=m[v];S.active&&S.preUpdate.call(S,l,c)}},shutdown:function(){for(var l=this._active.length;l--;)this._active[l].destroy(!0);for(l=this._pending.length;l--;)this._pending[l].destroy(!0);for(l=this._destroy.length;l--;)this._destroy[l].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var c=this.systems.events;c.off(u.PRE_UPDATE,this.update,this),c.off(u.UPDATE,this.sceneUpdate,this),c.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});h.register("UpdateList",d,"updateList"),r.exports=d},8810:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u,d,l,c,m,f,v,S,x,T,C){var w=p.x-a.displayOriginX+u,b=p.y-a.displayOriginY+d,E=w+p.w,A=b+p.h,I=l.getXRound(w,b,c),R=l.getYRound(w,b,c),N=l.getXRound(w,A,c),F=l.getYRound(w,A,c),P=l.getXRound(E,A,c),D=l.getYRound(E,A,c),M=l.getXRound(E,b,c),L=l.getYRound(E,b,c);n.batchQuad(a,I,R,N,F,P,D,M,L,h.u0,h.v0,h.u1,h.v1,m,f,v,S,x,T,C)};r.exports=g},82173:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){if(p===void 0&&(p=!1),h===void 0)return h={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},h;var u=n.text,d=u.length,l=n.maxWidth,c=n.wordWrapCharCode,m=Number.MAX_VALUE,f=Number.MAX_VALUE,v=0,S=0,x=n.fontData.chars,T=n.fontData.lineHeight,C=n.letterSpacing,w=n.lineSpacing,b=0,E=0,A=0,I=null,R=n._align,N=0,F=0,P=n.fontSize/n.fontData.size,D=P*n.scaleX,M=P*n.scaleY,L=null,k=0,V=[],W=Number.MAX_VALUE,K=0,B=0,G=0,O,$=[],z=[],X=null;if(l>0){for(O=0;O<d;O++){if(A=u.charCodeAt(O),A===10){X!==null&&($.push({word:X.word,i:X.i,x:X.x*D,y:X.y*M,w:X.w*D,h:X.h*M,cr:!0}),X=null),b=0,E+=T+w,L=null;continue}if(I=x[A],!!I){if(L!==null)var Y=I.kerning[k];A===c?X!==null&&($.push({word:X.word,i:X.i,x:X.x*D,y:X.y*M,w:X.w*D,h:X.h*M,cr:!1}),X=null):(X===null&&(X={word:"",i:O,x:b,y:E,w:0,h:T,cr:!1}),X.word=X.word.concat(u[O]),X.w+=I.xOffset+I.xAdvance+(Y!==void 0?Y:0)),b+=I.xAdvance+C,L=I,k=A}}X!==null&&$.push({word:X.word,i:X.i,x:X.x*D,y:X.y*M,w:X.w*D,h:X.h*M,cr:!1}),b=0,E=0,L=null,k=0;var Z,J=0,tt=[];for(O=0;O<$.length;O++){var et=$[O],lt=et.x,ut=et.x+et.w;if(Z){var ct=lt-(Z.x+Z.w);J=lt-(ct+Z.w),Z=null}var ht=lt-J,xt=ut-J;ht>l||xt>l?(tt.push(et.i-1),et.cr?(tt.push(et.i+et.word.length),J=0,Z=null):Z=et):et.cr&&(tt.push(et.i+et.word.length),J=0,Z=null)}var Tt=function(He,Ne,sn){return He.substr(0,Ne)+sn+He.substr(Ne+1)};for(O=tt.length-1;O>=0;O--)u=Tt(u,tt[O],`
`);h.wrappedText=u,d=u.length,$=[],X=null}var At=0;for(O=0;O<d;O++){if(A=u.charCodeAt(O),A===10){X!==null&&($.push({word:X.word,i:X.i,x:X.x*D,y:X.y*M,w:X.w*D,h:X.h*M}),X=null),b=0,E+=T+w,L=null,V[B]=G,G>K&&(K=G),G<W&&(W=G),B++,G=0;continue}if(I=x[A],!!I){if(N=b,F=E,L!==null){var Rt=I.kerning[k];N+=Rt!==void 0?Rt:0}m>N&&(m=N),f>F&&(f=F);var mt=N+I.xAdvance,bt=F+T;v<mt&&(v=mt),S<bt&&(S=bt);var Ct=I.xOffset+I.xAdvance+(Rt!==void 0?Rt:0);A===c?X!==null&&($.push({word:X.word,i:X.i,x:X.x*D,y:X.y*M,w:X.w*D,h:X.h*M}),X=null):(X===null&&(X={word:"",i:At,x:b,y:E,w:0,h:T}),X.word=X.word.concat(u[O]),X.w+=Ct),z.push({i:At,idx:O,char:u[O],code:A,x:(I.xOffset+N)*P,y:(I.yOffset+E)*P,w:I.width*P,h:I.height*P,t:E*P,r:mt*P,b:T*P,line:B,glyph:I}),b+=I.xAdvance+C+(Rt!==void 0?Rt:0),L=I,k=A,G=mt*P,At++}}if(X!==null&&$.push({word:X.word,i:X.i,x:X.x*D,y:X.y*M,w:X.w*D,h:X.h*M}),V[B]=G,G>K&&(K=G),G<W&&(W=G),R>0)for(var Ht=0;Ht<z.length;Ht++){var zt=z[Ht];if(R===1){var Jt=(K-V[zt.line])/2;zt.x+=Jt,zt.r+=Jt}else if(R===2){var ae=K-V[zt.line];zt.x+=ae,zt.r+=ae}}var _t=h.local,Zt=h.global,de=h.lines;return _t.x=m*P,_t.y=f*P,_t.width=v*P,_t.height=S*P,Zt.x=n.x-n._displayOriginX+m*D,Zt.y=n.y-n._displayOriginY+f*M,Zt.width=v*D,Zt.height=S*M,de.shortest=W,de.longest=K,de.lengths=V,a&&(_t.x=Math.ceil(_t.x),_t.y=Math.ceil(_t.y),_t.width=Math.ceil(_t.width),_t.height=Math.ceil(_t.height),Zt.x=Math.ceil(Zt.x),Zt.y=Math.ceil(Zt.y),Zt.width=Math.ceil(Zt.width),Zt.height=Math.ceil(Zt.height),de.shortest=Math.ceil(W),de.longest=Math.ceil(K)),p&&(n._displayOriginX=n.originX*_t.width,n._displayOriginY=n.originY*_t.height,Zt.x=n.x-n._displayOriginX*n.scaleX,Zt.y=n.y-n._displayOriginY*n.scaleY,a&&(Zt.x=Math.ceil(Zt.x),Zt.y=Math.ceil(Zt.y))),h.words=$,h.characters=z,h.lines.height=T,h.scale=P,h.scaleX=n.scaleX,h.scaleY=n.scaleY,h};r.exports=g},68298:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(31476),p=function(h,u,d,l,c,m,f){var v=h.sys.textures.get(d),S=v.get(l),x=h.sys.cache.xml.get(c);if(S&&x){var T=a(x,S,m,f,v);return h.sys.cache.bitmapFont.add(u,{data:T,texture:d,frame:l,fromAtlas:!0}),!0}else return!1};r.exports=p},39860:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(10850),p=function(h,u){var d=u.width,l=u.height,c=Math.floor(d/2),m=Math.floor(l/2),f=a(u,"chars","");if(f!==""){var v=a(u,"image",""),S=h.sys.textures.getFrame(v),x=S.cutX,T=S.cutY,C=S.source.width,w=S.source.height,b=a(u,"offset.x",0),E=a(u,"offset.y",0),A=a(u,"spacing.x",0),I=a(u,"spacing.y",0),R=a(u,"lineSpacing",0),N=a(u,"charsPerRow",null);N===null&&(N=C/d,N>f.length&&(N=f.length));for(var F=b,P=E,D={retroFont:!0,font:v,size:d,lineHeight:l+R,chars:{}},M=0,L=0;L<f.length;L++){var k=f.charCodeAt(L),V=(x+F)/C,W=(T+P)/w,K=(x+F+d)/C,B=(T+P+l)/w;D.chars[k]={x:F,y:P,width:d,height:l,centerX:c,centerY:m,xOffset:0,yOffset:0,xAdvance:d,data:{},kerning:{},u0:V,v0:W,u1:K,v1:B},M++,M===N?(M=0,F=b,P+=l+I):F+=d+A}var G={data:D,frame:null,texture:v};return G}};r.exports=p},31476:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(a,p){return parseInt(a.getAttribute(p),10)}var n=function(a,p,h,u,d){h===void 0&&(h=0),u===void 0&&(u=0);var l=p.cutX,c=p.cutY,m=p.source.width,f=p.source.height,v=p.sourceIndex,S={},x=a.getElementsByTagName("info")[0],T=a.getElementsByTagName("common")[0];S.font=x.getAttribute("face"),S.size=g(x,"size"),S.lineHeight=g(T,"lineHeight")+u,S.chars={};var C=a.getElementsByTagName("char"),w=p!==void 0&&p.trimmed;if(w)var b=p.height,E=p.width;for(var A=0;A<C.length;A++){var I=C[A],R=g(I,"id"),N=String.fromCharCode(R),F=g(I,"x"),P=g(I,"y"),D=g(I,"width"),M=g(I,"height");w&&(F<E&&(E=F),P<b&&(b=P)),w&&b!==0&&E!==0&&(F-=p.x,P-=p.y);var L=(l+F)/m,k=(c+P)/f,V=(l+F+D)/m,W=(c+P+M)/f;if(S.chars[R]={x:F,y:P,width:D,height:M,centerX:Math.floor(D/2),centerY:Math.floor(M/2),xOffset:g(I,"xoffset"),yOffset:g(I,"yoffset"),xAdvance:g(I,"xadvance")+h,data:{},kerning:{},u0:L,v0:k,u1:V,v1:W},d&&D!==0&&M!==0){var K=d.add(N,v,F,P,D,M);K&&K.setUVs(D,M,L,k,V,W)}}var B=a.getElementsByTagName("kerning");for(A=0;A<B.length;A++){var G=B[A],O=g(G,"first"),$=g(G,"second"),z=g(G,"amount");S.chars[$].kerning[O]=z}return S};r.exports=n},55873:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(66863),p=n(98611),h={Parse:n(39860)};h=p(!1,h,a),r.exports=h},66863:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};r.exports=g},13468:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(44616),p=n(56694),h=n(88899),u=new p({Extends:a,Mixins:[h],initialize:function(l,c,m,f,v,S,x){a.call(this,l,c,m,f,v,S,x),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(d,l){return this.cropWidth=d,this.cropHeight=l,this},setDisplayCallback:function(d){return this.displayCallback=d,this},setScrollX:function(d){return this.scrollX=d,this},setScrollY:function(d){return this.scrollY=d,this}});r.exports=u},93438:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(49584),p=function(h,u,d,l){var c=u._text,m=c.length,f=h.currentContext;if(!(m===0||!a(h,f,u,d,l))){d.addToRenderList(u);var v=u.fromAtlas?u.frame:u.texture.frames.__BASE,S=u.displayCallback,x=u.callbackData,T=u.fontData.chars,C=u.fontData.lineHeight,w=u._letterSpacing,b=0,E=0,A=0,I=null,R=0,N=0,F=0,P=0,D=0,M=0,L=null,k=0,V=u.frame.source.image,W=v.cutX,K=v.cutY,B=0,G=0,O=u._fontSize/u.fontData.size,$=u._align,z=0,X=0;u.getTextBounds(!1);var Y=u._bounds.lines;$===1?X=(Y.longest-Y.lengths[0])/2:$===2&&(X=Y.longest-Y.lengths[0]),f.translate(-u.displayOriginX,-u.displayOriginY);var Z=d.roundPixels;u.cropWidth>0&&u.cropHeight>0&&(f.beginPath(),f.rect(0,0,u.cropWidth,u.cropHeight),f.clip());for(var J=0;J<m;J++){if(G=O,B=0,A=c.charCodeAt(J),A===10){z++,$===1?X=(Y.longest-Y.lengths[z])/2:$===2&&(X=Y.longest-Y.lengths[z]),b=0,E+=C,L=null;continue}if(I=T[A],!!I){if(R=W+I.x,N=K+I.y,F=I.width,P=I.height,D=I.xOffset+b-u.scrollX,M=I.yOffset+E-u.scrollY,L!==null){var tt=I.kerning[k];D+=tt!==void 0?tt:0}if(S){x.index=J,x.charCode=A,x.x=D,x.y=M,x.scale=G,x.rotation=B,x.data=I.data;var et=S(x);D=et.x,M=et.y,G=et.scale,B=et.rotation}D*=G,M*=G,D+=X,b+=I.xAdvance+w+(tt!==void 0?tt:0),L=I,k=A,!(F===0||P===0||A===32)&&(Z&&(D=Math.round(D),M=Math.round(M)),f.save(),f.translate(D,M),f.rotate(B),f.scale(G,G),f.drawImage(V,R,N,F,P,0,0,F,P),f.restore())}}f.restore()}};r.exports=p},67513:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(13468),p=n(88933),h=n(99325),u=n(20494);h.register("dynamicBitmapText",function(d,l){d===void 0&&(d={});var c=u(d,"font",""),m=u(d,"text",""),f=u(d,"size",!1),v=new a(this.scene,0,0,c,m,f);return l!==void 0&&(d.add=l),p(this.scene,v,d),v})},94145:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(13468),p=n(61286);p.register("dynamicBitmapText",function(h,u,d,l,c){return this.displayList.add(new a(this.scene,h,u,d,l,c))})},88899:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(16873),h=n(93438),r.exports={renderWebGL:p,renderCanvas:h}},16873:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=n(69360),h=n(75512),u=new p,d=function(l,c,m,f){var v=c.text,S=v.length;if(S!==0){m.addToRenderList(c);var x=l.pipelines.set(c.pipeline,c),T=a(c,m,f);l.pipelines.preBatch(c);var C=T.sprite,w=T.calc,b=u,E=c.cropWidth>0||c.cropHeight>0;E&&(x.flush(),l.pushScissor(w.tx,w.ty,c.cropWidth*w.scaleX,c.cropHeight*w.scaleY));var A=c.frame,I=A.glTexture,R=c.tintFill,N=h.getTintAppendFloatAlpha(c.tintTopLeft,m.alpha*c._alphaTL),F=h.getTintAppendFloatAlpha(c.tintTopRight,m.alpha*c._alphaTR),P=h.getTintAppendFloatAlpha(c.tintBottomLeft,m.alpha*c._alphaBL),D=h.getTintAppendFloatAlpha(c.tintBottomRight,m.alpha*c._alphaBR),M=x.setGameObject(c),L=0,k=0,V=0,W=0,K=c.letterSpacing,B,G=0,O=0,$,z=c.scrollX,X=c.scrollY,Y=c.fontData,Z=Y.chars,J=Y.lineHeight,tt=c.fontSize/Y.size,et=0,lt=c._align,ut=0,ct=0,ht=c.getTextBounds(!1);c.maxWidth>0&&(v=ht.wrappedText,S=v.length);var xt=c._bounds.lines;lt===1?ct=(xt.longest-xt.lengths[0])/2:lt===2&&(ct=xt.longest-xt.lengths[0]);for(var Tt=m.roundPixels,At=c.displayCallback,Rt=c.callbackData,mt=0;mt<S;mt++){if(V=v.charCodeAt(mt),V===10){ut++,lt===1?ct=(xt.longest-xt.lengths[ut])/2:lt===2&&(ct=xt.longest-xt.lengths[ut]),L=0,k+=J,$=null;continue}if(B=Z[V],!!B){G=B.width,O=B.height;var bt=B.xOffset+L-z,Ct=B.yOffset+k-X;if($!==null){var Ht=B.kerning[W];bt+=Ht!==void 0?Ht:0}if(L+=B.xAdvance+K,$=B,W=V,!(G===0||O===0||V===32)){if(tt=c.fontSize/c.fontData.size,et=0,At){Rt.color=0,Rt.tint.topLeft=N,Rt.tint.topRight=F,Rt.tint.bottomLeft=P,Rt.tint.bottomRight=D,Rt.index=mt,Rt.charCode=V,Rt.x=bt,Rt.y=Ct,Rt.scale=tt,Rt.rotation=et,Rt.data=B.data;var zt=At(Rt);bt=zt.x,Ct=zt.y,tt=zt.scale,et=zt.rotation,zt.color?(N=zt.color,F=zt.color,P=zt.color,D=zt.color):(N=zt.tint.topLeft,F=zt.tint.topRight,P=zt.tint.bottomLeft,D=zt.tint.bottomRight),N=h.getTintAppendFloatAlpha(N,m.alpha*c._alphaTL),F=h.getTintAppendFloatAlpha(F,m.alpha*c._alphaTR),P=h.getTintAppendFloatAlpha(P,m.alpha*c._alphaBL),D=h.getTintAppendFloatAlpha(D,m.alpha*c._alphaBR)}bt*=tt,Ct*=tt,bt-=c.displayOriginX,Ct-=c.displayOriginY,bt+=ct,b.applyITRS(bt,Ct,et,tt,tt),w.multiply(b,C);var Jt=B.u0,ae=B.v0,_t=B.u1,Zt=B.v1,de=G,He=O,Ne=C.e,sn=C.f,Vn=He*C.c+C.e,us=He*C.d+C.f,br=de*C.a+He*C.c+C.e,Ar=de*C.b+He*C.d+C.f,Ir=de*C.a+C.e,Rr=de*C.b+C.f;Tt&&(Ne=Math.round(Ne),sn=Math.round(sn),Vn=Math.round(Vn),us=Math.round(us),br=Math.round(br),Ar=Math.round(Ar),Ir=Math.round(Ir),Rr=Math.round(Rr)),x.batchQuad(c,Ne,sn,Vn,us,br,Ar,Ir,Rr,Jt,ae,_t,Zt,N,F,P,D,R,I,M)}}}E&&(x.flush(),l.popScissor()),l.pipelines.postBatch(c)}};r.exports=d},44616:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(82897),h=n(64937),u=n(89980),d=n(82173),l=n(68298),c=n(31476),m=n(74118),f=n(84557),v=new a({Extends:u,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Texture,h.Tint,h.Transform,h.Visible,f],initialize:function(x,T,C,w,b,E,A){b===void 0&&(b=""),A===void 0&&(A=0),u.call(this,x,"BitmapText"),this.font=w;var I=this.scene.sys.cache.bitmapFont.get(w);I||console.warn("Invalid BitmapText key: "+w),this.fontData=I.data,this._text="",this._fontSize=E||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=A,this._bounds=d(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=I.fromAtlas,this.setTexture(I.texture,I.frame),this.setPosition(T,C),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(b)},setLeftAlign:function(){return this._align=v.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=v.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=v.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(S){return this._fontSize=S,this._dirty=!0,this},setLetterSpacing:function(S){return S===void 0&&(S=0),this._letterSpacing=S,this._dirty=!0,this},setLineSpacing:function(S){return S===void 0&&(S=0),this.lineSpacing=S,this},setText:function(S){return!S&&S!==0&&(S=""),Array.isArray(S)&&(S=S.join(`
`)),S!==this.text&&(this._text=S.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(S,x,T,C){return S===void 0&&(S=0),x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=.5),this.dropShadowX=S,this.dropShadowY=x,this.dropShadowColor=T,this.dropShadowAlpha=C,this},setCharacterTint:function(S,x,T,C,w,b,E){S===void 0&&(S=0),x===void 0&&(x=1),T===void 0&&(T=!1),C===void 0&&(C=-1),w===void 0&&(w=C,b=C,E=C);var A=this.text.length;x===-1&&(x=A),S<0&&(S=A+S),S=p(S,0,A-1);for(var I=p(S+x,S,A),R=this.charColors,N=S;N<I;N++){var F=R[N];if(C===-1)R[N]=null;else{var P=T?1:0;F?(F.tintEffect=P,F.tintTL=C,F.tintTR=w,F.tintBL=b,F.tintBR=E):R[N]={tintEffect:P,tintTL:C,tintTR:w,tintBL:b,tintBR:E}}}return this},setWordTint:function(S,x,T,C,w,b,E){x===void 0&&(x=1);for(var A=this.getTextBounds(),I=A.words,R=typeof S=="number",N=0,F=0;F<I.length;F++){var P=I[F];if((R&&F===S||!R&&P.word===S)&&(this.setCharacterTint(P.i,P.word.length,T,C,w,b,E),N++,N===x))return this}return this},getTextBounds:function(S){var x=this._bounds;return(this._dirty||S||this.scaleX!==x.scaleX||this.scaleY!==x.scaleY)&&(d(this,S,!0,x),this._dirty=!1),x},getCharacterAt:function(S,x,T){for(var C=this.getLocalPoint(S,x,null,T),w=this.getTextBounds(),b=w.characters,E=new m,A=0;A<b.length;A++){var I=b[A];if(E.setTo(I.x,I.t,I.r-I.x,I.b),E.contains(C.x,C.y))return I}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(S,x,T){if(x===void 0&&(x=this._fontSize),T===void 0&&(T=this._align),S!==this.font){var C=this.scene.sys.cache.bitmapFont.get(S);C&&(this.font=S,this.fontData=C.data,this._fontSize=x,this._align=T,this.fromAtlas=C.fromAtlas===!0,this.setTexture(C.texture,C.frame),d(this,!1,!0,this._bounds))}return this},setMaxWidth:function(S,x){return this._maxWidth=S,this._dirty=!0,x!==void 0&&(this.wordWrapCharCode=x),this},align:{set:function(S){this._align=S,this._dirty=!0},get:function(){return this._align}},text:{set:function(S){this.setText(S)},get:function(){return this._text}},fontSize:{set:function(S){this._fontSize=S,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(S){this._letterSpacing=S,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(S){this._lineSpacing=S,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(S){this._maxWidth=S,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var S=h.ToJSON(this),x={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return S.data=x,S},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});v.ALIGN_LEFT=0,v.ALIGN_CENTER=1,v.ALIGN_RIGHT=2,v.ParseFromAtlas=l,v.ParseXMLBitmapFont=c,r.exports=v},97545:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(49584),p=function(h,u,d,l){var c=u._text,m=c.length,f=h.currentContext;if(!(m===0||!a(h,f,u,d,l))){d.addToRenderList(u);var v=u.fromAtlas?u.frame:u.texture.frames.__BASE,S=u.fontData.chars,x=u.fontData.lineHeight,T=u._letterSpacing,C=u._lineSpacing,w=0,b=0,E=0,A=null,I=0,R=0,N=0,F=0,P=0,D=0,M=null,L=0,k=v.source.image,V=v.cutX,W=v.cutY,K=u._fontSize/u.fontData.size,B=u._align,G=0,O=0,$=u.getTextBounds(!1);u.maxWidth>0&&(c=$.wrappedText,m=c.length);var z=u._bounds.lines;B===1?O=(z.longest-z.lengths[0])/2:B===2&&(O=z.longest-z.lengths[0]),f.translate(-u.displayOriginX,-u.displayOriginY);for(var X=d.roundPixels,Y=0;Y<m;Y++){if(E=c.charCodeAt(Y),E===10){G++,B===1?O=(z.longest-z.lengths[G])/2:B===2&&(O=z.longest-z.lengths[G]),w=0,b+=x+C,M=null;continue}if(A=S[E],!!A){if(I=V+A.x,R=W+A.y,N=A.width,F=A.height,P=A.xOffset+w,D=A.yOffset+b,M!==null){var Z=A.kerning[L];P+=Z!==void 0?Z:0}P*=K,D*=K,P+=O,w+=A.xAdvance+T+(Z!==void 0?Z:0),M=A,L=E,!(N===0||F===0||E===32)&&(X&&(P=Math.round(P),D=Math.round(D)),f.save(),f.translate(P,D),f.scale(K,K),f.drawImage(k,I,R,N,F,0,0,N,F),f.restore())}}f.restore()}};r.exports=p},95499:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(44616),p=n(88933),h=n(99325),u=n(20494),d=n(10850);h.register("bitmapText",function(l,c){l===void 0&&(l={});var m=d(l,"font",""),f=u(l,"text",""),v=u(l,"size",!1),S=d(l,"align",0),x=new a(this.scene,0,0,m,f,v,S);return c!==void 0&&(l.add=c),p(this.scene,x,l),x})},21797:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(44616),p=n(61286);p.register("bitmapText",function(h,u,d,l,c,m){return this.displayList.add(new a(this.scene,h,u,d,l,c,m))})},84557:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(26372),h=n(97545),r.exports={renderWebGL:p,renderCanvas:h}},26372:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(8810),p=n(73329),h=n(75512),u=function(d,l,c,m){var f=l._text,v=f.length;if(v!==0){c.addToRenderList(l);var S=d.pipelines.set(l.pipeline,l),x=p(l,c,m).calc;d.pipelines.preBatch(l);var T=c.roundPixels,C=c.alpha,w=l.charColors,b=l.tintFill,E=h.getTintAppendFloatAlpha,A=E(l.tintTopLeft,C*l._alphaTL),I=E(l.tintTopRight,C*l._alphaTR),R=E(l.tintBottomLeft,C*l._alphaBL),N=E(l.tintBottomRight,C*l._alphaBR),F=l.frame.glTexture,P=S.setGameObject(l),D=l.getTextBounds(!1),M,L,k,V=D.characters,W=l.dropShadowX,K=l.dropShadowY,B=W!==0||K!==0;if(B){var G=l.dropShadowColor,O=l.dropShadowAlpha,$=E(G,C*O*l._alphaTL),z=E(G,C*O*l._alphaTR),X=E(G,C*O*l._alphaBL),Y=E(G,C*O*l._alphaBR);for(M=0;M<V.length;M++)L=V[M],k=L.glyph,!(L.code===32||k.width===0||k.height===0)&&a(S,l,L,k,W,K,x,T,$,z,X,Y,1,F,P)}for(M=0;M<V.length;M++)if(L=V[M],k=L.glyph,!(L.code===32||k.width===0||k.height===0))if(w[L.i]){var Z=w[L.i],J=Z.tintEffect,tt=E(Z.tintTL,C*l._alphaTL),et=E(Z.tintTR,C*l._alphaTR),lt=E(Z.tintBL,C*l._alphaBL),ut=E(Z.tintBR,C*l._alphaBR);a(S,l,L,k,0,0,x,T,tt,et,lt,ut,J,F,P)}else a(S,l,L,k,0,0,x,T,A,I,R,N,b,F,P);d.pipelines.postBatch(l)}};r.exports=u},52816:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(92246),p=n(41664),h=n(56694),u=n(64937),d=n(82047),l=n(89980),c=n(71207),m=new h({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.Texture,u.Transform,u.Visible,a],initialize:function(v,S,x,T,C){l.call(this,v,"Blitter"),this.setTexture(T,C),this.setPosition(S,x),this.initPipeline(),this.initPostPipeline(),this.children=new c,this.renderList=[],this.dirty=!1},create:function(f,v,S,x,T){x===void 0&&(x=!0),T===void 0&&(T=this.children.length),S===void 0?S=this.frame:S instanceof d||(S=this.texture.get(S));var C=new p(this,f,v,S,x);return this.children.addAt(C,T,!1),this.dirty=!0,C},createFromCallback:function(f,v,S,x){for(var T=this.createMultiple(v,S,x),C=0;C<T.length;C++){var w=T[C];f.call(this,w,C)}return T},createMultiple:function(f,v,S){v===void 0&&(v=this.frame.name),S===void 0&&(S=!0),Array.isArray(v)||(v=[v]);var x=[],T=this;return v.forEach(function(C){for(var w=0;w<f;w++)x.push(T.create(0,0,C,S))}),x},childCanRender:function(f){return f.visible&&f.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});r.exports=m},33177:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=a.getRenderList();if(u.length!==0){var d=n.currentContext,l=p.alpha*a.alpha;if(l!==0){p.addToRenderList(a),d.globalCompositeOperation=n.blendModes[a.blendMode],d.imageSmoothingEnabled=!a.frame.source.scaleMode;var c=a.x-p.scrollX*a.scrollFactorX,m=a.y-p.scrollY*a.scrollFactorY;d.save(),h&&h.copyToContext(d);for(var f=p.roundPixels,v=0;v<u.length;v++){var S=u[v],x=S.flipX||S.flipY,T=S.frame,C=T.canvasData,w=T.x,b=T.y,E=1,A=1,I=S.alpha*l;I!==0&&(d.globalAlpha=I,x?(S.flipX&&(E=-1,w-=C.width),S.flipY&&(A=-1,b-=C.height),C.width>0&&C.height>0&&(d.save(),d.translate(S.x+c,S.y+m),d.scale(E,A),d.drawImage(T.source.image,C.x,C.y,C.width,C.height,w,b,C.width,C.height),d.restore())):(f&&(w=Math.round(w),b=Math.round(b)),C.width>0&&C.height>0&&d.drawImage(T.source.image,C.x,C.y,C.width,C.height,w+S.x+c,b+S.y+m,C.width,C.height)))}d.restore()}}};r.exports=g},68452:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(52816),p=n(88933),h=n(99325),u=n(20494);h.register("blitter",function(d,l){d===void 0&&(d={});var c=u(d,"key",null),m=u(d,"frame",null),f=new a(this.scene,0,0,c,m);return l!==void 0&&(d.add=l),p(this.scene,f,d),f})},38906:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(52816),p=n(61286);p.register("blitter",function(h,u,d,l){return this.displayList.add(new a(this.scene,h,u,d,l))})},92246:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(89165),h=n(33177),r.exports={renderWebGL:p,renderCanvas:h}},89165:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(69360),p=n(75512),h=new a,u=function(d,l,c,m){var f=l.getRenderList(),v=c.alpha*l.alpha;if(!(f.length===0||v===0)){c.addToRenderList(l);var S=d.pipelines.set(this.pipeline,l),x=c.scrollX*l.scrollFactorX,T=c.scrollY*l.scrollFactorY,C=h.copyFrom(c.matrix);m&&(C.multiplyWithOffset(m,-x,-T),x=0,T=0);var w=l.x-x,b=l.y-T,E=-1,A=!1,I=c.roundPixels;d.pipelines.preBatch(l);for(var R=0;R<f.length;R++){var N=f[R],F=N.frame,P=N.alpha*v;if(P!==0){var D=F.width,M=F.height,L=w+N.x+F.x,k=b+N.y+F.y;N.flipX&&(D*=-1,L+=F.width),N.flipY&&(M*=-1,k+=F.height);var V=C.setQuad(L,k,L+D,k+M,I),W=p.getTintAppendFloatAlpha(N.tint,P);if(F.sourceIndex!==E){var K=S.setGameObject(l,F);E=F.sourceIndex}S.batchQuad(l,V[0],V[1],V[2],V[3],V[4],V[5],V[6],V[7],F.u0,F.v0,F.u1,F.v1,W,W,W,W,A,F.glTexture,K)&&(E=-1)}}d.pipelines.postBatch(l)}};r.exports=u},41664:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(82047),h=new a({initialize:function(d,l,c,m,f){this.parent=d,this.x=l,this.y=c,this.frame=m,this.data={},this.tint=16777215,this._visible=f,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(u){return u===void 0?this.frame=this.parent.frame:u instanceof p&&u.texture===this.parent.texture?this.frame=u:this.frame=this.parent.texture.get(u),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(u,d,l){return this.x=u,this.y=d,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,l&&this.setFrame(l),this},setPosition:function(u,d){return this.x=u,this.y=d,this},setFlipX:function(u){return this.flipX=u,this},setFlipY:function(u){return this.flipY=u,this},setFlip:function(u,d){return this.flipX=u,this.flipY=d,this},setVisible:function(u){return this.visible=u,this},setAlpha:function(u){return this.alpha=u,this},setTint:function(u){return this.tint=u,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(u){this.parent.dirty|=this._visible!==u,this._visible=u}},alpha:{get:function(){return this._alpha},set:function(u){this.parent.dirty|=this._alpha>0!=u>0,this._alpha=u}}});r.exports=h},97123:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=2,h={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(u,d,l,c){return u===void 0&&(u=1),d===void 0?this.alpha=u:(this._alphaTL=a(u,0,1),this._alphaTR=a(d,0,1),this._alphaBL=a(l,0,1),this._alphaBR=a(c,0,1)),this},alpha:{get:function(){return this._alpha},set:function(u){var d=a(u,0,1);this._alpha=d,this._alphaTL=d,this._alphaTR=d,this._alphaBL=d,this._alphaBR=d,d===0?this.renderFlags&=~p:this.renderFlags|=p}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(u){var d=a(u,0,1);this._alphaTL=d,d!==0&&(this.renderFlags|=p)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(u){var d=a(u,0,1);this._alphaTR=d,d!==0&&(this.renderFlags|=p)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(u){var d=a(u,0,1);this._alphaBL=d,d!==0&&(this.renderFlags|=p)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(u){var d=a(u,0,1);this._alphaBR=d,d!==0&&(this.renderFlags|=p)}}};r.exports=h},15720:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=2,h={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(u){return u===void 0&&(u=1),this.alpha=u,this},alpha:{get:function(){return this._alpha},set:function(u){var d=a(u,0,1);this._alpha=d,d===0?this.renderFlags&=~p:this.renderFlags|=p}}};r.exports=h},69732:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(95723),p={_blendMode:a.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(h){typeof h=="string"&&(h=a[h]),h|=0,h>=-1&&(this._blendMode=h)}},setBlendMode:function(h){return this.blendMode=h,this}};r.exports=p},28284:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}},setSize:function(n,a){return this.width=n,this.height=a,this},setDisplaySize:function(n,a){return this.displayWidth=n,this.displayHeight=a,this}};r.exports=g},85293:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={texture:null,frame:null,isCropped:!1,setCrop:function(n,a,p,h){if(n===void 0)this.isCropped=!1;else if(this.frame){if(typeof n=="number")this.frame.setCropUVs(this._crop,n,a,p,h,this.flipX,this.flipY);else{var u=n;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};r.exports=g},14975:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={_depth:0,depth:{get:function(){return this._depth},set:function(n){this.displayList&&this.displayList.queueDepthSort(),this._depth=n}},setDepth:function(n){return n===void 0&&(n=0),this.depth=n,this}};r.exports=g},88677:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(96910),h=n(72677),u=new a({initialize:function(l,c){this.gameObject=l,this.isPost=c,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(d){return d===void 0&&(d=0),this.padding=d,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(d){if(!this.isPost){var l=this.gameObject.scene.sys.renderer;l&&l.pipelines?(this.gameObject.pipeline=l.pipelines.FX_PIPELINE,d!==void 0&&(this.padding=d),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var d=this.list,l=0;l<d.length;l++)d[l].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(d){var l;if(this.isPost){var c=this.gameObject.getPostPipeline(String(d.type));for(Array.isArray(c)||(c=[c]),l=0;l<c.length;l++){var m=c[l];if(m.controller===d){this.gameObject.removePostPipeline(m),d.destroy();break}}}else{var f=this.list;for(l=0;l<f.length;l++)f[l]===d&&(h(f,l),d.destroy())}return this.gameObject},disable:function(d){return d===void 0&&(d=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,d&&this.clear(),this.gameObject},add:function(d,l){if(this.isPost){var c=String(d.type);this.gameObject.setPostPipeline(c,l);var m=this.gameObject.getPostPipeline(c);if(m)return Array.isArray(m)&&(m=m.pop()),m.controller=d,d}else return this.enabled||this.enable(),this.list.push(d),d},addGlow:function(d,l,c,m,f,v){return this.add(new p.Glow(this.gameObject,d,l,c,m),{quality:f,distance:v})},addShadow:function(d,l,c,m,f,v,S){return this.add(new p.Shadow(this.gameObject,d,l,c,m,f,v,S))},addPixelate:function(d){return this.add(new p.Pixelate(this.gameObject,d))},addVignette:function(d,l,c,m){return this.add(new p.Vignette(this.gameObject,d,l,c,m))},addShine:function(d,l,c,m){return this.add(new p.Shine(this.gameObject,d,l,c,m))},addBlur:function(d,l,c,m,f,v){return this.add(new p.Blur(this.gameObject,d,l,c,m,f,v))},addGradient:function(d,l,c,m,f,v,S,x){return this.add(new p.Gradient(this.gameObject,d,l,c,m,f,v,S,x))},addBloom:function(d,l,c,m,f,v){return this.add(new p.Bloom(this.gameObject,d,l,c,m,f,v))},addColorMatrix:function(){return this.add(new p.ColorMatrix(this.gameObject))},addCircle:function(d,l,c,m,f){return this.add(new p.Circle(this.gameObject,d,l,c,m,f))},addBarrel:function(d){return this.add(new p.Barrel(this.gameObject,d))},addDisplacement:function(d,l,c){return this.add(new p.Displacement(this.gameObject,d,l,c))},addWipe:function(d,l,c){return this.add(new p.Wipe(this.gameObject,d,l,c))},addReveal:function(d,l,c){return this.add(new p.Wipe(this.gameObject,d,l,c,!0))},addBokeh:function(d,l,c){return this.add(new p.Bokeh(this.gameObject,d,l,c))},addTiltShift:function(d,l,c,m,f,v){return this.add(new p.Bokeh(this.gameObject,d,l,c,!0,m,f,v))},destroy:function(){this.clear(),this.gameObject=null}});r.exports=u},92972:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(n){return this.flipX=n,this},setFlipY:function(n){return this.flipY=n,this},setFlip:function(n,a){return this.flipX=n,this.flipY=a,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};r.exports=g},80693:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=n(2386),h=n(93736),u={prepareBoundsOutput:function(d,l){if(l===void 0&&(l=!1),this.rotation!==0&&p(d,this.x,this.y,this.rotation),l&&this.parentContainer){var c=this.parentContainer.getBoundsTransformMatrix();c.transformPoint(d.x,d.y,d)}return d},getCenter:function(d,l){return d===void 0&&(d=new h),d.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,d.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(d,l)},getTopLeft:function(d,l){return d||(d=new h),d.x=this.x-this.displayWidth*this.originX,d.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(d,l)},getTopCenter:function(d,l){return d||(d=new h),d.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,d.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(d,l)},getTopRight:function(d,l){return d||(d=new h),d.x=this.x-this.displayWidth*this.originX+this.displayWidth,d.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(d,l)},getLeftCenter:function(d,l){return d||(d=new h),d.x=this.x-this.displayWidth*this.originX,d.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(d,l)},getRightCenter:function(d,l){return d||(d=new h),d.x=this.x-this.displayWidth*this.originX+this.displayWidth,d.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(d,l)},getBottomLeft:function(d,l){return d||(d=new h),d.x=this.x-this.displayWidth*this.originX,d.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(d,l)},getBottomCenter:function(d,l){return d||(d=new h),d.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,d.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(d,l)},getBottomRight:function(d,l){return d||(d=new h),d.x=this.x-this.displayWidth*this.originX+this.displayWidth,d.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(d,l)},getBounds:function(d){d===void 0&&(d=new a);var l,c,m,f,v,S,x,T;if(this.parentContainer){var C=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(d),C.transformPoint(d.x,d.y,d),l=d.x,c=d.y,this.getTopRight(d),C.transformPoint(d.x,d.y,d),m=d.x,f=d.y,this.getBottomLeft(d),C.transformPoint(d.x,d.y,d),v=d.x,S=d.y,this.getBottomRight(d),C.transformPoint(d.x,d.y,d),x=d.x,T=d.y}else this.getTopLeft(d),l=d.x,c=d.y,this.getTopRight(d),m=d.x,f=d.y,this.getBottomLeft(d),v=d.x,S=d.y,this.getBottomRight(d),x=d.x,T=d.y;return d.x=Math.min(l,m,v,x),d.y=Math.min(c,f,S,T),d.width=Math.max(l,m,v,x)-d.x,d.height=Math.max(c,f,S,T)-d.y,d}};r.exports=u},39171:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(76756),p=n(63037),h={mask:null,setMask:function(u){return this.mask=u,this},clearMask:function(u){return u===void 0&&(u=!1),u&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(u,d,l,c,m){return u===void 0&&(this.texture||this.shader||this.geom)&&(u=this),new a(this.scene,u,d,l,c,m)},createGeometryMask:function(u){return u===void 0&&(this.type==="Graphics"||this.geom)&&(u=this),new p(this.scene,u)}};r.exports=h},28072:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(n){this._displayOriginX=n,this.originX=n/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(n){this._displayOriginY=n,this.originY=n/this.height}},setOrigin:function(n,a){return n===void 0&&(n=.5),a===void 0&&(a=n),this.originX=n,this.originY=a,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(n,a){return n===void 0&&(n=0),a===void 0&&(a=n),this.displayOriginX=n,this.displayOriginY=a,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};r.exports=g},54211:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(75606),p=n(63130),h=n(10850),u=n(55303),d=n(93736),l={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:u.PLAYING_FORWARD,setPath:function(c,m){m===void 0&&(m=this.pathConfig);var f=this.pathTween;return f&&f.isPlaying()&&f.stop(),this.path=c,m&&this.startFollow(m),this},setRotateToPath:function(c,m){return m===void 0&&(m=0),this.rotateToPath=c,this.pathRotationOffset=m,this},isFollowing:function(){var c=this.pathTween;return c&&c.isPlaying()},startFollow:function(c,m){c===void 0&&(c={}),m===void 0&&(m=0);var f=this.pathTween;f&&f.isPlaying()&&f.stop(),typeof c=="number"&&(c={duration:c}),c.from=h(c,"from",0),c.to=h(c,"to",1);var v=p(c,"positionOnPath",!1);this.rotateToPath=p(c,"rotateToPath",!1),this.pathRotationOffset=h(c,"rotationOffset",0);var S=h(c,"startAt",m);if(S&&(c.onStart=function(T){var C=T.data[0];C.progress=S,C.elapsed=C.duration*S;var w=C.ease(C.progress);C.current=C.start+(C.end-C.start)*w,C.setTargetValue()}),this.pathOffset||(this.pathOffset=new d(this.x,this.y)),this.pathVector||(this.pathVector=new d),this.pathDelta||(this.pathDelta=new d),this.pathDelta.reset(),c.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(c),this.path.getStartPoint(this.pathOffset),v&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=u.PLAYING_FORWARD,this.rotateToPath){var x=this.path.getPoint(.1);this.rotation=Math.atan2(x.y-this.y,x.x-this.x)+a(this.pathRotationOffset)}return this.pathConfig=c,this},pauseFollow:function(){var c=this.pathTween;return c&&c.isPlaying()&&c.pause(),this},resumeFollow:function(){var c=this.pathTween;return c&&c.isPaused()&&c.resume(),this},stopFollow:function(){var c=this.pathTween;return c&&c.isPlaying()&&c.stop(),this},pathUpdate:function(){var c=this.pathTween;if(c){var m=c.data[0],f=this.pathDelta,v=this.pathVector;if(f.copy(v).negate(),m.state===u.COMPLETE){this.path.getPoint(m.end,v),f.add(v),v.add(this.pathOffset),this.setPosition(v.x,v.y);return}else if(m.state!==u.PLAYING_FORWARD&&m.state!==u.PLAYING_BACKWARD)return;this.path.getPoint(c.getValue(),v),f.add(v),v.add(this.pathOffset);var S=this.x,x=this.y;this.setPosition(v.x,v.y);var T=this.x-S,C=this.y-x;if(T===0&&C===0)return;if(m.state!==this._prevDirection){this._prevDirection=m.state;return}this.rotateToPath&&(this.rotation=Math.atan2(C,T)+a(this.pathRotationOffset))}}};r.exports=l},58210:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(28699),p={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(h){this.pipelineData={};var u=this.scene.sys.renderer;if(!u)return!1;var d=u.pipelines;if(d){h===void 0&&(h=d.default);var l=d.get(h);if(l)return this.defaultPipeline=l,this.pipeline=l,!0}return!1},setPipeline:function(h,u,d){var l=this.scene.sys.renderer;if(!l)return this;var c=l.pipelines;if(c){var m=c.get(h);m&&(this.pipeline=m),u&&(this.pipelineData=d?a(u):u)}return this},setPipelineData:function(h,u){var d=this.pipelineData;return u===void 0?delete d[h]:d[h]=u,this},resetPipeline:function(h){return h===void 0&&(h=!1),this.pipeline=this.defaultPipeline,h&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};r.exports=p},44086:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(28699),p=n(88677),h=n(72677),u={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(d){this.postPipelines=[],this.postPipelineData={},this.postFX=new p(this,!0),d&&(this.preFX=new p(this,!1))},setPostPipeline:function(d,l,c){var m=this.scene.sys.renderer;if(!m)return this;var f=m.pipelines;if(f){Array.isArray(d)||(d=[d]);for(var v=0;v<d.length;v++){var S=f.getPostPipeline(d[v],this,l);S&&this.postPipelines.push(S)}l&&(this.postPipelineData=c?a(l):l)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(d,l){var c=this.postPipelineData;return l===void 0?delete c[d]:c[d]=l,this},getPostPipeline:function(d){for(var l=typeof d=="string",c=this.postPipelines,m=[],f=0;f<c.length;f++){var v=c[f];(l&&v.name===d||!l&&v instanceof d)&&m.push(v)}return m.length===1?m[0]:m},resetPostPipeline:function(d){d===void 0&&(d=!1);for(var l=this.postPipelines,c=0;c<l.length;c++)l[c].destroy();this.postPipelines=[],this.hasPostPipeline=!1,d&&(this.postPipelineData={})},removePostPipeline:function(d){for(var l=typeof d=="string",c=this.postPipelines,m=c.length-1;m>=0;m--){var f=c[m];(l&&f.name===d||!l&&f===d)&&(f.destroy(),h(c,m))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};r.exports=u},45900:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(n,a){return a===void 0&&(a=n),this.scrollFactorX=n,this.scrollFactorY=a,this}};r.exports=g},31654:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(n){this.scaleX=n/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(n){this.scaleY=n/this.frame.realHeight}},setSizeToFrame:function(n){n||(n=this.frame),this.width=n.realWidth,this.height=n.realHeight;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},setSize:function(n,a){return this.width=n,this.height=a,this},setDisplaySize:function(n,a){return this.displayWidth=n,this.displayHeight=a,this}};r.exports=g},82081:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82047),p=8,h={texture:null,frame:null,isCropped:!1,setTexture:function(u,d){return this.texture=this.scene.sys.textures.get(u),this.setFrame(d)},setFrame:function(u,d,l){return d===void 0&&(d=!0),l===void 0&&(l=!0),u instanceof a?(this.texture=this.scene.sys.textures.get(u.texture.key),this.frame=u):this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~p:this.renderFlags|=p,this._sizeComponent&&d&&this.setSizeToFrame(),this._originComponent&&l&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};r.exports=h},21850:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82047),p=8,h={texture:null,frame:null,isCropped:!1,setCrop:function(u,d,l,c){if(u===void 0)this.isCropped=!1;else if(this.frame){if(typeof u=="number")this.frame.setCropUVs(this._crop,u,d,l,c,this.flipX,this.flipY);else{var m=u;this.frame.setCropUVs(this._crop,m.x,m.y,m.width,m.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(u,d){return this.texture=this.scene.sys.textures.get(u),this.setFrame(d)},setFrame:function(u,d,l){return d===void 0&&(d=!0),l===void 0&&(l=!0),u instanceof a?(this.texture=this.scene.sys.textures.get(u.texture.key),this.frame=u):this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~p:this.renderFlags|=p,this._sizeComponent&&d&&this.setSizeToFrame(),this._originComponent&&l&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};r.exports=h},58072:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(n,a,p,h){return n===void 0&&(n=16777215),a===void 0&&(a=n,p=n,h=n),this.tintTopLeft=n,this.tintTopRight=a,this.tintBottomLeft=p,this.tintBottomRight=h,this.tintFill=!1,this},setTintFill:function(n,a,p,h){return this.setTint(n,a,p,h),this.tintFill=!0,this},tint:{set:function(n){this.setTint(n,n,n,n)}},isTinted:{get:function(){var n=16777215;return this.tintFill||this.tintTopLeft!==n||this.tintTopRight!==n||this.tintBottomLeft!==n||this.tintBottomRight!==n}}};r.exports=g},48129:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a={name:n.name,type:n.type,x:n.x,y:n.y,depth:n.depth,scale:{x:n.scaleX,y:n.scaleY},origin:{x:n.originX,y:n.originY},flipX:n.flipX,flipY:n.flipY,rotation:n.rotation,alpha:n.alpha,visible:n.visible,blendMode:n.blendMode,textureKey:"",frameKey:"",data:{}};return n.texture&&(a.textureKey=n.texture.key,a.frameKey=n.frame.name),a};r.exports=g},56584:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83392),p=n(69360),h=n(64462),u=n(35786),d=n(62138),l=n(93736),c=4,m={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(f){this._scaleX=f,this._scaleY=f,f===0?this.renderFlags&=~c:this.renderFlags|=c}},scaleX:{get:function(){return this._scaleX},set:function(f){this._scaleX=f,f===0?this.renderFlags&=~c:this._scaleY!==0&&(this.renderFlags|=c)}},scaleY:{get:function(){return this._scaleY},set:function(f){this._scaleY=f,f===0?this.renderFlags&=~c:this._scaleX!==0&&(this.renderFlags|=c)}},angle:{get:function(){return d(this._rotation*a.RAD_TO_DEG)},set:function(f){this.rotation=d(f)*a.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(f){this._rotation=u(f)}},setPosition:function(f,v,S,x){return f===void 0&&(f=0),v===void 0&&(v=f),S===void 0&&(S=0),x===void 0&&(x=0),this.x=f,this.y=v,this.z=S,this.w=x,this},copyPosition:function(f){return f.x!==void 0&&(this.x=f.x),f.y!==void 0&&(this.y=f.y),f.z!==void 0&&(this.z=f.z),f.w!==void 0&&(this.w=f.w),this},setRandomPosition:function(f,v,S,x){return f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=this.scene.sys.scale.width),x===void 0&&(x=this.scene.sys.scale.height),this.x=f+Math.random()*S,this.y=v+Math.random()*x,this},setRotation:function(f){return f===void 0&&(f=0),this.rotation=f,this},setAngle:function(f){return f===void 0&&(f=0),this.angle=f,this},setScale:function(f,v){return f===void 0&&(f=1),v===void 0&&(v=f),this.scaleX=f,this.scaleY=v,this},setX:function(f){return f===void 0&&(f=0),this.x=f,this},setY:function(f){return f===void 0&&(f=0),this.y=f,this},setZ:function(f){return f===void 0&&(f=0),this.z=f,this},setW:function(f){return f===void 0&&(f=0),this.w=f,this},getLocalTransformMatrix:function(f){return f===void 0&&(f=new p),f.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(f,v){f===void 0&&(f=new p);var S=this.parentContainer;if(!S)return this.getLocalTransformMatrix(f);for(v||(v=new p),f.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);S;)v.applyITRS(S.x,S.y,S._rotation,S._scaleX,S._scaleY),v.multiply(f,f),S=S.parentContainer;return f},getLocalPoint:function(f,v,S,x){S||(S=new l),x||(x=this.scene.sys.cameras.main);var T=x.scrollX,C=x.scrollY,w=f+T*this.scrollFactorX-T,b=v+C*this.scrollFactorY-C;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(w,b,S):h(w,b,this.x,this.y,this.rotation,this.scaleX,this.scaleY,S),this._originComponent&&(S.x+=this._displayOriginX,S.y+=this._displayOriginY),S},getParentRotation:function(){for(var f=0,v=this.parentContainer;v;)f+=v.rotation,v=v.parentContainer;return f}};r.exports=m},69360:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(83392),h=n(93736),u=new a({initialize:function(l,c,m,f,v,S){l===void 0&&(l=1),c===void 0&&(c=0),m===void 0&&(m=0),f===void 0&&(f=1),v===void 0&&(v=0),S===void 0&&(S=0),this.matrix=new Float32Array([l,c,m,f,v,S,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(d){this.matrix[0]=d}},b:{get:function(){return this.matrix[1]},set:function(d){this.matrix[1]=d}},c:{get:function(){return this.matrix[2]},set:function(d){this.matrix[2]=d}},d:{get:function(){return this.matrix[3]},set:function(d){this.matrix[3]=d}},e:{get:function(){return this.matrix[4]},set:function(d){this.matrix[4]=d}},f:{get:function(){return this.matrix[5]},set:function(d){this.matrix[5]=d}},tx:{get:function(){return this.matrix[4]},set:function(d){this.matrix[4]=d}},ty:{get:function(){return this.matrix[5]},set:function(d){this.matrix[5]=d}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var d=this.matrix,l=d[0],c=d[1],m=d[2],f=d[3];return l||c?c>0?Math.acos(l/this.scaleX):-Math.acos(l/this.scaleX):m||f?p.TAU-(f>0?Math.acos(-m/this.scaleY):-Math.acos(m/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var d=this.matrix;return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d[4]=0,d[5]=0,this},translate:function(d,l){var c=this.matrix;return c[4]=c[0]*d+c[2]*l+c[4],c[5]=c[1]*d+c[3]*l+c[5],this},scale:function(d,l){var c=this.matrix;return c[0]*=d,c[1]*=d,c[2]*=l,c[3]*=l,this},rotate:function(d){var l=Math.sin(d),c=Math.cos(d),m=this.matrix,f=m[0],v=m[1],S=m[2],x=m[3];return m[0]=f*c+S*l,m[1]=v*c+x*l,m[2]=f*-l+S*c,m[3]=v*-l+x*c,this},multiply:function(d,l){var c=this.matrix,m=d.matrix,f=c[0],v=c[1],S=c[2],x=c[3],T=c[4],C=c[5],w=m[0],b=m[1],E=m[2],A=m[3],I=m[4],R=m[5],N=l===void 0?c:l.matrix;return N[0]=w*f+b*S,N[1]=w*v+b*x,N[2]=E*f+A*S,N[3]=E*v+A*x,N[4]=I*f+R*S+T,N[5]=I*v+R*x+C,N},multiplyWithOffset:function(d,l,c){var m=this.matrix,f=d.matrix,v=m[0],S=m[1],x=m[2],T=m[3],C=m[4],w=m[5],b=l*v+c*x+C,E=l*S+c*T+w,A=f[0],I=f[1],R=f[2],N=f[3],F=f[4],P=f[5];return m[0]=A*v+I*x,m[1]=A*S+I*T,m[2]=R*v+N*x,m[3]=R*S+N*T,m[4]=F*v+P*x+b,m[5]=F*S+P*T+E,this},transform:function(d,l,c,m,f,v){var S=this.matrix,x=S[0],T=S[1],C=S[2],w=S[3],b=S[4],E=S[5];return S[0]=d*x+l*C,S[1]=d*T+l*w,S[2]=c*x+m*C,S[3]=c*T+m*w,S[4]=f*x+v*C+b,S[5]=f*T+v*w+E,this},transformPoint:function(d,l,c){c===void 0&&(c={x:0,y:0});var m=this.matrix,f=m[0],v=m[1],S=m[2],x=m[3],T=m[4],C=m[5];return c.x=d*f+l*S+T,c.y=d*v+l*x+C,c},invert:function(){var d=this.matrix,l=d[0],c=d[1],m=d[2],f=d[3],v=d[4],S=d[5],x=l*f-c*m;return d[0]=f/x,d[1]=-c/x,d[2]=-m/x,d[3]=l/x,d[4]=(m*S-f*v)/x,d[5]=-(l*S-c*v)/x,this},copyFrom:function(d){var l=this.matrix;return l[0]=d.a,l[1]=d.b,l[2]=d.c,l[3]=d.d,l[4]=d.e,l[5]=d.f,this},copyFromArray:function(d){var l=this.matrix;return l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],this},copyToContext:function(d){var l=this.matrix;return d.transform(l[0],l[1],l[2],l[3],l[4],l[5]),d},setToContext:function(d){var l=this.matrix;return d.setTransform(l[0],l[1],l[2],l[3],l[4],l[5]),d},copyToArray:function(d){var l=this.matrix;return d===void 0?d=[l[0],l[1],l[2],l[3],l[4],l[5]]:(d[0]=l[0],d[1]=l[1],d[2]=l[2],d[3]=l[3],d[4]=l[4],d[5]=l[5]),d},setTransform:function(d,l,c,m,f,v){var S=this.matrix;return S[0]=d,S[1]=l,S[2]=c,S[3]=m,S[4]=f,S[5]=v,this},decomposeMatrix:function(){var d=this.decomposedMatrix,l=this.matrix,c=l[0],m=l[1],f=l[2],v=l[3],S=c*v-m*f;if(d.translateX=l[4],d.translateY=l[5],c||m){var x=Math.sqrt(c*c+m*m);d.rotation=m>0?Math.acos(c/x):-Math.acos(c/x),d.scaleX=x,d.scaleY=S/x}else if(f||v){var T=Math.sqrt(f*f+v*v);d.rotation=Math.PI*.5-(v>0?Math.acos(-f/T):-Math.acos(f/T)),d.scaleX=S/T,d.scaleY=T}else d.rotation=0,d.scaleX=0,d.scaleY=0;return d},applyITRS:function(d,l,c,m,f){var v=this.matrix,S=Math.sin(c),x=Math.cos(c);return v[4]=d,v[5]=l,v[0]=x*m,v[1]=S*m,v[2]=-S*f,v[3]=x*f,this},applyInverse:function(d,l,c){c===void 0&&(c=new h);var m=this.matrix,f=m[0],v=m[1],S=m[2],x=m[3],T=m[4],C=m[5],w=1/(f*x+S*-v);return c.x=x*w*d+-S*w*l+(C*S-T*x)*w,c.y=f*w*l+-v*w*d+(-C*f+T*v)*w,c},setQuad:function(d,l,c,m,f,v){v===void 0&&(v=this.quad);var S=this.matrix,x=S[0],T=S[1],C=S[2],w=S[3],b=S[4],E=S[5];return v[0]=d*x+l*C+b,v[1]=d*T+l*w+E,v[2]=d*x+m*C+b,v[3]=d*T+m*w+E,v[4]=c*x+m*C+b,v[5]=c*T+m*w+E,v[6]=c*x+l*C+b,v[7]=c*T+l*w+E,f&&v.forEach(function(A,I){v[I]=Math.round(A)}),v},getX:function(d,l){return d*this.a+l*this.c+this.e},getY:function(d,l){return d*this.b+l*this.d+this.f},getXRound:function(d,l,c){var m=this.getX(d,l);return c&&(m=Math.round(m)),m},getYRound:function(d,l,c){var m=this.getY(d,l);return c&&(m=Math.round(m)),m},getCSSMatrix:function(){var d=this.matrix;return"matrix("+d[0]+","+d[1]+","+d[2]+","+d[3]+","+d[4]+","+d[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});r.exports=u},59694:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=1,n={_visible:!0,visible:{get:function(){return this._visible},set:function(a){a?(this._visible=!0,this.renderFlags|=g):(this._visible=!1,this.renderFlags&=~g)}},setVisible:function(a){return this.visible=a,this}};r.exports=n},64937:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Alpha:n(97123),AlphaSingle:n(15720),BlendMode:n(69732),ComputedSize:n(28284),Crop:n(85293),Depth:n(14975),Flip:n(92972),FX:n(88677),GetBounds:n(80693),Mask:n(39171),Origin:n(28072),PathFollower:n(54211),Pipeline:n(58210),PostPipeline:n(44086),ScrollFactor:n(45900),Size:n(31654),Texture:n(82081),TextureCrop:n(21850),Tint:n(58072),ToJSON:n(48129),Transform:n(56584),TransformMatrix:n(69360),Visible:n(59694)}},70339:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(59959),p=n(95723),h=n(56694),u=n(64937),d=n(56631),l=n(89980),c=n(74118),m=n(98524),f=n(58795),v=n(93736),S=new h({Extends:l,Mixins:[u.AlphaSingle,u.BlendMode,u.ComputedSize,u.Depth,u.Mask,u.PostPipeline,u.Transform,u.Visible,m],initialize:function(T,C,w,b){l.call(this,T,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new u.TransformMatrix,this.tempTransformMatrix=new u.TransformMatrix,this._sortKey="",this._sysEvents=T.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(C,w),this.setBlendMode(p.SKIP_CHECK),b&&this.add(b)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(x){return x===void 0&&(x=!0),this.exclusive=x,this},getBounds:function(x){if(x===void 0&&(x=new c),x.setTo(this.x,this.y,0,0),this.parentContainer){var T=this.parentContainer.getBoundsTransformMatrix(),C=T.transformPoint(this.x,this.y);x.setTo(C.x,C.y,0,0)}if(this.list.length>0){var w=this.list,b=new c,E=!1;x.setEmpty();for(var A=0;A<w.length;A++){var I=w[A];I.getBounds&&(I.getBounds(b),E?f(b,x,x):(x.setTo(b.x,b.y,b.width,b.height),E=!0))}}return x},addHandler:function(x){x.once(d.DESTROY,this.remove,this),this.exclusive&&(x.parentContainer&&x.parentContainer.remove(x),x.parentContainer=this,x.removeFromDisplayList(),x.addedToScene())},removeHandler:function(x){x.off(d.DESTROY,this.remove,this),this.exclusive&&(x.parentContainer=null,x.removedFromScene(),x.addToDisplayList())},pointToContainer:function(x,T){T===void 0&&(T=new v),this.parentContainer?this.parentContainer.pointToContainer(x,T):(T.x=x.x,T.y=x.y);var C=this.tempTransformMatrix;return C.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),C.invert(),C.transformPoint(x.x,x.y,T),T},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(x){return a.Add(this.list,x,this.maxSize,this.addHandler,this),this},addAt:function(x,T){return a.AddAt(this.list,x,T,this.maxSize,this.addHandler,this),this},getAt:function(x){return this.list[x]},getIndex:function(x){return this.list.indexOf(x)},sort:function(x,T){return x?(T===void 0&&(T=function(C,w){return C[x]-w[x]}),a.StableSort(this.list,T),this):this},getByName:function(x){return a.GetFirst(this.list,"name",x)},getRandom:function(x,T){return a.GetRandom(this.list,x,T)},getFirst:function(x,T,C,w){return a.GetFirst(this.list,x,T,C,w)},getAll:function(x,T,C,w){return a.GetAll(this.list,x,T,C,w)},count:function(x,T,C,w){return a.CountAllMatching(this.list,x,T,C,w)},swap:function(x,T){return a.Swap(this.list,x,T),this},moveTo:function(x,T){return a.MoveTo(this.list,x,T),this},moveAbove:function(x,T){return a.MoveAbove(this.list,x,T),this},moveBelow:function(x,T){return a.MoveBelow(this.list,x,T),this},remove:function(x,T){var C=a.Remove(this.list,x,this.removeHandler,this);if(T&&C){Array.isArray(C)||(C=[C]);for(var w=0;w<C.length;w++)C[w].destroy()}return this},removeAt:function(x,T){var C=a.RemoveAt(this.list,x,this.removeHandler,this);return T&&C&&C.destroy(),this},removeBetween:function(x,T,C){var w=a.RemoveBetween(this.list,x,T,this.removeHandler,this);if(C)for(var b=0;b<w.length;b++)w[b].destroy();return this},removeAll:function(x){var T=this.list;if(x){for(var C=0;C<T.length;C++)T[C]&&T[C].scene&&(T[C].off(d.DESTROY,this.remove,this),T[C].destroy());this.list=[]}else a.RemoveBetween(T,0,T.length,this.removeHandler,this);return this},bringToTop:function(x){return a.BringToTop(this.list,x),this},sendToBack:function(x){return a.SendToBack(this.list,x),this},moveUp:function(x){return a.MoveUp(this.list,x),this},moveDown:function(x){return a.MoveDown(this.list,x),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(x,T,C){var w=a.Replace(this.list,x,T);return w&&(this.addHandler(T),this.removeHandler(x),C&&x.destroy()),this},exists:function(x){return this.list.indexOf(x)>-1},setAll:function(x,T,C,w){return a.SetAll(this.list,x,T,C,w),this},each:function(x,T){var C=[null],w,b=this.list.slice(),E=b.length;for(w=2;w<arguments.length;w++)C.push(arguments[w]);for(w=0;w<E;w++)C[0]=b[w],x.apply(T,C);return this},iterate:function(x,T){var C=[null],w;for(w=2;w<arguments.length;w++)C.push(arguments[w]);for(w=0;w<this.list.length;w++)C[0]=this.list[w],x.apply(T,C);return this},setScrollFactor:function(x,T,C){return T===void 0&&(T=x),C===void 0&&(C=!1),this.scrollFactorX=x,this.scrollFactorY=T,C&&(a.SetAll(this.list,"scrollFactorX",x),a.SetAll(this.list,"scrollFactorY",T)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});r.exports=S},13916:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){p.addToRenderList(a);var u=a.list;if(u.length!==0){var d=a.localTransform;h?(d.loadIdentity(),d.multiply(h),d.translate(a.x,a.y),d.rotate(a.rotation),d.scale(a.scaleX,a.scaleY)):d.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var l=a.blendMode!==-1;l||n.setBlendMode(0);var c=a._alpha,m=a.scrollFactorX,f=a.scrollFactorY;a.mask&&a.mask.preRenderCanvas(n,null,p);for(var v=0;v<u.length;v++){var S=u[v];if(S.willRender(p)){var x=S.alpha,T=S.scrollFactorX,C=S.scrollFactorY;!l&&S.blendMode!==n.currentBlendMode&&n.setBlendMode(S.blendMode),S.setScrollFactor(T*m,C*f),S.setAlpha(x*c),S.renderCanvas(n,S,p,d),S.setAlpha(x),S.setScrollFactor(T,C)}}a.mask&&a.mask.postRenderCanvas(n)}};r.exports=g},44516:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(70339),h=n(99325),u=n(20494);h.register("container",function(d,l){d===void 0&&(d={});var c=u(d,"x",0),m=u(d,"y",0),f=u(d,"children",null),v=new p(this.scene,c,m,f);return l!==void 0&&(d.add=l),a(this.scene,v,d),v})},23400:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(70339),p=n(61286);p.register("container",function(h,u,d){return this.displayList.add(new a(this.scene,h,u,d))})},98524:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(36934),h=n(13916),r.exports={renderWebGL:p,renderCanvas:h}},36934:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){p.addToRenderList(a);var u=a.list,d=u.length;if(d!==0){var l=a.localTransform;h?(l.loadIdentity(),l.multiply(h),l.translate(a.x,a.y),l.rotate(a.rotation),l.scale(a.scaleX,a.scaleY)):l.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),n.pipelines.preBatch(a);var c=a.blendMode!==-1;c||n.setBlendMode(0);for(var m=a.alpha,f=a.scrollFactorX,v=a.scrollFactorY,S=0;S<d;S++){var x=u[S];if(x.willRender(p)){var T,C,w,b;if(x.alphaTopLeft!==void 0)T=x.alphaTopLeft,C=x.alphaTopRight,w=x.alphaBottomLeft,b=x.alphaBottomRight;else{var E=x.alpha;T=E,C=E,w=E,b=E}var A=x.scrollFactorX,I=x.scrollFactorY;!c&&x.blendMode!==n.currentBlendMode&&n.setBlendMode(x.blendMode);var R=x.mask;R&&R.preRenderWebGL(n,x,p);var N=x.type;N!==n.currentType&&(n.newType=!0,n.currentType=N),n.nextTypeMatch=S<d-1?u[S+1].type===n.currentType:!1,x.setScrollFactor(A*f,I*v),x.setAlpha(T*m,C*m,w*m,b*m),x.renderWebGL(n,x,p,l,a),x.setAlpha(T,C,w,b),x.setScrollFactor(A,I),R&&R.postRenderWebGL(n,p),n.newType=!1}}n.pipelines.postBatch(a)}};r.exports=g},2452:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},38943:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(11603),u=n(89980),d=n(42911),l=n(55638),c=n(7599),m=n(51729),f=new a({Extends:u,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Origin,p.ScrollFactor,p.Transform,p.Visible,h],initialize:function(S,x,T,C,w,b){u.call(this,S,"DOMElement"),this.parent=S.sys.game.domContainer,this.cache=S.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new m,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(x,T),typeof C=="string"?C[0]==="#"?this.setElement(C.substr(1),w,b):this.createElement(C,w,b):C&&this.setElement(C,w,b),S.sys.events.on(c.SLEEP,this.handleSceneEvent,this),S.sys.events.on(c.WAKE,this.handleSceneEvent,this),S.sys.events.on(c.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(v){var S=this.node,x=S.style;S&&(x.display=v.settings.visible?"block":"none")},setSkew:function(v,S){return v===void 0&&(v=0),S===void 0&&(S=v),this.skewX=v,this.skewY=S,this},setPerspective:function(v){return this.parent.style.perspective=v+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(v){this.parent.style.perspective=v+"px"}},addListener:function(v){if(this.node){v=v.split(" ");for(var S=0;S<v.length;S++)this.node.addEventListener(v[S],this.handler,!1)}return this},removeListener:function(v){if(this.node){v=v.split(" ");for(var S=0;S<v.length;S++)this.node.removeEventListener(v[S],this.handler)}return this},dispatchNativeEvent:function(v){this.emit(v.type,v)},createElement:function(v,S,x){return this.setElement(document.createElement(v),S,x)},setElement:function(v,S,x){this.removeElement();var T;if(typeof v=="string"?(v[0]==="#"&&(v=v.substr(1)),T=document.getElementById(v)):typeof v=="object"&&v.nodeType===1&&(T=v),!T)return this;if(this.node=T,S&&d(S))for(var C in S)T.style[C]=S[C];else typeof S=="string"&&(T.style=S);return T.style.zIndex="0",T.style.display="inline",T.style.position="absolute",T.phaser=this,this.parent&&this.parent.appendChild(T),x&&(T.innerText=x),this.updateSize()},createFromCache:function(v,S){var x=this.cache.get(v);return x&&this.createFromHTML(x,S),this},createFromHTML:function(v,S){S===void 0&&(S="div"),this.removeElement();var x=document.createElement(S);return this.node=x,x.style.zIndex="0",x.style.display="inline",x.style.position="absolute",x.phaser=this,this.parent&&this.parent.appendChild(x),x.innerHTML=v,this.updateSize()},removeElement:function(){return this.node&&(l(this.node),this.node=null),this},updateSize:function(){var v=this.node,S=v.getBoundingClientRect();return this.width=v.clientWidth,this.height=v.clientHeight,this.displayWidth=S.width||0,this.displayHeight=S.height||0,this},getChildByProperty:function(v,S){if(this.node){for(var x=this.node.querySelectorAll("*"),T=0;T<x.length;T++)if(x[T][v]===S)return x[T]}return null},getChildByID:function(v){return this.getChildByProperty("id",v)},getChildByName:function(v){return this.getChildByProperty("name",v)},setClassName:function(v){return this.node&&(this.node.className=v,this.updateSize()),this},setText:function(v){return this.node&&(this.node.innerText=v,this.updateSize()),this},setHTML:function(v){return this.node&&(this.node.innerHTML=v,this.updateSize()),this},preRender:function(){var v=this.parentContainer,S=this.node;S&&v&&!v.willRender()&&(S.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(c.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(c.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(c.PRE_RENDER,this.preRender,this)}});r.exports=f},66070:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(2452),p=n(89980),h=n(69360),u=new h,d=new h,l=new h,c=function(m,f,v,S){if(f.node){var x=f.node.style,T=f.scene.sys.settings;if(!x||!T.visible||p.RENDER_MASK!==f.renderFlags||f.cameraFilter!==0&&f.cameraFilter&v.id||f.parentContainer&&!f.parentContainer.willRender()){x.display="none";return}var C=f.parentContainer,w=v.alpha*f.alpha;C&&(w*=C.alpha);var b=u,E=d,A=l,I=0,R=0,N="0%",F="0%";S?(I=f.width*f.scaleX*f.originX,R=f.height*f.scaleY*f.originY,E.applyITRS(f.x-I,f.y-R,f.rotation,f.scaleX,f.scaleY),b.copyFrom(v.matrix),b.multiplyWithOffset(S,-v.scrollX*f.scrollFactorX,-v.scrollY*f.scrollFactorY),E.e=f.x-I,E.f=f.y-R,b.multiply(E,A)):(I=f.width*f.originX,R=f.height*f.originY,E.applyITRS(f.x-I,f.y-R,f.rotation,f.scaleX,f.scaleY),b.copyFrom(v.matrix),N=100*f.originX+"%",F=100*f.originY+"%",E.e-=v.scrollX*f.scrollFactorX,E.f-=v.scrollY*f.scrollFactorY,b.multiply(E,A)),f.transformOnly||(x.display="block",x.opacity=w,x.zIndex=f._depth,x.pointerEvents=f.pointerEvents,x.mixBlendMode=a[f._blendMode]),x.transform=A.getCSSMatrix()+" skew("+f.skewX+"rad, "+f.skewY+"rad) rotate3d("+f.rotate3d.x+","+f.rotate3d.y+","+f.rotate3d.z+","+f.rotate3d.w+f.rotate3dAngle+")",x.transformOrigin=N+" "+F}};r.exports=c},66788:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(38943),p=n(61286);p.register("dom",function(h,u,d,l,c){var m=new a(this.scene,h,u,d,l,c);return this.displayList.add(m),m})},11603:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(66070),h=n(66070),r.exports={renderWebGL:p,renderCanvas:h}},65492:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addedtoscene"},98398:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},40239:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removedfromscene"},17286:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"},31496:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="created"},89587:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="error"},59792:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="locked"},96342:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loop"},6017:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="playing"},49614:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="play"},24418:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="seeked"},87318:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="seeking"},50009:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stalled"},61922:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"},79501:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="textureready"},4052:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="unlocked"},54857:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="unsupported"},56631:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADDED_TO_SCENE:n(65492),DESTROY:n(98398),REMOVED_FROM_SCENE:n(40239),VIDEO_COMPLETE:n(17286),VIDEO_CREATED:n(31496),VIDEO_ERROR:n(89587),VIDEO_LOCKED:n(59792),VIDEO_LOOP:n(96342),VIDEO_PLAY:n(49614),VIDEO_PLAYING:n(6017),VIDEO_SEEKED:n(24418),VIDEO_SEEKING:n(87318),VIDEO_STALLED:n(50009),VIDEO_STOP:n(61922),VIDEO_TEXTURE:n(79501),VIDEO_UNLOCKED:n(4052),VIDEO_UNSUPPORTED:n(54857)}},39419:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(89980),u=n(79394),d=new a({Extends:h,Mixins:[p.Alpha,p.BlendMode,p.Depth,p.Flip,p.Origin,p.ScrollFactor,p.Size,p.Texture,p.Tint,p.Transform,p.Visible,u],initialize:function(c){h.call(this,c,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});r.exports=d},96699:()=>{},41155:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(39419),p=n(61286);p.register("extern",function(){var h=new a(this.scene);return this.displayList.add(h),h})},79394:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(81410),h=n(96699),r.exports={renderWebGL:p,renderCanvas:h}},81410:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=function(h,u,d,l){h.pipelines.clear();var c=a(u,d,l).calc;u.render.call(u,h,d,c),h.pipelines.rebind()};r.exports=p},36266:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},33182:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(51052),p=n(56694),h=n(36266),u=n(64937),d=n(95669),l=n(89980),c=n(72632),m=n(10850),f=n(83392),v=n(60898),S=new p({Extends:l,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.Transform,u.Visible,u.ScrollFactor,v],initialize:function(T,C){var w=m(C,"x",0),b=m(C,"y",0);l.call(this,T,"Graphics"),this.setPosition(w,b),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(C)},setDefaultStyles:function(x){return m(x,"lineStyle",null)&&(this.defaultStrokeWidth=m(x,"lineStyle.width",1),this.defaultStrokeColor=m(x,"lineStyle.color",16777215),this.defaultStrokeAlpha=m(x,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),m(x,"fillStyle",null)&&(this.defaultFillColor=m(x,"fillStyle.color",16777215),this.defaultFillAlpha=m(x,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(x,T,C){return C===void 0&&(C=1),this.commandBuffer.push(h.LINE_STYLE,x,T,C),this._lineWidth=x,this},fillStyle:function(x,T){return T===void 0&&(T=1),this.commandBuffer.push(h.FILL_STYLE,x,T),this},fillGradientStyle:function(x,T,C,w,b,E,A,I){return b===void 0&&(b=1),E===void 0&&(E=b),A===void 0&&(A=b),I===void 0&&(I=b),this.commandBuffer.push(h.GRADIENT_FILL_STYLE,b,E,A,I,x,T,C,w),this},lineGradientStyle:function(x,T,C,w,b,E){return E===void 0&&(E=1),this.commandBuffer.push(h.GRADIENT_LINE_STYLE,x,E,T,C,w,b),this},beginPath:function(){return this.commandBuffer.push(h.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(h.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(h.FILL_PATH),this},fill:function(){return this.commandBuffer.push(h.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(h.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(h.STROKE_PATH),this},fillCircleShape:function(x){return this.fillCircle(x.x,x.y,x.radius)},strokeCircleShape:function(x){return this.strokeCircle(x.x,x.y,x.radius)},fillCircle:function(x,T,C){return this.beginPath(),this.arc(x,T,C,0,f.PI2),this.fillPath(),this},strokeCircle:function(x,T,C){return this.beginPath(),this.arc(x,T,C,0,f.PI2),this.strokePath(),this},fillRectShape:function(x){return this.fillRect(x.x,x.y,x.width,x.height)},strokeRectShape:function(x){return this.strokeRect(x.x,x.y,x.width,x.height)},fillRect:function(x,T,C,w){return this.commandBuffer.push(h.FILL_RECT,x,T,C,w),this},strokeRect:function(x,T,C,w){var b=this._lineWidth/2,E=x-b,A=x+b;return this.beginPath(),this.moveTo(x,T),this.lineTo(x,T+w),this.strokePath(),this.beginPath(),this.moveTo(x+C,T),this.lineTo(x+C,T+w),this.strokePath(),this.beginPath(),this.moveTo(E,T),this.lineTo(A+C,T),this.strokePath(),this.beginPath(),this.moveTo(E,T+w),this.lineTo(A+C,T+w),this.strokePath(),this},fillRoundedRect:function(x,T,C,w,b){b===void 0&&(b=20);var E=b,A=b,I=b,R=b;typeof b!="number"&&(E=c(b,"tl",20),A=c(b,"tr",20),I=c(b,"bl",20),R=c(b,"br",20));var N=E>=0,F=A>=0,P=I>=0,D=R>=0;return E=Math.abs(E),A=Math.abs(A),I=Math.abs(I),R=Math.abs(R),this.beginPath(),this.moveTo(x+E,T),this.lineTo(x+C-A,T),F?this.arc(x+C-A,T+A,A,-f.TAU,0):this.arc(x+C,T,A,Math.PI,f.TAU,!0),this.lineTo(x+C,T+w-R),D?this.arc(x+C-R,T+w-R,R,0,f.TAU):this.arc(x+C,T+w,R,-f.TAU,Math.PI,!0),this.lineTo(x+I,T+w),P?this.arc(x+I,T+w-I,I,f.TAU,Math.PI):this.arc(x,T+w,I,0,-f.TAU,!0),this.lineTo(x,T+E),N?this.arc(x+E,T+E,E,-Math.PI,-f.TAU):this.arc(x,T,E,f.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(x,T,C,w,b){b===void 0&&(b=20);var E=b,A=b,I=b,R=b,N=Math.min(C,w)/2;typeof b!="number"&&(E=c(b,"tl",20),A=c(b,"tr",20),I=c(b,"bl",20),R=c(b,"br",20));var F=E>=0,P=A>=0,D=I>=0,M=R>=0;return E=Math.min(Math.abs(E),N),A=Math.min(Math.abs(A),N),I=Math.min(Math.abs(I),N),R=Math.min(Math.abs(R),N),this.beginPath(),this.moveTo(x+E,T),this.lineTo(x+C-A,T),this.moveTo(x+C-A,T),P?this.arc(x+C-A,T+A,A,-f.TAU,0):this.arc(x+C,T,A,Math.PI,f.TAU,!0),this.lineTo(x+C,T+w-R),this.moveTo(x+C,T+w-R),M?this.arc(x+C-R,T+w-R,R,0,f.TAU):this.arc(x+C,T+w,R,-f.TAU,Math.PI,!0),this.lineTo(x+I,T+w),this.moveTo(x+I,T+w),D?this.arc(x+I,T+w-I,I,f.TAU,Math.PI):this.arc(x,T+w,I,0,-f.TAU,!0),this.lineTo(x,T+E),this.moveTo(x,T+E),F?this.arc(x+E,T+E,E,-Math.PI,-f.TAU):this.arc(x,T,E,f.TAU,0,!0),this.strokePath(),this},fillPointShape:function(x,T){return this.fillPoint(x.x,x.y,T)},fillPoint:function(x,T,C){return!C||C<1?C=1:(x-=C/2,T-=C/2),this.commandBuffer.push(h.FILL_RECT,x,T,C,C),this},fillTriangleShape:function(x){return this.fillTriangle(x.x1,x.y1,x.x2,x.y2,x.x3,x.y3)},strokeTriangleShape:function(x){return this.strokeTriangle(x.x1,x.y1,x.x2,x.y2,x.x3,x.y3)},fillTriangle:function(x,T,C,w,b,E){return this.commandBuffer.push(h.FILL_TRIANGLE,x,T,C,w,b,E),this},strokeTriangle:function(x,T,C,w,b,E){return this.commandBuffer.push(h.STROKE_TRIANGLE,x,T,C,w,b,E),this},strokeLineShape:function(x){return this.lineBetween(x.x1,x.y1,x.x2,x.y2)},lineBetween:function(x,T,C,w){return this.beginPath(),this.moveTo(x,T),this.lineTo(C,w),this.strokePath(),this},lineTo:function(x,T){return this.commandBuffer.push(h.LINE_TO,x,T),this},moveTo:function(x,T){return this.commandBuffer.push(h.MOVE_TO,x,T),this},strokePoints:function(x,T,C,w){T===void 0&&(T=!1),C===void 0&&(C=!1),w===void 0&&(w=x.length),this.beginPath(),this.moveTo(x[0].x,x[0].y);for(var b=1;b<w;b++)this.lineTo(x[b].x,x[b].y);return T&&this.lineTo(x[0].x,x[0].y),C&&this.closePath(),this.strokePath(),this},fillPoints:function(x,T,C,w){T===void 0&&(T=!1),C===void 0&&(C=!1),w===void 0&&(w=x.length),this.beginPath(),this.moveTo(x[0].x,x[0].y);for(var b=1;b<w;b++)this.lineTo(x[b].x,x[b].y);return T&&this.lineTo(x[0].x,x[0].y),C&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(x,T){T===void 0&&(T=32);var C=x.getPoints(T);return this.strokePoints(C,!0)},strokeEllipse:function(x,T,C,w,b){b===void 0&&(b=32);var E=new d(x,T,C,w),A=E.getPoints(b);return this.strokePoints(A,!0)},fillEllipseShape:function(x,T){T===void 0&&(T=32);var C=x.getPoints(T);return this.fillPoints(C,!0)},fillEllipse:function(x,T,C,w,b){b===void 0&&(b=32);var E=new d(x,T,C,w),A=E.getPoints(b);return this.fillPoints(A,!0)},arc:function(x,T,C,w,b,E,A){return E===void 0&&(E=!1),A===void 0&&(A=0),this.commandBuffer.push(h.ARC,x,T,C,w,b,E,A),this},slice:function(x,T,C,w,b,E,A){return E===void 0&&(E=!1),A===void 0&&(A=0),this.commandBuffer.push(h.BEGIN_PATH),this.commandBuffer.push(h.MOVE_TO,x,T),this.commandBuffer.push(h.ARC,x,T,C,w,b,E,A),this.commandBuffer.push(h.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(h.SAVE),this},restore:function(){return this.commandBuffer.push(h.RESTORE),this},translateCanvas:function(x,T){return this.commandBuffer.push(h.TRANSLATE,x,T),this},scaleCanvas:function(x,T){return this.commandBuffer.push(h.SCALE,x,T),this},rotateCanvas:function(x){return this.commandBuffer.push(h.ROTATE,x),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(x,T,C){var w=this.scene.sys,b=w.game.renderer;T===void 0&&(T=w.scale.width),C===void 0&&(C=w.scale.height),S.TargetCamera.setScene(this.scene),S.TargetCamera.setViewport(0,0,T,C),S.TargetCamera.scrollX=this.x,S.TargetCamera.scrollY=this.y;var E,A,I={willReadFrequently:!0};if(typeof x=="string")if(w.textures.exists(x)){E=w.textures.get(x);var R=E.getSourceImage();R instanceof HTMLCanvasElement&&(A=R.getContext("2d",I))}else E=w.textures.createCanvas(x,T,C),A=E.getSourceImage().getContext("2d",I);else x instanceof HTMLCanvasElement&&(A=x.getContext("2d",I));return A&&(this.renderCanvas(b,this,S.TargetCamera,null,A,!1),E&&E.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});S.TargetCamera=new a,r.exports=S},91543:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(36266),p=n(49584),h=function(u,d,l,c,m,f){var v=d.commandBuffer,S=v.length,x=m||u.currentContext;if(!(S===0||!p(u,x,d,l,c))){l.addToRenderList(d);var T=1,C=1,w=0,b=0,E=1,A=0,I=0,R=0;x.beginPath();for(var N=0;N<S;++N){var F=v[N];switch(F){case a.ARC:x.arc(v[N+1],v[N+2],v[N+3],v[N+4],v[N+5],v[N+6]),N+=7;break;case a.LINE_STYLE:E=v[N+1],w=v[N+2],T=v[N+3],A=(w&16711680)>>>16,I=(w&65280)>>>8,R=w&255,x.strokeStyle="rgba("+A+","+I+","+R+","+T+")",x.lineWidth=E,N+=3;break;case a.FILL_STYLE:b=v[N+1],C=v[N+2],A=(b&16711680)>>>16,I=(b&65280)>>>8,R=b&255,x.fillStyle="rgba("+A+","+I+","+R+","+C+")",N+=2;break;case a.BEGIN_PATH:x.beginPath();break;case a.CLOSE_PATH:x.closePath();break;case a.FILL_PATH:f||x.fill();break;case a.STROKE_PATH:f||x.stroke();break;case a.FILL_RECT:f?x.rect(v[N+1],v[N+2],v[N+3],v[N+4]):x.fillRect(v[N+1],v[N+2],v[N+3],v[N+4]),N+=4;break;case a.FILL_TRIANGLE:x.beginPath(),x.moveTo(v[N+1],v[N+2]),x.lineTo(v[N+3],v[N+4]),x.lineTo(v[N+5],v[N+6]),x.closePath(),f||x.fill(),N+=6;break;case a.STROKE_TRIANGLE:x.beginPath(),x.moveTo(v[N+1],v[N+2]),x.lineTo(v[N+3],v[N+4]),x.lineTo(v[N+5],v[N+6]),x.closePath(),f||x.stroke(),N+=6;break;case a.LINE_TO:x.lineTo(v[N+1],v[N+2]),N+=2;break;case a.MOVE_TO:x.moveTo(v[N+1],v[N+2]),N+=2;break;case a.LINE_FX_TO:x.lineTo(v[N+1],v[N+2]),N+=5;break;case a.MOVE_FX_TO:x.moveTo(v[N+1],v[N+2]),N+=5;break;case a.SAVE:x.save();break;case a.RESTORE:x.restore();break;case a.TRANSLATE:x.translate(v[N+1],v[N+2]),N+=2;break;case a.SCALE:x.scale(v[N+1],v[N+2]),N+=2;break;case a.ROTATE:x.rotate(v[N+1]),N+=1;break;case a.GRADIENT_FILL_STYLE:N+=5;break;case a.GRADIENT_LINE_STYLE:N+=6;break}}x.restore()}};r.exports=h},41286:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(99325),p=n(33182);a.register("graphics",function(h,u){h===void 0&&(h={}),u!==void 0&&(h.add=u);var d=new p(this.scene,h);return h.add&&this.scene.sys.displayList.add(d),d})},13122:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(33182),p=n(61286);p.register("graphics",function(h){return this.displayList.add(new a(this.scene,h))})},60898:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(34429),h=n(91543),h=n(91543),r.exports={renderWebGL:p,renderCanvas:h}},34429:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(36266),p=n(73329),h=n(69360),u=n(75512),d=function(v,S,x){this.x=v,this.y=S,this.width=x},l=function(v,S,x){this.points=[],this.pointsLength=1,this.points[0]=new d(v,S,x)},c=[],m=new h,f=function(v,S,x,T){if(S.commandBuffer.length!==0){x.addToRenderList(S);var C=v.pipelines.set(S.pipeline,S);v.pipelines.preBatch(S);for(var w=p(S,x,T).calc,b=m.loadIdentity(),E=S.commandBuffer,A=x.alpha*S.alpha,I=1,R=C.fillTint,N=C.strokeTint,F=0,P=0,D=0,M=.01,L=Math.PI*2,k,V=[],W=0,K=!0,B=null,G=u.getTintAppendFloatAlpha,O=0;O<E.length;O++)switch(k=E[O],k){case a.BEGIN_PATH:{V.length=0,B=null,K=!0;break}case a.CLOSE_PATH:{K=!1,B&&B.points.length&&B.points.push(B.points[0]);break}case a.FILL_PATH:{for(W=0;W<V.length;W++)C.batchFillPath(V[W].points,b,w);break}case a.STROKE_PATH:{for(W=0;W<V.length;W++)C.batchStrokePath(V[W].points,I,K,b,w);break}case a.LINE_STYLE:{I=E[++O];var $=E[++O],z=E[++O]*A,X=G($,z);N.TL=X,N.TR=X,N.BL=X,N.BR=X;break}case a.FILL_STYLE:{var Y=E[++O],Z=E[++O]*A,J=G(Y,Z);R.TL=J,R.TR=J,R.BL=J,R.BR=J;break}case a.GRADIENT_FILL_STYLE:{var tt=E[++O]*A,et=E[++O]*A,lt=E[++O]*A,ut=E[++O]*A;R.TL=G(E[++O],tt),R.TR=G(E[++O],et),R.BL=G(E[++O],lt),R.BR=G(E[++O],ut);break}case a.GRADIENT_LINE_STYLE:{I=E[++O];var ct=E[++O]*A;N.TL=G(E[++O],ct),N.TR=G(E[++O],ct),N.BL=G(E[++O],ct),N.BR=G(E[++O],ct);break}case a.ARC:{var ht=0,xt=E[++O],Tt=E[++O],At=E[++O],Rt=E[++O],mt=E[++O],bt=E[++O],Ct=E[++O];for(mt-=Rt,bt?mt<-L?mt=-L:mt>0&&(mt=-L+mt%L):mt>L?mt=L:mt<0&&(mt=L+mt%L),B===null&&(B=new l(xt+Math.cos(Rt)*At,Tt+Math.sin(Rt)*At,I),V.push(B),ht+=M);ht<1+Ct;)D=mt*ht+Rt,F=xt+Math.cos(D)*At,P=Tt+Math.sin(D)*At,B.points.push(new d(F,P,I)),ht+=M;D=mt+Rt,F=xt+Math.cos(D)*At,P=Tt+Math.sin(D)*At,B.points.push(new d(F,P,I));break}case a.FILL_RECT:{C.batchFillRect(E[++O],E[++O],E[++O],E[++O],b,w);break}case a.FILL_TRIANGLE:{C.batchFillTriangle(E[++O],E[++O],E[++O],E[++O],E[++O],E[++O],b,w);break}case a.STROKE_TRIANGLE:{C.batchStrokeTriangle(E[++O],E[++O],E[++O],E[++O],E[++O],E[++O],I,b,w);break}case a.LINE_TO:{B!==null?B.points.push(new d(E[++O],E[++O],I)):(B=new l(E[++O],E[++O],I),V.push(B));break}case a.MOVE_TO:{B=new l(E[++O],E[++O],I),V.push(B);break}case a.SAVE:{c.push(b.copyToArray());break}case a.RESTORE:{b.copyFromArray(c.pop());break}case a.TRANSLATE:{xt=E[++O],Tt=E[++O],b.translate(xt,Tt);break}case a.SCALE:{xt=E[++O],Tt=E[++O],b.scale(xt,Tt);break}case a.ROTATE:{b.rotate(E[++O]);break}}v.pipelines.postBatch(S)}};r.exports=f},59192:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83979),p=n(56694),h=n(56631),u=n(6659),d=n(71608),l=n(72632),c=n(10850),m=n(19256),f=n(42911),v=n(75757),S=n(58403),x=n(13747),T=new p({Extends:u,initialize:function(w,b,E){u.call(this),E?b&&!Array.isArray(b)&&(b=[b]):Array.isArray(b)?f(b[0])&&(E=b,b=null):f(b)&&(E=b,b=null),this.scene=w,this.children=new S,this.isParent=!0,this.type="Group",this.classType=l(E,"classType",x),this.name=l(E,"name",""),this.active=l(E,"active",!0),this.maxSize=l(E,"maxSize",-1),this.defaultKey=l(E,"defaultKey",null),this.defaultFrame=l(E,"defaultFrame",null),this.runChildUpdate=l(E,"runChildUpdate",!1),this.createCallback=l(E,"createCallback",null),this.removeCallback=l(E,"removeCallback",null),this.createMultipleCallback=l(E,"createMultipleCallback",null),this.internalCreateCallback=l(E,"internalCreateCallback",null),this.internalRemoveCallback=l(E,"internalRemoveCallback",null),b&&this.addMultiple(b),E&&this.createMultiple(E),this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(C,w,b,E,A,I){if(C===void 0&&(C=0),w===void 0&&(w=0),b===void 0&&(b=this.defaultKey),E===void 0&&(E=this.defaultFrame),A===void 0&&(A=!0),I===void 0&&(I=!0),this.isFull())return null;var R=new this.classType(this.scene,C,w,b,E);return R.addToDisplayList(this.scene.sys.displayList),R.addToUpdateList(),R.visible=A,R.setActive(I),this.add(R),R},createMultiple:function(C){if(this.isFull())return[];Array.isArray(C)||(C=[C]);var w=[];if(C[0].key)for(var b=0;b<C.length;b++){var E=this.createFromConfig(C[b]);w=w.concat(E)}return w},createFromConfig:function(C){if(this.isFull())return[];this.classType=l(C,"classType",this.classType);var w=l(C,"key",void 0),b=l(C,"frame",null),E=l(C,"visible",!0),A=l(C,"active",!0),I=[];if(w===void 0)return I;Array.isArray(w)||(w=[w]),Array.isArray(b)||(b=[b]);var R=l(C,"repeat",0),N=l(C,"randomKey",!1),F=l(C,"randomFrame",!1),P=l(C,"yoyo",!1),D=l(C,"quantity",!1),M=l(C,"frameQuantity",1),L=l(C,"max",0),k=v(w,b,{max:L,qty:D||M,random:N,randomB:F,repeat:R,yoyo:P});C.createCallback&&(this.createCallback=C.createCallback),C.removeCallback&&(this.removeCallback=C.removeCallback);for(var V=0;V<k.length;V++){var W=this.create(0,0,k[V].a,k[V].b,E,A);if(!W)break;I.push(W)}if(m(C,"setXY")){var K=c(C,"setXY.x",0),B=c(C,"setXY.y",0),G=c(C,"setXY.stepX",0),O=c(C,"setXY.stepY",0);a.SetXY(I,K,B,G,O)}if(m(C,"setRotation")){var $=c(C,"setRotation.value",0),z=c(C,"setRotation.step",0);a.SetRotation(I,$,z)}if(m(C,"setScale")){var X=c(C,"setScale.x",1),Y=c(C,"setScale.y",X),Z=c(C,"setScale.stepX",0),J=c(C,"setScale.stepY",0);a.SetScale(I,X,Y,Z,J)}if(m(C,"setOrigin")){var tt=c(C,"setOrigin.x",.5),et=c(C,"setOrigin.y",tt),lt=c(C,"setOrigin.stepX",0),ut=c(C,"setOrigin.stepY",0);a.SetOrigin(I,tt,et,lt,ut)}if(m(C,"setAlpha")){var ct=c(C,"setAlpha.value",1),ht=c(C,"setAlpha.step",0);a.SetAlpha(I,ct,ht)}if(m(C,"setDepth")){var xt=c(C,"setDepth.value",0),Tt=c(C,"setDepth.step",0);a.SetDepth(I,xt,Tt)}if(m(C,"setScrollFactor")){var At=c(C,"setScrollFactor.x",1),Rt=c(C,"setScrollFactor.y",At),mt=c(C,"setScrollFactor.stepX",0),bt=c(C,"setScrollFactor.stepY",0);a.SetScrollFactor(I,At,Rt,mt,bt)}var Ct=l(C,"hitArea",null),Ht=l(C,"hitAreaCallback",null);Ct&&a.SetHitArea(I,Ct,Ht);var zt=l(C,"gridAlign",!1);return zt&&a.GridAlign(I,zt),this.createMultipleCallback&&this.createMultipleCallback.call(this,I),I},preUpdate:function(C,w){if(!(!this.runChildUpdate||this.children.size===0))for(var b=this.children.entries.slice(),E=0;E<b.length;E++){var A=b[E];A.active&&A.update(C,w)}},add:function(C,w){return w===void 0&&(w=!1),this.isFull()?this:(this.children.set(C),this.internalCreateCallback&&this.internalCreateCallback.call(this,C),this.createCallback&&this.createCallback.call(this,C),w&&(C.addToDisplayList(this.scene.sys.displayList),C.addToUpdateList()),C.on(h.DESTROY,this.remove,this),this)},addMultiple:function(C,w){if(w===void 0&&(w=!1),Array.isArray(C))for(var b=0;b<C.length;b++)this.add(C[b],w);return this},remove:function(C,w,b){return w===void 0&&(w=!1),b===void 0&&(b=!1),this.children.contains(C)?(this.children.delete(C),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,C),this.removeCallback&&this.removeCallback.call(this,C),C.off(h.DESTROY,this.remove,this),b?C.destroy():w&&(C.removeFromDisplayList(),C.removeFromUpdateList()),this):this},clear:function(C,w){C===void 0&&(C=!1),w===void 0&&(w=!1);for(var b=this.children,E=0;E<b.size;E++){var A=b.entries[E];A.off(h.DESTROY,this.remove,this),w?A.destroy():C&&(A.removeFromDisplayList(),A.removeFromUpdateList())}return this.children.clear(),this},contains:function(C){return this.children.contains(C)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(C,w,b,E){return d(this.children.entries,C,w,b,E)},getFirst:function(C,w,b,E,A,I,R){return this.getHandler(!0,1,C,w,b,E,A,I,R)},getFirstNth:function(C,w,b,E,A,I,R,N){return this.getHandler(!0,C,w,b,E,A,I,R,N)},getLast:function(C,w,b,E,A,I,R){return this.getHandler(!1,1,C,w,b,E,A,I,R)},getLastNth:function(C,w,b,E,A,I,R,N){return this.getHandler(!1,C,w,b,E,A,I,R,N)},getHandler:function(C,w,b,E,A,I,R,N,F){b===void 0&&(b=!1),E===void 0&&(E=!1);var P,D,M=0,L=this.children.entries;if(C)for(D=0;D<L.length;D++)if(P=L[D],P.active===b){if(M++,M===w)break}else P=null;else for(D=L.length-1;D>=0;D--)if(P=L[D],P.active===b){if(M++,M===w)break}else P=null;return P?(typeof A=="number"&&(P.x=A),typeof I=="number"&&(P.y=I),P):E?this.create(A,I,R,N,F):null},get:function(C,w,b,E,A){return this.getFirst(!1,!0,C,w,b,E,A)},getFirstAlive:function(C,w,b,E,A,I){return this.getFirst(!0,C,w,b,E,A,I)},getFirstDead:function(C,w,b,E,A,I){return this.getFirst(!1,C,w,b,E,A,I)},playAnimation:function(C,w){return a.PlayAnimation(this.children.entries,C,w),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(C){C===void 0&&(C=!0);for(var w=0,b=0;b<this.children.size;b++)this.children.entries[b].active===C&&w++;return w},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var C=this.getTotalUsed(),w=this.maxSize===-1?999999999999:this.maxSize;return w-C},setActive:function(C){return this.active=C,this},setName:function(C){return this.name=C,this},propertyValueSet:function(C,w,b,E,A){return a.PropertyValueSet(this.children.entries,C,w,b,E,A),this},propertyValueInc:function(C,w,b,E,A){return a.PropertyValueInc(this.children.entries,C,w,b,E,A),this},setX:function(C,w){return a.SetX(this.children.entries,C,w),this},setY:function(C,w){return a.SetY(this.children.entries,C,w),this},setXY:function(C,w,b,E){return a.SetXY(this.children.entries,C,w,b,E),this},incX:function(C,w){return a.IncX(this.children.entries,C,w),this},incY:function(C,w){return a.IncY(this.children.entries,C,w),this},incXY:function(C,w,b,E){return a.IncXY(this.children.entries,C,w,b,E),this},shiftPosition:function(C,w,b){return a.ShiftPosition(this.children.entries,C,w,b),this},angle:function(C,w){return a.Angle(this.children.entries,C,w),this},rotate:function(C,w){return a.Rotate(this.children.entries,C,w),this},rotateAround:function(C,w){return a.RotateAround(this.children.entries,C,w),this},rotateAroundDistance:function(C,w,b){return a.RotateAroundDistance(this.children.entries,C,w,b),this},setAlpha:function(C,w){return a.SetAlpha(this.children.entries,C,w),this},setTint:function(C,w,b,E){return a.SetTint(this.children.entries,C,w,b,E),this},setOrigin:function(C,w,b,E){return a.SetOrigin(this.children.entries,C,w,b,E),this},scaleX:function(C,w){return a.ScaleX(this.children.entries,C,w),this},scaleY:function(C,w){return a.ScaleY(this.children.entries,C,w),this},scaleXY:function(C,w,b,E){return a.ScaleXY(this.children.entries,C,w,b,E),this},setDepth:function(C,w){return a.SetDepth(this.children.entries,C,w),this},setBlendMode:function(C){return a.SetBlendMode(this.children.entries,C),this},setHitArea:function(C,w){return a.SetHitArea(this.children.entries,C,w),this},shuffle:function(){return a.Shuffle(this.children.entries),this},kill:function(C){this.children.contains(C)&&C.setActive(!1)},killAndHide:function(C){this.children.contains(C)&&(C.setActive(!1),C.setVisible(!1))},setVisible:function(C,w,b){return a.SetVisible(this.children.entries,C,w,b),this},toggleVisible:function(){return a.ToggleVisible(this.children.entries),this},destroy:function(C,w){C===void 0&&(C=!1),w===void 0&&(w=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(h.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(w,C),this.scene=void 0,this.children=void 0)}});r.exports=T},61295:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(99325),p=n(59192);a.register("group",function(h){return new p(this.scene,null,h)})},62598:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(59192),p=n(61286);p.register("group",function(h,u){return this.updateList.add(new a(this.scene,h,u))})},1539:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(89980),u=n(57322),d=new a({Extends:h,Mixins:[p.Alpha,p.BlendMode,p.Depth,p.Flip,p.GetBounds,p.Mask,p.Origin,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Size,p.TextureCrop,p.Tint,p.Transform,p.Visible,u],initialize:function(c,m,f,v,S){h.call(this,c,"Image"),this._crop=this.resetCropObject(),this.setTexture(v,S),this.setPosition(m,f),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=d},57786:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){p.addToRenderList(a),n.batchSprite(a,a.frame,p,h)};r.exports=g},83556:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(99325),h=n(20494),u=n(1539);p.register("image",function(d,l){d===void 0&&(d={});var c=h(d,"key",null),m=h(d,"frame",null),f=new u(this.scene,0,0,c,m);return l!==void 0&&(d.add=l),a(this.scene,f,d),f})},20927:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(1539),p=n(61286);p.register("image",function(h,u,d,l){return this.displayList.add(new a(this.scene,h,u,d,l))})},57322:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(59390),h=n(57786),r.exports={renderWebGL:p,renderCanvas:h}},59390:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){p.addToRenderList(a),this.pipeline.batchSprite(a,p,h)};r.exports=g},48013:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Events:n(56631),DisplayList:n(91713),GameObjectCreator:n(99325),GameObjectFactory:n(61286),UpdateList:n(92034),Components:n(64937),GetCalcMatrix:n(73329),BuildGameObject:n(88933),BuildGameObjectAnimation:n(32291),GameObject:n(89980),BitmapText:n(44616),Blitter:n(52816),Bob:n(41664),Container:n(70339),DOMElement:n(38943),DynamicBitmapText:n(13468),Extern:n(39419),Graphics:n(33182),Group:n(59192),Image:n(1539),Layer:n(85305),Particles:n(27684),PathFollower:n(29598),RenderTexture:n(15996),RetroFont:n(55873),Rope:n(79968),Sprite:n(13747),Text:n(76555),GetTextSize:n(32979),MeasureText:n(27030),TextStyle:n(74744),TileSprite:n(35856),Zone:n(71030),Video:n(8630),Shape:n(91461),Arc:n(28593),Curve:n(15220),Ellipse:n(28591),Grid:n(39169),IsoBox:n(4415),IsoTriangle:n(65159),Line:n(579),Polygon:n(91249),Rectangle:n(517),Star:n(77843),Triangle:n(21873),Factories:{Blitter:n(38906),Container:n(23400),DOMElement:n(66788),DynamicBitmapText:n(94145),Extern:n(41155),Graphics:n(13122),Group:n(62598),Image:n(20927),Layer:n(17676),Particles:n(81212),PathFollower:n(19626),RenderTexture:n(29599),Rope:n(31982),Sprite:n(66135),StaticBitmapText:n(21797),Text:n(94627),TileSprite:n(20509),Zone:n(34546),Video:n(215),Arc:n(10369),Curve:n(10147),Ellipse:n(99869),Grid:n(9326),IsoBox:n(88154),IsoTriangle:n(67765),Line:n(85665),Polygon:n(88203),Rectangle:n(94355),Star:n(23962),Triangle:n(79296)},Creators:{Blitter:n(68452),Container:n(44516),DynamicBitmapText:n(67513),Graphics:n(41286),Group:n(61295),Image:n(83556),Layer:n(56378),Particles:n(765),RenderTexture:n(85692),Rope:n(96027),Sprite:n(89219),StaticBitmapText:n(95499),Text:n(75397),TileSprite:n(63950),Zone:n(24067),Video:n(65601)}};a.Shader=n(27902),a.Mesh=n(83321),a.NineSlice=n(44139),a.PointLight=n(13171),a.Plane=n(33412),a.Factories.Shader=n(51979),a.Factories.Mesh=n(8767),a.Factories.NineSlice=n(53778),a.Factories.PointLight=n(91201),a.Factories.Plane=n(58322),a.Creators.Shader=n(13908),a.Creators.Mesh=n(41839),a.Creators.NineSlice=n(40964),a.Creators.PointLight=n(162),a.Creators.Plane=n(10912),a.Light=n(14455),a.LightsManager=n(26193),a.LightsPlugin=n(50296),r.exports=a},85305:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(95723),p=n(56694),h=n(64937),u=n(48129),d=n(81078),l=n(6659),c=n(56631),m=n(71207),f=n(58010),v=n(7599),S=n(17922),x=new p({Extends:m,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.PostPipeline,h.Visible,l,f],initialize:function(C,w){m.call(this,C),l.call(this),this.scene=C,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=C.sys,this.events=C.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),w&&this.add(w),C.sys.queueDepthSort()},setActive:function(T){return this.active=T,this},setName:function(T){return this.name=T,this},setState:function(T){return this.state=T,this},setDataEnabled:function(){return this.data||(this.data=new d(this)),this},setData:function(T,C){return this.data||(this.data=new d(this)),this.data.set(T,C),this},incData:function(T,C){return this.data||(this.data=new d(this)),this.data.inc(T,C),this},toggleData:function(T){return this.data||(this.data=new d(this)),this.data.toggle(T),this},getData:function(T){return this.data||(this.data=new d(this)),this.data.get(T)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(T){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&T.id)},getIndexList:function(){for(var T=this,C=this.parentContainer,w=[];C&&(w.unshift(C.getIndex(T)),T=C,C.parentContainer);)C=C.parentContainer;return w.unshift(this.displayList.getIndex(T)),w},addChildCallback:function(T){T.displayList&&T.displayList!==this&&T.removeFromDisplayList(),T.displayList||(this.queueDepthSort(),T.displayList=this,T.emit(c.ADDED_TO_SCENE,T,this.scene),this.events.emit(v.ADDED_TO_SCENE,T,this.scene))},removeChildCallback:function(T){this.queueDepthSort(),T.displayList=null,T.emit(c.REMOVED_FROM_SCENE,T,this.scene),this.events.emit(v.REMOVED_FROM_SCENE,T,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(S(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(T,C){return T._depth-C._depth},getChildren:function(){return this.list},addToDisplayList:function(T){return T===void 0&&(T=this.scene.sys.displayList),this.displayList&&this.displayList!==T&&this.removeFromDisplayList(),T.exists(this)||(this.displayList=T,T.add(this,!0),T.queueDepthSort(),this.emit(c.ADDED_TO_SCENE,this,this.scene),T.events.emit(v.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var T=this.displayList||this.scene.sys.displayList;return T.exists(this)&&(T.remove(this,!0),T.queueDepthSort(),this.displayList=null,this.emit(c.REMOVED_FROM_SCENE,this,this.scene),T.events.emit(v.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(T){if(!(!this.scene||this.ignoreDestroy)){this.emit(c.DESTROY,this);for(var C=this.list;C.length;)C[0].destroy(T);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});r.exports=x},834:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=a.list;if(h.length!==0){a.depthSort();var u=a.blendMode!==-1;u||n.setBlendMode(0);var d=a._alpha;a.mask&&a.mask.preRenderCanvas(n,null,p);for(var l=0;l<h.length;l++){var c=h[l];if(c.willRender(p)){var m=c.alpha;!u&&c.blendMode!==n.currentBlendMode&&n.setBlendMode(c.blendMode),c.setAlpha(m*d),c.renderCanvas(n,c,p),c.setAlpha(m)}}a.mask&&a.mask.postRenderCanvas(n)}};r.exports=g},56378:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(85305),h=n(99325),u=n(20494);h.register("layer",function(d,l){d===void 0&&(d={});var c=u(d,"children",null),m=new p(this.scene,c);return l!==void 0&&(d.add=l),a(this.scene,m,d),m})},17676:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(85305),p=n(61286);p.register("layer",function(h){return this.displayList.add(new a(this.scene,h))})},58010:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(17576),h=n(834),r.exports={renderWebGL:p,renderCanvas:h}},17576:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=a.list,u=h.length;if(u!==0){a.depthSort(),n.pipelines.preBatch(a);var d=a.blendMode!==-1;d||n.setBlendMode(0);for(var l=a.alpha,c=0;c<u;c++){var m=h[c];if(m.willRender(p)){var f,v,S,x;if(m.alphaTopLeft!==void 0)f=m.alphaTopLeft,v=m.alphaTopRight,S=m.alphaBottomLeft,x=m.alphaBottomRight;else{var T=m.alpha;f=T,v=T,S=T,x=T}!d&&m.blendMode!==n.currentBlendMode&&n.setBlendMode(m.blendMode);var C=m.mask;C&&C.preRenderWebGL(n,m,p);var w=m.type;w!==n.currentType&&(n.newType=!0,n.currentType=w),n.nextTypeMatch=c<u-1?h[c+1].type===n.currentType:!1,m.setAlpha(f*l,v*l,S*l,x*l),m.renderWebGL(n,m,p),m.setAlpha(f,v,S,x),C&&C.postRenderWebGL(n,p),n.newType=!1}}n.pipelines.postBatch(a)}};r.exports=g},14455:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(26673),p=n(56694),h=n(64937),u=n(39298),d=n(75512),l=new p({Extends:a,Mixins:[h.Origin,h.ScrollFactor,h.Transform,h.Visible],initialize:function(m,f,v,S,x,T,C){a.call(this,m,f,v),this.color=new u(S,x,T),this.intensity=C,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(v)},displayWidth:{get:function(){return this.diameter},set:function(c){this.diameter=c}},displayHeight:{get:function(){return this.diameter},set:function(c){this.diameter=c}},width:{get:function(){return this.diameter},set:function(c){this.diameter=c}},height:{get:function(){return this.diameter},set:function(c){this.diameter=c}},willRender:function(c){return!(l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},setColor:function(c){var m=d.getFloatsFromUintRGB(c);return this.color.set(m[0],m[1],m[2]),this},setIntensity:function(c){return this.intensity=c,this},setRadius:function(c){return this.radius=c,this}});l.RENDER_MASK=15,r.exports=l},26193:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(26535),p=n(56694),h=n(53996),u=n(14455),d=n(13171),l=n(39298),c=n(72677),m=n(17922),f=n(75512),v=new p({initialize:function(){this.lights=[],this.ambientColor=new l(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(S,x,T,C,w,b){return this.systems.displayList.add(new d(this.scene,S,x,T,C,w,b))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(S){for(var x=this.lights,T=S.worldView,C=[],w=0;w<x.length;w++){var b=x[w];b.willRender(S)&&a(b,T)&&C.push({light:b,distance:h(b.x,b.y,T.centerX,T.centerY)})}return C.length>this.maxLights&&(m(C,this.sortByDistance),C=C.slice(0,this.maxLights)),this.visibleLights=C.length,C},sortByDistance:function(S,x){return S.distance>=x.distance},setAmbientColor:function(S){var x=f.getFloatsFromUintRGB(S);return this.ambientColor.set(x[0],x[1],x[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(S,x,T,C,w){S===void 0&&(S=0),x===void 0&&(x=0),T===void 0&&(T=128),C===void 0&&(C=16777215),w===void 0&&(w=1);var b=f.getFloatsFromUintRGB(C),E=new u(S,x,T,b[0],b[1],b[2],w);return this.lights.push(E),E},removeLight:function(S){var x=this.lights.indexOf(S);return x>=0&&c(this.lights,x),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});r.exports=v},50296:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(26193),h=n(91963),u=n(7599),d=new a({Extends:p,initialize:function(c){this.scene=c,this.systems=c.sys,c.sys.settings.isBooted||c.sys.events.once(u.BOOT,this.boot,this),p.call(this)},boot:function(){var l=this.systems.events;l.on(u.SHUTDOWN,this.shutdown,this),l.on(u.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});h.register("LightsPlugin",d,"lights"),r.exports=d},83321:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(75606),u=n(18693),d=n(89980),l=n(53267),c=n(67623),m=n(73329),f=n(16650),v=n(23464),S=n(23701),x=n(17922),T=n(70015),C=n(85769),w=new a({Extends:d,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Mask,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Size,p.Texture,p.Transform,p.Visible,v],initialize:function(E,A,I,R,N,F,P,D,M,L,k,V){A===void 0&&(A=0),I===void 0&&(I=0),R===void 0&&(R="__WHITE"),d.call(this,E,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new T,this.modelScale=new T(1,1,1),this.modelRotation=new T,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new f,this.viewPosition=new T,this.viewMatrix=new f,this.projectionMatrix=new f,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var W=E.sys.renderer;this.setPosition(A,I),this.setTexture(R,N),this.setSize(W.width,W.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(W.width,W.height),F&&this.addVertices(F,P,D,M,L,k,V)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(b){return this.viewPosition.addScale(T.LEFT,b),this.dirtyCache[10]=1,this},panY:function(b){return this.viewPosition.y+=T.DOWN.y*b,this.dirtyCache[10]=1,this},panZ:function(b){return this.viewPosition.z+=b,this.dirtyCache[10]=1,this},setPerspective:function(b,E,A,I,R){return A===void 0&&(A=45),I===void 0&&(I=.01),R===void 0&&(R=1e3),this.fov=A,this.projectionMatrix.perspective(h(A),b/E,I,R),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(b,E,A,I){return b===void 0&&(b=this.scene.sys.renderer.getAspectRatio()),E===void 0&&(E=1),A===void 0&&(A=-1e3),I===void 0&&(I=1e3),this.fov=0,this.projectionMatrix.ortho(-b,b,-E,E,A,I),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(b){b.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(b,E,A,I,R,N,F,P,D){var M=this.scene.sys.cache.obj.get(b),L;return M&&(L=l(M,this,E,A,I,R,N,F,P,D)),(!L||L.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",b),this},sortByDepth:function(b,E){return b.depth-E.depth},depthSort:function(){return x(this.faces,this.sortByDepth),this},addVertex:function(b,E,A,I,R,N,F){var P=new C(b,E,A,I,R,N,F);return this.vertices.push(P),P},addFace:function(b,E,A){var I=new u(b,E,A);return this.faces.push(I),this.dirtyCache[9]=-1,I},addVertices:function(b,E,A,I,R,N,F){var P=c(b,E,A,I,R,N,F);return P?(this.faces=this.faces.concat(P.faces),this.vertices=this.vertices.concat(P.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(b){return this.faces[b]},hasFaceAt:function(b,E,A){A===void 0&&(A=this.scene.sys.cameras.main);for(var I=m(this,A).calc,R=this.faces,N=0;N<R.length;N++){var F=R[N];if(F.contains(b,E,I))return!0}return!1},getFaceAt:function(b,E,A){A===void 0&&(A=this.scene.sys.cameras.main);for(var I=m(this,A).calc,R=this.faces,N=[],F=0;F<R.length;F++){var P=R[F];P.contains(b,E,I)&&N.push(P)}return x(N,this.sortByDepth)},setDebug:function(b,E){return this.debugGraphic=b,!b&&!E?this.debugCallback=null:E?this.debugCallback=E:this.debugCallback=this.renderDebug,this},isDirty:function(){var b=this.modelPosition,E=this.modelRotation,A=this.modelScale,I=this.dirtyCache,R=b.x,N=b.y,F=b.z,P=E.x,D=E.y,M=E.z,L=A.x,k=A.y,V=A.z,W=this.getFaceCount(),K=I[0],B=I[1],G=I[2],O=I[3],$=I[4],z=I[5],X=I[6],Y=I[7],Z=I[8],J=I[9];return I[0]=R,I[1]=N,I[2]=F,I[3]=P,I[4]=D,I[5]=M,I[6]=L,I[7]=k,I[8]=V,I[9]=W,K!==R||B!==N||G!==F||O!==P||$!==D||z!==M||X!==L||Y!==k||Z!==V||J!==W},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var b=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!b[10]&&!this.isDirty())){var E=this.width,A=this.height,I=this.viewMatrix,R=this.viewPosition;b[10]&&(I.identity(),I.translate(R),I.invert(),b[10]=0);var N=this.transformMatrix;N.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var F=R.z,P=this.faces,D=0;D<P.length;D++)P[D].transformCoordinatesLocal(N,E,A,F);this.depthSort()}},renderDebug:function(b,E){for(var A=b.debugGraphic,I=0;I<E.length;I++){var R=E[I],N=R.vertex1.tx,F=R.vertex1.ty,P=R.vertex2.tx,D=R.vertex2.ty,M=R.vertex3.tx,L=R.vertex3.ty;A.strokeTriangle(N,F,P,D,M,L)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var b=this.faces,E=function(A,I,R){for(var N=0;N<b.length;N++){var F=b[N];if(F.contains(I,R))return!0}return!1};return this.scene.sys.input.enable(this,E),this},setTint:function(b){b===void 0&&(b=16777215);for(var E=this.vertices,A=0;A<E.length;A++)E[A].color=b;return this},uvScroll:function(b,E){for(var A=this.faces,I=0;I<A.length;I++)A[I].scrollUV(b,E);return this},uvScale:function(b,E){for(var A=this.faces,I=0;I<A.length;I++)A[I].scaleUV(b,E);return this},tint:{set:function(b){this.setTint(b)}},rotateX:{get:function(){return S(this.modelRotation.x)},set:function(b){this.modelRotation.x=h(b)}},rotateY:{get:function(){return S(this.modelRotation.y)},set:function(b){this.modelRotation.y=h(b)}},rotateZ:{get:function(){return S(this.modelRotation.z)},set:function(b){this.modelRotation.z=h(b)}}});r.exports=w},6317:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){};r.exports=g},41839:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(99325),h=n(20494),u=n(10850),d=n(83321);p.register("mesh",function(l,c){l===void 0&&(l={});var m=h(l,"key",null),f=h(l,"frame",null),v=u(l,"vertices",[]),S=u(l,"uvs",[]),x=u(l,"indicies",[]),T=u(l,"containsZ",!1),C=u(l,"normals",[]),w=u(l,"colors",16777215),b=u(l,"alphas",1),E=new d(this.scene,0,0,m,f,v,S,x,T,C,w,b);return c!==void 0&&(l.add=c),a(this.scene,E,l),E})},8767:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83321),p=n(61286);p.register("mesh",function(h,u,d,l,c,m,f,v,S,x,T){return this.displayList.add(new a(this.scene,h,u,d,l,c,m,f,v,S,x,T))})},23464:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(57410),h=n(6317),r.exports={renderWebGL:p,renderCanvas:h}},57410:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=function(h,u,d,l){var c=u.faces,m=c.length;if(m!==0){d.addToRenderList(u);var f=h.pipelines.set(u.pipeline,u),v=a(u,d,l).calc;h.pipelines.preBatch(u);for(var S=f.setGameObject(u),x=f.vertexViewF32,T=f.vertexViewU32,C=f.vertexCount*f.currentShader.vertexComponentCount-1,w=u.tintFill,b=[],E=u.debugCallback,A=v.a,I=v.b,R=v.c,N=v.d,F=v.e,P=v.f,D=u.viewPosition.z,M=u.hideCCW,L=d.roundPixels,k=d.alpha*u.alpha,V=0,W=0;W<m;W++){var K=c[W];K.isInView(d,M,D,k,A,I,R,N,F,P,L)&&(f.shouldFlush(3)&&(f.flush(),S=f.setGameObject(u),C=0),C=K.load(x,T,C,S,w),V++,f.vertexCount+=3,f.currentBatch.count=f.vertexCount-f.currentBatch.start,E&&b.push(K))}u.totalFrame+=V,E&&E.call(u,u,b),h.pipelines.postBatch(u)}};r.exports=p},44139:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(89980),u=n(94456),d=n(85769),l=new a({Extends:h,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.GetBounds,p.Mask,p.Origin,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Texture,p.Transform,p.Visible,u],initialize:function(m,f,v,S,x,T,C,w,b,E,A){T===void 0&&(T=256),C===void 0&&(C=256),w===void 0&&(w=10),b===void 0&&(b=10),E===void 0&&(E=0),A===void 0&&(A=0),h.call(this,m,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1,this.is3Slice=E===0&&A===0;for(var I=this.is3Slice?18:54,R=0;R<I;R++)this.vertices.push(new d);this.setPosition(f,v),this.setTexture(S,x),this.setSlices(T,C,w,b,E,A),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(c,m,f,v,S,x){c===void 0&&(c=256),m===void 0&&(m=256),f===void 0&&(f=10),v===void 0&&(v=10),S===void 0&&(S=0),x===void 0&&(x=0);var T=S===0&&x===0;return this.is3Slice!==T?console.warn("Cannot change 9 slice to 3 slice"):(this._width=c,this._height=m,this.leftWidth=f,this.rightWidth=v,this.topHeight=S,this.bottomHeight=x,this.is3Slice&&(m=this.frame.height,this._height=m,this.topHeight=m,this.bottomHeight=0),this.updateVertices(),this.updateUVs()),this},updateUVs:function(){var c=this.leftWidth,m=this.rightWidth,f=this.topHeight,v=this.bottomHeight,S=this.frame.width,x=this.frame.height;this.updateQuadUVs(0,0,0,c/S,f/x),this.updateQuadUVs(6,c/S,0,1-m/S,f/x),this.updateQuadUVs(12,1-m/S,0,1,f/x),this.is3Slice||(this.updateQuadUVs(18,0,f/x,c/S,1-v/x),this.updateQuadUVs(24,c/S,f/x,1-m/S,1-v/x),this.updateQuadUVs(30,1-m/S,f/x,1,1-v/x),this.updateQuadUVs(36,0,1-v/x,c/S,1),this.updateQuadUVs(42,c/S,1-v/x,1-m/S,1),this.updateQuadUVs(48,1-m/S,1-v/x,1,1))},updateVertices:function(){var c=this.leftWidth,m=this.rightWidth,f=this.topHeight,v=this.bottomHeight,S=this.width,x=this.height;this.updateQuad(0,-.5,.5,-.5+c/S,.5-f/x),this.updateQuad(6,-.5+c/S,.5,.5-m/S,.5-f/x),this.updateQuad(12,.5-m/S,.5,.5,.5-f/x),this.is3Slice||(this.updateQuad(18,-.5,.5-f/x,-.5+c/S,-.5+v/x),this.updateQuad(24,-.5+c/S,.5-f/x,.5-m/S,-.5+v/x),this.updateQuad(30,.5-m/S,.5-f/x,.5,-.5+v/x),this.updateQuad(36,-.5,-.5+v/x,-.5+c/S,-.5),this.updateQuad(42,-.5+c/S,-.5+v/x,.5-m/S,-.5),this.updateQuad(48,.5-m/S,-.5+v/x,.5,-.5))},updateQuad:function(c,m,f,v,S){var x=this.width,T=this.height,C=this.originX,w=this.originY,b=this.vertices;b[c+0].resize(m,f,x,T,C,w),b[c+1].resize(m,S,x,T,C,w),b[c+2].resize(v,f,x,T,C,w),b[c+3].resize(m,S,x,T,C,w),b[c+4].resize(v,S,x,T,C,w),b[c+5].resize(v,f,x,T,C,w)},updateQuadUVs:function(c,m,f,v,S){var x=this.vertices,T=this.frame,C=T.u0,w=T.v0,b=T.u1,E=T.v1;if(C!==0||b!==1){var A=b-C;m=C+m*A,v=C+v*A}if(w!==0||E!==1){var I=E-w;f=w+f*I,S=w+S*I}x[c+0].setUVs(m,f),x[c+1].setUVs(m,S),x[c+2].setUVs(v,f),x[c+3].setUVs(m,S),x[c+4].setUVs(v,S),x[c+5].setUVs(v,f)},clearTint:function(){return this.setTint(16777215),this},setTint:function(c){return c===void 0&&(c=16777215),this.tint=c,this.tintFill=!1,this},setTintFill:function(c){return this.setTint(c),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(c){this._width=Math.max(c,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(c){this.is3Slice||(this._height=Math.max(c,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(c){this.scaleX=c/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(c){this.scaleY=c/this.height}},setSize:function(c,m){this.width=c,this.height=m;var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=this.width,f.hitArea.height=this.height),this},setDisplaySize:function(c,m){return this.displayWidth=c,this.displayHeight=m,this},originX:{get:function(){return this._originX},set:function(c){this._originX=c,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(c){this._originY=c,this.updateVertices()}},setOrigin:function(c,m){return c===void 0&&(c=.5),m===void 0&&(m=c),this._originX=c,this._originY=m,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var c=this.frame.height;this._height=c,this.topHeight=c,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});r.exports=l},40964:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(99325),h=n(20494),u=n(10850),d=n(44139);p.register("nineslice",function(l,c){l===void 0&&(l={});var m=h(l,"key",null),f=h(l,"frame",null),v=u(l,"width",256),S=u(l,"height",256),x=u(l,"leftWidth",10),T=u(l,"rightWidth",10),C=u(l,"topHeight",0),w=u(l,"bottomHeight",0),b=new d(this.scene,0,0,m,f,v,S,x,T,C,w);return c!==void 0&&(l.add=c),a(this.scene,b,l),b})},53778:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(44139),p=n(61286);p.register("nineslice",function(h,u,d,l,c,m,f,v,S,x){return this.displayList.add(new a(this.scene,h,u,d,l,c,m,f,v,S,x))})},94456:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(27420),r.exports={renderWebGL:p,renderCanvas:h}},27420:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=n(75512),h=function(u,d,l,c){var m=d.vertices,f=m.length;if(f!==0){l.addToRenderList(d);var v=u.pipelines.set(d.pipeline,d),S=a(d,l,c,!1).calc;u.pipelines.preBatch(d);var x=v.setGameObject(d),T=v.vertexViewF32,C=v.vertexViewU32,w=v.vertexCount*v.currentShader.vertexComponentCount-1,b=l.roundPixels,E=d.tintFill,A=l.alpha*d.alpha,I=p.getTintAppendFloatAlpha(d.tint,A),R=v.vertexAvailable(),N=-1;R<f&&(N=R);for(var F=0;F<f;F++){var P=m[F];F===N&&(v.flush(),x=v.setGameObject(d),w=0),T[++w]=S.getXRound(P.vx,P.vy,b),T[++w]=S.getYRound(P.vx,P.vy,b),T[++w]=P.u,T[++w]=P.v,T[++w]=x,T[++w]=E,C[++w]=I,v.vertexCount++,v.currentBatch.count=v.vertexCount-v.currentBatch.start}u.pipelines.postBatch(d)}};r.exports=h},19737:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(93025),h=n(22946),u=n(21902),d=n(4840),l=n(15978),c=new a({Extends:p,initialize:function(f){p.call(this,f,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var m=this.propertyValue,f=m,v=this.defaultEmit,S=this.defaultUpdate;if(this.method===9){this.start=m[0],this.ease=u("Linear"),this.interpolation=d("linear"),v=this.easedValueEmit,S=this.easeValueUpdate,f=m[0],this.active=!0;for(var x=0;x<m.length;x++){var T=l(m[x]);this.r.push(T.r),this.g.push(T.g),this.b.push(T.b)}}return this.onEmit=v,this.onUpdate=S,this.current=f,this},setEase:function(m){this.easeName=m,this.ease=u(m)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(m,f,v){var S=this.ease(v),x=this.interpolation(this.r,S),T=this.interpolation(this.g,S),C=this.interpolation(this.b,S),w=h(x,T,C);return this.current=w,w}});r.exports=c},93025:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(17489),p=n(82897),h=n(56694),u=n(61616),d=n(21902),l=n(72632),c=n(4840),m=n(88462),f=n(1071),v=new h({initialize:function(x,T,C){C===void 0&&(C=!1),this.propertyKey=x,this.propertyValue=T,this.defaultValue=T,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=C,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(S,x){S===void 0&&(S={}),x&&(this.propertyKey=x),this.propertyValue=l(S,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(S){var x;switch(this.method){case 1:case 3:case 8:x=S;break;case 2:this.propertyValue.indexOf(S)>=0&&(x=S);break;case 4:var T=(this.end-this.start)/this.steps;x=m(S,T),this.counter=x;break;case 5:case 6:case 7:x=p(S,this.start,this.end);break;case 9:x=this.start[0];break}return this.current=x,this},getMethod:function(){var S=this.propertyValue;if(S===null)return 0;var x=typeof S;if(x==="number")return 1;if(Array.isArray(S))return 2;if(x==="function")return 3;if(x==="object"){if(this.hasBoth(S,"start","end"))return this.has(S,"steps")?4:5;if(this.hasBoth(S,"min","max"))return 6;if(this.has(S,"random"))return 7;if(this.hasEither(S,"onEmit","onUpdate"))return 8;if(this.has(S,"interpolation"))return 9}return 0},setMethods:function(){var S=this.propertyValue,x=S,T=this.defaultEmit,C=this.defaultUpdate;switch(this.method){case 1:T=this.staticValueEmit;break;case 2:T=this.randomStaticValueEmit,x=S[0];break;case 3:this._onEmit=S,T=this.proxyEmit;break;case 4:this.start=S.start,this.end=S.end,this.steps=S.steps,this.counter=this.start,this.yoyo=this.has(S,"yoyo")?S.yoyo:!1,this.direction=0,T=this.steppedEmit,x=this.start;break;case 5:this.start=S.start,this.end=S.end;var w=this.has(S,"ease")?S.ease:"Linear";this.ease=d(w,S.easeParams),T=this.has(S,"random")&&S.random?this.randomRangedValueEmit:this.easedValueEmit,C=this.easeValueUpdate,x=this.start;break;case 6:this.start=S.min,this.end=S.max,T=this.has(S,"int")&&S.int?this.randomRangedIntEmit:this.randomRangedValueEmit,x=this.start;break;case 7:var b=S.random;Array.isArray(b)&&(this.start=b[0],this.end=b[1]),T=this.randomRangedIntEmit,x=this.start;break;case 8:this._onEmit=this.has(S,"onEmit")?S.onEmit:this.defaultEmit,this._onUpdate=this.has(S,"onUpdate")?S.onUpdate:this.defaultUpdate,T=this.proxyEmit,C=this.proxyUpdate;break;case 9:this.start=S.values;var E=this.has(S,"ease")?S.ease:"Linear";this.ease=d(E,S.easeParams),this.interpolation=c(S.interpolation),T=this.easedValueEmit,C=this.easeValueUpdate,x=this.start[0];break}return this.onEmit=T,this.onUpdate=C,this.current=x,this},has:function(S,x){return S.hasOwnProperty(x)},hasBoth:function(S,x,T){return S.hasOwnProperty(x)&&S.hasOwnProperty(T)},hasEither:function(S,x,T){return S.hasOwnProperty(x)||S.hasOwnProperty(T)},defaultEmit:function(S,x,T){return T},defaultUpdate:function(S,x,T,C){return C},proxyEmit:function(S,x,T){var C=this._onEmit(S,x,T);return this.current=C,C},proxyUpdate:function(S,x,T,C){var w=this._onUpdate(S,x,T,C);return this.current=w,w},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var S=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[S],this.current},randomRangedValueEmit:function(S,x){var T=u(this.start,this.end);return S&&S.data[x]&&(S.data[x].min=T,S.data[x].max=this.end),this.current=T,T},randomRangedIntEmit:function(S,x){var T=a(this.start,this.end);return S&&S.data[x]&&(S.data[x].min=T,S.data[x].max=this.end),this.current=T,T},steppedEmit:function(){var S=this.counter,x=S,T=(this.end-this.start)/this.steps;if(this.yoyo){var C;this.direction===0?(x+=T,x>=this.end&&(C=x-this.end,x=this.end-C,this.direction=1)):(x-=T,x<=this.start&&(C=this.start-x,x=this.start+C,this.direction=0)),this.counter=x}else this.counter=f(x+T,this.start,this.end);return this.current=S,S},easedValueEmit:function(S,x){if(S&&S.data[x]){var T=S.data[x];T.min=this.start,T.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(S,x,T){var C=S.data[x],w,b=this.ease(T);return this.interpolation?w=this.interpolation(this.start,b):w=(C.max-C.min)*b+C.min,this.current=w,w},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});r.exports=v},87811:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72632),h=n(30891),u=new a({Extends:h,initialize:function(l,c,m,f,v){if(typeof l=="object"){var S=l;l=p(S,"x",0),c=p(S,"y",0),m=p(S,"power",0),f=p(S,"epsilon",100),v=p(S,"gravity",50)}else l===void 0&&(l=0),c===void 0&&(c=0),m===void 0&&(m=0),f===void 0&&(f=100),v===void 0&&(v=50);h.call(this,l,c,!0),this._gravity=v,this._power=m*v,this._epsilon=f*f},update:function(d,l){var c=this.x-d.x,m=this.y-d.y,f=c*c+m*m;if(f!==0){var v=Math.sqrt(f);f<this._epsilon&&(f=this._epsilon);var S=this._power*l/(f*v)*100;d.velocityX+=c*S,d.velocityY+=m*S}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(d){this._epsilon=d*d}},power:{get:function(){return this._power/this._gravity},set:function(d){this._power=d*this._gravity}},gravity:{get:function(){return this._gravity},set:function(d){var l=this.power;this._gravity=d,this.power=l}}});r.exports=u},14909:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16569),p=n(82897),h=n(56694),u=n(75606),d=n(74118),l=n(2386),c=n(93736),m=new h({initialize:function(v){this.emitter=v,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new c,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=v.scene,this.anims=new a(this),this.bounds=new d},emit:function(f,v,S,x,T,C){return this.emitter.emit(f,v,S,x,T,C)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(f,v){f===void 0&&(f=0),v===void 0&&(v=0),this.x=f,this.y=v},fire:function(f,v){var S=this.emitter,x=S.ops,T=S.getAnim();if(T?this.anims.play(T):(this.frame=S.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(S.getEmitZone(this),f===void 0?this.x+=x.x.onEmit(this,"x"):x.x.steps>0?this.x+=f+x.x.onEmit(this,"x"):this.x+=f,v===void 0?this.y+=x.y.onEmit(this,"y"):x.y.steps>0?this.y+=v+x.y.onEmit(this,"y"):this.y+=v,this.life=x.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=x.delay.onEmit(this,"delay"),this.holdCurrent=x.hold.onEmit(this,"hold"),this.scaleX=x.scaleX.onEmit(this,"scaleX"),this.scaleY=x.scaleY.active?x.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=x.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),S.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&S.getDeathZone(this))return this.lifeCurrent=0,!1;var C=x.speedX.onEmit(this,"speedX"),w=x.speedY.active?x.speedY.onEmit(this,"speedY"):C;if(S.radial){var b=u(x.angle.onEmit(this,"angle"));this.velocityX=Math.cos(b)*Math.abs(C),this.velocityY=Math.sin(b)*Math.abs(w)}else if(S.moveTo){var E=x.moveToX.onEmit(this,"moveToX"),A=x.moveToY.onEmit(this,"moveToY"),I=this.life/1e3;this.velocityX=(E-this.x)/I,this.velocityY=(A-this.y)/I}else this.velocityX=C,this.velocityY=w;return S.acceleration&&(this.accelerationX=x.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=x.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=x.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=x.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=x.bounce.onEmit(this,"bounce"),this.alpha=x.alpha.onEmit(this,"alpha"),x.color.active?this.tint=x.color.onEmit(this,"tint"):this.tint=x.tint.onEmit(this,"tint"),!0},update:function(f,v,S){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=f,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=f,!1;this.anims.update(0,f);var x=this.emitter,T=x.ops,C=1-this.lifeCurrent/this.life;if(this.lifeT=C,this.x=T.x.onUpdate(this,"x",C,this.x),this.y=T.y.onUpdate(this,"y",C,this.y),x.moveTo){var w=T.moveToX.onUpdate(this,"moveToX",C,x.moveToX),b=T.moveToY.onUpdate(this,"moveToY",C,x.moveToY),E=this.lifeCurrent/1e3;this.velocityX=(w-this.x)/E,this.velocityY=(b-this.y)/E}return this.computeVelocity(x,f,v,S,C),this.scaleX=T.scaleX.onUpdate(this,"scaleX",C,this.scaleX),this.scaleY=this.scaleX,T.scaleY.active&&(this.scaleY=T.scaleY.onUpdate(this,"scaleY",C,this.scaleY)),this.angle=T.rotate.onUpdate(this,"rotate",C,this.angle),this.rotation=u(this.angle),x.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=T.alpha.onUpdate(this,"alpha",C,this.alpha),T.color.active?this.tint=T.color.onUpdate(this,"color",C,this.tint):this.tint=T.tint.onUpdate(this,"tint",C,this.tint),this.lifeCurrent-=f,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(f,v,S,x,T){var C=f.ops,w=this.velocityX,b=this.velocityY,E=C.accelerationX.onUpdate(this,"accelerationX",T,this.accelerationX),A=C.accelerationY.onUpdate(this,"accelerationY",T,this.accelerationY),I=C.maxVelocityX.onUpdate(this,"maxVelocityX",T,this.maxVelocityX),R=C.maxVelocityY.onUpdate(this,"maxVelocityY",T,this.maxVelocityY);this.bounce=C.bounce.onUpdate(this,"bounce",T,this.bounce),w+=f.gravityX*S+E*S,b+=f.gravityY*S+A*S,w=p(w,-I,I),b=p(b,-R,R),this.velocityX=w,this.velocityY=b,this.x+=w*S,this.y+=b*S,f.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var N=0;N<x.length;N++){var F=x[N];F.active&&F.update(this,v,S,T)}},setSizeToFrame:function(){},getBounds:function(f){f===void 0&&(f=this.emitter.getWorldTransformMatrix());var v=Math.abs(f.scaleX)*this.scaleX,S=Math.abs(f.scaleY)*this.scaleY,x=this.x,T=this.y,C=this.rotation,w=this.frame.width*v/2,b=this.frame.height*S/2,E=this.bounds,A=new c(x-w,T-b),I=new c(x+w,T-b),R=new c(x-w,T+b),N=new c(x+w,T+b);return C!==0&&(l(A,x,T,C),l(I,x,T,C),l(R,x,T,C),l(N,x,T,C)),f.transformPoint(A.x,A.y,A),f.transformPoint(I.x,I.y,I),f.transformPoint(R.x,R.y,R),f.transformPoint(N.x,N.y,N),E.x=Math.min(A.x,I.x,R.x,N.x),E.y=Math.min(A.y,I.y,R.y,N.y),E.width=Math.max(A.x,I.x,R.x,N.x)-E.x,E.height=Math.max(A.y,I.y,R.y,N.y)-E.y,E},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});r.exports=m},73106:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(30891),h=n(74118),u=new a({Extends:p,initialize:function(l,c,m,f,v,S,x,T){v===void 0&&(v=!0),S===void 0&&(S=!0),x===void 0&&(x=!0),T===void 0&&(T=!0),p.call(this,l,c,!0),this.bounds=new h(l,c,m,f),this.collideLeft=v,this.collideRight=S,this.collideTop=x,this.collideBottom=T},update:function(d){var l=this.bounds,c=-d.bounce,m=d.worldPosition;m.x<l.x&&this.collideLeft?(d.x+=l.x-m.x,d.velocityX*=c):m.x>l.right&&this.collideRight&&(d.x-=m.x-l.right,d.velocityX*=c),m.y<l.y&&this.collideTop?(d.y+=l.y-m.y,d.velocityY*=c):m.y>l.bottom&&this.collideBottom&&(d.y-=m.y-l.bottom,d.velocityY*=c)}});r.exports=u},9216:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(48129),u=n(29538),d=n(69361),l=n(54213),c=n(19737),m=n(93025),f=n(40629),v=n(89980),S=n(72632),x=n(72861),T=n(87811),C=n(53523),w=n(19256),b=n(7782),E=n(71207),A=n(14655),I=n(14909),R=n(68433),N=n(74118),F=n(90205),P=n(66458),D=n(69116),M=n(17922),L=n(69360),k=n(93736),V=n(1071),W=n(73106),K=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],B=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],G=new a({Extends:v,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Mask,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Texture,p.Transform,p.Visible,D],initialize:function($,z,X,Y,Z){v.call(this,$,"ParticleEmitter"),this.particleClass=I,this.ops={accelerationX:new m("accelerationX",0),accelerationY:new m("accelerationY",0),alpha:new m("alpha",1),angle:new m("angle",{min:0,max:360},!0),bounce:new m("bounce",0),color:new c("color"),delay:new m("delay",0,!0),hold:new m("hold",0,!0),lifespan:new m("lifespan",1e3,!0),maxVelocityX:new m("maxVelocityX",1e4),maxVelocityY:new m("maxVelocityY",1e4),moveToX:new m("moveToX",0),moveToY:new m("moveToY",0),quantity:new m("quantity",1,!0),rotate:new m("rotate",0),scaleX:new m("scaleX",1),scaleY:new m("scaleY",1),speedX:new m("speedX",0,!0),speedY:new m("speedY",0,!0),tint:new m("tint",16777215),x:new m("x",0),y:new m("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new k,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new L,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new E(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(z,X),this.setTexture(Y),Z&&this.setConfig(Z)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(O){if(!O)return this;var $=0,z="",X=this.ops;for($=0;$<B.length;$++)z=B[$],X[z].loadConfig(O);for($=0;$<K.length;$++)z=K[$],w(O,z)&&(this[z]=S(O,z));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,w(O,"speed")&&(X.speedX.loadConfig(O,"speed"),X.speedY.active=!1),(C(O,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),w(O,"scale")&&(X.scaleX.loadConfig(O,"scale"),X.scaleY.active=!1),w(O,"callbackScope")){var Y=S(O,"callbackScope",null);this.emitCallbackScope=Y,this.deathCallbackScope=Y}if(w(O,"emitZone")&&this.addEmitZone(O.emitZone),w(O,"deathZone")&&this.addDeathZone(O.deathZone),w(O,"bounds")){var Z=this.addParticleBounds(O.bounds);Z.collideLeft=S(O,"collideLeft",!0),Z.collideRight=S(O,"collideRight",!0),Z.collideTop=S(O,"collideTop",!0),Z.collideBottom=S(O,"collideBottom",!0)}return w(O,"followOffset")&&this.followOffset.setFromObject(S(O,"followOffset",0)),w(O,"texture")&&this.setTexture(O.texture),w(O,"frame")?this.setEmitterFrame(O.frame):w(O,"anim")&&this.setAnim(O.anim),w(O,"reserve")&&this.reserve(O.reserve),w(O,"advance")&&this.fastForward(O.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(f.START,this),this},toJSON:function(){var O=h(this),$=0,z="";for($=0;$<K.length;$++)z=K[$],O[z]=this[z];var X=this.ops;for($=0;$<B.length;$++)z=B[$],X[z]&&(O[z]=X[z].toJSON());return X.speedY.active||(delete O.speedX,O.speed=X.speedX.toJSON()),this.scaleX===this.scaleY&&(delete O.scaleX,delete O.scaleY,O.scale=X.scaleX.toJSON()),O},resetCounters:function(O,$){var z=this.counters;z.fill(0),z[0]=O,$&&(z[5]=1)},startFollow:function(O,$,z,X){return $===void 0&&($=0),z===void 0&&(z=0),X===void 0&&(X=!1),this.follow=O,this.followOffset.set($,z),this.trackVisible=X,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var O=this.frames,$=O.length,z;return $===1?z=O[0]:this.randomFrame?z=x(O):(z=O[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===$&&(this.currentFrame=0))),this.texture.get(z)},setEmitterFrame:function(O,$,z){$===void 0&&($=!0),z===void 0&&(z=1),this.randomFrame=$,this.frameQuantity=z,this.currentFrame=0;var X=typeof O;if(this.frames.length=0,Array.isArray(O))this.frames=this.frames.concat(O);else if(X==="string"||X==="number")this.frames.push(O);else if(X==="object"){var Y=O;O=S(Y,"frames",null),O&&(this.frames=this.frames.concat(O));var Z=S(Y,"cycle",!1);this.randomFrame=!Z,this.frameQuantity=S(Y,"quantity",z)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var O=this.anims,$=O.length;if($===0)return null;if($===1)return O[0];if(this.randomAnim)return x(O);var z=O[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=V(this.currentAnim+1,0,$-1)),z},setAnim:function(O,$,z){$===void 0&&($=!0),z===void 0&&(z=1),this.randomAnim=$,this.animQuantity=z,this.currentAnim=0;var X=typeof O;if(this.anims.length=0,Array.isArray(O))this.anims=this.anims.concat(O);else if(X==="string")this.anims.push(O);else if(X==="object"){var Y=O;O=S(Y,"anims",null),O&&(this.anims=this.anims.concat(O));var Z=S(Y,"cycle",!1);this.randomAnim=!Z,this.animQuantity=S(Y,"quantity",z)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(O){return O===void 0&&(O=!0),this.radial=O,this},addParticleBounds:function(O,$,z,X,Y,Z,J,tt){if(typeof O=="object"){var et=O;O=et.x,$=et.y,z=w(et,"w")?et.w:et.width,X=w(et,"h")?et.h:et.height}return this.addParticleProcessor(new W(O,$,z,X,Y,Z,J,tt))},setParticleSpeed:function(O,$){return $===void 0&&($=O),this.ops.speedX.onChange(O),O===$?this.ops.speedY.active=!1:this.ops.speedY.onChange($),this.radial=!0,this},setParticleScale:function(O,$){return O===void 0&&(O=1),$===void 0&&($=O),this.ops.scaleX.onChange(O),this.ops.scaleY.onChange($),this},setParticleGravity:function(O,$){return this.gravityX=O,this.gravityY=$,this},setParticleAlpha:function(O){return this.ops.alpha.onChange(O),this},setParticleTint:function(O){return this.ops.tint.onChange(O),this},setEmitterAngle:function(O){return this.ops.angle.onChange(O),this},setParticleLifespan:function(O){return this.ops.lifespan.onChange(O),this},setQuantity:function(O){return this.quantity=O,this},setFrequency:function(O,$){return this.frequency=O,this.flowCounter=O>0?O:0,$&&(this.quantity=$),this},addDeathZone:function(O){Array.isArray(O)||(O=[O]);for(var $,z=this.deathZones,X=0;X<O.length;X++)if($=O[X],$ instanceof d)z.push($);else if(typeof $.contains=="function")$=new d($,!0),z.push($);else{var Y=S($,"type","onEnter"),Z=S($,"source",null);if(Z&&typeof Z.contains=="function"){var J=Y==="onEnter";$=new d(Z,J),z.push($)}}return $},removeDeathZone:function(O){return P(this.deathZones,O),this},addEmitZone:function(O){Array.isArray(O)||(O=[O]);for(var $,z=this.emitZones,X=[],Y=0;Y<O.length;Y++){if($=O[Y],$ instanceof R||$ instanceof l)z.push($);else{var Z=S($,"type","random"),J=S($,"source",null);if(Z==="random")$=new R(J);else if(Z==="edge"){var tt=S($,"quantity",1),et=S($,"stepRate",0),lt=S($,"yoyo",!1),ut=S($,"seamless",!0),ct=S($,"total",-1);$=new l(J,tt,et,lt,ut,ct)}$&&z.push($)}X.push($)}return X},removeEmitZone:function(O){return P(this.emitZones,O),this.zoneIndex=0,this},getEmitZone:function(O){var $=this.emitZones,z=$.length;if(z!==0){var X=$[this.zoneIndex];X.getPoint(O),X.total>-1&&(this.zoneTotal++,this.zoneTotal===X.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===z&&(this.zoneIndex=0)))}},getDeathZone:function(O){for(var $=this.deathZones,z=0;z<$.length;z++){var X=$[z];if(X.willKill(O))return this.emit(f.DEATH_ZONE,this,O,X),!0}return!1},setEmitZone:function(O){var $;return isFinite(O)?$=O:$=this.emitZones.indexOf(O),$>=0&&(this.zoneIndex=$),this},addParticleProcessor:function(O){return this.processors.exists(O)||(O.emitter&&O.emitter.removeParticleProcessor(O),this.processors.add(O),O.emitter=this),O},removeParticleProcessor:function(O){return this.processors.exists(O)&&(this.processors.remove(O,!0),O.emitter=null),O},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(O){return this.addParticleProcessor(new T(O))},reserve:function(O){var $=this.dead;if(this.maxParticles>0){var z=this.getParticleCount();z+O>this.maxParticles&&(O=this.maxParticles-(z+O))}for(var X=0;X<O;X++)$.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(O,$){return O===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof O=="function"&&(this.emitCallback=O,$&&(this.emitCallbackScope=$)),this},onParticleDeath:function(O,$){return O===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof O=="function"&&(this.deathCallback=O,$&&(this.deathCallbackScope=$)),this},killAll:function(){for(var O=this.dead,$=this.alive;$.length>0;)O.push($.pop());return this},forEachAlive:function(O,$){for(var z=this.alive,X=z.length,Y=0;Y<X;Y++)O.call($,z[Y],this);return this},forEachDead:function(O,$){for(var z=this.dead,X=z.length,Y=0;Y<X;Y++)O.call($,z[Y],this);return this},start:function(O,$){return O===void 0&&(O=0),this.emitting||(O>0&&this.fastForward(O),this.emitting=!0,this.resetCounters(this.frequency,!0),$!==void 0&&(this.duration=Math.abs($)),this.emit(f.START,this)),this},stop:function(O){return O===void 0&&(O=!1),this.emitting&&(this.emitting=!1,O&&this.killAll(),this.emit(f.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(O,$){return O===void 0&&(O=""),$===void 0&&($=this.true),this.sortProperty=O,this.sortOrderAsc=$,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(O){return this.sortProperty!==""?O=this.depthSortCallback:O=null,this.sortCallback=O,this},depthSort:function(){return M(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(O,$){var z=this.sortProperty;return this.sortOrderAsc?O[z]-$[z]:$[z]-O[z]},flow:function(O,$,z){return $===void 0&&($=1),this.emitting=!1,this.frequency=O,this.quantity=$,z!==void 0&&(this.stopAfter=z),this.start()},explode:function(O,$,z){this.frequency=-1,this.resetCounters(-1,!0);var X=this.emitParticle(O,$,z);return this.emit(f.EXPLODE,this,X),X},emitParticleAt:function(O,$,z){return this.emitParticle(z,O,$)},emitParticle:function(O,$,z){if(!this.atLimit()){O===void 0&&(O=this.ops.quantity.onEmit());for(var X=this.dead,Y=this.stopAfter,Z=this.follow?this.follow.x+this.followOffset.x:$,J=this.follow?this.follow.y+this.followOffset.y:z,tt=0;tt<O;tt++){var et=X.pop();if(et||(et=new this.particleClass(this)),et.fire(Z,J)?(this.particleBringToTop?this.alive.push(et):this.alive.unshift(et),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,et,this)):this.dead.push(et),Y>0&&(this.stopCounter++,this.stopCounter>=Y)||this.atLimit())break}return et}},fastForward:function(O,$){$===void 0&&($=1e3/60);var z=0;for(this.skipping=!0;z<Math.abs(O);)this.preUpdate(0,$),z+=$;return this.skipping=!1,this},preUpdate:function(O,$){$*=this.timeScale;var z=$/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var X=this.getProcessors(),Y=this.alive,Z=this.dead,J=0,tt=[],et=Y.length;for(J=0;J<et;J++){var lt=Y[J];lt.update($,z,X)&&tt.push({index:J,particle:lt})}if(et=tt.length,et>0){var ut=this.deathCallback,ct=this.deathCallbackScope;for(J=et-1;J>=0;J--){var ht=tt[J];Y.splice(ht.index,1),Z.push(ht.particle),ut&&ut.call(ct,ht.particle),ht.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&Y.length===0&&(this.completeFlag=0,this.emit(f.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=$;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=$,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(O){for(var $=this.getWorldTransformMatrix(),z=this.alive,X=z.length,Y=[],Z=0;Z<X;Z++){var J=z[Z];F(O,J.getBounds($))&&Y.push(J)}return Y},getBounds:function(O,$,z,X){O===void 0&&(O=0),$===void 0&&($=0),z===void 0&&(z=1e3/60),X===void 0&&(X=new N);var Y=this.getWorldTransformMatrix(),Z,J,tt=this.alive,et=!1;if(X.setTo(0,0,0,0),$>0){var lt=0;for(this.skipping=!0;lt<Math.abs($);){for(this.preUpdate(0,z),Z=0;Z<tt.length;Z++)J=tt[Z].getBounds(Y),et?A(X,J):(et=!0,u(J,X));lt+=z}this.skipping=!1}else for(Z=0;Z<tt.length;Z++)J=tt[Z].getBounds(Y),et?A(X,J):(et=!0,u(J,X));return O>0&&b(X,O,O),X},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(O){this.ops.x.onChange(O)}},particleY:{get:function(){return this.ops.y.current},set:function(O){this.ops.y.onChange(O)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(O){this.ops.accelerationX.onChange(O)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(O){this.ops.accelerationY.onChange(O)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(O){this.ops.maxVelocityX.onChange(O)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(O){this.ops.maxVelocityY.onChange(O)}},speed:{get:function(){return this.ops.speedX.current},set:function(O){this.ops.speedX.onChange(O),this.ops.speedY.onChange(O)}},speedX:{get:function(){return this.ops.speedX.current},set:function(O){this.ops.speedX.onChange(O)}},speedY:{get:function(){return this.ops.speedY.current},set:function(O){this.ops.speedY.onChange(O)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(O){this.ops.moveToX.onChange(O)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(O){this.ops.moveToY.onChange(O)}},bounce:{get:function(){return this.ops.bounce.current},set:function(O){this.ops.bounce.onChange(O)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(O){this.ops.scaleX.onChange(O)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(O){this.ops.scaleY.onChange(O)}},particleColor:{get:function(){return this.ops.color.current},set:function(O){this.ops.color.onChange(O)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(O){this.ops.color.setEase(O)}},particleTint:{get:function(){return this.ops.tint.current},set:function(O){this.ops.tint.onChange(O)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(O){this.ops.alpha.onChange(O)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(O){this.ops.lifespan.onChange(O)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(O){this.ops.angle.onChange(O)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(O){this.ops.rotate.onChange(O)}},quantity:{get:function(){return this.ops.quantity.current},set:function(O){this.ops.quantity.onChange(O)}},delay:{get:function(){return this.ops.delay.current},set:function(O){this.ops.delay.onChange(O)}},hold:{get:function(){return this.ops.hold.current},set:function(O){this.ops.hold.onChange(O)}},flowCounter:{get:function(){return this.counters[0]},set:function(O){this.counters[0]=O}},frameCounter:{get:function(){return this.counters[1]},set:function(O){this.counters[1]=O}},animCounter:{get:function(){return this.counters[2]},set:function(O){this.counters[2]=O}},elapsed:{get:function(){return this.counters[3]},set:function(O){this.counters[3]=O}},stopCounter:{get:function(){return this.counters[4]},set:function(O){this.counters[4]=O}},completeFlag:{get:function(){return this.counters[5]},set:function(O){this.counters[5]=O}},zoneIndex:{get:function(){return this.counters[6]},set:function(O){this.counters[6]=O}},zoneTotal:{get:function(){return this.counters[7]},set:function(O){this.counters[7]=O}},currentFrame:{get:function(){return this.counters[8]},set:function(O){this.counters[8]=O}},currentAnim:{get:function(){return this.counters[9]},set:function(O){this.counters[9]=O}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var O,$=this.ops;for(O=0;O<B.length;O++){var z=B[O];$[z].destroy()}for(O=0;O<this.alive.length;O++)this.alive[O].destroy();for(O=0;O<this.dead.length;O++)this.dead[O].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});r.exports=G},10456:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(90205),p=n(69360),h=new p,u=new p,d=new p,l=new p,c=function(m,f,v,S){var x=h,T=u,C=d,w=l;S?(w.loadIdentity(),w.multiply(S),w.translate(f.x,f.y),w.rotate(f.rotation),w.scale(f.scaleX,f.scaleY)):w.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY);var b=m.currentContext,E=v.roundPixels,A=v.alpha,I=f.alpha,R=f.alive,N=R.length,F=f.viewBounds;if(!(!f.visible||N===0||F&&!a(F,v.worldView))){f.sortCallback&&f.depthSort(),v.addToRenderList(f);var P=f.scrollFactorX,D=f.scrollFactorY;b.save(),b.globalCompositeOperation=m.blendModes[f.blendMode];for(var M=0;M<N;M++){var L=R[M],k=L.alpha*I*A;if(!(k<=0||L.scaleX===0||L.scaleY===0)){C.applyITRS(L.x,L.y,L.rotation,L.scaleX,L.scaleY),x.copyFrom(v.matrix),x.multiplyWithOffset(w,-v.scrollX*P,-v.scrollY*D),C.e=L.x,C.f=L.y,x.multiply(C,T);var V=L.frame,W=V.canvasData;if(W.width>0&&W.height>0){var K=-V.halfWidth,B=-V.halfHeight;b.globalAlpha=k,b.save(),T.setToContext(b),E&&(K=Math.round(K),B=Math.round(B)),b.imageSmoothingEnabled=!V.source.scaleMode,b.drawImage(V.source.image,W.x,W.y,W.width,W.height,K,B,W.width,W.height),b.restore()}}}b.restore()}};r.exports=c},765:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(99325),h=n(20494),u=n(72632),d=n(9216);p.register("particles",function(l,c){l===void 0&&(l={});var m=h(l,"key",null),f=u(l,"config",null),v=new d(this.scene,0,0,m);return c!==void 0&&(l.add=c),a(this.scene,v,l),f&&v.setConfig(f),v})},81212:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(9216);a.register("particles",function(h,u,d,l){return h!==void 0&&typeof h=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new p(this.scene,h,u,d,l))})},69116:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(10275),h=n(10456),r.exports={renderWebGL:p,renderCanvas:h}},10275:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(90205),p=n(69360),h=n(75512),u=new p,d=new p,l=new p,c=new p,m=function(f,v,S,x){var T=f.pipelines.set(v.pipeline),C=u,w=d,b=l,E=c;x?(E.loadIdentity(),E.multiply(x),E.translate(v.x,v.y),E.rotate(v.rotation),E.scale(v.scaleX,v.scaleY)):E.applyITRS(v.x,v.y,v.rotation,v.scaleX,v.scaleY);var A=S.roundPixels,I=h.getTintAppendFloatAlpha,R=S.alpha,N=v.alpha,F=v.frame.glTexture;f.pipelines.preBatch(v);var P=v.alive,D=P.length,M=v.viewBounds;if(!(D===0||M&&!a(M,S.worldView))){v.sortCallback&&v.depthSort();var L=T.setGameObject(v,v.frame);S.addToRenderList(v),C.copyFrom(S.matrix),C.multiplyWithOffset(E,-S.scrollX*v.scrollFactorX,-S.scrollY*v.scrollFactorY),f.setBlendMode(v.blendMode),v.mask&&(v.mask.preRenderWebGL(f,v,S),f.pipelines.set(v.pipeline));for(var k=v.tintFill,V=0;V<D;V++){var W=P[V],K=W.alpha*N*R;if(!(K<=0||W.scaleX===0||W.scaleY===0)){b.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),b.e=W.x,b.f=W.y,C.multiply(b,w);var B=W.frame,G=-B.halfWidth,O=-B.halfHeight,$=w.setQuad(G,O,G+B.width,O+B.height,A),z=I(W.tint,K);T.shouldFlush(6)&&(T.flush(),L=T.setGameObject(v,v.frame)),T.batchQuad(v,$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],B.u0,B.v0,B.u1,B.v1,z,z,z,z,k,F,L)}}v.mask&&v.mask.postRenderWebGL(f,S),f.pipelines.postBatch(v)}};r.exports=m},30891:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d,l){u===void 0&&(u=0),d===void 0&&(d=0),l===void 0&&(l=!0),this.emitter,this.x=u,this.y=d,this.active=l},update:function(){},destroy:function(){this.emitter=null}});r.exports=p},76100:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"},26677:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="deathzone"},62736:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="explode"},56490:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"},85715:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"},40629:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={COMPLETE:n(76100),DEATH_ZONE:n(26677),EXPLODE:n(62736),START:n(56490),STOP:n(85715)}},27684:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={EmitterColorOp:n(19737),EmitterOp:n(93025),Events:n(40629),GravityWell:n(87811),Particle:n(14909),ParticleBounds:n(73106),ParticleEmitter:n(9216),ParticleProcessor:n(30891),Zones:n(25962)}},69361:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d){this.source=u,this.killOnEnter=d},willKill:function(h){var u=h.worldPosition,d=this.source.contains(u.x,u.y);return d&&this.killOnEnter||!d&&!this.killOnEnter}});r.exports=p},54213:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d,l,c,m,f){c===void 0&&(c=!1),m===void 0&&(m=!0),f===void 0&&(f=-1),this.source=u,this.points=[],this.quantity=d,this.stepRate=l,this.yoyo=c,this.counter=-1,this.seamless=m,this._length=0,this._direction=0,this.total=f,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var h=this.points[0],u=this.points[this.points.length-1];h.x===u.x&&h.y===u.y&&this.points.pop()}var d=this._length;return this._length=this.points.length,this._length<d&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(h){return this.source=h,this.updateSource()},getPoint:function(h){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var u=this.points[this.counter];u&&(h.x=u.x,h.y=u.y)}});r.exports=p},68433:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(93736),h=new a({initialize:function(d){this.source=d,this._tempVec=new p,this.total=-1},getPoint:function(u){var d=this._tempVec;this.source.getRandomPoint(d),u.x=d.x,u.y=d.y}});r.exports=h},25962:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DeathZone:n(69361),EdgeZone:n(54213),RandomZone:n(68433)}},29598:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(13747),u=new a({Extends:h,Mixins:[p.PathFollower],initialize:function(l,c,m,f,v,S){h.call(this,l,m,f,v,S),this.path=c},preUpdate:function(d,l){this.anims.update(d,l),this.pathUpdate(d)}});r.exports=u},19626:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(29598);a.register("follower",function(h,u,d,l,c){var m=new p(this.scene,h,u,d,l,c);return this.displayList.add(m),this.updateList.add(m),m})},33412:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16569),p=n(56694),h=n(99425),u=n(15978),d=n(83321),l=n(76583),c=new p({Extends:d,initialize:function(f,v,S,x,T,C,w,b){x||(x="__DEFAULT"),d.call(this,f,v,S,x,T),this.type="Plane",this.anims=new a(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(C,w,b),this.setSizeToFrame(!1),this.setViewHeight()},setGridSize:function(m,f,v){m===void 0&&(m=8),f===void 0&&(f=8),v===void 0&&(v=!1);var S=!1;return v&&(S=!0),this.gridWidth=m,this.gridHeight=f,this.isTiled=v,this.clear(),h({mesh:this,widthSegments:m,heightSegments:f,isOrtho:!1,tile:v,flipY:S}),this},setSizeToFrame:function(m){m===void 0&&(m=!0);var f=this.frame;if(this.setPerspective(this.width/f.width,this.height/f.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!m)return this;var v=this.gridWidth,S=this.gridHeight,x=this.vertices,T=f.u0,C=f.u1,w=f.v0,b=f.v1,E,A,I=0;if(this.isTiled)for(w=f.v1,b=f.v0,A=0;A<S;A++)for(E=0;E<v;E++)x[I++].setUVs(T,b),x[I++].setUVs(T,w),x[I++].setUVs(C,b),x[I++].setUVs(T,w),x[I++].setUVs(C,w),x[I++].setUVs(C,b);else{var R=v+1,N=S+1,F=C-T,P=b-w,D=[];for(A=0;A<N;A++)for(E=0;E<R;E++){var M=T+F*(E/v),L=w+P*(A/S);D.push(M,L)}for(A=0;A<S;A++)for(E=0;E<v;E++){var k=(E+R*A)*2,V=(E+R*(A+1))*2,W=(E+1+R*(A+1))*2,K=(E+1+R*A)*2;x[I++].setUVs(D[k],D[k+1]),x[I++].setUVs(D[V],D[V+1]),x[I++].setUVs(D[K],D[K+1]),x[I++].setUVs(D[V],D[V+1]),x[I++].setUVs(D[W],D[W+1]),x[I++].setUVs(D[K],D[K+1])}}return this},setViewHeight:function(m){m===void 0&&(m=this.frame.height);var f=this.fov*(Math.PI/180);this.viewPosition.z=this.height/m/Math.tan(f/2),this.dirtyCache[10]=1},createCheckerboard:function(m,f,v,S,x){m===void 0&&(m=16777215),f===void 0&&(f=255),v===void 0&&(v=255),S===void 0&&(S=255),x===void 0&&(x=128);var T=this.scene.sys.renderer.gl,C=T.createTexture();T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,C),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.NEAREST),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.NEAREST);for(var w=u(m),b=u(f),E=[],A=0;A<16;A++)for(var I=0;I<16;I++)A<8&&I<8||A>7&&I>7?E.push(w.r,w.g,w.b,v):E.push(b.r,b.g,b.b,S);T.texImage2D(T.TEXTURE_2D,0,T.RGBA,16,16,0,T.RGBA,T.UNSIGNED_BYTE,new Uint8Array(E)),C.isAlphaPremultiplied=!0,C.isRenderTexture=!1,C.width=16,C.height=16;var R=this.scene.sys.textures.addGLTexture(l(),C,16,16);return this.removeCheckerboard(),this._checkerboard=R,T.bindTexture(T.TEXTURE_2D,null),this.setTexture(R),this.setSizeToFrame(),this.setViewHeight(x),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(m,f){return this.anims.play(m,f)},playReverse:function(m,f){return this.anims.playReverse(m,f)},playAfterDelay:function(m,f){return this.anims.playAfterDelay(m,f)},playAfterRepeat:function(m,f){return this.anims.playAfterRepeat(m,f)},stop:function(){return this.anims.stop()},stopAfterDelay:function(m){return this.anims.stopAfterDelay(m)},stopAfterRepeat:function(m){return this.anims.stopAfterRepeat(m)},stopOnFrame:function(m){return this.anims.stopOnFrame(m)},preUpdate:function(m,f){d.prototype.preUpdate.call(this,m,f),this.anims.update(m,f)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});r.exports=c},10912:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(32291),h=n(99325),u=n(20494),d=n(10850),l=n(33412);h.register("plane",function(c,m){c===void 0&&(c={});var f=u(c,"key",null),v=u(c,"frame",null),S=d(c,"width",8),x=d(c,"height",8),T=d(c,"tile",!1),C=new l(this.scene,0,0,f,v,S,x,T);m!==void 0&&(c.add=m);var w=d(c,"checkerboard",null);if(w){var b=d(w,"color1",16777215),E=d(w,"color2",255),A=d(w,"alpha1",255),I=d(w,"alpha2",255),R=d(w,"height",128);C.createCheckerboard(b,E,A,I,R)}return a(this.scene,C,c),p(C,c),C})},58322:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(33412),p=n(61286);p.register("plane",function(h,u,d,l,c,m,f){return this.displayList.add(new a(this.scene,h,u,d,l,c,m,f))})},13171:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(89980),u=n(74853),d=n(65641),l=n(71606),c=new a({Extends:h,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Mask,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Transform,p.Visible,l],initialize:function(f,v,S,x,T,C,w){x===void 0&&(x=16777215),T===void 0&&(T=128),C===void 0&&(C=1),w===void 0&&(w=.1),h.call(this,f,"PointLight"),this.initPipeline(d.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(v,S),this.color=u(x),this.intensity=C,this.attenuation=w,this.width=T*2,this.height=T*2,this._radius=T},radius:{get:function(){return this._radius},set:function(m){this._radius=m,this.width=m*2,this.height=m*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});r.exports=c},162:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(99325),h=n(20494),u=n(13171);p.register("pointlight",function(d,l){d===void 0&&(d={});var c=h(d,"color",16777215),m=h(d,"radius",128),f=h(d,"intensity",1),v=h(d,"attenuation",.1),S=new u(this.scene,0,0,c,m,f,v);return l!==void 0&&(d.add=l),a(this.scene,S,d),S})},91201:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(13171);a.register("pointlight",function(h,u,d,l,c,m){return this.displayList.add(new p(this.scene,h,u,d,l,c,m))})},71606:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(80590),r.exports={renderWebGL:p,renderCanvas:h}},80590:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=function(h,u,d,l){d.addToRenderList(u);var c=h.pipelines.set(u.pipeline),m=a(u,d,l).calc,f=u.width,v=u.height,S=-u._radius,x=-u._radius,T=S+f,C=x+v,w=m.getX(0,0),b=m.getY(0,0),E=m.getX(S,x),A=m.getY(S,x),I=m.getX(S,C),R=m.getY(S,C),N=m.getX(T,C),F=m.getY(T,C),P=m.getX(T,x),D=m.getY(T,x);h.pipelines.preBatch(u),c.batchPointLight(u,d,E,A,I,R,N,F,P,D,w,b),h.pipelines.postBatch(u)};r.exports=p},15996:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(845),h=n(1539),u=new a({Extends:h,initialize:function(l,c,m,f,v){c===void 0&&(c=0),m===void 0&&(m=0),f===void 0&&(f=32),v===void 0&&(v=32);var S=new p(l.sys.textures,"",f,v);h.call(this,l,c,m,S),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(d,l){this.width=d,this.height=l,this.texture.setSize(d,l),this.updateDisplayOrigin();var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=d,c.hitArea.height=l),this},resize:function(d,l){return this.setSize(d,l),this},saveTexture:function(d){var l=this.texture;return l.key=d,l.manager.addDynamicTexture(l)&&(this._saved=!0),l},fill:function(d,l,c,m,f,v){return this.texture.fill(d,l,c,m,f,v),this},clear:function(){return this.texture.clear(),this},stamp:function(d,l,c,m,f){return this.texture.stamp(d,l,c,m,f),this},erase:function(d,l,c){return this.texture.erase(d,l,c),this},draw:function(d,l,c,m,f){return this.texture.draw(d,l,c,m,f),this},drawFrame:function(d,l,c,m,f,v){return this.texture.drawFrame(d,l,c,m,f,v),this},repeat:function(d,l,c,m,f,v,S,x,T){return this.texture.repeat(d,l,c,m,f,v,S,x,T),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(d,l,c,m,f){return this.texture.batchDraw(d,l,c,m,f),this},batchDrawFrame:function(d,l,c,m,f,v){return this.texture.batchDrawFrame(d,l,c,m,f,v),this},endDraw:function(d){return this.texture.endDraw(d),this},snapshotArea:function(d,l,c,m,f,v,S){return this.texture.snapshotArea(d,l,c,m,f,v,S),this},snapshot:function(d,l,c){return this.snapshotArea(0,0,this.width,this.height,d,l,c)},snapshotPixel:function(d,l,c){return this.snapshotArea(d,l,1,1,c,"pixel")},preDestroy:function(){this._saved||this.texture.destroy()}});r.exports=u},85692:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(99325),h=n(20494),u=n(15996);p.register("renderTexture",function(d,l){d===void 0&&(d={});var c=h(d,"x",0),m=h(d,"y",0),f=h(d,"width",32),v=h(d,"height",32),S=new u(this.scene,c,m,f,v);return l!==void 0&&(d.add=l),a(this.scene,S,d),S})},29599:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(15996);a.register("renderTexture",function(h,u,d,l){return this.displayList.add(new p(this.scene,h,u,d,l))})},79968:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16569),p=n(56694),h=n(64937),u=n(89980),d=n(65641),l=n(58912),c=n(93736),m=new p({Extends:u,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Flip,h.Mask,h.Pipeline,h.PostPipeline,h.Size,h.Texture,h.Transform,h.Visible,h.ScrollFactor,l],initialize:function(v,S,x,T,C,w,b,E,A){T===void 0&&(T="__DEFAULT"),w===void 0&&(w=2),b===void 0&&(b=!0),u.call(this,v,"Rope"),this.anims=new a(this),this.points=w,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=T==="__DEFAULT",this.dirty=!1,this.horizontal=b,this._flipX=!1,this._flipY=!1,this._perp=new c,this.debugCallback=null,this.debugGraphic=null,this.setTexture(T,C),this.setPosition(S,x),this.setSizeToFrame(),this.initPipeline(d.ROPE_PIPELINE),Array.isArray(w)&&this.resizeArrays(w.length),this.setPoints(w,E,A),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(f,v){var S=this.anims.currentFrame;this.anims.update(f,v),this.anims.currentFrame!==S&&(this.updateUVs(),this.updateVertices())},play:function(f,v,S){return this.anims.play(f,v,S),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(f,v,S){return f===void 0&&(f=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(f,v,S))},setVertical:function(f,v,S){return f===void 0&&(f=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(f,v,S)):this},setTintFill:function(f){return f===void 0&&(f=!1),this.tintFill=f,this},setAlphas:function(f,v){var S=this.points.length;if(S<1)return this;var x=this.alphas;f===void 0?f=[1]:!Array.isArray(f)&&v===void 0&&(f=[f]);var T,C=0;if(v!==void 0)for(T=0;T<S;T++)C=T*2,x[C]=f,x[C+1]=v;else if(f.length===S)for(T=0;T<S;T++)C=T*2,x[C]=f[T],x[C+1]=f[T];else{var w=f[0];for(T=0;T<S;T++)C=T*2,f.length>C&&(w=f[C]),x[C]=w,f.length>C+1&&(w=f[C+1]),x[C+1]=w}return this},setColors:function(f){var v=this.points.length;if(v<1)return this;var S=this.colors;f===void 0?f=[16777215]:Array.isArray(f)||(f=[f]);var x,T=0;if(f.length===v)for(x=0;x<v;x++)T=x*2,S[T]=f[x],S[T+1]=f[x];else{var C=f[0];for(x=0;x<v;x++)T=x*2,f.length>T&&(C=f[T]),S[T]=C,f.length>T+1&&(C=f[T+1]),S[T+1]=C}return this},setPoints:function(f,v,S){if(f===void 0&&(f=2),typeof f=="number"){var x=f;x<2&&(x=2),f=[];var T,C,w;if(this.horizontal)for(w=-this.frame.halfWidth,C=this.frame.width/(x-1),T=0;T<x;T++)f.push({x:w+T*C,y:0});else for(w=-this.frame.halfHeight,C=this.frame.height/(x-1),T=0;T<x;T++)f.push({x:0,y:w+T*C})}var b=f.length,E=this.points.length;return b<1?(console.warn("Rope: Not enough points given"),this):(b===1&&(f.unshift({x:0,y:0}),b++),E!==b&&this.resizeArrays(b),this.dirty=!0,this.points=f,this.updateUVs(),v!=null&&this.setColors(v),S!=null&&this.setAlphas(S),this)},updateUVs:function(){for(var f=this.uv,v=this.points.length,S=this.frame.u0,x=this.frame.v0,T=this.frame.u1,C=this.frame.v1,w=(T-S)/(v-1),b=(C-x)/(v-1),E=0;E<v;E++){var A=E*4,I,R,N,F;this.horizontal?(this._flipX?(I=T-E*w,N=T-E*w):(I=S+E*w,N=S+E*w),this._flipY?(R=C,F=x):(R=x,F=C)):(this._flipX?(I=S,N=T):(I=T,N=S),this._flipY?(R=C-E*b,F=C-E*b):(R=x+E*b,F=x+E*b)),f[A+0]=I,f[A+1]=R,f[A+2]=N,f[A+3]=F}return this},resizeArrays:function(f){var v=this.colors,S=this.alphas;this.vertices=new Float32Array(f*4),this.uv=new Float32Array(f*4),v=new Uint32Array(f*2),S=new Float32Array(f*2);for(var x=0;x<f*2;x++)v[x]=16777215,S[x]=1;return this.colors=v,this.alphas=S,this.dirty=!0,this},updateVertices:function(){var f=this._perp,v=this.points,S=this.vertices,x=v.length;if(this.dirty=!1,!(x<1)){for(var T,C=v[0],w=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,b=0;b<x;b++){var E=v[b],A=b*4;b<x-1?T=v[b+1]:T=E,f.x=T.y-C.y,f.y=-(T.x-C.x);var I=f.length();f.x/=I,f.y/=I,f.x*=w,f.y*=w,S[A]=E.x+f.x,S[A+1]=E.y+f.y,S[A+2]=E.x-f.x,S[A+3]=E.y-f.y,C=E}return this}},setDebug:function(f,v){return this.debugGraphic=f,!f&&!v?this.debugCallback=null:v?this.debugCallback=v:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(f,v,S){var x=f.debugGraphic,T=S[0],C=S[1],w=S[2],b=S[3];x.lineBetween(T,C,w,b);for(var E=4;E<v;E+=4){var A=S[E+0],I=S[E+1],R=S[E+2],N=S[E+3];x.lineBetween(T,C,A,I),x.lineBetween(w,b,R,N),x.lineBetween(w,b,A,I),x.lineBetween(A,I,R,N),T=A,C=I,w=R,b=N}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(f){return this._flipX=f,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(f){return this._flipY=f,this.updateUVs()}}});r.exports=m},44598:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){};r.exports=g},96027:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(99325),h=n(20494),u=n(10850),d=n(79968);p.register("rope",function(l,c){l===void 0&&(l={});var m=h(l,"key",null),f=h(l,"frame",null),v=h(l,"horizontal",!0),S=u(l,"points",void 0),x=u(l,"colors",void 0),T=u(l,"alphas",void 0),C=new d(this.scene,0,0,m,f,S,v,x,T);return c!==void 0&&(l.add=c),a(this.scene,C,l),C})},31982:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79968),p=n(61286);p.register("rope",function(h,u,d,l,c,m,f,v){return this.displayList.add(new a(this.scene,h,u,d,l,c,m,f,v))})},58912:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(49489),h=n(44598),r.exports={renderWebGL:p,renderCanvas:h}},49489:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=n(75512),h=function(u,d,l,c){l.addToRenderList(d);var m=u.pipelines.set(d.pipeline,d),f=a(d,l,c).calc,v=d.vertices,S=d.uv,x=d.colors,T=d.alphas,C=d.alpha,w=p.getTintAppendFloatAlpha,b=l.roundPixels,E=v.length,A=Math.floor(E*.5);m.flush(),u.pipelines.preBatch(d);var I=m.setGameObject(d),R=m.vertexViewF32,N=m.vertexViewU32,F=m.vertexCount*m.currentShader.vertexComponentCount-1,P=0,D=d.tintFill;d.dirty&&d.updateVertices();for(var M=d.debugCallback,L=[],k=0;k<E;k+=2){var V=v[k+0],W=v[k+1],K=V*f.a+W*f.c+f.e,B=V*f.b+W*f.d+f.f;b&&(K=Math.round(K),B=Math.round(B)),R[++F]=K,R[++F]=B,R[++F]=S[k+0],R[++F]=S[k+1],R[++F]=I,R[++F]=D,N[++F]=w(x[P],l.alpha*(T[P]*C)),P++,M&&(L[k+0]=K,L[k+1]=B)}M&&M.call(d,d,E,L),m.vertexCount+=A,m.currentBatch.count=m.vertexCount-m.currentBatch.start,u.pipelines.postBatch(d)};r.exports=h},27902:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(89980),u=n(72632),d=n(98611),l=n(22440),c=n(24252),m=n(69360),f=new a({Extends:h,Mixins:[p.ComputedSize,p.Depth,p.GetBounds,p.Mask,p.Origin,p.ScrollFactor,p.Transform,p.Visible,c],initialize:function(S,x,T,C,w,b,E,A){T===void 0&&(T=0),C===void 0&&(C=0),w===void 0&&(w=128),b===void 0&&(b=128),h.call(this,S,"Shader"),this.blendMode=-1,this.shader;var I=S.sys.renderer;this.renderer=I,this.gl=I.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=I.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new m,this._tempMatrix2=new m,this._tempMatrix3=new m,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=I.width,this._rendererHeight=I.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(T,C),this.setSize(w,b),this.setOrigin(.5,.5),this.setShader(x,E,A)},willRender:function(v){return this.renderToTexture?!0:!(h.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},setRenderToTexture:function(v,S){if(S===void 0&&(S=!1),!this.renderToTexture){var x=this.width,T=this.height,C=this.renderer;this.glTexture=C.createTextureFromSource(null,x,T,0),this.glTexture.flipY=S,this.framebuffer=C.createFramebuffer(x,T,this.glTexture,!1),this._rendererWidth=x,this._rendererHeight=T,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),v&&(this.texture=this.scene.sys.textures.addGLTexture(v,this.glTexture,x,T))}return this.shader&&(C.pipelines.clear(),this.load(),this.flush(),C.pipelines.rebind()),this},setShader:function(v,S,x){if(S===void 0&&(S=[]),typeof v=="string"){var T=this.scene.sys.cache.shader;if(!T.has(v))return console.warn("Shader missing: "+v),this;this.shader=T.get(v)}else this.shader=v;var C=this.gl,w=this.renderer;this.program&&C.deleteProgram(this.program);var b=w.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);C.uniformMatrix4fv(C.getUniformLocation(b,"uViewMatrix"),!1,this.viewMatrix),C.uniformMatrix4fv(C.getUniformLocation(b,"uProjectionMatrix"),!1,this.projectionMatrix),C.uniform2f(C.getUniformLocation(b,"uResolution"),this.width,this.height),this.program=b;var E=new Date,A={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[E.getFullYear(),E.getMonth(),E.getDate(),E.getHours()*60*60+E.getMinutes()*60+E.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=d(!0,{},this.shader.uniforms,A):this.uniforms=A;for(var I=0;I<4;I++)S[I]&&this.setSampler2D("iChannel"+I,S[I],I,x);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(v){return this.pointer=v,this},projOrtho:function(v,S,x,T){var C=-1e3,w=1e3,b=1/(v-S),E=1/(x-T),A=1/(C-w),I=this.projectionMatrix;I[0]=-2*b,I[5]=-2*E,I[10]=2*A,I[12]=(v+S)*b,I[13]=(T+x)*E,I[14]=(w+C)*A;var R=this.program,N=this.gl,F=this.renderer;F.setProgram(R),N.uniformMatrix4fv(N.getUniformLocation(R,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=S,this._rendererHeight=x},initUniforms:function(){var v=this.gl,S=this.renderer.glFuncMap,x=this.program;this._textureCount=0;for(var T in this.uniforms){var C=this.uniforms[T],w=C.type,b=S[w];C.uniformLocation=v.getUniformLocation(x,T),w!=="sampler2D"&&(C.glMatrix=b.matrix,C.glValueLength=b.length,C.glFunc=b.func)}},setSampler2DBuffer:function(v,S,x,T,C,w){C===void 0&&(C=0),w===void 0&&(w={});var b=this.uniforms[v];return b.value=S,w.width=x,w.height=T,b.textureData=w,this._textureCount=C,this.initSampler2D(b),this},setSampler2D:function(v,S,x,T){x===void 0&&(x=0);var C=this.scene.sys.textures;if(C.exists(S)){var w=C.getFrame(S);if(w.glTexture&&w.glTexture.isRenderTexture)return this.setSampler2DBuffer(v,w.glTexture,w.width,w.height,x,T);var b=this.uniforms[v],E=w.source;b.textureKey=S,b.source=E.image,b.value=w.glTexture,E.isGLTexture&&(T||(T={}),T.width=E.width,T.height=E.height),T&&(b.textureData=T),this._textureCount=x,this.initSampler2D(b)}return this},setUniform:function(v,S){return l(this.uniforms,v,S),this},getUniform:function(v){return u(this.uniforms,v,null)},setChannel0:function(v,S){return this.setSampler2D("iChannel0",v,0,S)},setChannel1:function(v,S){return this.setSampler2D("iChannel1",v,1,S)},setChannel2:function(v,S){return this.setSampler2D("iChannel2",v,2,S)},setChannel3:function(v,S){return this.setSampler2D("iChannel3",v,3,S)},initSampler2D:function(v){if(v.value){var S=this.gl;S.activeTexture(S.TEXTURE0+this._textureCount),S.bindTexture(S.TEXTURE_2D,v.value);var x=v.textureData;if(x&&!v.value.isRenderTexture){var T=S[u(x,"magFilter","linear").toUpperCase()],C=S[u(x,"minFilter","linear").toUpperCase()],w=S[u(x,"wrapS","repeat").toUpperCase()],b=S[u(x,"wrapT","repeat").toUpperCase()],E=S[u(x,"format","rgba").toUpperCase()];if(x.repeat&&(w=S.REPEAT,b=S.REPEAT),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,!!x.flipY),x.width){var A=u(x,"width",512),I=u(x,"height",2),R=u(x,"border",0);S.texImage2D(S.TEXTURE_2D,0,E,A,I,R,E,S.UNSIGNED_BYTE,null)}else S.texImage2D(S.TEXTURE_2D,0,E,S.RGBA,S.UNSIGNED_BYTE,v.source);S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,T),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,C),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,w),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,b)}this.renderer.setProgram(this.program),S.uniform1i(v.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var v=this.gl,S=this.uniforms,x,T,C,w,b,E=0;for(var A in S)x=S[A],C=x.glFunc,T=x.glValueLength,w=x.uniformLocation,b=x.value,b!==null&&(T===1?x.glMatrix?C.call(v,w,x.transpose,b):C.call(v,w,b):T===2?C.call(v,w,b.x,b.y):T===3?C.call(v,w,b.x,b.y,b.z):T===4?C.call(v,w,b.x,b.y,b.z,b.w):x.type==="sampler2D"&&(v.activeTexture(v.TEXTURE0+E),v.bindTexture(v.TEXTURE_2D,b),v.uniform1i(w,E),E++))},load:function(v){var S=this.gl,x=this.width,T=this.height,C=this.renderer,w=this.program,b=this.viewMatrix;if(!this.renderToTexture){var E=-this._displayOriginX,A=-this._displayOriginY;b[0]=v[0],b[1]=v[1],b[4]=v[2],b[5]=v[3],b[8]=v[4],b[9]=v[5],b[12]=b[0]*E+b[4]*A,b[13]=b[1]*E+b[5]*A}S.useProgram(w),S.uniformMatrix4fv(S.getUniformLocation(w,"uViewMatrix"),!1,b),S.uniform2f(S.getUniformLocation(w,"uResolution"),this.width,this.height);var I=this.uniforms,R=I.resolution;R.value.x=x,R.value.y=T,I.time.value=C.game.loop.getDuration();var N=this.pointer;if(N){var F=I.mouse,P=N.x/x,D=1-N.y/T;F.value.x=P.toFixed(2),F.value.y=D.toFixed(2)}this.syncUniforms()},flush:function(){var v=this.width,S=this.height,x=this.program,T=this.gl,C=this.vertexBuffer,w=this.renderer,b=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(w.setFramebuffer(this.framebuffer),T.clearColor(0,0,0,0),T.clear(T.COLOR_BUFFER_BIT)),T.bindBuffer(T.ARRAY_BUFFER,C);var E=T.getAttribLocation(x,"inPosition");E!==-1&&(T.enableVertexAttribArray(E),T.vertexAttribPointer(E,2,T.FLOAT,!1,b,0));var A=this.vertexViewF32;A[3]=S,A[4]=v,A[5]=S,A[8]=v,A[9]=S,A[10]=v;var I=6;T.bufferSubData(T.ARRAY_BUFFER,0,this.bytes.subarray(0,I*b)),T.drawArrays(T.TRIANGLES,0,I),this.renderToTexture&&w.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var v=this.gl;v.deleteProgram(this.program),v.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});r.exports=f},10612:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){};r.exports=g},13908:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(99325),h=n(20494),u=n(27902);p.register("shader",function(d,l){d===void 0&&(d={});var c=h(d,"key",null),m=h(d,"x",0),f=h(d,"y",0),v=h(d,"width",128),S=h(d,"height",128),x=new u(this.scene,c,m,f,v,S);return l!==void 0&&(d.add=l),a(this.scene,x,d),x})},51979:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(27902),p=n(61286);p.register("shader",function(h,u,d,l,c,m,f){return this.displayList.add(new a(this.scene,h,u,d,l,c,m,f))})},24252:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(19782),h=n(10612),r.exports={renderWebGL:p,renderCanvas:h}},19782:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=function(h,u,d,l){if(u.shader){if(d.addToRenderList(u),h.pipelines.clear(),u.renderToTexture)u.load(),u.flush();else{var c=a(u,d,l).calc;(h.width!==u._rendererWidth||h.height!==u._rendererHeight)&&u.projOrtho(0,h.width,h.height,0),u.load(c.matrix),u.flush()}h.pipelines.rebind()}};r.exports=p},19543:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(75512),p=function(h,u,d,l,c,m){for(var f=a.getTintAppendFloatAlpha(d.fillColor,d.fillAlpha*l),v=d.pathData,S=d.pathIndexes,x=0;x<S.length;x+=3){var T=S[x]*2,C=S[x+1]*2,w=S[x+2]*2,b=v[T+0]-c,E=v[T+1]-m,A=v[C+0]-c,I=v[C+1]-m,R=v[w+0]-c,N=v[w+1]-m,F=u.getX(b,E),P=u.getY(b,E),D=u.getX(A,I),M=u.getY(A,I),L=u.getX(R,N),k=u.getY(R,N);h.batchTri(d,F,P,D,M,L,k,0,0,1,1,f,f,f,2)}};r.exports=p},15608:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=p||a.fillColor,d=h||a.fillAlpha,l=(u&16711680)>>>16,c=(u&65280)>>>8,m=u&255;n.fillStyle="rgba("+l+","+c+","+m+","+d+")"};r.exports=g},17876:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=p||a.strokeColor,d=h||a.strokeAlpha,l=(u&16711680)>>>16,c=(u&65280)>>>8,m=u&255;n.strokeStyle="rgba("+l+","+c+","+m+","+d+")",n.lineWidth=a.lineWidth};r.exports=g},91461:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(89980),u=n(88829),d=new a({Extends:h,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.GetBounds,p.Mask,p.Origin,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Transform,p.Visible],initialize:function(c,m,f){m===void 0&&(m="Shape"),h.call(this,c,m),this.geom=f,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new u,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(l,c){return c===void 0&&(c=1),l===void 0?this.isFilled=!1:(this.fillColor=l,this.fillAlpha=c,this.isFilled=!0),this},setStrokeStyle:function(l,c,m){return m===void 0&&(m=1),l===void 0?this.isStroked=!1:(this.lineWidth=l,this.strokeColor=c,this.strokeAlpha=m,this.isStroked=!0),this},setClosePath:function(l){return this.closePath=l,this},setSize:function(l,c){return this.width=l,this.height=c,this},setDisplaySize:function(l,c){return this.displayWidth=l,this.displayHeight=c,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}}});r.exports=d},50262:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(75512),p=function(h,u,d,l,c){var m=h.strokeTint,f=a.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*d);m.TL=f,m.TR=f,m.BL=f,m.BR=f;var v=u.pathData,S=v.length-1,x=u.lineWidth,T=x/2,C=v[0]-l,w=v[1]-c;u.closePath||(S-=2);for(var b=2;b<S;b+=2){var E=v[b]-l,A=v[b+1]-c;h.batchLine(C,w,E,A,T,T,x,b-2,u.closePath?b===S-1:!1),C=E,w=A}};r.exports=p},28593:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(2213),p=n(56694),h=n(75606),u=n(11117),d=n(26673),l=n(83392),c=n(91461),m=new p({Extends:c,Mixins:[a],initialize:function(v,S,x,T,C,w,b,E,A){S===void 0&&(S=0),x===void 0&&(x=0),T===void 0&&(T=128),C===void 0&&(C=0),w===void 0&&(w=360),b===void 0&&(b=!1),c.call(this,v,"Arc",new d(0,0,T)),this._startAngle=C,this._endAngle=w,this._anticlockwise=b,this._iterations=.01,this.setPosition(S,x);var I=this.geom.radius*2;this.setSize(I,I),E!==void 0&&this.setFillStyle(E,A),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(f){this._iterations=f,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(f){this.geom.radius=f;var v=f*2;this.setSize(v,v),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(f){this._startAngle=f,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(f){this._endAngle=f,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(f){this._anticlockwise=f,this.updateData()}},setRadius:function(f){return this.radius=f,this},setIterations:function(f){return f===void 0&&(f=.01),this.iterations=f,this},setStartAngle:function(f,v){return this._startAngle=f,v!==void 0&&(this._anticlockwise=v),this.updateData()},setEndAngle:function(f,v){return this._endAngle=f,v!==void 0&&(this._anticlockwise=v),this.updateData()},updateData:function(){var f=this._iterations,v=f,S=this.geom.radius,x=h(this._startAngle),T=h(this._endAngle),C=this._anticlockwise,w=S,b=S;T-=x,C?T<-l.PI2?T=-l.PI2:T>0&&(T=-l.PI2+T%l.PI2):T>l.PI2?T=l.PI2:T<0&&(T=l.PI2+T%l.PI2);for(var E=[w+Math.cos(x)*S,b+Math.sin(x)*S],A;v<1;)A=T*v+x,E.push(w+Math.cos(A)*S,b+Math.sin(A)*S),v+=f;return A=T+x,E.push(w+Math.cos(A)*S,b+Math.sin(A)*S),E.push(w+Math.cos(x)*S,b+Math.sin(x)*S),this.pathIndexes=u(E),this.pathData=E,this}});r.exports=m},23560:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(75606),p=n(15608),h=n(17876),u=n(49584),d=function(l,c,m,f){m.addToRenderList(c);var v=l.currentContext;if(u(l,v,c,m,f)){var S=c.radius;v.beginPath(),v.arc(S-c.originX*(S*2),S-c.originY*(S*2),S,a(c._startAngle),a(c._endAngle),c.anticlockwise),c.closePath&&v.closePath(),c.isFilled&&(p(v,c),v.fill()),c.isStroked&&(h(v,c),v.stroke()),v.restore()}};r.exports=d},10369:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(28593),p=n(61286);p.register("arc",function(h,u,d,l,c,m,f,v){return this.displayList.add(new a(this.scene,h,u,d,l,c,m,f,v))}),p.register("circle",function(h,u,d,l,c){return this.displayList.add(new a(this.scene,h,u,d,0,360,!1,l,c))})},2213:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(58356),h=n(23560),r.exports={renderWebGL:p,renderCanvas:h}},58356:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=n(19543),h=n(50262),u=function(d,l,c,m){c.addToRenderList(l);var f=d.pipelines.set(l.pipeline),v=a(l,c,m),S=f.calcMatrix.copyFrom(v.calc),x=l._displayOriginX,T=l._displayOriginY,C=c.alpha*l.alpha;d.pipelines.preBatch(l),l.isFilled&&p(f,S,l,C,x,T),l.isStroked&&h(f,l,C,x,T),d.pipelines.postBatch(l)};r.exports=u},15220:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(87203),h=n(11117),u=n(74118),d=n(91461),l=new a({Extends:d,Mixins:[p],initialize:function(m,f,v,S,x,T){f===void 0&&(f=0),v===void 0&&(v=0),d.call(this,m,"Curve",S),this._smoothness=32,this._curveBounds=new u,this.closePath=!1,this.setPosition(f,v),x!==void 0&&this.setFillStyle(x,T),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(c){this._smoothness=c,this.updateData()}},setSmoothness:function(c){return this._smoothness=c,this.updateData()},updateData:function(){var c=this._curveBounds,m=this._smoothness;this.geom.getBounds(c,m),this.setSize(c.width,c.height),this.updateDisplayOrigin();for(var f=[],v=this.geom.getPoints(m),S=0;S<v.length;S++)f.push(v[S].x,v[S].y);return f.push(v[0].x,v[0].y),this.pathIndexes=h(f),this.pathData=f,this}});r.exports=l},4024:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15608),p=n(17876),h=n(49584),u=function(d,l,c,m){c.addToRenderList(l);var f=d.currentContext;if(h(d,f,l,c,m)){var v=l._displayOriginX+l._curveBounds.x,S=l._displayOriginY+l._curveBounds.y,x=l.pathData,T=x.length-1,C=x[0]-v,w=x[1]-S;f.beginPath(),f.moveTo(C,w),l.closePath||(T-=2);for(var b=2;b<T;b+=2){var E=x[b]-v,A=x[b+1]-S;f.lineTo(E,A)}l.closePath&&f.closePath(),l.isFilled&&(a(f,l),f.fill()),l.isStroked&&(p(f,l),f.stroke()),f.restore()}};r.exports=u},10147:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(15220);a.register("curve",function(h,u,d,l,c){return this.displayList.add(new p(this.scene,h,u,d,l,c))})},87203:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(82958),h=n(4024),r.exports={renderWebGL:p,renderCanvas:h}},82958:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(19543),p=n(73329),h=n(50262),u=function(d,l,c,m){c.addToRenderList(l);var f=d.pipelines.set(l.pipeline),v=p(l,c,m),S=f.calcMatrix.copyFrom(v.calc),x=l._displayOriginX+l._curveBounds.x,T=l._displayOriginY+l._curveBounds.y,C=c.alpha*l.alpha;d.pipelines.preBatch(l),l.isFilled&&a(f,S,l,C,x,T),l.isStroked&&h(f,l,C,x,T),d.pipelines.postBatch(l)};r.exports=u},28591:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(11117),h=n(84171),u=n(95669),d=n(91461),l=new a({Extends:d,Mixins:[h],initialize:function(m,f,v,S,x,T,C){f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=128),x===void 0&&(x=128),d.call(this,m,"Ellipse",new u(S/2,x/2,S,x)),this._smoothness=64,this.setPosition(f,v),this.width=S,this.height=x,T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(c){this._smoothness=c,this.updateData()}},setSize:function(c,m){return this.width=c,this.height=m,this.geom.setPosition(c/2,m/2),this.geom.setSize(c,m),this.updateData()},setSmoothness:function(c){return this._smoothness=c,this.updateData()},updateData:function(){for(var c=[],m=this.geom.getPoints(this._smoothness),f=0;f<m.length;f++)c.push(m[f].x,m[f].y);return c.push(m[0].x,m[0].y),this.pathIndexes=p(c),this.pathData=c,this}});r.exports=l},55881:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15608),p=n(17876),h=n(49584),u=function(d,l,c,m){c.addToRenderList(l);var f=d.currentContext;if(h(d,f,l,c,m)){var v=l._displayOriginX,S=l._displayOriginY,x=l.pathData,T=x.length-1,C=x[0]-v,w=x[1]-S;f.beginPath(),f.moveTo(C,w),l.closePath||(T-=2);for(var b=2;b<T;b+=2){var E=x[b]-v,A=x[b+1]-S;f.lineTo(E,A)}f.closePath(),l.isFilled&&(a(f,l),f.fill()),l.isStroked&&(p(f,l),f.stroke()),f.restore()}};r.exports=u},99869:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(28591),p=n(61286);p.register("ellipse",function(h,u,d,l,c,m){return this.displayList.add(new a(this.scene,h,u,d,l,c,m))})},84171:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(17554),h=n(55881),r.exports={renderWebGL:p,renderCanvas:h}},17554:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(19543),p=n(73329),h=n(50262),u=function(d,l,c,m){c.addToRenderList(l);var f=d.pipelines.set(l.pipeline),v=p(l,c,m),S=f.calcMatrix.copyFrom(v.calc),x=l._displayOriginX,T=l._displayOriginY,C=c.alpha*l.alpha;d.pipelines.preBatch(l),l.isFilled&&a(f,S,l,C,x,T),l.isStroked&&h(f,l,C,x,T),d.pipelines.postBatch(l)};r.exports=u},39169:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(91461),h=n(88059),u=new a({Extends:p,Mixins:[h],initialize:function(l,c,m,f,v,S,x,T,C,w,b){c===void 0&&(c=0),m===void 0&&(m=0),f===void 0&&(f=128),v===void 0&&(v=128),S===void 0&&(S=32),x===void 0&&(x=32),p.call(this,l,"Grid",null),this.cellWidth=S,this.cellHeight=x,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(c,m),this.setSize(f,v),this.setFillStyle(T,C),w!==void 0&&this.setOutlineStyle(w,b),this.updateDisplayOrigin()},setFillStyle:function(d,l){return l===void 0&&(l=1),d===void 0?this.showCells=!1:(this.fillColor=d,this.fillAlpha=l,this.showCells=!0),this},setAltFillStyle:function(d,l){return l===void 0&&(l=1),d===void 0?this.showAltCells=!1:(this.altFillColor=d,this.altFillAlpha=l,this.showAltCells=!0),this},setOutlineStyle:function(d,l){return l===void 0&&(l=1),d===void 0?this.showOutline=!1:(this.outlineFillColor=d,this.outlineFillAlpha=l,this.showOutline=!0),this}});r.exports=u},95525:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15608),p=n(17876),h=n(49584),u=function(d,l,c,m){c.addToRenderList(l);var f=d.currentContext;if(h(d,f,l,c,m)){var v=-l._displayOriginX,S=-l._displayOriginY,x=c.alpha*l.alpha,T=l.width,C=l.height,w=l.cellWidth,b=l.cellHeight,E=Math.ceil(T/w),A=Math.ceil(C/b),I=w,R=b,N=w-(E*w-T),F=b-(A*b-C),P=l.showCells,D=l.showAltCells,M=l.showOutline,L=0,k=0,V=0,W=0,K=0;if(M&&(I--,R--,N===w&&N--,F===b&&F--),P&&l.fillAlpha>0)for(a(f,l),k=0;k<A;k++)for(D&&(V=k%2),L=0;L<E;L++){if(D&&V){V=0;continue}V++,W=L<E-1?I:N,K=k<A-1?R:F,f.fillRect(v+L*w,S+k*b,W,K)}if(D&&l.altFillAlpha>0)for(a(f,l,l.altFillColor,l.altFillAlpha*x),k=0;k<A;k++)for(D&&(V=k%2),L=0;L<E;L++){if(D&&!V){V=1;continue}V=0,W=L<E-1?I:N,K=k<A-1?R:F,f.fillRect(v+L*w,S+k*b,W,K)}if(M&&l.outlineFillAlpha>0){for(p(f,l,l.outlineFillColor,l.outlineFillAlpha*x),L=1;L<E;L++){var B=L*w;f.beginPath(),f.moveTo(B+v,S),f.lineTo(B+v,C+S),f.stroke()}for(k=1;k<A;k++){var G=k*b;f.beginPath(),f.moveTo(v,G+S),f.lineTo(v+T,G+S),f.stroke()}}f.restore()}};r.exports=u},9326:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(39169);a.register("grid",function(h,u,d,l,c,m,f,v,S,x){return this.displayList.add(new p(this.scene,h,u,d,l,c,m,f,v,S,x))})},88059:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(50639),h=n(95525),r.exports={renderWebGL:p,renderCanvas:h}},50639:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=n(75512),h=function(u,d,l,c){l.addToRenderList(d);var m=u.pipelines.set(d.pipeline),f=a(d,l,c),v=m.calcMatrix.copyFrom(f.calc);v.translate(-d._displayOriginX,-d._displayOriginY);var S=l.alpha*d.alpha,x=d.width,T=d.height,C=d.cellWidth,w=d.cellHeight,b=Math.ceil(x/C),E=Math.ceil(T/w),A=C,I=w,R=C-(b*C-x),N=w-(E*w-T),F,P,D=d.showCells,M=d.showAltCells,L=d.showOutline,k=0,V=0,W=0,K=0,B=0;if(L&&(A--,I--,R===C&&R--,N===w&&N--),u.pipelines.preBatch(d),D&&d.fillAlpha>0)for(F=m.fillTint,P=p.getTintAppendFloatAlpha(d.fillColor,d.fillAlpha*S),F.TL=P,F.TR=P,F.BL=P,F.BR=P,V=0;V<E;V++)for(M&&(W=V%2),k=0;k<b;k++){if(M&&W){W=0;continue}W++,K=k<b-1?A:R,B=V<E-1?I:N,m.batchFillRect(k*C,V*w,K,B)}if(M&&d.altFillAlpha>0)for(F=m.fillTint,P=p.getTintAppendFloatAlpha(d.altFillColor,d.altFillAlpha*S),F.TL=P,F.TR=P,F.BL=P,F.BR=P,V=0;V<E;V++)for(M&&(W=V%2),k=0;k<b;k++){if(M&&!W){W=1;continue}W=0,K=k<b-1?A:R,B=V<E-1?I:N,m.batchFillRect(k*C,V*w,K,B)}if(L&&d.outlineFillAlpha>0){var G=m.strokeTint,O=p.getTintAppendFloatAlpha(d.outlineFillColor,d.outlineFillAlpha*S);for(G.TL=O,G.TR=O,G.BL=O,G.BR=O,k=1;k<b;k++){var $=k*C;m.batchLine($,0,$,T,1,1,1,0,!1)}for(V=1;V<E;V++){var z=V*w;m.batchLine(0,z,x,z,1,1,1,0,!1)}}u.pipelines.postBatch(d)};r.exports=h},4415:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72296),p=n(56694),h=n(91461),u=new p({Extends:h,Mixins:[a],initialize:function(l,c,m,f,v,S,x,T){c===void 0&&(c=0),m===void 0&&(m=0),f===void 0&&(f=48),v===void 0&&(v=32),S===void 0&&(S=15658734),x===void 0&&(x=10066329),T===void 0&&(T=13421772),h.call(this,l,"IsoBox",null),this.projection=4,this.fillTop=S,this.fillLeft=x,this.fillRight=T,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(c,m),this.setSize(f,v),this.updateDisplayOrigin()},setProjection:function(d){return this.projection=d,this},setFaces:function(d,l,c){return d===void 0&&(d=!0),l===void 0&&(l=!0),c===void 0&&(c=!0),this.showTop=d,this.showLeft=l,this.showRight=c,this},setFillStyle:function(d,l,c){return this.fillTop=d,this.fillLeft=l,this.fillRight=c,this.isFilled=!0,this}});r.exports=u},32884:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15608),p=n(49584),h=function(u,d,l,c){l.addToRenderList(d);var m=u.currentContext;if(p(u,m,d,l,c)&&d.isFilled){var f=d.width,v=d.height,S=f/2,x=f/d.projection;d.showTop&&(a(m,d,d.fillTop),m.beginPath(),m.moveTo(-S,-v),m.lineTo(0,-x-v),m.lineTo(S,-v),m.lineTo(S,-1),m.lineTo(0,x-1),m.lineTo(-S,-1),m.lineTo(-S,-v),m.fill()),d.showLeft&&(a(m,d,d.fillLeft),m.beginPath(),m.moveTo(-S,0),m.lineTo(0,x),m.lineTo(0,x-v),m.lineTo(-S,-v),m.lineTo(-S,0),m.fill()),d.showRight&&(a(m,d,d.fillRight),m.beginPath(),m.moveTo(S,0),m.lineTo(0,x),m.lineTo(0,x-v),m.lineTo(S,-v),m.lineTo(S,0),m.fill()),m.restore()}};r.exports=h},88154:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(4415);a.register("isobox",function(h,u,d,l,c,m,f){return this.displayList.add(new p(this.scene,h,u,d,l,c,m,f))})},72296:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(33101),h=n(32884),r.exports={renderWebGL:p,renderCanvas:h}},33101:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=n(75512),h=function(u,d,l,c){l.addToRenderList(d);var m=u.pipelines.set(d.pipeline),f=a(d,l,c),v=m.calcMatrix.copyFrom(f.calc),S=d.width,x=d.height,T=S/2,C=S/d.projection,w=l.alpha*d.alpha;if(d.isFilled){var b,E,A,I,R,N,F,P,D;u.pipelines.preBatch(d),d.showTop&&(b=p.getTintAppendFloatAlpha(d.fillTop,w),E=v.getX(-T,-x),A=v.getY(-T,-x),I=v.getX(0,-C-x),R=v.getY(0,-C-x),N=v.getX(T,-x),F=v.getY(T,-x),P=v.getX(0,C-x),D=v.getY(0,C-x),m.batchQuad(d,E,A,I,R,N,F,P,D,0,0,1,1,b,b,b,b,2)),d.showLeft&&(b=p.getTintAppendFloatAlpha(d.fillLeft,w),E=v.getX(-T,0),A=v.getY(-T,0),I=v.getX(0,C),R=v.getY(0,C),N=v.getX(0,C-x),F=v.getY(0,C-x),P=v.getX(-T,-x),D=v.getY(-T,-x),m.batchQuad(d,E,A,I,R,N,F,P,D,0,0,1,1,b,b,b,b,2)),d.showRight&&(b=p.getTintAppendFloatAlpha(d.fillRight,w),E=v.getX(T,0),A=v.getY(T,0),I=v.getX(0,C),R=v.getY(0,C),N=v.getX(0,C-x),F=v.getY(0,C-x),P=v.getX(T,-x),D=v.getY(T,-x),m.batchQuad(d,E,A,I,R,N,F,P,D,0,0,1,1,b,b,b,b,2)),u.pipelines.postBatch(d)}};r.exports=h},65159:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(93387),h=n(91461),u=new a({Extends:h,Mixins:[p],initialize:function(l,c,m,f,v,S,x,T,C){c===void 0&&(c=0),m===void 0&&(m=0),f===void 0&&(f=48),v===void 0&&(v=32),S===void 0&&(S=!1),x===void 0&&(x=15658734),T===void 0&&(T=10066329),C===void 0&&(C=13421772),h.call(this,l,"IsoTriangle",null),this.projection=4,this.fillTop=x,this.fillLeft=T,this.fillRight=C,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=S,this.isFilled=!0,this.setPosition(c,m),this.setSize(f,v),this.updateDisplayOrigin()},setProjection:function(d){return this.projection=d,this},setReversed:function(d){return this.isReversed=d,this},setFaces:function(d,l,c){return d===void 0&&(d=!0),l===void 0&&(l=!0),c===void 0&&(c=!0),this.showTop=d,this.showLeft=l,this.showRight=c,this},setFillStyle:function(d,l,c){return this.fillTop=d,this.fillLeft=l,this.fillRight=c,this.isFilled=!0,this}});r.exports=u},9923:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15608),p=n(49584),h=function(u,d,l,c){l.addToRenderList(d);var m=u.currentContext;if(p(u,m,d,l,c)&&d.isFilled){var f=d.width,v=d.height,S=f/2,x=f/d.projection,T=d.isReversed;d.showTop&&T&&(a(m,d,d.fillTop),m.beginPath(),m.moveTo(-S,-v),m.lineTo(0,-x-v),m.lineTo(S,-v),m.lineTo(0,x-v),m.fill()),d.showLeft&&(a(m,d,d.fillLeft),m.beginPath(),T?(m.moveTo(-S,-v),m.lineTo(0,x),m.lineTo(0,x-v)):(m.moveTo(-S,0),m.lineTo(0,x),m.lineTo(0,x-v)),m.fill()),d.showRight&&(a(m,d,d.fillRight),m.beginPath(),T?(m.moveTo(S,-v),m.lineTo(0,x),m.lineTo(0,x-v)):(m.moveTo(S,0),m.lineTo(0,x),m.lineTo(0,x-v)),m.fill()),m.restore()}};r.exports=h},67765:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(65159);a.register("isotriangle",function(h,u,d,l,c,m,f,v){return this.displayList.add(new p(this.scene,h,u,d,l,c,m,f,v))})},93387:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(54946),h=n(9923),r.exports={renderWebGL:p,renderCanvas:h}},54946:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=n(75512),h=function(u,d,l,c){l.addToRenderList(d);var m=u.pipelines.set(d.pipeline),f=a(d,l,c),v=m.calcMatrix.copyFrom(f.calc),S=d.width,x=d.height,T=S/2,C=S/d.projection,w=d.isReversed,b=l.alpha*d.alpha;if(d.isFilled){u.pipelines.preBatch(d);var E,A,I,R,N,F,P;if(d.showTop&&w){E=p.getTintAppendFloatAlpha(d.fillTop,b),A=v.getX(-T,-x),I=v.getY(-T,-x),R=v.getX(0,-C-x),N=v.getY(0,-C-x),F=v.getX(T,-x),P=v.getY(T,-x);var D=v.getX(0,C-x),M=v.getY(0,C-x);m.batchQuad(d,A,I,R,N,F,P,D,M,0,0,1,1,E,E,E,E,2)}d.showLeft&&(E=p.getTintAppendFloatAlpha(d.fillLeft,b),w?(A=v.getX(-T,-x),I=v.getY(-T,-x),R=v.getX(0,C),N=v.getY(0,C),F=v.getX(0,C-x),P=v.getY(0,C-x)):(A=v.getX(-T,0),I=v.getY(-T,0),R=v.getX(0,C),N=v.getY(0,C),F=v.getX(0,C-x),P=v.getY(0,C-x)),m.batchTri(d,A,I,R,N,F,P,0,0,1,1,E,E,E,2)),d.showRight&&(E=p.getTintAppendFloatAlpha(d.fillRight,b),w?(A=v.getX(T,-x),I=v.getY(T,-x),R=v.getX(0,C),N=v.getY(0,C),F=v.getX(0,C-x),P=v.getY(0,C-x)):(A=v.getX(T,0),I=v.getY(T,0),R=v.getX(0,C),N=v.getY(0,C),F=v.getX(0,C-x),P=v.getY(0,C-x)),m.batchTri(d,A,I,R,N,F,P,0,0,1,1,E,E,E,2)),u.pipelines.postBatch(d)}};r.exports=h},579:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(91461),h=n(88829),u=n(52660),d=new a({Extends:p,Mixins:[u],initialize:function(c,m,f,v,S,x,T,C,w){m===void 0&&(m=0),f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=0),x===void 0&&(x=128),T===void 0&&(T=0),p.call(this,c,"Line",new h(v,S,x,T));var b=Math.max(1,this.geom.right-this.geom.left),E=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(m,f),this.setSize(b,E),C!==void 0&&this.setStrokeStyle(1,C,w),this.updateDisplayOrigin()},setLineWidth:function(l,c){return c===void 0&&(c=l),this._startWidth=l,this._endWidth=c,this.lineWidth=l,this},setTo:function(l,c,m,f){return this.geom.setTo(l,c,m,f),this}});r.exports=d},52044:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(17876),p=n(49584),h=function(u,d,l,c){l.addToRenderList(d);var m=u.currentContext;if(p(u,m,d,l,c)){var f=d._displayOriginX,v=d._displayOriginY;d.isStroked&&(a(m,d),m.beginPath(),m.moveTo(d.geom.x1-f,d.geom.y1-v),m.lineTo(d.geom.x2-f,d.geom.y2-v),m.stroke()),m.restore()}};r.exports=h},85665:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(579);a.register("line",function(h,u,d,l,c,m,f,v){return this.displayList.add(new p(this.scene,h,u,d,l,c,m,f,v))})},52660:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(46952),h=n(52044),r.exports={renderWebGL:p,renderCanvas:h}},46952:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=n(75512),h=function(u,d,l,c){l.addToRenderList(d);var m=u.pipelines.set(d.pipeline),f=a(d,l,c);m.calcMatrix.copyFrom(f.calc);var v=d._displayOriginX,S=d._displayOriginY,x=l.alpha*d.alpha;if(u.pipelines.preBatch(d),d.isStroked){var T=m.strokeTint,C=p.getTintAppendFloatAlpha(d.strokeColor,d.strokeAlpha*x);T.TL=C,T.TR=C,T.BL=C,T.BR=C;var w=d._startWidth,b=d._endWidth;m.batchLine(d.geom.x1-v,d.geom.y1-S,d.geom.x2-v,d.geom.y2-S,w,b,1,0,!1,f.sprite,f.camera)}u.pipelines.postBatch(d)};r.exports=h},91249:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(70573),p=n(56694),h=n(11117),u=n(14045),d=n(8580),l=n(91461),c=n(18974),m=new p({Extends:l,Mixins:[a],initialize:function(v,S,x,T,C,w){S===void 0&&(S=0),x===void 0&&(x=0),l.call(this,v,"Polygon",new d(T));var b=u(this.geom);this.setPosition(S,x),this.setSize(b.width,b.height),C!==void 0&&this.setFillStyle(C,w),this.updateDisplayOrigin(),this.updateData()},smooth:function(f){f===void 0&&(f=1);for(var v=0;v<f;v++)c(this.geom);return this.updateData()},setTo:function(f){this.geom.setTo(f);var v=u(this.geom);return this.setSize(v.width,v.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var f=[],v=this.geom.points,S=0;S<v.length;S++)f.push(v[S].x,v[S].y);return f.push(v[0].x,v[0].y),this.pathIndexes=h(f),this.pathData=f,this}});r.exports=m},40834:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15608),p=n(17876),h=n(49584),u=function(d,l,c,m){c.addToRenderList(l);var f=d.currentContext;if(h(d,f,l,c,m)){var v=l._displayOriginX,S=l._displayOriginY,x=l.pathData,T=x.length-1,C=x[0]-v,w=x[1]-S;f.beginPath(),f.moveTo(C,w),l.closePath||(T-=2);for(var b=2;b<T;b+=2){var E=x[b]-v,A=x[b+1]-S;f.lineTo(E,A)}l.closePath&&f.closePath(),l.isFilled&&(a(f,l),f.fill()),l.isStroked&&(p(f,l),f.stroke()),f.restore()}};r.exports=u},88203:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(91249);a.register("polygon",function(h,u,d,l,c){return this.displayList.add(new p(this.scene,h,u,d,l,c))})},70573:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(72841),h=n(40834),r.exports={renderWebGL:p,renderCanvas:h}},72841:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(19543),p=n(73329),h=n(50262),u=function(d,l,c,m){c.addToRenderList(l);var f=d.pipelines.set(l.pipeline),v=p(l,c,m),S=f.calcMatrix.copyFrom(v.calc),x=l._displayOriginX,T=l._displayOriginY,C=c.alpha*l.alpha;d.pipelines.preBatch(l),l.isFilled&&a(f,S,l,C,x,T),l.isStroked&&h(f,l,C,x,T),d.pipelines.postBatch(l)};r.exports=u},517:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(74118),h=n(91461),u=n(37673),d=new a({Extends:h,Mixins:[u],initialize:function(c,m,f,v,S,x,T){m===void 0&&(m=0),f===void 0&&(f=0),v===void 0&&(v=128),S===void 0&&(S=128),h.call(this,c,"Rectangle",new p(0,0,v,S)),this.setPosition(m,f),this.setSize(v,S),x!==void 0&&this.setFillStyle(x,T),this.updateDisplayOrigin(),this.updateData()},setSize:function(l,c){this.width=l,this.height=c,this.geom.setSize(l,c),this.updateData(),this.updateDisplayOrigin();var m=this.input;return m&&!m.customHitArea&&(m.hitArea.width=l,m.hitArea.height=c),this},updateData:function(){var l=[],c=this.geom,m=this._tempLine;return c.getLineA(m),l.push(m.x1,m.y1,m.x2,m.y2),c.getLineB(m),l.push(m.x2,m.y2),c.getLineC(m),l.push(m.x2,m.y2),c.getLineD(m),l.push(m.x2,m.y2),this.pathData=l,this}});r.exports=d},4091:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15608),p=n(17876),h=n(49584),u=function(d,l,c,m){c.addToRenderList(l);var f=d.currentContext;if(h(d,f,l,c,m)){var v=l._displayOriginX,S=l._displayOriginY;l.isFilled&&(a(f,l),f.fillRect(-v,-S,l.width,l.height)),l.isStroked&&(p(f,l),f.beginPath(),f.rect(-v,-S,l.width,l.height),f.stroke()),f.restore()}};r.exports=u},94355:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(517);a.register("rectangle",function(h,u,d,l,c,m){return this.displayList.add(new p(this.scene,h,u,d,l,c,m))})},37673:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(43532),h=n(4091),r.exports={renderWebGL:p,renderCanvas:h}},43532:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=n(50262),h=n(75512),u=function(d,l,c,m){c.addToRenderList(l);var f=d.pipelines.set(l.pipeline),v=a(l,c,m);f.calcMatrix.copyFrom(v.calc);var S=l._displayOriginX,x=l._displayOriginY,T=c.alpha*l.alpha;if(d.pipelines.preBatch(l),l.isFilled){var C=f.fillTint,w=h.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*T);C.TL=w,C.TR=w,C.BL=w,C.BR=w,f.batchFillRect(-S,-x,l.width,l.height)}l.isStroked&&p(f,l,T,S,x),d.pipelines.postBatch(l)};r.exports=u},77843:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(87956),p=n(56694),h=n(11117),u=n(91461),d=new p({Extends:u,Mixins:[a],initialize:function(c,m,f,v,S,x,T,C){m===void 0&&(m=0),f===void 0&&(f=0),v===void 0&&(v=5),S===void 0&&(S=32),x===void 0&&(x=64),u.call(this,c,"Star",null),this._points=v,this._innerRadius=S,this._outerRadius=x,this.setPosition(m,f),this.setSize(x*2,x*2),T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},setPoints:function(l){return this._points=l,this.updateData()},setInnerRadius:function(l){return this._innerRadius=l,this.updateData()},setOuterRadius:function(l){return this._outerRadius=l,this.updateData()},points:{get:function(){return this._points},set:function(l){this._points=l,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(l){this._innerRadius=l,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(l){this._outerRadius=l,this.updateData()}},updateData:function(){var l=[],c=this._points,m=this._innerRadius,f=this._outerRadius,v=Math.PI/2*3,S=Math.PI/c,x=f,T=f;l.push(x,T+-f);for(var C=0;C<c;C++)l.push(x+Math.cos(v)*f,T+Math.sin(v)*f),v+=S,l.push(x+Math.cos(v)*m,T+Math.sin(v)*m),v+=S;return l.push(x,T+-f),this.pathIndexes=h(l),this.pathData=l,this}});r.exports=d},11401:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15608),p=n(17876),h=n(49584),u=function(d,l,c,m){c.addToRenderList(l);var f=d.currentContext;if(h(d,f,l,c,m)){var v=l._displayOriginX,S=l._displayOriginY,x=l.pathData,T=x.length-1,C=x[0]-v,w=x[1]-S;f.beginPath(),f.moveTo(C,w),l.closePath||(T-=2);for(var b=2;b<T;b+=2){var E=x[b]-v,A=x[b+1]-S;f.lineTo(E,A)}f.closePath(),l.isFilled&&(a(f,l),f.fill()),l.isStroked&&(p(f,l),f.stroke()),f.restore()}};r.exports=u},23962:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(77843),p=n(61286);p.register("star",function(h,u,d,l,c,m,f){return this.displayList.add(new a(this.scene,h,u,d,l,c,m,f))})},87956:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(12037),h=n(11401),r.exports={renderWebGL:p,renderCanvas:h}},12037:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(19543),p=n(73329),h=n(50262),u=function(d,l,c,m){c.addToRenderList(l);var f=d.pipelines.set(l.pipeline),v=p(l,c,m),S=f.calcMatrix.copyFrom(v.calc),x=l._displayOriginX,T=l._displayOriginY,C=c.alpha*l.alpha;d.pipelines.preBatch(l),l.isFilled&&a(f,S,l,C,x,T),l.isStroked&&h(f,l,C,x,T),d.pipelines.postBatch(l)};r.exports=u},21873:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(91461),h=n(66349),u=n(70498),d=new a({Extends:p,Mixins:[u],initialize:function(c,m,f,v,S,x,T,C,w,b,E){m===void 0&&(m=0),f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=128),x===void 0&&(x=64),T===void 0&&(T=0),C===void 0&&(C=128),w===void 0&&(w=128),p.call(this,c,"Triangle",new h(v,S,x,T,C,w));var A=this.geom.right-this.geom.left,I=this.geom.bottom-this.geom.top;this.setPosition(m,f),this.setSize(A,I),b!==void 0&&this.setFillStyle(b,E),this.updateDisplayOrigin(),this.updateData()},setTo:function(l,c,m,f,v,S){return this.geom.setTo(l,c,m,f,v,S),this.updateData()},updateData:function(){var l=[],c=this.geom,m=this._tempLine;return c.getLineA(m),l.push(m.x1,m.y1,m.x2,m.y2),c.getLineB(m),l.push(m.x2,m.y2),c.getLineC(m),l.push(m.x2,m.y2),this.pathData=l,this}});r.exports=d},60213:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15608),p=n(17876),h=n(49584),u=function(d,l,c,m){c.addToRenderList(l);var f=d.currentContext;if(h(d,f,l,c,m)){var v=l._displayOriginX,S=l._displayOriginY,x=l.geom.x1-v,T=l.geom.y1-S,C=l.geom.x2-v,w=l.geom.y2-S,b=l.geom.x3-v,E=l.geom.y3-S;f.beginPath(),f.moveTo(x,T),f.lineTo(C,w),f.lineTo(b,E),f.closePath(),l.isFilled&&(a(f,l),f.fill()),l.isStroked&&(p(f,l),f.stroke()),f.restore()}};r.exports=u},79296:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(21873);a.register("triangle",function(h,u,d,l,c,m,f,v,S,x){return this.displayList.add(new p(this.scene,h,u,d,l,c,m,f,v,S,x))})},70498:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(72291),h=n(60213),r.exports={renderWebGL:p,renderCanvas:h}},72291:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=n(50262),h=n(75512),u=function(d,l,c,m){c.addToRenderList(l);var f=d.pipelines.set(l.pipeline),v=a(l,c,m);f.calcMatrix.copyFrom(v.calc);var S=l._displayOriginX,x=l._displayOriginY,T=c.alpha*l.alpha;if(d.pipelines.preBatch(l),l.isFilled){var C=f.fillTint,w=h.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*T);C.TL=w,C.TR=w,C.BL=w,C.BR=w;var b=l.geom.x1-S,E=l.geom.y1-x,A=l.geom.x2-S,I=l.geom.y2-x,R=l.geom.x3-S,N=l.geom.y3-x;f.batchFillTriangle(b,E,A,I,R,N,v.sprite,v.camera)}l.isStroked&&p(f,l,T,S,x),d.pipelines.postBatch(l)};r.exports=u},13747:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16569),p=n(56694),h=n(64937),u=n(89980),d=n(20791),l=new p({Extends:u,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Size,h.TextureCrop,h.Tint,h.Transform,h.Visible,d],initialize:function(m,f,v,S,x){u.call(this,m,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(S,x),this.setPosition(f,v),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(c,m){this.anims.update(c,m)},play:function(c,m){return this.anims.play(c,m)},playReverse:function(c,m){return this.anims.playReverse(c,m)},playAfterDelay:function(c,m){return this.anims.playAfterDelay(c,m)},playAfterRepeat:function(c,m){return this.anims.playAfterRepeat(c,m)},chain:function(c){return this.anims.chain(c)},stop:function(){return this.anims.stop()},stopAfterDelay:function(c){return this.anims.stopAfterDelay(c)},stopAfterRepeat:function(c){return this.anims.stopAfterRepeat(c)},stopOnFrame:function(c){return this.anims.stopOnFrame(c)},toJSON:function(){return h.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});r.exports=l},27573:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){p.addToRenderList(a),n.batchSprite(a,a.frame,p,h)};r.exports=g},89219:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(32291),h=n(99325),u=n(20494),d=n(13747);h.register("sprite",function(l,c){l===void 0&&(l={});var m=u(l,"key",null),f=u(l,"frame",null),v=new d(this.scene,0,0,m,f);return c!==void 0&&(l.add=c),a(this.scene,v,l),p(v,l),v})},66135:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(13747);a.register("sprite",function(h,u,d,l){return this.displayList.add(new p(this.scene,h,u,d,l))})},20791:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(21034),h=n(27573),r.exports={renderWebGL:p,renderCanvas:h}},21034:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){p.addToRenderList(a),a.pipeline.batchSprite(a,p,h)};r.exports=g},32979:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=n.canvas,u=n.context,d=n.style,l=[],c=0,m=p.length;d.maxLines>0&&d.maxLines<p.length&&(m=d.maxLines),d.syncFont(h,u);for(var f=0;f<m;f++){var v=d.strokeThickness;v+=u.measureText(p[f]).width,d.wordWrap&&(v-=u.measureText(" ").width),l[f]=Math.ceil(v),c=Math.max(c,l[f])}var S=a.fontSize+d.strokeThickness,x=S*m,T=n.lineSpacing;return m>1&&(x+=T*(m-1)),{width:c,height:x,lines:m,lineWidths:l,lineSpacing:T,lineHeight:S}};r.exports=g},27030:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61068),p=function(h){var u=a.create(this),d=u.getContext("2d",{willReadFrequently:!0});h.syncFont(u,d);var l=d.measureText(h.testString);if("actualBoundingBoxAscent"in l){var c=l.actualBoundingBoxAscent,m=l.actualBoundingBoxDescent;return a.remove(u),{ascent:c,descent:m,fontSize:c+m}}var f=Math.ceil(l.width*h.baselineX),v=f,S=2*v;v=v*h.baselineY|0,u.width=f,u.height=S,d.fillStyle="#f00",d.fillRect(0,0,f,S),d.font=h._font,d.textBaseline="alphabetic",d.fillStyle="#000",d.fillText(h.testString,0,v);var x={ascent:0,descent:0,fontSize:0},T=d.getImageData(0,0,f,S);if(!T)return x.ascent=v,x.descent=v+6,x.fontSize=x.ascent+x.descent,a.remove(u),x;var C=T.data,w=C.length,b=f*4,E,A,I=0,R=!1;for(E=0;E<v;E++){for(A=0;A<b;A+=4)if(C[I+A]!==255){R=!0;break}if(!R)I+=b;else break}for(x.ascent=v-E,I=w-b,R=!1,E=S;E>v;E--){for(A=0;A<b;A+=4)if(C[I+A]!==255){R=!0;break}if(!R)I-=b;else break}return x.descent=E-v,x.fontSize=x.ascent+x.descent,a.remove(u),x};r.exports=p},76555:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(99584),p=n(61068),h=n(56694),u=n(64937),d=n(89980),l=n(32979),c=n(10850),m=n(55638),f=n(80032),v=n(74744),S=new h({Extends:d,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,f],initialize:function(T,C,w,b,E){C===void 0&&(C=0),w===void 0&&(w=0),d.call(this,T,"Text"),this.renderer=T.sys.renderer,this.setPosition(C,w),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=p.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.style=new v(this,E),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=T.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(b),E&&E.padding&&this.setPadding(E.padding),E&&E.lineSpacing&&this.setLineSpacing(E.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(x){var T=this.style;if(T.wordWrapCallback){var C=T.wordWrapCallback.call(T.wordWrapCallbackScope,x,this);return Array.isArray(C)&&(C=C.join(`
`)),C}else return T.wordWrapWidth?T.wordWrapUseAdvanced?this.advancedWordWrap(x,this.context,this.style.wordWrapWidth):this.basicWordWrap(x,this.context,this.style.wordWrapWidth):x},advancedWordWrap:function(x,T,C){for(var w="",b=x.replace(/ +/gi," ").split(this.splitRegExp),E=b.length,A=0;A<E;A++){var I=b[A],R="";I=I.replace(/^ *|\s*$/gi,"");var N=T.measureText(I).width;if(N<C){w+=I+`
`;continue}for(var F=C,P=I.split(" "),D=0;D<P.length;D++){var M=P[D],L=M+" ",k=T.measureText(L).width;if(k>F){if(D===0){for(var V=L;V.length&&(V=V.slice(0,-1),k=T.measureText(V).width,!(k<=F)););if(!V.length)throw new Error("wordWrapWidth < a single character");var W=M.substr(V.length);P[D]=W,R+=V}var K=P[D].length?D:D+1,B=P.slice(K).join(" ").replace(/[ \n]*$/gi,"");b.splice(A+1,0,B),E=b.length;break}else R+=L,F-=k}w+=R.replace(/[ \n]*$/gi,"")+`
`}return w=w.replace(/[\s|\n]*$/gi,""),w},basicWordWrap:function(x,T,C){for(var w="",b=x.split(this.splitRegExp),E=b.length-1,A=T.measureText(" ").width,I=0;I<=E;I++){for(var R=C,N=b[I].split(" "),F=N.length-1,P=0;P<=F;P++){var D=N[P],M=T.measureText(D).width,L=M;P<F&&(L+=A),L>R&&P>0&&(w+=`
`,R=C),w+=D,P<F?(w+=" ",R-=L):R-=M}I<E&&(w+=`
`)}return w},getWrappedText:function(x){x===void 0&&(x=this._text),this.style.syncFont(this.canvas,this.context);var T=this.runWordWrap(x);return T.split(this.splitRegExp)},setText:function(x){return!x&&x!==0&&(x=""),Array.isArray(x)&&(x=x.join(`
`)),x!==this._text&&(this._text=x.toString(),this.updateText()),this},appendText:function(x,T){T===void 0&&(T=!0),!x&&x!==0&&(x=""),Array.isArray(x)&&(x=x.join(`
`)),x=x.toString();var C=this._text.concat(T?`
`+x:x);return C!==this._text&&(this._text=C,this.updateText()),this},setStyle:function(x){return this.style.setStyle(x)},setFont:function(x){return this.style.setFont(x)},setFontFamily:function(x){return this.style.setFontFamily(x)},setFontSize:function(x){return this.style.setFontSize(x)},setFontStyle:function(x){return this.style.setFontStyle(x)},setFixedSize:function(x,T){return this.style.setFixedSize(x,T)},setBackgroundColor:function(x){return this.style.setBackgroundColor(x)},setFill:function(x){return this.style.setFill(x)},setColor:function(x){return this.style.setColor(x)},setStroke:function(x,T){return this.style.setStroke(x,T)},setShadow:function(x,T,C,w,b,E){return this.style.setShadow(x,T,C,w,b,E)},setShadowOffset:function(x,T){return this.style.setShadowOffset(x,T)},setShadowColor:function(x){return this.style.setShadowColor(x)},setShadowBlur:function(x){return this.style.setShadowBlur(x)},setShadowStroke:function(x){return this.style.setShadowStroke(x)},setShadowFill:function(x){return this.style.setShadowFill(x)},setWordWrapWidth:function(x,T){return this.style.setWordWrapWidth(x,T)},setWordWrapCallback:function(x,T){return this.style.setWordWrapCallback(x,T)},setAlign:function(x){return this.style.setAlign(x)},setResolution:function(x){return this.style.setResolution(x)},setLineSpacing:function(x){return this.lineSpacing=x,this.updateText()},setPadding:function(x,T,C,w){if(typeof x=="object"){var b=x,E=c(b,"x",null);E!==null?(x=E,C=E):(x=c(b,"left",0),C=c(b,"right",x));var A=c(b,"y",null);A!==null?(T=A,w=A):(T=c(b,"top",0),w=c(b,"bottom",T))}else x===void 0&&(x=0),T===void 0&&(T=x),C===void 0&&(C=x),w===void 0&&(w=T);return this.padding.left=x,this.padding.top=T,this.padding.right=C,this.padding.bottom=w,this.updateText()},setMaxLines:function(x){return this.style.setMaxLines(x)},updateText:function(){var x=this.canvas,T=this.context,C=this.style,w=C.resolution,b=C.metrics;C.syncFont(x,T);var E=this._text;(C.wordWrapWidth||C.wordWrapCallback)&&(E=this.runWordWrap(this._text));var A=E.split(this.splitRegExp),I=l(this,b,A),R=this.padding,N;C.fixedWidth===0?(this.width=I.width+R.left+R.right,N=I.width):(this.width=C.fixedWidth,N=this.width-R.left-R.right,N<I.width&&(N=I.width)),C.fixedHeight===0?this.height=I.height+R.top+R.bottom:this.height=C.fixedHeight;var F=this.width,P=this.height;this.updateDisplayOrigin(),F*=w,P*=w,F=Math.max(F,1),P=Math.max(P,1),x.width!==F||x.height!==P?(x.width=F,x.height=P,this.frame.setSize(F,P),C.syncFont(x,T),C.rtl&&(T.direction="rtl")):T.clearRect(0,0,F,P),T.save(),T.scale(w,w),C.backgroundColor&&(T.fillStyle=C.backgroundColor,T.fillRect(0,0,F,P)),C.syncStyle(x,T),T.translate(R.left,R.top);for(var D,M,L=0;L<I.lines;L++){if(D=C.strokeThickness/2,M=C.strokeThickness/2+L*I.lineHeight+b.ascent,L>0&&(M+=I.lineSpacing*L),C.rtl)D=F-D-R.left-R.right;else if(C.align==="right")D+=N-I.lineWidths[L];else if(C.align==="center")D+=(N-I.lineWidths[L])/2;else if(C.align==="justify"){var k=.85;if(I.lineWidths[L]/I.width>=k){var V=I.width-I.lineWidths[L],W=T.measureText(" ").width,K=A[L].trim(),B=K.split(" ");V+=(A[L].length-K.length)*W;for(var G=Math.floor(V/W),O=0;G>0;)B[O]+=" ",O=(O+1)%(B.length-1||1),--G;A[L]=B.join(" ")}}this.autoRound&&(D=Math.round(D),M=Math.round(M)),C.strokeThickness&&(C.syncShadow(T,C.shadowStroke),T.strokeText(A[L],D,M)),C.color&&(C.syncShadow(T,C.shadowFill),T.fillText(A[L],D,M))}T.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(x,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var $=this.input;return $&&!$.customHitArea&&($.hitArea.width=this.width,$.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(x){this.setText(x)}},toJSON:function(){var x=u.ToJSON(this),T={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return x.data=T,x},preDestroy:function(){this.style.rtl&&m(this.canvas),p.remove(this.canvas),this.texture.destroy()}});r.exports=S},71649:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){a.width===0||a.height===0||(p.addToRenderList(a),n.batchSprite(a,a.frame,p,h))};r.exports=g},75397:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(99325),h=n(20494),u=n(76555);p.register("text",function(d,l){d===void 0&&(d={});var c=h(d,"text",""),m=h(d,"style",null),f=h(d,"padding",null);f!==null&&(m.padding=f);var v=new u(this.scene,0,0,c,m);return l!==void 0&&(d.add=l),a(this.scene,v,d),v.autoRound=h(d,"autoRound",!0),v.resolution=h(d,"resolution",1),v})},94627:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(76555),p=n(61286);p.register("text",function(h,u,d,l){return this.displayList.add(new a(this.scene,h,u,d,l))})},80032:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(76128),h=n(71649),r.exports={renderWebGL:p,renderCanvas:h}},74744:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(20494),h=n(10850),u=n(27030),d={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},l=new a({initialize:function(m,f){this.parent=m,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(f,!1,!0)},setStyle:function(c,m,f){m===void 0&&(m=!0),f===void 0&&(f=!1),c&&c.hasOwnProperty("fontSize")&&typeof c.fontSize=="number"&&(c.fontSize=c.fontSize.toString()+"px");for(var v in d){var S=f?d[v][1]:this[v];v==="wordWrapCallback"||v==="wordWrapCallbackScope"?this[v]=h(c,d[v][0],S):this[v]=p(c,d[v][0],S)}var x=h(c,"font",null);x!==null&&this.setFont(x,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var T=h(c,"fill",null);T!==null&&(this.color=T);var C=h(c,"metrics",!1);return C?this.metrics={ascent:h(C,"ascent",0),descent:h(C,"descent",0),fontSize:h(C,"fontSize",0)}:(m||!this.metrics)&&(this.metrics=u(this)),m?this.parent.updateText():this.parent},syncFont:function(c,m){m.font=this._font},syncStyle:function(c,m){m.textBaseline="alphabetic",m.fillStyle=this.color,m.strokeStyle=this.stroke,m.lineWidth=this.strokeThickness,m.lineCap="round",m.lineJoin="round"},syncShadow:function(c,m){m?(c.shadowOffsetX=this.shadowOffsetX,c.shadowOffsetY=this.shadowOffsetY,c.shadowColor=this.shadowColor,c.shadowBlur=this.shadowBlur):(c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowColor=0,c.shadowBlur=0)},update:function(c){return c&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=u(this)),this.parent.updateText()},setFont:function(c,m){m===void 0&&(m=!0);var f=c,v="",S="";if(typeof c!="string")f=h(c,"fontFamily","Courier"),v=h(c,"fontSize","16px"),S=h(c,"fontStyle","");else{var x=c.split(" "),T=0;S=x.length>2?x[T++]:"",v=x[T++]||"16px",f=x[T++]||"Courier"}return(f!==this.fontFamily||v!==this.fontSize||S!==this.fontStyle)&&(this.fontFamily=f,this.fontSize=v,this.fontStyle=S,m&&this.update(!0)),this.parent},setFontFamily:function(c){return this.fontFamily!==c&&(this.fontFamily=c,this.update(!0)),this.parent},setFontStyle:function(c){return this.fontStyle!==c&&(this.fontStyle=c,this.update(!0)),this.parent},setFontSize:function(c){return typeof c=="number"&&(c=c.toString()+"px"),this.fontSize!==c&&(this.fontSize=c,this.update(!0)),this.parent},setTestString:function(c){return this.testString=c,this.update(!0)},setFixedSize:function(c,m){return this.fixedWidth=c,this.fixedHeight=m,c&&(this.parent.width=c),m&&(this.parent.height=m),this.update(!1)},setBackgroundColor:function(c){return this.backgroundColor=c,this.update(!1)},setFill:function(c){return this.color=c,this.update(!1)},setColor:function(c){return this.color=c,this.update(!1)},setResolution:function(c){return this.resolution=c,this.update(!1)},setStroke:function(c,m){return m===void 0&&(m=this.strokeThickness),c===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==c||this.strokeThickness!==m)&&(this.stroke=c,this.strokeThickness=m,this.update(!0)),this.parent},setShadow:function(c,m,f,v,S,x){return c===void 0&&(c=0),m===void 0&&(m=0),f===void 0&&(f="#000"),v===void 0&&(v=0),S===void 0&&(S=!1),x===void 0&&(x=!0),this.shadowOffsetX=c,this.shadowOffsetY=m,this.shadowColor=f,this.shadowBlur=v,this.shadowStroke=S,this.shadowFill=x,this.update(!1)},setShadowOffset:function(c,m){return c===void 0&&(c=0),m===void 0&&(m=c),this.shadowOffsetX=c,this.shadowOffsetY=m,this.update(!1)},setShadowColor:function(c){return c===void 0&&(c="#000"),this.shadowColor=c,this.update(!1)},setShadowBlur:function(c){return c===void 0&&(c=0),this.shadowBlur=c,this.update(!1)},setShadowStroke:function(c){return this.shadowStroke=c,this.update(!1)},setShadowFill:function(c){return this.shadowFill=c,this.update(!1)},setWordWrapWidth:function(c,m){return m===void 0&&(m=!1),this.wordWrapWidth=c,this.wordWrapUseAdvanced=m,this.update(!1)},setWordWrapCallback:function(c,m){return m===void 0&&(m=null),this.wordWrapCallback=c,this.wordWrapCallbackScope=m,this.update(!1)},setAlign:function(c){return c===void 0&&(c="left"),this.align=c,this.update(!1)},setMaxLines:function(c){return c===void 0&&(c=0),this.maxLines=c,this.update(!1)},getTextMetrics:function(){var c=this.metrics;return{ascent:c.ascent,descent:c.descent,fontSize:c.fontSize}},toJSON:function(){var c={};for(var m in d)c[m]=this[m];return c.metrics=this.getTextMetrics(),c},destroy:function(){this.parent=void 0}});r.exports=l},76128:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(75512),p=function(h,u,d,l){if(!(u.width===0||u.height===0)){d.addToRenderList(u);var c=u.frame,m=c.width,f=c.height,v=a.getTintAppendFloatAlpha,S=h.pipelines.set(u.pipeline,u),x=S.setTexture2D(c.glTexture,u);S.batchTexture(u,c.glTexture,m,f,u.x,u.y,m/u.style.resolution,f/u.style.resolution,u.scaleX,u.scaleY,u.rotation,u.flipX,u.flipY,u.scrollFactorX,u.scrollFactorY,u.displayOriginX,u.displayOriginY,0,0,m,f,v(u.tintTopLeft,d.alpha*u._alphaTL),v(u.tintTopRight,d.alpha*u._alphaTR),v(u.tintBottomLeft,d.alpha*u._alphaBL),v(u.tintBottomRight,d.alpha*u._alphaBR),u.tintFill,0,0,d,l,!1,x)}};r.exports=p},35856:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61068),p=n(56694),h=n(64937),u=n(89980),d=n(3504),l=n(8213),c=n(9271),m=n(93736),f=8,v=new p({Extends:u,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,c],initialize:function(x,T,C,w,b,E,A){var I=x.sys.renderer;u.call(this,x,"TileSprite");var R=x.sys.textures.get(E),N=R.get(A);N.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),R=x.sys.textures.get("__MISSING"),N=R.get()),R.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),R=x.sys.textures.get("__MISSING"),N=R.get()),!w||!b?(w=N.width,b=N.height):(w=Math.floor(w),b=Math.floor(b)),this._tilePosition=new m,this._tileScale=new m(1,1),this.dirty=!1,this.renderer=I,this.canvas=a.create(this,w,b),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=R,this.displayFrame=N,this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=d(N.width),this.potHeight=d(N.height),this.fillCanvas=a.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(T,C),this.setSize(w,b),this.setFrame(A),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(S,x){return this.displayTexture=this.scene.sys.textures.get(S),this.setFrame(x)},setFrame:function(S){var x=this.displayTexture.get(S);return this.potWidth=d(x.width),this.potHeight=d(x.height),this.canvas.width=0,!x.cutWidth||!x.cutHeight?this.renderFlags&=~f:this.renderFlags|=f,this.displayFrame=x,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(S,x){return S!==void 0&&(this.tilePositionX=S),x!==void 0&&(this.tilePositionY=x),this},setTileScale:function(S,x){return S===void 0&&(S=this.tileScaleX),x===void 0&&(x=S),this.tileScaleX=S,this.tileScaleY=x,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var S=this.displayFrame;if(S.source.isRenderTexture||S.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var x=this.fillContext,T=this.fillCanvas,C=this.potWidth,w=this.potHeight;(!this.renderer||!this.renderer.gl)&&(C=S.cutWidth,w=S.cutHeight),x.clearRect(0,0,C,w),T.width=C,T.height=w,x.drawImage(S.source.image,S.cutX,S.cutY,S.cutWidth,S.cutHeight,0,0,C,w),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(T,this.fillPattern):this.fillPattern=x.createPattern(T,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var S=this.canvas;if((S.width!==this.width||S.height!==this.height)&&(S.width=this.width,S.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var x=this.context;this.scene.sys.game.config.antialias||l.disable(x);var T=this._tileScale.x,C=this._tileScale.y,w=this._tilePosition.x,b=this._tilePosition.y;x.clearRect(0,0,this.width,this.height),x.save(),x.scale(T,C),x.translate(-w,-b),x.fillStyle=this.fillPattern,x.fillRect(w,b,this.width/T,this.height/C),x.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),a.remove(this.canvas),a.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(S){this._tilePosition.x=S,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(S){this._tilePosition.y=S,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(S){this._tileScale.x=S,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(S){this._tileScale.y=S,this.dirty=!0}}});r.exports=v},93305:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){a.updateCanvas(),p.addToRenderList(a),n.batchSprite(a,a.frame,p,h)};r.exports=g},63950:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(99325),h=n(20494),u=n(35856);p.register("tileSprite",function(d,l){d===void 0&&(d={});var c=h(d,"x",0),m=h(d,"y",0),f=h(d,"width",512),v=h(d,"height",512),S=h(d,"key",""),x=h(d,"frame",""),T=new u(this.scene,c,m,f,v,S,x);return l!==void 0&&(d.add=l),a(this.scene,T,d),T})},20509:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(35856),p=n(61286);p.register("tileSprite",function(h,u,d,l,c,m){return this.displayList.add(new a(this.scene,h,u,d,l,c,m))})},9271:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(74287),h=n(93305),r.exports={renderWebGL:p,renderCanvas:h}},74287:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(75512),p=function(h,u,d,l){u.updateCanvas();var c=u.width,m=u.height;if(!(c===0||m===0)){d.addToRenderList(u);var f=a.getTintAppendFloatAlpha,v=h.pipelines.set(u.pipeline,u),S=v.setTexture2D(u.fillPattern,u);v.batchTexture(u,u.fillPattern,u.displayFrame.width*u.tileScaleX,u.displayFrame.height*u.tileScaleY,u.x,u.y,c,m,u.scaleX,u.scaleY,u.rotation,u.flipX,u.flipY,u.scrollFactorX,u.scrollFactorY,u.originX*c,u.originY*m,0,0,c,m,f(u.tintTopLeft,d.alpha*u._alphaTL),f(u.tintTopRight,d.alpha*u._alphaTR),f(u.tintBottomLeft,d.alpha*u._alphaBL),f(u.tintBottomRight,d.alpha*u._alphaBR),u.tintFill,u.tilePositionX%u.displayFrame.width/u.displayFrame.width,u.tilePositionY%u.displayFrame.height/u.displayFrame.height,d,l,!1,S)}};r.exports=p},8630:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=n(56694),h=n(64937),u=n(56631),d=n(97081),l=n(89980),c=n(83392),m=n(76038),f=n(76583),v=n(77974),S=new p({Extends:l,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Size,h.TextureCrop,h.Tint,h.Transform,h.Visible,v],initialize:function(T,C,w,b){l.call(this,T,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=f(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var E=T.sys.game;this._device=E.device.video,this.setPosition(C,w),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),E.events.on(d.PAUSE,this.globalPause,this),E.events.on(d.RESUME,this.globalResume,this);var A=T.sys.sound;A&&A.on(m.GLOBAL_MUTE,this.globalMute,this),b&&this.load(b)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(x){var T=this.scene.sys.cache.video.get(x);return T?(this.cacheKey=x,this.loadHandler(T.url,T.noAudio,T.crossOrigin)):console.warn("No video in cache for key: "+x),this},changeSource:function(x,T,C,w,b){T===void 0&&(T=!0),C===void 0&&(C=!1),this.cacheKey!==x&&(this.load(x),T&&this.play(C,w,b))},getVideoKey:function(){return this.cacheKey},loadURL:function(x,T,C){T===void 0&&(T=!1);var w=this._device.getVideoURL(x);return w?(this.cacheKey="",this.loadHandler(w.url,T,C)):console.warn("No supported video format found for "+x),this},loadMediaStream:function(x,T,C){return this.loadHandler(null,T,C,x)},loadHandler:function(x,T,C,w){T||(T=!1);var b=this.video;if(b?(this.removeLoadEventHandlers(),this.stop()):(b=document.createElement("video"),b.controls=!1,b.setAttribute("playsinline","playsinline"),b.setAttribute("preload","auto"),b.setAttribute("disablePictureInPicture","true")),T?(b.muted=!0,b.defaultMuted=!0,b.setAttribute("autoplay","autoplay")):(b.muted=!1,b.defaultMuted=!1,b.removeAttribute("autoplay")),C?b.setAttribute("crossorigin",C):b.removeAttribute("crossorigin"),w)if("srcObject"in b)try{b.srcObject=w}catch(E){if(E.name!=="TypeError")throw E;b.src=URL.createObjectURL(w)}else b.src=URL.createObjectURL(w);else b.src=x;return this.addLoadEventHandlers(),this.retry=0,this.video=b,this._playCalled=!1,b.load(),this},requestVideoFrame:function(x,T){var C=this.video;if(C){var w=T.width,b=T.height,E=this.videoTexture,A=this.videoTextureSource,I=!E||A.source!==C;I?(this._codePaused=C.paused,this._codeMuted=C.muted,E?(A.source=C,A.width=w,A.height=b,E.get().setSize(w,b)):(E=this.scene.sys.textures.create(this._key,C,w,b),E.add("__BASE",0,0,0,w,b),this.setTexture(E),this.videoTexture=E,this.videoTextureSource=E.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(u.VIDEO_TEXTURE,this,E)),this.setSizeToFrame(),this.updateDisplayOrigin()):A.update(),this.isStalled=!1,this.metadata=T;var R=T.mediaTime;I&&(this._lastUpdate=R,this.emit(u.VIDEO_CREATED,this,w,b),this.frameReady||(this.frameReady=!0,this.emit(u.VIDEO_PLAY,this))),this._playingMarker?R>=this._markerOut&&(C.loop?(C.currentTime=this._markerIn,this.emit(u.VIDEO_LOOP,this)):(this.stop(!1),this.emit(u.VIDEO_COMPLETE,this))):R<this._lastUpdate&&this.emit(u.VIDEO_LOOP,this),this._lastUpdate=R,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(x,T,C){T===void 0&&(T=-1),C===void 0&&(C=c.MAX_SAFE_INTEGER);var w=this.video;return!w||this.isPlaying()?(w||console.warn("Video not loaded"),this):(x===void 0&&(x=w.loop),w.loop=x,this._markerIn=T,this._markerOut=C,this._playingMarker=T>-1&&C>T&&C<c.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=w.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var x=this.video;x&&(x.addEventListener("error",this._loadCallbackHandler),x.addEventListener("abort",this._loadCallbackHandler))},removeLoadEventHandlers:function(){var x=this.video;x&&(x.removeEventListener("error",this._loadCallbackHandler),x.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var x=this.video;if(x){var T=this._callbacks;for(var C in T)x.addEventListener(C,T[C])}},removeEventHandlers:function(){var x=this.video;if(x){var T=this._callbacks;for(var C in T)x.removeEventListener(C,T[C])}},createPlayPromise:function(x){x===void 0&&(x=!0);var T=this.video,C=T.play();if(C!==void 0){var w=this.playSuccess.bind(this),b=this.playError.bind(this);if(!x){var E=this;b=function(){E.failedPlayAttempts++}}C.then(w).catch(b)}else T.addEventListener("playing",this._callbacks.legacy),x||this.failedPlayAttempts++},addMarker:function(x,T,C){return!isNaN(T)&&T>=0&&!isNaN(C)&&C>T&&(this.markers[x]=[T,C]),this},playMarker:function(x,T){var C=this.markers[x];return C&&this.play(T,C[0],C[1]),this},removeMarker:function(x){return delete this.markers[x],this},snapshot:function(x,T){return x===void 0&&(x=this.width),T===void 0&&(T=this.height),this.snapshotArea(0,0,this.width,this.height,x,T)},snapshotArea:function(x,T,C,w,b,E){x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=this.width),w===void 0&&(w=this.height),b===void 0&&(b=C),E===void 0&&(E=w);var A=this.video,I=this.snapshotTexture;return I?(I.setSize(b,E),A&&I.context.drawImage(A,x,T,C,w,0,0,b,E)):(I=this.scene.sys.textures.createCanvas(f(),b,E),this.snapshotTexture=I,A&&I.context.drawImage(A,x,T,C,w,0,0,b,E)),I.update()},saveSnapshotTexture:function(x){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,x):this.snapshotTexture=this.scene.sys.textures.createCanvas(x,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(u.VIDEO_UNLOCKED,this));var x=this.scene.sys.sound;x&&x.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(x){var T=x.name;T==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(u.VIDEO_LOCKED,this)):T==="NotSupportedError"?(this.stop(!1),this.emit(u.VIDEO_UNSUPPORTED,this,x)):(this.stop(!1),this.emit(u.VIDEO_ERROR,this,x))},legacyPlayHandler:function(){var x=this.video;x&&(this.playSuccess(),x.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(u.VIDEO_PLAYING,this)},loadErrorHandler:function(x){this.stop(!1),this.emit(u.VIDEO_ERROR,this,x)},stalledHandler:function(x){this.isStalled=!0,this.emit(u.VIDEO_STALLED,this,x)},completeHandler:function(){this._playCalled=!1,this.emit(u.VIDEO_COMPLETE,this)},preUpdate:function(x,T){var C=this.video;!C||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=T,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(x){var T=this.video;if(T){var C=T.duration;if(C!==1/0&&!isNaN(C)){var w=C*x;this.setCurrentTime(w)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(x){var T=this.video;if(T){if(typeof x=="string"){var C=x[0],w=parseFloat(x.substr(1));C==="+"?x=T.currentTime+w:C==="-"&&(x=T.currentTime-w)}T.currentTime=x}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(u.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(u.VIDEO_SEEKED,this)},getProgress:function(){var x=this.video;if(x){var T=x.duration;if(T!==1/0&&!isNaN(T))return x.currentTime/T}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(x){x===void 0&&(x=!0),this._codeMuted=x;var T=this.video;return T&&(T.muted=this._systemMuted?!0:x),this},isMuted:function(){return this._codeMuted},globalMute:function(x,T){this._systemMuted=T;var C=this.video;C&&(C.muted=this._codeMuted?!0:T)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(x){x===void 0&&(x=!0);var T=this.video;return this._codePaused=x,T&&!T.ended&&(x?T.paused||(this.removeEventHandlers(),T.pause()):x||(this._playCalled?T.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(x){return x===void 0&&(x=1),this.video&&(this.video.volume=a(x,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(x){return this.video&&(this.video.playbackRate=x),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(x){return x===void 0&&(x=!0),this.video&&(this.video.loop=x),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(x,T){return T===void 0&&(T=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,x),this.videoTextureSource.setFlipY(T)),this._key=x,this.flipY=T,!!this.videoTexture},stop:function(x){x===void 0&&(x=!0);var T=this.video;return T&&(this.removeEventHandlers(),T.cancelVideoFrameCallback(this._rfvCallbackId),T.pause()),this.retry=0,this._playCalled=!1,x&&this.emit(u.VIDEO_STOP,this),this},removeVideoElement:function(){var x=this.video;if(x){for(x.parentNode&&x.parentNode.removeChild(x);x.hasChildNodes();)x.removeChild(x.firstChild);x.removeAttribute("autoplay"),x.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var x=this.scene.sys.game.events;x.off(d.PAUSE,this.globalPause,this),x.off(d.RESUME,this.globalResume,this);var T=this.scene.sys.sound;T&&T.off(m.GLOBAL_MUTE,this.globalMute,this)}});r.exports=S},56933:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){a.videoTexture&&(p.addToRenderList(a),n.batchSprite(a,a.frame,p,h))};r.exports=g},65601:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88933),p=n(99325),h=n(20494),u=n(8630);p.register("video",function(d,l){d===void 0&&(d={});var c=h(d,"key",null),m=new u(this.scene,0,0,c);return l!==void 0&&(d.add=l),a(this.scene,m,d),m})},215:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(8630),p=n(61286);p.register("video",function(h,u,d){return this.displayList.add(new a(this.scene,h,u,d))})},77974:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(83572),h=n(56933),r.exports={renderWebGL:p,renderCanvas:h}},83572:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){a.videoTexture&&(p.addToRenderList(a),a.pipeline.batchSprite(a,p,h))};r.exports=g},71030:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(95723),p=n(26673),h=n(65650),u=n(56694),d=n(64937),l=n(89980),c=n(74118),m=n(94287),f=new u({Extends:l,Mixins:[d.Depth,d.GetBounds,d.Origin,d.Transform,d.ScrollFactor,d.Visible],initialize:function(S,x,T,C,w){C===void 0&&(C=1),w===void 0&&(w=C),l.call(this,S,"Zone"),this.setPosition(x,T),this.width=C,this.height=w,this.blendMode=a.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(v){this.scaleX=v/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(v){this.scaleY=v/this.height}},setSize:function(v,S,x){x===void 0&&(x=!0),this.width=v,this.height=S,this.updateDisplayOrigin();var T=this.input;return x&&T&&!T.customHitArea&&(T.hitArea.width=v,T.hitArea.height=S),this},setDisplaySize:function(v,S){return this.displayWidth=v,this.displayHeight=S,this},setCircleDropZone:function(v){return this.setDropZone(new p(0,0,v),h)},setRectangleDropZone:function(v,S){return this.setDropZone(new c(0,0,v,S),m)},setDropZone:function(v,S){return this.input||this.setInteractive(v,S,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(v,S,x){x.addToRenderList(S)},renderWebGL:function(v,S,x){x.addToRenderList(S)}});r.exports=f},24067:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(99325),p=n(20494),h=n(71030);a.register("zone",function(u){var d=p(u,"x",0),l=p(u,"y",0),c=p(u,"width",1),m=p(u,"height",c);return new h(this.scene,d,l,c,m)})},34546:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(71030),p=n(61286);p.register("zone",function(h,u,d,l){return this.displayList.add(new a(this.scene,h,u,d,l))})},95847:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.radius>0?Math.PI*n.radius*n.radius:0};r.exports=g},26673:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(65650),h=n(94026),u=n(62941),d=n(52394),l=n(30977),c=new a({initialize:function(f,v,S){f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=0),this.type=d.CIRCLE,this.x=f,this.y=v,this._radius=S,this._diameter=S*2},contains:function(m,f){return p(this,m,f)},getPoint:function(m,f){return h(this,m,f)},getPoints:function(m,f,v){return u(this,m,f,v)},getRandomPoint:function(m){return l(this,m)},setTo:function(m,f,v){return this.x=m,this.y=f,this._radius=v,this._diameter=v*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(m,f){return f===void 0&&(f=m),this.x=m,this.y=f,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(m){this._radius=m,this._diameter=m*2}},diameter:{get:function(){return this._diameter},set:function(m){this._diameter=m,this._radius=m*.5}},left:{get:function(){return this.x-this._radius},set:function(m){this.x=m+this._radius}},right:{get:function(){return this.x+this._radius},set:function(m){this.x=m-this._radius}},top:{get:function(){return this.y-this._radius},set:function(m){this.y=m+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(m){this.y=m-this._radius}}});r.exports=c},37964:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return 2*(Math.PI*n.radius)};r.exports=g},72233:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u,d){return d===void 0&&(d=new a),d.x=h.x+h.radius*Math.cos(u),d.y=h.y+h.radius*Math.sin(u),d};r.exports=p},61761:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(26673),p=function(h){return new a(h.x,h.y,h.radius)};r.exports=p},65650:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(n.radius>0&&a>=n.left&&a<=n.right&&p>=n.top&&p<=n.bottom){var h=(n.x-a)*(n.x-a),u=(n.y-p)*(n.y-p);return h+u<=n.radius*n.radius}else return!1};r.exports=g},39187:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(65650),p=function(h,u){return a(h,u.x,u.y)};r.exports=p},58672:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(65650),p=function(h,u){return a(h,u.x,u.y)&&a(h,u.right,u.y)&&a(h,u.x,u.bottom)&&a(h,u.right,u.bottom)};r.exports=p},42997:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a.setTo(n.x,n.y,n.radius)};r.exports=g},94894:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x===a.x&&n.y===a.y&&n.radius===a.radius};r.exports=g},48027:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=function(h,u){return u===void 0&&(u=new a),u.x=h.left,u.y=h.top,u.width=h.diameter,u.height=h.diameter,u};r.exports=p},94026:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72233),p=n(91806),h=n(83392),u=n(79967),d=function(l,c,m){m===void 0&&(m=new u);var f=p(c,0,h.PI2);return a(l,f,m)};r.exports=d},62941:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(37964),p=n(72233),h=n(91806),u=n(83392),d=function(l,c,m,f){f===void 0&&(f=[]),!c&&m>0&&(c=a(l)/m);for(var v=0;v<c;v++){var S=h(v/c,0,u.PI2);f.push(p(l,S))}return f};r.exports=d},34585:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n.x+=a,n.y+=p,n};r.exports=g},88665:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x+=a.x,n.y+=a.y,n};r.exports=g},30977:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u){u===void 0&&(u=new a);var d=2*Math.PI*Math.random(),l=Math.random()+Math.random(),c=l>1?2-l:l,m=c*Math.cos(d),f=c*Math.sin(d);return u.x=h.x+m*h.radius,u.y=h.y+f*h.radius,u};r.exports=p},6112:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(26673);a.Area=n(95847),a.Circumference=n(37964),a.CircumferencePoint=n(72233),a.Clone=n(61761),a.Contains=n(65650),a.ContainsPoint=n(39187),a.ContainsRect=n(58672),a.CopyFrom=n(42997),a.Equals=n(94894),a.GetBounds=n(48027),a.GetPoint=n(94026),a.GetPoints=n(62941),a.Offset=n(34585),a.OffsetPoint=n(88665),a.Random=n(30977),r.exports=a},52394:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};r.exports=g},58605:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.isEmpty()?0:n.getMajorRadius()*n.getMinorRadius()*Math.PI};r.exports=g},39507:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a=n.width/2,p=n.height/2,h=Math.pow(a-p,2)/Math.pow(a+p,2);return Math.PI*(a+p)*(1+3*h/(10+Math.sqrt(4-3*h)))};r.exports=g},86998:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u,d){d===void 0&&(d=new a);var l=h.width/2,c=h.height/2;return d.x=h.x+l*Math.cos(u),d.y=h.y+c*Math.sin(u),d};r.exports=p},81773:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(95669),p=function(h){return new a(h.x,h.y,h.width,h.height)};r.exports=p},72313:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(n.width<=0||n.height<=0)return!1;var h=(a-n.x)/n.width,u=(p-n.y)/n.height;return h*=h,u*=u,h+u<.25};r.exports=g},34368:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72313),p=function(h,u){return a(h,u.x,u.y)};r.exports=p},71431:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72313),p=function(h,u){return a(h,u.x,u.y)&&a(h,u.right,u.y)&&a(h,u.x,u.bottom)&&a(h,u.right,u.bottom)};r.exports=p},75459:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a.setTo(n.x,n.y,n.width,n.height)};r.exports=g},95669:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72313),h=n(95340),u=n(54978),d=n(52394),l=n(72006),c=new a({initialize:function(f,v,S,x){f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=0),x===void 0&&(x=0),this.type=d.ELLIPSE,this.x=f,this.y=v,this.width=S,this.height=x},contains:function(m,f){return p(this,m,f)},getPoint:function(m,f){return h(this,m,f)},getPoints:function(m,f,v){return u(this,m,f,v)},getRandomPoint:function(m){return l(this,m)},setTo:function(m,f,v,S){return this.x=m,this.y=f,this.width=v,this.height=S,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(m,f){return f===void 0&&(f=m),this.x=m,this.y=f,this},setSize:function(m,f){return f===void 0&&(f=m),this.width=m,this.height=f,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(m){this.x=m+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(m){this.x=m-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(m){this.y=m+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(m){this.y=m-this.height/2}}});r.exports=c},98068:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x===a.x&&n.y===a.y&&n.width===a.width&&n.height===a.height};r.exports=g},72897:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=function(h,u){return u===void 0&&(u=new a),u.x=h.left,u.y=h.top,u.width=h.width,u.height=h.height,u};r.exports=p},95340:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(86998),p=n(91806),h=n(83392),u=n(79967),d=function(l,c,m){m===void 0&&(m=new u);var f=p(c,0,h.PI2);return a(l,f,m)};r.exports=d},54978:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(39507),p=n(86998),h=n(91806),u=n(83392),d=function(l,c,m,f){f===void 0&&(f=[]),!c&&m>0&&(c=a(l)/m);for(var v=0;v<c;v++){var S=h(v/c,0,u.PI2);f.push(p(l,S))}return f};r.exports=d},77951:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n.x+=a,n.y+=p,n};r.exports=g},36233:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x+=a.x,n.y+=a.y,n};r.exports=g},72006:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u){u===void 0&&(u=new a);var d=Math.random()*Math.PI*2,l=Math.sqrt(Math.random());return u.x=h.x+l*Math.cos(d)*h.width/2,u.y=h.y+l*Math.sin(d)*h.height/2,u};r.exports=p},40652:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(95669);a.Area=n(58605),a.Circumference=n(39507),a.CircumferencePoint=n(86998),a.Clone=n(81773),a.Contains=n(72313),a.ContainsPoint=n(34368),a.ContainsRect=n(71431),a.CopyFrom=n(75459),a.Equals=n(98068),a.GetBounds=n(72897),a.GetPoint=n(95340),a.GetPoints=n(54978),a.Offset=n(77951),a.OffsetPoint=n(36233),a.Random=n(72006),r.exports=a},84068:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(52394),p=n(98611),h={Circle:n(6112),Ellipse:n(40652),Intersects:n(7563),Line:n(28482),Mesh:n(14293),Point:n(63472),Polygon:n(44359),Rectangle:n(66658),Triangle:n(87619)};h=p(!1,h,a),r.exports=h},22184:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(53996),p=function(h,u){return a(h.x,h.y,u.x,u.y)<=h.radius+u.radius};r.exports=p},26535:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=a.width/2,h=a.height/2,u=Math.abs(n.x-a.x-p),d=Math.abs(n.y-a.y-h),l=p+n.radius,c=h+n.radius;if(u>l||d>c)return!1;if(u<=p||d<=h)return!0;var m=u-p,f=d-h,v=m*m,S=f*f,x=n.radius*n.radius;return v+S<=x};r.exports=g},71145:(r,g,n)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=n(22184),h=function(u,d,l){if(l===void 0&&(l=[]),p(u,d)){var c=u.x,m=u.y,f=u.radius,v=d.x,S=d.y,x=d.radius,T,C,w,b,E;if(m===S)E=(x*x-f*f-v*v+c*c)/(2*(c-v)),T=1,C=-2*S,w=v*v+E*E-2*v*E+S*S-x*x,b=C*C-4*T*w,b===0?l.push(new a(E,-C/(2*T))):b>0&&(l.push(new a(E,(-C+Math.sqrt(b))/(2*T))),l.push(new a(E,(-C-Math.sqrt(b))/(2*T))));else{var A=(c-v)/(m-S),I=(x*x-f*f-v*v+c*c-S*S+m*m)/(2*(m-S));T=A*A+1,C=2*m*A-2*I*A-2*c,w=c*c+m*m+I*I-f*f-2*m*I,b=C*C-4*T*w,b===0?(E=-C/(2*T),l.push(new a(E,I-E*A))):b>0&&(E=(-C+Math.sqrt(b))/(2*T),l.push(new a(E,I-E*A)),E=(-C-Math.sqrt(b))/(2*T),l.push(new a(E,I-E*A)))}}return l};r.exports=h},62508:(r,g,n)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(26111),p=n(26535),h=function(u,d,l){if(l===void 0&&(l=[]),p(u,d)){var c=d.getLineA(),m=d.getLineB(),f=d.getLineC(),v=d.getLineD();a(c,u,l),a(m,u,l),a(f,u,l),a(v,u,l)}return l};r.exports=h},26111:(r,g,n)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=n(61472),h=function(u,d,l){if(l===void 0&&(l=[]),p(u,d)){var c=u.x1,m=u.y1,f=u.x2,v=u.y2,S=d.x,x=d.y,T=d.radius,C=f-c,w=v-m,b=c-S,E=m-x,A=C*C+w*w,I=2*(C*b+w*E),R=b*b+E*E-T*T,N=I*I-4*A*R,F,P;if(N===0){var D=-I/(2*A);F=c+D*C,P=m+D*w,D>=0&&D<=1&&l.push(new a(F,P))}else if(N>0){var M=(-I-Math.sqrt(N))/(2*A);F=c+M*C,P=m+M*w,M>=0&&M<=1&&l.push(new a(F,P));var L=(-I+Math.sqrt(N))/(2*A);F=c+L*C,P=m+L*w,L>=0&&L<=1&&l.push(new a(F,P))}}return l};r.exports=h},96537:(r,g,n)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(70015),p=function(h,u,d,l){d===void 0&&(d=!1);var c=h.x1,m=h.y1,f=h.x2,v=h.y2,S=u.x1,x=u.y1,T=u.x2,C=u.y2,w=f-c,b=v-m,E=T-S,A=C-x,I=w*A-b*E;if(I===0)return null;var R,N,F;if(d){if(R=(w*(x-m)+b*(c-S))/(E*b-A*w),N=(S+E*R-c)/w,N<0||R<0||R>1)return null;F=N}else{if(R=((S-c)*A-(x-m)*E)/I,N=((m-x)*w-(c-S)*b)/I,R<0||R>1||N<0||N>1)return null;F=R}return l===void 0&&(l=new a),l.set(c+w*F,m+b*F,F)};r.exports=p},17647:(r,g,n)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(96537),p=n(88829),h=n(70015),u=new p,d=new h,l=function(c,m,f,v){f===void 0&&(f=!1),v===void 0&&(v=new h);var S=!1;v.set(),d.set();for(var x=m[0],T=1;T<m.length;T++){var C=m[T];u.setTo(x.x,x.y,C.x,C.y),x=C,a(c,u,f,d)&&(!S||d.z<v.z)&&(v.copy(d),S=!0)}return S?v:null};r.exports=l},68439:(r,g,n)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(70015),p=n(51729),h=n(17647),u=new a,d=function(l,c,m,f){f===void 0&&(f=new p),Array.isArray(c)||(c=[c]);var v=!1;f.set(),u.set();for(var S=0;S<c.length;S++)h(l,c[S].points,m,u)&&(!v||u.z<f.z)&&(f.set(u.x,u.y,u.z,S),v=!0);return v?f:null};r.exports=d},9569:(r,g,n)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=n(25227),h=n(47910),u=function(d,l,c){if(c===void 0&&(c=[]),h(d,l))for(var m=l.getLineA(),f=l.getLineB(),v=l.getLineC(),S=l.getLineD(),x=[new a,new a,new a,new a],T=[p(m,d,x[0]),p(f,d,x[1]),p(v,d,x[2]),p(S,d,x[3])],C=0;C<4;C++)T[C]&&c.push(x[C]);return c};r.exports=u},7449:(r,g,n)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(51729),p=n(68439),h=n(88829),u=new h;function d(m,f,v,S,x){var T=Math.cos(m),C=Math.sin(m);u.setTo(f,v,f+T,v+C);var w=p(u,S,!0);w&&x.push(new a(w.x,w.y,m,w.w))}function l(m,f){return m.z-f.z}var c=function(m,f,v){Array.isArray(v)||(v=[v]);for(var S=[],x=[],T=0;T<v.length;T++)for(var C=v[T].points,w=0;w<C.length;w++){var b=Math.atan2(C[w].y-f,C[w].x-m);x.indexOf(b)===-1&&(d(b,m,f,v,S),d(b-1e-5,m,f,v,S),d(b+1e-5,m,f,v,S),x.push(b))}return S.sort(l)};r.exports=c},82931:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=n(90205),h=function(u,d,l){return l===void 0&&(l=new a),p(u,d)&&(l.x=Math.max(u.x,d.x),l.y=Math.max(u.y,d.y),l.width=Math.min(u.right,d.right)-l.x,l.height=Math.min(u.bottom,d.bottom)-l.y),l};r.exports=h},1946:(r,g,n)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(9569),p=n(90205),h=function(u,d,l){if(l===void 0&&(l=[]),p(u,d)){var c=u.getLineA(),m=u.getLineB(),f=u.getLineC(),v=u.getLineD();a(c,d,l),a(m,d,l),a(f,d,l),a(v,d,l)}return l};r.exports=h},34211:(r,g,n)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(20370),p=n(9569),h=function(u,d,l){if(l===void 0&&(l=[]),a(u,d)){var c=d.getLineA(),m=d.getLineB(),f=d.getLineC();p(c,u,l),p(m,u,l),p(f,u,l)}return l};r.exports=h},80511:(r,g,n)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(26111),p=n(48411),h=function(u,d,l){if(l===void 0&&(l=[]),p(u,d)){var c=u.getLineA(),m=u.getLineB(),f=u.getLineC();a(c,d,l),a(m,d,l),a(f,d,l)}return l};r.exports=h},31343:(r,g,n)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=n(86117),h=n(25227),u=function(d,l,c){if(c===void 0&&(c=[]),p(d,l))for(var m=d.getLineA(),f=d.getLineB(),v=d.getLineC(),S=[new a,new a,new a],x=[h(m,l,S[0]),h(f,l,S[1]),h(v,l,S[2])],T=0;T<3;T++)x[T]&&c.push(S[T]);return c};r.exports=u},70534:(r,g,n)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(23589),p=n(31343),h=function(u,d,l){if(l===void 0&&(l=[]),a(u,d)){var c=d.getLineA(),m=d.getLineB(),f=d.getLineC();p(u,c,l),p(u,m,l),p(u,f,l)}return l};r.exports=h},61472:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(65650),p=n(79967),h=new p,u=function(d,l,c){if(c===void 0&&(c=h),a(l,d.x1,d.y1))return c.x=d.x1,c.y=d.y1,!0;if(a(l,d.x2,d.y2))return c.x=d.x2,c.y=d.y2,!0;var m=d.x2-d.x1,f=d.y2-d.y1,v=l.x-d.x1,S=l.y-d.y1,x=m*m+f*f,T=m,C=f;if(x>0){var w=(v*m+S*f)/x;T*=w,C*=w}c.x=d.x1+T,c.y=d.y1+C;var b=T*T+C*C;return b<=x&&T*m+C*f>=0&&a(l,c.x,c.y)};r.exports=u},25227:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=n.x1,u=n.y1,d=n.x2,l=n.y2,c=a.x1,m=a.y1,f=a.x2,v=a.y2;if(h===d&&u===l||c===f&&m===v)return!1;var S=(v-m)*(d-h)-(f-c)*(l-u);if(S===0)return!1;var x=((f-c)*(u-m)-(v-m)*(h-c))/S,T=((d-h)*(u-m)-(l-u)*(h-c))/S;return x<0||x>1||T<0||T>1?!1:(p&&(p.x=h+x*(d-h),p.y=u+x*(l-u)),!0)};r.exports=g},47910:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.x1,h=n.y1,u=n.x2,d=n.y2,l=a.x,c=a.y,m=a.right,f=a.bottom,v=0;if(p>=l&&p<=m&&h>=c&&h<=f||u>=l&&u<=m&&d>=c&&d<=f)return!0;if(p<l&&u>=l){if(v=h+(d-h)*(l-p)/(u-p),v>c&&v<=f)return!0}else if(p>m&&u<=m&&(v=h+(d-h)*(m-p)/(u-p),v>=c&&v<=f))return!0;if(h<c&&d>=c){if(v=p+(u-p)*(c-h)/(d-h),v>=l&&v<=m)return!0}else if(h>f&&d<=f&&(v=p+(u-p)*(f-h)/(d-h),v>=l&&v<=m))return!0;return!1};r.exports=g},34426:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){p===void 0&&(p=1);var h=a.x1,u=a.y1,d=a.x2,l=a.y2,c=n.x,m=n.y,f=(d-h)*(d-h)+(l-u)*(l-u);if(f===0)return!1;var v=((c-h)*(d-h)+(m-u)*(l-u))/f;if(v<0)return Math.sqrt((h-c)*(h-c)+(u-m)*(u-m))<=p;if(v>=0&&v<=1){var S=((u-m)*(d-h)-(h-c)*(l-u))/f;return Math.abs(S)*Math.sqrt(f)<=p}else return Math.sqrt((d-c)*(d-c)+(l-m)*(l-m))<=p};r.exports=g},81414:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(34426),p=function(h,u){if(!a(h,u))return!1;var d=Math.min(u.x1,u.x2),l=Math.max(u.x1,u.x2),c=Math.min(u.y1,u.y2),m=Math.max(u.y1,u.y2);return h.x>=d&&h.x<=l&&h.y>=c&&h.y<=m};r.exports=p},90205:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.width<=0||n.height<=0||a.width<=0||a.height<=0?!1:!(n.right<a.x||n.bottom<a.y||n.x>a.right||n.y>a.bottom)};r.exports=g},20370:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(25227),p=n(94287),h=n(86875),u=n(87279),d=function(l,c){if(c.left>l.right||c.right<l.left||c.top>l.bottom||c.bottom<l.top)return!1;var m=c.getLineA(),f=c.getLineB(),v=c.getLineC();if(p(l,m.x1,m.y1)||p(l,m.x2,m.y2)||p(l,f.x1,f.y1)||p(l,f.x2,f.y2)||p(l,v.x1,v.y1)||p(l,v.x2,v.y2))return!0;var S=l.getLineA(),x=l.getLineB(),T=l.getLineC(),C=l.getLineD();if(a(m,S)||a(m,x)||a(m,T)||a(m,C)||a(f,S)||a(f,x)||a(f,T)||a(f,C)||a(v,S)||a(v,x)||a(v,T)||a(v,C))return!0;var w=u(l),b=h(c,w,!0);return b.length>0};r.exports=d},8786:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u,d){return d===void 0&&(d=0),!(a>n.right+d||p<n.left-d||h>n.bottom+d||u<n.top-d)};r.exports=g},48411:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61472),p=n(60689),h=function(u,d){return u.left>d.right||u.right<d.left||u.top>d.bottom||u.bottom<d.top?!1:!!(p(u,d.x,d.y)||a(u.getLineA(),d)||a(u.getLineB(),d)||a(u.getLineC(),d))};r.exports=h},86117:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(25227),p=function(h,u){return!!(h.contains(u.x1,u.y1)||h.contains(u.x2,u.y2)||a(h.getLineA(),u)||a(h.getLineB(),u)||a(h.getLineC(),u))};r.exports=p},23589:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(86875),p=n(18680),h=n(25227),u=function(d,l){if(d.left>l.right||d.right<l.left||d.top>l.bottom||d.bottom<l.top)return!1;var c=d.getLineA(),m=d.getLineB(),f=d.getLineC(),v=l.getLineA(),S=l.getLineB(),x=l.getLineC();if(h(c,v)||h(c,S)||h(c,x)||h(m,v)||h(m,S)||h(m,x)||h(f,v)||h(f,S)||h(f,x))return!0;var T=p(d),C=a(l,T,!0);return C.length>0||(T=p(l),C=a(d,T,!0),C.length>0)};r.exports=u},7563:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CircleToCircle:n(22184),CircleToRectangle:n(26535),GetCircleToCircle:n(71145),GetCircleToRectangle:n(62508),GetLineToCircle:n(26111),GetLineToLine:n(96537),GetLineToPoints:n(17647),GetLineToPolygon:n(68439),GetLineToRectangle:n(9569),GetRaysFromPointToPolygon:n(7449),GetRectangleIntersection:n(82931),GetRectangleToRectangle:n(1946),GetRectangleToTriangle:n(34211),GetTriangleToCircle:n(80511),GetTriangleToLine:n(31343),GetTriangleToTriangle:n(70534),LineToCircle:n(61472),LineToLine:n(25227),LineToRectangle:n(47910),PointToLine:n(34426),PointToLineSegment:n(81414),RectangleToRectangle:n(90205),RectangleToTriangle:n(20370),RectangleToValues:n(8786),TriangleToCircle:n(48411),TriangleToLine:n(86117),TriangleToTriangle:n(23589)}},50599:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return Math.atan2(n.y2-n.y1,n.x2-n.x1)};r.exports=g},58813:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){a===void 0&&(a=1),p===void 0&&(p=[]);var h=Math.round(n.x1),u=Math.round(n.y1),d=Math.round(n.x2),l=Math.round(n.y2),c=Math.abs(d-h),m=Math.abs(l-u),f=h<d?1:-1,v=u<l?1:-1,S=c-m;p.push({x:h,y:u});for(var x=1;!(h===d&&u===l);){var T=S<<1;T>-m&&(S-=m,h+=f),T<c&&(S+=c,u+=v),x%a===0&&p.push({x:h,y:u}),x++}return p};r.exports=g},88513:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=a-(n.x1+n.x2)/2,u=p-(n.y1+n.y2)/2;return n.x1+=h,n.y1+=u,n.x2+=h,n.y2+=u,n};r.exports=g},26718:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88829),p=function(h){return new a(h.x1,h.y1,h.x2,h.y2)};r.exports=p},88930:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a.setTo(n.x1,n.y1,n.x2,n.y2)};r.exports=g},90656:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x1===a.x1&&n.y1===a.y1&&n.x2===a.x2&&n.y2===a.y2};r.exports=g},30897:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16028),p=function(h,u,d){d===void 0&&(d=u);var l=a(h),c=h.x2-h.x1,m=h.y2-h.y1;return u&&(h.x1=h.x1-c/l*u,h.y1=h.y1-m/l*u),d&&(h.x2=h.x2+c/l*d,h.y2=h.y2+m/l*d),h};r.exports=p},30684:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(92951),p=n(21902),h=n(79967),u=function(d,l,c,m,f){m===void 0&&(m=0),f===void 0&&(f=[]);var v=[],S=d.x1,x=d.y1,T=d.x2-S,C=d.y2-x,w=p(l,f),b,E,A=c-1;for(b=0;b<A;b++)E=w(b/A),v.push(new h(S+T*E,x+C*E));if(E=w(1),v.push(new h(S+T*E,x+C*E)),m>0){var I=v[0],R=[I];for(b=1;b<v.length-1;b++){var N=v[b];a(I,N)>=m&&(R.push(N),I=N)}var F=v[v.length-1];return a(I,F)<m&&R.pop(),R.push(F),R}else return v};r.exports=u},20487:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u){return u===void 0&&(u=new a),u.x=(h.x1+h.x2)/2,u.y=(h.y1+h.y2)/2,u};r.exports=p},11222:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u,d){d===void 0&&(d=new a);var l=h.x1,c=h.y1,m=h.x2,f=h.y2,v=(m-l)*(m-l)+(f-c)*(f-c);if(v===0)return d;var S=((u.x-l)*(m-l)+(u.y-c)*(f-c))/v;return d.x=l+S*(m-l),d.y=c+S*(f-c),d};r.exports=p},7377:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83392),p=n(50599),h=n(79967),u=function(d,l){l===void 0&&(l=new h);var c=p(d)-a.TAU;return l.x=Math.cos(c),l.y=Math.sin(c),l};r.exports=u},66464:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u,d){return d===void 0&&(d=new a),d.x=h.x1+(h.x2-h.x1)*u,d.y=h.y1+(h.y2-h.y1)*u,d};r.exports=p},8570:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16028),p=n(79967),h=function(u,d,l,c){c===void 0&&(c=[]),!d&&l>0&&(d=a(u)/l);for(var m=u.x1,f=u.y1,v=u.x2,S=u.y2,x=0;x<d;x++){var T=x/d,C=m+(v-m)*T,w=f+(S-f)*T;c.push(new p(C,w))}return c};r.exports=h},65269:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.x1,h=n.y1,u=n.x2,d=n.y2,l=(u-p)*(u-p)+(d-h)*(d-h);if(l===0)return!1;var c=((h-a.y)*(u-p)-(p-a.x)*(d-h))/l;return Math.abs(c)*Math.sqrt(l)};r.exports=g},82996:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return Math.abs(n.y1-n.y2)};r.exports=g},16028:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return Math.sqrt((n.x2-n.x1)*(n.x2-n.x1)+(n.y2-n.y1)*(n.y2-n.y1))};r.exports=g},88829:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(66464),h=n(8570),u=n(52394),d=n(74077),l=n(93736),c=new a({initialize:function(f,v,S,x){f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=0),x===void 0&&(x=0),this.type=u.LINE,this.x1=f,this.y1=v,this.x2=S,this.y2=x},getPoint:function(m,f){return p(this,m,f)},getPoints:function(m,f,v){return h(this,m,f,v)},getRandomPoint:function(m){return d(this,m)},setTo:function(m,f,v,S){return m===void 0&&(m=0),f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=0),this.x1=m,this.y1=f,this.x2=v,this.y2=S,this},getPointA:function(m){return m===void 0&&(m=new l),m.set(this.x1,this.y1),m},getPointB:function(m){return m===void 0&&(m=new l),m.set(this.x2,this.y2),m},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(m){this.x1<=this.x2?this.x1=m:this.x2=m}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(m){this.x1>this.x2?this.x1=m:this.x2=m}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(m){this.y1<=this.y2?this.y1=m:this.y2=m}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(m){this.y1>this.y2?this.y1=m:this.y2=m}}});r.exports=c},73273:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83392),p=n(1071),h=n(50599),u=function(d){var l=h(d)-a.TAU;return p(l,-Math.PI,Math.PI)};r.exports=u},96936:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83392),p=n(50599),h=function(u){return Math.cos(p(u)-a.TAU)};r.exports=h},43581:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83392),p=n(50599),h=function(u){return Math.sin(p(u)-a.TAU)};r.exports=h},13990:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n.x1+=a,n.y1+=p,n.x2+=a,n.y2+=p,n};r.exports=g},1298:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return-((n.x2-n.x1)/(n.y2-n.y1))};r.exports=g},74077:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u){u===void 0&&(u=new a);var d=Math.random();return u.x=h.x1+d*(h.x2-h.x1),u.y=h.y1+d*(h.y2-h.y1),u};r.exports=p},30473:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50599),p=n(73273),h=function(u,d){return 2*p(d)-Math.PI-a(u)};r.exports=h},25968:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(1809),p=function(h,u){var d=(h.x1+h.x2)/2,l=(h.y1+h.y2)/2;return a(h,d,l,u)};r.exports=p},24296:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(1809),p=function(h,u,d){return a(h,u.x,u.y,d)};r.exports=p},1809:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=Math.cos(h),d=Math.sin(h),l=n.x1-a,c=n.y1-p;return n.x1=l*u-c*d+a,n.y1=l*d+c*u+p,l=n.x2-a,c=n.y2-p,n.x2=l*u-c*d+a,n.y2=l*d+c*u+p,n};r.exports=g},88171:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u){return n.x1=a,n.y1=p,n.x2=a+Math.cos(h)*u,n.y2=p+Math.sin(h)*u,n};r.exports=g},82797:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return(n.y2-n.y1)/(n.x2-n.x1)};r.exports=g},41067:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return Math.abs(n.x1-n.x2)};r.exports=g},28482:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(88829);a.Angle=n(50599),a.BresenhamPoints=n(58813),a.CenterOn=n(88513),a.Clone=n(26718),a.CopyFrom=n(88930),a.Equals=n(90656),a.Extend=n(30897),a.GetEasedPoints=n(30684),a.GetMidPoint=n(20487),a.GetNearestPoint=n(11222),a.GetNormal=n(7377),a.GetPoint=n(66464),a.GetPoints=n(8570),a.GetShortestDistance=n(65269),a.Height=n(82996),a.Length=n(16028),a.NormalAngle=n(73273),a.NormalX=n(96936),a.NormalY=n(43581),a.Offset=n(13990),a.PerpSlope=n(1298),a.Random=n(74077),a.ReflectAngle=n(30473),a.Rotate=n(25968),a.RotateAroundPoint=n(24296),a.RotateAroundXY=n(1809),a.SetToAngle=n(88171),a.Slope=n(82797),a.Width=n(41067),r.exports=a},18693:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(74118),h=n(93736);function u(l,c,m,f){var v=l-m,S=c-f,x=v*v+S*S;return Math.sqrt(x)}var d=new a({initialize:function(c,m,f){this.vertex1=c,this.vertex2=m,this.vertex3=f,this.bounds=new p,this._inCenter=new h},getInCenter:function(l){l===void 0&&(l=!0);var c=this.vertex1,m=this.vertex2,f=this.vertex3,v,S,x,T,C,w;l?(v=c.x,S=c.y,x=m.x,T=m.y,C=f.x,w=f.y):(v=c.vx,S=c.vy,x=m.vx,T=m.vy,C=f.vx,w=f.vy);var b=u(C,w,x,T),E=u(v,S,C,w),A=u(x,T,v,S),I=b+E+A;return this._inCenter.set((v*b+x*E+C*A)/I,(S*b+T*E+w*A)/I)},contains:function(l,c,m){var f=this.vertex1,v=this.vertex2,S=this.vertex3,x=f.vx,T=f.vy,C=v.vx,w=v.vy,b=S.vx,E=S.vy;if(m){var A=m.a,I=m.b,R=m.c,N=m.d,F=m.e,P=m.f;x=f.vx*A+f.vy*R+F,T=f.vx*I+f.vy*N+P,C=v.vx*A+v.vy*R+F,w=v.vx*I+v.vy*N+P,b=S.vx*A+S.vy*R+F,E=S.vx*I+S.vy*N+P}var D=b-x,M=E-T,L=C-x,k=w-T,V=l-x,W=c-T,K=D*D+M*M,B=D*L+M*k,G=D*V+M*W,O=L*L+k*k,$=L*V+k*W,z=K*O-B*B,X=z===0?0:1/z,Y=(O*G-B*$)*X,Z=(K*$-B*G)*X;return Y>=0&&Z>=0&&Y+Z<1},isCounterClockwise:function(l){var c=this.vertex1,m=this.vertex2,f=this.vertex3,v=(m.vx-c.vx)*(f.vy-c.vy)-(m.vy-c.vy)*(f.vx-c.vx);return l<=0?v>=0:v<0},load:function(l,c,m,f,v){return m=this.vertex1.load(l,c,m,f,v),m=this.vertex2.load(l,c,m,f,v),m=this.vertex3.load(l,c,m,f,v),m},transformCoordinatesLocal:function(l,c,m,f){return this.vertex1.transformCoordinatesLocal(l,c,m,f),this.vertex2.transformCoordinatesLocal(l,c,m,f),this.vertex3.transformCoordinatesLocal(l,c,m,f),this},updateBounds:function(){var l=this.vertex1,c=this.vertex2,m=this.vertex3,f=this.bounds;return f.x=Math.min(l.vx,c.vx,m.vx),f.y=Math.min(l.vy,c.vy,m.vy),f.width=Math.max(l.vx,c.vx,m.vx)-f.x,f.height=Math.max(l.vy,c.vy,m.vy)-f.y,this},isInView:function(l,c,m,f,v,S,x,T,C,w,b){this.update(f,v,S,x,T,C,w,b);var E=this.vertex1,A=this.vertex2,I=this.vertex3;if(E.ta<=0&&A.ta<=0&&I.ta<=0||c&&!this.isCounterClockwise(m))return!1;var R=this.bounds;R.x=Math.min(E.tx,A.tx,I.tx),R.y=Math.min(E.ty,A.ty,I.ty),R.width=Math.max(E.tx,A.tx,I.tx)-R.x,R.height=Math.max(E.ty,A.ty,I.ty)-R.y;var N=l.x+l.width,F=l.y+l.height;return R.width<=0||R.height<=0||l.width<=0||l.height<=0?!1:!(R.right<l.x||R.bottom<l.y||R.x>N||R.y>F)},scrollUV:function(l,c){return this.vertex1.scrollUV(l,c),this.vertex2.scrollUV(l,c),this.vertex3.scrollUV(l,c),this},scaleUV:function(l,c){return this.vertex1.scaleUV(l,c),this.vertex2.scaleUV(l,c),this.vertex3.scaleUV(l,c),this},setColor:function(l){return this.vertex1.color=l,this.vertex2.color=l,this.vertex3.color=l,this},update:function(l,c,m,f,v,S,x,T){return this.vertex1.update(c,m,f,v,S,x,T,l),this.vertex2.update(c,m,f,v,S,x,T,l),this.vertex3.update(c,m,f,v,S,x,T,l),this},translate:function(l,c){c===void 0&&(c=0);var m=this.vertex1,f=this.vertex2,v=this.vertex3;return m.x+=l,m.y+=c,f.x+=l,f.y+=c,v.x+=l,v.y+=c,this},x:{get:function(){return this.getInCenter().x},set:function(l){var c=this.getInCenter();this.translate(l-c.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(l){var c=this.getInCenter();this.translate(0,l-c.y)}},alpha:{get:function(){var l=this.vertex1,c=this.vertex2,m=this.vertex3;return(l.alpha+c.alpha+m.alpha)/3},set:function(l){this.vertex1.alpha=l,this.vertex2.alpha=l,this.vertex3.alpha=l}},depth:{get:function(){var l=this.vertex1,c=this.vertex2,m=this.vertex3;return(l.vz+c.vz+m.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});r.exports=d},99425:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(18693),p=n(72632),h=n(16650),u=n(70015),d=n(85769),l=new u,c=new u,m=new h,f=function(v){var S=p(v,"mesh"),x=p(v,"texture",null),T=p(v,"frame"),C=p(v,"width",1),w=p(v,"height",C),b=p(v,"widthSegments",1),E=p(v,"heightSegments",b),A=p(v,"x",0),I=p(v,"y",0),R=p(v,"z",0),N=p(v,"rotateX",0),F=p(v,"rotateY",0),P=p(v,"rotateZ",0),D=p(v,"zIsUp",!0),M=p(v,"isOrtho",S?S.dirtyCache[11]:!1),L=p(v,"colors",[16777215]),k=p(v,"alphas",[1]),V=p(v,"tile",!1),W=p(v,"flipY",!1),K=p(v,"width",null),B={faces:[],verts:[]};l.set(A,I,R),c.set(N,F,P),m.fromRotationXYTranslation(c,l,D);var G;if(!x&&S)x=S.texture,T||(G=S.frame);else if(S&&typeof x=="string")x=S.scene.sys.textures.get(x);else if(!x)return B;G||(G=x.get(T)),!K&&M&&x&&S&&(C=G.width/S.height,w=G.height/S.height);var O=C/2,$=w/2,z=Math.floor(b),X=Math.floor(E),Y=z+1,Z=X+1,J=C/z,tt=w/X,et=[],lt=[],ut,ct,ht=0,xt=1,Tt=0,At=1;G&&(ht=G.u0,xt=G.u1,W?(Tt=G.v1,At=G.v0):(Tt=G.v0,At=G.v1));var Rt=xt-ht,mt=At-Tt;for(ct=0;ct<Z;ct++){var bt=ct*tt-$;for(ut=0;ut<Y;ut++){var Ct=ut*J-O;lt.push(Ct,-bt);var Ht=ht+Rt*(ut/z),zt=Tt+mt*(ct/X);et.push(Ht,zt)}}Array.isArray(L)||(L=[L]),Array.isArray(k)||(k=[k]);var Jt=0,ae=0;for(ct=0;ct<X;ct++)for(ut=0;ut<z;ut++){var _t=(ut+Y*ct)*2,Zt=(ut+Y*(ct+1))*2,de=(ut+1+Y*(ct+1))*2,He=(ut+1+Y*ct)*2,Ne=L[ae],sn=k[Jt],Vn=new d(lt[_t],lt[_t+1],0,et[_t],et[_t+1],Ne,sn).transformMat4(m),us=new d(lt[Zt],lt[Zt+1],0,et[Zt],et[Zt+1],Ne,sn).transformMat4(m),br=new d(lt[He],lt[He+1],0,et[He],et[He+1],Ne,sn).transformMat4(m),Ar=new d(lt[Zt],lt[Zt+1],0,et[Zt],et[Zt+1],Ne,sn).transformMat4(m),Ir=new d(lt[de],lt[de+1],0,et[de],et[de+1],Ne,sn).transformMat4(m),Rr=new d(lt[He],lt[He+1],0,et[He],et[He+1],Ne,sn).transformMat4(m);V&&(Vn.setUVs(ht,At),us.setUVs(ht,Tt),br.setUVs(xt,At),Ar.setUVs(ht,Tt),Ir.setUVs(xt,Tt),Rr.setUVs(xt,At)),ae++,ae===L.length&&(ae=0),Jt++,Jt===k.length&&(Jt=0),B.verts.push(Vn,us,br,Ar,Ir,Rr),B.faces.push(new a(Vn,us,br),new a(Ar,Ir,Rr))}return S&&(S.faces=S.faces.concat(B.faces),S.vertices=S.vertices.concat(B.verts)),B};r.exports=f},53267:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(18693),p=n(16650),h=n(70015),u=n(85769),d=new h,l=new h,c=new p,m=function(f,v,S,x,T,C,w,b,E,A){S===void 0&&(S=1),x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=0),w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=0),A===void 0&&(A=!0);var I={faces:[],verts:[]},R=f.materials;d.set(x,T,C),l.set(w,b,E),c.fromRotationXYTranslation(l,d,A);for(var N=0;N<f.models.length;N++)for(var F=f.models[N],P=F.vertices,D=F.textureCoords,M=F.faces,L=0;L<M.length;L++){var k=M[L],V=k.vertices[0],W=k.vertices[1],K=k.vertices[2],B=P[V.vertexIndex],G=P[W.vertexIndex],O=P[K.vertexIndex],$=V.textureCoordsIndex,z=W.textureCoordsIndex,X=K.textureCoordsIndex,Y=$===-1?{u:0,v:1}:D[$],Z=z===-1?{u:0,v:0}:D[z],J=X===-1?{u:1,v:1}:D[X],tt=16777215;k.material!==""&&R[k.material]&&(tt=R[k.material]);var et=new u(B.x*S,B.y*S,B.z*S,Y.u,Y.v,tt).transformMat4(c),lt=new u(G.x*S,G.y*S,G.z*S,Z.u,Z.v,tt).transformMat4(c),ut=new u(O.x*S,O.y*S,O.z*S,J.u,J.v,tt).transformMat4(c);I.verts.push(et,lt,ut),I.faces.push(new a(et,lt,ut))}return v&&(v.faces=v.faces.concat(I.faces),v.vertices=v.vertices.concat(I.verts)),I};r.exports=m},67623:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(18693),p=n(85769),h=function(u,d,l,c,m,f,v,S){if(c===void 0&&(c=!1),f===void 0&&(f=16777215),v===void 0&&(v=1),S===void 0&&(S=!1),u.length!==d.length&&!c){console.warn("GenerateVerts: vertices and uvs count not equal");return}var x={faces:[],vertices:[]},T,C,w,b,E,A,I,R,N,F,P,D=c?3:2,M=Array.isArray(f),L=Array.isArray(v);if(Array.isArray(l)&&l.length>0)for(T=0;T<l.length;T++){var k=l[T],V=l[T]*2,W=l[T]*D;C=u[W],w=u[W+1],b=c?u[W+2]:0,E=d[V],A=d[V+1],S&&(A=1-A),I=M?f[k]:f,R=L?v[k]:v,N=0,F=0,P=0,m&&(N=m[W],F=m[W+1],P=c?m[W+2]:0),x.vertices.push(new p(C,w,b,E,A,I,R,N,F,P))}else{var K=0,B=0;for(T=0;T<u.length;T+=D)C=u[T],w=u[T+1],b=c?u[T+2]:0,E=d[K],A=d[K+1],I=M?f[B]:f,R=L?v[B]:v,N=0,F=0,P=0,m&&(N=m[T],F=m[T+1],P=c?m[T+2]:0),x.vertices.push(new p(C,w,b,E,A,I,R,N,F,P)),K+=2,B++}for(T=0;T<x.vertices.length;T+=3){var G=x.vertices[T],O=x.vertices[T+1],$=x.vertices[T+2];x.faces.push(new a(G,O,$))}return x};r.exports=h},27291:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=!0,n="untitled",a="",p="";function h(C){var w=C.indexOf("#");return w>-1?C.substring(0,w):C}function u(C){return C.models.length===0&&C.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),a="",C.models[C.models.length-1]}function d(C,w){var b=C.length>=2?C[1]:n;w.models.push({faces:[],name:b,textureCoords:[],vertexNormals:[],vertices:[]}),a=""}function l(C){C.length===2&&(a=C[1])}function c(C,w){var b=C.length,E=b>=2?parseFloat(C[1]):0,A=b>=3?parseFloat(C[2]):0,I=b>=4?parseFloat(C[3]):0;u(w).vertices.push({x:E,y:A,z:I})}function m(C,w){var b=C.length,E=b>=2?parseFloat(C[1]):0,A=b>=3?parseFloat(C[2]):0,I=b>=4?parseFloat(C[3]):0;isNaN(E)&&(E=0),isNaN(A)&&(A=0),isNaN(I)&&(I=0),g&&(A=1-A),u(w).textureCoords.push({u:E,v:A,w:I})}function f(C,w){var b=C.length,E=b>=2?parseFloat(C[1]):0,A=b>=3?parseFloat(C[2]):0,I=b>=4?parseFloat(C[3]):0;u(w).vertexNormals.push({x:E,y:A,z:I})}function v(C,w){var b=C.length-1;if(!(b<3)){for(var E={group:a,material:p,vertices:[]},A=0;A<b;A++){var I=C[A+1],R=I.split("/"),N=R.length;if(!(N<1||N>3)){var F=0,P=0,D=0;F=parseInt(R[0],10),N>1&&R[1]!==""&&(P=parseInt(R[1],10)),N>2&&(D=parseInt(R[2],10)),F!==0&&(F<0&&(F=u(w).vertices.length+1+F),P-=1,F-=1,D-=1,E.vertices.push({textureCoordsIndex:P,vertexIndex:F,vertexNormalIndex:D}))}}u(w).faces.push(E)}}function S(C,w){C.length>=2&&w.materialLibraries.push(C[1])}function x(C){C.length>=2&&(p=C[1])}var T=function(C,w){w===void 0&&(w=!0),g=w;var b={materials:{},materialLibraries:[],models:[]};a="",p="";for(var E=C.split(`
`),A=0;A<E.length;A++){var I=h(E[A]),R=I.replace(/\s\s+/g," ").trim().split(" ");switch(R[0].toLowerCase()){case"o":d(R,b);break;case"g":l(R);break;case"v":c(R,b);break;case"vt":m(R,b);break;case"vn":f(R,b);break;case"f":v(R,b);break;case"mtllib":S(R,b);break;case"usemtl":x(R);break}}return b};r.exports=T},76799:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(22946),p=function(h){for(var u={},d=h.split(`
`),l="",c=0;c<d.length;c++){var m=d[c].trim();if(!(m.indexOf("#")===0||m==="")){var f=m.replace(/\s\s+/g," ").trim().split(" ");switch(f[0].toLowerCase()){case"newmtl":{l=f[1];break}case"kd":{var v=Math.floor(f[1]*255),S=f.length>=2?Math.floor(f[2]*255):v,x=f.length>=3?Math.floor(f[3]*255):v;u[l]=a(v,S,x);break}}}}return u};r.exports=p},15313:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u,d;if(p===void 0&&h===void 0){var l=n.getInCenter();u=l.x,d=l.y}var c=Math.cos(a),m=Math.sin(a),f=n.vertex1,v=n.vertex2,S=n.vertex3,x=f.x-u,T=f.y-d;f.set(x*c-T*m+u,x*m+T*c+d),x=v.x-u,T=v.y-d,v.set(x*c-T*m+u,x*m+T*c+d),x=S.x-u,T=S.y-d,S.set(x*c-T*m+u,x*m+T*c+d)};r.exports=g},85769:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(75512),h=n(70015),u=new a({Extends:h,initialize:function(l,c,m,f,v,S,x,T,C,w){S===void 0&&(S=16777215),x===void 0&&(x=1),T===void 0&&(T=0),C===void 0&&(C=0),w===void 0&&(w=0),h.call(this,l,c,m),this.vx=0,this.vy=0,this.vz=0,this.nx=T,this.ny=C,this.nz=w,this.u=f,this.v=v,this.color=S,this.alpha=x,this.tx=0,this.ty=0,this.ta=0,this.tu=f,this.tv=v},setUVs:function(d,l){return this.u=d,this.v=l,this.tu=d,this.tv=l,this},scrollUV:function(d,l){return this.tu+=d,this.tv+=l,this},scaleUV:function(d,l){return this.tu=this.u*d,this.tv=this.v*l,this},transformCoordinatesLocal:function(d,l,c,m){var f=this.x,v=this.y,S=this.z,x=d.val,T=f*x[0]+v*x[4]+S*x[8]+x[12],C=f*x[1]+v*x[5]+S*x[9]+x[13],w=f*x[2]+v*x[6]+S*x[10]+x[14],b=f*x[3]+v*x[7]+S*x[11]+x[15];this.vx=T/b*l,this.vy=-(C/b)*c,m<=0?this.vz=w/b:this.vz=-(w/b)},resize:function(d,l,c,m,f,v){return this.x=d,this.y=l,this.vx=this.x*c,this.vy=-this.y*m,this.vz=0,f<.5?this.vx+=c*(.5-f):f>.5&&(this.vx-=c*(f-.5)),v<.5?this.vy+=m*(.5-v):v>.5&&(this.vy-=m*(v-.5)),this},update:function(d,l,c,m,f,v,S,x){var T=this.vx*d+this.vy*c+f,C=this.vx*l+this.vy*m+v;return S&&(T=Math.round(T),C=Math.round(C)),this.tx=T,this.ty=C,this.ta=this.alpha*x,this},load:function(d,l,c,m,f){return d[++c]=this.tx,d[++c]=this.ty,d[++c]=this.tu,d[++c]=this.tv,d[++c]=m,d[++c]=f,l[++c]=p.getTintAppendFloatAlpha(this.color,this.ta),c}});r.exports=u},14293:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Face:n(18693),GenerateGridVerts:n(99425),GenerateObjVerts:n(53267),GenerateVerts:n(67623),ParseObj:n(27291),ParseObjMaterial:n(76799),RotateFace:n(15313),Vertex:n(85769)};r.exports=a},77601:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.setTo(Math.ceil(n.x),Math.ceil(n.y))};r.exports=g},38933:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h){return new a(h.x,h.y)};r.exports=p},47103:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a.setTo(n.x,n.y)};r.exports=g},13625:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x===a.x&&n.y===a.y};r.exports=g},12536:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.setTo(Math.floor(n.x),Math.floor(n.y))};r.exports=g},54205:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u){if(u===void 0&&(u=new a),!Array.isArray(h))throw new Error("GetCentroid points argument must be an array");var d=h.length;if(d<1)throw new Error("GetCentroid points array must not be empty");if(d===1)u.x=h[0].x,u.y=h[0].y;else{for(var l=0;l<d;l++)u.x+=h[l].x,u.y+=h[l].y;u.x/=d,u.y/=d}return u};r.exports=p},50083:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)};r.exports=g},82712:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.x*n.x+n.y*n.y};r.exports=g},20052:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=function(h,u){u===void 0&&(u=new a);for(var d=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,m=Number.POSITIVE_INFINITY,f=0;f<h.length;f++){var v=h[f];v.x>d&&(d=v.x),v.x<l&&(l=v.x),v.y>c&&(c=v.y),v.y<m&&(m=v.y)}return u.x=l,u.y=m,u.width=d-l,u.height=c-m,u};r.exports=p},77154:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u,d,l){return d===void 0&&(d=0),l===void 0&&(l=new a),l.x=h.x+(u.x-h.x)*d,l.y=h.y+(u.y-h.y)*d,l};r.exports=p},42397:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.setTo(n.y,n.x)};r.exports=g},59464:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u){return u===void 0&&(u=new a),u.setTo(-h.x,-h.y)};r.exports=p},79967:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(52394),h=new a({initialize:function(d,l){d===void 0&&(d=0),l===void 0&&(l=d),this.type=p.POINT,this.x=d,this.y=l},setTo:function(u,d){return u===void 0&&(u=0),d===void 0&&(d=u),this.x=u,this.y=d,this}});r.exports=h},53581:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=n(82712),h=function(u,d,l){l===void 0&&(l=new a);var c=u.x*d.x+u.y*d.y,m=c/p(d);return m!==0&&(l.x=m*d.x,l.y=m*d.y),l};r.exports=h},50817:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u,d){d===void 0&&(d=new a);var l=h.x*u.x+h.y*u.y;return l!==0&&(d.x=l*u.x,d.y=l*u.y),d};r.exports=p},40525:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50083),p=function(h,u){if(h.x!==0||h.y!==0){var d=a(h);h.x/=d,h.y/=d}return h.x*=u,h.y*=u,h};r.exports=p},63472:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967);a.Ceil=n(77601),a.Clone=n(38933),a.CopyFrom=n(47103),a.Equals=n(13625),a.Floor=n(12536),a.GetCentroid=n(54205),a.GetMagnitude=n(50083),a.GetMagnitudeSq=n(82712),a.GetRectangleFromPoints=n(20052),a.Interpolate=n(77154),a.Invert=n(42397),a.Negative=n(59464),a.Project=n(53581),a.ProjectUnit=n(50817),a.SetMagnitude=n(40525),r.exports=a},19631:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(8580),p=function(h){return new a(h.points)};r.exports=p},45604:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){for(var h=!1,u=-1,d=n.points.length-1;++u<n.points.length;d=u){var l=n.points[u].x,c=n.points[u].y,m=n.points[d].x,f=n.points[d].y;(c<=p&&p<f||f<=p&&p<c)&&a<(m-l)*(p-c)/(f-c)+l&&(h=!h)}return h};r.exports=g},87289:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(45604),p=function(h,u){return a(h,u.x,u.y)};r.exports=p},11117:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(B,G,O){O=O||2;var $=G&&G.length,z=$?G[0]*O:B.length,X=n(B,0,z,O,!0),Y=[];if(!X||X.next===X.prev)return Y;var Z,J,tt,et,lt,ut,ct;if($&&(X=c(B,G,X,O)),B.length>80*O){Z=tt=B[0],J=et=B[1];for(var ht=O;ht<z;ht+=O)lt=B[ht],ut=B[ht+1],lt<Z&&(Z=lt),ut<J&&(J=ut),lt>tt&&(tt=lt),ut>et&&(et=ut);ct=Math.max(tt-Z,et-J),ct=ct!==0?32767/ct:0}return p(X,Y,O,Z,J,ct,0),Y}function n(B,G,O,$,z){var X,Y;if(z===K(B,G,O,$)>0)for(X=G;X<O;X+=$)Y=k(X,B[X],B[X+1],Y);else for(X=O-$;X>=G;X-=$)Y=k(X,B[X],B[X+1],Y);return Y&&I(Y,Y.next)&&(V(Y),Y=Y.next),Y}function a(B,G){if(!B)return B;G||(G=B);var O=B,$;do if($=!1,!O.steiner&&(I(O,O.next)||A(O.prev,O,O.next)===0)){if(V(O),O=G=O.prev,O===O.next)break;$=!0}else O=O.next;while($||O!==G);return G}function p(B,G,O,$,z,X,Y){if(B){!Y&&X&&x(B,$,z,X);for(var Z=B,J,tt;B.prev!==B.next;){if(J=B.prev,tt=B.next,X?u(B,$,z,X):h(B)){G.push(J.i/O|0),G.push(B.i/O|0),G.push(tt.i/O|0),V(B),B=tt.next,Z=tt.next;continue}if(B=tt,B===Z){Y?Y===1?(B=d(a(B),G,O),p(B,G,O,$,z,X,2)):Y===2&&l(B,G,O,$,z,X):p(a(B),G,O,$,z,X,1);break}}}}function h(B){var G=B.prev,O=B,$=B.next;if(A(G,O,$)>=0)return!1;for(var z=G.x,X=O.x,Y=$.x,Z=G.y,J=O.y,tt=$.y,et=z<X?z<Y?z:Y:X<Y?X:Y,lt=Z<J?Z<tt?Z:tt:J<tt?J:tt,ut=z>X?z>Y?z:Y:X>Y?X:Y,ct=Z>J?Z>tt?Z:tt:J>tt?J:tt,ht=$.next;ht!==G;){if(ht.x>=et&&ht.x<=ut&&ht.y>=lt&&ht.y<=ct&&b(z,Z,X,J,Y,tt,ht.x,ht.y)&&A(ht.prev,ht,ht.next)>=0)return!1;ht=ht.next}return!0}function u(B,G,O,$){var z=B.prev,X=B,Y=B.next;if(A(z,X,Y)>=0)return!1;for(var Z=z.x,J=X.x,tt=Y.x,et=z.y,lt=X.y,ut=Y.y,ct=Z<J?Z<tt?Z:tt:J<tt?J:tt,ht=et<lt?et<ut?et:ut:lt<ut?lt:ut,xt=Z>J?Z>tt?Z:tt:J>tt?J:tt,Tt=et>lt?et>ut?et:ut:lt>ut?lt:ut,At=C(ct,ht,G,O,$),Rt=C(xt,Tt,G,O,$),mt=B.prevZ,bt=B.nextZ;mt&&mt.z>=At&&bt&&bt.z<=Rt;){if(mt.x>=ct&&mt.x<=xt&&mt.y>=ht&&mt.y<=Tt&&mt!==z&&mt!==Y&&b(Z,et,J,lt,tt,ut,mt.x,mt.y)&&A(mt.prev,mt,mt.next)>=0||(mt=mt.prevZ,bt.x>=ct&&bt.x<=xt&&bt.y>=ht&&bt.y<=Tt&&bt!==z&&bt!==Y&&b(Z,et,J,lt,tt,ut,bt.x,bt.y)&&A(bt.prev,bt,bt.next)>=0))return!1;bt=bt.nextZ}for(;mt&&mt.z>=At;){if(mt.x>=ct&&mt.x<=xt&&mt.y>=ht&&mt.y<=Tt&&mt!==z&&mt!==Y&&b(Z,et,J,lt,tt,ut,mt.x,mt.y)&&A(mt.prev,mt,mt.next)>=0)return!1;mt=mt.prevZ}for(;bt&&bt.z<=Rt;){if(bt.x>=ct&&bt.x<=xt&&bt.y>=ht&&bt.y<=Tt&&bt!==z&&bt!==Y&&b(Z,et,J,lt,tt,ut,bt.x,bt.y)&&A(bt.prev,bt,bt.next)>=0)return!1;bt=bt.nextZ}return!0}function d(B,G,O){var $=B;do{var z=$.prev,X=$.next.next;!I(z,X)&&R(z,$,$.next,X)&&D(z,X)&&D(X,z)&&(G.push(z.i/O|0),G.push($.i/O|0),G.push(X.i/O|0),V($),V($.next),$=B=X),$=$.next}while($!==B);return a($)}function l(B,G,O,$,z,X){var Y=B;do{for(var Z=Y.next.next;Z!==Y.prev;){if(Y.i!==Z.i&&E(Y,Z)){var J=L(Y,Z);Y=a(Y,Y.next),J=a(J,J.next),p(Y,G,O,$,z,X,0),p(J,G,O,$,z,X,0);return}Z=Z.next}Y=Y.next}while(Y!==B)}function c(B,G,O,$){var z=[],X,Y,Z,J,tt;for(X=0,Y=G.length;X<Y;X++)Z=G[X]*$,J=X<Y-1?G[X+1]*$:B.length,tt=n(B,Z,J,$,!1),tt===tt.next&&(tt.steiner=!0),z.push(w(tt));for(z.sort(m),X=0;X<z.length;X++)O=f(z[X],O);return O}function m(B,G){return B.x-G.x}function f(B,G){var O=v(B,G);if(!O)return G;var $=L(O,B);return a($,$.next),a(O,O.next)}function v(B,G){var O=G,$=B.x,z=B.y,X=-1/0,Y;do{if(z<=O.y&&z>=O.next.y&&O.next.y!==O.y){var Z=O.x+(z-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(Z<=$&&Z>X&&(X=Z,Y=O.x<O.next.x?O:O.next,Z===$))return Y}O=O.next}while(O!==G);if(!Y)return null;var J=Y,tt=Y.x,et=Y.y,lt=1/0,ut;O=Y;do $>=O.x&&O.x>=tt&&$!==O.x&&b(z<et?$:X,z,tt,et,z<et?X:$,z,O.x,O.y)&&(ut=Math.abs(z-O.y)/($-O.x),D(O,B)&&(ut<lt||ut===lt&&(O.x>Y.x||O.x===Y.x&&S(Y,O)))&&(Y=O,lt=ut)),O=O.next;while(O!==J);return Y}function S(B,G){return A(B.prev,B,G.prev)<0&&A(G.next,B,B.next)<0}function x(B,G,O,$){var z=B;do z.z===0&&(z.z=C(z.x,z.y,G,O,$)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==B);z.prevZ.nextZ=null,z.prevZ=null,T(z)}function T(B){var G,O,$,z,X,Y,Z,J,tt=1;do{for(O=B,B=null,X=null,Y=0;O;){for(Y++,$=O,Z=0,G=0;G<tt&&(Z++,$=$.nextZ,!!$);G++);for(J=tt;Z>0||J>0&&$;)Z!==0&&(J===0||!$||O.z<=$.z)?(z=O,O=O.nextZ,Z--):(z=$,$=$.nextZ,J--),X?X.nextZ=z:B=z,z.prevZ=X,X=z;O=$}X.nextZ=null,tt*=2}while(Y>1);return B}function C(B,G,O,$,z){return B=(B-O)*z|0,G=(G-$)*z|0,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,B|G<<1}function w(B){var G=B,O=B;do(G.x<O.x||G.x===O.x&&G.y<O.y)&&(O=G),G=G.next;while(G!==B);return O}function b(B,G,O,$,z,X,Y,Z){return(z-Y)*(G-Z)>=(B-Y)*(X-Z)&&(B-Y)*($-Z)>=(O-Y)*(G-Z)&&(O-Y)*(X-Z)>=(z-Y)*($-Z)}function E(B,G){return B.next.i!==G.i&&B.prev.i!==G.i&&!P(B,G)&&(D(B,G)&&D(G,B)&&M(B,G)&&(A(B.prev,B,G.prev)||A(B,G.prev,G))||I(B,G)&&A(B.prev,B,B.next)>0&&A(G.prev,G,G.next)>0)}function A(B,G,O){return(G.y-B.y)*(O.x-G.x)-(G.x-B.x)*(O.y-G.y)}function I(B,G){return B.x===G.x&&B.y===G.y}function R(B,G,O,$){var z=F(A(B,G,O)),X=F(A(B,G,$)),Y=F(A(O,$,B)),Z=F(A(O,$,G));return!!(z!==X&&Y!==Z||z===0&&N(B,O,G)||X===0&&N(B,$,G)||Y===0&&N(O,B,$)||Z===0&&N(O,G,$))}function N(B,G,O){return G.x<=Math.max(B.x,O.x)&&G.x>=Math.min(B.x,O.x)&&G.y<=Math.max(B.y,O.y)&&G.y>=Math.min(B.y,O.y)}function F(B){return B>0?1:B<0?-1:0}function P(B,G){var O=B;do{if(O.i!==B.i&&O.next.i!==B.i&&O.i!==G.i&&O.next.i!==G.i&&R(O,O.next,B,G))return!0;O=O.next}while(O!==B);return!1}function D(B,G){return A(B.prev,B,B.next)<0?A(B,G,B.next)>=0&&A(B,B.prev,G)>=0:A(B,G,B.prev)<0||A(B,B.next,G)<0}function M(B,G){var O=B,$=!1,z=(B.x+G.x)/2,X=(B.y+G.y)/2;do O.y>X!=O.next.y>X&&O.next.y!==O.y&&z<(O.next.x-O.x)*(X-O.y)/(O.next.y-O.y)+O.x&&($=!$),O=O.next;while(O!==B);return $}function L(B,G){var O=new W(B.i,B.x,B.y),$=new W(G.i,G.x,G.y),z=B.next,X=G.prev;return B.next=G,G.prev=B,O.next=z,z.prev=O,$.next=O,O.prev=$,X.next=$,$.prev=X,$}function k(B,G,O,$){var z=new W(B,G,O);return $?(z.next=$.next,z.prev=$,$.next.prev=z,$.next=z):(z.prev=z,z.next=z),z}function V(B){B.next.prev=B.prev,B.prev.next=B.next,B.prevZ&&(B.prevZ.nextZ=B.nextZ),B.nextZ&&(B.nextZ.prevZ=B.prevZ)}function W(B,G,O){this.i=B,this.x=G,this.y=O,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}g.deviation=function(B,G,O,$){var z=G&&G.length,X=z?G[0]*O:B.length,Y=Math.abs(K(B,0,X,O));if(z)for(var Z=0,J=G.length;Z<J;Z++){var tt=G[Z]*O,et=Z<J-1?G[Z+1]*O:B.length;Y-=Math.abs(K(B,tt,et,O))}var lt=0;for(Z=0;Z<$.length;Z+=3){var ut=$[Z]*O,ct=$[Z+1]*O,ht=$[Z+2]*O;lt+=Math.abs((B[ut]-B[ht])*(B[ct+1]-B[ut+1])-(B[ut]-B[ct])*(B[ht+1]-B[ut+1]))}return Y===0&&lt===0?0:Math.abs((lt-Y)/Y)};function K(B,G,O,$){for(var z=0,X=G,Y=O-$;X<O;X+=$)z+=(B[Y]-B[X])*(B[X+1]+B[Y+1]),Y=X;return z}g.flatten=function(B){for(var G=B[0][0].length,O={vertices:[],holes:[],dimensions:G},$=0,z=0;z<B.length;z++){for(var X=0;X<B[z].length;X++)for(var Y=0;Y<G;Y++)O.vertices.push(B[z][X][Y]);z>0&&($+=B[z-1].length,O.holes.push($))}return O},r.exports=g},14045:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=function(h,u){u===void 0&&(u=new a);for(var d=1/0,l=1/0,c=-d,m=-l,f,v=0;v<h.points.length;v++)f=h.points[v],d=Math.min(d,f.x),l=Math.min(l,f.y),c=Math.max(c,f.x),m=Math.max(m,f.y);return u.x=d,u.y=l,u.width=c-d,u.height=m-l,u};r.exports=p},98286:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a===void 0&&(a=[]);for(var p=0;p<n.points.length;p++)a.push(n.points[p].x),a.push(n.points[p].y);return a};r.exports=g},89294:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16028),p=n(88829),h=n(5159),u=function(d,l,c,m){m===void 0&&(m=[]);var f=d.points,v=h(d);!l&&c>0&&(l=v/c);for(var S=0;S<l;S++)for(var x=v*(S/l),T=0,C=0;C<f.length;C++){var w=f[C],b=f[(C+1)%f.length],E=new p(w.x,w.y,b.x,b.y),A=a(E);if(x<T||x>T+A){T+=A;continue}var I=E.getPoint((x-T)/A);m.push(I);break}return m};r.exports=u},5159:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16028),p=n(88829),h=function(u){for(var d=u.points,l=0,c=0;c<d.length;c++){var m=d[c],f=d[(c+1)%d.length],v=new p(m.x,m.y,f.x,f.y);l+=a(v)}return l};r.exports=h},8580:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(45604),h=n(89294),u=n(52394),d=new a({initialize:function(c){this.type=u.POLYGON,this.area=0,this.points=[],c&&this.setTo(c)},contains:function(l,c){return p(this,l,c)},setTo:function(l){if(this.area=0,this.points=[],typeof l=="string"&&(l=l.split(" ")),!Array.isArray(l))return this;for(var c,m=Number.MAX_VALUE,f=0;f<l.length;f++)c={x:0,y:0},typeof l[f]=="number"||typeof l[f]=="string"?(c.x=parseFloat(l[f]),c.y=parseFloat(l[f+1]),f++):Array.isArray(l[f])?(c.x=l[f][0],c.y=l[f][1]):(c.x=l[f].x,c.y=l[f].y),this.points.push(c),c.y<m&&(m=c.y);return this.calculateArea(m),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var l=0,c,m,f=0;f<this.points.length-1;f++)c=this.points[f],m=this.points[f+1],l+=(m.x-c.x)*(c.y+m.y);return c=this.points[0],m=this.points[this.points.length-1],l+=(c.x-m.x)*(m.y+c.y),this.area=-l*.5,this.area},getPoints:function(l,c,m){return h(this,l,c,m)}});r.exports=d},32244:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.points.reverse(),n};r.exports=g},95874:r=>{function g(d,l){var c=d.x-l.x,m=d.y-l.y;return c*c+m*m}function n(d,l,c){var m=l.x,f=l.y,v=c.x-m,S=c.y-f;if(v!==0||S!==0){var x=((d.x-m)*v+(d.y-f)*S)/(v*v+S*S);x>1?(m=c.x,f=c.y):x>0&&(m+=v*x,f+=S*x)}return v=d.x-m,S=d.y-f,v*v+S*S}function a(d,l){for(var c=d[0],m=[c],f,v=1,S=d.length;v<S;v++)f=d[v],g(f,c)>l&&(m.push(f),c=f);return c!==f&&m.push(f),m}function p(d,l,c,m,f){for(var v=m,S,x=l+1;x<c;x++){var T=n(d[x],d[l],d[c]);T>v&&(S=x,v=T)}v>m&&(S-l>1&&p(d,l,S,m,f),f.push(d[S]),c-S>1&&p(d,S,c,m,f))}function h(d,l){var c=d.length-1,m=[d[0]];return p(d,0,c,l,m),m.push(d[c]),m}var u=function(d,l,c){l===void 0&&(l=1),c===void 0&&(c=!1);var m=d.points;if(m.length>2){var f=l*l;c||(m=a(m,f)),d.setTo(h(m,f))}return d};r.exports=u},18974:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(a,p){return a[0]=p[0],a[1]=p[1],a},n=function(a){var p,h=[],u=a.points;for(p=0;p<u.length;p++)h.push([u[p].x,u[p].y]);var d=[];for(h.length>0&&d.push(g([0,0],h[0])),p=0;p<h.length-1;p++){var l=h[p],c=h[p+1],m=l[0],f=l[1],v=c[0],S=c[1];d.push([.85*m+.15*v,.85*f+.15*S]),d.push([.15*m+.85*v,.15*f+.85*S])}return h.length>1&&d.push(g([0,0],h[h.length-1])),a.setTo(d)};r.exports=n},23490:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){for(var h=n.points,u=0;u<h.length;u++)h[u].x+=a,h[u].y+=p;return n};r.exports=g},44359:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(8580);a.Clone=n(19631),a.Contains=n(45604),a.ContainsPoint=n(87289),a.Earcut=n(11117),a.GetAABB=n(14045),a.GetNumberArray=n(98286),a.GetPoints=n(89294),a.Perimeter=n(5159),a.Reverse=n(32244),a.Simplify=n(95874),a.Smooth=n(18974),a.Translate=n(23490),r.exports=a},1653:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.width*n.height};r.exports=g},33943:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n};r.exports=g},58662:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.x=Math.ceil(n.x),n.y=Math.ceil(n.y),n.width=Math.ceil(n.width),n.height=Math.ceil(n.height),n};r.exports=g},79993:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n.x=a-n.width/2,n.y=p-n.height/2,n};r.exports=g},81572:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=function(h){return new a(h.x,h.y,h.width,h.height)};r.exports=p},94287:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n.width<=0||n.height<=0?!1:n.x<=a&&n.x+n.width>=a&&n.y<=p&&n.y+n.height>=p};r.exports=g},28687:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(94287),p=function(h,u){return a(h,u.x,u.y)};r.exports=p},73222:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a.width*a.height>n.width*n.height?!1:a.x>n.x&&a.x<n.right&&a.right>n.x&&a.right<n.right&&a.y>n.y&&a.y<n.bottom&&a.bottom>n.y&&a.bottom<n.bottom};r.exports=g},29538:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a.setTo(n.x,n.y,n.width,n.height)};r.exports=g},87279:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a===void 0&&(a=[]),a.push({x:n.x,y:n.y}),a.push({x:n.right,y:n.y}),a.push({x:n.right,y:n.bottom}),a.push({x:n.x,y:n.bottom}),a};r.exports=g},19989:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x===a.x&&n.y===a.y&&n.width===a.width&&n.height===a.height};r.exports=g},92628:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6700),p=function(h,u){var d=a(h);return d<a(u)?h.setSize(u.height*d,u.height):h.setSize(u.width,u.width/d),h.setPosition(u.centerX-h.width/2,u.centerY-h.height/2)};r.exports=p},85028:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6700),p=function(h,u){var d=a(h);return d>a(u)?h.setSize(u.height*d,u.height):h.setSize(u.width,u.width/d),h.setPosition(u.centerX-h.width/2,u.centerY-h.height/2)};r.exports=p},71356:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n};r.exports=g},21687:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.x=Math.floor(n.x),n.y=Math.floor(n.y),n.width=Math.floor(n.width),n.height=Math.floor(n.height),n};r.exports=g},80222:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=n(83392),h=function(u,d){if(d===void 0&&(d=new a),u.length===0)return d;for(var l=Number.MAX_VALUE,c=Number.MAX_VALUE,m=p.MIN_SAFE_INTEGER,f=p.MIN_SAFE_INTEGER,v,S,x,T=0;T<u.length;T++)v=u[T],Array.isArray(v)?(S=v[0],x=v[1]):(S=v.x,x=v.y),l=Math.min(l,S),c=Math.min(c,x),m=Math.max(m,S),f=Math.max(f,x);return d.x=l,d.y=c,d.width=m-l,d.height=f-c,d};r.exports=h},75785:(r,g,n)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=function(h,u,d,l,c){return c===void 0&&(c=new a),c.setTo(Math.min(h,d),Math.min(u,l),Math.abs(h-d),Math.abs(u-l))};r.exports=p},6700:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.height===0?NaN:n.width/n.height};r.exports=g},35242:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u){return u===void 0&&(u=new a),u.x=h.centerX,u.y=h.centerY,u};r.exports=p},47698:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(85876),p=n(79967),h=function(u,d,l){if(l===void 0&&(l=new p),d<=0||d>=1)return l.x=u.x,l.y=u.y,l;var c=a(u)*d;return d>.5?(c-=u.width+u.height,c<=u.width?(l.x=u.right-c,l.y=u.bottom):(l.x=u.x,l.y=u.bottom-(c-u.width))):c<=u.width?(l.x=u.x+c,l.y=u.y):(l.x=u.right,l.y=u.y+(c-u.width)),l};r.exports=h},54932:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(47698),p=n(85876),h=function(u,d,l,c){c===void 0&&(c=[]),!d&&l>0&&(d=p(u)/l);for(var m=0;m<d;m++){var f=m/d;c.push(a(u,f))}return c};r.exports=h},31591:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u){return u===void 0&&(u=new a),u.x=h.width,u.y=h.height,u};r.exports=p},7782:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79993),p=function(h,u,d){var l=h.centerX,c=h.centerY;return h.setSize(h.width+u*2,h.height+d*2),a(h,l,c)};r.exports=p},66217:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=n(90205),h=function(u,d,l){return l===void 0&&(l=new a),p(u,d)?(l.x=Math.max(u.x,d.x),l.y=Math.max(u.y,d.y),l.width=Math.min(u.right,d.right)-l.x,l.height=Math.min(u.bottom,d.bottom)-l.y):l.setEmpty(),l};r.exports=h},40053:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(85876),p=n(79967),h=function(u,d,l,c){if(c===void 0&&(c=[]),!d&&!l)return c;d?l=Math.round(a(u)/d):d=a(u)/l;for(var m=u.x,f=u.y,v=0,S=0;S<l;S++)switch(c.push(new p(m,f)),v){case 0:m+=d,m>=u.right&&(v=1,f+=m-u.right,m=u.right);break;case 1:f+=d,f>=u.bottom&&(v=2,m-=f-u.bottom,f=u.bottom);break;case 2:m-=d,m<=u.left&&(v=3,f-=u.left-m,m=u.left);break;case 3:f-=d,f<=u.top&&(v=0,f=u.top);break}return c};r.exports=h},86673:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){for(var p=n.x,h=n.right,u=n.y,d=n.bottom,l=0;l<a.length;l++)p=Math.min(p,a[l].x),h=Math.max(h,a[l].x),u=Math.min(u,a[l].y),d=Math.max(d,a[l].y);return n.x=p,n.y=u,n.width=h-p,n.height=d-u,n};r.exports=g},14655:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=Math.min(n.x,a.x),h=Math.max(n.right,a.right);n.x=p,n.width=h-p;var u=Math.min(n.y,a.y),d=Math.max(n.bottom,a.bottom);return n.y=u,n.height=d-u,n};r.exports=g},44755:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=Math.min(n.x,a),u=Math.max(n.right,a);n.x=h,n.width=u-h;var d=Math.min(n.y,p),l=Math.max(n.bottom,p);return n.y=d,n.height=l-d,n};r.exports=g},74466:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n.x+=a,n.y+=p,n};r.exports=g},55946:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x+=a.x,n.y+=a.y,n};r.exports=g},97474:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x<a.right&&n.right>a.x&&n.y<a.bottom&&n.bottom>a.y};r.exports=g},85876:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return 2*(n.width+n.height)};r.exports=g},20243:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=n(75606),h=function(u,d,l){l===void 0&&(l=new a),d=p(d);var c=Math.sin(d),m=Math.cos(d),f=m>0?u.width/2:u.width/-2,v=c>0?u.height/2:u.height/-2;return Math.abs(f*c)<Math.abs(v*m)?v=f*c/m:f=v*m/c,l.x=f+u.centerX,l.y=v+u.centerY,l};r.exports=h},30001:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u){return u===void 0&&(u=new a),u.x=h.x+Math.random()*h.width,u.y=h.y+Math.random()*h.height,u};r.exports=p},97691:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(17489),p=n(73222),h=n(79967),u=function(d,l,c){if(c===void 0&&(c=new h),p(d,l))switch(a(0,3)){case 0:c.x=d.x+Math.random()*(l.right-d.x),c.y=d.y+Math.random()*(l.top-d.y);break;case 1:c.x=l.x+Math.random()*(d.right-l.x),c.y=l.bottom+Math.random()*(d.bottom-l.bottom);break;case 2:c.x=d.x+Math.random()*(l.x-d.x),c.y=l.y+Math.random()*(d.bottom-l.y);break;case 3:c.x=l.right+Math.random()*(d.right-l.right),c.y=d.y+Math.random()*(l.bottom-d.y);break}return c};r.exports=u},74118:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(94287),h=n(47698),u=n(54932),d=n(52394),l=n(88829),c=n(30001),m=new a({initialize:function(v,S,x,T){v===void 0&&(v=0),S===void 0&&(S=0),x===void 0&&(x=0),T===void 0&&(T=0),this.type=d.RECTANGLE,this.x=v,this.y=S,this.width=x,this.height=T},contains:function(f,v){return p(this,f,v)},getPoint:function(f,v){return h(this,f,v)},getPoints:function(f,v,S){return u(this,f,v,S)},getRandomPoint:function(f){return c(this,f)},setTo:function(f,v,S,x){return this.x=f,this.y=v,this.width=S,this.height=x,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(f,v){return v===void 0&&(v=f),this.x=f,this.y=v,this},setSize:function(f,v){return v===void 0&&(v=f),this.width=f,this.height=v,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(f){return f===void 0&&(f=new l),f.setTo(this.x,this.y,this.right,this.y),f},getLineB:function(f){return f===void 0&&(f=new l),f.setTo(this.right,this.y,this.right,this.bottom),f},getLineC:function(f){return f===void 0&&(f=new l),f.setTo(this.right,this.bottom,this.x,this.bottom),f},getLineD:function(f){return f===void 0&&(f=new l),f.setTo(this.x,this.bottom,this.x,this.y),f},left:{get:function(){return this.x},set:function(f){f>=this.right?this.width=0:this.width=this.right-f,this.x=f}},right:{get:function(){return this.x+this.width},set:function(f){f<=this.x?this.width=0:this.width=f-this.x}},top:{get:function(){return this.y},set:function(f){f>=this.bottom?this.height=0:this.height=this.bottom-f,this.y=f}},bottom:{get:function(){return this.y+this.height},set:function(f){f<=this.y?this.height=0:this.height=f-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(f){this.x=f-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(f){this.y=f-this.height/2}}});r.exports=m},51828:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.width===a.width&&n.height===a.height};r.exports=g},5691:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return p===void 0&&(p=a),n.width*=a,n.height*=p,n};r.exports=g},58795:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=function(h,u,d){d===void 0&&(d=new a);var l=Math.min(h.x,u.x),c=Math.min(h.y,u.y),m=Math.max(h.right,u.right)-l,f=Math.max(h.bottom,u.bottom)-c;return d.setTo(l,c,m,f)};r.exports=p},66658:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118);a.Area=n(1653),a.Ceil=n(33943),a.CeilAll=n(58662),a.CenterOn=n(79993),a.Clone=n(81572),a.Contains=n(94287),a.ContainsPoint=n(28687),a.ContainsRect=n(73222),a.CopyFrom=n(29538),a.Decompose=n(87279),a.Equals=n(19989),a.FitInside=n(92628),a.FitOutside=n(85028),a.Floor=n(71356),a.FloorAll=n(21687),a.FromPoints=n(80222),a.FromXY=n(75785),a.GetAspectRatio=n(6700),a.GetCenter=n(35242),a.GetPoint=n(47698),a.GetPoints=n(54932),a.GetSize=n(31591),a.Inflate=n(7782),a.Intersection=n(66217),a.MarchingAnts=n(40053),a.MergePoints=n(86673),a.MergeRect=n(14655),a.MergeXY=n(44755),a.Offset=n(74466),a.OffsetPoint=n(55946),a.Overlaps=n(97474),a.Perimeter=n(85876),a.PerimeterPoint=n(20243),a.Random=n(30001),a.RandomOutside=n(97691),a.SameDimensions=n(51828),a.Scale=n(5691),a.Union=n(58795),r.exports=a},19108:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a=n.x1,p=n.y1,h=n.x2,u=n.y2,d=n.x3,l=n.y3;return Math.abs(((d-a)*(u-p)-(h-a)*(l-p))/2)};r.exports=g},41199:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(66349),p=function(h,u,d){var l=d*(Math.sqrt(3)/2),c=h,m=u,f=h+d/2,v=u+l,S=h-d/2,x=u+l;return new a(c,m,f,v,S,x)};r.exports=p},88730:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(11117),p=n(66349),h=function(u,d,l,c,m){d===void 0&&(d=null),l===void 0&&(l=1),c===void 0&&(c=1),m===void 0&&(m=[]);for(var f=a(u,d),v,S,x,T,C,w,b,E,A,I=0;I<f.length;I+=3)v=f[I],S=f[I+1],x=f[I+2],T=u[v*2]*l,C=u[v*2+1]*c,w=u[S*2]*l,b=u[S*2+1]*c,E=u[x*2]*l,A=u[x*2+1]*c,m.push(new p(T,C,w,b,E,A));return m};r.exports=h},3635:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(66349),p=function(h,u,d,l){l===void 0&&(l=d);var c=h,m=u,f=h,v=u-l,S=h+d,x=u;return new a(c,m,f,v,S,x)};r.exports=p},1882:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56595),p=n(9640),h=function(u,d,l,c){c===void 0&&(c=a);var m=c(u),f=d-m.x,v=l-m.y;return p(u,f,v)};r.exports=h},56595:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u){return u===void 0&&(u=new a),u.x=(h.x1+h.x2+h.x3)/3,u.y=(h.y1+h.y2+h.y3)/3,u};r.exports=p},91835:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736);function p(u,d,l,c){return u*c-d*l}var h=function(u,d){d===void 0&&(d=new a);var l=u.x3,c=u.y3,m=u.x1-l,f=u.y1-c,v=u.x2-l,S=u.y2-c,x=2*p(m,f,v,S),T=p(f,m*m+f*f,S,v*v+S*S),C=p(m,m*m+f*f,v,v*v+S*S);return d.x=l-T/x,d.y=c+C/x,d};r.exports=h},97073:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(26673),p=function(h,u){u===void 0&&(u=new a);var d=h.x1,l=h.y1,c=h.x2,m=h.y2,f=h.x3,v=h.y3,S=c-d,x=m-l,T=f-d,C=v-l,w=S*(d+c)+x*(l+m),b=T*(d+f)+C*(l+v),E=2*(S*(v-m)-x*(f-c)),A,I;if(Math.abs(E)<1e-6){var R=Math.min(d,c,f),N=Math.min(l,m,v);A=(Math.max(d,c,f)-R)*.5,I=(Math.max(l,m,v)-N)*.5,u.x=R+A,u.y=N+I,u.radius=Math.sqrt(A*A+I*I)}else u.x=(C*w-x*b)/E,u.y=(S*b-T*w)/E,A=u.x-d,I=u.y-l,u.radius=Math.sqrt(A*A+I*I);return u};r.exports=p},75974:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(66349),p=function(h){return new a(h.x1,h.y1,h.x2,h.y2,h.x3,h.y3)};r.exports=p},60689:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=n.x3-n.x1,u=n.y3-n.y1,d=n.x2-n.x1,l=n.y2-n.y1,c=a-n.x1,m=p-n.y1,f=h*h+u*u,v=h*d+u*l,S=h*c+u*m,x=d*d+l*l,T=d*c+l*m,C=f*x-v*v,w=C===0?0:1/C,b=(x*S-v*T)*w,E=(f*T-v*S)*w;return b>=0&&E>=0&&b+E<1};r.exports=g},86875:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){p===void 0&&(p=!1),h===void 0&&(h=[]);for(var u=n.x3-n.x1,d=n.y3-n.y1,l=n.x2-n.x1,c=n.y2-n.y1,m=u*u+d*d,f=u*l+d*c,v=l*l+c*c,S=m*v-f*f,x=S===0?0:1/S,T,C,w,b,E,A,I=n.x1,R=n.y1,N=0;N<a.length&&(w=a[N].x-I,b=a[N].y-R,E=u*w+d*b,A=l*w+c*b,T=(v*E-f*A)*x,C=(m*A-f*E)*x,!(T>=0&&C>=0&&T+C<1&&(h.push({x:a[N].x,y:a[N].y}),p)));N++);return h};r.exports=g},51532:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(60689),p=function(h,u){return a(h,u.x,u.y)};r.exports=p},42538:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a.setTo(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)};r.exports=g},18680:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a===void 0&&(a=[]),a.push({x:n.x1,y:n.y1}),a.push({x:n.x2,y:n.y2}),a.push({x:n.x3,y:n.y3}),a};r.exports=g},29977:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.x1===a.x1&&n.y1===a.y1&&n.x2===a.x2&&n.y2===a.y2&&n.x3===a.x3&&n.y3===a.y3};r.exports=g},56088:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=n(16028),h=function(u,d,l){l===void 0&&(l=new a);var c=u.getLineA(),m=u.getLineB(),f=u.getLineC();if(d<=0||d>=1)return l.x=c.x1,l.y=c.y1,l;var v=p(c),S=p(m),x=p(f),T=v+S+x,C=T*d,w=0;return C<v?(w=C/v,l.x=c.x1+(c.x2-c.x1)*w,l.y=c.y1+(c.y2-c.y1)*w):C>v+S?(C-=v+S,w=C/x,l.x=f.x1+(f.x2-f.x1)*w,l.y=f.y1+(f.y2-f.y1)*w):(C-=v,w=C/S,l.x=m.x1+(m.x2-m.x1)*w,l.y=m.y1+(m.y2-m.y1)*w),l};r.exports=h},24402:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16028),p=n(79967),h=function(u,d,l,c){c===void 0&&(c=[]);var m=u.getLineA(),f=u.getLineB(),v=u.getLineC(),S=a(m),x=a(f),T=a(v),C=S+x+T;!d&&l>0&&(d=C/l);for(var w=0;w<d;w++){var b=C*(w/d),E=0,A=new p;b<S?(E=b/S,A.x=m.x1+(m.x2-m.x1)*E,A.y=m.y1+(m.y2-m.y1)*E):b>S+x?(b-=S+x,E=b/T,A.x=v.x1+(v.x2-v.x1)*E,A.y=v.y1+(v.y2-v.y1)*E):(b-=S,E=b/x,A.x=f.x1+(f.x2-f.x1)*E,A.y=f.y1+(f.y2-f.y1)*E),c.push(A)}return c};r.exports=h},83648:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967);function p(u,d,l,c){var m=u-l,f=d-c,v=m*m+f*f;return Math.sqrt(v)}var h=function(u,d){d===void 0&&(d=new a);var l=u.x1,c=u.y1,m=u.x2,f=u.y2,v=u.x3,S=u.y3,x=p(v,S,m,f),T=p(l,c,v,S),C=p(m,f,l,c),w=x+T+C;return d.x=(l*x+m*T+v*C)/w,d.y=(c*x+f*T+S*C)/w,d};r.exports=h},9640:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n.x1+=a,n.y1+=p,n.x2+=a,n.y2+=p,n.x3+=a,n.y3+=p,n};r.exports=g},95290:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16028),p=function(h){var u=h.getLineA(),d=h.getLineB(),l=h.getLineC();return a(u)+a(d)+a(l)};r.exports=p},99761:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(79967),p=function(h,u){u===void 0&&(u=new a);var d=h.x2-h.x1,l=h.y2-h.y1,c=h.x3-h.x1,m=h.y3-h.y1,f=Math.random(),v=Math.random();return f+v>=1&&(f=1-f,v=1-v),u.x=h.x1+(d*f+c*v),u.y=h.y1+(l*f+m*v),u};r.exports=p},21934:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(19211),p=n(83648),h=function(u,d){var l=p(u);return a(u,l.x,l.y,d)};r.exports=h},68454:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(19211),p=function(h,u,d){return a(h,u.x,u.y,d)};r.exports=p},19211:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=Math.cos(h),d=Math.sin(h),l=n.x1-a,c=n.y1-p;return n.x1=l*u-c*d+a,n.y1=l*d+c*u+p,l=n.x2-a,c=n.y2-p,n.x2=l*u-c*d+a,n.y2=l*d+c*u+p,l=n.x3-a,c=n.y3-p,n.x3=l*u-c*d+a,n.y3=l*d+c*u+p,n};r.exports=g},66349:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(60689),h=n(56088),u=n(24402),d=n(52394),l=n(88829),c=n(99761),m=new a({initialize:function(v,S,x,T,C,w){v===void 0&&(v=0),S===void 0&&(S=0),x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=0),w===void 0&&(w=0),this.type=d.TRIANGLE,this.x1=v,this.y1=S,this.x2=x,this.y2=T,this.x3=C,this.y3=w},contains:function(f,v){return p(this,f,v)},getPoint:function(f,v){return h(this,f,v)},getPoints:function(f,v,S){return u(this,f,v,S)},getRandomPoint:function(f){return c(this,f)},setTo:function(f,v,S,x,T,C){return f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=0),x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=0),this.x1=f,this.y1=v,this.x2=S,this.y2=x,this.x3=T,this.y3=C,this},getLineA:function(f){return f===void 0&&(f=new l),f.setTo(this.x1,this.y1,this.x2,this.y2),f},getLineB:function(f){return f===void 0&&(f=new l),f.setTo(this.x2,this.y2,this.x3,this.y3),f},getLineC:function(f){return f===void 0&&(f=new l),f.setTo(this.x3,this.y3,this.x1,this.y1),f},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(f){var v=0;this.x1<=this.x2&&this.x1<=this.x3?v=this.x1-f:this.x2<=this.x1&&this.x2<=this.x3?v=this.x2-f:v=this.x3-f,this.x1-=v,this.x2-=v,this.x3-=v}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(f){var v=0;this.x1>=this.x2&&this.x1>=this.x3?v=this.x1-f:this.x2>=this.x1&&this.x2>=this.x3?v=this.x2-f:v=this.x3-f,this.x1-=v,this.x2-=v,this.x3-=v}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(f){var v=0;this.y1<=this.y2&&this.y1<=this.y3?v=this.y1-f:this.y2<=this.y1&&this.y2<=this.y3?v=this.y2-f:v=this.y3-f,this.y1-=v,this.y2-=v,this.y3-=v}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(f){var v=0;this.y1>=this.y2&&this.y1>=this.y3?v=this.y1-f:this.y2>=this.y1&&this.y2>=this.y3?v=this.y2-f:v=this.y3-f,this.y1-=v,this.y2-=v,this.y3-=v}}});r.exports=m},87619:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(66349);a.Area=n(19108),a.BuildEquilateral=n(41199),a.BuildFromPolygon=n(88730),a.BuildRight=n(3635),a.CenterOn=n(1882),a.Centroid=n(56595),a.CircumCenter=n(91835),a.CircumCircle=n(97073),a.Clone=n(75974),a.Contains=n(60689),a.ContainsArray=n(86875),a.ContainsPoint=n(51532),a.CopyFrom=n(42538),a.Decompose=n(18680),a.Equals=n(29977),a.GetPoint=n(56088),a.GetPoints=n(24402),a.InCenter=n(83648),a.Perimeter=n(95290),a.Offset=n(9640),a.Random=n(99761),a.Rotate=n(21934),a.RotateAroundPoint=n(68454),a.RotateAroundXY=n(19211),r.exports=a},27395:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return{gameObject:n,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:a,hitAreaCallback:p,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};r.exports=g},18104:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return function(p,h,u,d){var l=n.getPixelAlpha(h,u,d.texture.key,d.frame.name);return l&&l>=a}};r.exports=g},69898:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72687),h=n(6659),u=n(33963),d=n(97081),l=n(71064),c=n(7905),m=n(40398),f=n(37579),v=n(69360),S=n(64462),x=new a({initialize:function(C,w){this.game=C,this.scaleManager,this.canvas,this.config=w,this.enabled=!0,this.events=new h,this.isOver=!0,this.defaultCursor="",this.keyboard=w.inputKeyboard?new l(this):null,this.mouse=w.inputMouse?new c(this):null,this.touch=w.inputTouch?new f(this):null,this.pointers=[],this.pointersTotal=w.inputActivePointers,w.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var b=0;b<=this.pointersTotal;b++){var E=new m(this,b);E.smoothFactor=w.inputSmoothFactor,this.pointers.push(E)}this.mousePointer=w.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new v,this._tempMatrix2=new v,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],C.events.once(d.BOOT,this.boot,this)},boot:function(){var T=this.game,C=T.events;this.canvas=T.canvas,this.scaleManager=T.scale,this.events.emit(u.MANAGER_BOOT),C.on(d.PRE_RENDER,this.preRender,this),C.once(d.DESTROY,this.destroy,this)},setCanvasOver:function(T){this.isOver=!0,this.events.emit(u.GAME_OVER,T)},setCanvasOut:function(T){this.isOver=!1,this.events.emit(u.GAME_OUT,T)},preRender:function(){var T=this.game.loop.now,C=this.game.loop.delta,w=this.game.scene.getScenes(!0,!0);this.time=T,this.events.emit(u.MANAGER_UPDATE);for(var b=0;b<w.length;b++){var E=w[b];if(E.sys.input&&E.sys.input.updatePoll(T,C)&&this.globalTopOnly)return}},setDefaultCursor:function(T){this.defaultCursor=T,this.canvas.style.cursor!==T&&(this.canvas.style.cursor=T)},setCursor:function(T){T.cursor&&(this.canvas.style.cursor=T.cursor)},resetCursor:function(T){T.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(T){T===void 0&&(T=1);var C=[];this.pointersTotal+T>10&&(T=10-this.pointersTotal);for(var w=0;w<T;w++){var b=this.pointers.length,E=new m(this,b);E.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(E),this.pointersTotal++,C.push(E)}return C},updateInputPlugins:function(T,C){var w=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var b=0;b<w.length;b++){var E=w[b];if(E.sys.input){var A=E.sys.input.update(T,C);if(A&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(T){for(var C=this.pointers,w=[],b=0;b<T.changedTouches.length;b++)for(var E=T.changedTouches[b],A=1;A<this.pointersTotal;A++){var I=C[A];if(!I.active){I.touchstart(E,T),this.activePointer=I,w.push(I);break}}this.updateInputPlugins(p.TOUCH_START,w)},onTouchMove:function(T){for(var C=this.pointers,w=[],b=0;b<T.changedTouches.length;b++)for(var E=T.changedTouches[b],A=1;A<this.pointersTotal;A++){var I=C[A];if(I.active&&I.identifier===E.identifier){var R=document.elementFromPoint(E.pageX,E.pageY),N=R===this.canvas;!this.isOver&&N?this.setCanvasOver(T):this.isOver&&!N&&this.setCanvasOut(T),this.isOver&&(I.touchmove(E,T),this.activePointer=I,w.push(I));break}}this.updateInputPlugins(p.TOUCH_MOVE,w)},onTouchEnd:function(T){for(var C=this.pointers,w=[],b=0;b<T.changedTouches.length;b++)for(var E=T.changedTouches[b],A=1;A<this.pointersTotal;A++){var I=C[A];if(I.active&&I.identifier===E.identifier){I.touchend(E,T),w.push(I);break}}this.updateInputPlugins(p.TOUCH_END,w)},onTouchCancel:function(T){for(var C=this.pointers,w=[],b=0;b<T.changedTouches.length;b++)for(var E=T.changedTouches[b],A=1;A<this.pointersTotal;A++){var I=C[A];if(I.active&&I.identifier===E.identifier){I.touchcancel(E,T),w.push(I);break}}this.updateInputPlugins(p.TOUCH_CANCEL,w)},onMouseDown:function(T){var C=this.mousePointer;C.down(T),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(p.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(T){var C=this.mousePointer;C.move(T),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(p.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(T){var C=this.mousePointer;C.up(T),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(p.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(T){var C=this.mousePointer;C.wheel(T),this.activePointer=C,this.updateInputPlugins(p.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(T){var C=this.mouse.locked;this.mousePointer.locked=C,this.events.emit(u.POINTERLOCK_CHANGE,T,C)},inputCandidate:function(T,C){var w=T.input;if(!w||!w.enabled||!T.willRender(C))return!1;var b=!0,E=T.parentContainer;if(E)do{if(!E.willRender(C)){b=!1;break}E=E.parentContainer}while(E);return b},hitTest:function(T,C,w,b){b===void 0&&(b=this._tempHitTest);var E=this._tempPoint,A=w.scrollX,I=w.scrollY;b.length=0;var R=T.x,N=T.y;w.getWorldPoint(R,N,E),T.worldX=E.x,T.worldY=E.y;for(var F={x:0,y:0},P=this._tempMatrix,D=this._tempMatrix2,M=0;M<C.length;M++){var L=C[M];if(this.inputCandidate(L,w)){var k=E.x+A*L.scrollFactorX-A,V=E.y+I*L.scrollFactorY-I;L.parentContainer?(L.getWorldTransformMatrix(P,D),P.applyInverse(k,V,F)):S(k,V,L.x,L.y,L.rotation,L.scaleX,L.scaleY,F),this.pointWithinHitArea(L,F.x,F.y)&&b.push(L)}}return b},pointWithinHitArea:function(T,C,w){C+=T.displayOriginX,w+=T.displayOriginY;var b=T.input;return b&&b.hitAreaCallback(b.hitArea,C,w,T)?(b.localX=C,b.localY=w,!0):!1},pointWithinInteractiveObject:function(T,C,w){return T.hitArea?(C+=T.gameObject.displayOriginX,w+=T.gameObject.displayOriginY,T.localX=C,T.localY=w,T.hitAreaCallback(T.hitArea,C,w,T)):!1},transformPointer:function(T,C,w,b){var E=T.position,A=T.prevPosition;A.x=E.x,A.y=E.y;var I=this.scaleManager.transformX(C),R=this.scaleManager.transformY(w),N=T.smoothFactor;!b||N===0?(E.x=I,E.y=R):(E.x=I*N+A.x*(1-N),E.y=R*N+A.y*(1-N))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(d.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var T=0;T<this.pointers.length;T++)this.pointers[T].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});r.exports=x},12499:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(26673),p=n(65650),h=n(56694),u=n(72687),d=n(27395),l=n(18104),c=n(53996),m=n(95669),f=n(72313),v=n(33963),S=n(6659),x=n(72632),T=n(52394),C=n(63399),w=n(42911),b=n(91963),E=n(74118),A=n(94287),I=n(7599),R=n(66349),N=n(60689),F=new h({Extends:S,initialize:function(D){S.call(this),this.scene=D,this.systems=D.sys,this.settings=D.sys.settings,this.manager=D.sys.game.input,this.pluginEvents=new S,this.enabled=!0,this.displayList,this.cameras,C.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var M={cancelled:!1};this._eventContainer={stopPropagation:function(){M.cancelled=!0}},this._eventData=M,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,D.sys.events.once(I.BOOT,this.boot,this),D.sys.events.on(I.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(I.DESTROY,this.destroy,this),this.pluginEvents.emit(v.BOOT)},start:function(){var P=this.systems.events;P.on(I.TRANSITION_START,this.transitionIn,this),P.on(I.TRANSITION_OUT,this.transitionOut,this),P.on(I.TRANSITION_COMPLETE,this.transitionComplete,this),P.on(I.PRE_UPDATE,this.preUpdate,this),P.once(I.SHUTDOWN,this.shutdown,this),this.manager.events.on(v.GAME_OUT,this.onGameOut,this),this.manager.events.on(v.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(v.START)},onGameOver:function(P){this.isActive()&&this.emit(v.GAME_OVER,P.timeStamp,P)},onGameOut:function(P){this.isActive()&&this.emit(v.GAME_OUT,P.timeStamp,P)},preUpdate:function(){this.pluginEvents.emit(v.PRE_UPDATE);var P=this._pendingRemoval,D=this._pendingInsertion,M=P.length,L=D.length;if(!(M===0&&L===0)){for(var k=this._list,V=0;V<M;V++){var W=P[V],K=k.indexOf(W);K>-1&&(k.splice(K,1),this.clear(W,!0))}this._pendingRemoval.length=0,this._list=k.concat(D.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(P,D){if(!this.isActive())return!1;if(this.pluginEvents.emit(v.UPDATE,P,D),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var M,L=this.manager,k=L.pointers,V=L.pointersTotal;for(M=0;M<V;M++)k[M].updateMotion();if(this._list.length===0)return!1;var W=this.pollRate;if(W===-1)return!1;if(W>0)if(this._pollTimer-=D,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var K=!1;for(M=0;M<V;M++){var B=0,G=k[M];this._tempZones=[],this._temp=this.hitTestPointer(G),this.sortGameObjects(this._temp,G),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),B+=this.processOverOutEvents(G),this.getDragState(G)===2&&this.processDragThresholdEvent(G,P),B>0&&(K=!0)}return K},update:function(P,D){if(!this.isActive())return!1;for(var M=D.length,L=!1,k=0;k<M;k++){var V=0,W=D[k];switch(this._tempZones=[],this._temp=this.hitTestPointer(W),this.sortGameObjects(this._temp,W),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),P){case u.MOUSE_DOWN:V+=this.processDragDownEvent(W),V+=this.processDownEvents(W),V+=this.processOverOutEvents(W);break;case u.MOUSE_UP:V+=this.processDragUpEvent(W),V+=this.processUpEvents(W),V+=this.processOverOutEvents(W);break;case u.TOUCH_START:V+=this.processDragDownEvent(W),V+=this.processDownEvents(W),V+=this.processOverEvents(W);break;case u.TOUCH_END:case u.TOUCH_CANCEL:V+=this.processDragUpEvent(W),V+=this.processUpEvents(W),V+=this.processOutEvents(W);break;case u.MOUSE_MOVE:case u.TOUCH_MOVE:V+=this.processDragMoveEvent(W),V+=this.processMoveEvents(W),V+=this.processOverOutEvents(W);break;case u.MOUSE_WHEEL:V+=this.processWheelEvent(W);break}V>0&&(L=!0)}return this._updatedThisFrame=!0,L},clear:function(P,D){D===void 0&&(D=!1),this.disable(P);var M=P.input;M&&(this.removeDebug(P),M.gameObject=void 0,M.target=void 0,M.hitArea=void 0,M.hitAreaCallback=void 0,M.callbackContext=void 0,P.input=null),D||this.queueForRemoval(P);var L=this._draggable.indexOf(P);return L>-1&&this._draggable.splice(L,1),P},disable:function(P){var D=P.input;D&&(D.enabled=!1,D.dragState=0);var M=this._temp,L=this._drag,k=this._over,V=this.manager,W=M.indexOf(P);W>-1&&M.splice(W,1);for(var K=0;K<V.pointersTotal;K++)W=L[K].indexOf(P),W>-1&&L[K].splice(W,1),W=k[K].indexOf(P),W>-1&&(k[K].splice(W,1),V.resetCursor(D));return this},enable:function(P,D,M,L){return L===void 0&&(L=!1),P.input?P.input.enabled=!0:this.setHitArea(P,D,M),P.input&&L&&!P.input.dropZone&&(P.input.dropZone=L),this},hitTestPointer:function(P){for(var D=this.cameras.getCamerasBelowPointer(P),M=0;M<D.length;M++){for(var L=D[M],k=this.manager.hitTest(P,this._list,L),V=0;V<k.length;V++){var W=k[V];W.input.dropZone&&this._tempZones.push(W)}if(k.length>0)return P.camera=L,k}return P.camera=D[0],[]},processDownEvents:function(P){var D=0,M=this._temp,L=this._eventData,k=this._eventContainer;L.cancelled=!1;for(var V=!1,W=0;W<M.length;W++){var K=M[W];if(!(!K.input||!K.input.enabled)){if(D++,K.emit(v.GAMEOBJECT_POINTER_DOWN,P,K.input.localX,K.input.localY,k),L.cancelled||!K.input||!K.input.enabled){V=!0;break}if(this.emit(v.GAMEOBJECT_DOWN,P,K,k),L.cancelled||!K.input){V=!0;break}}}return!V&&this.manager&&(P.downElement===this.manager.game.canvas?this.emit(v.POINTER_DOWN,P,M):this.emit(v.POINTER_DOWN_OUTSIDE,P)),D},getDragState:function(P){return this._dragState[P.id]},setDragState:function(P,D){this._dragState[P.id]=D},processDragThresholdEvent:function(P,D){var M=!1,L=this.dragTimeThreshold,k=this.dragDistanceThreshold;if((k>0&&c(P.x,P.y,P.downX,P.downY)>=k||L>0&&D>=P.downTime+L)&&(M=!0),M)return this.setDragState(P,3),this.processDragStartList(P)},processDragStartList:function(P){if(this.getDragState(P)!==3)return 0;for(var D=this._drag[P.id],M=0;M<D.length;M++){var L=D[M],k=L.input;k.dragState=2,k.dragStartX=L.x,k.dragStartY=L.y,k.dragStartXGlobal=P.worldX,k.dragStartYGlobal=P.worldY,k.dragX=k.dragStartXGlobal-k.dragStartX,k.dragY=k.dragStartYGlobal-k.dragStartY,L.emit(v.GAMEOBJECT_DRAG_START,P,k.dragX,k.dragY),this.emit(v.DRAG_START,P,L)}return this.setDragState(P,4),D.length},processDragDownEvent:function(P){var D=this._temp;if(this._draggable.length===0||D.length===0||!P.primaryDown||this.getDragState(P)!==0)return 0;this.setDragState(P,1);for(var M=[],L=0;L<D.length;L++){var k=D[L];k.input.draggable&&k.input.dragState===0&&M.push(k)}return M.length===0?(this.setDragState(P,0),0):(M.length>1&&(this.sortGameObjects(M,P),this.topOnly&&M.splice(1)),this._drag[P.id]=M,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(P,3),this.processDragStartList(P)):(this.setDragState(P,2),0))},processDragMoveEvent:function(P){if(this.getDragState(P)===2&&this.processDragThresholdEvent(P,this.manager.game.loop.now),this.getDragState(P)!==4)return 0;for(var D=this._tempZones,M=this._drag[P.id],L=0;L<M.length;L++){var k=M[L],V=k.input,W=V.target;if(W){var K=D.indexOf(W);K===0?(k.emit(v.GAMEOBJECT_DRAG_OVER,P,W),this.emit(v.DRAG_OVER,P,k,W)):K>0?(k.emit(v.GAMEOBJECT_DRAG_LEAVE,P,W),this.emit(v.DRAG_LEAVE,P,k,W),V.target=D[0],W=V.target,k.emit(v.GAMEOBJECT_DRAG_ENTER,P,W),this.emit(v.DRAG_ENTER,P,k,W)):(k.emit(v.GAMEOBJECT_DRAG_LEAVE,P,W),this.emit(v.DRAG_LEAVE,P,k,W),D[0]?(V.target=D[0],W=V.target,k.emit(v.GAMEOBJECT_DRAG_ENTER,P,W),this.emit(v.DRAG_ENTER,P,k,W)):V.target=null)}else!W&&D[0]&&(V.target=D[0],W=V.target,k.emit(v.GAMEOBJECT_DRAG_ENTER,P,W),this.emit(v.DRAG_ENTER,P,k,W));var B,G;if(!k.parentContainer)B=P.worldX-V.dragX,G=P.worldY-V.dragY;else{var O=P.worldX-V.dragStartXGlobal,$=P.worldY-V.dragStartYGlobal,z=k.getParentRotation(),X=O*Math.cos(z)+$*Math.sin(z),Y=$*Math.cos(z)-O*Math.sin(z);X*=1/k.parentContainer.scaleX,Y*=1/k.parentContainer.scaleY,B=X+V.dragStartX,G=Y+V.dragStartY}k.emit(v.GAMEOBJECT_DRAG,P,B,G),this.emit(v.DRAG,P,k,B,G)}return M.length},processDragUpEvent:function(P){for(var D=this._drag[P.id],M=0;M<D.length;M++){var L=D[M],k=L.input;if(k&&k.dragState===2){k.dragState=0,k.dragX=k.localX-L.displayOriginX,k.dragY=k.localY-L.displayOriginY;var V=!1,W=k.target;W&&(L.emit(v.GAMEOBJECT_DROP,P,W),this.emit(v.DROP,P,L,W),k.target=null,V=!0),L.input&&L.input.enabled&&(L.emit(v.GAMEOBJECT_DRAG_END,P,k.dragX,k.dragY,V),this.emit(v.DRAG_END,P,L,V))}}return this.setDragState(P,0),D.splice(0),0},processMoveEvents:function(P){var D=0,M=this._temp,L=this._eventData,k=this._eventContainer;L.cancelled=!1;for(var V=!1,W=0;W<M.length;W++){var K=M[W];if(!(!K.input||!K.input.enabled)){if(D++,K.emit(v.GAMEOBJECT_POINTER_MOVE,P,K.input.localX,K.input.localY,k),L.cancelled||!K.input||!K.input.enabled){V=!0;break}if(this.emit(v.GAMEOBJECT_MOVE,P,K,k),L.cancelled||!K.input||!K.input.enabled){V=!0;break}if(this.topOnly)break}}return V||this.emit(v.POINTER_MOVE,P,M),D},processWheelEvent:function(P){var D=0,M=this._temp,L=this._eventData,k=this._eventContainer;L.cancelled=!1;for(var V=!1,W=P.deltaX,K=P.deltaY,B=P.deltaZ,G=0;G<M.length;G++){var O=M[G];if(!(!O.input||!O.input.enabled)){if(D++,O.emit(v.GAMEOBJECT_POINTER_WHEEL,P,W,K,B,k),L.cancelled||!O.input||!O.input.enabled){V=!0;break}if(this.emit(v.GAMEOBJECT_WHEEL,P,O,W,K,B,k),L.cancelled||!O.input||!O.input.enabled){V=!0;break}}}return V||this.emit(v.POINTER_WHEEL,P,M,W,K,B),D},processOverEvents:function(P){var D=this._temp,M=0,L=D.length,k=[];if(L>0){var V=this.manager,W=this._eventData,K=this._eventContainer;W.cancelled=!1;for(var B=!1,G=0;G<L;G++){var O=D[G];if(!(!O.input||!O.input.enabled)){if(k.push(O),V.setCursor(O.input),O.emit(v.GAMEOBJECT_POINTER_OVER,P,O.input.localX,O.input.localY,K),M++,W.cancelled||!O.input||!O.input.enabled){B=!0;break}if(this.emit(v.GAMEOBJECT_OVER,P,O,K),W.cancelled||!O.input||!O.input.enabled){B=!0;break}}}B||this.emit(v.POINTER_OVER,P,k)}return this._over[P.id]=k,M},processOutEvents:function(P){var D=this._over[P.id],M=0,L=D.length;if(L>0){var k=this.manager,V=this._eventData,W=this._eventContainer;V.cancelled=!1;var K=!1;this.sortGameObjects(D,P);for(var B=0;B<L;B++){var G=D[B];if(G=D[B],!(!G.input||!G.input.enabled)){if(k.resetCursor(G.input),G.emit(v.GAMEOBJECT_POINTER_OUT,P,W),M++,V.cancelled||!G.input||!G.input.enabled){K=!0;break}if(this.emit(v.GAMEOBJECT_OUT,P,G,W),V.cancelled||!G.input||!G.input.enabled){K=!0;break}K||this.emit(v.POINTER_OUT,P,D)}}this._over[P.id]=[]}return M},processOverOutEvents:function(P){var D=this._temp,M,L,k=[],V=[],W=[],K=this._over[P.id],B=this._drag[P.id],G=this.manager;for(M=0;M<K.length;M++)L=K[M],D.indexOf(L)===-1&&B.indexOf(L)===-1?k.push(L):W.push(L);for(M=0;M<D.length;M++)L=D[M],K.indexOf(L)===-1&&V.push(L);var O=k.length,$=0,z=this._eventData,X=this._eventContainer;z.cancelled=!1;var Y=!1;if(O>0){for(this.sortGameObjects(k,P),M=0;M<O;M++)if(L=k[M],!(!L.input||!L.input.enabled)){if(G.resetCursor(L.input),L.emit(v.GAMEOBJECT_POINTER_OUT,P,X),$++,z.cancelled||!L.input||!L.input.enabled){Y=!0;break}if(this.emit(v.GAMEOBJECT_OUT,P,L,X),z.cancelled||!L.input||!L.input.enabled){Y=!0;break}}Y||this.emit(v.POINTER_OUT,P,k)}if(O=V.length,z.cancelled=!1,Y=!1,O>0){for(this.sortGameObjects(V,P),M=0;M<O;M++)if(L=V[M],!(!L.input||!L.input.enabled)){if(G.setCursor(L.input),L.emit(v.GAMEOBJECT_POINTER_OVER,P,L.input.localX,L.input.localY,X),$++,z.cancelled||!L.input||!L.input.enabled){Y=!0;break}if(this.emit(v.GAMEOBJECT_OVER,P,L,X),z.cancelled||!L.input||!L.input.enabled){Y=!0;break}}Y||this.emit(v.POINTER_OVER,P,V)}return K=W.concat(V),this._over[P.id]=this.sortGameObjects(K,P),$},processUpEvents:function(P){var D=this._temp,M=this._eventData,L=this._eventContainer;M.cancelled=!1;for(var k=!1,V=0;V<D.length;V++){var W=D[V];if(!(!W.input||!W.input.enabled)){if(W.emit(v.GAMEOBJECT_POINTER_UP,P,W.input.localX,W.input.localY,L),M.cancelled||!W.input||!W.input.enabled){k=!0;break}if(this.emit(v.GAMEOBJECT_UP,P,W,L),M.cancelled||!W.input||!W.input.enabled){k=!0;break}}}return!k&&this.manager&&(P.upElement===this.manager.game.canvas?this.emit(v.POINTER_UP,P,D):this.emit(v.POINTER_UP_OUTSIDE,P)),D.length},queueForInsertion:function(P){return this._pendingInsertion.indexOf(P)===-1&&this._list.indexOf(P)===-1&&this._pendingInsertion.push(P),this},queueForRemoval:function(P){return this._pendingRemoval.push(P),this},setDraggable:function(P,D){D===void 0&&(D=!0),Array.isArray(P)||(P=[P]);for(var M=0;M<P.length;M++){var L=P[M];L.input.draggable=D;var k=this._draggable.indexOf(L);D&&k===-1?this._draggable.push(L):!D&&k>-1&&this._draggable.splice(k,1)}return this},makePixelPerfect:function(P){P===void 0&&(P=1);var D=this.systems.textures;return l(D,P)},setHitArea:function(P,D,M){if(D===void 0)return this.setHitAreaFromTexture(P);Array.isArray(P)||(P=[P]);var L=!1,k=!1,V=!1,W=!1,K=!1,B=!0;if(w(D)){var G=D;D=x(G,"hitArea",null),M=x(G,"hitAreaCallback",null),L=x(G,"draggable",!1),k=x(G,"dropZone",!1),V=x(G,"cursor",!1),W=x(G,"useHandCursor",!1),K=x(G,"pixelPerfect",!1);var O=x(G,"alphaTolerance",1);K&&(D={},M=this.makePixelPerfect(O)),(!D||!M)&&(this.setHitAreaFromTexture(P),B=!1)}else typeof D=="function"&&!M&&(M=D,D={});for(var $=0;$<P.length;$++){var z=P[$];if(K&&z.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var X=z.input?z.input:d(z,D,M);X.customHitArea=B,X.dropZone=k,X.cursor=W?"pointer":V,z.input=X,L&&this.setDraggable(z),this.queueForInsertion(z)}return this},setHitAreaCircle:function(P,D,M,L,k){k===void 0&&(k=p);var V=new a(D,M,L);return this.setHitArea(P,V,k)},setHitAreaEllipse:function(P,D,M,L,k,V){V===void 0&&(V=f);var W=new m(D,M,L,k);return this.setHitArea(P,W,V)},setHitAreaFromTexture:function(P,D){D===void 0&&(D=A),Array.isArray(P)||(P=[P]);for(var M=0;M<P.length;M++){var L=P[M],k=L.frame,V=0,W=0;if(L.width?(V=L.width,W=L.height):k&&(V=k.realWidth,W=k.realHeight),L.type==="Container"&&(V===0||W===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}V!==0&&W!==0&&(L.input=d(L,new E(0,0,V,W),D),this.queueForInsertion(L))}return this},setHitAreaRectangle:function(P,D,M,L,k,V){V===void 0&&(V=A);var W=new E(D,M,L,k);return this.setHitArea(P,W,V)},setHitAreaTriangle:function(P,D,M,L,k,V,W,K){K===void 0&&(K=N);var B=new R(D,M,L,k,V,W);return this.setHitArea(P,B,K)},enableDebug:function(P,D){D===void 0&&(D=65280);var M=P.input;if(!M||!M.hitArea)return this;var L=M.hitArea,k=L.type,V=M.hitAreaDebug,W=this.systems.add,K=this.systems.updateList;V&&(K.remove(V),V.destroy(),V=null);var B=0,G=0;switch(k){case T.CIRCLE:V=W.arc(0,0,L.radius),B=L.x-L.radius,G=L.y-L.radius;break;case T.ELLIPSE:V=W.ellipse(0,0,L.width,L.height),B=L.x-L.width/2,G=L.y-L.height/2;break;case T.LINE:V=W.line(0,0,L.x1,L.y1,L.x2,L.y2);break;case T.POLYGON:V=W.polygon(0,0,L.points);break;case T.RECTANGLE:V=W.rectangle(0,0,L.width,L.height),B=L.x,G=L.y;break;case T.TRIANGLE:V=W.triangle(0,0,L.x1,L.y1,L.x2,L.y2,L.x3,L.y3);break}return V&&(V.isFilled=!1,V.strokeColor=D,V.preUpdate=function(){V.setStrokeStyle(1/P.scale,V.strokeColor),V.setDisplayOrigin(P.displayOriginX,P.displayOriginY);var O=P.x,$=P.y,z=P.rotation,X=P.scaleX,Y=P.scaleY;if(P.parentContainer){var Z=P.getWorldTransformMatrix();O=Z.tx,$=Z.ty,z=Z.rotation,X=Z.scaleX,Y=Z.scaleY}V.setRotation(z),V.setScale(X,Y),V.setPosition(O+B*X,$+G*Y),V.setScrollFactor(P.scrollFactorX,P.scrollFactorY),V.setDepth(P.depth)},K.add(V),M.hitAreaDebug=V),this},removeDebug:function(P){var D=P.input;if(D&&D.hitAreaDebug){var M=D.hitAreaDebug;this.systems.updateList.remove(M),M.destroy(),D.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(P){return this.pollRate=P,this._pollTimer=0,this},setGlobalTopOnly:function(P){return this.manager.globalTopOnly=P,this},setTopOnly:function(P){return this.topOnly=P,this},sortGameObjects:function(P,D){if(P.length<2||!D.camera)return P;var M=D.camera.renderList;return P.sort(function(L,k){var V=Math.max(M.indexOf(L),0),W=Math.max(M.indexOf(k),0);return W-V})},sortDropZones:function(P){return P.length<2?P:(this.scene.sys.depthSort(),P.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(P,D){if(!P.parentContainer&&!D.parentContainer)return this.displayList.getIndex(D)-this.displayList.getIndex(P);if(P.parentContainer===D.parentContainer)return D.parentContainer.getIndex(D)-P.parentContainer.getIndex(P);if(P.parentContainer===D)return-1;if(D.parentContainer===P)return 1;for(var M=P.getIndexList(),L=D.getIndexList(),k=Math.min(M.length,L.length),V=0;V<k;V++){var W=M[V],K=L[V];if(W!==K)return K-W}return L.length-M.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(P){return this.manager.addPointer(P)},setDefaultCursor:function(P){return this.manager.setDefaultCursor(P),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(v.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var P=0;P<10;P++)this._drag[P]=[],this._over[P]=[];this.removeAllListeners();var D=this.manager;D.canvas.style.cursor=D.defaultCursor;var M=this.systems.events;M.off(I.TRANSITION_START,this.transitionIn,this),M.off(I.TRANSITION_OUT,this.transitionOut,this),M.off(I.TRANSITION_COMPLETE,this.transitionComplete,this),M.off(I.PRE_UPDATE,this.preUpdate,this),D.events.off(v.GAME_OUT,this.onGameOut,this),D.events.off(v.GAME_OVER,this.onGameOver,this),M.off(I.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var P=this.manager.pointers,D=0;D<P.length;D++)P[D].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(v.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(I.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});b.register("InputPlugin",F,"input"),r.exports=F},63399:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(10850),p={},h={};h.register=function(u,d,l,c,m){p[u]={plugin:d,mapping:l,settingsKey:c,configKey:m}},h.getPlugin=function(u){return p[u]},h.install=function(u){var d=u.scene.sys,l=d.settings.input,c=d.game.config;for(var m in p){var f=p[m].plugin,v=p[m].mapping,S=p[m].settingsKey,x=p[m].configKey;a(l,S,c[x])&&(u[v]=new f(u))}},h.remove=function(u){p.hasOwnProperty(u)&&delete p[u]},r.exports=h},40398:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(90447),p=n(56694),h=n(53996),u=n(88456),d=n(44521),l=n(93736),c=n(36580),m=new p({initialize:function(v,S){this.manager=v,this.id=S,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new l,this.prevPosition=new l,this.midPoint=new l(-1,-1),this.velocity=new l,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=S===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(f){var v=f.getWorldPoint(this.x,this.y);return this.worldX=v.x,this.worldY=v.y,this},positionToCamera:function(f,v){return f.getWorldPoint(this.x,this.y,v)},updateMotion:function(){var f=this.position.x,v=this.position.y,S=this.midPoint.x,x=this.midPoint.y;if(!(f===S&&v===x)){var T=d(this.motionFactor,S,f),C=d(this.motionFactor,x,v);u(T,f,.1)&&(T=f),u(C,v,.1)&&(C=v),this.midPoint.set(T,C);var w=f-T,b=v-C;this.velocity.set(w,b),this.angle=a(T,C,f,v),this.distance=Math.sqrt(w*w+b*b)}},up:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.button=f.button,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),f.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=f.timeStamp,this.wasTouch=!1)},down:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.button=f.button,this.downElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),f.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),c.macOS&&f.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=f.timeStamp),this.wasTouch=!1},move:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.manager.transformPointer(this,f.pageX,f.pageY,!0),this.locked&&(this.movementX=f.movementX||f.mozMovementX||f.webkitMovementX||0,this.movementY=f.movementY||f.mozMovementY||f.webkitMovementY||0),this.moveTime=f.timeStamp,this.wasTouch=!1},wheel:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.deltaX=f.deltaX,this.deltaY=f.deltaY,this.deltaZ=f.deltaZ,this.wasTouch=!1},touchstart:function(f,v){f.pointerId&&(this.pointerId=f.pointerId),this.identifier=f.identifier,this.target=f.target,this.active=!0,this.buttons=1,this.event=v,this.downElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=v.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(f,v){this.event=v,this.manager.transformPointer(this,f.pageX,f.pageY,!0),this.moveTime=v.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(f,v){this.buttons=0,this.event=v,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(f,v){this.buttons=0,this.event=v,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?h(this.downX,this.downY,this.x,this.y):h(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(f,v){f===void 0&&(f=10),v===void 0&&(v=[]);for(var S=this.prevPosition.x,x=this.prevPosition.y,T=this.position.x,C=this.position.y,w=0;w<f;w++){var b=1/f*w;v[w]={x:d(b,S,T),y:d(b,x,C)}}return v},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(f){this.position.x=f}},y:{get:function(){return this.position.y},set:function(f){this.position.y=f}},time:{get:function(){return this.event?this.event.timeStamp:0}}});r.exports=m},72687:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};r.exports=g},14874:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"},54168:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},526:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragend"},81623:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragenter"},94472:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drag"},9304:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragleave"},34265:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragover"},50151:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragstart"},98134:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drop"},56773:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectdown"},45824:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragend"},39578:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragenter"},72072:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drag"},82569:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragleave"},70833:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragover"},81442:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragstart"},32936:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drop"},99658:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectmove"},60515:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectout"},55254:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectover"},34782:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerdown"},41769:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointermove"},65588:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerout"},61640:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerover"},49342:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerup"},82662:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="wheel"},13058:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectup"},52426:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameobjectwheel"},78072:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameout"},1545:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="gameover"},67137:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"},27678:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="process"},22257:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"},90379:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerlockchange"},88909:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerdown"},36548:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerdownoutside"},18483:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointermove"},22355:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerout"},7997:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerover"},66318:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerup"},94812:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pointerupoutside"},37310:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="wheel"},24196:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="preupdate"},27053:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="shutdown"},29413:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"},25165:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"},33963:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BOOT:n(14874),DESTROY:n(54168),DRAG_END:n(526),DRAG_ENTER:n(81623),DRAG:n(94472),DRAG_LEAVE:n(9304),DRAG_OVER:n(34265),DRAG_START:n(50151),DROP:n(98134),GAME_OUT:n(78072),GAME_OVER:n(1545),GAMEOBJECT_DOWN:n(56773),GAMEOBJECT_DRAG_END:n(45824),GAMEOBJECT_DRAG_ENTER:n(39578),GAMEOBJECT_DRAG:n(72072),GAMEOBJECT_DRAG_LEAVE:n(82569),GAMEOBJECT_DRAG_OVER:n(70833),GAMEOBJECT_DRAG_START:n(81442),GAMEOBJECT_DROP:n(32936),GAMEOBJECT_MOVE:n(99658),GAMEOBJECT_OUT:n(60515),GAMEOBJECT_OVER:n(55254),GAMEOBJECT_POINTER_DOWN:n(34782),GAMEOBJECT_POINTER_MOVE:n(41769),GAMEOBJECT_POINTER_OUT:n(65588),GAMEOBJECT_POINTER_OVER:n(61640),GAMEOBJECT_POINTER_UP:n(49342),GAMEOBJECT_POINTER_WHEEL:n(82662),GAMEOBJECT_UP:n(13058),GAMEOBJECT_WHEEL:n(52426),MANAGER_BOOT:n(67137),MANAGER_PROCESS:n(27678),MANAGER_UPDATE:n(22257),POINTER_DOWN:n(88909),POINTER_DOWN_OUTSIDE:n(36548),POINTER_MOVE:n(18483),POINTER_OUT:n(22355),POINTER_OVER:n(7997),POINTER_UP:n(66318),POINTER_UP_OUTSIDE:n(94812),POINTER_WHEEL:n(37310),POINTERLOCK_CHANGE:n(90379),PRE_UPDATE:n(24196),SHUTDOWN:n(27053),START:n(29413),UPDATE:n(25165)}},70848:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d){this.pad=u,this.events=u.events,this.index=d,this.value=0,this.threshold=.1},update:function(h){this.value=h},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});r.exports=p},21274:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(43200),h=new a({initialize:function(d,l){this.pad=d,this.events=d.manager,this.index=l,this.value=0,this.threshold=1,this.pressed=!1},update:function(u){this.value=u;var d=this.pad,l=this.index;u>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(p.BUTTON_DOWN,d,this,u),this.pad.emit(p.GAMEPAD_BUTTON_DOWN,l,u,this)):this.pressed&&(this.pressed=!1,this.events.emit(p.BUTTON_UP,d,this,u),this.pad.emit(p.GAMEPAD_BUTTON_UP,l,u,this))},destroy:function(){this.pad=null,this.events=null}});r.exports=h},75956:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(70848),p=n(21274),h=n(56694),u=n(6659),d=n(93736),l=new h({Extends:u,initialize:function(m,f){u.call(this),this.manager=m,this.pad=f,this.id=f.id,this.index=f.index;for(var v=[],S=0;S<f.buttons.length;S++)v.push(new p(this,S));this.buttons=v;var x=[];for(S=0;S<f.axes.length;S++)x.push(new a(this,S));this.axes=x,this.vibration=f.vibrationActuator;var T={value:0,pressed:!1};this._LCLeft=v[14]?v[14]:T,this._LCRight=v[15]?v[15]:T,this._LCTop=v[12]?v[12]:T,this._LCBottom=v[13]?v[13]:T,this._RCLeft=v[2]?v[2]:T,this._RCRight=v[1]?v[1]:T,this._RCTop=v[3]?v[3]:T,this._RCBottom=v[0]?v[0]:T,this._FBLeftTop=v[4]?v[4]:T,this._FBLeftBottom=v[6]?v[6]:T,this._FBRightTop=v[5]?v[5]:T,this._FBRightBottom=v[7]?v[7]:T;var C={value:0};this._HAxisLeft=x[0]?x[0]:C,this._VAxisLeft=x[1]?x[1]:C,this._HAxisRight=x[2]?x[2]:C,this._VAxisRight=x[3]?x[3]:C,this.leftStick=new d,this.rightStick=new d,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(c){return this.axes[c].getValue()},setAxisThreshold:function(c){for(var m=0;m<this.axes.length;m++)this.axes[m].threshold=c},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(c){return this.buttons[c].value},isButtonDown:function(c){return this.buttons[c].pressed},update:function(c){if(!(c.timestamp<this._created)){var m,f=this.buttons,v=c.buttons,S=f.length;for(m=0;m<S;m++)f[m].update(v[m].value);var x=this.axes,T=c.axes;for(S=x.length,m=0;m<S;m++)x[m].update(T[m]);S>=2&&(this.leftStick.set(x[0].getValue(),x[1].getValue()),S>=4&&this.rightStick.set(x[2].getValue(),x[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var c;for(c=0;c<this.buttons.length;c++)this.buttons[c].destroy();for(c=0;c<this.axes.length;c++)this.axes[c].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});r.exports=l},1379:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(6659),h=n(43200),u=n(75956),d=n(10850),l=n(63399),c=n(33963),m=new a({Extends:p,initialize:function(v){p.call(this),this.scene=v.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=v,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,v.pluginEvents.once(c.BOOT,this.boot,this),v.pluginEvents.on(c.START,this.start,this)},boot:function(){var f=this.scene.sys.game,v=this.settings.input,S=f.config;this.enabled=d(v,"gamepad",S.inputGamepad)&&f.device.input.gamepads,this.target=d(v,"gamepad.target",S.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(c.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(c.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var f=this,v=this.target,S=function(x){x.defaultPrevented||!f.isActive()||(f.refreshPads(),f.queue.push(x))};this.onGamepadHandler=S,v.addEventListener("gamepadconnected",S,!1),v.addEventListener("gamepaddisconnected",S,!1),this.sceneInputPlugin.pluginEvents.on(c.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(c.UPDATE,this.update);for(var f=0;f<this.gamepads.length;f++)this.gamepads[f].removeAllListeners()},disconnectAll:function(){for(var f=0;f<this.gamepads.length;f++)this.gamepads[f].pad.connected=!1},refreshPads:function(){var f=navigator.getGamepads();if(!f)this.disconnectAll();else for(var v=this.gamepads,S=0;S<f.length;S++){var x=f[S];if(x){var T=x.id,C=x.index,w=v[C];if(w)w.id!==T?(w.destroy(),v[C]=new u(this,x)):w.update(x);else{var b=new u(this,x);v[C]=b,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=b):this._pad3=b:this._pad2=b:this._pad1=b}}}},getAll:function(){for(var f=[],v=this.gamepads,S=0;S<v.length;S++)v[S]&&f.push(v[S]);return f},getPad:function(f){for(var v=this.gamepads,S=0;S<v.length;S++)if(v[S]&&v[S].index===f)return v[S]},update:function(){if(this.enabled){this.refreshPads();var f=this.queue.length;if(f!==0)for(var v=this.queue.splice(0,f),S=0;S<f;S++){var x=v[S],T=this.getPad(x.gamepad.index);x.type==="gamepadconnected"?this.emit(h.CONNECTED,T,x):x.type==="gamepaddisconnected"&&this.emit(h.DISCONNECTED,T,x)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var f=0;f<this.gamepads.length;f++)this.gamepads[f]&&this.gamepads[f].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});l.register("GamepadPlugin",m,"gamepad","gamepad","inputGamepad"),r.exports=m},33171:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},74982:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},43247:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},4898:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={DUALSHOCK_4:n(74982),SNES_USB:n(33171),XBOX_360:n(43247)}},17344:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="down"},36635:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="up"},85724:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="connected"},55832:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="disconnected"},772:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="down"},33608:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="up"},43200:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BUTTON_DOWN:n(17344),BUTTON_UP:n(36635),CONNECTED:n(85724),DISCONNECTED:n(55832),GAMEPAD_BUTTON_DOWN:n(772),GAMEPAD_BUTTON_UP:n(33608)}},92636:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Axis:n(70848),Button:n(21274),Events:n(43200),Gamepad:n(75956),GamepadPlugin:n(1379),Configs:n(4898)}},20873:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72687),p=n(98611),h={CreatePixelPerfectHandler:n(18104),CreateInteractiveObject:n(27395),Events:n(33963),Gamepad:n(92636),InputManager:n(69898),InputPlugin:n(12499),InputPluginCache:n(63399),Keyboard:n(28388),Mouse:n(11343),Pointer:n(40398),Touch:n(77423)};h=p(!1,h,a),r.exports=h},71064:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(66458),p=n(56694),h=n(97081),u=n(33963),d=n(11873),l=n(72283),c=new p({initialize:function(f){this.manager=f,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=l,this.onKeyUp=l,f.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var m=this.manager.config;this.enabled=m.inputKeyboard,this.target=m.inputKeyboardEventTarget,this.addCapture(m.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(h.POST_STEP,this.postUpdate,this)},startListeners:function(){var m=this;this.onKeyDown=function(v){if(!(v.defaultPrevented||!m.enabled||!m.manager)){m.queue.push(v),m.manager.events.emit(u.MANAGER_PROCESS);var S=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;m.preventDefault&&!S&&m.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}},this.onKeyUp=function(v){if(!(v.defaultPrevented||!m.enabled||!m.manager)){m.queue.push(v),m.manager.events.emit(u.MANAGER_PROCESS);var S=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;m.preventDefault&&!S&&m.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}};var f=this.target;f&&(f.addEventListener("keydown",this.onKeyDown,!1),f.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var m=this.target;m.removeEventListener("keydown",this.onKeyDown,!1),m.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(m){typeof m=="string"&&(m=m.split(",")),Array.isArray(m)||(m=[m]);for(var f=this.captures,v=0;v<m.length;v++){var S=m[v];typeof S=="string"&&(S=d[S.trim().toUpperCase()]),f.indexOf(S)===-1&&f.push(S)}this.preventDefault=f.length>0},removeCapture:function(m){typeof m=="string"&&(m=m.split(",")),Array.isArray(m)||(m=[m]);for(var f=this.captures,v=0;v<m.length;v++){var S=m[v];typeof S=="string"&&(S=d[S.toUpperCase()]),a(f,S)}this.preventDefault=f.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(h.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});r.exports=c},89666:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(6659),h=n(94030),u=n(97081),d=n(10850),l=n(33963),c=n(63399),m=n(50165),f=n(11873),v=n(95625),S=n(48044),x=n(7599),T=n(84314),C=new a({Extends:p,initialize:function(b){p.call(this),this.game=b.systems.game,this.scene=b.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=b,this.manager=b.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,b.pluginEvents.once(l.BOOT,this.boot,this),b.pluginEvents.on(l.START,this.start,this)},boot:function(){var w=this.settings.input;this.enabled=d(w,"keyboard",!0);var b=d(w,"keyboard.capture",null);b&&this.addCaptures(b),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(l.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this),this.game.events.on(u.BLUR,this.resetKeys,this),this.scene.sys.events.on(x.PAUSE,this.resetKeys,this),this.scene.sys.events.on(x.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(w){return this.manager.addCapture(w),this},removeCapture:function(w){return this.manager.removeCapture(w),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:f.UP,down:f.DOWN,left:f.LEFT,right:f.RIGHT,space:f.SPACE,shift:f.SHIFT})},addKeys:function(w,b,E){b===void 0&&(b=!0),E===void 0&&(E=!1);var A={};if(typeof w=="string"){w=w.split(",");for(var I=0;I<w.length;I++){var R=w[I].trim();R&&(A[R]=this.addKey(R,b,E))}}else for(var N in w)A[N]=this.addKey(w[N],b,E);return A},addKey:function(w,b,E){b===void 0&&(b=!0),E===void 0&&(E=!1);var A=this.keys;if(w instanceof m){var I=A.indexOf(w);return I>-1?A[I]=w:A[w.keyCode]=w,b&&this.addCapture(w.keyCode),w.setEmitOnRepeat(E),w}return typeof w=="string"&&(w=f[w.toUpperCase()]),A[w]||(A[w]=new m(this,w),b&&this.addCapture(w),A[w].setEmitOnRepeat(E)),A[w]},removeKey:function(w,b,E){b===void 0&&(b=!1),E===void 0&&(E=!1);var A=this.keys,I;if(w instanceof m){var R=A.indexOf(w);R>-1&&(I=this.keys[R],this.keys[R]=void 0)}else typeof w=="string"&&(w=f[w.toUpperCase()]);return A[w]&&(I=A[w],A[w]=void 0),I&&(I.plugin=null,E&&this.removeCapture(I.keyCode),b&&I.destroy()),this},removeAllKeys:function(w,b){w===void 0&&(w=!1),b===void 0&&(b=!1);for(var E=this.keys,A=0;A<E.length;A++){var I=E[A];I&&(E[A]=void 0,b&&this.removeCapture(I.keyCode),w&&I.destroy())}return this},createCombo:function(w,b){return new v(this,w,b)},checkDown:function(w,b){if(b===void 0&&(b=0),this.enabled&&w.isDown){var E=T(this.time-w.timeDown,b);if(E>w._tick)return w._tick=E,!0}return!1},update:function(){var w=this.manager.queue,b=w.length;if(!(!this.isActive()||b===0))for(var E=this.keys,A=0;A<b;A++){var I=w[A],R=I.keyCode,N=E[R],F=!1;I.cancelled===void 0&&(I.cancelled=0,I.stopImmediatePropagation=function(){I.cancelled=1},I.stopPropagation=function(){I.cancelled=-1}),I.cancelled!==-1&&(R===this.prevCode&&I.timeStamp===this.prevTime&&I.type===this.prevType||(this.prevCode=R,this.prevTime=I.timeStamp,this.prevType=I.type,I.type==="keydown"?(N&&(F=N.isDown,N.onDown(I)),!I.cancelled&&(!N||!F)&&(S[R]&&this.emit(h.KEY_DOWN+S[R],I),I.cancelled||this.emit(h.ANY_KEY_DOWN,I))):(N&&N.onUp(I),I.cancelled||(S[R]&&this.emit(h.KEY_UP+S[R],I),I.cancelled||this.emit(h.ANY_KEY_UP,I))),I.cancelled===1&&(I.cancelled=0)))}},resetKeys:function(){for(var w=this.keys,b=0;b<w.length;b++)w[b]&&w[b].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(l.MANAGER_PROCESS,this.update,this),this.game.events.off(u.BLUR,this.resetKeys),this.scene.sys.events.off(x.PAUSE,this.resetKeys,this),this.scene.sys.events.off(x.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var w=this.keys,b=0;b<w.length;b++)w[b]&&w[b].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});c.register("KeyboardPlugin",C,"keyboard","keyboard","inputKeyboard"),r.exports=C},60258:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a.timeLastMatched=n.timeStamp,a.index++,a.index===a.size?!0:(a.current=a.keyCodes[a.index],!1)};r.exports=g},95625:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(94030),h=n(72632),u=n(2544),d=n(88754),l=new a({initialize:function(m,f,v){if(v===void 0&&(v={}),f.length<2)return!1;this.manager=m,this.enabled=!0,this.keyCodes=[];for(var S=0;S<f.length;S++){var x=f[S];typeof x=="string"?this.keyCodes.push(x.toUpperCase().charCodeAt(0)):typeof x=="number"?this.keyCodes.push(x):x.hasOwnProperty("keyCode")&&this.keyCodes.push(x.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=h(v,"resetOnWrongKey",!0),this.maxKeyDelay=h(v,"maxKeyDelay",0),this.resetOnMatch=h(v,"resetOnMatch",!1),this.deleteOnMatch=h(v,"deleteOnMatch",!1);var T=this,C=function(w){if(!(T.matched||!T.enabled)){var b=u(w,T);b&&(T.manager.emit(p.COMBO_MATCH,T,w),T.resetOnMatch?d(T):T.deleteOnMatch&&T.destroy())}};this.onKeyDown=C,this.manager.on(p.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(p.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});r.exports=l},2544:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(60258),p=function(h,u){if(u.matched)return!0;var d=!1,l=!1;if(h.keyCode===u.current)if(u.index>0&&u.maxKeyDelay>0){var c=u.timeLastMatched+u.maxKeyDelay;h.timeStamp<=c&&(l=!0,d=a(h,u))}else l=!0,d=a(h,u);return!l&&u.resetOnWrongKey&&(u.index=0,u.current=u.keyCodes[0]),d&&(u.timeLastMatched=h.timeStamp,u.matched=!0,u.timeMatched=h.timeStamp),d};r.exports=p},88754:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.current=n.keyCodes[0],n.index=0,n.timeLastMatched=0,n.matched=!1,n.timeMatched=0,n};r.exports=g},5044:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keydown"},40813:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keyup"},89319:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keycombomatch"},43267:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="down"},78595:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keydown-"},30056:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="keyup-"},81939:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="up"},94030:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ANY_KEY_DOWN:n(5044),ANY_KEY_UP:n(40813),COMBO_MATCH:n(89319),DOWN:n(43267),KEY_DOWN:n(78595),KEY_UP:n(30056),UP:n(81939)}},28388:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Events:n(94030),KeyboardManager:n(71064),KeyboardPlugin:n(89666),Key:n(50165),KeyCodes:n(11873),KeyCombo:n(95625),AdvanceKeyCombo:n(60258),ProcessKeyCombo:n(2544),ResetKeyCombo:n(88754),JustDown:n(42460),JustUp:n(53162),DownDuration:n(64964),UpDuration:n(70331)}},64964:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a===void 0&&(a=50);var p=n.plugin.game.loop.time-n.timeDown;return n.isDown&&p<a};r.exports=g},42460:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n._justDown?(n._justDown=!1,!0):!1};r.exports=g},53162:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n._justUp?(n._justUp=!1,!0):!1};r.exports=g},50165:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(6659),h=n(94030),u=new a({Extends:p,initialize:function(l,c){p.call(this),this.plugin=l,this.keyCode=c,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(d){return this.emitOnRepeat=d,this},onDown:function(d){this.originalEvent=d,this.enabled&&(this.altKey=d.altKey,this.ctrlKey=d.ctrlKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.location=d.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(h.DOWN,this,d):(this.isDown=!0,this.isUp=!1,this.timeDown=d.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(h.DOWN,this,d)))},onUp:function(d){this.originalEvent=d,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=d.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(h.UP,this,d))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});r.exports=u},11873:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};r.exports=g},48044:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(11873),p={};for(var h in a)p[a[h]]=h;r.exports=p},70331:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a===void 0&&(a=50);var p=n.plugin.game.loop.time-n.timeUp;return n.isUp&&p<a};r.exports=g},7905:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(90185),h=n(33963),u=n(72283),d=new a({initialize:function(c){this.manager=c,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=u,this.onMouseDown=u,this.onMouseUp=u,this.onMouseDownWindow=u,this.onMouseUpWindow=u,this.onMouseOver=u,this.onMouseOut=u,this.onMouseWheel=u,this.pointerLockChange=u,this.isTop=!0,c.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputMouse,this.target=l.inputMouseEventTarget,this.passive=l.inputMousePassive,this.preventDefaultDown=l.inputMousePreventDefaultDown,this.preventDefaultUp=l.inputMousePreventDefaultUp,this.preventDefaultMove=l.inputMousePreventDefaultMove,this.preventDefaultWheel=l.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},requestPointerLock:function(){if(p.pointerLock){var l=this.target;l.requestPointerLock=l.requestPointerLock||l.mozRequestPointerLock||l.webkitRequestPointerLock,l.requestPointerLock()}},releasePointerLock:function(){p.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var l=this.target;if(l){var c=this,m=this.manager,f=m.canvas,v=window&&window.focus&&m.game.config.autoFocus;this.onMouseMove=function(x){!x.defaultPrevented&&c.enabled&&m&&m.enabled&&(m.onMouseMove(x),c.preventDefaultMove&&x.preventDefault())},this.onMouseDown=function(x){v&&window.focus(),!x.defaultPrevented&&c.enabled&&m&&m.enabled&&(m.onMouseDown(x),c.preventDefaultDown&&x.target===f&&x.preventDefault())},this.onMouseDownWindow=function(x){!x.defaultPrevented&&c.enabled&&m&&m.enabled&&x.target!==f&&m.onMouseDown(x)},this.onMouseUp=function(x){!x.defaultPrevented&&c.enabled&&m&&m.enabled&&(m.onMouseUp(x),c.preventDefaultUp&&x.target===f&&x.preventDefault())},this.onMouseUpWindow=function(x){!x.defaultPrevented&&c.enabled&&m&&m.enabled&&x.target!==f&&m.onMouseUp(x)},this.onMouseOver=function(x){!x.defaultPrevented&&c.enabled&&m&&m.enabled&&m.setCanvasOver(x)},this.onMouseOut=function(x){!x.defaultPrevented&&c.enabled&&m&&m.enabled&&m.setCanvasOut(x)},this.onMouseWheel=function(x){!x.defaultPrevented&&c.enabled&&m&&m.enabled&&m.onMouseWheel(x),c.preventDefaultWheel&&x.target===f&&x.preventDefault()};var S={passive:!0};if(l.addEventListener("mousemove",this.onMouseMove),l.addEventListener("mousedown",this.onMouseDown),l.addEventListener("mouseup",this.onMouseUp),l.addEventListener("mouseover",this.onMouseOver,S),l.addEventListener("mouseout",this.onMouseOut,S),this.preventDefaultWheel?l.addEventListener("wheel",this.onMouseWheel,{passive:!1}):l.addEventListener("wheel",this.onMouseWheel,S),window&&m.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,S),window.top.addEventListener("mouseup",this.onMouseUpWindow,S)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,S),window.addEventListener("mouseup",this.onMouseUpWindow,S),this.isTop=!1}p.pointerLock&&(this.pointerLockChange=function(x){var T=c.target;c.locked=document.pointerLockElement===T||document.mozPointerLockElement===T||document.webkitPointerLockElement===T,m.onPointerLockChange(x)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("mousemove",this.onMouseMove),l.removeEventListener("mousedown",this.onMouseDown),l.removeEventListener("mouseup",this.onMouseUp),l.removeEventListener("mouseover",this.onMouseOver),l.removeEventListener("mouseout",this.onMouseOut),window&&(l=this.isTop?window.top:window,l.removeEventListener("mousedown",this.onMouseDownWindow),l.removeEventListener("mouseup",this.onMouseUpWindow)),p.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});r.exports=d},11343:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={MouseManager:n(7905)}},37579:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(33963),h=n(72283),u=new a({initialize:function(l){this.manager=l,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=h,this.onTouchStartWindow=h,this.onTouchMove=h,this.onTouchEnd=h,this.onTouchEndWindow=h,this.onTouchCancel=h,this.onTouchCancelWindow=h,this.isTop=!0,l.events.once(p.MANAGER_BOOT,this.boot,this)},boot:function(){var d=this.manager.config;this.enabled=d.inputTouch,this.target=d.inputTouchEventTarget,this.capture=d.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,d.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(d){return d.preventDefault(),!1}),this},startListeners:function(){var d=this.target;if(d){var l=this,c=this.manager,m=c.canvas,f=window&&window.focus&&c.game.config.autoFocus;this.onTouchMove=function(T){!T.defaultPrevented&&l.enabled&&c&&c.enabled&&(c.onTouchMove(T),l.capture&&T.cancelable&&T.preventDefault())},this.onTouchStart=function(T){f&&window.focus(),!T.defaultPrevented&&l.enabled&&c&&c.enabled&&(c.onTouchStart(T),l.capture&&T.cancelable&&T.target===m&&T.preventDefault())},this.onTouchStartWindow=function(T){!T.defaultPrevented&&l.enabled&&c&&c.enabled&&T.target!==m&&c.onTouchStart(T)},this.onTouchEnd=function(T){!T.defaultPrevented&&l.enabled&&c&&c.enabled&&(c.onTouchEnd(T),l.capture&&T.cancelable&&T.target===m&&T.preventDefault())},this.onTouchEndWindow=function(T){!T.defaultPrevented&&l.enabled&&c&&c.enabled&&T.target!==m&&c.onTouchEnd(T)},this.onTouchCancel=function(T){!T.defaultPrevented&&l.enabled&&c&&c.enabled&&(c.onTouchCancel(T),l.capture&&T.preventDefault())},this.onTouchCancelWindow=function(T){!T.defaultPrevented&&l.enabled&&c&&c.enabled&&c.onTouchCancel(T)};var v=this.capture,S={passive:!0},x={passive:!1};if(d.addEventListener("touchstart",this.onTouchStart,v?x:S),d.addEventListener("touchmove",this.onTouchMove,v?x:S),d.addEventListener("touchend",this.onTouchEnd,v?x:S),d.addEventListener("touchcancel",this.onTouchCancel,v?x:S),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,x),window.top.addEventListener("touchend",this.onTouchEndWindow,x),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,x)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,x),window.addEventListener("touchend",this.onTouchEndWindow,x),window.addEventListener("touchcancel",this.onTouchCancelWindow,x),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var d=this.target;d.removeEventListener("touchstart",this.onTouchStart),d.removeEventListener("touchmove",this.onTouchMove),d.removeEventListener("touchend",this.onTouchEnd),d.removeEventListener("touchcancel",this.onTouchCancel),window&&(d=this.isTop?window.top:window,d.removeEventListener("touchstart",this.onTouchStartWindow),d.removeEventListener("touchend",this.onTouchEndWindow),d.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});r.exports=u},77423:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={TouchManager:n(37579)}},98035:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(683),u=n(72632),d=n(30750),l=n(43531),c=n(88490),m=n(33868),f=new a({initialize:function(S,x){if(this.loader=S,this.cache=u(x,"cache",!1),this.type=u(x,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=u(x,"key",!1);var T=this.key;if(S.prefix&&S.prefix!==""&&(this.key=S.prefix+T),!this.key)throw new Error("Invalid File key: "+this.key);var C=u(x,"url");C===void 0?C=S.path+T+"."+u(x,"extension",""):typeof C=="string"&&!C.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(C=S.path+C),this.url=C,this.src="",this.xhrSettings=m(u(x,"responseType",void 0)),u(x,"xhrSettings",!1)&&(this.xhrSettings=l(this.xhrSettings,u(x,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?p.FILE_POPULATED:p.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=u(x,"config",{}),this.multiFile,this.linkFile},setLink:function(v){this.linkFile=v,v.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===p.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=p.FILE_LOADING,this.src=d(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=c(this,this.loader.xhr))},onLoad:function(v,S){var x=v.responseURL&&this.loader.localSchemes.some(function(w){return v.responseURL.indexOf(w)===0}),T=x&&S.target.status===0,C=!(S.target&&S.target.status!==200)||T;v.readyState===4&&v.status>=400&&v.status<=599&&(C=!1),this.state=p.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,C)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(v){v.lengthComputable&&(this.bytesLoaded=v.loaded,this.bytesTotal=v.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(h.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=p.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=p.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=p.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(v){if(this.state!==p.FILE_PENDING_DESTROY){v===void 0&&(v=this.data);var S=this.key,x=this.type;this.loader.emit(h.FILE_COMPLETE,S,x,v),this.loader.emit(h.FILE_KEY_COMPLETE+x+"-"+S,S,x,v),this.loader.flagForRemoval(this),this.state=p.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});f.createObjectURL=function(v,S,x){if(typeof URL=="function")v.src=URL.createObjectURL(S);else{var T=new FileReader;T.onload=function(){v.removeAttribute("crossOrigin"),v.src="data:"+(S.type||x)+";base64,"+T.result.split(",")[1]},T.onerror=v.onerror,T.readAsDataURL(S)}},f.revokeObjectURL=function(v){typeof URL=="function"&&URL.revokeObjectURL(v.src)},r.exports=f},76846:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={},n={install:function(a){for(var p in g)a[p]=g[p]},register:function(a,p){g[a]=p},destroy:function(){g={}}};r.exports=n},30750:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.url?n.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?n.url:a+n.url:!1};r.exports=g},67285:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(58403),u=n(6659),d=n(683),l=n(76846),c=n(72632),m=n(10850),f=n(91963),v=n(7599),S=n(33868),x=new a({Extends:u,initialize:function(C){u.call(this);var w=C.sys.game.config,b=C.sys.settings.loader;this.scene=C,this.systems=C.sys,this.cacheManager=C.sys.cache,this.textureManager=C.sys.textures,this.sceneManager=C.sys.game.scene,l.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(c(b,"baseURL",w.loaderBaseURL)),this.setPath(c(b,"path",w.loaderPath)),this.setPrefix(c(b,"prefix",w.loaderPrefix)),this.maxParallelDownloads=c(b,"maxParallelDownloads",w.loaderMaxParallelDownloads),this.xhr=S(c(b,"responseType",w.loaderResponseType),c(b,"async",w.loaderAsync),c(b,"user",w.loaderUser),c(b,"password",w.loaderPassword),c(b,"timeout",w.loaderTimeout),c(b,"withCredentials",w.loaderWithCredentials)),this.crossOrigin=c(b,"crossOrigin",w.loaderCrossOrigin),this.imageLoadType=c(b,"imageLoadType",w.loaderImageLoadType),this.localSchemes=c(b,"localScheme",w.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new h,this.inflight=new h,this.queue=new h,this._deleteQueue=new h,this.totalFailed=0,this.totalComplete=0,this.state=p.LOADER_IDLE,this.multiKeyIndex=0,C.sys.events.once(v.BOOT,this.boot,this),C.sys.events.on(v.START,this.pluginStart,this)},boot:function(){this.systems.events.once(v.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(v.SHUTDOWN,this.shutdown,this)},setBaseURL:function(T){return T===void 0&&(T=""),T!==""&&T.substr(-1)!=="/"&&(T=T.concat("/")),this.baseURL=T,this},setPath:function(T){return T===void 0&&(T=""),T!==""&&T.substr(-1)!=="/"&&(T=T.concat("/")),this.path=T,this},setPrefix:function(T){return T===void 0&&(T=""),this.prefix=T,this},setCORS:function(T){return this.crossOrigin=T,this},addFile:function(T){Array.isArray(T)||(T=[T]);for(var C=0;C<T.length;C++){var w=T[C];this.keyExists(w)||(this.list.set(w),this.emit(d.ADD,w.key,w.type,this,w),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(T){var C=T.hasCacheConflict();return C||this.list.iterate(function(w){if(w.type===T.type&&w.key===T.key)return C=!0,!1}),!C&&this.isLoading()&&(this.inflight.iterate(function(w){if(w.type===T.type&&w.key===T.key)return C=!0,!1}),this.queue.iterate(function(w){if(w.type===T.type&&w.key===T.key)return C=!0,!1})),C},addPack:function(T,C){if(typeof C=="string"){var w=m(T,C);w&&(T={packKey:w})}var b=0,E=this.baseURL,A=this.path,I=this.prefix;for(var R in T)if(Object.prototype.hasOwnProperty.call(T,R)){var N=T[R],F=c(N,"baseURL",E),P=c(N,"path",A),D=c(N,"prefix",I),M=c(N,"files",null),L=c(N,"defaultType","void");if(Array.isArray(M)){this.setBaseURL(F),this.setPath(P),this.setPrefix(D);for(var k=0;k<M.length;k++){var V=M[k],W=V.hasOwnProperty("type")?V.type:L;this[W]&&(this[W](V),b++)}}}return this.setBaseURL(E),this.setPath(A),this.setPrefix(I),b>0},isLoading:function(){return this.state===p.LOADER_LOADING||this.state===p.LOADER_PROCESSING},isReady:function(){return this.state===p.LOADER_IDLE||this.state===p.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(d.START,this),this.list.size===0?this.loadComplete():(this.state=p.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(v.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(d.PROGRESS,this.progress)},update:function(){this.state===p.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(T){if((T.state===p.FILE_POPULATED||T.state===p.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(T),this.list.delete(T),T.crossOrigin||(T.crossOrigin=this.crossOrigin),T.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(T,C){this.inflight&&(this.inflight.delete(T),this.updateProgress(),C?(this.totalComplete++,this.queue.set(T),this.emit(d.FILE_LOAD,T),T.onProcess()):(this.totalFailed++,this._deleteQueue.set(T),this.emit(d.FILE_LOAD_ERROR,T),this.fileProcessComplete(T)))},fileProcessComplete:function(T){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(T.state===p.FILE_ERRORED?T.multiFile&&T.multiFile.onFileFailed(T):T.state===p.FILE_COMPLETE&&(T.multiFile?T.multiFile.isReadyToProcess()&&(T.multiFile.addToCache(),T.multiFile.pendingDestroy()):(T.addToCache(),T.pendingDestroy())),this.queue.delete(T),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(d.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=p.LOADER_COMPLETE,this.systems.events.off(v.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(d.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(T){this._deleteQueue.set(T)},saveJSON:function(T,C){return this.save(JSON.stringify(T),C)},save:function(T,C,w){C===void 0&&(C="file.json"),w===void 0&&(w="application/json");var b=new Blob([T],{type:w}),E=URL.createObjectURL(b),A=document.createElement("a");return A.download=C,A.textContent="Download "+C,A.href=E,A.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var T=this.systems.game.config,C=this.systems.settings.loader;this.setBaseURL(c(C,"baseURL",T.loaderBaseURL)),this.setPath(c(C,"path",T.loaderPath)),this.setPrefix(c(C,"prefix",T.loaderPrefix)),this.state=p.LOADER_IDLE},shutdown:function(){this.reset(),this.state=p.LOADER_SHUTDOWN,this.systems.events.off(v.UPDATE,this.update,this),this.systems.events.off(v.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=p.LOADER_DESTROYED,this.systems.events.off(v.UPDATE,this.update,this),this.systems.events.off(v.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});f.register("Loader",x,"load"),r.exports=x},43531:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(98611),p=n(33868),h=function(u,d){var l=u===void 0?p():a({},u);if(d)for(var c in d)d[c]!==void 0&&(l[c]=d[c]);return l};r.exports=h},45176:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(683),u=new a({initialize:function(l,c,m,f){var v=[];f.forEach(function(x){x&&v.push(x)}),this.loader=l,this.type=c,this.key=m,this.multiKeyIndex=l.multiKeyIndex++,this.files=v,this.state=p.FILE_PENDING,this.complete=!1,this.pending=v.length,this.failed=0,this.config={},this.baseURL=l.baseURL,this.path=l.path,this.prefix=l.prefix;for(var S=0;S<v.length;S++)v[S].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(d){return this.files.push(d),d.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(d){var l=this.files.indexOf(d);l!==-1&&this.pending--},onFileFailed:function(d){var l=this.files.indexOf(d);l!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,d.type,d.key))},pendingDestroy:function(){if(this.state!==p.FILE_PENDING_DESTROY){var d=this.key,l=this.type;this.loader.emit(h.FILE_COMPLETE,d,l),this.loader.emit(h.FILE_KEY_COMPLETE+l+"-"+d,d,l),this.loader.flagForRemoval(this);for(var c=0;c<this.files.length;c++)this.files[c].pendingDestroy();this.state=p.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});r.exports=u},88490:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(43531),p=function(h,u){var d=a(u,h.xhrSettings),l=new XMLHttpRequest;if(l.open("GET",h.src,d.async,d.user,d.password),l.responseType=h.xhrSettings.responseType,l.timeout=d.timeout,d.headers)for(var c in d.headers)l.setRequestHeader(c,d.headers[c]);return d.header&&d.headerValue&&l.setRequestHeader(d.header,d.headerValue),d.requestedWith&&l.setRequestHeader("X-Requested-With",d.requestedWith),d.overrideMimeType&&l.overrideMimeType(d.overrideMimeType),d.withCredentials&&(l.withCredentials=!0),l.onload=h.onLoad.bind(h,l),l.onerror=h.onError.bind(h,l),l.onprogress=h.onProgress.bind(h),l.send(),l};r.exports=p},33868:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u,d){return n===void 0&&(n=""),a===void 0&&(a=!0),p===void 0&&(p=""),h===void 0&&(h=""),u===void 0&&(u=0),d===void 0&&(d=!1),{responseType:n,async:a,user:p,password:h,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:d}};r.exports=g},12117:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};r.exports=g},7398:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addfile"},52187:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"},36627:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="filecomplete"},81925:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="filecomplete-"},29774:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loaderror"},20943:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="load"},74693:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="fileprogress"},71176:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postprocess"},88984:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="progress"},72753:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"},683:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD:n(7398),COMPLETE:n(52187),FILE_COMPLETE:n(36627),FILE_KEY_COMPLETE:n(81925),FILE_LOAD_ERROR:n(29774),FILE_LOAD:n(20943),FILE_PROGRESS:n(74693),POST_PROCESS:n(71176),PROGRESS:n(88984),START:n(72753)}},46468:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(76846),h=n(70806),u=n(683),d=new a({Extends:h,initialize:function(c,m,f,v,S){h.call(this,c,m,f,v,S),this.type="animationJSON"},onProcess:function(){this.loader.once(u.POST_PROCESS,this.onLoadComplete,this),h.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});p.register("animation",function(l,c,m,f){if(Array.isArray(l))for(var v=0;v<l.length;v++)this.addFile(new d(this,l[v]));else this.addFile(new d(this,l,c,f,m));return this}),r.exports=d},31648:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(76846),h=n(72632),u=n(42927),d=n(42911),l=n(70806),c=n(45176),m=new a({Extends:c,initialize:function(v,S,x,T,C,w){var b,E;if(d(S)){var A=S;S=h(A,"key"),b=new u(v,{key:S,url:h(A,"textureURL"),extension:h(A,"textureExtension","png"),normalMap:h(A,"normalMap"),xhrSettings:h(A,"textureXhrSettings")}),E=new l(v,{key:S,url:h(A,"atlasURL"),extension:h(A,"atlasExtension","json"),xhrSettings:h(A,"atlasXhrSettings")})}else b=new u(v,S,x,C),E=new l(v,S,T,w);b.linkFile?c.call(this,v,"atlasjson",S,[b,E,b.linkFile]):c.call(this,v,"atlasjson",S,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],S=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(f.key,f.data,v.data,S),v.addToCache(),this.complete=!0}}});p.register("aseprite",function(f,v,S,x,T){var C;if(Array.isArray(f))for(var w=0;w<f.length;w++)C=new m(this,f[w]),this.addFile(C.files);else C=new m(this,f,v,S,x,T),this.addFile(C.files);return this}),r.exports=m},73152:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(76846),h=n(72632),u=n(42927),d=n(42911),l=n(70806),c=n(45176),m=new a({Extends:c,initialize:function(v,S,x,T,C,w){var b,E;if(d(S)){var A=S;S=h(A,"key"),b=new u(v,{key:S,url:h(A,"textureURL"),extension:h(A,"textureExtension","png"),normalMap:h(A,"normalMap"),xhrSettings:h(A,"textureXhrSettings")}),E=new l(v,{key:S,url:h(A,"atlasURL"),extension:h(A,"atlasExtension","json"),xhrSettings:h(A,"atlasXhrSettings")})}else b=new u(v,S,x,C),E=new l(v,S,T,w);b.linkFile?c.call(this,v,"atlasjson",S,[b,E,b.linkFile]):c.call(this,v,"atlasjson",S,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],S=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(f.key,f.data,v.data,S),this.complete=!0}}});p.register("atlas",function(f,v,S,x,T){var C;if(Array.isArray(f))for(var w=0;w<f.length;w++)C=new m(this,f[w]),this.addFile(C.files);else C=new m(this,f,v,S,x,T),this.addFile(C.files);return this}),r.exports=m},24616:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(76846),h=n(72632),u=n(42927),d=n(42911),l=n(45176),c=n(15297),m=new a({Extends:l,initialize:function(v,S,x,T,C,w){var b,E;if(d(S)){var A=S;S=h(A,"key"),b=new u(v,{key:S,url:h(A,"textureURL"),extension:h(A,"textureExtension","png"),normalMap:h(A,"normalMap"),xhrSettings:h(A,"textureXhrSettings")}),E=new c(v,{key:S,url:h(A,"atlasURL"),extension:h(A,"atlasExtension","xml"),xhrSettings:h(A,"atlasXhrSettings")})}else b=new u(v,S,x,C),E=new c(v,S,T,w);b.linkFile?l.call(this,v,"atlasxml",S,[b,E,b.linkFile]):l.call(this,v,"atlasxml",S,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],S=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(f.key,f.data,v.data,S),this.complete=!0}}});p.register("atlasXML",function(f,v,S,x,T){var C;if(Array.isArray(f))for(var w=0;w<f.length;w++)C=new m(this,f[w]),this.addFile(C.files);else C=new m(this,f,v,S,x,T),this.addFile(C.files);return this}),r.exports=m},67448:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(30929),c=n(42911),m=new a({Extends:h,initialize:function(v,S,x,T,C){if(c(S)){var w=S;S=d(w,"key"),T=d(w,"xhrSettings"),C=d(w,"context",C)}var b={type:"audio",cache:v.cacheManager.audio,extension:x.type,responseType:"arraybuffer",key:S,url:x.url,xhrSettings:T,config:{context:C}};h.call(this,v,b)},onProcess:function(){this.state=p.FILE_PROCESSING;var f=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(v){f.data=v,f.onProcessComplete()},function(v){console.error("Error decoding audio: "+f.key+" - ",v?v.message:null),f.onProcessError()}),this.config.context=null}});m.create=function(f,v,S,x,T){var C=f.systems.game,w=C.config.audio,b=C.device.audio;c(v)&&(S=d(v,"url",[]),x=d(v,"config",{}));var E=m.getAudioURL(C,S);return E?b.webAudio&&!w.disableWebAudio?new m(f,v,E,T,C.sound.context):new l(f,v,E,x):(console.warn('No audio URLs for "%s" matched this device',v),null)},m.getAudioURL=function(f,v){Array.isArray(v)||(v=[v]);for(var S=0;S<v.length;S++){var x=d(v[S],"url",v[S]);if(x.indexOf("blob:")===0||x.indexOf("data:")===0)return{url:x,type:""};var T=x.match(/\.([a-zA-Z0-9]+)($|\?)/);if(T=d(v[S],"type",T?T[1]:"").toLowerCase(),f.device.audio[T])return{url:x,type:T}}return null},u.register("audio",function(f,v,S,x){var T=this.systems.game,C=T.config.audio,w=T.device.audio;if(C.noAudio||!w.webAudio&&!w.audioData)return this;var b;if(Array.isArray(f))for(var E=0;E<f.length;E++)b=m.create(this,f[E]),b&&this.addFile(b);else b=m.create(this,f,v,S,x),b&&this.addFile(b);return this}),r.exports=m},66109:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(67448),p=n(56694),h=n(76846),u=n(72632),d=n(42911),l=n(70806),c=n(45176),m=new p({Extends:c,initialize:function(v,S,x,T,C,w,b){if(d(S)){var E=S;S=u(E,"key"),x=u(E,"jsonURL"),T=u(E,"audioURL"),C=u(E,"audioConfig"),w=u(E,"audioXhrSettings"),b=u(E,"jsonXhrSettings")}var A;if(!T)A=new l(v,S,x,b),c.call(this,v,"audiosprite",S,[A]),this.config.resourceLoad=!0,this.config.audioConfig=C,this.config.audioXhrSettings=w;else{var I=a.create(v,S,T,C,w);I&&(A=new l(v,S,x,b),c.call(this,v,"audiosprite",S,[I,A]),this.config.resourceLoad=!1)}},onFileComplete:function(f){var v=this.files.indexOf(f);if(v!==-1&&(this.pending--,this.config.resourceLoad&&f.type==="json"&&f.data.hasOwnProperty("resources"))){var S=f.data.resources,x=u(this.config,"audioConfig"),T=u(this.config,"audioXhrSettings"),C=a.create(this.loader,f.key,S,x,T);C&&(this.addToMultiFile(C),this.loader.addFile(C))}},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1];f.addToCache(),v.addToCache(),this.complete=!0}}});h.register("audioSprite",function(f,v,S,x,T,C){var w=this.systems.game,b=w.config.audio,E=w.device.audio;if(b&&b.noAudio||!E.webAudio&&!E.audioData)return this;var A;if(Array.isArray(f))for(var I=0;I<f.length;I++)A=new m(this,f[I]),A.files&&this.addFile(A.files);else A=new m(this,f,v,S,x,T,C),A.files&&this.addFile(A.files);return this})},40612:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=new a({Extends:h,initialize:function(f,v,S,x,T){var C="bin";if(l(v)){var w=v;v=d(w,"key"),S=d(w,"url"),x=d(w,"xhrSettings"),C=d(w,"extension",C),T=d(w,"dataType",T)}var b={type:"binary",cache:f.cacheManager.binary,extension:C,responseType:"arraybuffer",key:v,url:S,xhrSettings:x,config:{dataType:T}};h.call(this,f,b)},onProcess:function(){this.state=p.FILE_PROCESSING;var m=this.config.dataType;this.data=m?new m(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});u.register("binary",function(m,f,v,S){if(Array.isArray(m))for(var x=0;x<m.length;x++)this.addFile(new c(this,m[x]));else this.addFile(new c(this,m,f,S,v));return this}),r.exports=c},54565:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(76846),h=n(72632),u=n(42927),d=n(42911),l=n(45176),c=n(31476),m=n(15297),f=new a({Extends:l,initialize:function(S,x,T,C,w,b){var E,A;if(d(x)){var I=x;x=h(I,"key"),E=new u(S,{key:x,url:h(I,"textureURL"),extension:h(I,"textureExtension","png"),normalMap:h(I,"normalMap"),xhrSettings:h(I,"textureXhrSettings")}),A=new m(S,{key:x,url:h(I,"fontDataURL"),extension:h(I,"fontDataExtension","xml"),xhrSettings:h(I,"fontDataXhrSettings")})}else E=new u(S,x,T,w),A=new m(S,x,C,b);E.linkFile?l.call(this,S,"bitmapfont",x,[E,A,E.linkFile]):l.call(this,S,"bitmapfont",x,[E,A])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],S=this.files[1];v.addToCache();var x=v.cache.get(v.key),T=c(S.data,v.cache.getFrame(v.key),0,0,x);this.loader.cacheManager.bitmapFont.add(v.key,{data:T,texture:v.key,frame:null}),this.complete=!0}}});p.register("bitmapFont",function(v,S,x,T,C){var w;if(Array.isArray(v))for(var b=0;b<v.length;b++)w=new f(this,v[b]),this.addFile(w.files);else w=new f(this,v,S,x,T,C),this.addFile(w.files);return this}),r.exports=f},99898:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=new a({Extends:h,initialize:function(f,v,S,x){var T="css";if(l(v)){var C=v;v=d(C,"key"),S=d(C,"url"),x=d(C,"xhrSettings"),T=d(C,"extension",T)}var w={type:"script",cache:!1,extension:T,responseType:"text",key:v,url:S,xhrSettings:x};h.call(this,f,w)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("css",function(m,f,v){if(Array.isArray(m))for(var S=0;S<m.length;S++)this.addFile(new c(this,m[S]));else this.addFile(new c(this,m,f,v));return this}),r.exports=c},47375:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73152),p=n(40612),h=n(56694),u=n(76846),d=n(72632),l=n(42927),c=n(42911),m=n(70806),f=n(67409),v=n(30657),S=n(80802),x=n(45176),T=n(24904),C=new h({Extends:x,initialize:function(b,E,A,I){if(A.multiAtlasURL){var R=new m(b,{key:E,url:A.multiAtlasURL,xhrSettings:I,config:A});x.call(this,b,"texture",E,[R])}else{var N=A.textureURL.substr(A.textureURL.length-3);A.type||(A.type=N.toLowerCase()==="ktx"?"KTX":"PVR");var F=new p(b,{key:E,url:A.textureURL,extension:N,xhrSettings:I,config:A});if(A.atlasURL){var P=new m(b,{key:E,url:A.atlasURL,xhrSettings:I,config:A});x.call(this,b,"texture",E,[F,P])}else x.call(this,b,"texture",E,[F])}this.config=A},onFileComplete:function(w){var b=this.files.indexOf(w);if(b!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(w.type==="json"&&w.data.hasOwnProperty("textures")){var E=w.data.textures,A=this.config,I=this.loader,R=I.baseURL,N=I.path,F=I.prefix,P=d(A,"multiBaseURL",this.baseURL),D=d(A,"multiPath",this.path),M=d(A,"prefix",this.prefix),L=d(A,"textureXhrSettings");P&&I.setBaseURL(P),D&&I.setPath(D),M&&I.setPrefix(M);for(var k=0;k<E.length;k++){var V=E[k].image,W="CMA"+this.multiKeyIndex+"_"+V,K=new p(I,W,V,L);if(this.addToMultiFile(K),I.addFile(K),E[k].normalMap){var B=new p(I,W,E[k].normalMap,L);B.type="normalMap",K.setLink(B),this.addToMultiFile(B),I.addFile(B)}}I.setBaseURL(R),I.setPath(N),I.setPrefix(F)}}},addToCache:function(){if(this.isReadyToProcess()){var w=this.config;if(w.multiAtlasURL)this.addMultiToCache();else{var b=this.loader.systems.renderer,E=this.loader.textureManager,A,I=this.files[0],R=this.files[1];if(w.type==="PVR"?A=T(I.data):w.type==="KTX"&&(A=f(I.data)),A&&b.supportsCompressedTexture(w.format,A.internalFormat)){A.format=b.getCompressedTextureName(w.format,A.internalFormat);var N=R&&R.data?R.data:null;E.addCompressedTexture(I.key,A,N)}}this.complete=!0}},addMultiToCache:function(){for(var w=this.config,b=this.files[0],E=[],A=[],I=[],R=this.loader.systems.renderer,N=this.loader.textureManager,F,P=1;P<this.files.length;P++){var D=this.files[P];if(D.type!=="normalMap")for(var M=D.key.indexOf("_"),L=D.key.substr(M+1),k=D.data,V=0;V<b.data.textures.length;V++){var W=b.data.textures[V];if(W.image===L){w.type==="PVR"?F=T(k):w.type==="KTX"&&(F=f(k)),F&&R.supportsCompressedTexture(w.format,F.internalFormat)&&(F.format=R.getCompressedTextureName(w.format,F.internalFormat),A.push(F),E.push(W),D.linkFile&&I.push(D.linkFile.data));break}}}I.length===0&&(I=void 0),N.addAtlasJSONArray(this.key,A,E,I),this.complete=!0}});u.register("texture",function(w,b,E){var A=this.systems.renderer,I=function(N,F,P,D){var M={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(c(F)){var L=F;F=d(L,"key"),P=d(L,"url"),D=d(L,"xhrSettings")}var k=!1;for(var V in P)if(A.supportsCompressedTexture(V)){var W=P[V];typeof W=="string"?M.textureURL=W:M=v(W,M),M.format=V.toUpperCase(),k=!0;break}if(!k)console.warn("No supported compressed texture format or IMG fallback",F);else if(M.format==="IMG"){var K,B;M.multiAtlasURL?(B=new S(N,F,M.multiAtlasURL,M.multiPath,M.multiBaseURL,D),K=B.files):M.atlasURL?(B=new a(N,F,M.textureURL,M.atlasURL,D),K=B.files):K=new l(N,F,M.textureURL,D),N.addFile(K)}else{var G=new C(N,F,M,D);N.addFile(G.files)}};if(Array.isArray(w))for(var R=0;R<w.length;R++)I(this,w[R]);else I(this,w,b,E);return this}),r.exports=C},46568:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=n(31053),m=new a({Extends:h,initialize:function(v,S,x,T,C){var w="glsl";if(l(S)){var b=S;S=d(b,"key"),x=d(b,"url"),T=d(b,"shaderType","fragment"),C=d(b,"xhrSettings"),w=d(b,"extension",w)}else T===void 0&&(T="fragment");var E={type:"glsl",cache:v.cacheManager.shader,extension:w,responseType:"text",key:S,url:x,config:{shaderType:T},xhrSettings:C};h.call(this,v,E)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var f=this.data.split(`
`),v=this.extractBlock(f,0);if(v)for(;v;){var S=this.getShaderName(v.header),x=this.getShaderType(v.header),T=this.getShaderUniforms(v.header),C=v.shader;if(this.cache.has(S)){var w=this.cache.get(S);x==="fragment"?w.fragmentSrc=C:w.vertexSrc=C,w.uniforms||(w.uniforms=T)}else x==="fragment"?this.cache.add(S,new c(S,C,"",T)):this.cache.add(S,new c(S,"",C,T));v=this.extractBlock(f,v.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new c(this.key,this.data)):this.cache.add(this.key,new c(this.key,"",this.data))},getShaderName:function(f){for(var v=0;v<f.length;v++){var S=f[v].trim();if(S.substring(0,5)==="name:")return S.substring(5).trim()}return this.key},getShaderType:function(f){for(var v=0;v<f.length;v++){var S=f[v].trim();if(S.substring(0,5)==="type:")return S.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(f){for(var v={},S=0;S<f.length;S++){var x=f[S].trim();if(x.substring(0,8)==="uniform."){var T=x.indexOf(":");if(T){var C=x.substring(8,T);try{v[C]=JSON.parse(x.substring(T+1))}catch{console.warn("Invalid uniform JSON: "+C)}}}}return v},extractBlock:function(f,v){for(var S=-1,x=-1,T=-1,C=!1,w=!1,b=[],E=[],A=v;A<f.length;A++){var I=f[A].trim();if(I==="---")if(S===-1)S=A,C=!0;else if(C)x=A,C=!1,w=!0;else{w=!1;break}else C?b.push(I):w&&(E.push(I),T=A)}return!C&&x!==-1?{header:b,shader:E.join(`
`),offset:T}:null}});u.register("glsl",function(f,v,S,x){if(Array.isArray(f))for(var T=0;T<f.length;T++)this.addFile(new m(this,f[T]));else this.addFile(new m(this,f,v,S,x));return this}),r.exports=m},30929:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(683),h=n(98035),u=n(72632),d=n(30750),l=n(42911),c=new a({Extends:h,initialize:function(f,v,S,x){if(l(v)){var T=v;v=u(T,"key"),x=u(T,"config",x)}var C={type:"audio",cache:f.cacheManager.audio,extension:S.type,key:v,url:S.url,config:x};h.call(this,f,C),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var m=0;m<this.data.length;m++){var f=this.data[m];f.oncanplaythrough=null,f.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(m){var f=m.target;f.oncanplaythrough=null,f.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(p.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var m=this.config&&this.config.instances||1;this.filesTotal=m,this.filesLoaded=0,this.percentComplete=0;for(var f=0;f<m;f++){var v=new Audio;v.dataset||(v.dataset={}),v.dataset.name=this.key+("0"+f).slice(-2),v.dataset.used="false",this.locked?v.dataset.locked="true":(v.dataset.locked="false",v.preload="auto",v.oncanplaythrough=this.onProgress.bind(this),v.onerror=this.onError.bind(this)),this.data.push(v)}for(f=0;f<this.data.length;f++)v=this.data[f],v.src=d(this,this.loader.baseURL),this.locked||v.load();this.locked&&setTimeout(this.onLoad.bind(this))}});r.exports=c},77459:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=new a({Extends:h,initialize:function(f,v,S,x){var T="html";if(l(v)){var C=v;v=d(C,"key"),S=d(C,"url"),x=d(C,"xhrSettings"),T=d(C,"extension",T)}var w={type:"text",cache:f.cacheManager.html,extension:T,responseType:"text",key:v,url:S,xhrSettings:x};h.call(this,f,w)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("html",function(m,f,v){if(Array.isArray(m))for(var S=0;S<m.length;S++)this.addFile(new c(this,m[S]));else this.addFile(new c(this,m,f,v));return this}),r.exports=c},9755:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=new a({Extends:h,initialize:function(f,v,S,x,T,C){x===void 0&&(x=512),T===void 0&&(T=512);var w="html";if(l(v)){var b=v;v=d(b,"key"),S=d(b,"url"),C=d(b,"xhrSettings"),w=d(b,"extension",w),x=d(b,"width",x),T=d(b,"height",T)}var E={type:"html",cache:f.textureManager,extension:w,responseType:"text",key:v,url:S,xhrSettings:C,config:{width:x,height:T}};h.call(this,f,E)},onProcess:function(){this.state=p.FILE_PROCESSING;var m=this.config.width,f=this.config.height,v=[];v.push('<svg width="'+m+'px" height="'+f+'px" viewBox="0 0 '+m+" "+f+'" xmlns="http://www.w3.org/2000/svg">'),v.push('<foreignObject width="100%" height="100%">'),v.push('<body xmlns="http://www.w3.org/1999/xhtml">'),v.push(this.xhrLoader.responseText),v.push("</body>"),v.push("</foreignObject>"),v.push("</svg>");var S=[v.join(`
`)],x=this;try{var T=new window.Blob(S,{type:"image/svg+xml;charset=utf-8"})}catch{x.state=p.FILE_ERRORED,x.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){h.revokeObjectURL(x.data),x.onProcessComplete()},this.data.onerror=function(){h.revokeObjectURL(x.data),x.onProcessError()},h.createObjectURL(this.data,T,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("htmlTexture",function(m,f,v,S,x){if(Array.isArray(m))for(var T=0;T<m.length;T++)this.addFile(new c(this,m[T]));else this.addFile(new c(this,m,f,v,S,x));return this}),r.exports=c},42927:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=n(30750),m=new a({Extends:h,initialize:function f(v,S,x,T,C){var w="png",b;if(l(S)){var E=S;S=d(E,"key"),x=d(E,"url"),b=d(E,"normalMap"),T=d(E,"xhrSettings"),w=d(E,"extension",w),C=d(E,"frameConfig")}Array.isArray(x)&&(b=x[1],x=x[0]);var A={type:"image",cache:v.textureManager,extension:w,responseType:"blob",key:S,url:x,xhrSettings:T,config:C};if(h.call(this,v,A),b){var I=new f(v,this.key,b,T,C);I.type="normalMap",this.setLink(I),v.addFile(I)}this.useImageElementLoad=v.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var f=this;this.data.onload=function(){h.revokeObjectURL(f.data),f.onProcessComplete()},this.data.onerror=function(){h.revokeObjectURL(f.data),f.onProcessError()},h.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var f=this.state;this.state=p.FILE_PROCESSING,f===p.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=p.FILE_LOADING,this.src=c(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var f=this;this.data.onload=function(){f.state=p.FILE_LOADED,f.loader.nextFile(f,!0)},this.data.onerror=function(){f.loader.nextFile(f,!1)},this.data.src=this.src}},addToCache:function(){var f=this.linkFile;f?f.state>=p.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addImage(this.key,f.data,this.data):this.cache.addImage(this.key,this.data,f.data)):this.cache.addImage(this.key,this.data)}});u.register("image",function(f,v,S){if(Array.isArray(f))for(var x=0;x<f.length;x++)this.addFile(new m(this,f[x]));else this.addFile(new m(this,f,v,S));return this}),r.exports=m},70806:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(10850),c=n(42911),m=new a({Extends:h,initialize:function(v,S,x,T,C){var w="json";if(c(S)){var b=S;S=d(b,"key"),x=d(b,"url"),T=d(b,"xhrSettings"),w=d(b,"extension",w),C=d(b,"dataKey",C)}var E={type:"json",cache:v.cacheManager.json,extension:w,responseType:"text",key:S,url:x,xhrSettings:T,config:C};h.call(this,v,E),c(x)&&(C?this.data=l(x,C):this.data=x,this.state=p.FILE_POPULATED)},onProcess:function(){if(this.state!==p.FILE_POPULATED){this.state=p.FILE_PROCESSING;try{var f=JSON.parse(this.xhrLoader.responseText)}catch(S){throw this.onProcessError(),S}var v=this.config;typeof v=="string"?this.data=l(f,v,f):this.data=f}this.onProcessComplete()}});u.register("json",function(f,v,S,x){if(Array.isArray(f))for(var T=0;T<f.length;T++)this.addFile(new m(this,f[T]));else this.addFile(new m(this,f,v,x,S));return this}),r.exports=m},80802:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(76846),h=n(72632),u=n(42927),d=n(42911),l=n(70806),c=n(45176),m=new a({Extends:c,initialize:function(v,S,x,T,C,w,b){if(d(S)){var E=S;S=h(E,"key"),h(E,"url",!1)?x=h(E,"url"):x=h(E,"atlasURL"),w=h(E,"xhrSettings"),T=h(E,"path"),C=h(E,"baseURL"),b=h(E,"textureXhrSettings")}var A=new l(v,S,x,w);c.call(this,v,"multiatlas",S,[A]),this.config.path=T,this.config.baseURL=C,this.config.textureXhrSettings=b},onFileComplete:function(f){var v=this.files.indexOf(f);if(v!==-1&&(this.pending--,f.type==="json"&&f.data.hasOwnProperty("textures"))){var S=f.data.textures,x=this.config,T=this.loader,C=T.baseURL,w=T.path,b=T.prefix,E=h(x,"baseURL",this.baseURL),A=h(x,"path",this.path),I=h(x,"prefix",this.prefix),R=h(x,"textureXhrSettings");T.setBaseURL(E),T.setPath(A),T.setPrefix(I);for(var N=0;N<S.length;N++){var F=S[N].image,P="MA"+this.multiKeyIndex+"_"+F,D=new u(T,P,F,R);if(this.addToMultiFile(D),T.addFile(D),S[N].normalMap){var M=new u(T,P,S[N].normalMap,R);M.type="normalMap",D.setLink(M),this.addToMultiFile(M),T.addFile(M)}}T.setBaseURL(C),T.setPath(w),T.setPrefix(b)}},addToCache:function(){if(this.isReadyToProcess()){for(var f=this.files[0],v=[],S=[],x=[],T=1;T<this.files.length;T++){var C=this.files[T];if(C.type!=="normalMap")for(var w=C.key.indexOf("_"),b=C.key.substr(w+1),E=C.data,A=0;A<f.data.textures.length;A++){var I=f.data.textures[A];if(I.image===b){S.push(E),v.push(I),C.linkFile&&x.push(C.linkFile.data);break}}}x.length===0&&(x=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,S,v,x),this.complete=!0}}});p.register("multiatlas",function(f,v,S,x,T){var C;if(Array.isArray(f))for(var w=0;w<f.length;w++)C=new m(this,f[w]),this.addFile(C.files);else C=new m(this,f,v,S,x,T),this.addFile(C.files);return this}),r.exports=m},39034:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(76846),h=n(72632),u=n(42911),d=n(45176),l=n(55188),c=new a({Extends:d,initialize:function(f,v,S,x){var T="js",C=[];if(u(v)){var w=v;v=h(w,"key"),S=h(w,"url"),x=h(w,"xhrSettings"),T=h(w,"extension",T)}Array.isArray(S)||(S=[S]);for(var b=0;b<S.length;b++){var E=new l(f,{key:v+"_"+b.toString(),url:S[b],extension:T,xhrSettings:x});E.onProcess=function(){this.onProcessComplete()},C.push(E)}d.call(this,f,"scripts",v,C)},addToCache:function(){if(this.isReadyToProcess()){for(var m=0;m<this.files.length;m++){var f=this.files[m];f.data=document.createElement("script"),f.data.language="javascript",f.data.type="text/javascript",f.data.defer=!1,f.data.text=f.xhrLoader.responseText,document.head.appendChild(f.data)}this.complete=!0}}});p.register("scripts",function(m,f,v){var S;if(Array.isArray(m))for(var x=0;x<m.length;x++)S=new c(this,m[x]),this.addFile(S.files);else S=new c(this,m,f,v),this.addFile(S.files);return this}),r.exports=c},85527:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(76846),h=n(72632),u=n(42911),d=n(45176),l=n(27291),c=n(76799),m=n(86897),f=new a({Extends:d,initialize:function(S,x,T,C,w,b){var E,A,I=S.cacheManager.obj;if(u(x)){var R=x;x=h(R,"key"),E=new m(S,{key:x,type:"obj",cache:I,url:h(R,"url"),extension:h(R,"extension","obj"),xhrSettings:h(R,"xhrSettings"),config:{flipUV:h(R,"flipUV",w)}}),C=h(R,"matURL"),C&&(A=new m(S,{key:x,type:"mat",cache:I,url:C,extension:h(R,"matExtension","mat"),xhrSettings:h(R,"xhrSettings")}))}else E=new m(S,{key:x,url:T,type:"obj",cache:I,extension:"obj",xhrSettings:b,config:{flipUV:w}}),C&&(A=new m(S,{key:x,url:C,type:"mat",cache:I,extension:"mat",xhrSettings:b}));d.call(this,S,"obj",x,[E,A])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],S=this.files[1],x=l(v.data,v.config.flipUV);S&&(x.materials=c(S.data)),v.cache.add(v.key,x),this.complete=!0}}});p.register("obj",function(v,S,x,T,C){var w;if(Array.isArray(v))for(var b=0;b<v.length;b++)w=new f(this,v[b]),this.addFile(w.files);else w=new f(this,v,S,x,T,C),this.addFile(w.files);return this}),r.exports=f},3616:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(76846),u=n(70806),d=new a({Extends:u,initialize:function(c,m,f,v,S){u.call(this,c,m,f,v,S),this.type="packfile"},onProcess:function(){if(this.state!==p.FILE_POPULATED&&(this.state=p.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var l={};l[this.config]=this.data,this.data=l}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});h.register("pack",function(l,c,m,f){if(Array.isArray(l))for(var v=0;v<l.length;v++)this.addFile(new d(this,l[v]));else this.addFile(new d(this,l,c,f,m));return this}),r.exports=d},12217:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=new a({Extends:h,initialize:function(f,v,S,x,T,C){var w="js";if(l(v)){var b=v;v=d(b,"key"),S=d(b,"url"),C=d(b,"xhrSettings"),w=d(b,"extension",w),x=d(b,"start"),T=d(b,"mapping")}var E={type:"plugin",cache:!1,extension:w,responseType:"text",key:v,url:S,xhrSettings:C,config:{start:x,mapping:T}};h.call(this,f,E),typeof S=="function"&&(this.data=S,this.state=p.FILE_POPULATED)},onProcess:function(){var m=this.loader.systems.plugins,f=this.config,v=d(f,"start",!1),S=d(f,"mapping",null);if(this.state===p.FILE_POPULATED)m.install(this.key,this.data,v,S);else{this.state=p.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var x=m.install(this.key,window[this.key],v,S);(v||S)&&(this.loader.systems[S]=x,this.loader.scene[S]=x)}this.onProcessComplete()}});u.register("plugin",function(m,f,v,S,x){if(Array.isArray(m))for(var T=0;T<m.length;T++)this.addFile(new c(this,m[T]));else this.addFile(new c(this,m,f,v,S,x));return this}),r.exports=c},4474:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=new a({Extends:h,initialize:function(f,v,S,x,T){var C="svg";if(l(v)){var w=v;v=d(w,"key"),S=d(w,"url"),x=d(w,"svgConfig",{}),T=d(w,"xhrSettings"),C=d(w,"extension",C)}var b={type:"svg",cache:f.textureManager,extension:C,responseType:"text",key:v,url:S,xhrSettings:T,config:{width:d(x,"width"),height:d(x,"height"),scale:d(x,"scale")}};h.call(this,f,b)},onProcess:function(){this.state=p.FILE_PROCESSING;var m=this.xhrLoader.responseText,f=[m],v=this.config.width,S=this.config.height,x=this.config.scale;t:if(v&&S||x){var T=null,C=new DOMParser;T=C.parseFromString(m,"text/xml");var w=T.getElementsByTagName("svg")[0],b=w.hasAttribute("viewBox"),E=parseFloat(w.getAttribute("width")),A=parseFloat(w.getAttribute("height"));if(!b&&E&&A)w.setAttribute("viewBox","0  0 "+E+" "+A);else if(b&&!E&&!A){var I=w.getAttribute("viewBox").split(/\s+|,/);E=I[2],A=I[3]}if(x)if(E&&A)v=E*x,S=A*x;else break t;w.setAttribute("width",v.toString()+"px"),w.setAttribute("height",S.toString()+"px"),f=[new XMLSerializer().serializeToString(w)]}try{var R=new window.Blob(f,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var N=this,F=!1;this.data.onload=function(){F||h.revokeObjectURL(N.data),N.onProcessComplete()},this.data.onerror=function(){F?N.onProcessError():(F=!0,h.revokeObjectURL(N.data),N.data.src="data:image/svg+xml,"+encodeURIComponent(f.join("")))},h.createObjectURL(this.data,R,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("svg",function(m,f,v,S){if(Array.isArray(m))for(var x=0;x<m.length;x++)this.addFile(new c(this,m[x]));else this.addFile(new c(this,m,f,v,S));return this}),r.exports=c},95171:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=new a({Extends:h,initialize:function(f,v,S,x){var T="js";if(l(v)){var C=v;v=d(C,"key"),S=d(C,"url"),x=d(C,"xhrSettings"),T=d(C,"extension",T)}var w={type:"text",extension:T,responseType:"text",key:v,url:S,xhrSettings:x};h.call(this,f,w)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var m=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),f=eval;this.loader.sceneManager.add(this.key,f(m)),this.complete=!0}});u.register("sceneFile",function(m,f,v){if(Array.isArray(m))for(var S=0;S<m.length;S++)this.addFile(new c(this,m[S]));else this.addFile(new c(this,m,f,v));return this}),r.exports=c},82458:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=new a({Extends:h,initialize:function(f,v,S,x,T,C){var w="js";if(l(v)){var b=v;v=d(b,"key"),S=d(b,"url"),C=d(b,"xhrSettings"),w=d(b,"extension",w),x=d(b,"systemKey"),T=d(b,"sceneKey")}var E={type:"scenePlugin",cache:!1,extension:w,responseType:"text",key:v,url:S,xhrSettings:C,config:{systemKey:x,sceneKey:T}};h.call(this,f,E),typeof S=="function"&&(this.data=S,this.state=p.FILE_POPULATED)},onProcess:function(){var m=this.loader.systems.plugins,f=this.config,v=this.key,S=d(f,"systemKey",v),x=d(f,"sceneKey",v);this.state===p.FILE_POPULATED?m.installScenePlugin(S,this.data,x,this.loader.scene,!0):(this.state=p.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),m.installScenePlugin(S,window[this.key],x,this.loader.scene,!0)),this.onProcessComplete()}});u.register("scenePlugin",function(m,f,v,S,x){if(Array.isArray(m))for(var T=0;T<m.length;T++)this.addFile(new c(this,m[T]));else this.addFile(new c(this,m,f,v,S,x));return this}),r.exports=c},55188:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=new a({Extends:h,initialize:function(f,v,S,x,T){var C="js";if(l(v)){var w=v;v=d(w,"key"),S=d(w,"url"),x=d(w,"type","script"),T=d(w,"xhrSettings"),C=d(w,"extension",C)}else x===void 0&&(x="script");var b={type:x,cache:!1,extension:C,responseType:"text",key:v,url:S,xhrSettings:T};h.call(this,f,b)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("script",function(m,f,v,S){if(Array.isArray(m))for(var x=0;x<m.length;x++)this.addFile(new c(this,m[x]));else this.addFile(new c(this,m,f,v,S));return this}),r.exports=c},33536:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(76846),u=n(42927),d=new a({Extends:u,initialize:function(c,m,f,v,S){u.call(this,c,m,f,S,v),this.type="spritesheet"},addToCache:function(){var l=this.linkFile;l?l.state>=p.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,l.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,l.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});h.register("spritesheet",function(l,c,m,f){if(Array.isArray(l))for(var v=0;v<l.length;v++)this.addFile(new d(this,l[v]));else this.addFile(new d(this,l,c,m,f));return this}),r.exports=d},86897:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=new a({Extends:h,initialize:function(f,v,S,x){var T="text",C="txt",w=f.cacheManager.text;if(l(v)){var b=v;v=d(b,"key"),S=d(b,"url"),x=d(b,"xhrSettings"),C=d(b,"extension",C),T=d(b,"type",T),w=d(b,"cache",w)}var E={type:T,cache:w,extension:C,responseType:"text",key:v,url:S,xhrSettings:x};h.call(this,f,E)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("text",function(m,f,v){if(Array.isArray(m))for(var S=0;S<m.length;S++)this.addFile(new c(this,m[S]));else this.addFile(new c(this,m,f,v));return this}),r.exports=c},58673:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=n(93560),m=new a({Extends:h,initialize:function(v,S,x,T){var C="csv";if(l(S)){var w=S;S=d(w,"key"),x=d(w,"url"),T=d(w,"xhrSettings"),C=d(w,"extension",C)}var b={type:"tilemapCSV",cache:v.cacheManager.tilemap,extension:C,responseType:"text",key:S,url:x,xhrSettings:T};h.call(this,v,b),this.tilemapFormat=c.CSV},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var f={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,f)}});u.register("tilemapCSV",function(f,v,S){if(Array.isArray(f))for(var x=0;x<f.length;x++)this.addFile(new m(this,f[x]));else this.addFile(new m(this,f,v,S));return this}),r.exports=m},98896:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(76846),h=n(70806),u=n(93560),d=new a({Extends:h,initialize:function(c,m,f,v){h.call(this,c,m,f,v),this.type="tilemapJSON",this.cache=c.cacheManager.tilemap},addToCache:function(){var l={format:u.WELTMEISTER,data:this.data};this.cache.add(this.key,l)}});p.register("tilemapImpact",function(l,c,m){if(Array.isArray(l))for(var f=0;f<l.length;f++)this.addFile(new d(this,l[f]));else this.addFile(new d(this,l,c,m));return this}),r.exports=d},50563:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(76846),h=n(70806),u=n(93560),d=new a({Extends:h,initialize:function(c,m,f,v){h.call(this,c,m,f,v),this.type="tilemapJSON",this.cache=c.cacheManager.tilemap},addToCache:function(){var l={format:u.TILED_JSON,data:this.data};this.cache.add(this.key,l)}});p.register("tilemapTiledJSON",function(l,c,m){if(Array.isArray(l))for(var f=0;f<l.length;f++)this.addFile(new d(this,l[f]));else this.addFile(new d(this,l,c,m));return this}),r.exports=d},82857:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(76846),h=n(72632),u=n(42927),d=n(42911),l=n(45176),c=n(86897),m=new a({Extends:l,initialize:function(v,S,x,T,C,w){var b,E;if(d(S)){var A=S;S=h(A,"key"),b=new u(v,{key:S,url:h(A,"textureURL"),extension:h(A,"textureExtension","png"),normalMap:h(A,"normalMap"),xhrSettings:h(A,"textureXhrSettings")}),E=new c(v,{key:S,url:h(A,"atlasURL"),extension:h(A,"atlasExtension","txt"),xhrSettings:h(A,"atlasXhrSettings")})}else b=new u(v,S,x,C),E=new c(v,S,T,w);b.linkFile?l.call(this,v,"unityatlas",S,[b,E,b.linkFile]):l.call(this,v,"unityatlas",S,[b,E])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],S=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(f.key,f.data,v.data,S),this.complete=!0}}});p.register("unityAtlas",function(f,v,S,x,T){var C;if(Array.isArray(f))for(var w=0;w<f.length;w++)C=new m(this,f[w]),this.addFile(C.files);else C=new m(this,f,v,S,x,T),this.addFile(C.files);return this}),r.exports=m},22833:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(30750),l=n(72632),c=n(42911),m=new a({Extends:h,initialize:function(v,S,x,T){if(T===void 0&&(T=!1),c(S)){var C=S;S=l(C,"key"),x=l(C,"url",[]),T=l(C,"noAudio",!1)}var w=v.systems.game.device.video.getVideoURL(x);w||console.warn("VideoFile: No supported format for "+S);var b={type:"video",cache:v.cacheManager.video,extension:w.type,key:S,url:w.url,config:{noAudio:T}};h.call(this,v,b)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=d(this,this.loader.baseURL),this.state=p.FILE_LOADED,this.loader.nextFile(this,!0)}});u.register("video",function(f,v,S){if(Array.isArray(f))for(var x=0;x<f.length;x++)this.addFile(new m(this,f[x]));else this.addFile(new m(this,f,v,S));return this}),r.exports=m},15297:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12117),h=n(98035),u=n(76846),d=n(72632),l=n(42911),c=n(89200),m=new a({Extends:h,initialize:function(v,S,x,T){var C="xml";if(l(S)){var w=S;S=d(w,"key"),x=d(w,"url"),T=d(w,"xhrSettings"),C=d(w,"extension",C)}var b={type:"xml",cache:v.cacheManager.xml,extension:C,responseType:"text",key:S,url:x,xhrSettings:T};h.call(this,v,b)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=c(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});u.register("xml",function(f,v,S){if(Array.isArray(f))for(var x=0;x<f.length;x++)this.addFile(new m(this,f[x]));else this.addFile(new m(this,f,v,S));return this}),r.exports=m},34034:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AnimationJSONFile:n(46468),AsepriteFile:n(31648),AtlasJSONFile:n(73152),AtlasXMLFile:n(24616),AudioFile:n(67448),AudioSpriteFile:n(66109),BinaryFile:n(40612),BitmapFontFile:n(54565),CompressedTextureFile:n(47375),CSSFile:n(99898),GLSLFile:n(46568),HTML5AudioFile:n(30929),HTMLFile:n(77459),HTMLTextureFile:n(9755),ImageFile:n(42927),JSONFile:n(70806),MultiAtlasFile:n(80802),MultiScriptFile:n(39034),OBJFile:n(85527),PackFile:n(3616),PluginFile:n(12217),SceneFile:n(95171),ScenePluginFile:n(82458),ScriptFile:n(55188),SpriteSheetFile:n(33536),SVGFile:n(4474),TextFile:n(86897),TilemapCSVFile:n(58673),TilemapImpactFile:n(98896),TilemapJSONFile:n(50563),UnityAtlasFile:n(82857),VideoFile:n(22833),XMLFile:n(15297)}},95695:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12117),p=n(98611),h={Events:n(683),FileTypes:n(34034),File:n(98035),FileTypesManager:n(76846),GetURL:n(30750),LoaderPlugin:n(67285),MergeXHRSettings:n(43531),MultiFile:n(45176),XHRLoader:n(88490),XHRSettings:n(33868)};h=p(!1,h,a),r.exports=h},26042:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){for(var a=0,p=0;p<n.length;p++)a+=+n[p];return a/n.length};r.exports=g},22824:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(8034),p=function(h,u){return a(h)/a(u)/a(h-u)};r.exports=p},17489:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return Math.floor(Math.random()*(a-n+1)+n)};r.exports=g},14976:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u){var d=(h-a)*.5,l=(u-p)*.5,c=n*n,m=n*c;return(2*p-2*h+d+l)*m+(-3*p+3*h-2*d-l)*c+d*n+p};r.exports=g},89129:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){a===void 0&&(a=0),p===void 0&&(p=10);var h=Math.pow(p,-a);return Math.ceil(n*h)/h};r.exports=g},82897:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return Math.max(a,Math.min(p,n))};r.exports=g},75606:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83392),p=function(h){return h*a.DEG_TO_RAD};r.exports=p},767:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return Math.abs(n-a)};r.exports=g},9849:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=n(56694),h=n(16650),u=n(72283),d=new h,l=new p({initialize:function c(m,f,v,S){m===void 0&&(m=0),f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S=c.DefaultOrder),this._x=m,this._y=f,this._z=v,this._order=S,this.onChangeCallback=u},x:{get:function(){return this._x},set:function(c){this._x=c,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(c){this._y=c,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(c){this._z=c,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(c){this._order=c,this.onChangeCallback(this)}},set:function(c,m,f,v){return v===void 0&&(v=this._order),this._x=c,this._y=m,this._z=f,this._order=v,this.onChangeCallback(this),this},copy:function(c){return this.set(c.x,c.y,c.z,c.order)},setFromQuaternion:function(c,m,f){return m===void 0&&(m=this._order),f===void 0&&(f=!1),d.fromQuat(c),this.setFromRotationMatrix(d,m,f)},setFromRotationMatrix:function(c,m,f){m===void 0&&(m=this._order),f===void 0&&(f=!1);var v=c.val,S=v[0],x=v[4],T=v[8],C=v[1],w=v[5],b=v[9],E=v[2],A=v[6],I=v[10],R=0,N=0,F=0,P=.99999;switch(m){case"XYZ":{N=Math.asin(a(T,-1,1)),Math.abs(T)<P?(R=Math.atan2(-b,I),F=Math.atan2(-x,S)):R=Math.atan2(A,w);break}case"YXZ":{R=Math.asin(-a(b,-1,1)),Math.abs(b)<P?(N=Math.atan2(T,I),F=Math.atan2(C,w)):N=Math.atan2(-E,S);break}case"ZXY":{R=Math.asin(a(A,-1,1)),Math.abs(A)<P?(N=Math.atan2(-E,I),F=Math.atan2(-x,w)):F=Math.atan2(C,S);break}case"ZYX":{N=Math.asin(-a(E,-1,1)),Math.abs(E)<P?(R=Math.atan2(A,I),F=Math.atan2(C,S)):F=Math.atan2(-x,w);break}case"YZX":{F=Math.asin(a(C,-1,1)),Math.abs(C)<P?(R=Math.atan2(-b,w),N=Math.atan2(-E,S)):N=Math.atan2(T,I);break}case"XZY":{F=Math.asin(-a(x,-1,1)),Math.abs(x)<P?(R=Math.atan2(A,w),N=Math.atan2(T,S)):R=Math.atan2(-b,I);break}}return this._x=R,this._y=N,this._z=F,this._order=m,f&&this.onChangeCallback(this),this}});l.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],l.DefaultOrder="XYZ",r.exports=l},8034:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){if(n===0)return 1;for(var a=n;--n;)a*=n;return a};r.exports=g},61616:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return Math.random()*(a-n)+n};r.exports=g},60679:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){a===void 0&&(a=0),p===void 0&&(p=10);var h=Math.pow(p,-a);return Math.floor(n*h)/h};r.exports=g},91806:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=function(h,u,d){return h=a(h,0,1),(d-u)*h+u};r.exports=p},79366:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n/a/1e3};r.exports=g},43776:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n==parseFloat(n)?!(n%2):void 0};r.exports=g},58442:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n===parseFloat(n)?!(n%2):void 0};r.exports=g},42798:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return(a-n)*p+n};r.exports=g},61072:r=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return p===void 0&&(p=0),n.clone().lerp(a,p)};r.exports=g},5341:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u){this.val=new Float32Array(9),u?this.copy(u):this.identity()},clone:function(){return new p(this)},set:function(h){return this.copy(h)},copy:function(h){var u=this.val,d=h.val;return u[0]=d[0],u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=d[6],u[7]=d[7],u[8]=d[8],this},fromMat4:function(h){var u=h.val,d=this.val;return d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[4],d[4]=u[5],d[5]=u[6],d[6]=u[8],d[7]=u[9],d[8]=u[10],this},fromArray:function(h){var u=this.val;return u[0]=h[0],u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=h[6],u[7]=h[7],u[8]=h[8],this},identity:function(){var h=this.val;return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=1,h[5]=0,h[6]=0,h[7]=0,h[8]=1,this},transpose:function(){var h=this.val,u=h[1],d=h[2],l=h[5];return h[1]=h[3],h[2]=h[6],h[3]=u,h[5]=h[7],h[6]=d,h[7]=l,this},invert:function(){var h=this.val,u=h[0],d=h[1],l=h[2],c=h[3],m=h[4],f=h[5],v=h[6],S=h[7],x=h[8],T=x*m-f*S,C=-x*c+f*v,w=S*c-m*v,b=u*T+d*C+l*w;return b?(b=1/b,h[0]=T*b,h[1]=(-x*d+l*S)*b,h[2]=(f*d-l*m)*b,h[3]=C*b,h[4]=(x*u-l*v)*b,h[5]=(-f*u+l*c)*b,h[6]=w*b,h[7]=(-S*u+d*v)*b,h[8]=(m*u-d*c)*b,this):null},adjoint:function(){var h=this.val,u=h[0],d=h[1],l=h[2],c=h[3],m=h[4],f=h[5],v=h[6],S=h[7],x=h[8];return h[0]=m*x-f*S,h[1]=l*S-d*x,h[2]=d*f-l*m,h[3]=f*v-c*x,h[4]=u*x-l*v,h[5]=l*c-u*f,h[6]=c*S-m*v,h[7]=d*v-u*S,h[8]=u*m-d*c,this},determinant:function(){var h=this.val,u=h[0],d=h[1],l=h[2],c=h[3],m=h[4],f=h[5],v=h[6],S=h[7],x=h[8];return u*(x*m-f*S)+d*(-x*c+f*v)+l*(S*c-m*v)},multiply:function(h){var u=this.val,d=u[0],l=u[1],c=u[2],m=u[3],f=u[4],v=u[5],S=u[6],x=u[7],T=u[8],C=h.val,w=C[0],b=C[1],E=C[2],A=C[3],I=C[4],R=C[5],N=C[6],F=C[7],P=C[8];return u[0]=w*d+b*m+E*S,u[1]=w*l+b*f+E*x,u[2]=w*c+b*v+E*T,u[3]=A*d+I*m+R*S,u[4]=A*l+I*f+R*x,u[5]=A*c+I*v+R*T,u[6]=N*d+F*m+P*S,u[7]=N*l+F*f+P*x,u[8]=N*c+F*v+P*T,this},translate:function(h){var u=this.val,d=h.x,l=h.y;return u[6]=d*u[0]+l*u[3]+u[6],u[7]=d*u[1]+l*u[4]+u[7],u[8]=d*u[2]+l*u[5]+u[8],this},rotate:function(h){var u=this.val,d=u[0],l=u[1],c=u[2],m=u[3],f=u[4],v=u[5],S=Math.sin(h),x=Math.cos(h);return u[0]=x*d+S*m,u[1]=x*l+S*f,u[2]=x*c+S*v,u[3]=x*m-S*d,u[4]=x*f-S*l,u[5]=x*v-S*c,this},scale:function(h){var u=this.val,d=h.x,l=h.y;return u[0]=d*u[0],u[1]=d*u[1],u[2]=d*u[2],u[3]=l*u[3],u[4]=l*u[4],u[5]=l*u[5],this},fromQuat:function(h){var u=h.x,d=h.y,l=h.z,c=h.w,m=u+u,f=d+d,v=l+l,S=u*m,x=u*f,T=u*v,C=d*f,w=d*v,b=l*v,E=c*m,A=c*f,I=c*v,R=this.val;return R[0]=1-(C+b),R[3]=x+I,R[6]=T-A,R[1]=x-I,R[4]=1-(S+b),R[7]=w+E,R[2]=T+A,R[5]=w-E,R[8]=1-(S+C),this},normalFromMat4:function(h){var u=h.val,d=this.val,l=u[0],c=u[1],m=u[2],f=u[3],v=u[4],S=u[5],x=u[6],T=u[7],C=u[8],w=u[9],b=u[10],E=u[11],A=u[12],I=u[13],R=u[14],N=u[15],F=l*S-c*v,P=l*x-m*v,D=l*T-f*v,M=c*x-m*S,L=c*T-f*S,k=m*T-f*x,V=C*I-w*A,W=C*R-b*A,K=C*N-E*A,B=w*R-b*I,G=w*N-E*I,O=b*N-E*R,$=F*O-P*G+D*B+M*K-L*W+k*V;return $?($=1/$,d[0]=(S*O-x*G+T*B)*$,d[1]=(x*K-v*O-T*W)*$,d[2]=(v*G-S*K+T*V)*$,d[3]=(m*G-c*O-f*B)*$,d[4]=(l*O-m*K+f*W)*$,d[5]=(c*K-l*G-f*V)*$,d[6]=(I*k-R*L+N*M)*$,d[7]=(R*D-A*k-N*P)*$,d[8]=(A*L-I*D+N*F)*$,this):null}});r.exports=p},16650:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(70015),h=1e-6,u=new a({initialize:function(S){this.val=new Float32Array(16),S?this.copy(S):this.identity()},clone:function(){return new u(this)},set:function(v){return this.copy(v)},setValues:function(v,S,x,T,C,w,b,E,A,I,R,N,F,P,D,M){var L=this.val;return L[0]=v,L[1]=S,L[2]=x,L[3]=T,L[4]=C,L[5]=w,L[6]=b,L[7]=E,L[8]=A,L[9]=I,L[10]=R,L[11]=N,L[12]=F,L[13]=P,L[14]=D,L[15]=M,this},copy:function(v){var S=v.val;return this.setValues(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11],S[12],S[13],S[14],S[15])},fromArray:function(v){return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(v,S,x){var T=d.fromQuat(x),C=T.val,w=S.x,b=S.y,E=S.z;return this.setValues(C[0]*w,C[1]*w,C[2]*w,0,C[4]*b,C[5]*b,C[6]*b,0,C[8]*E,C[9]*E,C[10]*E,0,v.x,v.y,v.z,1)},xyz:function(v,S,x){this.identity();var T=this.val;return T[12]=v,T[13]=S,T[14]=x,this},scaling:function(v,S,x){this.zero();var T=this.val;return T[0]=v,T[5]=S,T[10]=x,T[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var v=this.val,S=v[1],x=v[2],T=v[3],C=v[6],w=v[7],b=v[11];return v[1]=v[4],v[2]=v[8],v[3]=v[12],v[4]=S,v[6]=v[9],v[7]=v[13],v[8]=x,v[9]=C,v[11]=v[14],v[12]=T,v[13]=w,v[14]=b,this},getInverse:function(v){return this.copy(v),this.invert()},invert:function(){var v=this.val,S=v[0],x=v[1],T=v[2],C=v[3],w=v[4],b=v[5],E=v[6],A=v[7],I=v[8],R=v[9],N=v[10],F=v[11],P=v[12],D=v[13],M=v[14],L=v[15],k=S*b-x*w,V=S*E-T*w,W=S*A-C*w,K=x*E-T*b,B=x*A-C*b,G=T*A-C*E,O=I*D-R*P,$=I*M-N*P,z=I*L-F*P,X=R*M-N*D,Y=R*L-F*D,Z=N*L-F*M,J=k*Z-V*Y+W*X+K*z-B*$+G*O;return J?(J=1/J,this.setValues((b*Z-E*Y+A*X)*J,(T*Y-x*Z-C*X)*J,(D*G-M*B+L*K)*J,(N*B-R*G-F*K)*J,(E*z-w*Z-A*$)*J,(S*Z-T*z+C*$)*J,(M*W-P*G-L*V)*J,(I*G-N*W+F*V)*J,(w*Y-b*z+A*O)*J,(x*z-S*Y-C*O)*J,(P*B-D*W+L*k)*J,(R*W-I*B-F*k)*J,(b*$-w*X-E*O)*J,(S*X-x*$+T*O)*J,(D*V-P*K-M*k)*J,(I*K-R*V+N*k)*J)):this},adjoint:function(){var v=this.val,S=v[0],x=v[1],T=v[2],C=v[3],w=v[4],b=v[5],E=v[6],A=v[7],I=v[8],R=v[9],N=v[10],F=v[11],P=v[12],D=v[13],M=v[14],L=v[15];return this.setValues(b*(N*L-F*M)-R*(E*L-A*M)+D*(E*F-A*N),-(x*(N*L-F*M)-R*(T*L-C*M)+D*(T*F-C*N)),x*(E*L-A*M)-b*(T*L-C*M)+D*(T*A-C*E),-(x*(E*F-A*N)-b*(T*F-C*N)+R*(T*A-C*E)),-(w*(N*L-F*M)-I*(E*L-A*M)+P*(E*F-A*N)),S*(N*L-F*M)-I*(T*L-C*M)+P*(T*F-C*N),-(S*(E*L-A*M)-w*(T*L-C*M)+P*(T*A-C*E)),S*(E*F-A*N)-w*(T*F-C*N)+I*(T*A-C*E),w*(R*L-F*D)-I*(b*L-A*D)+P*(b*F-A*R),-(S*(R*L-F*D)-I*(x*L-C*D)+P*(x*F-C*R)),S*(b*L-A*D)-w*(x*L-C*D)+P*(x*A-C*b),-(S*(b*F-A*R)-w*(x*F-C*R)+I*(x*A-C*b)),-(w*(R*M-N*D)-I*(b*M-E*D)+P*(b*N-E*R)),S*(R*M-N*D)-I*(x*M-T*D)+P*(x*N-T*R),-(S*(b*M-E*D)-w*(x*M-T*D)+P*(x*E-T*b)),S*(b*N-E*R)-w*(x*N-T*R)+I*(x*E-T*b))},determinant:function(){var v=this.val,S=v[0],x=v[1],T=v[2],C=v[3],w=v[4],b=v[5],E=v[6],A=v[7],I=v[8],R=v[9],N=v[10],F=v[11],P=v[12],D=v[13],M=v[14],L=v[15],k=S*b-x*w,V=S*E-T*w,W=S*A-C*w,K=x*E-T*b,B=x*A-C*b,G=T*A-C*E,O=I*D-R*P,$=I*M-N*P,z=I*L-F*P,X=R*M-N*D,Y=R*L-F*D,Z=N*L-F*M;return k*Z-V*Y+W*X+K*z-B*$+G*O},multiply:function(v){var S=this.val,x=S[0],T=S[1],C=S[2],w=S[3],b=S[4],E=S[5],A=S[6],I=S[7],R=S[8],N=S[9],F=S[10],P=S[11],D=S[12],M=S[13],L=S[14],k=S[15],V=v.val,W=V[0],K=V[1],B=V[2],G=V[3];return S[0]=W*x+K*b+B*R+G*D,S[1]=W*T+K*E+B*N+G*M,S[2]=W*C+K*A+B*F+G*L,S[3]=W*w+K*I+B*P+G*k,W=V[4],K=V[5],B=V[6],G=V[7],S[4]=W*x+K*b+B*R+G*D,S[5]=W*T+K*E+B*N+G*M,S[6]=W*C+K*A+B*F+G*L,S[7]=W*w+K*I+B*P+G*k,W=V[8],K=V[9],B=V[10],G=V[11],S[8]=W*x+K*b+B*R+G*D,S[9]=W*T+K*E+B*N+G*M,S[10]=W*C+K*A+B*F+G*L,S[11]=W*w+K*I+B*P+G*k,W=V[12],K=V[13],B=V[14],G=V[15],S[12]=W*x+K*b+B*R+G*D,S[13]=W*T+K*E+B*N+G*M,S[14]=W*C+K*A+B*F+G*L,S[15]=W*w+K*I+B*P+G*k,this},multiplyLocal:function(v){var S=this.val,x=v.val;return this.setValues(S[0]*x[0]+S[1]*x[4]+S[2]*x[8]+S[3]*x[12],S[0]*x[1]+S[1]*x[5]+S[2]*x[9]+S[3]*x[13],S[0]*x[2]+S[1]*x[6]+S[2]*x[10]+S[3]*x[14],S[0]*x[3]+S[1]*x[7]+S[2]*x[11]+S[3]*x[15],S[4]*x[0]+S[5]*x[4]+S[6]*x[8]+S[7]*x[12],S[4]*x[1]+S[5]*x[5]+S[6]*x[9]+S[7]*x[13],S[4]*x[2]+S[5]*x[6]+S[6]*x[10]+S[7]*x[14],S[4]*x[3]+S[5]*x[7]+S[6]*x[11]+S[7]*x[15],S[8]*x[0]+S[9]*x[4]+S[10]*x[8]+S[11]*x[12],S[8]*x[1]+S[9]*x[5]+S[10]*x[9]+S[11]*x[13],S[8]*x[2]+S[9]*x[6]+S[10]*x[10]+S[11]*x[14],S[8]*x[3]+S[9]*x[7]+S[10]*x[11]+S[11]*x[15],S[12]*x[0]+S[13]*x[4]+S[14]*x[8]+S[15]*x[12],S[12]*x[1]+S[13]*x[5]+S[14]*x[9]+S[15]*x[13],S[12]*x[2]+S[13]*x[6]+S[14]*x[10]+S[15]*x[14],S[12]*x[3]+S[13]*x[7]+S[14]*x[11]+S[15]*x[15])},premultiply:function(v){return this.multiplyMatrices(v,this)},multiplyMatrices:function(v,S){var x=v.val,T=S.val,C=x[0],w=x[4],b=x[8],E=x[12],A=x[1],I=x[5],R=x[9],N=x[13],F=x[2],P=x[6],D=x[10],M=x[14],L=x[3],k=x[7],V=x[11],W=x[15],K=T[0],B=T[4],G=T[8],O=T[12],$=T[1],z=T[5],X=T[9],Y=T[13],Z=T[2],J=T[6],tt=T[10],et=T[14],lt=T[3],ut=T[7],ct=T[11],ht=T[15];return this.setValues(C*K+w*$+b*Z+E*lt,A*K+I*$+R*Z+N*lt,F*K+P*$+D*Z+M*lt,L*K+k*$+V*Z+W*lt,C*B+w*z+b*J+E*ut,A*B+I*z+R*J+N*ut,F*B+P*z+D*J+M*ut,L*B+k*z+V*J+W*ut,C*G+w*X+b*tt+E*ct,A*G+I*X+R*tt+N*ct,F*G+P*X+D*tt+M*ct,L*G+k*X+V*tt+W*ct,C*O+w*Y+b*et+E*ht,A*O+I*Y+R*et+N*ht,F*O+P*Y+D*et+M*ht,L*O+k*Y+V*et+W*ht)},translate:function(v){return this.translateXYZ(v.x,v.y,v.z)},translateXYZ:function(v,S,x){var T=this.val;return T[12]=T[0]*v+T[4]*S+T[8]*x+T[12],T[13]=T[1]*v+T[5]*S+T[9]*x+T[13],T[14]=T[2]*v+T[6]*S+T[10]*x+T[14],T[15]=T[3]*v+T[7]*S+T[11]*x+T[15],this},scale:function(v){return this.scaleXYZ(v.x,v.y,v.z)},scaleXYZ:function(v,S,x){var T=this.val;return T[0]=T[0]*v,T[1]=T[1]*v,T[2]=T[2]*v,T[3]=T[3]*v,T[4]=T[4]*S,T[5]=T[5]*S,T[6]=T[6]*S,T[7]=T[7]*S,T[8]=T[8]*x,T[9]=T[9]*x,T[10]=T[10]*x,T[11]=T[11]*x,this},makeRotationAxis:function(v,S){var x=Math.cos(S),T=Math.sin(S),C=1-x,w=v.x,b=v.y,E=v.z,A=C*w,I=C*b;return this.setValues(A*w+x,A*b-T*E,A*E+T*b,0,A*b+T*E,I*b+x,I*E-T*w,0,A*E-T*b,I*E+T*w,C*E*E+x,0,0,0,0,1)},rotate:function(v,S){var x=this.val,T=S.x,C=S.y,w=S.z,b=Math.sqrt(T*T+C*C+w*w);if(Math.abs(b)<h)return this;b=1/b,T*=b,C*=b,w*=b;var E=Math.sin(v),A=Math.cos(v),I=1-A,R=x[0],N=x[1],F=x[2],P=x[3],D=x[4],M=x[5],L=x[6],k=x[7],V=x[8],W=x[9],K=x[10],B=x[11],G=x[12],O=x[13],$=x[14],z=x[15],X=T*T*I+A,Y=C*T*I+w*E,Z=w*T*I-C*E,J=T*C*I-w*E,tt=C*C*I+A,et=w*C*I+T*E,lt=T*w*I+C*E,ut=C*w*I-T*E,ct=w*w*I+A;return this.setValues(R*X+D*Y+V*Z,N*X+M*Y+W*Z,F*X+L*Y+K*Z,P*X+k*Y+B*Z,R*J+D*tt+V*et,N*J+M*tt+W*et,F*J+L*tt+K*et,P*J+k*tt+B*et,R*lt+D*ut+V*ct,N*lt+M*ut+W*ct,F*lt+L*ut+K*ct,P*lt+k*ut+B*ct,G,O,$,z)},rotateX:function(v){var S=this.val,x=Math.sin(v),T=Math.cos(v),C=S[4],w=S[5],b=S[6],E=S[7],A=S[8],I=S[9],R=S[10],N=S[11];return S[4]=C*T+A*x,S[5]=w*T+I*x,S[6]=b*T+R*x,S[7]=E*T+N*x,S[8]=A*T-C*x,S[9]=I*T-w*x,S[10]=R*T-b*x,S[11]=N*T-E*x,this},rotateY:function(v){var S=this.val,x=Math.sin(v),T=Math.cos(v),C=S[0],w=S[1],b=S[2],E=S[3],A=S[8],I=S[9],R=S[10],N=S[11];return S[0]=C*T-A*x,S[1]=w*T-I*x,S[2]=b*T-R*x,S[3]=E*T-N*x,S[8]=C*x+A*T,S[9]=w*x+I*T,S[10]=b*x+R*T,S[11]=E*x+N*T,this},rotateZ:function(v){var S=this.val,x=Math.sin(v),T=Math.cos(v),C=S[0],w=S[1],b=S[2],E=S[3],A=S[4],I=S[5],R=S[6],N=S[7];return S[0]=C*T+A*x,S[1]=w*T+I*x,S[2]=b*T+R*x,S[3]=E*T+N*x,S[4]=A*T-C*x,S[5]=I*T-w*x,S[6]=R*T-b*x,S[7]=N*T-E*x,this},fromRotationTranslation:function(v,S){var x=v.x,T=v.y,C=v.z,w=v.w,b=x+x,E=T+T,A=C+C,I=x*b,R=x*E,N=x*A,F=T*E,P=T*A,D=C*A,M=w*b,L=w*E,k=w*A;return this.setValues(1-(F+D),R+k,N-L,0,R-k,1-(I+D),P+M,0,N+L,P-M,1-(I+F),0,S.x,S.y,S.z,1)},fromQuat:function(v){var S=v.x,x=v.y,T=v.z,C=v.w,w=S+S,b=x+x,E=T+T,A=S*w,I=S*b,R=S*E,N=x*b,F=x*E,P=T*E,D=C*w,M=C*b,L=C*E;return this.setValues(1-(N+P),I+L,R-M,0,I-L,1-(A+P),F+D,0,R+M,F-D,1-(A+N),0,0,0,0,1)},frustum:function(v,S,x,T,C,w){var b=1/(S-v),E=1/(T-x),A=1/(C-w);return this.setValues(C*2*b,0,0,0,0,C*2*E,0,0,(S+v)*b,(T+x)*E,(w+C)*A,-1,0,0,w*C*2*A,0)},perspective:function(v,S,x,T){var C=1/Math.tan(v/2),w=1/(x-T);return this.setValues(C/S,0,0,0,0,C,0,0,0,0,(T+x)*w,-1,0,0,2*T*x*w,0)},perspectiveLH:function(v,S,x,T){return this.setValues(2*x/v,0,0,0,0,2*x/S,0,0,0,0,-T/(x-T),1,0,0,x*T/(x-T),0)},ortho:function(v,S,x,T,C,w){var b=v-S,E=x-T,A=C-w;return b=b===0?b:1/b,E=E===0?E:1/E,A=A===0?A:1/A,this.setValues(-2*b,0,0,0,0,-2*E,0,0,0,0,2*A,0,(v+S)*b,(T+x)*E,(w+C)*A,1)},lookAtRH:function(v,S,x){var T=this.val;return f.subVectors(v,S),f.getLengthSquared()===0&&(f.z=1),f.normalize(),c.crossVectors(x,f),c.getLengthSquared()===0&&(Math.abs(x.z)===1?f.x+=1e-4:f.z+=1e-4,f.normalize(),c.crossVectors(x,f)),c.normalize(),m.crossVectors(f,c),T[0]=c.x,T[1]=c.y,T[2]=c.z,T[4]=m.x,T[5]=m.y,T[6]=m.z,T[8]=f.x,T[9]=f.y,T[10]=f.z,this},lookAt:function(v,S,x){var T=v.x,C=v.y,w=v.z,b=x.x,E=x.y,A=x.z,I=S.x,R=S.y,N=S.z;if(Math.abs(T-I)<h&&Math.abs(C-R)<h&&Math.abs(w-N)<h)return this.identity();var F=T-I,P=C-R,D=w-N,M=1/Math.sqrt(F*F+P*P+D*D);F*=M,P*=M,D*=M;var L=E*D-A*P,k=A*F-b*D,V=b*P-E*F;M=Math.sqrt(L*L+k*k+V*V),M?(M=1/M,L*=M,k*=M,V*=M):(L=0,k=0,V=0);var W=P*V-D*k,K=D*L-F*V,B=F*k-P*L;return M=Math.sqrt(W*W+K*K+B*B),M?(M=1/M,W*=M,K*=M,B*=M):(W=0,K=0,B=0),this.setValues(L,W,F,0,k,K,P,0,V,B,D,0,-(L*T+k*C+V*w),-(W*T+K*C+B*w),-(F*T+P*C+D*w),1)},yawPitchRoll:function(v,S,x){this.zero(),d.zero(),l.zero();var T=this.val,C=d.val,w=l.val,b=Math.sin(x),E=Math.cos(x);return T[10]=1,T[15]=1,T[0]=E,T[1]=b,T[4]=-b,T[5]=E,b=Math.sin(S),E=Math.cos(S),C[0]=1,C[15]=1,C[5]=E,C[10]=E,C[9]=-b,C[6]=b,b=Math.sin(v),E=Math.cos(v),w[5]=1,w[15]=1,w[0]=E,w[2]=-b,w[8]=b,w[10]=E,this.multiplyLocal(d),this.multiplyLocal(l),this},setWorldMatrix:function(v,S,x,T,C){return this.yawPitchRoll(v.y,v.x,v.z),d.scaling(x.x,x.y,x.z),l.xyz(S.x,S.y,S.z),this.multiplyLocal(d),this.multiplyLocal(l),T&&this.multiplyLocal(T),C&&this.multiplyLocal(C),this},multiplyToMat4:function(v,S){var x=this.val,T=v.val,C=x[0],w=x[1],b=x[2],E=x[3],A=x[4],I=x[5],R=x[6],N=x[7],F=x[8],P=x[9],D=x[10],M=x[11],L=x[12],k=x[13],V=x[14],W=x[15],K=T[0],B=T[1],G=T[2],O=T[3],$=T[4],z=T[5],X=T[6],Y=T[7],Z=T[8],J=T[9],tt=T[10],et=T[11],lt=T[12],ut=T[13],ct=T[14],ht=T[15];return S.setValues(K*C+B*A+G*F+O*L,B*w+B*I+G*P+O*k,G*b+B*R+G*D+O*V,O*E+B*N+G*M+O*W,$*C+z*A+X*F+Y*L,$*w+z*I+X*P+Y*k,$*b+z*R+X*D+Y*V,$*E+z*N+X*M+Y*W,Z*C+J*A+tt*F+et*L,Z*w+J*I+tt*P+et*k,Z*b+J*R+tt*D+et*V,Z*E+J*N+tt*M+et*W,lt*C+ut*A+ct*F+ht*L,lt*w+ut*I+ct*P+ht*k,lt*b+ut*R+ct*D+ht*V,lt*E+ut*N+ct*M+ht*W)},fromRotationXYTranslation:function(v,S,x){var T=S.x,C=S.y,w=S.z,b=Math.sin(v.x),E=Math.cos(v.x),A=Math.sin(v.y),I=Math.cos(v.y),R=T,N=C,F=w,P=-b,D=0-P*A,M=0-E*A,L=P*I,k=E*I;return x||(R=I*T+A*w,N=D*T+E*C+L*w,F=M*T+b*C+k*w),this.setValues(I,D,M,0,0,E,b,0,A,L,k,0,R,N,F,1)},getMaxScaleOnAxis:function(){var v=this.val,S=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],x=v[4]*v[4]+v[5]*v[5]+v[6]*v[6],T=v[8]*v[8]+v[9]*v[9]+v[10]*v[10];return Math.sqrt(Math.max(S,x,T))}}),d=new u,l=new u,c=new p,m=new p,f=new p;r.exports=u},69635:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return Math.min(n+a,p)};r.exports=g},37394:r=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a=n.length;if(a===0)return 0;n.sort(function(h,u){return h-u});var p=Math.floor(a/2);return a%2===0?(n[p]+n[p-1])/2:n[p]};r.exports=g},17259:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return Math.max(n-a,p)};r.exports=g},61820:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){p===void 0&&(p=a+1);var u=(n-a)/(p-a);return u>1?h!==void 0?(u=(h-n)/(h-p),u<0&&(u=0)):u=1:u<0&&(u=0),u};r.exports=g},75003:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(5341),h=n(72283),u=n(70015),d=1e-6,l=new Int8Array([1,2,0]),c=new Float32Array([0,0,0]),m=new u(1,0,0),f=new u(0,1,0),v=new u,S=new p,x=new a({initialize:function(C,w,b,E){this.onChangeCallback=h,this.set(C,w,b,E)},x:{get:function(){return this._x},set:function(T){this._x=T,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(T){this._y=T,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(T){this._z=T,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(T){this._w=T,this.onChangeCallback(this)}},copy:function(T){return this.set(T)},set:function(T,C,w,b,E){return E===void 0&&(E=!0),typeof T=="object"?(this._x=T.x||0,this._y=T.y||0,this._z=T.z||0,this._w=T.w||0):(this._x=T||0,this._y=C||0,this._z=w||0,this._w=b||0),E&&this.onChangeCallback(this),this},add:function(T){return this._x+=T.x,this._y+=T.y,this._z+=T.z,this._w+=T.w,this.onChangeCallback(this),this},subtract:function(T){return this._x-=T.x,this._y-=T.y,this._z-=T.z,this._w-=T.w,this.onChangeCallback(this),this},scale:function(T){return this._x*=T,this._y*=T,this._z*=T,this._w*=T,this.onChangeCallback(this),this},length:function(){var T=this.x,C=this.y,w=this.z,b=this.w;return Math.sqrt(T*T+C*C+w*w+b*b)},lengthSq:function(){var T=this.x,C=this.y,w=this.z,b=this.w;return T*T+C*C+w*w+b*b},normalize:function(){var T=this.x,C=this.y,w=this.z,b=this.w,E=T*T+C*C+w*w+b*b;return E>0&&(E=1/Math.sqrt(E),this._x=T*E,this._y=C*E,this._z=w*E,this._w=b*E),this.onChangeCallback(this),this},dot:function(T){return this.x*T.x+this.y*T.y+this.z*T.z+this.w*T.w},lerp:function(T,C){C===void 0&&(C=0);var w=this.x,b=this.y,E=this.z,A=this.w;return this.set(w+C*(T.x-w),b+C*(T.y-b),E+C*(T.z-E),A+C*(T.w-A))},rotationTo:function(T,C){var w=T.x*C.x+T.y*C.y+T.z*C.z;return w<-.999999?(v.copy(m).cross(T).length()<d&&v.copy(f).cross(T),v.normalize(),this.setAxisAngle(v,Math.PI)):w>.999999?this.set(0,0,0,1):(v.copy(T).cross(C),this._x=v.x,this._y=v.y,this._z=v.z,this._w=1+w,this.normalize())},setAxes:function(T,C,w){var b=S.val;return b[0]=C.x,b[3]=C.y,b[6]=C.z,b[1]=w.x,b[4]=w.y,b[7]=w.z,b[2]=-T.x,b[5]=-T.y,b[8]=-T.z,this.fromMat3(S).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(T,C){C=C*.5;var w=Math.sin(C);return this.set(w*T.x,w*T.y,w*T.z,Math.cos(C))},multiply:function(T){var C=this.x,w=this.y,b=this.z,E=this.w,A=T.x,I=T.y,R=T.z,N=T.w;return this.set(C*N+E*A+w*R-b*I,w*N+E*I+b*A-C*R,b*N+E*R+C*I-w*A,E*N-C*A-w*I-b*R)},slerp:function(T,C){var w=this.x,b=this.y,E=this.z,A=this.w,I=T.x,R=T.y,N=T.z,F=T.w,P=w*I+b*R+E*N+A*F;P<0&&(P=-P,I=-I,R=-R,N=-N,F=-F);var D=1-C,M=C;if(1-P>d){var L=Math.acos(P),k=Math.sin(L);D=Math.sin((1-C)*L)/k,M=Math.sin(C*L)/k}return this.set(D*w+M*I,D*b+M*R,D*E+M*N,D*A+M*F)},invert:function(){var T=this.x,C=this.y,w=this.z,b=this.w,E=T*T+C*C+w*w+b*b,A=E?1/E:0;return this.set(-T*A,-C*A,-w*A,b*A)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(T){T*=.5;var C=this.x,w=this.y,b=this.z,E=this.w,A=Math.sin(T),I=Math.cos(T);return this.set(C*I+E*A,w*I+b*A,b*I-w*A,E*I-C*A)},rotateY:function(T){T*=.5;var C=this.x,w=this.y,b=this.z,E=this.w,A=Math.sin(T),I=Math.cos(T);return this.set(C*I-b*A,w*I+E*A,b*I+C*A,E*I-w*A)},rotateZ:function(T){T*=.5;var C=this.x,w=this.y,b=this.z,E=this.w,A=Math.sin(T),I=Math.cos(T);return this.set(C*I+w*A,w*I-C*A,b*I+E*A,E*I-b*A)},calculateW:function(){var T=this.x,C=this.y,w=this.z;return this.w=-Math.sqrt(1-T*T-C*C-w*w),this},setFromEuler:function(T,C){var w=T.x/2,b=T.y/2,E=T.z/2,A=Math.cos(w),I=Math.cos(b),R=Math.cos(E),N=Math.sin(w),F=Math.sin(b),P=Math.sin(E);switch(T.order){case"XYZ":{this.set(N*I*R+A*F*P,A*F*R-N*I*P,A*I*P+N*F*R,A*I*R-N*F*P,C);break}case"YXZ":{this.set(N*I*R+A*F*P,A*F*R-N*I*P,A*I*P-N*F*R,A*I*R+N*F*P,C);break}case"ZXY":{this.set(N*I*R-A*F*P,A*F*R+N*I*P,A*I*P+N*F*R,A*I*R-N*F*P,C);break}case"ZYX":{this.set(N*I*R-A*F*P,A*F*R+N*I*P,A*I*P-N*F*R,A*I*R+N*F*P,C);break}case"YZX":{this.set(N*I*R+A*F*P,A*F*R+N*I*P,A*I*P-N*F*R,A*I*R-N*F*P,C);break}case"XZY":{this.set(N*I*R-A*F*P,A*F*R-N*I*P,A*I*P+N*F*R,A*I*R+N*F*P,C);break}}return this},setFromRotationMatrix:function(T){var C=T.val,w=C[0],b=C[4],E=C[8],A=C[1],I=C[5],R=C[9],N=C[2],F=C[6],P=C[10],D=w+I+P,M;return D>0?(M=.5/Math.sqrt(D+1),this.set((F-R)*M,(E-N)*M,(A-b)*M,.25/M)):w>I&&w>P?(M=2*Math.sqrt(1+w-I-P),this.set(.25*M,(b+A)/M,(E+N)/M,(F-R)/M)):I>P?(M=2*Math.sqrt(1+I-w-P),this.set((b+A)/M,.25*M,(R+F)/M,(E-N)/M)):(M=2*Math.sqrt(1+P-w-I),this.set((E+N)/M,(R+F)/M,.25*M,(A-b)/M)),this},fromMat3:function(T){var C=T.val,w=C[0]+C[4]+C[8],b;if(w>0)b=Math.sqrt(w+1),this.w=.5*b,b=.5/b,this._x=(C[7]-C[5])*b,this._y=(C[2]-C[6])*b,this._z=(C[3]-C[1])*b;else{var E=0;C[4]>C[0]&&(E=1),C[8]>C[E*3+E]&&(E=2);var A=l[E],I=l[A];b=Math.sqrt(C[E*3+E]-C[A*3+A]-C[I*3+I]+1),c[E]=.5*b,b=.5/b,c[A]=(C[A*3+E]+C[E*3+A])*b,c[I]=(C[I*3+E]+C[E*3+I])*b,this._x=c[0],this._y=c[1],this._z=c[2],this._w=(C[I*3+A]-C[A*3+I])*b}return this.onChangeCallback(this),this}});r.exports=x},23701:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83392),p=function(h){return h*a.RAD_TO_DEG};r.exports=p},16906:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a===void 0&&(a=1);var p=Math.random()*2*Math.PI;return n.x=Math.cos(p)*a,n.y=Math.sin(p)*a,n};r.exports=g},52417:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a===void 0&&(a=1);var p=Math.random()*2*Math.PI,h=Math.random()*2-1,u=Math.sqrt(1-h*h)*a;return n.x=Math.cos(p)*u,n.y=Math.sin(p)*u,n.z=h*a,n};r.exports=g},17915:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a===void 0&&(a=1),n.x=(Math.random()*2-1)*a,n.y=(Math.random()*2-1)*a,n.z=(Math.random()*2-1)*a,n.w=(Math.random()*2-1)*a,n};r.exports=g},52257:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.x,h=n.y;return n.x=p*Math.cos(a)-h*Math.sin(a),n.y=p*Math.sin(a)+h*Math.cos(a),n};r.exports=g},2386:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=Math.cos(h),d=Math.sin(h),l=n.x-a,c=n.y-p;return n.x=l*u-c*d+a,n.y=l*d+c*u+p,n};r.exports=g},72395:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u){var d=h+Math.atan2(n.y-p,n.x-a);return n.x=a+u*Math.cos(d),n.y=p+u*Math.sin(d),n};r.exports=g},41061:r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u){return n.x=a+u*Math.cos(h),n.y=p+u*Math.sin(h),n};r.exports=g},93709:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(70015),p=n(16650),h=n(75003),u=new p,d=new h,l=new a,c=function(m,f,v){return d.setAxisAngle(f,v),u.fromRotationTranslation(d,l.set(0,0,0)),m.transformMat4(u)};r.exports=c},67233:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n>0?Math.ceil(n):Math.floor(n)};r.exports=g},64333:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){a===void 0&&(a=0),p===void 0&&(p=10);var h=Math.pow(p,-a);return Math.round(n*h)/h};r.exports=g},59533:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){a===void 0&&(a=1),p===void 0&&(p=1),h===void 0&&(h=1),h*=Math.PI/n;for(var u=[],d=[],l=0;l<n;l++)p-=a*h,a+=p*h,u[l]=p,d[l]=a;return{sin:d,cos:u,length:n}};r.exports=g},5514:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n<=a?0:n>=p?1:(n=(n-a)/(p-a),n*n*(3-2*n))};r.exports=g},87736:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n=Math.max(0,Math.min(1,(n-a)/(p-a))),n*n*n*(n*(n*6-15)+10)};r.exports=g},55805:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=function(h,u,d,l){l===void 0&&(l=new a);var c=0,m=0,f=u*d;return h>0&&h<=f&&(h>u-1?(m=Math.floor(h/u),c=h-m*u):c=h),l.set(c,m)};r.exports=p},64462:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=function(h,u,d,l,c,m,f,v){v===void 0&&(v=new a);var S=Math.sin(c),x=Math.cos(c),T=x*m,C=S*m,w=-S*f,b=x*f,E=1/(T*b+w*-C);return v.x=b*E*h+-w*E*u+(l*w-d*b)*E,v.y=T*E*u+-C*E*h+(-l*T+d*C)*E,v};r.exports=p},93736:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(88456),h=new a({initialize:function(d,l){this.x=0,this.y=0,typeof d=="object"?(this.x=d.x||0,this.y=d.y||0):(l===void 0&&(l=d),this.x=d||0,this.y=l||0)},clone:function(){return new h(this.x,this.y)},copy:function(u){return this.x=u.x||0,this.y=u.y||0,this},setFromObject:function(u){return this.x=u.x||0,this.y=u.y||0,this},set:function(u,d){return d===void 0&&(d=u),this.x=u,this.y=d,this},setTo:function(u,d){return this.set(u,d)},setToPolar:function(u,d){return d==null&&(d=1),this.x=Math.cos(u)*d,this.y=Math.sin(u)*d,this},equals:function(u){return this.x===u.x&&this.y===u.y},fuzzyEquals:function(u,d){return p(this.x,u.x,d)&&p(this.y,u.y,d)},angle:function(){var u=Math.atan2(this.y,this.x);return u<0&&(u+=2*Math.PI),u},setAngle:function(u){return this.setToPolar(u,this.length())},add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u):(this.x=0,this.y=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(u){var d=u.x-this.x,l=u.y-this.y;return Math.sqrt(d*d+l*l)},distanceSq:function(u){var d=u.x-this.x,l=u.y-this.y;return d*d+l*l},length:function(){var u=this.x,d=this.y;return Math.sqrt(u*u+d*d)},setLength:function(u){return this.normalize().scale(u)},lengthSq:function(){var u=this.x,d=this.y;return u*u+d*d},normalize:function(){var u=this.x,d=this.y,l=u*u+d*d;return l>0&&(l=1/Math.sqrt(l),this.x=u*l,this.y=d*l),this},normalizeRightHand:function(){var u=this.x;return this.x=this.y*-1,this.y=u,this},normalizeLeftHand:function(){var u=this.x;return this.x=this.y,this.y=u*-1,this},dot:function(u){return this.x*u.x+this.y*u.y},cross:function(u){return this.x*u.y-this.y*u.x},lerp:function(u,d){d===void 0&&(d=0);var l=this.x,c=this.y;return this.x=l+d*(u.x-l),this.y=c+d*(u.y-c),this},transformMat3:function(u){var d=this.x,l=this.y,c=u.val;return this.x=c[0]*d+c[3]*l+c[6],this.y=c[1]*d+c[4]*l+c[7],this},transformMat4:function(u){var d=this.x,l=this.y,c=u.val;return this.x=c[0]*d+c[4]*l+c[12],this.y=c[1]*d+c[5]*l+c[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(u){var d=this.length();return d&&d>u&&this.scale(u/d),this},reflect:function(u){return u=u.clone().normalize(),this.subtract(u.scale(2*this.dot(u)))},mirror:function(u){return this.reflect(u).negate()},rotate:function(u){var d=Math.cos(u),l=Math.sin(u);return this.set(d*this.x-l*this.y,l*this.x+d*this.y)},project:function(u){var d=this.dot(u)/u.dot(u);return this.copy(u).scale(d)}});h.ZERO=new h,h.RIGHT=new h(1,0),h.LEFT=new h(-1,0),h.UP=new h(0,-1),h.DOWN=new h(0,1),h.ONE=new h(1,1),r.exports=h},70015:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d,l){this.x=0,this.y=0,this.z=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=d||0,this.z=l||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(h){return this.x=Math.min(this.x,h.x),this.y=Math.min(this.y,h.y),this.z=Math.min(this.z,h.z),this},max:function(h){return this.x=Math.max(this.x,h.x),this.y=Math.max(this.y,h.y),this.z=Math.max(this.z,h.z),this},clone:function(){return new p(this.x,this.y,this.z)},addVectors:function(h,u){return this.x=h.x+u.x,this.y=h.y+u.y,this.z=h.z+u.z,this},crossVectors:function(h,u){var d=h.x,l=h.y,c=h.z,m=u.x,f=u.y,v=u.z;return this.x=l*v-c*f,this.y=c*m-d*v,this.z=d*f-l*m,this},equals:function(h){return this.x===h.x&&this.y===h.y&&this.z===h.z},copy:function(h){return this.x=h.x,this.y=h.y,this.z=h.z||0,this},set:function(h,u,d){return typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):(this.x=h||0,this.y=u||0,this.z=d||0),this},setFromMatrixPosition:function(h){return this.fromArray(h.val,12)},setFromMatrixColumn:function(h,u){return this.fromArray(h.val,u*4)},fromArray:function(h,u){return u===void 0&&(u=0),this.x=h[u],this.y=h[u+1],this.z=h[u+2],this},add:function(h){return this.x+=h.x,this.y+=h.y,this.z+=h.z||0,this},addScalar:function(h){return this.x+=h,this.y+=h,this.z+=h,this},addScale:function(h,u){return this.x+=h.x*u,this.y+=h.y*u,this.z+=h.z*u||0,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this.z-=h.z||0,this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this.z*=h.z||1,this},scale:function(h){return isFinite(h)?(this.x*=h,this.y*=h,this.z*=h):(this.x=0,this.y=0,this.z=0),this},divide:function(h){return this.x/=h.x,this.y/=h.y,this.z/=h.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(h){var u=h.x-this.x,d=h.y-this.y,l=h.z-this.z||0;return Math.sqrt(u*u+d*d+l*l)},distanceSq:function(h){var u=h.x-this.x,d=h.y-this.y,l=h.z-this.z||0;return u*u+d*d+l*l},length:function(){var h=this.x,u=this.y,d=this.z;return Math.sqrt(h*h+u*u+d*d)},lengthSq:function(){var h=this.x,u=this.y,d=this.z;return h*h+u*u+d*d},normalize:function(){var h=this.x,u=this.y,d=this.z,l=h*h+u*u+d*d;return l>0&&(l=1/Math.sqrt(l),this.x=h*l,this.y=u*l,this.z=d*l),this},dot:function(h){return this.x*h.x+this.y*h.y+this.z*h.z},cross:function(h){var u=this.x,d=this.y,l=this.z,c=h.x,m=h.y,f=h.z;return this.x=d*f-l*m,this.y=l*c-u*f,this.z=u*m-d*c,this},lerp:function(h,u){u===void 0&&(u=0);var d=this.x,l=this.y,c=this.z;return this.x=d+u*(h.x-d),this.y=l+u*(h.y-l),this.z=c+u*(h.z-c),this},applyMatrix3:function(h){var u=this.x,d=this.y,l=this.z,c=h.val;return this.x=c[0]*u+c[3]*d+c[6]*l,this.y=c[1]*u+c[4]*d+c[7]*l,this.z=c[2]*u+c[5]*d+c[8]*l,this},applyMatrix4:function(h){var u=this.x,d=this.y,l=this.z,c=h.val,m=1/(c[3]*u+c[7]*d+c[11]*l+c[15]);return this.x=(c[0]*u+c[4]*d+c[8]*l+c[12])*m,this.y=(c[1]*u+c[5]*d+c[9]*l+c[13])*m,this.z=(c[2]*u+c[6]*d+c[10]*l+c[14])*m,this},transformMat3:function(h){var u=this.x,d=this.y,l=this.z,c=h.val;return this.x=u*c[0]+d*c[3]+l*c[6],this.y=u*c[1]+d*c[4]+l*c[7],this.z=u*c[2]+d*c[5]+l*c[8],this},transformMat4:function(h){var u=this.x,d=this.y,l=this.z,c=h.val;return this.x=c[0]*u+c[4]*d+c[8]*l+c[12],this.y=c[1]*u+c[5]*d+c[9]*l+c[13],this.z=c[2]*u+c[6]*d+c[10]*l+c[14],this},transformCoordinates:function(h){var u=this.x,d=this.y,l=this.z,c=h.val,m=u*c[0]+d*c[4]+l*c[8]+c[12],f=u*c[1]+d*c[5]+l*c[9]+c[13],v=u*c[2]+d*c[6]+l*c[10]+c[14],S=u*c[3]+d*c[7]+l*c[11]+c[15];return this.x=m/S,this.y=f/S,this.z=v/S,this},transformQuat:function(h){var u=this.x,d=this.y,l=this.z,c=h.x,m=h.y,f=h.z,v=h.w,S=v*u+m*l-f*d,x=v*d+f*u-c*l,T=v*l+c*d-m*u,C=-c*u-m*d-f*l;return this.x=S*v+C*-c+x*-f-T*-m,this.y=x*v+C*-m+T*-c-S*-f,this.z=T*v+C*-f+S*-m-x*-c,this},project:function(h){var u=this.x,d=this.y,l=this.z,c=h.val,m=c[0],f=c[1],v=c[2],S=c[3],x=c[4],T=c[5],C=c[6],w=c[7],b=c[8],E=c[9],A=c[10],I=c[11],R=c[12],N=c[13],F=c[14],P=c[15],D=1/(u*S+d*w+l*I+P);return this.x=(u*m+d*x+l*b+R)*D,this.y=(u*f+d*T+l*E+N)*D,this.z=(u*v+d*C+l*A+F)*D,this},projectViewMatrix:function(h,u){return this.applyMatrix4(h).applyMatrix4(u)},unprojectViewMatrix:function(h,u){return this.applyMatrix4(h).applyMatrix4(u)},unproject:function(h,u){var d=h.x,l=h.y,c=h.z,m=h.w,f=this.x-d,v=m-this.y-1-l,S=this.z;return this.x=2*f/c-1,this.y=2*v/m-1,this.z=2*S-1,this.project(u)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});p.ZERO=new p,p.RIGHT=new p(1,0,0),p.LEFT=new p(-1,0,0),p.UP=new p(0,-1,0),p.DOWN=new p(0,1,0),p.FORWARD=new p(0,0,1),p.BACK=new p(0,0,-1),p.ONE=new p(1,1,1),r.exports=p},51729:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d,l,c){this.x=0,this.y=0,this.z=0,this.w=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=d||0,this.z=l||0,this.w=c||0)},clone:function(){return new p(this.x,this.y,this.z,this.w)},copy:function(h){return this.x=h.x,this.y=h.y,this.z=h.z||0,this.w=h.w||0,this},equals:function(h){return this.x===h.x&&this.y===h.y&&this.z===h.z&&this.w===h.w},set:function(h,u,d,l){return typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=u||0,this.z=d||0,this.w=l||0),this},add:function(h){return this.x+=h.x,this.y+=h.y,this.z+=h.z||0,this.w+=h.w||0,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this.z-=h.z||0,this.w-=h.w||0,this},scale:function(h){return this.x*=h,this.y*=h,this.z*=h,this.w*=h,this},length:function(){var h=this.x,u=this.y,d=this.z,l=this.w;return Math.sqrt(h*h+u*u+d*d+l*l)},lengthSq:function(){var h=this.x,u=this.y,d=this.z,l=this.w;return h*h+u*u+d*d+l*l},normalize:function(){var h=this.x,u=this.y,d=this.z,l=this.w,c=h*h+u*u+d*d+l*l;return c>0&&(c=1/Math.sqrt(c),this.x=h*c,this.y=u*c,this.z=d*c,this.w=l*c),this},dot:function(h){return this.x*h.x+this.y*h.y+this.z*h.z+this.w*h.w},lerp:function(h,u){u===void 0&&(u=0);var d=this.x,l=this.y,c=this.z,m=this.w;return this.x=d+u*(h.x-d),this.y=l+u*(h.y-l),this.z=c+u*(h.z-c),this.w=m+u*(h.w-m),this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this.z*=h.z||1,this.w*=h.w||1,this},divide:function(h){return this.x/=h.x,this.y/=h.y,this.z/=h.z||1,this.w/=h.w||1,this},distance:function(h){var u=h.x-this.x,d=h.y-this.y,l=h.z-this.z||0,c=h.w-this.w||0;return Math.sqrt(u*u+d*d+l*l+c*c)},distanceSq:function(h){var u=h.x-this.x,d=h.y-this.y,l=h.z-this.z||0,c=h.w-this.w||0;return u*u+d*d+l*l+c*c},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(h){var u=this.x,d=this.y,l=this.z,c=this.w,m=h.val;return this.x=m[0]*u+m[4]*d+m[8]*l+m[12]*c,this.y=m[1]*u+m[5]*d+m[9]*l+m[13]*c,this.z=m[2]*u+m[6]*d+m[10]*l+m[14]*c,this.w=m[3]*u+m[7]*d+m[11]*l+m[15]*c,this},transformQuat:function(h){var u=this.x,d=this.y,l=this.z,c=h.x,m=h.y,f=h.z,v=h.w,S=v*u+m*l-f*d,x=v*d+f*u-c*l,T=v*l+c*d-m*u,C=-c*u-m*d-f*l;return this.x=S*v+C*-c+x*-f-T*-m,this.y=x*v+C*-m+T*-c-S*-f,this.z=T*v+C*-f+S*-m-x*-c,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});p.prototype.sub=p.prototype.subtract,p.prototype.mul=p.prototype.multiply,p.prototype.div=p.prototype.divide,p.prototype.dist=p.prototype.distance,p.prototype.distSq=p.prototype.distanceSq,p.prototype.len=p.prototype.length,p.prototype.lenSq=p.prototype.lengthSq,r.exports=p},9557:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return Math.abs(n-a)<=p};r.exports=g},1071:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(n>=a&&n<=p)return n;var h=p-a;return a+((n-a)%h+h)%h};r.exports=g},90447:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){return Math.atan2(h-a,p-n)};r.exports=g},94240:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return Math.atan2(a.y-n.y,a.x-n.x)};r.exports=g},84066:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return Math.atan2(a.x-n.x,a.y-n.y)};r.exports=g},9678:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){return Math.atan2(p-n,h-a)};r.exports=g},76861:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83392),p=function(h){return h>Math.PI&&(h-=a.PI2),Math.abs(((h+a.TAU)%a.PI2-a.PI2)%a.PI2)};r.exports=p},37570:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n=n%(2*Math.PI),n>=0?n:n+2*Math.PI};r.exports=g},87597:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61616),p=function(){return a(-Math.PI,Math.PI)};r.exports=p},74493:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61616),p=function(){return a(-180,180)};r.exports=p},19049:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(37570),p=function(h){return a(h+Math.PI)};r.exports=p},90612:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83392),p=function(h,u,d){return d===void 0&&(d=.05),h===u||(Math.abs(u-h)<=d||Math.abs(u-h)>=a.PI2-d?h=u:(Math.abs(u-h)>Math.PI&&(u<h?u+=a.PI2:u-=a.PI2),u>h?h+=d:u<h&&(h-=d))),h};r.exports=p},93954:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=a-n;if(p===0)return 0;var h=Math.floor((p- -180)/360);return p-h*360};r.exports=g},35786:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(1071),p=function(h){return a(h,-Math.PI,Math.PI)};r.exports=p},62138:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(1071),p=function(h){return a(h,-180,180)};r.exports=p},22153:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Between:n(90447),BetweenPoints:n(94240),BetweenPointsY:n(84066),BetweenY:n(9678),CounterClockwise:n(76861),Normalize:n(37570),Random:n(87597),RandomDegrees:n(74493),Reverse:n(19049),RotateTo:n(90612),ShortestBetween:n(93954),Wrap:n(35786),WrapDegrees:n(62138)}},83392:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};r.exports=g},53996:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=n-p,d=a-h;return Math.sqrt(u*u+d*d)};r.exports=g},92951:r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.x-a.x,h=n.y-a.y;return Math.sqrt(p*p+h*h)};r.exports=g},12161:r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.x-a.x,h=n.y-a.y;return p*p+h*h};r.exports=g},38057:r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){return Math.max(Math.abs(n-p),Math.abs(a-h))};r.exports=g},33297:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u){return u===void 0&&(u=2),Math.sqrt(Math.pow(p-n,u)+Math.pow(h-a,u))};r.exports=g},90366:r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){return Math.abs(n-p)+Math.abs(a-h)};r.exports=g},35032:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=n-p,d=a-h;return u*u+d*d};r.exports=g},10130:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Between:n(53996),BetweenPoints:n(92951),BetweenPointsSquared:n(12161),Chebyshev:n(38057),Power:n(33297),Snake:n(90366),Squared:n(35032)}},35060:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(25265),p=n(57428),h=n(73214),u=n(71778),d=n(36468),l=n(88258),c=n(52910),m=n(67799),f=n(74083),v=n(92284),S=n(28035),x=n(8754);r.exports={Power0:c,Power1:m.Out,Power2:u.Out,Power3:f.Out,Power4:v.Out,Linear:c,Quad:m.Out,Cubic:u.Out,Quart:f.Out,Quint:v.Out,Sine:S.Out,Expo:l.Out,Circ:h.Out,Elastic:d.Out,Back:a.Out,Bounce:p.Out,Stepped:x,"Quad.easeIn":m.In,"Cubic.easeIn":u.In,"Quart.easeIn":f.In,"Quint.easeIn":v.In,"Sine.easeIn":S.In,"Expo.easeIn":l.In,"Circ.easeIn":h.In,"Elastic.easeIn":d.In,"Back.easeIn":a.In,"Bounce.easeIn":p.In,"Quad.easeOut":m.Out,"Cubic.easeOut":u.Out,"Quart.easeOut":f.Out,"Quint.easeOut":v.Out,"Sine.easeOut":S.Out,"Expo.easeOut":l.Out,"Circ.easeOut":h.Out,"Elastic.easeOut":d.Out,"Back.easeOut":a.Out,"Bounce.easeOut":p.Out,"Quad.easeInOut":m.InOut,"Cubic.easeInOut":u.InOut,"Quart.easeInOut":f.InOut,"Quint.easeInOut":v.InOut,"Sine.easeInOut":S.InOut,"Expo.easeInOut":l.InOut,"Circ.easeInOut":h.InOut,"Elastic.easeInOut":d.InOut,"Back.easeInOut":a.InOut,"Bounce.easeInOut":p.InOut}},25860:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a===void 0&&(a=1.70158),n*n*((a+1)*n-a)};r.exports=g},45264:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a===void 0&&(a=1.70158);var p=a*1.525;return(n*=2)<1?.5*(n*n*((p+1)*n-p)):.5*((n-=2)*n*((p+1)*n+p)+2)};r.exports=g},36699:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a===void 0&&(a=1.70158),--n*n*((a+1)*n+a)+1};r.exports=g},25265:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:n(25860),Out:n(36699),InOut:n(45264)}},62191:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n=1-n,n<.36363636363636365?1-7.5625*n*n:n<.7272727272727273?1-(7.5625*(n-=.5454545454545454)*n+.75):n<.9090909090909091?1-(7.5625*(n-=.8181818181818182)*n+.9375):1-(7.5625*(n-=.9545454545454546)*n+.984375)};r.exports=g},24799:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a=!1;return n<.5?(n=1-n*2,a=!0):n=n*2-1,n<.36363636363636365?n=7.5625*n*n:n<.7272727272727273?n=7.5625*(n-=.5454545454545454)*n+.75:n<.9090909090909091?n=7.5625*(n-=.8181818181818182)*n+.9375:n=7.5625*(n-=.9545454545454546)*n+.984375,a?(1-n)*.5:n*.5+.5};r.exports=g},60819:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n<.36363636363636365?7.5625*n*n:n<.7272727272727273?7.5625*(n-=.5454545454545454)*n+.75:n<.9090909090909091?7.5625*(n-=.8181818181818182)*n+.9375:7.5625*(n-=.9545454545454546)*n+.984375};r.exports=g},57428:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:n(62191),Out:n(60819),InOut:n(24799)}},86855:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return 1-Math.sqrt(1-n*n)};r.exports=g},7280:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)};r.exports=g},18058:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return Math.sqrt(1- --n*n)};r.exports=g},73214:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:n(86855),Out:n(18058),InOut:n(7280)}},91532:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n*n*n};r.exports=g},63180:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)};r.exports=g},16518:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return--n*n*n+1};r.exports=g},71778:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:n(91532),Out:n(16518),InOut:n(63180)}},24729:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(a===void 0&&(a=.1),p===void 0&&(p=.1),n===0)return 0;if(n===1)return 1;var h=p/4;return a<1?a=1:h=p*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(n-=1))*Math.sin((n-h)*(2*Math.PI)/p))};r.exports=g},50325:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(a===void 0&&(a=.1),p===void 0&&(p=.1),n===0)return 0;if(n===1)return 1;var h=p/4;return a<1?a=1:h=p*Math.asin(1/a)/(2*Math.PI),(n*=2)<1?-.5*(a*Math.pow(2,10*(n-=1))*Math.sin((n-h)*(2*Math.PI)/p)):a*Math.pow(2,-10*(n-=1))*Math.sin((n-h)*(2*Math.PI)/p)*.5+1};r.exports=g},84074:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(a===void 0&&(a=.1),p===void 0&&(p=.1),n===0)return 0;if(n===1)return 1;var h=p/4;return a<1?a=1:h=p*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*n)*Math.sin((n-h)*(2*Math.PI)/p)+1};r.exports=g},36468:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:n(24729),Out:n(84074),InOut:n(50325)}},95638:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return Math.pow(2,10*(n-1))-.001};r.exports=g},10357:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return(n*=2)<1?.5*Math.pow(2,10*(n-1)):.5*(2-Math.pow(2,-10*(n-1)))};r.exports=g},14894:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return 1-Math.pow(2,-10*n)};r.exports=g},88258:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:n(95638),Out:n(14894),InOut:n(10357)}},33063:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Back:n(25265),Bounce:n(57428),Circular:n(73214),Cubic:n(71778),Elastic:n(36468),Expo:n(88258),Linear:n(52910),Quadratic:n(67799),Quartic:n(74083),Quintic:n(92284),Sine:n(28035),Stepped:n(8754)}},43927:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n};r.exports=g},52910:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=n(43927)},77471:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n*n};r.exports=g},83863:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)};r.exports=g},44383:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n*(2-n)};r.exports=g},67799:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:n(77471),Out:n(44383),InOut:n(83863)}},48311:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n*n*n*n};r.exports=g},55248:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)};r.exports=g},23135:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return 1- --n*n*n*n};r.exports=g},74083:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:n(48311),Out:n(23135),InOut:n(55248)}},7313:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n*n*n*n*n};r.exports=g},98759:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)};r.exports=g},26670:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return--n*n*n*n*n+1};r.exports=g},92284:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:n(7313),Out:n(26670),InOut:n(98759)}},52929:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n===0?0:n===1?1:1-Math.cos(n*Math.PI/2)};r.exports=g},66333:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n===0?0:n===1?1:.5*(1-Math.cos(Math.PI*n))};r.exports=g},37255:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n===0?0:n===1?1:Math.sin(n*Math.PI/2)};r.exports=g},28035:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={In:n(52929),Out:n(37255),InOut:n(66333)}},52770:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a===void 0&&(a=1),n<=0?0:n>=1?1:((a*n|0)+1)*(1/a)};r.exports=g},8754:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=n(52770)},17247:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a===void 0&&(a=1e-4),Math.ceil(n-a)};r.exports=g},88456:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return p===void 0&&(p=1e-4),Math.abs(n-a)<p};r.exports=g},61824:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a===void 0&&(a=1e-4),Math.floor(n+a)};r.exports=g},41935:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return p===void 0&&(p=1e-4),n>a-p};r.exports=g},54726:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return p===void 0&&(p=1e-4),n<a+p};r.exports=g},52778:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Ceil:n(17247),Equal:n(88456),Floor:n(61824),GreaterThan:n(41935),LessThan:n(54726)}},5923:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(83392),p=n(98611),h={Angle:n(22153),Distance:n(10130),Easing:n(33063),Fuzzy:n(52778),Interpolation:n(48528),Pow2:n(73773),Snap:n(23679),RandomDataGenerator:n(81429),Average:n(26042),Bernstein:n(22824),Between:n(17489),CatmullRom:n(14976),CeilTo:n(89129),Clamp:n(82897),DegToRad:n(75606),Difference:n(767),Euler:n(9849),Factorial:n(8034),FloatBetween:n(61616),FloorTo:n(60679),FromPercent:n(91806),GetSpeed:n(79366),IsEven:n(43776),IsEvenStrict:n(58442),Linear:n(42798),LinearXY:n(61072),MaxAdd:n(69635),Median:n(37394),MinSub:n(17259),Percent:n(61820),RadToDeg:n(23701),RandomXY:n(16906),RandomXYZ:n(52417),RandomXYZW:n(17915),Rotate:n(52257),RotateAround:n(2386),RotateAroundDistance:n(72395),RotateTo:n(41061),RoundAwayFromZero:n(67233),RoundTo:n(64333),SinCosTableGenerator:n(59533),SmootherStep:n(87736),SmoothStep:n(5514),ToXY:n(55805),TransformXY:n(64462),Within:n(9557),Wrap:n(1071),Vector2:n(93736),Vector3:n(70015),Vector4:n(51729),Matrix3:n(5341),Matrix4:n(16650),Quaternion:n(75003),RotateVec3:n(93709)};h=p(!1,h,a),r.exports=h},63210:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(22824),p=function(h,u){for(var d=0,l=h.length-1,c=0;c<=l;c++)d+=Math.pow(1-u,l-c)*Math.pow(u,c)*h[c]*a(l,c);return d};r.exports=p},88332:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(14976),p=function(h,u){var d=h.length-1,l=d*u,c=Math.floor(l);return h[0]===h[d]?(u<0&&(c=Math.floor(l=d*(1+u))),a(l-c,h[(c-1+d)%d],h[c],h[(c+1)%d],h[(c+2)%d])):u<0?h[0]-(a(-l,h[0],h[0],h[1],h[1])-h[0]):u>1?h[d]-(a(l-d,h[d],h[d],h[d-1],h[d-1])-h[d]):a(l-c,h[c?c-1:0],h[c],h[d<c+1?d:c+1],h[d<c+2?d:c+2])};r.exports=p},34631:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(u,d){var l=1-u;return l*l*l*d}function n(u,d){var l=1-u;return 3*l*l*u*d}function a(u,d){return 3*(1-u)*u*u*d}function p(u,d){return u*u*u*d}var h=function(u,d,l,c,m){return g(u,d)+n(u,l)+a(u,c)+p(u,m)};r.exports=h},47614:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(42798),p=function(h,u){var d=h.length-1,l=d*u,c=Math.floor(l);return u<0?a(h[0],h[1],l):u>1?a(h[d],h[d-1],d-l):a(h[c],h[c+1>d?d:c+1],l-c)};r.exports=p},16252:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(h,u){var d=1-h;return d*d*u}function n(h,u){return 2*(1-h)*h*u}function a(h,u){return h*h*u}var p=function(h,u,d,l){return g(h,u)+n(h,d)+a(h,l)};r.exports=p},44521:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(5514),p=function(h,u,d){return u+(d-u)*a(h,0,1)};r.exports=p},45507:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(87736),p=function(h,u,d){return u+(d-u)*a(h,0,1)};r.exports=p},48528:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Bezier:n(63210),CatmullRom:n(88332),CubicBezier:n(34631),Linear:n(47614),QuadraticBezier:n(16252),SmoothStep:n(44521),SmootherStep:n(45507)}},3504:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a=Math.log(n)/.6931471805599453;return 1<<Math.ceil(a)};r.exports=g},28621:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n>0&&(n&n-1)===0&&a>0&&(a&a-1)===0};r.exports=g},2018:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n>0&&(n&n-1)===0};r.exports=g},73773:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={GetNext:n(3504),IsSize:n(28621),IsValue:n(2018)}},81429:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u){u===void 0&&(u=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],u&&this.init(u)},rnd:function(){var h=2091639*this.s0+this.c*23283064365386963e-26;return this.c=h|0,this.s0=this.s1,this.s1=this.s2,this.s2=h-this.c,this.s2},hash:function(h){var u,d=this.n;h=h.toString();for(var l=0;l<h.length;l++)d+=h.charCodeAt(l),u=.02519603282416938*d,d=u>>>0,u-=d,u*=d,d=u>>>0,u-=d,d+=u*4294967296;return this.n=d,(d>>>0)*23283064365386963e-26},init:function(h){typeof h=="string"?this.state(h):this.sow(h)},sow:function(h){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!h)for(var u=0;u<h.length&&h[u]!=null;u++){var d=h[u];this.s0-=this.hash(d),this.s0+=~~(this.s0<0),this.s1-=this.hash(d),this.s1+=~~(this.s1<0),this.s2-=this.hash(d),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(h,u){return Math.floor(this.realInRange(0,u-h+1)+h)},between:function(h,u){return Math.floor(this.realInRange(0,u-h+1)+h)},realInRange:function(h,u){return this.frac()*(u-h)+h},normal:function(){return 1-2*this.frac()},uuid:function(){var h="",u="";for(u=h="";h++<36;u+=~h%5|h*3&4?(h^15?8^this.frac()*(h^20?16:4):4).toString(16):"-");return u},pick:function(h){return h[this.integerInRange(0,h.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(h){return h[~~(Math.pow(this.frac(),2)*(h.length-1)+.5)]},timestamp:function(h,u){return this.realInRange(h||9466848e5,u||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(h){return typeof h=="string"&&h.match(/^!rnd/)&&(h=h.split(","),this.c=parseFloat(h[1]),this.s0=parseFloat(h[2]),this.s1=parseFloat(h[3]),this.s2=parseFloat(h[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(h){for(var u=h.length-1,d=u;d>0;d--){var l=Math.floor(this.frac()*(d+1)),c=h[l];h[l]=h[d],h[d]=c}return h}});r.exports=p},82127:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){return p===void 0&&(p=0),a===0?n:(n-=p,n=a*Math.ceil(n/a),h?(p+n)/a:p+n)};r.exports=g},84314:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){return p===void 0&&(p=0),a===0?n:(n-=p,n=a*Math.floor(n/a),h?(p+n)/a:p+n)};r.exports=g},88462:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){return p===void 0&&(p=0),a===0?n:(n-=p,n=a*Math.round(n/a),h?(p+n)/a:p+n)};r.exports=g},23679:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Ceil:n(82127),Floor:n(84314),To:n(88462)}},92491:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */n(75205);var a=n(86459),p=n(98611),h={Actions:n(83979),Animations:n(13517),BlendModes:n(95723),Cache:n(45820),Cameras:n(44143),Core:n(80293),Class:n(56694),Create:n(84106),Curves:n(73962),Data:n(1999),Display:n(24816),DOM:n(3590),Events:n(95146),FX:n(96910),Game:n(15213),GameObjects:n(48013),Geom:n(84068),Input:n(20873),Loader:n(95695),Math:n(5923),Physics:n(53954),Plugins:n(45615),Renderer:n(42069),Scale:n(86754),ScaleModes:n(27394),Scene:n(87157),Scenes:n(20436),Structs:n(20010),Textures:n(87499),Tilemaps:n(52678),Time:n(97121),Tweens:n(75193),Utils:n(22178)};h.Sound=n(56751),h=p(!1,h,a),r.exports=h,n.g.Phaser=h},62832:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(7864),h=n(1539),u=new a({Extends:h,Mixins:[p.Acceleration,p.Angular,p.Bounce,p.Debug,p.Drag,p.Enable,p.Friction,p.Gravity,p.Immovable,p.Mass,p.Pushable,p.Size,p.Velocity],initialize:function(l,c,m,f,v){h.call(this,l,c,m,f,v),this.body=null}});r.exports=u},66150:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(75606),h=n(53996),u=n(35032),d=n(99523),l=n(72632),c=n(30657),m=n(2732),f=n(15147),v=n(91963),S=n(7599),x=n(93736),T=n(85233),C=new a({initialize:function(b){this.scene=b,this.systems=b.sys,this.config=this.getConfig(),this.world,this.add,b.sys.events.once(S.BOOT,this.boot,this),b.sys.events.on(S.START,this.start,this)},boot:function(){this.world=new T(this.scene,this.config),this.add=new d(this.world),this.systems.events.once(S.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new T(this.scene,this.config),this.add=new d(this.world));var w=this.systems.events;l(this.config,"customUpdate",!1)||w.on(S.UPDATE,this.world.update,this.world),w.on(S.POST_UPDATE,this.world.postUpdate,this.world),w.once(S.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(S.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(S.UPDATE,this.world.update,this.world)},getConfig:function(){var w=this.systems.game.config.physics,b=this.systems.settings.physics,E=c(l(b,"arcade",{}),l(w,"arcade",{}));return E},overlap:function(w,b,E,A,I){return E===void 0&&(E=null),A===void 0&&(A=null),I===void 0&&(I=E),this.world.collideObjects(w,b,E,A,I,!0)},collide:function(w,b,E,A,I){return E===void 0&&(E=null),A===void 0&&(A=null),I===void 0&&(I=E),this.world.collideObjects(w,b,E,A,I,!1)},collideTiles:function(w,b,E,A,I){return this.world.collideTiles(w,b,E,A,I)},overlapTiles:function(w,b,E,A,I){return this.world.overlapTiles(w,b,E,A,I)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(w,b,E,A,I,R){A===void 0&&(A=60);var N=Math.atan2(E-w.y,b-w.x);return w.body.acceleration.setToPolar(N,A),I!==void 0&&R!==void 0&&w.body.maxVelocity.set(I,R),N},accelerateToObject:function(w,b,E,A,I){return this.accelerateTo(w,b.x,b.y,E,A,I)},closest:function(w,b){b||(b=this.world.bodies.entries);for(var E=Number.MAX_VALUE,A=null,I=w.x,R=w.y,N=b.length,F=0;F<N;F++){var P=b[F],D=P.body||P;if(!(w===P||w===D||w===D.gameObject||w===D.center)){var M=u(I,R,D.center.x,D.center.y);M<E&&(A=P,E=M)}}return A},furthest:function(w,b){b||(b=this.world.bodies.entries);for(var E=-1,A=null,I=w.x,R=w.y,N=b.length,F=0;F<N;F++){var P=b[F],D=P.body||P;if(!(w===P||w===D||w===D.gameObject||w===D.center)){var M=u(I,R,D.center.x,D.center.y);M>E&&(A=P,E=M)}}return A},moveTo:function(w,b,E,A,I){A===void 0&&(A=60),I===void 0&&(I=0);var R=Math.atan2(E-w.y,b-w.x);return I>0&&(A=h(w.x,w.y,b,E)/(I/1e3)),w.body.velocity.setToPolar(R,A),R},moveToObject:function(w,b,E,A){return this.moveTo(w,b.x,b.y,E,A)},velocityFromAngle:function(w,b,E){return b===void 0&&(b=60),E===void 0&&(E=new x),E.setToPolar(p(w),b)},velocityFromRotation:function(w,b,E){return b===void 0&&(b=60),E===void 0&&(E=new x),E.setToPolar(w,b)},overlapRect:function(w,b,E,A,I,R){return f(this.world,w,b,E,A,I,R)},overlapCirc:function(w,b,E,A,I){return m(this.world,w,b,E,A,I)},shutdown:function(){if(this.world){var w=this.systems.events;w.off(S.UPDATE,this.world.update,this.world),w.off(S.POST_UPDATE,this.world.postUpdate,this.world),w.off(S.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(S.START,this.start,this),this.scene=null,this.systems=null}});v.register("ArcadePhysics",C,"arcadePhysics"),r.exports=C},25084:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(7864),h=n(13747),u=new a({Extends:h,Mixins:[p.Acceleration,p.Angular,p.Bounce,p.Debug,p.Drag,p.Enable,p.Friction,p.Gravity,p.Immovable,p.Mass,p.Pushable,p.Size,p.Velocity],initialize:function(l,c,m,f,v){h.call(this,l,c,m,f,v),this.body=null}});r.exports=u},97602:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(47401),h=n(27037),u=n(23701),d=n(74118),l=n(94287),c=n(93736),m=new a({initialize:function(v,S){var x=64,T=64,C={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},w=S!==void 0;w&&S.displayWidth&&(x=S.displayWidth,T=S.displayHeight),w||(S=C),this.world=v,this.gameObject=w?S:void 0,this.isBody=!0,this.transform={x:S.x,y:S.y,rotation:S.angle,scaleX:S.scaleX,scaleY:S.scaleY,displayOriginX:S.displayOriginX,displayOriginY:S.displayOriginY},this.debugShowBody=v.defaults.debugShowBody,this.debugShowVelocity=v.defaults.debugShowVelocity,this.debugBodyColor=v.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new c,this.position=new c(S.x-S.scaleX*S.displayOriginX,S.y-S.scaleY*S.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=S.angle,this.preRotation=S.angle,this.width=x,this.height=T,this.sourceWidth=x,this.sourceHeight=T,S.frame&&(this.sourceWidth=S.frame.realWidth,this.sourceHeight=S.frame.realHeight),this.halfWidth=Math.abs(x/2),this.halfHeight=Math.abs(T/2),this.center=new c(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new c,this.newVelocity=new c,this.deltaMax=new c,this.acceleration=new c,this.allowDrag=!0,this.drag=new c,this.allowGravity=!0,this.gravity=new c,this.bounce=new c,this.worldBounce=null,this.customBoundsRectangle=v.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new c(1e4,1e4),this.maxSpeed=-1,this.friction=new c(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=p.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=p.DYNAMIC_BODY,this._sx=S.scaleX,this._sy=S.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new d},updateBounds:function(){var f=this.gameObject,v=this.transform;if(f.parentContainer){var S=f.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);v.x=S.tx,v.y=S.ty,v.rotation=u(S.rotation),v.scaleX=S.scaleX,v.scaleY=S.scaleY,v.displayOriginX=f.displayOriginX,v.displayOriginY=f.displayOriginY}else v.x=f.x,v.y=f.y,v.rotation=f.angle,v.scaleX=f.scaleX,v.scaleY=f.scaleY,v.displayOriginX=f.displayOriginX,v.displayOriginY=f.displayOriginY;var x=!1;if(this.syncBounds){var T=f.getBounds(this._bounds);this.width=T.width,this.height=T.height,x=!0}else{var C=Math.abs(v.scaleX),w=Math.abs(v.scaleY);(this._sx!==C||this._sy!==w)&&(this.width=this.sourceWidth*C,this.height=this.sourceHeight*w,this._sx=C,this._sy=w,x=!0)}x&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var f=this.transform;this.position.x=f.x+f.scaleX*(this.offset.x-f.displayOriginX),this.position.y=f.y+f.scaleY*(this.offset.y-f.displayOriginY),this.updateCenter()},resetFlags:function(f){f===void 0&&(f=!1);var v=this.wasTouching,S=this.touching,x=this.blocked;f?(v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1):(v.none=S.none,v.up=S.up,v.down=S.down,v.left=S.left,v.right=S.right),S.none=!0,S.up=!1,S.down=!1,S.left=!1,S.right=!1,x.none=!0,x.up=!1,x.down=!1,x.left=!1,x.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(f,v){f&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),f&&this.update(v)},update:function(f){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,f);var v=this.velocity.x,S=this.velocity.y;this.newVelocity.set(v*f,S*f),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(S,v),this.speed=Math.sqrt(v*v+S*S),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(h.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var f=this.position.x-this.prevFrame.x,v=this.position.y-this.prevFrame.y,S=this.gameObject;if(this.moves){var x=this.deltaMax.x,T=this.deltaMax.y;x!==0&&f!==0&&(f<0&&f<-x?f=-x:f>0&&f>x&&(f=x)),T!==0&&v!==0&&(v<0&&v<-T?v=-T:v>0&&v>T&&(v=T)),S&&(S.x+=f,S.y+=v)}f<0?this.facing=p.FACING_LEFT:f>0&&(this.facing=p.FACING_RIGHT),v<0?this.facing=p.FACING_UP:v>0&&(this.facing=p.FACING_DOWN),this.allowRotation&&S&&(S.angle+=this.deltaZ()),this._tx=f,this._ty=v},setBoundsRectangle:function(f){return this.customBoundsRectangle=f||this.world.bounds,this},checkWorldBounds:function(){var f=this.position,v=this.customBoundsRectangle,S=this.world.checkCollision,x=this.worldBounce?-this.worldBounce.x:-this.bounce.x,T=this.worldBounce?-this.worldBounce.y:-this.bounce.y,C=!1;return f.x<v.x&&S.left?(f.x=v.x,this.velocity.x*=x,this.blocked.left=!0,C=!0):this.right>v.right&&S.right&&(f.x=v.right-this.width,this.velocity.x*=x,this.blocked.right=!0,C=!0),f.y<v.y&&S.up?(f.y=v.y,this.velocity.y*=T,this.blocked.up=!0,C=!0):this.bottom>v.bottom&&S.down&&(f.y=v.bottom-this.height,this.velocity.y*=T,this.blocked.down=!0,C=!0),C&&(this.blocked.none=!1,this.updateCenter()),C},setOffset:function(f,v){return v===void 0&&(v=f),this.offset.set(f,v),this},setGameObject:function(f,v){return v===void 0&&(v=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=f,f.body&&(f.body=this),this.setSize(),this.world.add(this),this.enable=v,this},setSize:function(f,v,S){S===void 0&&(S=!0);var x=this.gameObject;if(x&&(!f&&x.frame&&(f=x.frame.realWidth),!v&&x.frame&&(v=x.frame.realHeight)),this.sourceWidth=f,this.sourceHeight=v,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),S&&x&&x.getCenter){var T=(x.width-f)/2,C=(x.height-v)/2;this.offset.set(T,C)}return this.isCircle=!1,this.radius=0,this},setCircle:function(f,v,S){return v===void 0&&(v=this.offset.x),S===void 0&&(S=this.offset.y),f>0?(this.isCircle=!0,this.radius=f,this.sourceWidth=f*2,this.sourceHeight=f*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,S),this.updateCenter()):this.isCircle=!1,this},reset:function(f,v){this.stop();var S=this.gameObject;S&&(S.setPosition(f,v),this.rotation=S.angle,this.preRotation=S.angle);var x=this.position;S&&S.getTopLeft?S.getTopLeft(x):x.set(f,v),this.prev.copy(x),this.prevFrame.copy(x),S&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(f){return f.x=this.x,f.y=this.y,f.right=this.right,f.bottom=this.bottom,f},hitTest:function(f,v){if(!this.isCircle)return l(this,f,v);if(this.radius>0&&f>=this.left&&f<=this.right&&v>=this.top&&v<=this.bottom){var S=(this.center.x-f)*(this.center.x-f),x=(this.center.y-v)*(this.center.y-v);return S+x<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(f){var v=this.position,S=v.x+this.halfWidth,x=v.y+this.halfHeight;this.debugShowBody&&(f.lineStyle(f.defaultStrokeWidth,this.debugBodyColor),this.isCircle?f.strokeCircle(S,x,this.width/2):(this.checkCollision.up&&f.lineBetween(v.x,v.y,v.x+this.width,v.y),this.checkCollision.right&&f.lineBetween(v.x+this.width,v.y,v.x+this.width,v.y+this.height),this.checkCollision.down&&f.lineBetween(v.x,v.y+this.height,v.x+this.width,v.y+this.height),this.checkCollision.left&&f.lineBetween(v.x,v.y,v.x,v.y+this.height))),this.debugShowVelocity&&(f.lineStyle(f.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),f.lineBetween(S,x,S+this.velocity.x/2,x+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(f,v,S,x){f===void 0&&(f=!0),this.collideWorldBounds=f;var T=v!==void 0,C=S!==void 0;return(T||C)&&(this.worldBounce||(this.worldBounce=new c),T&&(this.worldBounce.x=v),C&&(this.worldBounce.y=S)),x!==void 0&&(this.onWorldBounds=x),this},setVelocity:function(f,v){return this.velocity.set(f,v),f=this.velocity.x,v=this.velocity.y,this.speed=Math.sqrt(f*f+v*v),this},setVelocityX:function(f){return this.setVelocity(f,this.velocity.y)},setVelocityY:function(f){return this.setVelocity(this.velocity.x,f)},setMaxVelocity:function(f,v){return this.maxVelocity.set(f,v),this},setMaxVelocityX:function(f){return this.maxVelocity.x=f,this},setMaxVelocityY:function(f){return this.maxVelocity.y=f,this},setMaxSpeed:function(f){return this.maxSpeed=f,this},setBounce:function(f,v){return this.bounce.set(f,v),this},setBounceX:function(f){return this.bounce.x=f,this},setBounceY:function(f){return this.bounce.y=f,this},setAcceleration:function(f,v){return this.acceleration.set(f,v),this},setAccelerationX:function(f){return this.acceleration.x=f,this},setAccelerationY:function(f){return this.acceleration.y=f,this},setAllowDrag:function(f){return f===void 0&&(f=!0),this.allowDrag=f,this},setAllowGravity:function(f){return f===void 0&&(f=!0),this.allowGravity=f,this},setAllowRotation:function(f){return f===void 0&&(f=!0),this.allowRotation=f,this},setDrag:function(f,v){return this.drag.set(f,v),this},setDamping:function(f){return this.useDamping=f,this},setDragX:function(f){return this.drag.x=f,this},setDragY:function(f){return this.drag.y=f,this},setGravity:function(f,v){return this.gravity.set(f,v),this},setGravityX:function(f){return this.gravity.x=f,this},setGravityY:function(f){return this.gravity.y=f,this},setFriction:function(f,v){return this.friction.set(f,v),this},setFrictionX:function(f){return this.friction.x=f,this},setFrictionY:function(f){return this.friction.y=f,this},setAngularVelocity:function(f){return this.angularVelocity=f,this},setAngularAcceleration:function(f){return this.angularAcceleration=f,this},setAngularDrag:function(f){return this.angularDrag=f,this},setMass:function(f){return this.mass=f,this},setImmovable:function(f){return f===void 0&&(f=!0),this.immovable=f,this},setEnable:function(f){return f===void 0&&(f=!0),this.enable=f,this},processX:function(f,v,S,x){this.x+=f,this.updateCenter(),v!==null&&(this.velocity.x=v);var T=this.blocked;S&&(T.left=!0,T.none=!1),x&&(T.right=!0,T.none=!1)},processY:function(f,v,S,x){this.y+=f,this.updateCenter(),v!==null&&(this.velocity.y=v);var T=this.blocked;S&&(T.up=!0,T.none=!1),x&&(T.down=!0,T.none=!1)},x:{get:function(){return this.position.x},set:function(f){this.position.x=f}},y:{get:function(){return this.position.y},set:function(f){this.position.y=f}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});r.exports=m},3909:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d,l,c,m,f,v){this.world=u,this.name="",this.active=!0,this.overlapOnly=d,this.object1=l,this.object2=c,this.collideCallback=m,this.processCallback=f,this.callbackContext=v},setName:function(h){return this.name=h,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});r.exports=p},99523:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(62832),p=n(25084),h=n(97602),u=n(56694),d=n(47401),l=n(10481),c=n(66634),m=n(46346),f=new u({initialize:function(S){this.world=S,this.scene=S.scene,this.sys=S.scene.sys},collider:function(v,S,x,T,C){return this.world.addCollider(v,S,x,T,C)},overlap:function(v,S,x,T,C){return this.world.addOverlap(v,S,x,T,C)},existing:function(v,S){var x=S?d.STATIC_BODY:d.DYNAMIC_BODY;return this.world.enableBody(v,x),v},staticImage:function(v,S,x,T){var C=new a(this.scene,v,S,x,T);return this.sys.displayList.add(C),this.world.enableBody(C,d.STATIC_BODY),C},image:function(v,S,x,T){var C=new a(this.scene,v,S,x,T);return this.sys.displayList.add(C),this.world.enableBody(C,d.DYNAMIC_BODY),C},staticSprite:function(v,S,x,T){var C=new p(this.scene,v,S,x,T);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,d.STATIC_BODY),C},sprite:function(v,S,x,T){var C=new p(this.scene,v,S,x,T);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,d.DYNAMIC_BODY),C},staticGroup:function(v,S){return this.sys.updateList.add(new m(this.world,this.world.scene,v,S))},group:function(v,S){return this.sys.updateList.add(new l(this.world,this.world.scene,v,S))},body:function(v,S,x,T){var C=new h(this.world);return C.position.set(v,S),x&&T&&C.setSize(x,T),this.world.add(C,d.DYNAMIC_BODY),C},staticBody:function(v,S,x,T){var C=new c(this.world);return C.position.set(v,S),x&&T&&C.setSize(x,T),this.world.add(C,d.STATIC_BODY),C},destroy:function(){this.world=null,this.scene=null,this.sys=null}});r.exports=f},75671:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(47401),p=function(h,u,d,l){var c=0,m=h.deltaAbsX()+u.deltaAbsX()+l;return h._dx===0&&u._dx===0?(h.embedded=!0,u.embedded=!0):h._dx>u._dx?(c=h.right-u.x,c>m&&!d||h.checkCollision.right===!1||u.checkCollision.left===!1?c=0:(h.touching.none=!1,h.touching.right=!0,u.touching.none=!1,u.touching.left=!0,u.physicsType===a.STATIC_BODY&&!d&&(h.blocked.none=!1,h.blocked.right=!0),h.physicsType===a.STATIC_BODY&&!d&&(u.blocked.none=!1,u.blocked.left=!0))):h._dx<u._dx&&(c=h.x-u.width-u.x,-c>m&&!d||h.checkCollision.left===!1||u.checkCollision.right===!1?c=0:(h.touching.none=!1,h.touching.left=!0,u.touching.none=!1,u.touching.right=!0,u.physicsType===a.STATIC_BODY&&!d&&(h.blocked.none=!1,h.blocked.left=!0),h.physicsType===a.STATIC_BODY&&!d&&(u.blocked.none=!1,u.blocked.right=!0))),h.overlapX=c,u.overlapX=c,c};r.exports=p},66185:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(47401),p=function(h,u,d,l){var c=0,m=h.deltaAbsY()+u.deltaAbsY()+l;return h._dy===0&&u._dy===0?(h.embedded=!0,u.embedded=!0):h._dy>u._dy?(c=h.bottom-u.y,c>m&&!d||h.checkCollision.down===!1||u.checkCollision.up===!1?c=0:(h.touching.none=!1,h.touching.down=!0,u.touching.none=!1,u.touching.up=!0,u.physicsType===a.STATIC_BODY&&!d&&(h.blocked.none=!1,h.blocked.down=!0),h.physicsType===a.STATIC_BODY&&!d&&(u.blocked.none=!1,u.blocked.up=!0))):h._dy<u._dy&&(c=h.y-u.bottom,-c>m&&!d||h.checkCollision.up===!1||u.checkCollision.down===!1?c=0:(h.touching.none=!1,h.touching.up=!0,u.touching.none=!1,u.touching.down=!0,u.physicsType===a.STATIC_BODY&&!d&&(h.blocked.none=!1,h.blocked.up=!0),h.physicsType===a.STATIC_BODY&&!d&&(u.blocked.none=!1,u.blocked.down=!0))),h.overlapY=c,u.overlapY=c,c};r.exports=p},10481:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(25084),p=n(56694),h=n(47401),u=n(72632),d=n(59192),l=n(42911),c=new p({Extends:d,initialize:function(f,v,S,x){if(!S&&!x)x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(l(S))x=S,S=null,x.internalCreateCallback=this.createCallbackHandler,x.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(S)&&l(S[0])){x=S[0];var T=this;S.forEach(function(C){C.internalCreateCallback=T.createCallbackHandler,C.internalRemoveCallback=T.removeCallbackHandler}),S=null}else x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=f,x.classType=u(x,"classType",a),this.physicsType=h.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:u(x,"collideWorldBounds",!1),setBoundsRectangle:u(x,"customBoundsRectangle",null),setAccelerationX:u(x,"accelerationX",0),setAccelerationY:u(x,"accelerationY",0),setAllowDrag:u(x,"allowDrag",!0),setAllowGravity:u(x,"allowGravity",!0),setAllowRotation:u(x,"allowRotation",!0),setDamping:u(x,"useDamping",!1),setBounceX:u(x,"bounceX",0),setBounceY:u(x,"bounceY",0),setDragX:u(x,"dragX",0),setDragY:u(x,"dragY",0),setEnable:u(x,"enable",!0),setGravityX:u(x,"gravityX",0),setGravityY:u(x,"gravityY",0),setFrictionX:u(x,"frictionX",0),setFrictionY:u(x,"frictionY",0),setMaxSpeed:u(x,"maxSpeed",-1),setMaxVelocityX:u(x,"maxVelocityX",1e4),setMaxVelocityY:u(x,"maxVelocityY",1e4),setVelocityX:u(x,"velocityX",0),setVelocityY:u(x,"velocityY",0),setAngularVelocity:u(x,"angularVelocity",0),setAngularAcceleration:u(x,"angularAcceleration",0),setAngularDrag:u(x,"angularDrag",0),setMass:u(x,"mass",1),setImmovable:u(x,"immovable",!1)},d.call(this,v,S,x),this.type="PhysicsGroup"},createCallbackHandler:function(m){m.body||this.world.enableBody(m,h.DYNAMIC_BODY);var f=m.body;for(var v in this.defaults)f[v](this.defaults[v])},removeCallbackHandler:function(m){m.body&&this.world.disableBody(m)},setVelocity:function(m,f,v){v===void 0&&(v=0);for(var S=this.getChildren(),x=0;x<S.length;x++)S[x].body.velocity.set(m+x*v,f+x*v);return this},setVelocityX:function(m,f){f===void 0&&(f=0);for(var v=this.getChildren(),S=0;S<v.length;S++)v[S].body.velocity.x=m+S*f;return this},setVelocityY:function(m,f){f===void 0&&(f=0);for(var v=this.getChildren(),S=0;S<v.length;S++)v[S].body.velocity.y=m+S*f;return this}});r.exports=c},22916:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g,n,a,p,h,u,d,l,c,m,f,v,S,x,T,C,w,b=function(F,P,D){g=F,n=P;var M=g.velocity.x,L=n.velocity.x;return a=g.pushable,c=g._dx<0,m=g._dx>0,f=g._dx===0,T=Math.abs(g.right-n.x)<=Math.abs(n.right-g.x),d=L-M*g.bounce.x,p=n.pushable,v=n._dx<0,S=n._dx>0,x=n._dx===0,C=!T,l=M-L*n.bounce.x,w=Math.abs(D),E()},E=function(){return m&&T&&n.blocked.right?(g.processX(-w,d,!1,!0),1):c&&C&&n.blocked.left?(g.processX(w,d,!0),1):S&&C&&g.blocked.right?(n.processX(-w,l,!1,!0),2):v&&T&&g.blocked.left?(n.processX(w,l,!0),2):0},A=function(){var F=g.velocity.x,P=n.velocity.x,D=Math.sqrt(P*P*n.mass/g.mass)*(P>0?1:-1),M=Math.sqrt(F*F*g.mass/n.mass)*(F>0?1:-1),L=(D+M)*.5;return D-=L,M-=L,h=L+D*g.bounce.x,u=L+M*n.bounce.x,c&&C?I(0):v&&T?I(1):m&&T?I(2):S&&C?I(3):!1},I=function(F){if(a&&p)w*=.5,F===0||F===3?(g.processX(w,h),n.processX(-w,u)):(g.processX(-w,h),n.processX(w,u));else if(a&&!p)F===0||F===3?g.processX(w,d,!0):g.processX(-w,d,!1,!0);else if(!a&&p)F===0||F===3?n.processX(-w,l,!1,!0):n.processX(w,l,!0);else{var P=w*.5;F===0?x?(g.processX(w,0,!0),n.processX(0,null,!1,!0)):S?(g.processX(P,0,!0),n.processX(-P,0,!1,!0)):(g.processX(P,n.velocity.x,!0),n.processX(-P,null,!1,!0)):F===1?f?(g.processX(0,null,!1,!0),n.processX(w,0,!0)):m?(g.processX(-P,0,!1,!0),n.processX(P,0,!0)):(g.processX(-P,null,!1,!0),n.processX(P,g.velocity.x,!0)):F===2?x?(g.processX(-w,0,!1,!0),n.processX(0,null,!0)):v?(g.processX(-P,0,!1,!0),n.processX(P,0,!0)):(g.processX(-P,n.velocity.x,!1,!0),n.processX(P,null,!0)):F===3&&(f?(g.processX(0,null,!0),n.processX(-w,0,!1,!0)):c?(g.processX(P,0,!0),n.processX(-P,0,!1,!0)):(g.processX(P,n.velocity.y,!0),n.processX(-P,null,!1,!0)))}return!0},R=function(F){F===1?n.velocity.x=0:T?n.processX(w,l,!0):n.processX(-w,l,!1,!0),g.moves&&(n.y+=(g.y-g.prev.y)*g.friction.y,n._dy=n.y-n.prev.y)},N=function(F){F===2?g.velocity.x=0:C?g.processX(w,d,!0):g.processX(-w,d,!1,!0),n.moves&&(g.y+=(n.y-n.prev.y)*n.friction.y,g._dy=g.y-g.prev.y)};r.exports={BlockCheck:E,Check:A,Set:b,Run:I,RunImmovableBody1:R,RunImmovableBody2:N}},67050:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g,n,a,p,h,u,d,l,c,m,f,v,S,x,T,C,w,b=function(F,P,D){g=F,n=P;var M=g.velocity.y,L=n.velocity.y;return a=g.pushable,c=g._dy<0,m=g._dy>0,f=g._dy===0,T=Math.abs(g.bottom-n.y)<=Math.abs(n.bottom-g.y),d=L-M*g.bounce.y,p=n.pushable,v=n._dy<0,S=n._dy>0,x=n._dy===0,C=!T,l=M-L*n.bounce.y,w=Math.abs(D),E()},E=function(){return m&&T&&n.blocked.down?(g.processY(-w,d,!1,!0),1):c&&C&&n.blocked.up?(g.processY(w,d,!0),1):S&&C&&g.blocked.down?(n.processY(-w,l,!1,!0),2):v&&T&&g.blocked.up?(n.processY(w,l,!0),2):0},A=function(){var F=g.velocity.y,P=n.velocity.y,D=Math.sqrt(P*P*n.mass/g.mass)*(P>0?1:-1),M=Math.sqrt(F*F*g.mass/n.mass)*(F>0?1:-1),L=(D+M)*.5;return D-=L,M-=L,h=L+D*g.bounce.y,u=L+M*n.bounce.y,c&&C?I(0):v&&T?I(1):m&&T?I(2):S&&C?I(3):!1},I=function(F){if(a&&p)w*=.5,F===0||F===3?(g.processY(w,h),n.processY(-w,u)):(g.processY(-w,h),n.processY(w,u));else if(a&&!p)F===0||F===3?g.processY(w,d,!0):g.processY(-w,d,!1,!0);else if(!a&&p)F===0||F===3?n.processY(-w,l,!1,!0):n.processY(w,l,!0);else{var P=w*.5;F===0?x?(g.processY(w,0,!0),n.processY(0,null,!1,!0)):S?(g.processY(P,0,!0),n.processY(-P,0,!1,!0)):(g.processY(P,n.velocity.y,!0),n.processY(-P,null,!1,!0)):F===1?f?(g.processY(0,null,!1,!0),n.processY(w,0,!0)):m?(g.processY(-P,0,!1,!0),n.processY(P,0,!0)):(g.processY(-P,null,!1,!0),n.processY(P,g.velocity.y,!0)):F===2?x?(g.processY(-w,0,!1,!0),n.processY(0,null,!0)):v?(g.processY(-P,0,!1,!0),n.processY(P,0,!0)):(g.processY(-P,n.velocity.y,!1,!0),n.processY(P,null,!0)):F===3&&(f?(g.processY(0,null,!0),n.processY(-w,0,!1,!0)):c?(g.processY(P,0,!0),n.processY(-P,0,!1,!0)):(g.processY(P,n.velocity.y,!0),n.processY(-P,null,!1,!0)))}return!0},R=function(F){F===1?n.velocity.y=0:T?n.processY(w,l,!0):n.processY(-w,l,!1,!0),g.moves&&(n.x+=(g.x-g.prev.x)*g.friction.x,n._dx=n.x-n.prev.x)},N=function(F){F===2?g.velocity.y=0:C?g.processY(w,d,!0):g.processY(-w,d,!1,!0),n.moves&&(g.x+=(n.x-n.prev.x)*n.friction.x,g._dx=g.x-g.prev.x)};r.exports={BlockCheck:E,Check:A,Set:b,Run:I,RunImmovableBody1:R,RunImmovableBody2:N}},61777:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(75671),p=n(22916),h=function(u,d,l,c,m){m===void 0&&(m=a(u,d,l,c));var f=u.immovable,v=d.immovable;if(l||m===0||f&&v||u.customSeparateX||d.customSeparateX)return m!==0||u.embedded&&d.embedded;var S=p.Set(u,d,m);return!f&&!v?S>0?!0:p.Check():(f?p.RunImmovableBody1(S):v&&p.RunImmovableBody2(S),!0)};r.exports=h},25299:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(66185),p=n(67050),h=function(u,d,l,c,m){m===void 0&&(m=a(u,d,l,c));var f=u.immovable,v=d.immovable;if(l||m===0||f&&v||u.customSeparateY||d.customSeparateY)return m!==0||u.embedded&&d.embedded;var S=p.Set(u,d,m);return!f&&!v?S>0?!0:p.Check():(f?p.RunImmovableBody1(S):v&&p.RunImmovableBody2(S),!0)};r.exports=h},66634:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(65650),p=n(56694),h=n(47401),u=n(94287),d=n(93736),l=new p({initialize:function(m,f){var v=64,S=64,x={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},T=f!==void 0;T&&f.displayWidth&&(v=f.displayWidth,S=f.displayHeight),T||(f=x),this.world=m,this.gameObject=T?f:void 0,this.isBody=!0,this.debugShowBody=m.defaults.debugShowStaticBody,this.debugBodyColor=m.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new d,this.position=new d(f.x-v*f.originX,f.y-S*f.originY),this.width=v,this.height=S,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new d(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=d.ZERO,this.allowGravity=!1,this.gravity=d.ZERO,this.bounce=d.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=h.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(c,m){return c&&c!==this.gameObject&&(this.gameObject.body=null,c.body=this,this.gameObject=c),m&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var c=this.gameObject;return c.getTopLeft(this.position),this.width=c.displayWidth,this.height=c.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(c,m){return m===void 0&&(m=c),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(c,m),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(c,m,f){f===void 0&&(f=!0);var v=this.gameObject;if(!c&&v.frame&&(c=v.frame.realWidth),!m&&v.frame&&(m=v.frame.realHeight),this.world.staticTree.remove(this),this.width=c,this.height=m,this.halfWidth=Math.floor(c/2),this.halfHeight=Math.floor(m/2),f&&v.getCenter){var S=v.displayWidth/2,x=v.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(S-this.halfWidth,x-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(c,m,f){return m===void 0&&(m=this.offset.x),f===void 0&&(f=this.offset.y),c>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=c,this.width=c*2,this.height=c*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(m,f),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(c,m){var f=this.gameObject;c===void 0&&(c=f.x),m===void 0&&(m=f.y),this.world.staticTree.remove(this),f.setPosition(c,m),f.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(c){return c.x=this.x,c.y=this.y,c.right=this.right,c.bottom=this.bottom,c},hitTest:function(c,m){return this.isCircle?a(this,c,m):u(this,c,m)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(c){var m=this.position,f=m.x+this.halfWidth,v=m.y+this.halfHeight;this.debugShowBody&&(c.lineStyle(c.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?c.strokeCircle(f,v,this.width/2):c.strokeRect(m.x,m.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(c){return c<=0&&(c=.1),this.mass=c,this},x:{get:function(){return this.position.x},set:function(c){this.world.staticTree.remove(this),this.position.x=c,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(c){this.world.staticTree.remove(this),this.position.y=c,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});r.exports=l},46346:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(25084),p=n(56694),h=n(47401),u=n(72632),d=n(59192),l=n(42911),c=new p({Extends:d,initialize:function(f,v,S,x){!S&&!x?x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:a}:l(S)?(x=S,S=null,x.internalCreateCallback=this.createCallbackHandler,x.internalRemoveCallback=this.removeCallbackHandler,x.createMultipleCallback=this.createMultipleCallbackHandler,x.classType=u(x,"classType",a)):Array.isArray(S)&&l(S[0])?(x=S,S=null,x.forEach(function(T){T.internalCreateCallback=this.createCallbackHandler,T.internalRemoveCallback=this.removeCallbackHandler,T.createMultipleCallback=this.createMultipleCallbackHandler,T.classType=u(T,"classType",a)})):x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=f,this.physicsType=h.STATIC_BODY,d.call(this,v,S,x),this.type="StaticPhysicsGroup"},createCallbackHandler:function(m){m.body||this.world.enableBody(m,h.STATIC_BODY)},removeCallbackHandler:function(m){m.body&&this.world.disableBody(m)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var m=this.children.entries,f=0;f<m.length;f++)m[f].body.reset();return this}});r.exports=c},85233:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(94240),p=n(97602),h=n(82897),u=n(56694),d=n(3909),l=n(47401),c=n(53996),m=n(92951),f=n(6659),v=n(27037),S=n(88456),x=n(41935),T=n(54726),C=n(75671),w=n(66185),b=n(44662),E=n(10850),A=n(83392),I=n(74623),R=n(25163),N=n(74118),F=n(68687),P=n(27354),D=n(61777),M=n(25299),L=n(58403),k=n(66634),V=n(28808),W=n(69360),K=n(93736),B=n(1071),G=new u({Extends:f,initialize:function($,z){f.call(this),this.scene=$,this.bodies=new L,this.staticBodies=new L,this.pendingDestroy=new L,this.colliders=new I,this.gravity=new K(E(z,"gravity.x",0),E(z,"gravity.y",0)),this.bounds=new N(E(z,"x",0),E(z,"y",0),E(z,"width",$.sys.scale.width),E(z,"height",$.sys.scale.height)),this.checkCollision={up:E(z,"checkCollision.up",!0),down:E(z,"checkCollision.down",!0),left:E(z,"checkCollision.left",!0),right:E(z,"checkCollision.right",!0)},this.fps=E(z,"fps",60),this.fixedStep=E(z,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=E(z,"timeScale",1),this.OVERLAP_BIAS=E(z,"overlapBias",4),this.TILE_BIAS=E(z,"tileBias",16),this.forceX=E(z,"forceX",!1),this.isPaused=E(z,"isPaused",!1),this._total=0,this.drawDebug=E(z,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:E(z,"debugShowBody",!0),debugShowStaticBody:E(z,"debugShowStaticBody",!0),debugShowVelocity:E(z,"debugShowVelocity",!0),bodyDebugColor:E(z,"debugBodyColor",16711935),staticBodyDebugColor:E(z,"debugStaticBodyColor",255),velocityDebugColor:E(z,"debugVelocityColor",65280)},this.maxEntries=E(z,"maxEntries",16),this.useTree=E(z,"useTree",!0),this.tree=new F(this.maxEntries),this.staticTree=new F(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new W,this._tempMatrix2=new W,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(O,$){$===void 0&&($=l.DYNAMIC_BODY),Array.isArray(O)||(O=[O]);for(var z=0;z<O.length;z++){var X=O[z];if(X.isParent)for(var Y=X.getChildren(),Z=0;Z<Y.length;Z++){var J=Y[Z];J.isParent?this.enable(J,$):this.enableBody(J,$)}else this.enableBody(X,$)}},enableBody:function(O,$){return $===void 0&&($=l.DYNAMIC_BODY),O.hasTransformComponent&&(O.body||($===l.DYNAMIC_BODY?O.body=new p(this,O):$===l.STATIC_BODY&&(O.body=new k(this,O))),this.add(O.body)),O},add:function(O){return O.physicsType===l.DYNAMIC_BODY?this.bodies.set(O):O.physicsType===l.STATIC_BODY&&(this.staticBodies.set(O),this.staticTree.insert(O)),O.enable=!0,O},disable:function(O){Array.isArray(O)||(O=[O]);for(var $=0;$<O.length;$++){var z=O[$];if(z.isParent)for(var X=z.getChildren(),Y=0;Y<X.length;Y++){var Z=X[Y];Z.isParent?this.disable(Z):this.disableBody(Z.body)}else this.disableBody(z.body)}},disableBody:function(O){this.remove(O),O.enable=!1},remove:function(O){O.physicsType===l.DYNAMIC_BODY?(this.tree.remove(O),this.bodies.delete(O)):O.physicsType===l.STATIC_BODY&&(this.staticBodies.delete(O),this.staticTree.remove(O))},createDebugGraphic:function(){var O=this.scene.sys.add.graphics({x:0,y:0});return O.setDepth(Number.MAX_VALUE),this.debugGraphic=O,this.drawDebug=!0,O},setBounds:function(O,$,z,X,Y,Z,J,tt){return this.bounds.setTo(O,$,z,X),Y!==void 0&&this.setBoundsCollision(Y,Z,J,tt),this},setBoundsCollision:function(O,$,z,X){return O===void 0&&(O=!0),$===void 0&&($=!0),z===void 0&&(z=!0),X===void 0&&(X=!0),this.checkCollision.left=O,this.checkCollision.right=$,this.checkCollision.up=z,this.checkCollision.down=X,this},pause:function(){return this.isPaused=!0,this.emit(v.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(v.RESUME),this},addCollider:function(O,$,z,X,Y){z===void 0&&(z=null),X===void 0&&(X=null),Y===void 0&&(Y=z);var Z=new d(this,!1,O,$,z,X,Y);return this.colliders.add(Z),Z},addOverlap:function(O,$,z,X,Y){z===void 0&&(z=null),X===void 0&&(X=null),Y===void 0&&(Y=z);var Z=new d(this,!0,O,$,z,X,Y);return this.colliders.add(Z),Z},removeCollider:function(O){return this.colliders.remove(O),this},setFPS:function(O){return this.fps=O,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(O,$){if(!(this.isPaused||this.bodies.size===0)){var z,X=this._frameTime,Y=this._frameTimeMS*this.timeScale;this._elapsed+=$;var Z,J=this.bodies.entries,tt=this._elapsed>=Y;for(this.fixedStep||(X=$*.001,tt=!0,this._elapsed=0),z=0;z<J.length;z++)Z=J[z],Z.enable&&Z.preUpdate(tt,X);if(tt){this._elapsed-=Y,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(J));var et=this.colliders.update();for(z=0;z<et.length;z++){var lt=et[z];lt.active&&lt.update()}this.emit(v.WORLD_STEP,X)}for(;this._elapsed>=Y;)this._elapsed-=Y,this.step(X)}},step:function(O){var $,z,X=this.bodies.entries,Y=X.length;for($=0;$<Y;$++)z=X[$],z.enable&&z.update(O);this.useTree&&(this.tree.clear(),this.tree.load(X));var Z=this.colliders.update();for($=0;$<Z.length;$++){var J=Z[$];J.active&&J.update()}this.emit(v.WORLD_STEP,O),this.stepsLastFrame++},postUpdate:function(){var O,$,z=this.bodies.entries,X=z.length,Y=this.bodies,Z=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,O=0;O<X;O++)$=z[O],$.enable&&$.postUpdate();if(this.drawDebug){var J=this.debugGraphic;for(J.clear(),O=0;O<X;O++)$=z[O],$.willDrawDebug()&&$.drawDebug(J);for(z=Z.entries,X=z.length,O=0;O<X;O++)$=z[O],$.willDrawDebug()&&$.drawDebug(J)}var tt=this.pendingDestroy;if(tt.size>0){var et=this.tree,lt=this.staticTree;for(z=tt.entries,X=z.length,O=0;O<X;O++)$=z[O],$.physicsType===l.DYNAMIC_BODY?(et.remove($),Y.delete($)):$.physicsType===l.STATIC_BODY&&(lt.remove($),Z.delete($)),$.world=void 0,$.gameObject=void 0;tt.clear()}},updateMotion:function(O,$){O.allowRotation&&this.computeAngularVelocity(O,$),this.computeVelocity(O,$)},computeAngularVelocity:function(O,$){var z=O.angularVelocity,X=O.angularAcceleration,Y=O.angularDrag,Z=O.maxAngular;X?z+=X*$:O.allowDrag&&Y&&(Y*=$,x(z-Y,0,.1)?z-=Y:T(z+Y,0,.1)?z+=Y:z=0),z=h(z,-Z,Z);var J=z-O.angularVelocity;O.angularVelocity+=J,O.rotation+=O.angularVelocity*$},computeVelocity:function(O,$){var z=O.velocity.x,X=O.acceleration.x,Y=O.drag.x,Z=O.maxVelocity.x,J=O.velocity.y,tt=O.acceleration.y,et=O.drag.y,lt=O.maxVelocity.y,ut=O.speed,ct=O.maxSpeed,ht=O.allowDrag,xt=O.useDamping;O.allowGravity&&(z+=(this.gravity.x+O.gravity.x)*$,J+=(this.gravity.y+O.gravity.y)*$),X?z+=X*$:ht&&Y&&(xt?(Y=Math.pow(Y,$),z*=Y,ut=Math.sqrt(z*z+J*J),S(ut,0,.001)&&(z=0)):(Y*=$,x(z-Y,0,.01)?z-=Y:T(z+Y,0,.01)?z+=Y:z=0)),tt?J+=tt*$:ht&&et&&(xt?(et=Math.pow(et,$),J*=et,ut=Math.sqrt(z*z+J*J),S(ut,0,.001)&&(J=0)):(et*=$,x(J-et,0,.01)?J-=et:T(J+et,0,.01)?J+=et:J=0)),z=h(z,-Z,Z),J=h(J,-lt,lt),O.velocity.set(z,J),ct>-1&&O.velocity.length()>ct&&(O.velocity.normalize().scale(ct),ut=ct),O.speed=ut},separate:function(O,$,z,X,Y){var Z,J,tt=!1,et=!0;if(!O.enable||!$.enable||O.checkCollision.none||$.checkCollision.none||!this.intersects(O,$)||z&&z.call(X,O.gameObject,$.gameObject)===!1)return tt;if(O.isCircle||$.isCircle){var lt=this.separateCircle(O,$,Y);lt.result?(tt=!0,et=!1):(Z=lt.x,J=lt.y,et=!0)}if(et){var ut=!1,ct=!1,ht=this.OVERLAP_BIAS;Y?(ut=D(O,$,Y,ht,Z),ct=M(O,$,Y,ht,J)):this.forceX||Math.abs(this.gravity.y+O.gravity.y)<Math.abs(this.gravity.x+O.gravity.x)?(ut=D(O,$,Y,ht,Z),this.intersects(O,$)&&(ct=M(O,$,Y,ht,J))):(ct=M(O,$,Y,ht,J),this.intersects(O,$)&&(ut=D(O,$,Y,ht,Z))),tt=ut||ct}return tt&&(Y?(O.onOverlap||$.onOverlap)&&this.emit(v.OVERLAP,O.gameObject,$.gameObject,O,$):(O.onCollide||$.onCollide)&&this.emit(v.COLLIDE,O.gameObject,$.gameObject,O,$)),tt},separateCircle:function(O,$,z){C(O,$,!1,0),w(O,$,!1,0);var X=O.isCircle,Y=$.isCircle,Z=O.center,J=$.center,tt=O.immovable,et=$.immovable,lt=O.velocity,ut=$.velocity,ct=0,ht=!0;if(X!==Y){ht=!1;var xt=Z.x,Tt=Z.y,At=O.halfWidth,Rt=$.position.x,mt=$.position.y,bt=$.right,Ct=$.bottom;Y&&(xt=J.x,Tt=J.y,At=$.halfWidth,Rt=O.position.x,mt=O.position.y,bt=O.right,Ct=O.bottom),Tt<mt?xt<Rt?ct=c(xt,Tt,Rt,mt)-At:xt>bt&&(ct=c(xt,Tt,bt,mt)-At):Tt>Ct&&(xt<Rt?ct=c(xt,Tt,Rt,Ct)-At:xt>bt&&(ct=c(xt,Tt,bt,Ct)-At)),ct*=-1}else ct=O.halfWidth+$.halfWidth-m(Z,J);O.overlapR=ct,$.overlapR=ct;var Ht=a(Z,J),zt=(ct+A.EPSILON)*Math.cos(Ht),Jt=(ct+A.EPSILON)*Math.sin(Ht),ae={overlap:ct,result:!1,x:zt,y:Jt};if(z&&(!ht||ht&&ct!==0))return ae.result=!0,ae;if(!ht&&ct===0||tt&&et||O.customSeparateX||$.customSeparateX)return ae.x=void 0,ae.y=void 0,ae;var _t=!O.pushable&&!$.pushable;if(ht){var Zt=Z.x-J.x,de=Z.y-J.y,He=Math.sqrt(Math.pow(Zt,2)+Math.pow(de,2)),Ne=(J.x-Z.x)/He||0,sn=(J.y-Z.y)/He||0,Vn=2*(lt.x*Ne+lt.y*sn-ut.x*Ne-ut.y*sn)/(O.mass+$.mass);(tt||et)&&(Vn*=2),tt||(lt.x=lt.x-Vn/O.mass*Ne,lt.y=lt.y-Vn/O.mass*sn,lt.multiply(O.bounce)),et||(ut.x=ut.x+Vn/$.mass*Ne,ut.y=ut.y+Vn/$.mass*sn,ut.multiply($.bounce)),!tt&&!et&&(zt*=.5,Jt*=.5),tt||(O.x-=zt,O.y-=Jt,O.updateCenter()),et||($.x+=zt,$.y+=Jt,$.updateCenter()),ae.result=!0}else!tt||O.pushable||_t?(O.x-=zt,O.y-=Jt,O.updateCenter()):(!et||$.pushable||_t)&&($.x+=zt,$.y+=Jt,$.updateCenter()),ae.x=void 0,ae.y=void 0;return ae},intersects:function(O,$){return O===$?!1:!O.isCircle&&!$.isCircle?!(O.right<=$.left||O.bottom<=$.top||O.left>=$.right||O.top>=$.bottom):O.isCircle?$.isCircle?m(O.center,$.center)<=O.halfWidth+$.halfWidth:this.circleBodyIntersects(O,$):this.circleBodyIntersects($,O)},circleBodyIntersects:function(O,$){var z=h(O.center.x,$.left,$.right),X=h(O.center.y,$.top,$.bottom),Y=(O.center.x-z)*(O.center.x-z),Z=(O.center.y-X)*(O.center.y-X);return Y+Z<=O.halfWidth*O.halfWidth},overlap:function(O,$,z,X,Y){return z===void 0&&(z=null),X===void 0&&(X=null),Y===void 0&&(Y=z),this.collideObjects(O,$,z,X,Y,!0)},collide:function(O,$,z,X,Y){return z===void 0&&(z=null),X===void 0&&(X=null),Y===void 0&&(Y=z),this.collideObjects(O,$,z,X,Y,!1)},collideObjects:function(O,$,z,X,Y,Z){var J,tt;O.isParent&&(O.physicsType===void 0||$===void 0||O===$)&&(O=O.children.entries),$&&$.isParent&&$.physicsType===void 0&&($=$.children.entries);var et=Array.isArray(O),lt=Array.isArray($);if(this._total=0,!et&&!lt)this.collideHandler(O,$,z,X,Y,Z);else if(!et&&lt)for(J=0;J<$.length;J++)this.collideHandler(O,$[J],z,X,Y,Z);else if(et&&!lt)if($)for(J=0;J<O.length;J++)this.collideHandler(O[J],$,z,X,Y,Z);else for(J=0;J<O.length;J++){var ut=O[J];for(tt=J+1;tt<O.length;tt++)J!==tt&&this.collideHandler(ut,O[tt],z,X,Y,Z)}else for(J=0;J<O.length;J++)for(tt=0;tt<$.length;tt++)this.collideHandler(O[J],$[tt],z,X,Y,Z);return this._total>0},collideHandler:function(O,$,z,X,Y,Z){if($===void 0&&O.isParent)return this.collideGroupVsGroup(O,O,z,X,Y,Z);if(!O||!$)return!1;if(O.body||O.isBody){if($.body||$.isBody)return this.collideSpriteVsSprite(O,$,z,X,Y,Z);if($.isParent)return this.collideSpriteVsGroup(O,$,z,X,Y,Z);if($.isTilemap)return this.collideSpriteVsTilemapLayer(O,$,z,X,Y,Z)}else if(O.isParent){if($.body||$.isBody)return this.collideSpriteVsGroup($,O,z,X,Y,Z);if($.isParent)return this.collideGroupVsGroup(O,$,z,X,Y,Z);if($.isTilemap)return this.collideGroupVsTilemapLayer(O,$,z,X,Y,Z)}else if(O.isTilemap){if($.body||$.isBody)return this.collideSpriteVsTilemapLayer($,O,z,X,Y,Z);if($.isParent)return this.collideGroupVsTilemapLayer($,O,z,X,Y,Z)}},collideSpriteVsSprite:function(O,$,z,X,Y,Z){var J=O.isBody?O:O.body,tt=$.isBody?$:$.body;return!J||!tt?!1:(this.separate(J,tt,X,Y,Z)&&(z&&z.call(Y,O,$),this._total++),!0)},collideSpriteVsGroup:function(O,$,z,X,Y,Z){var J=O.isBody?O:O.body;if(!($.length===0||!J||!J.enable||J.checkCollision.none)){var tt,et,lt;if(this.useTree||$.physicsType===l.STATIC_BODY){var ut=this.treeMinMax;ut.minX=J.left,ut.minY=J.top,ut.maxX=J.right,ut.maxY=J.bottom;var ct=$.physicsType===l.DYNAMIC_BODY?this.tree.search(ut):this.staticTree.search(ut);for(et=ct.length,tt=0;tt<et;tt++)lt=ct[tt],!(J===lt||!lt.enable||lt.checkCollision.none||!$.contains(lt.gameObject))&&this.separate(J,lt,X,Y,Z)&&(z&&z.call(Y,J.gameObject,lt.gameObject),this._total++)}else{var ht=$.getChildren(),xt=$.children.entries.indexOf(O);for(et=ht.length,tt=0;tt<et;tt++)lt=ht[tt].body,!(!lt||tt===xt||!lt.enable)&&this.separate(J,lt,X,Y,Z)&&(z&&z.call(Y,J.gameObject,lt.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(O,$,z,X,Y,Z){var J=O.getChildren();if(J.length===0)return!1;for(var tt=!1,et=0;et<J.length;et++)(J[et].body||J[et].isBody)&&this.collideSpriteVsTilemapLayer(J[et],$,z,X,Y,Z)&&(tt=!0);return tt},collideTiles:function(O,$,z,X,Y){return $.length===0||O.body&&!O.body.enable||O.isBody&&!O.enable?!1:this.collideSpriteVsTilesHandler(O,$,z,X,Y,!1,!1)},overlapTiles:function(O,$,z,X,Y){return $.length===0||O.body&&!O.body.enable||O.isBody&&!O.enable?!1:this.collideSpriteVsTilesHandler(O,$,z,X,Y,!0,!1)},collideSpriteVsTilemapLayer:function(O,$,z,X,Y,Z){var J=O.isBody?O:O.body;if(!J.enable||J.checkCollision.none)return!1;var tt=J.x,et=J.y,lt=J.width,ut=J.height,ct=$.layer;if(ct.tileWidth>ct.baseTileWidth){var ht=(ct.tileWidth-ct.baseTileWidth)*$.scaleX;tt-=ht,lt+=ht}if(ct.tileHeight>ct.baseTileHeight){var xt=(ct.tileHeight-ct.baseTileHeight)*$.scaleY;ut+=xt}var Tt=Z?null:this.tileFilterOptions,At=b(tt,et,lt,ut,Tt,$.scene.cameras.main,$.layer);return At.length===0?!1:this.collideSpriteVsTilesHandler(O,At,z,X,Y,Z,!0)},collideSpriteVsTilesHandler:function(O,$,z,X,Y,Z,J){for(var tt=O.isBody?O:O.body,et,lt={left:0,right:0,top:0,bottom:0},ut,ct=!1,ht=0;ht<$.length;ht++){et=$[ht],ut=et.tilemapLayer;var xt=ut.tileToWorldXY(et.x,et.y);lt.left=xt.x,lt.top=xt.y,et.baseHeight!==et.height&&(lt.top-=(et.height-et.baseHeight)*ut.scaleY),lt.right=lt.left+et.width*ut.scaleX,lt.bottom=lt.top+et.height*ut.scaleY,V(lt,tt)&&(!X||X.call(Y,O,et))&&R(et,O)&&(Z||P(ht,tt,et,lt,ut,this.TILE_BIAS,J))&&(this._total++,ct=!0,z&&z.call(Y,O,et),Z&&tt.onOverlap?this.emit(v.TILE_OVERLAP,O,et,tt):tt.onCollide&&this.emit(v.TILE_COLLIDE,O,et,tt))}return ct},collideGroupVsGroup:function(O,$,z,X,Y,Z){if(!(O.length===0||$.length===0))for(var J=O.getChildren(),tt=0;tt<J.length;tt++)this.collideSpriteVsGroup(J[tt],$,z,X,Y,Z)},wrap:function(O,$){O.body?this.wrapObject(O,$):O.getChildren?this.wrapArray(O.getChildren(),$):Array.isArray(O)?this.wrapArray(O,$):this.wrapObject(O,$)},wrapArray:function(O,$){for(var z=0;z<O.length;z++)this.wrapObject(O[z],$)},wrapObject:function(O,$){$===void 0&&($=0),O.x=B(O.x,this.bounds.left-$,this.bounds.right+$),O.y=B(O.y,this.bounds.top-$,this.bounds.bottom+$)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});r.exports=G},5321:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setAcceleration:function(n,a){return this.body.acceleration.set(n,a),this},setAccelerationX:function(n){return this.body.acceleration.x=n,this},setAccelerationY:function(n){return this.body.acceleration.y=n,this}};r.exports=g},29257:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setAngularVelocity:function(n){return this.body.angularVelocity=n,this},setAngularAcceleration:function(n){return this.body.angularAcceleration=n,this},setAngularDrag:function(n){return this.body.angularDrag=n,this}};r.exports=g},62122:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setBounce:function(n,a){return this.body.bounce.set(n,a),this},setBounceX:function(n){return this.body.bounce.x=n,this},setBounceY:function(n){return this.body.bounce.y=n,this},setCollideWorldBounds:function(n,a,p,h){return this.body.setCollideWorldBounds(n,a,p,h),this}};r.exports=g},99803:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setDebug:function(n,a,p){return this.debugShowBody=n,this.debugShowVelocity=a,this.debugBodyColor=p,this},setDebugBodyColor:function(n){return this.body.debugBodyColor=n,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(n){this.body.debugShowBody=n}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(n){this.body.debugShowVelocity=n}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(n){this.body.debugBodyColor=n}}};r.exports=g},87145:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setDrag:function(n,a){return this.body.drag.set(n,a),this},setDragX:function(n){return this.body.drag.x=n,this},setDragY:function(n){return this.body.drag.y=n,this},setDamping:function(n){return this.body.useDamping=n,this}};r.exports=g},96174:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={enableBody:function(n,a,p,h,u){return n&&this.body.reset(a,p),h&&(this.body.gameObject.active=!0),u&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(n,a){return n===void 0&&(n=!1),a===void 0&&(a=!1),this.body.stop(),this.body.enable=!1,n&&(this.body.gameObject.active=!1),a&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};r.exports=g},51702:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setFriction:function(n,a){return this.body.friction.set(n,a),this},setFrictionX:function(n){return this.body.friction.x=n,this},setFrictionY:function(n){return this.body.friction.y=n,this}};r.exports=g},25578:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setGravity:function(n,a){return this.body.gravity.set(n,a),this},setGravityX:function(n){return this.body.gravity.x=n,this},setGravityY:function(n){return this.body.gravity.y=n,this}};r.exports=g},72029:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setImmovable:function(n){return n===void 0&&(n=!0),this.body.immovable=n,this}};r.exports=g},34566:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setMass:function(n){return this.body.mass=n,this}};r.exports=g},2732:(r,g,n)=>{var a=n(15147),p=n(26673),h=n(22184),u=n(26535),d=function(l,c,m,f,v,S){var x=a(l,c-f,m-f,2*f,2*f,v,S);if(x.length===0)return x;for(var T=new p(c,m,f),C=new p,w=[],b=0;b<x.length;b++){var E=x[b];E.isCircle?(C.setTo(E.center.x,E.center.y,E.halfWidth),h(T,C)&&w.push(E)):u(T,E)&&w.push(E)}return w};r.exports=d},15147:r=>{var g=function(n,a,p,h,u,d,l){d===void 0&&(d=!0),l===void 0&&(l=!1);var c=[],m=[],f=n.treeMinMax;if(f.minX=a,f.minY=p,f.maxX=a+h,f.maxY=p+u,l&&(m=n.staticTree.search(f)),d&&n.useTree)c=n.tree.search(f);else if(d){var v=n.bodies,S={position:{x:a,y:p},left:a,top:p,right:a+h,bottom:p+u,isCircle:!1},x=n.intersects;v.iterate(function(T){x(T,S)&&c.push(T)})}return m.concat(c)};r.exports=g},57527:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setPushable:function(n){return n===void 0&&(n=!0),this.body.pushable=n,this}};r.exports=g},77687:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setOffset:function(n,a){return this.body.setOffset(n,a),this},setSize:function(n,a,p){return this.body.setSize(n,a,p),this},setBodySize:function(n,a,p){return this.body.setSize(n,a,p),this},setCircle:function(n,a,p){return this.body.setCircle(n,a,p),this}};r.exports=g},66536:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setVelocity:function(n,a){return this.body.setVelocity(n,a),this},setVelocityX:function(n){return this.body.setVelocityX(n),this},setVelocityY:function(n){return this.body.setVelocityY(n),this},setMaxVelocity:function(n,a){return this.body.maxVelocity.set(n,a),this}};r.exports=g},7864:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Acceleration:n(5321),Angular:n(29257),Bounce:n(62122),Debug:n(99803),Drag:n(87145),Enable:n(96174),Friction:n(51702),Gravity:n(25578),Immovable:n(72029),Mass:n(34566),OverlapCirc:n(2732),OverlapRect:n(15147),Pushable:n(57527),Size:n(77687),Velocity:n(66536)}},47401:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};r.exports=g},22346:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collide"},95092:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="overlap"},15775:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},74142:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},22825:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="tilecollide"},10851:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="tileoverlap"},7543:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="worldbounds"},1487:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="worldstep"},27037:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={COLLIDE:n(22346),OVERLAP:n(95092),PAUSE:n(15775),RESUME:n(74142),TILE_COLLIDE:n(22825),TILE_OVERLAP:n(10851),WORLD_BOUNDS:n(7543),WORLD_STEP:n(1487)}},39977:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(47401),p=n(98611),h={ArcadePhysics:n(66150),Body:n(97602),Collider:n(3909),Components:n(7864),Events:n(27037),Factory:n(99523),GetOverlapX:n(75671),GetOverlapY:n(66185),SeparateX:n(61777),SeparateY:n(25299),Group:n(10481),Image:n(62832),Sprite:n(25084),StaticBody:n(66634),StaticGroup:n(46346),Tilemap:n(8413),World:n(85233)};h=p(!1,h,a),r.exports=h},25163:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.collisionCallback?!n.collisionCallback.call(n.collisionCallbackContext,a,n):n.layer.callbacks[n.index]?!n.layer.callbacks[n.index].callback.call(n.layer.callbacks[n.index].callbackContext,a,n):!0};r.exports=g},98209:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a<0?(n.blocked.none=!1,n.blocked.left=!0):a>0&&(n.blocked.none=!1,n.blocked.right=!0),n.position.x-=a,n.updateCenter(),n.bounce.x===0?n.velocity.x=0:n.velocity.x=-n.velocity.x*n.bounce.x};r.exports=g},72792:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a<0?(n.blocked.none=!1,n.blocked.up=!0):a>0&&(n.blocked.none=!1,n.blocked.down=!0),n.position.y-=a,n.updateCenter(),n.bounce.y===0?n.velocity.y=0:n.velocity.y=-n.velocity.y*n.bounce.y};r.exports=g},27354:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(14405),p=n(52926),h=n(28808),u=function(d,l,c,m,f,v,S){var x=m.left,T=m.top,C=m.right,w=m.bottom,b=c.faceLeft||c.faceRight,E=c.faceTop||c.faceBottom;if(S||(b=!0,E=!0),!b&&!E)return!1;var A=0,I=0,R=0,N=1;if(l.deltaAbsX()>l.deltaAbsY()?R=-1:l.deltaAbsX()<l.deltaAbsY()&&(N=-1),l.deltaX()!==0&&l.deltaY()!==0&&b&&E&&(R=Math.min(Math.abs(l.position.x-C),Math.abs(l.right-x)),N=Math.min(Math.abs(l.position.y-w),Math.abs(l.bottom-T))),R<N){if(b&&(A=a(l,c,x,C,v,S),A!==0&&!h(m,l)))return!0;E&&(I=p(l,c,T,w,v,S))}else{if(E&&(I=p(l,c,T,w,v,S),I!==0&&!h(m,l)))return!0;b&&(A=a(l,c,x,C,v,S))}return A!==0||I!==0};r.exports=u},14405:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(98209),p=function(h,u,d,l,c,m){var f=0,v=u.faceLeft,S=u.faceRight,x=u.collideLeft,T=u.collideRight;return m||(v=!0,S=!0,x=!0,T=!0),h.deltaX()<0&&T&&h.checkCollision.left?S&&h.x<l&&(f=h.x-l,f<-c&&(f=0)):h.deltaX()>0&&x&&h.checkCollision.right&&v&&h.right>d&&(f=h.right-d,f>c&&(f=0)),f!==0&&(h.customSeparateX?h.overlapX=f:a(h,f)),f};r.exports=p},52926:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72792),p=function(h,u,d,l,c,m){var f=0,v=u.faceTop,S=u.faceBottom,x=u.collideUp,T=u.collideDown;return m||(v=!0,S=!0,x=!0,T=!0),h.deltaY()<0&&T&&h.checkCollision.up?S&&h.y<l&&(f=h.y-l,f<-c&&(f=0)):h.deltaY()>0&&x&&h.checkCollision.down&&v&&h.bottom>d&&(f=h.bottom-d,f>c&&(f=0)),f!==0&&(h.customSeparateY?h.overlapY=f:a(h,f)),f};r.exports=p},28808:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return!(a.right<=n.left||a.bottom<=n.top||a.position.x>=n.right||a.position.y>=n.bottom)};r.exports=g},8413:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ProcessTileCallbacks:n(25163),ProcessTileSeparationX:n(98209),ProcessTileSeparationY:n(72792),SeparateTile:n(27354),TileCheckX:n(14405),TileCheckY:n(52926),TileIntersectsBody:n(28808)};r.exports=a},53954:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Arcade:n(39977),Matter:n(45949)}},63568:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(93736),h=new a({initialize:function(){this.boundsCenter=new p,this.centerDiff=new p},parseBody:function(u){if(u=u.hasOwnProperty("body")?u.body:u,!u.hasOwnProperty("bounds")||!u.hasOwnProperty("centerOfMass"))return!1;var d=this.boundsCenter,l=this.centerDiff,c=u.bounds.max.x-u.bounds.min.x,m=u.bounds.max.y-u.bounds.min.y,f=c*u.centerOfMass.x,v=m*u.centerOfMass.y;return d.set(c/2,m/2),l.set(f-d.x,v-d.y),!0},getTopLeft:function(u,d,l){if(d===void 0&&(d=0),l===void 0&&(l=0),this.parseBody(u)){var c=this.boundsCenter,m=this.centerDiff;return new p(d+c.x+m.x,l+c.y+m.y)}return!1},getTopCenter:function(u,d,l){if(d===void 0&&(d=0),l===void 0&&(l=0),this.parseBody(u)){var c=this.boundsCenter,m=this.centerDiff;return new p(d+m.x,l+c.y+m.y)}return!1},getTopRight:function(u,d,l){if(d===void 0&&(d=0),l===void 0&&(l=0),this.parseBody(u)){var c=this.boundsCenter,m=this.centerDiff;return new p(d-(c.x-m.x),l+c.y+m.y)}return!1},getLeftCenter:function(u,d,l){if(d===void 0&&(d=0),l===void 0&&(l=0),this.parseBody(u)){var c=this.boundsCenter,m=this.centerDiff;return new p(d+c.x+m.x,l+m.y)}return!1},getCenter:function(u,d,l){if(d===void 0&&(d=0),l===void 0&&(l=0),this.parseBody(u)){var c=this.centerDiff;return new p(d+c.x,l+c.y)}return!1},getRightCenter:function(u,d,l){if(d===void 0&&(d=0),l===void 0&&(l=0),this.parseBody(u)){var c=this.boundsCenter,m=this.centerDiff;return new p(d-(c.x-m.x),l+m.y)}return!1},getBottomLeft:function(u,d,l){if(d===void 0&&(d=0),l===void 0&&(l=0),this.parseBody(u)){var c=this.boundsCenter,m=this.centerDiff;return new p(d+c.x+m.x,l-(c.y-m.y))}return!1},getBottomCenter:function(u,d,l){if(d===void 0&&(d=0),l===void 0&&(l=0),this.parseBody(u)){var c=this.boundsCenter,m=this.centerDiff;return new p(d+m.x,l-(c.y-m.y))}return!1},getBottomRight:function(u,d,l){if(d===void 0&&(d=0),l===void 0&&(l=0),this.parseBody(u)){var c=this.boundsCenter,m=this.centerDiff;return new p(d-(c.x-m.x),l-(c.y-m.y))}return!1}});r.exports=h},18171:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16929);a.Body=n(84125),a.Composite=n(11299),a.World=n(72005),a.Collision=n(63454),a.Detector=n(13657),a.Pairs=n(91327),a.Pair=n(70584),a.Query=n(13390),a.Resolver=n(44272),a.Constraint=n(52838),a.Common=n(68758),a.Engine=n(45775),a.Events=n(39073),a.Sleeping=n(22806),a.Plugin=n(84474),a.Bodies=n(68516),a.Composites=n(56643),a.Axes=n(50658),a.Bounds=n(84091),a.Svg=n(92765),a.Vector=n(10438),a.Vertices=n(39745),a.World.add=a.Composite.add,a.World.remove=a.Composite.remove,a.World.addComposite=a.Composite.addComposite,a.World.addBody=a.Composite.addBody,a.World.addConstraint=a.Composite.addConstraint,a.World.clear=a.Composite.clear,r.exports=a},72653:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(68516),p=n(56694),h=n(56643),u=n(52838),d=n(92765),l=n(3860),c=n(7030),m=n(73658),f=n(84720),v=n(10998),S=n(72829),x=n(88596),T=n(39745),C=new p({initialize:function(b){this.world=b,this.scene=b.scene,this.sys=b.scene.sys},rectangle:function(w,b,E,A,I){var R=a.rectangle(w,b,E,A,I);return this.world.add(R),R},trapezoid:function(w,b,E,A,I,R){var N=a.trapezoid(w,b,E,A,I,R);return this.world.add(N),N},circle:function(w,b,E,A,I){var R=a.circle(w,b,E,A,I);return this.world.add(R),R},polygon:function(w,b,E,A,I){var R=a.polygon(w,b,E,A,I);return this.world.add(R),R},fromVertices:function(w,b,E,A,I,R,N){typeof E=="string"&&(E=T.fromPath(E));var F=a.fromVertices(w,b,E,A,I,R,N);return this.world.add(F),F},fromPhysicsEditor:function(w,b,E,A,I){I===void 0&&(I=!0);var R=v.parseBody(w,b,E,A);return I&&!this.world.has(R)&&this.world.add(R),R},fromSVG:function(w,b,E,A,I,R){A===void 0&&(A=1),I===void 0&&(I={}),R===void 0&&(R=!0);for(var N=E.getElementsByTagName("path"),F=[],P=0;P<N.length;P++){var D=d.pathToVertices(N[P],30);A!==1&&T.scale(D,A,A),F.push(D)}var M=a.fromVertices(w,b,F,I);return R&&this.world.add(M),M},fromJSON:function(w,b,E,A,I){A===void 0&&(A={}),I===void 0&&(I=!0);var R=S.parseBody(w,b,E,A);return R&&I&&this.world.add(R),R},imageStack:function(w,b,E,A,I,R,N,F,P){N===void 0&&(N=0),F===void 0&&(F=0),P===void 0&&(P={});var D=this.world,M=this.sys.displayList;P.addToWorld=!1;var L=h.stack(E,A,I,R,N,F,function(k,V){var W=new c(D,k,V,w,b,P);return M.add(W),W.body});return D.add(L),L},stack:function(w,b,E,A,I,R,N){var F=h.stack(w,b,E,A,I,R,N);return this.world.add(F),F},pyramid:function(w,b,E,A,I,R,N){var F=h.pyramid(w,b,E,A,I,R,N);return this.world.add(F),F},chain:function(w,b,E,A,I,R){return h.chain(w,b,E,A,I,R)},mesh:function(w,b,E,A,I){return h.mesh(w,b,E,A,I)},newtonsCradle:function(w,b,E,A,I){var R=h.newtonsCradle(w,b,E,A,I);return this.world.add(R),R},car:function(w,b,E,A,I){var R=h.car(w,b,E,A,I);return this.world.add(R),R},softBody:function(w,b,E,A,I,R,N,F,P,D){var M=h.softBody(w,b,E,A,I,R,N,F,P,D);return this.world.add(M),M},joint:function(w,b,E,A,I){return this.constraint(w,b,E,A,I)},spring:function(w,b,E,A,I){return this.constraint(w,b,E,A,I)},constraint:function(w,b,E,A,I){A===void 0&&(A=1),I===void 0&&(I={}),I.bodyA=w.type==="body"?w:w.body,I.bodyB=b.type==="body"?b:b.body,isNaN(E)||(I.length=E),I.stiffness=A;var R=u.create(I);return this.world.add(R),R},worldConstraint:function(w,b,E,A){E===void 0&&(E=1),A===void 0&&(A={}),A.bodyB=w.type==="body"?w:w.body,isNaN(b)||(A.length=b),A.stiffness=E;var I=u.create(A);return this.world.add(I),I},mouseSpring:function(w){return this.pointerConstraint(w)},pointerConstraint:function(w){w===void 0&&(w={}),w.hasOwnProperty("render")||(w.render={visible:!1});var b=new x(this.scene,this.world,w);return this.world.add(b.constraint),b},image:function(w,b,E,A,I){var R=new c(this.world,w,b,E,A,I);return this.sys.displayList.add(R),R},tileBody:function(w,b){return new f(this.world,w,b)},sprite:function(w,b,E,A,I){var R=new m(this.world,w,b,E,A,I);return this.sys.displayList.add(R),this.sys.updateList.add(R),R},gameObject:function(w,b,E){return l(this.world,w,b,E)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});r.exports=C},3860:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74527),p=n(72632),h=n(93736);function u(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}var d=function(l,c,m,f){m===void 0&&(m={}),f===void 0&&(f=!0);var v=c.x,S=c.y;c.body={temp:!0,position:{x:v,y:S}};var x=[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity];if(x.forEach(function(C){for(var w in C)u(C[w])?Object.defineProperty(c,w,{get:C[w].get,set:C[w].set}):Object.defineProperty(c,w,{value:C[w]})}),c.world=l,c._tempVec2=new h(v,S),m.hasOwnProperty("type")&&m.type==="body")c.setExistingBody(m,f);else{var T=p(m,"shape",null);T||(T="rectangle"),m.addToWorld=f,c.setBody(T,m)}return c};r.exports=d},7030:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(74527),h=n(89980),u=n(72632),d=n(1539),l=n(58210),c=n(93736),m=new a({Extends:d,Mixins:[p.Bounce,p.Collision,p.Force,p.Friction,p.Gravity,p.Mass,p.Sensor,p.SetBody,p.Sleep,p.Static,p.Transform,p.Velocity,l],initialize:function(v,S,x,T,C,w){h.call(this,v.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(T,C),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new c(S,x);var b=u(w,"shape",null);b?this.setBody(b,w):this.setRectangle(this.width,this.height,w),this.setPosition(S,x),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=m},50583:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(84093),p=n(50658),h=n(68516),u=n(84125),d=n(63568),l=n(84091),c=n(56694),m=n(63454),f=n(68758),v=n(11299),S=n(56643),x=n(52838),T=n(13657),C=n(53996),w=n(72653),b=n(72632),E=n(10850),A=n(1675),I=n(80391),R=n(16929),N=n(44097),F=n(30657),P=n(70584),D=n(91327),M=n(84474),L=n(91963),k=n(13390),V=n(44272),W=n(7599),K=n(92765),B=n(10438),G=n(39745),O=n(31468);f.setDecomp(n(81084));var $=new c({initialize:function(X){this.scene=X,this.systems=X.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=u,this.composite=v,this.collision=m,this.detector=T,this.pair=P,this.pairs=D,this.query=k,this.resolver=V,this.constraint=x,this.bodies=h,this.composites=S,this.axes=p,this.bounds=l,this.svg=K,this.vector=B,this.vertices=G,this.verts=G,this._tempVec2=B.create(),E(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),E(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),E(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),V._restingThresh=E(this.config,"restingThresh",4),V._restingThreshTangent=E(this.config,"restingThreshTangent",6),V._positionDampen=E(this.config,"positionDampen",.9),V._positionWarming=E(this.config,"positionWarming",.8),V._frictionNormalMultiplier=E(this.config,"frictionNormalMultiplier",5),X.sys.events.once(W.BOOT,this.boot,this),X.sys.events.on(W.START,this.start,this)},boot:function(){this.world=new O(this.scene,this.config),this.add=new w(this.world),this.bodyBounds=new d,this.systems.events.once(W.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new O(this.scene,this.config),this.add=new w(this.world));var z=this.systems.events;z.on(W.UPDATE,this.world.update,this.world),z.on(W.POST_UPDATE,this.world.postUpdate,this.world),z.once(W.SHUTDOWN,this.shutdown,this)},getConfig:function(){var z=this.systems.game.config.physics,X=this.systems.settings.physics,Y=F(b(X,"matter",{}),b(z,"matter",{}));return Y},enableAttractorPlugin:function(){return M.register(A),M.use(R,A),this},enableWrapPlugin:function(){return M.register(N),M.use(R,N),this},enableCollisionEventsPlugin:function(){return M.register(I),M.use(R,I),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(z,X){this.world.step(z,X)},containsPoint:function(z,X,Y){z=this.getMatterBodies(z);var Z=B.create(X,Y),J=k.point(z,Z);return J.length>0},intersectPoint:function(z,X,Y){Y=this.getMatterBodies(Y);var Z=B.create(z,X),J=[],tt=k.point(Y,Z);return tt.forEach(function(et){J.indexOf(et)===-1&&J.push(et)}),J},intersectRect:function(z,X,Y,Z,J,tt){J===void 0&&(J=!1),tt=this.getMatterBodies(tt);var et={min:{x:z,y:X},max:{x:z+Y,y:X+Z}},lt=[],ut=k.region(tt,et,J);return ut.forEach(function(ct){lt.indexOf(ct)===-1&&lt.push(ct)}),lt},intersectRay:function(z,X,Y,Z,J,tt){J===void 0&&(J=1),tt=this.getMatterBodies(tt);for(var et=[],lt=k.ray(tt,B.create(z,X),B.create(Y,Z),J),ut=0;ut<lt.length;ut++)et.push(lt[ut].body);return et},intersectBody:function(z,X){X=this.getMatterBodies(X);for(var Y=[],Z=k.collides(z,X),J=0;J<Z.length;J++){var tt=Z[J];tt.bodyA===z?Y.push(tt.bodyB):Y.push(tt.bodyA)}return Y},overlap:function(z,X,Y,Z,J){Y===void 0&&(Y=null),Z===void 0&&(Z=null),J===void 0&&(J=Y),Array.isArray(z)||(z=[z]),z=this.getMatterBodies(z),X=this.getMatterBodies(X);for(var tt=!1,et=0;et<z.length;et++)for(var lt=z[et],ut=k.collides(lt,X),ct=0;ct<ut.length;ct++){var ht=ut[ct],xt=ht.bodyA.id===lt.id?ht.bodyB:ht.bodyA;if(!Z||Z.call(J,lt,xt,ht)){if(tt=!0,Y)Y.call(J,lt,xt,ht);else if(!Z)return!0}}return tt},setCollisionCategory:function(z,X){return z=this.getMatterBodies(z),z.forEach(function(Y){Y.collisionFilter.category=X}),this},setCollisionGroup:function(z,X){return z=this.getMatterBodies(z),z.forEach(function(Y){Y.collisionFilter.group=X}),this},setCollidesWith:function(z,X){z=this.getMatterBodies(z);var Y=0;if(!Array.isArray(X))Y=X;else for(var Z=0;Z<X.length;Z++)Y|=X[Z];return z.forEach(function(J){J.collisionFilter.mask=Y}),this},getMatterBodies:function(z){if(!z)return this.world.getAllBodies();Array.isArray(z)||(z=[z]);for(var X=[],Y=0;Y<z.length;Y++){var Z=z[Y].hasOwnProperty("body")?z[Y].body:z[Y];X.push(Z)}return X},setVelocity:function(z,X,Y){z=this.getMatterBodies(z);var Z=this._tempVec2;return Z.x=X,Z.y=Y,z.forEach(function(J){u.setVelocity(J,Z)}),this},setVelocityX:function(z,X){z=this.getMatterBodies(z);var Y=this._tempVec2;return Y.x=X,z.forEach(function(Z){Y.y=Z.velocity.y,u.setVelocity(Z,Y)}),this},setVelocityY:function(z,X){z=this.getMatterBodies(z);var Y=this._tempVec2;return Y.y=X,z.forEach(function(Z){Y.x=Z.velocity.x,u.setVelocity(Z,Y)}),this},setAngularVelocity:function(z,X){return z=this.getMatterBodies(z),z.forEach(function(Y){u.setAngularVelocity(Y,X)}),this},applyForce:function(z,X){z=this.getMatterBodies(z);var Y=this._tempVec2;return z.forEach(function(Z){Y.x=Z.position.x,Y.y=Z.position.y,u.applyForce(Z,Y,X)}),this},applyForceFromPosition:function(z,X,Y,Z){z=this.getMatterBodies(z);var J=this._tempVec2;return z.forEach(function(tt){Z===void 0&&(Z=tt.angle),J.x=Y*Math.cos(Z),J.y=Y*Math.sin(Z),u.applyForce(tt,X,J)}),this},applyForceFromAngle:function(z,X,Y){z=this.getMatterBodies(z);var Z=this._tempVec2;return z.forEach(function(J){Y===void 0&&(Y=J.angle),Z.x=X*Math.cos(Y),Z.y=X*Math.sin(Y),u.applyForce(J,{x:J.position.x,y:J.position.y},Z)}),this},getConstraintLength:function(z){var X=z.pointA.x,Y=z.pointA.y,Z=z.pointB.x,J=z.pointB.y;return z.bodyA&&(X+=z.bodyA.position.x,Y+=z.bodyA.position.y),z.bodyB&&(Z+=z.bodyB.position.x,J+=z.bodyB.position.y),C(X,Y,Z,J)},alignBody:function(z,X,Y,Z){z=z.hasOwnProperty("body")?z.body:z;var J;switch(Z){case a.TOP_LEFT:case a.LEFT_TOP:J=this.bodyBounds.getTopLeft(z,X,Y);break;case a.TOP_CENTER:J=this.bodyBounds.getTopCenter(z,X,Y);break;case a.TOP_RIGHT:case a.RIGHT_TOP:J=this.bodyBounds.getTopRight(z,X,Y);break;case a.LEFT_CENTER:J=this.bodyBounds.getLeftCenter(z,X,Y);break;case a.CENTER:J=this.bodyBounds.getCenter(z,X,Y);break;case a.RIGHT_CENTER:J=this.bodyBounds.getRightCenter(z,X,Y);break;case a.LEFT_BOTTOM:case a.BOTTOM_LEFT:J=this.bodyBounds.getBottomLeft(z,X,Y);break;case a.BOTTOM_CENTER:J=this.bodyBounds.getBottomCenter(z,X,Y);break;case a.BOTTOM_RIGHT:case a.RIGHT_BOTTOM:J=this.bodyBounds.getBottomRight(z,X,Y);break}return J&&u.setPosition(z,J),this},shutdown:function(){var z=this.systems.events;this.world&&(z.off(W.UPDATE,this.world.update,this.world),z.off(W.POST_UPDATE,this.world.postUpdate,this.world)),z.off(W.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(W.START,this.start,this),this.scene=null,this.systems=null}});L.register("MatterPhysics",$,"matterPhysics"),r.exports=$},73658:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(16569),p=n(56694),h=n(74527),u=n(89980),d=n(72632),l=n(58210),c=n(13747),m=n(93736),f=new p({Extends:c,Mixins:[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity,l],initialize:function(S,x,T,C,w,b){u.call(this,S.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(C,w),this.setSizeToFrame(),this.setOrigin(),this.world=S,this._tempVec2=new m(x,T);var E=d(b,"shape",null);E?this.setBody(E,b):this.setRectangle(this.width,this.height,b),this.setPosition(x,T),this.initPipeline(),this.initPostPipeline(!0)}});r.exports=f},84720:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(68516),p=n(84125),h=n(56694),u=n(74527),d=n(28699),l=n(6659),c=n(72632),m=n(19256),f=n(39745),v=new h({Extends:l,Mixins:[u.Bounce,u.Collision,u.Friction,u.Gravity,u.Mass,u.Sensor,u.Sleep,u.Static],initialize:function(x,T,C){l.call(this),this.tile=T,this.world=x,T.physics.matterBody&&T.physics.matterBody.destroy(),T.physics.matterBody=this;var w=c(C,"body",null),b=c(C,"addToWorld",!0);if(w)this.setBody(w,b);else{var E=T.getCollisionGroup(),A=c(E,"objects",[]);A.length>0?this.setFromTileCollision(C):this.setFromTileRectangle(C)}if(T.flipX||T.flipY){var I={x:T.getCenterX(),y:T.getCenterY()},R=T.flipX?-1:1,N=T.flipY?-1:1;p.scale(w,R,N,I)}},setFromTileRectangle:function(S){S===void 0&&(S={}),m(S,"isStatic")||(S.isStatic=!0),m(S,"addToWorld")||(S.addToWorld=!0);var x=this.tile.getBounds(),T=x.x+x.width/2,C=x.y+x.height/2,w=a.rectangle(T,C,x.width,x.height,S);return this.setBody(w,S.addToWorld),this},setFromTileCollision:function(S){S===void 0&&(S={}),m(S,"isStatic")||(S.isStatic=!0),m(S,"addToWorld")||(S.addToWorld=!0);for(var x=this.tile.tilemapLayer.scaleX,T=this.tile.tilemapLayer.scaleY,C=this.tile.getLeft(),w=this.tile.getTop(),b=this.tile.getCollisionGroup(),E=c(b,"objects",[]),A=[],I=0;I<E.length;I++){var R=E[I],N=C+R.x*x,F=w+R.y*T,P=R.width*x,D=R.height*T,M=null;if(R.rectangle)M=a.rectangle(N+P/2,F+D/2,P,D,S);else if(R.ellipse)M=a.circle(N+P/2,F+D/2,P/2,S);else if(R.polygon||R.polyline){var L=R.polygon?R.polygon:R.polyline,k=L.map(function(B){return{x:B.x*x,y:B.y*T}}),V=f.create(k),W=f.centre(V);N+=W.x,F+=W.y,M=a.fromVertices(N,F,V,S)}M&&A.push(M)}if(A.length===1)this.setBody(A[0],S.addToWorld);else if(A.length>1){var K=d(S);K.parts=A,this.setBody(p.create(K),K.addToWorld)}return this},setBody:function(S,x){return x===void 0&&(x=!0),this.body&&this.removeBody(),this.body=S,this.body.gameObject=this,x&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});r.exports=v},10998:(r,g,n)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(68516),p=n(84125),h=n(68758),u=n(72632),d=n(39745),l={parseBody:function(c,m,f,v){v===void 0&&(v={});for(var S=u(f,"fixtures",[]),x=[],T=0;T<S.length;T++)for(var C=this.parseFixture(S[T]),w=0;w<C.length;w++)x.push(C[w]);var b=h.clone(f,!0);h.extend(b,v,!0),delete b.fixtures,delete b.type;var E=p.create(b);return p.setParts(E,x),p.setPosition(E,{x:c,y:m}),E},parseFixture:function(c){var m=h.extend({},!1,c);delete m.circle,delete m.vertices;var f;if(c.circle){var v=u(c.circle,"x"),S=u(c.circle,"y"),x=u(c.circle,"radius");f=[a.circle(v,S,x,m)]}else c.vertices&&(f=this.parseVertices(c.vertices,m));return f},parseVertices:function(c,m){m===void 0&&(m={});for(var f=[],v=0;v<c.length;v++)d.clockwiseSort(c[v]),f.push(p.create(h.extend({position:d.centre(c[v]),vertices:c[v]},m)));return a.flagCoincidentParts(f)}};r.exports=l},72829:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(68516),p=n(84125),h={parseBody:function(u,d,l,c){c===void 0&&(c={});var m,f=l.vertices;if(f.length===1)c.vertices=f[0],m=p.create(c),a.flagCoincidentParts(m.parts);else{for(var v=[],S=0;S<f.length;S++){var x=p.create({vertices:f[S]});v.push(x)}a.flagCoincidentParts(v),c.parts=v,m=p.create(c)}return m.label=l.label,p.setPosition(m,{x:u,y:d}),m}};r.exports=h},88596:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(84091),p=n(56694),h=n(11299),u=n(52838),d=n(13657),l=n(35416),c=n(33963),m=n(30657),f=n(22806),v=n(93736),S=n(39745),x=new p({initialize:function(C,w,b){b===void 0&&(b={});var E={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=C,this.world=w,this.camera=null,this.pointer=null,this.active=!0,this.position=new v,this.body=null,this.part=null,this.constraint=u.create(m(b,E)),this.world.on(l.BEFORE_UPDATE,this.update,this),C.sys.input.on(c.POINTER_DOWN,this.onDown,this),C.sys.input.on(c.POINTER_UP,this.onUp,this)},onDown:function(T){this.pointer||(this.pointer=T,this.camera=T.camera)},onUp:function(T){T===this.pointer&&(this.pointer=null)},getBody:function(T){var C=this.position,w=this.constraint;this.camera.getWorldPoint(T.x,T.y,C);for(var b=h.allBodies(this.world.localWorld),E=0;E<b.length;E++){var A=b[E];if(!A.ignorePointer&&a.contains(A.bounds,C)&&d.canCollide(A.collisionFilter,w.collisionFilter)&&this.hitTestBody(A,C))return this.world.emit(l.DRAG_START,A,this.part,this),!0}return!1},hitTestBody:function(T,C){for(var w=this.constraint,b=T.parts.length,E=b>1?1:0,A=E;A<b;A++){var I=T.parts[A];if(S.contains(I.vertices,C))return w.pointA=C,w.pointB={x:C.x-T.position.x,y:C.y-T.position.y},w.bodyB=T,w.angleB=T.angle,f.set(T,!1),this.part=I,this.body=T,!0}return!1},update:function(){var T=this.pointer,C=this.body;if(!this.active||!T){C&&this.stopDrag();return}if(!T.isDown&&C){this.stopDrag();return}else if(T.isDown){if(!C&&!this.getBody(T))return;C=this.body;var w=this.position,b=this.constraint;this.camera.getWorldPoint(T.x,T.y,w),b.pointA.x=w.x,b.pointA.y=w.y,f.set(C,!1),this.world.emit(l.DRAG,C,this)}},stopDrag:function(){var T=this.body,C=this.constraint;C.bodyB=null,C.pointB=null,this.pointer=null,this.body=null,this.part=null,T&&this.world.emit(l.DRAG_END,T,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(l.BEFORE_UPDATE,this.update),this.scene.sys.input.off(c.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(c.POINTER_UP,this.onUp,this)}});r.exports=x},31468:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(68516),p=n(84125),h=n(56694),u=n(68758),d=n(11299),l=n(45775),c=n(6659),m=n(35416),f=n(72632),v=n(10850),S=n(84125),x=n(39073),T=n(84720),C=n(72005),w=n(10438),b=new h({Extends:c,initialize:function(A,I){c.call(this),this.scene=A,this.engine=l.create(I),this.localWorld=this.engine.world;var R=v(I,"gravity",null);R?this.setGravity(R.x,R.y,R.scale):R===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=v(I,"enabled",!0),this.getDelta=v(I,"getDelta",this.update60Hz);var N=f(I,"runner",{}),F=f(N,"fps",!1),P=f(N,"fps",60),D=f(N,"delta",1e3/P),M=f(N,"deltaMin",1e3/P),L=f(N,"deltaMax",1e3/(P*.5));F||(P=1e3/D),this.runner={fps:P,deltaSampleSize:f(N,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:f(N,"isFixed",!1),delta:D,deltaMin:M,deltaMax:L},this.autoUpdate=v(I,"autoUpdate",!0);var k=v(I,"debug",!1);if(this.drawDebug=typeof k=="object"?!0:k,this.debugGraphic,this.debugConfig={showAxes:f(k,"showAxes",!1),showAngleIndicator:f(k,"showAngleIndicator",!1),angleColor:f(k,"angleColor",15208787),showBroadphase:f(k,"showBroadphase",!1),broadphaseColor:f(k,"broadphaseColor",16757760),showBounds:f(k,"showBounds",!1),boundsColor:f(k,"boundsColor",16777215),showVelocity:f(k,"showVelocity",!1),velocityColor:f(k,"velocityColor",44783),showCollisions:f(k,"showCollisions",!1),collisionColor:f(k,"collisionColor",16094476),showSeparations:f(k,"showSeparations",!1),separationColor:f(k,"separationColor",16753920),showBody:f(k,"showBody",!0),showStaticBody:f(k,"showStaticBody",!0),showInternalEdges:f(k,"showInternalEdges",!1),renderFill:f(k,"renderFill",!1),renderLine:f(k,"renderLine",!0),fillColor:f(k,"fillColor",1075465),fillOpacity:f(k,"fillOpacity",1),lineColor:f(k,"lineColor",2678297),lineOpacity:f(k,"lineOpacity",1),lineThickness:f(k,"lineThickness",1),staticFillColor:f(k,"staticFillColor",857979),staticLineColor:f(k,"staticLineColor",1255396),showSleeping:f(k,"showSleeping",!1),staticBodySleepOpacity:f(k,"staticBodySleepOpacity",.7),sleepFillColor:f(k,"sleepFillColor",4605510),sleepLineColor:f(k,"sleepLineColor",10066585),showSensors:f(k,"showSensors",!0),sensorFillColor:f(k,"sensorFillColor",857979),sensorLineColor:f(k,"sensorLineColor",1255396),showPositions:f(k,"showPositions",!0),positionSize:f(k,"positionSize",4),positionColor:f(k,"positionColor",14697178),showJoint:f(k,"showJoint",!0),jointColor:f(k,"jointColor",14737474),jointLineOpacity:f(k,"jointLineOpacity",1),jointLineThickness:f(k,"jointLineThickness",2),pinSize:f(k,"pinSize",4),pinColor:f(k,"pinColor",4382944),springColor:f(k,"springColor",14697184),anchorColor:f(k,"anchorColor",15724527),anchorSize:f(k,"anchorSize",4),showConvexHulls:f(k,"showConvexHulls",!1),hullColor:f(k,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),f(I,"setBounds",!1)){var V=I.setBounds;if(typeof V=="boolean")this.setBounds();else{var W=f(V,"x",0),K=f(V,"y",0),B=f(V,"width",A.sys.scale.width),G=f(V,"height",A.sys.scale.height),O=f(V,"thickness",64),$=f(V,"left",!0),z=f(V,"right",!0),X=f(V,"top",!0),Y=f(V,"bottom",!0);this.setBounds(W,K,B,G,O,$,z,X,Y)}}},setCompositeRenderStyle:function(E){var A=E.bodies,I=E.constraints,R=E.composites,N,F,P;for(N=0;N<A.length;N++)F=A[N],P=F.render,this.setBodyRenderStyle(F,P.lineColor,P.lineOpacity,P.lineThickness,P.fillColor,P.fillOpacity);for(N=0;N<I.length;N++)F=I[N],P=F.render,this.setConstraintRenderStyle(F,P.lineColor,P.lineOpacity,P.lineThickness,P.pinSize,P.anchorColor,P.anchorSize);for(N=0;N<R.length;N++)F=R[N],this.setCompositeRenderStyle(F);return this},setBodyRenderStyle:function(E,A,I,R,N,F){var P=E.render,D=this.debugConfig;return P?(A==null&&(A=E.isStatic?D.staticLineColor:D.lineColor),I==null&&(I=D.lineOpacity),R==null&&(R=D.lineThickness),N==null&&(N=E.isStatic?D.staticFillColor:D.fillColor),F==null&&(F=D.fillOpacity),A!==!1&&(P.lineColor=A),I!==!1&&(P.lineOpacity=I),R!==!1&&(P.lineThickness=R),N!==!1&&(P.fillColor=N),F!==!1&&(P.fillOpacity=F),this):this},setConstraintRenderStyle:function(E,A,I,R,N,F,P){var D=E.render,M=this.debugConfig;if(!D)return this;if(A==null){var L=D.type;L==="line"?A=M.jointColor:L==="pin"?A=M.pinColor:L==="spring"&&(A=M.springColor)}return I==null&&(I=M.jointLineOpacity),R==null&&(R=M.jointLineThickness),N==null&&(N=M.pinSize),F==null&&(F=M.anchorColor),P==null&&(P=M.anchorSize),A!==!1&&(D.lineColor=A),I!==!1&&(D.lineOpacity=I),R!==!1&&(D.lineThickness=R),N!==!1&&(D.pinSize=N),F!==!1&&(D.anchorColor=F),P!==!1&&(D.anchorSize=P),this},setEventsProxy:function(){var E=this,A=this.engine,I=this.localWorld;this.drawDebug&&(x.on(I,"compositeModified",function(R){E.setCompositeRenderStyle(R)}),x.on(I,"beforeAdd",function(R){for(var N=[].concat(R.object),F=0;F<N.length;F++){var P=N[F],D=P.render;P.type==="body"?E.setBodyRenderStyle(P,D.lineColor,D.lineOpacity,D.lineThickness,D.fillColor,D.fillOpacity):P.type==="composite"?E.setCompositeRenderStyle(P):P.type==="constraint"&&E.setConstraintRenderStyle(P,D.lineColor,D.lineOpacity,D.lineThickness,D.pinSize,D.anchorColor,D.anchorSize)}})),x.on(I,"beforeAdd",function(R){E.emit(m.BEFORE_ADD,R)}),x.on(I,"afterAdd",function(R){E.emit(m.AFTER_ADD,R)}),x.on(I,"beforeRemove",function(R){E.emit(m.BEFORE_REMOVE,R)}),x.on(I,"afterRemove",function(R){E.emit(m.AFTER_REMOVE,R)}),x.on(A,"beforeUpdate",function(R){E.emit(m.BEFORE_UPDATE,R)}),x.on(A,"afterUpdate",function(R){E.emit(m.AFTER_UPDATE,R)}),x.on(A,"collisionStart",function(R){var N=R.pairs,F,P;N.length>0&&(F=N[0].bodyA,P=N[0].bodyB),E.emit(m.COLLISION_START,R,F,P)}),x.on(A,"collisionActive",function(R){var N=R.pairs,F,P;N.length>0&&(F=N[0].bodyA,P=N[0].bodyB),E.emit(m.COLLISION_ACTIVE,R,F,P)}),x.on(A,"collisionEnd",function(R){var N=R.pairs,F,P;N.length>0&&(F=N[0].bodyA,P=N[0].bodyB),E.emit(m.COLLISION_END,R,F,P)})},setBounds:function(E,A,I,R,N,F,P,D,M){return E===void 0&&(E=0),A===void 0&&(A=0),I===void 0&&(I=this.scene.sys.scale.width),R===void 0&&(R=this.scene.sys.scale.height),N===void 0&&(N=64),F===void 0&&(F=!0),P===void 0&&(P=!0),D===void 0&&(D=!0),M===void 0&&(M=!0),this.updateWall(F,"left",E-N,A-N,N,R+N*2),this.updateWall(P,"right",E+I,A-N,N,R+N*2),this.updateWall(D,"top",E,A-N,I,N),this.updateWall(M,"bottom",E,A+R,I,N),this},updateWall:function(E,A,I,R,N,F){var P=this.walls[A];E?(P&&C.remove(this.localWorld,P),I+=N/2,R+=F/2,this.walls[A]=this.create(I,R,N,F,{isStatic:!0,friction:0,frictionStatic:0})):(P&&C.remove(this.localWorld,P),this.walls[A]=null)},createDebugGraphic:function(){var E=this.scene.sys.add.graphics({x:0,y:0});return E.setDepth(Number.MAX_VALUE),this.debugGraphic=E,this.drawDebug=!0,E},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(E,A,I){return E===void 0&&(E=0),A===void 0&&(A=1),I===void 0&&(I=.001),this.localWorld.gravity.x=E,this.localWorld.gravity.y=A,this.localWorld.gravity.scale=I,this},create:function(E,A,I,R,N){var F=a.rectangle(E,A,I,R,N);return C.add(this.localWorld,F),F},add:function(E){return C.add(this.localWorld,E),this},remove:function(E,A){Array.isArray(E)||(E=[E]);for(var I=0;I<E.length;I++){var R=E[I],N=R.body?R.body:R;d.remove(this.localWorld,N,A)}return this},removeConstraint:function(E,A){return d.remove(this.localWorld,E,A),this},convertTilemapLayer:function(E,A){var I=E.layer,R=E.getTilesWithin(0,0,I.width,I.height,{isColliding:!0});return this.convertTiles(R,A),this},convertTiles:function(E,A){if(E.length===0)return this;for(var I=0;I<E.length;I++)new T(this,E[I],A);return this},nextGroup:function(E){return S.nextGroup(E)},nextCategory:function(){return S.nextCategory()},pause:function(){return this.enabled=!1,this.emit(m.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(m.RESUME),this},update:function(E,A){if(!(!this.enabled||!this.autoUpdate)){var I=this.engine,R=this.runner,N=I.timing;R.isFixed?A=this.getDelta(E,A):(A=E-R.timePrev||R.delta,R.timePrev=E,R.deltaHistory.push(A),R.deltaHistory=R.deltaHistory.slice(-R.deltaSampleSize),A=Math.min.apply(null,R.deltaHistory),A=A<R.deltaMin?R.deltaMin:A,A=A>R.deltaMax?R.deltaMax:A,R.delta=A),R.timeScalePrev=N.timeScale,R.frameCounter+=1,E-R.counterTimestamp>=1e3&&(R.fps=R.frameCounter*((E-R.counterTimestamp)/1e3),R.counterTimestamp=E,R.frameCounter=0),l.update(I,A)}},step:function(E){l.update(this.engine,E)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(E){var A=E.hasOwnProperty("body")?E.body:E;return d.get(this.localWorld,A.id,A.type)!==null},getAllBodies:function(){return d.allBodies(this.localWorld)},getAllConstraints:function(){return d.allConstraints(this.localWorld)},getAllComposites:function(){return d.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var E=this.debugConfig,A=this.engine,I=this.debugGraphic,R=d.allBodies(this.localWorld);this.debugGraphic.clear(),E.showBroadphase&&A.broadphase.controller&&this.renderGrid(A.broadphase,I,E.broadphaseColor,.5),E.showBounds&&this.renderBodyBounds(R,I,E.boundsColor,.5),(E.showBody||E.showStaticBody)&&this.renderBodies(R),E.showJoint&&this.renderJoints(),(E.showAxes||E.showAngleIndicator)&&this.renderBodyAxes(R,I,E.showAxes,E.angleColor,.5),E.showVelocity&&this.renderBodyVelocity(R,I,E.velocityColor,1,2),E.showSeparations&&this.renderSeparations(A.pairs.list,I,E.separationColor),E.showCollisions&&this.renderCollisions(A.pairs.list,I,E.collisionColor)}},renderGrid:function(E,A,I,R){A.lineStyle(1,I,R);for(var N=u.keys(E.buckets),F=0;F<N.length;F++){var P=N[F];if(!(E.buckets[P].length<2)){var D=P.split(/C|R/);A.strokeRect(parseInt(D[1],10)*E.bucketWidth,parseInt(D[2],10)*E.bucketHeight,E.bucketWidth,E.bucketHeight)}}return this},renderSeparations:function(E,A,I){A.lineStyle(1,I,1);for(var R=0;R<E.length;R++){var N=E[R];if(N.isActive){var F=N.collision,P=F.bodyA,D=F.bodyB,M=P.position,L=D.position,k=F.penetration,V=!P.isStatic&&!D.isStatic?4:1;D.isStatic&&(V=0),A.lineBetween(L.x,L.y,L.x-k.x*V,L.y-k.y*V),V=!P.isStatic&&!D.isStatic?4:1,P.isStatic&&(V=0),A.lineBetween(M.x,M.y,M.x-k.x*V,M.y-k.y*V)}}return this},renderCollisions:function(E,A,I){A.lineStyle(1,I,.5),A.fillStyle(I,1);var R,N;for(R=0;R<E.length;R++)if(N=E[R],!!N.isActive)for(var F=0;F<N.activeContacts.length;F++){var P=N.activeContacts[F],D=P.vertex;A.fillRect(D.x-2,D.y-2,5,5)}for(R=0;R<E.length;R++)if(N=E[R],!!N.isActive){var M=N.collision,L=N.activeContacts;if(L.length>0){var k=L[0].vertex.x,V=L[0].vertex.y;L.length===2&&(k=(L[0].vertex.x+L[1].vertex.x)/2,V=(L[0].vertex.y+L[1].vertex.y)/2),M.bodyB===M.supports[0].body||M.bodyA.isStatic?A.lineBetween(k-M.normal.x*8,V-M.normal.y*8,k,V):A.lineBetween(k+M.normal.x*8,V+M.normal.y*8,k,V)}}return this},renderBodyBounds:function(E,A,I,R){A.lineStyle(1,I,R);for(var N=0;N<E.length;N++){var F=E[N];if(F.render.visible){var P=F.bounds;if(P)A.strokeRect(P.min.x,P.min.y,P.max.x-P.min.x,P.max.y-P.min.y);else for(var D=F.parts,M=D.length>1?1:0;M<D.length;M++){var L=D[M];A.strokeRect(L.bounds.min.x,L.bounds.min.y,L.bounds.max.x-L.bounds.min.x,L.bounds.max.y-L.bounds.min.y)}}}return this},renderBodyAxes:function(E,A,I,R,N){A.lineStyle(1,R,N);for(var F=0;F<E.length;F++){var P=E[F],D=P.parts;if(P.render.visible){var M,L,k;if(I)for(L=D.length>1?1:0;L<D.length;L++)for(M=D[L],k=0;k<M.axes.length;k++){var V=M.axes[k];A.lineBetween(M.position.x,M.position.y,M.position.x+V.x*20,M.position.y+V.y*20)}else for(L=D.length>1?1:0;L<D.length;L++)for(M=D[L],k=0;k<M.axes.length;k++)A.lineBetween(M.position.x,M.position.y,(M.vertices[0].x+M.vertices[M.vertices.length-1].x)/2,(M.vertices[0].y+M.vertices[M.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(E,A,I,R,N){A.lineStyle(N,I,R);for(var F=0;F<E.length;F++){var P=E[F];P.render.visible&&A.lineBetween(P.position.x,P.position.y,P.position.x+(P.position.x-P.positionPrev.x)*2,P.position.y+(P.position.y-P.positionPrev.y)*2)}return this},renderBodies:function(E){for(var A=this.debugGraphic,I=this.debugConfig,R=I.showBody,N=I.showStaticBody,F=I.showSleeping,P=I.showInternalEdges,D=I.showConvexHulls,M=I.renderFill,L=I.renderLine,k=I.staticBodySleepOpacity,V=I.sleepFillColor,W=I.sleepLineColor,K=I.hullColor,B=0;B<E.length;B++){var G=E[B];if(G.render.visible&&!(!N&&G.isStatic||!R&&!G.isStatic)){var O=G.render.lineColor,$=G.render.lineOpacity,z=G.render.lineThickness,X=G.render.fillColor,Y=G.render.fillOpacity;F&&G.isSleeping&&(G.isStatic?($*=k,Y*=k):(O=W,X=V)),M||(X=null),L||(O=null),this.renderBody(G,A,P,O,$,z,X,Y);var Z=G.parts.length;D&&Z>1&&this.renderConvexHull(G,A,K,z)}}},renderBody:function(E,A,I,R,N,F,P,D){R===void 0&&(R=null),N===void 0&&(N=null),F===void 0&&(F=1),P===void 0&&(P=null),D===void 0&&(D=null);for(var M=this.debugConfig,L=M.sensorFillColor,k=M.sensorLineColor,V=E.parts,W=V.length,K=W>1?1:0;K<W;K++){var B=V[K],G=B.render,O=G.opacity;if(!(!G.visible||O===0||B.isSensor&&!M.showSensors)){var $=B.circleRadius;if(A.beginPath(),B.isSensor?(P!==null&&A.fillStyle(L,D*O),R!==null&&A.lineStyle(F,k,N*O)):(P!==null&&A.fillStyle(P,D*O),R!==null&&A.lineStyle(F,R,N*O)),$)A.arc(B.position.x,B.position.y,$,0,2*Math.PI);else{var z=B.vertices,X=z.length;A.moveTo(z[0].x,z[0].y);for(var Y=1;Y<X;Y++){var Z=z[Y];if(!z[Y-1].isInternal||I?A.lineTo(Z.x,Z.y):A.moveTo(Z.x,Z.y),Y<X&&Z.isInternal&&!I){var J=(Y+1)%X;A.moveTo(z[J].x,z[J].y)}}A.closePath()}P!==null&&A.fillPath(),R!==null&&A.strokePath()}}if(M.showPositions&&!E.isStatic){var tt=E.position.x,et=E.position.y,lt=Math.ceil(M.positionSize/2);A.fillStyle(M.positionColor,1),A.fillRect(tt-lt,et-lt,M.positionSize,M.positionSize)}return this},renderConvexHull:function(E,A,I,R){R===void 0&&(R=1);var N=E.parts,F=N.length;if(F>1){var P=E.vertices;A.lineStyle(R,I),A.beginPath(),A.moveTo(P[0].x,P[0].y);for(var D=1;D<P.length;D++)A.lineTo(P[D].x,P[D].y);A.lineTo(P[0].x,P[0].y),A.strokePath()}return this},renderJoints:function(){for(var E=this.debugGraphic,A=d.allConstraints(this.localWorld),I=0;I<A.length;I++){var R=A[I].render,N=R.lineColor,F=R.lineOpacity,P=R.lineThickness,D=R.pinSize,M=R.anchorColor,L=R.anchorSize;this.renderConstraint(A[I],E,N,F,P,D,M,L)}},renderConstraint:function(E,A,I,R,N,F,P,D){var M=E.render;if(!M.visible||!E.pointA||!E.pointB)return this;A.lineStyle(N,I,R);var L=E.bodyA,k=E.bodyB,V,W;if(L?V=w.add(L.position,E.pointA):V=E.pointA,M.type==="pin")A.strokeCircle(V.x,V.y,F);else{if(k?W=w.add(k.position,E.pointB):W=E.pointB,A.beginPath(),A.moveTo(V.x,V.y),M.type==="spring")for(var K=w.sub(W,V),B=w.perp(w.normalise(K)),G=Math.ceil(u.clamp(E.length/5,12,20)),O,$=1;$<G;$+=1)O=$%2===0?1:-1,A.lineTo(V.x+K.x*($/G)+B.x*O*4,V.y+K.y*($/G)+B.y*O*4);A.lineTo(W.x,W.y)}return A.strokePath(),M.anchors&&D>0&&(A.fillStyle(P),A.fillCircle(V.x,V.y,D),A.fillCircle(W.x,W.y,D)),this},resetCollisionIDs:function(){return p._nextCollidingGroupId=1,p._nextNonCollidingGroupId=-1,p._nextCategory=1,this},shutdown:function(){x.off(this.engine),this.removeAllListeners(),C.clear(this.localWorld,!1),l.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});r.exports=b},95349:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setBounce:function(n){return this.body.restitution=n,this}};r.exports=g},70679:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setCollisionCategory:function(n){return this.body.collisionFilter.category=n,this},setCollisionGroup:function(n){return this.body.collisionFilter.group=n,this},setCollidesWith:function(n){var a=0;if(!Array.isArray(n))a=n;else for(var p=0;p<n.length;p++)a|=n[p];return this.body.collisionFilter.mask=a,this},setOnCollide:function(n){return this.body.onCollideCallback=n,this},setOnCollideEnd:function(n){return this.body.onCollideEndCallback=n,this},setOnCollideActive:function(n){return this.body.onCollideActiveCallback=n,this},setOnCollideWith:function(n,a){Array.isArray(n)||(n=[n]);for(var p=0;p<n.length;p++){var h=n[p].hasOwnProperty("body")?n[p].body:n[p];this.body.setOnCollideWith(h,a)}return this}};r.exports=g},77178:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(84125),p={applyForce:function(h){return this._tempVec2.set(this.body.position.x,this.body.position.y),a.applyForce(this.body,this._tempVec2,h),this},applyForceFrom:function(h,u){return a.applyForce(this.body,h,u),this},thrust:function(h){var u=this.body.angle;return this._tempVec2.set(h*Math.cos(u),h*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(h){var u=this.body.angle-Math.PI/2;return this._tempVec2.set(h*Math.cos(u),h*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(h){var u=this.body.angle+Math.PI/2;return this._tempVec2.set(h*Math.cos(u),h*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(h){var u=this.body.angle-Math.PI;return this._tempVec2.set(h*Math.cos(u),h*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};r.exports=p},74015:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setFriction:function(n,a,p){return this.body.friction=n,a!==void 0&&(this.body.frictionAir=a),p!==void 0&&(this.body.frictionStatic=p),this},setFrictionAir:function(n){return this.body.frictionAir=n,this},setFrictionStatic:function(n){return this.body.frictionStatic=n,this}};r.exports=g},11535:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setIgnoreGravity:function(n){return this.body.ignoreGravity=n,this}};r.exports=g},74497:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(84125),p=n(93736),h={setMass:function(u){return a.setMass(this.body,u),this},setDensity:function(u){return a.setDensity(this.body,u),this},centerOfMass:{get:function(){return new p(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};r.exports=h},75529:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setSensor:function(n){return this.body.isSensor=n,this},isSensor:function(){return this.body.isSensor}};r.exports=g},64024:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(68516),p=n(84125),h=n(88456),u=n(72632),d=n(10998),l=n(72829),c=n(39745),m={setRectangle:function(f,v,S){return this.setBody({type:"rectangle",width:f,height:v},S)},setCircle:function(f,v){return this.setBody({type:"circle",radius:f},v)},setPolygon:function(f,v,S){return this.setBody({type:"polygon",sides:v,radius:f},S)},setTrapezoid:function(f,v,S,x){return this.setBody({type:"trapezoid",width:f,height:v,slope:S},x)},setExistingBody:function(f,v){v===void 0&&(v=!0),this.body&&this.world.remove(this.body,!0),this.body=f;for(var S=0;S<f.parts.length;S++)f.parts[S].gameObject=this;var x=this;if(f.destroy=function(){x.world.remove(x.body,!0),x.body.gameObject=null},v&&(this.world.has(f)&&this.world.remove(f,!0),this.world.add(f)),this._originComponent){var T=f.render.sprite.xOffset,C=f.render.sprite.yOffset,w=f.centerOfMass.x,b=f.centerOfMass.y;if(h(w,.5)&&h(b,.5))this.setOrigin(T+.5,C+.5);else{var E=f.centerOffset.x,A=f.centerOffset.y;this.setOrigin(T+E/this.displayWidth,C+A/this.displayHeight)}}return this},setBody:function(f,v){if(!f)return this;var S;typeof f=="string"&&(f={type:f});var x=u(f,"type","rectangle"),T=u(f,"x",this._tempVec2.x),C=u(f,"y",this._tempVec2.y),w=u(f,"width",this.width),b=u(f,"height",this.height);switch(x){case"rectangle":S=a.rectangle(T,C,w,b,v);break;case"circle":var E=u(f,"radius",Math.max(w,b)/2),A=u(f,"maxSides",25);S=a.circle(T,C,E,v,A);break;case"trapezoid":var I=u(f,"slope",.5);S=a.trapezoid(T,C,w,b,I,v);break;case"polygon":var R=u(f,"sides",5),N=u(f,"radius",Math.max(w,b)/2);S=a.polygon(T,C,R,N,v);break;case"fromVertices":case"fromVerts":var F=u(f,"verts",null);if(F)if(typeof F=="string"&&(F=c.fromPath(F)),this.body&&!this.body.hasOwnProperty("temp"))p.setVertices(this.body,F),S=this.body;else{var P=u(f,"flagInternal",!1),D=u(f,"removeCollinear",.01),M=u(f,"minimumArea",10);S=a.fromVertices(T,C,F,v,P,D,M)}break;case"fromPhysicsEditor":S=d.parseBody(T,C,f,v);break;case"fromPhysicsTracer":S=l.parseBody(T,C,f,v);break}return S&&this.setExistingBody(S,f.addToWorld),this}};r.exports=m},25106:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(35416),p=n(22806),h=n(39073),u={setToSleep:function(){return p.set(this.body,!0),this},setAwake:function(){return p.set(this.body,!1),this},setSleepThreshold:function(d){return d===void 0&&(d=60),this.body.sleepThreshold=d,this},setSleepEvents:function(d,l){return this.setSleepStartEvent(d),this.setSleepEndEvent(l),this},setSleepStartEvent:function(d){if(d){var l=this.world;h.on(this.body,"sleepStart",function(c){l.emit(a.SLEEP_START,c,this)})}else h.off(this.body,"sleepStart");return this},setSleepEndEvent:function(d){if(d){var l=this.world;h.on(this.body,"sleepEnd",function(c){l.emit(a.SLEEP_END,c,this)})}else h.off(this.body,"sleepEnd");return this}};r.exports=u},82884:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(84125),p={setStatic:function(h){return a.setStatic(this.body,h),this},isStatic:function(){return this.body.isStatic}};r.exports=p},4753:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(84125),p=n(83392),h=n(35786),u=n(62138),d=4,l={x:{get:function(){return this.body.position.x},set:function(c){this._tempVec2.set(c,this.y),a.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(c){this._tempVec2.set(this.x,c),a.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(c){var m=1/this._scaleX,f=1/this._scaleY;this._scaleX=c,this._scaleX===0?this.renderFlags&=~d:this.renderFlags|=d,a.scale(this.body,m,f),a.scale(this.body,c,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(c){var m=1/this._scaleX,f=1/this._scaleY;this._scaleY=c,this._scaleY===0?this.renderFlags&=~d:this.renderFlags|=d,a.scale(this.body,m,f),a.scale(this.body,this._scaleX,c)}},angle:{get:function(){return u(this.body.angle*p.RAD_TO_DEG)},set:function(c){this.rotation=u(c)*p.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(c){this._rotation=h(c),a.setAngle(this.body,this._rotation)}},setPosition:function(c,m){return c===void 0&&(c=0),m===void 0&&(m=c),this._tempVec2.set(c,m),a.setPosition(this.body,this._tempVec2),this},setRotation:function(c){return c===void 0&&(c=0),this._rotation=h(c),a.setAngle(this.body,c),this},setFixedRotation:function(){return a.setInertia(this.body,1/0),this},setAngle:function(c){return c===void 0&&(c=0),this.angle=c,a.setAngle(this.body,this.rotation),this},setScale:function(c,m,f){c===void 0&&(c=1),m===void 0&&(m=c);var v=1/this._scaleX,S=1/this._scaleY;return this._scaleX=c,this._scaleY=m,a.scale(this.body,v,S,f),a.scale(this.body,c,m,f),this}};r.exports=l},37268:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(84125),p={setVelocityX:function(h){return this._tempVec2.set(h,this.body.velocity.y),a.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(h){return this._tempVec2.set(this.body.velocity.x,h),a.setVelocity(this.body,this._tempVec2),this},setVelocity:function(h,u){return this._tempVec2.set(h,u),a.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return a.getVelocity(this.body)},setAngularVelocity:function(h){return a.setAngularVelocity(this.body,h),this},getAngularVelocity:function(){return a.getAngularVelocity(this.body)},setAngularSpeed:function(h){return a.setAngularSpeed(this.body,h),this},getAngularSpeed:function(){return a.getAngularSpeed(this.body)}};r.exports=p},74527:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Bounce:n(95349),Collision:n(70679),Force:n(77178),Friction:n(74015),Gravity:n(11535),Mass:n(74497),Sensor:n(75529),SetBody:n(64024),Sleep:n(25106),Static:n(82884),Transform:n(4753),Velocity:n(37268)}},63201:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="afteradd"},30474:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="afterremove"},44822:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="afterupdate"},88820:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="beforeadd"},94849:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="beforeremove"},6391:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="beforeupdate"},96738:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collisionactive"},7916:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collisionend"},59529:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="collisionstart"},10219:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragend"},183:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="drag"},39143:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="dragstart"},16483:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},35806:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},22106:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="sleepend"},5803:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="sleepstart"},35416:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AFTER_ADD:n(63201),AFTER_REMOVE:n(30474),AFTER_UPDATE:n(44822),BEFORE_ADD:n(88820),BEFORE_REMOVE:n(94849),BEFORE_UPDATE:n(6391),COLLISION_ACTIVE:n(96738),COLLISION_END:n(7916),COLLISION_START:n(59529),DRAG_END:n(10219),DRAG:n(183),DRAG_START:n(39143),PAUSE:n(16483),RESUME:n(35806),SLEEP_END:n(22106),SLEEP_START:n(5803)}},45949:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BodyBounds:n(63568),Components:n(74527),Events:n(35416),Factory:n(72653),MatterGameObject:n(3860),Image:n(7030),Matter:n(18171),MatterPhysics:n(50583),PolyDecomp:n(81084),Sprite:n(73658),TileBody:n(84720),PhysicsEditorParser:n(10998),PhysicsJSONParser:n(72829),PointerConstraint:n(88596),World:n(31468)}},84125:(r,g,n)=>{var a={};r.exports=a;var p=n(39745),h=n(10438),u=n(22806),d=n(68758),l=n(84091),c=n(50658);(function(){a._timeCorrection=!0,a._inertiaScale=4,a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,a._baseDelta=16.666666666666668,a.create=function(f){var v={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!f.hasOwnProperty("position")&&f.hasOwnProperty("vertices")?f.position=p.centre(f.vertices):f.hasOwnProperty("vertices")||(v.vertices=p.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var S=d.extend(v,f);return m(S,f),S.setOnCollideWith=function(x,T){return T?this.onCollideWith[x.id]=T:delete this.onCollideWith[x.id],this},S},a.nextGroup=function(f){return f?a._nextNonCollidingGroupId--:a._nextCollidingGroupId++},a.nextCategory=function(){return a._nextCategory=a._nextCategory<<1,a._nextCategory};var m=function(f,v){if(v=v||{},a.set(f,{bounds:f.bounds||l.create(f.vertices),positionPrev:f.positionPrev||h.clone(f.position),anglePrev:f.anglePrev||f.angle,vertices:f.vertices,parts:f.parts||[f],isStatic:f.isStatic,isSleeping:f.isSleeping,parent:f.parent||f}),p.rotate(f.vertices,f.angle,f.position),c.rotate(f.axes,f.angle),l.update(f.bounds,f.vertices,f.velocity),a.set(f,{axes:v.axes||f.axes,area:v.area||f.area,mass:v.mass||f.mass,inertia:v.inertia||f.inertia}),f.parts.length===1){var S=f.bounds,x=f.centerOfMass,T=f.centerOffset,C=S.max.x-S.min.x,w=S.max.y-S.min.y;x.x=-(S.min.x-f.position.x)/C,x.y=-(S.min.y-f.position.y)/w,T.x=C*x.x,T.y=w*x.y}};a.set=function(f,v,S){var x;typeof v=="string"&&(x=v,v={},v[x]=S);for(x in v)if(Object.prototype.hasOwnProperty.call(v,x))switch(S=v[x],x){case"isStatic":a.setStatic(f,S);break;case"isSleeping":u.set(f,S);break;case"mass":a.setMass(f,S);break;case"density":a.setDensity(f,S);break;case"inertia":a.setInertia(f,S);break;case"vertices":a.setVertices(f,S);break;case"position":a.setPosition(f,S);break;case"angle":a.setAngle(f,S);break;case"velocity":a.setVelocity(f,S);break;case"angularVelocity":a.setAngularVelocity(f,S);break;case"speed":a.setSpeed(f,S);break;case"angularSpeed":a.setAngularSpeed(f,S);break;case"parts":a.setParts(f,S);break;case"centre":a.setCentre(f,S);break;default:f[x]=S}},a.setStatic=function(f,v){for(var S=0;S<f.parts.length;S++){var x=f.parts[S];v?(x.isStatic||(x._original={restitution:x.restitution,friction:x.friction,mass:x.mass,inertia:x.inertia,density:x.density,inverseMass:x.inverseMass,inverseInertia:x.inverseInertia}),x.restitution=0,x.friction=1,x.mass=x.inertia=x.density=1/0,x.inverseMass=x.inverseInertia=0,x.positionPrev.x=x.position.x,x.positionPrev.y=x.position.y,x.anglePrev=x.angle,x.angularVelocity=0,x.speed=0,x.angularSpeed=0,x.motion=0):x._original&&(x.restitution=x._original.restitution,x.friction=x._original.friction,x.mass=x._original.mass,x.inertia=x._original.inertia,x.density=x._original.density,x.inverseMass=x._original.inverseMass,x.inverseInertia=x._original.inverseInertia,x._original=null),x.isStatic=v}},a.setMass=function(f,v){var S=f.inertia/(f.mass/6);f.inertia=S*(v/6),f.inverseInertia=1/f.inertia,f.mass=v,f.inverseMass=1/f.mass,f.density=f.mass/f.area},a.setDensity=function(f,v){a.setMass(f,v*f.area),f.density=v},a.setInertia=function(f,v){f.inertia=v,f.inverseInertia=1/f.inertia},a.setVertices=function(f,v){v[0].body===f?f.vertices=v:f.vertices=p.create(v,f),f.axes=c.fromVertices(f.vertices),f.area=p.area(f.vertices),a.setMass(f,f.density*f.area);var S=p.centre(f.vertices);p.translate(f.vertices,S,-1),a.setInertia(f,a._inertiaScale*p.inertia(f.vertices,f.mass)),p.translate(f.vertices,f.position),l.update(f.bounds,f.vertices,f.velocity)},a.setParts=function(f,v,S){var x;for(v=v.slice(0),f.parts.length=0,f.parts.push(f),f.parent=f,x=0;x<v.length;x++){var T=v[x];T!==f&&(T.parent=f,f.parts.push(T))}if(f.parts.length!==1){if(S=typeof S<"u"?S:!0,S){var C=[];for(x=0;x<v.length;x++)C=C.concat(v[x].vertices);p.clockwiseSort(C);var w=p.hull(C),b=p.centre(w);a.setVertices(f,w),p.translate(f.vertices,b)}var E=a._totalProperties(f),A=E.centre.x,I=E.centre.y,R=f.bounds,N=f.centerOfMass,F=f.centerOffset;l.update(R,f.vertices,f.velocity),N.x=-(R.min.x-A)/(R.max.x-R.min.x),N.y=-(R.min.y-I)/(R.max.y-R.min.y),F.x=A,F.y=I,f.area=E.area,f.parent=f,f.position.x=A,f.position.y=I,f.positionPrev.x=A,f.positionPrev.y=I,a.setMass(f,E.mass),a.setInertia(f,E.inertia),a.setPosition(f,E.centre)}},a.setCentre=function(f,v,S){S?(f.positionPrev.x+=v.x,f.positionPrev.y+=v.y,f.position.x+=v.x,f.position.y+=v.y):(f.positionPrev.x=v.x-(f.position.x-f.positionPrev.x),f.positionPrev.y=v.y-(f.position.y-f.positionPrev.y),f.position.x=v.x,f.position.y=v.y)},a.setPosition=function(f,v,S){var x=h.sub(v,f.position);S?(f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.velocity.x=x.x,f.velocity.y=x.y,f.speed=h.magnitude(x)):(f.positionPrev.x+=x.x,f.positionPrev.y+=x.y);for(var T=0;T<f.parts.length;T++){var C=f.parts[T];C.position.x+=x.x,C.position.y+=x.y,p.translate(C.vertices,x),l.update(C.bounds,C.vertices,f.velocity)}},a.setAngle=function(f,v,S){var x=v-f.angle;S?(f.anglePrev=f.angle,f.angularVelocity=x,f.angularSpeed=Math.abs(x)):f.anglePrev+=x;for(var T=0;T<f.parts.length;T++){var C=f.parts[T];C.angle+=x,p.rotate(C.vertices,x,f.position),c.rotate(C.axes,x),l.update(C.bounds,C.vertices,f.velocity),T>0&&h.rotateAbout(C.position,x,f.position,C.position)}},a.setVelocity=function(f,v){var S=f.deltaTime/a._baseDelta;f.positionPrev.x=f.position.x-v.x*S,f.positionPrev.y=f.position.y-v.y*S,f.velocity.x=(f.position.x-f.positionPrev.x)/S,f.velocity.y=(f.position.y-f.positionPrev.y)/S,f.speed=h.magnitude(f.velocity)},a.getVelocity=function(f){var v=a._baseDelta/f.deltaTime;return{x:(f.position.x-f.positionPrev.x)*v,y:(f.position.y-f.positionPrev.y)*v}},a.getSpeed=function(f){return h.magnitude(a.getVelocity(f))},a.setSpeed=function(f,v){a.setVelocity(f,h.mult(h.normalise(a.getVelocity(f)),v))},a.setAngularVelocity=function(f,v){var S=f.deltaTime/a._baseDelta;f.anglePrev=f.angle-v*S,f.angularVelocity=(f.angle-f.anglePrev)/S,f.angularSpeed=Math.abs(f.angularVelocity)},a.getAngularVelocity=function(f){return(f.angle-f.anglePrev)*a._baseDelta/f.deltaTime},a.getAngularSpeed=function(f){return Math.abs(a.getAngularVelocity(f))},a.setAngularSpeed=function(f,v){a.setAngularVelocity(f,d.sign(a.getAngularVelocity(f))*v)},a.translate=function(f,v,S){a.setPosition(f,h.add(f.position,v),S)},a.rotate=function(f,v,S,x){if(!S)a.setAngle(f,f.angle+v,x);else{var T=Math.cos(v),C=Math.sin(v),w=f.position.x-S.x,b=f.position.y-S.y;a.setPosition(f,{x:S.x+(w*T-b*C),y:S.y+(w*C+b*T)},x),a.setAngle(f,f.angle+v,x)}},a.scale=function(f,v,S,x){var T=0,C=0;x=x||f.position;for(var w=0;w<f.parts.length;w++){var b=f.parts[w];b.scale.x=v,b.scale.y=S,p.scale(b.vertices,v,S,x),b.axes=c.fromVertices(b.vertices),b.area=p.area(b.vertices),a.setMass(b,f.density*b.area),p.translate(b.vertices,{x:-b.position.x,y:-b.position.y}),a.setInertia(b,a._inertiaScale*p.inertia(b.vertices,b.mass)),p.translate(b.vertices,{x:b.position.x,y:b.position.y}),w>0&&(T+=b.area,C+=b.inertia),b.position.x=x.x+(b.position.x-x.x)*v,b.position.y=x.y+(b.position.y-x.y)*S,l.update(b.bounds,b.vertices,f.velocity)}f.parts.length>1&&(f.area=T,f.isStatic||(a.setMass(f,f.density*T),a.setInertia(f,C))),f.circleRadius&&(v===S?f.circleRadius*=v:f.circleRadius=null)},a.update=function(f,v){v=(typeof v<"u"?v:16.666666666666668)*f.timeScale;var S=v*v,x=a._timeCorrection?v/(f.deltaTime||v):1,T=1-f.frictionAir*(v/d._baseDelta),C=(f.position.x-f.positionPrev.x)*x,w=(f.position.y-f.positionPrev.y)*x;f.velocity.x=C*T+f.force.x/f.mass*S,f.velocity.y=w*T+f.force.y/f.mass*S,f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.position.x+=f.velocity.x,f.position.y+=f.velocity.y,f.deltaTime=v,f.angularVelocity=(f.angle-f.anglePrev)*T*x+f.torque/f.inertia*S,f.anglePrev=f.angle,f.angle+=f.angularVelocity,f.speed=h.magnitude(f.velocity),f.angularSpeed=Math.abs(f.angularVelocity);for(var b=0;b<f.parts.length;b++){var E=f.parts[b];p.translate(E.vertices,f.velocity),b>0&&(E.position.x+=f.velocity.x,E.position.y+=f.velocity.y),f.angularVelocity!==0&&(p.rotate(E.vertices,f.angularVelocity,f.position),c.rotate(E.axes,f.angularVelocity),b>0&&h.rotateAbout(E.position,f.angularVelocity,f.position,E.position)),l.update(E.bounds,E.vertices,f.velocity)}},a.updateVelocities=function(f){var v=a._baseDelta/f.deltaTime,S=f.velocity;S.x=(f.position.x-f.positionPrev.x)*v,S.y=(f.position.y-f.positionPrev.y)*v,f.speed=Math.sqrt(S.x*S.x+S.y*S.y),f.angularVelocity=(f.angle-f.anglePrev)*v,f.angularSpeed=Math.abs(f.angularVelocity)},a.applyForce=function(f,v,S){var x={x:v.x-f.position.x,y:v.y-f.position.y};f.force.x+=S.x,f.force.y+=S.y,f.torque+=x.x*S.y-x.y*S.x},a._totalProperties=function(f){for(var v={mass:0,area:0,inertia:0,centre:{x:0,y:0}},S=f.parts.length===1?0:1;S<f.parts.length;S++){var x=f.parts[S],T=x.mass!==1/0?x.mass:1;v.mass+=T,v.area+=x.area,v.inertia+=x.inertia,v.centre=h.add(v.centre,h.mult(x.position,T))}return v.centre=h.div(v.centre,v.mass),v}})()},11299:(r,g,n)=>{var a={};r.exports=a;var p=n(39073),h=n(68758),u=n(84091),d=n(84125);(function(){a.create=function(l){return h.extend({id:h.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},l)},a.setModified=function(l,c,m,f){if(p.trigger(l,"compositeModified",l),l.isModified=c,c&&l.cache&&(l.cache.allBodies=null,l.cache.allConstraints=null,l.cache.allComposites=null),m&&l.parent&&a.setModified(l.parent,c,m,f),f)for(var v=0;v<l.composites.length;v++){var S=l.composites[v];a.setModified(S,c,m,f)}},a.add=function(l,c){var m=[].concat(c);p.trigger(l,"beforeAdd",{object:c});for(var f=0;f<m.length;f++){var v=m[f];switch(v.type){case"body":if(v.parent!==v){h.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(l,v);break;case"constraint":a.addConstraint(l,v);break;case"composite":a.addComposite(l,v);break;case"mouseConstraint":a.addConstraint(l,v.constraint);break}}return p.trigger(l,"afterAdd",{object:c}),l},a.remove=function(l,c,m){var f=[].concat(c);p.trigger(l,"beforeRemove",{object:c});for(var v=0;v<f.length;v++){var S=f[v];switch(S.type){case"body":a.removeBody(l,S,m);break;case"constraint":a.removeConstraint(l,S,m);break;case"composite":a.removeComposite(l,S,m);break;case"mouseConstraint":a.removeConstraint(l,S.constraint);break}}return p.trigger(l,"afterRemove",{object:c}),l},a.addComposite=function(l,c){return l.composites.push(c),c.parent=l,a.setModified(l,!0,!0,!1),l},a.removeComposite=function(l,c,m){var f=h.indexOf(l.composites,c);if(f!==-1&&a.removeCompositeAt(l,f),m)for(var v=0;v<l.composites.length;v++)a.removeComposite(l.composites[v],c,!0);return l},a.removeCompositeAt=function(l,c){return l.composites.splice(c,1),a.setModified(l,!0,!0,!1),l},a.addBody=function(l,c){return l.bodies.push(c),a.setModified(l,!0,!0,!1),l},a.removeBody=function(l,c,m){var f=h.indexOf(l.bodies,c);if(f!==-1&&a.removeBodyAt(l,f),m)for(var v=0;v<l.composites.length;v++)a.removeBody(l.composites[v],c,!0);return l},a.removeBodyAt=function(l,c){return l.bodies.splice(c,1),a.setModified(l,!0,!0,!1),l},a.addConstraint=function(l,c){return l.constraints.push(c),a.setModified(l,!0,!0,!1),l},a.removeConstraint=function(l,c,m){var f=h.indexOf(l.constraints,c);if(f!==-1&&a.removeConstraintAt(l,f),m)for(var v=0;v<l.composites.length;v++)a.removeConstraint(l.composites[v],c,!0);return l},a.removeConstraintAt=function(l,c){return l.constraints.splice(c,1),a.setModified(l,!0,!0,!1),l},a.clear=function(l,c,m){if(m)for(var f=0;f<l.composites.length;f++)a.clear(l.composites[f],c,!0);return c?l.bodies=l.bodies.filter(function(v){return v.isStatic}):l.bodies.length=0,l.constraints.length=0,l.composites.length=0,a.setModified(l,!0,!0,!1),l},a.allBodies=function(l){if(l.cache&&l.cache.allBodies)return l.cache.allBodies;for(var c=[].concat(l.bodies),m=0;m<l.composites.length;m++)c=c.concat(a.allBodies(l.composites[m]));return l.cache&&(l.cache.allBodies=c),c},a.allConstraints=function(l){if(l.cache&&l.cache.allConstraints)return l.cache.allConstraints;for(var c=[].concat(l.constraints),m=0;m<l.composites.length;m++)c=c.concat(a.allConstraints(l.composites[m]));return l.cache&&(l.cache.allConstraints=c),c},a.allComposites=function(l){if(l.cache&&l.cache.allComposites)return l.cache.allComposites;for(var c=[].concat(l.composites),m=0;m<l.composites.length;m++)c=c.concat(a.allComposites(l.composites[m]));return l.cache&&(l.cache.allComposites=c),c},a.get=function(l,c,m){var f,v;switch(m){case"body":f=a.allBodies(l);break;case"constraint":f=a.allConstraints(l);break;case"composite":f=a.allComposites(l).concat(l);break}return f?(v=f.filter(function(S){return S.id.toString()===c.toString()}),v.length===0?null:v[0]):null},a.move=function(l,c,m){return a.remove(l,c),a.add(m,c),l},a.rebase=function(l){for(var c=a.allBodies(l).concat(a.allConstraints(l)).concat(a.allComposites(l)),m=0;m<c.length;m++)c[m].id=h.nextId();return l},a.translate=function(l,c,m){for(var f=m?a.allBodies(l):l.bodies,v=0;v<f.length;v++)d.translate(f[v],c);return l},a.rotate=function(l,c,m,f){for(var v=Math.cos(c),S=Math.sin(c),x=f?a.allBodies(l):l.bodies,T=0;T<x.length;T++){var C=x[T],w=C.position.x-m.x,b=C.position.y-m.y;d.setPosition(C,{x:m.x+(w*v-b*S),y:m.y+(w*S+b*v)}),d.rotate(C,c)}return l},a.scale=function(l,c,m,f,v){for(var S=v?a.allBodies(l):l.bodies,x=0;x<S.length;x++){var T=S[x],C=T.position.x-f.x,w=T.position.y-f.y;d.setPosition(T,{x:f.x+C*c,y:f.y+w*m}),d.scale(T,c,m)}return l},a.bounds=function(l){for(var c=a.allBodies(l),m=[],f=0;f<c.length;f+=1){var v=c[f];m.push(v.bounds.min,v.bounds.max)}return u.create(m)}})()},72005:(r,g,n)=>{var a={};r.exports=a;var p=n(11299);(function(){a.create=p.create,a.add=p.add,a.remove=p.remove,a.clear=p.clear,a.addComposite=p.addComposite,a.addBody=p.addBody,a.addConstraint=p.addConstraint})()},63454:(r,g,n)=>{var a={};r.exports=a;var p=n(39745),h=n(70584);(function(){var u=[],d={overlap:0,axis:null},l={overlap:0,axis:null};a.create=function(c,m){return{pair:null,collided:!1,bodyA:c,bodyB:m,parentA:c.parent,parentB:m.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},a.collides=function(c,m,f){if(a._overlapAxes(d,c.vertices,m.vertices,c.axes),d.overlap<=0||(a._overlapAxes(l,m.vertices,c.vertices,m.axes),l.overlap<=0))return null;var v=f&&f.table[h.id(c,m)],S;v?S=v.collision:(S=a.create(c,m),S.collided=!0,S.bodyA=c.id<m.id?c:m,S.bodyB=c.id<m.id?m:c,S.parentA=S.bodyA.parent,S.parentB=S.bodyB.parent),c=S.bodyA,m=S.bodyB;var x;d.overlap<l.overlap?x=d:x=l;var T=S.normal,C=S.supports,w=x.axis,b=w.x,E=w.y;b*(m.position.x-c.position.x)+E*(m.position.y-c.position.y)<0?(T.x=b,T.y=E):(T.x=-b,T.y=-E),S.tangent.x=-T.y,S.tangent.y=T.x,S.depth=x.overlap,S.penetration.x=T.x*S.depth,S.penetration.y=T.y*S.depth;var A=a._findSupports(c,m,T,1),I=0;if(p.contains(c.vertices,A[0])&&(C[I++]=A[0]),p.contains(c.vertices,A[1])&&(C[I++]=A[1]),I<2){var R=a._findSupports(m,c,T,-1);p.contains(m.vertices,R[0])&&(C[I++]=R[0]),I<2&&p.contains(m.vertices,R[1])&&(C[I++]=R[1])}return I===0&&(C[I++]=A[0]),C.length=I,S},a._overlapAxes=function(c,m,f,v){var S=m.length,x=f.length,T=m[0].x,C=m[0].y,w=f[0].x,b=f[0].y,E=v.length,A=Number.MAX_VALUE,I=0,R,N,F,P,D,M;for(D=0;D<E;D++){var L=v[D],k=L.x,V=L.y,W=T*k+C*V,K=w*k+b*V,B=W,G=K;for(M=1;M<S;M+=1)P=m[M].x*k+m[M].y*V,P>B?B=P:P<W&&(W=P);for(M=1;M<x;M+=1)P=f[M].x*k+f[M].y*V,P>G?G=P:P<K&&(K=P);if(N=B-K,F=G-W,R=N<F?N:F,R<A&&(A=R,I=D,R<=0))break}c.axis=v[I],c.overlap=A},a._projectToAxis=function(c,m,f){for(var v=m[0].x*f.x+m[0].y*f.y,S=v,x=1;x<m.length;x+=1){var T=m[x].x*f.x+m[x].y*f.y;T>S?S=T:T<v&&(v=T)}c.min=v,c.max=S},a._findSupports=function(c,m,f,v){var S=m.vertices,x=S.length,T=c.position.x,C=c.position.y,w=f.x*v,b=f.y*v,E=Number.MAX_VALUE,A,I,R,N,F;for(F=0;F<x;F+=1)I=S[F],N=w*(T-I.x)+b*(C-I.y),N<E&&(E=N,A=I);return R=S[(x+A.index-1)%x],E=w*(T-R.x)+b*(C-R.y),I=S[(A.index+1)%x],w*(T-I.x)+b*(C-I.y)<E?(u[0]=A,u[1]=I,u):(u[0]=A,u[1]=R,u)}})()},17319:r=>{var g={};r.exports=g,function(){g.create=function(n){return{vertex:n,normalImpulse:0,tangentImpulse:0}}}()},13657:(r,g,n)=>{var a={};r.exports=a;var p=n(68758),h=n(63454);(function(){a.create=function(u){var d={bodies:[],pairs:null};return p.extend(d,u)},a.setBodies=function(u,d){u.bodies=d.slice(0)},a.clear=function(u){u.bodies=[]},a.collisions=function(u){var d=[],l=u.pairs,c=u.bodies,m=c.length,f=a.canCollide,v=h.collides,S,x;for(c.sort(a._compareBoundsX),S=0;S<m;S++){var T=c[S],C=T.bounds,w=T.bounds.max.x,b=T.bounds.max.y,E=T.bounds.min.y,A=T.isStatic||T.isSleeping,I=T.parts.length,R=I===1;for(x=S+1;x<m;x++){var N=c[x],F=N.bounds;if(F.min.x>w)break;if(!(b<F.min.y||E>F.max.y)&&!(A&&(N.isStatic||N.isSleeping))&&f(T.collisionFilter,N.collisionFilter)){var P=N.parts.length;if(R&&P===1){var D=v(T,N,l);D&&d.push(D)}else for(var M=I>1?1:0,L=P>1?1:0,k=M;k<I;k++)for(var V=T.parts[k],C=V.bounds,W=L;W<P;W++){var K=N.parts[W],F=K.bounds;if(!(C.min.x>F.max.x||C.max.x<F.min.x||C.max.y<F.min.y||C.min.y>F.max.y)){var D=v(V,K,l);D&&d.push(D)}}}}}return d},a.canCollide=function(u,d){return u.group===d.group&&u.group!==0?u.group>0:(u.mask&d.category)!==0&&(d.mask&u.category)!==0},a._compareBoundsX=function(u,d){return u.bounds.min.x-d.bounds.min.x}})()},70584:(r,g,n)=>{var a={};r.exports=a;var p=n(17319);(function(){a.create=function(h,u){var d=h.bodyA,l=h.bodyB,c={id:a.id(d,l),bodyA:d,bodyB:l,collision:h,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:d.isSensor||l.isSensor,timeCreated:u,timeUpdated:u,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return a.update(c,h,u),c},a.update=function(h,u,d){var l=h.contacts,c=u.supports,m=h.activeContacts,f=u.parentA,v=u.parentB,S=f.vertices.length;h.isActive=!0,h.timeUpdated=d,h.collision=u,h.separation=u.depth,h.inverseMass=f.inverseMass+v.inverseMass,h.friction=f.friction<v.friction?f.friction:v.friction,h.frictionStatic=f.frictionStatic>v.frictionStatic?f.frictionStatic:v.frictionStatic,h.restitution=f.restitution>v.restitution?f.restitution:v.restitution,h.slop=f.slop>v.slop?f.slop:v.slop,u.pair=h,m.length=0;for(var x=0;x<c.length;x++){var T=c[x],C=T.body===f?T.index:S+T.index,w=l[C];w?m.push(w):m.push(l[C]=p.create(T))}},a.setActive=function(h,u,d){u?(h.isActive=!0,h.timeUpdated=d):(h.isActive=!1,h.activeContacts.length=0)},a.id=function(h,u){return h.id<u.id?"A"+h.id+"B"+u.id:"A"+u.id+"B"+h.id}})()},91327:(r,g,n)=>{var a={};r.exports=a;var p=n(70584),h=n(68758);(function(){a.create=function(u){return h.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},u)},a.update=function(u,d,l){var c=u.list,m=c.length,f=u.table,v=d.length,S=u.collisionStart,x=u.collisionEnd,T=u.collisionActive,C,w,b,E;for(S.length=0,x.length=0,T.length=0,E=0;E<m;E++)c[E].confirmedActive=!1;for(E=0;E<v;E++)C=d[E],b=C.pair,b?(b.isActive?T.push(b):S.push(b),p.update(b,C,l),b.confirmedActive=!0):(b=p.create(C,l),f[b.id]=b,S.push(b),c.push(b));var A=[];for(m=c.length,E=0;E<m;E++)b=c[E],b.confirmedActive||(p.setActive(b,!1,l),x.push(b),!b.collision.bodyA.isSleeping&&!b.collision.bodyB.isSleeping&&A.push(E));for(E=0;E<A.length;E++)w=A[E]-E,b=c[w],c.splice(w,1),delete f[b.id]},a.clear=function(u){return u.table={},u.list.length=0,u.collisionStart.length=0,u.collisionActive.length=0,u.collisionEnd.length=0,u}})()},13390:(r,g,n)=>{var a={};r.exports=a;var p=n(10438),h=n(63454),u=n(84091),d=n(68516),l=n(39745);(function(){a.collides=function(c,m){for(var f=[],v=m.length,S=c.bounds,x=h.collides,T=u.overlaps,C=0;C<v;C++){var w=m[C],b=w.parts.length,E=b===1?0:1;if(c!==w&&T(w.bounds,S))for(var A=E;A<b;A++){var I=w.parts[A];if(T(I.bounds,S)){var R=x(I,c);if(R){f.push(R);break}}}}return f},a.ray=function(c,m,f,v){v=v||1e-100;for(var S=p.angle(m,f),x=p.magnitude(p.sub(m,f)),T=(f.x+m.x)*.5,C=(f.y+m.y)*.5,w=d.rectangle(T,C,x,v,{angle:S}),b=a.collides(w,c),E=0;E<b.length;E+=1){var A=b[E];A.body=A.bodyB=A.bodyA}return b},a.region=function(c,m,f){for(var v=[],S=0;S<c.length;S++){var x=c[S],T=u.overlaps(x.bounds,m);(T&&!f||!T&&f)&&v.push(x)}return v},a.point=function(c,m){for(var f=[],v=0;v<c.length;v++){var S=c[v];if(u.contains(S.bounds,m))for(var x=S.parts.length===1?0:1;x<S.parts.length;x++){var T=S.parts[x];if(u.contains(T.bounds,m)&&l.contains(T.vertices,m)){f.push(S);break}}}return f}})()},44272:(r,g,n)=>{var a={};r.exports=a;var p=n(39745),h=n(68758),u=n(84091);(function(){a._restingThresh=2,a._restingThreshTangent=Math.sqrt(6),a._positionDampen=.9,a._positionWarming=.8,a._frictionNormalMultiplier=5,a._frictionMaxStatic=Number.MAX_VALUE,a.preSolvePosition=function(d){var l,c,m,f=d.length;for(l=0;l<f;l++)c=d[l],c.isActive&&(m=c.activeContacts.length,c.collision.parentA.totalContacts+=m,c.collision.parentB.totalContacts+=m)},a.solvePosition=function(d,l,c){var m,f,v,S,x,T,C,w,b=a._positionDampen*(c||1),E=h.clamp(l/h._baseDelta,0,1),A=d.length;for(m=0;m<A;m++)f=d[m],!(!f.isActive||f.isSensor)&&(v=f.collision,S=v.parentA,x=v.parentB,T=v.normal,f.separation=T.x*(x.positionImpulse.x+v.penetration.x-S.positionImpulse.x)+T.y*(x.positionImpulse.y+v.penetration.y-S.positionImpulse.y));for(m=0;m<A;m++)f=d[m],!(!f.isActive||f.isSensor)&&(v=f.collision,S=v.parentA,x=v.parentB,T=v.normal,w=f.separation-f.slop*E,(S.isStatic||x.isStatic)&&(w*=2),S.isStatic||S.isSleeping||(C=b/S.totalContacts,S.positionImpulse.x+=T.x*w*C,S.positionImpulse.y+=T.y*w*C),x.isStatic||x.isSleeping||(C=b/x.totalContacts,x.positionImpulse.x-=T.x*w*C,x.positionImpulse.y-=T.y*w*C))},a.postSolvePosition=function(d){for(var l=a._positionWarming,c=d.length,m=p.translate,f=u.update,v=0;v<c;v++){var S=d[v],x=S.positionImpulse,T=x.x,C=x.y,w=S.velocity;if(S.totalContacts=0,T!==0||C!==0){for(var b=0;b<S.parts.length;b++){var E=S.parts[b];m(E.vertices,x),f(E.bounds,E.vertices,w),E.position.x+=T,E.position.y+=C}S.positionPrev.x+=T,S.positionPrev.y+=C,T*w.x+C*w.y<0?(x.x=0,x.y=0):(x.x*=l,x.y*=l)}}},a.preSolveVelocity=function(d){var l=d.length,c,m;for(c=0;c<l;c++){var f=d[c];if(!(!f.isActive||f.isSensor)){var v=f.activeContacts,S=v.length,x=f.collision,T=x.parentA,C=x.parentB,w=x.normal,b=x.tangent;for(m=0;m<S;m++){var E=v[m],A=E.vertex,I=E.normalImpulse,R=E.tangentImpulse;if(I!==0||R!==0){var N=w.x*I+b.x*R,F=w.y*I+b.y*R;T.isStatic||T.isSleeping||(T.positionPrev.x+=N*T.inverseMass,T.positionPrev.y+=F*T.inverseMass,T.anglePrev+=T.inverseInertia*((A.x-T.position.x)*F-(A.y-T.position.y)*N)),C.isStatic||C.isSleeping||(C.positionPrev.x-=N*C.inverseMass,C.positionPrev.y-=F*C.inverseMass,C.anglePrev-=C.inverseInertia*((A.x-C.position.x)*F-(A.y-C.position.y)*N))}}}}},a.solveVelocity=function(d,l){var c=l/h._baseDelta,m=c*c,f=m*c,v=-a._restingThresh*c,S=a._restingThreshTangent,x=a._frictionNormalMultiplier*c,T=a._frictionMaxStatic,C=d.length,w,b,E,A;for(E=0;E<C;E++){var I=d[E];if(!(!I.isActive||I.isSensor)){var R=I.collision,N=R.parentA,F=R.parentB,P=N.velocity,D=F.velocity,M=R.normal.x,L=R.normal.y,k=R.tangent.x,V=R.tangent.y,W=I.activeContacts,K=W.length,B=1/K,G=N.inverseMass+F.inverseMass,O=I.friction*I.frictionStatic*x;for(P.x=N.position.x-N.positionPrev.x,P.y=N.position.y-N.positionPrev.y,D.x=F.position.x-F.positionPrev.x,D.y=F.position.y-F.positionPrev.y,N.angularVelocity=N.angle-N.anglePrev,F.angularVelocity=F.angle-F.anglePrev,A=0;A<K;A++){var $=W[A],z=$.vertex,X=z.x-N.position.x,Y=z.y-N.position.y,Z=z.x-F.position.x,J=z.y-F.position.y,tt=P.x-Y*N.angularVelocity,et=P.y+X*N.angularVelocity,lt=D.x-J*F.angularVelocity,ut=D.y+Z*F.angularVelocity,ct=tt-lt,ht=et-ut,xt=M*ct+L*ht,Tt=k*ct+V*ht,At=I.separation+xt,Rt=Math.min(At,1);Rt=At<0?0:Rt;var mt=Rt*O;Tt<-mt||Tt>mt?(b=Tt>0?Tt:-Tt,w=I.friction*(Tt>0?1:-1)*f,w<-b?w=-b:w>b&&(w=b)):(w=Tt,b=T);var bt=X*L-Y*M,Ct=Z*L-J*M,Ht=B/(G+N.inverseInertia*bt*bt+F.inverseInertia*Ct*Ct),zt=(1+I.restitution)*xt*Ht;if(w*=Ht,xt<v)$.normalImpulse=0;else{var Jt=$.normalImpulse;$.normalImpulse+=zt,$.normalImpulse>0&&($.normalImpulse=0),zt=$.normalImpulse-Jt}if(Tt<-S||Tt>S)$.tangentImpulse=0;else{var ae=$.tangentImpulse;$.tangentImpulse+=w,$.tangentImpulse<-b&&($.tangentImpulse=-b),$.tangentImpulse>b&&($.tangentImpulse=b),w=$.tangentImpulse-ae}var _t=M*zt+k*w,Zt=L*zt+V*w;N.isStatic||N.isSleeping||(N.positionPrev.x+=_t*N.inverseMass,N.positionPrev.y+=Zt*N.inverseMass,N.anglePrev+=(X*Zt-Y*_t)*N.inverseInertia),F.isStatic||F.isSleeping||(F.positionPrev.x-=_t*F.inverseMass,F.positionPrev.y-=Zt*F.inverseMass,F.anglePrev-=(Z*Zt-J*_t)*F.inverseInertia)}}}}})()},52838:(r,g,n)=>{var a={};r.exports=a;var p=n(39745),h=n(10438),u=n(22806),d=n(84091),l=n(50658),c=n(68758);(function(){a._warming=.4,a._torqueDampen=1,a._minLength=1e-6,a.create=function(m){var f=m;f.bodyA&&!f.pointA&&(f.pointA={x:0,y:0}),f.bodyB&&!f.pointB&&(f.pointB={x:0,y:0});var v=f.bodyA?h.add(f.bodyA.position,f.pointA):f.pointA,S=f.bodyB?h.add(f.bodyB.position,f.pointB):f.pointB,x=h.magnitude(h.sub(v,S));f.length=typeof f.length<"u"?f.length:x,f.id=f.id||c.nextId(),f.label=f.label||"Constraint",f.type="constraint",f.stiffness=f.stiffness||(f.length>0?1:.7),f.damping=f.damping||0,f.angularStiffness=f.angularStiffness||0,f.angleA=f.bodyA?f.bodyA.angle:f.angleA,f.angleB=f.bodyB?f.bodyB.angle:f.angleB,f.plugin={};var T={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return f.length===0&&f.stiffness>.1?(T.type="pin",T.anchors=!1):f.stiffness<.9&&(T.type="spring"),f.render=c.extend(T,f.render),f},a.preSolveAll=function(m){for(var f=0;f<m.length;f+=1){var v=m[f],S=v.constraintImpulse;v.isStatic||S.x===0&&S.y===0&&S.angle===0||(v.position.x+=S.x,v.position.y+=S.y,v.angle+=S.angle)}},a.solveAll=function(m,f){for(var v=c.clamp(f/c._baseDelta,0,1),S=0;S<m.length;S+=1){var x=m[S],T=!x.bodyA||x.bodyA&&x.bodyA.isStatic,C=!x.bodyB||x.bodyB&&x.bodyB.isStatic;(T||C)&&a.solve(m[S],v)}for(S=0;S<m.length;S+=1)x=m[S],T=!x.bodyA||x.bodyA&&x.bodyA.isStatic,C=!x.bodyB||x.bodyB&&x.bodyB.isStatic,!T&&!C&&a.solve(m[S],v)},a.solve=function(m,f){var v=m.bodyA,S=m.bodyB,x=m.pointA,T=m.pointB;if(!(!v&&!S)){v&&!v.isStatic&&(h.rotate(x,v.angle-m.angleA,x),m.angleA=v.angle),S&&!S.isStatic&&(h.rotate(T,S.angle-m.angleB,T),m.angleB=S.angle);var C=x,w=T;if(v&&(C=h.add(v.position,x)),S&&(w=h.add(S.position,T)),!(!C||!w)){var b=h.sub(C,w),E=h.magnitude(b);E<a._minLength&&(E=a._minLength);var A=(E-m.length)/E,I=m.stiffness>=1||m.length===0,R=I?m.stiffness*f:m.stiffness*f*f,N=m.damping*f,F=h.mult(b,A*R),P=(v?v.inverseMass:0)+(S?S.inverseMass:0),D=(v?v.inverseInertia:0)+(S?S.inverseInertia:0),M=P+D,L,k,V,W,K;if(N>0){var B=h.create();V=h.div(b,E),K=h.sub(S&&h.sub(S.position,S.positionPrev)||B,v&&h.sub(v.position,v.positionPrev)||B),W=h.dot(V,K)}v&&!v.isStatic&&(k=v.inverseMass/P,v.constraintImpulse.x-=F.x*k,v.constraintImpulse.y-=F.y*k,v.position.x-=F.x*k,v.position.y-=F.y*k,N>0&&(v.positionPrev.x-=N*V.x*W*k,v.positionPrev.y-=N*V.y*W*k),L=h.cross(x,F)/M*a._torqueDampen*v.inverseInertia*(1-m.angularStiffness),v.constraintImpulse.angle-=L,v.angle-=L),S&&!S.isStatic&&(k=S.inverseMass/P,S.constraintImpulse.x+=F.x*k,S.constraintImpulse.y+=F.y*k,S.position.x+=F.x*k,S.position.y+=F.y*k,N>0&&(S.positionPrev.x+=N*V.x*W*k,S.positionPrev.y+=N*V.y*W*k),L=h.cross(T,F)/M*a._torqueDampen*S.inverseInertia*(1-m.angularStiffness),S.constraintImpulse.angle+=L,S.angle+=L)}}},a.postSolveAll=function(m){for(var f=0;f<m.length;f++){var v=m[f],S=v.constraintImpulse;if(!(v.isStatic||S.x===0&&S.y===0&&S.angle===0)){u.set(v,!1);for(var x=0;x<v.parts.length;x++){var T=v.parts[x];p.translate(T.vertices,S),x>0&&(T.position.x+=S.x,T.position.y+=S.y),S.angle!==0&&(p.rotate(T.vertices,S.angle,v.position),l.rotate(T.axes,S.angle),x>0&&h.rotateAbout(T.position,S.angle,v.position,T.position)),d.update(T.bounds,T.vertices,v.velocity)}S.angle*=a._warming,S.x*=a._warming,S.y*=a._warming}}},a.pointAWorld=function(m){return{x:(m.bodyA?m.bodyA.position.x:0)+(m.pointA?m.pointA.x:0),y:(m.bodyA?m.bodyA.position.y:0)+(m.pointA?m.pointA.y:0)}},a.pointBWorld=function(m){return{x:(m.bodyB?m.bodyB.position.x:0)+(m.pointB?m.pointB.x:0),y:(m.bodyB?m.bodyB.position.y:0)+(m.pointB?m.pointB.y:0)}},a.currentLength=function(m){var f=(m.bodyA?m.bodyA.position.x:0)+(m.pointA?m.pointA.x:0),v=(m.bodyA?m.bodyA.position.y:0)+(m.pointA?m.pointA.y:0),S=(m.bodyB?m.bodyB.position.x:0)+(m.pointB?m.pointB.x:0),x=(m.bodyB?m.bodyB.position.y:0)+(m.pointB?m.pointB.y:0),T=f-S,C=v-x;return Math.sqrt(T*T+C*C)}})()},68758:(r,g,n)=>{var a={};r.exports=a,function(){a._baseDelta=16.666666666666668,a._nextId=0,a._seed=0,a._nowStartTime=+new Date,a._warnedOnce={},a._decomp=null,a.extend=function(h,u){var d,l;typeof u=="boolean"?(d=2,l=u):(d=1,l=!0);for(var c=d;c<arguments.length;c++){var m=arguments[c];if(m)for(var f in m)l&&m[f]&&m[f].constructor===Object&&(!h[f]||h[f].constructor===Object)?(h[f]=h[f]||{},a.extend(h[f],l,m[f])):h[f]=m[f]}return h},a.clone=function(h,u){return a.extend({},u,h)},a.keys=function(h){if(Object.keys)return Object.keys(h);var u=[];for(var d in h)u.push(d);return u},a.values=function(h){var u=[];if(Object.keys){for(var d=Object.keys(h),l=0;l<d.length;l++)u.push(h[d[l]]);return u}for(var c in h)u.push(h[c]);return u},a.get=function(h,u,d,l){u=u.split(".").slice(d,l);for(var c=0;c<u.length;c+=1)h=h[u[c]];return h},a.set=function(h,u,d,l,c){var m=u.split(".").slice(l,c);return a.get(h,u,0,-1)[m[m.length-1]]=d,d},a.shuffle=function(h){for(var u=h.length-1;u>0;u--){var d=Math.floor(a.random()*(u+1)),l=h[u];h[u]=h[d],h[d]=l}return h},a.choose=function(h){return h[Math.floor(a.random()*h.length)]},a.isElement=function(h){return typeof HTMLElement<"u"?h instanceof HTMLElement:!!(h&&h.nodeType&&h.nodeName)},a.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"},a.isFunction=function(h){return typeof h=="function"},a.isPlainObject=function(h){return typeof h=="object"&&h.constructor===Object},a.isString=function(h){return toString.call(h)==="[object String]"},a.clamp=function(h,u,d){return h<u?u:h>d?d:h},a.sign=function(h){return h<0?-1:1},a.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-a._nowStartTime},a.random=function(h,u){return h=typeof h<"u"?h:0,u=typeof u<"u"?u:1,h+p()*(u-h)};var p=function(){return a._seed=(a._seed*9301+49297)%233280,a._seed/233280};a.colorToNumber=function(h){return h=h.replace("#",""),h.length==3&&(h=h.charAt(0)+h.charAt(0)+h.charAt(1)+h.charAt(1)+h.charAt(2)+h.charAt(2)),parseInt(h,16)},a.logLevel=1,a.log=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.info=function(){console&&a.logLevel>0&&a.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warn=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warnOnce=function(){var h=Array.prototype.slice.call(arguments).join(" ");a._warnedOnce[h]||(a.warn(h),a._warnedOnce[h]=!0)},a.deprecated=function(h,u,d){h[u]=a.chain(function(){a.warnOnce("🔅 deprecated 🔅",d)},h[u])},a.nextId=function(){return a._nextId++},a.indexOf=function(h,u){if(h.indexOf)return h.indexOf(u);for(var d=0;d<h.length;d++)if(h[d]===u)return d;return-1},a.map=function(h,u){if(h.map)return h.map(u);for(var d=[],l=0;l<h.length;l+=1)d.push(u(h[l]));return d},a.topologicalSort=function(h){var u=[],d=[],l=[];for(var c in h)!d[c]&&!l[c]&&a._topologicalSort(c,d,l,h,u);return u},a._topologicalSort=function(h,u,d,l,c){var m=l[h]||[];d[h]=!0;for(var f=0;f<m.length;f+=1){var v=m[f];d[v]||u[v]||a._topologicalSort(v,u,d,l,c)}d[h]=!1,u[h]=!0,c.push(h)},a.chain=function(){for(var h=[],u=0;u<arguments.length;u+=1){var d=arguments[u];d._chained?h.push.apply(h,d._chained):h.push(d)}var l=function(){for(var c,m=new Array(arguments.length),f=0,v=arguments.length;f<v;f++)m[f]=arguments[f];for(f=0;f<h.length;f+=1){var S=h[f].apply(c,m);typeof S<"u"&&(c=S)}return c};return l._chained=h,l},a.chainPathBefore=function(h,u,d){return a.set(h,u,a.chain(d,a.get(h,u)))},a.chainPathAfter=function(h,u,d){return a.set(h,u,a.chain(a.get(h,u),d))},a.setDecomp=function(h){a._decomp=h},a.getDecomp=function(){var h=a._decomp;try{!h&&typeof window<"u"&&(h=window.decomp),!h&&typeof n.g<"u"&&(h=n.g.decomp)}catch{h=null}return h}}()},45775:(r,g,n)=>{var a={};r.exports=a;var p=n(22806),h=n(44272),u=n(13657),d=n(91327),l=n(39073),c=n(11299),m=n(52838),f=n(68758),v=n(84125);(function(){a.create=function(S){S=S||{};var x={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},T=f.extend(x,S);return T.world=S.world||c.create({label:"World"}),T.pairs=S.pairs||d.create(),T.detector=S.detector||u.create(),T.grid={buckets:[]},T.world.gravity=T.gravity,T.broadphase=T.grid,T.metrics={},T},a.update=function(S,x){var T=f.now(),C=S.world,w=S.detector,b=S.pairs,E=S.timing,A=E.timestamp,I;x=typeof x<"u"?x:f._baseDelta,x*=E.timeScale,E.timestamp+=x,E.lastDelta=x;var R={timestamp:E.timestamp,delta:x};l.trigger(S,"beforeUpdate",R);var N=c.allBodies(C),F=c.allConstraints(C);for(C.isModified&&(u.setBodies(w,N),c.setModified(C,!1,!1,!0)),S.enableSleeping&&p.update(N,x),a._bodiesApplyGravity(N,S.gravity),x>0&&a._bodiesUpdate(N,x),l.trigger(S,"beforeSolve",R),m.preSolveAll(N),I=0;I<S.constraintIterations;I++)m.solveAll(F,x);m.postSolveAll(N),w.pairs=S.pairs;var P=u.collisions(w);d.update(b,P,A),S.enableSleeping&&p.afterCollisions(b.list),b.collisionStart.length>0&&l.trigger(S,"collisionStart",{pairs:b.collisionStart,timestamp:E.timestamp,delta:x});var D=f.clamp(20/S.positionIterations,0,1);for(h.preSolvePosition(b.list),I=0;I<S.positionIterations;I++)h.solvePosition(b.list,x,D);for(h.postSolvePosition(N),m.preSolveAll(N),I=0;I<S.constraintIterations;I++)m.solveAll(F,x);for(m.postSolveAll(N),h.preSolveVelocity(b.list),I=0;I<S.velocityIterations;I++)h.solveVelocity(b.list,x);return a._bodiesUpdateVelocities(N),b.collisionActive.length>0&&l.trigger(S,"collisionActive",{pairs:b.collisionActive,timestamp:E.timestamp,delta:x}),b.collisionEnd.length>0&&l.trigger(S,"collisionEnd",{pairs:b.collisionEnd,timestamp:E.timestamp,delta:x}),a._bodiesClearForces(N),l.trigger(S,"afterUpdate",R),S.timing.lastElapsed=f.now()-T,S},a.merge=function(S,x){if(f.extend(S,x),x.world){S.world=x.world,a.clear(S);for(var T=c.allBodies(S.world),C=0;C<T.length;C++){var w=T[C];p.set(w,!1),w.id=f.nextId()}}},a.clear=function(S){d.clear(S.pairs),u.clear(S.detector)},a._bodiesClearForces=function(S){for(var x=S.length,T=0;T<x;T++){var C=S[T];C.force.x=0,C.force.y=0,C.torque=0}},a._bodiesApplyGravity=function(S,x){var T=typeof x.scale<"u"?x.scale:.001,C=S.length;if(!(x.x===0&&x.y===0||T===0))for(var w=0;w<C;w++){var b=S[w];b.isStatic||b.isSleeping||(b.force.y+=b.mass*x.y*T,b.force.x+=b.mass*x.x*T)}},a._bodiesUpdate=function(S,x){for(var T=S.length,C=0;C<T;C++){var w=S[C];w.isStatic||w.isSleeping||v.update(w,x)}},a._bodiesUpdateVelocities=function(S){for(var x=S.length,T=0;T<x;T++)v.updateVelocities(S[T])}})()},39073:(r,g,n)=>{var a={};r.exports=a;var p=n(68758);(function(){a.on=function(h,u,d){for(var l=u.split(" "),c,m=0;m<l.length;m++)c=l[m],h.events=h.events||{},h.events[c]=h.events[c]||[],h.events[c].push(d);return d},a.off=function(h,u,d){if(!u){h.events={};return}typeof u=="function"&&(d=u,u=p.keys(h.events).join(" "));for(var l=u.split(" "),c=0;c<l.length;c++){var m=h.events[l[c]],f=[];if(d&&m)for(var v=0;v<m.length;v++)m[v]!==d&&f.push(m[v]);h.events[l[c]]=f}},a.trigger=function(h,u,d){var l,c,m,f,v=h.events;if(v&&p.keys(v).length>0){d||(d={}),l=u.split(" ");for(var S=0;S<l.length;S++)if(c=l[S],m=v[c],m){f=p.clone(d,!1),f.name=c,f.source=h;for(var x=0;x<m.length;x++)m[x].apply(h,[f])}}}})()},16929:(r,g,n)=>{var a={};r.exports=a;var p=n(84474),h=n(68758);(function(){a.name="matter-js",a.version="0.19.0",a.uses=[],a.used=[],a.use=function(){p.use(a,Array.prototype.slice.call(arguments))},a.before=function(u,d){return u=u.replace(/^Matter./,""),h.chainPathBefore(a,u,d)},a.after=function(u,d){return u=u.replace(/^Matter./,""),h.chainPathAfter(a,u,d)}})()},84474:(r,g,n)=>{var a={};r.exports=a;var p=n(68758);(function(){a._registry={},a.register=function(h){if(a.isPlugin(h)||p.warn("Plugin.register:",a.toString(h),"does not implement all required fields."),h.name in a._registry){var u=a._registry[h.name],d=a.versionParse(h.version).number,l=a.versionParse(u.version).number;d>l?(p.warn("Plugin.register:",a.toString(u),"was upgraded to",a.toString(h)),a._registry[h.name]=h):d<l?p.warn("Plugin.register:",a.toString(u),"can not be downgraded to",a.toString(h)):h!==u&&p.warn("Plugin.register:",a.toString(h),"is already registered to different plugin object")}else a._registry[h.name]=h;return h},a.resolve=function(h){return a._registry[a.dependencyParse(h).name]},a.toString=function(h){return typeof h=="string"?h:(h.name||"anonymous")+"@"+(h.version||h.range||"0.0.0")},a.isPlugin=function(h){return h&&h.name&&h.version&&h.install},a.isUsed=function(h,u){return h.used.indexOf(u)>-1},a.isFor=function(h,u){var d=h.for&&a.dependencyParse(h.for);return!h.for||u.name===d.name&&a.versionSatisfies(u.version,d.range)},a.use=function(h,u){if(h.uses=(h.uses||[]).concat(u||[]),h.uses.length===0){p.warn("Plugin.use:",a.toString(h),"does not specify any dependencies to install.");return}for(var d=a.dependencies(h),l=p.topologicalSort(d),c=[],m=0;m<l.length;m+=1)if(l[m]!==h.name){var f=a.resolve(l[m]);if(!f){c.push("❌ "+l[m]);continue}a.isUsed(h,f.name)||(a.isFor(f,h)||(p.warn("Plugin.use:",a.toString(f),"is for",f.for,"but installed on",a.toString(h)+"."),f._warned=!0),f.install?f.install(h):(p.warn("Plugin.use:",a.toString(f),"does not specify an install function."),f._warned=!0),f._warned?(c.push("🔶 "+a.toString(f)),delete f._warned):c.push("✅ "+a.toString(f)),h.used.push(f.name))}c.length>0&&!f.silent&&p.info(c.join("  "))},a.dependencies=function(h,u){var d=a.dependencyParse(h),l=d.name;if(u=u||{},!(l in u)){h=a.resolve(h)||h,u[l]=p.map(h.uses||[],function(m){a.isPlugin(m)&&a.register(m);var f=a.dependencyParse(m),v=a.resolve(m);return v&&!a.versionSatisfies(v.version,f.range)?(p.warn("Plugin.dependencies:",a.toString(v),"does not satisfy",a.toString(f),"used by",a.toString(d)+"."),v._warned=!0,h._warned=!0):v||(p.warn("Plugin.dependencies:",a.toString(m),"used by",a.toString(d),"could not be resolved."),h._warned=!0),f.name});for(var c=0;c<u[l].length;c+=1)a.dependencies(u[l][c],u);return u}},a.dependencyParse=function(h){if(p.isString(h)){var u=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return u.test(h)||p.warn("Plugin.dependencyParse:",h,"is not a valid dependency string."),{name:h.split("@")[0],range:h.split("@")[1]||"*"}}return{name:h.name,range:h.range||h.version}},a.versionParse=function(h){var u=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;u.test(h)||p.warn("Plugin.versionParse:",h,"is not a valid version or range.");var d=u.exec(h),l=Number(d[4]),c=Number(d[5]),m=Number(d[6]);return{isRange:!!(d[1]||d[2]),version:d[3],range:h,operator:d[1]||d[2]||"",major:l,minor:c,patch:m,parts:[l,c,m],prerelease:d[7],number:l*1e8+c*1e4+m}},a.versionSatisfies=function(h,u){u=u||"*";var d=a.versionParse(u),l=a.versionParse(h);if(d.isRange){if(d.operator==="*"||h==="*")return!0;if(d.operator===">")return l.number>d.number;if(d.operator===">=")return l.number>=d.number;if(d.operator==="~")return l.major===d.major&&l.minor===d.minor&&l.patch>=d.patch;if(d.operator==="^")return d.major>0?l.major===d.major&&l.number>=d.number:d.minor>0?l.minor===d.minor&&l.patch>=d.patch:l.patch===d.patch}return h===u||h==="*"}})()},22806:(r,g,n)=>{var a={};r.exports=a;var p=n(84125),h=n(39073),u=n(68758);(function(){a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(d,l){for(var c=l/u._baseDelta,m=a._motionSleepThreshold,f=0;f<d.length;f++){var v=d[f],S=p.getSpeed(v),x=p.getAngularSpeed(v),T=S*S+x*x;if(v.force.x!==0||v.force.y!==0){a.set(v,!1);continue}var C=Math.min(v.motion,T),w=Math.max(v.motion,T);v.motion=a._minBias*C+(1-a._minBias)*w,v.sleepThreshold>0&&v.motion<m?(v.sleepCounter+=1,v.sleepCounter>=v.sleepThreshold/c&&a.set(v,!0)):v.sleepCounter>0&&(v.sleepCounter-=1)}},a.afterCollisions=function(d){for(var l=a._motionSleepThreshold,c=0;c<d.length;c++){var m=d[c];if(m.isActive){var f=m.collision,v=f.bodyA.parent,S=f.bodyB.parent;if(!(v.isSleeping&&S.isSleeping||v.isStatic||S.isStatic)&&(v.isSleeping||S.isSleeping)){var x=v.isSleeping&&!v.isStatic?v:S,T=x===v?S:v;!x.isStatic&&T.motion>l&&a.set(x,!1)}}}},a.set=function(d,l){var c=d.isSleeping;l?(d.isSleeping=!0,d.sleepCounter=d.sleepThreshold,d.positionImpulse.x=0,d.positionImpulse.y=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.speed=0,d.angularSpeed=0,d.motion=0,c||h.trigger(d,"sleepStart")):(d.isSleeping=!1,d.sleepCounter=0,c&&h.trigger(d,"sleepEnd"))}})()},68516:(r,g,n)=>{var a={};r.exports=a;var p=n(39745),h=n(68758),u=n(84125),d=n(84091),l=n(10438);(function(){a.rectangle=function(c,m,f,v,S){S=S||{};var x={label:"Rectangle Body",position:{x:c,y:m},vertices:p.fromPath("L 0 0 L "+f+" 0 L "+f+" "+v+" L 0 "+v)};if(S.chamfer){var T=S.chamfer;x.vertices=p.chamfer(x.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete S.chamfer}return u.create(h.extend({},x,S))},a.trapezoid=function(c,m,f,v,S,x){x=x||{},S*=.5;var T=(1-S*2)*f,C=f*S,w=C+T,b=w+C,E;S<.5?E="L 0 0 L "+C+" "+-v+" L "+w+" "+-v+" L "+b+" 0":E="L 0 0 L "+w+" "+-v+" L "+b+" 0";var A={label:"Trapezoid Body",position:{x:c,y:m},vertices:p.fromPath(E)};if(x.chamfer){var I=x.chamfer;A.vertices=p.chamfer(A.vertices,I.radius,I.quality,I.qualityMin,I.qualityMax),delete x.chamfer}return u.create(h.extend({},A,x))},a.circle=function(c,m,f,v,S){v=v||{};var x={label:"Circle Body",circleRadius:f};S=S||25;var T=Math.ceil(Math.max(10,Math.min(S,f)));return T%2===1&&(T+=1),a.polygon(c,m,T,f,h.extend({},x,v))},a.polygon=function(c,m,f,v,S){if(S=S||{},f<3)return a.circle(c,m,v,S);for(var x=2*Math.PI/f,T="",C=x*.5,w=0;w<f;w+=1){var b=C+w*x,E=Math.cos(b)*v,A=Math.sin(b)*v;T+="L "+E.toFixed(3)+" "+A.toFixed(3)+" "}var I={label:"Polygon Body",position:{x:c,y:m},vertices:p.fromPath(T)};if(S.chamfer){var R=S.chamfer;I.vertices=p.chamfer(I.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete S.chamfer}return u.create(h.extend({},I,S))},a.fromVertices=function(c,m,f,v,S,x,T,C){var w=h.getDecomp(),b,E,A,I,R,N,F,P,D,M,L;for(b=!!(w&&w.quickDecomp),v=v||{},A=[],S=typeof S<"u"?S:!1,x=typeof x<"u"?x:.01,T=typeof T<"u"?T:10,C=typeof C<"u"?C:.01,h.isArray(f[0])||(f=[f]),M=0;M<f.length;M+=1)if(N=f[M],I=p.isConvex(N),R=!I,R&&!b&&h.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),I||!b)I?N=p.clockwiseSort(N):N=p.hull(N),A.push({position:{x:c,y:m},vertices:N});else{var k=N.map(function(Z){return[Z.x,Z.y]});w.makeCCW(k),x!==!1&&w.removeCollinearPoints(k,x),C!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(k,C);var V=w.quickDecomp(k);for(F=0;F<V.length;F++){var W=V[F],K=W.map(function(Z){return{x:Z[0],y:Z[1]}});T>0&&p.area(K)<T||A.push({position:p.centre(K),vertices:K})}}for(F=0;F<A.length;F++)A[F]=u.create(h.extend(A[F],v));if(S){var B=5;for(F=0;F<A.length;F++){var G=A[F];for(P=F+1;P<A.length;P++){var O=A[P];if(d.overlaps(G.bounds,O.bounds)){var $=G.vertices,z=O.vertices;for(D=0;D<G.vertices.length;D++)for(L=0;L<O.vertices.length;L++){var X=l.magnitudeSquared(l.sub($[(D+1)%$.length],z[L])),Y=l.magnitudeSquared(l.sub($[D],z[(L+1)%z.length]));X<B&&Y<B&&($[D].isInternal=!0,z[L].isInternal=!0)}}}}}return A.length>1?(E=u.create(h.extend({parts:A.slice(0)},v)),u.setPosition(E,{x:c,y:m}),E):A[0]},a.flagCoincidentParts=function(c,m){m===void 0&&(m=5);for(var f=0;f<c.length;f++)for(var v=c[f],S=f+1;S<c.length;S++){var x=c[S];if(d.overlaps(v.bounds,x.bounds))for(var T=v.vertices,C=x.vertices,w=0;w<v.vertices.length;w++)for(var b=0;b<x.vertices.length;b++){var E=l.magnitudeSquared(l.sub(T[(w+1)%T.length],C[b])),A=l.magnitudeSquared(l.sub(T[w],C[(b+1)%C.length]));E<m&&A<m&&(T[w].isInternal=!0,C[b].isInternal=!0)}}return c}})()},56643:(r,g,n)=>{var a={};r.exports=a;var p=n(11299),h=n(52838),u=n(68758),d=n(84125),l=n(68516);(function(){a.stack=function(c,m,f,v,S,x,T){for(var C=p.create({label:"Stack"}),w=c,b=m,E,A=0,I=0;I<v;I++){for(var R=0,N=0;N<f;N++){var F=T(w,b,N,I,E,A);if(F){var P=F.bounds.max.y-F.bounds.min.y,D=F.bounds.max.x-F.bounds.min.x;P>R&&(R=P),d.translate(F,{x:D*.5,y:P*.5}),w=F.bounds.max.x+S,p.addBody(C,F),E=F,A+=1}else w+=S}b+=R+x,w=c}return C},a.chain=function(c,m,f,v,S,x){for(var T=c.bodies,C=1;C<T.length;C++){var w=T[C-1],b=T[C],E=w.bounds.max.y-w.bounds.min.y,A=w.bounds.max.x-w.bounds.min.x,I=b.bounds.max.y-b.bounds.min.y,R=b.bounds.max.x-b.bounds.min.x,N={bodyA:w,pointA:{x:A*m,y:E*f},bodyB:b,pointB:{x:R*v,y:I*S}},F=u.extend(N,x);p.addConstraint(c,h.create(F))}return c.label+=" Chain",c},a.mesh=function(c,m,f,v,S){var x=c.bodies,T,C,w,b,E;for(T=0;T<f;T++){for(C=1;C<m;C++)w=x[C-1+T*m],b=x[C+T*m],p.addConstraint(c,h.create(u.extend({bodyA:w,bodyB:b},S)));if(T>0)for(C=0;C<m;C++)w=x[C+(T-1)*m],b=x[C+T*m],p.addConstraint(c,h.create(u.extend({bodyA:w,bodyB:b},S))),v&&C>0&&(E=x[C-1+(T-1)*m],p.addConstraint(c,h.create(u.extend({bodyA:E,bodyB:b},S)))),v&&C<m-1&&(E=x[C+1+(T-1)*m],p.addConstraint(c,h.create(u.extend({bodyA:E,bodyB:b},S))))}return c.label+=" Mesh",c},a.pyramid=function(c,m,f,v,S,x,T){return a.stack(c,m,f,v,S,x,function(C,w,b,E,A,I){var R=Math.min(v,Math.ceil(f/2)),N=A?A.bounds.max.x-A.bounds.min.x:0;if(!(E>R)){E=R-E;var F=E,P=f-1-E;if(!(b<F||b>P)){I===1&&d.translate(A,{x:(b+(f%2===1?1:-1))*N,y:0});var D=A?b*N:0;return T(c+D+b*S,w,b,E,A,I)}}})},a.newtonsCradle=function(c,m,f,v,S){for(var x=p.create({label:"Newtons Cradle"}),T=0;T<f;T++){var C=1.9,w=l.circle(c+T*(v*C),m+S,v,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),b=h.create({pointA:{x:c+T*(v*C),y:m},bodyB:w});p.addBody(x,w),p.addConstraint(x,b)}return x},a.car=function(c,m,f,v,S){var x=d.nextGroup(!0),T=20,C=-f*.5+T,w=f*.5-T,b=0,E=p.create({label:"Car"}),A=l.rectangle(c,m,f,v,{collisionFilter:{group:x},chamfer:{radius:v*.5},density:2e-4}),I=l.circle(c+C,m+b,S,{collisionFilter:{group:x},friction:.8}),R=l.circle(c+w,m+b,S,{collisionFilter:{group:x},friction:.8}),N=h.create({bodyB:A,pointB:{x:C,y:b},bodyA:I,stiffness:1,length:0}),F=h.create({bodyB:A,pointB:{x:w,y:b},bodyA:R,stiffness:1,length:0});return p.addBody(E,A),p.addBody(E,I),p.addBody(E,R),p.addConstraint(E,N),p.addConstraint(E,F),E},a.softBody=function(c,m,f,v,S,x,T,C,w,b){w=u.extend({inertia:1/0},w),b=u.extend({stiffness:.2,render:{type:"line",anchors:!1}},b);var E=a.stack(c,m,f,v,S,x,function(A,I){return l.circle(A,I,C,w)});return a.mesh(E,f,v,T,b),E.label="Soft Body",E}})()},50658:(r,g,n)=>{var a={};r.exports=a;var p=n(10438),h=n(68758);(function(){a.fromVertices=function(u){for(var d={},l=0;l<u.length;l++){var c=(l+1)%u.length,m=p.normalise({x:u[c].y-u[l].y,y:u[l].x-u[c].x}),f=m.y===0?1/0:m.x/m.y;f=f.toFixed(3).toString(),d[f]=m}return h.values(d)},a.rotate=function(u,d){if(d!==0)for(var l=Math.cos(d),c=Math.sin(d),m=0;m<u.length;m++){var f=u[m],v;v=f.x*l-f.y*c,f.y=f.x*c+f.y*l,f.x=v}}})()},84091:r=>{var g={};r.exports=g,function(){g.create=function(n){var a={min:{x:0,y:0},max:{x:0,y:0}};return n&&g.update(a,n),a},g.update=function(n,a,p){n.min.x=1/0,n.max.x=-1/0,n.min.y=1/0,n.max.y=-1/0;for(var h=0;h<a.length;h++){var u=a[h];u.x>n.max.x&&(n.max.x=u.x),u.x<n.min.x&&(n.min.x=u.x),u.y>n.max.y&&(n.max.y=u.y),u.y<n.min.y&&(n.min.y=u.y)}p&&(p.x>0?n.max.x+=p.x:n.min.x+=p.x,p.y>0?n.max.y+=p.y:n.min.y+=p.y)},g.contains=function(n,a){return a.x>=n.min.x&&a.x<=n.max.x&&a.y>=n.min.y&&a.y<=n.max.y},g.overlaps=function(n,a){return n.min.x<=a.max.x&&n.max.x>=a.min.x&&n.max.y>=a.min.y&&n.min.y<=a.max.y},g.translate=function(n,a){n.min.x+=a.x,n.max.x+=a.x,n.min.y+=a.y,n.max.y+=a.y},g.shift=function(n,a){var p=n.max.x-n.min.x,h=n.max.y-n.min.y;n.min.x=a.x,n.max.x=a.x+p,n.min.y=a.y,n.max.y=a.y+h}}()},92765:(r,g,n)=>{var a={};r.exports=a,n(84091);var p=n(68758);(function(){a.pathToVertices=function(h,u){typeof window<"u"&&!("SVGPathSeg"in window)&&p.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var d,l,c,m,f,v,S,x,T,C,w=[],b,E,A=0,I=0,R=0;u=u||15;var N=function(P,D,M){var L=M%2===1&&M>1;if(!T||P!=T.x||D!=T.y){T&&L?(b=T.x,E=T.y):(b=0,E=0);var k={x:b+P,y:E+D};(L||!T)&&(T=k),w.push(k),I=b+P,R=E+D}},F=function(P){var D=P.pathSegTypeAsLetter.toUpperCase();if(D!=="Z"){switch(D){case"M":case"L":case"T":case"C":case"S":case"Q":I=P.x,R=P.y;break;case"H":I=P.x;break;case"V":R=P.y;break}N(I,R,P.pathSegType)}};for(a._svgPathToAbsolute(h),c=h.getTotalLength(),v=[],d=0;d<h.pathSegList.numberOfItems;d+=1)v.push(h.pathSegList.getItem(d));for(S=v.concat();A<c;){if(C=h.getPathSegAtLength(A),f=v[C],f!=x){for(;S.length&&S[0]!=f;)F(S.shift());x=f}switch(f.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":m=h.getPointAtLength(A),N(m.x,m.y,0);break}A+=u}for(d=0,l=S.length;d<l;++d)F(S[d]);return w},a._svgPathToAbsolute=function(h){for(var u,d,l,c,m,f,v=h.pathSegList,S=0,x=0,T=v.numberOfItems,C=0;C<T;++C){var w=v.getItem(C),b=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(b))"x"in w&&(S=w.x),"y"in w&&(x=w.y);else switch("x1"in w&&(l=S+w.x1),"x2"in w&&(m=S+w.x2),"y1"in w&&(c=x+w.y1),"y2"in w&&(f=x+w.y2),"x"in w&&(S+=w.x),"y"in w&&(x+=w.y),b){case"m":v.replaceItem(h.createSVGPathSegMovetoAbs(S,x),C);break;case"l":v.replaceItem(h.createSVGPathSegLinetoAbs(S,x),C);break;case"h":v.replaceItem(h.createSVGPathSegLinetoHorizontalAbs(S),C);break;case"v":v.replaceItem(h.createSVGPathSegLinetoVerticalAbs(x),C);break;case"c":v.replaceItem(h.createSVGPathSegCurvetoCubicAbs(S,x,l,c,m,f),C);break;case"s":v.replaceItem(h.createSVGPathSegCurvetoCubicSmoothAbs(S,x,m,f),C);break;case"q":v.replaceItem(h.createSVGPathSegCurvetoQuadraticAbs(S,x,l,c),C);break;case"t":v.replaceItem(h.createSVGPathSegCurvetoQuadraticSmoothAbs(S,x),C);break;case"a":v.replaceItem(h.createSVGPathSegArcAbs(S,x,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),C);break;case"z":case"Z":S=u,x=d;break}(b=="M"||b=="m")&&(u=S,d=x)}}})()},10438:r=>{var g={};r.exports=g,function(){g.create=function(n,a){return{x:n||0,y:a||0}},g.clone=function(n){return{x:n.x,y:n.y}},g.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},g.magnitudeSquared=function(n){return n.x*n.x+n.y*n.y},g.rotate=function(n,a,p){var h=Math.cos(a),u=Math.sin(a);p||(p={});var d=n.x*h-n.y*u;return p.y=n.x*u+n.y*h,p.x=d,p},g.rotateAbout=function(n,a,p,h){var u=Math.cos(a),d=Math.sin(a);h||(h={});var l=p.x+((n.x-p.x)*u-(n.y-p.y)*d);return h.y=p.y+((n.x-p.x)*d+(n.y-p.y)*u),h.x=l,h},g.normalise=function(n){var a=g.magnitude(n);return a===0?{x:0,y:0}:{x:n.x/a,y:n.y/a}},g.dot=function(n,a){return n.x*a.x+n.y*a.y},g.cross=function(n,a){return n.x*a.y-n.y*a.x},g.cross3=function(n,a,p){return(a.x-n.x)*(p.y-n.y)-(a.y-n.y)*(p.x-n.x)},g.add=function(n,a,p){return p||(p={}),p.x=n.x+a.x,p.y=n.y+a.y,p},g.sub=function(n,a,p){return p||(p={}),p.x=n.x-a.x,p.y=n.y-a.y,p},g.mult=function(n,a){return{x:n.x*a,y:n.y*a}},g.div=function(n,a){return{x:n.x/a,y:n.y/a}},g.perp=function(n,a){return a=a===!0?-1:1,{x:a*-n.y,y:a*n.x}},g.neg=function(n){return{x:-n.x,y:-n.y}},g.angle=function(n,a){return Math.atan2(a.y-n.y,a.x-n.x)},g._temp=[g.create(),g.create(),g.create(),g.create(),g.create(),g.create()]}()},39745:(r,g,n)=>{var a={};r.exports=a;var p=n(10438),h=n(68758);(function(){a.create=function(u,d){for(var l=[],c=0;c<u.length;c++){var m=u[c],f={x:m.x,y:m.y,index:c,body:d,isInternal:!1};l.push(f)}return l},a.fromPath=function(u,d){var l=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,c=[];return u.replace(l,function(m,f,v){c.push({x:parseFloat(f),y:parseFloat(v)})}),a.create(c,d)},a.centre=function(u){for(var d=a.area(u,!0),l={x:0,y:0},c,m,f,v=0;v<u.length;v++)f=(v+1)%u.length,c=p.cross(u[v],u[f]),m=p.mult(p.add(u[v],u[f]),c),l=p.add(l,m);return p.div(l,6*d)},a.mean=function(u){for(var d={x:0,y:0},l=0;l<u.length;l++)d.x+=u[l].x,d.y+=u[l].y;return p.div(d,u.length)},a.area=function(u,d){for(var l=0,c=u.length-1,m=0;m<u.length;m++)l+=(u[c].x-u[m].x)*(u[c].y+u[m].y),c=m;return d?l/2:Math.abs(l)/2},a.inertia=function(u,d){for(var l=0,c=0,m=u,f,v,S=0;S<m.length;S++)v=(S+1)%m.length,f=Math.abs(p.cross(m[v],m[S])),l+=f*(p.dot(m[v],m[v])+p.dot(m[v],m[S])+p.dot(m[S],m[S])),c+=f;return d/6*(l/c)},a.translate=function(u,d,l){l=typeof l<"u"?l:1;var c=u.length,m=d.x*l,f=d.y*l,v;for(v=0;v<c;v++)u[v].x+=m,u[v].y+=f;return u},a.rotate=function(u,d,l){if(d!==0){var c=Math.cos(d),m=Math.sin(d),f=l.x,v=l.y,S=u.length,x,T,C,w;for(w=0;w<S;w++)x=u[w],T=x.x-f,C=x.y-v,x.x=f+(T*c-C*m),x.y=v+(T*m+C*c);return u}},a.contains=function(u,d){for(var l=d.x,c=d.y,m=u.length,f=u[m-1],v,S=0;S<m;S++){if(v=u[S],(l-f.x)*(v.y-f.y)+(c-f.y)*(f.x-v.x)>0)return!1;f=v}return!0},a.scale=function(u,d,l,c){if(d===1&&l===1)return u;c=c||a.centre(u);for(var m,f,v=0;v<u.length;v++)m=u[v],f=p.sub(m,c),u[v].x=c.x+f.x*d,u[v].y=c.y+f.y*l;return u},a.chamfer=function(u,d,l,c,m){typeof d=="number"?d=[d]:d=d||[8],l=typeof l<"u"?l:-1,c=c||2,m=m||14;for(var f=[],v=0;v<u.length;v++){var S=u[v-1>=0?v-1:u.length-1],x=u[v],T=u[(v+1)%u.length],C=d[v<d.length?v:d.length-1];if(C===0){f.push(x);continue}var w=p.normalise({x:x.y-S.y,y:S.x-x.x}),b=p.normalise({x:T.y-x.y,y:x.x-T.x}),E=Math.sqrt(2*Math.pow(C,2)),A=p.mult(h.clone(w),C),I=p.normalise(p.mult(p.add(w,b),.5)),R=p.sub(x,p.mult(I,E)),N=l;l===-1&&(N=Math.pow(C,.32)*1.75),N=h.clamp(N,c,m),N%2===1&&(N+=1);for(var F=Math.acos(p.dot(w,b)),P=F/N,D=0;D<N;D++)f.push(p.add(p.rotate(A,P*D),R))}return f},a.clockwiseSort=function(u){var d=a.mean(u);return u.sort(function(l,c){return p.angle(d,l)-p.angle(d,c)}),u},a.isConvex=function(u){var d=0,l=u.length,c,m,f,v;if(l<3)return null;for(c=0;c<l;c++)if(m=(c+1)%l,f=(c+2)%l,v=(u[m].x-u[c].x)*(u[f].y-u[m].y),v-=(u[m].y-u[c].y)*(u[f].x-u[m].x),v<0?d|=1:v>0&&(d|=2),d===3)return!1;return d!==0?!0:null},a.hull=function(u){var d=[],l=[],c,m;for(u=u.slice(0),u.sort(function(f,v){var S=f.x-v.x;return S!==0?S:f.y-v.y}),m=0;m<u.length;m+=1){for(c=u[m];l.length>=2&&p.cross3(l[l.length-2],l[l.length-1],c)<=0;)l.pop();l.push(c)}for(m=u.length-1;m>=0;m-=1){for(c=u[m];d.length>=2&&p.cross3(d[d.length-2],d[d.length-1],c)<=0;)d.pop();d.push(c)}return d.pop(),l.pop(),d.concat(l)}})()},1675:(r,g,n)=>{var a=n(18171),p={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(h){h.after("Body.create",function(){p.Body.init(this)}),h.before("Engine.update",function(u){p.Engine.update(u)})},Body:{init:function(h){h.plugin.attractors=h.plugin.attractors||[]}},Engine:{update:function(h){for(var u=a.Composite.allBodies(h.world),d=0;d<u.length;d++){var l=u[d],c=l.plugin.attractors;if(c&&c.length>0)for(var m=0;m<u.length;m++){var f=u[m];if(d!==m)for(var v=0;v<c.length;v++){var S=c[v],x=S;a.Common.isFunction(S)&&(x=S(l,f)),x&&a.Body.applyForce(f,f.position,x)}}}}},Attractors:{gravityConstant:.001,gravity:function(h,u){var d=a.Vector.sub(u.position,h.position),l=a.Vector.magnitudeSquared(d)||1e-4,c=a.Vector.normalise(d),m=-p.Attractors.gravityConstant*(h.mass*u.mass/l),f=a.Vector.mult(c,m);a.Body.applyForce(h,h.position,a.Vector.neg(f)),a.Body.applyForce(u,u.position,f)}}};r.exports=p},80391:r=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(n){n.after("Engine.create",function(){n.Events.on(this,"collisionStart",function(a){a.pairs.map(function(p){var h=p.bodyA,u=p.bodyB;h.gameObject&&h.gameObject.emit("collide",h,u,p),u.gameObject&&u.gameObject.emit("collide",u,h,p),n.Events.trigger(h,"onCollide",{pair:p}),n.Events.trigger(u,"onCollide",{pair:p}),h.onCollideCallback&&h.onCollideCallback(p),u.onCollideCallback&&u.onCollideCallback(p),h.onCollideWith[u.id]&&h.onCollideWith[u.id](u,p),u.onCollideWith[h.id]&&u.onCollideWith[h.id](h,p)})}),n.Events.on(this,"collisionActive",function(a){a.pairs.map(function(p){var h=p.bodyA,u=p.bodyB;h.gameObject&&h.gameObject.emit("collideActive",h,u,p),u.gameObject&&u.gameObject.emit("collideActive",u,h,p),n.Events.trigger(h,"onCollideActive",{pair:p}),n.Events.trigger(u,"onCollideActive",{pair:p}),h.onCollideActiveCallback&&h.onCollideActiveCallback(p),u.onCollideActiveCallback&&u.onCollideActiveCallback(p)})}),n.Events.on(this,"collisionEnd",function(a){a.pairs.map(function(p){var h=p.bodyA,u=p.bodyB;h.gameObject&&h.gameObject.emit("collideEnd",h,u,p),u.gameObject&&u.gameObject.emit("collideEnd",u,h,p),n.Events.trigger(h,"onCollideEnd",{pair:p}),n.Events.trigger(u,"onCollideEnd",{pair:p}),h.onCollideEndCallback&&h.onCollideEndCallback(p),u.onCollideEndCallback&&u.onCollideEndCallback(p)})})})}};r.exports=g},44097:(r,g,n)=>{var a=n(18171),p={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(h){h.after("Engine.update",function(){p.Engine.update(this)})},Engine:{update:function(h){for(var u=h.world,d=a.Composite.allBodies(u),l=a.Composite.allComposites(u),c=0;c<d.length;c+=1){var m=d[c];m.plugin.wrap&&p.Body.wrap(m,m.plugin.wrap)}for(c=0;c<l.length;c+=1){var f=l[c];f.plugin.wrap&&p.Composite.wrap(f,f.plugin.wrap)}}},Bounds:{wrap:function(h,u){var d=null,l=null;if(typeof u.min.x<"u"&&typeof u.max.x<"u"&&(h.min.x>u.max.x?d=u.min.x-h.max.x:h.max.x<u.min.x&&(d=u.max.x-h.min.x)),typeof u.min.y<"u"&&typeof u.max.y<"u"&&(h.min.y>u.max.y?l=u.min.y-h.max.y:h.max.y<u.min.y&&(l=u.max.y-h.min.y)),d!==null||l!==null)return{x:d||0,y:l||0}}},Body:{wrap:function(h,u){var d=p.Bounds.wrap(h.bounds,u);return d&&a.Body.translate(h,d),d}},Composite:{bounds:function(h){for(var u=a.Composite.allBodies(h),d=[],l=0;l<u.length;l+=1){var c=u[l];d.push(c.bounds.min,c.bounds.max)}return a.Bounds.create(d)},wrap:function(h,u){var d=p.Bounds.wrap(p.Composite.bounds(h),u);return d&&a.Composite.translate(h,d),d}}};r.exports=p},81084:r=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={decomp:F,quickDecomp:L,isSimple:D,removeCollinearPoints:k,removeDuplicatePoints:V,makeCCW:T};function g(B,G,O){O=O||0;var $=[0,0],z,X,Y,Z,J,tt,et;return z=B[1][1]-B[0][1],X=B[0][0]-B[1][0],Y=z*B[0][0]+X*B[0][1],Z=G[1][1]-G[0][1],J=G[0][0]-G[1][0],tt=Z*G[0][0]+J*G[0][1],et=z*J-Z*X,W(et,0,O)||($[0]=(J*Y-X*tt)/et,$[1]=(z*tt-Z*Y)/et),$}function n(B,G,O,$){var z=G[0]-B[0],X=G[1]-B[1],Y=$[0]-O[0],Z=$[1]-O[1];if(Y*X-Z*z===0)return!1;var J=(z*(O[1]-B[1])+X*(B[0]-O[0]))/(Y*X-Z*z),tt=(Y*(B[1]-O[1])+Z*(O[0]-B[0]))/(Z*z-Y*X);return J>=0&&J<=1&&tt>=0&&tt<=1}function a(B,G,O){return(G[0]-B[0])*(O[1]-B[1])-(O[0]-B[0])*(G[1]-B[1])}function p(B,G,O){return a(B,G,O)>0}function h(B,G,O){return a(B,G,O)>=0}function u(B,G,O){return a(B,G,O)<0}function d(B,G,O){return a(B,G,O)<=0}var l=[],c=[];function m(B,G,O,$){if($){var z=l,X=c;z[0]=G[0]-B[0],z[1]=G[1]-B[1],X[0]=O[0]-G[0],X[1]=O[1]-G[1];var Y=z[0]*X[0]+z[1]*X[1],Z=Math.sqrt(z[0]*z[0]+z[1]*z[1]),J=Math.sqrt(X[0]*X[0]+X[1]*X[1]),tt=Math.acos(Y/(Z*J));return tt<$}else return a(B,G,O)===0}function f(B,G){var O=G[0]-B[0],$=G[1]-B[1];return O*O+$*$}function v(B,G){var O=B.length;return B[G<0?G%O+O:G%O]}function S(B){B.length=0}function x(B,G,O,$){for(var z=O;z<$;z++)B.push(G[z])}function T(B){for(var G=0,O=B,$=1;$<B.length;++$)(O[$][1]<O[G][1]||O[$][1]===O[G][1]&&O[$][0]>O[G][0])&&(G=$);return p(v(B,G-1),v(B,G),v(B,G+1))?!1:(C(B),!0)}function C(B){for(var G=[],O=B.length,$=0;$!==O;$++)G.push(B.pop());for(var $=0;$!==O;$++)B[$]=G[$]}function w(B,G){return u(v(B,G-1),v(B,G),v(B,G+1))}var b=[],E=[];function A(B,G,O){var $,z,X=b,Y=E;if(h(v(B,G+1),v(B,G),v(B,O))&&d(v(B,G-1),v(B,G),v(B,O)))return!1;z=f(v(B,G),v(B,O));for(var Z=0;Z!==B.length;++Z)if(!((Z+1)%B.length===G||Z===G)&&h(v(B,G),v(B,O),v(B,Z+1))&&d(v(B,G),v(B,O),v(B,Z))&&(X[0]=v(B,G),X[1]=v(B,O),Y[0]=v(B,Z),Y[1]=v(B,Z+1),$=g(X,Y),f(v(B,G),$)<z))return!1;return!0}function I(B,G,O){for(var $=0;$!==B.length;++$)if(!($===G||$===O||($+1)%B.length===G||($+1)%B.length===O)&&n(v(B,G),v(B,O),v(B,$),v(B,$+1)))return!1;return!0}function R(B,G,O,$){var z=$||[];if(S(z),G<O)for(var X=G;X<=O;X++)z.push(B[X]);else{for(var X=0;X<=O;X++)z.push(B[X]);for(var X=G;X<B.length;X++)z.push(B[X])}return z}function N(B){for(var G=[],O=[],$=[],z=[],X=Number.MAX_VALUE,Y=0;Y<B.length;++Y)if(w(B,Y)){for(var Z=0;Z<B.length;++Z)if(A(B,Y,Z)){O=N(R(B,Y,Z,z)),$=N(R(B,Z,Y,z));for(var J=0;J<$.length;J++)O.push($[J]);O.length<X&&(G=O,X=O.length,G.push([v(B,Y),v(B,Z)]))}}return G}function F(B){var G=N(B);return G.length>0?P(B,G):[B]}function P(B,G){if(G.length===0)return[B];if(G instanceof Array&&G.length&&G[0]instanceof Array&&G[0].length===2&&G[0][0]instanceof Array){for(var O=[B],$=0;$<G.length;$++)for(var z=G[$],X=0;X<O.length;X++){var Y=O[X],Z=P(Y,z);if(Z){O.splice(X,1),O.push(Z[0],Z[1]);break}}return O}else{var z=G,$=B.indexOf(z[0]),X=B.indexOf(z[1]);return $!==-1&&X!==-1?[R(B,$,X),R(B,X,$)]:!1}}function D(B){var G=B,O;for(O=0;O<G.length-1;O++)for(var $=0;$<O-1;$++)if(n(G[O],G[O+1],G[$],G[$+1]))return!1;for(O=1;O<G.length-2;O++)if(n(G[0],G[G.length-1],G[O],G[O+1]))return!1;return!0}function M(B,G,O,$,z){z=z||0;var X=G[1]-B[1],Y=B[0]-G[0],Z=X*B[0]+Y*B[1],J=$[1]-O[1],tt=O[0]-$[0],et=J*O[0]+tt*O[1],lt=X*tt-J*Y;return W(lt,0,z)?[0,0]:[(tt*Z-Y*et)/lt,(X*et-J*Z)/lt]}function L(B,G,O,$,z,X,Y){X=X||100,Y=Y||0,z=z||25,G=typeof G<"u"?G:[],O=O||[],$=$||[];var Z=[0,0],J=[0,0],tt=[0,0],et=0,lt=0,ut=0,ct=0,ht=0,xt=0,Tt=0,At=[],Rt=[],mt=B,bt=B;if(bt.length<3)return G;if(Y++,Y>X)return console.warn("quickDecomp: max level ("+X+") reached."),G;for(var Ct=0;Ct<B.length;++Ct)if(w(mt,Ct)){O.push(mt[Ct]),et=lt=Number.MAX_VALUE;for(var Ht=0;Ht<B.length;++Ht)p(v(mt,Ct-1),v(mt,Ct),v(mt,Ht))&&d(v(mt,Ct-1),v(mt,Ct),v(mt,Ht-1))&&(tt=M(v(mt,Ct-1),v(mt,Ct),v(mt,Ht),v(mt,Ht-1)),u(v(mt,Ct+1),v(mt,Ct),tt)&&(ut=f(mt[Ct],tt),ut<lt&&(lt=ut,J=tt,xt=Ht))),p(v(mt,Ct+1),v(mt,Ct),v(mt,Ht+1))&&d(v(mt,Ct+1),v(mt,Ct),v(mt,Ht))&&(tt=M(v(mt,Ct+1),v(mt,Ct),v(mt,Ht),v(mt,Ht+1)),p(v(mt,Ct-1),v(mt,Ct),tt)&&(ut=f(mt[Ct],tt),ut<et&&(et=ut,Z=tt,ht=Ht)));if(xt===(ht+1)%B.length)tt[0]=(J[0]+Z[0])/2,tt[1]=(J[1]+Z[1])/2,$.push(tt),Ct<ht?(x(At,mt,Ct,ht+1),At.push(tt),Rt.push(tt),xt!==0&&x(Rt,mt,xt,mt.length),x(Rt,mt,0,Ct+1)):(Ct!==0&&x(At,mt,Ct,mt.length),x(At,mt,0,ht+1),At.push(tt),Rt.push(tt),x(Rt,mt,xt,Ct+1));else{if(xt>ht&&(ht+=B.length),ct=Number.MAX_VALUE,ht<xt)return G;for(var Ht=xt;Ht<=ht;++Ht)h(v(mt,Ct-1),v(mt,Ct),v(mt,Ht))&&d(v(mt,Ct+1),v(mt,Ct),v(mt,Ht))&&(ut=f(v(mt,Ct),v(mt,Ht)),ut<ct&&I(mt,Ct,Ht)&&(ct=ut,Tt=Ht%B.length));Ct<Tt?(x(At,mt,Ct,Tt+1),Tt!==0&&x(Rt,mt,Tt,bt.length),x(Rt,mt,0,Ct+1)):(Ct!==0&&x(At,mt,Ct,bt.length),x(At,mt,0,Tt+1),x(Rt,mt,Tt,Ct+1))}return At.length<Rt.length?(L(At,G,O,$,z,X,Y),L(Rt,G,O,$,z,X,Y)):(L(Rt,G,O,$,z,X,Y),L(At,G,O,$,z,X,Y)),G}return G.push(B),G}function k(B,G){for(var O=0,$=B.length-1;B.length>3&&$>=0;--$)m(v(B,$-1),v(B,$),v(B,$+1),G)&&(B.splice($%B.length,1),O++);return O}function V(B,G){for(var O=B.length-1;O>=1;--O)for(var $=B[O],z=O-1;z>=0;--z)if(K($,B[z],G)){B.splice(O,1);continue}}function W(B,G,O){return O=O||0,Math.abs(B-G)<=O}function K(B,G,O){return W(B[0],G[0],O)&&W(B[1],G[1],O)}},88257:(r,g,n)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=n(56694),p=new a({initialize:function(u){this.pluginManager=u,this.game=u.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});r.exports=p},18360:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};r.exports=g},91963:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={},n={},a={};a.register=function(p,h,u,d){d===void 0&&(d=!1),g[p]={plugin:h,mapping:u,custom:d}},a.registerCustom=function(p,h,u,d){n[p]={plugin:h,mapping:u,data:d}},a.hasCore=function(p){return g.hasOwnProperty(p)},a.hasCustom=function(p){return n.hasOwnProperty(p)},a.getCore=function(p){return g[p]},a.getCustom=function(p){return n[p]},a.getCustomClass=function(p){return n.hasOwnProperty(p)?n[p].plugin:null},a.remove=function(p){g.hasOwnProperty(p)&&delete g[p]},a.removeCustom=function(p){n.hasOwnProperty(p)&&delete n[p]},a.destroyCorePlugins=function(){for(var p in g)g.hasOwnProperty(p)&&delete g[p]},a.destroyCustomPlugins=function(){for(var p in n)n.hasOwnProperty(p)&&delete n[p]},r.exports=a},49274:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(97081),h=n(6659),u=n(76846),d=n(99325),l=n(61286),c=n(72632),m=n(91963),f=n(66458),v=new a({Extends:h,initialize:function(x){h.call(this),this.game=x,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],x.isBooted?this.boot():x.events.once(p.BOOT,this.boot,this)},boot:function(){var S,x,T,C,w,b,E,A=this.game.config,I=A.installGlobalPlugins;for(I=I.concat(this._pendingGlobal),S=0;S<I.length;S++)x=I[S],T=c(x,"key",null),C=c(x,"plugin",null),w=c(x,"start",!1),b=c(x,"mapping",null),E=c(x,"data",null),T&&(C?this.install(T,C,w,b,E):console.warn("Missing `plugin` for key: "+T));for(I=A.installScenePlugins,I=I.concat(this._pendingScene),S=0;S<I.length;S++)x=I[S],T=c(x,"key",null),C=c(x,"plugin",null),b=c(x,"mapping",null),T&&(C?this.installScenePlugin(T,C,b):console.warn("Missing `plugin` for key: "+T));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(p.DESTROY,this.destroy,this)},addToScene:function(S,x,T){var C,w,b,E=this.game,A=S.scene,I=S.settings.map,R=S.settings.isBooted;for(C=0;C<x.length;C++)w=x[C],E[w]?(S[w]=E[w],I.hasOwnProperty(w)&&(A[I[w]]=S[w])):w==="game"&&I.hasOwnProperty(w)&&(A[I[w]]=E);for(var N=0;N<T.length;N++)for(b=T[N],C=0;C<b.length;C++)if(w=b[C],!!m.hasCore(w)){var F=m.getCore(w),P=F.mapping,D=new F.plugin(A,this,P);S[P]=D,F.custom?A[P]=D:I.hasOwnProperty(P)&&(A[I[P]]=D),R&&D.boot()}for(b=this.plugins,C=0;C<b.length;C++){var M=b[C];M.mapping&&(A[M.mapping]=M.plugin)}},getDefaultScenePlugins:function(){var S=this.game.config.defaultPlugins;return S=S.concat(this.scenePlugins),S},installScenePlugin:function(S,x,T,C,w){if(w===void 0&&(w=!1),typeof x!="function"){console.warn("Invalid Scene Plugin: "+S);return}if(m.hasCore(S)||m.register(S,x,T,!0),this.scenePlugins.indexOf(S)===-1)this.scenePlugins.push(S);else if(!w&&m.hasCore(S)){console.warn("Scene Plugin key in use: "+S);return}if(C){var b=new x(C,this,S);C.sys[S]=b,T&&T!==""&&(C[T]=b),b.boot()}},install:function(S,x,T,C,w){if(T===void 0&&(T=!1),C===void 0&&(C=null),w===void 0&&(w=null),typeof x!="function")return console.warn("Invalid Plugin: "+S),null;if(m.hasCustom(S))return console.warn("Plugin key in use: "+S),null;if(C!==null&&(T=!0),!this.game.isBooted)this._pendingGlobal.push({key:S,plugin:x,start:T,mapping:C,data:w});else if(m.registerCustom(S,x,C,w),T)return this.start(S);return null},getIndex:function(S){for(var x=this.plugins,T=0;T<x.length;T++){var C=x[T];if(C.key===S)return T}return-1},getEntry:function(S){var x=this.getIndex(S);if(x!==-1)return this.plugins[x]},isActive:function(S){var x=this.getEntry(S);return x&&x.active},start:function(S,x){x===void 0&&(x=S);var T=this.getEntry(x);return T&&!T.active?(T.active=!0,T.plugin.start()):T||(T=this.createEntry(S,x)),T?T.plugin:null},createEntry:function(S,x){var T=m.getCustom(S);if(T){var C=new T.plugin(this);T={key:x,plugin:C,active:!0,mapping:T.mapping,data:T.data},this.plugins.push(T),C.init(T.data),C.start()}return T},stop:function(S){var x=this.getEntry(S);return x&&x.active&&(x.active=!1,x.plugin.stop()),this},get:function(S,x){x===void 0&&(x=!0);var T=this.getEntry(S);if(T)return T.plugin;var C=this.getClass(S);return C&&x?(T=this.createEntry(S,S),T?T.plugin:null):C||null},getClass:function(S){return m.getCustomClass(S)},removeGlobalPlugin:function(S){var x=this.getEntry(S);x&&f(this.plugins,x),m.removeCustom(S)},removeScenePlugin:function(S){f(this.scenePlugins,S),m.remove(S)},registerGameObject:function(S,x,T){return x&&l.register(S,x),T&&d.register(S,T),this},removeGameObject:function(S,x,T){return x===void 0&&(x=!0),T===void 0&&(T=!0),x&&l.remove(S),T&&d.remove(S),this},registerFileType:function(S,x,T){u.register(S,x),T&&T.sys.load&&(T.sys.load[S]=x)},destroy:function(){for(var S=0;S<this.plugins.length;S++)this.plugins[S].plugin.destroy();m.destroyCustomPlugins(),this.game.noReturn&&m.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});r.exports=v},39283:(r,g,n)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=n(88257),p=n(56694),h=n(7599),u=new p({Extends:a,initialize:function(l,c,m){a.call(this,c),this.scene=l,this.systems=l.sys,this.pluginKey=m,l.sys.events.once(h.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});r.exports=u},45615:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={BasePlugin:n(88257),DefaultPlugins:n(18360),PluginCache:n(91963),PluginManager:n(49274),ScenePlugin:n(39283)}},75205:()=>{!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(r){const g=performance.now(),n=this.getVideoPlaybackQuality(),a=this.mozPresentedFrames||this.mozPaintedFrames||n.totalVideoFrames-n.droppedVideoFrames,p=(h,u)=>{const d=this.getVideoPlaybackQuality(),l=this.mozPresentedFrames||this.mozPaintedFrames||d.totalVideoFrames-d.droppedVideoFrames;if(l>a){const c=this.mozFrameDelay||d.totalFrameDelay-n.totalFrameDelay||0,m=u-h;r(u,{presentationTime:u+c*1e3,expectedDisplayTime:u+m,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+m/1e3,presentedFrames:l,processingDuration:c}),delete this._rvfcpolyfillmap[g]}else this._rvfcpolyfillmap[g]=requestAnimationFrame(c=>p(u,c))};return this._rvfcpolyfillmap[g]=requestAnimationFrame(h=>p(g,h)),g},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(r){cancelAnimationFrame(this._rvfcpolyfillmap[r]),delete this._rvfcpolyfillmap[r]})},95723:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},27394:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={DEFAULT:0,LINEAR:0,NEAREST:1};r.exports=g},91135:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(89787),p=n(61840),h=n(56694),u=n(86459),d=n(6659),l=n(81044),c=n(32834),m=n(40444),f=n(38203),v=n(69360),S=new h({Extends:d,initialize:function(T){d.call(this);var C=T.config;this.config={clearBeforeRender:C.clearBeforeRender,backgroundColor:C.backgroundColor,antialias:C.antialias,roundPixels:C.roundPixels},this.game=T,this.type=u.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=T.canvas;var w={alpha:T.config.transparent,desynchronized:T.config.desynchronized,willReadFrequently:!1};this.gameContext=C.context?C.context:this.gameCanvas.getContext("2d",w),this.currentContext=this.gameContext,this.antialias=T.config.antialias,this.blendModes=c(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(f.READY,this.boot,this)},boot:function(){var x=this.game,T=x.scale.baseSize;this.width=T.width,this.height=T.height,this.isBooted=!0,x.scale.on(m.RESIZE,this.onResize,this),this.resize(T.width,T.height)},onResize:function(x,T){(T.width!==this.width||T.height!==this.height)&&this.resize(T.width,T.height)},resize:function(x,T){this.width=x,this.height=T,this.emit(l.RESIZE,x,T)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(x){return this.currentContext.globalCompositeOperation=x,this},setContext:function(x){return this.currentContext=x||this.gameContext,this},setAlpha:function(x){return this.currentContext.globalAlpha=x,this},preRender:function(){var x=this.gameContext,T=this.config,C=this.width,w=this.height;x.globalAlpha=1,x.globalCompositeOperation="source-over",x.setTransform(1,0,0,1,0,0),T.clearBeforeRender&&(x.clearRect(0,0,C,w),T.transparent||(x.fillStyle=T.backgroundColor.rgba,x.fillRect(0,0,C,w))),x.save(),this.drawCount=0,this.emit(l.PRE_RENDER)},render:function(x,T,C){var w=T.length;this.emit(l.RENDER,x,C);var b=C.x,E=C.y,A=C.width,I=C.height,R=C.renderToTexture?C.context:x.sys.context;R.save(),this.game.scene.customViewports&&(R.beginPath(),R.rect(b,E,A,I),R.clip()),C.emit(a.PRE_RENDER,C),this.currentContext=R;var N=C.mask;N&&N.preRenderCanvas(this,null,C._maskCamera),C.transparent||(R.fillStyle=C.backgroundColor.rgba,R.fillRect(b,E,A,I)),R.globalAlpha=C.alpha,R.globalCompositeOperation="source-over",this.drawCount+=w,C.renderToTexture&&C.emit(a.PRE_RENDER,C),C.matrix.copyToContext(R);for(var F=0;F<w;F++){var P=T[F];P.mask&&P.mask.preRenderCanvas(this,P,C),P.renderCanvas(this,P,C),P.mask&&P.mask.postRenderCanvas(this,P,C)}R.setTransform(1,0,0,1,0,0),R.globalCompositeOperation="source-over",R.globalAlpha=1,C.flashEffect.postRenderCanvas(R),C.fadeEffect.postRenderCanvas(R),C.dirty=!1,N&&N.postRenderCanvas(this),R.restore(),C.renderToTexture&&(C.emit(a.POST_RENDER,C),C.renderToGame&&x.sys.context.drawImage(C.canvas,b,E)),C.emit(a.POST_RENDER,C)},postRender:function(){var x=this.gameContext;x.restore(),this.emit(l.POST_RENDER);var T=this.snapshotState;T.callback&&(p(this.gameCanvas,T),T.callback=null)},snapshotCanvas:function(x,T,C,w,b,E,A,I,R){C===void 0&&(C=!1),this.snapshotArea(w,b,E,A,T,I,R);var N=this.snapshotState;return N.getPixel=C,p(x,N),N.callback=null,this},snapshot:function(x,T,C){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,x,T,C)},snapshotArea:function(x,T,C,w,b,E,A){var I=this.snapshotState;return I.callback=b,I.type=E,I.encoder=A,I.getPixel=!1,I.x=x,I.y=T,I.width=Math.min(C,this.gameCanvas.width),I.height=Math.min(w,this.gameCanvas.height),this},snapshotPixel:function(x,T,C){return this.snapshotArea(x,T,1,1,C),this.snapshotState.getPixel=!0,this},batchSprite:function(x,T,C,w){var b=C.alpha*x.alpha;if(b!==0){var E=this.currentContext,A=this._tempMatrix1,I=this._tempMatrix2,R=T.canvasData,N=R.x,F=R.y,P=T.cutWidth,D=T.cutHeight,M=T.customPivot,L=T.source.resolution,k=x.displayOriginX,V=x.displayOriginY,W=-k+T.x,K=-V+T.y;if(x.isCropped){var B=x._crop;(B.flipX!==x.flipX||B.flipY!==x.flipY)&&T.updateCropUVs(B,x.flipX,x.flipY),P=B.cw,D=B.ch,N=B.cx,F=B.cy,W=-k+B.x,K=-V+B.y,x.flipX&&(W>=0?W=-(W+P):W<0&&(W=Math.abs(W)-P)),x.flipY&&(K>=0?K=-(K+D):K<0&&(K=Math.abs(K)-D))}var G=1,O=1;x.flipX&&(M||(W+=-T.realWidth+k*2),G=-1),x.flipY&&(M||(K+=-T.realHeight+V*2),O=-1);var $=x.x,z=x.y;C.roundPixels&&($=Math.floor($),z=Math.floor(z)),I.applyITRS($,z,x.rotation,x.scaleX*G,x.scaleY*O),A.copyFrom(C.matrix),w?(A.multiplyWithOffset(w,-C.scrollX*x.scrollFactorX,-C.scrollY*x.scrollFactorY),I.e=$,I.f=z):(I.e-=C.scrollX*x.scrollFactorX,I.f-=C.scrollY*x.scrollFactorY),A.multiply(I),C.roundPixels&&(A.e=Math.round(A.e),A.f=Math.round(A.f)),E.save(),A.setToContext(E),E.globalCompositeOperation=this.blendModes[x.blendMode],E.globalAlpha=b,E.imageSmoothingEnabled=!T.source.scaleMode,x.mask&&x.mask.preRenderCanvas(this,x,C),P>0&&D>0&&E.drawImage(T.source.image,N,F,P,D,W,K,P/L,D/L),x.mask&&x.mask.postRenderCanvas(this,x,C),E.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});r.exports=S},6046:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CanvasRenderer:n(91135),GetBlendModes:n(32834),SetTransform:n(49584)}},32834:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(95723),p=n(98581),h=function(){var u=[],d=p.supportNewBlendModes,l="source-over";return u[a.NORMAL]=l,u[a.ADD]="lighter",u[a.MULTIPLY]=d?"multiply":l,u[a.SCREEN]=d?"screen":l,u[a.OVERLAY]=d?"overlay":l,u[a.DARKEN]=d?"darken":l,u[a.LIGHTEN]=d?"lighten":l,u[a.COLOR_DODGE]=d?"color-dodge":l,u[a.COLOR_BURN]=d?"color-burn":l,u[a.HARD_LIGHT]=d?"hard-light":l,u[a.SOFT_LIGHT]=d?"soft-light":l,u[a.DIFFERENCE]=d?"difference":l,u[a.EXCLUSION]=d?"exclusion":l,u[a.HUE]=d?"hue":l,u[a.SATURATION]=d?"saturation":l,u[a.COLOR]=d?"color":l,u[a.LUMINOSITY]=d?"luminosity":l,u[a.ERASE]="destination-out",u[a.SOURCE_IN]="source-in",u[a.SOURCE_OUT]="source-out",u[a.SOURCE_ATOP]="source-atop",u[a.DESTINATION_OVER]="destination-over",u[a.DESTINATION_IN]="destination-in",u[a.DESTINATION_OUT]="destination-out",u[a.DESTINATION_ATOP]="destination-atop",u[a.LIGHTER]="lighter",u[a.COPY]="copy",u[a.XOR]="xor",u};r.exports=h},49584:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(73329),p=function(h,u,d,l,c){var m=l.alpha*d.alpha;if(m<=0)return!1;var f=a(d,l,c).calc;return u.globalCompositeOperation=h.blendModes[d.blendMode],u.globalAlpha=m,u.save(),f.setToContext(u),u.imageSmoothingEnabled=d.frame?!d.frame.source.scaleMode:h.antialias,!0};r.exports=p},70936:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postrender"},99298:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"},7743:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="render"},99519:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resize"},81044:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={POST_RENDER:n(70936),PRE_RENDER:n(99298),RENDER:n(7743),RESIZE:n(99519)}},42069:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Canvas:n(6046),Events:n(81044),Snapshot:n(95528),WebGL:n(55478)}},61840:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61068),p=n(27119),h=n(72632),u=function(d,l){var c=h(l,"callback"),m=h(l,"type","image/png"),f=h(l,"encoder",.92),v=Math.abs(Math.round(h(l,"x",0))),S=Math.abs(Math.round(h(l,"y",0))),x=Math.floor(h(l,"width",d.width)),T=Math.floor(h(l,"height",d.height)),C=h(l,"getPixel",!1);if(C){var w=d.getContext("2d",{willReadFrequently:!1}),b=w.getImageData(v,S,1,1),E=b.data;c.call(null,new p(E[0],E[1],E[2],E[3]))}else if(v!==0||S!==0||x!==d.width||T!==d.height){var A=a.createWebGL(this,x,T),I=A.getContext("2d",{willReadFrequently:!0});x>0&&T>0&&I.drawImage(d,v,S,x,T,0,0,x,T);var R=new Image;R.onerror=function(){c.call(null),a.remove(A)},R.onload=function(){c.call(null,R),a.remove(A)},R.src=A.toDataURL(m,f)}else{var N=new Image;N.onerror=function(){c.call(null)},N.onload=function(){c.call(null,N)},N.src=d.toDataURL(m,f)}};r.exports=u},1217:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61068),p=n(27119),h=n(72632),u=function(d,l){var c=d,m=h(l,"callback"),f=h(l,"type","image/png"),v=h(l,"encoder",.92),S=Math.abs(Math.round(h(l,"x",0))),x=Math.abs(Math.round(h(l,"y",0))),T=h(l,"getPixel",!1),C=h(l,"isFramebuffer",!1),w=C?h(l,"bufferWidth",1):c.drawingBufferWidth,b=C?h(l,"bufferHeight",1):c.drawingBufferHeight;if(T){var E=new Uint8Array(4),A=C?x:b-x;c.readPixels(S,A,1,1,c.RGBA,c.UNSIGNED_BYTE,E),m.call(null,new p(E[0],E[1],E[2],E[3]))}else{var I=Math.floor(h(l,"width",w)),R=Math.floor(h(l,"height",b)),N=I*R*4,F=new Uint8Array(N);c.readPixels(S,b-x-R,I,R,c.RGBA,c.UNSIGNED_BYTE,F);for(var P=a.createWebGL(this,I,R),D=P.getContext("2d",{willReadFrequently:!0}),M=D.getImageData(0,0,I,R),L=M.data,k=0;k<R;k++)for(var V=0;V<I;V++){var W=((R-k-1)*I+V)*4,K=C?N-(k*I+(I-V))*4:(k*I+V)*4;L[K+0]=F[W+0],L[K+1]=F[W+1],L[K+2]=F[W+2],L[K+3]=F[W+3]}D.putImageData(M,0,0);var B=new Image;B.onerror=function(){m.call(null),a.remove(P)},B.onload=function(){m.call(null,B),a.remove(P)},B.src=P.toDataURL(f,v)}};r.exports=u},95528:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Canvas:n(61840),WebGL:n(1217)}},35217:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(65641),h=n(33885),u=n(77290),d=n(72632),l=n(37410),c=n(82127),m=n(5583),f=n(58136),v=n(47406),S=n(81828),x=n(66901),T=n(71264),C=n(77310),w=n(10919),b=n(21213),E=n(51212),A=n(60848),I=new a({initialize:function(N){this.game=N.game,this.renderer=N,this.classes=new h([[p.UTILITY_PIPELINE,A],[p.MULTI_PIPELINE,C],[p.BITMAPMASK_PIPELINE,m],[p.SINGLE_PIPELINE,E],[p.ROPE_PIPELINE,b],[p.LIGHT_PIPELINE,x],[p.POINTLIGHT_PIPELINE,w],[p.MOBILE_PIPELINE,T],[p.FX_PIPELINE,S]]),this.postPipelineClasses=new h([[String(v.BARREL),f.Barrel],[String(v.BLOOM),f.Bloom],[String(v.BLUR),f.Blur],[String(v.BOKEH),f.Bokeh],[String(v.CIRCLE),f.Circle],[String(v.COLOR_MATRIX),f.ColorMatrix],[String(v.DISPLACEMENT),f.Displacement],[String(v.GLOW),f.Glow],[String(v.GRADIENT),f.Gradient],[String(v.PIXELATE),f.Pixelate],[String(v.SHADOW),f.Shadow],[String(v.SHINE),f.Shine],[String(v.VIGNETTE),f.Vignette],[String(v.WIPE),f.Wipe]]),this.pipelines=new h,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(R,N,F){var P=this.renderer,D=this.renderTargets;this.frameInc=Math.floor(d(R,"frameInc",32));for(var M=P.width,L=P.height,k=Math.min(M,L),V=Math.ceil(k/this.frameInc),W=1;W<V;W++){var K=W*this.frameInc;D.push(new l(P,K,K)),D.push(new l(P,K,K)),D.push(new l(P,K,K)),this.maxDimension=K}D.push(new l(P,M,L,1,0,!0,!0)),D.push(new l(P,M,L,1,0,!0,!0)),D.push(new l(P,M,L,1,0,!0,!0));var B,G,O=this,$=this.game;if(this.classes.each(function(X,Y){B=O.add(X,new Y({game:$})),X===p.UTILITY_PIPELINE&&(O.UTILITY_PIPELINE=B,O.fullFrame1=B.fullFrame1,O.fullFrame2=B.fullFrame2,O.halfFrame1=B.halfFrame1,O.halfFrame2=B.halfFrame2)}),this.MULTI_PIPELINE=this.get(p.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(p.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(p.MOBILE_PIPELINE),this.FX_PIPELINE=this.get(p.FX_PIPELINE),R)for(G in R){var z=R[G];B=new z($),B.name=G,B.isPostFX?this.postPipelineClasses.set(G,z):this.has(G)||(this.classes.set(G,z),this.add(G,B))}this.default=this.get(N),F&&!u.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(R){var N=this.get(R);return N&&(this.default=N),N},add:function(R,N){if(N.isPostFX){console.warn(R+" is a Post Pipeline. Use `addPostPipeline` instead");return}var F=this.pipelines,P=this.renderer;return F.has(R)?console.warn("Pipeline exists: "+R):(N.name=R,N.manager=this,F.set(R,N)),N.hasBooted||N.boot(),P.width!==0&&P.height!==0&&!N.isPreFX&&N.resize(P.width,P.height),N},addPostPipeline:function(R,N){this.postPipelineClasses.has(R)||this.postPipelineClasses.set(R,N)},flush:function(){this.current&&this.current.flush()},has:function(R){var N=this.pipelines;return typeof R=="string"?N.has(R):!!N.contains(R)},get:function(R){var N=this.pipelines;if(typeof R=="string")return N.get(R);if(N.contains(R))return R},getPostPipeline:function(R,N,F){var P=this.postPipelineClasses,D,M="",L=typeof R;if(L==="string"||L==="number"?(D=P.get(R),M=R):L==="function"?(P.contains(R)&&(D=R),M=R.name):L==="object"&&(D=P.get(R.name),M=R.name),D){var k=new D(this.game,F);return k.name=M,N&&(k.gameObject=N),k}},remove:function(R,N,F){N===void 0&&(N=!0),F===void 0&&(F=!0),this.pipelines.delete(R),N&&this.classes.delete(R),F&&this.postPipelineClasses.delete(R)},set:function(R,N,F){if(!R.isPostFX)return this.isCurrent(R,F)||(this.flush(),this.current&&this.current.unbind(),this.current=R,R.bind(F)),R.updateProjectionMatrix(),R.onBind(N),R},preBatch:function(R){if(R.hasPostPipeline){this.flush();for(var N=R.postPipelines,F=N.length-1;F>=0;F--){var P=N[F];P.active&&P.preBatch(R)}}},postBatch:function(R){if(R.hasPostPipeline){this.flush();for(var N=R.postPipelines,F=0;F<N.length;F++){var P=N[F];P.active&&P.postBatch(R)}}},preBatchCamera:function(R){if(R.hasPostPipeline){this.flush();for(var N=R.postPipelines,F=N.length-1;F>=0;F--){var P=N[F];P.active&&P.preBatch(R)}}},postBatchCamera:function(R){if(R.hasPostPipeline){this.flush();for(var N=R.postPipelines,F=0;F<N.length;F++){var P=N[F];P.active&&P.postBatch(R)}}},isCurrent:function(R,N){var F=this.renderer,P=this.current;return P&&!N&&(N=P.currentShader),!(P!==R||N.program!==F.currentProgram)},copyFrame:function(R,N,F,P,D){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(R,N,F,P,D),this},copyToGame:function(R){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(R),this},drawFrame:function(R,N,F,P){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(R,N,F,P),this},blendFrames:function(R,N,F,P,D){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(R,N,F,P,D),this},blendFramesAdditive:function(R,N,F,P,D){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(R,N,F,P,D),this},clearFrame:function(R,N){return this.UTILITY_PIPELINE.clearFrame(R,N),this},blitFrame:function(R,N,F,P,D,M){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(R,N,F,P,D,M),this},copyFrameRect:function(R,N,F,P,D,M,L,k){return this.UTILITY_PIPELINE.copyFrameRect(R,N,F,P,D,M,L,k),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(R){return this.UTILITY_PIPELINE.bind(R)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(R){R===void 0&&this.previous&&(R=this.previous);var N=this.renderer,F=N.gl;F.disable(F.DEPTH_TEST),F.disable(F.CULL_FACE),N.hasActiveStencilMask()?F.clear(F.DEPTH_BUFFER_BIT):(F.disable(F.STENCIL_TEST),F.clear(F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT)),F.viewport(0,0,N.width,N.height),N.currentProgram=null,N.setBlendMode(0,!0);var P=N.vaoExtension;P&&P.bindVertexArrayOES(null);var D=this.pipelines.entries;for(var M in D)D[M].glReset=!0;R&&(this.current=R,R.rebind())},clear:function(){var R=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,R.currentProgram=null,R.setBlendMode(0,!0);var N=R.vaoExtension;N&&N.bindVertexArrayOES(null)},getRenderTarget:function(R){var N=this.renderTargets,F=3;if(R>this.maxDimension)return this.targetIndex=N.length-F,N[this.targetIndex];var P=(c(R,this.frameInc,0,!0)-1)*F;return this.targetIndex=P,N[P]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});r.exports=I},37410:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(81044),h=new a({initialize:function(d,l,c,m,f,v,S,x,T){m===void 0&&(m=1),f===void 0&&(f=0),v===void 0&&(v=!0),S===void 0&&(S=!1),x===void 0&&(x=!0),T===void 0&&(T=!0),this.renderer=d,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=m,this.minFilter=f,this.autoClear=v,this.autoResize=!0,this.hasDepthBuffer=x,this.forceClamp=T,this.resize(l,c),S?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(u){return u&&!this.autoResize?(this.renderer.on(p.RESIZE,this.resize,this),this.autoResize=!0):!u&&this.autoResize&&(this.renderer.off(p.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(u,d){var l=u*this.scale,c=d*this.scale;if(this.autoResize&&(l!==this.width||c!==this.height)){var m=this.renderer;m.deleteFramebuffer(this.framebuffer),m.deleteTexture(this.texture),u*=this.scale,d*=this.scale,u=Math.round(u),d=Math.round(d),u<=0&&(u=1),d<=0&&(d=1),this.texture=m.createTextureFromSource(null,u,d,this.minFilter,this.forceClamp),this.framebuffer=m.createFramebuffer(u,d,this.texture,this.hasDepthBuffer),this.width=u,this.height=d}return this},bind:function(u,d,l){u===void 0&&(u=!1);var c=this.renderer;if(u&&c.flush(),d&&l&&this.resize(d,l),c.pushFramebuffer(this.framebuffer,!1,!1),u&&this.adjustViewport(),this.autoClear){var m=this.renderer.gl;m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)}c.clearStencilMask()},adjustViewport:function(){var u=this.renderer.gl;u.viewport(0,0,this.width,this.height),u.disable(u.SCISSOR_TEST)},clear:function(){var u=this.renderer,d=u.gl;u.pushFramebuffer(this.framebuffer),d.disable(d.SCISSOR_TEST),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),u.popFramebuffer(),u.resetScissor()},unbind:function(u){u===void 0&&(u=!1);var d=this.renderer;return u&&d.flush(),d.popFramebuffer()},destroy:function(){var u=this.renderer;u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),u.off(p.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});r.exports=h},75512:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={getTintFromFloats:function(g,n,a,p){var h=(g*255|0)&255,u=(n*255|0)&255,d=(a*255|0)&255,l=(p*255|0)&255;return(l<<24|h<<16|u<<8|d)>>>0},getTintAppendFloatAlpha:function(g,n){var a=(n*255|0)&255;return(a<<24|g)>>>0},getTintAppendFloatAlphaAndSwap:function(g,n){var a=(g>>16|0)&255,p=(g>>8|0)&255,h=(g|0)&255,u=(n*255|0)&255;return(u<<24|h<<16|p<<8|a)>>>0},getFloatsFromUintRGB:function(g){var n=(g>>16|0)&255,a=(g>>8|0)&255,p=(g|0)&255;return[n/255,a/255,p/255]},checkShaderMax:function(g,n){var a=Math.min(16,g.getParameter(g.MAX_TEXTURE_IMAGE_UNITS));return!n||n===-1?a:Math.min(a,n)},parseFragmentShaderMaxTextures:function(g,n){if(!g)return"";for(var a="",p=0;p<n;p++)p>0&&(a+=`
	else `),p<n-1&&(a+="if (outTexId < "+p+".5)"),a+=`
	{`,a+=`
		texture = texture2D(uMainSampler[`+p+"], outTexCoord);",a+=`
	}`;return g=g.replace(/%count%/gi,n.toString()),g.replace(/%forloop%/gi,a)},setGlowQuality:function(g,n,a,p){return a===void 0&&(a=n.config.glowFXQuality),p===void 0&&(p=n.config.glowFXDistance),g=g.replace(/__SIZE__/gi,(1/a/p).toFixed(7)),g=g.replace(/__DIST__/gi,p.toFixed(0)+".0"),g}}},44775:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(28699),h=n(6659),u=n(18970),d=n(72632),l=n(16650),c=n(81044),m=n(37410),f=n(75512),v=n(71305),S=new a({Extends:h,initialize:function(T){h.call(this);var C=T.game,w=C.renderer,b=w.gl;this.name=d(T,"name","WebGLPipeline"),this.game=C,this.renderer=w,this.manager,this.gl=b,this.view=C.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=d(T,"topology",b.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=d(T,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=T,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var x,T=this.gl,C=this.config,w=this.renderer;this.isPostFX||(this.projectionMatrix=new l().identity());var b=this.renderTargets,E=d(C,"renderTarget",!1);typeof E=="boolean"&&E&&(E=1);var A=w.width,I=w.height;if(typeof E=="number")for(x=0;x<E;x++)b.push(new m(w,A,I,1,0,!0));else if(Array.isArray(E))for(x=0;x<E.length;x++){var R=d(E[x],"scale",1),N=d(E[x],"minFilter",0),F=d(E[x],"autoClear",1),P=d(E[x],"width",null),D=d(E[x],"height",P);P?b.push(new m(w,P,D,1,N,F)):b.push(new m(w,A,I,R,N,F))}b.length&&(this.currentRenderTarget=b[0]),this.setShadersFromConfig(C);var M=this.shaders,L=0;for(x=0;x<M.length;x++)M[x].vertexSize>L&&(L=M[x].vertexSize);var k=d(C,"batchSize",w.config.batchSize);this.vertexCapacity=k*6;var V=new ArrayBuffer(this.vertexCapacity*L);this.vertexData=V,this.bytes=new Uint8Array(V),this.vertexViewF32=new Float32Array(V),this.vertexViewU32=new Uint32Array(V);var W=d(C,"vertices",null);for(W?(this.vertexViewF32.set(W),this.vertexBuffer=w.createVertexBuffer(V,T.STATIC_DRAW)):this.vertexBuffer=w.createVertexBuffer(V.byteLength,T.DYNAMIC_DRAW),this.setVertexBuffer(),x=M.length-1;x>=0;x--)M[x].rebind();this.hasBooted=!0,w.on(c.RESIZE,this.resize,this),w.on(c.PRE_RENDER,this.onPreRender,this),w.on(c.RENDER,this.onRender,this),w.on(c.POST_RENDER,this.onPostRender,this),this.emit(u.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(x,T,C){var w=this.renderer;if(x!==this.currentShader||w.currentProgram!==this.currentShader.program){this.flush();var b=this.setVertexBuffer(C);b&&!T&&(T=!0),x.bind(T,!1),this.currentShader=x}return this},getShaderByName:function(x){for(var T=this.shaders,C=0;C<T.length;C++)if(T[C].name===x)return T[C]},setShadersFromConfig:function(x){var T,C=this.shaders,w=this.renderer;for(T=0;T<C.length;T++)C[T].destroy();var b="vertShader",E="fragShader",A="attributes",I=d(x,b,null),R=f.parseFragmentShaderMaxTextures(d(x,E,null),w.maxTextures),N=d(x,A,null),F=d(x,"shaders",[]),P=F.length;if(P===0)I&&R&&(this.shaders=[new v(this,"default",I,R,p(N))]);else{var D=[];for(T=0;T<P;T++){var M=F[T],L,k,V,W;if(typeof M=="string"?(L="default",k=I,V=f.parseFragmentShaderMaxTextures(M,w.maxTextures),W=N):(L=d(M,"name","default"),k=d(M,b,I),V=f.parseFragmentShaderMaxTextures(d(M,E,R),w.maxTextures),W=d(M,A,N)),L==="default"){var K=V.split(`
`),B=K[0].trim();B.indexOf("#define SHADER_NAME")>-1&&(L=B.substring(20))}k&&V&&D.push(new v(this,L,k,V,p(W)))}this.shaders=D}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(x){return this.currentBatch={start:this.vertexCount,count:0,texture:[x],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=x,this.batch.push(this.currentBatch),0},addTextureToBatch:function(x){var T=this.currentBatch;T&&(T.texture.push(x),T.unit++,T.maxUnit++)},pushBatch:function(x){if(!this.currentBatch||this.forceZero&&x!==this.currentTexture)return this.createBatch(x);if(x===this.currentTexture)return this.currentUnit;var T=this.currentBatch,C=T.texture.indexOf(x);return C===-1?T.texture.length===this.renderer.maxTextures?this.createBatch(x):(T.unit++,T.maxUnit++,T.texture.push(x),this.currentUnit=T.unit,this.currentTexture=x,T.unit):(this.currentUnit=C,this.currentTexture=x,C)},setGameObject:function(x,T){return T===void 0&&(T=x.frame),this.pushBatch(T.source.glTexture)},shouldFlush:function(x){return x===void 0&&(x=0),this.vertexCount+x>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(x,T){(x!==this.width||T!==this.height)&&this.flush(),this.width=x,this.height=T;for(var C=this.renderTargets,w=0;w<C.length;w++)C[w].resize(x,T);return this.setProjectionMatrix(x,T),this.emit(u.RESIZE,x,T,this),this.onResize(x,T),this},setProjectionMatrix:function(x,T){var C=this.projectionMatrix;if(!C)return this;this.projectionWidth=x,this.projectionHeight=T,C.ortho(0,x,T,0,-1e3,1e3);for(var w=this.shaders,b="uProjectionMatrix",E=0;E<w.length;E++){var A=w[E];A.hasUniform(b)&&(A.resetUniform(b),A.setMatrix4fv(b,!1,C.val,A))}return this},flipProjectionMatrix:function(x){x===void 0&&(x=!0);var T=this.projectionMatrix;if(!T)return this;var C=this.projectionWidth,w=this.projectionHeight;x?T.ortho(0,C,0,w,-1e3,1e3):T.ortho(0,C,w,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,T.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var x=this.renderer.projectionWidth,T=this.renderer.projectionHeight;(this.projectionWidth!==x||this.projectionHeight!==T)&&this.setProjectionMatrix(x,T)}},bind:function(x){if(x===void 0&&(x=this.currentShader),this.glReset)return this.rebind(x);var T=!1,C=this.gl;return C.getParameter(C.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(C.bindBuffer(C.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,T=!0),x.bind(T),this.currentShader=x,this.activeTextures.length=0,this.emit(u.BIND,this,x),this.onActive(x),this},rebind:function(x){this.activeBuffer=null,this.setVertexBuffer();for(var T=this.shaders,C=T.length-1;C>=0;C--){var w=T[C].rebind();(!x||w===x)&&(this.currentShader=w)}return this.activeTextures.length=0,this.emit(u.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(x){if(x===void 0&&(x=this.vertexBuffer),x!==this.activeBuffer){var T=this.gl;return this.gl.bindBuffer(T.ARRAY_BUFFER,x),this.activeBuffer=x,!0}return!1},preBatch:function(x){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(x),this},postBatch:function(x){return this.onDraw(this.currentRenderTarget),this.onPostBatch(x),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(x){if(x===void 0&&(x=!1),this.vertexCount>0){this.emit(u.BEFORE_FLUSH,this,x),this.onBeforeFlush(x);var T=this.gl,C=this.vertexCount,w=this.currentShader.vertexSize,b=this.topology;if(this.active){this.setVertexBuffer(),C===this.vertexCapacity?T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.DYNAMIC_DRAW):T.bufferSubData(T.ARRAY_BUFFER,0,this.bytes.subarray(0,C*w));var E,A,I,R=this.batch,N=this.activeTextures;if(this.forceZero)for(N[0]||T.activeTexture(T.TEXTURE0),E=0;E<R.length;E++)A=R[E],I=A.texture[0],N[0]!==I&&(T.bindTexture(T.TEXTURE_2D,I),N[0]=I),T.drawArrays(b,A.start,A.count);else for(E=0;E<R.length;E++){A=R[E];for(var F=0;F<=A.maxUnit;F++)I=A.texture[F],N[F]!==I&&(T.activeTexture(T.TEXTURE0+F),T.bindTexture(T.TEXTURE_2D,I),N[F]=I);T.drawArrays(b,A.start,A.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(u.AFTER_FLUSH,this,x),this.onAfterFlush(x)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(x,T,C,w,b,E,A){var I=this.vertexViewF32,R=this.vertexViewU32,N=this.vertexCount*this.currentShader.vertexComponentCount-1;I[++N]=x,I[++N]=T,I[++N]=C,I[++N]=w,I[++N]=b,I[++N]=E,R[++N]=A,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(x,T,C,w,b,E,A,I,R,N,F,P,D,M,L,k,V,W,K,B){B===void 0&&(B=this.currentUnit);var G=!1;this.shouldFlush(6)&&(this.flush(),G=!0),this.currentBatch||(B=this.setTexture2D(K));var O=this.vertexViewF32,$=this.vertexViewU32,z=this.vertexCount*this.currentShader.vertexComponentCount-1;return O[++z]=T,O[++z]=C,O[++z]=N,O[++z]=F,O[++z]=B,O[++z]=W,$[++z]=M,O[++z]=w,O[++z]=b,O[++z]=N,O[++z]=D,O[++z]=B,O[++z]=W,$[++z]=k,O[++z]=E,O[++z]=A,O[++z]=P,O[++z]=D,O[++z]=B,O[++z]=W,$[++z]=V,O[++z]=T,O[++z]=C,O[++z]=N,O[++z]=F,O[++z]=B,O[++z]=W,$[++z]=M,O[++z]=E,O[++z]=A,O[++z]=P,O[++z]=D,O[++z]=B,O[++z]=W,$[++z]=V,O[++z]=I,O[++z]=R,O[++z]=P,O[++z]=F,O[++z]=B,O[++z]=W,$[++z]=L,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(x),G},batchTri:function(x,T,C,w,b,E,A,I,R,N,F,P,D,M,L,k,V){V===void 0&&(V=this.currentUnit);var W=!1;this.shouldFlush(3)&&(this.flush(),W=!0),this.currentBatch||(V=this.setTexture2D(k));var K=this.vertexViewF32,B=this.vertexViewU32,G=this.vertexCount*this.currentShader.vertexComponentCount-1;return K[++G]=T,K[++G]=C,K[++G]=I,K[++G]=R,K[++G]=V,K[++G]=L,B[++G]=P,K[++G]=w,K[++G]=b,K[++G]=I,K[++G]=F,K[++G]=V,K[++G]=L,B[++G]=D,K[++G]=E,K[++G]=A,K[++G]=N,K[++G]=F,K[++G]=V,K[++G]=L,B[++G]=M,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(x),W},drawFillRect:function(x,T,C,w,b,E,A,I){A===void 0&&(A=this.renderer.whiteTexture),I===void 0&&(I=!0),x=Math.floor(x),T=Math.floor(T);var R=Math.floor(x+C),N=Math.floor(T+w),F=this.setTexture2D(A),P=f.getTintAppendFloatAlphaAndSwap(b,E),D=0,M=0,L=1,k=1;I&&(M=1,k=0),this.batchQuad(null,x,T,x,N,R,N,R,T,D,M,L,k,P,P,P,P,0,A,F)},setTexture2D:function(x){return x===void 0&&(x=this.renderer.whiteTexture),this.pushBatch(x)},bindTexture:function(x,T){T===void 0&&(T=0);var C=this.gl;return C.activeTexture(C.TEXTURE0+T),C.bindTexture(C.TEXTURE_2D,x),this},bindRenderTarget:function(x,T){return this.bindTexture(x.texture,T)},setTime:function(x,T){return this.set1f(x,this.game.loop.getDuration(),T),this},setBoolean:function(x,T,C){return C===void 0&&(C=this.currentShader),C.setBoolean(x,T),this},set1f:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set1f(x,T),this},set2f:function(x,T,C,w){return w===void 0&&(w=this.currentShader),w.set2f(x,T,C),this},set3f:function(x,T,C,w,b){return b===void 0&&(b=this.currentShader),b.set3f(x,T,C,w),this},set4f:function(x,T,C,w,b,E){return E===void 0&&(E=this.currentShader),E.set4f(x,T,C,w,b),this},set1fv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set1fv(x,T),this},set2fv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set2fv(x,T),this},set3fv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set3fv(x,T),this},set4fv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set4fv(x,T),this},set1iv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set1iv(x,T),this},set2iv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set2iv(x,T),this},set3iv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set3iv(x,T),this},set4iv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set4iv(x,T),this},set1i:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set1i(x,T),this},set2i:function(x,T,C,w){return w===void 0&&(w=this.currentShader),w.set2i(x,T,C),this},set3i:function(x,T,C,w,b){return b===void 0&&(b=this.currentShader),b.set3i(x,T,C,w),this},set4i:function(x,T,C,w,b,E){return E===void 0&&(E=this.currentShader),E.set4i(x,T,C,w,b),this},setMatrix2fv:function(x,T,C,w){return w===void 0&&(w=this.currentShader),w.setMatrix2fv(x,T,C),this},setMatrix3fv:function(x,T,C,w){return w===void 0&&(w=this.currentShader),w.setMatrix3fv(x,T,C),this},setMatrix4fv:function(x,T,C,w){return w===void 0&&(w=this.currentShader),w.setMatrix4fv(x,T,C),this},destroy:function(){this.emit(u.DESTROY,this);var x,T=this.shaders;for(x=0;x<T.length;x++)T[x].destroy();var C=this.renderTargets;for(x=0;x<C.length;x++)C[x].destroy();this.gl.deleteBuffer(this.vertexBuffer);var w=this.renderer;return w.off(c.RESIZE,this.resize,this),w.off(c.PRE_RENDER,this.onPreRender,this),w.off(c.RENDER,this.onRender,this),w.off(c.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});r.exports=S},11857:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(66458),p=n(89787),h=n(56694),u=n(86459),d=n(6659),l=n(81044),c=n(28621),m=n(16650),f=n(72283),v=n(35217),S=n(37410),x=n(40444),T=n(38203),C=n(75512),w=n(1217),b=new h({Extends:d,initialize:function(A){d.call(this);var I=A.config,R={alpha:I.transparent,desynchronized:I.desynchronized,depth:!0,antialias:I.antialiasGL,premultipliedAlpha:I.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:I.failIfMajorPerformanceCaveat,powerPreference:I.powerPreference,preserveDrawingBuffer:I.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:I.clearBeforeRender,antialias:I.antialias,backgroundColor:I.backgroundColor,contextCreation:R,roundPixels:I.roundPixels,maxTextures:I.maxTextures,maxTextureSize:I.maxTextureSize,batchSize:I.batchSize,maxLights:I.maxLights,mipmapFilter:I.mipmapFilter},this.game=A,this.type=u.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=A.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=f,this.contextRestoredHandler=f,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(E){var A,I=this.game,R=this.canvas,N=E.backgroundColor;if(I.config.context?A=I.config.context:A=R.getContext("webgl",E.contextCreation)||R.getContext("experimental-webgl",E.contextCreation),!A||A.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=A;var F=this;this.contextLostHandler=function(W){F.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),W.preventDefault()},R.addEventListener("webglcontextlost",this.contextLostHandler,!1),I.context=A;for(var P=0;P<=27;P++)this.blendModes.push({func:[A.ONE,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_ADD});this.blendModes[1].func=[A.ONE,A.DST_ALPHA],this.blendModes[2].func=[A.DST_COLOR,A.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[A.ONE,A.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[A.ZERO,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_REVERSE_SUBTRACT},this.glFormats=[A.BYTE,A.SHORT,A.UNSIGNED_BYTE,A.UNSIGNED_SHORT,A.FLOAT],this.glFuncMap={mat2:{func:A.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:A.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:A.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:A.uniform1f,length:1},"1fv":{func:A.uniform1fv,length:1},"1i":{func:A.uniform1i,length:1},"1iv":{func:A.uniform1iv,length:1},"2f":{func:A.uniform2f,length:2},"2fv":{func:A.uniform2fv,length:1},"2i":{func:A.uniform2i,length:2},"2iv":{func:A.uniform2iv,length:1},"3f":{func:A.uniform3f,length:3},"3fv":{func:A.uniform3fv,length:1},"3i":{func:A.uniform3i,length:3},"3iv":{func:A.uniform3iv,length:1},"4f":{func:A.uniform4f,length:4},"4fv":{func:A.uniform4fv,length:1},"4i":{func:A.uniform4i,length:4},"4iv":{func:A.uniform4iv,length:1}};var D=A.getSupportedExtensions();(!E.maxTextures||E.maxTextures===-1)&&(E.maxTextures=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS)),E.maxTextureSize||(E.maxTextureSize=A.getParameter(A.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=D;var M="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(M)>-1?A.getExtension(M):null;var L="OES_vertex_array_object";this.vaoExtension=D.indexOf(L)>-1?A.getExtension(L):null,A.disable(A.DEPTH_TEST),A.disable(A.CULL_FACE),A.enable(A.BLEND),A.clearColor(N.redGL,N.greenGL,N.blueGL,N.alphaGL),E.mipmapFilter!==""&&(this.mipmapFilter=A[E.mipmapFilter]),this.maxTextures=C.checkShaderMax(A,E.maxTextures),this.textureIndexes=[];for(var k=0;k<this.maxTextures;k++){var V=A.createTexture();A.activeTexture(A.TEXTURE0+k),A.bindTexture(A.TEXTURE_2D,V),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,1,1,0,A.RGBA,A.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(k)}return this.pipelines=new v(this),this.setBlendMode(u.BlendModes.NORMAL),this.projectionMatrix=new m().identity(),I.textures.once(T.READY,this.boot,this),this},boot:function(){var E=this.game,A=this.pipelines,I=E.scale.baseSize,R=I.width,N=I.height;this.width=R,this.height=N,this.isBooted=!0,this.renderTarget=new S(this,R,N,1,0,!0,!0),this.maskTarget=new S(this,R,N,1,0,!0,!0),this.maskSource=new S(this,R,N,1,0,!0,!0);var F=E.config;A.boot(F.pipeline,F.defaultPipeline,F.autoMobilePipeline),this.blankTexture=E.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=E.textures.getFrame("__WHITE").glTexture;var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,null),P.enable(P.SCISSOR_TEST),E.scale.on(x.RESIZE,this.onResize,this),this.resize(R,N)},captureFrame:function(E,A){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(E,A,I){},stopCapture:function(){},onCapture:function(E){},onResize:function(E,A){(A.width!==this.width||A.height!==this.height)&&this.resize(A.width,A.height)},beginCapture:function(E,A){E===void 0&&(E=this.width),A===void 0&&(A=this.height),this.renderTarget.bind(!0,E,A),this.setProjectionMatrix(E,A)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(E,A){var I=this.gl;return this.width=E,this.height=A,this.setProjectionMatrix(E,A),I.viewport(0,0,E,A),this.drawingBufferHeight=I.drawingBufferHeight,I.scissor(0,I.drawingBufferHeight-A,E,A),this.defaultScissor[2]=E,this.defaultScissor[3]=A,this.emit(l.RESIZE,E,A),this},getCompressedTextures:function(){var E="WEBGL_compressed_texture_",A="WEBKIT_"+E,I=function(N,F){var P=N.getExtension(E+F)||N.getExtension(A+F);if(P){var D={};for(var M in P)D[P[M]]=M;return D}},R=this.gl;return{ETC:I(R,"etc"),ETC1:I(R,"etc1"),ATC:I(R,"atc"),ASTC:I(R,"astc"),BPTC:I(R,"bptc"),RGTC:I(R,"rgtc"),PVRTC:I(R,"pvrtc"),S3TC:I(R,"s3tc"),S3TCSRGB:I(R,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(E,A){var I=this.compression[E.toUpperCase()];if(A in I)return I[A]},supportsCompressedTexture:function(E,A){var I=this.compression[E.toUpperCase()];return I?A?A in I:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(E,A){return(E!==this.projectionWidth||A!==this.projectionHeight)&&(this.projectionWidth=E,this.projectionHeight=A,this.projectionMatrix.ortho(0,E,A,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(E){return this.supportedExtensions?this.supportedExtensions.indexOf(E):!1},getExtension:function(E){return this.hasExtension(E)?(E in this.extensions||(this.extensions[E]=this.gl.getExtension(E)),this.extensions[E]):null},flush:function(){this.pipelines.flush()},pushScissor:function(E,A,I,R,N){N===void 0&&(N=this.drawingBufferHeight);var F=this.scissorStack,P=[E,A,I,R];return F.push(P),this.setScissor(E,A,I,R,N),this.currentScissor=P,P},setScissor:function(E,A,I,R,N){N===void 0&&(N=this.drawingBufferHeight);var F=this.gl,P=this.currentScissor,D=I>0&&R>0;if(P&&D){var M=P[0],L=P[1],k=P[2],V=P[3];D=M!==E||L!==A||k!==I||V!==R}D&&(this.flush(),F.scissor(E,N-A-R,I,R))},resetScissor:function(){var E=this.gl;E.enable(E.SCISSOR_TEST);var A=this.currentScissor;if(A){var I=A[0],R=A[1],N=A[2],F=A[3];N>0&&F>0&&E.scissor(I,this.drawingBufferHeight-R-F,N,F)}},popScissor:function(){var E=this.scissorStack;E.pop();var A=E[E.length-1];A&&this.setScissor(A[0],A[1],A[2],A[3]),this.currentScissor=A},hasActiveStencilMask:function(){var E=this.currentMask.mask,A=this.currentCameraMask.mask;return E&&E.isStencil||A&&A.isStencil},resetViewport:function(){var E=this.gl;E.viewport(0,0,this.width,this.height),this.drawingBufferHeight=E.drawingBufferHeight},setBlendMode:function(E,A){A===void 0&&(A=!1);var I=this.gl,R=this.blendModes[E];return A||E!==u.BlendModes.SKIP_CHECK&&this.currentBlendMode!==E?(this.flush(),I.enable(I.BLEND),I.blendEquation(R.equation),R.func.length>2?I.blendFuncSeparate(R.func[0],R.func[1],R.func[2],R.func[3]):I.blendFunc(R.func[0],R.func[1]),this.currentBlendMode=E,!0):!1},addBlendMode:function(E,A){var I=this.blendModes.push({func:E,equation:A});return I-1},updateBlendMode:function(E,A,I){return this.blendModes[E]&&(this.blendModes[E].func=A,I&&(this.blendModes[E].equation=I)),this},removeBlendMode:function(E){return E>17&&this.blendModes[E]&&this.blendModes.splice(E,1),this},pushFramebuffer:function(E,A,I,R,N){return E===this.currentFramebuffer?this:(this.fboStack.push(E),this.setFramebuffer(E,A,I,R,N))},setFramebuffer:function(E,A,I,R,N){if(A===void 0&&(A=!1),I===void 0&&(I=!0),R===void 0&&(R=null),N===void 0&&(N=!1),E===this.currentFramebuffer)return this;var F=this.gl,P=this.width,D=this.height;return E&&E.renderTexture&&I?(P=E.renderTexture.width,D=E.renderTexture.height):this.flush(),F.bindFramebuffer(F.FRAMEBUFFER,E),I&&F.viewport(0,0,P,D),R&&F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,R,0),N&&(F.clearColor(0,0,0,0),F.clear(F.COLOR_BUFFER_BIT)),A&&(E?(this.drawingBufferHeight=D,this.pushScissor(0,0,P,D)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=E,this},popFramebuffer:function(E,A){E===void 0&&(E=!1),A===void 0&&(A=!0);var I=this.fboStack;I.pop();var R=I[I.length-1];return R||(R=null),this.setFramebuffer(R,E,A),R},restoreFramebuffer:function(E,A){E===void 0&&(E=!1),A===void 0&&(A=!0);var I=this.fboStack,R=I[I.length-1];R||(R=null),this.currentFramebuffer=null,this.setFramebuffer(R,E,A)},setProgram:function(E){return E!==this.currentProgram?(this.flush(),this.gl.useProgram(E),this.currentProgram=E,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(E,A,I,R,N){N===void 0&&(N=!1);var F=this.gl,P=F.NEAREST,D=F.NEAREST,M=F.CLAMP_TO_EDGE,L=null;A=E?E.width:A,I=E?E.height:I;var k=c(A,I);return k&&!N&&(M=F.REPEAT),R===u.ScaleModes.LINEAR&&this.config.antialias&&(P=k&&this.mipmapFilter?this.mipmapFilter:F.LINEAR,D=F.LINEAR),E&&E.compressed&&(P=F.LINEAR,D=F.LINEAR),!E&&typeof A=="number"&&typeof I=="number"?L=this.createTexture2D(0,P,D,M,M,F.RGBA,null,A,I):L=this.createTexture2D(0,P,D,M,M,F.RGBA,E),L},createTexture2D:function(E,A,I,R,N,F,P,D,M,L,k,V){L=L??!0,k===void 0&&(k=!1),V===void 0&&(V=!1);var W=this.gl,K=W.createTexture();W.activeTexture(W.TEXTURE0);var B=W.getParameter(W.TEXTURE_BINDING_2D);W.bindTexture(W.TEXTURE_2D,K),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,A),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,I),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,N),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,R),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L),V&&W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,!0);var G=!1;if(P==null)W.texImage2D(W.TEXTURE_2D,E,F,D,M,0,F,W.UNSIGNED_BYTE,null),G=c(D,M);else if(P.compressed){D=P.width,M=P.height,G=P.generateMipmap;for(var O=0;O<P.mipmaps.length;O++)W.compressedTexImage2D(W.TEXTURE_2D,O,P.internalFormat,P.mipmaps[O].width,P.mipmaps[O].height,0,P.mipmaps[O].data)}else k||(D=P.width,M=P.height),W.texImage2D(W.TEXTURE_2D,E,F,F,W.UNSIGNED_BYTE,P),G=c(D,M);return G&&W.generateMipmap(W.TEXTURE_2D),B&&W.bindTexture(W.TEXTURE_2D,B),K.isAlphaPremultiplied=L,K.isRenderTexture=!1,K.width=D,K.height=M,K},createFramebuffer:function(E,A,I,R){R===void 0&&(R=!0);var N=this.gl,F=N.createFramebuffer(),P=0;if(this.setFramebuffer(F),I.isRenderTexture=!0,I.isAlphaPremultiplied=!1,N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,I,0),P=N.checkFramebufferStatus(N.FRAMEBUFFER),P!==N.FRAMEBUFFER_COMPLETE){var D={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(D[P]||P))}if(F.renderTexture=I,R){var M=N.createRenderbuffer();N.bindRenderbuffer(N.RENDERBUFFER,M),N.renderbufferStorage(N.RENDERBUFFER,N.DEPTH_STENCIL,E,A),N.framebufferRenderbuffer(N.FRAMEBUFFER,N.DEPTH_STENCIL_ATTACHMENT,N.RENDERBUFFER,M)}return this.setFramebuffer(null),F},beginBitmapMask:function(E,A){var I=this.gl;I&&(this.flush(),this.maskTarget.bind(),this.currentCameraMask.mask!==E&&(this.currentMask.mask=E,this.currentMask.camera=A))},drawBitmapMask:function(E,A,I){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),E.renderWebGL(this,E,A),this.maskSource.unbind(!0),this.maskTarget.unbind();var R=this.gl,N=this.getCurrentStencilMask();N?(R.enable(R.STENCIL_TEST),N.mask.applyStencil(this,N.camera,!0)):this.currentMask.mask=null,this.pipelines.set(I),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,this.maskTarget.texture),R.activeTexture(R.TEXTURE1),R.bindTexture(R.TEXTURE_2D,this.maskSource.texture)},createProgram:function(E,A){var I=this.gl,R=I.createProgram(),N=I.createShader(I.VERTEX_SHADER),F=I.createShader(I.FRAGMENT_SHADER);I.shaderSource(N,E),I.shaderSource(F,A),I.compileShader(N),I.compileShader(F);var P=`Shader failed:
`;if(!I.getShaderParameter(N,I.COMPILE_STATUS))throw new Error("Vertex "+P+I.getShaderInfoLog(N));if(!I.getShaderParameter(F,I.COMPILE_STATUS))throw new Error("Fragment "+P+I.getShaderInfoLog(F));if(I.attachShader(R,N),I.attachShader(R,F),I.linkProgram(R),!I.getProgramParameter(R,I.LINK_STATUS))throw new Error("Link "+P+I.getProgramInfoLog(R));return I.useProgram(R),R},createVertexBuffer:function(E,A){var I=this.gl,R=I.createBuffer();return I.bindBuffer(I.ARRAY_BUFFER,R),I.bufferData(I.ARRAY_BUFFER,E,A),I.bindBuffer(I.ARRAY_BUFFER,null),R},createIndexBuffer:function(E,A){var I=this.gl,R=I.createBuffer();return I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,R),I.bufferData(I.ELEMENT_ARRAY_BUFFER,E,A),I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,null),R},deleteTexture:function(E){return E&&this.gl.deleteTexture(E),this},deleteFramebuffer:function(E){if(E){var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,E);var I=A.getParameter(A.RENDERBUFFER_BINDING);I&&A.deleteRenderbuffer(I),A.bindFramebuffer(A.FRAMEBUFFER,null),A.deleteFramebuffer(E),a(this.fboStack,E),this.currentFramebuffer===E&&(this.currentFramebuffer=null)}return this},deleteProgram:function(E){return E&&this.gl.deleteProgram(E),this},deleteBuffer:function(E){return this.gl.deleteBuffer(E),this},preRenderCamera:function(E){var A=E.x,I=E.y,R=E.width,N=E.height,F=E.backgroundColor;if(E.emit(p.PRE_RENDER,E),this.pipelines.preBatchCamera(E),this.pushScissor(A,I,R,N),E.mask&&(this.currentCameraMask.mask=E.mask,this.currentCameraMask.camera=E._maskCamera,E.mask.preRenderWebGL(this,E,E._maskCamera)),F.alphaGL>0){var P=this.pipelines.setMulti();P.drawFillRect(A,I,R,N,C.getTintFromFloats(F.blueGL,F.greenGL,F.redGL,1),F.alphaGL)}},getCurrentStencilMask:function(){var E=null,A=this.maskStack,I=this.currentCameraMask;return A.length>0?E=A[A.length-1]:I.mask&&I.mask.isStencil&&(E=I),E},postRenderCamera:function(E){var A=E.flashEffect,I=E.fadeEffect;if(A.isRunning||I.isRunning||I.isComplete){var R=this.pipelines.setMulti();A.postRenderWebGL(R,C.getTintFromFloats),I.postRenderWebGL(R,C.getTintFromFloats)}E.dirty=!1,this.popScissor(),E.mask&&(this.currentCameraMask.mask=null,E.mask.postRenderWebGL(this,E._maskCamera)),this.pipelines.postBatchCamera(E),E.emit(p.POST_RENDER,E)},preRender:function(){if(!this.contextLost){var E=this.gl;if(E.bindFramebuffer(E.FRAMEBUFFER,null),this.config.clearBeforeRender){var A=this.config.backgroundColor;E.clearColor(A.redGL,A.greenGL,A.blueGL,A.alphaGL),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT|E.STENCIL_BUFFER_BIT)}E.enable(E.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&E.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(l.PRE_RENDER)}},render:function(E,A,I){if(!this.contextLost){var R=A.length;if(this.emit(l.RENDER,E,I),this.preRenderCamera(I),R===0){this.setBlendMode(u.BlendModes.NORMAL),this.postRenderCamera(I);return}this.currentType="";for(var N=this.currentMask,F=0;F<R;F++){this.finalType=F===R-1;var P=A[F],D=P.mask;N=this.currentMask,N.mask&&N.mask!==D&&N.mask.postRenderWebGL(this,N.camera),D&&N.mask!==D&&D.preRenderWebGL(this,P,I),P.blendMode!==this.currentBlendMode&&this.setBlendMode(P.blendMode);var M=P.type;M!==this.currentType&&(this.newType=!0,this.currentType=M),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=A[F+1].type===this.currentType,P.renderWebGL(this,P,I),this.newType=!1}N=this.currentMask,N.mask&&N.mask.postRenderWebGL(this,N.camera),this.setBlendMode(u.BlendModes.NORMAL),this.postRenderCamera(I)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(l.POST_RENDER);var E=this.snapshotState;E.callback&&(w(this.gl,E),E.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var E=this.gl,A=this.getCurrentStencilMask();if(A){var I=A.mask;E.enable(E.STENCIL_TEST),I.invertAlpha?E.stencilFunc(E.NOTEQUAL,I.level,255):E.stencilFunc(E.EQUAL,I.level,255)}},snapshot:function(E,A,I){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,E,A,I)},snapshotArea:function(E,A,I,R,N,F,P){var D=this.snapshotState;return D.callback=N,D.type=F,D.encoder=P,D.getPixel=!1,D.x=E,D.y=A,D.width=I,D.height=R,this},snapshotPixel:function(E,A,I){return this.snapshotArea(E,A,1,1,I),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(E,A,I,R,N,F,P,D,M,L,k){N===void 0&&(N=!1),F===void 0&&(F=0),P===void 0&&(P=0),D===void 0&&(D=A),M===void 0&&(M=I),L==="pixel"&&(N=!0,L="image/png");var V=this.currentFramebuffer;this.snapshotArea(F,P,D,M,R,L,k);var W=this.snapshotState;return W.getPixel=N,W.isFramebuffer=!0,W.bufferWidth=A,W.bufferHeight=I,W.width=Math.min(W.width,A),W.height=Math.min(W.height,I),this.setFramebuffer(E),w(this.gl,W),this.setFramebuffer(V),W.callback=null,W.isFramebuffer=!1,this},canvasToTexture:function(E,A,I,R){return I===void 0&&(I=!1),R===void 0&&(R=!1),A?this.updateCanvasTexture(E,A,R):this.createCanvasTexture(E,I,R)},createCanvasTexture:function(E,A,I){A===void 0&&(A=!1),I===void 0&&(I=!1);var R=this.gl,N=R.NEAREST,F=R.NEAREST,P=E.width,D=E.height,M=R.CLAMP_TO_EDGE,L=c(P,D);return!A&&L&&(M=R.REPEAT),this.config.antialias&&(N=L&&this.mipmapFilter?this.mipmapFilter:R.LINEAR,F=R.LINEAR),this.createTexture2D(0,N,F,M,M,R.RGBA,E,P,D,!0,!1,I)},updateCanvasTexture:function(E,A,I){I===void 0&&(I=!1);var R=this.gl,N=E.width,F=E.height;if(N>0&&F>0){R.activeTexture(R.TEXTURE0);var P=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,A),I&&R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,!0),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,E),A.width=N,A.height=F,P&&R.bindTexture(R.TEXTURE_2D,P)}return A},createVideoTexture:function(E,A,I){A===void 0&&(A=!1),I===void 0&&(I=!1);var R=this.gl,N=R.NEAREST,F=R.NEAREST,P=E.videoWidth,D=E.videoHeight,M=R.CLAMP_TO_EDGE,L=c(P,D);return!A&&L&&(M=R.REPEAT),this.config.antialias&&(N=L&&this.mipmapFilter?this.mipmapFilter:R.LINEAR,F=R.LINEAR),this.createTexture2D(0,N,F,M,M,R.RGBA,E,P,D,!0,!0,I)},updateVideoTexture:function(E,A,I){I===void 0&&(I=!1);var R=this.gl,N=E.videoWidth,F=E.videoHeight;if(N>0&&F>0){R.activeTexture(R.TEXTURE0);var P=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,A),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,I),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,E),A.width=N,A.height=F,P&&R.bindTexture(R.TEXTURE_2D,P)}return A},setTextureFilter:function(E,A){var I=this.gl,R=[I.LINEAR,I.NEAREST][A];I.activeTexture(I.TEXTURE0);var N=I.getParameter(I.TEXTURE_BINDING_2D);return I.bindTexture(I.TEXTURE_2D,E),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,R),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,R),N&&I.bindTexture(I.TEXTURE_2D,N),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});r.exports=b},71305:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72632),h=n(71402),u=new a({initialize:function(l,c,m,f,v){this.pipeline=l,this.name=c,this.renderer=l.renderer,this.gl=this.renderer.gl,this.fragSrc=f,this.vertSrc=m,this.program=this.renderer.createProgram(m,f),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(v),this.createUniforms()},createAttributes:function(d){var l=0,c=0,m=[];this.vertexComponentCount=0;for(var f=0;f<d.length;f++){var v=d[f],S=v.name,x=p(v,"size",1),T=p(v,"type",h.FLOAT),C=T.enum,w=T.size,b=!!v.normalized;m.push({name:S,size:x,type:C,normalized:b,offset:c,enabled:!1,location:-1}),w===4?l+=x:l++,c+=x*w}this.vertexSize=c,this.vertexComponentCount=l,this.attributes=m},bind:function(d,l){return d===void 0&&(d=!1),l===void 0&&(l=!1),l&&this.pipeline.flush(),this.renderer.setProgram(this.program),d&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(d){d===void 0&&(d=!1);for(var l=this.gl,c=this.vertexSize,m=this.attributes,f=this.program,v=0;v<m.length;v++){var S=m[v],x=S.size,T=S.type,C=S.offset,w=S.enabled,b=S.location,E=!!S.normalized;if(d){var A=l.getAttribLocation(f,S.name);A>=0?(l.enableVertexAttribArray(A),l.vertexAttribPointer(A,x,T,E,c,C),S.enabled=!0,S.location=A):A!==-1&&l.disableVertexAttribArray(A)}else w?l.vertexAttribPointer(b,x,T,E,c,C):!w&&b>-1&&(l.disableVertexAttribArray(b),S.location=-1)}return this},createUniforms:function(){var d=this.gl,l=this.program,c=this.uniforms,m,f,v,S=d.getProgramParameter(l,d.ACTIVE_UNIFORMS);for(m=0;m<S;m++){var x=d.getActiveUniform(l,m);if(x){f=x.name,v=d.getUniformLocation(l,f),v!==null&&(c[f]={name:f,location:v,value1:null,value2:null,value3:null,value4:null});var T=f.indexOf("[");T>0&&(f=f.substr(0,T),c.hasOwnProperty(f)||(v=d.getUniformLocation(l,f),v!==null&&(c[f]={name:f,location:v,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(d){return this.uniforms.hasOwnProperty(d)},resetUniform:function(d){var l=this.uniforms[d];return l&&(l.value1=null,l.value2=null,l.value3=null,l.value4=null),this},setUniform1:function(d,l,c,m){var f=this.uniforms[l];return f?((m||f.value1!==c)&&(f.value1=c,this.renderer.setProgram(this.program),d.call(this.gl,f.location,c),this.pipeline.currentShader=this),this):this},setUniform2:function(d,l,c,m,f){var v=this.uniforms[l];return v?((f||v.value1!==c||v.value2!==m)&&(v.value1=c,v.value2=m,this.renderer.setProgram(this.program),d.call(this.gl,v.location,c,m),this.pipeline.currentShader=this),this):this},setUniform3:function(d,l,c,m,f,v){var S=this.uniforms[l];return S?((v||S.value1!==c||S.value2!==m||S.value3!==f)&&(S.value1=c,S.value2=m,S.value3=f,this.renderer.setProgram(this.program),d.call(this.gl,S.location,c,m,f),this.pipeline.currentShader=this),this):this},setUniform4:function(d,l,c,m,f,v,S){var x=this.uniforms[l];return x?((S||x.value1!==c||x.value2!==m||x.value3!==f||x.value4!==v)&&(x.value1=c,x.value2=m,x.value3=f,x.value4=v,this.renderer.setProgram(this.program),d.call(this.gl,x.location,c,m,f,v),this.pipeline.currentShader=this),this):this},setBoolean:function(d,l){return this.setUniform1(this.gl.uniform1i,d,Number(l))},set1f:function(d,l){return this.setUniform1(this.gl.uniform1f,d,l)},set2f:function(d,l,c){return this.setUniform2(this.gl.uniform2f,d,l,c)},set3f:function(d,l,c,m){return this.setUniform3(this.gl.uniform3f,d,l,c,m)},set4f:function(d,l,c,m,f){return this.setUniform4(this.gl.uniform4f,d,l,c,m,f)},set1fv:function(d,l){return this.setUniform1(this.gl.uniform1fv,d,l,!0)},set2fv:function(d,l){return this.setUniform1(this.gl.uniform2fv,d,l,!0)},set3fv:function(d,l){return this.setUniform1(this.gl.uniform3fv,d,l,!0)},set4fv:function(d,l){return this.setUniform1(this.gl.uniform4fv,d,l,!0)},set1iv:function(d,l){return this.setUniform1(this.gl.uniform1iv,d,l,!0)},set2iv:function(d,l){return this.setUniform1(this.gl.uniform2iv,d,l,!0)},set3iv:function(d,l){return this.setUniform1(this.gl.uniform3iv,d,l,!0)},set4iv:function(d,l){return this.setUniform1(this.gl.uniform4iv,d,l,!0)},set1i:function(d,l){return this.setUniform1(this.gl.uniform1i,d,l)},set2i:function(d,l,c){return this.setUniform2(this.gl.uniform2i,d,l,c)},set3i:function(d,l,c,m){return this.setUniform3(this.gl.uniform3i,d,l,c,m)},set4i:function(d,l,c,m,f){return this.setUniform4(this.gl.uniform4i,d,l,c,m,f)},setMatrix2fv:function(d,l,c){return this.setUniform2(this.gl.uniformMatrix2fv,d,l,c,!0)},setMatrix3fv:function(d,l,c){return this.setUniform2(this.gl.uniformMatrix3fv,d,l,c,!0)},setMatrix4fv:function(d,l,c){return this.setUniform2(this.gl.uniformMatrix4fv,d,l,c,!0)},createProgram:function(d,l){d===void 0&&(d=this.vertSrc),l===void 0&&(l=this.fragSrc);var c=this.gl;return this.program&&c.deleteProgram(this.program),this.vertSrc=d,this.fragSrc=l,this.program=this.renderer.createProgram(d,l),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});r.exports=u},71402:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};r.exports=g},55478:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(71402),p=n(98611),h={PipelineManager:n(35217),Pipelines:n(62253),RenderTarget:n(37410),Utils:n(75512),WebGLPipeline:n(44775),WebGLRenderer:n(11857),WebGLShader:n(71305)};h=p(!1,h,a),r.exports=h},5583:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72632),h=n(91679),u=n(89053),d=n(71402),l=n(44775),c=new a({Extends:l,initialize:function(f){f.fragShader=p(f,"fragShader",h),f.vertShader=p(f,"vertShader",u),f.batchSize=p(f,"batchSize",1),f.vertices=p(f,"vertices",[-1,1,-1,-7,7,1]),f.attributes=p(f,"attributes",[{name:"inPosition",size:2,type:d.FLOAT}]),l.call(this,f)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(m,f){l.prototype.resize.call(this,m,f),this.set2f("uResolution",m,f)},beginMask:function(m,f,v){this.renderer.beginBitmapMask(m,v)},endMask:function(m,f,v){var S=this.gl,x=this.renderer,T=m.bitmapMask;T&&S&&(x.drawBitmapMask(T,f,this),v&&this.set2f("uResolution",v.width,v.height),this.set1i("uInvertMaskAlpha",m.invertAlpha),S.drawArrays(this.topology,0,3),v&&this.set2f("uResolution",this.width,this.height),S.bindTexture(S.TEXTURE_2D,null))}});r.exports=c},81828:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(58136),h=n(47406),u=n(72632),d=n(87228),l=n(92462),c=n(75512),m=new a({Extends:d,initialize:function(v){v.shaders=[c.setGlowQuality(l.FXGlowFrag,v.game),l.FXShadowFrag,l.FXPixelateFrag,l.FXVignetteFrag,l.FXShineFrag,l.FXBlurLowFrag,l.FXBlurMedFrag,l.FXBlurHighFrag,l.FXGradientFrag,l.FXBloomFrag,l.ColorMatrixFrag,l.FXCircleFrag,l.FXBarrelFrag,l.FXDisplacementFrag,l.FXWipeFrag,l.FXBokehFrag],d.call(this,v);var S=this.game;this.glow=new p.Glow(S),this.shadow=new p.Shadow(S),this.pixelate=new p.Pixelate(S),this.vignette=new p.Vignette(S),this.shine=new p.Shine(S),this.gradient=new p.Gradient(S),this.circle=new p.Circle(S),this.barrel=new p.Barrel(S),this.wipe=new p.Wipe(S),this.bokeh=new p.Bokeh(S);var x=[];x[h.GLOW]=this.onGlow,x[h.SHADOW]=this.onShadow,x[h.PIXELATE]=this.onPixelate,x[h.VIGNETTE]=this.onVignette,x[h.SHINE]=this.onShine,x[h.BLUR]=this.onBlur,x[h.GRADIENT]=this.onGradient,x[h.BLOOM]=this.onBloom,x[h.COLOR_MATRIX]=this.onColorMatrix,x[h.CIRCLE]=this.onCircle,x[h.BARREL]=this.onBarrel,x[h.DISPLACEMENT]=this.onDisplacement,x[h.WIPE]=this.onWipe,x[h.BOKEH]=this.onBokeh,this.fxHandlers=x,this.source,this.target,this.swap},onDraw:function(f,v,S){this.source=f,this.target=v,this.swap=S;var x=f.width,T=f.height,C=this.tempSprite,w=this.fxHandlers;if(C&&C.preFX)for(var b=C.preFX.list,E=0;E<b.length;E++){var A=b[E];A.active&&w[A.type].call(this,A,x,T)}this.drawToGame(this.source)},runDraw:function(){var f=this.source,v=this.target;this.copy(f,v),this.source=v,this.target=f},onGlow:function(f,v,S){var x=this.shaders[h.GLOW];this.setShader(x),this.glow.onPreRender(f,x,v,S),this.runDraw()},onShadow:function(f){var v=this.shaders[h.SHADOW];this.setShader(v),this.shadow.onPreRender(f,v),this.runDraw()},onPixelate:function(f,v,S){var x=this.shaders[h.PIXELATE];this.setShader(x),this.pixelate.onPreRender(f,x,v,S),this.runDraw()},onVignette:function(f){var v=this.shaders[h.VIGNETTE];this.setShader(v),this.vignette.onPreRender(f,v),this.runDraw()},onShine:function(f,v,S){var x=this.shaders[h.SHINE];this.setShader(x),this.shine.onPreRender(f,x,v,S),this.runDraw()},onBlur:function(f,v,S){var x=u(f,"quality"),T=this.shaders[h.BLUR+x];this.setShader(T),this.set1i("uMainSampler",0),this.set2f("resolution",v,S),this.set1f("strength",u(f,"strength")),this.set3fv("color",u(f,"glcolor"));for(var C=u(f,"x"),w=u(f,"y"),b=u(f,"steps"),E=0;E<b;E++)this.set2f("offset",C,0),this.runDraw(),this.set2f("offset",0,w),this.runDraw()},onGradient:function(f){var v=this.shaders[h.GRADIENT];this.setShader(v),this.gradient.onPreRender(f,v),this.runDraw()},onBloom:function(f,v,S){var x=this.shaders[h.BLOOM];this.copySprite(this.source,this.swap),this.setShader(x),this.set1i("uMainSampler",0),this.set1f("strength",u(f,"blurStrength")),this.set3fv("color",u(f,"glcolor"));for(var T=2/v*u(f,"offsetX"),C=2/S*u(f,"offsetY"),w=u(f,"steps"),b=0;b<w;b++)this.set2f("offset",T,0),this.runDraw(),this.set2f("offset",0,C),this.runDraw();this.blendFrames(this.swap,this.source,this.target,u(f,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(f){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",f.getData()),this.set1f("uAlpha",f.alpha),this.runDraw()},onCircle:function(f,v,S){var x=this.shaders[h.CIRCLE];this.setShader(x),this.circle.onPreRender(f,x,v,S),this.runDraw()},onBarrel:function(f){var v=this.shaders[h.BARREL];this.setShader(v),this.barrel.onPreRender(f,v),this.runDraw()},onDisplacement:function(f){this.setShader(this.shaders[h.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",f.x,f.y),this.bindTexture(f.glTexture,1),this.runDraw()},onWipe:function(f){var v=this.shaders[h.WIPE];this.setShader(v),this.wipe.onPreRender(f,v),this.runDraw()},onBokeh:function(f,v,S){var x=this.shaders[h.BOKEH];this.setShader(x),this.bokeh.onPreRender(f,x,v,S),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,d.prototype.destroy.call(this),this}});r.exports=m},66901:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72632),h=n(65045),u=n(77310),d=n(69360),l=n(93736),c=n(44775),m=new a({Extends:u,initialize:function(v){var S=p(v,"fragShader",h);v.fragShader=S.replace("%LIGHT_COUNT%",v.game.renderer.config.maxLights),u.call(this,v),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new l,this._tempMatrix=new d,this._tempMatrix2=new d},boot:function(){c.prototype.boot.call(this);var f=this.gl,v=f.createTexture();f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,v),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,1,1,0,f.RGBA,f.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:v}},onRender:function(f,v){var S=f.sys.lights;if(this.lightsActive=!1,!(!S||!S.active)){var x=S.getLights(v),T=x.length;this.lightsActive=!0;var C,w=this.renderer,b=w.height,E=v.matrix,A=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",v.x,v.y,v.rotation,v.zoom),this.set3f("uAmbientLightColor",S.ambientColor.r,S.ambientColor.g,S.ambientColor.b),this.set1i("uLightCount",T),C=0;C<T;C++){var I=x[C].light,R=I.color,N="uLights["+C+"].";E.transformPoint(I.x,I.y,A),this.set2f(N+"position",A.x-v.scrollX*I.scrollFactorX*v.zoom,b-(A.y-v.scrollY*I.scrollFactorY*v.zoom)),this.set3f(N+"color",R.r,R.g,R.b),this.set1f(N+"intensity",I.intensity),this.set1f(N+"radius",I.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(f){if(f!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var v=this.inverseRotationMatrix;if(f){var S=-f,x=Math.cos(S),T=Math.sin(S);v[1]=T,v[3]=-T,v[0]=v[4]=x}else v[0]=v[4]=1,v[1]=v[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,v),this.currentNormalMapRotation=f}},setTexture2D:function(f,v){var S=this.renderer;f===void 0&&(f=S.whiteTexture);var x=this.getNormalMap(v);this.isNewNormalMap(f,x)&&(this.flush(),this.createBatch(f),this.addTextureToBatch(x),this.currentNormalMap=x);var T=0;if(v&&v.parentContainer){var C=v.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);T=C.rotationNormalized}else v&&(T=v.rotation);return this.setNormalMapRotation(T),0},setGameObject:function(f,v){v===void 0&&(v=f.frame);var S=v.glTexture,x=this.getNormalMap(f);if(this.isNewNormalMap(S,x)&&(this.flush(),this.createBatch(S),this.addTextureToBatch(x),this.currentNormalMap=x),f.parentContainer){var T=f.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(T.rotationNormalized)}else this.setNormalMapRotation(f.rotation);return 0},isNewNormalMap:function(f,v){return this.currentTexture!==f||this.currentNormalMap!==v},getNormalMap:function(f){var v;return f?f.displayTexture?v=f.displayTexture.dataSource[f.displayFrame.sourceIndex]:f.texture?v=f.texture.dataSource[f.frame.sourceIndex]:f.tileset&&(Array.isArray(f.tileset)?v=f.tileset[0].image.dataSource[0]:v=f.tileset.image.dataSource[0]):v=this.defaultNormalMap,v||(v=this.defaultNormalMap),v.glTexture},batchSprite:function(f,v,S){this.lightsActive&&u.prototype.batchSprite.call(this,f,v,S)},batchTexture:function(f,v,S,x,T,C,w,b,E,A,I,R,N,F,P,D,M,L,k,V,W,K,B,G,O,$,z,X,Y,Z,J,tt){this.lightsActive&&u.prototype.batchTexture.call(this,f,v,S,x,T,C,w,b,E,A,I,R,N,F,P,D,M,L,k,V,W,K,B,G,O,$,z,X,Y,Z,J,tt)},batchTextureFrame:function(f,v,S,x,T,C,w){this.lightsActive&&u.prototype.batchTextureFrame.call(this,f,v,S,x,T,C,w)}});r.exports=m},71264:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72632),h=n(77310),u=n(85060),d=n(18166),l=n(71402),c=n(44775),m=new a({Extends:h,initialize:function(v){v.fragShader=p(v,"fragShader",u),v.vertShader=p(v,"vertShader",d),v.attributes=p(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:l.UNSIGNED_BYTE,normalized:!0}]),v.forceZero=!0,h.call(this,v)},boot:function(){c.prototype.boot.call(this),this.set1i("uMainSampler",0)}});r.exports=m},77310:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(11117),h=n(72632),u=n(53787),d=n(15968),l=n(69360),c=n(75512),m=n(71402),f=n(44775),v=new a({Extends:f,initialize:function(x){var T=x.game.renderer,C=h(x,"fragShader",u);x.fragShader=c.parseFragmentShaderMaxTextures(C,T.maxTextures),x.vertShader=h(x,"vertShader",d),x.attributes=h(x,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:m.UNSIGNED_BYTE,normalized:!0}]),f.call(this,x),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.calcMatrix=new l,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){f.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(S,x,T){this.manager.set(this,S);var C=this._tempMatrix1,w=this._tempMatrix2,b=this._tempMatrix3,E=S.frame,A=E.glTexture,I=E.u0,R=E.v0,N=E.u1,F=E.v1,P=E.x,D=E.y,M=E.cutWidth,L=E.cutHeight,k=E.customPivot,V=S.displayOriginX,W=S.displayOriginY,K=-V+P,B=-W+D;if(S.isCropped){var G=S._crop;(G.flipX!==S.flipX||G.flipY!==S.flipY)&&E.updateCropUVs(G,S.flipX,S.flipY),I=G.u0,R=G.v0,N=G.u1,F=G.v1,M=G.width,L=G.height,P=G.x,D=G.y,K=-V+P,B=-W+D}var O=1,$=1;S.flipX&&(k||(K+=-E.realWidth+V*2),O=-1),(S.flipY||E.source.isGLTexture&&!A.flipY)&&(k||(B+=-E.realHeight+W*2),$=-1);var z=S.x,X=S.y;w.applyITRS(z,X,S.rotation,S.scaleX*O,S.scaleY*$),C.copyFrom(x.matrix),T?(C.multiplyWithOffset(T,-x.scrollX*S.scrollFactorX,-x.scrollY*S.scrollFactorY),w.e=z,w.f=X):(w.e-=x.scrollX*S.scrollFactorX,w.f-=x.scrollY*S.scrollFactorY),C.multiply(w,b);var Y=b.setQuad(K,B,K+M,B+L,x.roundPixels),Z=c.getTintAppendFloatAlpha,J=x.alpha,tt=Z(S.tintTopLeft,J*S._alphaTL),et=Z(S.tintTopRight,J*S._alphaTR),lt=Z(S.tintBottomLeft,J*S._alphaBL),ut=Z(S.tintBottomRight,J*S._alphaBR);this.shouldFlush(6)&&this.flush();var ct=this.setGameObject(S,E);this.manager.preBatch(S),this.batchQuad(S,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],I,R,N,F,tt,et,lt,ut,S.tintFill,A,ct),this.manager.postBatch(S)},batchTexture:function(S,x,T,C,w,b,E,A,I,R,N,F,P,D,M,L,k,V,W,K,B,G,O,$,z,X,Y,Z,J,tt,et,lt){this.manager.set(this,S);var ut=this._tempMatrix1,ct=this._tempMatrix2,ht=this._tempMatrix3,xt=V/T+Y,Tt=W/C+Z,At=(V+K)/T+Y,Rt=(W+B)/C+Z,mt=E,bt=A,Ct=-L,Ht=-k;if(S.isCropped){var zt=S._crop,Jt=zt.width,ae=zt.height;mt=Jt,bt=ae,E=Jt,A=ae,V=zt.x,W=zt.y;var _t=V,Zt=W;F&&(_t=K-zt.x-Jt),P&&(Zt=B-zt.y-ae),xt=_t/T+Y,Tt=Zt/C+Z,At=(_t+Jt)/T+Y,Rt=(Zt+ae)/C+Z,Ct=-L+V,Ht=-k+W}P=P^(!et&&x.isRenderTexture?1:0),F&&(mt*=-1,Ct+=E),P&&(bt*=-1,Ht+=A),ct.applyITRS(w,b,N,I,R),ut.copyFrom(J.matrix),tt?(ut.multiplyWithOffset(tt,-J.scrollX*D,-J.scrollY*M),ct.e=w,ct.f=b):(ct.e-=J.scrollX*D,ct.f-=J.scrollY*M),ut.multiply(ct,ht);var de=ht.setQuad(Ct,Ht,Ct+mt,Ht+bt,J.roundPixels);lt===void 0&&(lt=this.setTexture2D(x)),S&&this.manager.preBatch(S),this.batchQuad(S,de[0],de[1],de[2],de[3],de[4],de[5],de[6],de[7],xt,Tt,At,Rt,G,O,$,z,X,x,lt),S&&this.manager.postBatch(S)},batchTextureFrame:function(S,x,T,C,w,b,E){this.manager.set(this);var A=this._tempMatrix1.copyFrom(b),I=this._tempMatrix2;E?A.multiply(E,I):I=A;var R=I.setQuad(x,T,x+S.width,T+S.height,!1),N=this.setTexture2D(S.source.glTexture);C=c.getTintAppendFloatAlpha(C,w),this.batchQuad(null,R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],S.u0,S.v0,S.u1,S.v1,C,C,C,C,0,S.glTexture,N)},batchFillRect:function(S,x,T,C,w,b){this.renderer.pipelines.set(this);var E=this.calcMatrix;b&&b.multiply(w,E);var A=E.setQuad(S,x,S+T,x+C,!1),I=this.fillTint;this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],0,0,1,1,I.TL,I.TR,I.BL,I.BR,2)},batchFillTriangle:function(S,x,T,C,w,b,E,A){this.renderer.pipelines.set(this);var I=this.calcMatrix;A&&A.multiply(E,I);var R=I.getX(S,x),N=I.getY(S,x),F=I.getX(T,C),P=I.getY(T,C),D=I.getX(w,b),M=I.getY(w,b),L=this.fillTint;this.batchTri(null,R,N,F,P,D,M,0,0,1,1,L.TL,L.TR,L.BL,2)},batchStrokeTriangle:function(S,x,T,C,w,b,E,A,I){var R=this.tempTriangle;R[0].x=S,R[0].y=x,R[0].width=E,R[1].x=T,R[1].y=C,R[1].width=E,R[2].x=w,R[2].y=b,R[2].width=E,R[3].x=S,R[3].y=x,R[3].width=E,this.batchStrokePath(R,E,!1,A,I)},batchFillPath:function(S,x,T){this.renderer.pipelines.set(this);var C=this.calcMatrix;T&&T.multiply(x,C);for(var w=S.length,b=this.polygonCache,E,A,I=this.fillTint.TL,R=this.fillTint.TR,N=this.fillTint.BL,F=0;F<w;++F)A=S[F],b.push(A.x,A.y);E=p(b),w=E.length;for(var P=0;P<w;P+=3){var D=E[P+0]*2,M=E[P+1]*2,L=E[P+2]*2,k=b[D+0],V=b[D+1],W=b[M+0],K=b[M+1],B=b[L+0],G=b[L+1],O=C.getX(k,V),$=C.getY(k,V),z=C.getX(W,K),X=C.getY(W,K),Y=C.getX(B,G),Z=C.getY(B,G);this.batchTri(null,O,$,z,X,Y,Z,0,0,1,1,I,R,N,2)}b.length=0},batchStrokePath:function(S,x,T,C,w){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var b=S.length-1,E=0;E<b;E++){var A=S[E],I=S[E+1];this.batchLine(A.x,A.y,I.x,I.y,A.width/2,I.width/2,x,E,!T&&E===b-1,C,w)}},batchLine:function(S,x,T,C,w,b,E,A,I,R,N){this.renderer.pipelines.set(this);var F=this.calcMatrix;N&&N.multiply(R,F);var P=T-S,D=C-x,M=Math.sqrt(P*P+D*D);if(M!==0){var L=w*(C-x)/M,k=w*(S-T)/M,V=b*(C-x)/M,W=b*(S-T)/M,K=T-V,B=C-W,G=S-L,O=x-k,$=T+V,z=C+W,X=S+L,Y=x+k,Z=F.getX(K,B),J=F.getY(K,B),tt=F.getX(G,O),et=F.getY(G,O),lt=F.getX($,z),ut=F.getY($,z),ct=F.getX(X,Y),ht=F.getY(X,Y),xt=this.strokeTint,Tt=xt.TL,At=xt.TR,Rt=xt.BL,mt=xt.BR;if(this.batchQuad(null,ct,ht,tt,et,Z,J,lt,ut,0,0,1,1,Tt,At,Rt,mt,2),!(E<=2)){var bt=this.prevQuad,Ct=this.firstQuad;A>0&&bt[4]?this.batchQuad(null,ct,ht,tt,et,bt[0],bt[1],bt[2],bt[3],0,0,1,1,Tt,At,Rt,mt,2):(Ct[0]=ct,Ct[1]=ht,Ct[2]=tt,Ct[3]=et,Ct[4]=1),I&&Ct[4]?this.batchQuad(null,Z,J,lt,ut,Ct[0],Ct[1],Ct[2],Ct[3],0,0,1,1,Tt,At,Rt,mt,2):(bt[0]=Z,bt[1]=J,bt[2]=lt,bt[3]=ut,bt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,f.prototype.destroy.call(this),this}});r.exports=v},10919:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72632),h=n(83327),u=n(54677),d=n(44775),l=new a({Extends:d,initialize:function(m){m.vertShader=p(m,"vertShader",u),m.fragShader=p(m,"fragShader",h),m.attributes=p(m,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),d.call(this,m)},onRender:function(c,m){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",m.zoom)},batchPointLight:function(c,m,f,v,S,x,T,C,w,b,E,A){var I=c.color,R=c.intensity,N=c.radius,F=c.attenuation,P=I.r*R,D=I.g*R,M=I.b*R,L=m.alpha*c.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(f,v,E,A,N,F,P,D,M,L),this.batchLightVert(S,x,E,A,N,F,P,D,M,L),this.batchLightVert(T,C,E,A,N,F,P,D,M,L),this.batchLightVert(f,v,E,A,N,F,P,D,M,L),this.batchLightVert(T,C,E,A,N,F,P,D,M,L),this.batchLightVert(w,b,E,A,N,F,P,D,M,L),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(c,m,f,v,S,x,T,C,w,b){var E=this.vertexViewF32,A=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++A]=c,E[++A]=m,E[++A]=f,E[++A]=v,E[++A]=S,E[++A]=x,E[++A]=T,E[++A]=C,E[++A]=w,E[++A]=b,this.vertexCount++}});r.exports=l},80486:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(65246),h=n(72632),u=n(12569),d=n(99365),l=n(44775),c=new a({Extends:l,initialize:function(f){f.renderTarget=h(f,"renderTarget",1),f.fragShader=h(f,"fragShader",u),f.vertShader=h(f,"vertShader",d),f.attributes=h(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),f.batchSize=1,f.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],l.call(this,f),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new p,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){l.prototype.boot.call(this);var m=this.manager.UTILITY_PIPELINE;this.fullFrame1=m.fullFrame1,this.fullFrame2=m.fullFrame2,this.halfFrame1=m.halfFrame1,this.halfFrame2=m.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(m){this.bindAndDraw(m)},getController:function(m){return m!==void 0?m:this.controller?this.controller:this},copySprite:function(m,f,v){v===void 0&&(v=!1);var S=this.gl;S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,m.texture);var x=S.getParameter(S.FRAMEBUFFER_BINDING);S.bindFramebuffer(S.FRAMEBUFFER,f.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,f.texture,0),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),v&&(S.bindTexture(S.TEXTURE_2D,null),S.bindFramebuffer(S.FRAMEBUFFER,x))},copyFrame:function(m,f,v,S,x){this.manager.copyFrame(m,f,v,S,x)},copyToGame:function(m){this.manager.copyToGame(m)},drawFrame:function(m,f,v){this.manager.drawFrame(m,f,v,this.colorMatrix)},blendFrames:function(m,f,v,S,x){this.manager.blendFrames(m,f,v,S,x)},blendFramesAdditive:function(m,f,v,S,x){this.manager.blendFramesAdditive(m,f,v,S,x)},clearFrame:function(m,f){this.manager.clearFrame(m,f)},blitFrame:function(m,f,v,S,x,T){this.manager.blitFrame(m,f,v,S,x,T)},copyFrameRect:function(m,f,v,S,x,T,C,w){this.manager.copyFrameRect(m,f,v,S,x,T,C,w)},bindAndDraw:function(m,f,v,S,x){v===void 0&&(v=!0),S===void 0&&(S=!0);var T=this.gl,C=this.renderer;this.bind(x),this.set1i("uMainSampler",0),f?(T.viewport(0,0,f.width,f.height),T.bindFramebuffer(T.FRAMEBUFFER,f.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,f.texture,0),v&&(S?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT))):(C.popFramebuffer(!1,!1),C.currentFramebuffer||T.viewport(0,0,C.width,C.height)),C.restoreStencilMask(),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,m.texture),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),f&&(T.bindTexture(T.TEXTURE_2D,null),T.bindFramebuffer(T.FRAMEBUFFER,C.currentFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,l.prototype.destroy.call(this),this}});r.exports=c},87228:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(95723),p=n(79993),h=n(56694),u=n(37486),d=n(72632),l=n(77310),c=n(12569),m=n(74118),f=n(37410),v=n(85060),S=n(18166),x=n(44775),T=new h({Extends:l,initialize:function(w){var b=d(w,"fragShader",c),E=d(w,"vertShader",S),A=d(w,"drawShader",c),I=[{name:"DrawSprite",fragShader:v,vertShader:S},{name:"CopySprite",fragShader:b,vertShader:E},{name:"DrawGame",fragShader:A,vertShader:S},{name:"ColorMatrix",fragShader:u}],R=d(w,"shaders",[]);w.shaders=I.concat(R),w.vertShader||(w.vertShader=E),w.batchSize=1,l.call(this,w),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new m,this.targetBounds=new m,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){x.prototype.boot.call(this);var C=this.shaders,w=this.renderer;this.drawSpriteShader=C[0],this.copyShader=C[1],this.gameShader=C[2],this.colorMatrixShader=C[3],this.fsTarget=new f(w,w.width,w.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var b=new ArrayBuffer(168);this.quadVertexData=b,this.quadVertexViewF32=new Float32Array(b),this.quadVertexBuffer=w.createVertexBuffer(b,this.gl.STATIC_DRAW),this.onResize(w.width,w.height),this.currentShader=this.copyShader},onResize:function(C,w){var b=this.quadVertexViewF32;b[1]=w,b[22]=w,b[14]=C,b[28]=C,b[35]=C,b[36]=w},batchQuad:function(C,w,b,E,A,I,R,N,F,P,D,M,L,k,V,W,K,B,G){var O=Math.min(w,E,I,N),$=Math.min(b,A,R,F),z=Math.max(w,E,I,N),X=Math.max(b,A,R,F),Y=z-O,Z=X-$,J=this.spriteBounds.setTo(O,$,Y,Z),tt=C?C.preFX.padding:0,et=Y+tt*2,lt=Z+tt*2,ut=Math.abs(Math.max(et,lt)),ct=this.manager.getRenderTarget(ut),ht=this.targetBounds.setTo(0,0,ct.width,ct.height);p(ht,J.centerX,J.centerY),this.tempSprite=C;var xt=this.gl,Tt=this.renderer;Tt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.flipProjectionMatrix(!0),C&&(this.onDrawSprite(C,ct),C.preFX.onFX(this));var At=this.fsTarget;return this.flush(),xt.viewport(0,0,Tt.width,Tt.height),xt.bindFramebuffer(xt.FRAMEBUFFER,At.framebuffer),xt.framebufferTexture2D(xt.FRAMEBUFFER,xt.COLOR_ATTACHMENT0,xt.TEXTURE_2D,At.texture,0),xt.clearColor(0,0,0,0),xt.clear(xt.COLOR_BUFFER_BIT),this.setTexture2D(G),this.batchVert(w,b,P,D,0,B,k),this.batchVert(E,A,P,L,0,B,W),this.batchVert(I,R,M,L,0,B,K),this.batchVert(w,b,P,D,0,B,k),this.batchVert(I,R,M,L,0,B,K),this.batchVert(N,F,M,D,0,B,V),this.flush(),this.flipProjectionMatrix(!1),xt.activeTexture(xt.TEXTURE0),xt.bindTexture(xt.TEXTURE_2D,ct.texture),xt.copyTexSubImage2D(xt.TEXTURE_2D,0,0,0,ht.x,ht.y,ht.width,ht.height),xt.bindFramebuffer(xt.FRAMEBUFFER,null),xt.bindTexture(xt.TEXTURE_2D,null),this.onBatch(C),this.currentShader=this.copyShader,this.onDraw(ct,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(C,w,b,E,A,I,R){b===void 0&&(b=!0),E===void 0&&(E=!0),A===void 0&&(A=!1),R===void 0&&(R=this.copyShader);var N=this.gl,F=this.tempSprite;I&&(R=this.colorMatrixShader),this.currentShader=R;var P=this.setVertexBuffer(this.quadVertexBuffer);if(R.bind(P,!1),this.set1i("uMainSampler",0),F.preFX.onFXCopy(this),this.onCopySprite(C,w,F),I&&(this.set1fv("uColorMatrix",I.getData()),this.set1f("uAlpha",I.alpha)),N.activeTexture(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,C.texture),C.height>w.height)N.viewport(0,0,C.width,C.height),this.setTargetUVs(C,w);else{var D=w.height-C.height;N.viewport(0,D,C.width,C.height),this.resetUVs()}if(N.bindFramebuffer(N.FRAMEBUFFER,w.framebuffer),N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,w.texture,0),b&&(N.clearColor(0,0,0,+!E),N.clear(N.COLOR_BUFFER_BIT)),A){var M=this.renderer.currentBlendMode;this.renderer.setBlendMode(a.ERASE)}N.bufferData(N.ARRAY_BUFFER,this.quadVertexData,N.STATIC_DRAW),N.drawArrays(N.TRIANGLES,0,6),A&&this.renderer.setBlendMode(M),N.bindFramebuffer(N.FRAMEBUFFER,null)},copy:function(C,w){var b=this.gl;this.set1i("uMainSampler",0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,C.texture),b.viewport(0,0,C.width,C.height),this.setUVs(0,0,0,1,1,1,1,0),b.bindFramebuffer(b.FRAMEBUFFER,w.framebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,w.texture,0),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),b.bufferData(b.ARRAY_BUFFER,this.quadVertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null)},blendFrames:function(C,w,b,E,A){this.manager.blendFrames(C,w,b,E,A)},blendFramesAdditive:function(C,w,b,E,A){this.manager.blendFramesAdditive(C,w,b,E,A)},drawToGame:function(C){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(C)},copyToGame:function(C){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(C)},bindAndDraw:function(C){var w=this.gl,b=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(C.texture);var E=this._tempMatrix1.loadIdentity(),A=this.targetBounds.x,I=this.targetBounds.y,R=A+C.width,N=I+C.height,F=E.getX(A,I),P=E.getX(A,N),D=E.getX(R,N),M=E.getX(R,I),L=E.getY(A,I),k=E.getY(A,N),V=E.getY(R,N),W=E.getY(R,I),K=16777215;this.batchVert(F,L,0,0,0,0,K),this.batchVert(P,k,0,1,0,0,K),this.batchVert(D,V,1,1,0,0,K),this.batchVert(F,L,0,0,0,0,K),this.batchVert(D,V,1,1,0,0,K),this.batchVert(M,W,1,0,0,0,K),b.restoreFramebuffer(!1,!0),b.currentFramebuffer||w.viewport(0,0,b.width,b.height),b.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(C){this.drawToGame(C)},setUVs:function(C,w,b,E,A,I,R,N){var F=this.quadVertexViewF32;F[2]=C,F[3]=w,F[9]=b,F[10]=E,F[16]=A,F[17]=I,F[23]=C,F[24]=w,F[30]=A,F[31]=I,F[37]=R,F[38]=N},setTargetUVs:function(C,w){var b=w.height/C.height;b>.5?b=.5-(b-.5):b=.5+(.5-b),this.setUVs(0,b,0,1+b,1,1+b,1,b)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,l.prototype.destroy.call(this),this}});r.exports=T},21213:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72632),h=n(77310),u=new a({Extends:h,initialize:function(l){l.topology=5,l.batchSize=p(l,"batchSize",256),h.call(this,l)}});r.exports=u},51212:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72632),h=n(77310),u=n(85060),d=n(18166),l=n(44775),c=new a({Extends:h,initialize:function(f){f.fragShader=p(f,"fragShader",u),f.vertShader=p(f,"vertShader",d),f.forceZero=!0,h.call(this,f)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0)}});r.exports=c},60848:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(2529),p=n(95723),h=n(56694),u=n(65246),d=n(37486),l=n(79060),c=n(72632),m=n(98921),f=n(99365),v=n(44775),S=new h({Extends:v,initialize:function(T){T.renderTarget=c(T,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),T.vertShader=c(T,"vertShader",f),T.shaders=c(T,"shaders",[{name:"Copy",fragShader:l},{name:"AddBlend",fragShader:a},{name:"LinearBlend",fragShader:m},{name:"ColorMatrix",fragShader:d}]),T.attributes=c(T,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),T.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],T.batchSize=1,v.call(this,T),this.colorMatrix=new u,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){v.prototype.boot.call(this);var x=this.shaders,T=this.renderTargets;this.copyShader=x[0],this.addShader=x[1],this.linearShader=x[2],this.colorMatrixShader=x[3],this.fullFrame1=T[0],this.fullFrame2=T[1],this.halfFrame1=T[2],this.halfFrame2=T[3]},copyFrame:function(x,T,C,w,b){C===void 0&&(C=1),w===void 0&&(w=!0),b===void 0&&(b=!0);var E=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,x.texture),T?(E.viewport(0,0,T.width,T.height),E.bindFramebuffer(E.FRAMEBUFFER,T.framebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,T.texture,0)):E.viewport(0,0,x.width,x.height),w&&(b?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT)),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blitFrame:function(x,T,C,w,b,E,A){C===void 0&&(C=1),w===void 0&&(w=!0),b===void 0&&(b=!0),E===void 0&&(E=!1),A===void 0&&(A=!1);var I=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,x.texture),x.height>T.height)I.viewport(0,0,x.width,x.height),this.setTargetUVs(x,T);else{var R=T.height-x.height;I.viewport(0,R,x.width,x.height)}if(I.bindFramebuffer(I.FRAMEBUFFER,T.framebuffer),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,T.texture,0),w&&(b?I.clearColor(0,0,0,0):I.clearColor(0,0,0,1),I.clear(I.COLOR_BUFFER_BIT)),E){var N=this.renderer.currentBlendMode;this.renderer.setBlendMode(p.ERASE)}A&&this.flipY(),I.bufferData(I.ARRAY_BUFFER,this.vertexData,I.STATIC_DRAW),I.drawArrays(I.TRIANGLES,0,6),E&&this.renderer.setBlendMode(N),I.bindFramebuffer(I.FRAMEBUFFER,null),I.bindTexture(I.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(x,T,C,w,b,E,A,I){A===void 0&&(A=!0),I===void 0&&(I=!0);var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,x.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,x.texture,0),A&&(I?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,T.texture),R.copyTexSubImage2D(R.TEXTURE_2D,0,0,0,C,w,b,E),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null)},copyToGame:function(x){var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,x.texture),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6)},drawFrame:function(x,T,C,w){C===void 0&&(C=!0),w===void 0&&(w=this.colorMatrix);var b=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",w.getData()),this.set1f("uAlpha",w.alpha),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,x.texture),T?(b.viewport(0,0,T.width,T.height),b.bindFramebuffer(b.FRAMEBUFFER,T.framebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,T.texture,0)):b.viewport(0,0,x.width,x.height),C?b.clearColor(0,0,0,0):b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT),b.bufferData(b.ARRAY_BUFFER,this.vertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindTexture(b.TEXTURE_2D,null)},blendFrames:function(x,T,C,w,b,E){w===void 0&&(w=1),b===void 0&&(b=!0),E===void 0&&(E=this.linearShader);var A=this.gl;this.setShader(E),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",w),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,x.texture),A.activeTexture(A.TEXTURE1),A.bindTexture(A.TEXTURE_2D,T.texture),C?(A.bindFramebuffer(A.FRAMEBUFFER,C.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,C.texture,0),A.viewport(0,0,C.width,C.height)):A.viewport(0,0,x.width,x.height),b?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blendFramesAdditive:function(x,T,C,w,b){this.blendFrames(x,T,C,w,b,this.addShader)},clearFrame:function(x,T){T===void 0&&(T=!0);var C=this.gl;C.viewport(0,0,x.width,x.height),C.bindFramebuffer(C.FRAMEBUFFER,x.framebuffer),T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT);var w=this.renderer.currentFramebuffer;C.bindFramebuffer(C.FRAMEBUFFER,w)},setUVs:function(x,T,C,w,b,E,A,I){var R=this.vertexViewF32;R[2]=x,R[3]=T,R[6]=C,R[7]=w,R[10]=b,R[11]=E,R[14]=x,R[15]=T,R[18]=b,R[19]=E,R[22]=A,R[23]=I},setTargetUVs:function(x,T){var C=T.height/x.height;C>.5?C=.5-(C-.5):C=.5+(.5-C),this.setUVs(0,C,0,1+C,1,1+C,1,C)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});r.exports=S},65641:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};r.exports=g},68726:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelineafterflush"},67186:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinebeforeflush"},22709:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinebind"},74469:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelineboot"},93953:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinedestroy"},51687:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelinerebind"},25034:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pipelineresize"},18970:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AFTER_FLUSH:n(68726),BEFORE_FLUSH:n(67186),BIND:n(22709),BOOT:n(74469),DESTROY:n(93953),REBIND:n(51687),RESIZE:n(25034)}},32469:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(87751),h=n(80486),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.amount=1},onPreRender:function(d,l){d=this.getController(d),this.set1f("amount",d.amount,l)}});r.exports=u},2134:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(88222),h=n(80486),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(d){d=this.getController(d),this.set1f("strength",d.blurStrength),this.set3fv("color",d.glcolor)},onDraw:function(d){var l=this.getController(),c=this.fullFrame1,m=this.fullFrame2;this.copyFrame(d,m);for(var f=2/d.width*l.offsetX,v=2/d.height*l.offsetY,S=0;S<l.steps;S++)this.set2f("offset",f,0),this.copySprite(d,c),this.set2f("offset",0,v),this.copySprite(c,d);this.blendFrames(m,d,c,l.strength),this.copyToGame(c)}});r.exports=u},63377:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(35491),h=n(75568),u=n(44481),d=n(80486),l=new a({Extends:d,initialize:function(m){d.call(this,{game:m,shaders:[{name:"Gaussian5",fragShader:p},{name:"Gaussian9",fragShader:h},{name:"Gaussian13",fragShader:u}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(c){var m=this.getController(),f=this.gl,v=this.fullFrame1,S=f.getParameter(f.FRAMEBUFFER_BINDING);this.bind(this.activeShader),f.activeTexture(f.TEXTURE0),f.viewport(0,0,c.width,c.height),this.set1i("uMainSampler",0),this.set2f("resolution",c.width,c.height),this.set1f("strength",m.strength),this.set3fv("color",m.glcolor);for(var x=0;x<m.steps;x++)this.set2f("offset",m.x,0),this.copySprite(c,v),this.set2f("offset",0,m.y),this.copySprite(v,c);f.bindFramebuffer(f.FRAMEBUFFER,S),f.bindTexture(f.TEXTURE_2D,null),this.copyToGame(c)}});r.exports=l},49745:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(69960),h=n(80486),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(d,l,c,m){d=this.getController(d),this.set1f("radius",d.radius,l),this.set1f("amount",d.amount,l),this.set1f("contrast",d.contrast,l),this.set1f("strength",d.strength,l),this.set2f("blur",d.blurX,d.blurY,l),this.setBoolean("isTiltShift",d.isTiltShift,l),c&&m&&this.set2f("resolution",c,m,l)},onDraw:function(d){this.set2f("resolution",d.width,d.height),this.bindAndDraw(d)}});r.exports=u},4323:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(33754),h=n(80486),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(d,l,c,m){d=this.getController(d),this.set1f("scale",d.scale,l),this.set1f("feather",d.feather,l),this.set1f("thickness",d.thickness,l),this.set3fv("color",d.glcolor,l),this.set4fv("backgroundColor",d.glcolor2,l),c&&m&&this.set2f("resolution",c,m,l)},onDraw:function(d){this.set2f("resolution",d.width,d.height),this.bindAndDraw(d)}});r.exports=u},92066:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(80486),h=new a({Extends:p,initialize:function(d){p.call(this,{game:d})},onDraw:function(u){var d=this.fullFrame1;this.controller?this.manager.drawFrame(u,d,!0,this.controller):this.drawFrame(u,d),this.copyToGame(d)}});r.exports=h},89581:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(35668),h=n(80486),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(d){var l=this.game.textures.getFrame(d);l&&(this.glTexture=l.glTexture)},onDraw:function(d){var l=this.getController(),c=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",l.x,l.y),this.bindTexture(l.glTexture,1),this.copySprite(d,c),this.copyToGame(c)}});r.exports=u},55084:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72632),h=n(69675),u=n(80486),d=n(75512),l=new a({Extends:u,initialize:function(m,f){var v=p(f,"quality",.1),S=p(f,"distance",10);u.call(this,{game:m,fragShader:d.setGlowQuality(h,m,v,S)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(c,m,f,v){c=this.getController(c),this.set1f("outerStrength",c.outerStrength,m),this.set1f("innerStrength",c.innerStrength,m),this.set4fv("glowColor",c.glcolor,m),this.setBoolean("knockout",c.knockout,m),f&&v&&this.set2f("resolution",f,v,m)},onDraw:function(c){this.set2f("resolution",c.width,c.height),this.bindAndDraw(c)}});r.exports=l},41653:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(90993),h=n(80486),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(d,l){d=this.getController(d),this.set1f("alpha",d.alpha,l),this.set1i("size",d.size,l),this.set3fv("color1",d.glcolor1,l),this.set3fv("color2",d.glcolor2,l),this.set2f("positionFrom",d.fromX,d.fromY,l),this.set2f("positionTo",d.toX,d.toY,l)}});r.exports=u},73416:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(37945),h=n(80486),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.amount=1},onPreRender:function(d,l,c,m){d=this.getController(d),this.set1f("amount",d.amount,l),c&&m&&this.set2f("resolution",c,m,l)},onDraw:function(d){this.set2f("resolution",d.width,d.height),this.bindAndDraw(d)}});r.exports=u},58049:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(85718),h=n(80486),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(d,l){d=this.getController(d);var c=d.samples;this.set1i("samples",c,l),this.set1f("intensity",d.intensity,l),this.set1f("decay",d.decay,l),this.set1f("power",d.power/c,l),this.set2f("lightPosition",d.x,d.y,l),this.set4fv("color",d.glcolor,l)}});r.exports=u},18026:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(13740),h=n(80486),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(d,l,c,m){d=this.getController(d),this.setTime("time",l),this.set1f("speed",d.speed,l),this.set1f("lineWidth",d.lineWidth,l),this.set1f("gradient",d.gradient,l),this.setBoolean("reveal",d.reveal,l),c&&m&&this.set2f("resolution",c,m,l)},onDraw:function(d){this.set2f("resolution",d.width,d.height),this.bindAndDraw(d)}});r.exports=u},72381:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(80617),h=n(80486),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(d,l){d=this.getController(d),this.set1f("radius",d.radius,l),this.set1f("strength",d.strength,l),this.set2f("position",d.x,d.y,l)}});r.exports=u},80542:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(62879),h=n(80486),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(d,l){d=this.getController(d);var c=d.progress,m=d.wipeWidth,f=d.direction,v=d.axis;this.set4f("config",c,m,f,v,l),this.setBoolean("reveal",d.reveal,l)}});r.exports=u},58136:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Barrel:n(32469),Bloom:n(2134),Blur:n(63377),Bokeh:n(49745),Circle:n(4323),ColorMatrix:n(92066),Displacement:n(89581),Glow:n(55084),Gradient:n(41653),Pixelate:n(73416),Shadow:n(58049),Shine:n(18026),Vignette:n(72381),Wipe:n(80542)};r.exports=a},62253:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(65641),p=n(98611),h={FX:n(58136),BitmapMaskPipeline:n(5583),Events:n(18970),FXPipeline:n(81828),LightPipeline:n(66901),MobilePipeline:n(71264),MultiPipeline:n(77310),PointLightPipeline:n(10919),PostFXPipeline:n(80486),PreFXPipeline:n(87228),RopePipeline:n(21213),SinglePipeline:n(51212),UtilityPipeline:n(60848)};h=p(!1,h,a),r.exports=h},2529:r=>{r.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},91679:r=>{r.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},89053:r=>{r.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},37486:r=>{r.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},79060:r=>{r.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},87751:r=>{r.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},88222:r=>{r.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},44481:r=>{r.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},35491:r=>{r.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},75568:r=>{r.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},69960:r=>{r.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},33754:r=>{r.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},35668:r=>{r.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},69675:r=>{r.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},90993:r=>{r.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},37945:r=>{r.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},85718:r=>{r.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},13740:r=>{r.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},80617:r=>{r.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},62879:r=>{r.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},65045:r=>{r.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},98921:r=>{r.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},25005:r=>{r.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},94914:r=>{r.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},11263:r=>{r.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},51852:r=>{r.exports=["#define SHADER_NAME PHASER_MOBILE_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},53787:r=>{r.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},15968:r=>{r.exports=["#define SHADER_NAME PHASER_MULTI_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},83327:r=>{r.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},54677:r=>{r.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},12569:r=>{r.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},99365:r=>{r.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},85060:r=>{r.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},18166:r=>{r.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},92462:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AddBlendFrag:n(2529),BitmapMaskFrag:n(91679),BitmapMaskVert:n(89053),ColorMatrixFrag:n(37486),CopyFrag:n(79060),FXBarrelFrag:n(87751),FXBloomFrag:n(88222),FXBlurHighFrag:n(44481),FXBlurLowFrag:n(35491),FXBlurMedFrag:n(75568),FXBokehFrag:n(69960),FXCircleFrag:n(33754),FXDisplacementFrag:n(35668),FXGlowFrag:n(69675),FXGradientFrag:n(90993),FXPixelateFrag:n(37945),FXShadowFrag:n(85718),FXShineFrag:n(13740),FXVignetteFrag:n(80617),FXWipeFrag:n(62879),LightFrag:n(65045),LinearBlendFrag:n(98921),MeshFrag:n(25005),MeshVert:n(94914),MobileFrag:n(11263),MobileVert:n(51852),MultiFrag:n(53787),MultiVert:n(15968),PointLightFrag:n(83327),PointLightVert:n(54677),PostFXFrag:n(12569),QuadVert:n(99365),SingleFrag:n(85060),SingleVert:n(18166)}},756:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(55301),p=n(56694),h=n(6659),u=n(40444),d=n(97081),l=n(74181),c=n(2893),m=n(9229),f=n(72283),v=n(74118),S=n(90881),x=n(84314),T=n(93736),C=n(47751),w=new p({Extends:h,initialize:function(E){h.call(this),this.game=E,this.canvas,this.canvasBounds=new v,this.parent=null,this.parentIsWindow=!1,this.parentSize=new S,this.gameSize=new S,this.baseSize=new S,this.displaySize=new S,this.scaleMode=a.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new T(1,1),this.autoRound=!1,this.autoCenter=a.CENTER.NO_CENTER,this.orientation=a.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:f,windowResize:f,fullScreenChange:f,fullScreenError:f}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(d.BOOT,this.boot,this)},boot:function(){var b=this.game;this.canvas=b.canvas,this.fullscreen=b.device.fullscreen,this.scaleMode!==a.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===a.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),b.events.on(d.PRE_STEP,this.step,this),b.events.once(d.READY,this.refresh,this),b.events.once(d.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(b){this.getParent(b),this.getParentBounds();var E=b.width,A=b.height,I=b.scaleMode,R=b.zoom,N=b.autoRound;if(typeof E=="string"){var F=this.parentSize.width;F===0&&(F=window.innerWidth);var P=parseInt(E,10)/100;E=Math.floor(F*P)}if(typeof A=="string"){var D=this.parentSize.height;D===0&&(D=window.innerHeight);var M=parseInt(A,10)/100;A=Math.floor(D*M)}this.scaleMode=I,this.autoRound=N,this.autoCenter=b.autoCenter,this.resizeInterval=b.resizeInterval,N&&(E=Math.floor(E),A=Math.floor(A)),this.gameSize.setSize(E,A),R===a.ZOOM.MAX_ZOOM&&(R=this.getMaxZoom()),this.zoom=R,R!==1&&(this._resetZoom=!0),this.baseSize.setSize(E,A),N&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),b.minWidth>0&&this.displaySize.setMin(b.minWidth*R,b.minHeight*R),b.maxWidth>0&&this.displaySize.setMax(b.maxWidth*R,b.maxHeight*R),this.displaySize.setSize(E,A),this.orientation=m(E,A)},getParent:function(b){var E=b.parent;if(E!==null){if(this.parent=c(E),this.parentIsWindow=this.parent===document.body,b.expandParent&&b.scaleMode!==a.SCALE_MODE.NONE){var A=this.parent.getBoundingClientRect();(this.parentIsWindow||A.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",A=this.parent.getBoundingClientRect(),!this.parentIsWindow&&A.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}b.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=c(b.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var b=this.parentSize,E=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(E.height=l(!0));var A=E.width,I=E.height;if(b.width!==A||b.height!==I)return b.setSize(A,I),!0;if(this.canvas){var R=this.canvasBounds,N=this.canvas.getBoundingClientRect();if(N.x!==R.x||N.y!==R.y)return!0}return!1},lockOrientation:function(b){var E=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return E?E.call(screen,b):!1},setParentSize:function(b,E){return this.parentSize.setSize(b,E),this.refresh()},setGameSize:function(b,E){var A=this.autoRound;A&&(b=Math.floor(b),E=Math.floor(E));var I=this.width,R=this.height;return this.gameSize.resize(b,E),this.baseSize.resize(b,E),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(b/E),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(I,R)},resize:function(b,E){var A=this.zoom,I=this.autoRound;I&&(b=Math.floor(b),E=Math.floor(E));var R=this.width,N=this.height;this.gameSize.resize(b,E),this.baseSize.resize(b,E),I&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(b*A,E*A),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var F=this.canvas.style,P=b*A,D=E*A;return I&&(P=Math.floor(P),D=Math.floor(D)),(P!==b||D!==E)&&(F.width=P+"px",F.height=D+"px"),this.refresh(R,N)},setZoom:function(b){return this.zoom=b,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(b,E){b===void 0&&(b=this.width),E===void 0&&(E=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var A=this.game.domContainer;if(A){this.baseSize.setCSS(A);var I=this.canvas.style,R=A.style;R.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",R.marginLeft=I.marginLeft,R.marginTop=I.marginTop}return this.emit(u.RESIZE,this.gameSize,this.baseSize,this.displaySize,b,E),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var b=m(this.width,this.height);b!==this.orientation&&(this.orientation=b,this.emit(u.ORIENTATION_CHANGE,b))}},updateScale:function(){var b=this.canvas.style,E=this.gameSize.width,A=this.gameSize.height,I,R,N=this.zoom,F=this.autoRound;this.scaleMode===a.SCALE_MODE.NONE?(this.displaySize.setSize(E*N,A*N),I=this.displaySize.width,R=this.displaySize.height,F&&(I=Math.floor(I),R=Math.floor(R)),this._resetZoom&&(b.width=I+"px",b.height=R+"px",this._resetZoom=!1)):this.scaleMode===a.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),I=this.displaySize.width,R=this.displaySize.height,F&&(I=Math.floor(I),R=Math.floor(R)),this.canvas.width=I,this.canvas.height=R):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),I=this.displaySize.width,R=this.displaySize.height,F&&(I=Math.floor(I),R=Math.floor(R)),b.width=I+"px",b.height=R+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var b=x(this.parentSize.width,this.gameSize.width,0,!0),E=x(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(b,E),1)},updateCenter:function(){var b=this.autoCenter;if(b!==a.CENTER.NO_CENTER){var E=this.canvas,A=E.style,I=E.getBoundingClientRect(),R=I.width,N=I.height,F=Math.floor((this.parentSize.width-R)/2),P=Math.floor((this.parentSize.height-N)/2);b===a.CENTER.CENTER_HORIZONTALLY?P=0:b===a.CENTER.CENTER_VERTICALLY&&(F=0),A.marginLeft=F+"px",A.marginTop=P+"px"}},updateBounds:function(){var b=this.canvasBounds,E=this.canvas.getBoundingClientRect();b.x=E.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),b.y=E.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),b.width=E.width,b.height=E.height},transformX:function(b){return(b-this.canvasBounds.left)*this.displayScale.x},transformY:function(b){return(b-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(b){b===void 0&&(b={navigationUI:"hide"});var E=this.fullscreen;if(!E.available){this.emit(u.FULLSCREEN_UNSUPPORTED);return}if(!E.active){var A=this.getFullscreenTarget();E.keyboard?A[E.request](Element.ALLOW_KEYBOARD_INPUT):A[E.request](b)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(u.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(b){this.removeFullscreenTarget(),this.emit(u.FULLSCREEN_FAILED,b)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var b=document.createElement("div");b.style.margin="0",b.style.padding="0",b.style.width="100%",b.style.height="100%",this.fullscreenTarget=b,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var E=this.canvas.parentNode;E.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var b=this.fullscreenTarget;if(b&&b.parentNode){var E=b.parentNode;E.insertBefore(this.canvas,b),E.removeChild(b)}}},stopFullscreen:function(){var b=this.fullscreen;if(!b.available)return this.emit(u.FULLSCREEN_UNSUPPORTED),!1;b.active&&document[b.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(u.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(b){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(b)},startListeners:function(){var b=this,E=this.domlisteners;if(E.orientationChange=function(){b.updateBounds(),b._checkOrientation=!0,b.dirty=!0},E.windowResize=function(){b.updateBounds(),b.dirty=!0},window.addEventListener("orientationchange",E.orientationChange,!1),window.addEventListener("resize",E.windowResize,!1),this.fullscreen.available){E.fullScreenChange=function(I){return b.onFullScreenChange(I)},E.fullScreenError=function(I){return b.onFullScreenError(I)};var A=["webkit","moz",""];A.forEach(function(I){document.addEventListener(I+"fullscreenchange",E.fullScreenChange,!1),document.addEventListener(I+"fullscreenerror",E.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",E.fullScreenChange,!1),document.addEventListener("MSFullscreenError",E.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(b,E){b instanceof C||(E=b,b=void 0),E===void 0&&(E=new v);var A=this.baseSize,I=this.parentSize,R=this.canvasBounds,N=this.displayScale,F=R.x>=0?0:-(R.x*N.x),P=R.y>=0?0:-(R.y*N.y),D;I.width>=R.width?D=A.width:D=A.width-(R.width-I.width)*N.x;var M;return I.height>=R.height?M=A.height:M=A.height-(R.height-I.height)*N.y,E.setTo(F,P,D,M),b&&(E.width/=b.zoomX,E.height/=b.zoomY,E.centerX=b.centerX+b.scrollX,E.centerY=b.centerY+b.scrollY),E},step:function(b,E){this.parent&&(this._lastCheck+=E,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var b=this.domlisteners;window.removeEventListener("orientationchange",b.orientationChange,!1),window.removeEventListener("resize",b.windowResize,!1);var E=["webkit","moz",""];E.forEach(function(A){document.removeEventListener(A+"fullscreenchange",b.fullScreenChange,!1),document.removeEventListener(A+"fullscreenerror",b.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",b.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",b.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===a.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===a.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});r.exports=w},35098:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},53539:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},12637:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},10217:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},55301:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={CENTER:n(35098),ORIENTATION:n(53539),SCALE_MODE:n(12637),ZOOM:n(10217)};r.exports=a},82085:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="enterfullscreen"},11826:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="fullscreenfailed"},56691:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="fullscreenunsupported"},34739:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="leavefullscreen"},26681:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="orientationchange"},11428:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resize"},40444:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ENTER_FULLSCREEN:n(82085),FULLSCREEN_FAILED:n(11826),FULLSCREEN_UNSUPPORTED:n(56691),LEAVE_FULLSCREEN:n(34739),ORIENTATION_CHANGE:n(26681),RESIZE:n(11428)}},86754:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(98611),p=n(55301),h={Center:n(35098),Events:n(40444),Orientation:n(53539),ScaleManager:n(756),ScaleModes:n(12637),Zoom:n(10217)};h=a(!1,h,p.CENTER),h=a(!1,h,p.ORIENTATION),h=a(!1,h,p.SCALE_MODE),h=a(!1,h,p.ZOOM),r.exports=h},47736:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72632),p=n(40587),h=function(u){var d=u.game.config.defaultPhysicsSystem,l=a(u.settings,"physics",!1);if(!(!d&&!l)){var c=[];if(d&&c.push(p(d+"Physics")),l)for(var m in l)m=p(m.concat("Physics")),c.indexOf(m)===-1&&c.push(m);return c}};r.exports=h},91088:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72632),p=function(h){var u=h.plugins.getDefaultScenePlugins(),d=a(h.settings,"plugins",!1);return Array.isArray(d)?d:u||[]};r.exports=p},90415:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};r.exports=g},87157:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(63946),h=new a({initialize:function(d){this.sys=new p(this,d),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});r.exports=h},13553:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(92980),h=n(7599),u=n(97081),d=n(10850),l=n(683),c=n(72283),m=n(87157),f=n(63946),v=new a({initialize:function(x,T){if(this.game=x,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,T){Array.isArray(T)||(T=[T]);for(var C=0;C<T.length;C++)this._pending.push({key:"default",scene:T[C],autoStart:C===0,data:{}})}x.events.once(u.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new m);var S,x,T,C;for(S=0;S<this._pending.length;S++){x=this._pending[S],T=x.key,C=x.scene;var w;C instanceof m?w=this.createSceneFromInstance(T,C):typeof C=="object"?w=this.createSceneFromObject(T,C):typeof C=="function"&&(w=this.createSceneFromFunction(T,C)),T=w.sys.settings.key,this.keys[T]=w,this.scenes.push(w),this._data[T]&&(w.sys.settings.data=this._data[T].data,this._data[T].autoStart&&(x.autoStart=!0)),(x.autoStart||w.sys.settings.active)&&this._start.push(T)}for(this._pending.length=0,this._data={},this.isBooted=!0,S=0;S<this._start.length;S++)x=this._start[S],this.start(x);this._start.length=0}},processQueue:function(){var S=this._pending.length,x=this._queue.length;if(!(S===0&&x===0)){var T,C;if(S){for(T=0;T<S;T++)C=this._pending[T],this.add(C.key,C.scene,C.autoStart,C.data);for(T=0;T<this._start.length;T++)C=this._start[T],this.start(C);this._start.length=0,this._pending.length=0}for(T=0;T<this._queue.length;T++)C=this._queue[T],this[C.op](C.keyA,C.keyB);this._queue.length=0}},add:function(S,x,T,C){if(T===void 0&&(T=!1),C===void 0&&(C={}),this.isProcessing||!this.isBooted)return this._pending.push({key:S,scene:x,autoStart:T,data:C}),this.isBooted||(this._data[S]={data:C}),null;S=this.getKey(S,x);var w;return x instanceof m?w=this.createSceneFromInstance(S,x):typeof x=="object"?(x.key=S,w=this.createSceneFromObject(S,x)):typeof x=="function"&&(w=this.createSceneFromFunction(S,x)),w.sys.settings.data=C,S=w.sys.settings.key,this.keys[S]=w,this.scenes.push(w),(T||w.sys.settings.active)&&(this._pending.length?this._start.push(S):this.start(S)),w},remove:function(S){if(this.isProcessing)this._queue.push({op:"remove",keyA:S,keyB:null});else{var x=this.getScene(S);if(!x||x.sys.isTransitioning())return this;var T=this.scenes.indexOf(x),C=x.sys.settings.key;T>-1&&(delete this.keys[C],this.scenes.splice(T,1),this._start.indexOf(C)>-1&&(T=this._start.indexOf(C),this._start.splice(T,1)),x.sys.destroy())}return this},bootScene:function(S){var x=S.sys,T=x.settings;x.sceneUpdate=c,S.init&&(S.init.call(S,T.data),T.status=p.INIT,T.isTransition&&x.events.emit(h.TRANSITION_INIT,T.transitionFrom,T.transitionDuration));var C;x.load&&(C=x.load,C.reset()),C&&S.preload?(S.preload.call(S),T.status=p.LOADING,C.once(l.COMPLETE,this.loadComplete,this),C.start()):this.create(S)},loadComplete:function(S){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(S.scene)},payloadComplete:function(S){this.bootScene(S.scene)},update:function(S,x){this.processQueue(),this.isProcessing=!0;for(var T=this.scenes.length-1;T>=0;T--){var C=this.scenes[T].sys;C.settings.status>p.START&&C.settings.status<=p.RUNNING&&C.step(S,x),C.scenePlugin._target&&C.scenePlugin.step(S,x)}},render:function(S){for(var x=0;x<this.scenes.length;x++){var T=this.scenes[x].sys;T.settings.visible&&T.settings.status>=p.LOADING&&T.settings.status<p.SLEEPING&&T.render(S)}this.isProcessing=!1},create:function(S){var x=S.sys,T=x.settings;S.create&&(T.status=p.CREATING,S.create.call(S,T.data),T.status===p.DESTROYED)||(T.isTransition&&x.events.emit(h.TRANSITION_START,T.transitionFrom,T.transitionDuration),S.update&&(x.sceneUpdate=S.update),T.status=p.RUNNING,x.events.emit(h.CREATE,S))},createSceneFromFunction:function(S,x){var T=new x;if(T instanceof m){var C=T.sys.settings.key;if(C!==""&&(S=C),this.keys.hasOwnProperty(S))throw new Error("Cannot add a Scene with duplicate key: "+S);return this.createSceneFromInstance(S,T)}else return T.sys=new f(T),T.sys.settings.key=S,T.sys.init(this.game),T},createSceneFromInstance:function(S,x){var T=x.sys.settings.key;return T===""&&(x.sys.settings.key=S),x.sys.init(this.game),x},createSceneFromObject:function(S,x){var T=new m(x),C=T.sys.settings.key;C!==""?S=C:T.sys.settings.key=S,T.sys.init(this.game);for(var w=["init","preload","create","update","render"],b=0;b<w.length;b++){var E=d(x,w[b],null);E&&(T[w[b]]=E)}if(x.hasOwnProperty("extend")){for(var A in x.extend)if(x.extend.hasOwnProperty(A)){var I=x.extend[A];A==="data"&&T.hasOwnProperty("data")&&typeof I=="object"?T.data.merge(I):A!=="sys"&&(T[A]=I)}}return T},getKey:function(S,x){if(S||(S="default"),typeof x=="function")return S;if(x instanceof m?S=x.sys.settings.key:typeof x=="object"&&x.hasOwnProperty("key")&&(S=x.key),this.keys.hasOwnProperty(S))throw new Error("Cannot add a Scene with duplicate key: "+S);return S},getScenes:function(S,x){S===void 0&&(S=!0),x===void 0&&(x=!1);for(var T=[],C=this.scenes,w=0;w<C.length;w++){var b=C[w];b&&(!S||S&&b.sys.isActive())&&T.push(b)}return x?T.reverse():T},getScene:function(S){if(typeof S=="string"){if(this.keys[S])return this.keys[S]}else for(var x=0;x<this.scenes.length;x++)if(S===this.scenes[x])return S;return null},isActive:function(S){var x=this.getScene(S);return x?x.sys.isActive():null},isPaused:function(S){var x=this.getScene(S);return x?x.sys.isPaused():null},isVisible:function(S){var x=this.getScene(S);return x?x.sys.isVisible():null},isSleeping:function(S){var x=this.getScene(S);return x?x.sys.isSleeping():null},pause:function(S,x){var T=this.getScene(S);return T&&T.sys.pause(x),this},resume:function(S,x){var T=this.getScene(S);return T&&T.sys.resume(x),this},sleep:function(S,x){var T=this.getScene(S);return T&&!T.sys.isTransitioning()&&T.sys.sleep(x),this},wake:function(S,x){var T=this.getScene(S);return T&&T.sys.wake(x),this},run:function(S,x){var T=this.getScene(S);if(!T){for(var C=0;C<this._pending.length;C++)if(this._pending[C].key===S){this.queueOp("start",S,x);break}return this}T.sys.isSleeping()?T.sys.wake(x):T.sys.isPaused()?T.sys.resume(x):this.start(S,x)},start:function(S,x){if(!this.isBooted)return this._data[S]={autoStart:!0,data:x},this;var T=this.getScene(S);if(!T)return console.warn("Scene not found for key: "+S),this;var C=T.sys,w=C.settings.status;if(w>=p.START&&w<=p.CREATING)return this;if(w>=p.RUNNING&&w<=p.SLEEPING)C.shutdown(),C.sceneUpdate=c,C.start(x);else{C.sceneUpdate=c,C.start(x);var b;if(C.load&&(b=C.load),b&&C.settings.hasOwnProperty("pack")&&(b.reset(),b.addPack({payload:C.settings.pack})))return C.settings.status=p.LOADING,b.once(l.COMPLETE,this.payloadComplete,this),b.start(),this}return this.bootScene(T),this},stop:function(S,x){var T=this.getScene(S);if(T&&!T.sys.isTransitioning()&&T.sys.settings.status!==p.SHUTDOWN){var C=T.sys.load;C&&(C.off(l.COMPLETE,this.loadComplete,this),C.off(l.COMPLETE,this.payloadComplete,this)),T.sys.shutdown(x)}return this},switch:function(S,x){var T=this.getScene(S),C=this.getScene(x);return T&&C&&T!==C&&(this.sleep(S),this.isSleeping(x)?this.wake(x):this.start(x)),this},getAt:function(S){return this.scenes[S]},getIndex:function(S){var x=this.getScene(S);return this.scenes.indexOf(x)},bringToTop:function(S){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:S,keyB:null});else{var x=this.getIndex(S);if(x!==-1&&x<this.scenes.length){var T=this.getScene(S);this.scenes.splice(x,1),this.scenes.push(T)}}return this},sendToBack:function(S){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:S,keyB:null});else{var x=this.getIndex(S);if(x!==-1&&x>0){var T=this.getScene(S);this.scenes.splice(x,1),this.scenes.unshift(T)}}return this},moveDown:function(S){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:S,keyB:null});else{var x=this.getIndex(S);if(x>0){var T=x-1,C=this.getScene(S),w=this.getAt(T);this.scenes[x]=w,this.scenes[T]=C}}return this},moveUp:function(S){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:S,keyB:null});else{var x=this.getIndex(S);if(x<this.scenes.length-1){var T=x+1,C=this.getScene(S),w=this.getAt(T);this.scenes[x]=w,this.scenes[T]=C}}return this},moveAbove:function(S,x){if(S===x)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:S,keyB:x});else{var T=this.getIndex(S),C=this.getIndex(x);if(T!==-1&&C!==-1&&C<T){var w=this.getAt(C);this.scenes.splice(C,1),this.scenes.splice(T+(C>T),0,w)}}return this},moveBelow:function(S,x){if(S===x)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:S,keyB:x});else{var T=this.getIndex(S),C=this.getIndex(x);if(T!==-1&&C!==-1&&C>T){var w=this.getAt(C);this.scenes.splice(C,1),T===0?this.scenes.unshift(w):this.scenes.splice(T-(C<T),0,w)}}return this},queueOp:function(S,x,T){return this._queue.push({op:S,keyA:x,keyB:T}),this},swapPosition:function(S,x){if(S===x)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:S,keyB:x});else{var T=this.getIndex(S),C=this.getIndex(x);if(T!==C&&T!==-1&&C!==-1){var w=this.getAt(T);this.scenes[T]=this.scenes[C],this.scenes[C]=w}}return this},dump:function(){for(var S=[],x=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],T=0;T<this.scenes.length;T++){var C=this.scenes[T].sys,w=C.settings.visible&&(C.settings.status===p.RUNNING||C.settings.status===p.PAUSED)?"[*] ":"[-] ";w+=C.settings.key+" ("+x[C.settings.status]+")",S.push(w)}console.log(S.join(`
`))},destroy:function(){for(var S=0;S<this.scenes.length;S++){var x=this.scenes[S].sys;x.destroy()}this.systemScene.sys.destroy(),this.update=c,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});r.exports=v},64051:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=n(56694),h=n(7599),u=n(72632),d=n(91963),l=new p({initialize:function(m){this.scene=m,this.systems=m.sys,this.settings=m.sys.settings,this.key=m.sys.settings.key,this.manager=m.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,m.sys.events.once(h.BOOT,this.boot,this),m.sys.events.on(h.START,this.pluginStart,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(h.SHUTDOWN,this.shutdown,this)},start:function(c,m){return c===void 0&&(c=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",c,m),this},restart:function(c){var m=this.key;return this.manager.queueOp("stop",m),this.manager.queueOp("start",m,c),this},transition:function(c){c===void 0&&(c={});var m=u(c,"target",!1),f=this.manager.getScene(m);if(!m||!this.checkValidTransition(f))return!1;var v=u(c,"duration",1e3);this._elapsed=0,this._target=f,this._duration=v,this._willSleep=u(c,"sleep",!1),this._willRemove=u(c,"remove",!1);var S=u(c,"onUpdate",null);S&&(this._onUpdate=S,this._onUpdateScope=u(c,"onUpdateScope",this.scene));var x=u(c,"allowInput",!1);this.settings.transitionAllowInput=x;var T=f.sys.settings;T.isTransition=!0,T.transitionFrom=this.scene,T.transitionDuration=v,T.transitionAllowInput=x,u(c,"moveAbove",!1)?this.manager.moveAbove(this.key,m):u(c,"moveBelow",!1)&&this.manager.moveBelow(this.key,m),f.sys.isSleeping()?f.sys.wake(u(c,"data")):this.manager.start(m,u(c,"data"));var C=u(c,"onStart",null),w=u(c,"onStartScope",this.scene);return C&&C.call(w,this.scene,f,v),this.systems.events.emit(h.TRANSITION_OUT,f,v),!0},checkValidTransition:function(c){return!(!c||c.sys.isActive()||c.sys.isTransitioning()||c===this.scene||this.systems.isTransitioning())},step:function(c,m){this._elapsed+=m,this.transitionProgress=a(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var c=this._target.sys,m=this._target.sys.settings;c.events.emit(h.TRANSITION_COMPLETE,this.scene),m.isTransition=!1,m.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(c,m,f,v){return this.manager.add(c,m,f,v)},launch:function(c,m){return c&&c!==this.key&&this.manager.queueOp("start",c,m),this},run:function(c,m){return c&&c!==this.key&&this.manager.queueOp("run",c,m),this},pause:function(c,m){return c===void 0&&(c=this.key),this.manager.queueOp("pause",c,m),this},resume:function(c,m){return c===void 0&&(c=this.key),this.manager.queueOp("resume",c,m),this},sleep:function(c,m){return c===void 0&&(c=this.key),this.manager.queueOp("sleep",c,m),this},wake:function(c,m){return c===void 0&&(c=this.key),this.manager.queueOp("wake",c,m),this},switch:function(c){return c!==this.key&&this.manager.queueOp("switch",this.key,c),this},stop:function(c,m){return c===void 0&&(c=this.key),this.manager.queueOp("stop",c,m),this},setActive:function(c,m,f){m===void 0&&(m=this.key);var v=this.manager.getScene(m);return v&&v.sys.setActive(c,f),this},setVisible:function(c,m){m===void 0&&(m=this.key);var f=this.manager.getScene(m);return f&&f.sys.setVisible(c),this},isSleeping:function(c){return c===void 0&&(c=this.key),this.manager.isSleeping(c)},isActive:function(c){return c===void 0&&(c=this.key),this.manager.isActive(c)},isPaused:function(c){return c===void 0&&(c=this.key),this.manager.isPaused(c)},isVisible:function(c){return c===void 0&&(c=this.key),this.manager.isVisible(c)},swapPosition:function(c,m){return m===void 0&&(m=this.key),c!==m&&this.manager.swapPosition(c,m),this},moveAbove:function(c,m){return m===void 0&&(m=this.key),c!==m&&this.manager.moveAbove(c,m),this},moveBelow:function(c,m){return m===void 0&&(m=this.key),c!==m&&this.manager.moveBelow(c,m),this},remove:function(c){return c===void 0&&(c=this.key),this.manager.remove(c),this},moveUp:function(c){return c===void 0&&(c=this.key),this.manager.moveUp(c),this},moveDown:function(c){return c===void 0&&(c=this.key),this.manager.moveDown(c),this},bringToTop:function(c){return c===void 0&&(c=this.key),this.manager.bringToTop(c),this},sendToBack:function(c){return c===void 0&&(c=this.key),this.manager.sendToBack(c),this},get:function(c){return this.manager.getScene(c)},getStatus:function(c){var m=this.manager.getScene(c);if(m)return m.sys.getStatus()},getIndex:function(c){return c===void 0&&(c=this.key),this.manager.getIndex(c)},shutdown:function(){var c=this.systems.events;c.off(h.SHUTDOWN,this.shutdown,this),c.off(h.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});d.register("ScenePlugin",l,"scenePlugin"),r.exports=l},36765:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(92980),p=n(10850),h=n(30657),u=n(90415),d={create:function(l){return typeof l=="string"?l={key:l}:l===void 0&&(l={}),{status:a.PENDING,key:p(l,"key",""),active:p(l,"active",!1),visible:p(l,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:p(l,"pack",!1),cameras:p(l,"cameras",null),map:p(l,"map",h(u,p(l,"mapAdd",{}))),physics:p(l,"physics",{}),loader:p(l,"loader",{}),plugins:p(l,"plugins",!1),input:p(l,"input",{})}}};r.exports=d},63946:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(92980),h=n(18360),u=n(7599),d=n(47736),l=n(91088),c=n(72283),m=n(36765),f=new a({initialize:function(S,x){this.scene=S,this.game,this.renderer,this.config=x,this.settings=m.create(x),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=c},init:function(v){this.settings.status=p.INIT,this.sceneUpdate=c,this.game=v,this.renderer=v.renderer,this.canvas=v.canvas,this.context=v.context;var S=v.plugins;this.plugins=S,S.addToScene(this,h.Global,[h.CoreScene,l(this),d(this)]),this.events.emit(u.BOOT,this),this.settings.isBooted=!0},step:function(v,S){var x=this.events;x.emit(u.PRE_UPDATE,v,S),x.emit(u.UPDATE,v,S),this.sceneUpdate.call(this.scene,v,S),x.emit(u.POST_UPDATE,v,S)},render:function(v){var S=this.displayList;S.depthSort(),this.events.emit(u.PRE_RENDER,v),this.cameras.render(v,S),this.events.emit(u.RENDER,v)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(v){var S=this.settings,x=this.getStatus();return x!==p.CREATING&&x!==p.RUNNING?console.warn("Cannot pause non-running Scene",S.key):this.settings.active&&(S.status=p.PAUSED,S.active=!1,this.events.emit(u.PAUSE,this,v)),this},resume:function(v){var S=this.events,x=this.settings;return this.settings.active||(x.status=p.RUNNING,x.active=!0,S.emit(u.RESUME,this,v)),this},sleep:function(v){var S=this.settings,x=this.getStatus();return x!==p.CREATING&&x!==p.RUNNING?console.warn("Cannot sleep non-running Scene",S.key):(S.status=p.SLEEPING,S.active=!1,S.visible=!1,this.events.emit(u.SLEEP,this,v)),this},wake:function(v){var S=this.events,x=this.settings;return x.status=p.RUNNING,x.active=!0,x.visible=!0,S.emit(u.WAKE,this,v),x.isTransition&&S.emit(u.TRANSITION_WAKE,x.transitionFrom,x.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var v=this.settings.status;return v>p.PENDING&&v<=p.RUNNING},isSleeping:function(){return this.settings.status===p.SLEEPING},isActive:function(){return this.settings.status===p.RUNNING},isPaused:function(){return this.settings.status===p.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(v){return this.settings.visible=v,this},setActive:function(v,S){return v?this.resume(S):this.pause(S)},start:function(v){var S=this.events,x=this.settings;v&&(x.data=v),x.status=p.START,x.active=!0,x.visible=!0,S.emit(u.START,this),S.emit(u.READY,this,v)},shutdown:function(v){var S=this.events,x=this.settings;S.off(u.TRANSITION_INIT),S.off(u.TRANSITION_START),S.off(u.TRANSITION_COMPLETE),S.off(u.TRANSITION_OUT),x.status=p.SHUTDOWN,x.active=!1,x.visible=!1,S.emit(u.SHUTDOWN,this,v)},destroy:function(){var v=this.events,S=this.settings;S.status=p.DESTROYED,S.active=!1,S.visible=!1,v.emit(u.DESTROY,this),v.removeAllListeners();for(var x=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],T=0;T<x.length;T++)this[x[T]]=null}});r.exports=f},92980:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};r.exports=g},31803:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addedtoscene"},94817:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="boot"},28977:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="create"},91959:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},363:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},15643:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="postupdate"},17058:r=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="prerender"},77125:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="preupdate"},76018:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="ready"},28620:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removedfromscene"},41538:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="render"},34268:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},2342:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="shutdown"},96541:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="sleep"},74244:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"},17046:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitioncomplete"},13637:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitioninit"},14733:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitionout"},33899:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitionstart"},52418:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="transitionwake"},31735:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"},8470:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="wake"},7599:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADDED_TO_SCENE:n(31803),BOOT:n(94817),CREATE:n(28977),DESTROY:n(91959),PAUSE:n(363),POST_UPDATE:n(15643),PRE_RENDER:n(17058),PRE_UPDATE:n(77125),READY:n(76018),REMOVED_FROM_SCENE:n(28620),RENDER:n(41538),RESUME:n(34268),SHUTDOWN:n(2342),SLEEP:n(96541),START:n(74244),TRANSITION_COMPLETE:n(17046),TRANSITION_INIT:n(13637),TRANSITION_OUT:n(14733),TRANSITION_START:n(33899),TRANSITION_WAKE:n(52418),UPDATE:n(31735),WAKE:n(8470)}},20436:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(92980),p=n(98611),h={Events:n(7599),GetPhysicsPlugins:n(47736),GetScenePlugins:n(91088),SceneManager:n(13553),ScenePlugin:n(64051),Settings:n(36765),Systems:n(63946)};h=p(!1,h,a),r.exports=h},25798:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(6659),h=n(76038),u=n(98611),d=n(72283),l=new a({Extends:p,initialize:function(m,f,v){p.call(this),this.manager=m,this.key=f,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=u(this.config,v),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(c){return!c||!c.name||typeof c.name!="string"?!1:this.markers[c.name]?(console.error("addMarker "+c.name+" already exists in Sound"),!1):(c=u(!0,{name:"",start:0,duration:this.totalDuration-(c.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},c),this.markers[c.name]=c,!0)},updateMarker:function(c){return!c||!c.name||typeof c.name!="string"?!1:this.markers[c.name]?(this.markers[c.name]=u(!0,this.markers[c.name],c),!0):(console.warn("Audio Marker: "+c.name+" missing in Sound: "+this.key),!1)},removeMarker:function(c){var m=this.markers[c];return m?(this.markers[c]=null,m):null},play:function(c,m){if(c===void 0&&(c=""),typeof c=="object"&&(m=c,c=""),typeof c!="string")return!1;if(!c)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[c])return console.warn("Marker: "+c+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[c],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=u(this.currentConfig,m),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:d,calculateRate:function(){var c=1.0005777895065548,m=this.currentConfig.detune+this.manager.detune,f=Math.pow(c,m);this.totalRate=this.currentConfig.rate*this.manager.rate*f},destroy:function(){this.pendingRemove||(this.emit(h.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});r.exports=l},12486:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(32742),h=n(6659),u=n(76038),d=n(97081),l=n(71608),c=n(51463),m=n(72283),f=n(93736),v=new a({Extends:h,initialize:function(x){h.call(this),this.game=x,this.jsonCache=x.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new f,x.events.on(d.BLUR,this.onGameBlur,this),x.events.on(d.FOCUS,this.onGameFocus,this),x.events.on(d.PRE_STEP,this.update,this),x.events.once(d.DESTROY,this.destroy,this)},add:m,addAudioSprite:function(S,x){x===void 0&&(x={});var T=this.add(S,x);T.spritemap=this.jsonCache.get(S).spritemap;for(var C in T.spritemap)if(T.spritemap.hasOwnProperty(C)){var w=p(x),b=T.spritemap[C];w.loop=b.hasOwnProperty("loop")?b.loop:!1,T.addMarker({name:C,start:b.start,duration:b.end-b.start,config:w})}return T},get:function(S){return c(this.sounds,"key",S)},getAll:function(S){return S?l(this.sounds,"key",S):l(this.sounds)},getAllPlaying:function(){return l(this.sounds,"isPlaying",!0)},play:function(S,x){var T=this.add(S);return T.once(u.COMPLETE,T.destroy,T),x?x.name?(T.addMarker(x),T.play(x.name)):T.play(x):T.play()},playAudioSprite:function(S,x,T){var C=this.addAudioSprite(S);return C.once(u.COMPLETE,C.destroy,C),C.play(x,T)},remove:function(S){var x=this.sounds.indexOf(S);return x!==-1?(S.destroy(),this.sounds.splice(x,1),!0):!1},removeAll:function(){this.sounds.forEach(function(S){S.destroy()}),this.sounds.length=0},removeByKey:function(S){for(var x=0,T=this.sounds.length-1;T>=0;T--){var C=this.sounds[T];C.key===S&&(C.destroy(),this.sounds.splice(T,1),x++)}return x},pauseAll:function(){this.forEachActiveSound(function(S){S.pause()}),this.emit(u.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(S){S.resume()}),this.emit(u.RESUME_ALL,this)},setListenerPosition:m,stopAll:function(){this.forEachActiveSound(function(S){S.stop()}),this.emit(u.STOP_ALL,this)},stopByKey:function(S){var x=0;return this.getAll(S).forEach(function(T){T.stop()&&x++}),x},unlock:m,onBlur:m,onFocus:m,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(S,x){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(u.UNLOCKED,this));for(var T=this.sounds.length-1;T>=0;T--)this.sounds[T].pendingRemove&&this.sounds.splice(T,1);this.sounds.forEach(function(C){C.update(S,x)})},destroy:function(){this.game.events.off(d.BLUR,this.onGameBlur,this),this.game.events.off(d.FOCUS,this.onGameFocus,this),this.game.events.off(d.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(S,x){var T=this;this.sounds.forEach(function(C,w){C&&!C.pendingRemove&&S.call(x||T,C,w,T.sounds)})},setRate:function(S){return this.rate=S,this},rate:{get:function(){return this._rate},set:function(S){this._rate=S,this.forEachActiveSound(function(x){x.calculateRate()}),this.emit(u.GLOBAL_RATE,this,S)}},setDetune:function(S){return this.detune=S,this},detune:{get:function(){return this._detune},set:function(S){this._detune=S,this.forEachActiveSound(function(x){x.calculateRate()}),this.emit(u.GLOBAL_DETUNE,this,S)}}});r.exports=v},84191:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(27622),p=n(17546),h=n(55491),u={create:function(d){var l=d.config.audio,c=d.device.audio;return l.noAudio||!c.webAudio&&!c.audioData?new p(d):c.webAudio&&!l.disableWebAudio?new h(d):new a(d)}};r.exports=u},77578:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"},19679:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="decodedall"},56951:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="decoded"},16436:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="destroy"},55154:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="detune"},57818:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="detune"},57890:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="mute"},83022:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="rate"},99170:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="volume"},64289:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="looped"},67214:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loop"},53128:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="mute"},73078:r=>{/**
 * @author       pi-kei
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pan"},76763:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pauseall"},88426:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},13765:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="play"},80291:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="rate"},11124:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resumeall"},55382:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},71157:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="seek"},31776:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stopall"},39450:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"},21939:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="unlocked"},33019:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="volume"},76038:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={COMPLETE:n(77578),DECODED:n(56951),DECODED_ALL:n(19679),DESTROY:n(16436),DETUNE:n(55154),GLOBAL_DETUNE:n(57818),GLOBAL_MUTE:n(57890),GLOBAL_RATE:n(83022),GLOBAL_VOLUME:n(99170),LOOP:n(67214),LOOPED:n(64289),MUTE:n(53128),PAN:n(73078),PAUSE_ALL:n(76763),PAUSE:n(88426),PLAY:n(13765),RATE:n(80291),RESUME_ALL:n(11124),RESUME:n(55382),SEEK:n(71157),STOP_ALL:n(31776),STOP:n(39450),UNLOCKED:n(21939),VOLUME:n(33019)}},34350:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(25798),p=n(56694),h=n(76038),u=n(82897),d=new p({Extends:a,initialize:function(c,m,f){if(f===void 0&&(f={}),this.tags=c.game.cache.audio.get(m),!this.tags)throw new Error('No cached audio asset with key "'+m);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,a.call(this,c,m,f)},play:function(l,c){return this.manager.isLocked(this,"play",[l,c])||!a.prototype.play.call(this,l,c)||!this.pickAndPlayAudioTag()?!1:(this.emit(h.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(h.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!a.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(h.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!a.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(h.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var l=this.currentConfig.seek,c=this.currentConfig.delay,m=(this.currentMarker?this.currentMarker.start:0)+l;return this.previousTime=m,this.audio.currentTime=m,this.applyConfig(),c===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+c*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var l=0;l<this.tags.length;l++){var c=this.tags[l];if(c.dataset.used==="false")return c.dataset.used="true",this.audio=c,!0}if(!this.manager.override)return!1;var m=[];this.manager.forEachActiveSound(function(v){v.key===this.key&&v.audio&&m.push(v)},this),m.sort(function(v,S){return v.loop===S.loop?S.seek/S.duration-v.seek/v.duration:v.loop?1:-1});var f=m[0];return this.audio=f.audio,f.reset(),f.audio=null,f.startTime=0,f.previousTime=0,!0},playCatchPromise:function(){var l=this.audio.play();l&&l.catch(function(c){console.warn(c)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){a.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(l){if(this.isPlaying){if(this.startTime>0){this.startTime<l-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,l-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var c=this.currentMarker?this.currentMarker.start:0,m=c+this.duration,f=this.audio.currentTime;if(this.currentConfig.loop)f>=m-this.manager.loopEndOffset?(this.audio.currentTime=c+Math.max(0,f-m),f=this.audio.currentTime):f<c&&(this.audio.currentTime+=c,f=this.audio.currentTime),f<this.previousTime&&this.emit(h.LOOPED,this);else if(f>=m){this.reset(),this.stopAndReleaseAudioTag(),this.emit(h.COMPLETE,this);return}this.previousTime=f}},destroy:function(){a.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=u(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){a.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(l){this.currentConfig.mute=l,!this.manager.isLocked(this,"mute",l)&&(this.updateMute(),this.emit(h.MUTE,this,l))}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.currentConfig.volume},set:function(l){this.currentConfig.volume=l,!this.manager.isLocked(this,"volume",l)&&(this.updateVolume(),this.emit(h.VOLUME,this,l))}},setVolume:function(l){return this.volume=l,this},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,!this.manager.isLocked(this,h.RATE,l)&&(this.calculateRate(),this.emit(h.RATE,this,l))}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,!this.manager.isLocked(this,h.DETUNE,l)&&(this.calculateRate(),this.emit(h.DETUNE,this,l))}},setDetune:function(l){return this.detune=l,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.isLocked(this,"seek",l)||this.startTime>0||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.isPlaying?(this.previousTime=l,this.audio.currentTime=l):this.isPaused&&(this.currentConfig.seek=l),this.emit(h.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,!this.manager.isLocked(this,"loop",l)&&(this.audio&&(this.audio.loop=l),this.emit(h.LOOP,this,l))}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.currentConfig.pan},set:function(l){this.currentConfig.pan=l,this.emit(h.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});r.exports=d},27622:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12486),p=n(56694),h=n(76038),u=n(34350),d=new p({Extends:a,initialize:function(c){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,a.call(this,c)},add:function(l,c){var m=new u(this,l,c);return this.sounds.push(m),m},unlock:function(){this.locked=!1;var l=this;if(this.game.cache.audio.entries.each(function(v,S){for(var x=0;x<S.length;x++)if(S[x].dataset.locked==="true")return l.locked=!0,!1;return!0}),!!this.locked){var c=!1,m=function(){c=!0},f=function(){if(c){c=!1;return}document.body.removeEventListener("touchmove",m),document.body.removeEventListener("touchend",f);var v=[];if(l.game.cache.audio.entries.each(function(x,T){for(var C=0;C<T.length;C++){var w=T[C];w.dataset.locked==="true"&&v.push(w)}return!0}),v.length!==0){var S=v[v.length-1];S.oncanplaythrough=function(){S.oncanplaythrough=null,v.forEach(function(x){x.dataset.locked="false"}),l.unlocked=!0},v.forEach(function(x){x.load()})}};this.once(h.UNLOCKED,function(){for(this.forEachActiveSound(function(S){S.currentMarker===null&&S.duration===0&&(S.duration=S.tags[0].duration),S.totalDuration=S.tags[0].duration});this.lockedActionsQueue.length;){var v=this.lockedActionsQueue.shift();v.sound[v.prop].apply?v.sound[v.prop].apply(v.sound,v.value||[]):v.sound[v.prop]=v.value}},this),document.body.addEventListener("touchmove",m,!1),document.body.addEventListener("touchend",f,!1)}},onBlur:function(){this.forEachActiveSound(function(l){l.isPlaying&&(this.onBlurPausedSounds.push(l),l.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(l){l.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){a.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(l,c,m){return l.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:l,prop:c,value:m}),!0):!1},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this._mute},set:function(l){this._mute=l,this.forEachActiveSound(function(c){c.updateMute()}),this.emit(h.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this._volume},set:function(l){this._volume=l,this.forEachActiveSound(function(c){c.updateVolume()}),this.emit(h.GLOBAL_VOLUME,this,l)}}});r.exports=d},56751:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={SoundManagerCreator:n(84191),Events:n(76038),BaseSound:n(25798),BaseSoundManager:n(12486),WebAudioSound:n(96008),WebAudioSoundManager:n(55491),HTML5AudioSound:n(34350),HTML5AudioSoundManager:n(27622),NoAudioSound:n(38662),NoAudioSoundManager:n(17546)}},38662:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(25798),p=n(56694),h=n(6659),u=n(98611),d=n(72283),l=function(){return!1},c=function(){return null},m=function(){return this},f=new p({Extends:h,initialize:function(S,x,T){T===void 0&&(T={}),h.call(this),this.manager=S,this.key=x,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=u({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},T),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:l,updateMarker:l,removeMarker:c,play:l,pause:l,resume:l,stop:l,setMute:m,setVolume:m,setRate:m,setDetune:m,setSeek:m,setLoop:m,setPan:m,applyConfig:c,resetConfig:c,update:d,calculateRate:c,destroy:function(){a.prototype.destroy.call(this)}});r.exports=f},17546:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12486),p=n(56694),h=n(6659),u=n(38662),d=n(72283),l=new p({Extends:h,initialize:function(m){h.call(this),this.game=m,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(c,m){var f=new u(this,c,m);return this.sounds.push(f),f},addAudioSprite:function(c,m){var f=this.add(c,m);return f.spritemap={},f},get:function(c){return a.prototype.get.call(this,c)},getAll:function(c){return a.prototype.getAll.call(this,c)},play:function(c,m){return!1},playAudioSprite:function(c,m,f){return!1},remove:function(c){return a.prototype.remove.call(this,c)},removeAll:function(){return a.prototype.removeAll.call(this)},removeByKey:function(c){return a.prototype.removeByKey.call(this,c)},stopByKey:function(c){return a.prototype.stopByKey.call(this,c)},onBlur:d,onFocus:d,onGameBlur:d,onGameFocus:d,pauseAll:d,resumeAll:d,stopAll:d,update:d,setRate:d,setDetune:d,setMute:d,setVolume:d,unlock:d,forEachActiveSound:function(c,m){a.prototype.forEachActiveSound.call(this,c,m)},destroy:function(){a.prototype.destroy.call(this)}});r.exports=l},96008:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(25798),p=n(56694),h=n(76038),u=n(72632),d=new p({Extends:a,initialize:function(c,m,f){if(f===void 0&&(f={}),this.audioBuffer=c.game.cache.audio.get(m),!this.audioBuffer)throw new Error('Audio key "'+m+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=c.context.createGain(),this.volumeNode=c.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),c.context.createPanner&&(this.spatialNode=c.context.createPanner(),this.volumeNode.connect(this.spatialNode)),c.context.createStereoPanner?(this.pannerNode=c.context.createStereoPanner(),c.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(c.destination)):c.context.createPanner?this.spatialNode.connect(c.destination):this.volumeNode.connect(c.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,a.call(this,c,m,f)},play:function(l,c){return a.prototype.play.call(this,l,c)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(h.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(h.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(h.RESUME,this),!0)},stop:function(){return a.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(h.STOP,this),!0):!1},createAndStartBufferSource:function(){var l=this.currentConfig.seek,c=this.currentConfig.delay,m=this.manager.context.currentTime+c,f=(this.currentMarker?this.currentMarker.start:0)+l,v=this.duration-l;this.playTime=m-l,this.startTime=m,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,m),Math.max(0,f),Math.max(0,v)),this.resetConfig()},createAndStartLoopBufferSource:function(){var l=this.getLoopTime(),c=this.currentMarker?this.currentMarker.start:0,m=this.duration;this.loopTime=l,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,l),Math.max(0,c),Math.max(0,m))},createBufferSource:function(){var l=this,c=this.manager.context.createBufferSource();return c.buffer=this.audioBuffer,c.connect(this.muteNode),c.onended=function(m){m.target===l.source&&(l.currentConfig.loop?l.hasLooped=!0:l.hasEnded=!0)},c},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var l=this.currentConfig.source;if(l&&this.manager.context.createPanner){var c=this.spatialNode;c.panningModel=u(l,"panningModel","equalpower"),c.distanceModel=u(l,"distanceModel","inverse"),c.orientationX.value=u(l,"orientationX",0),c.orientationY.value=u(l,"orientationY",0),c.orientationZ.value=u(l,"orientationZ",-1),c.refDistance=u(l,"refDistance",1),c.maxDistance=u(l,"maxDistance",1e4),c.rolloffFactor=u(l,"rolloffFactor",1),c.coneInnerAngle=u(l,"coneInnerAngle",360),c.coneOuterAngle=u(l,"coneOuterAngle",0),c.coneOuterGain=u(l,"coneOuterGain",0),this.spatialSource=u(l,"follow",null),this.spatialSource||(c.positionX.value=u(l,"x",0),c.positionY.value=u(l,"y",0),c.positionZ.value=u(l,"z",0))}a.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(l){this.spatialNode&&(this.spatialNode.positionX.value=l)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(l){this.spatialNode&&(this.spatialNode.positionY.value=l)}},update:function(){if(this.isPlaying&&this.spatialSource){var l=u(this.spatialSource,"x",null),c=u(this.spatialSource,"y",null);l&&l!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=l),c&&c!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=c)}this.hasEnded?(this.hasEnded=!1,a.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(h.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(h.LOOPED,this))},destroy:function(){this.pendingRemove||(a.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){a.prototype.calculateRate.call(this);var l=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,l),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,l)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var l=0,c=0;c<this.rateUpdates.length;c++){var m=0;c<this.rateUpdates.length-1?m=this.rateUpdates[c+1].time:m=this.manager.context.currentTime-this.playTime,l+=(m-this.rateUpdates[c].time)*this.rateUpdates[c].rate}return l},getLoopTime:function(){for(var l=0,c=0;c<this.rateUpdates.length-1;c++)l+=(this.rateUpdates[c+1].time-this.rateUpdates[c].time)*this.rateUpdates[c].rate;var m=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+m.time+(this.duration-l)/m.rate},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,this.calculateRate(),this.emit(h.RATE,this,l)}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,this.calculateRate(),this.emit(h.DETUNE,this,l)}},setDetune:function(l){return this.detune=l,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(l){this.currentConfig.mute=l,this.muteNode.gain.setValueAtTime(l?0:1,0),this.emit(h.MUTE,this,l)}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(l){this.currentConfig.volume=l,this.volumeNode.gain.setValueAtTime(l,0),this.emit(h.VOLUME,this,l)}},setVolume:function(l){return this.volume=l,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.currentConfig.seek=l,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(h.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),l&&this.createAndStartLoopBufferSource()),this.emit(h.LOOP,this,l)}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(l){this.currentConfig.pan=l,this.pannerNode&&this.pannerNode.pan.setValueAtTime(l,this.manager.context.currentTime),this.emit(h.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});r.exports=d},55491:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82329),p=n(12486),h=n(56694),u=n(76038),d=n(97081),l=n(96008),c=n(72632),m=new h({Extends:p,initialize:function(v){this.context=this.createAudioContext(v),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),p.call(this,v),this.locked&&v.isBooted?this.unlock():v.events.once(d.BOOT,this.unlock,this)},createAudioContext:function(f){var v=f.config.audio;if(v.context)return v.context.resume(),v.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(f){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=f,this.masterMuteNode=f.createGain(),this.masterVolumeNode=f.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(f.destination),this.destination=this.masterMuteNode,this},add:function(f,v){var S=new l(this,f,v);return this.sounds.push(S),S},decodeAudio:function(f,v){var S;Array.isArray(f)?S=f:S=[{key:f,data:v}];for(var x=this.game.cache.audio,T=S.length,C=0;C<S.length;C++){var w=S[C],b=w.key,E=w.data;typeof E=="string"&&(E=a(E));var A=(function(R,N){x.add(R,N),this.emit(u.DECODED,R),T--,T===0&&this.emit(u.DECODED_ALL)}).bind(this,b),I=(function(R,N){console.error("Error decoding audio: "+R+" - ",N?N.message:""),T--,T===0&&this.emit(u.DECODED_ALL)}).bind(this,b);this.context.decodeAudioData(E,A,I)}},setListenerPosition:function(f,v){return f===void 0&&(f=this.game.scale.width/2),v===void 0&&(v=this.game.scale.height/2),this.listenerPosition.set(f,v),this},unlock:function(){var f=this,v=document.body,S=function x(){if(f.context&&v){var T=v.removeEventListener;f.context.resume().then(function(){T("touchstart",x),T("touchend",x),T("click",x),T("keydown",x),f.unlocked=!0},function(){T("touchstart",x),T("touchend",x),T("click",x),T("keydown",x)})}};v&&(v.addEventListener("touchstart",S,!1),v.addEventListener("touchend",S,!1),v.addEventListener("click",S,!1),v.addEventListener("keydown",S,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var f=this.context;f&&!this.locked&&(f.state==="suspended"||f.state==="interrupted")&&f.resume()},update:function(f,v){var S=this.context.listener;if(S&&S.positionX!==void 0){var x=c(this.listenerPosition,"x",null),T=c(this.listenerPosition,"y",null);x&&x!==this._spatialx&&(this._spatialx=S.positionX.value=x),T&&T!==this._spatialy&&(this._spatialy=S.positionY.value=T)}p.prototype.update.call(this,f,v),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var f=this;this.context.close().then(function(){f.context=null})}p.prototype.destroy.call(this)},setMute:function(f){return this.mute=f,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(f){this.masterMuteNode.gain.setValueAtTime(f?0:1,0),this.emit(u.GLOBAL_MUTE,this,f)}},setVolume:function(f){return this.volume=f,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(f){this.masterVolumeNode.gain.setValueAtTime(f,0),this.emit(u.GLOBAL_VOLUME,this,f)}}});r.exports=m},71207:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(59959),p=n(56694),h=n(72283),u=n(17922),d=new p({initialize:function(c){this.parent=c,this.list=[],this.position=0,this.addCallback=h,this.removeCallback=h,this._sortKey=""},add:function(l,c){return c?a.Add(this.list,l):a.Add(this.list,l,0,this.addCallback,this)},addAt:function(l,c,m){return m?a.AddAt(this.list,l,c):a.AddAt(this.list,l,c,0,this.addCallback,this)},getAt:function(l){return this.list[l]},getIndex:function(l){return this.list.indexOf(l)},sort:function(l,c){return l?(c===void 0&&(c=function(m,f){return m[l]-f[l]}),u(this.list,c),this):this},getByName:function(l){return a.GetFirst(this.list,"name",l)},getRandom:function(l,c){return a.GetRandom(this.list,l,c)},getFirst:function(l,c,m,f){return a.GetFirst(this.list,l,c,m,f)},getAll:function(l,c,m,f){return a.GetAll(this.list,l,c,m,f)},count:function(l,c){return a.CountAllMatching(this.list,l,c)},swap:function(l,c){a.Swap(this.list,l,c)},moveTo:function(l,c){return a.MoveTo(this.list,l,c)},moveAbove:function(l,c){return a.MoveAbove(this.list,l,c)},moveBelow:function(l,c){return a.MoveBelow(this.list,l,c)},remove:function(l,c){return c?a.Remove(this.list,l):a.Remove(this.list,l,this.removeCallback,this)},removeAt:function(l,c){return c?a.RemoveAt(this.list,l):a.RemoveAt(this.list,l,this.removeCallback,this)},removeBetween:function(l,c,m){return m?a.RemoveBetween(this.list,l,c):a.RemoveBetween(this.list,l,c,this.removeCallback,this)},removeAll:function(l){for(var c=this.list.length;c--;)this.remove(this.list[c],l);return this},bringToTop:function(l){return a.BringToTop(this.list,l)},sendToBack:function(l){return a.SendToBack(this.list,l)},moveUp:function(l){return a.MoveUp(this.list,l),l},moveDown:function(l){return a.MoveDown(this.list,l),l},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(l,c){return a.Replace(this.list,l,c)},exists:function(l){return this.list.indexOf(l)>-1},setAll:function(l,c,m,f){return a.SetAll(this.list,l,c,m,f),this},each:function(l,c){for(var m=[null],f=2;f<arguments.length;f++)m.push(arguments[f]);for(f=0;f<this.list.length;f++)m[0]=this.list[f],l.apply(c,m)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});r.exports=d},33885:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u){if(this.entries={},this.size=0,Array.isArray(u))for(var d=0;d<u.length;d++)this.set(u[d][0],u[d][1])},set:function(h,u){return this.has(h)||this.size++,this.entries[h]=u,this},get:function(h){if(this.has(h))return this.entries[h]},getArray:function(){var h=[],u=this.entries;for(var d in u)h.push(u[d]);return h},has:function(h){return this.entries.hasOwnProperty(h)},delete:function(h){return this.has(h)&&(delete this.entries[h],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(h){delete this.entries[h]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var h=[],u=this.entries;for(var d in u)h.push(u[d]);return h},dump:function(){var h=this.entries;console.group("Map");for(var u in h)console.log(u,h[u]);console.groupEnd()},each:function(h){var u=this.entries;for(var d in u)if(h(d,u[d])===!1)break;return this},contains:function(h){var u=this.entries;for(var d in u)if(u[d]===h)return!0;return!1},merge:function(h,u){u===void 0&&(u=!1);var d=this.entries,l=h.entries;for(var c in l)d.hasOwnProperty(c)&&u?d[c]=l[c]:this.set(c,l[c]);return this}});r.exports=p},74623:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(6659),h=n(36716),u=new a({Extends:p,initialize:function(){p.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(d){return this._active.indexOf(d)>-1},isPending:function(d){return this._toProcess>0&&this._pending.indexOf(d)>-1},isDestroying:function(d){return this._destroy.indexOf(d)>-1},add:function(d){return this.checkQueue&&this.isActive()&&!this.isDestroying()||this.isPending()||(this._pending.push(d),this._toProcess++),d},remove:function(d){if(this.isPending(d)){var l=this._pending,c=l.indexOf(d);c!==-1&&l.splice(c,1)}else this.isActive(d)&&(this._destroy.push(d),this._toProcess++);return d},removeAll:function(){for(var d=this._active,l=this._destroy,c=d.length;c--;)l.push(d[c]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var d=this._destroy,l=this._active,c,m;for(c=0;c<d.length;c++){m=d[c];var f=l.indexOf(m);f!==-1&&(l.splice(f,1),this.emit(h.PROCESS_QUEUE_REMOVE,m))}for(d.length=0,d=this._pending,c=0;c<d.length;c++)m=d[c],(!this.checkQueue||this.checkQueue&&l.indexOf(m)===-1)&&(l.push(m),this.emit(h.PROCESS_QUEUE_ADD,m));return d.length=0,this._toProcess=0,l},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});r.exports=u},68687:(r,g,n)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(53466);function p(E){if(!(this instanceof p))return new p(E);this._maxEntries=Math.max(4,E||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}p.prototype={all:function(){return this._all(this.data,[])},search:function(E){var A=this.data,I=[],R=this.toBBox;if(!C(E,A))return I;for(var N=[],F,P,D,M;A;){for(F=0,P=A.children.length;F<P;F++)D=A.children[F],M=A.leaf?R(D):D,C(E,M)&&(A.leaf?I.push(D):T(E,M)?this._all(D,I):N.push(D));A=N.pop()}return I},collides:function(E){var A=this.data,I=this.toBBox;if(!C(E,A))return!1;for(var R=[],N,F,P,D;A;){for(N=0,F=A.children.length;N<F;N++)if(P=A.children[N],D=A.leaf?I(P):P,C(E,D)){if(A.leaf||T(E,D))return!0;R.push(P)}A=R.pop()}return!1},load:function(E){if(!(E&&E.length))return this;if(E.length<this._minEntries){for(var A=0,I=E.length;A<I;A++)this.insert(E[A]);return this}var R=this._build(E.slice(),0,E.length-1,0);if(!this.data.children.length)this.data=R;else if(this.data.height===R.height)this._splitRoot(this.data,R);else{if(this.data.height<R.height){var N=this.data;this.data=R,R=N}this._insert(R,this.data.height-R.height-1,!0)}return this},insert:function(E){return E&&this._insert(E,this.data.height-1),this},clear:function(){return this.data=w([]),this},remove:function(E,A){if(!E)return this;for(var I=this.data,R=this.toBBox(E),N=[],F=[],P,D,M,L;I||N.length;){if(I||(I=N.pop(),D=N[N.length-1],P=F.pop(),L=!0),I.leaf&&(M=h(E,I.children,A),M!==-1))return I.children.splice(M,1),N.push(I),this._condense(N),this;!L&&!I.leaf&&T(I,R)?(N.push(I),F.push(P),P=0,D=I,I=I.children[0]):D?(P++,I=D.children[P],L=!1):I=null}return this},toBBox:function(E){return E},compareMinX:c,compareMinY:m,toJSON:function(){return this.data},fromJSON:function(E){return this.data=E,this},_all:function(E,A){for(var I=[];E;)E.leaf?A.push.apply(A,E.children):I.push.apply(I,E.children),E=I.pop();return A},_build:function(E,A,I,R){var N=I-A+1,F=this._maxEntries,P;if(N<=F)return P=w(E.slice(A,I+1)),u(P,this.toBBox),P;R||(R=Math.ceil(Math.log(N)/Math.log(F)),F=Math.ceil(N/Math.pow(F,R-1))),P=w([]),P.leaf=!1,P.height=R;var D=Math.ceil(N/F),M=D*Math.ceil(Math.sqrt(F)),L,k,V,W;for(b(E,A,I,M,this.compareMinX),L=A;L<=I;L+=M)for(V=Math.min(L+M-1,I),b(E,L,V,D,this.compareMinY),k=L;k<=V;k+=D)W=Math.min(k+D-1,V),P.children.push(this._build(E,k,W,R-1));return u(P,this.toBBox),P},_chooseSubtree:function(E,A,I,R){for(var N,F,P,D,M,L,k,V;R.push(A),!(A.leaf||R.length-1===I);){for(k=V=1/0,N=0,F=A.children.length;N<F;N++)P=A.children[N],M=f(P),L=S(E,P)-M,L<V?(V=L,k=M<k?M:k,D=P):L===V&&M<k&&(k=M,D=P);A=D||A.children[0]}return A},_insert:function(E,A,I){var R=this.toBBox,N=I?E:R(E),F=[],P=this._chooseSubtree(N,this.data,A,F);for(P.children.push(E),l(P,N);A>=0&&F[A].children.length>this._maxEntries;)this._split(F,A),A--;this._adjustParentBBoxes(N,F,A)},_split:function(E,A){var I=E[A],R=I.children.length,N=this._minEntries;this._chooseSplitAxis(I,N,R);var F=this._chooseSplitIndex(I,N,R),P=w(I.children.splice(F,I.children.length-F));P.height=I.height,P.leaf=I.leaf,u(I,this.toBBox),u(P,this.toBBox),A?E[A-1].children.push(P):this._splitRoot(I,P)},_splitRoot:function(E,A){this.data=w([E,A]),this.data.height=E.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},_chooseSplitIndex:function(E,A,I){var R,N,F,P,D,M,L,k;for(M=L=1/0,R=A;R<=I-A;R++)N=d(E,0,R,this.toBBox),F=d(E,R,I,this.toBBox),P=x(N,F),D=f(N)+f(F),P<M?(M=P,k=R,L=D<L?D:L):P===M&&D<L&&(L=D,k=R);return k},_chooseSplitAxis:function(E,A,I){var R=E.leaf?this.compareMinX:c,N=E.leaf?this.compareMinY:m,F=this._allDistMargin(E,A,I,R),P=this._allDistMargin(E,A,I,N);F<P&&E.children.sort(R)},_allDistMargin:function(E,A,I,R){E.children.sort(R);var N=this.toBBox,F=d(E,0,A,N),P=d(E,I-A,I,N),D=v(F)+v(P),M,L;for(M=A;M<I-A;M++)L=E.children[M],l(F,E.leaf?N(L):L),D+=v(F);for(M=I-A-1;M>=A;M--)L=E.children[M],l(P,E.leaf?N(L):L),D+=v(P);return D},_adjustParentBBoxes:function(E,A,I){for(var R=I;R>=0;R--)l(A[R],E)},_condense:function(E){for(var A=E.length-1,I;A>=0;A--)E[A].children.length===0?A>0?(I=E[A-1].children,I.splice(I.indexOf(E[A]),1)):this.clear():u(E[A],this.toBBox)},compareMinX:function(E,A){return E.left-A.left},compareMinY:function(E,A){return E.top-A.top},toBBox:function(E){return{minX:E.left,minY:E.top,maxX:E.right,maxY:E.bottom}}};function h(E,A,I){if(!I)return A.indexOf(E);for(var R=0;R<A.length;R++)if(I(E,A[R]))return R;return-1}function u(E,A){d(E,0,E.children.length,A,E)}function d(E,A,I,R,N){N||(N=w(null)),N.minX=1/0,N.minY=1/0,N.maxX=-1/0,N.maxY=-1/0;for(var F=A,P;F<I;F++)P=E.children[F],l(N,E.leaf?R(P):P);return N}function l(E,A){return E.minX=Math.min(E.minX,A.minX),E.minY=Math.min(E.minY,A.minY),E.maxX=Math.max(E.maxX,A.maxX),E.maxY=Math.max(E.maxY,A.maxY),E}function c(E,A){return E.minX-A.minX}function m(E,A){return E.minY-A.minY}function f(E){return(E.maxX-E.minX)*(E.maxY-E.minY)}function v(E){return E.maxX-E.minX+(E.maxY-E.minY)}function S(E,A){return(Math.max(A.maxX,E.maxX)-Math.min(A.minX,E.minX))*(Math.max(A.maxY,E.maxY)-Math.min(A.minY,E.minY))}function x(E,A){var I=Math.max(E.minX,A.minX),R=Math.max(E.minY,A.minY),N=Math.min(E.maxX,A.maxX),F=Math.min(E.maxY,A.maxY);return Math.max(0,N-I)*Math.max(0,F-R)}function T(E,A){return E.minX<=A.minX&&E.minY<=A.minY&&A.maxX<=E.maxX&&A.maxY<=E.maxY}function C(E,A){return A.minX<=E.maxX&&A.minY<=E.maxY&&A.maxX>=E.minX&&A.maxY>=E.minY}function w(E){return{children:E,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(E,A,I,R,N){for(var F=[A,I],P;F.length;)I=F.pop(),A=F.pop(),!(I-A<=R)&&(P=A+Math.ceil((I-A)/R/2)*R,a(E,P,A,I,N),F.push(A,P,P,I))}r.exports=p},58403:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u){if(this.entries=[],Array.isArray(u))for(var d=0;d<u.length;d++)this.set(u[d])},set:function(h){return this.entries.indexOf(h)===-1&&this.entries.push(h),this},get:function(h,u){for(var d=0;d<this.entries.length;d++){var l=this.entries[d];if(l[h]===u)return l}},getArray:function(){return this.entries.slice(0)},delete:function(h){var u=this.entries.indexOf(h);return u>-1&&this.entries.splice(u,1),this},dump:function(){console.group("Set");for(var h=0;h<this.entries.length;h++){var u=this.entries[h];console.log(u)}console.groupEnd()},each:function(h,u){var d,l=this.entries.slice(),c=l.length;if(u)for(d=0;d<c&&h.call(u,l[d],d)!==!1;d++);else for(d=0;d<c&&h(l[d],d)!==!1;d++);return this},iterate:function(h,u){var d,l=this.entries.length;if(u)for(d=0;d<l&&h.call(u,this.entries[d],d)!==!1;d++);else for(d=0;d<l&&h(this.entries[d],d)!==!1;d++);return this},iterateLocal:function(h){var u,d=[];for(u=1;u<arguments.length;u++)d.push(arguments[u]);var l=this.entries.length;for(u=0;u<l;u++){var c=this.entries[u];c[h].apply(c,d)}return this},clear:function(){return this.entries.length=0,this},contains:function(h){return this.entries.indexOf(h)>-1},union:function(h){var u=new p;return h.entries.forEach(function(d){u.set(d)}),this.entries.forEach(function(d){u.set(d)}),u},intersect:function(h){var u=new p;return this.entries.forEach(function(d){h.contains(d)&&u.set(d)}),u},difference:function(h){var u=new p;return this.entries.forEach(function(d){h.contains(d)||u.set(d)}),u},size:{get:function(){return this.entries.length},set:function(h){return h<this.entries.length?this.entries.length=h:this.entries.length}}});r.exports=p},90881:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82897),p=n(56694),h=n(84314),u=n(93736),d=new p({initialize:function(c,m,f,v){c===void 0&&(c=0),m===void 0&&(m=c),f===void 0&&(f=0),v===void 0&&(v=null),this._width=c,this._height=m,this._parent=v,this.aspectMode=f,this.aspectRatio=m===0?1:c/m,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new u},setAspectMode:function(l){return l===void 0&&(l=0),this.aspectMode=l,this.setSize(this._width,this._height)},setSnap:function(l,c){return l===void 0&&(l=0),c===void 0&&(c=l),this.snapTo.set(l,c),this.setSize(this._width,this._height)},setParent:function(l){return this._parent=l,this.setSize(this._width,this._height)},setMin:function(l,c){return l===void 0&&(l=0),c===void 0&&(c=l),this.minWidth=a(l,0,this.maxWidth),this.minHeight=a(c,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(l,c){return l===void 0&&(l=Number.MAX_VALUE),c===void 0&&(c=l),this.maxWidth=a(l,this.minWidth,Number.MAX_VALUE),this.maxHeight=a(c,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(l,c){switch(l===void 0&&(l=0),c===void 0&&(c=l),this.aspectMode){case d.NONE:this._width=this.getNewWidth(h(l,this.snapTo.x)),this._height=this.getNewHeight(h(c,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case d.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(h(l,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case d.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(h(c,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case d.FIT:this.constrain(l,c,!0);break;case d.ENVELOP:this.constrain(l,c,!1);break}return this},setAspectRatio:function(l){return this.aspectRatio=l,this.setSize(this._width,this._height)},resize:function(l,c){return this._width=this.getNewWidth(h(l,this.snapTo.x)),this._height=this.getNewHeight(h(c,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(l,c){return c===void 0&&(c=!0),l=a(l,this.minWidth,this.maxWidth),c&&this._parent&&l>this._parent.width&&(l=Math.max(this.minWidth,this._parent.width)),l},getNewHeight:function(l,c){return c===void 0&&(c=!0),l=a(l,this.minHeight,this.maxHeight),c&&this._parent&&l>this._parent.height&&(l=Math.max(this.minHeight,this._parent.height)),l},constrain:function(l,c,m){l===void 0&&(l=0),c===void 0&&(c=l),m===void 0&&(m=!0),l=this.getNewWidth(l),c=this.getNewHeight(c);var f=this.snapTo,v=c===0?1:l/c;return m&&this.aspectRatio>v||!m&&this.aspectRatio<v?(l=h(l,f.x),c=l/this.aspectRatio,f.y>0&&(c=h(c,f.y),l=c*this.aspectRatio)):(m&&this.aspectRatio<v||!m&&this.aspectRatio>v)&&(c=h(c,f.y),l=c*this.aspectRatio,f.x>0&&(l=h(l,f.x),c=l*(1/this.aspectRatio))),this._width=l,this._height=c,this},fitTo:function(l,c){return this.constrain(l,c,!0)},envelop:function(l,c){return this.constrain(l,c,!1)},setWidth:function(l){return this.setSize(l,this._height)},setHeight:function(l){return this.setSize(this._width,l)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(l){l&&l.style&&(l.style.width=this._width+"px",l.style.height=this._height+"px")},copy:function(l){return l.setAspectMode(this.aspectMode),l.aspectRatio=this.aspectRatio,l.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(l){this.setSize(l,this._height)}},height:{get:function(){return this._height},set:function(l){this.setSize(this._width,l)}}});d.NONE=0,d.WIDTH_CONTROLS_HEIGHT=1,d.HEIGHT_CONTROLS_WIDTH=2,d.FIT=3,d.ENVELOP=4,r.exports=d},94160:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="add"},95393:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="remove"},36716:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={PROCESS_QUEUE_ADD:n(94160),PROCESS_QUEUE_REMOVE:n(95393)}},20010:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Events:n(36716),List:n(71207),Map:n(33885),ProcessQueue:n(74623),RTree:n(68687),Set:n(58403),Size:n(90881)}},17487:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(82897),h=n(27119),u=n(86459),d=n(28621),l=n(31673),c=new a({Extends:l,initialize:function(f,v,S,x,T){l.call(this,f,v,S,x,T),this.add("__BASE",0,0,0,x,T),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=x,this.height=T,this.imageData=this.context.getImageData(0,0,x,T),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===u.WEBGL&&this.refresh(),this},draw:function(m,f,v,S){return S===void 0&&(S=!0),this.context.drawImage(v,m,f),S&&this.update(),this},drawFrame:function(m,f,v,S,x){v===void 0&&(v=0),S===void 0&&(S=0),x===void 0&&(x=!0);var T=this.manager.getFrame(m,f);if(T){var C=T.canvasData,w=T.cutWidth,b=T.cutHeight,E=T.source.resolution;this.context.drawImage(T.source.image,C.x,C.y,w,b,v,S,w/E,b/E),x&&this.update()}return this},setPixel:function(m,f,v,S,x,T){T===void 0&&(T=255),m=Math.abs(Math.floor(m)),f=Math.abs(Math.floor(f));var C=this.getIndex(m,f);if(C>-1){var w=this.context.getImageData(m,f,1,1);w.data[0]=v,w.data[1]=S,w.data[2]=x,w.data[3]=T,this.context.putImageData(w,m,f)}return this},putData:function(m,f,v,S,x,T,C){return S===void 0&&(S=0),x===void 0&&(x=0),T===void 0&&(T=m.width),C===void 0&&(C=m.height),this.context.putImageData(m,f,v,S,x,T,C),this},getData:function(m,f,v,S){m=p(Math.floor(m),0,this.width-1),f=p(Math.floor(f),0,this.height-1),v=p(v,1,this.width-m),S=p(S,1,this.height-f);var x=this.context.getImageData(m,f,v,S);return x},getPixel:function(m,f,v){v||(v=new h);var S=this.getIndex(m,f);if(S>-1){var x=this.data,T=x[S+0],C=x[S+1],w=x[S+2],b=x[S+3];v.setTo(T,C,w,b)}return v},getPixels:function(m,f,v,S){m===void 0&&(m=0),f===void 0&&(f=0),v===void 0&&(v=this.width),S===void 0&&(S=v),m=Math.abs(Math.round(m)),f=Math.abs(Math.round(f));for(var x=p(m,0,this.width),T=p(m+v,0,this.width),C=p(f,0,this.height),w=p(f+S,0,this.height),b=new h,E=[],A=C;A<w;A++){for(var I=[],R=x;R<T;R++)b=this.getPixel(R,A,b),I.push({x:R,y:A,color:b.color,alpha:b.alphaGL});E.push(I)}return E},getIndex:function(m,f){return m=Math.abs(Math.round(m)),f=Math.abs(Math.round(f)),m<this.width&&f<this.height?(m+f*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(m,f,v,S,x){return m===void 0&&(m=0),f===void 0&&(f=0),v===void 0&&(v=this.width),S===void 0&&(S=this.height),x===void 0&&(x=!0),this.context.clearRect(m,f,v,S),x&&this.update(),this},setSize:function(m,f){return f===void 0&&(f=m),(m!==this.width||f!==this.height)&&(this.canvas.width=m,this.canvas.height=f,this._source.width=m,this._source.height=f,this._source.isPowerOf2=d(m,f),this.frames.__BASE.setSize(m,f,0,0),this.width=m,this.height=f,this.refresh()),this},destroy:function(){l.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});r.exports=c},845:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(95723),p=n(51052),h=n(61068),u=n(56694),d=n(86459),l=n(82047),c=n(72632),m=n(65641),f=n(37410),v=n(31673),S=n(75512),x=new u({Extends:v,initialize:function(C,w,b,E){b===void 0&&(b=256),E===void 0&&(E=256),this.type="DynamicTexture";var A=C.game.renderer,I=A&&A.type===d.CANVAS,R=I?h.create2D(this,b,E):[this];v.call(this,C,w,R,b,E),this.add("__BASE",0,0,0,b,E),this.renderer=A,this.isDrawing=!1,this.canvas=I?R:null,this.context=I?R.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new p(0,0,b,E).setScene(C.game.scene.systemScene,!1),this.renderTarget=I?null:new f(A,b,E,1,0,!1,!0,!0,!1),this.pipeline=I?null:A.pipelines.get(m.SINGLE_PIPELINE),this.setSize(b,E)},setSize:function(T,C){C===void 0&&(C=T);var w=this.get(),b=w.source;if(T!==this.width||C!==this.height){this.canvas&&(this.canvas.width=T,this.canvas.height=C);var E=this.renderTarget;E&&(E.resize(T,C),w.glTexture=E.texture,b.isRenderTexture=!0,b.isGLTexture=!0,b.glTexture=E.texture,b.glTexture.flipY=!0),this.camera.setSize(T,C),b.width=T,b.height=C,w.setSize(T,C),this.width=T,this.height=C}else{var A=this.getSourceImage();w.cutX+T>A.width&&(T=A.width-w.cutX),w.cutY+C>A.height&&(C=A.height-w.cutY),w.setSize(T,C,w.cutX,w.cutY)}return this},setIsSpriteTexture:function(T){return this.isSpriteTexture=T,this},fill:function(T,C,w,b,E,A){var I=this.camera,R=this.renderer;C===void 0&&(C=1),w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=this.width),A===void 0&&(A=this.height);var N=T>>16&255,F=T>>8&255,P=T&255,D=this.renderTarget;if(I.preRender(),D){D.bind(!0);var M=this.pipeline.manager.set(this.pipeline),L=R.width/D.width,k=R.height/D.height;M.drawFillRect(w*L,b*k,E*L,A*k,S.getTintFromFloats(P/255,F/255,N/255,1),C),D.unbind(!0)}else{var V=this.context;R.setContext(V),V.globalCompositeOperation="source-over",V.fillStyle="rgba("+N+","+F+","+P+","+C+")",V.fillRect(w,b,E,A),R.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.context,C=this.renderTarget;C?C.clear():T&&(T.save(),T.setTransform(1,0,0,1,0,0),T.clearRect(0,0,this.width,this.height),T.restore()),this.dirty=!1}return this},stamp:function(T,C,w,b,E){w===void 0&&(w=0),b===void 0&&(b=0);var A=c(E,"alpha",1),I=c(E,"tint",16777215),R=c(E,"angle",0),N=c(E,"rotation",0),F=c(E,"scale",1),P=c(E,"scaleX",F),D=c(E,"scaleY",F),M=c(E,"originX",.5),L=c(E,"originY",.5),k=c(E,"blendMode",0),V=c(E,"erase",!1),W=c(E,"skipBatch",!1),K=this.manager.resetStamp(A,I);return K.setAngle(0),R!==0?K.setAngle(R):N!==0&&K.setRotation(N),K.setScale(P,D),K.setTexture(T,C),K.setOrigin(M,L),K.setBlendMode(k),V&&(this._eraseMode=!0),W?this.batchGameObject(K,w,b):this.draw(K,w,b),V&&(this._eraseMode=!1),this},erase:function(T,C,w){return this._eraseMode=!0,this.draw(T,C,w),this._eraseMode=!1,this},draw:function(T,C,w,b,E){return this.beginDraw(),this.batchDraw(T,C,w,b,E),this.endDraw(),this},drawFrame:function(T,C,w,b,E,A){return this.beginDraw(),this.batchDrawFrame(T,C,w,b,E,A),this.endDraw(),this},repeat:function(T,C,w,b,E,A,I,R,N){if(w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=this.width),A===void 0&&(A=this.height),I===void 0&&(I=1),R===void 0&&(R=16777215),N===void 0&&(N=!1),T instanceof l?C=T:C=this.manager.getFrame(T,C),!C)return this;var F=this.manager.resetStamp(I,R);F.setFrame(C),F.setOrigin(0);var P=C.width,D=C.height;E=Math.floor(E),A=Math.floor(A);var M=Math.ceil(E/P),L=Math.ceil(A/D),k=M*P-E,V=L*D-A;k>0&&(k=P-k),V>0&&(V=D-V),w<0&&(M+=Math.ceil(Math.abs(w)/P)),b<0&&(L+=Math.ceil(Math.abs(b)/D));var W=w,K=b,B=!1,G=this.manager.stampCrop.setTo(0,0,P,D);N||this.beginDraw();for(var O=0;O<L;O++){if(K+D<0){K+=D;continue}for(var $=0;$<M;$++){if(B=!1,W+P<0){W+=P;continue}else W<0&&(B=!0,G.width=P+W,G.x=P-G.width);K<0&&(B=!0,G.height=D+K,G.y=D-G.height),k>0&&$===M-1&&(B=!0,G.width=k),V>0&&O===L-1&&(B=!0,G.height=V),B&&F.setCrop(G),this.batchGameObject(F,W,K),F.isCropped=!1,G.setTo(0,0,P,D),W+=P}W=w,K+=D}return N||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var T=this.camera,C=this.renderer,w=this.renderTarget;T.preRender(),w?C.beginCapture(w.width,w.height):C.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(T,C,w,b,E){return Array.isArray(T)||(T=[T]),this.batchList(T,C,w,b,E),this},batchDrawFrame:function(T,C,w,b,E,A){w===void 0&&(w=0),b===void 0&&(b=0),E===void 0&&(E=1),A===void 0&&(A=16777215);var I=this.manager.getFrame(T,C);return I&&(this.renderTarget?this.pipeline.batchTextureFrame(I,w,b,A,E,this.camera.matrix,null):this.batchTextureFrame(I,w,b,E,A)),this},endDraw:function(T){if(T===void 0&&(T=this._eraseMode),this.isDrawing){var C=this.renderer,w=this.renderTarget;if(w){var b=C.endCapture(),E=C.pipelines.setUtility();E.blitFrame(b,w,1,!1,!1,T,this.isSpriteTexture),C.resetScissor(),C.resetViewport()}else C.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(T,C,w,b,E){var A=T.length;if(A!==0)for(var I=0;I<A;I++){var R=T[I];!R||R===this||(R.renderWebGL||R.renderCanvas?this.batchGameObject(R,C,w):R.isParent||R.list?this.batchGroup(R.getChildren(),C,w):typeof R=="string"?this.batchTextureFrameKey(R,null,C,w,b,E):R instanceof l?this.batchTextureFrame(R,C,w,b,E):Array.isArray(R)&&this.batchList(R,C,w,b,E))}},batchGroup:function(T,C,w){C===void 0&&(C=0),w===void 0&&(w=0);for(var b=0;b<T.length;b++){var E=T[b];E.willRender(this.camera)&&this.batchGameObject(E,E.x+C,E.y+w)}},batchGameObject:function(T,C,w){C===void 0&&(C=T.x),w===void 0&&(w=T.y);var b=T.x,E=T.y,A=this.camera,I=this.renderer,R=this._eraseMode,N=T.mask;if(T.setPosition(C,w),this.canvas){if(R){var F=T.blendMode;T.blendMode=a.ERASE}N&&N.preRenderCanvas(I,T,A),T.renderCanvas(I,T,A,null),N&&N.postRenderCanvas(I,T,A),R&&(T.blendMode=F)}else I&&(N&&N.preRenderWebGL(I,T,A),R||I.setBlendMode(T.blendMode),T.renderWebGL(I,T,A),N&&N.postRenderWebGL(I,A,this.renderTarget));T.setPosition(b,E)},batchTextureFrameKey:function(T,C,w,b,E,A){var I=this.manager.getFrame(T,C);I&&this.batchTextureFrame(I,w,b,E,A)},batchTextureFrame:function(T,C,w,b,E){C===void 0&&(C=0),w===void 0&&(w=0),b===void 0&&(b=1),E===void 0&&(E=16777215);var A=this.camera.matrix,I=this.renderTarget;if(I)this.pipeline.batchTextureFrame(T,C,w,E,b,A,null);else{var R=this.context,N=T.canvasData,F=T.source.image;R.save(),R.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",R.globalAlpha=b,A.setToContext(R),N.width>0&&N.height>0&&R.drawImage(F,N.x,N.y,N.width,N.height,C,w,N.width,N.height),R.restore()}},snapshotArea:function(T,C,w,b,E,A,I){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,E,!1,T,C,w,b,A,I):this.renderer.snapshotCanvas(this.canvas,E,!1,T,C,w,b,A,I),this},snapshot:function(T,C,w){return this.snapshotArea(0,0,this.width,this.height,T,C,w)},snapshotPixel:function(T,C,w){return this.snapshotArea(T,C,1,1,w,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(T,C,w,b){var E=this.manager.resetStamp();E.setTexture(this),E.setOrigin(0),E.renderWebGL(T,E,w,b)},renderCanvas:function(){},preDestroy:function(){h.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.stamp.destroy(),this.canvas=null,this.context=null,this.renderer=null,this.scene=null}});r.exports=x},82047:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(82897),h=n(98611),u=new a({initialize:function(l,c,m,f,v,S,x){this.texture=l,this.name=c,this.source=l.source[m],this.sourceIndex=m,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(S,x,f,v)},setSize:function(d,l,c,m){c===void 0&&(c=0),m===void 0&&(m=0),this.cutX=c,this.cutY=m,this.cutWidth=d,this.cutHeight=l,this.width=d,this.height=l,this.halfWidth=Math.floor(d*.5),this.halfHeight=Math.floor(l*.5),this.centerX=Math.floor(d/2),this.centerY=Math.floor(l/2);var f=this.data,v=f.cut;v.x=c,v.y=m,v.w=d,v.h=l,v.r=c+d,v.b=m+l,f.sourceSize.w=d,f.sourceSize.h=l,f.spriteSourceSize.w=d,f.spriteSourceSize.h=l,f.radius=.5*Math.sqrt(d*d+l*l);var S=f.drawImage;return S.x=c,S.y=m,S.width=d,S.height=l,this.updateUVs()},setTrim:function(d,l,c,m,f,v){var S=this.data,x=S.spriteSourceSize;return S.trim=!0,S.sourceSize.w=d,S.sourceSize.h=l,x.x=c,x.y=m,x.w=f,x.h=v,x.r=c+f,x.b=m+v,this.x=c,this.y=m,this.width=f,this.height=v,this.halfWidth=f*.5,this.halfHeight=v*.5,this.centerX=Math.floor(f/2),this.centerY=Math.floor(v/2),this.updateUVs()},setCropUVs:function(d,l,c,m,f,v,S){var x=this.cutX,T=this.cutY,C=this.cutWidth,w=this.cutHeight,b=this.realWidth,E=this.realHeight;l=p(l,0,b),c=p(c,0,E),m=p(m,0,b-l),f=p(f,0,E-c);var A=x+l,I=T+c,R=m,N=f,F=this.data;if(F.trim){var P=F.spriteSourceSize;m=p(m,0,C-l),f=p(f,0,w-c);var D=l+m,M=c+f,L=!(P.r<l||P.b<c||P.x>D||P.y>M);if(L){var k=Math.max(P.x,l),V=Math.max(P.y,c),W=Math.min(P.r,D)-k,K=Math.min(P.b,M)-V;R=W,N=K,v?A=x+(C-(k-P.x)-W):A=x+(k-P.x),S?I=T+(w-(V-P.y)-K):I=T+(V-P.y),l=k,c=V,m=W,f=K}else A=0,I=0,R=0,N=0}else v&&(A=x+(C-l-m)),S&&(I=T+(w-c-f));var B=this.source.width,G=this.source.height;return d.u0=Math.max(0,A/B),d.v0=Math.max(0,I/G),d.u1=Math.min(1,(A+R)/B),d.v1=Math.min(1,(I+N)/G),d.x=l,d.y=c,d.cx=A,d.cy=I,d.cw=R,d.ch=N,d.width=m,d.height=f,d.flipX=v,d.flipY=S,d},updateCropUVs:function(d,l,c){return this.setCropUVs(d,d.x,d.y,d.width,d.height,l,c)},setUVs:function(d,l,c,m,f,v){var S=this.data.drawImage;return S.width=d,S.height=l,this.u0=c,this.v0=m,this.u1=f,this.v1=v,this},updateUVs:function(){var d=this.cutX,l=this.cutY,c=this.cutWidth,m=this.cutHeight,f=this.data.drawImage;f.width=c,f.height=m;var v=this.source.width,S=this.source.height;return this.u0=d/v,this.v0=l/S,this.u1=(d+c)/v,this.v1=(l+m)/S,this},updateUVsInverted:function(){var d=this.source.width,l=this.source.height;return this.u0=(this.cutX+this.cutHeight)/d,this.v0=this.cutY/l,this.u1=this.cutX/d,this.v1=(this.cutY+this.cutWidth)/l,this},clone:function(){var d=new u(this.texture,this.name,this.sourceIndex);return d.cutX=this.cutX,d.cutY=this.cutY,d.cutWidth=this.cutWidth,d.cutHeight=this.cutHeight,d.x=this.x,d.y=this.y,d.width=this.width,d.height=this.height,d.halfWidth=this.halfWidth,d.halfHeight=this.halfHeight,d.centerX=this.centerX,d.centerY=this.centerY,d.rotated=this.rotated,d.data=h(!0,d.data,this.data),d.updateUVs(),d},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});r.exports=u},31673:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(82047),h=n(32547),u='Texture "%s" has no frame "%s"',d=new a({initialize:function(c,m,f,v,S){Array.isArray(f)||(f=[f]),this.manager=c,this.key=m,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var x=0;x<f.length;x++)this.source.push(new h(this,f[x],v,S))},add:function(l,c,m,f,v,S){if(this.has(l))return null;var x=new p(this,l,c,m,f,v,S);return this.frames[l]=x,this.firstFrame==="__BASE"&&(this.firstFrame=l),this.frameTotal++,x},remove:function(l){if(this.has(l)){var c=this.get(l);return c.destroy(),delete this.frames[l],!0}return!1},has:function(l){return this.frames.hasOwnProperty(l)},get:function(l){l||(l=this.firstFrame);var c=this.frames[l];return c||(console.warn(u,this.key,l),c=this.frames[this.firstFrame]),c},getTextureSourceIndex:function(l){for(var c=0;c<this.source.length;c++)if(this.source[c]===l)return c;return-1},getFramesFromTextureSource:function(l,c){c===void 0&&(c=!1);var m=[];for(var f in this.frames)if(!(f==="__BASE"&&!c)){var v=this.frames[f];v.sourceIndex===l&&m.push(v)}return m},getFrameNames:function(l){l===void 0&&(l=!1);var c=Object.keys(this.frames);if(!l){var m=c.indexOf("__BASE");m!==-1&&c.splice(m,1)}return c},getSourceImage:function(l){(l==null||this.frameTotal===1)&&(l="__BASE");var c=this.frames[l];return c?c.source.image:(console.warn(u,this.key,l),this.frames.__BASE.source.image)},getDataSourceImage:function(l){(l==null||this.frameTotal===1)&&(l="__BASE");var c=this.frames[l],m;return c?m=c.sourceIndex:(console.warn(u,this.key,l),m=this.frames.__BASE.sourceIndex),this.dataSource[m].image},setDataSource:function(l){Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++){var m=this.source[c];this.dataSource.push(new h(this,l[c],m.width,m.height))}},setFilter:function(l){var c;for(c=0;c<this.source.length;c++)this.source[c].setFilter(l);for(c=0;c<this.dataSource.length;c++)this.dataSource[c].setFilter(l)},destroy:function(){var l,c=this.source,m=this.dataSource;for(l=0;l<c.length;l++)c[l]&&c[l].destroy();for(l=0;l<m.length;l++)m[l]&&m[l].destroy();for(var f in this.frames){var v=this.frames[f];v&&v.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});r.exports=d},6237:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61068),p=n(17487),h=n(56694),u=n(27119),d=n(86459),l=n(845),c=n(6659),m=n(38203),f=n(82047),v=n(97081),S=n(52780),x=n(10850),T=n(1539),C=n(42911),w=n(69150),b=n(74118),E=n(31673),A=new h({Extends:c,initialize:function(R){c.call(this),this.game=R,this.name="TextureManager",this.list={},this._tempCanvas=a.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new b,this.silentWarnings=!1,R.events.once(v.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(m.LOAD,this.updatePending,this),this.on(m.ERROR,this.updatePending,this);var I=this.game.config;this.addBase64("__DEFAULT",I.defaultImage),this.addBase64("__MISSING",I.missingImage),this.addBase64("__WHITE",I.whiteImage),this.game.events.once(v.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(m.LOAD),this.off(m.ERROR),this.emit(m.READY),this.stamp=new T(this.game.scene.systemScene).setOrigin(0))},checkKey:function(I){return this.exists(I)?(this.silentWarnings||console.error("Texture key already in use: "+I),!1):!0},remove:function(I){if(typeof I=="string")if(this.exists(I))I=this.get(I);else return this.silentWarnings||console.warn("No texture found matching key: "+I),this;return this.list.hasOwnProperty(I.key)&&(I.destroy(),this.emit(m.REMOVE,I.key),this.emit(m.REMOVE_KEY+I.key)),this},removeKey:function(I){return this.list.hasOwnProperty(I)&&delete this.list[I],this},addBase64:function(I,R){if(this.checkKey(I)){var N=this,F=new Image;F.onerror=function(){N.emit(m.ERROR,I)},F.onload=function(){var P=N.create(I,F);w.Image(P,0),N.emit(m.ADD,I,P),N.emit(m.ADD_KEY+I,P),N.emit(m.LOAD,I,P)},F.src=R}return this},getBase64:function(I,R,N,F){N===void 0&&(N="image/png"),F===void 0&&(F=.92);var P="",D=this.getFrame(I,R);if(D&&(D.source.isRenderTexture||D.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(D){var M=D.canvasData,L=a.create2D(this,M.width,M.height),k=L.getContext("2d",{willReadFrequently:!0});M.width>0&&M.height>0&&k.drawImage(D.source.image,M.x,M.y,M.width,M.height,0,0,M.width,M.height),P=L.toDataURL(N,F),a.remove(L)}return P},addImage:function(I,R,N){var F=null;return this.checkKey(I)&&(F=this.create(I,R),w.Image(F,0),N&&F.setDataSource(N),this.emit(m.ADD,I,F),this.emit(m.ADD_KEY+I,F)),F},addGLTexture:function(I,R,N,F){var P=null;return this.checkKey(I)&&(N===void 0&&(N=R.width),F===void 0&&(F=R.height),P=this.create(I,R,N,F),P.add("__BASE",0,0,0,N,F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)),P},addCompressedTexture:function(I,R,N){var F=null;if(this.checkKey(I)){if(F=this.create(I,R),F.add("__BASE",0,0,0,R.width,R.height),N)if(Array.isArray(N))for(var P=0;P<N.length;P++)w.JSONHash(F,P,N[P]);else w.JSONHash(F,0,N);this.emit(m.ADD,I,F),this.emit(m.ADD_KEY+I,F)}return F},addRenderTexture:function(I,R){var N=null;return this.checkKey(I)&&(N=this.create(I,R),N.add("__BASE",0,0,0,R.width,R.height),this.emit(m.ADD,I,N),this.emit(m.ADD_KEY+I,N)),N},generate:function(I,R){if(this.checkKey(I)){var N=a.create(this,1,1);return R.canvas=N,S(R),this.addCanvas(I,N)}else return null},createCanvas:function(I,R,N){if(R===void 0&&(R=256),N===void 0&&(N=256),this.checkKey(I)){var F=a.create(this,R,N,d.CANVAS,!0);return this.addCanvas(I,F)}return null},addCanvas:function(I,R,N){N===void 0&&(N=!1);var F=null;return N?F=new p(this,I,R,R.width,R.height):this.checkKey(I)&&(F=new p(this,I,R,R.width,R.height),this.list[I]=F,this.emit(m.ADD,I,F),this.emit(m.ADD_KEY+I,F)),F},addDynamicTexture:function(I,R,N){var F=null;return typeof I=="string"&&!this.exists(I)?F=new l(this,I,R,N):(F=I,I=F.key),this.checkKey(I)?(this.list[I]=F,this.emit(m.ADD,I,F),this.emit(m.ADD_KEY+I,F)):F=null,F},addAtlas:function(I,R,N,F){return Array.isArray(N.textures)||Array.isArray(N.frames)?this.addAtlasJSONArray(I,R,N,F):this.addAtlasJSONHash(I,R,N,F)},addAtlasJSONArray:function(I,R,N,F){var P=null;if(R instanceof E?(I=P.key,P=R):this.checkKey(I)&&(P=this.create(I,R)),P){if(Array.isArray(N))for(var D=N.length===1,M=0;M<P.source.length;M++){var L=D?N[0]:N[M];w.JSONArray(P,M,L)}else w.JSONArray(P,0,N);F&&P.setDataSource(F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)}return P},addAtlasJSONHash:function(I,R,N,F){var P=null;if(R instanceof E?(I=P.key,P=R):this.checkKey(I)&&(P=this.create(I,R)),P){if(Array.isArray(N))for(var D=0;D<N.length;D++)w.JSONHash(P,D,N[D]);else w.JSONHash(P,0,N);F&&P.setDataSource(F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)}return P},addAtlasXML:function(I,R,N,F){var P=null;return R instanceof E?(I=P.key,P=R):this.checkKey(I)&&(P=this.create(I,R)),P&&(w.AtlasXML(P,0,N),F&&P.setDataSource(F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)),P},addUnityAtlas:function(I,R,N,F){var P=null;return R instanceof E?(I=P.key,P=R):this.checkKey(I)&&(P=this.create(I,R)),P&&(w.UnityYAML(P,0,N),F&&P.setDataSource(F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)),P},addSpriteSheet:function(I,R,N,F){var P=null;if(R instanceof E?(I=P.key,P=R):this.checkKey(I)&&(P=this.create(I,R)),P){var D=P.source[0].width,M=P.source[0].height;w.SpriteSheet(P,0,0,0,D,M,N),F&&P.setDataSource(F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)}return P},addSpriteSheetFromAtlas:function(I,R){if(!this.checkKey(I))return null;var N=x(R,"atlas",null),F=x(R,"frame",null);if(!(!N||!F)){var P=this.get(N),D=P.get(F);if(D){var M=this.create(I,D.source.image);return D.trimmed?w.SpriteSheetFromAtlas(M,D,R):w.SpriteSheet(M,0,D.cutX,D.cutY,D.cutWidth,D.cutHeight,R),this.emit(m.ADD,I,M),this.emit(m.ADD_KEY+I,M),M}}},create:function(I,R,N,F){var P=null;return this.checkKey(I)&&(P=new E(this,I,R,N,F),this.list[I]=P),P},exists:function(I){return this.list.hasOwnProperty(I)},get:function(I){return I===void 0&&(I="__DEFAULT"),this.list[I]?this.list[I]:I instanceof E?I:I instanceof f?I.texture:this.list.__MISSING},cloneFrame:function(I,R){if(this.list[I])return this.list[I].get(R).clone()},getFrame:function(I,R){if(this.list[I])return this.list[I].get(R)},parseFrame:function(I){if(I){if(typeof I=="string")return this.getFrame(I);if(Array.isArray(I)&&I.length===2)return this.getFrame(I[0],I[1]);if(C(I))return this.getFrame(I.key,I.frame);if(I instanceof E)return I.get();if(I instanceof f)return I}else return},getTextureKeys:function(){var I=[];for(var R in this.list)R!=="__DEFAULT"&&R!=="__MISSING"&&R!=="__WHITE"&&I.push(R);return I},getPixel:function(I,R,N,F){var P=this.getFrame(N,F);if(P){I-=P.x,R-=P.y;var D=P.data.cut;if(I+=D.x,R+=D.y,I>=D.x&&I<D.r&&R>=D.y&&R<D.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(P.source.image,I,R,1,1,0,0,1,1);var L=M.getImageData(0,0,1,1);return new u(L.data[0],L.data[1],L.data[2],L.data[3])}}return null},getPixelAlpha:function(I,R,N,F){var P=this.getFrame(N,F);if(P){I-=P.x,R-=P.y;var D=P.data.cut;if(I+=D.x,R+=D.y,I>=D.x&&I<D.r&&R>=D.y&&R<D.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(P.source.image,I,R,1,1,0,0,1,1);var L=M.getImageData(0,0,1,1);return L.data[3]}}return null},setTexture:function(I,R,N){return this.list[R]&&(I.texture=this.list[R],I.frame=I.texture.get(N)),I},renameTexture:function(I,R){var N=this.get(I);return N&&I!==R?(N.key=R,this.list[R]=N,delete this.list[I],!0):!1},each:function(I,R){for(var N=[null],F=1;F<arguments.length;F++)N.push(arguments[F]);for(var P in this.list)N[0]=this.list[P],I.apply(R,N)},resetStamp:function(I,R){I===void 0&&(I=1),R===void 0&&(R=16777215);var N=this.stamp;return N.setCrop(),N.setPosition(0),N.setAngle(0),N.setScale(1),N.setAlpha(I),N.setTint(R),N},destroy:function(){for(var I in this.list)this.list[I].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,a.remove(this._tempCanvas)}});r.exports=A},32547:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61068),p=n(56694),h=n(28621),u=n(27394),d=new p({initialize:function(c,m,f,v,S){S===void 0&&(S=!1);var x=c.manager.game;this.renderer=x.renderer,this.texture=c,this.source=m,this.image=m.compressed?null:m,this.compressionAlgorithm=m.compressed?m.format:null,this.resolution=1,this.width=f||m.naturalWidth||m.videoWidth||m.width||0,this.height=v||m.naturalHeight||m.videoHeight||m.height||0,this.scaleMode=u.DEFAULT,this.isCanvas=m instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&m instanceof HTMLVideoElement,this.isRenderTexture=m.type==="RenderTexture"||m.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&m instanceof WebGLTexture,this.isPowerOf2=h(this.width,this.height),this.glTexture=null,this.flipY=S,this.init(x)},init:function(l){var c=this.renderer;if(c){var m=this.source;if(c.gl){var f=this.image,v=this.flipY,S=this.width,x=this.height,T=this.scaleMode;this.isCanvas?this.glTexture=c.createCanvasTexture(f,!1,v):this.isVideo?this.glTexture=c.createVideoTexture(f,!1,v):this.isRenderTexture?this.glTexture=c.createTextureFromSource(null,S,x,T):this.isGLTexture?this.glTexture=m:this.compressionAlgorithm?this.glTexture=c.createTextureFromSource(m):this.glTexture=c.createTextureFromSource(f,S,x,T)}else this.isRenderTexture&&(this.image=m.canvas)}l.config.antialias||this.setFilter(1)},setFilter:function(l){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,l),this.scaleMode=l},setFlipY:function(l){return l===void 0&&(l=!0),this.flipY=l,this},update:function(){var l=this.renderer,c=this.image,m=this.flipY,f=l.gl;f&&this.isCanvas?this.glTexture=l.updateCanvasTexture(c,this.glTexture,m):f&&this.isVideo&&(this.glTexture=l.updateVideoTexture(c,this.glTexture,m))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&a.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});r.exports=d},65154:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={LINEAR:0,NEAREST:1};r.exports=g},49644:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addtexture"},29569:r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="addtexture-"},60079:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="onerror"},72665:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="onload"},93006:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="ready"},69018:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removetexture"},85549:r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="removetexture-"},38203:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ADD:n(49644),ADD_KEY:n(29569),ERROR:n(60079),LOAD:n(72665),READY:n(93006),REMOVE:n(69018),REMOVE_KEY:n(85549)}},87499:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(98611),p=n(65154),h={CanvasTexture:n(17487),DynamicTexture:n(845),Events:n(38203),FilterMode:p,Frame:n(82047),Parsers:n(69150),Texture:n(31673),TextureManager:n(6237),TextureSource:n(32547)};h=a(!1,h,p),r.exports=h},35082:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(!p.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var h=n.source[a];n.add("__BASE",a,0,0,h.width,h.height);for(var u=p.getElementsByTagName("SubTexture"),d,l=0;l<u.length;l++){var c=u[l].attributes,m=c.name.value,f=parseInt(c.x.value,10),v=parseInt(c.y.value,10),S=parseInt(c.width.value,10),x=parseInt(c.height.value,10);if(d=n.add(m,a,f,v,S,x),c.frameX){var T=Math.abs(parseInt(c.frameX.value,10)),C=Math.abs(parseInt(c.frameY.value,10)),w=parseInt(c.frameWidth.value,10),b=parseInt(c.frameHeight.value,10);d.setTrim(S,x,T,C,w,b)}}return n};r.exports=g},83332:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.source[a];return n.add("__BASE",a,0,0,p.width,p.height),n};r.exports=g},21560:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.source[a];return n.add("__BASE",a,0,0,p.width,p.height),n};r.exports=g},64423:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(32742),p=function(h,u,d){if(!d.frames&&!d.textures){console.warn("Invalid Texture Atlas JSON Array");return}var l=h.source[u];h.add("__BASE",u,0,0,l.width,l.height);for(var c=Array.isArray(d.textures)?d.textures[u].frames:d.frames,m,f=0;f<c.length;f++){var v=c[f];if(m=h.add(v.filename,u,v.frame.x,v.frame.y,v.frame.w,v.frame.h),!m){console.warn("Invalid atlas json, frame already exists: "+v.filename);continue}v.trimmed&&m.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(m.rotated=!0,m.updateUVsInverted());var S=v.anchor||v.pivot;S&&(m.customPivot=!0,m.pivotX=S.x,m.pivotY=S.y),m.customData=a(v)}for(var x in d)x!=="frames"&&(Array.isArray(d[x])?h.customData[x]=d[x].slice(0):h.customData[x]=d[x]);return h};r.exports=p},17264:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(32742),p=function(h,u,d){if(!d.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var l=h.source[u];h.add("__BASE",u,0,0,l.width,l.height);var c=d.frames,m;for(var f in c)if(c.hasOwnProperty(f)){var v=c[f];if(m=h.add(f,u,v.frame.x,v.frame.y,v.frame.w,v.frame.h),!m){console.warn("Invalid atlas json, frame already exists: "+f);continue}v.trimmed&&m.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(m.rotated=!0,m.updateUVsInverted());var S=v.anchor||v.pivot;S&&(m.customPivot=!0,m.pivotX=S.x,m.pivotY=S.y),m.customData=a(v)}for(var x in d)x!=="frames"&&(Array.isArray(d[x])?h.customData[x]=d[x].slice(0):h.customData[x]=d[x]);return h};r.exports=p},67409:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a=[171,75,84,88,32,49,49,187,13,10,26,10],p,h=new Uint8Array(n,0,12);for(p=0;p<h.length;p++)if(h[p]!==a[p]){console.warn("KTXParser - Invalid file format");return}var u=Uint32Array.BYTES_PER_ELEMENT,d=new DataView(n,12,13*u),l=d.getUint32(0,!0)===67305985,c=d.getUint32(1*u,l);if(c!==0){console.warn("KTXParser - Only compressed formats supported");return}var m=d.getUint32(4*u,l),f=d.getUint32(6*u,l),v=d.getUint32(7*u,l),S=Math.max(1,d.getUint32(11*u,l)),x=d.getUint32(12*u,l),T=new Array(S),C=12+13*4+x,w=f,b=v;for(p=0;p<S;p++){var E=new Int32Array(n,C,1)[0];C+=4,T[p]={data:new Uint8Array(n,C,E),width:w,height:b},w=Math.max(1,w>>1),b=Math.max(1,b>>1),C+=E}return{mipmaps:T,width:f,height:v,internalFormat:m,compressed:!0,generateMipmap:!1}};r.exports=g},24904:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(I,R,N,F,P,D,M){return M===void 0&&(M=16),Math.floor((I+N)/P)*Math.floor((R+F)/D)*M}function n(I,R){return I=Math.max(I,16),R=Math.max(R,8),I*R/4}function a(I,R){return I=Math.max(I,8),R=Math.max(R,8),I*R/2}function p(I,R){return g(I,R,3,3,4,4,8)}function h(I,R){return g(I,R,3,3,4,4)}function u(I,R){return g(I,R,4,3,5,4)}function d(I,R){return g(I,R,4,4,5,5)}function l(I,R){return g(I,R,5,4,6,5)}function c(I,R){return g(I,R,5,5,6,6)}function m(I,R){return g(I,R,7,4,8,5)}function f(I,R){return g(I,R,7,5,8,6)}function v(I,R){return g(I,R,7,7,8,8)}function S(I,R){return g(I,R,9,4,10,5)}function x(I,R){return g(I,R,9,5,10,6)}function T(I,R){return g(I,R,9,7,10,8)}function C(I,R){return g(I,R,9,9,10,10)}function w(I,R){return g(I,R,11,9,12,10)}function b(I,R){return g(I,R,11,11,12,12)}var E={0:{sizeFunc:n,glFormat:35841},1:{sizeFunc:n,glFormat:35843},2:{sizeFunc:a,glFormat:35840},3:{sizeFunc:a,glFormat:35842},6:{sizeFunc:p,glFormat:36196},7:{sizeFunc:p,glFormat:33776},8:{sizeFunc:h,glFormat:33777},9:{sizeFunc:h,glFormat:33778},11:{sizeFunc:h,glFormat:33779},22:{sizeFunc:p,glFormat:37492},23:{sizeFunc:h,glFormat:37496},24:{sizeFunc:p,glFormat:37494},25:{sizeFunc:p,glFormat:37488},26:{sizeFunc:h,glFormat:37490},27:{sizeFunc:h,glFormat:37808},28:{sizeFunc:u,glFormat:37809},29:{sizeFunc:d,glFormat:37810},30:{sizeFunc:l,glFormat:37811},31:{sizeFunc:c,glFormat:37812},32:{sizeFunc:m,glFormat:37813},33:{sizeFunc:f,glFormat:37814},34:{sizeFunc:v,glFormat:37815},35:{sizeFunc:S,glFormat:37816},36:{sizeFunc:x,glFormat:37817},37:{sizeFunc:T,glFormat:37818},38:{sizeFunc:C,glFormat:37819},39:{sizeFunc:w,glFormat:37820},40:{sizeFunc:b,glFormat:37821}},A=function(I){for(var R=new Uint32Array(I,0,13),N=R[2],F=E[N].glFormat,P=E[N].sizeFunc,D=R[11],M=R[7],L=R[6],k=52+R[12],V=new Uint8Array(I,k),W=new Array(D),K=0,B=M,G=L,O=0;O<D;O++){var $=P(B,G);W[O]={data:new Uint8Array(V.buffer,V.byteOffset+K,$),width:B,height:G},B=Math.max(1,B>>1),G=Math.max(1,G>>1),K+=$}return{mipmaps:W,width:M,height:L,internalFormat:F,compressed:!0,generateMipmap:!1}};r.exports=A},6143:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72632),p=function(h,u,d,l,c,m,f){var v=a(f,"frameWidth",null),S=a(f,"frameHeight",v);if(v===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var x=h.source[u];h.add("__BASE",u,0,0,x.width,x.height);var T=a(f,"startFrame",0),C=a(f,"endFrame",-1),w=a(f,"margin",0),b=a(f,"spacing",0),E=Math.floor((c-w+b)/(v+b)),A=Math.floor((m-w+b)/(S+b)),I=E*A;I===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",h.key),(T>I||T<-I)&&(T=0),T<0&&(T=I+T),(C===-1||C>I||C<T)&&(C=I);for(var R=w,N=w,F=0,P=0,D=0,M=0;M<I;M++){F=0,P=0;var L=R+v,k=N+S;L>c&&(F=L-c),k>m&&(P=k-m),M>=T&&M<=C&&(h.add(D,u,d+R,l+N,v-F,S-P),D++),R+=v+b,R+v>c&&(R=w,N+=S+b)}return h};r.exports=p},20030:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72632),p=function(h,u,d){var l=a(d,"frameWidth",null),c=a(d,"frameHeight",l);if(!l)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var m=h.source[0];h.add("__BASE",0,0,0,m.width,m.height),a(d,"startFrame",0),a(d,"endFrame",-1);for(var f=a(d,"margin",0),v=a(d,"spacing",0),S=u.cutX,x=u.cutY,T=u.cutWidth,C=u.cutHeight,w=u.realWidth,b=u.realHeight,E=Math.floor((w-f+v)/(l+v)),A=Math.floor((b-f+v)/(c+v)),I=u.x,R=l-I,N=l-(w-T-I),F=u.y,P=c-F,D=c-(b-C-F),M,L=f,k=f,V=0,W=0,K=0;K<A;K++){for(var B=K===0,G=K===A-1,O=0;O<E;O++){var $=O===0,z=O===E-1;if(M=h.add(V,W,S+L,x+k,l,c),$||B||z||G){var X=$?I:0,Y=B?F:0,Z=0,J=0;$&&(Z+=l-R),z&&(Z+=l-N),B&&(J+=c-P),G&&(J+=c-D);var tt=l-Z,et=c-J;M.cutWidth=tt,M.cutHeight=et,M.setTrim(l,c,X,Y,tt,et)}L+=v,$?L+=R:z?L+=N:L+=l,V++}L=f,k+=v,B?k+=P:G?k+=D:k+=c}return h};r.exports=p},89187:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=0,n=function(p,h,u,d){var l=g-d.y-d.height;p.add(u,h,d.x,l,d.width,d.height)},a=function(p,h,u){var d=p.source[h];p.add("__BASE",h,0,0,d.width,d.height),g=d.height;for(var l=u.split(`
`),c=/^[ ]*(- )*(\w+)+[: ]+(.*)/,m="",f="",v={x:0,y:0,width:0,height:0},S=0;S<l.length;S++){var x=l[S].match(c);if(x){var T=x[1]==="- ",C=x[2],w=x[3];if(T&&(f!==m&&(n(p,h,f,v),m=f),v={x:0,y:0,width:0,height:0}),C==="name"){f=w;continue}switch(C){case"x":case"y":case"width":case"height":v[C]=parseInt(w,10);break}}}return f!==m&&n(p,h,f,v),p};r.exports=a},69150:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AtlasXML:n(35082),Canvas:n(83332),Image:n(21560),JSONArray:n(64423),JSONHash:n(17264),KTXParser:n(67409),PVRParser:n(24904),SpriteSheet:n(6143),SpriteSheetFromAtlas:n(20030),UnityYAML:n(89187)}},93560:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},97042:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u,d,l,c,m,f,v){(l===void 0||l<=0)&&(l=32),(c===void 0||c<=0)&&(c=32),m===void 0&&(m=0),f===void 0&&(f=0),this.name=u,this.firstgid=d|0,this.imageWidth=l|0,this.imageHeight=c|0,this.imageMargin=m|0,this.imageSpacing=f|0,this.properties=v||{},this.images=[],this.total=0},containsImageIndex:function(h){return h>=this.firstgid&&h<this.firstgid+this.total},addImage:function(h,u){return this.images.push({gid:h,image:u}),this.total++,this}});r.exports=p},46422:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=new a({initialize:function(u){if(this.gids=[],u!==void 0)for(var d=0;d<u.length;++d)for(var l=u[d],c=0;c<l.total;++c)this.gids[l.firstgid+c]=l;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(h){this.gids=h?this._gids:void 0}},getTypeIncludingTile:function(h){if(h.type!==void 0&&h.type!=="")return h.type;if(!(!this.gids||h.gid===void 0)){var u=this.gids[h.gid];if(u){var d=u.getTileData(h.gid);if(d)return d.type}}},setTextureAndFrame:function(h,u,d,l){if(u===null&&this.gids&&l.gid!==void 0){var c=this.gids[l.gid];c&&(u===null&&c.image!==void 0&&(u=c.image.key),d===null&&(d=l.gid-c.firstgid),h.scene.textures.getFrame(u,d)||(u=null,d=null))}h.setTexture(u,d)},setPropertiesFromTiledObject:function(h,u){if(this.gids!==void 0&&u.gid!==void 0){var d=this.gids[u.gid];d!==void 0&&this.setFromJSON(h,d.getTileProperties(u.gid))}this.setFromJSON(h,u.properties)},setFromJSON:function(h,u){if(u){if(Array.isArray(u)){u.forEach(function(l){h.setData(l.name,l.value)});return}for(var d in u)h[d]!==void 0?h[d]=u[d]:h.setData(d,u[d])}}});r.exports=p},15043:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93560),p=n(16586),h=n(90715),u=n(89797),d=function(l,c,m,f,v,S,x,T){m===void 0&&(m=32),f===void 0&&(f=32),v===void 0&&(v=10),S===void 0&&(S=10),T===void 0&&(T=!1);var C=null;if(Array.isArray(x)){var w=c!==void 0?c:"map";C=h(w,a.ARRAY_2D,x,m,f,T)}else if(c!==void 0){var b=l.cache.tilemap.get(c);b?C=h(c,b.format,b.data,m,f,T):console.warn("No map data found for key "+c)}return C===null&&(C=new p({tileWidth:m,tileHeight:f,width:v,height:S})),new u(l,C)};r.exports=d},29633:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(12920),u=n(28699),d=n(66658),l=new a({Mixins:[p.Alpha,p.Flip,p.Visible],initialize:function(m,f,v,S,x,T,C,w){this.layer=m,this.index=f,this.x=v,this.y=S,this.width=x,this.height=T,this.right,this.bottom,this.baseWidth=C!==void 0?C:x,this.baseHeight=w!==void 0?w:T,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(c,m){return!(c<this.pixelX||m<this.pixelY||c>this.right||m>this.bottom)},copy:function(c){return this.index=c.index,this.alpha=c.alpha,this.properties=u(c.properties),this.visible=c.visible,this.setFlip(c.flipX,c.flipY),this.tint=c.tint,this.rotation=c.rotation,this.collideUp=c.collideUp,this.collideDown=c.collideDown,this.collideLeft=c.collideLeft,this.collideRight=c.collideRight,this.collisionCallback=c.collisionCallback,this.collisionCallbackContext=c.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(c){var m=this.tilemapLayer;if(m){var f=m.tileToWorldXY(this.x,this.y,void 0,c);return f.x}return this.x*this.baseWidth},getRight:function(c){var m=this.tilemapLayer;return m?this.getLeft(c)+this.width*m.scaleX:this.getLeft(c)+this.width},getTop:function(c){var m=this.tilemapLayer;if(m){var f=m.tileToWorldXY(this.x,this.y,void 0,c);return f.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(c){var m=this.tilemapLayer;return m?this.getTop(c)+this.height*m.scaleY:this.getTop(c)+this.height},getBounds:function(c,m){return m===void 0&&(m=new d),m.x=this.getLeft(c),m.y=this.getTop(c),m.width=this.getRight(c)-m.x,m.height=this.getBottom(c)-m.y,m},getCenterX:function(c){return(this.getLeft(c)+this.getRight(c))/2},getCenterY:function(c){return(this.getTop(c)+this.getBottom(c))/2},intersects:function(c,m,f,v){return!(f<=this.pixelX||v<=this.pixelY||c>=this.right||m>=this.bottom)},isInteresting:function(c,m){return c&&m?this.canCollide||this.hasInterestingFace:c?this.collides:m?this.hasInterestingFace:!1},resetCollision:function(c){if(c===void 0&&(c=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,c){var m=this.tilemapLayer;m&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(c,m,f,v,S){if(m===void 0&&(m=c),f===void 0&&(f=c),v===void 0&&(v=c),S===void 0&&(S=!0),this.collideLeft=c,this.collideRight=m,this.collideUp=f,this.collideDown=v,this.faceLeft=c,this.faceRight=m,this.faceTop=f,this.faceBottom=v,S){var x=this.tilemapLayer;x&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(c,m){return c===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=c,this.collisionCallbackContext=m),this},setSize:function(c,m,f,v){return c!==void 0&&(this.width=c),m!==void 0&&(this.height=m),f!==void 0&&(this.baseWidth=f),v!==void 0&&(this.baseHeight=v),this.updatePixelXY(),this},updatePixelXY:function(){var c=this.layer.orientation;if(c===h.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(c===h.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(c===h.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(c===h.HEXAGONAL){var m=this.layer.staggerAxis,f=this.layer.staggerIndex,v=this.layer.hexSideLength,S,x;m==="y"?(x=(this.baseHeight-v)/2+v,f==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*x):m==="x"&&(S=(this.baseWidth-v)/2+v,this.pixelX=this.x*S,f==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var c=this.layer.tilemapLayer;if(c){var m=c.gidMap[this.index];if(m)return m}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var c=this.tilemapLayer;return c?c.tilemap:null}}});r.exports=l},89797:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(14556),p=n(56694),h=n(75606),u=n(93560),d=n(72632),l=n(94990),c=n(46422),m=n(12920),f=n(52257),v=n(72677),S=n(13747),x=n(29633),T=n(5047),C=n(87177),w=n(47975),b=new p({initialize:function(A,I){this.scene=A,this.tileWidth=I.tileWidth,this.tileHeight=I.tileHeight,this.width=I.width,this.height=I.height,this.orientation=I.orientation,this.renderOrder=I.renderOrder,this.format=I.format,this.version=I.version,this.properties=I.properties,this.widthInPixels=I.widthInPixels,this.heightInPixels=I.heightInPixels,this.imageCollections=I.imageCollections,this.images=I.images,this.layers=I.layers,this.tiles=I.tiles,this.tilesets=I.tilesets,this.objects=I.objects,this.currentLayerIndex=0,this.hexSideLength=I.hexSideLength;var R=this.orientation;this._convert={WorldToTileXY:T.GetWorldToTileXYFunction(R),WorldToTileX:T.GetWorldToTileXFunction(R),WorldToTileY:T.GetWorldToTileYFunction(R),TileToWorldXY:T.GetTileToWorldXYFunction(R),TileToWorldX:T.GetTileToWorldXFunction(R),TileToWorldY:T.GetTileToWorldYFunction(R),GetTileCorners:T.GetTileCornersFunction(R)}},setRenderOrder:function(E){var A=["right-down","left-down","right-up","left-up"];return typeof E=="number"&&(E=A[E]),A.indexOf(E)>-1&&(this.renderOrder=E),this},addTilesetImage:function(E,A,I,R,N,F,P,D){if(E===void 0)return null;if(A==null&&(A=E),!this.scene.sys.textures.exists(A))return console.warn("Invalid Tileset Image: "+A),null;var M=this.scene.sys.textures.get(A),L=this.getTilesetIndex(E);if(L===null&&this.format===u.TILED_JSON)return console.warn("No data found for Tileset: "+E),null;var k=this.tilesets[L];return k?(k.setTileSize(I,R),k.setSpacing(N,F),k.setImage(M),k):(I===void 0&&(I=this.tileWidth),R===void 0&&(R=this.tileHeight),N===void 0&&(N=0),F===void 0&&(F=0),P===void 0&&(P=0),D===void 0&&(D={x:0,y:0}),k=new w(E,P,I,R,N,F,void 0,void 0,D),k.setImage(M),this.tilesets.push(k),this.tiles=a(this),k)},copy:function(E,A,I,R,N,F,P,D){return D=this.getLayer(D),D!==null?(T.Copy(E,A,I,R,N,F,P,D),this):null},createBlankLayer:function(E,A,I,R,N,F,P,D){I===void 0&&(I=0),R===void 0&&(R=0),N===void 0&&(N=this.width),F===void 0&&(F=this.height),P===void 0&&(P=this.tileWidth),D===void 0&&(D=this.tileHeight);var M=this.getLayerIndex(E);if(M!==null)return console.warn("Invalid Tilemap Layer ID: "+E),null;for(var L=new l({name:E,tileWidth:P,tileHeight:D,width:N,height:F,orientation:this.orientation}),k,V=0;V<F;V++){k=[];for(var W=0;W<N;W++)k.push(new x(L,-1,W,V,P,D,this.tileWidth,this.tileHeight));L.data.push(k)}this.layers.push(L),this.currentLayerIndex=this.layers.length-1;var K=new C(this.scene,this,this.currentLayerIndex,A,I,R);return K.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(K),K},createLayer:function(E,A,I,R){var N=this.getLayerIndex(E);if(N===null)return console.warn("Invalid Tilemap Layer ID: "+E),typeof E=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var F=this.layers[N];if(F.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+E),null;this.currentLayerIndex=N,I===void 0&&(I=F.x),R===void 0&&(R=F.y);var P=new C(this.scene,this,N,A,I,R);return P.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(P),P},createFromObjects:function(E,A,I){I===void 0&&(I=!0);var R=[],N=this.getObjectLayer(E);if(!N)return console.warn("createFromObjects: Invalid objectLayerName given: "+E),R;var F=new c(I?this.tilesets:void 0);Array.isArray(A)||(A=[A]);for(var P=N.objects,D=0;D<A.length;D++){var M=A[D],L=d(M,"id",null),k=d(M,"gid",null),V=d(M,"name",null),W=d(M,"type",null);F.enabled=!d(M,"ignoreTileset",null);for(var K,B=[],G=0;G<P.length;G++)K=P[G],(L===null&&k===null&&V===null&&W===null||L!==null&&K.id===L||k!==null&&K.gid===k||V!==null&&K.name===V||W!==null&&F.getTypeIncludingTile(K)===W)&&B.push(K);for(var O=d(M,"classType",S),$=d(M,"scene",this.scene),z=d(M,"container",null),X=d(M,"key",null),Y=d(M,"frame",null),Z=0;Z<B.length;Z++){K=B[Z];var J=new O($);if(J.setName(K.name),J.setPosition(K.x,K.y),F.setTextureAndFrame(J,X,Y,K),K.width&&(J.displayWidth=K.width),K.height&&(J.displayHeight=K.height),this.orientation===m.ISOMETRIC){var tt=this.tileWidth/this.tileHeight,et={x:J.x-J.y,y:(J.x+J.y)/tt};J.x=et.x,J.y=et.y}var lt={x:J.originX*K.width,y:(J.originY-(K.gid?1:0))*K.height};if(K.rotation){var ut=h(K.rotation);f(lt,ut),J.rotation=ut}J.x+=lt.x,J.y+=lt.y,(K.flippedHorizontal!==void 0||K.flippedVertical!==void 0)&&J.setFlip(K.flippedHorizontal,K.flippedVertical),K.visible||(J.visible=!1),F.setPropertiesFromTiledObject(J,K),z?z.add(J):$.add.existing(J),R.push(J)}}return R},createFromTiles:function(E,A,I,R,N,F){return F=this.getLayer(F),F===null?null:T.CreateFromTiles(E,A,I,R,N,F)},fill:function(E,A,I,R,N,F,P){return F===void 0&&(F=!0),P=this.getLayer(P),P===null?null:(T.Fill(E,A,I,R,N,F,P),this)},filterObjects:function(E,A,I){if(typeof E=="string"){var R=E;if(E=this.getObjectLayer(E),!E)return console.warn("No object layer found with the name: "+R),null}return E.objects.filter(A,I)},filterTiles:function(E,A,I,R,N,F,P,D){return D=this.getLayer(D),D===null?null:T.FilterTiles(E,A,I,R,N,F,P,D)},findByIndex:function(E,A,I,R){return R=this.getLayer(R),R===null?null:T.FindByIndex(E,A,I,R)},findObject:function(E,A,I){if(typeof E=="string"){var R=E;if(E=this.getObjectLayer(E),!E)return console.warn("No object layer found with the name: "+R),null}return E.objects.find(A,I)||null},findTile:function(E,A,I,R,N,F,P,D){return D=this.getLayer(D),D===null?null:T.FindTile(E,A,I,R,N,F,P,D)},forEachTile:function(E,A,I,R,N,F,P,D){return D=this.getLayer(D),D===null?null:(T.ForEachTile(E,A,I,R,N,F,P,D),this)},getImageIndex:function(E){return this.getIndex(this.images,E)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(E){return E.name})},getIndex:function(E,A){for(var I=0;I<E.length;I++)if(E[I].name===A)return I;return null},getLayer:function(E){var A=this.getLayerIndex(E);return A!==null?this.layers[A]:null},getObjectLayer:function(E){var A=this.getIndex(this.objects,E);return A!==null?this.objects[A]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(E){return E.name})},getLayerIndex:function(E){return E===void 0?this.currentLayerIndex:typeof E=="string"?this.getLayerIndexByName(E):typeof E=="number"&&E<this.layers.length?E:E instanceof C&&E.tilemap===this?E.layerIndex:null},getLayerIndexByName:function(E){return this.getIndex(this.layers,E)},getTileAt:function(E,A,I,R){return R=this.getLayer(R),R===null?null:T.GetTileAt(E,A,I,R)},getTileAtWorldXY:function(E,A,I,R,N){return N=this.getLayer(N),N===null?null:T.GetTileAtWorldXY(E,A,I,R,N)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(E){return E.name})},getTilesWithin:function(E,A,I,R,N,F){return F=this.getLayer(F),F===null?null:T.GetTilesWithin(E,A,I,R,N,F)},getTilesWithinShape:function(E,A,I,R){return R=this.getLayer(R),R===null?null:T.GetTilesWithinShape(E,A,I,R)},getTilesWithinWorldXY:function(E,A,I,R,N,F,P){return P=this.getLayer(P),P===null?null:T.GetTilesWithinWorldXY(E,A,I,R,N,F,P)},getTileset:function(E){var A=this.getIndex(this.tilesets,E);return A!==null?this.tilesets[A]:null},getTilesetIndex:function(E){return this.getIndex(this.tilesets,E)},hasTileAt:function(E,A,I){return I=this.getLayer(I),I===null?null:T.HasTileAt(E,A,I)},hasTileAtWorldXY:function(E,A,I,R){return R=this.getLayer(R),R===null?null:T.HasTileAtWorldXY(E,A,I,R)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(E){this.setLayer(E)}},putTileAt:function(E,A,I,R,N){return R===void 0&&(R=!0),N=this.getLayer(N),N===null?null:T.PutTileAt(E,A,I,R,N)},putTileAtWorldXY:function(E,A,I,R,N,F){return R===void 0&&(R=!0),F=this.getLayer(F),F===null?null:T.PutTileAtWorldXY(E,A,I,R,N,F)},putTilesAt:function(E,A,I,R,N){return R===void 0&&(R=!0),N=this.getLayer(N),N===null?null:(T.PutTilesAt(E,A,I,R,N),this)},randomize:function(E,A,I,R,N,F){return F=this.getLayer(F),F===null?null:(T.Randomize(E,A,I,R,N,F),this)},calculateFacesAt:function(E,A,I){return I=this.getLayer(I),I===null?null:(T.CalculateFacesAt(E,A,I),this)},calculateFacesWithin:function(E,A,I,R,N){return N=this.getLayer(N),N===null?null:(T.CalculateFacesWithin(E,A,I,R,N),this)},removeLayer:function(E){var A=this.getLayerIndex(E);if(A!==null){v(this.layers,A);for(var I=A;I<this.layers.length;I++)this.layers[I].tilemapLayer&&this.layers[I].tilemapLayer.layerIndex--;return this.currentLayerIndex===A&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(E){var A=this.getLayerIndex(E);return A!==null?(E=this.layers[A],E.tilemapLayer.destroy(),v(this.layers,A),this.currentLayerIndex===A&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var E=this.layers,A=0;A<E.length;A++)E[A].tilemapLayer&&E[A].tilemapLayer.destroy(!1);return E.length=0,this.currentLayerIndex=0,this},removeTile:function(E,A,I){A===void 0&&(A=-1),I===void 0&&(I=!0);var R=[];Array.isArray(E)||(E=[E]);for(var N=0;N<E.length;N++){var F=E[N];R.push(this.removeTileAt(F.x,F.y,!0,I,F.tilemapLayer)),A>-1&&this.putTileAt(A,F.x,F.y,I,F.tilemapLayer)}return R},removeTileAt:function(E,A,I,R,N){return I===void 0&&(I=!0),R===void 0&&(R=!0),N=this.getLayer(N),N===null?null:T.RemoveTileAt(E,A,I,R,N)},removeTileAtWorldXY:function(E,A,I,R,N,F){return I===void 0&&(I=!0),R===void 0&&(R=!0),F=this.getLayer(F),F===null?null:T.RemoveTileAtWorldXY(E,A,I,R,N,F)},renderDebug:function(E,A,I){return I=this.getLayer(I),I===null?null:(this.orientation===m.ORTHOGONAL&&T.RenderDebug(E,A,I),this)},renderDebugFull:function(E,A){for(var I=this.layers,R=0;R<I.length;R++)T.RenderDebug(E,A,I[R]);return this},replaceByIndex:function(E,A,I,R,N,F,P){return P=this.getLayer(P),P===null?null:(T.ReplaceByIndex(E,A,I,R,N,F,P),this)},setCollision:function(E,A,I,R,N){return A===void 0&&(A=!0),I===void 0&&(I=!0),N===void 0&&(N=!0),R=this.getLayer(R),R===null?null:(T.SetCollision(E,A,I,R,N),this)},setCollisionBetween:function(E,A,I,R,N){return I===void 0&&(I=!0),R===void 0&&(R=!0),N=this.getLayer(N),N===null?null:(T.SetCollisionBetween(E,A,I,R,N),this)},setCollisionByProperty:function(E,A,I,R){return A===void 0&&(A=!0),I===void 0&&(I=!0),R=this.getLayer(R),R===null?null:(T.SetCollisionByProperty(E,A,I,R),this)},setCollisionByExclusion:function(E,A,I,R){return A===void 0&&(A=!0),I===void 0&&(I=!0),R=this.getLayer(R),R===null?null:(T.SetCollisionByExclusion(E,A,I,R),this)},setCollisionFromCollisionGroup:function(E,A,I){return E===void 0&&(E=!0),A===void 0&&(A=!0),I=this.getLayer(I),I===null?null:(T.SetCollisionFromCollisionGroup(E,A,I),this)},setTileIndexCallback:function(E,A,I,R){return R=this.getLayer(R),R===null?null:(T.SetTileIndexCallback(E,A,I,R),this)},setTileLocationCallback:function(E,A,I,R,N,F,P){return P=this.getLayer(P),P===null?null:(T.SetTileLocationCallback(E,A,I,R,N,F,P),this)},setLayer:function(E){var A=this.getLayerIndex(E);return A!==null&&(this.currentLayerIndex=A),this},setBaseTileSize:function(E,A){this.tileWidth=E,this.tileHeight=A,this.widthInPixels=this.width*E,this.heightInPixels=this.height*A;for(var I=0;I<this.layers.length;I++){this.layers[I].baseTileWidth=E,this.layers[I].baseTileHeight=A;for(var R=this.layers[I].data,N=this.layers[I].width,F=this.layers[I].height,P=0;P<F;P++)for(var D=0;D<N;D++){var M=R[P][D];M!==null&&M.setSize(void 0,void 0,E,A)}}return this},setLayerTileSize:function(E,A,I){if(I=this.getLayer(I),I===null)return this;I.tileWidth=E,I.tileHeight=A;for(var R=I.data,N=I.width,F=I.height,P=0;P<F;P++)for(var D=0;D<N;D++){var M=R[P][D];M!==null&&M.setSize(E,A)}return this},shuffle:function(E,A,I,R,N){return N=this.getLayer(N),N===null?null:(T.Shuffle(E,A,I,R,N),this)},swapByIndex:function(E,A,I,R,N,F,P){return P=this.getLayer(P),P===null?null:(T.SwapByIndex(E,A,I,R,N,F,P),this)},tileToWorldX:function(E,A,I){return I=this.getLayer(I),I===null?null:this._convert.TileToWorldX(E,A,I)},tileToWorldY:function(E,A,I){return I=this.getLayer(I),I===null?null:this._convert.TileToWorldY(E,A,I)},tileToWorldXY:function(E,A,I,R,N){return N=this.getLayer(N),N===null?null:this._convert.TileToWorldXY(E,A,I,R,N)},getTileCorners:function(E,A,I,R){return R=this.getLayer(R),R===null?null:this._convert.GetTileCorners(E,A,I,R)},weightedRandomize:function(E,A,I,R,N,F){return F=this.getLayer(F),F===null?null:(T.WeightedRandomize(A,I,R,N,E,F),this)},worldToTileX:function(E,A,I,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileX(E,A,I,R)},worldToTileY:function(E,A,I,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileY(E,A,I,R)},worldToTileXY:function(E,A,I,R,N,F){return F=this.getLayer(F),F===null?null:this._convert.WorldToTileXY(E,A,I,R,N,F)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});r.exports=b},4843:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(99325),p=n(15043);a.register("tilemap",function(h){var u=h!==void 0?h:{};return p(this.scene,u.key,u.tileWidth,u.tileHeight,u.width,u.height,u.data,u.insertNull)})},37940:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(61286),p=n(15043);a.register("tilemap",function(h,u,d,l,c,m,f){return h===null&&(h=void 0),u===null&&(u=void 0),d===null&&(d=void 0),l===null&&(l=void 0),c===null&&(c=void 0),p(this.scene,h,u,d,l,c,m,f)})},87177:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(64937),h=n(89980),u=n(5047),d=n(96193),l=n(93736),c=new a({Extends:h,Mixins:[p.Alpha,p.BlendMode,p.ComputedSize,p.Depth,p.Flip,p.GetBounds,p.Mask,p.Origin,p.Pipeline,p.PostPipeline,p.Transform,p.Visible,p.ScrollFactor,d],initialize:function(f,v,S,x,T,C){h.call(this,f,"TilemapLayer"),this.isTilemap=!0,this.tilemap=v,this.layerIndex=S,this.layer=v.layers[S],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=u.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new l,this.setTilesets(x),this.setAlpha(this.layer.alpha),this.setPosition(T,C),this.setOrigin(0,0),this.setSize(v.tileWidth*this.layer.width,v.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(m){var f=[],v=[],S=this.tilemap;Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++){var T=m[x];if(typeof T=="string"&&(T=S.getTileset(T)),T){v.push(T);for(var C=T.firstgid,w=0;w<T.total;w++)f[C+w]=T}}this.gidMap=f,this.tileset=v},setRenderOrder:function(m){var f=["right-down","left-down","right-up","left-up"];return typeof m=="string"&&(m=f.indexOf(m)),m>=0&&m<4&&(this._renderOrder=m),this},calculateFacesAt:function(m,f){return u.CalculateFacesAt(m,f,this.layer),this},calculateFacesWithin:function(m,f,v,S){return u.CalculateFacesWithin(m,f,v,S,this.layer),this},createFromTiles:function(m,f,v,S,x){return u.CreateFromTiles(m,f,v,S,x,this.layer)},cull:function(m){return this.cullCallback(this.layer,m,this.culledTiles,this._renderOrder)},copy:function(m,f,v,S,x,T,C){return u.Copy(m,f,v,S,x,T,C,this.layer),this},fill:function(m,f,v,S,x,T){return u.Fill(m,f,v,S,x,T,this.layer),this},filterTiles:function(m,f,v,S,x,T,C){return u.FilterTiles(m,f,v,S,x,T,C,this.layer)},findByIndex:function(m,f,v){return u.FindByIndex(m,f,v,this.layer)},findTile:function(m,f,v,S,x,T,C){return u.FindTile(m,f,v,S,x,T,C,this.layer)},forEachTile:function(m,f,v,S,x,T,C){return u.ForEachTile(m,f,v,S,x,T,C,this.layer),this},setTint:function(m,f,v,S,x,T){m===void 0&&(m=16777215);var C=function(w){w.tint=m};return this.forEachTile(C,this,f,v,S,x,T)},getTileAt:function(m,f,v){return u.GetTileAt(m,f,v,this.layer)},getTileAtWorldXY:function(m,f,v,S){return u.GetTileAtWorldXY(m,f,v,S,this.layer)},getIsoTileAtWorldXY:function(m,f,v,S,x){v===void 0&&(v=!0);var T=this.tempVec;return u.IsometricWorldToTileXY(m,f,!0,T,x,this.layer,v),this.getTileAt(T.x,T.y,S)},getTilesWithin:function(m,f,v,S,x){return u.GetTilesWithin(m,f,v,S,x,this.layer)},getTilesWithinShape:function(m,f,v){return u.GetTilesWithinShape(m,f,v,this.layer)},getTilesWithinWorldXY:function(m,f,v,S,x,T){return u.GetTilesWithinWorldXY(m,f,v,S,x,T,this.layer)},hasTileAt:function(m,f){return u.HasTileAt(m,f,this.layer)},hasTileAtWorldXY:function(m,f,v){return u.HasTileAtWorldXY(m,f,v,this.layer)},putTileAt:function(m,f,v,S){return u.PutTileAt(m,f,v,S,this.layer)},putTileAtWorldXY:function(m,f,v,S,x){return u.PutTileAtWorldXY(m,f,v,S,x,this.layer)},putTilesAt:function(m,f,v,S){return u.PutTilesAt(m,f,v,S,this.layer),this},randomize:function(m,f,v,S,x){return u.Randomize(m,f,v,S,x,this.layer),this},removeTileAt:function(m,f,v,S){return u.RemoveTileAt(m,f,v,S,this.layer)},removeTileAtWorldXY:function(m,f,v,S,x){return u.RemoveTileAtWorldXY(m,f,v,S,x,this.layer)},renderDebug:function(m,f){return u.RenderDebug(m,f,this.layer),this},replaceByIndex:function(m,f,v,S,x,T){return u.ReplaceByIndex(m,f,v,S,x,T,this.layer),this},setSkipCull:function(m){return m===void 0&&(m=!0),this.skipCull=m,this},setCullPadding:function(m,f){return m===void 0&&(m=1),f===void 0&&(f=1),this.cullPaddingX=m,this.cullPaddingY=f,this},setCollision:function(m,f,v,S){return u.SetCollision(m,f,v,this.layer,S),this},setCollisionBetween:function(m,f,v,S){return u.SetCollisionBetween(m,f,v,S,this.layer),this},setCollisionByProperty:function(m,f,v){return u.SetCollisionByProperty(m,f,v,this.layer),this},setCollisionByExclusion:function(m,f,v){return u.SetCollisionByExclusion(m,f,v,this.layer),this},setCollisionFromCollisionGroup:function(m,f){return u.SetCollisionFromCollisionGroup(m,f,this.layer),this},setTileIndexCallback:function(m,f,v){return u.SetTileIndexCallback(m,f,v,this.layer),this},setTileLocationCallback:function(m,f,v,S,x,T){return u.SetTileLocationCallback(m,f,v,S,x,T,this.layer),this},shuffle:function(m,f,v,S){return u.Shuffle(m,f,v,S,this.layer),this},swapByIndex:function(m,f,v,S,x,T){return u.SwapByIndex(m,f,v,S,x,T,this.layer),this},tileToWorldX:function(m,f){return this.tilemap.tileToWorldX(m,f,this)},tileToWorldY:function(m,f){return this.tilemap.tileToWorldY(m,f,this)},tileToWorldXY:function(m,f,v,S){return this.tilemap.tileToWorldXY(m,f,v,S,this)},getTileCorners:function(m,f,v){return this.tilemap.getTileCorners(m,f,v,this)},weightedRandomize:function(m,f,v,S,x){return u.WeightedRandomize(f,v,S,x,m,this.layer),this},worldToTileX:function(m,f,v){return this.tilemap.worldToTileX(m,f,v,this)},worldToTileY:function(m,f,v){return this.tilemap.worldToTileY(m,f,v,this)},worldToTileXY:function(m,f,v,S,x){return this.tilemap.worldToTileXY(m,f,v,S,x,this)},destroy:function(m){m===void 0&&(m=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),m&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],h.prototype.destroy.call(this))}});r.exports=c},17394:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(69360),p=new a,h=new a,u=new a,d=function(l,c,m,f){var v=c.cull(m),S=v.length,x=m.alpha*c.alpha;if(!(S===0||x<=0)){var T=p,C=h,w=u;C.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY),T.copyFrom(m.matrix);var b=l.currentContext,E=c.gidMap;b.save(),f?(T.multiplyWithOffset(f,-m.scrollX*c.scrollFactorX,-m.scrollY*c.scrollFactorY),C.e=c.x,C.f=c.y,T.multiply(C,w),w.copyToContext(b)):(C.e-=m.scrollX*c.scrollFactorX,C.f-=m.scrollY*c.scrollFactorY,C.copyToContext(b)),(!l.antialias||c.scaleX>1||c.scaleY>1)&&(b.imageSmoothingEnabled=!1);for(var A=0;A<S;A++){var I=v[A],R=E[I.index];if(R){var N=R.image.getSourceImage(),F=R.getTileTextureCoordinates(I.index),P=R.tileWidth,D=R.tileHeight;if(!(F===null||P===0||D===0)){var M=P*.5,L=D*.5;F.x+=R.tileOffset.x,F.y+=R.tileOffset.y,b.save(),b.translate(I.pixelX+M,I.pixelY+L),I.rotation!==0&&b.rotate(I.rotation),(I.flipX||I.flipY)&&b.scale(I.flipX?-1:1,I.flipY?-1:1),b.globalAlpha=x*I.alpha,b.drawImage(N,F.x,F.y,P,D,-M,-L,P,D),b.restore()}}}b.restore()}};r.exports=d},96193:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72283),p=a,h=a;p=n(51395),h=n(17394),r.exports={renderWebGL:p,renderCanvas:h}},51395:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(75512),p=function(h,u,d){var l=u.cull(d),c=l.length,m=d.alpha*u.alpha;if(!(c===0||m<=0)){var f=u.gidMap,v=h.pipelines.set(u.pipeline,u),S=a.getTintAppendFloatAlpha,x=u.scrollFactorX,T=u.scrollFactorY,C=u.x,w=u.y,b=u.scaleX,E=u.scaleY;h.pipelines.preBatch(u);for(var A=0;A<c;A++){var I=l[A],R=f[I.index];if(R){var N=R.getTileTextureCoordinates(I.index);if(N!==null){var F=R.glTexture,P=v.setTexture2D(F,u),D=R.tileWidth,M=R.tileHeight,L=N.x,k=N.y,V=R.tileWidth*.5,W=R.tileHeight*.5,K=R.tileOffset.x,B=R.tileOffset.y,G=S(I.tint,m*I.alpha);v.batchTexture(u,F,F.width,F.height,C+I.pixelX*b+(V*b-K),w+I.pixelY*E+(W*E-B),I.width,I.height,b,E,I.rotation,I.flipX,I.flipY,x,T,V,W,L,k,D,M,G,G,G,G,!1,0,0,d,null,!0,P)}}}h.pipelines.postBatch(u)}};r.exports=p},47975:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(93736),h=new a({initialize:function(d,l,c,m,f,v,S,x,T){(c===void 0||c<=0)&&(c=32),(m===void 0||m<=0)&&(m=32),f===void 0&&(f=0),v===void 0&&(v=0),S===void 0&&(S={}),x===void 0&&(x={}),this.name=d,this.firstgid=l,this.tileWidth=c,this.tileHeight=m,this.tileMargin=f,this.tileSpacing=v,this.tileProperties=S,this.tileData=x,this.tileOffset=new p,T!==void 0&&this.tileOffset.set(T.x,T.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(u){return this.containsTileIndex(u)?this.tileProperties[u-this.firstgid]:null},getTileData:function(u){return this.containsTileIndex(u)?this.tileData[u-this.firstgid]:null},getTileCollisionGroup:function(u){var d=this.getTileData(u);return d&&d.objectgroup?d.objectgroup:null},containsTileIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},getTileTextureCoordinates:function(u){return this.containsTileIndex(u)?this.texCoordinates[u-this.firstgid]:null},setImage:function(u){return this.image=u,this.glTexture=u.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(u,d){return u!==void 0&&(this.tileWidth=u),d!==void 0&&(this.tileHeight=d),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(u,d){return u!==void 0&&(this.tileMargin=u),d!==void 0&&(this.tileSpacing=d),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(u,d){var l=(d-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),c=(u-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(l%1!==0||c%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),l=Math.floor(l),c=Math.floor(c),this.rows=l,this.columns=c,this.total=l*c,this.texCoordinates.length=0;for(var m=this.tileMargin,f=this.tileMargin,v=0;v<this.rows;v++){for(var S=0;S<this.columns;S++)this.texCoordinates.push({x:m,y:f}),m+=this.tileWidth+this.tileSpacing;m=this.tileMargin,f+=this.tileHeight+this.tileSpacing}return this}});r.exports=h},92839:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15494),p=function(h,u,d){var l=a(h,u,!0,d),c=a(h,u-1,!0,d),m=a(h,u+1,!0,d),f=a(h-1,u,!0,d),v=a(h+1,u,!0,d),S=l&&l.collides;return S&&(l.faceTop=!0,l.faceBottom=!0,l.faceLeft=!0,l.faceRight=!0),c&&c.collides&&(S&&(l.faceTop=!1),c.faceBottom=!S),m&&m.collides&&(S&&(l.faceBottom=!1),m.faceTop=!S),f&&f.collides&&(S&&(l.faceLeft=!1),f.faceRight=!S),v&&v.collides&&(S&&(l.faceRight=!1),v.faceLeft=!S),l&&!l.collides&&l.resetFaces(),l};r.exports=p},60386:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15494),p=n(50811),h=function(u,d,l,c,m){for(var f=null,v=null,S=null,x=null,T=p(u,d,l,c,null,m),C=0;C<T.length;C++){var w=T[C];w&&(w.collides?(f=a(w.x,w.y-1,!0,m),v=a(w.x,w.y+1,!0,m),S=a(w.x-1,w.y,!0,m),x=a(w.x+1,w.y,!0,m),w.faceTop=!(f&&f.collides),w.faceBottom=!(v&&v.collides),w.faceLeft=!(S&&S.collides),w.faceRight=!(x&&x.collides)):w.resetFaces())}};r.exports=h},13125:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=new a,h=function(u,d,l,c){var m=l.tilemapLayer,f=m.cullPaddingX,v=m.cullPaddingY,S=m.tilemap.tileToWorldXY(u,d,p,c,m);return S.x>c.worldView.x+m.scaleX*l.tileWidth*(-f-.5)&&S.x<c.worldView.right+m.scaleX*l.tileWidth*(f-.5)&&S.y>c.worldView.y+m.scaleY*l.tileHeight*(-v-1)&&S.y<c.worldView.bottom+m.scaleY*l.tileHeight*(v-.5)};r.exports=h},17347:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(60386),p=n(50811),h=n(62839),u=n(29633),d=function(l,c,m,f,v,S,x,T){x===void 0&&(x=!0);var C=p(l,c,m,f,null,T),w=[];C.forEach(function(F){var P=new u(F.layer,F.index,F.x,F.y,F.width,F.height,F.baseWidth,F.baseHeight);P.copy(F),w.push(P)});for(var b=v-l,E=S-c,A=0;A<w.length;A++){var I=w[A],R=I.x+b,N=I.y+E;h(R,N,T)&&T.data[N][R]&&(I.x=R,I.y=N,I.updatePixelXY(),T.data[N][R]=I)}x&&a(v-1,S-1,m+2,f+2,T),C.length=0,w.length=0};r.exports=d},93604:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=n(51202),h=function(u,d,l,c,m,f){l||(l={}),Array.isArray(u)||(u=[u]);var v=f.tilemapLayer;c||(c=v.scene),m||(m=c.cameras.main);var S=a(0,0,f.width,f.height,null,f),x=[],T;for(T=0;T<S.length;T++){var C=S[T];if(u.indexOf(C.index)!==-1){var w=v.tileToWorldXY(C.x,C.y,void 0,m,f);l.x=w.x,l.y=w.y,x.push(c.make.sprite(l))}}if(typeof d=="number")for(T=0;T<u.length;T++)p(u[T],d,0,0,f.width,f.height,f);else if(Array.isArray(d))for(T=0;T<u.length;T++)p(u[T],d[T],0,0,f.width,f.height,f);return x};r.exports=h},71586:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(74118),p=n(82127),h=n(84314),u=new a,d=function(l,c){var m=l.tilemapLayer.tilemap,f=l.tilemapLayer,v=Math.floor(m.tileWidth*f.scaleX),S=Math.floor(m.tileHeight*f.scaleY),x=h(c.worldView.x-f.x,v,0,!0)-f.cullPaddingX,T=p(c.worldView.right-f.x,v,0,!0)+f.cullPaddingX,C=h(c.worldView.y-f.y,S,0,!0)-f.cullPaddingY,w=p(c.worldView.bottom-f.y,S,0,!0)+f.cullPaddingY;return u.setTo(x,C,T-x,w-C)};r.exports=d},381:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(71586),p=n(6987),h=function(u,d,l,c){l===void 0&&(l=[]),c===void 0&&(c=0),l.length=0;var m=u.tilemapLayer,f=a(u,d);return(m.skipCull||m.scrollFactorX!==1||m.scrollFactorY!==1)&&(f.left=0,f.right=u.width,f.top=0,f.bottom=u.height),p(u,f,c,l),l};r.exports=h},97734:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=n(60386),h=n(68234),u=function(d,l,c,m,f,v,S){for(var x=S.collideIndexes.indexOf(d)!==-1,T=a(l,c,m,f,null,S),C=0;C<T.length;C++)T[C].index=d,h(T[C],x);v&&p(l-1,c-1,m+2,f+2,S)};r.exports=u},63555:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=function(h,u,d,l,c,m,f,v){var S=a(d,l,c,m,f,v);return S.filter(h,u)};r.exports=p},37982:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){a===void 0&&(a=0),p===void 0&&(p=!1);var u=0,d,l,c;if(p){for(l=h.height-1;l>=0;l--)for(d=h.width-1;d>=0;d--)if(c=h.data[l][d],c&&c.index===n){if(u===a)return c;u+=1}}else for(l=0;l<h.height;l++)for(d=0;d<h.width;d++)if(c=h.data[l][d],c&&c.index===n){if(u===a)return c;u+=1}return null};r.exports=g},48297:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=function(h,u,d,l,c,m,f,v){var S=a(d,l,c,m,f,v);return S.find(h,u)||null};r.exports=p},80916:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=function(h,u,d,l,c,m,f,v){var S=a(d,l,c,m,f,v);S.forEach(h,u)};r.exports=p},31493:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12920),p=n(381),h=n(37524),u=n(20887),d=n(72283),l=n(19242),c=function(m){return m===a.ORTHOGONAL?p:m===a.HEXAGONAL?h:m===a.STAGGERED?l:m===a.ISOMETRIC?u:d};r.exports=c},15494:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(62839),p=function(h,u,d,l){if(d===void 0&&(d=!1),a(h,u,l)){var c=l.data[u][h]||null;return c?c.index===-1?d?c:null:c:null}else return null};r.exports=p},24640:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(15494),p=n(93736),h=new p,u=function(d,l,c,m,f){return f.tilemapLayer.worldToTileXY(d,l,!0,h,m),a(h.x,h.y,c,f)};r.exports=u},48495:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=function(h,u,d,l){var c=l.baseTileWidth,m=l.baseTileHeight,f=l.tilemapLayer,v=0,S=0;f&&(d||(d=f.scene.cameras.main),v=f.x+d.scrollX*(1-f.scrollFactorX),S=f.y+d.scrollY*(1-f.scrollFactorY),c*=f.scaleX,m*=f.scaleY);var x=v+h*c,T=S+u*m;return[new a(x,T),new a(x+c,T),new a(x+c,T+m),new a(x,T+m)]};r.exports=p},7160:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12920),p=n(63634),h=n(72283),u=n(48495),d=function(l){return l===a.ORTHOGONAL?u:l===a.ISOMETRIC?h:l===a.HEXAGONAL?p:(l===a.STAGGERED,h)};r.exports=d},16884:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12920),p=n(72283),h=n(44150),u=function(d){return d===a.ORTHOGONAL?h:p};r.exports=u},68182:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12920),p=n(21715),h=n(21808),u=n(72283),d=n(33388),l=n(46836),c=function(m){return m===a.ORTHOGONAL?l:m===a.ISOMETRIC?h:m===a.HEXAGONAL?p:m===a.STAGGERED?d:u};r.exports=c},3752:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12920),p=n(72283),h=n(84132),u=n(42477),d=function(l){return l===a.ORTHOGONAL?u:l===a.STAGGERED?h:p};r.exports=d},50811:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72632),p=function(h,u,d,l,c,m){h===void 0&&(h=0),u===void 0&&(u=0),d===void 0&&(d=m.width),l===void 0&&(l=m.height),c||(c={});var f=a(c,"isNotEmpty",!1),v=a(c,"isColliding",!1),S=a(c,"hasInterestingFace",!1);h<0&&(d+=h,h=0),u<0&&(l+=u,u=0),h+d>m.width&&(d=Math.max(m.width-h,0)),u+l>m.height&&(l=Math.max(m.height-u,0));for(var x=[],T=u;T<u+l;T++)for(var C=h;C<h+d;C++){var w=m.data[T][C];if(w!==null){if(f&&w.index===-1||v&&!w.collides||S&&!w.hasInterestingFace)continue;x.push(w)}}return x};r.exports=p},31674:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(84068),p=n(50811),h=n(7563),u=n(72283),d=n(93736),l=function(S,x){return h.RectangleToTriangle(x,S)},c=new d,m=new d,f=new d,v=function(S,x,T,C){if(S===void 0)return[];var w=u;S instanceof a.Circle?w=h.CircleToRectangle:S instanceof a.Rectangle?w=h.RectangleToRectangle:S instanceof a.Triangle?w=l:S instanceof a.Line&&(w=h.LineToRectangle),C.tilemapLayer.worldToTileXY(S.left,S.top,!0,m,T);var b=m.x,E=m.y;C.tilemapLayer.worldToTileXY(S.right,S.bottom,!1,f,T);var A=Math.ceil(f.x),I=Math.ceil(f.y),R=Math.max(A-b,1),N=Math.max(I-E,1),F=p(b,E,R,N,x,C),P=C.tileWidth,D=C.tileHeight;C.tilemapLayer&&(P*=C.tilemapLayer.scaleX,D*=C.tilemapLayer.scaleY);for(var M=[],L=new a.Rectangle(0,0,P,D),k=0;k<F.length;k++){var V=F[k];C.tilemapLayer.tileToWorldXY(V.x,V.y,c,T),L.x=c.x,L.y=c.y,w(S,L)&&M.push(V)}return M};r.exports=v},44662:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=n(93736),h=new p,u=new p,d=function(l,c,m,f,v,S,x){var T=x.tilemapLayer.tilemap._convert.WorldToTileXY;T(l,c,!0,h,S,x);var C=h.x,w=h.y;T(l+m,c+f,!1,u,S,x);var b=Math.ceil(u.x),E=Math.ceil(u.y);return a(C,w,b-C,E-w,v,x)};r.exports=d},29296:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12920),p=n(10618),h=n(806),u=function(d){return d===a.ORTHOGONAL?h:p};r.exports=u},32688:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12920),p=n(11516),h=n(18750),u=n(72283),d=n(90562),l=n(45676),c=function(m){return m===a.ORTHOGONAL?l:m===a.ISOMETRIC?h:m===a.HEXAGONAL?p:m===a.STAGGERED?d:u};r.exports=c},74326:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12920),p=n(10618),h=n(3689),u=n(70520),d=function(l){return l===a.ORTHOGONAL?u:l===a.STAGGERED?h:p};r.exports=d},46598:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(62839),p=function(h,u,d){if(a(h,u,d)){var l=d.data[u][h];return l!==null&&l.index>-1}else return!1};r.exports=p},28654:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(46598),p=n(93736),h=new p,u=function(d,l,c,m){m.tilemapLayer.worldToTileXY(d,l,!0,h,c);var f=h.x,v=h.y;return a(f,v,m)};r.exports=u},6358:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82127),p=n(84314),h=function(u,d){var l=u.tilemapLayer.tilemap,c=u.tilemapLayer,m=Math.floor(l.tileWidth*c.scaleX),f=Math.floor(l.tileHeight*c.scaleY),v=u.hexSideLength,S,x,T,C;if(this.staggerAxis==="y"){var w=(f-v)/2+v;S=p(d.worldView.x-c.x,m,0,!0)-c.cullPaddingX,x=a(d.worldView.right-c.x,m,0,!0)+c.cullPaddingX,T=p(d.worldView.y-c.y,w,0,!0)-c.cullPaddingY,C=a(d.worldView.bottom-c.y,w,0,!0)+c.cullPaddingY}else{var b=(m-v)/2+v;S=p(d.worldView.x-c.x,b,0,!0)-c.cullPaddingX,x=a(d.worldView.right-c.x,b,0,!0)+c.cullPaddingX,T=p(d.worldView.y-c.y,f,0,!0)-c.cullPaddingY,C=a(d.worldView.bottom-c.y,f,0,!0)+c.cullPaddingY}return{left:S,right:x,top:T,bottom:C}};r.exports=h},37524:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(6358),p=n(6987),h=function(u,d,l,c){l===void 0&&(l=[]),c===void 0&&(c=0),l.length=0;var m=u.tilemapLayer,f=a(u,d);return m.skipCull&&m.scrollFactorX===1&&m.scrollFactorY===1&&(f.left=0,f.right=u.width,f.top=0,f.bottom=u.height),p(u,f,c,l),l};r.exports=h},63634:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(21715),p=n(93736),h=new p,u=function(d,l,c,m){var f=m.baseTileWidth,v=m.baseTileHeight,S=m.tilemapLayer;S&&(f*=S.scaleX,v*=S.scaleY);var x=a(d,l,h,c,m),T=[],C=.5773502691896257,w,b;this.staggerAxis==="y"?(w=C*f,b=v/2):(w=f/2,b=C*v);for(var E=0;E<6;E++){var A=2*Math.PI*(.5-E)/6;T.push(new p(x.x+w*Math.cos(A),x.y+b*Math.sin(A)))}return T};r.exports=u},21715:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=function(h,u,d,l,c){d||(d=new a);var m=c.baseTileWidth,f=c.baseTileHeight,v=c.tilemapLayer,S=0,x=0;v&&(l||(l=v.scene.cameras.main),S=v.x+l.scrollX*(1-v.scrollFactorX),x=v.y+l.scrollY*(1-v.scrollFactorY),m*=v.scaleX,f*=v.scaleY);var T=m/2,C=f/2,w,b;return this.staggerAxis==="y"?(w=S+m*h+m,b=x+1.5*u*C+C,u%2===0&&(this.staggerIndex==="odd"?w-=T:w+=T)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(w=S+1.5*h*T+T,b=x+f*h+f,h%2===0&&(this.staggerIndex==="odd"?b-=C:b+=C)),d.set(w,b)};r.exports=p},11516:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=function(h,u,d,l,c,m){l||(l=new a);var f=m.baseTileWidth,v=m.baseTileHeight,S=m.tilemapLayer;S&&(c||(c=S.scene.cameras.main),h=h-(S.x+c.scrollX*(1-S.scrollFactorX)),u=u-(S.y+c.scrollY*(1-S.scrollFactorY)),f*=S.scaleX,v*=S.scaleY);var x=.5773502691896257,T=-.3333333333333333,C=0,w=.6666666666666666,b=f/2,E=v/2,A,I,R,N,F;m.staggerAxis==="y"?(A=(h-b)/(x*f),I=(u-E)/E,R=x*A+T*I,N=C*A+w*I):(A=(h-b)/b,I=(u-E)/(x*v),R=T*A+x*I,N=w*A+C*I),F=-R-N;var P=Math.round(R),D=Math.round(N),M=Math.round(F),L=Math.abs(P-R),k=Math.abs(D-N),V=Math.abs(M-F);L>k&&L>V?P=-D-M:k>V&&(D=-P-M);var W,K=D;return m.staggerIndex==="odd"?W=K%2===0?D/2+P:D/2+P-.5:W=K%2===0?D/2+P:D/2+P+.5,l.set(W,K)};r.exports=p},62839:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n>=0&&n<p.width&&a>=0&&a<p.height};r.exports=g},20887:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(13125),p=function(h,u,d,l){d===void 0&&(d=[]),l===void 0&&(l=0),d.length=0;var c=h.tilemapLayer,m=h.data,f=h.width,v=h.height,S=c.skipCull,x=0,T=f,C=0,w=v,b,E,A;if(l===0){for(E=C;E<w;E++)for(b=x;b<T;b++)if(S||a(b,E,h,u)){if(A=m[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;d.push(A)}}else if(l===1){for(E=C;E<w;E++)for(b=T;b>=x;b--)if(S||a(b,E,h,u)){if(A=m[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;d.push(A)}}else if(l===2){for(E=w;E>=C;E--)for(b=x;b<T;b++)if(S||a(b,E,h,u)){if(A=m[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;d.push(A)}}else if(l===3){for(E=w;E>=C;E--)for(b=T;b>=x;b--)if(S||a(b,E,h,u)){if(A=m[E][b],!A||A.index===-1||!A.visible||A.alpha===0)continue;d.push(A)}}return c.tilesDrawn=d.length,c.tilesTotal=f*v,d};r.exports=p},21808:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=function(h,u,d,l,c){d||(d=new a);var m=c.baseTileWidth,f=c.baseTileHeight,v=c.tilemapLayer,S=0,x=0;v&&(l||(l=v.scene.cameras.main),S=v.x+l.scrollX*(1-v.scrollFactorX),m*=v.scaleX,x=v.y+l.scrollY*(1-v.scrollFactorY),f*=v.scaleY);var T=S+(h-u)*(m/2),C=x+(h+u)*(f/2);return d.set(T,C)};r.exports=p},18750:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=function(h,u,d,l,c,m,f){l||(l=new a);var v=m.baseTileWidth,S=m.baseTileHeight,x=m.tilemapLayer;x&&(c||(c=x.scene.cameras.main),u=u-(x.y+c.scrollY*(1-x.scrollFactorY)),S*=x.scaleY,h=h-(x.x+c.scrollX*(1-x.scrollFactorX)),v*=x.scaleX);var T=v/2,C=S/2;h=h-T,f||(u=u-S);var w=.5*(h/T+u/C),b=.5*(-h/T+u/C);return d&&(w=Math.floor(w),b=Math.floor(b)),l.set(w,b)};r.exports=p},29003:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(29633),p=n(62839),h=n(92839),u=n(68234),d=function(l,c,m,f,v){if(f===void 0&&(f=!0),!p(c,m,v))return null;var S,x=v.data[m][c],T=x&&x.collides;l instanceof a?(v.data[m][c]===null&&(v.data[m][c]=new a(v,l.index,c,m,v.tileWidth,v.tileHeight)),v.data[m][c].copy(l)):(S=l,v.data[m][c]===null?v.data[m][c]=new a(v,S,c,m,v.tileWidth,v.tileHeight):v.data[m][c].index=S);var C=v.data[m][c],w=v.collideIndexes.indexOf(C.index)!==-1;if(S=l instanceof a?l.index:l,S===-1)C.width=v.tileWidth,C.height=v.tileHeight;else{var b=v.tilemapLayer.tilemap.tiles,E=b[S][2],A=v.tilemapLayer.tileset[E];C.width=A.tileWidth,C.height=A.tileHeight}return u(C,w),f&&T!==C.collides&&h(c,m,v),C};r.exports=d},48565:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(29003),p=n(93736),h=new p,u=function(d,l,c,m,f,v){return v.tilemapLayer.worldToTileXY(l,c,!0,h,f,v),a(d,h.x,h.y,m,v)};r.exports=u},56547:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(60386),p=n(29003),h=function(u,d,l,c,m){if(c===void 0&&(c=!0),!Array.isArray(u))return null;Array.isArray(u[0])||(u=[u]);for(var f=u.length,v=u[0].length,S=0;S<f;S++)for(var x=0;x<v;x++){var T=u[S][x];p(T,d+x,l+S,!1,m)}c&&a(d-1,l-1,v+2,f+2,m)};r.exports=h},91180:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=n(72861),h=function(u,d,l,c,m,f){var v,S=a(u,d,l,c,{},f);if(!m)for(m=[],v=0;v<S.length;v++)m.indexOf(S[v].index)===-1&&m.push(S[v].index);for(v=0;v<S.length;v++)S[v].index=p(m)};r.exports=h},929:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(29633),p=n(62839),h=n(92839),u=function(d,l,c,m,f){if(c===void 0&&(c=!0),m===void 0&&(m=!0),!p(d,l,f))return null;var v=f.data[l][d];if(v)f.data[l][d]=c?null:new a(f,-1,d,l,f.tileWidth,f.tileHeight);else return null;return m&&v&&v.collides&&h(d,l,f),v};r.exports=u},17384:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(929),p=n(93736),h=new p,u=function(d,l,c,m,f,v){return v.tilemapLayer.worldToTileXY(d,l,!0,h,f,v),a(h.x,h.y,c,m,v)};r.exports=u},93763:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=n(95509),h=new p(105,210,231,150),u=new p(243,134,48,200),d=new p(40,39,37,150),l=function(c,m,f){m===void 0&&(m={});var v=m.tileColor!==void 0?m.tileColor:h,S=m.collidingTileColor!==void 0?m.collidingTileColor:u,x=m.faceColor!==void 0?m.faceColor:d,T=a(0,0,f.width,f.height,null,f);c.translateCanvas(f.tilemapLayer.x,f.tilemapLayer.y),c.scaleCanvas(f.tilemapLayer.scaleX,f.tilemapLayer.scaleY);for(var C=0;C<T.length;C++){var w=T[C],b=w.width,E=w.height,A=w.pixelX,I=w.pixelY,R=w.collides?S:v;R!==null&&(c.fillStyle(R.color,R.alpha/255),c.fillRect(A,I,b,E)),A+=1,I+=1,b-=2,E-=2,x!==null&&(c.lineStyle(1,x.color,x.alpha/255),w.faceTop&&c.lineBetween(A,I,A+b,I),w.faceRight&&c.lineBetween(A+b,I,A+b,I+E),w.faceBottom&&c.lineBetween(A,I+E,A+b,I+E),w.faceLeft&&c.lineBetween(A,I,A,I+E))}};r.exports=l},51202:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=function(h,u,d,l,c,m,f){for(var v=a(d,l,c,m,null,f),S=0;S<v.length;S++)v[S]&&v[S].index===h&&(v[S].index=u)};r.exports=p},6987:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=n.data,d=n.width,l=n.height,c=n.tilemapLayer,m=Math.max(0,a.left),f=Math.min(d,a.right),v=Math.max(0,a.top),S=Math.min(l,a.bottom),x,T,C;if(p===0)for(T=v;T<S;T++)for(x=m;u[T]&&x<f;x++)C=u[T][x],!(!C||C.index===-1||!C.visible||C.alpha===0)&&h.push(C);else if(p===1)for(T=v;T<S;T++)for(x=f;u[T]&&x>=m;x--)C=u[T][x],!(!C||C.index===-1||!C.visible||C.alpha===0)&&h.push(C);else if(p===2)for(T=S;T>=v;T--)for(x=m;u[T]&&x<f;x++)C=u[T][x],!(!C||C.index===-1||!C.visible||C.alpha===0)&&h.push(C);else if(p===3)for(T=S;T>=v;T--)for(x=f;u[T]&&x>=m;x--)C=u[T][x],!(!C||C.index===-1||!C.visible||C.alpha===0)&&h.push(C);return c.tilesDrawn=h.length,c.tilesTotal=d*l,h};r.exports=g},51710:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(68234),p=n(60386),h=n(91181),u=function(d,l,c,m,f){l===void 0&&(l=!0),c===void 0&&(c=!0),f===void 0&&(f=!0),Array.isArray(d)||(d=[d]);for(var v=0;v<d.length;v++)h(d[v],l,m);if(f)for(var S=0;S<m.height;S++)for(var x=0;x<m.width;x++){var T=m.data[S][x];T&&d.indexOf(T.index)!==-1&&a(T,l)}c&&p(0,0,m.width,m.height,m)};r.exports=u},15216:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(68234),p=n(60386),h=n(91181),u=function(d,l,c,m,f,v){if(c===void 0&&(c=!0),m===void 0&&(m=!0),v===void 0&&(v=!0),!(d>l)){for(var S=d;S<=l;S++)h(S,c,f);if(v)for(var x=0;x<f.height;x++)for(var T=0;T<f.width;T++){var C=f.data[x][T];C&&C.index>=d&&C.index<=l&&a(C,c)}m&&p(0,0,f.width,f.height,f)}};r.exports=u},33158:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(68234),p=n(60386),h=n(91181),u=function(d,l,c,m){l===void 0&&(l=!0),c===void 0&&(c=!0),Array.isArray(d)||(d=[d]);for(var f=0;f<m.height;f++)for(var v=0;v<m.width;v++){var S=m.data[f][v];S&&d.indexOf(S.index)===-1&&(a(S,l),h(S.index,l,m))}c&&p(0,0,m.width,m.height,m)};r.exports=u},4180:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(68234),p=n(60386),h=n(19256),u=function(d,l,c,m){l===void 0&&(l=!0),c===void 0&&(c=!0);for(var f=0;f<m.height;f++)for(var v=0;v<m.width;v++){var S=m.data[f][v];if(S){for(var x in d)if(h(S.properties,x)){var T=d[x];Array.isArray(T)||(T=[T]);for(var C=0;C<T.length;C++)S.properties[x]===T[C]&&a(S,l)}}}c&&p(0,0,m.width,m.height,m)};r.exports=u},18625:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(68234),p=n(60386),h=function(u,d,l){u===void 0&&(u=!0),d===void 0&&(d=!0);for(var c=0;c<l.height;c++)for(var m=0;m<l.width;m++){var f=l.data[c][m];if(f){var v=f.getCollisionGroup();v&&v.objects&&v.objects.length>0&&a(f,u)}}d&&p(0,0,l.width,l.height,l)};r.exports=h},91181:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=p.collideIndexes.indexOf(n);a&&h===-1?p.collideIndexes.push(n):!a&&h!==-1&&p.collideIndexes.splice(h,1)};r.exports=g},68234:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a?n.setCollision(!0,!0,!0,!0,!1):n.resetCollision(!1)};r.exports=g},11628:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){if(typeof n=="number")h.callbacks[n]=a!==null?{callback:a,callbackContext:p}:void 0;else for(var u=0,d=n.length;u<d;u++)h.callbacks[n[u]]=a!==null?{callback:a,callbackContext:p}:void 0};r.exports=g},72732:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=function(h,u,d,l,c,m,f){for(var v=a(h,u,d,l,null,f),S=0;S<v.length;S++)v[S].setCollisionCallback(c,m)};r.exports=p},34397:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=n(18592),h=function(u,d,l,c,m){var f=a(u,d,l,c,null,m),v=f.map(function(x){return x.index});p(v);for(var S=0;S<f.length;S++)f[S].index=v[S]};r.exports=h},53945:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(82127),p=n(84314),h=function(u,d){var l=u.tilemapLayer.tilemap,c=u.tilemapLayer,m=Math.floor(l.tileWidth*c.scaleX),f=Math.floor(l.tileHeight*c.scaleY),v=p(d.worldView.x-c.x,m,0,!0)-c.cullPaddingX,S=a(d.worldView.right-c.x,m,0,!0)+c.cullPaddingX,x=p(d.worldView.y-c.y,f/2,0,!0)-c.cullPaddingY,T=a(d.worldView.bottom-c.y,f/2,0,!0)+c.cullPaddingY;return{left:v,right:S,top:x,bottom:T}};r.exports=h},19242:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(53945),p=n(6987),h=function(u,d,l,c){l===void 0&&(l=[]),c===void 0&&(c=0),l.length=0;var m=u.tilemapLayer,f=a(u,d);return m.skipCull&&m.scrollFactorX===1&&m.scrollFactorY===1&&(f.left=0,f.right=u.width,f.top=0,f.bottom=u.height),p(u,f,c,l),l};r.exports=h},33388:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=function(h,u,d,l,c){d||(d=new a);var m=c.baseTileWidth,f=c.baseTileHeight,v=c.tilemapLayer,S=0,x=0;v&&(l||(l=v.scene.cameras.main),S=v.x+l.scrollX*(1-v.scrollFactorX),m*=v.scaleX,x=v.y+l.scrollY*(1-v.scrollFactorY),f*=v.scaleY);var T=S+h*m+u%2*(m/2),C=x+u*(f/2);return d.set(T,C)};r.exports=p},84132:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=p.baseTileHeight,u=p.tilemapLayer,d=0;return u&&(a===void 0&&(a=u.scene.cameras.main),d=u.y+a.scrollY*(1-u.scrollFactorY),h*=u.scaleY),d+n*(h/2)+h};r.exports=g},90562:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=function(h,u,d,l,c,m){l||(l=new a);var f=m.baseTileWidth,v=m.baseTileHeight,S=m.tilemapLayer;S&&(c||(c=S.scene.cameras.main),u=u-(S.y+c.scrollY*(1-S.scrollFactorY)),v*=S.scaleY,h=h-(S.x+c.scrollX*(1-S.scrollFactorX)),f*=S.scaleX);var x=d?Math.floor(u/(v/2)):u/(v/2),T=d?Math.floor((h+x%2*.5*f)/f):(h+x%2*.5*f)/f;return l.set(T,x)};r.exports=p},3689:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=h.baseTileHeight,d=h.tilemapLayer;return d&&(p||(p=d.scene.cameras.main),n=n-(d.y+p.scrollY*(1-d.scrollFactorY)),u*=d.scaleY),a?Math.floor(n/(u/2)):n/(u/2)};r.exports=g},55217:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=function(h,u,d,l,c,m,f){for(var v=a(d,l,c,m,null,f),S=0;S<v.length;S++)v[S]&&(v[S].index===h?v[S].index=u:v[S].index===u&&(v[S].index=h))};r.exports=p},44150:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=p.baseTileWidth,u=p.tilemapLayer,d=0;return u&&(a||(a=u.scene.cameras.main),d=u.x+a.scrollX*(1-u.scrollFactorX),h*=u.scaleX),d+n*h};r.exports=g},46836:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(44150),p=n(42477),h=n(93736),u=function(d,l,c,m,f){return c||(c=new h(0,0)),c.x=a(d,m,f),c.y=p(l,m,f),c};r.exports=u},42477:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=p.baseTileHeight,u=p.tilemapLayer,d=0;return u&&(a||(a=u.scene.cameras.main),d=u.y+a.scrollY*(1-u.scrollFactorY),h*=u.scaleY),d+n*h};r.exports=g},39677:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(50811),p=function(h,u,d,l,c,m){if(c){var f,v=a(h,u,d,l,null,m),S=0;for(f=0;f<c.length;f++)S+=c[f].weight;if(!(S<=0))for(f=0;f<v.length;f++){for(var x=Math.random()*S,T=0,C=-1,w=0;w<c.length;w++)if(T+=c[w].weight,x<=T){var b=c[w].index;C=Array.isArray(b)?b[Math.floor(Math.random()*b.length)]:b;break}v[f].index=C}}};r.exports=p},806:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(45676),p=n(93736),h=new p,u=function(d,l,c,m){return a(d,0,l,h,c,m),h.x};r.exports=u},45676:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93736),p=function(h,u,d,l,c,m){d===void 0&&(d=!0),l||(l=new a);var f=m.baseTileWidth,v=m.baseTileHeight,S=m.tilemapLayer;S&&(c||(c=S.scene.cameras.main),h=h-(S.x+c.scrollX*(1-S.scrollFactorX)),u=u-(S.y+c.scrollY*(1-S.scrollFactorY)),f*=S.scaleX,v*=S.scaleY);var x=h/f,T=u/v;return d&&(x=Math.floor(x),T=Math.floor(T)),l.set(x,T)};r.exports=p},70520:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(45676),p=n(93736),h=new p,u=function(d,l,c,m){return a(0,d,l,h,c,m),h.y};r.exports=u},5047:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CalculateFacesAt:n(92839),CalculateFacesWithin:n(60386),CheckIsoBounds:n(13125),Copy:n(17347),CreateFromTiles:n(93604),CullBounds:n(71586),CullTiles:n(381),Fill:n(97734),FilterTiles:n(63555),FindByIndex:n(37982),FindTile:n(48297),ForEachTile:n(80916),GetCullTilesFunction:n(31493),GetTileAt:n(15494),GetTileAtWorldXY:n(24640),GetTileCorners:n(48495),GetTileCornersFunction:n(7160),GetTilesWithin:n(50811),GetTilesWithinShape:n(31674),GetTilesWithinWorldXY:n(44662),GetTileToWorldXFunction:n(16884),GetTileToWorldXYFunction:n(68182),GetTileToWorldYFunction:n(3752),GetWorldToTileXFunction:n(29296),GetWorldToTileXYFunction:n(32688),GetWorldToTileYFunction:n(74326),HasTileAt:n(46598),HasTileAtWorldXY:n(28654),HexagonalCullBounds:n(6358),HexagonalCullTiles:n(37524),HexagonalGetTileCorners:n(63634),HexagonalTileToWorldXY:n(21715),HexagonalWorldToTileXY:n(11516),IsInLayerBounds:n(62839),IsometricCullTiles:n(20887),IsometricTileToWorldXY:n(21808),IsometricWorldToTileXY:n(18750),PutTileAt:n(29003),PutTileAtWorldXY:n(48565),PutTilesAt:n(56547),Randomize:n(91180),RemoveTileAt:n(929),RemoveTileAtWorldXY:n(17384),RenderDebug:n(93763),ReplaceByIndex:n(51202),RunCull:n(6987),SetCollision:n(51710),SetCollisionBetween:n(15216),SetCollisionByExclusion:n(33158),SetCollisionByProperty:n(4180),SetCollisionFromCollisionGroup:n(18625),SetLayerCollisionIndex:n(91181),SetTileCollision:n(68234),SetTileIndexCallback:n(11628),SetTileLocationCallback:n(72732),Shuffle:n(34397),StaggeredCullBounds:n(53945),StaggeredCullTiles:n(19242),StaggeredTileToWorldXY:n(33388),StaggeredTileToWorldY:n(84132),StaggeredWorldToTileXY:n(90562),StaggeredWorldToTileY:n(3689),SwapByIndex:n(55217),TileToWorldX:n(44150),TileToWorldXY:n(46836),TileToWorldY:n(42477),WeightedRandomize:n(39677),WorldToTileX:n(806),WorldToTileXY:n(45676),WorldToTileY:n(70520)}},12920:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},84758:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ORIENTATION:n(12920)};r.exports=a},52678:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(98611),p=n(84758),h={Components:n(5047),Parsers:n(34124),Formats:n(93560),ImageCollection:n(97042),ParseToTilemap:n(15043),Tile:n(29633),Tilemap:n(89797),TilemapCreator:n(4843),TilemapFactory:n(37940),Tileset:n(47975),TilemapLayer:n(87177),Orientation:n(12920),LayerData:n(94990),MapData:n(16586),ObjectLayer:n(15256)};h=a(!1,h,p.ORIENTATION),r.exports=h},94990:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12920),h=n(72632),u=new a({initialize:function(l){l===void 0&&(l={}),this.name=h(l,"name","layer"),this.x=h(l,"x",0),this.y=h(l,"y",0),this.width=h(l,"width",0),this.height=h(l,"height",0),this.tileWidth=h(l,"tileWidth",0),this.tileHeight=h(l,"tileHeight",0),this.baseTileWidth=h(l,"baseTileWidth",this.tileWidth),this.baseTileHeight=h(l,"baseTileHeight",this.tileHeight),this.orientation=h(l,"orientation",p.ORTHOGONAL),this.widthInPixels=h(l,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=h(l,"heightInPixels",this.height*this.baseTileHeight),this.alpha=h(l,"alpha",1),this.visible=h(l,"visible",!0),this.properties=h(l,"properties",[]),this.indexes=h(l,"indexes",[]),this.collideIndexes=h(l,"collideIndexes",[]),this.callbacks=h(l,"callbacks",[]),this.bodies=h(l,"bodies",[]),this.data=h(l,"data",[]),this.tilemapLayer=h(l,"tilemapLayer",null),this.hexSideLength=h(l,"hexSideLength",0),this.staggerAxis=h(l,"staggerAxis","y"),this.staggerIndex=h(l,"staggerIndex","odd")}});r.exports=u},16586:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(12920),h=n(72632),u=new a({initialize:function(l){l===void 0&&(l={}),this.name=h(l,"name","map"),this.width=h(l,"width",0),this.height=h(l,"height",0),this.infinite=h(l,"infinite",!1),this.tileWidth=h(l,"tileWidth",0),this.tileHeight=h(l,"tileHeight",0),this.widthInPixels=h(l,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=h(l,"heightInPixels",this.height*this.tileHeight),this.format=h(l,"format",null),this.orientation=h(l,"orientation",p.ORTHOGONAL),this.renderOrder=h(l,"renderOrder","right-down"),this.version=h(l,"version","1"),this.properties=h(l,"properties",{}),this.layers=h(l,"layers",[]),this.images=h(l,"images",[]),this.objects=h(l,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=h(l,"collision",{}),this.tilesets=h(l,"tilesets",[]),this.imageCollections=h(l,"imageCollections",[]),this.tiles=h(l,"tiles",[]),this.hexSideLength=h(l,"hexSideLength",0),this.staggerAxis=h(l,"staggerAxis","y"),this.staggerIndex=h(l,"staggerIndex","odd")}});r.exports=u},15256:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72632),h=new a({initialize:function(d){d===void 0&&(d={}),this.name=p(d,"name","object layer"),this.opacity=p(d,"opacity",1),this.properties=p(d,"properties",{}),this.propertyTypes=p(d,"propertytypes",{}),this.type=p(d,"type","objectgroup"),this.visible=p(d,"visible",!0),this.objects=p(d,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});r.exports=h},21394:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(12920),p=function(h){return h=h.toLowerCase(),h==="isometric"?a.ISOMETRIC:h==="staggered"?a.STAGGERED:h==="hexagonal"?a.HEXAGONAL:a.ORTHOGONAL};r.exports=p},90715:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93560),p=n(84346),h=n(96097),u=n(2378),d=n(44909),l=function(c,m,f,v,S,x){var T;switch(m){case a.ARRAY_2D:T=p(c,f,v,S,x);break;case a.CSV:T=h(c,f,v,S,x);break;case a.TILED_JSON:T=u(c,f,x);break;case a.WELTMEISTER:T=d(c,f,x);break;default:console.warn("Unrecognized tilemap data format: "+m),T=null}return T};r.exports=l},84346:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93560),p=n(94990),h=n(16586),u=n(29633),d=function(l,c,m,f,v){for(var S=new p({tileWidth:m,tileHeight:f}),x=new h({name:l,tileWidth:m,tileHeight:f,format:a.ARRAY_2D,layers:[S]}),T=[],C=c.length,w=0,b=0;b<c.length;b++){T[b]=[];for(var E=c[b],A=0;A<E.length;A++){var I=parseInt(E[A],10);isNaN(I)||I===-1?T[b][A]=v?null:new u(S,-1,A,b,m,f):T[b][A]=new u(S,I,A,b,m,f)}w===0&&(w=E.length)}return x.width=S.width=w,x.height=S.height=C,x.widthInPixels=S.widthInPixels=w*m,x.heightInPixels=S.heightInPixels=C*f,S.data=T,x};r.exports=d},96097:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93560),p=n(84346),h=function(u,d,l,c,m){var f=d.trim().split(`
`).map(function(S){return S.split(",")}),v=p(u,f,l,c,m);return v.format=a.CSV,v};r.exports=h},30951:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(94990),p=n(29633),h=function(u,d){for(var l=[],c=0;c<u.layer.length;c++){for(var m=u.layer[c],f=new a({name:m.name,width:m.width,height:m.height,tileWidth:m.tilesize,tileHeight:m.tilesize,visible:m.visible===1}),v=[],S=[],x=0;x<m.data.length;x++){for(var T=0;T<m.data[x].length;T++){var C=m.data[x][T]-1,w;C>-1?w=new p(f,C,T,x,m.tilesize,m.tilesize):w=d?null:new p(f,-1,T,x,m.tilesize,m.tilesize),v.push(w)}S.push(v),v=[]}f.data=S,l.push(f)}return l};r.exports=h},47488:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(47975),p=function(h){for(var u=[],d=[],l=0;l<h.layer.length;l++){var c=h.layer[l],m=c.tilesetName;m!==""&&d.indexOf(m)===-1&&(d.push(m),u.push(new a(m,0,c.tilesize,c.tilesize,0,0)))}return u};r.exports=p},44909:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(93560),p=n(16586),h=n(30951),u=n(47488),d=function(l,c,m){if(c.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+l),null;for(var f=0,v=0,S=0;S<c.layer.length;S++)c.layer[S].width>f&&(f=c.layer[S].width),c.layer[S].height>v&&(v=c.layer[S].height);var x=new p({width:f,height:v,name:l,tileWidth:c.layer[0].tilesize,tileHeight:c.layer[0].tilesize,format:a.WELTMEISTER});return x.layers=h(c,m),x.tilesets=u(c),x};r.exports=d},24507:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ParseTileLayers:n(30951),ParseTilesets:n(47488),ParseWeltmeister:n(44909)}},34124:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={FromOrientationString:n(21394),Parse:n(90715),Parse2DArray:n(84346),ParseCSV:n(96097),Impact:n(24507),Tiled:n(50044)}},48646:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(98611),p=function(h){for(var u,d,l,c,m,f=0;f<h.layers.length;f++){u=h.layers[f],c=null;for(var v=0;v<u.data.length;v++){m=u.data[v];for(var S=0;S<m.length;S++)d=m[S],!(d===null||d.index<0)&&(l=h.tiles[d.index][2],c=h.tilesets[l],d.width=c.tileWidth,d.height=c.tileHeight,c.tileProperties&&c.tileProperties[d.index-c.firstgid]&&(d.properties=a(d.properties,c.tileProperties[d.index-c.firstgid])))}}};r.exports=p},43908:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){for(var a=window.atob(n),p=a.length,h=new Array(p/4),u=0;u<p;u+=4)h[u/4]=(a.charCodeAt(u)|a.charCodeAt(u+1)<<8|a.charCodeAt(u+2)<<16|a.charCodeAt(u+3)<<24)>>>0;return h};r.exports=g},14556:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(47975),p=function(h){var u,d,l=[];for(u=0;u<h.imageCollections.length;u++)for(var c=h.imageCollections[u],m=c.images,f=0;f<m.length;f++){var v=m[f];d=new a(v.image,v.gid,c.imageWidth,c.imageHeight,0,0),d.updateTileData(c.imageWidth,c.imageHeight),h.tilesets.push(d)}for(u=0;u<h.tilesets.length;u++){d=h.tilesets[u];for(var S=d.tileMargin,x=d.tileMargin,T=0,C=0,w=0,b=d.firstgid;b<d.firstgid+d.total&&(l[b]=[S,x,u],S+=d.tileWidth+d.tileSpacing,T++,!(T===d.total||(C++,C===d.columns&&(S=d.tileMargin,x+=d.tileHeight+d.tileSpacing,C=0,w++,w===d.rows))));b++);}return l};r.exports=p},92044:(r,g,n)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72632),p=function(h,u,d){if(!u)return{i:0,layers:h.layers,name:"",opacity:1,visible:!0,x:0,y:0};var l=u.x+a(u,"startx",0)*h.tilewidth+a(u,"offsetx",0),c=u.y+a(u,"starty",0)*h.tileheight+a(u,"offsety",0);return{i:0,layers:u.layers,name:d.name+u.name+"/",opacity:d.opacity*u.opacity,visible:d.visible&&u.visible,x:d.x+l,y:d.y+c}};r.exports=p},8847:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=2147483648,n=1073741824,a=536870912,p=function(h){var u=!!(h&g),d=!!(h&n),l=!!(h&a);h=h&~(g|n|a);var c=0,m=!1;return u&&d&&l?(c=Math.PI/2,m=!0):u&&d&&!l?(c=Math.PI,m=!1):u&&!d&&l?(c=Math.PI/2,m=!1):u&&!d&&!l?(c=0,m=!0):!u&&d&&l?(c=3*Math.PI/2,m=!1):!u&&d&&!l?(c=Math.PI,m=!0):!u&&!d&&l?(c=3*Math.PI/2,m=!0):!u&&!d&&!l&&(c=0,m=!1),{gid:h,flippedHorizontal:u,flippedVertical:d,flippedAntiDiagonal:l,rotation:c,flipped:m}};r.exports=p},78339:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72632),p=n(92044),h=function(u){for(var d=[],l=[],c=p(u);c.i<c.layers.length||l.length>0;){if(c.i>=c.layers.length){if(l.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}c=l.pop();continue}var m=c.layers[c.i];if(c.i++,m.type!=="imagelayer"){if(m.type==="group"){var f=p(u,m,c);l.push(c),c=f}continue}var v=a(m,"offsetx",0)+a(m,"startx",0),S=a(m,"offsety",0)+a(m,"starty",0);d.push({name:c.name+m.name,image:m.image,x:c.x+v+m.x,y:c.y+S+m.y,alpha:c.opacity*m.opacity,visible:c.visible&&m.visible,properties:a(m,"properties",{})})}return d};r.exports=h},2378:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(48646),p=n(14556),h=n(12920),u=n(28699),d=n(93560),l=n(21394),c=n(16586),m=n(78339),f=n(61136),v=n(95925),S=n(93392),x=function(T,C,w){var b=u(C),E=new c({width:b.width,height:b.height,name:T,tileWidth:b.tilewidth,tileHeight:b.tileheight,orientation:l(b.orientation),format:d.TILED_JSON,version:b.version,properties:b.properties,renderOrder:b.renderorder,infinite:b.infinite});E.orientation===h.HEXAGONAL&&(E.hexSideLength=b.hexsidelength,E.staggerAxis=b.staggeraxis,E.staggerIndex=b.staggerindex),E.layers=v(b,w),E.images=m(b);var A=S(b);return E.tilesets=A.tilesets,E.imageCollections=A.imageCollections,E.objects=f(b),E.tiles=p(E),a(E),E};r.exports=x},4281:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(28820),p=n(8847),h=function(l){return{x:l.x,y:l.y}},u=["id","name","type","rotation","properties","visible","x","y","width","height"],d=function(l,c,m){c===void 0&&(c=0),m===void 0&&(m=0);var f=a(l,u);if(f.x+=c,f.y+=m,l.gid){var v=p(l.gid);f.gid=v.gid,f.flippedHorizontal=v.flippedHorizontal,f.flippedVertical=v.flippedVertical,f.flippedAntiDiagonal=v.flippedAntiDiagonal}else l.polyline?f.polyline=l.polyline.map(h):l.polygon?f.polygon=l.polygon.map(h):l.ellipse?f.ellipse=l.ellipse:l.text?f.text=l.text:l.point?f.point=!0:f.rectangle=!0;return f};r.exports=d},61136:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72632),p=n(4281),h=n(15256),u=n(92044),d=function(l){for(var c=[],m=[],f=u(l);f.i<f.layers.length||m.length>0;){if(f.i>=f.layers.length){if(m.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=m.pop();continue}var v=f.layers[f.i];if(f.i++,v.opacity*=f.opacity,v.visible=f.visible&&v.visible,v.type!=="objectgroup"){if(v.type==="group"){var S=u(l,v,f);m.push(f),f=S}continue}v.name=f.name+v.name;for(var x=f.x+a(v,"startx",0)+a(v,"offsetx",0),T=f.y+a(v,"starty",0)+a(v,"offsety",0),C=[],w=0;w<v.objects.length;w++){var b=p(v.objects[w],x,T);C.push(b)}var E=new h(v);E.objects=C,c.push(E)}return c};r.exports=d},95925:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(43908),p=n(12920),h=n(92044),u=n(21394),d=n(72632),l=n(94990),c=n(8847),m=n(29633),f=function(v,S){for(var x=d(v,"infinite",!1),T=[],C=[],w=h(v);w.i<w.layers.length||C.length>0;){if(w.i>=w.layers.length){if(C.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}w=C.pop();continue}var b=w.layers[w.i];if(w.i++,b.type!=="tilelayer"){if(b.type==="group"){var E=h(v,b,w);C.push(w),w=E}continue}if(b.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+b.name+"'");continue}else if(b.encoding&&b.encoding==="base64"){if(b.chunks)for(var A=0;A<b.chunks.length;A++)b.chunks[A].data=a(b.chunks[A].data);b.data&&(b.data=a(b.data)),delete b.encoding}var I,R,N,F,P=[],D=0;if(x){var M=d(b,"startx",0)+b.x,L=d(b,"starty",0)+b.y;I=new l({name:w.name+b.name,x:w.x+d(b,"offsetx",0)+M*v.tilewidth,y:w.y+d(b,"offsety",0)+L*v.tileheight,width:b.width,height:b.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:w.opacity*b.opacity,visible:w.visible&&b.visible,properties:d(b,"properties",[]),orientation:u(v.orientation)}),I.orientation===p.HEXAGONAL&&(I.hexSideLength=v.hexsidelength,I.staggerAxis=v.staggeraxis,I.staggerIndex=v.staggerindex);for(var k=0;k<b.height;k++){P[k]=[null];for(var V=0;V<b.width;V++)P[k][V]=null}for(k=0,J=b.chunks.length;k<J;k++)for(var W=b.chunks[k],K=W.x-M,B=W.y-L,G=0,O=0,$=W.data.length;O<$;O++){var z=D+K,X=G+B;R=c(W.data[O]),R.gid>0?(N=new m(I,R.gid,z,X,v.tilewidth,v.tileheight),N.rotation=R.rotation,N.flipX=R.flipped,P[X][z]=N):(F=S?null:new m(I,-1,z,X,v.tilewidth,v.tileheight),P[X][z]=F),D++,D===W.width&&(G++,D=0)}}else{I=new l({name:w.name+b.name,x:w.x+d(b,"offsetx",0)+b.x,y:w.y+d(b,"offsety",0)+b.y,width:b.width,height:b.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:w.opacity*b.opacity,visible:w.visible&&b.visible,properties:d(b,"properties",[]),orientation:u(v.orientation)}),I.orientation===p.HEXAGONAL&&(I.hexSideLength=v.hexsidelength,I.staggerAxis=v.staggeraxis,I.staggerIndex=v.staggerindex);for(var Y=[],Z=0,J=b.data.length;Z<J;Z++)R=c(b.data[Z]),R.gid>0?(N=new m(I,R.gid,D,P.length,v.tilewidth,v.tileheight),N.rotation=R.rotation,N.flipX=R.flipped,Y.push(N)):(F=S?null:new m(I,-1,D,P.length,v.tilewidth,v.tileheight),Y.push(F)),D++,D===b.width&&(P.push(Y),D=0,Y=[])}I.data=P,T.push(I)}return T};r.exports=f},93392:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(47975),p=n(97042),h=n(4281),u=n(39642),d=function(l){for(var c=[],m=[],f=null,v,S=0;S<l.tilesets.length;S++){var x=l.tilesets[S];if(x.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(x.image){var T=new a(x.name,x.firstgid,x.tilewidth,x.tileheight,x.margin,x.spacing,void 0,void 0,x.tileoffset);if(l.version>1){var C=void 0,w=void 0;if(Array.isArray(x.tiles)){C=C||{},w=w||{};for(var b=0;b<x.tiles.length;b++){var E=x.tiles[b];if(E.properties){var A={};E.properties.forEach(function(k){A[k.name]=k.value}),w[E.id]=A}if(E.objectgroup&&((C[E.id]||(C[E.id]={})).objectgroup=E.objectgroup,E.objectgroup.objects)){var I=E.objectgroup.objects.map(function(k){return h(k)});C[E.id].objectgroup.objects=I}E.animation&&((C[E.id]||(C[E.id]={})).animation=E.animation),E.type&&((C[E.id]||(C[E.id]={})).type=E.type)}}Array.isArray(x.wangsets)&&(C=C||{},w=w||{},u(x.wangsets,C)),C&&(T.tileData=C,T.tileProperties=w)}else if(x.tileproperties&&(T.tileProperties=x.tileproperties),x.tiles){T.tileData=x.tiles;for(v in T.tileData){var R=T.tileData[v].objectgroup;if(R&&R.objects){var N=R.objects.map(function(k){return h(k)});T.tileData[v].objectgroup.objects=N}}}T.updateTileData(x.imagewidth,x.imageheight),c.push(T)}else{var F=new p(x.name,x.firstgid,x.tilewidth,x.tileheight,x.margin,x.spacing,x.properties),P=0;for(b=0;b<x.tiles.length;b++){E=x.tiles[b];var D=E.image,M=parseInt(E.id,10),L=x.firstgid+M;F.addImage(L,D),P=Math.max(M,P)}F.maxId=P,m.push(F)}f&&(f.lastgid=x.firstgid-1),f=x}return{tilesets:c,imageCollections:m}};r.exports=d},39642:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){for(var p=0;p<n.length;p++){var h=n[p],u=p;if(h.name&&h.name!==""&&(u=h.name),Array.isArray(h.wangtiles)&&h.wangtiles.length>0){var d={},l={},c,m,f;if(Array.isArray(h.edgecolors))for(c=0;c<h.edgecolors.length;c++)f=1+c,m=h.edgecolors[c],m.name!==""&&(d[f]=m.name);if(Array.isArray(h.cornercolors))for(c=0;c<h.cornercolors.length;c++)f=1+c,m=h.cornercolors[c],m.name!==""&&(l[f]=m.name);if(Array.isArray(h.colors))for(c=0;c<h.colors.length;c++)m=h.colors[c],f=1+c,m.name!==""&&(d[f]=l[f]=m.name);for(var v=[d,l,d,l,d,l,d,l],S=0;S<h.wangtiles.length;S++){var x=h.wangtiles[S],T=a[x.tileid]||(a[x.tileid]={});T=T.wangid||(T.wangid={});for(var C=[],w=0;w<Math.min(v.length,x.wangid.length);w++){if(m=x.wangid[w],m===0){C.push(void 0);continue}var b=v[w][m];if(b!==void 0){C.push(b);continue}C.push(m)}T[u]=C}}}};r.exports=g},50044:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={AssignTileProperties:n(48646),Base64Decode:n(43908),BuildTilesetIndex:n(14556),CreateGroupLayer:n(92044),ParseGID:n(8847),ParseImageLayers:n(78339),ParseJSONTiled:n(2378),ParseObject:n(4281),ParseObjectLayers:n(61136),ParseTileLayers:n(95925),ParseTilesets:n(93392)}},73779:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(91963),h=n(7599),u=n(57911),d=n(66458),l=new a({initialize:function(m){this.scene=m,this.systems=m.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],m.sys.events.once(h.BOOT,this.boot,this),m.sys.events.on(h.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var c=this.systems.events;c.on(h.PRE_UPDATE,this.preUpdate,this),c.on(h.UPDATE,this.update,this),c.once(h.SHUTDOWN,this.shutdown,this)},addEvent:function(c){var m;return c instanceof u?(m=c,this.removeEvent(m),m.elapsed=m.startAt,m.hasDispatched=!1,m.repeatCount=m.repeat===-1||m.loop?999999999999:m.repeat):m=new u(c),this._pendingInsertion.push(m),m},delayedCall:function(c,m,f,v){return this.addEvent({delay:c,callback:m,args:f,callbackScope:v})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(c){Array.isArray(c)||(c=[c]);for(var m=0;m<c.length;m++){var f=c[m];d(this._pendingRemoval,f),d(this._pendingInsertion,f),d(this._active,f)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var c=this._pendingRemoval.length,m=this._pendingInsertion.length;if(!(c===0&&m===0)){var f,v;for(f=0;f<c;f++){v=this._pendingRemoval[f];var S=this._active.indexOf(v);S>-1&&this._active.splice(S,1),v.destroy()}for(f=0;f<m;f++)v=this._pendingInsertion[f],this._active.push(v);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(c,m){if(this.now=c,!this.paused){m*=this.timeScale;for(var f=0;f<this._active.length;f++){var v=this._active[f];if(!v.paused&&(v.elapsed+=m*v.timeScale,v.elapsed>=v.delay)){var S=v.elapsed-v.delay;if(v.elapsed=v.delay,!v.hasDispatched&&v.callback&&(v.hasDispatched=!0,v.callback.apply(v.callbackScope,v.args)),v.repeatCount>0){if(v.repeatCount--,S>=v.delay)for(;S>=v.delay&&v.repeatCount>0;)v.callback&&v.callback.apply(v.callbackScope,v.args),S-=v.delay,v.repeatCount--;v.elapsed=S,v.hasDispatched=!1}else v.hasDispatched&&this._pendingRemoval.push(v)}}}},shutdown:function(){var c;for(c=0;c<this._pendingInsertion.length;c++)this._pendingInsertion[c].destroy();for(c=0;c<this._active.length;c++)this._active[c].destroy();for(c=0;c<this._pendingRemoval.length;c++)this._pendingRemoval[c].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var m=this.systems.events;m.off(h.PRE_UPDATE,this.preUpdate,this),m.off(h.UPDATE,this.update,this),m.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});p.register("Clock",l,"time"),r.exports=l},20517:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(6659),h=n(61286),u=n(72632),d=n(7599),l=new a({Extends:p,initialize:function(m,f){p.call(this),this.scene=m,this.systems=m.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.events=[];var v=this.systems.events;v.on(d.PRE_UPDATE,this.preUpdate,this),v.on(d.UPDATE,this.update,this),v.once(d.SHUTDOWN,this.destroy,this),f&&this.add(f)},preUpdate:function(c,m){this.paused||(this.elapsed+=m)},update:function(){if(!this.paused){var c,m=this.events,f=!1,v=this.systems,S;for(c=0;c<m.length;c++){var x=m[c];if(!x.complete&&x.time<=this.elapsed){if(x.complete=!0,this.totalComplete++,x.once&&(f=!0),x.set&&x.target)for(var T in x.set)x.target[T]=x.set[T];x.tween&&v.tweens.add(x.tween),x.sound&&(typeof x.sound=="string"?v.sound.play(x.sound):v.sound.play(x.sound.key,x.sound.config)),S=x.target?x.target:this,x.event&&this.emit(x.event,S),x.run&&x.run.call(S),x.stop&&this.stop()}}if(f)for(c=0;c<m.length;c++)m[c].complete&&m[c].once&&(m.splice(c,1),c--);this.totalComplete>=m.length&&(this.complete=!0)}},play:function(c){return c===void 0&&(c=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,c&&this.reset(),this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(){this.elapsed=0;for(var c=0;c<this.events.length;c++)this.events[c].complete=!1;return this.play(!1)},add:function(c){Array.isArray(c)||(c=[c]);var m=this.events,f=0;m.length>0&&(f=m[m.length-1].time);for(var v=0;v<c.length;v++){var S=c[v],x=u(S,"at",0),T=u(S,"in",null);T!==null&&(x=this.elapsed+T);var C=u(S,"from",null);C!==null&&(x=f+C),m.push({complete:!1,time:x,run:u(S,"run",null),event:u(S,"event",null),target:u(S,"target",null),set:u(S,"set",null),tween:u(S,"tween",null),sound:u(S,"sound",null),once:u(S,"once",!1),stop:u(S,"stop",!1)}),f=x}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var c=Math.min(this.totalComplete,this.events.length);return c/this.events.length},destroy:function(){var c=this.systems.events;c.off(d.PRE_UPDATE,this.preUpdate,this),c.off(d.UPDATE,this.update,this),c.off(d.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});h.register("timeline",function(c){return new l(this.scene,c)}),r.exports=l},57911:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(72632),h=new a({initialize:function(d){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(d)},reset:function(u){if(this.delay=p(u,"delay",0),this.repeat=p(u,"repeat",0),this.loop=p(u,"loop",!1),this.callback=p(u,"callback",void 0),this.callbackScope=p(u,"callbackScope",this),this.args=p(u,"args",[]),this.timeScale=p(u,"timeScale",1),this.startAt=p(u,"startAt",0),this.paused=p(u,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var u=this.delay+this.delay*this.repeat,d=this.elapsed+this.delay*(this.repeat-this.repeatCount);return d/u}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(u){u===void 0&&(u=!1),this.elapsed=this.delay,this.hasDispatched=!u,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});r.exports=h},97121:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Clock:n(73779),Timeline:n(20517),TimerEvent:n(57911)}},64532:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(66458),p=n(56694),h=n(5454),u=n(68710),d=n(91963),l=n(7599),c=n(91944),m=n(39366),f=n(68061),v=n(45641),S=n(56034),x=new p({initialize:function(C){this.scene=C,this.events=C.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(l.UPDATE,this.update,this),this.events.once(l.SHUTDOWN,this.shutdown,this)},create:function(T){Array.isArray(T)||(T=[T]);for(var C=[],w=0;w<T.length;w++){var b=T[w];b instanceof m||b instanceof v?C.push(b):Array.isArray(b.tweens)?C.push(S(this,b)):C.push(f(this,b))}return C.length===1?C[0]:C},add:function(T){var C=T,w=this.tweens;return C instanceof m||C instanceof v||(Array.isArray(C.tweens)?C=S(this,C):C=f(this,C)),w.push(C.reset()),C},addMultiple:function(T){for(var C,w=[],b=this.tweens,E=0;E<T.length;E++)C=T[E],C instanceof m||C instanceof v||(Array.isArray(C.tweens)?C=S(this,C):C=f(this,C)),b.push(C.reset()),w.push(C);return w},chain:function(T){var C=S(this,T);return this.tweens.push(C.init()),C},getChainedTweens:function(T){return T.getChainedTweens()},has:function(T){return this.tweens.indexOf(T)>-1},existing:function(T){return this.has(T)||this.tweens.push(T.reset()),this},addCounter:function(T){var C=u(this,T);return this.tweens.push(C.reset()),C},stagger:function(T,C){return c(T,C)},setLagSmooth:function(T,C){return T===void 0&&(T=1/1e-8),C===void 0&&(C=0),this.maxLag=T,this.lagSkip=Math.min(C,this.maxLag),this},setFps:function(T){return T===void 0&&(T=240),this.gap=1e3/T,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(T){var C=Date.now()-this.prevTime;C>this.maxLag&&(this.startTime+=C-this.lagSkip),this.prevTime+=C;var w=this.prevTime-this.startTime,b=w-this.nextTime,E=w-this.time*1e3;return b>0||T?(w/=1e3,this.time=w,this.nextTime+=b+(b>=this.gap?4:this.gap-b)):E=0,E},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(T){T===void 0&&(T=!1);var C=this.getDelta(T);if(!(C<=0)){this.processing=!0;var w,b,E=[],A=this.tweens;for(w=0;w<A.length;w++)b=A[w],b.update(C)&&E.push(b);var I=E.length;if(I&&A.length>0){for(w=0;w<I;w++){b=E[w];var R=A.indexOf(b);R>-1&&(b.isPendingRemove()||b.isDestroyed())&&(A.splice(R,1),b.destroy())}E.length=0}this.processing=!1}},remove:function(T){return this.processing?T.setPendingRemoveState():(a(this.tweens,T),T.setRemovedState()),this},reset:function(T){return this.existing(T),T.seek(),T.setActiveState(),this},makeActive:function(T){return this.existing(T),T.setActiveState(),this},each:function(T,C){var w,b=[null];for(w=1;w<arguments.length;w++)b.push(arguments[w]);return this.tweens.forEach(function(E){b[0]=E,T.apply(C,b)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(T){var C=[],w=this.tweens;Array.isArray(T)?T=h(T):T=[T];for(var b=T.length,E=0;E<w.length;E++)for(var A=w[E],I=0;I<b;I++)!A.isDestroyed()&&A.hasTarget(T[I])&&C.push(A);return C},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(T){return this.timeScale=T,this},isTweening:function(T){for(var C=this.tweens,w,b=0;b<C.length;b++)if(w=C[b],w.isPlaying()&&w.hasTarget(T))return!0;return!1},killAll:function(){for(var T=this.processing?this.getTweens():this.tweens,C=0;C<T.length;C++)T[C].destroy();return this.processing||(T.length=0),this},killTweensOf:function(T){for(var C=this.getTweensOf(T),w=0;w<C.length;w++)C[w].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(l.UPDATE,this.update,this),this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.events=null}});d.register("TweenManager",x,"tweens"),r.exports=x},63130:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){return n&&n.hasOwnProperty(a)?n[a]:p};r.exports=g},21902:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(35060),p=n(40587),h=function(u,d){var l=a.Power0;if(typeof u=="string")if(a.hasOwnProperty(u))l=a[u];else{var c="";if(u.indexOf(".")){c=u.substring(u.indexOf(".")+1);var m=c.toLowerCase();m==="in"?c="easeIn":m==="out"?c="easeOut":m==="inout"&&(c="easeInOut")}u=p(u.substring(0,u.indexOf(".")+1)+c),a.hasOwnProperty(u)&&(l=a[u])}else typeof u=="function"&&(l=u);if(!d)return l;var f=d.slice(0);return f.unshift(0),function(v){return f[0]=v,l.apply(this,f)}};r.exports=h},4840:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(63210),p=n(88332),h=n(47614),u={bezier:a,catmull:p,catmullrom:p,linear:h},d=function(l){if(l===null)return null;var c=u.linear;return typeof l=="string"?u.hasOwnProperty(l)&&(c=u[l]):typeof l=="function"&&(c=l),c};r.exports=d},28348:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h;if(n.hasOwnProperty(a)){var u=typeof n[a];u==="function"?h=function(d,l,c,m,f,v){return n[a](d,l,c,m,f,v)}:h=function(){return n[a]}}else typeof p=="function"?h=p:h=function(){return p};return h};r.exports=g},92407:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(53709),p=function(h){var u,d=[];if(h.hasOwnProperty("props"))for(u in h.props)u.substring(0,1)!=="_"&&d.push({key:u,value:h.props[u]});else for(u in h)a.indexOf(u)===-1&&u.substring(0,1)!=="_"&&d.push({key:u,value:h[u]});return d};r.exports=p},65868:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(10850),p=function(h){var u=a(h,"targets",null);return u===null||(typeof u=="function"&&(u=u.call()),Array.isArray(u)||(u=[u])),u};r.exports=p},9744:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(17489),p=n(61616);function h(m){return!!m.getActive&&typeof m.getActive=="function"}function u(m){return!!m.getStart&&typeof m.getStart=="function"}function d(m){return!!m.getEnd&&typeof m.getEnd=="function"}function l(m){return u(m)||d(m)||h(m)}var c=function(m,f){var v,S=function(W,K,B){return B},x=function(W,K,B){return B},T=null,C=typeof f;if(C==="number")S=function(){return f};else if(Array.isArray(f))x=function(){return f[0]},S=function(){return f[f.length-1]};else if(C==="string"){var w=f.toLowerCase(),b=w.substring(0,6)==="random",E=w.substring(0,3)==="int";if(b||E){var A=w.indexOf("("),I=w.indexOf(")"),R=w.indexOf(",");if(A&&I&&R){var N=parseFloat(w.substring(A+1,R)),F=parseFloat(w.substring(R+1,I));b?S=function(){return p(N,F)}:S=function(){return a(N,F)}}else throw new Error("invalid random() format")}else{w=w[0];var P=parseFloat(f.substr(2));switch(w){case"+":S=function(W,K,B){return B+P};break;case"-":S=function(W,K,B){return B-P};break;case"*":S=function(W,K,B){return B*P};break;case"/":S=function(W,K,B){return B/P};break;default:S=function(){return parseFloat(f)}}}}else if(C==="function")S=f;else if(C==="object")if(l(f))h(f)&&(T=f.getActive),d(f)&&(S=f.getEnd),u(f)&&(x=f.getStart);else if(f.hasOwnProperty("value"))v=c(m,f.value);else{var D=f.hasOwnProperty("to"),M=f.hasOwnProperty("from"),L=f.hasOwnProperty("start");if(D&&(M||L)){if(v=c(m,f.to),L){var k=c(m,f.start);v.getActive=k.getEnd}if(M){var V=c(m,f.from);v.getStart=V.getEnd}}}return v||(v={getActive:T,getEnd:S,getStart:x}),v};r.exports=c},68710:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(502),p=n(99730),h=n(20494),u=n(63130),d=n(21902),l=n(28348),c=n(10850),m=n(9744),f=n(72066),v=n(39366),S=function(x,T,C){if(T instanceof v)return T.parent=x,T;C===void 0?C=p:C=f(p,C);var w=c(T,"from",0),b=c(T,"to",1),E=[{value:w}],A=c(T,"delay",C.delay),I=c(T,"easeParams",C.easeParams),R=c(T,"ease",C.ease),N=m("value",b),F=new v(x,E),P=F.add(0,"value",N.getEnd,N.getStart,N.getActive,d(c(T,"ease",R),c(T,"easeParams",I)),l(T,"delay",A),c(T,"duration",C.duration),u(T,"yoyo",C.yoyo),c(T,"hold",C.hold),c(T,"repeat",C.repeat),c(T,"repeatDelay",C.repeatDelay),!1,!1);P.start=w,P.current=w,F.completeDelay=h(T,"completeDelay",0),F.loop=Math.round(h(T,"loop",0)),F.loopDelay=Math.round(h(T,"loopDelay",0)),F.paused=u(T,"paused",!1),F.persist=u(T,"persist",!1),F.callbackScope=c(T,"callbackScope",F);for(var D=a.TYPES,M=0;M<D.length;M++){var L=D[M],k=c(T,L,!1);if(k){var V=c(T,L+"Params",[]);F.setCallback(L,k,V)}}return F};r.exports=S},91944:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(21902),p=n(10850),h=n(83392),u=function(d,l){l===void 0&&(l={});var c,m=p(l,"start",0),f=p(l,"ease",null),v=p(l,"grid",null),S=p(l,"from",0),x=S==="first",T=S==="center",C=S==="last",w=typeof S=="number",b=Array.isArray(d),E=parseFloat(b?d[0]:d),A=b?parseFloat(d[1]):0,I=Math.max(E,A);if(b&&(m+=E),v){var R=v[0],N=v[1],F=0,P=0,D=0,M=0,L=[];C?(F=R-1,P=N-1):w?(F=S%R,P=Math.floor(S/R)):T&&(F=(R-1)/2,P=(N-1)/2);for(var k=h.MIN_SAFE_INTEGER,V=0;V<N;V++){L[V]=[];for(var W=0;W<R;W++){D=F-W,M=P-V;var K=Math.sqrt(D*D+M*M);K>k&&(k=K),L[V][W]=K}}}var B=f?a(f):null;return v?c=function(G,O,$,z){var X=0,Y=z%R,Z=Math.floor(z/R);Y>=0&&Y<R&&Z>=0&&Z<N&&(X=L[Z][Y]);var J;if(b){var tt=A-E;B?J=X/k*tt*B(X/k):J=X/k*tt}else B?J=X*E*B(X/k):J=X*E;return J+m}:c=function(G,O,$,z,X){X--;var Y;x?Y=z:T?Y=Math.abs(X/2-z):C?Y=X-z:w&&(Y=Math.abs(S-z));var Z;if(b){var J;T?J=(A-E)/X*(Y*2):J=(A-E)/X*Y,B?Z=J*B(Y/X):Z=J}else B?Z=X*I*B(Y/X):Z=Y*E;return Z+m},c};r.exports=u},68061:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(502),p=n(99730),h=n(20494),u=n(63130),d=n(21902),l=n(4840),c=n(28348),m=n(92407),f=n(65868),v=n(10850),S=n(9744),x=n(72066),T=n(39366),C=function(w,b,E){if(b instanceof T)return b.parent=w,b;E===void 0?E=p:E=x(p,E);var A=f(b);!A&&E.targets&&(A=E.targets);for(var I=m(b),R=v(b,"delay",E.delay),N=v(b,"duration",E.duration),F=v(b,"easeParams",E.easeParams),P=v(b,"ease",E.ease),D=v(b,"hold",E.hold),M=v(b,"repeat",E.repeat),L=v(b,"repeatDelay",E.repeatDelay),k=u(b,"yoyo",E.yoyo),V=u(b,"flipX",E.flipX),W=u(b,"flipY",E.flipY),K=v(b,"interpolation",E.interpolation),B=function(lt,ut,ct,ht){if(ct==="texture"){var xt=ht,Tt=void 0;Array.isArray(ht)?(xt=ht[0],Tt=ht[1]):ht.hasOwnProperty("value")?(xt=ht.value,Array.isArray(ht.value)?(xt=ht.value[0],Tt=ht.value[1]):typeof ht.value=="string"&&(xt=ht.value)):typeof ht=="string"&&(xt=ht),lt.addFrame(ut,xt,Tt,c(ht,"delay",R),v(ht,"duration",N),v(ht,"hold",D),v(ht,"repeat",M),v(ht,"repeatDelay",L),u(ht,"flipX",V),u(ht,"flipY",W))}else{var At=S(ct,ht),Rt=l(v(ht,"interpolation",K));lt.add(ut,ct,At.getEnd,At.getStart,At.getActive,d(v(ht,"ease",P),v(ht,"easeParams",F)),c(ht,"delay",R),v(ht,"duration",N),u(ht,"yoyo",k),v(ht,"hold",D),v(ht,"repeat",M),v(ht,"repeatDelay",L),u(ht,"flipX",V),u(ht,"flipY",W),Rt,Rt?ht:null)}},G=new T(w,A),O=0;O<I.length;O++)for(var $=I[O].key,z=I[O].value,X=0;X<A.length;X++)$==="scale"&&!A[X].hasOwnProperty("scale")?(B(G,X,"scaleX",z),B(G,X,"scaleY",z)):B(G,X,$,z);G.completeDelay=h(b,"completeDelay",0),G.loop=Math.round(h(b,"loop",0)),G.loopDelay=Math.round(h(b,"loopDelay",0)),G.paused=u(b,"paused",!1),G.persist=u(b,"persist",!1),G.callbackScope=v(b,"callbackScope",G);for(var Y=a.TYPES,Z=0;Z<Y.length;Z++){var J=Y[Z],tt=v(b,J,!1);if(tt){var et=v(b,J+"Params",[]);G.setCallback(J,tt,et)}}return G};r.exports=C},56034:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(502),p=n(20494),h=n(63130),u=n(65868),d=n(10850),l=n(68061),c=n(45641),m=function(f,v){if(v instanceof c)return v.parent=f,v;var S=new c(f);S.startDelay=d(v,"delay",0),S.completeDelay=p(v,"completeDelay",0),S.loop=Math.round(p(v,"loop",d(v,"repeat",0))),S.loopDelay=Math.round(p(v,"loopDelay",d(v,"repeatDelay",0))),S.paused=h(v,"paused",!1),S.persist=h(v,"persist",!0),S.callbackScope=d(v,"callbackScope",S);var x,T=a.TYPES;for(x=0;x<T.length;x++){var C=T[x],w=d(v,C,!1);if(w){var b=d(v,C+"Params",[]);S.setCallback(C,w,b)}}var E=d(v,"tweens",null);if(Array.isArray(E)){var A=[],I=u(v),R=void 0;for(I&&(R={targets:I}),x=0;x<E.length;x++)A.push(l(S,E[x],R));S.add(A)}return S};r.exports=m},79619:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={GetBoolean:n(63130),GetEaseFunction:n(21902),GetInterpolationFunction:n(4840),GetNewValue:n(28348),GetProps:n(92407),GetTargets:n(65868),GetValueOp:n(9744),NumberTweenBuilder:n(68710),StaggerBuilder:n(91944),TweenBuilder:n(68061)}},5570:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="active"},6383:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="complete"},72582:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="loop"},90281:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="pause"},80803:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="repeat"},13640:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="resume"},10472:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="start"},5379:r=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="stop"},43449:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="update"},61541:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports="yoyo"},54272:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={TWEEN_ACTIVE:n(5570),TWEEN_COMPLETE:n(6383),TWEEN_LOOP:n(72582),TWEEN_PAUSE:n(90281),TWEEN_RESUME:n(13640),TWEEN_REPEAT:n(80803),TWEEN_START:n(10472),TWEEN_STOP:n(5379),TWEEN_UPDATE:n(43449),TWEEN_YOYO:n(61541)}},75193:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={States:n(55303),Builders:n(79619),Events:n(54272),TweenManager:n(64532),Tween:n(39366),TweenData:n(15718),TweenFrameData:n(96490),BaseTween:n(502),TweenChain:n(45641)};r.exports=a},502:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(6659),h=n(54272),u=n(55303),d=new a({Extends:p,initialize:function(c){p.call(this),this.parent=c,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=u.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(l){return this.timeScale=l,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(h.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(h.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(h.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(h.TWEEN_COMPLETE,"onComplete")},complete:function(l){return l===void 0&&(l=0),l?(this.setCompleteDelayState(),this.countdown=l):this.onCompleteHandler(),this},completeAfterLoop:function(l){return l===void 0&&(l=0),this.loopCounter>l&&(this.loopCounter=l),this},remove:function(){return this.parent.remove(this),this},stop:function(){return!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(h.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(l){this.countdown-=l,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(h.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(l){return this.countdown-=l,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(h.TWEEN_START,"onStart"),l=0),l},updateCompleteDelay:function(l){this.countdown-=l,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(l,c,m){return m===void 0&&(m=[]),this.callbacks.hasOwnProperty(l)&&(this.callbacks[l]={func:c,params:m}),this},setPendingState:function(){this.state=u.PENDING},setActiveState:function(){this.state=u.ACTIVE},setLoopDelayState:function(){this.state=u.LOOP_DELAY},setCompleteDelayState:function(){this.state=u.COMPLETE_DELAY},setStartDelayState:function(){this.state=u.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=u.PENDING_REMOVE},setRemovedState:function(){this.state=u.REMOVED},setFinishedState:function(){this.state=u.FINISHED},setDestroyedState:function(){this.state=u.DESTROYED},isPending:function(){return this.state===u.PENDING},isActive:function(){return this.state===u.ACTIVE},isLoopDelayed:function(){return this.state===u.LOOP_DELAY},isCompleteDelayed:function(){return this.state===u.COMPLETE_DELAY},isStartDelayed:function(){return this.state===u.START_DELAY},isPendingRemove:function(){return this.state===u.PENDING_REMOVE},isRemoved:function(){return this.state===u.REMOVED},isFinished:function(){return this.state===u.FINISHED},isDestroyed:function(){return this.state===u.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(l){l.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});d.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],r.exports=d},65521:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(56694),p=n(54272),h=n(55303),u=new a({initialize:function(l,c,m,f,v,S,x,T,C,w){this.tween=l,this.targetIndex=c,this.duration=f,this.totalDuration=0,this.delay=0,this.getDelay=m,this.yoyo=v,this.hold=S,this.repeat=x,this.repeatDelay=T,this.repeatCounter=0,this.flipX=C,this.flipY=w,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(d){d===void 0&&(d=this.current),this.tween.targets[this.targetIndex][this.key]=d},setCreatedState:function(){this.state=h.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=h.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=h.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=h.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=h.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=h.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=h.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=h.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===h.CREATED},isDelayed:function(){return this.state===h.DELAY},isPendingRender:function(){return this.state===h.PENDING_RENDER},isPlayingForward:function(){return this.state===h.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===h.PLAYING_BACKWARD},isHolding:function(){return this.state===h.HOLD_DELAY},isRepeating:function(){return this.state===h.REPEAT_DELAY},isComplete:function(){return this.state===h.COMPLETE},setStateFromEnd:function(d){this.yoyo?this.onRepeat(d,!0,!0):this.repeatCounter>0?this.onRepeat(d,!0,!1):this.setCompleteState()},setStateFromStart:function(d){this.repeatCounter>0?this.onRepeat(d,!1):this.setCompleteState()},reset:function(){var d=this.tween,l=d.totalTargets,c=this.targetIndex,m=d.targets[c],f=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(m,f,0,c,l,d),this.repeatCounter=this.repeat===-1?h.MAX:this.repeat,this.setPendingRenderState();var v=this.duration+this.hold;this.yoyo&&(v+=this.duration);var S=v+this.repeatDelay;this.totalDuration=this.delay+v,this.repeat===-1?(this.totalDuration+=S*h.MAX,d.isInfinite=!0):this.repeat>0&&(this.totalDuration+=S*this.repeat),this.totalDuration>d.duration&&(d.duration=this.totalDuration),this.delay<d.startDelay&&(d.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(d,l,c){var m=this.tween,f=m.totalTargets,v=this.targetIndex,S=m.targets[v],x=this.key,T=x!=="texture";if(this.elapsed=d,this.progress=d/this.duration,this.flipX&&S.toggleFlipX(),this.flipY&&S.toggleFlipY(),T&&(l||c)&&(this.start=this.getStartValue(S,x,this.start,v,f,m)),c){this.setPlayingBackwardState(),this.dispatchEvent(p.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,T&&(this.end=this.getEndValue(S,x,this.start,v,f,m)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-d,T&&(this.current=this.start,S[x]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(p.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});r.exports=u},99730:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};r.exports=g},53709:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},39366:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(502),p=n(56694),h=n(54272),u=n(99325),d=n(61286),l=n(83392),c=n(55303),m=n(15718),f=n(96490),v=new p({Extends:a,initialize:function(x,T){a.call(this,x),this.targets=T,this.totalTargets=T.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(S,x,T,C,w,b,E,A,I,R,N,F,P,D,M,L){var k=new m(this,S,x,T,C,w,b,E,A,I,R,N,F,P,D,M,L);return this.totalData=this.data.push(k),k},addFrame:function(S,x,T,C,w,b,E,A,I,R){var N=new f(this,S,x,T,C,w,b,E,A,I,R);return this.totalData=this.data.push(N),N},getValue:function(S){S===void 0&&(S=0);var x=null;return this.data&&(x=this.data[S].current),x},hasTarget:function(S){return this.targets&&this.targets.indexOf(S)!==-1},updateTo:function(S,x,T){if(T===void 0&&(T=!1),S!=="texture")for(var C=0;C<this.totalData;C++){var w=this.data[C];w.key===S&&(w.isPlayingForward()||w.isPlayingBackward())&&(w.end=x,T&&(w.start=w.current))}return this},restart:function(){switch(this.state){case c.REMOVED:case c.FINISHED:this.seek(),this.parent.makeActive(this);break;case c.PENDING:case c.PENDING_REMOVE:this.parent.reset(this);break;case c.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(h.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,a.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(S,x,T){if(S===void 0&&(S=0),x===void 0&&(x=16.6),T===void 0&&(T=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;T||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(h.TWEEN_ACTIVE,"onActive");var C=this.paused;if(this.paused=!1,S>0){for(var w=Math.floor(S/x),b=S-w*x,E=0;E<w;E++)this.update(x);b>0&&this.update(b)}return this.paused=C,this.isSeeking=!1,this},initTweenData:function(S){S===void 0&&(S=!1),this.duration=0,this.startDelay=l.MAX_SAFE_INTEGER;for(var x=this.data,T=0;T<this.totalData;T++)x[T].reset(S);this.duration=Math.max(this.duration,.01);var C=this.duration,w=this.completeDelay,b=this.loopCounter,E=this.loopDelay;b>0?this.totalDuration=C+w+(C+E)*b:this.totalDuration=C+w},reset:function(S){return S===void 0&&(S=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=c.MAX),S||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(h.TWEEN_ACTIVE,"onActive")),this},update:function(S){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(S*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(S),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(S),!1;this.hasStarted||(this.startDelay-=S,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(h.TWEEN_START,"onStart"),S=0));var x=!1;if(this.isActive())for(var T=this.data,C=0;C<this.totalData;C++)T[C].update(S)&&(x=!0);this.elapsed+=S,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=S,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),x||this.nextState();var w=this.isPendingRemove();return w&&this.persist&&(this.setFinishedState(),w=!1),w},forward:function(S){return this.update(S),this},rewind:function(S){return this.update(-S),this},dispatchEvent:function(S,x){if(!this.isSeeking){this.emit(S,this,this.targets);var T=this.callbacks[x];T&&T.func.apply(this.callbackScope,[this,this.targets].concat(T.params))}},destroy:function(){a.prototype.destroy.call(this),this.targets=null}});d.register("tween",function(S){return this.scene.sys.tweens.add(S)}),u.register("tween",function(S){return this.scene.sys.tweens.create(S)}),r.exports=v},45641:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(66458),p=n(502),h=n(56694),u=n(54272),d=n(99325),l=n(61286),c=n(55303),m=new h({Extends:p,initialize:function(v){p.call(this,v),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?c.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive"),this},add:function(f){var v=this.parent.create(f);Array.isArray(v)||(v=[v]);for(var S=this.data,x=0;x<v.length;x++){var T=v[x];T.parent=this,S.push(T.reset())}return this.totalData=S.length,this},remove:function(f){return a(this.data,f),f.setRemovedState(),f===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(f){for(var v=this.data,S=0;S<this.totalData;S++)if(v[S].hasTarget(f))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(f){return f.seek(),f.setActiveState(),this},makeActive:function(f){return f.reset(),f.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var f=this.data,v=this.totalData,S=0;S<v;S++)f[S].reset(!1);this.currentIndex=0,this.currentTween=f[0]},update:function(f){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;f*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(f):this.isCompleteDelayed()?this.updateCompleteDelay(f):this.isStartDelayed()&&(f=this.updateStartCountdown(f));var v=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(f)&&this.nextTween()&&this.nextState(),v=this.isPendingRemove(),v&&this.persist&&(this.setFinishedState(),v=!1)),v},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(f){this.currentIndex=f,this.currentTween=this.data[f],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(u.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(f,v){this.emit(f,this);var S=this.callbacks[v];S&&S.func.apply(this.callbackScope,[this].concat(S.params))},destroy:function(){p.prototype.destroy.call(this),this.currentTween=null}});l.register("tweenchain",function(f){return this.scene.sys.tweens.chain(f)}),d.register("tweenchain",function(f){return this.scene.sys.tweens.create(f)}),r.exports=m},15718:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(65521),p=n(82897),h=n(56694),u=n(54272),d=new h({Extends:a,initialize:function(c,m,f,v,S,x,T,C,w,b,E,A,I,R,N,F,P){a.call(this,c,m,C,w,b,E,A,I,R,N),this.key=f,this.getActiveValue=x,this.getEndValue=v,this.getStartValue=S,this.ease=T,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=F,this.interpolationData=P},reset:function(l){a.prototype.reset.call(this);var c=this.tween.targets[this.targetIndex],m=this.key;l&&(c[m]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(c[m]=this.getActiveValue(c,m,0))},update:function(l){var c=this.tween,m=c.totalTargets,f=this.targetIndex,v=c.targets[f],S=this.key;if(!v)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=l,this.elapsed<=0&&(this.elapsed=0,l=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(v,S,v[S],f,m,c),this.end=this.getEndValue(v,S,this.start,f,m,c),this.current=this.start,v[S]=this.start,this.setPlayingForwardState(),!0;var x=this.isPlayingForward(),T=this.isPlayingBackward();if(x||T){var C=this.elapsed,w=this.duration,b=0,E=!1;C+=l,C>=w?(b=C-w,C=w,E=!0):C<0&&(C=0);var A=p(C/w,0,1);if(this.elapsed=C,this.progress=A,this.previous=this.current,E)x?(this.current=this.end,v[S]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(b)):(this.current=this.start,v[S]=this.start,this.setStateFromStart(b));else{x||(A=1-A);var I=this.ease(A);this.interpolation?this.current=this.interpolation(this.interpolationData,I):this.current=this.start+(this.end-this.start)*I,v[S]=this.current}this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(l,c){var m=this.tween;if(!m.isSeeking){var f=m.targets[this.targetIndex],v=this.key,S=this.current,x=this.previous;m.emit(l,m,v,f,S,x);var T=m.callbacks[c];T&&T.func.apply(m.callbackScope,[m,f,v,S,x].concat(T.params))}},destroy:function(){a.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});r.exports=d},96490:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(65521),p=n(82897),h=n(56694),u=n(54272),d=new h({Extends:a,initialize:function(c,m,f,v,S,x,T,C,w,b,E){a.call(this,c,m,S,x,!1,T,C,w,b,E),this.key="texture",this.startTexture=null,this.endTexture=f,this.startFrame=null,this.endFrame=v,this.yoyo=C!==0},reset:function(l){a.prototype.reset.call(this);var c=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=c.texture.key,this.startFrame=c.frame.name),l&&c.setTexture(this.startTexture,this.startFrame)},update:function(l){var c=this.tween,m=this.targetIndex,f=c.targets[m];if(!f)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=l,this.elapsed<=0&&(this.elapsed=0,l=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&f.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var v=this.isPlayingForward(),S=this.isPlayingBackward();if(v||S){var x=this.elapsed,T=this.duration,C=0,w=!1;x+=l,x>=T?(C=x-T,x=T,w=!0):x<0&&(x=0);var b=p(x/T,0,1);this.elapsed=x,this.progress=b,w&&(v?(f.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(C)):(f.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(C))),this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(l,c){var m=this.tween;if(!m.isSeeking){var f=m.targets[this.targetIndex],v=this.key;m.emit(l,m,v,f);var S=m.callbacks[c];S&&S.func.apply(m.callbackScope,[m,f,v].concat(S.params))}},destroy:function(){a.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});r.exports=d},55303:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};r.exports=g},56694:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(d){return!!d.get&&typeof d.get=="function"||!!d.set&&typeof d.set=="function"}function n(d,l,c){var m=c?d[l]:Object.getOwnPropertyDescriptor(d,l);return!c&&m.value&&typeof m.value=="object"&&(m=m.value),m&&g(m)?(typeof m.enumerable>"u"&&(m.enumerable=!0),typeof m.configurable>"u"&&(m.configurable=!0),m):!1}function a(d,l){var c=Object.getOwnPropertyDescriptor(d,l);return c?(c.value&&typeof c.value=="object"&&(c=c.value),c.configurable===!1):!1}function p(d,l,c,m){for(var f in l)if(l.hasOwnProperty(f)){var v=n(l,f,c);if(v!==!1){var S=m||d;if(a(S.prototype,f)){if(u.ignoreFinals)continue;throw new Error("cannot override final property '"+f+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(d.prototype,f,v)}else d.prototype[f]=l[f]}}function h(d,l){if(l){Array.isArray(l)||(l=[l]);for(var c=0;c<l.length;c++)p(d,l[c].prototype||l[c])}}function u(d){d||(d={});var l,c;if(d.initialize){if(typeof d.initialize!="function")throw new Error("initialize must be a function");l=d.initialize,delete d.initialize}else if(d.Extends){var m=d.Extends;l=function(){m.apply(this,arguments)}}else l=function(){};d.Extends?(l.prototype=Object.create(d.Extends.prototype),l.prototype.constructor=l,c=d.Extends,delete d.Extends):l.prototype.constructor=l;var f=null;return d.Mixins&&(f=d.Mixins,delete d.Mixins),h(l,f),p(l,d,!0,c),l}u.extend=p,u.mixin=h,u.ignoreFinals=!1,r.exports=u},72283:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){};r.exports=g},10618:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){return null};r.exports=g},78991:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u){if(u===void 0&&(u=n),p>0){var d=p-n.length;if(d<=0)return null}if(!Array.isArray(a))return n.indexOf(a)===-1?(n.push(a),h&&h.call(u,a),a):null;for(var l=a.length-1;l>=0;)n.indexOf(a[l])!==-1&&a.splice(l,1),l--;if(l=a.length,l===0)return null;p>0&&l>d&&(a.splice(d),l=d);for(var c=0;c<l;c++){var m=a[c];n.push(m),h&&h.call(u,m)}return a};r.exports=g},48522:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h,u,d){if(p===void 0&&(p=0),d===void 0&&(d=n),h>0){var l=h-n.length;if(l<=0)return null}if(!Array.isArray(a))return n.indexOf(a)===-1?(n.splice(p,0,a),u&&u.call(d,a),a):null;for(var c=a.length-1;c>=0;)n.indexOf(a[c])!==-1&&a.pop(),c--;if(c=a.length,c===0)return null;h>0&&c>l&&(a.splice(l),c=l);for(var m=c-1;m>=0;m--){var f=a[m];n.splice(p,0,f),u&&u.call(d,f)}return a};r.exports=g},58742:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.indexOf(a);return p!==-1&&p<n.length&&(n.splice(p,1),n.push(a)),a};r.exports=g},30164:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(45838),p=function(h,u,d,l,c){l===void 0&&(l=0),c===void 0&&(c=h.length);var m=0;if(a(h,l,c))for(var f=l;f<c;f++){var v=h[f];v[u]===d&&m++}return m};r.exports=p},36337:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h,u=[null];for(h=3;h<arguments.length;h++)u.push(arguments[h]);for(h=0;h<n.length;h++)u[0]=n[h],a.apply(p,u);return n};r.exports=g},46208:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(45838),p=function(h,u,d,l,c){if(l===void 0&&(l=0),c===void 0&&(c=h.length),a(h,l,c)){var m,f=[null];for(m=5;m<arguments.length;m++)f.push(arguments[m]);for(m=l;m<c;m++)f[0]=h[m],u.apply(d,f)}return h};r.exports=p},2406:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(a.length){if(a.length===1)return a[0]}else return NaN;var h=1,u,d;if(p){if(n<a[0][p])return a[0];for(;a[h][p]<n;)h++}else for(;a[h]<n;)h++;return h>a.length&&(h=a.length),p?(u=a[h-1][p],d=a[h][p],d-n<=n-u?a[h]:a[h-1]):(u=a[h-1],d=a[h],d-n<=n-u?d:u)};r.exports=g},5454:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a===void 0&&(a=[]);for(var p=0;p<n.length;p++)Array.isArray(n[p])?g(n[p],a):a.push(n[p]);return a};r.exports=g},71608:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(45838),p=function(h,u,d,l,c){l===void 0&&(l=0),c===void 0&&(c=h.length);var m=[];if(a(h,l,c))for(var f=l;f<c;f++){var v=h[f];(!u||u&&d===void 0&&v.hasOwnProperty(u)||u&&d!==void 0&&v[u]===d)&&m.push(v)}return m};r.exports=p},51463:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(45838),p=function(h,u,d,l,c){if(l===void 0&&(l=0),c===void 0&&(c=h.length),a(h,l,c))for(var m=l;m<c;m++){var f=h[m];if(!u||u&&d===void 0&&f.hasOwnProperty(u)||u&&d!==void 0&&f[u]===d)return f}return null};r.exports=p},72861:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){a===void 0&&(a=0),p===void 0&&(p=n.length);var h=a+Math.floor(Math.random()*p);return n[h]===void 0?null:n[h]};r.exports=g},24218:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(a===p)return n;var h=n.indexOf(a),u=n.indexOf(p);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return h>u||(n.splice(h,1),u===n.length-1?n.push(a):n.splice(u,0,a)),n};r.exports=g},58258:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(a===p)return n;var h=n.indexOf(a),u=n.indexOf(p);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return h<u||(n.splice(h,1),u===0?n.unshift(a):n.splice(u,0,a)),n};r.exports=g},51172:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.indexOf(a);if(p>0){var h=n[p-1],u=n.indexOf(h);n[p]=h,n[u]=a}return n};r.exports=g},68396:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=n.indexOf(a);if(h===-1||p<0||p>=n.length)throw new Error("Supplied index out of bounds");return h!==p&&(n.splice(h,1),n.splice(p,0,a)),a};r.exports=g},27555:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.indexOf(a);if(p!==-1&&p<n.length-1){var h=n[p+1],u=n.indexOf(h);n[p]=h,n[u]=a}return n};r.exports=g},13401:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=[],d,l=!1;if((p||h)&&(l=!0,p||(p=""),h||(h="")),a<n)for(d=n;d>=a;d--)l?u.push(p+d.toString()+h):u.push(d);else for(d=n;d<=a;d++)l?u.push(p+d.toString()+h):u.push(d);return u};r.exports=g},89955:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(67233),p=function(h,u,d){h===void 0&&(h=0),u===void 0&&(u=null),d===void 0&&(d=1),u===null&&(u=h,h=0);for(var l=[],c=Math.max(a((u-h)/(d||1)),0),m=0;m<c;m++)l.push(h),h+=d;return l};r.exports=p},53466:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(p,h,u){var d=p[h];p[h]=p[u],p[u]=d}function n(p,h){return p<h?-1:p>h?1:0}var a=function(p,h,u,d,l){for(u===void 0&&(u=0),d===void 0&&(d=p.length-1),l===void 0&&(l=n);d>u;){if(d-u>600){var c=d-u+1,m=h-u+1,f=Math.log(c),v=.5*Math.exp(2*f/3),S=.5*Math.sqrt(f*v*(c-v)/c)*(m-c/2<0?-1:1),x=Math.max(u,Math.floor(h-m*v/c+S)),T=Math.min(d,Math.floor(h+(c-m)*v/c+S));a(p,h,x,T,l)}var C=p[h],w=u,b=d;for(g(p,u,h),l(p[d],C)>0&&g(p,u,d);w<b;){for(g(p,w,b),w++,b--;l(p[w],C)<0;)w++;for(;l(p[b],C)>0;)b--}l(p[u],C)===0?g(p,u,b):(b++,g(p,b,d)),b<=h&&(u=b+1),h<=b&&(d=b-1)}};r.exports=a},75757:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(10850),p=n(18592),h=function(d,l,c){for(var m=[],f=0;f<d.length;f++)for(var v=0;v<l.length;v++)for(var S=0;S<c;S++)m.push({a:d[f],b:l[v]});return m},u=function(d,l,c){var m=a(c,"max",0),f=a(c,"qty",1),v=a(c,"random",!1),S=a(c,"randomB",!1),x=a(c,"repeat",0),T=a(c,"yoyo",!1),C=[];if(S&&p(l),x===-1)if(m===0)x=0;else{var w=d.length*l.length*f;T&&(w*=2),x=Math.ceil(m/w)}for(var b=0;b<=x;b++){var E=h(d,l,f);v&&p(E),C=C.concat(E),T&&(E.reverse(),C=C.concat(E))}return m&&C.splice(m),C};r.exports=u},66458:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72677),p=function(h,u,d,l){l===void 0&&(l=h);var c;if(!Array.isArray(u))return c=h.indexOf(u),c!==-1?(a(h,c),d&&d.call(l,u),u):null;for(var m=u.length-1,f=[];m>=0;){var v=u[m];c=h.indexOf(v),c!==-1&&(a(h,c),f.push(v),d&&d.call(l,v)),m--}return f};r.exports=p},8324:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72677),p=function(h,u,d,l){if(l===void 0&&(l=h),u<0||u>h.length-1)throw new Error("Index out of bounds");var c=a(h,u);return d&&d.call(l,c),c};r.exports=p},47427:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(45838),p=function(h,u,d,l,c){if(u===void 0&&(u=0),d===void 0&&(d=h.length),c===void 0&&(c=h),a(h,u,d)){var m=d-u,f=h.splice(u,m);if(l)for(var v=0;v<f.length;v++){var S=f[v];l.call(c,S)}return f}else return[]};r.exports=p},50147:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(72677),p=function(h,u,d){u===void 0&&(u=0),d===void 0&&(d=h.length);var l=u+Math.floor(Math.random()*d);return a(h,l)};r.exports=p},80402:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=n.indexOf(a),u=n.indexOf(p);return h!==-1&&u===-1?(n[h]=p,!0):!1};r.exports=g},77640:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a===void 0&&(a=1);for(var p=null,h=0;h<a;h++)p=n.shift(),n.push(p);return p};r.exports=g},38487:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){a===void 0&&(a=1);for(var p=null,h=0;h<a;h++)p=n.pop(),n.unshift(p);return p};r.exports=g},45838:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){var u=n.length;if(a<0||a>u||a>=p||p>u){if(h)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};r.exports=g},27847:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){var p=n.indexOf(a);return p!==-1&&p>0&&(n.splice(p,1),n.unshift(a)),a};r.exports=g},6034:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(45838),p=function(h,u,d,l,c){if(l===void 0&&(l=0),c===void 0&&(c=h.length),a(h,l,c))for(var m=l;m<c;m++){var f=h[m];f.hasOwnProperty(u)&&(f[u]=d)}return h};r.exports=p},18592:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){for(var a=n.length-1;a>0;a--){var p=Math.floor(Math.random()*(a+1)),h=n[a];n[a]=n[p],n[p]=h}return n};r.exports=g},28834:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a=/\D/g;return n.sort(function(p,h){return parseInt(p.replace(a,""),10)-parseInt(h.replace(a,""),10)}),n};r.exports=g},72677:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){if(!(a>=n.length)){for(var p=n.length-1,h=n[a],u=a;u<p;u++)n[u]=n[u+1];return n.length=p,h}};r.exports=g},17922:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(77290);function p(l,c){return String(l).localeCompare(c)}function h(l,c){var m=l.length;if(m<=1)return l;for(var f=new Array(m),v=1;v<m;v*=2){u(l,c,v,f);var S=l;l=f,f=S}return l}function u(l,c,m,f){var v=l.length,S=0,x=m*2,T,C,w,b,E;for(T=0;T<v;T+=x)for(C=T+m,w=C+m,C>v&&(C=v),w>v&&(w=v),b=T,E=C;;)if(b<C&&E<w)c(l[b],l[E])<=0?f[S++]=l[b++]:f[S++]=l[E++];else if(b<C)f[S++]=l[b++];else if(E<w)f[S++]=l[E++];else break}var d=function(l,c){if(c===void 0&&(c=p),!l||l.length<2)return l;if(a.features.stableSort)return l.sort(c);var m=h(l,c);return m!==l&&u(m,null,l.length,l),l};r.exports=d},96928:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(a===p)return n;var h=n.indexOf(a),u=n.indexOf(p);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return n[h]=p,n[u]=a,n};r.exports=g},59959:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Matrix:n(13515),Add:n(78991),AddAt:n(48522),BringToTop:n(58742),CountAllMatching:n(30164),Each:n(36337),EachInRange:n(46208),FindClosestInSorted:n(2406),Flatten:n(5454),GetAll:n(71608),GetFirst:n(51463),GetRandom:n(72861),MoveDown:n(51172),MoveTo:n(68396),MoveUp:n(27555),MoveAbove:n(24218),MoveBelow:n(58258),NumberArray:n(13401),NumberArrayStep:n(89955),QuickSelect:n(53466),Range:n(75757),Remove:n(66458),RemoveAt:n(8324),RemoveBetween:n(47427),RemoveRandomElement:n(50147),Replace:n(80402),RotateLeft:n(77640),RotateRight:n(38487),SafeRange:n(45838),SendToBack:n(27847),SetAll:n(6034),Shuffle:n(18592),SortByDigits:n(28834),SpliceOne:n(72677),StableSort:n(17922),Swap:n(96928)}},97494:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){if(!Array.isArray(n)||!Array.isArray(n[0]))return!1;for(var a=n[0].length,p=1;p<n.length;p++)if(n[p].length!==a)return!1;return!0};r.exports=g},68428:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(76400),p=n(97494),h=function(u){var d="";if(!p(u))return d;for(var l=0;l<u.length;l++){for(var c=0;c<u[l].length;c++){var m=u[l][c].toString();m!=="undefined"?d+=a(m,2):d+="?",c<u[l].length-1&&(d+=" |")}if(l<u.length-1){d+=`
`;for(var f=0;f<u[l].length;f++)d+="---",f<u[l].length-1&&(d+="+");d+=`
`}}return d};r.exports=h},59521:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.reverse()};r.exports=g},51995:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){for(var a=0;a<n.length;a++)n[a].reverse();return n};r.exports=g},89011:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(63515),p=function(h){return a(h,180)};r.exports=p},42549:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(63515),p=function(h){return a(h,90)};r.exports=p},63515:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(97494),p=n(78581),h=function(u,d){if(d===void 0&&(d=90),!a(u))return null;if(typeof d!="string"&&(d=(d%360+360)%360),d===90||d===-270||d==="rotateLeft")u=p(u),u.reverse();else if(d===-90||d===270||d==="rotateRight")u.reverse(),u=p(u);else if(Math.abs(d)===180||d==="rotate180"){for(var l=0;l<u.length;l++)u[l].reverse();u.reverse()}return u};r.exports=h},14305:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(63515),p=function(h){return a(h,-90)};r.exports=p},27365:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(77640),p=n(38487),h=function(u,d,l){if(d===void 0&&(d=0),l===void 0&&(l=0),l!==0&&(l<0?a(u,Math.abs(l)):p(u,l)),d!==0)for(var c=0;c<u.length;c++){var m=u[c];d<0?a(m,Math.abs(d)):p(m,d)}return u};r.exports=h},78581:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){for(var a=n.length,p=n[0].length,h=new Array(p),u=0;u<p;u++){h[u]=new Array(a);for(var d=a-1;d>-1;d--)h[u][d]=n[d][u]}return h};r.exports=g},13515:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={CheckMatrix:n(97494),MatrixToString:n(68428),ReverseColumns:n(59521),ReverseRows:n(51995),Rotate180:n(89011),RotateLeft:n(42549),RotateMatrix:n(63515),RotateRight:n(14305),Translate:n(27365),TransposeMatrix:n(78581)}},40581:r=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(a,p){for(var h=new Uint8Array(a),u=h.length,d=p?"data:"+p+";base64,":"",l=0;l<u;l+=3)d+=g[h[l]>>2],d+=g[(h[l]&3)<<4|h[l+1]>>4],d+=g[(h[l+1]&15)<<2|h[l+2]>>6],d+=g[h[l+2]&63];return u%3===2?d=d.substring(0,d.length-1)+"=":u%3===1&&(d=d.substring(0,d.length-2)+"=="),d};r.exports=n},82329:r=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),a=0;a<g.length;a++)n[g.charCodeAt(a)]=a;var p=function(h){h=h.substr(h.indexOf(",")+1);var u=h.length,d=u*.75,l=0,c,m,f,v;h[u-1]==="="&&(d--,h[u-2]==="="&&d--);for(var S=new ArrayBuffer(d),x=new Uint8Array(S),T=0;T<u;T+=4)c=n[h.charCodeAt(T)],m=n[h.charCodeAt(T+1)],f=n[h.charCodeAt(T+2)],v=n[h.charCodeAt(T+3)],x[l++]=c<<2|m>>4,x[l++]=(m&15)<<4|f>>2,x[l++]=(f&3)<<6|v&63;return S};r.exports=p},78417:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={ArrayBufferToBase64:n(40581),Base64ToArrayBuffer:n(82329)}},22178:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Array:n(59959),Base64:n(78417),Objects:n(64615),String:n(50379),NOOP:n(72283),NULL:n(10618)}},32742:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a={};for(var p in n)Array.isArray(n[p])?a[p]=n[p].slice(0):a[p]=n[p];return a};r.exports=g},28699:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){var a,p,h;if(typeof n!="object"||n===null)return n;a=Array.isArray(n)?[]:{};for(h in n)p=n[h],a[h]=g(p);return a};r.exports=g},98611:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(42911),p=function(){var h,u,d,l,c,m,f=arguments[0]||{},v=1,S=arguments.length,x=!1;for(typeof f=="boolean"&&(x=f,f=arguments[1]||{},v=2),S===v&&(f=this,--v);v<S;v++)if((h=arguments[v])!=null)for(u in h)d=f[u],l=h[u],f!==l&&(x&&l&&(a(l)||(c=Array.isArray(l)))?(c?(c=!1,m=d&&Array.isArray(d)?d:[]):m=d&&a(d)?d:{},f[u]=p(x,m,l)):l!==void 0&&(f[u]=l));return f};r.exports=p},20494:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(5923),p=n(10850),h=function(u,d,l){var c=p(u,d,null);if(c===null)return l;if(Array.isArray(c))return a.RND.pick(c);if(typeof c=="object"){if(c.hasOwnProperty("randInt"))return a.RND.integerInRange(c.randInt[0],c.randInt[1]);if(c.hasOwnProperty("randFloat"))return a.RND.realInRange(c.randFloat[0],c.randFloat[1])}else if(typeof c=="function")return c(d);return c};r.exports=h},72632:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){var h=typeof n;return!n||h==="number"||h==="string"?p:n.hasOwnProperty(a)&&n[a]!==void 0?n[a]:p};r.exports=g},94324:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(10850),p=n(82897),h=function(u,d,l,c,m){m===void 0&&(m=l);var f=a(u,d,m);return p(f,l,c)};r.exports=h},10850:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){if(!n&&!h||typeof n=="number")return p;if(n&&n.hasOwnProperty(a))return n[a];if(h&&h.hasOwnProperty(a))return h[a];if(a.indexOf(".")!==-1){for(var u=a.split("."),d=n,l=h,c=p,m=p,f=!0,v=!0,S=0;S<u.length;S++)d&&d.hasOwnProperty(u[S])?(c=d[u[S]],d=d[u[S]]):f=!1,l&&l.hasOwnProperty(u[S])?(m=l[u[S]],l=l[u[S]]):v=!1;return f?c:v?m:p}else return p};r.exports=g},87701:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){for(var p=0;p<a.length;p++)if(!n.hasOwnProperty(a[p]))return!1;return!0};r.exports=g},53523:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){for(var p=0;p<a.length;p++)if(n.hasOwnProperty(a[p]))return!0;return!1};r.exports=g},19256:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.hasOwnProperty(a)};r.exports=g},42911:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){if(!n||typeof n!="object"||n.nodeType||n===n.window)return!1;try{if(n.constructor&&!{}.hasOwnProperty.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};r.exports=g},30657:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(32742),p=function(h,u){var d=a(h);for(var l in u)d.hasOwnProperty(l)||(d[l]=u[l]);return d};r.exports=p},72066:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(32742),p=function(h,u){var d=a(h);for(var l in u)d.hasOwnProperty(l)&&(d[l]=u[l]);return d};r.exports=p},28820:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=n(19256),p=function(h,u){for(var d={},l=0;l<u.length;l++){var c=u[l];a(h,c)&&(d[c]=h[c])}return d};r.exports=p},22440:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p){if(!n||typeof n=="number")return!1;if(n.hasOwnProperty(a))return n[a]=p,!0;if(a.indexOf(".")!==-1){for(var h=a.split("."),u=n,d=n,l=0;l<h.length;l++)if(u.hasOwnProperty(h[l]))d=u,u=u[h[l]];else return!1;return d[h[h.length-1]]=p,!0}return!1};r.exports=g},64615:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Clone:n(32742),DeepCopy:n(28699),Extend:n(98611),GetAdvancedValue:n(20494),GetFastValue:n(72632),GetMinMaxValue:n(94324),GetValue:n(10850),HasAll:n(87701),HasAny:n(53523),HasValue:n(19256),IsPlainObject:n(42911),Merge:n(30657),MergeRight:n(72066),Pick:n(28820),SetValue:n(22440)}},69429:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return n.replace(/%([0-9]+)/g,function(p,h){return a[Number(h)-1]})};r.exports=g},76400:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a,p,h){a===void 0&&(a=0),p===void 0&&(p=" "),h===void 0&&(h=3),n=n.toString();var u=0;if(a+1>=n.length)switch(h){case 1:n=new Array(a+1-n.length).join(p)+n;break;case 3:var d=Math.ceil((u=a-n.length)/2),l=u-d;n=new Array(l+1).join(p)+n+new Array(d+1).join(p);break;default:n=n+new Array(a+1-n.length).join(p);break}return n};r.exports=g},76872:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n,a){return a===0?n.slice(1):n.slice(0,a-1)+n.slice(a)};r.exports=g},8051:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n.split("").reverse().join("")};r.exports=g},76583:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var a=Math.random()*16|0,p=n==="x"?a:a&3|8;return p.toString(16)})};r.exports=g},40587:r=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(n){return n&&n[0].toUpperCase()+n.slice(1)};r.exports=g},50379:(r,g,n)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */r.exports={Format:n(69429),Pad:n(76400),RemoveAt:n(76872),Reverse:n(8051),UppercaseFirst:n(40587),UUID:n(76583)}}},i={};function o(r){var g=i[r];if(g!==void 0)return g.exports;var n=i[r]={exports:{}};return s[r](n,n.exports,o),n.exports}o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var y=o(92491);return y})())})(qP);var lG=qP.exports;const Rh=vm(lG),uG=e=>{const t=e.scene,s={type:Rh.AUTO,backgroundColor:ci.bg,scale:{mode:Rh.Scale.ENVELOP,parent:"phaser-container",width:Ty,height:Cy},scene:[t]},i=new Rh.Game(s);return window.addEventListener("resize",()=>{i==null||i.scale.refresh()}),()=>{i==null||i.destroy(!0)}},hG="/MOSAIC/assets/place-87e1c512.mp3";class cG extends Rh.Scene{constructor(s){super({key:"mosaicScene",active:!0});ee(this,"mosaicGame");ee(this,"prevPlace",[]);ee(this,"indicator");ee(this,"stoneBoard");ee(this,"pointText");ee(this,"placeSound");ee(this,"updateTasks",[]);ee(this,"size",Zm);ee(this,"stoneSize",fl/this.size);ee(this,"board");ee(this,"isRendering",!1);this.mosaicGame=s,this.size=s.size,this.stoneSize=fl/this.size,this.board=this.mosaicGame.board}preload(){this.load.audio("place",[hG])}create(){this.placeSound=this.sound.add("place"),this.add.rectangle(Ty/2,Cy/2,fl,fl,ci.frame).setDepth(-1),this.indicator=this.add.rectangle(Ty/2,Cy/2,fl+$b,fl+$b,ci.bg).setDepth(-2),this.stoneBoard=this.mosaicGame.board.mapPiece(({position:s})=>({stone:new fG(this,s),hole:new dG(this,s)})),this.pointText=this.add.text(0,0,"0:0",{fontSize:"48px",fontFamily:"Arial"}),this.allRerender(),this.mosaicGame.turn()}update(){var s;this.updateTasks.length>0&&(this.updateTasks[0].n==0?(s=this.updateTasks.shift())==null||s.task():this.updateTasks[0].n-=1)}addTask(s,i=0){this.updateTasks.push({task:s,n:i})}stoneRender(s,i){const{stone:o,hole:y}=this.stoneBoard.get(s);i?(y.render(),o.render(!0),this.placeSound.play()):o.render(!1)}holeRender(){this.stoneBoard.forEachPiece(({value:{hole:s}})=>{s.render()})}render(s){this.board=this.mosaicGame.board,this.prevPlace.forEach(i=>{this.stoneRender(i)}),this.prevPlace=s,s.forEach((i,o)=>{this.addTask(()=>{this.stoneRender(i,!0)},o==0?0:$G)}),this.addTask(()=>{this.holeRender();const i=this.mosaicGame.player;this.indicator.fillColor=ci[`stone${i}`],this.pointText.setText(`${this.mosaicGame.getPoint(ge.first)}:${this.mosaicGame.getPoint(ge.second)}`)}),this.addTask(()=>{this.mosaicGame.turn()})}move(s){this.addTask(()=>{this.mosaicGame.move(s)})}allRerender(){this.board=this.mosaicGame.board,this.prevPlace=[],this.stoneBoard.forEachPiece(({value:{stone:i,hole:o}})=>{i.render(),o.render()});const s=this.mosaicGame.player;this.indicator.fillColor=ci[`stone${s}`],this.pointText.setText(`${this.mosaicGame.getPoint(ge.first)}:${this.mosaicGame.getPoint(ge.second)}`)}stonePosition(s){const{i,j:o,k:y}=s;return{x:(o+(this.size-i)/2)*this.stoneSize+Mb.x,y:(y+(this.size-i)/2)*this.stoneSize+Mb.y}}setInteractive(s){this.stoneBoard.forEachPiece(({value:{hole:i}})=>{i.setInteractive(s)})}}class fG extends Rh.GameObjects.Container{constructor(s,i){const{x:o,y}=s.stonePosition(i);super(s,o,y);ee(this,"pos");ee(this,"mosaicScene");ee(this,"rim");ee(this,"mid");this.mosaicScene=s,this.pos=i,s.add.existing(this),this.setDepth(s.size-i.i),this.rim=s.add.circle(0,0,s.stoneSize/2,ci.rim),this.mid=s.add.circle(0,0,s.stoneSize/2*LG,ci.rim),this.add([this.rim,this.mid])}render(s){const i=this.mosaicScene.board.get(this.pos);i==0?this.setVisible(!1):(this.setVisible(!0),s?this.rim.setStrokeStyle(3,ci[`stone${i}`],1):this.rim.setStrokeStyle(),this.mid.fillColor=ci[`stone${i}`])}}class dG{constructor(t,s){ee(this,"pos");ee(this,"mosaicScene");ee(this,"hole");const{x:i,y:o}=t.stonePosition(s);this.mosaicScene=t,this.pos=s,this.hole=t.add.circle(i,o,t.stoneSize/2*MG,ci.innactive),this.hole.setDepth(t.size-s.i),this.hole.on("pointerdown",async()=>{console.log("click",this.hole.x,this.hole.y,s),t.move(s)}),this.hole.setDepth(t.size*2)}render(){const t=this.mosaicScene.board.legalPieces().get(this.pos);this.hole.setVisible(t)}setInteractive(t){t&&this.mosaicScene.board.legalPieces().get(this.pos)?(this.hole.setInteractive(),this.hole.fillColor=ci.hole):(this.hole.disableInteractive(),this.hole.fillColor=ci.innactive)}}const pG=e=>e.charCodeAt(0).toString(2),mG=e=>String.fromCharCode(parseInt(e,2)),L2=(e,t)=>("0".repeat(e)+t).slice(-e),vy=(e,t=new Array(0),s="")=>{if(e[0]!==null)return t.push([e[0],s]),t;if(!e[2])throw new Error("You assigned wrong tree as argument");const i=vy(e[2][0],t,s+"0");return vy(e[2][1],i,s+"1")},gy=(e,t=new Array(0),s="")=>{if(e[0]!==null)return t.push([e[0],s]),t;if(!e[1])throw new Error("You assigned wrong tree as argument");const i=gy(e[1][0],t,s+"0");return gy(e[1][1],i,s+"1")},xy=(e,t)=>{if(e==="")return e;const s=e.slice(0,1);if(e=e.slice(1),s==="1"){const o=e.slice(0,8);e=e.slice(8);const y=mG(o);return t[0]=y,e}if(t.push([[null],[null]]),!t[1])throw new Error("resultArray has no index 1");const i=xy(e,t[1][0]);return xy(i,t[1][1])},vG=(e,t)=>{t.sort((y,r)=>y[1].length-r[1].length);let s="",i="",o=e;for(;o!=="";){i+=o[0],o=o.slice(1);for(let y=0;y<t.length&&!(i.length<t[y][1].length);y++)if(!(i.length>t[y][1].length)&&i===t[y][1]){s+=t[y][0],i="";break}}return s},Lb=(e,t)=>{const s=e.slice(0,t),i=e.slice(t);return{spliced:s,remaining:i}},gG=e=>{const t=Lb(e,16),s=parseInt(t.spliced,2),i=Lb(t.remaining,s),o=[null];xy(i.spliced,o);const y=gy(o);return vG(i.remaining,y)},xG=e=>e.replace(/[-\/\\^$*+?.()|\[\]{}]/g,"\\$&"),yG=e=>{let t=e;const s=new Array(0);for(;t.length>0;){const i=xG(t[0]),o=new RegExp(i,"g"),y=(t.match(o)||[]).length,r=[t[0],y];s.push(r),t=t.replace(o,"")}return s},SG=(e,t,s)=>{const i=e[s][1];let o=t;for(let y=t;y<s;y++)e[y][1]>i||([e[y],e[o]]=[e[o],e[y]],o++);return[e[o],e[s]]=[e[s],e[o]],o},yy=(e,t=0,s=e.length-1)=>{if(t>=s)return;const i=SG(e,t,s);yy(e,t,i-1),yy(e,i+1,s)},_P=e=>{if(e.length<=1)return e;yy(e);const t=[null,e[0][1]+e[1][1],[e[0],e[1]]];return e.splice(0,2),e.unshift(t),_P(e)},TG=(e,t)=>{let s=[],i=[];for(let y=0;y<t.length;y++)[s[y],i[y]]=[t[y][0],t[y][1]];let o="";for(let y=0;y<e.length;y++){const r=s.indexOf(e[y]);o+=i[r]}return o},Sy=(e,t="")=>{if(e[0]!==null){const i=pG(e[0]);return t+=`1${L2(8,i)}`}if(t+="0",!e[2])throw new Error("You assigned wrong array...");const s=Sy(e[2][0],t);return Sy(e[2][1],s)},CG=e=>{const t=e.length;return L2(16,t.toString(2))},wG=e=>{const t=yG(e),s=_P(t)[0],i=vy(s),o=Sy(s),y=CG(o),r=TG(e,i);return y+o+r};function t3(e){return e.reduce((t,s)=>t+s)}function e3(e){return e.reduce((t,s,i,o)=>o[t]>s?t:i,0)}function EG(e,t){const s=[...e];return s.reduce((i,o,y)=>y%t?i:[...i,s.slice(y,y+t).join("")],new Array)}function bG(e,t){return e.reduce((s,i,o)=>o%t?s:[...s,e.slice(o,o+t)],new Array)}function AG(e){if(e.length==0)return"1";if(e.length==1)return"1"+e;if([...e].reduce((i,o)=>i&&o==e[0],!0))return"1"+e[0]+e.length.toString();const t=wG(e);return"0"+eu.encodeFromString(t)}function IG(e){const[t,s]=[e.slice(0,1),e.slice(1)];if(t=="1")return s.length==0?"":s.length==1?s:s.slice(0,1).repeat(parseInt(s.slice(1)));const i=eu.decodeToString(s);return gG(i)}const er=class er{static singleEncode(t){let s="";try{const i=typeof t=="string"?parseInt(t,2):t;s=er.TABLE[i]}catch(i){i instanceof Error&&console.log(i.message)}finally{return s}}static singleDecode(t){let s=-1;try{s=er.TABLE.search(new RegExp(t)),er.TABLE[s]==t}catch(i){i instanceof Error&&console.log(i.message)}finally{return s}}static encodeFromString(t){const s=EG(t,6),i=s.map(o=>er.singleEncode(o));return s[s.length-1].length+i.join("")}static decodeToString(t){const[s,i]=[t.slice(0,1),t.slice(1)],o=parseInt(s,10);return[...i].map((r,g,n)=>L2(g==n.length-1?o:6,er.singleDecode(r).toString(2))).join("")}static encodeFromArray(t){return t.map(s=>er.singleEncode(s)).join("")}static decodeToArray(t){return[...t].map(i=>er.singleDecode(i))}};ee(er,"TABLE","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_");let eu=er;var n3={exports:{}};/*!
* sweetalert2 v11.7.19
* Released under the MIT License.
*/(function(e,t){(function(s,i){e.exports=i()})(qn,function(){const i={},o=()=>{i.previousActiveElement instanceof HTMLElement?(i.previousActiveElement.focus(),i.previousActiveElement=null):document.body&&document.body.focus()},y=U=>new Promise(H=>{if(!U)return H();const Q=window.scrollX,nt=window.scrollY;i.restoreFocusTimeout=setTimeout(()=>{o(),H()},100),window.scrollTo(Q,nt)});var r={promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const g="swal2-",a=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((U,H)=>(U[H]=g+H,U),{}),h=["success","warning","info","question","error"].reduce((U,H)=>(U[H]=g+H,U),{}),u="SweetAlert2:",d=U=>U.charAt(0).toUpperCase()+U.slice(1),l=U=>{console.warn(`${u} ${typeof U=="object"?U.join(" "):U}`)},c=U=>{console.error(`${u} ${U}`)},m=[],f=U=>{m.includes(U)||(m.push(U),l(U))},v=(U,H)=>{f(`"${U}" is deprecated and will be removed in the next major release. Please use "${H}" instead.`)},S=U=>typeof U=="function"?U():U,x=U=>U&&typeof U.toPromise=="function",T=U=>x(U)?U.toPromise():Promise.resolve(U),C=U=>U&&Promise.resolve(U)===U,w=()=>document.body.querySelector(`.${a.container}`),b=U=>{const H=w();return H?H.querySelector(U):null},E=U=>b(`.${U}`),A=()=>E(a.popup),I=()=>E(a.icon),R=()=>E(a["icon-content"]),N=()=>E(a.title),F=()=>E(a["html-container"]),P=()=>E(a.image),D=()=>E(a["progress-steps"]),M=()=>E(a["validation-message"]),L=()=>b(`.${a.actions} .${a.confirm}`),k=()=>b(`.${a.actions} .${a.cancel}`),V=()=>b(`.${a.actions} .${a.deny}`),W=()=>E(a["input-label"]),K=()=>b(`.${a.loader}`),B=()=>E(a.actions),G=()=>E(a.footer),O=()=>E(a["timer-progress-bar"]),$=()=>E(a.close),z=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,X=()=>{const U=A();if(!U)return[];const H=U.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),Q=Array.from(H).sort((Gt,Te)=>{const Tn=parseInt(Gt.getAttribute("tabindex")||"0"),ln=parseInt(Te.getAttribute("tabindex")||"0");return Tn>ln?1:Tn<ln?-1:0}),nt=U.querySelectorAll(z),yt=Array.from(nt).filter(Gt=>Gt.getAttribute("tabindex")!=="-1");return[...new Set(Q.concat(yt))].filter(Gt=>Jt(Gt))},Y=()=>et(document.body,a.shown)&&!et(document.body,a["toast-shown"])&&!et(document.body,a["no-backdrop"]),Z=()=>{const U=A();return U?et(U,a.toast):!1},J=()=>{const U=A();return U?U.hasAttribute("data-loading"):!1},tt=(U,H)=>{if(U.textContent="",H){const nt=new DOMParser().parseFromString(H,"text/html");Array.from(nt.querySelector("head").childNodes).forEach(yt=>{U.appendChild(yt)}),Array.from(nt.querySelector("body").childNodes).forEach(yt=>{yt instanceof HTMLVideoElement||yt instanceof HTMLAudioElement?U.appendChild(yt.cloneNode(!0)):U.appendChild(yt)})}},et=(U,H)=>{if(!H)return!1;const Q=H.split(/\s+/);for(let nt=0;nt<Q.length;nt++)if(!U.classList.contains(Q[nt]))return!1;return!0},lt=(U,H)=>{Array.from(U.classList).forEach(Q=>{!Object.values(a).includes(Q)&&!Object.values(h).includes(Q)&&!Object.values(H.showClass).includes(Q)&&U.classList.remove(Q)})},ut=(U,H,Q)=>{if(lt(U,H),H.customClass&&H.customClass[Q]){if(typeof H.customClass[Q]!="string"&&!H.customClass[Q].forEach){l(`Invalid type of customClass.${Q}! Expected string or iterable object, got "${typeof H.customClass[Q]}"`);return}Tt(U,H.customClass[Q])}},ct=(U,H)=>{if(!H)return null;switch(H){case"select":case"textarea":case"file":return U.querySelector(`.${a.popup} > .${a[H]}`);case"checkbox":return U.querySelector(`.${a.popup} > .${a.checkbox} input`);case"radio":return U.querySelector(`.${a.popup} > .${a.radio} input:checked`)||U.querySelector(`.${a.popup} > .${a.radio} input:first-child`);case"range":return U.querySelector(`.${a.popup} > .${a.range} input`);default:return U.querySelector(`.${a.popup} > .${a.input}`)}},ht=U=>{if(U.focus(),U.type!=="file"){const H=U.value;U.value="",U.value=H}},xt=(U,H,Q)=>{!U||!H||(typeof H=="string"&&(H=H.split(/\s+/).filter(Boolean)),H.forEach(nt=>{Array.isArray(U)?U.forEach(yt=>{Q?yt.classList.add(nt):yt.classList.remove(nt)}):Q?U.classList.add(nt):U.classList.remove(nt)}))},Tt=(U,H)=>{xt(U,H,!0)},At=(U,H)=>{xt(U,H,!1)},Rt=(U,H)=>{const Q=Array.from(U.children);for(let nt=0;nt<Q.length;nt++){const yt=Q[nt];if(yt instanceof HTMLElement&&et(yt,H))return yt}},mt=(U,H,Q)=>{Q===`${parseInt(Q)}`&&(Q=parseInt(Q)),Q||parseInt(Q)===0?U.style[H]=typeof Q=="number"?`${Q}px`:Q:U.style.removeProperty(H)},bt=function(U){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";U&&(U.style.display=H)},Ct=U=>{U&&(U.style.display="none")},Ht=(U,H,Q,nt)=>{const yt=U.querySelector(H);yt&&(yt.style[Q]=nt)},zt=function(U,H){let Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";H?bt(U,Q):Ct(U)},Jt=U=>!!(U&&(U.offsetWidth||U.offsetHeight||U.getClientRects().length)),ae=()=>!Jt(L())&&!Jt(V())&&!Jt(k()),_t=U=>U.scrollHeight>U.clientHeight,Zt=U=>{const H=window.getComputedStyle(U),Q=parseFloat(H.getPropertyValue("animation-duration")||"0"),nt=parseFloat(H.getPropertyValue("transition-duration")||"0");return Q>0||nt>0},de=function(U){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const Q=O();Jt(Q)&&(H&&(Q.style.transition="none",Q.style.width="100%"),setTimeout(()=>{Q.style.transition=`width ${U/1e3}s linear`,Q.style.width="0%"},10))},He=()=>{const U=O(),H=parseInt(window.getComputedStyle(U).width);U.style.removeProperty("transition"),U.style.width="100%";const Q=parseInt(window.getComputedStyle(U).width),nt=H/Q*100;U.style.width=`${nt}%`},Ne=()=>typeof window>"u"||typeof document>"u",sn=`
 <div aria-labelledby="${a.title}" aria-describedby="${a["html-container"]}" class="${a.popup}" tabindex="-1">
   <button type="button" class="${a.close}"></button>
   <ul class="${a["progress-steps"]}"></ul>
   <div class="${a.icon}"></div>
   <img class="${a.image}" />
   <h2 class="${a.title}" id="${a.title}"></h2>
   <div class="${a["html-container"]}" id="${a["html-container"]}"></div>
   <input class="${a.input}" id="${a.input}" />
   <input type="file" class="${a.file}" />
   <div class="${a.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${a.select}" id="${a.select}"></select>
   <div class="${a.radio}"></div>
   <label class="${a.checkbox}">
     <input type="checkbox" id="${a.checkbox}" />
     <span class="${a.label}"></span>
   </label>
   <textarea class="${a.textarea}" id="${a.textarea}"></textarea>
   <div class="${a["validation-message"]}" id="${a["validation-message"]}"></div>
   <div class="${a.actions}">
     <div class="${a.loader}"></div>
     <button type="button" class="${a.confirm}"></button>
     <button type="button" class="${a.deny}"></button>
     <button type="button" class="${a.cancel}"></button>
   </div>
   <div class="${a.footer}"></div>
   <div class="${a["timer-progress-bar-container"]}">
     <div class="${a["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Vn=()=>{const U=w();return U?(U.remove(),At([document.documentElement,document.body],[a["no-backdrop"],a["toast-shown"],a["has-column"]]),!0):!1},us=()=>{i.currentInstance.resetValidationMessage()},br=()=>{const U=A(),H=Rt(U,a.input),Q=Rt(U,a.file),nt=U.querySelector(`.${a.range} input`),yt=U.querySelector(`.${a.range} output`),Gt=Rt(U,a.select),Te=U.querySelector(`.${a.checkbox} input`),Tn=Rt(U,a.textarea);H.oninput=us,Q.onchange=us,Gt.onchange=us,Te.onchange=us,Tn.oninput=us,nt.oninput=()=>{us(),yt.value=nt.value},nt.onchange=()=>{us(),yt.value=nt.value}},Ar=U=>typeof U=="string"?document.querySelector(U):U,Ir=U=>{const H=A();H.setAttribute("role",U.toast?"alert":"dialog"),H.setAttribute("aria-live",U.toast?"polite":"assertive"),U.toast||H.setAttribute("aria-modal","true")},Rr=U=>{window.getComputedStyle(U).direction==="rtl"&&Tt(w(),a.rtl)},P5=U=>{const H=Vn();if(Ne()){c("SweetAlert2 requires document to initialize");return}const Q=document.createElement("div");Q.className=a.container,H&&Tt(Q,a["no-transition"]),tt(Q,sn);const nt=Ar(U.target);nt.appendChild(Q),Ir(U),Rr(nt),br()},Zg=(U,H)=>{U instanceof HTMLElement?H.appendChild(U):typeof U=="object"?F5(U,H):U&&tt(H,U)},F5=(U,H)=>{U.jquery?O5(H,U):tt(H,U.toString())},O5=(U,H)=>{if(U.textContent="",0 in H)for(let Q=0;Q in H;Q++)U.appendChild(H[Q].cloneNode(!0));else U.appendChild(H.cloneNode(!0))},Wu=(()=>{if(Ne())return!1;const U=document.createElement("div"),H={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const Q in H)if(Object.prototype.hasOwnProperty.call(H,Q)&&typeof U.style[Q]<"u")return H[Q];return!1})(),D5=(U,H)=>{const Q=B(),nt=K();!Q||!nt||(!H.showConfirmButton&&!H.showDenyButton&&!H.showCancelButton?Ct(Q):bt(Q),ut(Q,H,"actions"),L5(Q,nt,H),tt(nt,H.loaderHtml||""),ut(nt,H,"loader"))};function L5(U,H,Q){const nt=L(),yt=V(),Gt=k();!nt||!yt||!Gt||(Jg(nt,"confirm",Q),Jg(yt,"deny",Q),Jg(Gt,"cancel",Q),M5(nt,yt,Gt,Q),Q.reverseButtons&&(Q.toast?(U.insertBefore(Gt,nt),U.insertBefore(yt,nt)):(U.insertBefore(Gt,H),U.insertBefore(yt,H),U.insertBefore(nt,H))))}function M5(U,H,Q,nt){if(!nt.buttonsStyling){At([U,H,Q],a.styled);return}Tt([U,H,Q],a.styled),nt.confirmButtonColor&&(U.style.backgroundColor=nt.confirmButtonColor,Tt(U,a["default-outline"])),nt.denyButtonColor&&(H.style.backgroundColor=nt.denyButtonColor,Tt(H,a["default-outline"])),nt.cancelButtonColor&&(Q.style.backgroundColor=nt.cancelButtonColor,Tt(Q,a["default-outline"]))}function Jg(U,H,Q){const nt=d(H);zt(U,Q[`show${nt}Button`],"inline-block"),tt(U,Q[`${H}ButtonText`]||""),U.setAttribute("aria-label",Q[`${H}ButtonAriaLabel`]||""),U.className=a[H],ut(U,Q,`${H}Button`)}const $5=(U,H)=>{const Q=$();Q&&(tt(Q,H.closeButtonHtml||""),ut(Q,H,"closeButton"),zt(Q,H.showCloseButton),Q.setAttribute("aria-label",H.closeButtonAriaLabel||""))},B5=(U,H)=>{const Q=w();Q&&(k5(Q,H.backdrop),z5(Q,H.position),V5(Q,H.grow),ut(Q,H,"container"))};function k5(U,H){typeof H=="string"?U.style.background=H:H||Tt([document.documentElement,document.body],a["no-backdrop"])}function z5(U,H){H&&(H in a?Tt(U,a[H]):(l('The "position" parameter is not valid, defaulting to "center"'),Tt(U,a.center)))}function V5(U,H){H&&Tt(U,a[`grow-${H}`])}const G5=["input","file","range","select","radio","checkbox","textarea"],U5=(U,H)=>{const Q=A(),nt=r.innerParams.get(U),yt=!nt||H.input!==nt.input;G5.forEach(Gt=>{const Te=Rt(Q,a[Gt]);X5(Gt,H.inputAttributes),Te.className=a[Gt],yt&&Ct(Te)}),H.input&&(yt&&W5(H),Y5(H))},W5=U=>{if(!Ss[U.input]){c(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${U.input}"`);return}const H=rw(U.input),Q=Ss[U.input](H,U);bt(H),U.inputAutoFocus&&setTimeout(()=>{ht(Q)})},H5=U=>{for(let H=0;H<U.attributes.length;H++){const Q=U.attributes[H].name;["id","type","value","style"].includes(Q)||U.removeAttribute(Q)}},X5=(U,H)=>{const Q=ct(A(),U);if(Q){H5(Q);for(const nt in H)Q.setAttribute(nt,H[nt])}},Y5=U=>{const H=rw(U.input);typeof U.customClass=="object"&&Tt(H,U.customClass.input)},Qg=(U,H)=>{(!U.placeholder||H.inputPlaceholder)&&(U.placeholder=H.inputPlaceholder)},Hu=(U,H,Q)=>{if(Q.inputLabel){const nt=document.createElement("label"),yt=a["input-label"];nt.setAttribute("for",U.id),nt.className=yt,typeof Q.customClass=="object"&&Tt(nt,Q.customClass.inputLabel),nt.innerText=Q.inputLabel,H.insertAdjacentElement("beforebegin",nt)}},rw=U=>Rt(A(),a[U]||a.input),Kf=(U,H)=>{["string","number"].includes(typeof H)?U.value=`${H}`:C(H)||l(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof H}"`)},Ss={};Ss.text=Ss.email=Ss.password=Ss.number=Ss.tel=Ss.url=(U,H)=>(Kf(U,H.inputValue),Hu(U,U,H),Qg(U,H),U.type=H.input,U),Ss.file=(U,H)=>(Hu(U,U,H),Qg(U,H),U),Ss.range=(U,H)=>{const Q=U.querySelector("input"),nt=U.querySelector("output");return Kf(Q,H.inputValue),Q.type=H.input,Kf(nt,H.inputValue),Hu(Q,U,H),U},Ss.select=(U,H)=>{if(U.textContent="",H.inputPlaceholder){const Q=document.createElement("option");tt(Q,H.inputPlaceholder),Q.value="",Q.disabled=!0,Q.selected=!0,U.appendChild(Q)}return Hu(U,U,H),U},Ss.radio=U=>(U.textContent="",U),Ss.checkbox=(U,H)=>{const Q=ct(A(),"checkbox");Q.value="1",Q.checked=!!H.inputValue;const nt=U.querySelector("span");return tt(nt,H.inputPlaceholder),Q},Ss.textarea=(U,H)=>{Kf(U,H.inputValue),Qg(U,H),Hu(U,U,H);const Q=nt=>parseInt(window.getComputedStyle(nt).marginLeft)+parseInt(window.getComputedStyle(nt).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const nt=parseInt(window.getComputedStyle(A()).width),yt=()=>{if(!document.body.contains(U))return;const Gt=U.offsetWidth+Q(U);Gt>nt?A().style.width=`${Gt}px`:mt(A(),"width",H.width)};new MutationObserver(yt).observe(U,{attributes:!0,attributeFilter:["style"]})}}),U};const K5=(U,H)=>{const Q=F();Q&&(ut(Q,H,"htmlContainer"),H.html?(Zg(H.html,Q),bt(Q,"block")):H.text?(Q.textContent=H.text,bt(Q,"block")):Ct(Q),U5(U,H))},j5=(U,H)=>{const Q=G();Q&&(zt(Q,H.footer),H.footer&&Zg(H.footer,Q),ut(Q,H,"footer"))},Z5=(U,H)=>{const Q=r.innerParams.get(U),nt=I();if(nt){if(Q&&H.icon===Q.icon){ow(nt,H),aw(nt,H);return}if(!H.icon&&!H.iconHtml){Ct(nt);return}if(H.icon&&Object.keys(h).indexOf(H.icon)===-1){c(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${H.icon}"`),Ct(nt);return}bt(nt),ow(nt,H),aw(nt,H),Tt(nt,H.showClass&&H.showClass.icon)}},aw=(U,H)=>{for(const[Q,nt]of Object.entries(h))H.icon!==Q&&At(U,nt);Tt(U,H.icon&&h[H.icon]),_5(U,H),J5(),ut(U,H,"icon")},J5=()=>{const U=A();if(!U)return;const H=window.getComputedStyle(U).getPropertyValue("background-color"),Q=U.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let nt=0;nt<Q.length;nt++)Q[nt].style.backgroundColor=H},Q5=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,q5=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,ow=(U,H)=>{if(!H.icon&&!H.iconHtml)return;let Q=U.innerHTML,nt="";H.iconHtml?nt=lw(H.iconHtml):H.icon==="success"?(nt=Q5,Q=Q.replace(/ style=".*?"/g,"")):H.icon==="error"?nt=q5:H.icon&&(nt=lw({question:"?",warning:"!",info:"i"}[H.icon])),Q.trim()!==nt.trim()&&tt(U,nt)},_5=(U,H)=>{if(H.iconColor){U.style.color=H.iconColor,U.style.borderColor=H.iconColor;for(const Q of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Ht(U,Q,"backgroundColor",H.iconColor);Ht(U,".swal2-success-ring","borderColor",H.iconColor)}},lw=U=>`<div class="${a["icon-content"]}">${U}</div>`,t6=(U,H)=>{const Q=P();if(Q){if(!H.imageUrl){Ct(Q);return}bt(Q,""),Q.setAttribute("src",H.imageUrl),Q.setAttribute("alt",H.imageAlt||""),mt(Q,"width",H.imageWidth),mt(Q,"height",H.imageHeight),Q.className=a.image,ut(Q,H,"image")}},e6=(U,H)=>{const Q=w(),nt=A();if(!(!Q||!nt)){if(H.toast){mt(Q,"width",H.width),nt.style.width="100%";const yt=K();yt&&nt.insertBefore(yt,I())}else mt(nt,"width",H.width);mt(nt,"padding",H.padding),H.color&&(nt.style.color=H.color),H.background&&(nt.style.background=H.background),Ct(M()),n6(nt,H)}},n6=(U,H)=>{const Q=H.showClass||{};U.className=`${a.popup} ${Jt(U)?Q.popup:""}`,H.toast?(Tt([document.documentElement,document.body],a["toast-shown"]),Tt(U,a.toast)):Tt(U,a.modal),ut(U,H,"popup"),typeof H.customClass=="string"&&Tt(U,H.customClass),H.icon&&Tt(U,a[`icon-${H.icon}`])},s6=(U,H)=>{const Q=D();if(!Q)return;const{progressSteps:nt,currentProgressStep:yt}=H;if(!nt||nt.length===0||yt===void 0){Ct(Q);return}bt(Q),Q.textContent="",yt>=nt.length&&l("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),nt.forEach((Gt,Te)=>{const Tn=i6(Gt);if(Q.appendChild(Tn),Te===yt&&Tt(Tn,a["active-progress-step"]),Te!==nt.length-1){const ln=r6(H);Q.appendChild(ln)}})},i6=U=>{const H=document.createElement("li");return Tt(H,a["progress-step"]),tt(H,U),H},r6=U=>{const H=document.createElement("li");return Tt(H,a["progress-step-line"]),U.progressStepsDistance&&mt(H,"width",U.progressStepsDistance),H},a6=(U,H)=>{const Q=N();Q&&(zt(Q,H.title||H.titleText,"block"),H.title&&Zg(H.title,Q),H.titleText&&(Q.innerText=H.titleText),ut(Q,H,"title"))},uw=(U,H)=>{e6(U,H),B5(U,H),s6(U,H),Z5(U,H),t6(U,H),a6(U,H),$5(U,H),K5(U,H),D5(U,H),j5(U,H);const Q=A();typeof H.didRender=="function"&&Q&&H.didRender(Q)},o6=()=>Jt(A()),hw=()=>L()&&L().click(),l6=()=>V()&&V().click(),u6=()=>k()&&k().click(),rl=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),cw=U=>{U.keydownTarget&&U.keydownHandlerAdded&&(U.keydownTarget.removeEventListener("keydown",U.keydownHandler,{capture:U.keydownListenerCapture}),U.keydownHandlerAdded=!1)},h6=(U,H,Q,nt)=>{cw(H),Q.toast||(H.keydownHandler=yt=>f6(U,yt,nt),H.keydownTarget=Q.keydownListenerCapture?window:A(),H.keydownListenerCapture=Q.keydownListenerCapture,H.keydownTarget.addEventListener("keydown",H.keydownHandler,{capture:H.keydownListenerCapture}),H.keydownHandlerAdded=!0)},qg=(U,H)=>{const Q=X();if(Q.length){U=U+H,U===Q.length?U=0:U===-1&&(U=Q.length-1),Q[U].focus();return}A().focus()},fw=["ArrowRight","ArrowDown"],c6=["ArrowLeft","ArrowUp"],f6=(U,H,Q)=>{const nt=r.innerParams.get(U);nt&&(H.isComposing||H.keyCode===229||(nt.stopKeydownPropagation&&H.stopPropagation(),H.key==="Enter"?d6(U,H,nt):H.key==="Tab"?p6(H):[...fw,...c6].includes(H.key)?m6(H.key):H.key==="Escape"&&v6(H,nt,Q)))},d6=(U,H,Q)=>{if(S(Q.allowEnterKey)&&H.target&&U.getInput()&&H.target instanceof HTMLElement&&H.target.outerHTML===U.getInput().outerHTML){if(["textarea","file"].includes(Q.input))return;hw(),H.preventDefault()}},p6=U=>{const H=U.target,Q=X();let nt=-1;for(let yt=0;yt<Q.length;yt++)if(H===Q[yt]){nt=yt;break}U.shiftKey?qg(nt,-1):qg(nt,1),U.stopPropagation(),U.preventDefault()},m6=U=>{const H=L(),Q=V(),nt=k(),yt=[H,Q,nt];if(document.activeElement instanceof HTMLElement&&!yt.includes(document.activeElement))return;const Gt=fw.includes(U)?"nextElementSibling":"previousElementSibling";let Te=document.activeElement;for(let Tn=0;Tn<B().children.length;Tn++){if(Te=Te[Gt],!Te)return;if(Te instanceof HTMLButtonElement&&Jt(Te))break}Te instanceof HTMLButtonElement&&Te.focus()},v6=(U,H,Q)=>{S(H.allowEscapeKey)&&(U.preventDefault(),Q(rl.esc))};var Xu={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const g6=()=>{Array.from(document.body.children).forEach(H=>{H===w()||H.contains(w())||(H.hasAttribute("aria-hidden")&&H.setAttribute("data-previous-aria-hidden",H.getAttribute("aria-hidden")||""),H.setAttribute("aria-hidden","true"))})},dw=()=>{Array.from(document.body.children).forEach(H=>{H.hasAttribute("data-previous-aria-hidden")?(H.setAttribute("aria-hidden",H.getAttribute("data-previous-aria-hidden")||""),H.removeAttribute("data-previous-aria-hidden")):H.removeAttribute("aria-hidden")})},pw=typeof window<"u"&&!!window.GestureEvent,x6=()=>{if(pw&&!et(document.body,a.iosfix)){const U=document.body.scrollTop;document.body.style.top=`${U*-1}px`,Tt(document.body,a.iosfix),y6()}},y6=()=>{const U=w();let H;U.ontouchstart=Q=>{H=S6(Q)},U.ontouchmove=Q=>{H&&(Q.preventDefault(),Q.stopPropagation())}},S6=U=>{const H=U.target,Q=w();return T6(U)||C6(U)?!1:H===Q||!_t(Q)&&H instanceof HTMLElement&&H.tagName!=="INPUT"&&H.tagName!=="TEXTAREA"&&!(_t(F())&&F().contains(H))},T6=U=>U.touches&&U.touches.length&&U.touches[0].touchType==="stylus",C6=U=>U.touches&&U.touches.length>1,w6=()=>{if(et(document.body,a.iosfix)){const U=parseInt(document.body.style.top,10);At(document.body,a.iosfix),document.body.style.top="",document.body.scrollTop=U*-1}},E6=()=>{const U=document.createElement("div");U.className=a["scrollbar-measure"],document.body.appendChild(U);const H=U.getBoundingClientRect().width-U.clientWidth;return document.body.removeChild(U),H};let al=null;const b6=()=>{al===null&&document.body.scrollHeight>window.innerHeight&&(al=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${al+E6()}px`)},A6=()=>{al!==null&&(document.body.style.paddingRight=`${al}px`,al=null)};function mw(U,H,Q,nt){Z()?gw(U,nt):(y(Q).then(()=>gw(U,nt)),cw(i)),pw?(H.setAttribute("style","display:none !important"),H.removeAttribute("class"),H.innerHTML=""):H.remove(),Y()&&(A6(),w6(),dw()),I6()}function I6(){At([document.documentElement,document.body],[a.shown,a["height-auto"],a["no-backdrop"],a["toast-shown"]])}function na(U){U=N6(U);const H=Xu.swalPromiseResolve.get(this),Q=R6(this);this.isAwaitingPromise?U.isDismissed||(Yu(this),H(U)):Q&&H(U)}const R6=U=>{const H=A();if(!H)return!1;const Q=r.innerParams.get(U);if(!Q||et(H,Q.hideClass.popup))return!1;At(H,Q.showClass.popup),Tt(H,Q.hideClass.popup);const nt=w();return At(nt,Q.showClass.backdrop),Tt(nt,Q.hideClass.backdrop),P6(U,H,Q),!0};function vw(U){const H=Xu.swalPromiseReject.get(this);Yu(this),H&&H(U)}const Yu=U=>{U.isAwaitingPromise&&(delete U.isAwaitingPromise,r.innerParams.get(U)||U._destroy())},N6=U=>typeof U>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},U),P6=(U,H,Q)=>{const nt=w(),yt=Wu&&Zt(H);typeof Q.willClose=="function"&&Q.willClose(H),yt?F6(U,H,nt,Q.returnFocus,Q.didClose):mw(U,nt,Q.returnFocus,Q.didClose)},F6=(U,H,Q,nt,yt)=>{i.swalCloseEventFinishedCallback=mw.bind(null,U,Q,nt,yt),H.addEventListener(Wu,function(Gt){Gt.target===H&&(i.swalCloseEventFinishedCallback(),delete i.swalCloseEventFinishedCallback)})},gw=(U,H)=>{setTimeout(()=>{typeof H=="function"&&H.bind(U.params)(),U._destroy&&U._destroy()})},ol=U=>{let H=A();H||new Jf,H=A();const Q=K();Z()?Ct(I()):O6(H,U),bt(Q),H.setAttribute("data-loading","true"),H.setAttribute("aria-busy","true"),H.focus()},O6=(U,H)=>{const Q=B(),nt=K();!H&&Jt(L())&&(H=L()),bt(Q),H&&(Ct(H),nt.setAttribute("data-button-to-replace",H.className)),nt.parentNode.insertBefore(nt,H),Tt([U,Q],a.loading)},D6=(U,H)=>{H.input==="select"||H.input==="radio"?k6(U,H):["text","email","number","tel","textarea"].includes(H.input)&&(x(H.inputValue)||C(H.inputValue))&&(ol(L()),z6(U,H))},L6=(U,H)=>{const Q=U.getInput();if(!Q)return null;switch(H.input){case"checkbox":return M6(Q);case"radio":return $6(Q);case"file":return B6(Q);default:return H.inputAutoTrim?Q.value.trim():Q.value}},M6=U=>U.checked?1:0,$6=U=>U.checked?U.value:null,B6=U=>U.files.length?U.getAttribute("multiple")!==null?U.files:U.files[0]:null,k6=(U,H)=>{const Q=A(),nt=yt=>{V6[H.input](Q,_g(yt),H)};x(H.inputOptions)||C(H.inputOptions)?(ol(L()),T(H.inputOptions).then(yt=>{U.hideLoading(),nt(yt)})):typeof H.inputOptions=="object"?nt(H.inputOptions):c(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof H.inputOptions}`)},z6=(U,H)=>{const Q=U.getInput();Ct(Q),T(H.inputValue).then(nt=>{Q.value=H.input==="number"?`${parseFloat(nt)||0}`:`${nt}`,bt(Q),Q.focus(),U.hideLoading()}).catch(nt=>{c(`Error in inputValue promise: ${nt}`),Q.value="",bt(Q),Q.focus(),U.hideLoading()})},V6={select:(U,H,Q)=>{const nt=Rt(U,a.select),yt=(Gt,Te,Tn)=>{const ln=document.createElement("option");ln.value=Tn,tt(ln,Te),ln.selected=xw(Tn,Q.inputValue),Gt.appendChild(ln)};H.forEach(Gt=>{const Te=Gt[0],Tn=Gt[1];if(Array.isArray(Tn)){const ln=document.createElement("optgroup");ln.label=Te,ln.disabled=!1,nt.appendChild(ln),Tn.forEach(ul=>yt(ln,ul[1],ul[0]))}else yt(nt,Tn,Te)}),nt.focus()},radio:(U,H,Q)=>{const nt=Rt(U,a.radio);H.forEach(Gt=>{const Te=Gt[0],Tn=Gt[1],ln=document.createElement("input"),ul=document.createElement("label");ln.type="radio",ln.name=a.radio,ln.value=Te,xw(Te,Q.inputValue)&&(ln.checked=!0);const i0=document.createElement("span");tt(i0,Tn),i0.className=a.label,ul.appendChild(ln),ul.appendChild(i0),nt.appendChild(ul)});const yt=nt.querySelectorAll("input");yt.length&&yt[0].focus()}},_g=U=>{const H=[];return typeof Map<"u"&&U instanceof Map?U.forEach((Q,nt)=>{let yt=Q;typeof yt=="object"&&(yt=_g(yt)),H.push([nt,yt])}):Object.keys(U).forEach(Q=>{let nt=U[Q];typeof nt=="object"&&(nt=_g(nt)),H.push([Q,nt])}),H},xw=(U,H)=>H&&H.toString()===U.toString(),G6=U=>{const H=r.innerParams.get(U);U.disableButtons(),H.input?yw(U,"confirm"):e0(U,!0)},U6=U=>{const H=r.innerParams.get(U);U.disableButtons(),H.returnInputValueOnDeny?yw(U,"deny"):t0(U,!1)},W6=(U,H)=>{U.disableButtons(),H(rl.cancel)},yw=(U,H)=>{const Q=r.innerParams.get(U);if(!Q.input){c(`The "input" parameter is needed to be set when using returnInputValueOn${d(H)}`);return}const nt=L6(U,Q);Q.inputValidator?H6(U,nt,H):U.getInput().checkValidity()?H==="deny"?t0(U,nt):e0(U,nt):(U.enableButtons(),U.showValidationMessage(Q.validationMessage))},H6=(U,H,Q)=>{const nt=r.innerParams.get(U);U.disableInput(),Promise.resolve().then(()=>T(nt.inputValidator(H,nt.validationMessage))).then(Gt=>{U.enableButtons(),U.enableInput(),Gt?U.showValidationMessage(Gt):Q==="deny"?t0(U,H):e0(U,H)})},t0=(U,H)=>{const Q=r.innerParams.get(U||void 0);Q.showLoaderOnDeny&&ol(V()),Q.preDeny?(U.isAwaitingPromise=!0,Promise.resolve().then(()=>T(Q.preDeny(H,Q.validationMessage))).then(yt=>{yt===!1?(U.hideLoading(),Yu(U)):U.close({isDenied:!0,value:typeof yt>"u"?H:yt})}).catch(yt=>Tw(U||void 0,yt))):U.close({isDenied:!0,value:H})},Sw=(U,H)=>{U.close({isConfirmed:!0,value:H})},Tw=(U,H)=>{U.rejectPromise(H)},e0=(U,H)=>{const Q=r.innerParams.get(U||void 0);Q.showLoaderOnConfirm&&ol(),Q.preConfirm?(U.resetValidationMessage(),U.isAwaitingPromise=!0,Promise.resolve().then(()=>T(Q.preConfirm(H,Q.validationMessage))).then(yt=>{Jt(M())||yt===!1?(U.hideLoading(),Yu(U)):Sw(U,typeof yt>"u"?H:yt)}).catch(yt=>Tw(U||void 0,yt))):Sw(U,H)};function jf(){const U=r.innerParams.get(this);if(!U)return;const H=r.domCache.get(this);Ct(H.loader),Z()?U.icon&&bt(I()):X6(H),At([H.popup,H.actions],a.loading),H.popup.removeAttribute("aria-busy"),H.popup.removeAttribute("data-loading"),H.confirmButton.disabled=!1,H.denyButton.disabled=!1,H.cancelButton.disabled=!1}const X6=U=>{const H=U.popup.getElementsByClassName(U.loader.getAttribute("data-button-to-replace"));H.length?bt(H[0],"inline-block"):ae()&&Ct(U.actions)};function Cw(){const U=r.innerParams.get(this),H=r.domCache.get(this);return H?ct(H.popup,U.input):null}function ww(U,H,Q){const nt=r.domCache.get(U);H.forEach(yt=>{nt[yt].disabled=Q})}function Ew(U,H){if(U)if(U.type==="radio"){const nt=U.parentNode.parentNode.querySelectorAll("input");for(let yt=0;yt<nt.length;yt++)nt[yt].disabled=H}else U.disabled=H}function bw(){ww(this,["confirmButton","denyButton","cancelButton"],!1)}function Aw(){ww(this,["confirmButton","denyButton","cancelButton"],!0)}function Iw(){Ew(this.getInput(),!1)}function Rw(){Ew(this.getInput(),!0)}function Nw(U){const H=r.domCache.get(this),Q=r.innerParams.get(this);tt(H.validationMessage,U),H.validationMessage.className=a["validation-message"],Q.customClass&&Q.customClass.validationMessage&&Tt(H.validationMessage,Q.customClass.validationMessage),bt(H.validationMessage);const nt=this.getInput();nt&&(nt.setAttribute("aria-invalid",!0),nt.setAttribute("aria-describedby",a["validation-message"]),ht(nt),Tt(nt,a.inputerror))}function Pw(){const U=r.domCache.get(this);U.validationMessage&&Ct(U.validationMessage);const H=this.getInput();H&&(H.removeAttribute("aria-invalid"),H.removeAttribute("aria-describedby"),At(H,a.inputerror))}const ll={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Y6=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],K6={},j6=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Fw=U=>Object.prototype.hasOwnProperty.call(ll,U),Ow=U=>Y6.indexOf(U)!==-1,Dw=U=>K6[U],Z6=U=>{Fw(U)||l(`Unknown parameter "${U}"`)},J6=U=>{j6.includes(U)&&l(`The parameter "${U}" is incompatible with toasts`)},Q6=U=>{const H=Dw(U);H&&v(U,H)},q6=U=>{U.backdrop===!1&&U.allowOutsideClick&&l('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const H in U)Z6(H),U.toast&&J6(H),Q6(H)};function Lw(U){const H=A(),Q=r.innerParams.get(this);if(!H||et(H,Q.hideClass.popup)){l("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const nt=_6(U),yt=Object.assign({},Q,nt);uw(this,yt),r.innerParams.set(this,yt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,U),writable:!1,enumerable:!0}})}const _6=U=>{const H={};return Object.keys(U).forEach(Q=>{Ow(Q)?H[Q]=U[Q]:l(`Invalid parameter to update: ${Q}`)}),H};function Mw(){const U=r.domCache.get(this),H=r.innerParams.get(this);if(!H){$w(this);return}U.popup&&i.swalCloseEventFinishedCallback&&(i.swalCloseEventFinishedCallback(),delete i.swalCloseEventFinishedCallback),typeof H.didDestroy=="function"&&H.didDestroy(),t$(this)}const t$=U=>{$w(U),delete U.params,delete i.keydownHandler,delete i.keydownTarget,delete i.currentInstance},$w=U=>{U.isAwaitingPromise?(n0(r,U),U.isAwaitingPromise=!0):(n0(Xu,U),n0(r,U),delete U.isAwaitingPromise,delete U.disableButtons,delete U.enableButtons,delete U.getInput,delete U.disableInput,delete U.enableInput,delete U.hideLoading,delete U.disableLoading,delete U.showValidationMessage,delete U.resetValidationMessage,delete U.close,delete U.closePopup,delete U.closeModal,delete U.closeToast,delete U.rejectPromise,delete U.update,delete U._destroy)},n0=(U,H)=>{for(const Q in U)U[Q].delete(H)};var e$=Object.freeze({__proto__:null,_destroy:Mw,close:na,closeModal:na,closePopup:na,closeToast:na,disableButtons:Aw,disableInput:Rw,disableLoading:jf,enableButtons:bw,enableInput:Iw,getInput:Cw,handleAwaitingPromise:Yu,hideLoading:jf,rejectPromise:vw,resetValidationMessage:Pw,showValidationMessage:Nw,update:Lw});const n$=(U,H,Q)=>{r.innerParams.get(U).toast?s$(U,H,Q):(r$(H),a$(H),o$(U,H,Q))},s$=(U,H,Q)=>{H.popup.onclick=()=>{const nt=r.innerParams.get(U);nt&&(i$(nt)||nt.timer||nt.input)||Q(rl.close)}},i$=U=>U.showConfirmButton||U.showDenyButton||U.showCancelButton||U.showCloseButton;let Zf=!1;const r$=U=>{U.popup.onmousedown=()=>{U.container.onmouseup=function(H){U.container.onmouseup=void 0,H.target===U.container&&(Zf=!0)}}},a$=U=>{U.container.onmousedown=()=>{U.popup.onmouseup=function(H){U.popup.onmouseup=void 0,(H.target===U.popup||U.popup.contains(H.target))&&(Zf=!0)}}},o$=(U,H,Q)=>{H.container.onclick=nt=>{const yt=r.innerParams.get(U);if(Zf){Zf=!1;return}nt.target===H.container&&S(yt.allowOutsideClick)&&Q(rl.backdrop)}},l$=U=>typeof U=="object"&&U.jquery,Bw=U=>U instanceof Element||l$(U),u$=U=>{const H={};return typeof U[0]=="object"&&!Bw(U[0])?Object.assign(H,U[0]):["title","html","icon"].forEach((Q,nt)=>{const yt=U[nt];typeof yt=="string"||Bw(yt)?H[Q]=yt:yt!==void 0&&c(`Unexpected type of ${Q}! Expected "string" or "Element", got ${typeof yt}`)}),H};function h$(){const U=this;for(var H=arguments.length,Q=new Array(H),nt=0;nt<H;nt++)Q[nt]=arguments[nt];return new U(...Q)}function c$(U){class H extends this{_main(nt,yt){return super._main(nt,Object.assign({},U,yt))}}return H}const f$=()=>i.timeout&&i.timeout.getTimerLeft(),kw=()=>{if(i.timeout)return He(),i.timeout.stop()},zw=()=>{if(i.timeout){const U=i.timeout.start();return de(U),U}},d$=()=>{const U=i.timeout;return U&&(U.running?kw():zw())},p$=U=>{if(i.timeout){const H=i.timeout.increase(U);return de(H,!0),H}},m$=()=>!!(i.timeout&&i.timeout.isRunning());let Vw=!1;const s0={};function v$(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";s0[U]=this,Vw||(document.body.addEventListener("click",g$),Vw=!0)}const g$=U=>{for(let H=U.target;H&&H!==document;H=H.parentNode)for(const Q in s0){const nt=H.getAttribute(Q);if(nt){s0[Q].fire({template:nt});return}}};var x$=Object.freeze({__proto__:null,argsToParams:u$,bindClickHandler:v$,clickCancel:u6,clickConfirm:hw,clickDeny:l6,enableLoading:ol,fire:h$,getActions:B,getCancelButton:k,getCloseButton:$,getConfirmButton:L,getContainer:w,getDenyButton:V,getFocusableElements:X,getFooter:G,getHtmlContainer:F,getIcon:I,getIconContent:R,getImage:P,getInputLabel:W,getLoader:K,getPopup:A,getProgressSteps:D,getTimerLeft:f$,getTimerProgressBar:O,getTitle:N,getValidationMessage:M,increaseTimer:p$,isDeprecatedParameter:Dw,isLoading:J,isTimerRunning:m$,isUpdatableParameter:Ow,isValidParameter:Fw,isVisible:o6,mixin:c$,resumeTimer:zw,showLoading:ol,stopTimer:kw,toggleTimer:d$});class y${constructor(H,Q){this.callback=H,this.remaining=Q,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(H){const Q=this.running;return Q&&this.stop(),this.remaining+=H,Q&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Gw=["swal-title","swal-html","swal-footer"],S$=U=>{const H=typeof U.template=="string"?document.querySelector(U.template):U.template;if(!H)return{};const Q=H.content;return R$(Q),Object.assign(T$(Q),C$(Q),w$(Q),E$(Q),b$(Q),A$(Q),I$(Q,Gw))},T$=U=>{const H={};return Array.from(U.querySelectorAll("swal-param")).forEach(nt=>{so(nt,["name","value"]);const yt=nt.getAttribute("name"),Gt=nt.getAttribute("value");typeof ll[yt]=="boolean"?H[yt]=Gt!=="false":typeof ll[yt]=="object"?H[yt]=JSON.parse(Gt):H[yt]=Gt}),H},C$=U=>{const H={};return Array.from(U.querySelectorAll("swal-function-param")).forEach(nt=>{const yt=nt.getAttribute("name"),Gt=nt.getAttribute("value");H[yt]=new Function(`return ${Gt}`)()}),H},w$=U=>{const H={};return Array.from(U.querySelectorAll("swal-button")).forEach(nt=>{so(nt,["type","color","aria-label"]);const yt=nt.getAttribute("type");H[`${yt}ButtonText`]=nt.innerHTML,H[`show${d(yt)}Button`]=!0,nt.hasAttribute("color")&&(H[`${yt}ButtonColor`]=nt.getAttribute("color")),nt.hasAttribute("aria-label")&&(H[`${yt}ButtonAriaLabel`]=nt.getAttribute("aria-label"))}),H},E$=U=>{const H={},Q=U.querySelector("swal-image");return Q&&(so(Q,["src","width","height","alt"]),Q.hasAttribute("src")&&(H.imageUrl=Q.getAttribute("src")),Q.hasAttribute("width")&&(H.imageWidth=Q.getAttribute("width")),Q.hasAttribute("height")&&(H.imageHeight=Q.getAttribute("height")),Q.hasAttribute("alt")&&(H.imageAlt=Q.getAttribute("alt"))),H},b$=U=>{const H={},Q=U.querySelector("swal-icon");return Q&&(so(Q,["type","color"]),Q.hasAttribute("type")&&(H.icon=Q.getAttribute("type")),Q.hasAttribute("color")&&(H.iconColor=Q.getAttribute("color")),H.iconHtml=Q.innerHTML),H},A$=U=>{const H={},Q=U.querySelector("swal-input");Q&&(so(Q,["type","label","placeholder","value"]),H.input=Q.getAttribute("type")||"text",Q.hasAttribute("label")&&(H.inputLabel=Q.getAttribute("label")),Q.hasAttribute("placeholder")&&(H.inputPlaceholder=Q.getAttribute("placeholder")),Q.hasAttribute("value")&&(H.inputValue=Q.getAttribute("value")));const nt=Array.from(U.querySelectorAll("swal-input-option"));return nt.length&&(H.inputOptions={},nt.forEach(yt=>{so(yt,["value"]);const Gt=yt.getAttribute("value"),Te=yt.innerHTML;H.inputOptions[Gt]=Te})),H},I$=(U,H)=>{const Q={};for(const nt in H){const yt=H[nt],Gt=U.querySelector(yt);Gt&&(so(Gt,[]),Q[yt.replace(/^swal-/,"")]=Gt.innerHTML.trim())}return Q},R$=U=>{const H=Gw.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(U.children).forEach(Q=>{const nt=Q.tagName.toLowerCase();H.includes(nt)||l(`Unrecognized element <${nt}>`)})},so=(U,H)=>{Array.from(U.attributes).forEach(Q=>{H.indexOf(Q.name)===-1&&l([`Unrecognized attribute "${Q.name}" on <${U.tagName.toLowerCase()}>.`,`${H.length?`Allowed attributes are: ${H.join(", ")}`:"To set the value, use HTML within the element."}`])})},Uw=10,N$=U=>{const H=w(),Q=A();typeof U.willOpen=="function"&&U.willOpen(Q);const yt=window.getComputedStyle(document.body).overflowY;O$(H,Q,U),setTimeout(()=>{P$(H,Q)},Uw),Y()&&(F$(H,U.scrollbarPadding,yt),g6()),!Z()&&!i.previousActiveElement&&(i.previousActiveElement=document.activeElement),typeof U.didOpen=="function"&&setTimeout(()=>U.didOpen(Q)),At(H,a["no-transition"])},Ww=U=>{const H=A();if(U.target!==H)return;const Q=w();H.removeEventListener(Wu,Ww),Q.style.overflowY="auto"},P$=(U,H)=>{Wu&&Zt(H)?(U.style.overflowY="hidden",H.addEventListener(Wu,Ww)):U.style.overflowY="auto"},F$=(U,H,Q)=>{x6(),H&&Q!=="hidden"&&b6(),setTimeout(()=>{U.scrollTop=0})},O$=(U,H,Q)=>{Tt(U,Q.showClass.backdrop),H.style.setProperty("opacity","0","important"),bt(H,"grid"),setTimeout(()=>{Tt(H,Q.showClass.popup),H.style.removeProperty("opacity")},Uw),Tt([document.documentElement,document.body],a.shown),Q.heightAuto&&Q.backdrop&&!Q.toast&&Tt([document.documentElement,document.body],a["height-auto"])};var Hw={email:(U,H)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(U)?Promise.resolve():Promise.resolve(H||"Invalid email address"),url:(U,H)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(U)?Promise.resolve():Promise.resolve(H||"Invalid URL")};function D$(U){U.inputValidator||Object.keys(Hw).forEach(H=>{U.input===H&&(U.inputValidator=Hw[H])})}function L$(U){(!U.target||typeof U.target=="string"&&!document.querySelector(U.target)||typeof U.target!="string"&&!U.target.appendChild)&&(l('Target parameter is not valid, defaulting to "body"'),U.target="body")}function M$(U){D$(U),U.showLoaderOnConfirm&&!U.preConfirm&&l(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),L$(U),typeof U.title=="string"&&(U.title=U.title.split(`
`).join("<br />")),P5(U)}let Fi;class rn{constructor(){if(typeof window>"u")return;Fi=this;for(var H=arguments.length,Q=new Array(H),nt=0;nt<H;nt++)Q[nt]=arguments[nt];const yt=Object.freeze(this.constructor.argsToParams(Q));this.params=yt,this.isAwaitingPromise=!1;const Gt=Fi._main(Fi.params);r.promise.set(this,Gt)}_main(H){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q6(Object.assign({},Q,H)),i.currentInstance&&(i.currentInstance._destroy(),Y()&&dw()),i.currentInstance=Fi;const nt=B$(H,Q);M$(nt),Object.freeze(nt),i.timeout&&(i.timeout.stop(),delete i.timeout),clearTimeout(i.restoreFocusTimeout);const yt=k$(Fi);return uw(Fi,nt),r.innerParams.set(Fi,nt),$$(Fi,yt,nt)}then(H){return r.promise.get(this).then(H)}finally(H){return r.promise.get(this).finally(H)}}const $$=(U,H,Q)=>new Promise((nt,yt)=>{const Gt=Te=>{U.close({isDismissed:!0,dismiss:Te})};Xu.swalPromiseResolve.set(U,nt),Xu.swalPromiseReject.set(U,yt),H.confirmButton.onclick=()=>{G6(U)},H.denyButton.onclick=()=>{U6(U)},H.cancelButton.onclick=()=>{W6(U,Gt)},H.closeButton.onclick=()=>{Gt(rl.close)},n$(U,H,Gt),h6(U,i,Q,Gt),D6(U,Q),N$(Q),z$(i,Q,Gt),V$(H,Q),setTimeout(()=>{H.container.scrollTop=0})}),B$=(U,H)=>{const Q=S$(U),nt=Object.assign({},ll,H,Q,U);return nt.showClass=Object.assign({},ll.showClass,nt.showClass),nt.hideClass=Object.assign({},ll.hideClass,nt.hideClass),nt},k$=U=>{const H={popup:A(),container:w(),actions:B(),confirmButton:L(),denyButton:V(),cancelButton:k(),loader:K(),closeButton:$(),validationMessage:M(),progressSteps:D()};return r.domCache.set(U,H),H},z$=(U,H,Q)=>{const nt=O();Ct(nt),H.timer&&(U.timeout=new y$(()=>{Q("timer"),delete U.timeout},H.timer),H.timerProgressBar&&(bt(nt),ut(nt,H,"timerProgressBar"),setTimeout(()=>{U.timeout&&U.timeout.running&&de(H.timer)})))},V$=(U,H)=>{if(!H.toast){if(!S(H.allowEnterKey)){U$();return}G$(U,H)||qg(-1,1)}},G$=(U,H)=>H.focusDeny&&Jt(U.denyButton)?(U.denyButton.focus(),!0):H.focusCancel&&Jt(U.cancelButton)?(U.cancelButton.focus(),!0):H.focusConfirm&&Jt(U.confirmButton)?(U.confirmButton.focus(),!0):!1,U$=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const U=new Date,H=localStorage.getItem("swal-initiation");H?(U.getTime()-Date.parse(H))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const Q=document.createElement("audio");Q.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",Q.loop=!0,document.body.appendChild(Q),setTimeout(()=>{Q.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${U}`)}rn.prototype.disableButtons=Aw,rn.prototype.enableButtons=bw,rn.prototype.getInput=Cw,rn.prototype.disableInput=Rw,rn.prototype.enableInput=Iw,rn.prototype.hideLoading=jf,rn.prototype.disableLoading=jf,rn.prototype.showValidationMessage=Nw,rn.prototype.resetValidationMessage=Pw,rn.prototype.close=na,rn.prototype.closePopup=na,rn.prototype.closeModal=na,rn.prototype.closeToast=na,rn.prototype.rejectPromise=vw,rn.prototype.update=Lw,rn.prototype._destroy=Mw,Object.assign(rn,x$),Object.keys(e$).forEach(U=>{rn[U]=function(){return Fi&&Fi[U]?Fi[U](...arguments):null}}),rn.DismissReason=rl,rn.version="11.7.19";const Jf=rn;return Jf.default=Jf,Jf}),typeof qn<"u"&&qn.Sweetalert2&&(qn.swal=qn.sweetAlert=qn.Swal=qn.SweetAlert=qn.Sweetalert2),typeof document<"u"&&function(s,i){var o=s.createElement("style");if(s.getElementsByTagName("head")[0].appendChild(o),o.styleSheet)o.styleSheet.disabled||(o.styleSheet.cssText=i);else try{o.innerHTML=i}catch{o.innerText=i}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')})(n3);var RG=n3.exports;const jm=vm(RG),$p=jm.mixin({toast:!0,position:"top-right",iconColor:"white",customClass:{popup:"colored-toast"},showConfirmButton:!1,timer:1500,timerProgressBar:!0});function s3(){const e=jm.getPopup();return e==null||e.classList.remove("swal2-show"),setTimeout(()=>{e==null||e.classList.add("animate__animated","animate__headShake")}),setTimeout(()=>{e==null||e.classList.remove("animate__animated","animate__headShake")},500),!1}function NG(e,t,s){jm.fire({title:"Input Game Record Name",input:"text",inputAttributes:{autocapitalize:"off"},showCloseButton:!0,showCancelButton:!0,confirmButtonText:e,showLoaderOnConfirm:!0,preConfirm:t,allowOutsideClick:s3}).then(i=>{(s||(()=>{}))(),i.isConfirmed&&$p.fire({icon:"success",title:"Saved"})}).catch(()=>{(s||(()=>{}))(),$p.fire({icon:"error",title:"Error"})})}function i3(e,t,s,i){jm.fire({title:"Select Game Record Name",input:"select",inputOptions:t,showCloseButton:!0,showCancelButton:!0,confirmButtonText:e,showLoaderOnConfirm:!0,preConfirm:s,allowOutsideClick:s3}).then(o=>{i(),o.isConfirmed&&$p.fire({icon:"success",title:"Load"})}).catch(()=>{i(),$p.fire({icon:"error",title:"Error"})})}class Bp extends Array{constructor(...s){super(...s);ee(this,"maxStones",0);const i=this.maxStones=this.length*(this.length+1)*(2*this.length+1)/6;this.maxStones=this.length%4==1?(i-1)/2:this.length%4==2?(i+1)/2:i/2}isWin(s){return this.count(i=>i.value==s)>=this.maxStones}isDone(){return this.isWin(ge.first)||this.isWin(ge.second)}firstPlayerValue(){return this.count(s=>s.value==ge.first)-this.count(s=>s.value==ge.second)}reverse(){return new Bp(...[...this].reverse())}mapPiece(s){return new Bp(...this.map((i,o)=>i.map((y,r)=>y.map((g,n)=>s({position:{i:o,j:r,k:n},value:g})))))}forEachPiece(s){this.forEach((i,o)=>i.forEach((y,r)=>y.forEach((g,n)=>s({position:{i:o,j:r,k:n},value:g}))))}count(s){return this.where(s).length}countBelow(s){return this.mapPiece(i=>{const{position:{i:o,j:y,k:r}}=i;return o==this.length-1?0:Number(s(this[o+1][y][r]))+Number(s(this[o+1][y+1][r]))+Number(s(this[o+1][y][r+1]))+Number(s(this[o+1][y+1][r+1]))})}where(s){const i=[];return this.forEachPiece(o=>{s(o)&&i.push(o)}),i}get(s){const{i,j:o,k:y}=s;return this[i][o][y]}set(s){const{position:{i,j:o,k:y},value:r}=s;this[i][o][y]=r}copy(){return this.mapPiece(({value:s})=>s)}merge(s,i){return this.mapPiece(({position:o,value:y})=>i(y,s.get(o)))}legalPieces(){const s=this.isDone(),i=this.countBelow(o=>o!=0);return this.mapPiece(o=>{const{position:y,value:r}=o;return!s&&r==0&&(y.i==this.length-1||i.get(y)==4)})}legalActions(){return this.legalPieces().where(({value:s})=>s).map(({position:s})=>s)}next(s){const i=this.copy();i.set(s);const o=[s.position];let y=[];do{const r=i.countBelow(n=>n==ge.first).mapPiece(n=>n.value>=3),g=i.countBelow(n=>n==ge.second).mapPiece(n=>n.value>=3);y=r.merge(g,(n,a)=>n?ge.first:a?ge.second:0).merge(i.legalPieces(),(n,a)=>a?n:0).where(({value:n})=>n!=0).map(n=>(i.isDone()||(i.set(n),o.push(n.position)),n))}while(y.length>0);return[i,o]}nextAll(s){return this.legalPieces().where(({value:i})=>i).map(({position:i})=>this.next({position:i,value:s})[0])}flip(){return this.mapPiece(({value:s})=>s==ge.first?ge.second:s==ge.second?ge.first:s)}}class M2{constructor(t=Zm,s=[]){ee(this,"size");ee(this,"moves");ee(this,"record",[]);ee(this,"length",0);this.size=t,this.record.push(this.initialBoard()),this.moves=s,this.moves.forEach((i,o)=>{this.record.push(this.record[o].next(i)[0])}),this.length=this.record.length}initialBoard(){const t=new Bp(...new Array(this.size).fill(0).map((s,i)=>new Array(i+1).fill([0]).map(()=>new Array(i+1).fill(0))));return this.size%2==1&&t.set({position:{i:this.size-1,j:(this.size-1)/2,k:(this.size-1)/2},value:ge.neutral}),t}get(t){return this.record[t]}move(t,s){this.moves.push(s),this.record.splice(t);const[i,o]=this.record[t-1].next(s);return this.record[t]=i,this.length=this.record.length,[i,o]}exportData(){const t=[this.size,...this.moves.map(({position:{i:s,j:i,k:o}})=>[s,i,o])].flat();return eu.encodeFromArray(t)}importData(t){const s=eu.decodeToArray(t),i=s.shift(),o=bG(s,3).map((y,r)=>({position:{i:y[0],j:y[1],k:y[2]},value:r%2==0?ge.first:ge.second}));return new M2(i,o)}}class PG{constructor(t=Zm,[s,i]=["human","human"]){ee(this,"players");ee(this,"size");ee(this,"scene");ee(this,"gameRecord");ee(this,"movesNum",0);ee(this,"player",ge.first);ee(this,"board");ee(this,"turn",async()=>{});this.players={0:s=="human"?s:new EI(t,s),1:i=="human"?i:new EI(t,i)},this.size=t,this.gameRecord=new M2(this.size),this.board=this.gameRecord.get(this.movesNum),this.turn=async()=>{const o=this.players[this.movesNum%2==0?0:1];if(o=="human")console.log(" ===== Player turn ===== "),this.scene.setInteractive(!0);else if(o.action||await o.loadModel(),console.log(" ===== AI turn ===== "),this.scene.setInteractive(!1),o.action){const y=o.action(this.movesNum%2==0?this.board:this.board.flip());this.move(y)}},this.scene=new cG(this)}getPoint(t){return this.board.count(s=>s.value==t)}move(t){if(this.scene.setInteractive(!1),this.board.isDone())return;const s={position:t,value:this.player};this.movesNum+=1,this.player=this.movesNum%2==0?ge.first:ge.second;const[i,o]=this.gameRecord.move(this.movesNum,s);this.board=i,this.scene.render(o)}prev(){this.movesNum!=0&&(console.log("prev"),this.movesNum-=1,this.player=this.movesNum%2==0?ge.first:ge.second,this.players[this.movesNum%2==0?0:1]=="human"||this.movesNum==0?(this.board=this.gameRecord.get(this.movesNum),this.scene.allRerender(),this.turn()):this.prev())}next(){this.movesNum!=this.gameRecord.length-1&&(console.log("next"),this.movesNum+=1,this.player=this.movesNum%2==0?ge.first:ge.second,this.players[this.movesNum%2==0?0:1]=="human"||this.movesNum==this.gameRecord.length-1?(this.board=this.gameRecord.get(this.movesNum),this.scene.allRerender(),this.turn()):this.next())}exportData(){return console.log("save"),AG(this.gameRecord.exportData())}importData(t){console.log("load"),this.movesNum=0,this.gameRecord=this.gameRecord.importData(IG(t)),this.board=this.gameRecord.get(this.movesNum)}}function FG(e){e.scene.setInteractive(!1),NG("Save",t=>{const s=`${t||"_temp"}.${$2}`;localStorage.setItem(s,e.exportData())},()=>{e.scene.setInteractive(!0)})}function OG(e){e.scene.setInteractive(!1);const t=Object.keys(localStorage).filter(i=>/^.*\.mof$/.test(i)).map(i=>i.replace(/^(.*)\.mof$/,"$1"));if(t.length==0)return;const s=t.reduce((i,o,y)=>({...i,[y]:o}),{});i3("Load",s,i=>{const o=localStorage.getItem(`${s[i]||"_temp"}.${$2}`);if(o!=null)e.importData(o);else throw new Error("error")},()=>{e.scene.allRerender()})}function DG(e){e.scene.setInteractive(!1);const t=Object.keys(localStorage).filter(i=>/^.*\.mof$/.test(i)).map(i=>i.replace(/^(.*)\.mof$/,"$1"));if(t.length==0)return;const s=t.reduce((i,o,y)=>({...i,[y]:o}),{});i3("Remove",s,i=>{localStorage.removeItem(`${s[i]}.${$2}`)},()=>{e.scene.setInteractive(!0)})}const $2="mof",Zm=7,Mb={x:50,y:50},Ty=800,Cy=800,fl=700,$b=20,LG=.9,MG=.36,$G=15,ge={first:1,second:2,neutral:3},ci={bg:1153348,frame:14596231,hole:3355443,innactive:4473924,rim:16777215,place:2250001,[`stone${ge.neutral}`]:12303291,[`stone${ge.first}`]:12264123,[`stone${ge.second}`]:2276283};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BG=1e-7,kG=1e-4;class r3{constructor(t,s){this.backend=t,this.dataMover=s,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,s){this.dataIdsCount++,this.data.set(t,s)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class B2{refCount(t){return Ts("refCount")}incRef(t){return Ts("incRef")}timerAvailable(){return!0}time(t){return Ts("time")}read(t){return Ts("read")}readSync(t){return Ts("readSync")}readToGPU(t,s){return Ts("readToGPU")}numDataIds(){return Ts("numDataIds")}disposeData(t,s){return Ts("disposeData")}write(t,s,i){return Ts("write")}move(t,s,i,o,y){return Ts("move")}createTensorFromGPUData(t,s,i){return Ts("createTensorFromGPUData")}memory(){return Ts("memory")}floatPrecision(){return Ts("floatPrecision")}epsilon(){return this.floatPrecision()===32?BG:kG}dispose(){return Ts("dispose")}}function Ts(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zG(e){let t=e.length,s=0;for(;t>0;)s=Math.random()*t|0,t--,vl(e,t,s)}function Po(e,t,s){return Math.max(e,Math.min(t,s))}function k2(e){return e%2===0?e:e+1}function vl(e,t,s){const i=e[t];e[t]=e[s],e[s]=i}function VG(e){let t=0;for(let s=0;s<e.length;s++)t+=e[s];return t}function q(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function $s(e,t,s=""){q(oe(e,t),()=>s+` Shapes ${e} and ${t} must match`)}function Eu(e){q(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function vt(e){if(e.length===0)return 1;let t=e[0];for(let s=1;s<e.length;s++)t*=e[s];return t}function GG(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==null&&t[s]!==null&&e[s]!==t[s])return!1;return!0}function oe(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function nu(e){return e%1===0}function wy(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Vl(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Bb(e,t=o=>0,s,i){return new Promise((o,y)=>{let r=0;const g=()=>{if(e()){o();return}r++;const n=t(r);if(s!=null&&r>=s){y();return}i!=null?i(g,n):setTimeout(g,n)};g()})}function a3(e,t){let s=1,i=-1;for(let y=0;y<e.length;++y)if(e[y]>=0)s*=e[y];else if(e[y]===-1){if(i!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${i} and dim ${y}`);i=y}else if(e[y]<0)throw Error(`Shapes can not be < 0. Found ${e[y]} at dim ${y}`);if(i===-1){if(t>0&&t!==s)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(s===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%s!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${s}`);const o=e.slice();return o[i]=t/s,o}function se(e,t){const s=t.length;return e=e==null?t.map((i,o)=>o):[].concat(e),q(e.every(i=>i>=-s&&i<s),()=>`All values in axis param must be in range [-${s}, ${s}) but got axis ${e}`),q(e.every(i=>nu(i)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(i=>i<0?s+i:i)}function Xa(e,t){const s=[],i=[],o=t!=null&&Array.isArray(t)&&t.length===0,y=t==null||o?null:se(t,e).sort();let r=0;for(let g=0;g<e.length;++g){if(y!=null){if(y[r]===g&&e[g]!==1)throw new Error(`Can't squeeze axis ${g} since its dim '${e[g]}' is not 1`);(y[r]==null||y[r]>g)&&e[g]===1&&(s.push(e[g]),i.push(g)),y[r]<=g&&r++}e[g]!==1&&(s.push(e[g]),i.push(g))}return{newShape:s,keptDims:i}}function Ln(e,t){return Qe(e,t)}function Qe(e,t){let s=null;if(e==null||e==="float32")s=new Float32Array(t);else if(e==="int32")s=new Int32Array(t);else if(e==="bool")s=new Uint8Array(t);else if(e==="string")s=new Array(t);else throw new Error(`Unknown data type ${e}`);return s}function UG(e,t){for(let s=0;s<e.length;s++){const i=e[s];if(isNaN(i)||!isFinite(i))throw Error(`A tensor of type ${t} being uploaded contains ${i}.`)}}function WG(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function o3(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function kp(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function HG(e){if(e==null)return 0;let t=0;return e.forEach(s=>t+=s.length),t}function wc(e){return typeof e=="string"||e instanceof String}function XG(e){return typeof e=="boolean"}function Ey(e){return typeof e=="number"}function bu(e){return Array.isArray(e)?bu(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Ey(e)?"float32":wc(e)?"string":XG(e)?"bool":"float32"}function by(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Ay(e,t){for(let s=t;s<e;++s)if(e%s===0)return s;return e}function Vt(e){const t=e.length;if(t<2)return[];const s=new Array(t-1);s[t-2]=e[t-1];for(let i=t-3;i>=0;--i)s[i]=s[i+1]*e[i+1];return s}function l3(e,t,s,i=!1){const o=new Array;if(t.length===1){const y=t[0]*(i?2:1);for(let r=0;r<y;r++)o[r]=s[e+r]}else{const y=t[0],r=t.slice(1),g=r.reduce((n,a)=>n*a)*(i?2:1);for(let n=0;n<y;n++)o[n]=l3(e+n*g,r,s,i)}return o}function yi(e,t,s=!1){if(e.length===0)return t[0];const i=e.reduce((o,y)=>o*y)*(s?2:1);if(i===0)return[];if(i!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${s?" for a complex tensor":""}.`);return l3(0,e,t,s)}function YG(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}function z2(e,t){const s=Yn(e,t);for(let i=0;i<s.length;i++)s[i]=1;return s}function Yn(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function u3(e,t){const s=e.reduce((i,o)=>i*o,1);if(t==null||t==="float32")return yi(e,new Float32Array(s));if(t==="int32")return yi(e,new Int32Array(s));if(t==="bool")return yi(e,new Uint8Array(s));throw new Error(`Unknown data type ${t}`)}function ti(e){e.forEach(t=>{q(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function mr(e,t,s){if(t===0)return 0;if(t===1)return e[0];let i=e[e.length-1];for(let o=0;o<e.length-1;++o)i+=s[o]*e[o];return i}function Au(e,t,s){if(t===0)return[];if(t===1)return[e];const i=new Array(t);for(let o=0;o<i.length-1;++o)i[o]=Math.floor(e/s[o]),e-=i[o]*s[o];return i[i.length-1]=e,i}function Fo(e){return e&&e.then&&typeof e.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kb="tfjsflags";class KG{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=jG,this.populateURLFlags()}setPlatform(t,s){this.platform!=null&&(pt().getBool("IS_TEST")||pt().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=s}registerFlag(t,s,i){if(this.flagRegistry[t]={evaluationFn:s,setHook:i},this.urlFlags[t]!=null){const o=this.urlFlags[t];pt().getBool("IS_TEST")||pt().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${o}.`),this.set(t,o)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const s=this.evaluateFlag(t);if(Fo(s))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=s,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,s){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=s,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(s)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const t=this.getQueryParams(this.global.location.search);kb in t&&t[kb].split(",").forEach(i=>{const[o,y]=i.split(":");this.urlFlags[o]=JG(o,y)})}}function jG(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(s,...i)=>(ZG(t,i[0],i[1]),i.join("="))),t}function ZG(e,t,s){e[decodeURIComponent(t)]=decodeURIComponent(s||"")}function JG(e,t){const s=t.toLowerCase();return s==="true"||s==="false"?s==="true":`${+s}`===s?+s:t}function pt(){return h3}let h3=null;function QG(e){h3=e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let z0;function c3(){if(z0==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");z0=e}return z0}function qG(){const e=c3();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function V2(e,t){const s=qG();if(s.has(e))return s.get(e);{const i=t();return s.set(e,i),s.get(e)}}const Jm="Abs",Ec="Acos",bc="Acosh",Iu="Add",Qm="AddN",G2="All",U2="Any",qm="ArgMax",_m="ArgMin",Ac="Asin",Ic="Asinh",Rc="Atan",Nc="Atanh",Pc="Atan2",tv="AvgPool",W2="AvgPoolGrad",ev="AvgPool3D",H2="AvgPool3DGrad",nv="BatchMatMul",sv="BatchToSpaceND",X2="Bincount",iv="BitwiseAnd",_G="BroadcastTo",Y2="BroadcastArgs",Fc="Cast",Oc="Ceil",Dc="ClipByValue",K2="Complex",rv="ComplexAbs",av="Concat",ov="Conv2D",j2="Conv2DBackpropFilter",lv="Conv2DBackpropInput",uv="Conv3D",Z2="Conv3DBackpropFilterV2",J2="Conv3DBackpropInputV2",Lc="Cos",Mc="Cosh",Q2="Cumprod",hv="Cumsum",q2="CropAndResize",_2="DenseBincount",tS="DepthToSpace",cv="DepthwiseConv2dNative",eS="DepthwiseConv2dNativeBackpropFilter",nS="DepthwiseConv2dNativeBackpropInput",sS="Diag",fv="Dilation2D",Iy="Dilation2DBackpropInput",Ry="Dilation2DBackpropFilter",tU="Draw",$c="RealDiv",iS="Einsum",Bc="Elu",rS="EluGrad",kc="Erf",dv="Equal",zc="Exp",pv="ExpandDims",Vc="Expm1",aS="FFT",oS="Fill",lS="FlipLeftRight",Gc="Floor",Uc="FloorDiv",mv="FusedBatchNorm",vv="GatherV2",uS="GatherNd",gv="Greater",Wc="GreaterEqual",Hc="Identity",hS="IFFT",cS="Imag",Xc="IsFinite",Yc="IsInf",Kc="IsNan",xv="LeakyRelu",yv="Less",Sv="LessEqual",fS="LinSpace",jc="Log",Zc="Log1p",Tv="LogicalAnd",Cv="LogicalNot",wv="LogicalOr",eU="LogSoftmax",Ev="LRN",dS="LRNGrad",bv="Max",Jc="Maximum",Av="MaxPool",pS="MaxPoolGrad",Iv="MaxPool3D",mS="MaxPool3DGrad",vS="MaxPoolWithArgmax",Rv="Mean",Nv="Min",Qc="Minimum",Pv="MirrorPad",qc="Mod",gS="Multinomial",_c="Multiply",Fv="Neg",Ov="NotEqual",xS="NonMaxSuppressionV3",yS="NonMaxSuppressionV4",SS="NonMaxSuppressionV5",Dv="OnesLike",Lv="OneHot",Mv="Pack",$v="PadV2",tf="Pow",Bv="Prelu",kv="Prod",TS="RaggedGather",CS="RaggedRange",wS="RaggedTensorToTensor",ES="Range",bS="Real",ef="Reciprocal",nf="Relu",zv="Reshape",Vv="ResizeNearestNeighbor",AS="ResizeNearestNeighborGrad",Gv="ResizeBilinear",IS="ResizeBilinearGrad",sf="Relu6",Uv="Reverse",rf="Round",af="Rsqrt",RS="ScatterNd",NS="TensorScatterUpdate",PS="SearchSorted",Wv="Select",of="Selu",Hv="Slice",lf="Sin",uf="Sinh",hf="Sign",cf="Sigmoid",ff="Softplus",df="Sqrt",Xv="Sum",Yv="SpaceToBatchND",Kv="SplitV",jv="Softmax",FS="SparseFillEmptyRows",OS="SparseReshape",DS="SparseSegmentMean",LS="SparseSegmentSum",MS="SparseToDense",pf="SquaredDifference",$S="Square",Zv="StaticRegexReplace",BS="StridedSlice",kS="StringNGrams",zS="StringSplit",VS="StringToHashBucketFast",mf="Sub",vf="Tan",gf="Tanh",xf="Tile",GS="TopK",US="Transform",Gl="Transpose",WS="Unique",Jv="Unpack",Qv="UnsortedSegmentSum",qv="ZerosLike",yf="Step",nU="FromPixels",HS="RotateWithOffset",zp="_FusedMatMul",Vp="FusedConv2D",Gp="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vs(...e){pt().getBool("IS_TEST")||pt().getBool("PROD")||console.warn(...e)}function sU(...e){pt().getBool("IS_TEST")||pt().getBool("PROD")||console.log(...e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Up=V2("kernelRegistry",()=>new Map),Ny=V2("gradRegistry",()=>new Map);function zb(e,t){const s=d3(e,t);return Up.get(s)}function Vb(e){return Ny.get(e)}function Gb(e){const t=Up.entries(),s=[];for(;;){const{done:i,value:o}=t.next();if(i)break;const[y,r]=o,[g]=y.split("_");g===e&&s.push(r)}return s}function f3(e){const{kernelName:t,backendName:s}=e,i=d3(t,s);Up.has(i)&&Vs(`The kernel '${t}' for backend '${s}' is already registered`),Up.set(i,e)}function iU(e){const{kernelName:t}=e;Ny.has(t)&&pt().getBool("DEBUG")&&Vs(`Overriding the gradient for '${t}'`),Ny.set(t,e)}function d3(e,t){return`${t}_${e}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var m3=Oe,fi=null;try{fi=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Oe(e,t,s){this.low=e|0,this.high=t|0,this.unsigned=!!s}Oe.prototype.__isLong__;Object.defineProperty(Oe.prototype,"__isLong__",{value:!0});function Bs(e){return(e&&e.__isLong__)===!0}Oe.isLong=Bs;var Ub={},Wb={};function Yo(e,t){var s,i,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(i=Wb[e],i)?i:(s=De(e,(e|0)<0?-1:0,!0),o&&(Wb[e]=s),s)):(e|=0,(o=-128<=e&&e<128)&&(i=Ub[e],i)?i:(s=De(e,e<0?-1:0,!1),o&&(Ub[e]=s),s))}Oe.fromInt=Yo;function di(e,t){if(isNaN(e))return t?go:pi;if(t){if(e<0)return go;if(e>=v3)return y3}else{if(e<=-Xb)return As;if(e+1>=Xb)return x3}return e<0?di(-e,t).neg():De(e%su|0,e/su|0,t)}Oe.fromNumber=di;function De(e,t,s){return new Oe(e,t,s)}Oe.fromBits=De;var Wp=Math.pow;function XS(e,t,s){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return pi;if(typeof t=="number"?(s=t,t=!1):t=!!t,s=s||10,s<2||36<s)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return XS(e.substring(1),t,s).neg();for(var o=di(Wp(s,8)),y=pi,r=0;r<e.length;r+=8){var g=Math.min(8,e.length-r),n=parseInt(e.substring(r,r+g),s);if(g<8){var a=di(Wp(s,g));y=y.mul(a).add(di(n))}else y=y.mul(o),y=y.add(di(n))}return y.unsigned=t,y}Oe.fromString=XS;function Zi(e,t){return typeof e=="number"?di(e,t):typeof e=="string"?XS(e,t):De(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}Oe.fromValue=Zi;var Hb=65536,rU=1<<24,su=Hb*Hb,v3=su*su,Xb=v3/2,Yb=Yo(rU),pi=Yo(0);Oe.ZERO=pi;var go=Yo(0,!0);Oe.UZERO=go;var Ol=Yo(1);Oe.ONE=Ol;var g3=Yo(1,!0);Oe.UONE=g3;var Py=Yo(-1);Oe.NEG_ONE=Py;var x3=De(-1,2147483647,!1);Oe.MAX_VALUE=x3;var y3=De(-1,-1,!0);Oe.MAX_UNSIGNED_VALUE=y3;var As=De(0,-2147483648,!1);Oe.MIN_VALUE=As;var Pt=Oe.prototype;Pt.toInt=function(){return this.unsigned?this.low>>>0:this.low};Pt.toNumber=function(){return this.unsigned?(this.high>>>0)*su+(this.low>>>0):this.high*su+(this.low>>>0)};Pt.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(As)){var s=di(t),i=this.div(s),o=i.mul(s).sub(this);return i.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var y=di(Wp(t,6),this.unsigned),r=this,g="";;){var n=r.div(y),a=r.sub(n.mul(y)).toInt()>>>0,p=a.toString(t);if(r=n,r.isZero())return p+g;for(;p.length<6;)p="0"+p;g=""+p+g}};Pt.getHighBits=function(){return this.high};Pt.getHighBitsUnsigned=function(){return this.high>>>0};Pt.getLowBits=function(){return this.low};Pt.getLowBitsUnsigned=function(){return this.low>>>0};Pt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(As)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,s=31;s>0&&!(t&1<<s);s--);return this.high!=0?s+33:s+1};Pt.isZero=function(){return this.high===0&&this.low===0};Pt.eqz=Pt.isZero;Pt.isNegative=function(){return!this.unsigned&&this.high<0};Pt.isPositive=function(){return this.unsigned||this.high>=0};Pt.isOdd=function(){return(this.low&1)===1};Pt.isEven=function(){return(this.low&1)===0};Pt.equals=function(t){return Bs(t)||(t=Zi(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};Pt.eq=Pt.equals;Pt.notEquals=function(t){return!this.eq(t)};Pt.neq=Pt.notEquals;Pt.ne=Pt.notEquals;Pt.lessThan=function(t){return this.comp(t)<0};Pt.lt=Pt.lessThan;Pt.lessThanOrEqual=function(t){return this.comp(t)<=0};Pt.lte=Pt.lessThanOrEqual;Pt.le=Pt.lessThanOrEqual;Pt.greaterThan=function(t){return this.comp(t)>0};Pt.gt=Pt.greaterThan;Pt.greaterThanOrEqual=function(t){return this.comp(t)>=0};Pt.gte=Pt.greaterThanOrEqual;Pt.ge=Pt.greaterThanOrEqual;Pt.compare=function(t){if(Bs(t)||(t=Zi(t)),this.eq(t))return 0;var s=this.isNegative(),i=t.isNegative();return s&&!i?-1:!s&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};Pt.comp=Pt.compare;Pt.negate=function(){return!this.unsigned&&this.eq(As)?As:this.not().add(Ol)};Pt.neg=Pt.negate;Pt.add=function(t){Bs(t)||(t=Zi(t));var s=this.high>>>16,i=this.high&65535,o=this.low>>>16,y=this.low&65535,r=t.high>>>16,g=t.high&65535,n=t.low>>>16,a=t.low&65535,p=0,h=0,u=0,d=0;return d+=y+a,u+=d>>>16,d&=65535,u+=o+n,h+=u>>>16,u&=65535,h+=i+g,p+=h>>>16,h&=65535,p+=s+r,p&=65535,De(u<<16|d,p<<16|h,this.unsigned)};Pt.subtract=function(t){return Bs(t)||(t=Zi(t)),this.add(t.neg())};Pt.sub=Pt.subtract;Pt.multiply=function(t){if(this.isZero())return pi;if(Bs(t)||(t=Zi(t)),fi){var s=fi.mul(this.low,this.high,t.low,t.high);return De(s,fi.get_high(),this.unsigned)}if(t.isZero())return pi;if(this.eq(As))return t.isOdd()?As:pi;if(t.eq(As))return this.isOdd()?As:pi;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Yb)&&t.lt(Yb))return di(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,o=this.high&65535,y=this.low>>>16,r=this.low&65535,g=t.high>>>16,n=t.high&65535,a=t.low>>>16,p=t.low&65535,h=0,u=0,d=0,l=0;return l+=r*p,d+=l>>>16,l&=65535,d+=y*p,u+=d>>>16,d&=65535,d+=r*a,u+=d>>>16,d&=65535,u+=o*p,h+=u>>>16,u&=65535,u+=y*a,h+=u>>>16,u&=65535,u+=r*n,h+=u>>>16,u&=65535,h+=i*p+o*a+y*n+r*g,h&=65535,De(d<<16|l,h<<16|u,this.unsigned)};Pt.mul=Pt.multiply;Pt.divide=function(t){if(Bs(t)||(t=Zi(t)),t.isZero())throw Error("division by zero");if(fi){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var s=(this.unsigned?fi.div_u:fi.div_s)(this.low,this.high,t.low,t.high);return De(s,fi.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?go:pi;var i,o,y;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return go;if(t.gt(this.shru(1)))return g3;y=go}else{if(this.eq(As)){if(t.eq(Ol)||t.eq(Py))return As;if(t.eq(As))return Ol;var r=this.shr(1);return i=r.div(t).shl(1),i.eq(pi)?t.isNegative()?Ol:Py:(o=this.sub(t.mul(i)),y=i.add(o.div(t)),y)}else if(t.eq(As))return this.unsigned?go:pi;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();y=pi}for(o=this;o.gte(t);){i=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var g=Math.ceil(Math.log(i)/Math.LN2),n=g<=48?1:Wp(2,g-48),a=di(i),p=a.mul(t);p.isNegative()||p.gt(o);)i-=n,a=di(i,this.unsigned),p=a.mul(t);a.isZero()&&(a=Ol),y=y.add(a),o=o.sub(p)}return y};Pt.div=Pt.divide;Pt.modulo=function(t){if(Bs(t)||(t=Zi(t)),fi){var s=(this.unsigned?fi.rem_u:fi.rem_s)(this.low,this.high,t.low,t.high);return De(s,fi.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};Pt.mod=Pt.modulo;Pt.rem=Pt.modulo;Pt.not=function(){return De(~this.low,~this.high,this.unsigned)};Pt.and=function(t){return Bs(t)||(t=Zi(t)),De(this.low&t.low,this.high&t.high,this.unsigned)};Pt.or=function(t){return Bs(t)||(t=Zi(t)),De(this.low|t.low,this.high|t.high,this.unsigned)};Pt.xor=function(t){return Bs(t)||(t=Zi(t)),De(this.low^t.low,this.high^t.high,this.unsigned)};Pt.shiftLeft=function(t){return Bs(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?De(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):De(0,this.low<<t-32,this.unsigned)};Pt.shl=Pt.shiftLeft;Pt.shiftRight=function(t){return Bs(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?De(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):De(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};Pt.shr=Pt.shiftRight;Pt.shiftRightUnsigned=function(t){if(Bs(t)&&(t=t.toInt()),t&=63,t===0)return this;var s=this.high;if(t<32){var i=this.low;return De(i>>>t|s<<32-t,s>>>t,this.unsigned)}else return t===32?De(s,0,this.unsigned):De(s>>>t-32,0,this.unsigned)};Pt.shru=Pt.shiftRightUnsigned;Pt.shr_u=Pt.shiftRightUnsigned;Pt.toSigned=function(){return this.unsigned?De(this.low,this.high,!1):this};Pt.toUnsigned=function(){return this.unsigned?this:De(this.low,this.high,!0)};Pt.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};Pt.toBytesLE=function(){var t=this.high,s=this.low;return[s&255,s>>>8&255,s>>>16&255,s>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};Pt.toBytesBE=function(){var t=this.high,s=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,s>>>24,s>>>16&255,s>>>8&255,s&255]};Oe.fromBytes=function(t,s,i){return i?Oe.fromBytesLE(t,s):Oe.fromBytesBE(t,s)};Oe.fromBytesLE=function(t,s){return new Oe(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,s)};Oe.fromBytesBE=function(t,s){return new Oe(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],s)};const S3=vm(m3),aU=BI({__proto__:null,default:S3},[m3]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uo=S3||aU;function _v(e){return uo.fromString(e,!0,16)}const T3=_v("c3a5c85c97cb3127"),lo=_v("b492b66fbe98f273"),es=_v("9ae16a3b2f90404f");function Fy(e){return e.xor(e.shru(47))}function C3(e,t,s){const i=e.slice(t,t+s);return uo.fromBytes(Array.from(i),!0,!0)}function Ie(e,t){return C3(e,t,8)}function Kb(e,t){return C3(e,t,4)}function wn(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function Aa(e,t,s=_v("9ddfea08eb382d69")){let i=e.xor(t).mul(s);i=i.xor(i.shru(47));let o=t.xor(i).mul(s);return o=o.xor(o.shru(47)),o=o.mul(s),o}function oU(e,t,s,i,o,y){o=o.add(e),y=wn(y.add(o).add(i),21);const r=o;return o=o.add(t),o=o.add(s),y=y.add(wn(o,44)),[o.add(i),y.add(r)]}function yd(e,t,s,i){return oU(Ie(e,t),Ie(e,t+8),Ie(e,t+16),Ie(e,t+24),s,i)}function lU(e,t=e.length){if(t>=8){const s=es.add(t*2),i=Ie(e,0).add(es),o=Ie(e,t-8),y=wn(o,37).mul(s).add(i),r=wn(i,25).add(o).mul(s);return Aa(y,r,s)}if(t>=4){const s=es.add(t*2),i=Kb(e,0);return Aa(i.shl(3).add(t),Kb(e,t-4),s)}if(t>0){const s=e[0],i=e[t>>1],o=e[t-1],y=s+(i<<8),r=t+(o<<2);return Fy(es.mul(y).xor(T3.mul(r))).mul(es)}return es}function uU(e,t=e.length){const s=es.add(t*2),i=Ie(e,0).mul(lo),o=Ie(e,8),y=Ie(e,t-8).mul(s),r=Ie(e,t-16).mul(es);return Aa(wn(i.add(o),43).add(wn(y,30)).add(r),i.add(wn(o.add(es),18)).add(y),s)}function hU(e,t=e.length){const s=es.add(t*2),i=Ie(e,0).mul(es),o=Ie(e,8),y=Ie(e,t-8).mul(s),r=Ie(e,t-16).mul(es),g=wn(i.add(o),43).add(wn(y,30)).add(r),n=Aa(g,i.add(wn(o.add(es),18)).add(y),s),a=Ie(e,16).mul(s),p=Ie(e,24),h=g.add(Ie(e,t-32)).mul(s),u=n.add(Ie(e,t-24)).mul(s);return Aa(wn(a.add(p),43).add(wn(h,30)).add(u),a.add(wn(p.add(i),18)).add(h),s)}function cU(e,t=e.length){const s=uo.fromNumber(81,!0);if(t<=32)return t<=16?lU(e,t):uU(e,t);if(t<=64)return hU(e,t);let i=s,o=s.mul(lo).add(113),y=Fy(o.mul(es).add(113)).mul(es),r=[uo.UZERO,uo.UZERO],g=[uo.UZERO,uo.UZERO];i=i.mul(es).add(Ie(e,0));let n=0;const a=(t-1>>6)*64,p=a+(t-1&63)-63;do i=wn(i.add(o).add(r[0]).add(Ie(e,n+8)),37).mul(lo),o=wn(o.add(r[1]).add(Ie(e,n+48)),42).mul(lo),i=i.xor(g[1]),o=o.add(r[0]).add(Ie(e,n+40)),y=wn(y.add(g[0]),33).mul(lo),r=yd(e,n,r[1].mul(lo),i.add(g[0])),g=yd(e,n+32,y.add(g[1]),o.add(Ie(e,n+16))),[y,i]=[i,y],n+=64;while(n!==a);const h=lo.add(y.and(255).shl(1));return n=p,g[0]=g[0].add(t-1&63),r[0]=r[0].add(g[0]),g[0]=g[0].add(r[0]),i=wn(i.add(o).add(r[0]).add(Ie(e,n+8)),37).mul(h),o=wn(o.add(r[1]).add(Ie(e,n+48)),42).mul(h),i=i.xor(g[1].mul(9)),o=o.add(r[0].mul(9).add(Ie(e,n+40))),y=wn(y.add(g[0]),33).mul(h),r=yd(e,n,r[1].mul(h),i.add(g[0])),g=yd(e,n+32,y.add(g[1]),o.add(Ie(e,n+16))),[y,i]=[i,y],Aa(Aa(r[0],g[0],h).add(Fy(o).mul(T3)).add(y),Aa(r[1],g[1],h).add(i),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ya(e,t){return t==="string"?Ia(e):Ko([e],t)}function fU(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function Ko(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Oo(e)),pt().getBool("DEBUG")&&UG(e,t),fU(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){const s=new Uint8Array(e.length);for(let i=0;i<s.length;++i)Math.round(e[i])!==0&&(s[i]=1);return s}else throw new Error(`Unknown data type ${t}`)}function cs(){return pt().platform.now()}function Ia(e,t="utf-8"){return t=t||"utf-8",pt().platform.encode(e,t)}function Oa(e,t="utf-8"){return t=t||"utf-8",pt().platform.decode(e,t)}function bi(e){return pt().platform.isTypedArray!=null?pt().platform.isTypedArray(e):p3(e)}function Oo(e,t=[],s=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||Fo(e)||e==null||bi(e)&&s)t.push(e);else if(Array.isArray(e)||bi(e))for(let i=0;i<e.length;++i)Oo(e[i],t,s);else{let i=-1;for(const o of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(o)&&(i=Math.max(i,Number(o)));for(let o=0;o<=i;o++)Oo(e[o],t,s)}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dU{constructor(t,s){this.backendTimer=t,this.logger=s,s==null&&(this.logger=new mU)}profileKernel(t,s,i){let o;const y=()=>{o=i()};let r;const g=cs();if(this.backendTimer.timerAvailable())r=this.backendTimer.time(y);else{y();for(const a of o)a.dataSync();r=Promise.resolve({kernelMs:cs()-g})}if(pt().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let a=0;a<o.length;a++){const p=o[a];p.data().then(h=>{pU(h,p.dtype,t)})}return{kernelName:t,outputs:o,inputs:s,timeMs:r.then(a=>a.kernelMs),extraInfo:r.then(a=>a.getExtraProfileInfo!=null?a.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:s,outputs:i,timeMs:o,inputs:y,extraInfo:r}=t;i.forEach(g=>{Promise.all([g.data(),o,r]).then(n=>{this.logger.logKernelProfile(s,g,n[0],n[1],y,n[2])})})}}function pU(e,t,s){if(t!=="float32")return!1;for(let i=0;i<e.length;i++){const o=e[i];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${s}'`),!0}return!1}class mU{logKernelProfile(t,s,i,o,y,r){const g=typeof o=="number"?Vl(`${o}ms`,9):o.error,n=Vl(t,25),a=s.rank,p=s.size,h=Vl(s.shape.toString(),14);let u="";for(const d in y){const l=y[d];if(l!=null){const c=l.shape||s.shape,m=c.length;u+=`${d}: ${m}D ${m>0?c:""} `}}console.log(`%c${n}	%c${g}	%c${a}D ${h}	%c${p}	%c${u}	%c${r}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vU(e,t,s){const i={},o={};for(let n=0;n<t.length;n++)i[t[n].id]=!0;for(let n=0;n<e.length;n++){const a=e[n],p=a.inputs;for(const h in p){const u=p[h];let d=!1;for(let l=0;l<t.length;l++)if(i[u.id]){a.outputs.forEach(c=>i[c.id]=!0),d=!0,o[a.id]=!0;break}if(d)break}}const y={};y[s.id]=!0;const r={};for(let n=e.length-1;n>=0;n--){const a=e[n],p=a.inputs;for(let h=0;h<a.outputs.length;h++)if(y[a.outputs[h].id]){for(const u in p)y[p[u].id]=!0,r[a.id]=!0;break}}const g=[];for(let n=0;n<e.length;n++){const a=e[n];if(o[a.id]&&r[a.id]){const p={};for(const u in a.inputs){const d=a.inputs[u];i[d.id]&&(p[u]=d)}const h=Object.assign({},a);h.inputs=p,h.outputs=a.outputs,g.push(h)}}return g}function gU(e,t,s,i){for(let o=t.length-1;o>=0;o--){const y=t[o],r=[];if(y.outputs.forEach(n=>{const a=e[n.id];a!=null?r.push(a):r.push(null)}),y.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${y.kernelName}.`);const g=y.gradient(r);for(const n in y.inputs){if(!(n in g))throw new Error(`Cannot backprop through input ${n}. Available gradients found: ${Object.keys(g)}.`);const a=s(()=>g[n]());if(a.dtype!=="float32")throw new Error(`Error in gradient for op ${y.kernelName}. The gradient of input ${n} must have 'float32' dtype, but has '${a.dtype}'`);const p=y.inputs[n];if(!oe(a.shape,p.shape))throw new Error(`Error in gradient for op ${y.kernelName}. The gradient of input '${n}' has shape '${a.shape}', which does not match the shape of the input '${p.shape}'`);if(e[p.id]==null)e[p.id]=a;else{const h=e[p.id];e[p.id]=i(h,a),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jb=20,sh=3,V0=7;function xU(e,t,s,i){const o=Vt(t),y=yU(e,t,s,o),r=t.length,g=Zd(e,t,s,o,y),n=["Tensor"];return i&&(n.push(`  dtype: ${s}`),n.push(`  rank: ${r}`),n.push(`  shape: [${t}]`),n.push("  values:")),n.push(g.map(a=>"    "+a).join(`
`)),n.join(`
`)}function yU(e,t,s,i){const o=vt(t),y=i[i.length-1],r=new Array(y).fill(0),g=t.length,n=s==="complex64"?ph(e):e;if(g>1)for(let a=0;a<o/y;a++){const p=a*y;for(let h=0;h<y;h++)r[h]=Math.max(r[h],dh(n[p+h],0,s).length)}return r}function dh(e,t,s){let i;return Array.isArray(e)?i=`${parseFloat(e[0].toFixed(V0))} + ${parseFloat(e[1].toFixed(V0))}j`:wc(e)?i=`'${e}'`:s==="bool"?i=w3(e):i=parseFloat(e.toFixed(V0)).toString(),Vl(i,t)}function w3(e){return e===0?"false":"true"}function Zd(e,t,s,i,o,y=!0){const r=s==="complex64"?2:1,g=t[0],n=t.length;if(n===0){if(s==="complex64"){const c=ph(e);return[dh(c[0],0,s)]}return s==="bool"?[w3(e[0])]:[e[0].toString()]}if(n===1){if(g>jb){const m=sh*r;let f=Array.from(e.slice(0,m)),v=Array.from(e.slice((g-sh)*r,g*r));return s==="complex64"&&(f=ph(f),v=ph(v)),["["+f.map((S,x)=>dh(S,o[x],s)).join(", ")+", ..., "+v.map((S,x)=>dh(S,o[g-sh+x],s)).join(", ")+"]"]}return["["+(s==="complex64"?ph(e):Array.from(e)).map((m,f)=>dh(m,o[f],s)).join(", ")+"]"]}const a=t.slice(1),p=i.slice(1),h=i[0]*r,u=[];if(g>jb){for(let c=0;c<sh;c++){const m=c*h,f=m+h;u.push(...Zd(e.slice(m,f),a,s,p,o,!1))}u.push("...");for(let c=g-sh;c<g;c++){const m=c*h,f=m+h;u.push(...Zd(e.slice(m,f),a,s,p,o,c===g-1))}}else for(let c=0;c<g;c++){const m=c*h,f=m+h;u.push(...Zd(e.slice(m,f),a,s,p,o,c===g-1))}const d=n===2?",":"";u[0]="["+(g>0?u[0]+d:"");for(let c=1;c<u.length-1;c++)u[c]=" "+u[c]+d;let l=`,
`;for(let c=2;c<n;c++)l+=`
`;return u[u.length-1]=" "+u[u.length-1]+"]"+(y?"":l),u}function ph(e){const t=[];for(let s=0;s<e.length;s+=2)t.push([e[s],e[s+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vn{constructor(t,s,i){if(this.dtype=s,this.shape=t.slice(),this.size=vt(t),i!=null){const o=i.length;q(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(s==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=i||Qe(s,this.size),this.strides=Vt(t)}set(t,...s){s.length===0&&(s=[0]),q(s.length===this.rank,()=>`The number of provided coordinates (${s.length}) must match the rank (${this.rank})`);const i=this.locToIndex(s);this.values[i]=t}get(...t){t.length===0&&(t=[0]);let s=0;for(const o of t){if(o<0||o>=this.shape[s]){const y=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(y)}s++}let i=t[t.length-1];for(let o=0;o<t.length-1;++o)i+=this.strides[o]*t[o];return this.values[i]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let s=t[t.length-1];for(let i=0;i<t.length-1;++i)s+=this.strides[i]*t[i];return s}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const s=new Array(this.shape.length);for(let i=0;i<s.length-1;++i)s[i]=Math.floor(t/this.strides[i]),t-=s[i]*this.strides[i];return s[s.length-1]=t,s}get rank(){return this.shape.length}toTensor(){return ki().makeTensor(this.values,this.shape,this.dtype)}}let ki=null,gl=null;function SU(e){ki=e}function TU(e){gl=e}class $e{constructor(t,s,i,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=s||"float32",this.size=vt(t),this.strides=Vt(t),this.dataId=i,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return gl.buffer(this.shape,this.dtype,t)}bufferSync(){return gl.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return yi(this.shape,t,this.dtype==="complex64")}arraySync(){return yi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=ki().read(this.dataId);if(this.dtype==="string"){const s=await t;try{return s.map(i=>Oa(i))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),ki().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=ki().readSync(this.dataId);if(this.dtype==="string")try{return t.map(s=>Oa(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await ki().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(ki().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return gl.print(this,t)}clone(){return this.throwIfDisposed(),gl.clone(this)}toString(t=!1){const s=this.dataSync();return xU(s,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),gl.cast(this,t)}variable(t=!0,s,i){return this.throwIfDisposed(),ki().makeVariable(this,t,s,i)}}Object.defineProperty($e,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function gt(){return V2("Tensor",()=>$e)}gt();class Hp extends $e{constructor(t,s,i,o){super(t.shape,t.dtype,t.dataId,o),this.trainable=s,this.name=i}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!oe(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);ki().disposeTensor(this),this.dataId=t.dataId,ki().incRef(this,null)}dispose(){ki().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Hp,Symbol.hasInstance,{value:e=>e instanceof $e&&e.assign!=null&&e.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Zb;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(Zb||(Zb={}));var Oy;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(Oy||(Oy={}));var Dy;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(Dy||(Dy={}));var Ly;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(Ly||(Ly={}));var My;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(My||(My={}));const CU={float32:Ly,int32:Oy,bool:Dy,complex64:My};function Os(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return CU[e][t]}function YS(e){return Os(e,"int32")}function E3(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function b3(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ze(e,t){if(e.dtype===t.dtype)return[e,t];const s=Os(e.dtype,t.dtype);return[e.cast(s),t.cast(s)]}function wU(e,t){q(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function A3(e){const t=[];return I3(e,t,new Set),t}function I3(e,t,s){if(e==null)return;if(e instanceof $e){t.push(e);return}if(!EU(e))return;const i=e;for(const o in i){const y=i[o];s.has(y)||(s.add(y),I3(y,t,s))}}function EU(e){return Array.isArray(e)||typeof e=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G0(e){return e.kernelName!=null}class Jb{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class iu{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Jb}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let s=0;s<t.length;s++){const i=t[s];if(await this.initializeBackend(i).success){await this.setBackend(i);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:s}=this.initializeBackendsAndReturnBest();if(s)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:s}=this.initializeBackend(t);if(s)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,s,i=1){return t in this.registryFactory?(Vs(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:s,priority:i},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:s,asyncInit:i}=this.initializeBackend(t);if(!(i?await s:s))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new dU(this.backendInstance),!0}setupRegisteredKernels(){Gb(this.backendName).forEach(s=>{s.setupFunc!=null&&s.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){Gb(t).forEach(i=>{i.disposeFunc!=null&&i.disposeFunc(this.registry[t])})}initializeBackend(t){const s=this.registryFactory[t];if(s==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const i=s.factory();if(i&&!(i instanceof B2)&&typeof i.then=="function"){const o=++this.pendingBackendInitId,y=i.then(r=>o<this.pendingBackendInitId?!1:(this.registry[t]=r,this.pendingBackendInit=null,!0)).catch(r=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,Vs(`Initialization of backend ${t} failed`),Vs(r.stack||r.message)),!1));return this.pendingBackendInit=y,{success:y,asyncInit:!0}}else return this.registry[t]=i,{success:!0,asyncInit:!1}}catch(i){return Vs(`Initialization of backend ${t} failed`),Vs(i.stack||i.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,s)=>this.registryFactory[s].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let s=0;s<t.length;s++){const i=t[s],{success:o,asyncInit:y}=this.initializeBackend(i);if(y||o)return{name:i,asyncInit:y}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,s){const i=this.state.tensorInfo.get(s),o=i.backend,y=this.readSync(s),r=o.refCount(s);o.disposeData(s,!0),i.backend=t,t.move(s,y,i.shape,i.dtype,r),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,s){let i=null;if(s==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");s=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof s!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}let o;return this.scopedRun(()=>this.startScope(i),()=>this.endScope(o),()=>(o=s(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(t,s,i){t();try{const o=i();return s(),o}catch(o){throw s(),o}}nextTensorId(){return iu.nextTensorId++}nextVariableId(){return iu.nextVariableId++}clone(t){const s=it.runKernel(Hc,{x:t}),i={x:t},o=r=>({x:()=>{const g="float32",n={x:r},a={dtype:g};return it.runKernel(Fc,n,a)}}),y=[];return this.addTapeNode(this.state.activeScope.name,i,[s],o,y,{}),s}runKernel(t,s,i){if(this.backendName==null&&this.backend,!(zb(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:s,attrs:i})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,s,i){const o=this.backend.numDataIds();let y=0;i.forEach(n=>{y+=n.dtype==="complex64"?3:1});const r=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],g=o-s-y-r;if(g>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${g} data ids) after running '${t}'`)}runKernelFunc(t){let s,i=[];const o=this.isTapeOn(),y=this.state.numBytes,r=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let g;this.backendName==null&&this.backend;let n;const a=G0(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(G0(t)){const{kernelName:l,inputs:c,attrs:m}=t;this.backendName==null&&this.backend;const f=zb(l,this.backendName);q(f!=null,()=>`Cannot find registered kernel '${l}' for backend '${this.backendName}'`),g=()=>{const v=this.backend.numDataIds();n=f.kernelFunc({inputs:c,attrs:m,backend:this.backend});const S=Array.isArray(n)?n:[n];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,v,S);const x=S.map(T=>T.rank!=null?T:this.makeTensorFromTensorInfo(T));if(o){const T=this.getTensorsForGradient(l,c,x);i=this.saveTensorsForBackwardMode(T)}return x}}else{const{forwardFunc:l}=t,c=m=>{o&&(i=m.map(f=>this.keep(this.clone(f))))};g=()=>{const m=this.backend.numDataIds();n=this.tidy(()=>l(this.backend,c));const f=Array.isArray(n)?n:[n];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(a,m,f),f}}const{inputs:p,attrs:h}=t,u=G0(t)?null:t.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?s=g():(d=this.profiler.profileKernel(a,p,()=>g()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),s=d.outputs)}),o&&this.addTapeNode(a,p,s,u,i,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-y,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-r,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(p).map(l=>p[l]!=null?p[l].shape:null),outputShapes:s.map(l=>l.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(n)?s:s[0]}saveTensorsForBackwardMode(t){return t.map(i=>this.keep(this.clone(i)))}getTensorsForGradient(t,s,i){const o=Vb(t);if(o!=null){const y=o.inputsToSave||[],r=o.outputsToSave||[];let g;o.saveAllInputs?(q(Array.isArray(s),()=>"saveAllInputs is true, expected inputs to be an array."),g=Object.keys(s).map(a=>s[a])):g=y.map(a=>s[a]);const n=i.filter((a,p)=>r[p]);return g.concat(n)}return[]}makeTensor(t,s,i,o){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");i=i||"float32",o=o||this.backend;let y=t;i==="string"&&wc(t[0])&&(y=t.map(n=>Ia(n)));const r=o.write(y,s,i),g=new $e(s,i,r,this.nextTensorId());if(this.trackTensor(g,o),i==="string"){const n=this.state.tensorInfo.get(r),a=HG(y);this.state.numBytes+=a-n.bytes,n.bytes=a}return g}makeTensorFromDataId(t,s,i,o){i=i||"float32";const y={dataId:t,shape:s,dtype:i};return this.makeTensorFromTensorInfo(y,o)}makeTensorFromTensorInfo(t,s){const{dataId:i,shape:o,dtype:y}=t,r=new $e(o,y,i,this.nextTensorId());return this.trackTensor(r,s),r}makeVariable(t,s=!0,i,o){i=i||this.nextVariableId().toString(),o!=null&&o!==t.dtype&&(t=t.cast(o));const y=new Hp(t,s,i,this.nextTensorId());if(this.state.registeredVariables[y.name]!=null)throw new Error(`Variable with name ${y.name} was already registered`);return this.state.registeredVariables[y.name]=y,this.incRef(y,this.backend),y}trackTensor(t,s){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let i=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(i=t.size*kp(t.dtype)),this.state.numBytes+=i,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:s||this.backend,dtype:t.dtype,shape:t.shape,bytes:i})),t instanceof Hp||this.track(t)}incRef(t,s){this.trackTensor(t,s),this.backend.incRef(t.dataId)}removeDataId(t,s){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===s&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const s=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=s.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const i=t.size*kp(t.dtype);this.state.numBytes-=i}s.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,s.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const s=this.state.registeredVariables[t];this.disposeVariable(s)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const s=this.state.numBytes,i=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-s,this.state.activeProfile.newTensors=this.state.numTensors-i;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,s,i,o,y,r){const g={id:this.state.nextTapeNodeId++,kernelName:t,inputs:s,outputs:i,saved:y},n=Vb(t);n!=null&&(o=n.gradFunc),o!=null&&(g.gradient=a=>(a=a.map((p,h)=>{if(p==null){const u=i[h],d=Yn(u.size,u.dtype);return this.makeTensor(d,u.shape,u.dtype)}return p}),o(a.length>1?a:a[0],y,r))),this.state.activeTape.push(g)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const s={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(s.name=t),this.state.scopeStack.push(s),this.state.activeScope=s}endScope(t){const s=A3(t),i=new Set(s.map(y=>y.id));for(let y=0;y<this.state.activeScope.track.length;y++){const r=this.state.activeScope.track[y];!r.kept&&!i.has(r.id)&&r.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],s.forEach(y=>{!y.kept&&y.scopeId===o.id&&this.track(y)})}gradients(t,s,i,o=!1){if(q(s.length>0,()=>"gradients() received an empty list of xs."),i!=null&&i.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${i.dtype}'`);const y=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));q(y instanceof $e,()=>"The result y returned by f() must be a tensor.");const r=vU(this.state.activeTape,s,y);if(!o&&r.length===0&&s.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const g={};g[y.id]=i??bU(y.shape),gU(g,r,a=>this.tidy(a),AU);const n=s.map(a=>g[a.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(a=>{for(const p of a.saved)p.dispose()}),this.state.activeTape=null),{value:y,grads:n}})}customGrad(t){return q(by(t),()=>"The f passed in customGrad(f) must be a function."),(...s)=>{q(s.every(g=>g instanceof $e),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let i;const o={};s.forEach((g,n)=>{o[n]=g});const y=(g,n)=>(i=t(...s,n),q(i.value instanceof $e,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),q(by(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),r=(g,n)=>{const a=i.gradFunc(g,n),p=Array.isArray(a)?a:[a];q(p.length===s.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),q(p.every(u=>u instanceof $e),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return p.forEach((u,d)=>{h[d]=()=>u}),h};return this.runKernelFunc({forwardFunc:y,backwardsFunc:r,inputs:o})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,s){return this.state.tensorInfo.get(t).backend.readToGPU(t,s)}async time(t){const s=cs(),i=await this.backend.time(t);return i.wallMs=cs()-s,i}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Jb;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}iu.nextTensorId=0;iu.nextVariableId=0;function bU(e){const t=z2(vt(e),"float32");return it.makeTensor(t,e,"float32")}function R3(){const e=c3();if(e._tfengine==null){const t=new KG(e);e._tfengine=new iu(t)}return QG(e._tfengine.ENV),SU(()=>e._tfengine),e._tfengine}const it=R3();function AU(e,t){const s={a:e,b:t};return it.runKernel(Iu,s)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IU(){return typeof navigator<"u"&&navigator!=null}function N3(e){if(e||IU()){if(e||(e=navigator),e.product==="ReactNative")return!0;const t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){const s=e;return s.userAgentData&&s.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function P3(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ms=pt();ms.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ms.registerFlag("IS_BROWSER",()=>P3());ms.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ms.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ms.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ms.registerFlag("PROD",()=>!1);ms.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ms.getBool("DEBUG"));ms.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ms.registerFlag("IS_TEST",()=>!1);ms.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ms.getBool("DEBUG"));ms.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ms.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ms.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ka(e,t){let s=e;if(bi(e))return t==="string"?[]:[e.length];if(E3(e)){const o=e.channels||"RGBA";return[e.height,e.width*o.length]}else if(b3(e))return[e.buffer.size/(t==null?4:kp(t))];if(!Array.isArray(e))return[];const i=[];for(;Array.isArray(s)||bi(s)&&t!=="string";)i.push(s.length),s=s[0];return Array.isArray(e)&&pt().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&F3(e,i,[]),i}function F3(e,t,s){if(s=s||[],!Array.isArray(e)&&!bi(e)){q(t.length===0,()=>`Element arr[${s.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}q(t.length>0,()=>`Element arr[${s.join("][")}] should be a primitive, but is an array of ${e.length} elements`),q(e.length===t[0],()=>`Element arr[${s.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const i=t.slice(1);for(let o=0;o<e.length;++o)F3(e[o],i,s.concat(o))}function Qb(e,t,s,i){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${s}' passed to '${i}' must be ${e} tensor, but got ${t} tensor`)}}function _(e,t,s,i="numeric"){if(e instanceof $e)return Qb(i,e.dtype,t,s),e;let o=bu(e);if(o!=="string"&&["bool","int32","float32"].indexOf(i)>=0&&(o=i),Qb(i,o,t,s),e==null||!bi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){const n=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${s}' must be a Tensor or TensorLike, but got '${n}'`)}const y=Ka(e,o);!bi(e)&&!Array.isArray(e)&&(e=[e]);const g=o!=="string"?Ko(e,o):Oo(e,[],!0);return it.makeTensor(g,y,o)}function Xp(e,t,s,i="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${s} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((y,r)=>_(y,`${t}[${r}]`,s,i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O3="__op";function st(e){const t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let s=t[0];const i=e[s];s.endsWith("_")&&(s=s.substring(0,s.length-1)),s=s+O3;const o=(...y)=>{it.startScope(s);try{const r=i(...y);return Fo(r)&&console.error("Cannot return a Promise inside of tidy."),it.endScope(r),r}catch(r){throw it.endScope(null),r}};return Object.defineProperty(o,"name",{value:s,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RU(e,t){const s=_(e,"real","complex"),i=_(t,"imag","complex");$s(s.shape,i.shape,`real and imag shapes, ${s.shape} and ${i.shape}, must match in call to tf.complex().`);const o={real:s,imag:i};return it.runKernel(K2,o)}const Da=st({complex_:RU});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ja(e,t,s,i){if(i==null)i=bu(e);else if(i==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(b3(e)||E3(e)){if(i!=="float32"&&i!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${i}.`);return it.backend.createTensorFromGPUData(e,t||s,i)}if(!bi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){ti(t);const o=vt(t),y=vt(s);q(o===y,()=>`Based on the provided shape, [${t}], the tensor should have ${o} values but has ${y}`);for(let r=0;r<s.length;++r){const g=s[r],n=r===s.length-1?g!==vt(t.slice(r)):!0;q(s[r]===t[r]||!n,()=>`Error creating a new Tensor. Inferred shape (${s}) does not match the provided shape (${t}). `)}}return!bi(e)&&!Array.isArray(e)&&(e=[e]),t=t||s,e=i!=="string"?Ko(e,i):Oo(e,[],!0),it.makeTensor(e,t,i)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Si(e,t,s){const i=Ka(e,s);return ja(e,t,i,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $y={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Ji{static join(t){return new Ji(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(i=>bi(i)?i.buffer:i),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let s=0;for(let i=0;i<t.length;i++){const o=t[i];i!==t.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const y=s+o.byteLength;this.shards.push({buffer:o,start:s,end:y}),s=y}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,s=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,s=isNaN(Number(s))?0:s,t=Math.max(0,t),s=Math.min(this.byteLength,s),s<=t)return new ArrayBuffer(0);const i=this.findShardForByte(t);if(i===-1)throw new Error(`Could not find start shard for byte ${t}`);const o=s-t,y=new ArrayBuffer(o),r=new Uint8Array(y);let g=0;for(let n=i;n<this.shards.length;n++){const a=this.shards[n],h=t+g-a.start,u=g,l=Math.min(s,a.end)-a.start,c=new Uint8Array(a.buffer,h,l-h);if(r.set(c,u),g+=c.length,s<a.end)break}return y}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function s(o){return t<o.start?-1:t>=o.end?1:0}if(s(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const i=NU(this.shards,s);return i===-1?-1:(this.previousShardIndex=i,this.previousShardIndex)}}function NU(e,t){let s=0,i=e.length;for(;s<=i;){const o=Math.floor((i-s)/2)+s,y=t(e[o]);if(y===0)return o;y<0?i=o:s=o+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yp=4;async function By(e,t){const s=[],i=[],o=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);for(let r=0;r<o.length;++r){const g=o[r],n=Array.isArray(e)?e[r].tensor:e[g];if(n.dtype!=="float32"&&n.dtype!=="int32"&&n.dtype!=="bool"&&n.dtype!=="string"&&n.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${g}': ${n.dtype}`);const a={name:g,shape:n.shape,dtype:n.dtype};if(n.dtype==="string"){const p=new Promise(async h=>{const u=await n.bytes(),d=u.reduce((m,f)=>m+f.length,0)+Yp*u.length,l=new Uint8Array(d);let c=0;for(let m=0;m<u.length;m++){const f=u[m],v=new Uint8Array(new Uint32Array([f.length]).buffer);l.set(v,c),c+=Yp,l.set(f,c),c+=f.length}h(l)});i.push(p)}else i.push(n.data());t!=null&&(a.group=t),s.push(a)}const y=await Promise.all(i);return{data:PU(y),specs:s}}function D3(e,t){const s=new Ji(e),i={};let o,y=0;for(const r of t){const g=r.name,n=r.dtype,a=r.shape,p=vt(a);let h;if("quantization"in r){const u=r.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${r.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(n!=="float32")throw new Error(`Weight ${r.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${n}.`)}else throw new Error(`Weight ${r.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const d=$y[u.dtype],l=s.slice(y,y+p*d),c=u.dtype==="uint8"?new Uint8Array(l):new Uint16Array(l);if(n==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){h=new Float32Array(c.length);for(let m=0;m<c.length;m++){const f=c[m];h[m]=f*u.scale+u.min}}else if(u.dtype==="float16")o===void 0&&(o=$U()),h=o(c);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(n==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);h=new Int32Array(c.length);for(let m=0;m<c.length;m++){const f=c[m];h[m]=Math.round(f*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${g}': ${n}`);y+=p*d}else if(n==="string"){const u=vt(r.shape);h=[];for(let d=0;d<u;d++){const l=new Uint32Array(s.slice(y,y+Yp))[0];y+=Yp;const c=new Uint8Array(s.slice(y,y+l));h.push(c),y+=l}}else{const u=$y[n],d=s.slice(y,y+p*u);if(n==="float32")h=new Float32Array(d);else if(n==="int32")h=new Int32Array(d);else if(n==="bool")h=new Uint8Array(d);else if(n==="complex64"){h=new Float32Array(d);const l=new Float32Array(h.length/2),c=new Float32Array(h.length/2);for(let v=0;v<l.length;v++)l[v]=h[v*2],c[v]=h[v*2+1];const m=Si(l,a,"float32"),f=Si(c,a,"float32");i[g]=Da(m,f),m.dispose(),f.dispose()}else throw new Error(`Unsupported dtype in weight '${g}': ${n}`);y+=p*u}n!=="complex64"&&(i[g]=Si(h,a,n))}return i}function PU(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const s=[];e.forEach(y=>{if(t+=y.byteLength,s.push(y.byteLength===y.buffer.byteLength?y:new y.constructor(y)),!(y instanceof Float32Array||y instanceof Int32Array||y instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${y.constructor.name}`)});const i=new Uint8Array(t);let o=0;return s.forEach(y=>{i.set(new Uint8Array(y.buffer),o),o+=y.byteLength}),i.buffer}const KS=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function qb(e){return KS?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function FU(e){if(KS)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let s="";for(let i=0,o=t.length;i<o;i++)s+=String.fromCharCode(t[i]);return btoa(s)}function OU(e){if(KS){const i=Buffer.from(e,"base64");return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}const t=atob(e),s=new Uint8Array(t.length);for(let i=0;i<t.length;++i)s.set([t.charCodeAt(i)],i);return s.buffer}function L3(e){return Ji.join(e)}function _b(e){const t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);const s=e.split(t);return s[s.length-1]}function M3(e,t){const s={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(s.signature=e.signature),e.userDefinedMetadata!=null&&(s.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(s.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(s.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(s.trainingConfig=e.trainingConfig),s}function $3(e,t,s){const i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(i.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!s)throw new Error("modelJSON has weightsManifest but weightData is null");i.weightSpecs=t,i.weightData=s}return e.signature!=null&&(i.signature=e.signature),e.userDefinedMetadata!=null&&(i.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(i.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(i.initializerSignature=e.initializerSignature),i}async function jS(e,t){let s,i;return e.weightsManifest!=null&&([s,i]=await t(e.weightsManifest)),$3(e,s,i)}function Sf(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:qb(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:qb(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new Ji(e.weightData).byteLength}}function B3(e){const t=[];for(const s of e)t.push(...s.weights);return t}function DU(){const e=s=>{let i=s<<13,o=0;for(;!(i&8388608);)o-=8388608,i<<=1;return i&=-8388609,o+=947912704,i|o},t=new Uint32Array(2048);t[0]=0;for(let s=1;s<1024;s++)t[s]=e(s);for(let s=1024;s<2048;s++)t[s]=939524096+(s-1024<<13);return t}function LU(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function MU(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function $U(){const e=DU(),t=LU(),s=MU();return i=>{const o=new ArrayBuffer(4*i.length),y=new Uint32Array(o);for(let r=0;r<i.length;r++){const g=i[r],n=e[s[g>>10]+(g&1023)]+t[g>>10];y[r]=n}return new Float32Array(o)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ve{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Ve.instance==null&&(Ve.instance=new Ve),Ve.instance}static registerSaveRouter(t){Ve.getInstance().saveRouters.push(t)}static registerLoadRouter(t){Ve.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return Ve.getHandlers(t,"save")}static getLoadHandlers(t,s){return Ve.getHandlers(t,"load",s)}static getHandlers(t,s,i){const o=[];return(s==="load"?Ve.getInstance().loadRouters:Ve.getInstance().saveRouters).forEach(r=>{const g=r(t,i);g!==null&&o.push(g)}),o}}const BU=e=>Ve.registerSaveRouter(e),kU=e=>Ve.registerLoadRouter(e),k3=e=>Ve.getSaveHandlers(e),zU=(e,t)=>Ve.getLoadHandlers(e,t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ky="tensorflowjs",zy=1,xo="models_store",pa="model_info_store";function z3(){if(!pt().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Vy(e){const t=e.result;t.createObjectStore(xo,{keyPath:"modelPath"}),t.createObjectStore(pa,{keyPath:"modelPath"})}class Do{constructor(t){if(this.indexedDB=z3(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,s){return new Promise((i,o)=>{const y=this.indexedDB.open(ky,zy);y.onupgradeneeded=()=>Vy(y),y.onsuccess=()=>{const r=y.result;if(s==null){const g=r.transaction(xo,"readonly"),a=g.objectStore(xo).get(this.modelPath);a.onsuccess=()=>{if(a.result==null)return r.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));i(a.result.modelArtifacts)},a.onerror=p=>(r.close(),o(a.error)),g.oncomplete=()=>r.close()}else{s.weightData=Ji.join(s.weightData);const g=Sf(s),n=r.transaction(pa,"readwrite");let a=n.objectStore(pa),p;try{p=a.put({modelPath:this.modelPath,modelArtifactsInfo:g})}catch(u){return o(u)}let h;p.onsuccess=()=>{h=r.transaction(xo,"readwrite");const u=h.objectStore(xo);let d;try{d=u.put({modelPath:this.modelPath,modelArtifacts:s,modelArtifactsInfo:g})}catch(l){return o(l)}d.onsuccess=()=>i({modelArtifactsInfo:g}),d.onerror=l=>{a=n.objectStore(pa);const c=a.delete(this.modelPath);c.onsuccess=()=>(r.close(),o(d.error)),c.onerror=m=>(r.close(),o(d.error))}},p.onerror=u=>(r.close(),o(p.error)),n.oncomplete=()=>{h==null?r.close():h.oncomplete=()=>r.close()}}},y.onerror=r=>o(y.error)})}}Do.URL_SCHEME="indexeddb://";const V3=e=>pt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Do.URL_SCHEME)?VU(e.slice(Do.URL_SCHEME.length)):null;Ve.registerSaveRouter(V3);Ve.registerLoadRouter(V3);function VU(e){return new Do(e)}function GU(e){return e.startsWith(Do.URL_SCHEME)?e.slice(Do.URL_SCHEME.length):e}class UU{constructor(){this.indexedDB=z3()}async listModels(){return new Promise((t,s)=>{const i=this.indexedDB.open(ky,zy);i.onupgradeneeded=()=>Vy(i),i.onsuccess=()=>{const o=i.result,y=o.transaction(pa,"readonly"),g=y.objectStore(pa).getAll();g.onsuccess=()=>{const n={};for(const a of g.result)n[a.modelPath]=a.modelArtifactsInfo;t(n)},g.onerror=n=>(o.close(),s(g.error)),y.oncomplete=()=>o.close()},i.onerror=o=>s(i.error)})}async removeModel(t){return t=GU(t),new Promise((s,i)=>{const o=this.indexedDB.open(ky,zy);o.onupgradeneeded=()=>Vy(o),o.onsuccess=()=>{const y=o.result,r=y.transaction(pa,"readwrite"),g=r.objectStore(pa),n=g.get(t);let a;n.onsuccess=()=>{if(n.result==null)return y.close(),i(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const p=g.delete(t),h=()=>{a=y.transaction(xo,"readwrite");const d=a.objectStore(xo).delete(t);d.onsuccess=()=>s(n.result.modelArtifactsInfo),d.onerror=l=>i(n.error)};p.onsuccess=h,p.onerror=u=>(h(),y.close(),i(n.error))}},n.onerror=p=>(y.close(),i(n.error)),r.oncomplete=()=>{a==null?y.close():a.oncomplete=()=>y.close()}},o.onerror=y=>i(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lr="/",xl="tensorflowjs_models",G3="info",WU="model_topology",HU="weight_specs",XU="weight_data",YU="model_metadata";function U3(e){return{info:[xl,e,G3].join(Lr),topology:[xl,e,WU].join(Lr),weightSpecs:[xl,e,HU].join(Lr),weightData:[xl,e,XU].join(Lr),modelMetadata:[xl,e,YU].join(Lr)}}function W3(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function KU(e){const t=e.split(Lr);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(Lr)}function jU(e){return e.startsWith(Lo.URL_SCHEME)?e.slice(Lo.URL_SCHEME.length):e}class Lo{constructor(t){if(!pt().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=U3(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const s=JSON.stringify(t.modelTopology),i=JSON.stringify(t.weightSpecs),o=Sf(t),y=Ji.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,s),this.LS.setItem(this.keys.weightSpecs,i),this.LS.setItem(this.keys.weightData,FU(y));const r={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(r)),{modelArtifactsInfo:o}}catch{throw W3(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const s={},i=JSON.parse(this.LS.getItem(this.keys.topology));if(i==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);s.modelTopology=i;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);s.weightSpecs=o;const y=this.LS.getItem(this.keys.modelMetadata);if(y!=null){const g=JSON.parse(y);s.format=g.format,s.generatedBy=g.generatedBy,s.convertedBy=g.convertedBy,g.signature!=null&&(s.signature=g.signature),g.userDefinedMetadata!=null&&(s.userDefinedMetadata=g.userDefinedMetadata),g.modelInitializer!=null&&(s.modelInitializer=g.modelInitializer),g.initializerSignature!=null&&(s.initializerSignature=g.initializerSignature),g.trainingConfig!=null&&(s.trainingConfig=g.trainingConfig)}const r=this.LS.getItem(this.keys.weightData);if(r==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return s.weightData=OU(r),s}}Lo.URL_SCHEME="localstorage://";const H3=e=>pt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Lo.URL_SCHEME)?ZU(e.slice(Lo.URL_SCHEME.length)):null;Ve.registerSaveRouter(H3);Ve.registerLoadRouter(H3);function ZU(e){return new Lo(e)}class JU{constructor(){q(pt().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),q(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},s=xl+Lr,i=Lr+G3;for(let o=0;o<this.LS.length;++o){const y=this.LS.key(o);if(y.startsWith(s)&&y.endsWith(i)){const r=KU(y);t[r]=JSON.parse(this.LS.getItem(y))}}return t}async removeModel(t){t=jU(t);const s=U3(t);if(this.LS.getItem(s.info)==null)throw new Error(`Cannot find model at path '${t}'`);const i=JSON.parse(this.LS.getItem(s.info));return W3(s),i}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ul="://";class _n{constructor(){this.managers={}}static getInstance(){return _n.instance==null&&(_n.instance=new _n),_n.instance}static registerManager(t,s){q(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(Ul)&&(t=t.slice(0,t.indexOf(Ul))),q(t.length>0,()=>"scheme must not be an empty string.");const i=_n.getInstance();q(i.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),i.managers[t]=s}static getManager(t){const s=_n.getInstance().managers[t];if(s==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return s}static getSchemes(){return Object.keys(_n.getInstance().managers)}}function Jd(e){if(e.indexOf(Ul)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${_n.getSchemes().join(",")}`);return{scheme:e.split(Ul)[0],path:e.split(Ul)[1]}}async function X3(e,t,s=!1){q(e!==t,()=>`Old path and new path are the same: '${e}'`);const i=Ve.getLoadHandlers(e);q(i.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),q(i.length<2,()=>`Copying failed because more than one (${i.length}) load handlers for source URL ${e}.`);const o=i[0],y=Ve.getSaveHandlers(t);q(y.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),q(y.length<2,()=>`Copying failed because more than one (${i.length}) save handlers for destination URL ${t}.`);const r=y[0],g=Jd(e).scheme,n=Jd(e).path,a=g===Jd(e).scheme,p=await o.load();s&&a&&await _n.getManager(g).removeModel(n);const h=await r.save(p);return s&&!a&&await _n.getManager(g).removeModel(n),h.modelArtifactsInfo}async function QU(){const e=_n.getSchemes(),t={};for(const s of e){const i=await _n.getManager(s).listModels();for(const o in i){const y=s+Ul+o;t[y]=i[o]}}return t}async function qU(e){const t=Jd(e);return _n.getManager(t.scheme).removeModel(t.path)}async function _U(e,t){return X3(e,t,!1)}async function tW(e,t){return X3(e,t,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eW{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,s){return fetch(t,s)}now(){return performance.now()}encode(t,s){if(s!=="utf-8"&&s!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${s}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,s){return new TextDecoder(s).decode(t)}setTimeoutCustom(t,s){if(typeof window>"u"||!pt().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,s);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},s),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",i=>{if(i.source===window&&i.data.name===this.messageName){i.stopPropagation();const o=this.functionRefs[i.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return p3(t)}}if(pt().get("IS_BROWSER")){pt().setPlatform("browser",new eW);try{_n.registerManager(Lo.URL_SCHEME,new JU)}catch{}try{_n.registerManager(Do.URL_SCHEME,new UU)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nW={importFetch:()=>require("node-fetch")};let U0;class sW{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,s){return pt().global.fetch!=null?pt().global.fetch(t,s):(U0==null&&(U0=nW.importFetch()),U0(t,s))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,s){if(s!=="utf-8"&&s!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${s}`);return this.textEncoder.encode(t)}decode(t,s){return t.length===0?"":new this.util.TextDecoder(s).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}pt().get("IS_NODE")&&!pt().get("IS_BROWSER")&&pt().setPlatform("node",new sW);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function te(e,t="float32",s){return t=t||"float32",ti(e),new vn(e,t,s)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iW(e,t){const s=_(e,"x","cast");if(!WG(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&s.dtype!=="string"||t!=="string"&&s.dtype==="string")throw new Error("Only strings can be casted to strings");const i={x:s},o={dtype:t};return it.runKernel(Fc,i,o)}const Ft=st({cast_:iW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rW(e){const s={x:_(e,"x","clone","string_or_numeric")};return it.runKernel(Hc,s)}const zr=st({clone_:rW});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y3(e,t=!1){console.log(e.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */R3();const aW={buffer:te,cast:Ft,clone:zr,print:Y3};TU(aW);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tr(){return it}function Gy(){return it.memory()}function ft(e,t){return it.tidy(e,t)}function ne(e){A3(e).forEach(s=>s.dispose())}function bn(e){return it.keep(e)}function K3(e,t,s=1){return it.registerBackend(e,t,s)}function oW(){return it.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lW(e,t){let s=_(e,"a","add"),i=_(t,"b","add");[s,i]=Ze(s,i);const o={a:s,b:i};return it.runKernel(Iu,o)}const wt=st({add_:lW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uW(e,t){let s=_(e,"a","floorDiv"),i=_(t,"b","floorDiv");[s,i]=Ze(s,i);const o={a:s,b:i};return it.runKernel(Uc,o)}const ZS=st({floorDiv_:uW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hW(e,t){let s=_(e,"a","div"),i=_(t,"b","div");if([s,i]=Ze(s,i),s.dtype==="int32"&&i.dtype==="int32")return ZS(s,i);const o={a:s,b:i},y={};return it.runKernel($c,o,y)}const kt=st({div_:hW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cW(e,t){let s=_(e,"a","mul"),i=_(t,"b","mul");[s,i]=Ze(s,i);const o={a:s,b:i};return it.runKernel(_c,o)}const rt=st({mul_:cW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fW(e){const t=_(e,"x","abs");if(t.dtype==="complex64"){const s={x:t};return it.runKernel(rv,s)}else{const s={x:t};return it.runKernel(Jm,s)}}const un=st({abs_:fW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dW(e){const s={x:_(e,"x","acos")};return it.runKernel(Ec,s)}const j3=st({acos_:dW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pW(e){const s={x:_(e,"x","acosh")};return it.runKernel(bc,s)}const Z3=st({acosh_:pW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mW(e){q(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),q(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);const t=e.map((o,y)=>_(o,`tensors${y}`,"addN")),s=t[0];t.forEach(o=>{if(o.dtype!==s.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(o=>{if(!oe(o.shape,s.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const i=t;return it.runKernel(Qm,i)}const vW=st({addN_:mW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gW(e,t=null,s=!1){const o={x:_(e,"x","all","bool")},y={axis:t,keepDims:s};return it.runKernel(G2,o,y)}const JS=st({all_:gW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xW(e,t=null,s=!1){const o={x:_(e,"x","any","bool")},y={axis:t,keepDims:s};return it.runKernel(U2,o,y)}const Kp=st({any_:xW});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yW(e,t=0){const i={x:_(e,"x","argMax")},o={axis:t};return it.runKernel(qm,i,o)}const ru=st({argMax_:yW});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SW(e,t=0){const i={x:_(e,"x","argMin")},o={axis:t};return it.runKernel(_m,i,o)}const J3=st({argMin_:SW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TW(e){const s={x:_(e,"x","asin")};return it.runKernel(Ac,s)}const Q3=st({asin_:TW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CW(e){const s={x:_(e,"x","asinh")};return it.runKernel(Ic,s)}const q3=st({asinh_:CW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wW(e){const s={x:_(e,"x","atan")};return it.runKernel(Rc,s)}const _3=st({atan_:wW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EW(e,t){let s=_(e,"a","atan2"),i=_(t,"b","atan2");[s,i]=Ze(s,i);const o={a:s,b:i};return it.runKernel(Pc,o)}const tF=st({atan2_:EW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bW(e){const s={x:_(e,"x","atanh")};return it.runKernel(Nc,s)}const eF=st({atanh_:bW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tf(e,t,s,i,o="NHWC",y){const r=e[3],g=[...t,r],n=qr(o);return Rn(e,g,s,y,i,null,null,n)}function Ri(e,t,s,i,o,y,r="channelsLast"){const[g,n]=_h(t);let a;if(r==="channelsLast")a=[g,n,e[3],e[3]];else if(r==="channelsFirst")a=[g,n,e[1],e[1]];else throw new Error(`Unknown dataFormat ${r}`);return Rn(e,a,s,i,o,y,!1,r)}function Qr(e,t,s,i,o,y,r="NDHWC"){const[g,n,a]=Uy(t);let p,h;if(r==="NDHWC")h="channelsLast",p=[g,n,a,e[4],e[4]];else if(r==="NCDHW")h="channelsFirst",p=[g,n,a,e[1],e[1]];else throw new Error(`Unknown dataFormat ${r}`);return Za(e,p,s,i,o,!1,h,y)}function Rn(e,t,s,i,o,y,r=!1,g="channelsLast"){let[n,a,p,h]=[-1,-1,-1,-1];if(g==="channelsLast")[n,a,p,h]=e;else if(g==="channelsFirst")[n,h,a,p]=e;else throw new Error(`Unknown dataFormat ${g}`);const[u,d,,l]=t,[c,m]=_h(s),[f,v]=_h(i),S=Wl(u,f),x=Wl(d,v),{padInfo:T,outHeight:C,outWidth:w}=RW(o,a,p,c,m,S,x,y,g),b=r?l*h:l;let E;return g==="channelsFirst"?E=[n,b,C,w]:g==="channelsLast"&&(E=[n,C,w,b]),{batchSize:n,dataFormat:g,inHeight:a,inWidth:p,inChannels:h,outHeight:C,outWidth:w,outChannels:b,padInfo:T,strideHeight:c,strideWidth:m,filterHeight:u,filterWidth:d,effectiveFilterHeight:S,effectiveFilterWidth:x,dilationHeight:f,dilationWidth:v,inShape:e,outShape:E,filterShape:t}}function Za(e,t,s,i,o,y=!1,r="channelsLast",g){let[n,a,p,h,u]=[-1,-1,-1,-1,-1];if(r==="channelsLast")[n,a,p,h,u]=e;else if(r==="channelsFirst")[n,u,a,p,h]=e;else throw new Error(`Unknown dataFormat ${r}`);const[d,l,c,,m]=t,[f,v,S]=Uy(s),[x,T,C]=Uy(i),w=Wl(d,x),b=Wl(l,T),E=Wl(c,C),{padInfo:A,outDepth:I,outHeight:R,outWidth:N}=NW(o,a,p,h,f,v,S,w,b,E,g),F=y?m*u:m;let P;return r==="channelsFirst"?P=[n,F,I,R,N]:r==="channelsLast"&&(P=[n,I,R,N,F]),{batchSize:n,dataFormat:r,inDepth:a,inHeight:p,inWidth:h,inChannels:u,outDepth:I,outHeight:R,outWidth:N,outChannels:F,padInfo:A,strideDepth:f,strideHeight:v,strideWidth:S,filterDepth:d,filterHeight:l,filterWidth:c,effectiveFilterDepth:w,effectiveFilterHeight:b,effectiveFilterWidth:E,dilationDepth:x,dilationHeight:T,dilationWidth:C,inShape:e,outShape:P,filterShape:t}}function AW(e,t,s,i,o){i==null&&(i=QS(e,t,s));const y=e[0],r=e[1],g=tc((y-t+2*i)/s+1,o),n=tc((r-t+2*i)/s+1,o);return[g,n]}function IW(e,t,s,i,o,y){o==null&&(o=QS(e,t[0],i[0]));const r=[0,0,0,s];for(let g=0;g<3;g++)e[g]+2*o>=t[g]&&(r[g]=tc((e[g]-t[g]+2*o)/i[g]+1,y));return r}function QS(e,t,s,i=1){const o=Wl(t,i);return Math.floor((e[0]*(s-1)-s+o)/2)}function _h(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Uy(e){return typeof e=="number"?[e,e,e]:e}function Wl(e,t){return t<=1?e:e+(e-1)*(t-1)}function RW(e,t,s,i,o,y,r,g,n){let a,p,h;if(typeof e=="number"){a={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};const d=AW([t,s],y,i,e,g);p=d[0],h=d[1]}else if(e==="same"){p=Math.ceil(t/i),h=Math.ceil(s/o);const u=Math.max(0,(p-1)*i+y-t),d=Math.max(0,(h-1)*o+r-s),l=Math.floor(u/2),c=u-l,m=Math.floor(d/2),f=d-m;a={top:l,bottom:c,left:m,right:f,type:"SAME"}}else if(e==="valid")a={top:0,bottom:0,left:0,right:0,type:"VALID"},p=Math.ceil((t-y+1)/i),h=Math.ceil((s-r+1)/o);else if(typeof e=="object"){const u=n==="channelsLast"?e[1][0]:e[2][0],d=n==="channelsLast"?e[1][1]:e[2][1],l=n==="channelsLast"?e[2][0]:e[3][0],c=n==="channelsLast"?e[2][1]:e[3][1];a={top:u,bottom:d,left:l,right:c,type:u===0&&d===0&&l===0&&c===0?"VALID":"EXPLICIT"},p=tc((t-y+u+d)/i+1,g),h=tc((s-r+l+c)/o+1,g)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:a,outHeight:p,outWidth:h}}function NW(e,t,s,i,o,y,r,g,n,a,p){let h,u,d,l;if(e==="valid"&&(e=0),typeof e=="number"){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};const m=IW([t,s,i,1],[g,n,a],1,[o,y,r],e,p);u=m[0],d=m[1],l=m[2]}else if(e==="same"){u=Math.ceil(t/o),d=Math.ceil(s/y),l=Math.ceil(i/r);const c=(u-1)*o+g-t,m=(d-1)*y+n-s,f=(l-1)*r+a-i,v=Math.floor(c/2),S=c-v,x=Math.floor(m/2),T=m-x,C=Math.floor(f/2),w=f-C;h={top:x,bottom:T,left:C,right:w,front:v,back:S,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:h,outDepth:u,outHeight:d,outWidth:l}}function tc(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function La(e){const[t,s,i]=_h(e);return t===1&&s===1&&i===1}function $n(e,t){return La(e)||La(t)}function Mo(e){return _h(e).every(t=>t>0)}function qr(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function os(e,t,s){if(s!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${s} but got pad ${t}.`);if(typeof t=="number")q(nu(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${s} but got pad ${t}.`);else if(typeof t=="object")t.forEach(i=>{i.forEach(o=>{q(nu(o),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${s} but got pad ${o}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PW(e,t){const i={x:_(e,"x","reshape","string_or_numeric")},o={shape:t};return it.runKernel(zv,i,o)}const at=st({reshape_:PW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FW(e,t,s,i,o){const y=_(e,"x","avgPool","float32"),r=1;q($n(s,r),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${r}'`);let g=y,n=!1;y.rank===3&&(n=!0,g=at(y,[1,y.shape[0],y.shape[1],y.shape[2]])),q(g.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${g.rank}.`),os("avgPool",i,o);const a={x:g},p={filterSize:t,strides:s,pad:i,dimRoundingMode:o};let h=it.runKernel(tv,a,p);return h=Ft(h,y.dtype),n?at(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const tg=st({avgPool_:FW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OW(e,t,s,i,o,y="NDHWC"){const r=_(e,"x","avgPool3d","float32");let g=r,n=!1;r.rank===4&&(n=!0,g=at(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]])),q(g.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${g.rank}.`),q(y==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${y}`),q(typeof s=="number"&&s>0||Array.isArray(s)&&s[0]>0&&s[1]>0&&s[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${s}'`),os("avgPool3d",i,o);const a={x:g},p={filterSize:t,strides:s,pad:i,dimRoundingMode:o,dataFormat:y};let h=it.runKernel(ev,a,p);return h=Ft(h,g.dtype),n?at(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const nF=st({avgPool3d_:OW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DW(e,t=0){q(e.length>=1,()=>"Pass at least one tensor to concat");const s=Xp(e,"tensors","concat","string_or_numeric");if(s[0].dtype==="complex64"&&s.forEach(y=>{if(y.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${y.dtype}. `)}),s.length===1)return zr(s[0]);const i=s,o={axis:t};return it.runKernel(av,i,o)}const on=st({concat_:DW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LW(e,t,s=!1,i=!1){let o=_(e,"a","matMul"),y=_(t,"b","matMul");[o,y]=Ze(o,y);const r={a:o,b:y},g={transposeA:s,transposeB:i};return it.runKernel(nv,r,g)}const re=st({matMul_:LW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MW(e){const s={x:_(e,"x","sigmoid","float32")};return it.runKernel(cf,s)}const vr=st({sigmoid_:MW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $W(e,t,s){const i=_(e,"x","slice","string_or_numeric");if(i.rank===0)throw new Error("Slicing scalar is not possible");const o={x:i},y={begin:t,size:s};return it.runKernel(Hv,o,y)}const le=st({slice_:$W});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BW(e){const s={x:_(e,"x","tanh","float32")};return it.runKernel(gf,s)}const au=st({tanh_:BW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kW(e,t,s,i,o,y){const r=_(e,"forgetBias","basicLSTMCell"),g=_(t,"lstmKernel","basicLSTMCell"),n=_(s,"lstmBias","basicLSTMCell"),a=_(i,"data","basicLSTMCell"),p=_(o,"c","basicLSTMCell"),h=_(y,"h","basicLSTMCell"),u=on([a,h],1),d=re(u,g),l=wt(d,n),c=l.shape[0],m=l.shape[1]/4,f=[c,m],v=le(l,[0,0],f),S=le(l,[0,m],f),x=le(l,[0,m*2],f),T=le(l,[0,m*3],f),C=wt(rt(vr(v),au(S)),rt(p,vr(wt(r,x)))),w=rt(au(C),vr(T));return[C,w]}const zW=st({basicLSTMCell_:kW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VW(e,t,s){const i=_(e,"x","batchToSpaceND"),o=t.reduce((g,n)=>g*n);q(i.rank>=1+t.length,()=>`input rank is ${i.rank} but should be > than blockShape.length ${t.length}`),q(s.length===t.length,()=>`crops.length is ${s.length} but should be equal to blockShape.length  ${t.length}`),q(i.shape[0]%o===0,()=>`input tensor batch is ${i.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`);const y={x:i},r={blockShape:t,crops:s};return it.runKernel(sv,y,r)}const eg=st({batchToSpaceND_:VW});function GW(e){let t;return e.rank===0||e.rank===1?t=at(e,[1,1,1,e.size]):e.rank===2?t=at(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=at(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UW(e,t,s,i,o,y){y==null&&(y=.001);const r=_(e,"x","batchNorm"),g=_(t,"mean","batchNorm"),n=_(s,"variance","batchNorm");let a;o!=null&&(a=_(o,"scale","batchNorm"));let p;i!=null&&(p=_(i,"offset","batchNorm")),q(g.rank===n.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(p==null||g.rank===p.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(a==null||g.rank===a.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const u={x:GW(r),scale:a,offset:p,mean:g,variance:n},d={varianceEpsilon:y},l=it.runKernel(mv,u,d);return at(l,r.shape)}const Cf=st({batchNorm_:UW});function WW(e,t,s,i,o,y){const r=_(e,"x","batchNorm"),g=_(t,"mean","batchNorm"),n=_(s,"variance","batchNorm");let a;o!=null&&(a=_(o,"scale","batchNorm"));let p;return i!=null&&(p=_(i,"offset","batchNorm")),q(r.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${r.rank}.`),q(g.rank===2||g.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${g.rank}.`),q(n.rank===2||n.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${n.rank}.`),a!=null&&q(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${a.rank}.`),p!=null&&q(p.rank===2||p.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${p.rank}.`),Cf(r,g,n,p,a,y)}const sF=st({batchNorm2d_:WW});function HW(e,t,s,i,o,y){const r=_(e,"x","batchNorm"),g=_(t,"mean","batchNorm"),n=_(s,"variance","batchNorm");let a;o!=null&&(a=_(o,"scale","batchNorm"));let p;return i!=null&&(p=_(i,"offset","batchNorm")),q(r.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${r.rank}.`),q(g.rank===3||g.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${g.rank}.`),q(n.rank===3||n.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${n.rank}.`),a!=null&&q(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${a.rank}.`),p!=null&&q(p.rank===3||p.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${p.rank}.`),Cf(r,g,n,p,a,y)}const iF=st({batchNorm3d_:HW});function XW(e,t,s,i,o,y){const r=_(e,"x","batchNorm"),g=_(t,"mean","batchNorm"),n=_(s,"variance","batchNorm");let a;o!=null&&(a=_(o,"scale","batchNorm"));let p;return i!=null&&(p=_(i,"offset","batchNorm")),q(r.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${r.rank}.`),q(g.rank===4||g.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${g.rank}.`),q(n.rank===4||n.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${n.rank}.`),a!=null&&q(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${a.rank}.`),p!=null&&q(p.rank===4||p.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${p.rank}.`),Cf(r,g,n,p,a,y)}const rF=st({batchNorm4d_:XW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YW(e,t,s){const i=_(e,"x","bincount"),o=_(t,"weights","bincount");q(i.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${i.dtype}`),q(s>=0,()=>`size must be non-negative, but got ${s}.`),q(o.size===i.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${i.shape}, weights shape: ${o.shape}.`);const y={x:i,weights:o},r={size:s};return it.runKernel(X2,y,r)}const aF=st({bincount_:YW});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KW(e,t){const s=_(e,"x","bitwiseAnd"),i=_(t,"y","bitwiseAnd");if(!oe(s.shape,i.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${s.shape}, y: ${i.shape}`);if(s.dtype!=="int32"||i.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${s.dtype} and type of y: ${i.dtype}`);const o={a:s,b:i};return it.runKernel(iv,o)}const jW=st({bitwiseAnd_:KW});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZW(e,t){const s=_(e,"s0","broadcastArgs","int32"),i=_(t,"s1","broadcastArgs","int32");if(s.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${s.rank}`);if(i.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${i.rank}`);const o={s0:s,s1:i};return it.runKernel(Y2,o)}const JW=st({broadcastArgs_:ZW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QW(e,t){let s=_(e,"broadcastTo","x");const i=s.shape;if(ti(t),t.length<s.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${s.rank}.`);if(t.length>s.rank){const a=s.shape.slice();for(;a.length<t.length;)a.unshift(1);s=at(s,a)}const o=s.shape,y=Array.from(t);for(let a=t.length-1;a>=0;a--)if(o[a]===t[a])y[a]=1;else if(s.shape[a]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${t}].`);if(y.map((a,p)=>a>1?p:-1).filter(a=>a>=0).length===0)return zr(s);const g={x:s},n={reps:y};return it.runKernel(xf,g,n)}const Hl=st({broadcastTo_:QW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qW(e){const s={x:_(e,"x","ceil","float32")};return it.runKernel(Oc,s)}const oF=st({ceil_:qW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ru(e,t,s){ti(e),s=s||bu(t);const i={shape:e,value:t,dtype:s};return it.runKernel(oS,{},i)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _W(e,t,s){const i=_(e,"x","clipByValue");if(q(t<=s,()=>`Error in clip: min (${t}) must be less than or equal to max (${s}).`),t===s)return Ru(i.shape,t,i.dtype);const o={x:i},y={clipValueMin:t,clipValueMax:s};return it.runKernel(Dc,o,y)}const Ds=st({clipByValue_:_W});function tH(e){return on(e,0)}const lF=st({concat1d_:tH});function eH(e,t){return on(e,t)}const uF=st({concat2d_:eH});function nH(e,t){return on(e,t)}const hF=st({concat3d_:nH});function sH(e,t){return on(e,t)}const cF=st({concat4d_:sH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iH(e,t,s,i,o="NHWC",y=[1,1],r){const g=_(e,"x","conv2d","float32"),n=_(t,"filter","conv2d","float32");let a=g,p=!1;g.rank===3&&(p=!0,a=at(g,[1,g.shape[0],g.shape[1],g.shape[2]])),q(a.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${a.rank}.`),q(n.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${n.rank}.`),os("conv2d",i,r);const h=o==="NHWC"?a.shape[3]:a.shape[1];q(h===n.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${n.shape[2]}.`),q($n(s,y),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${s} and dilations '${y}'`),q(Mo(y),()=>"Error in conv2D: Dilated rates should be larger than 0."),q(Mo(s),()=>"Error in conv2D: Strides should be larger than 0.");const u={x:a,filter:n},d={strides:s,pad:i,dataFormat:o,dilations:y,dimRoundingMode:r},l=it.runKernel(ov,u,d);return p?at(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const Ma=st({conv2d_:iH});function rH(e,t,s,i,o="NWC",y=1,r){const g=_(e,"x","conv1d"),n=_(t,"filter","conv1d");let a=g,p=!1;g.rank===2&&(p=!0,a=at(g,[1,g.shape[0],g.shape[1]])),q(a.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${a.rank}.`),q(n.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${n.rank}.`),os("conv1d",i,r),q(a.shape[2]===n.shape[1],()=>`Error in conv1d: depth of input (${a.shape[2]}) must match input depth for filter ${n.shape[1]}.`),q($n(s,y),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${s} and dilation '${y}'`),q(Mo(y),()=>"Error in conv1D: Dilated rates should be larger than 0."),q(Mo(s),()=>"Error in conv1D: Stride should be larger than 0."),q(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const h=at(n,[1,n.shape[0],n.shape[1],n.shape[2]]),u=at(a,[a.shape[0],1,a.shape[1],a.shape[2]]),m=Ma(u,h,[1,s],i,"NHWC",[1,y],r);return p?at(m,[m.shape[2],m.shape[3]]):at(m,[m.shape[0],m.shape[2],m.shape[3]])}const qS=st({conv1d_:rH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aH(e,t,s,i,o,y="NHWC",r){q(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let g=e,n=t,a=!1;t.rank===3&&(a=!0,n=at(t,[1,t.shape[0],t.shape[1],t.shape[2]]),g=[1,e[0],e[1],e[2]]),q(g.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${g.length}.`),q(n.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${n.rank}`),q(s.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${s.rank}`);const p=y==="NHWC"?g[3]:g[1],h=y==="NHWC"?n.shape[3]:n.shape[1];q(p===s.shape[2],()=>`Error in conv2dDerInput: depth of input (${p}) must match input depth for filter ${s.shape[2]}.`),q(h===s.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${s.shape[3]}.`),os("conv2dDerInput",o,r);const u={dy:n,filter:s},d={strides:i,pad:o,dataFormat:y,dimRoundingMode:r,inputShape:g},l=it.runKernel(lv,u,d);return a?at(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const _S=st({conv2DBackpropInput_:aH});function oH(e,t,s,i,o,y){const r=_(e,"x","conv2dTranspose"),g=_(t,"filter","conv2dTranspose");return _S(s,r,g,i,o,"NHWC",y)}const tT=st({conv2dTranspose_:oH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lH(e,t,s,i,o="NDHWC",y=[1,1,1]){const r=_(e,"x","conv3d"),g=_(t,"filter","conv3d");let n=r,a=!1;r.rank===4&&(a=!0,n=at(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]])),q(n.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${n.rank}.`),q(g.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${g.rank}.`),q(n.shape[4]===g.shape[3],()=>`Error in conv3d: depth of input (${n.shape[4]}) must match input depth for filter ${g.shape[3]}.`),q($n(s,y),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${s} and dilations '${y}'`),q(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),q(Mo(y),()=>"Error in conv3D: Dilated rates should be larger than 0."),q(Mo(s),()=>"Error in conv3D: Strides should be larger than 0.");const p={x:n,filter:g},h={strides:s,pad:i,dataFormat:o,dilations:y},u=it.runKernel(uv,p,h);return a?at(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}const fF=st({conv3d_:lH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uH(e,t,s,i,o){q(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let y=e,r=t,g=!1;t.rank===4&&(g=!0,r=at(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),y=[1,e[0],e[1],e[2],e[3]]);const n=y[4],a=r.shape[4];q(y.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${y.length}.`),q(r.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${r.rank}`),q(s.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${s.rank}`),q(n===s.shape[3],()=>`Error in conv3dDerInput: depth of input (${n}) must match input depth for filter ${s.shape[3]}.`),q(a===s.shape[4],()=>`Error in conv3dDerInput: depth of output (${a}) must match output depth for filter ${s.shape[4]}.`);const p={dy:r,filter:s},h={pad:o,strides:i,inputShape:y},u=it.runKernel(J2,p,h);return g?at(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}const dF=st({conv3DBackpropInput_:uH});function hH(e,t,s,i,o){const y=_(e,"x","conv3dTranspose"),r=_(t,"filter","conv3dTranspose");return dF(s,y,r,i,o)}const pF=st({conv3dTranspose_:hH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cH(e){const s={x:_(e,"x","cos","float32")};return it.runKernel(Lc,s)}const ng=st({cos_:cH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fH(e){const s={x:_(e,"x","cosh","float32")};return it.runKernel(Mc,s)}const eT=st({cosh_:fH});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dH(e,t=0,s=!1,i=!1){const y={x:_(e,"x","cumprod")},r={axis:t,exclusive:s,reverse:i};return it.runKernel(Q2,y,r)}const jp=st({cumprod_:dH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pH(e,t=0,s=!1,i=!1){const y={x:_(e,"x","cumsum")},r={axis:t,exclusive:s,reverse:i};return it.runKernel(hv,y,r)}const nT=st({cumsum_:pH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mH(e,t,s,i=!1){const o=_(e,"x","denseBincount"),y=_(t,"weights","denseBincount");q(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),q(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),q(s>=0,()=>`size must be non-negative, but got ${s}.`),q(y.size===o.size||y.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${y.shape}.`);const r={x:o,weights:y},g={size:s,binaryOutput:i};return it.runKernel(_2,r,g)}const Wy=st({denseBincount_:mH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vH(e,t,s="NHWC"){const i=_(e,"x","depthToSpace","float32"),o=s==="NHWC"?i.shape[1]:i.shape[2],y=s==="NHWC"?i.shape[2]:i.shape[3],r=s==="NHWC"?i.shape[3]:i.shape[1];q(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),q(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t}  for depthToSpace with input shape
    ${i.shape}`),q(y*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${y} and ${t} for depthToSpace with input shape
        ${i.shape}`),q(r%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${r} for depthToSpace with input shape ${i.shape}`);const g={x:i},n={blockSize:t,dataFormat:s};return it.runKernel(tS,g,n)}const mF=st({depthToSpace_:vH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gH(e,t,s,i,o="NHWC",y=[1,1],r){const g=_(e,"x","depthwiseConv2d","float32"),n=_(t,"filter","depthwiseConv2d","float32");let a=g,p=!1;g.rank===3&&(p=!0,a=at(g,[1,g.shape[0],g.shape[1],g.shape[2]])),q(a.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${a.rank}.`),q(n.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${n.rank}.`);const h=o==="NHWC"?a.shape[3]:a.shape[1];q(h===n.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${n.shape[2]}.`),os("depthwiseConv2d",i,r);const u={x:a,filter:n},d={strides:s,pad:i,dataFormat:o,dilations:y,dimRoundingMode:r},l=it.runKernel(cv,u,d);return p?at(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const wf=st({depthwiseConv2d_:gH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xH(e){const s={x:_(e,"x","diag")};return it.runKernel(sS,s)}const yH=st({diag_:xH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SH(e,t,s,i,o=[1,1],y="NHWC"){const r=_(e,"x","dilation2d"),g=_(t,"filter","dilation2d");q(r.rank===3||r.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${r.rank}.`),q(g.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${g.rank}.`),q(y==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${y}`);let n=r,a=!1;r.rank===3&&(n=at(r,[1,r.shape[0],r.shape[1],r.shape[2]]),a=!0),q(n.shape[3]===g.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${n.shape[3]} vs ${g.shape[2]}`);const p={x:n,filter:g},h={strides:s,pad:i,dilations:o},u=it.runKernel(fv,p,h);return a?at(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const vF=st({dilation2d_:SH});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ou(e,t){const s=e.length,i=[];for(let o=0;o<s;o++){const y=s-1-o,r=e[y]||1;(t[t.length-1-o]||1)>1&&r===1&&i.unshift(y)}return i}function yn(e,t){const s=[];for(let i=0;i<t.length;i++){const o=e[e.length-i-1],y=t.length-i-1,r=t[y];(o==null||o===1&&r>1)&&s.unshift(y)}return s}function Qt(e,t){const s=Math.max(e.length,t.length),i=new Array(s);for(let o=0;o<s;o++){let y=e[e.length-o-1];y==null&&(y=1);let r=t[t.length-o-1];if(r==null&&(r=1),y===1)i[s-o-1]=r;else if(r===1)i[s-o-1]=y;else if(y!==r){const g=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(g)}else i[s-o-1]=y}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TH(e,t){let s=_(e,"a","equal","string_or_numeric"),i=_(t,"b","equal","string_or_numeric");[s,i]=Ze(s,i),Qt(s.shape,i.shape);const o={a:s,b:i};return it.runKernel(dv,o)}const Xi=st({equal_:TH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CH(e,t,s){const i=_(t,"a","where"),o=_(s,"b","where"),y=_(e,"condition","where","bool"),r=Qt(Qt(y.shape,i.shape),o.shape),g=Hl(y,r),n=Hl(i,r),a=Hl(o,r),p={condition:g,t:n,e:a};return it.runKernel(Wv,p)}const Hn=st({where_:CH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wH(e){const s={x:_(e,"x","zerosLike")};return it.runKernel(qv,s)}const he=st({zerosLike_:wH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EH(e,t){let s=_(e,"a","div"),i=_(t,"b","div");[s,i]=Ze(s,i);const o=kt(s,i),y=he(o),r=Xi(i,y);return Hn(r,y,o)}const gF=st({divNoNan_:EH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bH(e,t){const s=_(e,"t1","dot"),i=_(t,"t2","dot");q((s.rank===1||s.rank===2)&&(i.rank===1||i.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${s.rank} and ${i.rank}.`);const o=s.rank===1?s.size:s.shape[1],y=i.rank===1?i.size:i.shape[0];if(q(o===y,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${y}.`),s.rank===1&&i.rank===1){const r=at(s,[1,-1]),g=at(i,[-1,1]),n=re(r,g);return at(n,[])}else if(s.rank===1&&i.rank===2){const r=at(s,[1,-1]),g=at(i,[i.shape[0],i.shape[1]]),n=re(r,g);return at(n,[n.size])}else if(s.rank===2&&i.rank===1){const r=at(i,[-1,1]),g=re(s,r);return at(g,[g.size])}else{const r=at(i,[i.shape[0],i.shape[1]]);return re(s,r)}}const xF=st({dot_:bH});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AH(e,...t){const s=t.map((o,y)=>_(o,`tensors${y}`,"einsum")),i={equation:e};return it.runKernel(iS,s,i)}const yl=st({einsum_:AH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IH(e){const s={x:_(e,"x","elu","float32")};return it.runKernel(Bc,s)}const Ef=st({elu_:IH});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RH(e,t){const s=_(e,"x","ensureShape","string_or_numeric");if(!GG(s.shape,t))throw new Error(`EnsureShape: Shape of tensor ${s.shape} is not compatible with expected shape ${t}`);return e}const NH=st({ensureShape_:RH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PH(e){let t=_(e,"x","erf");q(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=Ft(t,"float32"));const s={x:t};return it.runKernel(kc,s)}const yF=st({erf_:PH});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sT(e,t){for(let s=0;s<e.length;++s)if(e[e.length-s-1]!==t-1-s)return!1;return!0}function SF(e,t,s){const i=e.length+t.length,o=[];let y=0,r=0;for(let g=0;g<i;g++)s.indexOf(g)===-1?o.push(e[y++]):o.push(t[r++]);return o}function Nn(e,t){const s=[],i=e.length;for(let y=0;y<i;y++)t.indexOf(y)===-1&&s.push(e[y]);const o=t.map(y=>e[y]);return[s,o]}function _e(e,t){const s=t.map(i=>1);return SF(e,s,t)}function Bn(e,t,s){q(sT(t,s),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${s} input.`)}function We(e,t){if(sT(e,t))return null;const s=[];for(let i=0;i<t;++i)e.indexOf(i)===-1&&s.push(i);return e.forEach(i=>s.push(i)),s}function Ja(e){return e.map((t,s)=>[s,t]).sort((t,s)=>t[1]-s[1]).map(t=>t[0])}function tn(e,t){const s=[];for(let i=t-e;i<t;++i)s.push(i);return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FH(e,t=null,s=!1){const o={x:_(e,"x","max")},y={reductionIndices:t,keepDims:s};return it.runKernel(bv,o,y)}const Ti=st({max_:FH});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OH(e,t=null,s=!1){const o={x:_(e,"x","min")},y={axis:t,keepDims:s};return it.runKernel(Nv,o,y)}const ec=st({min_:OH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DH(e,t){let s=_(e,"base","pow"),i=_(t,"exp","pow");[s,i]=Ze(s,i);const o={a:s,b:i};return it.runKernel(tf,o)}const $a=st({pow_:DH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wt(e,t){if((bi(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&bi(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ja(e,[],[],t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LH(e){const s={x:_(e,"x","sqrt","float32")};return it.runKernel(df,s)}const Kn=st({sqrt_:LH});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MH(e){const t=_(e,"x","square"),s={};return it.runKernel("Square",{x:t},s)}const be=st({square_:MH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $H(e,t=null,s=!1){let i=_(e,"x","sum");i.dtype==="bool"&&(i=Ft(i,"int32"));const o={x:i},y={axis:t,keepDims:s};return it.runKernel(Xv,o,y)}const Mt=st({sum_:$H});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BH(e,t="euclidean",s=null,i=!1){e=_(e,"x","norm");const o=TF(e,t,s);let y=o.shape;if(i){const r=se(s,e.shape);y=_e(o.shape,r)}return at(o,y)}function TF(e,t,s=null){if(e.rank===0)return un(e);if(e.rank!==1&&s===null)return TF(at(e,[-1]),t,s);if(e.rank===1||typeof s=="number"||Array.isArray(s)&&s.length===1){if(t===1)return Mt(un(e),s);if(t===1/0)return Ti(un(e),s);if(t===-1/0)return ec(un(e),s);if(t==="euclidean"||t===2)return Kn(Mt($a(un(e),Wt(2,"int32")),s));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(s)&&s.length===2){if(t===1)return Ti(Mt(un(e),s[0]),s[1]-1);if(t===1/0)return Ti(Mt(un(e),s[1]),s[0]);if(t===-1/0)return ec(Mt(un(e),s[1]),s[0]);if(t==="fro"||t==="euclidean")return Kn(Mt(be(e),s));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${s}`)}const bf=st({norm_:BH});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kH(e,t=null,s=!1){return bf(e,"euclidean",t,s)}const CF=st({euclideanNorm_:kH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zH(e){const s={x:_(e,"x","exp")};return it.runKernel(zc,s)}const Ks=st({exp_:zH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VH(e,t=0){const s=_(e,"x","expandDims","string_or_numeric");q(t<=s.rank,()=>"Axis must be <= rank of the tensor");const i={input:s},o={dim:t};return it.runKernel(pv,i,o)}const ns=st({expandDims_:VH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GH(e){const s={x:_(e,"x","expm1")};return it.runKernel(Vc,s)}const wF=st({expm1_:GH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UH(e,t){const s=_(e,"x","tile","string_or_numeric");q(s.rank===t.length,()=>`Error in transpose: rank of input ${s.rank} must match length of reps ${t}.`);const i={x:s},o={reps:t};return it.runKernel(xf,i,o)}const mi=st({tile_:UH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WH(e,t,s,i="float32"){t==null&&(t=e);const o=te([e,t],i),y=e<=t?e:t;for(let g=0;g<y;++g)o.set(1,g,g);const r=at(o.toTensor(),[e,t]);if(s==null)return r;if(s.length===1)return mi(ns(r,0),[s[0],1,1]);if(s.length===2)return mi(ns(ns(r,0),0),[s[0],s[1],1,1]);if(s.length===3)return mi(ns(ns(ns(r,0),0),0),[s[0],s[1],s[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${s.length}D.`)}const iT=st({eye_:WH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HH(e){const s={x:_(e,"x","floor","float32")};return it.runKernel(Gc,s)}const Af=st({floor_:HH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XH(e,t,s=0,i=0){const o=_(e,"x","gather"),y=_(t,"indices","gather","int32"),r={x:o,indices:y},g={axis:s,batchDims:i};return it.runKernel(vv,r,g)}const If=st({gather_:XH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YH(e,t){let s=_(e,"a","greater","string_or_numeric"),i=_(t,"b","greater","string_or_numeric");[s,i]=Ze(s,i),Qt(s.shape,i.shape);const o={a:s,b:i};return it.runKernel(gv,o)}const ks=st({greater_:YH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KH(e,t){let s=_(e,"a","greaterEqual","string_or_numeric"),i=_(t,"b","greaterEqual","string_or_numeric");[s,i]=Ze(s,i),Qt(s.shape,i.shape);const o={a:s,b:i};return it.runKernel(Wc,o)}const Qa=st({greaterEqual_:KH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jH(e){const s={input:_(e,"input","imag")};return it.runKernel(cS,s)}const sg=st({imag_:jH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZH(e){const s={x:_(e,"x","isFinite")};return it.runKernel(Xc,s)}const EF=st({isFinite_:ZH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JH(e){const s={x:_(e,"x","isInf")};return it.runKernel(Yc,s)}const bF=st({isInf_:JH});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QH(e){const s={x:_(e,"x","isNaN")};return it.runKernel(Kc,s)}const AF=st({isNaN_:QH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qH(e,t=.2){const i={x:_(e,"x","leakyRelu")},o={alpha:t};return it.runKernel(xv,i,o)}const ig=st({leakyRelu_:qH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _H(e,t){let s=_(e,"a","less","string_or_numeric"),i=_(t,"b","less","string_or_numeric");[s,i]=Ze(s,i),Qt(s.shape,i.shape);const o={a:s,b:i};return it.runKernel(yv,o)}const nc=st({less_:_H});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tX(e,t){let s=_(e,"a","lessEqual","string_or_numeric"),i=_(t,"b","lessEqual","string_or_numeric");[s,i]=Ze(s,i),Qt(s.shape,i.shape);const o={a:s,b:i};return it.runKernel(Sv,o)}const jo=st({lessEqual_:tX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eX(e,t,s){if(s<=0)throw new Error("The number of values should be positive.");const i={start:e,stop:t,num:s};return it.runKernel(fS,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nX(e,t=5,s=1,i=1,o=.5){const y=_(e,"x","localResponseNormalization");q(y.rank===4||y.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${y.rank}.`),q(nu(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let r=y,g=!1;y.rank===3&&(g=!0,r=at(y,[1,y.shape[0],y.shape[1],y.shape[2]]));const n={x:r},a={depthRadius:t,bias:s,alpha:i,beta:o},p=it.runKernel(Ev,n,a);return g?at(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const IF=st({localResponseNormalization_:nX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sX(e){const s={x:_(e,"x","log","float32")};return it.runKernel(jc,s)}const js=st({log_:sX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iX(e){const s={x:_(e,"x","log1p")};return it.runKernel(Zc,s)}const rg=st({log1p_:iX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rX(e,t){q(by(e),()=>"The f passed in variableGrads(f) must be a function"),q(t==null||Array.isArray(t)&&t.every(a=>a instanceof Hp),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const s=t!=null;if(!s){t=[];for(const a in it.registeredVariables)t.push(it.registeredVariables[a])}const i=s?t.filter(a=>!a.trainable):null,o=t.length;t=t.filter(a=>a.trainable),q(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const y=!0,{value:r,grads:g}=it.gradients(e,t,null,y);q(g.some(a=>a!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),q(r.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${r.rank} tensor`);const n={};return t.forEach((a,p)=>{g[p]!=null&&(n[a.name]=g[p])}),i!=null&&i.forEach(a=>n[a.name]=null),{value:r,grads:n}}function Yr(e){return it.customGrad(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aX(e){const s={x:_(e,"x","neg")};return it.runKernel(Fv,s)}const Le=st({neg_:aX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oX(e){const s={x:_(e,"x","softplus")};return it.runKernel(ff,s)}const Nu=st({softplus_:oX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lX(e){const t=_(e,"x","logSigmoid");return Yr(i=>({value:Le(Nu(Le(i))),gradFunc:r=>rt(r,vr(Le(i)))}))(t)}const RF=st({logSigmoid_:lX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uX(e,t){let s=_(e,"a","sub"),i=_(t,"b","sub");[s,i]=Ze(s,i);const o={a:s,b:i};return it.runKernel(mf,o)}const Dt=st({sub_:uX});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hX(e,t=-1){const s=_(e,"logits","logSoftmax");if(t===-1&&(t=s.rank-1),t!==s.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${s.rank} and axis was ${t}`);return Yr((o,y)=>{const g=Ti(o,t,!0),n=Dt(o,g),a=Dt(Ft(n,"float32"),js(Mt(Ks(n),t,!0)));return y([a]),{value:a,gradFunc:(h,u)=>{const[d]=u,l=!0,c=Ks(d);return Dt(h,rt(Mt(h,t,l),c))}}})(s)}const rT=st({logSoftmax_:hX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cX(e,t=null,s=!1){const i=_(e,"x","logSumExp"),o=se(t,i.shape),y=Ti(i,o,!0),r=Dt(i,y),g=Ks(r),n=Mt(g,o),a=js(n),p=wt(at(y,a.shape),a);if(s){const h=_e(p.shape,o);return at(p,h)}return p}const aT=st({logSumExp_:cX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fX(e,t){const s=_(e,"a","logicalAnd","bool"),i=_(t,"b","logicalAnd","bool");Qt(s.shape,i.shape);const o={a:s,b:i};return it.runKernel(Tv,o)}const Sr=st({logicalAnd_:fX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dX(e){const s={x:_(e,"x","logicalNot","bool")};return it.runKernel(Cv,s)}const ag=st({logicalNot_:dX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pX(e,t){const s=_(e,"a","logicalOr","bool"),i=_(t,"b","logicalOr","bool");Qt(s.shape,i.shape);const o={a:s,b:i};return it.runKernel(wv,o)}const oT=st({logicalOr_:pX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mX(e,t){const s=_(e,"a","logicalXor","bool"),i=_(t,"b","logicalXor","bool");return Qt(s.shape,i.shape),Sr(oT(e,t),ag(Sr(e,t)))}const NF=st({logicalXor_:mX});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sd=2147483648;function vX(e,t,s="left"){const i=_(e,"sortedSequence","searchSorted"),o=_(t,"values","searchSorted"),y=i.shape[i.shape.length-1],r=o.shape[o.shape.length-1],g=at(i,[-1,y]),n=at(o,[-1,r]);if(g.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(g.shape[0]!==n.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(vt(n.shape)>=Sd)throw new Error(`values tensor size must less than ${Sd}`);if(g.shape[1]>=Sd)throw new Error(`trailing dim_size must less than ${Sd} for int32 output type, was ${g.shape[1]}`);const a={sortedSequence:g,values:n},p={side:s};return it.runKernel(PS,a,p)}const lT=st({searchSorted_:vX});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gX(e,t){return lT(e,t,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xX(e,t,s,i,o){const y=_(e,"x","maxPool"),r=1;let g=y,n=!1;y.rank===3&&(n=!0,g=at(y,[1,y.shape[0],y.shape[1],y.shape[2]])),q(g.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${g.rank}.`),q($n(s,r),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${r}'`),os("maxPool",i,o);const a={x:g},p={filterSize:t,strides:s,pad:i,dimRoundingMode:o},h=it.runKernel(Av,a,p);return n?at(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const og=st({maxPool_:xX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yX(e,t=[1,1,1],s,i,o,y="NDHWC"){const r=_(e,"x","maxPool3d");let g=r,n=!1;r.rank===4&&(n=!0,g=at(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]])),q(g.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${g.rank}.`),q(y==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${y}`),os("maxPool3d",i,o);const a={x:g},p={filterSize:t,strides:s,pad:i,dimRoundingMode:o,dataFormat:y},h=it.runKernel(Iv,a,p);return n?at(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const PF=st({maxPool3d_:yX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SX(e,t,s,i,o=!1){const r={x:_(e,"x","maxPoolWithArgmax")},g={filterSize:t,strides:s,pad:i,includeBatchInIndex:o},n=it.runKernel(vS,r,g);return{result:n[0],indexes:n[1]}}const TX=st({maxPoolWithArgmax_:SX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CX(e,t){let s=_(e,"a","maximum"),i=_(t,"b","maximum");[s,i]=Ze(s,i),s.dtype==="bool"&&(s=Ft(s,"int32"),i=Ft(i,"int32")),Qt(s.shape,i.shape);const o={a:s,b:i};return it.runKernel(Jc,o)}const _r=st({maximum_:CX});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wX(e,t=null,s=!1){const o={x:_(e,"x","mean")},y={axis:t,keepDims:s};return it.runKernel(Rv,o,y)}const Ye=st({mean_:wX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fn(e,t="float32"){if(ti(e),t==="complex64"){const i=fn(e,"float32"),o=fn(e,"float32");return Da(i,o)}const s=Yn(vt(e),t);return it.makeTensor(s,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Us(e,t="float32"){if(ti(e),t==="complex64"){const i=Us(e,"float32"),o=fn(e,"float32");return Da(i,o)}const s=z2(vt(e),t);return it.makeTensor(s,e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EX(e,t,{indexing:s="xy"}={}){if(s!=="xy"&&s!=="ij")throw new TypeError(`${s} is not a valid third argument to meshgrid`);if(e===void 0)return[];let i=_(e,"x","meshgrid",e instanceof $e?e.dtype:"float32");if(t===void 0)return[i];let o=_(t,"y","meshgrid",t instanceof $e?t.dtype:"float32");const y=vt(i.shape),r=vt(o.shape);return s==="xy"?(i=at(i,[1,-1]),o=at(o,[-1,1]),[re(Us([r,1],i.dtype),i),re(o,Us([1,y],o.dtype))]):(i=at(i,[-1,1]),o=at(o,[1,-1]),[re(i,Us([1,r],i.dtype)),re(Us([y,1],o.dtype),o)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bX(e,t){let s=_(e,"a","minimum"),i=_(t,"b","minimum");[s,i]=Ze(s,i),s.dtype==="bool"&&(s=Ft(s,"int32"),i=Ft(i,"int32")),Qt(s.shape,i.shape);const o={a:s,b:i};return it.runKernel(Qc,o)}const $o=st({minimum_:bX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AX(e,t,s){q(s==="reflect"||s==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${s}.`);const i=_(e,"x","mirrorPad");if(i.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");q(t.length===i.rank,()=>`Padding doesn't match input. Must be ${i.rank}. Got ${t.length}.`);const o=s==="reflect"?1:0;for(let g=0;g<i.rank;g++)q(t[g].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),q(t[g][0]>=0&&t[g][0]<=i.shape[g]-o&&t[g][1]>=0&&t[g][1]<=i.shape[g]-o,()=>`Padding in dimension ${g} cannot be greater than or equal to ${i.shape[g]-o} or less than 0 for input of shape ${i.shape}`);const y={paddings:t,mode:s},r={x:i};return it.runKernel(Pv,r,y)}const FF=st({mirrorPad_:AX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IX(e,t){let s=_(e,"a","mod"),i=_(t,"b","mod");[s,i]=Ze(s,i);const o={a:s,b:i};return it.runKernel(qc,o)}const OF=st({mod_:IX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RX(e,t=null,s=!1){e=_(e,"x","moments");const i=se(t,e.shape),o=Ye(e,i,s);let y=o.shape;s||(y=_e(o.shape,i));const r=be(Dt(Ft(e,"float32"),at(o,y))),g=Ye(r,i,s);return{mean:o,variance:g}}const lg=st({moments_:RX});function NX(e,t,s,i){const o=_(t,"data","multiRNNCell"),y=Xp(s,"c","multiRNNCell"),r=Xp(i,"h","multiRNNCell");let g=o;const n=[];for(let h=0;h<e.length;h++){const u=e[h](g,y[h],r[h]);n.push(u[0]),n.push(u[1]),g=u[1]}const a=[],p=[];for(let h=0;h<n.length;h+=2)a.push(n[h]),p.push(n[h+1]);return[a,p]}const PX=st({multiRNNCell_:NX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FX(e,t,s,i=!1){const o=_(e,"logits","multinomial"),y=o.size,r=o.rank;if(y<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${y}.`);if(r>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${r}`);s=s||Math.random();const n={logits:r===1?at(o,[1,-1]):o},a={numSamples:t,seed:s,normalized:i},p=it.runKernel(gS,n,a);return r===1?at(p,[p.size]):p}const OX=st({multinomial_:FX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DX(e,t){let s=_(e,"a","notEqual","string_or_numeric"),i=_(t,"b","notEqual","string_or_numeric");[s,i]=Ze(s,i),Qt(s.shape,i.shape);const o={a:s,b:i};return it.runKernel(Ov,o)}const lu=st({notEqual_:DX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LX(e,t,s=1,i=0,o="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const r={indices:_(e,"indices","oneHot","int32")},g={dtype:o,depth:t,onValue:s,offValue:i};return it.runKernel(Lv,r,g)}const uT=st({oneHot_:LX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MX(e){const s={x:_(e,"x","onesLike")};return it.runKernel(Dv,s)}const Zs=st({onesLike_:MX});function $X(e,t){const s=_(e,"v1","outerProduct"),i=_(t,"v2","outerProduct");q(s.rank===1&&i.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${s.rank} and ${i.rank}.`);const o=at(s,[-1,1]),y=at(i,[1,-1]);return re(o,y)}const BX=st({outerProduct_:$X});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kX(e,t,s=0){const i=_(e,"x","pad");if(i.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:s},y={x:i};return it.runKernel($v,y,o)}const qa=st({pad_:kX});function zX(e,t,s=0){return q(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),qa(e,[t],s)}const VX=st({pad1d_:zX});function GX(e,t,s=0){return q(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),qa(e,t,s)}const UX=st({pad2d_:GX});function WX(e,t,s=0){return q(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),qa(e,t,s)}const HX=st({pad3d_:WX});function XX(e,t,s=0){return q(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),qa(e,t,s)}const YX=st({pad4d_:XX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(e,t,s){const i=_(e,"x","spaceToBatchND");q(i.rank>=1+t.length,()=>`input rank ${i.rank} should be > than [blockShape] ${t.length}`),q(s.length===t.length,()=>`paddings.shape[0] ${s.length} must be equal to [blockShape] ${t.length}`),q(i.shape.reduce((r,g,n)=>n>0&&n<=t.length?r&&(g+s[n-1][0]+s[n-1][1])%t[n-1]===0:r,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${s.toString()} must be divisible by blockShapes ${t.toString()}`);const o={x:i},y={blockShape:t,paddings:s};return it.runKernel(Yv,o,y)}const ug=st({spaceToBatchND_:KX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jX(e,t,s,i,o,y,r){o==null&&(o=[1,1]),y==null&&(y=1),i===0&&(i="valid");const g=_(e,"x","maxPool");let n=g,a=!1;g.rank===3&&(a=!0,n=at(g,[1,g.shape[0],g.shape[1],g.shape[2]])),q($n(y,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${y} and dilations '${o}'`);const p=Ri(n.shape,t,y,o,i),h=[p.dilationHeight,p.dilationWidth];let u;i==="same"?u=JX([p.filterHeight,p.filterWidth],h):u=[[0,0],[0,0]];const d=h[0]===1&&h[1]===1,[l,c]=ZX([p.inHeight,p.inWidth],h,u),m=d?i:"valid",f=d?n:ug(n,h,l),S=(s==="avg"?()=>tg(f,t,y,m,r):()=>og(f,t,y,m,r))(),x=d?S:eg(S,h,c);return a?at(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function ZX(e,t,s){const i=s.map(p=>p[0]),o=s.map(p=>p[1]),y=e.concat(i,o),r=t.map((p,h)=>(p-y[h]%p)%p),g=o.map((p,h)=>p+r[h]),n=t.map((p,h)=>[i[h],g[h]]),a=t.map((p,h)=>[0,r[h]]);return[n,a]}function JX(e,t){const i=e.map((r,g)=>r+(r-1)*(t[g]-1)).map(r=>r-1),o=i.map(r=>Math.floor(r/2)),y=i.map((r,g)=>r-o[g]);return i.map((r,g)=>[o[g],y[g]])}const DF=st({pool_:jX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QX(e,t){const s=_(e,"x","prelu"),i=_(t,"alpha","prelu"),o={x:s,alpha:i};return it.runKernel(Bv,o)}const hg=st({prelu_:QX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qX(e,t=null,s=!1){let i=_(e,"x","prod");i.dtype==="bool"&&(i=Ft(i,"int32"));const o={x:i},y={axis:t,keepDims:s};return it.runKernel(kv,o,y)}const LF=st({prod_:qX});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _X(e,t,s,i){const o=e.map((p,h)=>_(p,`tensors${h}`,"raggedGather","int32")),y=_(t,"paramsDenseValues","raggedGather"),r=_(s,"indices","raggedGather","int32"),g={paramsNestedSplits:o,paramsDenseValues:y,indices:r},n={outputRaggedRank:i},a=it.runKernel(TS,g,n);return{outputNestedSplits:a.slice(0,a.length-1),outputDenseValues:a[a.length-1]}}const tY=st({raggedGather_:_X});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eY(e,t,s){const i=_(e,"starts","raggedRange"),o=_(t,"limits","raggedRange",i.dtype),y=_(s,"deltas","raggedRange",i.dtype),r={starts:i,limits:o,deltas:y},g=it.runKernel(CS,r);return{rtNestedSplits:g[0],rtDenseValues:g[1]}}const nY=st({raggedRange_:eY});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sY(e,t,s,i,o){const y=_(e,"shape","raggedTensorToTensor","int32"),r=_(t,"values","raggedTensorToTensor"),g=_(s,"defaultValue","raggedTensorToTensor",r.dtype),n=i.map((h,u)=>_(h,`tensors${u}`,"raggedTensorToTensor","int32")),a={shape:y,values:r,defaultValue:g,rowPartitionTensors:n},p={rowPartitionTypes:o};return it.runKernel(wS,a,p)}const iY=st({raggedTensorToTensor_:sY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rY(e,t,s){ti(e);const i=vt(e);let o=null;if(s==null||s==="float32")o=new Float32Array(i);else if(s==="int32")o=new Int32Array(i);else if(s==="bool")o=new Uint8Array(i);else throw new Error(`Unknown data type ${s}`);for(let y=0;y<i;y++)o[y]=t();return it.makeTensor(o,e,s)}const aY=st({rand_:rY});var hT={exports:{}};hT.exports;(function(e){(function(t,s,i){function o(n){var a=this,p=g();a.next=function(){var h=2091639*a.s0+a.c*23283064365386963e-26;return a.s0=a.s1,a.s1=a.s2,a.s2=h-(a.c=h|0)},a.c=1,a.s0=p(" "),a.s1=p(" "),a.s2=p(" "),a.s0-=p(n),a.s0<0&&(a.s0+=1),a.s1-=p(n),a.s1<0&&(a.s1+=1),a.s2-=p(n),a.s2<0&&(a.s2+=1),p=null}function y(n,a){return a.c=n.c,a.s0=n.s0,a.s1=n.s1,a.s2=n.s2,a}function r(n,a){var p=new o(n),h=a&&a.state,u=p.next;return u.int32=function(){return p.next()*4294967296|0},u.double=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.quick=u,h&&(typeof h=="object"&&y(h,p),u.state=function(){return y(p,{})}),u}function g(){var n=4022871197,a=function(p){p=String(p);for(var h=0;h<p.length;h++){n+=p.charCodeAt(h);var u=.02519603282416938*n;n=u>>>0,u-=n,u*=n,n=u>>>0,u-=n,n+=u*4294967296}return(n>>>0)*23283064365386963e-26};return a}s&&s.exports?s.exports=r:i&&i.amd?i(function(){return r}):this.alea=r})(qn,e,!1)})(hT);var oY=hT.exports,cT={exports:{}};cT.exports;(function(e){(function(t,s,i){function o(g){var n=this,a="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var h=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^h^h>>>8},g===(g|0)?n.x=g:a+=g;for(var p=0;p<a.length+64;p++)n.x^=a.charCodeAt(p)|0,n.next()}function y(g,n){return n.x=g.x,n.y=g.y,n.z=g.z,n.w=g.w,n}function r(g,n){var a=new o(g),p=n&&n.state,h=function(){return(a.next()>>>0)/4294967296};return h.double=function(){do var u=a.next()>>>11,d=(a.next()>>>0)/4294967296,l=(u+d)/(1<<21);while(l===0);return l},h.int32=a.next,h.quick=h,p&&(typeof p=="object"&&y(p,a),h.state=function(){return y(a,{})}),h}s&&s.exports?s.exports=r:i&&i.amd?i(function(){return r}):this.xor128=r})(qn,e,!1)})(cT);var lY=cT.exports,fT={exports:{}};fT.exports;(function(e){(function(t,s,i){function o(g){var n=this,a="";n.next=function(){var h=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^(h^h<<1))|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,g===(g|0)?n.x=g:a+=g;for(var p=0;p<a.length+64;p++)n.x^=a.charCodeAt(p)|0,p==a.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function y(g,n){return n.x=g.x,n.y=g.y,n.z=g.z,n.w=g.w,n.v=g.v,n.d=g.d,n}function r(g,n){var a=new o(g),p=n&&n.state,h=function(){return(a.next()>>>0)/4294967296};return h.double=function(){do var u=a.next()>>>11,d=(a.next()>>>0)/4294967296,l=(u+d)/(1<<21);while(l===0);return l},h.int32=a.next,h.quick=h,p&&(typeof p=="object"&&y(p,a),h.state=function(){return y(a,{})}),h}s&&s.exports?s.exports=r:i&&i.amd?i(function(){return r}):this.xorwow=r})(qn,e,!1)})(fT);var uY=fT.exports,dT={exports:{}};dT.exports;(function(e){(function(t,s,i){function o(g){var n=this;n.next=function(){var p=n.x,h=n.i,u,d;return u=p[h],u^=u>>>7,d=u^u<<24,u=p[h+1&7],d^=u^u>>>10,u=p[h+3&7],d^=u^u>>>3,u=p[h+4&7],d^=u^u<<7,u=p[h+7&7],u=u^u<<13,d^=u^u<<9,p[h]=d,n.i=h+1&7,d};function a(p,h){var u,d=[];if(h===(h|0))d[0]=h;else for(h=""+h,u=0;u<h.length;++u)d[u&7]=d[u&7]<<15^h.charCodeAt(u)+d[u+1&7]<<13;for(;d.length<8;)d.push(0);for(u=0;u<8&&d[u]===0;++u);for(u==8?d[7]=-1:d[u],p.x=d,p.i=0,u=256;u>0;--u)p.next()}a(n,g)}function y(g,n){return n.x=g.x.slice(),n.i=g.i,n}function r(g,n){g==null&&(g=+new Date);var a=new o(g),p=n&&n.state,h=function(){return(a.next()>>>0)/4294967296};return h.double=function(){do var u=a.next()>>>11,d=(a.next()>>>0)/4294967296,l=(u+d)/(1<<21);while(l===0);return l},h.int32=a.next,h.quick=h,p&&(p.x&&y(p,a),h.state=function(){return y(a,{})}),h}s&&s.exports?s.exports=r:i&&i.amd?i(function(){return r}):this.xorshift7=r})(qn,e,!1)})(dT);var hY=dT.exports,pT={exports:{}};pT.exports;(function(e){(function(t,s,i){function o(g){var n=this;n.next=function(){var p=n.w,h=n.X,u=n.i,d,l;return n.w=p=p+1640531527|0,l=h[u+34&127],d=h[u=u+1&127],l^=l<<13,d^=d<<17,l^=l>>>15,d^=d>>>12,l=h[u]=l^d,n.i=u,l+(p^p>>>16)|0};function a(p,h){var u,d,l,c,m,f=[],v=128;for(h===(h|0)?(d=h,h=null):(h=h+"\0",d=0,v=Math.max(v,h.length)),l=0,c=-32;c<v;++c)h&&(d^=h.charCodeAt((c+32)%h.length)),c===0&&(m=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,c>=0&&(m=m+1640531527|0,u=f[c&127]^=d+m,l=u==0?l+1:0);for(l>=128&&(f[(h&&h.length||0)&127]=-1),l=127,c=4*128;c>0;--c)d=f[l+34&127],u=f[l=l+1&127],d^=d<<13,u^=u<<17,d^=d>>>15,u^=u>>>12,f[l]=d^u;p.w=m,p.X=f,p.i=l}a(n,g)}function y(g,n){return n.i=g.i,n.w=g.w,n.X=g.X.slice(),n}function r(g,n){g==null&&(g=+new Date);var a=new o(g),p=n&&n.state,h=function(){return(a.next()>>>0)/4294967296};return h.double=function(){do var u=a.next()>>>11,d=(a.next()>>>0)/4294967296,l=(u+d)/(1<<21);while(l===0);return l},h.int32=a.next,h.quick=h,p&&(p.X&&y(p,a),h.state=function(){return y(a,{})}),h}s&&s.exports?s.exports=r:i&&i.amd?i(function(){return r}):this.xor4096=r})(qn,e,!1)})(pT);var cY=pT.exports,mT={exports:{}};mT.exports;(function(e){(function(t,s,i){function o(g){var n=this,a="";n.next=function(){var h=n.b,u=n.c,d=n.d,l=n.a;return h=h<<25^h>>>7^u,u=u-d|0,d=d<<24^d>>>8^l,l=l-h|0,n.b=h=h<<20^h>>>12^u,n.c=u=u-d|0,n.d=d<<16^u>>>16^l,n.a=l-h|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,g===Math.floor(g)?(n.a=g/4294967296|0,n.b=g|0):a+=g;for(var p=0;p<a.length+20;p++)n.b^=a.charCodeAt(p)|0,n.next()}function y(g,n){return n.a=g.a,n.b=g.b,n.c=g.c,n.d=g.d,n}function r(g,n){var a=new o(g),p=n&&n.state,h=function(){return(a.next()>>>0)/4294967296};return h.double=function(){do var u=a.next()>>>11,d=(a.next()>>>0)/4294967296,l=(u+d)/(1<<21);while(l===0);return l},h.int32=a.next,h.quick=h,p&&(typeof p=="object"&&y(p,a),h.state=function(){return y(a,{})}),h}s&&s.exports?s.exports=r:i&&i.amd?i(function(){return r}):this.tychei=r})(qn,e,!1)})(mT);var fY=mT.exports,MF={exports:{}};const dY={},pY=Object.freeze(Object.defineProperty({__proto__:null,default:dY},Symbol.toStringTag,{value:"Module"})),mY=X$(pY);(function(e){(function(t,s,i){var o=256,y=6,r=52,g="random",n=i.pow(o,y),a=i.pow(2,r),p=a*2,h=o-1,u;function d(x,T,C){var w=[];T=T==!0?{entropy:!0}:T||{};var b=f(m(T.entropy?[x,S(s)]:x??v(),3),w),E=new l(w),A=function(){for(var I=E.g(y),R=n,N=0;I<a;)I=(I+N)*o,R*=o,N=E.g(1);for(;I>=p;)I/=2,R/=2,N>>>=1;return(I+N)/R};return A.int32=function(){return E.g(4)|0},A.quick=function(){return E.g(4)/4294967296},A.double=A,f(S(E.S),s),(T.pass||C||function(I,R,N,F){return F&&(F.S&&c(F,E),I.state=function(){return c(E,{})}),N?(i[g]=I,R):I})(A,b,"global"in T?T.global:this==i,T.state)}function l(x){var T,C=x.length,w=this,b=0,E=w.i=w.j=0,A=w.S=[];for(C||(x=[C++]);b<o;)A[b]=b++;for(b=0;b<o;b++)A[b]=A[E=h&E+x[b%C]+(T=A[b])],A[E]=T;(w.g=function(I){for(var R,N=0,F=w.i,P=w.j,D=w.S;I--;)R=D[F=h&F+1],N=N*o+D[h&(D[F]=D[P=h&P+R])+(D[P]=R)];return w.i=F,w.j=P,N})(o)}function c(x,T){return T.i=x.i,T.j=x.j,T.S=x.S.slice(),T}function m(x,T){var C=[],w=typeof x,b;if(T&&w=="object")for(b in x)try{C.push(m(x[b],T-1))}catch{}return C.length?C:w=="string"?x:x+"\0"}function f(x,T){for(var C=x+"",w,b=0;b<C.length;)T[h&b]=h&(w^=T[h&b]*19)+C.charCodeAt(b++);return S(T)}function v(){try{var x;return u&&(x=u.randomBytes)?x=x(o):(x=new Uint8Array(o),(t.crypto||t.msCrypto).getRandomValues(x)),S(x)}catch{var T=t.navigator,C=T&&T.plugins;return[+new Date,t,C,t.screen,S(s)]}}function S(x){return String.fromCharCode.apply(0,x)}if(f(i.random(),s),e.exports){e.exports=d;try{u=mY}catch{}}else i["seed"+g]=d})(typeof self<"u"?self:qn,[],Math)})(MF);var vY=MF.exports,gY=oY,xY=lY,yY=uY,SY=hY,TY=cY,CY=fY,Zo=vY;Zo.alea=gY;Zo.xor128=xY;Zo.xorwow=yY;Zo.xorshift7=SY;Zo.xor4096=TY;Zo.tychei=CY;var cg=Zo;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vT{constructor(t,s,i,o,y){this.mean=t,this.stdDev=s,this.dtype=i,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const r=y||Math.random();this.random=cg.alea(r.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let t,s,i=!1;for(;!i;){let o,y,r;do o=2*this.random()-1,y=2*this.random()-1,r=o*o+y*y;while(r>=1||r===0);const g=Math.sqrt(-2*Math.log(r)/r);t=this.mean+this.stdDev*o*g,s=this.mean+this.stdDev*y*g,(!this.truncated||this.isValidTruncated(t))&&(i=!0)}return(!this.truncated||this.isValidTruncated(s))&&(this.nextVal=this.convertValue(s)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class wY{constructor(t,s,i,o){this.alpha=t,this.beta=1/s,this.dtype=i;const y=o||Math.random();this.randu=cg.alea(y.toString()),this.randn=new vT(0,1,i,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,s,i,o,y,r;for(;;){do o=this.randn.nextValue(),r=1+this.c*o;while(r<=0);if(r*=r*r,t=o*o,s=1-.331*t*t,i=.5*t+this.d*(1-r+Math.log(r)),y=this.randu(),y<s||Math.log(y)<i)break}return r=1/this.beta*this.d*r,this.alpha<1&&(r*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(r)}convertValue(t){return this.dtype==="float32"?t:Math.round(t)}}class EY{constructor(t=0,s=1,i,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=s-t,this.dtype=i,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${s} <= 1 and dtype is not float`);this.random=cg.alea(o)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bY(e,t,s=1,i="float32",o){if(ti(e),s==null&&(s=1),i==null&&(i="float32"),i!=="float32"&&i!=="int32")throw new Error(`Unsupported data type ${i}`);const y=new wY(t,s,i,o),r=te(e,i);for(let g=0;g<r.values.length;g++)r.values[g]=y.nextValue();return r.toTensor()}const AY=st({randomGamma_:bY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IY(e,t=0,s=1,i,o){if(ti(e),i!=null&&i==="bool")throw new Error(`Unsupported data type ${i}`);const y=new vT(t,s,i,!1,o),r=te(e,i);for(let g=0;g<r.values.length;g++)r.values[g]=y.nextValue();return r.toTensor()}const gT=st({randomNormal_:IY});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RY(e,t,s){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return gT(e,0,1,t,s)}const NY=st({randomStandardNormal_:RY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PY(e,t=0,s=1,i="float32",o){ti(e);const y=te(e,i),r=new EY(t,s,null,o);for(let g=0;g<y.values.length;g++)y.values[g]=r.nextValue();return y.toTensor()}const Jo=st({randomUniform_:PY});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FY(e,t,s,i){return Jo(e,t,s,"int32",i)}const OY=st({randomUniformInt_:FY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uu(e,t,s=1,i="float32"){if(s===0)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:s,dtype:i};return it.runKernel(ES,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DY(e){const s={input:_(e,"input","real")};return it.runKernel(bS,s)}const sc=st({real_:DY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LY(e){const s={x:_(e,"x","reciprocal")};return it.runKernel(ef,s)}const $F=st({reciprocal_:LY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MY(e){const s={x:_(e,"x","relu")};return it.runKernel(nf,s)}const Cr=st({relu_:MY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Y(e){const s={x:_(e,"x","relu6")};return it.runKernel(sf,s)}const xT=st({relu6_:$Y});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BY(e,t){const i={x:_(e,"x","reverse")},o={dims:t};return it.runKernel(Uv,i,o)}const Ai=st({reverse_:BY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kY(e){const t=_(e,"x","reverse");return q(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),Ai(t,0)}const zY=st({reverse1d_:kY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VY(e,t){const s=_(e,"x","reverse");return q(s.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${s.rank}.`),Ai(s,t)}const GY=st({reverse2d_:VY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UY(e,t){const s=_(e,"x","reverse");return q(s.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${s.rank}.`),Ai(s,t)}const WY=st({reverse3d_:UY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HY(e,t){const s=_(e,"x","reverse");return q(s.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${s.rank}.`),Ai(s,t)}const XY=st({reverse4d_:HY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YY(e){const s={x:_(e,"x","round")};return it.runKernel(rf,s)}const yT=st({round_:YY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KY(e){const s={x:_(e,"x","rsqrt","float32")};return it.runKernel(af,s)}const ST=st({rsqrt_:KY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jY(e){const s={x:_(e,"x","selu")};return it.runKernel(of,s)}const TT=st({selu_:jY});function ZY(e,t,s,i,o,y=[1,1],r="NHWC"){const g=_(e,"x","separableConv2d"),n=_(t,"depthwiseFilter","separableConv2d"),a=_(s,"pointwiseFilter","separableConv2d");let p=g,h=!1;if(g.rank===3&&(h=!0,p=at(g,[1,g.shape[0],g.shape[1],g.shape[2]])),r==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");q(p.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${p.rank}.`),q(n.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${n.rank}.`),q(a.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${n.rank}.`),q(a.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${a.shape[0]}.`),q(a.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${a.shape[1]}.`);const u=n.shape[2],d=n.shape[3];q(a.shape[2]===u*d,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${u*d}, but got ${a.shape[2]}.`);const l=wf(p,n,i,o,r,y),m=Ma(l,a,1,"valid",r);return h?at(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const CT=st({separableConv2d_:ZY});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function JY(e,t){const s=_(e,"x","setdiff1d"),i=_(t,"y","setdiff1d");q(s.dtype===i.dtype,()=>`x and y should have the same dtype, but got x (${s.dtype}) and y (${i.dtype}).`),q(s.rank===1,()=>`x should be 1D tensor, but got x (${s.shape}).`),q(i.rank===1,()=>`y should be 1D tensor, but got y (${i.shape}).`);const o=await s.data(),y=await i.data(),r=new Set(y);let g=0;for(let p=0;p<o.length;p++)r.has(o[p])||g++;const n=new vn([g],s.dtype),a=new vn([g],"int32");for(let p=0,h=0;p<o.length;p++)r.has(o[p])||(n.values[h]=o[p],a.values[h]=p,h++);return[n.toTensor(),a.toTensor()]}const QY=JY;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qY(e){const s={x:_(e,"x","sign")};return it.runKernel(hf,s)}const BF=st({sign_:qY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Y(e){const s={x:_(e,"x","sin","float32")};return it.runKernel(lf,s)}const wT=st({sin_:_Y});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tK(e){const s={x:_(e,"x","sinh")};return it.runKernel(uf,s)}const ET=st({sinh_:tK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eK(e,t,s){const i=_(e,"x","slice1d");return q(i.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${i.rank} tensor`),le(i,[t],[s])}const fg=st({slice1d_:eK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nK(e,t,s){const i=_(e,"x","slice2d");return q(i.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${i.rank} tensor`),le(i,t,s)}const bT=st({slice2d_:nK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sK(e,t,s){const i=_(e,"x","slice3d");return q(i.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${i.rank} tensor`),le(i,t,s)}const dg=st({slice3d_:sK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iK(e,t,s){const i=_(e,"x","slice4d");return q(i.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${i.rank} tensor`),le(i,t,s)}const ic=st({slice4d_:iK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rK(e,t=-1){const s=_(e,"logits","softmax","float32");if(t===-1&&(t=s.rank-1),t!==s.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s.rank} and dim was ${t}`);const i={logits:s},o={dim:t};return it.runKernel(jv,i,o)}const pg=st({softmax_:rK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aK(e){q(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return it.runKernel(aS,t)}const mg=st({fft_:aK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oK(e){q(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return it.runKernel(hS,t)}const rc=st({ifft_:oK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lK(e){const t=e.shape[e.shape.length-1],s=e.size/t;let i;if(t<=2){const o=at(e,[s,t]);i=rc(o)}else{const o=[s,2*(t-1)],y=at(sc(e),[s,t]),r=at(sg(e),[s,t]),g=Ai(le(y,[0,1],[s,t-2]),1),n=rt(Ai(le(r,[0,1],[s,t-2]),1),Wt(-1)),a=on([y,g],1),p=on([r,n],1),h=at(Da(a,p),[o[0],o[1]]);i=rc(h)}if(i=sc(i),e.rank===3&&e.shape[0]!==0){const o=i,y=e.shape[0];i=at(i,[y,i.shape[0]/y,i.shape[1]]),o.dispose()}return i}const AT=st({irfft_:lK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uK(e,t,s=0){const o={x:_(e,"x","split")},y={numOrSizeSplits:t,axis:s};return it.runKernel(Kv,o,y)}const Ps=st({split_:uK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hK(e,t){q(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let s=e.shape[e.shape.length-1];const i=e.size/s;let o;if(t!=null&&t<s){const l=e.shape.map(m=>0),c=e.shape.map(m=>m);c[e.shape.length-1]=t,o=le(e,l,c),s=t}else if(t!=null&&t>s){const l=e.shape.map(c=>c);l[e.shape.length-1]=t-s,o=on([e,fn(l)],e.shape.length-1),s=t}else o=e;const y=he(o),r=at(Da(o,y),[i,s]),g=mg(r),n=Math.floor(s/2)+1,a=sc(g),p=sg(g),h=Ps(a,[n,s-n],a.shape.length-1),u=Ps(p,[n,s-n],p.shape.length-1),d=o.shape.slice();return d[o.shape.length-1]=n,at(Da(h[0],u[0]),d)}const vg=st({rfft_:hK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cK(e,t){let s=_(e,"a","squaredDifference"),i=_(t,"b","squaredDifference");[s,i]=Ze(s,i),Qt(s.shape,i.shape);const o={a:s,b:i},y={};return it.runKernel(pf,o,y)}const IT=st({squaredDifference_:cK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fK(e,t){const s=_(e,"x","squeeze","string_or_numeric");return at(s,Xa(s.shape,t).newShape)}const Qo=st({squeeze_:fK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dK(e,t=0){const s=Xp(e,"tensors","stack","string_or_numeric");q(s.length>=1,()=>"Pass at least one tensor to tf.stack"),s.length>0&&q(t<=s[0].rank,()=>"Axis must be <= rank of the tensor");const i=s,o={axis:t};return it.runKernel(Mv,i,o)}const Js=st({stack_:dK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pK(e,t=0){const i={x:_(e,"x","step")},o={alpha:t};return it.runKernel(yf,i,o)}const Pu=st({step_:pK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mK(e,t,s,i,o=0,y=0,r=0,g=0,n=0){const p={x:_(e,"x","stridedSlice","string_or_numeric")},h={begin:t,end:s,strides:i,beginMask:o,endMask:y,ellipsisMask:r,newAxisMask:g,shrinkAxisMask:n};return it.runKernel(BS,p,h)}const kF=st({stridedSlice_:mK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vK(e){const s={x:_(e,"x","tan","float32")};return it.runKernel(vf,s)}const zF=st({tan_:vK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function is(e,t){Eu(e);const s=Ka(e,t);if(s.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ja(e,null,s,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nh(e,t,s){if(Eu(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const i=Ka(e,s);if(i.length!==2&&i.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(i.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ja(e,t,i,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gK(e,t,s){if(Eu(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const i=Ka(e,s);if(i.length!==3&&i.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(i.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ja(e,t,i,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xK(e,t,s){if(Eu(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const i=Ka(e,s);if(i.length!==4&&i.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(i.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ja(e,t,i,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yK(e,t,s){if(Eu(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const i=Ka(e,s);if(i.length!==5&&i.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(i.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ja(e,t,i,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SK(e,t,s){if(Eu(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const i=Ka(e,s);if(i.length!==6&&i.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(i.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||i,ja(e,t,i,s)}function VF(e,t,s){const i=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,y=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${s.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${i}, and batchDim: ${o}.`;if(s.rank<o)throw new Error(y+` update.rank < ${o}. `);if(e.length<i+(s.rank-o))throw new Error(y+` Output shape length < ${i+(s.rank-o)}`);if(s.rank!==o+e.length-i)throw new Error(y+` update.rank != ${o+e.length-i}`);for(let r=0;r<o;++r)if(s.shape[r]!==t.shape[r])throw new Error(y+` updates.shape[${r}] (${s.shape[r]}) != indices.shape[${r}] (${t.shape[r]}).`);for(let r=0;r<s.rank-o;++r)if(s.shape[r+o]!==e[r+i])throw new Error(y+` updates.shape[${r+o}] (${s.shape[r+o]}) != shape[${r+o}] (${e[r+o]})`)}function RT(e,t,s){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(s.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${s}`);if(s.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}VF(s,t,e)}function qo(e,t,s){const i=t.shape.length,o=i>1?t.shape[i-1]:1,y=s.length;let r=1;for(let h=o;h<y;++h)r*=s[h];const g=o<1?1:o,n=vt(t.shape)/g,a=[...Vt(s.slice(0,o)),1],p=vt(s);return{sliceRank:o,numUpdates:n,sliceSize:r,strides:a,outputSize:p}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TK(e,t,s){const i=_(e,"tensor","tensorScatterupdate"),o=_(t,"indices","tensorScatterupdate","int32"),y=_(s,"updates","tensorScatterupdate");if(RT(y,o,i.shape),i.dtype!==y.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${i.dtype} and ${y.dtype}.`);const r={tensor:i,indices:o,updates:y},g={};return it.runKernel(NS,r,g)}const CK=st({tensorScatterUpdate_:TK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wK(e,t=1,s=!0){const i=_(e,"x","topk");if(i.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=i.shape[i.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);const y={x:i},r={k:t,sorted:s},[g,n]=it.runKernel(GS,y,r);return{values:g,indices:n}}const GF=st({topk_:wK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EK(e,t=0,s=1,i,o){if(ti(e),i!=null&&i==="bool")throw new Error("Unsupported data type $ { dtype }");const y=new vT(t,s,i,!0,o),r=te(e,i);for(let g=0;g<r.values.length;g++)r.values[g]=y.nextValue();return r.toTensor()}const NT=st({truncatedNormal_:EK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bK(e,t=0){const s=_(e,"x","unique","string_or_numeric");q(s.rank>0,()=>"The input tensor must be at least 1D");const i={x:s},o={axis:t},[y,r]=it.runKernel(WS,i,o);return{values:y,indices:r}}const UF=st({unique_:bK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AK(e,t,s){const i=_(e,"x","unsortedSegmentSum"),o=_(t,"segmentIds","unsortedSegmentSum","int32");q(nu(s),()=>"numSegments must be of dtype int");const y={x:i,segmentIds:o},r={numSegments:s};return it.runKernel(Qv,y,r)}const PT=st({unsortedSegmentSum_:AK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IK(e,t=0){const s=_(e,"x","unstack","string_or_numeric");q(t>=-s.shape.length&&t<s.shape.length,()=>`Axis = ${t} is not in [-${s.shape.length}, ${s.shape.length})`);const i={value:s},o={axis:t};return it.runKernel(Jv,i,o)}const Ii=st({unstack_:IK});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RK(e,t){return lT(e,t,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WF(e,t=!0,s,i){return it.makeVariable(e,t,s,i)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FT(e,t){const s=[];for(let y=0;y<t.length;y++)t[y]&&s.push(y);const i=te(e,"int32"),o=te([s.length,e.length],"int32");for(let y=0;y<s.length;y++){const r=i.indexToLoc(s[y]),g=y*e.length;o.values.set(r,g)}return o.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function NK(e){const t=_(e,"condition","whereAsync","bool"),s=await t.data(),i=FT(t.shape,s);return e!==t&&t.dispose(),i}const HF=NK;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function PK(e,t,s){const i=_(e,"tensor","boolMask"),o=_(t,"mask","boolMask","bool"),y=s??0,r=o.rank,g=i.shape;q(r>0,()=>"mask cannot be scalar"),$s(g.slice(y,y+r),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let n=1;for(let c=y;c<y+r;c++)n*=g[c];const a=g.slice(0,y).concat([n],g.slice(y+r)),p=at(i,a),h=at(o,[-1]),u=await HF(h),d=Qo(u,[1]),l=If(p,d,y);return e!==i&&i.dispose(),t!==o&&o.dispose(),d.dispose(),p.dispose(),h.dispose(),u.dispose(),l}const FK=PK;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OK(e,t,s){const i=_(e,"x","transpose");if(t==null&&(t=i.shape.map((r,g)=>g).reverse()),q(i.rank===t.length,()=>`Error in transpose: rank of input ${i.rank} must match length of perm ${t}.`),t.forEach(r=>{q(r>=0&&r<i.rank,()=>`All entries in 'perm' must be between 0 and ${i.rank-1} but got ${t}`)}),i.rank<=1)return i.clone();const o={x:i},y={perm:t};return i.dtype==="complex64"?ft(()=>{let r=sc(i),g=sg(i);return r=it.runKernel(Gl,{x:r},y),g=it.runKernel(Gl,{x:g},y),s&&(g=Le(g)),Da(r,g)}):it.runKernel(Gl,o,y)}const ue=st({transpose_:OK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DK(e,t,s,i,o=!0){const y=_(e,"v","movingAverage"),r=_(t,"x","movingAverage"),g=_(s,"decay","movingAverage");wU(y,r),q(oe(y.shape,r.shape),()=>"Shape mismatch in v and x");const n=Wt(1),a=Dt(n,g);let p=rt(Dt(r,y),a);if(o){q(i!=null,()=>"When using zeroDebias: true, step is required.");const h=_(i,"step","movingAverage");p=kt(p,Dt(n,$a(g,h)))}return wt(y,p)}const LK=st({movingAverage_:DK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MK(e,t,s){ti(s);const i=_(e,"indices","scatterND","int32"),o=_(t,"updates","scatterND");RT(o,i,s);const y={indices:i,updates:o},r={shape:s};return it.runKernel(RS,y,r)}const $K=st({scatterND_:MK});function BK(e,t,s,i){if(e.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const o=e.rank>0?e.shape[0]:1,y=e.rank>1?e.shape[1]:1;if(s.length!==y)throw new Error(`outputShape has incorrect number of elements:, ${s.length}, should be: ${y}.`);const r=t.size;if(!(t.rank===0||t.rank===1&&r===o))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${o}]`);if(t.dtype!==i.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kK(e,t,s,i=0){ti(s);const o=_(e,"sparseIndices","sparseToDense","int32"),y=_(t,"sparseValues","sparseToDense","string_or_numeric"),r=_(i,"defaultValue","sparseToDense",y.dtype);BK(o,y,s,r);const g={sparseIndices:o,sparseValues:y,defaultValue:r},n={outputShape:s};return it.runKernel(MS,g,n)}const zK=st({sparseToDense_:kK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VK(e,t){const s=_(t,"indices","gatherND","int32"),o={params:_(e,"x","gatherND","string_or_numeric"),indices:s};return it.runKernel(uS,o)}const GK=st({gatherND_:VK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UK(e,t){if(t==null)return e.shape.slice();if(oe(e.shape,t))return t;if(e.shape.length===t.length){const s=[];for(let i=0;i<e.shape.length;i++)t[i]==null&&e.shape[i]!=null?s.push(e.shape[i]):s.push(t[i]);return s}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WK(e,t,s,i){const o=_(e,"x","dropout");if(q(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),q(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof $e?o.clone():o;const y=UK(o,s),r=1-t,g=kt(Af(wt(Jo(y,0,1,"float32",i),r)),r);return rt(o,g)}const XF=st({dropout_:WK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YF(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function OT(e,t,s){const i=1-e%2,o=new Float32Array(e);for(let y=0;y<e;++y){const r=2*Math.PI*y/(e+i-1);o[y]=t-s*Math.cos(r)}return is(o,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function HK(e,t,s=1){const i=_(e,"predictions","inTopK"),o=_(t,"targets","inTopK");q(i.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${i.rank}`),q(i.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${i.rank} and targets rank ${o.rank}`),$s(i.shape.slice(0,i.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const y=i.shape[i.shape.length-1];q(s>0&&s<=y,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${y}), but got ${s}`);const r=await i.data(),g=await o.data(),[n,a]=[r.length/y,y],p=Ln("bool",n);for(let h=0;h<n;h++){const u=h*a,d=r.subarray(u,u+a),l=[];for(let c=0;c<d.length;c++)l.push({value:d[c],index:c});l.sort((c,m)=>m.value-c.value),p[h]=0;for(let c=0;c<s;c++)if(l[c].index===g[h]){p[h]=1;break}}return e!==i&&i.dispose(),t!==o&&o.dispose(),Si(p,o.shape,"bool")}const XK=HK;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YK(e,t,s,i,o,y="NHWC",r){let g=e;e.rank===3&&(g=at(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let n=t;n.rank===3&&(n=at(t,[1,t.shape[0],t.shape[1],t.shape[2]])),q(g.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${g.shape}.`),q(n.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${n.shape}.`),q(s.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${s}.`);const a=y==="NHWC"?g.shape[3]:g.shape[1],p=y==="NHWC"?n.shape[3]:n.shape[1];q(a===s[2],()=>`Error in conv2dDerFilter: depth of input ${a}) must match input depth in filter (${s[2]}.`),q(p===s[3],()=>`Error in conv2dDerFilter: depth of dy (${p}) must match output depth for filter (${s[3]}).`),os("conv2dDerFilter",o,r);const h={x:g,dy:n},u={strides:i,pad:o,dataFormat:y,dimRoundingMode:r,filterShape:s};return it.runKernel(j2,h,u)}const DT=st({conv2DBackpropFilter_:YK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gg(e,t,s){if(s==null||s==="linear")return e;if(s==="relu")return rt(e,Pu(t));throw new Error(`Cannot compute gradient for fused activation ${s}.`)}function xg(e,t){let s=t;const i=yn(e.shape,t.shape);return i.length>0&&(s=Mt(s,i)),at(s,e.shape)}function yg(e,t,s,i){if(t==="linear")return e;if(t==="relu")return Cr(e);if(t==="elu")return Ef(e);if(t==="relu6")return xT(e);if(t==="prelu")return hg(e,s);if(t==="leakyrelu")return ig(e,i);if(t==="sigmoid")return vr(e);throw new Error(`Unknown fused activation ${t}.`)}const Sg=(e,t)=>!(e>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KK({x:e,filter:t,strides:s,pad:i,dataFormat:o="NHWC",dilations:y=[1,1],dimRoundingMode:r,bias:g,activation:n="linear",preluActivationWeights:a,leakyreluAlpha:p}){if(n=n||"linear",Sg(it.state.gradientDepth,n)===!1){q(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=Ma(e,t,s,i,o,y,r);return g!=null&&(C=wt(C,g)),yg(C,n,a,p)}const h=_(e,"x","conv2d","float32"),u=_(t,"filter","conv2d","float32");let d=h,l=!1;h.rank===3&&(l=!0,d=at(h,[1,h.shape[0],h.shape[1],h.shape[2]])),q(d.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${d.rank}.`),q(u.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${u.rank}.`),os("fused conv2d",i,r);const c=o==="NHWC"?d.shape[3]:d.shape[1];q(u.shape[2]===c,()=>`Error in conv2d: depth of input (${c}) must match input depth for filter ${u.shape[2]}.`),q($n(s,y),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${s} and dilations '${y}'`);const m=Rn(d.shape,u.shape,s,y,i,r);let f;g!=null&&(f=_(g,"bias","fused conv2d"),[f]=Ze(f,h),o==="NHWC"?Qt(m.outShape,f.shape):(q(f.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${f.shape.length}.`),q(f.shape.length===0||f.shape[0]===m.outChannels||f.shape[0]===1,()=>`Error in fused conv2d: bias shape (${f.shape}) is not compatible with the number of output channels (${m.outChannels})`)));let v;if(a!=null){const C=a.shape;if(q(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)q(C[0]===1||C[0]===m.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${m.outChannels}).`);else if(C.length===3)try{Qt(C,m.outShape)}catch{const b=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${m.outShape}).`;throw Error(b)}v=_(a,"prelu weights","fused conv2d")}const S=(C,w)=>{q(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);const[b,E,A,I]=w,R=gg(C,A,n);q(La(y),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${y}'`);const N=_S(E.shape,R,b,s,i),F=DT(E,R,b.shape,s,i),P=[N,F];if(I!=null){const D=xg(I,R);P.push(D)}return P},x={x:d,filter:u,bias:f,preluActivationWeights:v},T={strides:s,pad:i,dataFormat:o,dilations:y,dimRoundingMode:r,activation:n,leakyreluAlpha:p};return g==null?Yr((w,b,E)=>{let A=it.runKernel(Vp,x,T);return E([b,w,A]),l&&(A=at(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:S}})(d,u):Yr((w,b,E,A)=>{let I=it.runKernel(Vp,x,T);return A([b,w,I,E]),l&&(I=at(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:S}})(d,u,f)}const KF=st({fusedConv2d_:KK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jK(e,t,s,i,o,y=[1,1],r){let g=e;e.rank===3&&(g=at(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let n=t;n.rank===3&&(n=at(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const a={x:g,dy:n},p={strides:i,pad:o,dimRoundingMode:r,dilations:y,filterShape:s};return it.runKernel(eS,a,p)}const jF=st({depthwiseConv2dNativeBackpropFilter_:jK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZK(e,t,s,i,o,y=[1,1],r){let g=t,n=!1;t.rank===3&&(n=!0,g=at(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const a={dy:g,filter:s},p={strides:i,pad:o,dimRoundingMode:r,dilations:y,inputShape:e},h=it.runKernel(nS,a,p);return n?at(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const ZF=st({depthwiseConv2dNativeBackpropInput_:ZK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JK({x:e,filter:t,strides:s,pad:i,dataFormat:o="NHWC",dilations:y=[1,1],dimRoundingMode:r,bias:g,activation:n="linear",preluActivationWeights:a,leakyreluAlpha:p}){if(Sg(it.state.gradientDepth,n)===!1){let T=wf(e,t,s,i,o,y,r);return g!=null&&(T=wt(T,g)),yg(T,n,a,p)}const h=_(e,"x","depthwiseConv2d","float32"),u=_(t,"filter","depthwiseConv2d","float32");let d=h,l=!1;h.rank===3&&(l=!0,d=at(h,[1,h.shape[0],h.shape[1],h.shape[2]])),q(d.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${d.rank}.`),q(u.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`),q(d.shape[3]===u.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${d.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),y==null&&(y=[1,1]),q($n(s,y),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${y}'`),os("fused depthwiseConv2d",i,r);const c=Rn(d.shape,u.shape,s,y,i,r,!0);let m;g!=null&&(m=_(g,"bias","fused conv2d"),[m]=Ze(m,h),Qt(c.outShape,m.shape));let f;a!=null&&(f=_(a,"prelu weights","fused depthwiseConv2d"));const v=(T,C)=>{q(La(y),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${y}'`);const[w,b,E,A]=C,I=gg(T,E,n),R=ZF(b.shape,I,w,s,i,y,r),N=jF(b,I,w.shape,s,i,y,r);if(A!=null){const F=xg(m,I);return[R,N,F]}return[R,N]},S={x:d,filter:u,bias:m,preluActivationWeights:f},x={strides:s,pad:i,dataFormat:o,dilations:y,dimRoundingMode:r,activation:n,leakyreluAlpha:p};return g==null?Yr((C,w,b)=>{let E=it.runKernel(Gp,S,x);return b([w,C,E]),l&&(E=at(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:v}})(d,u):Yr((C,w,b,E)=>{let A=it.runKernel(Gp,S,x);return E([w,C,A,b]),l&&(A=at(A,[A.shape[1],A.shape[2],A.shape[3]])),{value:A,gradFunc:v}})(d,u,m)}const QK=st({fusedDepthwiseConv2d_:JK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qK({a:e,b:t,transposeA:s=!1,transposeB:i=!1,bias:o,activation:y="linear",preluActivationWeights:r,leakyreluAlpha:g=.2}){if(Sg(it.state.gradientDepth,y)===!1){let I=re(e,t,s,i);return o!=null&&(I=wt(I,o)),yg(I,y,r,g)}let n=_(e,"a","fused matMul"),a=_(t,"b","fused matMul");[n,a]=Ze(n,a);const p=s?n.shape[n.rank-2]:n.shape[n.rank-1],h=i?a.shape[a.rank-1]:a.shape[a.rank-2],u=s?n.shape[n.rank-1]:n.shape[n.rank-2],d=i?a.shape[a.rank-2]:a.shape[a.rank-1],l=n.shape.slice(0,-2),c=a.shape.slice(0,-2),m=vt(l),f=vt(c);q(p===h,()=>`Error in fused matMul: inner shapes (${p}) and (${h}) of Tensors with shapes ${n.shape} and ${a.shape} and transposeA=${s} and transposeB=${i} must match.`);const S=Qt(n.shape.slice(0,-2),a.shape.slice(0,-2)).concat([u,d]),x=s?at(n,[m,p,u]):at(n,[m,u,p]),T=i?at(a,[f,d,h]):at(a,[f,h,d]);let C;o!=null&&(C=_(o,"bias","fused matMul"),[C]=Ze(C,n),Qt(S,C.shape));let w;r!=null&&(w=_(r,"prelu weights","fused matMul"));const b=(I,R)=>{const[N,F,P,D]=R,M=gg(at(I,P.shape),P,y);let L,k;if(!s&&!i?(L=re(M,F,!1,!0),k=re(N,M,!0,!1)):!s&&i?(L=re(M,F,!1,!1),k=re(M,N,!0,!1)):s&&!i?(L=re(F,M,!1,!0),k=re(N,M,!1,!1)):(L=re(F,M,!0,!0),k=re(M,N,!0,!0)),o!=null){const V=xg(D,M);return[L,k,V]}else return[L,k]},E={a:x,b:T,bias:C,preluActivationWeights:w},A={transposeA:s,transposeB:i,activation:y,leakyreluAlpha:g};return o==null?Yr((R,N,F)=>{const P=it.runKernel(zp,E,A);return F([R,N,P]),{value:at(P,S),gradFunc:b}})(x,T):Yr((R,N,F,P)=>{const D=it.runKernel(zp,E,A);return P([R,N,D,F]),{value:at(D,S),gradFunc:b}})(x,T,C)}const Hy=st({fusedMatMul_:qK});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _K=Object.freeze(Object.defineProperty({__proto__:null,conv2d:KF,depthwiseConv2d:QK,matMul:Hy},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tj(e){return OT(e,.54,.46)}const ej=st({hammingWindow_:tj});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nj(e){return OT(e,.5,.5)}const JF=st({hannWindow_:nj});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sj(e,t,s,i=!1,o=0){let y=0;const r=[];for(;y+t<=e.size;)r.push(le(e,y,t)),y+=s;if(i)for(;y<e.size;){const g=y+t-e.size,n=on([le(e,y,t-g),Ru([g],o)]);r.push(n),y+=s}return r.length===0?Nh([],[0,t]):at(on(r),[r.length,t])}const QF=st({frame_:sj});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ij(e,t,s,i,o=JF){i==null&&(i=YF(t));const y=QF(e,t,s),r=rt(y,o(t));return vg(r,i)}const rj=st({stft_:ij});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aj(e,t,s,i,o="bilinear",y=0){const r=_(e,"image","cropAndResize"),g=_(t,"boxes","cropAndResize","float32"),n=_(s,"boxInd","cropAndResize","int32"),a=g.shape[0];q(r.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${r.rank}.`),q(g.rank===2&&g.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${a},4] but had shape ${g.shape}.`),q(n.rank===1&&n.shape[0]===a,()=>`Error in cropAndResize: boxInd must be have size [${a}] but had shape ${g.shape}.`),q(i.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${i.length}.`),q(i[0]>=1&&i[1]>=1,()=>`cropSize must be atleast [1,1], but was ${i}`),q(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const p={image:r,boxes:g,boxInd:n},h={method:o,extrapolationValue:y,cropSize:i};return it.runKernel(q2,p,h)}const oj=st({cropAndResize_:aj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lj(e){const t=_(e,"image","flipLeftRight","float32");q(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const s={image:t};return it.runKernel(lS,s,{})}const uj=st({flipLeftRight_:lj});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hj(e){const t=_(e,"image","grayscaleToRGB"),s=t.rank-1,i=t.shape[s];q(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),q(i===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${i}.`);const o=new Array(t.rank);return o.fill(1,0,s),o[s]=3,mi(t,o)}const cj=st({grayscaleToRGB_:hj});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fj(e){const t=_(e,"image","RGBToGrayscale"),s=t.rank-1,i=t.shape[s];q(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),q(i===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${i}.`);const o=t.dtype,y=Ft(t,"float32"),r=is([.2989,.587,.114]);let g;switch(t.rank){case 2:g=yl("ij,j->i",y,r);break;case 3:g=yl("ijk,k->ij",y,r);break;case 4:g=yl("ijkl,l->ijk",y,r);break;case 5:g=yl("ijklm,m->ijkl",y,r);break;case 6:g=yl("ijklmn,n->ijklm",y,r);break;default:throw new Error("Not a valid tensor rank.")}return g=ns(g,-1),Ft(g,o)}const dj=st({rgbToGrayscale_:fj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pj(e,t,s=0,i=.5){const o=_(e,"image","rotateWithOffset","float32");q(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const y={image:o},r={radians:t,fillValue:s,center:i};return it.runKernel(HS,y,r)}const mj=st({rotateWithOffset_:pj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fu(e,t,s,i,o,y){i==null&&(i=.5),o==null&&(o=Number.NEGATIVE_INFINITY),y==null&&(y=0);const r=e.shape[0];return s=Math.min(s,r),q(0<=i&&i<=1,()=>`iouThreshold must be in [0, 1], but was '${i}'`),q(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),q(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),q(t.rank===1,()=>"scores must be a 1D tensor"),q(t.shape[0]===r,()=>`scores has incompatible shape with boxes. Expected ${r}, but was ${t.shape[0]}`),q(0<=y&&y<=1,()=>`softNmsSigma must be in [0, 1], but was '${y}'`),{maxOutputSize:s,iouThreshold:i,scoreThreshold:o,softNmsSigma:y}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vj(e,t,s,i=.5,o=Number.NEGATIVE_INFINITY){const y=_(e,"boxes","nonMaxSuppression","float32"),r=_(t,"scores","nonMaxSuppression","float32"),g=Fu(y,r,s,i,o);s=g.maxOutputSize,i=g.iouThreshold,o=g.scoreThreshold;const n={maxOutputSize:s,iouThreshold:i,scoreThreshold:o};return it.runKernel(xS,{boxes:y,scores:r},n)}const gj=st({nonMaxSuppression_:vj});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xj(e,t,s){const i=yj(e,t,s),o=i<0?-(i+1):i;e.splice(o,0,t)}function yj(e,t,s){return Tj(e,t,s||Sj)}function Sj(e,t){return e>t?1:e<t?-1:0}function Tj(e,t,s){let i=0,o=e.length,y=0,r=!1;for(;i<o;){y=i+(o-i>>>1);const g=s(t,e[y]);g>0?i=y+1:(o=y,r=!g)}return r?i:-i-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LT(e,t,s,i,o){return BT(e,t,s,i,o,0)}function MT(e,t,s,i,o,y){return BT(e,t,s,i,o,0,!1,y,!0)}function $T(e,t,s,i,o,y){return BT(e,t,s,i,o,y,!0)}function BT(e,t,s,i,o,y,r=!1,g=!1,n=!1){const a=[];for(let m=0;m<t.length;m++)t[m]>o&&a.push({score:t[m],boxIndex:m,suppressBeginIndex:0});a.sort(tA);const p=y>0?-.5/y:0,h=[],u=[];for(;h.length<s&&a.length>0;){const m=a.pop(),{score:f,boxIndex:v,suppressBeginIndex:S}=m;if(f<o)break;let x=!1;for(let T=h.length-1;T>=S;--T){const C=Cj(e,v,h[T]);if(C>=i){x=!0;break}if(m.score=m.score*wj(i,p,C),m.score<=o)break}m.suppressBeginIndex=h.length,x||(m.score===f?(h.push(v),u.push(m.score)):m.score>o&&xj(a,m,tA))}const d=h.length,l=s-d;g&&l>0&&(h.push(...new Array(l).fill(0)),u.push(...new Array(l).fill(0)));const c={selectedIndices:h};return r&&(c.selectedScores=u),n&&(c.validOutputs=d),c}function Cj(e,t,s){const i=e.subarray(t*4,t*4+4),o=e.subarray(s*4,s*4+4),y=Math.min(i[0],i[2]),r=Math.min(i[1],i[3]),g=Math.max(i[0],i[2]),n=Math.max(i[1],i[3]),a=Math.min(o[0],o[2]),p=Math.min(o[1],o[3]),h=Math.max(o[0],o[2]),u=Math.max(o[1],o[3]),d=(g-y)*(n-r),l=(h-a)*(u-p);if(d<=0||l<=0)return 0;const c=Math.max(y,a),m=Math.max(r,p),f=Math.min(g,h),v=Math.min(n,u),S=Math.max(f-c,0)*Math.max(v-m,0);return S/(d+l-S)}function wj(e,t,s){const i=Math.exp(t*s*s);return s<=e?i:0}function tA(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Ej(e,t,s,i=.5,o=Number.NEGATIVE_INFINITY){const y=_(e,"boxes","nonMaxSuppressionAsync"),r=_(t,"scores","nonMaxSuppressionAsync"),g=Fu(y,r,s,i,o);s=g.maxOutputSize,i=g.iouThreshold,o=g.scoreThreshold;const n=await Promise.all([y.data(),r.data()]),a=n[0],p=n[1],{selectedIndices:h}=LT(a,p,s,i,o);return y!==e&&y.dispose(),r!==t&&r.dispose(),is(h,"int32")}const bj=Ej;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aj(e,t,s,i=.5,o=Number.NEGATIVE_INFINITY,y=0){const r=_(e,"boxes","nonMaxSuppression"),g=_(t,"scores","nonMaxSuppression"),n=Fu(r,g,s,i,o,y);s=n.maxOutputSize,i=n.iouThreshold,o=n.scoreThreshold,y=n.softNmsSigma;const a={boxes:r,scores:g},p={maxOutputSize:s,iouThreshold:i,scoreThreshold:o,softNmsSigma:y},h=it.runKernel(SS,a,p);return{selectedIndices:h[0],selectedScores:h[1]}}const Ij=st({nonMaxSuppressionWithScore_:Aj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Rj(e,t,s,i=.5,o=Number.NEGATIVE_INFINITY,y=0){const r=_(e,"boxes","nonMaxSuppressionAsync"),g=_(t,"scores","nonMaxSuppressionAsync"),n=Fu(r,g,s,i,o,y);s=n.maxOutputSize,i=n.iouThreshold,o=n.scoreThreshold,y=n.softNmsSigma;const a=await Promise.all([r.data(),g.data()]),p=a[0],h=a[1],{selectedIndices:u,selectedScores:d}=$T(p,h,s,i,o,y);return r!==e&&r.dispose(),g!==t&&g.dispose(),{selectedIndices:is(u,"int32"),selectedScores:is(d)}}const Nj=Rj;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pj(e,t,s,i=.5,o=Number.NEGATIVE_INFINITY,y=!1){const r=_(e,"boxes","nonMaxSuppression"),g=_(t,"scores","nonMaxSuppression"),n=Fu(r,g,s,i,o,null),a=n.maxOutputSize,p=n.iouThreshold,h=n.scoreThreshold,u={boxes:r,scores:g},d={maxOutputSize:a,iouThreshold:p,scoreThreshold:h,padToMaxOutputSize:y},l=it.runKernel(yS,u,d);return{selectedIndices:l[0],validOutputs:l[1]}}const Fj=st({nonMaxSuppressionPadded_:Pj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Oj(e,t,s,i=.5,o=Number.NEGATIVE_INFINITY,y=!1){const r=_(e,"boxes","nonMaxSuppressionAsync"),g=_(t,"scores","nonMaxSuppressionAsync"),n=Fu(r,g,s,i,o,null),a=n.maxOutputSize,p=n.iouThreshold,h=n.scoreThreshold,[u,d]=await Promise.all([r.data(),g.data()]),{selectedIndices:l,validOutputs:c}=MT(u,d,a,p,h,y);return r!==e&&r.dispose(),g!==t&&g.dispose(),{selectedIndices:is(l,"int32"),validOutputs:Wt(c,"int32")}}const Dj=Oj;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lj(e,t,s=!1,i=!1){const o=_(e,"images","resizeBilinear");q(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),q(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),q(i===!1||s===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let y=o,r=!1;o.rank===3&&(r=!0,y=at(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const g={images:y},n={alignCorners:s,halfPixelCenters:i,size:t},a=it.runKernel(Gv,g,n);return r?at(a,[a.shape[1],a.shape[2],a.shape[3]]):a}const qF=st({resizeBilinear_:Lj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mj(e,t,s=!1,i=!1){const o=_(e,"images","resizeNearestNeighbor");q(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),q(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),q(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),q(i===!1||s===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let y=o,r=!1;o.rank===3&&(r=!0,y=at(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const g={images:y},n={alignCorners:s,halfPixelCenters:i,size:t},a=it.runKernel(Vv,g,n);return r?at(a,[a.shape[1],a.shape[2],a.shape[3]]):a}const _F=st({resizeNearestNeighbor_:Mj});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $j(e,t="binary",s=!1,i=.5){const o=_(e,"image","threshold"),y=.2989,r=.587,g=.114,n=o.shape[0]*o.shape[1];let a=rt(is([i]),255),p,h,u,d;if(q(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),q(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),q(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),q(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),o.shape[2]===3){[p,h,u]=Ps(o,[1,1,1],-1);const m=rt(p,y),f=rt(h,r),v=rt(u,g);d=wt(wt(m,f),v)}else d=e;if(t==="otsu"){const m=aF(Ft(yT(d),"int32"),Si([]),256);a=Bj(m,n)}const l=s?jo(d,a):ks(d,a);return Ft(rt(l,255),"int32")}function Bj(e,t){let s=is([-1]),i=is([0]),o=is([0]),y,r,g,n,a,p;for(let h=0;h<e.size-1;h++){y=le(e,0,h+1),r=le(e,h+1),a=kt(Mt(y),t),p=kt(Mt(r),t);const u=Mt(rt(y,uu(0,y.size)));g=kt(u,Mt(y));const d=Ru(r.shape,y.size),l=wt(uu(0,r.size),d),c=rt(r,l);n=kt(Mt(c),Mt(r));const m=Dt(g,n),f=Dt(g,n),v=rt(a,p);o=rt(rt(v,m),f);const S=ks(o,i);i=Hn(S,o,i),s=Hn(S,is([h]),s)}return s}const kj=st({threshold_:$j});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zj(e,t,s="nearest",i="constant",o=0,y){const r=_(e,"image","transform","float32"),g=_(t,"transforms","transform","float32");q(r.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${r.rank}.`),q(g.rank===2&&(g.shape[0]===r.shape[0]||g.shape[0]===1)&&g.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),q(y==null||y.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${y}.`);const n={image:r,transforms:g},a={interpolation:s,fillMode:i,fillValue:o,outputShape:y};return it.runKernel(US,n,a)}const Vj=st({transform_:zj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gj(e,t,s){const i=_(e,"a","bandPart");q(i.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${i.rank}.`);const o=i.shape,[y,r]=i.shape.slice(-2);let g,n;typeof t=="number"?(q(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),q(t<=y,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${y}).`),g=_(t<0?y:t,"numLower","bandPart")):(q(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),g=Hn(nc(t,0),y,$o(t,y))),typeof s=="number"?(q(s%1===0,()=>`bandPart(): numUpper must be an integer, got ${s}.`),q(s<=r,()=>`bandPart(): numUpper (${s}) must not be greater than the number of columns (${r}).`),n=_(s<0?r:s,"numUpper","bandPart")):(q(s.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),n=Hn(nc(s,0),r,$o(s,r)));const a=at(uu(0,y,1,"int32"),[-1,1]),p=uu(0,r,1,"int32"),h=Dt(a,p),u=Sr(jo(h,g),Qa(h,Le(n))),d=fn([y,r],i.dtype);return at(Js(Ii(at(i,[-1,y,r])).map(l=>Hn(u,l,d))),o)}const Uj=st({bandPart_:Gj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wj(e){let t;if(Array.isArray(e)){t=!1,q(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=e[0].shape[0];for(let y=1;y<e.length;++y)q(e[y].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[y].shape[0]} vs. ${o})`)}else t=!0,e=Ps(e,e.shape[0],0).map(o=>Qo(o,[0]));q(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const s=[],i=e;for(let o=0;o<e.length;++o)s.push(it.tidy(()=>{let y=i[o];if(o>0)for(let r=0;r<o;++r){const g=rt(Mt(rt(s[r],y)),s[r]);y=Dt(y,g)}return kt(y,bf(y,"euclidean"))}));return t?Js(s,0):s}const Hj=st({gramSchmidt_:Wj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xj(e,t=!1){if(q(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return eA(e,t);{const s=e.shape.slice(0,e.shape.length-2).reduce((n,a)=>n*a),i=Ii(at(e,[s,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],y=[];i.forEach(n=>{const[a,p]=eA(n,t);o.push(a),y.push(p)});const r=at(Js(o,0),e.shape),g=at(Js(y,0),e.shape);return[r,g]}}function eA(e,t=!1){return it.tidy(()=>{q(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const s=e.shape[0],i=e.shape[1];let o=iT(s),y=zr(e);const r=Nh([[1]],[1,1]);let g=zr(r);const n=s>=i?i:s;for(let a=0;a<n;++a){const p=y,h=g,u=o;[g,y,o]=it.tidy(()=>{const d=le(y,[a,a],[s-a,1]),l=bf(d),c=le(y,[a,a],[1,1]),m=Hn(ks(c,0),Nh([[-1]]),Nh([[1]])),f=Dt(c,rt(m,l)),v=kt(d,f);v.shape[0]===1?g=zr(r):g=on([r,le(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const S=Le(kt(re(m,f),l)),x=le(y,[a,0],[s-a,i]),T=rt(S,g),C=ue(g);if(a===0)y=Dt(x,re(T,re(C,x)));else{const E=Dt(x,re(T,re(C,x)));y=on([le(y,[0,0],[a,i]),E],0)}const w=ue(T),b=le(o,[0,a],[s,o.shape[1]-a]);if(a===0)o=Dt(b,re(re(b,g),w));else{const E=Dt(b,re(re(b,g),w));o=on([le(o,[0,0],[s,a]),E],1)}return[g,y,o]}),ne([p,h,u])}return!t&&s>i&&(o=le(o,[0,0],[s,i]),y=le(y,[0,0],[i,i])),[o,y]})}const Yj=st({qr_:Xj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ds;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ds||(ds={}));function Kj(e,t,s=ds.SUM_BY_NONZERO_WEIGHTS){const i=_(e,"losses","computeWeightedLoss");let o=null;t!=null&&(o=_(t,"weights","computeWeightedLoss"));const y=o==null?i:rt(i,o);if(s===ds.NONE)return y;if(s===ds.SUM)return Mt(y);if(s===ds.MEAN){if(o==null)return Ye(y);{const r=i.size/o.size,g=kt(Mt(y),Mt(o));return r>1?kt(g,Wt(r)):g}}if(s===ds.SUM_BY_NONZERO_WEIGHTS){if(o==null)return kt(Mt(y),Wt(i.size));{const r=rt(o,Us(i.shape)),g=Ft(Mt(lu(r,Wt(0))),"float32");return kt(Mt(y),g)}}throw Error(`Unknown reduction: ${s}`)}const ta=st({computeWeightedLoss_:Kj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jj(e,t,s,i=ds.SUM_BY_NONZERO_WEIGHTS){const o=_(e,"labels","absoluteDifference"),y=_(t,"predictions","absoluteDifference");let r=null;s!=null&&(r=_(s,"weights","absoluteDifference")),$s(o.shape,y.shape,"Error in absoluteDifference: ");const g=un(Dt(o,y));return ta(g,r,i)}const Zj=st({absoluteDifference_:jj});function Jj(e,t,s,i,o=ds.SUM_BY_NONZERO_WEIGHTS){const y=_(e,"labels","cosineDistance"),r=_(t,"predictions","cosineDistance");let g=null;i!=null&&(g=_(i,"weights","cosineDistance")),$s(y.shape,r.shape,"Error in cosineDistance: ");const n=Wt(1),a=Dt(n,Mt(rt(y,r),s,!0));return ta(a,g,o)}const Qj=st({cosineDistance_:Jj});function qj(e,t,s,i=ds.SUM_BY_NONZERO_WEIGHTS){let o=_(e,"labels","hingeLoss");const y=_(t,"predictions","hingeLoss");let r=null;s!=null&&(r=_(s,"weights","hingeLoss")),$s(o.shape,y.shape,"Error in hingeLoss: ");const g=Wt(1);o=Dt(rt(Wt(2),o),g);const n=Cr(Dt(g,rt(o,y)));return ta(n,r,i)}const _j=st({hingeLoss_:qj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tZ(e,t,s,i=1,o=ds.SUM_BY_NONZERO_WEIGHTS){const y=_(e,"labels","huberLoss"),r=_(t,"predictions","huberLoss");let g=null;s!=null&&(g=_(s,"weights","huberLoss")),$s(y.shape,r.shape,"Error in huberLoss: ");const n=Wt(i),a=un(Dt(r,y)),p=$o(a,n),h=Dt(a,p),u=wt(rt(Wt(.5),be(p)),rt(n,h));return ta(u,g,o)}const eZ=st({huberLoss_:tZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nZ(e,t,s,i=1e-7,o=ds.SUM_BY_NONZERO_WEIGHTS){const y=_(e,"labels","logLoss"),r=_(t,"predictions","logLoss");let g=null;s!=null&&(g=_(s,"weights","logLoss")),$s(y.shape,r.shape,"Error in logLoss: ");const n=Wt(1),a=Wt(i),p=Le(rt(y,js(wt(r,a)))),h=rt(Dt(n,y),js(wt(Dt(n,r),a))),u=Dt(p,h);return ta(u,g,o)}const sZ=st({logLoss_:nZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iZ(e,t,s,i=ds.SUM_BY_NONZERO_WEIGHTS){const o=_(e,"labels","meanSquaredError"),y=_(t,"predictions","meanSquaredError");let r=null;s!=null&&(r=_(s,"weights","meanSquaredError")),$s(o.shape,y.shape,"Error in meanSquaredError: ");const g=IT(o,y);return ta(g,r,i)}const rZ=st({meanSquaredError_:iZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aZ(e,t){const s=_(e,"labels","sigmoidCrossEntropyWithLogits"),i=_(t,"logits","sigmoidCrossEntropyWithLogits");$s(s.shape,i.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=Cr(i),y=rt(i,s),r=rg(Ks(Le(un(i))));return wt(Dt(o,y),r)}function oZ(e,t,s,i=0,o=ds.SUM_BY_NONZERO_WEIGHTS){let y=_(e,"multiClassLabels","sigmoidCrossEntropy");const r=_(t,"logits","sigmoidCrossEntropy");let g=null;if(s!=null&&(g=_(s,"weights","sigmoidCrossEntropy")),$s(y.shape,r.shape,"Error in sigmoidCrossEntropy: "),i>0){const a=Wt(i),p=Wt(1),h=Wt(.5);y=wt(rt(y,Dt(p,a)),rt(h,a))}const n=aZ(y,r);return ta(n,g,o)}const lZ=st({sigmoidCrossEntropy_:oZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uZ(e,t,s=-1){if(s===-1&&(s=t.rank-1),s!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${s}`);return Yr((o,y,r)=>{const n=aT(y,[s],!0),a=Dt(Ft(y,"float32"),n);r([o,a]);const p=Le(rt(a,o));return{value:Mt(p,[s]),gradFunc:(d,l)=>{const[c,m]=l,f=_e(d.shape,[s]);return[rt(at(d,f),Dt(Ft(c,"float32"),Ks(m))),rt(at(d,f),Dt(Ks(m),Ft(c,"float32")))]}}})(e,t)}function hZ(e,t,s,i=0,o=ds.SUM_BY_NONZERO_WEIGHTS){let y=_(e,"onehotLabels","softmaxCrossEntropy");const r=_(t,"logits","softmaxCrossEntropy");let g=null;if(s!=null&&(g=_(s,"weights","softmaxCrossEntropy")),$s(y.shape,r.shape,"Error in softmaxCrossEntropy: "),i>0){const a=Wt(i),p=Wt(1),h=Wt(y.shape[1]);y=wt(rt(y,Dt(p,a)),kt(a,h))}const n=uZ(y,r);return ta(n,g,o)}const cZ=st({softmaxCrossEntropy_:hZ});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fZ(e,t,s,i){const o=_(e,"indices","sparseFillEmptyRows","int32"),y=_(t,"values","sparseFillEmptyRows"),r=_(s,"denseShape","sparseFillEmptyRows","int32"),g=_(i,"defaultValue","sparseFillEmptyRows",y.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(y.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${y.shape}`);if(r.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${r.shape}`);if(g.rank!==0)throw new Error(`Default value should be a scalar but received shape ${g.shape}`);const n={indices:o,values:y,denseShape:r,defaultValue:g},a=it.runKernel(FS,n);return{outputIndices:a[0],outputValues:a[1],emptyRowIndicator:a[2],reverseIndexMap:a[3]}}const dZ=st({sparseFillEmptyRows_:fZ});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pZ(e,t,s){const i=_(e,"inputIndices","sparseReshape","int32"),o=_(t,"inputShape","sparseReshape","int32"),y=_(s,"newShape","sparseReshape","int32");if(i.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${i.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(y.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${y.shape}`);const r={inputIndices:i,inputShape:o,newShape:y},g=it.runKernel(OS,r);return{outputIndices:g[0],outputShape:g[1]}}const mZ=st({sparseReshape_:pZ});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vZ(e,t,s){const i=_(e,"data","sparseSegmentMean"),o=_(t,"indices","sparseSegmentMean","int32"),y=_(s,"segmentIds","sparseSegmentMean","int32");if(i.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(y.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${y.shape}`);const r={data:i,indices:o,segmentIds:y};return it.runKernel(DS,r)}const gZ=st({sparseSegmentMean_:vZ});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xZ(e,t,s){const i=_(e,"data","sparseSegmentSum"),o=_(t,"indices","sparseSegmentSum","int32"),y=_(s,"segmentIds","sparseSegmentSum","int32");if(i.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(y.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${y.shape}`);const r={data:i,indices:o,segmentIds:y};return it.runKernel(LS,r)}const yZ=st({sparseSegmentSum_:xZ});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SZ(e,t,s,i,o,y,r,g){const n=_(e,"data","stringNGrams","string");if(n.dtype!=="string")throw new Error("Data must be of datatype string");if(n.shape.length!==1)throw new Error(`Data must be a vector, saw: ${n.shape}`);const a=_(t,"dataSplits","stringNGrams");if(a.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const p={separator:s,nGramWidths:i,leftPad:o,rightPad:y,padWidth:r,preserveShortSequences:g},h={data:n,dataSplits:a},u=it.runKernel(kS,h,p);return{nGrams:u[0],nGramsSplits:u[1]}}const TZ=st({stringNGrams_:SZ});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CZ(e,t,s=!0){const i=_(e,"input","stringSplit","string"),o=_(t,"delimiter","stringSplit","string");if(i.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${i.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);const y={skipEmpty:s},r={input:i,delimiter:o},g=it.runKernel(zS,r,y);return{indices:g[0],values:g[1],shape:g[2]}}const wZ=st({stringSplit_:CZ});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EZ(e,t){const s=_(e,"input","stringToHashBucketFast","string"),i={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const o={input:s};return it.runKernel(VS,o,i)}const bZ=st({stringToHashBucketFast_:EZ});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AZ(e,t,s,i=!0){const o=_(e,"input","staticRegexReplace","string"),y={pattern:t,rewrite:s,replaceGlobal:i};return it.runKernel(Zv,{x:o},y)}const IZ=st({staticRegexReplace_:AZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RZ={fft:mg,ifft:rc,rfft:vg,irfft:AT},NZ={hammingWindow:ej,hannWindow:JF,frame:QF,stft:rj},lr={flipLeftRight:uj,grayscaleToRGB:cj,resizeNearestNeighbor:_F,resizeBilinear:qF,rgbToGrayscale:dj,rotateWithOffset:mj,cropAndResize:oj,nonMaxSuppression:gj,nonMaxSuppressionAsync:bj,nonMaxSuppressionWithScore:Ij,nonMaxSuppressionWithScoreAsync:Nj,nonMaxSuppressionPadded:Fj,nonMaxSuppressionPaddedAsync:Dj,threshold:kj,transform:Vj},tO={bandPart:Uj,gramSchmidt:Hj,qr:Yj},PZ={absoluteDifference:Zj,computeWeightedLoss:ta,cosineDistance:Qj,hingeLoss:_j,huberLoss:eZ,logLoss:sZ,meanSquaredError:rZ,sigmoidCrossEntropy:lZ,softmaxCrossEntropy:cZ},FZ={sparseFillEmptyRows:dZ,sparseReshape:mZ,sparseSegmentMean:gZ,sparseSegmentSum:yZ},OZ={stringNGrams:TZ,stringSplit:wZ,stringToHashBucketFast:bZ,staticRegexReplace:IZ};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DZ=new Map,LZ=new Map;class Ou{getClassName(){return this.constructor.className}static fromConfig(t,s){return new t(s)}}class ui{constructor(){this.classNameMap={}}static getMap(){return ui.instance==null&&(ui.instance=new ui),ui.instance}static register(t){ui.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function Et(e,t,s){q(e.className!=null,()=>"Class being registered does not have the static className property defined."),q(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),q(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof s>"u"&&(s=e.className);const i=s,o=t+">"+i;return ui.register(e),DZ.set(o,e),LZ.set(e,o),e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _a extends Ou{minimize(t,s=!1,i){const{value:o,grads:y}=this.computeGradients(t,i);if(i!=null){const r=i.map(g=>({name:g.name,tensor:y[g.name]}));this.applyGradients(r)}else this.applyGradients(y);return ne(y),s?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,s){return rX(t,s)}dispose(){this.iterations_!=null&&ne(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Wt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(_a,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eO extends _a{static get className(){return"Adadelta"}constructor(t,s,i=null){super(),this.learningRate=t,this.rho=s,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],i==null&&(this.epsilon=it.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(i=>i.name):Object.keys(t)).forEach((i,o)=>{const y=it.registeredVariables[i],r=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${i}/accum_grad`,variable:ft(()=>he(y).variable(r))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${i}/accum_var`,variable:ft(()=>he(y).variable(r))});const g=Array.isArray(t)?t[o].tensor:t[i];if(g==null)return;const n=this.accumulatedGrads[o].variable,a=this.accumulatedUpdates[o].variable;ft(()=>{const p=wt(rt(n,this.rho),rt(be(g),1-this.rho)),h=rt(kt(Kn(wt(a,this.epsilon)),Kn(wt(n,this.epsilon))),g),u=wt(rt(a,this.rho),rt(be(h),1-this.rho));n.assign(p),a.assign(u);const d=wt(rt(h,-this.learningRate),y);y.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(ne(this.accumulatedGrads.map(t=>t.variable)),ne(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(s=>({name:s.originalName,tensor:s.variable})))}async setWeights(t){t=await this.extractIterations(t);const s=t.length/2,i=!1;this.accumulatedGrads=t.slice(0,s).map(o=>({originalName:o.name,variable:o.tensor.variable(i)})),this.accumulatedUpdates=t.slice(s,s*2).map(o=>({originalName:o.name,variable:o.tensor.variable(i)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,s){return new t(s.learningRate,s.rho,s.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nO extends _a{static get className(){return"Adagrad"}constructor(t,s=.1){super(),this.learningRate=t,this.initialAccumulatorValue=s,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(i=>i.name):Object.keys(t)).forEach((i,o)=>{const y=it.registeredVariables[i];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${i}/accumulator`,variable:ft(()=>Ru(y.shape,this.initialAccumulatorValue).variable(!1))});const r=Array.isArray(t)?t[o].tensor:t[i];if(r==null)return;const g=this.accumulatedGrads[o].variable;ft(()=>{const n=wt(g,be(r));g.assign(n);const a=wt(rt(kt(r,Kn(wt(n,it.backend.epsilon()))),-this.learningRate),y);y.assign(a)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&ne(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const s=!1;this.accumulatedGrads=t.map(i=>({originalName:i.name,variable:i.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,s){return new t(s.learningRate,s.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sO extends _a{static get className(){return"Adam"}constructor(t,s,i,o=null){super(),this.learningRate=t,this.beta1=s,this.beta2=i,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ft(()=>{this.accBeta1=Wt(s).variable(),this.accBeta2=Wt(i).variable()}),o==null&&(this.epsilon=it.backend.epsilon())}applyGradients(t){const s=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);ft(()=>{const i=Dt(1,this.accBeta1),o=Dt(1,this.accBeta2);s.forEach((y,r)=>{const g=it.registeredVariables[y],n=!1;this.accumulatedFirstMoment[r]==null&&(this.accumulatedFirstMoment[r]={originalName:`${y}/m`,variable:ft(()=>he(g).variable(n))}),this.accumulatedSecondMoment[r]==null&&(this.accumulatedSecondMoment[r]={originalName:`${y}/v`,variable:ft(()=>he(g).variable(n))});const a=Array.isArray(t)?t[r].tensor:t[y];if(a==null)return;const p=this.accumulatedFirstMoment[r].variable,h=this.accumulatedSecondMoment[r].variable,u=wt(rt(p,this.beta1),rt(a,1-this.beta1)),d=wt(rt(h,this.beta2),rt(be(a),1-this.beta2)),l=kt(u,i),c=kt(d,o);p.assign(u),h.assign(d);const m=wt(rt(kt(l,wt(Kn(c),this.epsilon)),-this.learningRate),g);g.assign(m)}),this.accBeta1.assign(rt(this.accBeta1,this.beta1)),this.accBeta2.assign(rt(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ne(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&ne(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(s=>({name:s.originalName,tensor:s.variable})))}async setWeights(t){t=await this.extractIterations(t),ft(()=>{this.accBeta1.assign($a(this.beta1,this.iterations_+1)),this.accBeta2.assign($a(this.beta2,this.iterations_+1))});const s=t.length/2,i=!1;this.accumulatedFirstMoment=t.slice(0,s).map(o=>({originalName:o.name,variable:o.tensor.variable(i)})),this.accumulatedSecondMoment=t.slice(s,s*2).map(o=>({originalName:o.name,variable:o.tensor.variable(i)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,s){return new t(s.learningRate,s.beta1,s.beta2,s.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iO extends _a{static get className(){return"Adamax"}constructor(t,s,i,o=null,y=0){super(),this.learningRate=t,this.beta1=s,this.beta2=i,this.epsilon=o,this.decay=y,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ft(()=>{this.iteration=Wt(0).variable(),this.accBeta1=Wt(s).variable()}),o==null&&(this.epsilon=it.backend.epsilon())}applyGradients(t){const s=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);ft(()=>{const i=Dt(1,this.accBeta1),o=kt(-this.learningRate,wt(rt(this.iteration,this.decay),1));s.forEach((y,r)=>{const g=it.registeredVariables[y],n=!1;this.accumulatedFirstMoment[r]==null&&(this.accumulatedFirstMoment[r]={originalName:`${y}/m`,variable:he(g).variable(n)}),this.accumulatedWeightedInfNorm[r]==null&&(this.accumulatedWeightedInfNorm[r]={originalName:`${y}/v`,variable:he(g).variable(n)});const a=Array.isArray(t)?t[r].tensor:t[y];if(a==null)return;const p=this.accumulatedFirstMoment[r].variable,h=this.accumulatedWeightedInfNorm[r].variable,u=wt(rt(p,this.beta1),rt(a,1-this.beta1)),d=rt(h,this.beta2),l=un(a),c=_r(d,l);p.assign(u),h.assign(c);const m=wt(rt(kt(o,i),kt(u,wt(c,this.epsilon))),g);g.assign(m)}),this.iteration.assign(wt(this.iteration,1)),this.accBeta1.assign(rt(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ne(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&ne(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,s){return new t(s.learningRate,s.beta1,s.beta2,s.epsilon,s.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kT extends _a{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(i=>i.name):Object.keys(t)).forEach((i,o)=>{const y=Array.isArray(t)?t[o].tensor:t[i];if(y==null)return;const r=it.registeredVariables[i];ft(()=>{const g=wt(rt(this.c,y),r);r.assign(g)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=bn(Wt(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,s){return new t(s.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rO extends kT{static get className(){return"Momentum"}constructor(t,s,i=!1){super(t),this.learningRate=t,this.momentum=s,this.useNesterov=i,this.accumulations=[],this.m=Wt(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(i=>i.name):Object.keys(t)).forEach((i,o)=>{const y=it.registeredVariables[i];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${i}/momentum`,variable:ft(()=>he(y).variable(!1))});const r=this.accumulations[o].variable,g=Array.isArray(t)?t[o].tensor:t[i];g!=null&&ft(()=>{let n;const a=wt(rt(this.m,r),g);this.useNesterov?n=wt(rt(this.c,wt(g,rt(a,this.m))),y):n=wt(rt(this.c,a),y),r.assign(a),y.assign(n)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&ne(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const s=!1;this.accumulations=t.map(i=>({originalName:i.name,variable:i.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,s){return new t(s.learningRate,s.momentum,s.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aO extends _a{static get className(){return"RMSProp"}constructor(t,s=.9,i=0,o=null,y=!1){if(super(),this.learningRate=t,this.decay=s,this.momentum=i,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=y,o==null&&(this.epsilon=it.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(i=>i.name):Object.keys(t)).forEach((i,o)=>{const y=it.registeredVariables[i],r=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${i}/rms`,variable:ft(()=>he(y).variable(r))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${i}/momentum`,variable:ft(()=>he(y).variable(r))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${i}/mg`,variable:ft(()=>he(y).variable(r))});const g=Array.isArray(t)?t[o].tensor:t[i];if(g==null)return;const n=this.accumulatedMeanSquares[o].variable,a=this.accumulatedMoments[o].variable;ft(()=>{const p=wt(rt(n,this.decay),rt(be(g),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[o].variable,u=wt(rt(h,this.decay),rt(g,1-this.decay)),d=kt(rt(g,this.learningRate),Kn(Dt(p,wt(be(u),this.epsilon)))),l=wt(rt(a,this.momentum),d);n.assign(p),h.assign(u),a.assign(l);const c=Dt(y,l);y.assign(c)}else{const h=wt(rt(n,this.decay),rt(be(g),1-this.decay)),u=wt(rt(a,this.momentum),kt(rt(g,this.learningRate),Kn(wt(h,this.epsilon))));n.assign(h),a.assign(u);const d=Dt(y,u);y.assign(d)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&ne(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&ne(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&ne(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(s=>({name:s.originalName,tensor:s.variable})))}async setWeights(t){t=await this.extractIterations(t);const s=this.centered?t.length/3:t.length/2,i=!1;this.accumulatedMeanSquares=t.slice(0,s).map(o=>({originalName:o.name,variable:o.tensor.variable(i)})),this.accumulatedMoments=t.slice(s,s*2).map(o=>({originalName:o.name,variable:o.tensor.variable(i)})),this.centered&&(this.accumulatedMeanGrads=t.slice(s*2,s*3).map(o=>({originalName:o.name,variable:o.tensor.variable(i)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,s){return new t(s.learningRate,s.decay,s.momentum,s.epsilon,s.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MZ=[eO,nO,sO,iO,rO,aO,kT];function $Z(){for(const e of MZ)Et(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BZ="model",kZ=".json",zZ=".weights.bin";function nA(e){return new Promise(t=>setTimeout(t)).then(e)}class Bo{constructor(t){if(!pt().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(Bo.URL_SCHEME)&&(t=t.slice(Bo.URL_SCHEME.length)),(t==null||t.length===0)&&(t=BZ),this.modelJsonFileName=t+kZ,this.weightDataFileName=t+zZ}async save(t){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const s=Ji.join(t.weightData),i=window.URL.createObjectURL(new Blob([s],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const o=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],y=M3(t,o),r=window.URL.createObjectURL(new Blob([JSON.stringify(y)],{type:"application/json"})),g=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(g.download=this.modelJsonFileName,g.href=r,await nA(()=>g.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){const n=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;n.download=this.weightDataFileName,n.href=i,await nA(()=>n.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Sf(t)}}}}Bo.URL_SCHEME="downloads://";class VZ{constructor(t){if(t==null||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}async load(){return new Promise((t,s)=>{const i=new FileReader;i.onload=o=>{const y=JSON.parse(o.target.result),r=y.modelTopology;if(r==null){s(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(y.weightsManifest==null){s(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){t({modelTopology:r});return}const n=jS(y,a=>this.loadWeights(a));t(n)},i.onerror=o=>s(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),i.readAsText(this.jsonFile)})}loadWeights(t){const s=[],i=[];for(const r of t)s.push(...r.weights),i.push(...r.paths);const o=this.checkManifestAndWeightFiles(t),y=i.map(r=>this.loadWeightsFile(r,o[r]));return Promise.all(y).then(r=>[s,r])}loadWeightsFile(t,s){return new Promise((i,o)=>{const y=new FileReader;y.onload=r=>{const g=r.target.result;i(g)},y.onerror=r=>o(`Failed to weights data from file of path '${t}'.`),y.readAsArrayBuffer(s)})}checkManifestAndWeightFiles(t){const s=[],i=this.weightsFiles.map(y=>_b(y.name)),o={};for(const y of t)y.paths.forEach(r=>{const g=_b(r);if(s.indexOf(g)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${g}'`);if(s.push(g),i.indexOf(g)===-1)throw new Error(`Weight file with basename '${g}' is not provided.`);o[r]=this.weightsFiles[i.indexOf(g)]});if(s.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${s.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}}const GZ=e=>pt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Bo.URL_SCHEME)?UZ(e.slice(Bo.URL_SCHEME.length)):null;Ve.registerSaveRouter(GZ);function UZ(e="model"){return new Bo(e)}function WZ(e){return new VZ(e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sA(e,t,s,i){r(e),s=s??0,i=i??1,g(s,i);let o=0;const y=n=>(n.then(a=>{const p=s+ ++o/e.length*(i-s);return t(p),a}),n);function r(n){q(n!=null&&Array.isArray(n)&&n.length>0,()=>"promises must be a none empty array")}function g(n,a){q(n>=0&&n<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${n}`),q(a>=0&&a<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${a}`),q(a>=n,()=>`startFraction must be no more than endFraction, but got startFraction ${n} and endFraction ${a}`)}return Promise.all(e.map(y))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function oO(e,t){t==null&&(t={});const s=t.fetchFunc==null?pt().platform.fetch:t.fetchFunc,i=e.map(h=>s(h,t.requestInit,{isBinary:!0})),o=0,y=.5,g=(t.onProgress==null?await Promise.all(i):await sA(i,t.onProgress,o,y)).map(h=>h.arrayBuffer()),n=.5,a=1;return t.onProgress==null?await Promise.all(g):await sA(g,t.onProgress,n,a)}async function HZ(e,t="",s,i){return lO(r=>oO(r,{requestInit:i}))(e,t,s)}function lO(e){return async(t,s="",i)=>{const o=t.map(()=>!1),y={},r=i!=null?i.map(()=>!1):[],g=[];if(t.forEach((d,l)=>{let c=0;d.weights.forEach(m=>{const f="quantization"in m?m.quantization.dtype:m.dtype,v=$y[f]*vt(m.shape),S=()=>{o[l]=!0,y[l]==null&&(y[l]=[]),y[l].push({manifestEntry:m,groupOffset:c,sizeBytes:v})};i!=null?i.forEach((x,T)=>{x===m.name&&(S(),r[T]=!0)}):S(),g.push(m.name),c+=v})}),!r.every(d=>d)){const d=i.filter((l,c)=>!r[c]);throw new Error(`Could not find weights in manifest with names: ${d.join(", ")}. 
Manifest JSON has weights with names: ${g.join(", ")}.`)}const n=o.reduce((d,l,c)=>(l&&d.push(c),d),[]),a=[];n.forEach(d=>{t[d].paths.forEach(l=>{const c=s+(s.endsWith("/")?"":"/")+l;a.push(c)})});const p=await e(a),h={};let u=0;return n.forEach(d=>{const l=t[d].paths.length,c=new Ji(p.slice(u,u+l));y[d].forEach(f=>{const v=c.slice(f.groupOffset,f.groupOffset+f.sizeBytes),S=D3(v,[f.manifestEntry]);for(const x in S)h[x]=S[x]}),u+=l}),h}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XZ="application/octet-stream",YZ="application/json";class zT{constructor(t,s){if(this.DEFAULT_METHOD="POST",s==null&&(s={}),this.weightPathPrefix=s.weightPathPrefix,this.onProgress=s.onProgress,this.weightUrlConverter=s.weightUrlConverter,s.fetchFunc!=null?(q(typeof s.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=s.fetchFunc):this.fetch=pt().platform.fetch,q(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&q(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,s.requestInit!=null&&s.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=s.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const s=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);s.body=new FormData;const i=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o=M3(t,i);if(s.body.append("model.json",new Blob([JSON.stringify(o)],{type:YZ}),"model.json"),t.weightData!=null){const r=Ji.join(t.weightData);s.body.append("model.weights.bin",new Blob([r],{type:XZ}),"model.weights.bin")}const y=await this.fetch(this.path,s);if(y.ok)return{modelArtifactsInfo:Sf(t),responses:[y]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${y.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let s;try{s=await t.json()}catch{let r=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r)}const i=s.modelTopology,o=s.weightsManifest;if(i==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return jS(s,y=>this.loadWeights(y))}async loadWeights(t){const s=Array.isArray(this.path)?this.path[1]:this.path,[i,o]=KZ(s),y=this.weightPathPrefix||i,r=B3(t),g=[],n=[];for(const p of t)for(const h of p.paths)this.weightUrlConverter!=null?n.push(this.weightUrlConverter(h)):g.push(y+h+o);this.weightUrlConverter&&g.push(...await Promise.all(n));const a=await oO(g,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[r,a]}}zT.URL_SCHEME_REGEX=/^https?:\/\//;function KZ(e){const t=e.lastIndexOf("/"),s=e.lastIndexOf("?"),i=e.substring(0,t),o=s>t?e.substring(s):"";return[i+"/",o]}function Xy(e){return e.match(zT.URL_SCHEME_REGEX)!=null}const uO=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let s=!0;if(Array.isArray(e)?s=e.every(i=>Xy(i)):s=Xy(e),s)return VT(e,t)}return null};Ve.registerSaveRouter(uO);Ve.registerLoadRouter(uO);function VT(e,t){return new zT(e,t)}function jZ(e,t){return VT(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W0{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}}class hO{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}}class ZZ{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=s=>Promise.resolve(t.save(s)))}}function JZ(e,t,s,i){const o=arguments;return new ZZ(cO(...o))}function cO(e,t,s,i){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new W0(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new W0({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new W0({modelTopology:e,weightSpecs:t,weightData:s,trainingConfig:i}))}function QZ(e){return new hO(e)}function qZ(e){return new hO(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fO=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Ji,browserFiles:WZ,browserHTTPRequest:jZ,concatenateArrayBuffers:L3,copyModel:_U,decodeWeights:D3,encodeWeights:By,fromMemory:JZ,fromMemorySync:cO,getLoadHandlers:zU,getModelArtifactsForJSON:jS,getModelArtifactsForJSONSync:$3,getModelArtifactsInfoForJSON:Sf,getSaveHandlers:k3,getWeightSpecs:B3,http:VT,isHTTPScheme:Xy,listModels:QU,loadWeights:HZ,moveModel:tW,registerLoadRouter:kU,registerSaveRouter:BU,removeModel:qU,weightsLoaderFactory:lO,withSaveHandler:QZ,withSaveHandlerSync:qZ},Symbol.toStringTag,{value:"Module"}));function GT(e,t){const s=e.shape.length,i=t.shape.length;if(s<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${s}.`);if(i<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${i}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[i-1]>s)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[i-1]} vs. ${s}`);if(vt(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const o=t.shape,y=o[o.length-1];let r=1;for(let h=0;h<o.length-1;++h)r*=o[h];const g=e.shape,n=o.slice();n.pop();let a=1;for(let h=y;h<s;++h)a*=g[h],n.push(g[h]);const p=[...Vt(e.shape).map(h=>h/a),1].slice(0,y);return[n,r,a,p]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yy=-2,_Z=-1;function UT(e,t,s){const i=e.shape.length;q(i===t.length,()=>`Error in slice${i}D: Length of begin ${t} must match the rank of the array (${i}).`),q(i===s.length,()=>`Error in slice${i}D: Length of size ${s} must match the rank of the array (${i}).`);for(let o=0;o<i;++o)q(t[o]+s[o]<=e.shape[o],()=>`Error in slice${i}D: begin[${o}] + size[${o}] (${t[o]+s[o]}) would overflow input.shape[${o}] (${e.shape[o]})`)}function tJ(e){const t=[];let s=0;for(;e>0;)e&1&&t.push(s),e/=2,s++;return t}function WT(e,t,s){const i=[];for(let o=0;o<e.length;o++)i[o]=Math.ceil((t[o]-e[o])/s[o]);return i}function dO(e,t,s,i){const o=[...e];for(let y=o.length;y<i.length;y++)o.push(1);for(let y=0;y<s;y++)y===0?o[t]=1:(o.splice(t,0,1),o.pop());return o}function pO(e,t,s){return s<=e?s:s-(t-1)}function mO(e,t){const s=[];for(let i=0;i<e;i++)s.push(t+i);return s}function eJ(e,t,s,i,o,y,r,g,n){const a=e.length;let p=new Array(a),h=new Array(a),u=new Array(a);if(t.length&&s>0){const d=t[0],l=s+1;p=vO(r,d,l,i,e),h=gO(g,d,l,o,e),u=dO(y,d,l,e)}else for(let d=0;d<a;d++)p[d]=yO(r,i,y,e,d,n),h[d]=SO(g,o,y,e,d,n),u[d]=xO(y,d,n);return{begin:p,end:h,strides:u}}function vO(e,t,s,i,o){const y=[...o],r=mO(s,t);for(let g=0;g<y.length;g++)if(r.indexOf(g)>-1)y[g]=0;else{const n=pO(t,s,g);let a=i[n];e&1<<n&&(a=0),y[g]=a}return y}function gO(e,t,s,i,o){const y=[...o],r=mO(s,t);for(let g=0;g<y.length;g++)if(r.indexOf(g)>-1)y[g]=Number.MAX_SAFE_INTEGER;else{const n=pO(t,s,g);let a=i[n];e&1<<n&&(a=Number.MAX_SAFE_INTEGER),y[g]=a}for(let g=0;g<y.length;g++){const n=o[g];y[g]<0&&(y[g]+=n),y[g]=Po(0,y[g],o[g])}return y}function xO(e,t,s){let i=e[t];return(s&1<<t||i==null)&&(i=1),i}function yO(e,t,s,i,o,y){let r=t[o];const g=s[o]||1;(e&1<<o||y&1<<o||r==null)&&(g>0?r=Number.MIN_SAFE_INTEGER:r=Number.MAX_SAFE_INTEGER);const n=i[o];return r<0&&(r+=n),r=Po(0,r,n-1),r}function SO(e,t,s,i,o,y){let r=t[o];const g=s[o]||1;(e&1<<o||y&1<<o||r==null)&&(g>0?r=Number.MAX_SAFE_INTEGER:r=Number.MIN_SAFE_INTEGER);const n=i[o];return r<0&&(r+=n),g>0?r=Po(0,r,n):r=Po(-1,r,n-1),r}function HT(e,t,s){let i=s.length;for(let o=0;o<s.length;o++)if(s[o]>1){i=o;break}for(let o=i+1;o<s.length;o++)if(t[o]>0||s[o]!==e[o])return!1;return!0}function XT(e,t){let s=e.length>0?e[e.length-1]:1;for(let i=0;i<e.length-1;i++)s+=e[i]*t[i];return s}function Tg(e,t,s){let i;const o=e.shape.length;typeof t=="number"?i=[t,...new Array(o-1).fill(0)]:t.length<o?i=t.concat(new Array(o-t.length).fill(0)):i=t.slice(),i.forEach(r=>{q(r!==-1,()=>"slice() does not support negative begin indexing.")});let y;return s==null?y=new Array(o).fill(-1):typeof s=="number"?y=[s,...new Array(o-1).fill(-1)]:s.length<o?y=s.concat(new Array(o-s.length).fill(-1)):y=s,y=y.map((r,g)=>r>=0?r:(q(r===-1,()=>`Negative size values should be exactly -1 but got ${r} for the slice() size at index ${g}.`),e.shape[g]-i[g])),[i,y]}function YT(e,t,s,i,o,y,r,g,n){let a;if(i==null?(a=new Array(t.length),a.fill(1)):a=i,r!=null&&r&r-1)throw new Error("Multiple ellipses in slice is not allowed.");let p=!1;const h={dims:a.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:s.slice(),strides:a.slice(),beginMask:o,endMask:y,ellipsisMask:r,newAxisMask:g,shrinkAxisMask:n};for(let S=0;S<h.dims;S++)p&&1<<S&g&&h.numAddAxisAfterEllipsis++,1<<S&r&&(p=!0);p||(h.ellipsisMask|=1<<h.dims,h.dims++);const u={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};nJ(h,u);let d=!0,l=!0,c=!0;const m=[],f=[];for(let S=0;S<e.length;++S){if(u.strides[S]===0)throw Error(`strides[${S}] must be non-zero`);const x=!!(u.shrinkAxisMask&1<<S),T=e[S];if(T===-1){m.push(x?1:-1);continue}const C=[u.beginMask&1<<S,u.endMask&1<<S],w=[u.strides[S]>0?0:-1,u.strides[S]>0?T:T-1];if(x&&u.strides[S]<=0)throw Error("only stride 1 allowed on non-range indexing.");c=c&&u.strides[S]===1;const b=!!(u.beginMask&1<<S&&u.endMask&1<<S);if(u.beginValid&&u.endValid){if(x){const R=u.begin[S]<0?T+u.begin[S]:u.begin[S];if(u.begin[S]=R,u.end[S]=u.begin[S]+1,R<0||R>=T)throw Error(`slice index ${u.begin[S]} of dimension ${S} out of bounds.`)}else u.begin[S]=iA(u.begin[S],0,u.strides[S],T,C,w),u.end[S]=iA(u.end[S],1,u.strides[S],T,C,w);const I=u.strides[S]===1&&u.begin[S]===0&&u.end[S]===T;d=d&&I,l=l&&(S===0&&u.strides[S]===1||I)}else d=d&&u.strides[S]===1&&b,l=l&&(S===0&&u.strides[S]===1||b);let E,A=!1;if(u.beginValid&&u.endValid?(E=u.end[S]-u.begin[S],A=!0):x?(E=1,A=!0):b&&T>=0&&(u.strides[S]<0?E=-T:E=T,A=!0),A){let I;E===0||E<0!=u.strides[S]<0?I=0:I=Math.trunc(E/u.strides[S])+(E%u.strides[S]!==0?1:0),m.push(I)}else m.push(-1)}for(let S=0;S<u.finalShapeGatherIndices.length;++S){const x=u.finalShapeGatherIndices[S];x>=0?f.push(m[x]):x===Yy&&f.push(1)}return{finalShapeSparse:f.filter((S,x)=>u.finalShapeGatherIndices[x]!==Yy),finalShape:f,isIdentity:d,sliceDim0:l,isSimpleSlice:c,begin:u.begin,end:u.end,strides:u.strides}}function nJ(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let s=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let i=0;i<e.dims;i++)if(1<<i&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-i)+1+e.numAddAxisAfterEllipsis,t.dims);for(;s<o;s++)t.begin[s]=0,t.end[s]=0,t.strides[s]=1,t.beginMask|=1<<s,t.endMask|=1<<s,t.finalShapeGatherIndices.push(s),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[s]=i}else if(1<<i&e.newAxisMask)t.finalShapeGatherIndices.push(Yy),t.finalShapeGatherIndicesSparse.push(-1);else{if(s===t.begin.length)throw Error(`Index out of range using input dim ${s}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[s]=e.begin[i]),e.end!=null&&(t.end[s]=e.end[i]),t.strides[s]=e.strides[i],e.beginMask&1<<i&&(t.beginMask|=1<<s),e.endMask&1<<i&&(t.endMask|=1<<s),e.shrinkAxisMask&1<<i?(t.finalShapeGatherIndices.push(_Z),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<s):(t.finalShapeGatherIndices.push(s),t.finalShapeGatherIndicesSparse.push(i)),t.inputShapeGatherIndicesSparse[s]=i,s++}}function iA(e,t,s,i,o,y){if(o[t])return s>0?y[t]:y[t+1&1];{const r=e<0?i+e:e;return r<y[0]?y[0]:r>y[1]?y[1]:r}}const sJ=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:UT,computeFlatOffset:XT,computeOutShape:WT,getNormalizedAxes:eJ,isSliceContinous:HT,maskToAxes:tJ,parseSliceParams:Tg,sliceInfo:YT,startForAxis:yO,startIndicesWithElidedDims:vO,stopForAxis:SO,stopIndicesWithElidedDims:gO,stridesForAxis:xO,stridesWithElidedDims:dO},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iJ{static sgd(t){return new kT(t)}static momentum(t,s,i=!1){return new rO(t,s,i)}static rmsprop(t,s=.9,i=0,o=null,y=!1){return new aO(t,s,i,o,y)}static adam(t=.001,s=.9,i=.999,o=null){return new sO(t,s,i,o)}static adadelta(t=.001,s=.95,i=null){return new eO(t,s,i)}static adamax(t=.002,s=.9,i=.999,o=null,y=0){return new iO(t,s,i,o,y)}static adagrad(t,s=.1){return new nO(t,s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dl=iJ;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rJ=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e())();function TO(){return new Promise(e=>rJ(()=>e()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KT(e,t){const s=e[0].length;e.forEach((o,y)=>{q(o.length===s,()=>`Error in concat${s}D: rank of tensors[${y}] must be the same as the rank of the rest (${s})`)}),q(t>=0&&t<s,()=>`Error in concat${s}D: axis must be between 0 and ${s-1}.`);const i=e[0];e.forEach((o,y)=>{for(let r=0;r<s;r++)q(r===t||o[r]===i[r],()=>`Error in concat${s}D: Shape of tensors[${y}] (${o}) does not match the shape of the rest (${i}) along the non-concatenated axis ${y}.`)})}function gr(e,t){const s=e[0].slice();for(let i=1;i<e.length;i++)s[t]+=e[i][t];return s}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var zi;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(zi||(zi={}));function CO(e,t,s){let i=new Array;if(s==null&&t==null)return i;if(t==null)for(;i.length<e+s.length;)i.push(-1);else i=t.slice();if(s==null)return i;if(e+s.length!==i.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+s.length}, but shape.rank = ${i.length}`);for(let o=1;o<s.length;++o){const y=s[o],r=i[i.length-s.length+o],g=i[r];if(y>=0)if(g>=0){if(g!==y)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${o+e}] = ${y} but shape[${o+e}] = ${g}`)}else i[r]=y}return i}function wO(e){const t={FIRST_DIM_SIZE:zi.FIRST_DIM_SIZE,VALUE_ROWIDS:zi.VALUE_ROWIDS,ROW_LENGTHS:zi.ROW_LENGTHS,ROW_SPLITS:zi.ROW_SPLITS,ROW_LIMITS:zi.ROW_LIMITS,ROW_STARTS:zi.ROW_STARTS},s=[];for(const i of e)if(i in t)s.push(t[i]);else break;return s}function EO(e){return e.length===0?0:e[0]===zi.FIRST_DIM_SIZE?e.length-1:e.length}function bO(e,t){if(e==null||t==null)return;const s=e.length,i=t.length;if(s>=i)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${s} must be less than ragged tensor input flatValues.rank = ${i})`);for(let o=0;o<Math.min(s,i-1);++o){const y=e[o],r=t[o+1];if(y>=0&&r>=0&&y!==1&&y!==r)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${o-e.length}] = ${y} but ragged tensor input.flatValues.shape[${o-e.length}] = ${r}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jT=30;function Cg(e){return e<=jT?e:Ay(e,Math.floor(Math.sqrt(e)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZT(e,t,s){const i=s*(typeof e=="number"?e:e[0]),o=t*(typeof e=="number"?e:e[1]);return[i,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rf(e,t,s,i=!0){let o=[];if(i)o=o.concat(t.slice(0)),o.push(e[0]/s),o=o.concat(e.slice(1));else{o=o.concat(e[0]);const y=t.length;for(let r=0;r<y;++r)o=o.concat([e[r+1]/t[r],t[r]]);o=o.concat(e.slice(y+1))}return o}function Nf(e,t,s=!0){const i=[];if(s){i.push(t);for(let o=t+1;o<e;++o)o<=2*t?(i.push(o),i.push(o-(t+1))):i.push(o)}else{const o=[],y=[];for(let r=1;r<e;++r)r>=t*2+1||r%2===1?y.push(r):o.push(r);i.push(...o),i.push(0),i.push(...y)}return i}function Pf(e,t,s,i=!0){const o=[];i?o.push(e[0]/s):o.push(e[0]*s);for(let y=1;y<e.length;++y)y<=t.length?i?o.push(t[y-1]*e[y]):o.push(e[y]/t[y-1]):o.push(e[y]);return o}function JT(e,t){const s=[0];for(let i=0;i<t;++i)s.push(e[i][0]);return s}function QT(e,t,s){const i=e.slice(0,1);for(let o=0;o<s;++o)i.push(e[o+1]-t[o][0]-t[o][1]);return i}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wg=1.7580993408473768,Eg=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qT=.3275911,_T=.254829592,tC=-.284496736,eC=1.421413741,nC=-1.453152027,sC=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kr(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const s=new Float32Array(e.length*2);for(let i=0;i<s.length;i+=2)s[i]=e[i/2],s[i+1]=t[i/2];return s}function AO(e){const t=new Float32Array(e.length/2),s=new Float32Array(e.length/2);for(let i=0;i<e.length;i+=2)t[i/2]=e[i],s[i/2]=e[i+1];return{real:t,imag:s}}function IO(e){const t=Math.ceil(e.length/4),s=new Float32Array(t),i=new Float32Array(t);for(let o=0;o<e.length;o+=4)s[Math.floor(o/4)]=e[o],i[Math.floor(o/4)]=e[o+1];return{real:s,imag:i}}function RO(e){const t=Math.floor(e.length/4),s=new Float32Array(t),i=new Float32Array(t);for(let o=2;o<e.length;o+=4)s[Math.floor(o/4)]=e[o],i[Math.floor(o/4)]=e[o+1];return{real:s,imag:i}}function iC(e,t){const s=e[t*2],i=e[t*2+1];return{real:s,imag:i}}function NO(e,t,s,i){e[i*2]=t,e[i*2+1]=s}function PO(e,t){const s=new Float32Array(e/2),i=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const y=(t?2:-2)*Math.PI*(o/e);s[o]=Math.cos(y),i[o]=Math.sin(y)}return{real:s,imag:i}}function FO(e,t,s){const i=(s?2:-2)*Math.PI*(e/t),o=Math.cos(i),y=Math.sin(i);return{real:o,imag:y}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H0="->",aJ=/->/g,rA=",",aA="...";function rC(e,t){e=e.replace(/\s/g,"");const s=(e.length-e.replace(aJ,"").length)/H0.length;if(s<1)throw new Error("Equations without an arrow are not supported.");if(s>1)throw new Error(`Equation must contain exactly one arrow ("${H0}").`);const[i,o]=e.split(H0);q(i.indexOf(aA)===-1,()=>`The ellipsis notation ("${aA}") is not supported yet.`);const y=i.split(rA),r=y.length;if(t!==r)throw new Error(`Expected ${r} input tensors, received ${t}`);if(r>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const g=[];for(let u=0;u<o.length;++u){const d=o[u];if(!y.some(l=>l.indexOf(d)!==-1))throw new Error(`Output subscripts contain the label ${d} not present in the input subscripts.`);g.indexOf(d)===-1&&g.push(d)}for(let u=0;u<i.length;++u){const d=i[u];g.indexOf(d)===-1&&d!==rA&&g.push(d)}const n=new Array(y.length);for(let u=0;u<r;++u){if(new Set(y[u].split("")).size!==y[u].length)throw new Error(`Found duplicate axes in input component ${y[u]}. Support for duplicate axes in input is not implemented yet.`);n[u]=[];for(let d=0;d<y[u].length;++d)n[u].push(g.indexOf(y[u][d]))}const a=g.length,p=o.length,h=[];for(let u=p;u<a;++u)h.push(u);return{allDims:g,summedDims:h,idDims:n}}function aC(e,t){let s=new Array(e);s.fill(-1);for(let o=0;o<t.length;++o)s[t[o]]=o;const i=[];for(let o=0;o<e;++o)s[o]===-1&&i.push(o);return s=s.filter(o=>o!==-1),{permutationIndices:s,expandDims:i}}function oC(e,t,s){const i=new Array(e);for(let o=0;o<s.length;++o){const y=s[o].shape;for(let r=0;r<t[o].length;++r)i[t[o][r]]===void 0?i[t[o][r]]=y[r]:q(i[t[o][r]]===y[r],()=>`Expected dimension ${i[t[o][r]]} at axis ${r} of input shaped ${JSON.stringify(y)}, but got dimension ${y[r]}`)}}function lC(e,t){const s=e,i=[];let o=0;e.length===0&&s.push(-1),o=e.length+1;for(let r=0;r<o;++r)i.push([]);const y=[];for(let r=0;r<s.length;++r){const g=s[r],n=oJ(t,g);for(const a of n)y.indexOf(a)===-1&&(i[r].push(a),y.push(a))}return{path:s,steps:i}}function uC(e){return e.every((t,s)=>t===s)}function oJ(e,t){const s=[];for(let i=0;i<e.length;++i)(e[i].length===0||e[i].indexOf(t)!==-1||t===-1)&&s.push(i);return s}function hC(e,t,s=0){let i=[];if(typeof t=="number")q(e.shape[s]%t===0,()=>"Number of splits must evenly divide the axis."),i=new Array(t).fill(e.shape[s]/t);else{const o=t.reduce((r,g)=>(g===-1&&(r+=1),r),0);q(o<=1,()=>"There should be only one negative value in split array.");const y=t.indexOf(-1);if(y!==-1){const r=t.reduce((g,n)=>n>0?g+n:g);t[y]=e.shape[s]-r}q(e.shape[s]===t.reduce((r,g)=>r+g),()=>"The sum of sizes must match the size of the axis dimension."),i=t}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OO(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function DO(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function LO(e,t,s){return`indices(${e}, 0) is invalid: ${t} >= ${s}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MO(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function $O(e,t){return`size ${e} must be non-negative, not ${t}`}function BO(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function kO(e,t){const s=vt(e),i=vt(t);return`Input to reshape is a SparseTensor with ${s}
  dense values, but the requested shape requires a multiple of ${i}. inputShape=${e} outputShape= ${t}`}function zO(e,t){const s=vt(e),i=vt(t);return`Input to reshape is a tensor with ${s} dense values, but the requested shape has ${i}. inputShape=${e} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ky(){return"segment ids must be >= 0"}function VO(){return"segment ids are not increasing"}function GO(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function UO(e,t,s){return`Bad: indices[${e}] == ${t} out of range [0, ${s})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WO(e,t){let s=!1,i;for(e<=jT?(i=e,s=!0):i=Ay(e,Math.floor(Math.sqrt(e)));!s;)i>t||i===e?s=!0:i=Ay(e,i+1);return i}function HO(e,t,s){const i=[],o=e.length;for(let y=0;y<o;y++)y!==t?i.push(e[y]):i.push(s);return i}function cC(e,t,s,i){const o=t.shape.length,y=e.shape.length;if(i!==0&&(i<-o||i>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${i}`);if(i<0&&(i+=o),i>y)throw new Error(`batchDims (${i}) must be less than rank(x) (
    ${y}).`);if(s<i)throw new Error(`batchDims (${i}) must be less than or equal to axis (${s}).`);for(let h=0;h<i;++h)if(e.shape[h]!==t.shape[h])throw new Error(`x.shape[${h}]: ${e.shape[h]} should be equal to indices.shape[${h}]: ${t.shape[h]}.`);const r=e.shape[s],g=[];let n=1,a=1,p=1;for(let h=0;h<i;++h)g.push(e.shape[h]),n*=e.shape[h];for(let h=i;h<s;h++)g.push(e.shape[h]),a*=e.shape[h];for(let h=i;h<o;h++)g.push(t.shape[h]);for(let h=s+1;h<y;h++)g.push(e.shape[h]),p*=e.shape[h];return{batchSize:n,sliceSize:p,outerSize:a,dimSize:r,outputShape:g}}const lJ=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:cC,computeOutShape:HO,segOpComputeOptimalWindowSize:WO},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jr(e){try{return e.map(t=>Oa(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function XO(e){return e.map(t=>Ia(t))}const uJ=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:_T,ERF_A2:tC,ERF_A3:eC,ERF_A4:nC,ERF_A5:sC,ERF_P:qT,PARALLELIZE_THRESHOLD:jT,get RowPartitionType(){return zi},SELU_SCALE:Eg,SELU_SCALEALPHA:wg,applyActivation:yg,assertAndGetBroadcastShape:Qt,assertAxesAreInnerMostDims:Bn,assertParamsConsistent:KT,assignToTypedArray:NO,axesAreInnerMostDims:sT,calculateShapes:qo,checkEinsumDimSizes:oC,checkPadOnDimRoundingMode:os,combineLocations:SF,combineRaggedTensorToTensorShapes:CO,complexWithEvenIndex:IO,complexWithOddIndex:RO,computeConv2DInfo:Rn,computeConv3DInfo:Za,computeDefaultPad:QS,computeDilation2DInfo:Tf,computeOptimalWindowSize:Cg,computeOutAndReduceShapes:Nn,computeOutShape:gr,computePool2DInfo:Ri,computePool3DInfo:Qr,convertConv2DDataFormat:qr,decodeEinsumEquation:rC,eitherStridesOrDilationsAreOne:$n,expandShapeToKeepDim:_e,exponent:FO,exponents:PO,fromStringArrayToUint8:XO,fromUint8ToStringArray:jr,getAxesPermutation:We,getBroadcastDims:ou,getComplexWithIndex:iC,getEinsumComputePath:lC,getEinsumPermutation:aC,getFusedBiasGradient:xg,getFusedDyActivation:gg,getImageCenter:ZT,getInnerMostAxes:tn,getPermuted:Nf,getRaggedRank:EO,getReductionAxes:yn,getReshaped:Rf,getReshapedPermuted:Pf,getRowPartitionTypesHelper:wO,getSliceBeginCoords:JT,getSliceSize:QT,getSparseFillEmptyRowsIndicesDenseShapeMismatch:OO,getSparseFillEmptyRowsNegativeIndexErrorMessage:DO,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:LO,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:BO,getSparseReshapeInputOutputMismatchErrorMessage:zO,getSparseReshapeInputOutputMultipleErrorMessage:kO,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:MO,getSparseReshapeNegativeOutputDimErrorMessage:$O,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:UO,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Ky,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:VO,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:GO,getUndoAxesPermutation:Ja,isIdentityPermutation:uC,log:sU,mergeRealAndImagArrays:Kr,prepareAndValidate:GT,prepareSplitSize:hC,segment_util:lJ,shouldFuse:Sg,slice_util:sJ,splitRealAndImagArrays:AO,stridesOrDilationsArePositive:Mo,tupleValuesAreOne:La,upcastType:Os,validateDefaultValueShape:bO,validateInput:RT,validateUpdateShape:VF,warn:Vs},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */$Z();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YO={kernelName:Jm,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(e,Pu(Ft(s,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hJ={kernelName:Ec,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>{const i=be(Ft(s,"float32")),o=Kn(Dt(Wt(1),i));return Le(kt(e,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cJ={kernelName:bc,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>{const i=Kn(Dt(be(Ft(s,"float32")),1));return kt(e,i)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fJ={kernelName:Iu,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[s,i]=t,o=Qt(s.shape,i.shape);return{a:()=>{let g=e;const n=yn(s.shape,o);return n.length>0&&(g=Mt(g,n)),at(g,s.shape)},b:()=>{let g=e;const n=yn(i.shape,o);return n.length>0&&(g=Mt(g,n)),at(g,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dJ={kernelName:Qm,saveAllInputs:!0,gradFunc:(e,t)=>{const s={};return t.forEach((i,o)=>{s[o]=()=>e.clone()}),s}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pJ={kernelName:qm,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>he(s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mJ={kernelName:_m,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>he(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vJ={kernelName:Ac,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>kt(e,Kn(Dt(Wt(1),be(Ft(s,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gJ={kernelName:Ic,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>{const i=Kn(wt(Wt(1),be(Ft(s,"float32"))));return kt(e,i)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xJ={kernelName:Pc,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[s,i]=t,o=Qt(s.shape,i.shape);return{a:()=>{const g=wt(be(s),be(i));let n=rt(e,kt(i,g));const a=yn(s.shape,o);return a.length>0&&(n=Mt(n,a)),at(n,s.shape)},b:()=>{const g=wt(be(s),be(i));let n=Le(rt(e,kt(s,g)));const a=yn(i.shape,o);return a.length>0&&(n=Mt(n,a)),at(n,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yJ={kernelName:Rc,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>kt(e,wt(be(Ft(s,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SJ={kernelName:Nc,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>kt(e,Dt(Wt(1),be(Ft(s,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TJ(e,t,s,i,o,y){const r=_(e,"dy","avgPool3dGrad"),g=_(t,"input","avgPool3dGrad");let n=r,a=g,p=!1;g.rank===4&&(p=!0,n=at(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]]),a=at(g,[1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]])),q(n.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${n.rank}.`),q(a.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${a.rank}.`),os("avgPool3dGrad",o,y);const h={dy:n,input:a},u={filterSize:s,strides:i,pad:o,dimRoundingMode:y},d=it.runKernel(H2,h,u);return p?at(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const CJ=st({avgPool3dGrad_:TJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wJ={kernelName:ev,inputsToSave:["x"],gradFunc:(e,t,s)=>{const[i]=t,{filterSize:o,strides:y,pad:r,dimRoundingMode:g}=s;return{x:()=>CJ(e,i,o,y,r,g)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EJ(e,t,s,i,o){const y=_(e,"dy","avgPoolGrad"),r=_(t,"input","avgPoolGrad");q(r.rank===y.rank,()=>`Rank of input (${r.rank}) does not match rank of dy (${y.rank})`);let g=r,n=y,a=!1;r.rank===3&&(a=!0,g=at(r,[1,r.shape[0],r.shape[1],r.shape[2]]),n=at(y,[1,y.shape[0],y.shape[1],y.shape[2]])),q(n.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${n.rank}.`),q(g.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${g.rank}.`);const p={dy:n,input:g},h={filterSize:s,strides:i,pad:o},u=it.runKernel(W2,p,h);return a?at(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const bJ=st({avgPoolGrad_:EJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AJ={kernelName:tv,inputsToSave:["x"],gradFunc:(e,t,s)=>{const[i]=t,{filterSize:o,strides:y,pad:r}=s;return{x:()=>bJ(e,i,o,y,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IJ={kernelName:nv,inputsToSave:["a","b"],gradFunc:(e,t,s)=>{const[i,o]=t,{transposeA:y,transposeB:r}=s;return!y&&!r?{a:()=>re(e,o,!1,!0),b:()=>re(i,e,!0,!1)}:!y&&r?{a:()=>re(e,o,!1,!1),b:()=>re(e,i,!0,!1)}:y&&!r?{a:()=>re(o,e,!1,!0),b:()=>re(i,e,!1,!1)}:{a:()=>re(o,e,!0,!0),b:()=>re(e,i,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RJ={kernelName:sv,gradFunc:(e,t,s)=>{const{blockShape:i,crops:o}=s;return{x:()=>ug(e,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NJ={kernelName:_G,gradFunc:(e,t,s)=>{const i=s,o=i.inputShape,y=i.shape,r=Array.from(y);for(let n=o.length-1;n>=0;n--)if(o[n]===y[n])r[n]=1;else if(o[n]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${y}].`);const g=[];for(let n=0;n<r.length;n++)r[n]>1&&g.push(n);return{x:()=>Mt(e,g,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PJ={kernelName:Fc,gradFunc:e=>({x:()=>e.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FJ={kernelName:Oc,gradFunc:e=>({x:()=>he(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OJ={kernelName:Dc,inputsToSave:["x"],gradFunc:(e,t,s)=>{const[i]=t,{clipValueMin:o,clipValueMax:y}=s;return{x:()=>Hn(Sr(Qa(i,o),jo(i,y)),e,he(e))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DJ={kernelName:rv,inputsToSave:["x"],gradFunc:YO.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LJ={kernelName:av,saveAllInputs:!0,gradFunc:(e,t,s)=>{const i=t.map(n=>n.shape),{axis:o}=s,y=se(o,t[0].shape)[0],r=i.map(n=>n[y]);return Ps(e,r,y).map(n=>()=>n)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MJ={kernelName:ov,inputsToSave:["x","filter"],gradFunc:(e,t,s)=>{const[i,o]=t,{dilations:y,strides:r,pad:g,dataFormat:n}=s;return q(La(y),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${y}'`),{x:()=>_S(i.shape,e,o,r,g,n),filter:()=>DT(i,e,o.shape,r,g,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $J={kernelName:lv,inputsToSave:["dy","filter"],gradFunc:(e,t,s)=>{const[i,o]=t,{strides:y,pad:r,dataFormat:g,dimRoundingMode:n}=s;return{dy:()=>Ma(e,o,y,r,g,1,n),filter:()=>DT(e,i,o.shape,y,r,g,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BJ(e,t,s,i,o){let y=e;e.rank===4&&(y=at(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let r=t;r.rank===4&&(r=at(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),q(y.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${y.shape}.`),q(r.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${r.shape}.`),q(s.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${s}.`),q(y.shape[4]===s[3],()=>`Error in conv3dDerFilter: depth of input ${y.shape[4]}) must match input depth in filter (${s[3]}.`),q(r.shape[4]===s[4],()=>`Error in conv3dDerFilter: depth of dy (${r.shape[4]}) must match output depth for filter (${s[4]}).`);const g={x:y,dy:r},n={strides:i,pad:o,filterShape:s};return it.runKernel(Z2,g,n)}const kJ=st({conv3DBackpropFilter_:BJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zJ={kernelName:uv,inputsToSave:["x","filter"],gradFunc:(e,t,s)=>{const{dilations:i,strides:o,pad:y}=s;q(La(i),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const[r,g]=t;return{x:()=>dF(r.shape,e,g,o,y),filter:()=>kJ(r,e,g.shape,o,y)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VJ={kernelName:Lc,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(Le(wT(Ft(s,"float32"))),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GJ={kernelName:Mc,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(ET(Ft(s,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UJ={kernelName:hv,inputsToSave:["x"],gradFunc:(e,t,s)=>{const[i]=t,{axis:o,exclusive:y,reverse:r}=s;return{x:()=>{const g=We([o],i.rank);let n=nT(e,o,y,!r);return g!=null&&(n=ue(n,g)),n}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WJ={kernelName:cv,inputsToSave:["x","filter"],gradFunc:(e,t,s)=>{const{dilations:i,strides:o,pad:y,dimRoundingMode:r}=s,g=i??[1,1];q(La(g),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${g}'`);const[n,a]=t;return q(n.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${n.rank}.`),q(a.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${a.rank}.`),q(n.shape[3]===a.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${n.shape[3]}) must match the inChannels dimension in filter ${a.shape[2]}.`),q($n(o,g),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${g}'.`),os("depthwiseConv2d",y,r),{x:()=>ZF(n.shape,e,a,o,y,g,r),filter:()=>jF(n,e,a.shape,o,y,g,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HJ={kernelName:fv,inputsToSave:["x","filter"],gradFunc:(e,t,s)=>{const[i,o]=t,y={x:i,filter:o,dy:e},r={x:i,filter:o,dy:e};return{x:()=>it.runKernel(Iy,y,s),filter:()=>it.runKernel(Ry,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XJ={kernelName:Bc,outputsToSave:[!0],gradFunc:(e,t)=>{const[s]=t,i={dy:e,y:s};return{x:()=>it.runKernel(rS,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YJ={kernelName:kc,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t,i=rt(Ks(Le(be(s))),2/Math.sqrt(Math.PI));return{x:()=>rt(e,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KJ={kernelName:zc,outputsToSave:[!0],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jJ={kernelName:pv,inputsToSave:["input"],gradFunc:(e,t)=>{const[s]=t;return{input:()=>at(e,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZJ={kernelName:Vc,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(e,Ks(s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JJ={kernelName:Gc,gradFunc:e=>({x:()=>he(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QJ={kernelName:Uc,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[s,i]=t,o=Qt(s.shape,i.shape);return{a:()=>{const g=kt(e,Ft(i,"float32")),n=yn(s.shape,o);return n.length>0?at(Mt(g,n),s.shape):g},b:()=>{let g=rt(e,Ft(s,"float32"));const n=yn(i.shape,o);n.length>0&&(g=at(Mt(g,n),i.shape));const a=be(i);return Le(kt(g,Ft(a,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qJ={kernelName:mv,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,s)=>{const{varianceEpsilon:i}=s,[o,y,r,g]=t,n=g??Wt(1),a=yn(y.shape,o.shape),p=[];if(y.rank===1){for(let x=0;x<o.shape.length-1;++x)p.push(o.shape[x]);p.push(1)}const h=Dt(o,y),u=rt(e,n),d=ST(wt(r,Wt(i))),l=rt(rt(rt(d,d),d),Wt(-.5));return{x:()=>y.rank===1?at(rt(rt(e,mi(at(d,[1,1,1,y.shape[0]]),p)),n),o.shape):at(rt(rt(e,d),n),o.shape),mean:()=>{let x=rt(rt(d,Wt(-1)),u);return y.rank===1&&(x=Mt(x,a)),at(x,y.shape)},variance:()=>{let x=rt(rt(l,h),u);return y.rank===1&&(x=Mt(x,a)),at(x,y.shape)},scale:()=>{const x=rt(h,d);let T=rt(e,x);return y.rank===1&&(T=Mt(T,a)),at(T,y.shape)},offset:()=>{let x=e;return y.rank===1&&(x=Mt(x,a)),at(x,y.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _J={kernelName:vv,inputsToSave:["x","indices"],gradFunc:(e,t,s)=>{const[i,o]=t,{axis:y}=s,r=se(y,i.shape)[0];return{x:()=>{const n=i.shape,a=o.size,p=n.slice(0,r),h=p.length,u=n.slice(y,n.length).slice(1),d=u.length,l=oA(0,h),c=oA(h+1,h+1+d),m=lA([p,[a],u]),f=at(e,m),v=at(o,[a]),S=lA([[h],l,c]),x=ue(f,S);let T=PT(x,v,i.shape[r]);const C=Ja(S);return T=ue(T,C),T},indices:()=>o}}};function oA(e,t){const s=[];for(let i=e;i<t;++i)s.push(i);return s}function lA(e){const t=[];for(let s=0;s<e.length;++s)for(let i=0;i<e[s].length;++i)t.push(e[s][i]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tQ={kernelName:Wc,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[s,i]=t;return{a:()=>he(s),b:()=>he(i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eQ={kernelName:Hc,gradFunc:e=>({x:()=>Ft(e,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nQ={kernelName:Xc,gradFunc:e=>({x:()=>he(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sQ={kernelName:Yc,gradFunc:e=>({x:()=>he(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iQ={kernelName:Kc,gradFunc:e=>({x:()=>he(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rQ={kernelName:xv,inputsToSave:["x"],gradFunc:(e,t,s)=>{const[i]=t,{alpha:o}=s,y=ks(i,0);return{x:()=>Hn(y,e,rt(e,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aQ={kernelName:Zc,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>kt(e,wt(s,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oQ={kernelName:jc,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>kt(e,Ft(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lQ={kernelName:eU,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,s)=>{const[i]=t,{axis:o}=s;return{logits:()=>{const r=Ks(i);return Dt(e,rt(Mt(e,o,!0),r))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uQ(e,t,s,i=5,o=1,y=1,r=.5){const g={x:e,y:t,dy:s},n={depthRadius:i,bias:o,alpha:y,beta:r};return it.runKernel(dS,g,n)}const hQ=st({localResponseNormalizationBackprop_:uQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cQ={kernelName:Ev,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,s)=>{const[i,o]=t,{depthRadius:y,bias:r,alpha:g,beta:n}=s;return{x:()=>hQ(i,o,e,y,r,g,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KO(e,t,s,i){return t.rank<s.rank&&(t=at(t,_e(t.shape,i))),e.rank<s.rank&&(e=at(e,_e(e.shape,i))),{x:()=>rt(e,Ft(Xi(s,t),e.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uA={kernelName:bv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,s)=>{const i=s,{reductionIndices:o}=i,y=t[0],r=t[1],g=se(o,y.shape),n=KO(e,r,y,g);return{x:()=>n.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fQ={kernelName:Jc,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[s,i]=t;return{a:()=>rt(e,Ft(Qa(s,i),"float32")),b:()=>rt(e,Ft(nc(s,i),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dQ(e,t,s,i,o,y,r){const g=_(e,"dy","maxPool3dGrad"),n=_(t,"input","maxPool3dGrad"),a=_(s,"output","maxPool3dGrad");let p=g,h=n,u=a,d=!1;n.rank===4&&(d=!0,p=at(g,[1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]]),h=at(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]),u=at(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),q(p.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${p.rank}.`),q(h.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),q(u.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${u.rank}.`),os("maxPool3dGrad",y,r);const l={dy:p,input:h,output:u},c={filterSize:i,strides:o,pad:y,dimRoundingMode:r},m=it.runKernel(mS,l,c);return d?at(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const pQ=st({maxPool3dGrad_:dQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mQ={kernelName:Iv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,s)=>{const[i,o]=t,{filterSize:y,strides:r,pad:g,dimRoundingMode:n}=s;return{x:()=>pQ(e,i,o,y,r,g,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vQ(e,t,s,i,o,y,r){const g=_(e,"dy","maxPoolGrad"),n=_(t,"input","maxPoolGrad"),a=_(s,"output","maxPoolGrad");q(n.rank===g.rank,()=>`Rank of input (${n.rank}) does not match rank of dy (${g.rank})`),q(g.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${g.rank}.`),q(n.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${n.rank}.`),os("maxPoolGrad",y,r);const p={dy:g,input:n,output:a},h={filterSize:i,strides:o,pad:y,dimRoundingMode:r};return it.runKernel(pS,p,h)}const gQ=st({maxPoolGrad_:vQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xQ={kernelName:Av,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,s)=>{const[i,o]=t,{filterSize:y,strides:r,pad:g}=s;return{x:()=>gQ(e,i,o,y,r,g)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yQ={kernelName:Rv,inputsToSave:["x"],gradFunc:(e,t,s)=>{const[i]=t,{axis:o}=s,y=se(o,i.shape),g=Nn(i.shape,y)[1],n=vt(g);return{x:()=>{const p=i.shape.slice();y.forEach(d=>{p[d]=1});const h=at(e,p);return kt(rt(h,Us(i.shape,"float32")),n)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQ={kernelName:Nv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,s)=>{const i=s,{axis:o}=i,[y,r]=t,g=se(o,y.shape),n=KO(e,r,y,g);return{x:()=>n.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TQ={kernelName:Qc,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[s,i]=t;return{a:()=>rt(e,Ft(jo(s,i),"float32")),b:()=>rt(e,Ft(ks(s,i),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CQ={kernelName:Pv,inputsToSave:["x"],gradFunc:(e,t,s)=>{const i=t[0],{paddings:o}=s,y=o.map(r=>r[0]);return{x:()=>le(e,y,i.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wQ={kernelName:qc,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[s,i]=t,o=Qt(s.shape,i.shape);return{a:()=>{const g=yn(s.shape,o);return g.length>0?at(Mt(e,g),s.shape):e},b:()=>{const g=rt(e,Le(Af(kt(s,i)))),n=yn(i.shape,o);return n.length>0?at(Mt(g,n),i.shape):g}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EQ={kernelName:_c,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[s,i]=t,o=Qt(s.shape,i.shape);return{a:()=>{const g=rt(e,Ft(i,"float32")),n=yn(s.shape,o);return n.length>0?at(Mt(g,n),s.shape):g},b:()=>{const g=rt(e,Ft(s,"float32")),n=yn(i.shape,o);return n.length>0?at(Mt(g,n),i.shape):g}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bQ={kernelName:Fv,gradFunc:e=>({x:()=>Le(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AQ={kernelName:Lv,inputsToSave:["indices"],gradFunc:(e,t)=>{const s=t[0];return{indices:()=>fn(s.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IQ={kernelName:Dv,gradFunc:e=>({x:()=>he(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RQ={kernelName:Mv,saveAllInputs:!0,gradFunc:(e,t,s)=>{const{axis:i}=s;return Ii(e,i).map(y=>()=>y)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hA={kernelName:$v,inputsToSave:["x"],gradFunc:(e,t,s)=>{const i=t[0],{paddings:o}=s,y=o.map(r=>r[0]);return{x:()=>le(e,y,i.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NQ={kernelName:tf,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[s,i,o]=t,y=s,r=i,g=Qt(y.shape,r.shape);return{a:()=>{const p=Ft(r,"float32");let h=rt(e,rt(p,$a(y,Dt(p,Wt(1)))));const u=yn(y.shape,g);return u.length>0&&(h=Mt(h,u)),at(h,y.shape)},b:()=>{const p=ks(y,0),h=Hn(p,js(y),he(y));let u=rt(e,rt(o,h));const d=yn(r.shape,g);return d.length>0&&(u=Mt(u,d)),at(u,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PQ={kernelName:Bv,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[s,i]=t,o=ks(s,0);return{x:()=>Hn(o,e,rt(e,i)),alpha:()=>{let y=Hn(o,he(e),rt(e,s));const r=yn(i.shape,e.shape);return r.length>0&&(y=Mt(y,r)),at(y,i.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FQ(e,t,s){const i=e.shape.slice();i[s]=1;const o=at(t,i),y=jp(e,s,!0,!1),r=jp(e,s,!0,!0),g=rt(y,r);return rt(o,g)}function OQ(e,t,s){const i=e.shape.length,o=i-s.length,y=We(s,i);let r=e;y!=null&&(r=ue(e,y));const g=r.shape.slice(),a=g.splice(i-s.length,s.length).reduce((u,d)=>u*d,1);g.push(a);const p=r.reshape(g);let h=FQ(p,t,o);if(h=h.reshape(r.shape),y!=null){const u=Ja(y);h=ue(h,u)}return h}const DQ={kernelName:kv,inputsToSave:["x"],gradFunc:(e,t,s)=>{const[i]=t,{axis:o}=s;let y=[];return o==null?y=i.shape.map((r,g)=>g):typeof o=="number"?y=[o]:y=o,{x:()=>OQ(i,e,y)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LQ={kernelName:$c,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[s,i]=t,o=Qt(s.shape,i.shape);return{a:()=>{const g=kt(e,Ft(i,"float32")),n=yn(s.shape,o);return n.length>0?at(Mt(g,n),s.shape):g},b:()=>{let g=rt(e,Ft(s,"float32"));const n=yn(i.shape,o);n.length>0&&(g=at(Mt(g,n),i.shape));const a=be(i);return Le(kt(g,Ft(a,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MQ={kernelName:ef,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>kt(e,Le(be(s)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Q={kernelName:sf,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t,i=rt(jo(s,6),Pu(s));return{x:()=>rt(e,Ft(i,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BQ={kernelName:nf,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(e,Ft(Pu(s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kQ={kernelName:zv,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>at(e,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zQ={kernelName:Gv,inputsToSave:["images"],gradFunc:(e,t,s)=>{const[i]=t,o={dy:e,images:i};return{images:()=>it.runKernel(IS,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VQ={kernelName:Vv,inputsToSave:["images"],gradFunc:(e,t,s)=>{const[i]=t,o={dy:e,images:i};return{images:()=>it.runKernel(AS,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GQ={kernelName:Uv,gradFunc:(e,t,s)=>{const{dims:i}=s,o=se(i,e.shape);return{x:()=>Ai(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UQ={kernelName:rf,gradFunc:e=>({x:()=>he(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WQ={kernelName:af,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>Le(kt(e,rt($a(s,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HQ={kernelName:Wv,inputsToSave:["condition"],gradFunc:(e,t)=>{const[s]=t;return{condition:()=>Ft(he(s),"float32"),t:()=>rt(e,Ft(s,e.dtype)),e:()=>rt(e,Ft(ag(s),e.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XQ={kernelName:of,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>{const i=ks(s,Wt(0)),o=Wt(wg),y=Wt(Eg),r=rt(e,y),g=rt(rt(e,o),Ks(Ft(s,"float32")));return Hn(i,r,g)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YQ={kernelName:cf,outputsToSave:[!0],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(e,rt(s,Dt(Wt(1),s)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KQ={kernelName:hf,gradFunc:e=>({x:()=>he(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jQ={kernelName:lf,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(ng(Ft(s,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZQ={kernelName:uf,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(eT(Ft(s,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JQ={kernelName:Hv,inputsToSave:["x"],gradFunc:(e,t,s)=>{const[i]=t,{begin:o,size:y}=s,r=i.shape,[g,n]=Tg(i,o,y),a=[];for(let p=0;p<e.rank;p++)a.push([g[p],r[p]-g[p]-n[p]]);return{x:()=>qa(e,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QQ={kernelName:jv,outputsToSave:[!0],gradFunc:(e,t,s)=>{const[i]=t,{dim:o}=s,y=!0,r=rt(e,i);return{logits:()=>Dt(r,rt(Mt(r,[o],y),i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qQ={kernelName:ff,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(e,vr(s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cA={kernelName:Yv,gradFunc:(e,t,s)=>{const{blockShape:i,paddings:o}=s;return{x:()=>eg(e,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fA={kernelName:Kv,gradFunc:(e,t,s)=>{const{axis:i}=s;return{x:()=>on(e,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Q={kernelName:df,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>kt(e,rt(Kn(Ft(s,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tq={kernelName:$S,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(e,rt(Ft(s,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eq={kernelName:pf,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[s,i]=t,o=Wt(2);return{a:()=>rt(e,rt(o,Dt(s,i))),b:()=>rt(e,rt(o,Dt(i,s)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nq={kernelName:yf,gradFunc:e=>({x:()=>he(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sq={kernelName:mf,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[s,i]=t,o=Qt(s.shape,i.shape);return{a:()=>{let g=e;const n=yn(s.shape,o);return n.length>0&&(g=Mt(g,n)),at(g,s.shape)},b:()=>{let g=e;const n=yn(i.shape,o);return n.length>0&&(g=Mt(g,n)),at(Le(g),i.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iq={kernelName:Xv,inputsToSave:["x"],gradFunc:(e,t,s)=>{const[i]=t,o=i.shape.slice(),{axis:y}=s;se(y,i.shape).forEach(a=>{o[a]=1});const g=at(e,o),n=rt(g,Us(i.shape,"float32"));return{x:()=>n}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rq={kernelName:vf,inputsToSave:["x"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>kt(e,be(ng(s)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aq={kernelName:gf,outputsToSave:[!0],gradFunc:(e,t)=>{const[s]=t;return{x:()=>rt(Dt(Wt(1),be(s)),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oq={kernelName:xf,inputsToSave:["x"],gradFunc:(e,t,s)=>{const[i]=t,{reps:o}=s;return{x:()=>{let r=he(i);if(i.rank===1)for(let g=0;g<o[0];++g)r=wt(r,le(e,[g*i.shape[0]],[i.shape[0]]));else if(i.rank===2)for(let g=0;g<o[0];++g)for(let n=0;n<o[1];++n)r=wt(r,le(e,[g*i.shape[0],n*i.shape[1]],[i.shape[0],i.shape[1]]));else if(i.rank===3)for(let g=0;g<o[0];++g)for(let n=0;n<o[1];++n)for(let a=0;a<o[2];++a)r=wt(r,le(e,[g*i.shape[0],n*i.shape[1],a*i.shape[2]],[i.shape[0],i.shape[1],i.shape[2]]));else if(i.rank===4)for(let g=0;g<o[0];++g)for(let n=0;n<o[1];++n)for(let a=0;a<o[2];++a)for(let p=0;p<o[3];++p)r=wt(r,le(e,[g*i.shape[0],n*i.shape[1],a*i.shape[2],p*i.shape[3]],[i.shape[0],i.shape[1],i.shape[2],i.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${i.rank} tensors yet.`);return r}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lq={kernelName:Gl,gradFunc:(e,t,s)=>{const i=s,{perm:o}=i,y=Ja(o);return{x:()=>ue(e,y)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uq={kernelName:Jv,gradFunc:(e,t,s)=>{const i=s,{axis:o}=i;return{value:()=>Js(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hq={kernelName:Qv,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[s]=t;return{x:()=>cq(e,s)}}};function cq(e,t){const s=_r(t,he(t)),i=If(e,s);let o=Qa(t,Wt(0,"int32"));const y=i.rank-o.rank;for(let g=0;g<y;++g)o=ns(o,g+1);o=Sr(o,Us(i.shape,"bool"));const r=he(i);return Hn(o,i,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fq={kernelName:qv,gradFunc:e=>({x:()=>he(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dq=[YO,hJ,cJ,fJ,dJ,pJ,mJ,vJ,gJ,xJ,yJ,SJ,wJ,AJ,IJ,RJ,NJ,PJ,FJ,OJ,DJ,LJ,$J,MJ,zJ,VJ,GJ,UJ,WJ,HJ,LQ,XJ,YJ,KJ,jJ,ZJ,QJ,JJ,qJ,_J,tQ,eQ,nQ,sQ,iQ,rQ,aQ,oQ,lQ,cQ,uA,uA,fQ,mQ,xQ,yQ,SQ,TQ,CQ,wQ,EQ,bQ,AQ,IQ,RQ,hA,hA,NQ,PQ,DQ,MQ,$Q,BQ,kQ,zQ,VQ,GQ,UQ,WQ,HQ,XQ,YQ,KQ,jQ,ZQ,JQ,QQ,qQ,cA,cA,fA,fA,_Q,eq,tq,nq,sq,iq,rq,aq,oq,lq,uq,hq,fq];for(const e of dq)iU(e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.abs=function(){return this.throwIfDisposed(),un(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.acos=function(){return this.throwIfDisposed(),j3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.acosh=function(){return this.throwIfDisposed(),Z3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.add=function(e){return this.throwIfDisposed(),wt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.all=function(e,t){return this.throwIfDisposed(),JS(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.any=function(e,t){return this.throwIfDisposed(),Kp(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.argMax=function(e){return this.throwIfDisposed(),ru(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.argMin=function(e){return this.throwIfDisposed(),J3(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.asScalar=function(){return this.throwIfDisposed(),q(this.size===1,()=>"The array must have only 1 element."),at(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.asType=function(e){return this.throwIfDisposed(),Ft(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.as1D=function(){return this.throwIfDisposed(),at(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.as2D=function(e,t){return this.throwIfDisposed(),at(this,[e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.as3D=function(e,t,s){return this.throwIfDisposed(),at(this,[e,t,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.as4D=function(e,t,s,i){return this.throwIfDisposed(),at(this,[e,t,s,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.as5D=function(e,t,s,i,o){return this.throwIfDisposed(),at(this,[e,t,s,i,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.asin=function(){return this.throwIfDisposed(),Q3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.asinh=function(){return this.throwIfDisposed(),q3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.atan=function(){return this.throwIfDisposed(),_3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.atan2=function(e){return this.throwIfDisposed(),tF(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.atanh=function(){return this.throwIfDisposed(),eF(this)};gt().prototype.avgPool=function(e,t,s,i){return this.throwIfDisposed(),tg(this,e,t,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),eg(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.batchNorm=function(e,t,s,i,o){return this.throwIfDisposed(),Cf(this,e,t,s,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Hl(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.cast=function(e){return this.throwIfDisposed(),Ft(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.ceil=function(){return this.throwIfDisposed(),oF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Ds(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof $e&&(e=[e]),on([this,...e],t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.conv1d=function(e,t,s,i,o,y){return this.throwIfDisposed(),qS(this,e,t,s,i,o,y)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.conv2dTranspose=function(e,t,s,i,o){return this.throwIfDisposed(),tT(this,e,t,s,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.conv2d=function(e,t,s,i,o,y){return this.throwIfDisposed(),Ma(this,e,t,s,i,o,y)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.cos=function(){return this.throwIfDisposed(),ng(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.cosh=function(){return this.throwIfDisposed(),eT(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.cumprod=function(e,t,s){return this.throwIfDisposed(),jp(this,e,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.cumsum=function(e,t,s){return this.throwIfDisposed(),nT(this,e,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),mF(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.depthwiseConv2d=function(e,t,s,i,o,y){return this.throwIfDisposed(),wf(this,e,t,s,i,o,y)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.dilation2d=function(e,t,s,i,o){return this.throwIfDisposed(),vF(this,e,t,s,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.divNoNan=function(e){return this.throwIfDisposed(),gF(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.div=function(e){return this.throwIfDisposed(),kt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.dot=function(e){return this.throwIfDisposed(),xF(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.elu=function(){return this.throwIfDisposed(),Ef(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.equal=function(e){return this.throwIfDisposed(),Xi(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.erf=function(){return this.throwIfDisposed(),yF(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),CF(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.exp=function(){return this.throwIfDisposed(),Ks(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.expandDims=function(e){return this.throwIfDisposed(),ns(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.expm1=function(){return this.throwIfDisposed(),wF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.fft=function(){return this.throwIfDisposed(),mg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.flatten=function(){return this.throwIfDisposed(),at(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.floor=function(){return this.throwIfDisposed(),Af(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.floorDiv=function(e){return this.throwIfDisposed(),ZS(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.gather=function(e,t,s){return this.throwIfDisposed(),If(this,e,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Qa(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.greater=function(e){return this.throwIfDisposed(),ks(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.ifft=function(){return this.throwIfDisposed(),rc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.irfft=function(){return this.throwIfDisposed(),AT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.isFinite=function(){return this.throwIfDisposed(),EF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.isInf=function(){return this.throwIfDisposed(),bF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.isNaN=function(){return this.throwIfDisposed(),AF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.leakyRelu=function(e){return this.throwIfDisposed(),ig(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.lessEqual=function(e){return this.throwIfDisposed(),jo(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.less=function(e){return this.throwIfDisposed(),nc(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.localResponseNormalization=function(e,t,s,i){return this.throwIfDisposed(),IF(this,e,t,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.logSigmoid=function(){return this.throwIfDisposed(),RF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.logSoftmax=function(e){return this.throwIfDisposed(),rT(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),aT(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.log=function(){return this.throwIfDisposed(),js(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.log1p=function(){return this.throwIfDisposed(),rg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Sr(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.logicalNot=function(){return this.throwIfDisposed(),ag(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.logicalOr=function(e){return this.throwIfDisposed(),oT(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.logicalXor=function(e){return this.throwIfDisposed(),NF(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.matMul=function(e,t,s){return this.throwIfDisposed(),re(this,e,t,s)};gt().prototype.maxPool=function(e,t,s,i){return this.throwIfDisposed(),og(this,e,t,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.max=function(e,t){return this.throwIfDisposed(),Ti(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.maximum=function(e){return this.throwIfDisposed(),_r(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.mean=function(e,t){return this.throwIfDisposed(),Ye(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.min=function(e,t){return this.throwIfDisposed(),ec(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.minimum=function(e){return this.throwIfDisposed(),$o(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),FF(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.mod=function(e){return this.throwIfDisposed(),OF(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.mul=function(e){return this.throwIfDisposed(),rt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.neg=function(){return this.throwIfDisposed(),Le(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.norm=function(e,t,s){return this.throwIfDisposed(),bf(this,e,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.notEqual=function(e){return this.throwIfDisposed(),lu(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.oneHot=function(e,t=1,s=0){return this.throwIfDisposed(),uT(this,e,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.onesLike=function(){return this.throwIfDisposed(),Zs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.pad=function(e,t){return this.throwIfDisposed(),qa(this,e,t)};gt().prototype.pool=function(e,t,s,i,o,y){return this.throwIfDisposed(),DF(this,e,t,s,i,o,y)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.pow=function(e){return this.throwIfDisposed(),$a(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.prelu=function(e){return this.throwIfDisposed(),hg(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.prod=function(e,t){return this.throwIfDisposed(),LF(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.reciprocal=function(){return this.throwIfDisposed(),$F(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.relu=function(){return this.throwIfDisposed(),Cr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.relu6=function(){return this.throwIfDisposed(),xT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.reshapeAs=function(e){return this.throwIfDisposed(),at(this,e.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.reshape=function(e){return this.throwIfDisposed(),at(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.resizeBilinear=function(e,t,s){return this.throwIfDisposed(),qF(this,e,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.resizeNearestNeighbor=function(e,t,s){return this.throwIfDisposed(),_F(this,e,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.reverse=function(e){return this.throwIfDisposed(),Ai(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.rfft=function(){return this.throwIfDisposed(),vg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.round=function(){return this.throwIfDisposed(),yT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.rsqrt=function(){return this.throwIfDisposed(),ST(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.selu=function(){return this.throwIfDisposed(),TT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.separableConv2d=function(e,t,s,i,o,y){return this.throwIfDisposed(),CT(this,e,t,s,i,o,y)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.sigmoid=function(){return this.throwIfDisposed(),vr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.sign=function(){return this.throwIfDisposed(),BF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.sin=function(){return this.throwIfDisposed(),wT(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.sinh=function(){return this.throwIfDisposed(),ET(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.slice=function(e,t){return this.throwIfDisposed(),le(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.softmax=function(e){return this.throwIfDisposed(),pg(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.softplus=function(){return this.throwIfDisposed(),Nu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),ug(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.split=function(e,t){return this.throwIfDisposed(),Ps(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.sqrt=function(){return this.throwIfDisposed(),Kn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.square=function(){return this.throwIfDisposed(),be(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.squaredDifference=function(e){return this.throwIfDisposed(),IT(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.squeeze=function(e){return this.throwIfDisposed(),Qo(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.stack=function(e,t){this.throwIfDisposed();const s=e instanceof $e?[this,e]:[this,...e];return Js(s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.step=function(e){return this.throwIfDisposed(),Pu(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.stridedSlice=function(e,t,s,i,o,y,r,g){return this.throwIfDisposed(),kF(this,e,t,s,i,o,y,r,g)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.sub=function(e){return this.throwIfDisposed(),Dt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.sum=function(e,t){return this.throwIfDisposed(),Mt(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.tan=function(){return this.throwIfDisposed(),zF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.tanh=function(){return this.throwIfDisposed(),au(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.tile=function(e){return this.throwIfDisposed(),mi(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.toBool=function(){return this.throwIfDisposed(),Ft(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.toFloat=function(){return this.throwIfDisposed(),Ft(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.toInt=function(){return this.throwIfDisposed(),Ft(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.topk=function(e,t){return this.throwIfDisposed(),GF(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.transpose=function(e){return this.throwIfDisposed(),ue(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.unique=function(e){return this.throwIfDisposed(),UF(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),PT(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.unstack=function(e){return this.throwIfDisposed(),Ii(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.where=function(e,t){return this.throwIfDisposed(),Hn(e,this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gt().prototype.zerosLike=function(){return this.throwIfDisposed(),he(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ir extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ir.prototype)}}class vi extends Error{constructor(t){super(t),Object.setPrototypeOf(this,vi.prototype)}}class ot extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ot.prototype)}}class qt extends Error{constructor(t){super(t),Object.setPrototypeOf(this,qt.prototype)}}class fC extends Error{constructor(t){super(t),Object.setPrototypeOf(this,fC.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class jO{constructor(t){this.maxEntries=t||100,this.cache=new Map}get(t){let s;return this.cache.has(t)&&(s=this.cache.get(t),this.cache.delete(t),this.cache.set(t,s)),s}put(t,s){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxEntries){const i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(t,s)}getMaxEntries(){return this.maxEntries}setMaxEntries(t){if(t<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${t}.`);if(this.maxEntries>t)for(let s=0;s<this.maxEntries-t;s++){const i=this.cache.keys().next().value;this.cache.delete(i)}this.maxEntries=t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ko(e,t){if(Array.isArray(e)){let s=[];for(let i=0;i<t;i++)s=s.concat(e);return s}else{const s=new Array(t);return s.fill(e),s}}function rr(e,t){if(!e)throw new fC(t)}function dA(e,t){let s=0;for(const i of e)i===t&&s++;return s}function fs(e){return e.length===1?e[0]:e}function Pe(e){return Array.isArray(e)?e:[e]}function Fr(e){const s=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return s[0]!=="_"?s:"private"+s}function ho(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,s)=>s.toUpperCase())}let ni={};function dC(e){if(e==null)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function jy(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>jy(t));else{const t=Object.keys(e);for(const s of t){const i=e[s];i!=null&&typeof i=="object"&&(!Array.isArray(i)&&i.type==="ndarray"&&typeof i.value=="number"?e[s]=i.value:jy(i))}}}function Ff(e,t={},s={},i="object",o=!1){if(typeof e=="string"){const y=e;let r;if(y in s)r=s[y];else if(y in ni)r=ni[y];else if(r=t[y],r==null)throw new ot(`Unknown ${i}: ${e}. This may be due to one of the following reasons:
1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return r}else{const y=e;if(y.className==null||y.config==null)throw new ot(`${i}: Improper config format: ${JSON.stringify(y)}.
'className' and 'config' must set.`);const r=y.className;let g,n;if(r in s?[g,n]=s[r]:r in ni?[g,n]=ni.className:r in t&&([g,n]=t[r]),g==null)throw new ot(`Unknown ${i}: ${r}. This may be due to one of the following reasons:
1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(n!=null){const a={};for(const d of Object.keys(ni))a[d]=ni[d];for(const d of Object.keys(s))a[d]=s[d];const p=y.config;p.customObjects=a;const h=Object.assign({},ni);for(const d of Object.keys(s))ni[d]=s[d];jy(y.config);const u=n(g,y.config,s,o);return ni=Object.assign({},h),u}else{const a=Object.assign({},ni);for(const h of Object.keys(s))ni[h]=s[h];const p=new g(y.config);return ni=Object.assign({},a),p}}}function pq(e,t){return e<t?-1:e>t?1:0}function Td(e,t){return-1*pq(e,t)}function Ra(e){if(e==null)return e;const t=[];for(const s of e)t.indexOf(s)===-1&&t.push(s);return t}function mq(e){if(e==null)throw new ot(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function _o(e,t,s){if(s!=null&&e.indexOf(s)<0)throw new ot(`${s} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function pC(e,t,s=0,i=1/0){return rr(s>=0),rr(i>=s),Array.isArray(e)&&e.length>=s&&e.length<=i&&e.every(o=>typeof o===t)}function An(e,t){Array.isArray(e)?(q(e.length>0,()=>`${t} is unexpectedly an empty array.`),e.forEach((s,i)=>An(s,`element ${i+1} of ${t}`))):q(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${ZO(e)}.`)}function ZO(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>ZO(t)).join(",")+"]":typeof e=="string"?`"${e}"`:`${e}`}function vq(e,t,s){let i=s!=null?s():cs(),o;return(...r)=>{const g=s!=null?s():cs();return g-i<t||(i=g,o=e(...r)),o}}function JO(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let gq=0;function QO(){return gq++}const Cd={};function bg(e=""){return e in Cd||(Cd[e]=0),Cd[e]+=1,e+Cd[e].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const xq=["channelsFirst","channelsLast"],yq=["nearest","bilinear"],Sq=["valid","same","causal"],Tq=["max","avg"],Cq=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const pl=new Map;function en(e){_o(xq,"DataFormat",e)}function wq(e){_o(yq,"InterpolationFormat",e)}function ei(e){_o(Sq,"PaddingMode",e)}function qO(e){_o(Tq,"PoolMode",e)}const Ph=[],pA="/";function Co(e,t){Ph.push(e);try{const s=t();return Ph.pop(),s}catch(s){throw Ph.pop(),s}}function Eq(){return Ph.length===0?"":Ph.join(pA)+pA}function _O(e){if(!eD(e))throw new Error("Not a valid tensor name: '"+e+"'");return Eq()+e}function tD(e){if(!eD(e))throw new Error("Not a valid tensor name: '"+e+"'");pl.has(e)||pl.set(e,0);const t=pl.get(e);if(pl.set(e,pl.get(e)+1),t>0){const s=`${e}_${t}`;return pl.set(s,1),s}else return e}const bq=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function eD(e){return!!e.match(bq)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Aq(e){return e===parseInt(e.toString(),10)}function Na(e,t,s){t==null&&(t=0),s==null&&(s=e.length);let i=1;for(let o=t;o<s;++o)i*=e[o];return i}function hu(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let s=0;s<e.length;s++){const i=e[s];i<t&&(t=i)}return t}function Ba(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let s=0;s<e.length;s++){const i=e[s];i>t&&(t=i)}return t}function Yi(e,t){if(t<e)throw new ot(`end (${t}) < begin (${e}) is forbidden.`);const s=[];for(let i=e;i<t;++i)s.push(i);return s}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let X0;function dn(){return X0==null&&(X0=oW().epsilon()),X0}function Ki(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xr(e,t){return Ft(e,t)}function Of(e,t=-1){const s=e.shape.slice();return t<0&&(t=s.length+t+1),s.splice(t,0,1),at(e,s)}function Iq(e,t){return ft(()=>{if(e.shape.length!==2)throw new ot(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);const s=Of(e,1);return Zy(s,[1,t,1])})}function Rq(e){const t=[Na(e.shape)];return at(e,t)}function Nq(e){if(e.rank<=1)throw new ot(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],Na(e.shape,1)];return at(e,t)}function wo(e,t,s){return ft(()=>{switch(e.rank){case 1:return fg(e,t,s);case 2:return bT(e,[t,0],[s,e.shape[1]]);case 3:return dg(e,[t,0,0],[s,e.shape[1],e.shape[2]]);case 4:return ic(e,[t,0,0,0],[s,e.shape[1],e.shape[2],e.shape[3]]);case 5:return le(e,[t,0,0,0,0],[s,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return le(e,[t,0,0,0,0,0],[s,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new ot(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function Y0(e,t,s){return ft(()=>{switch(e.rank){case 1:return fg(e,t,s);case 2:return bT(e,[0,t],[e.shape[0],s]);case 3:return dg(e,[0,0,t],[e.shape[0],e.shape[1],s]);case 4:return ic(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],s]);default:throw new ot(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function wd(e,t,s,i){return ft(()=>{switch(e.rank){case 1:return fg(e,t,s);case 2:switch(i){case 1:return wo(e,t,s);case 2:return Y0(e,t,s);default:throw new ot(`The axis is not within the rank of the tensor ${i}`)}case 3:switch(i){case 1:return wo(e,t,s);case 2:return dg(e,[0,t,0],[e.shape[0],s,e.shape[2]]);case 3:return Y0(e,t,s);default:throw new ot(`The axis is not within the rank of the tensor ${i}`)}case 4:switch(i){case 1:return wo(e,t,s);case 2:return ic(e,[0,t,0,0],[e.shape[0],s,e.shape[2],e.shape[3]]);case 3:return ic(e,[0,0,t,0],[e.shape[0],e.shape[1],s,e.shape[3]]);case 4:return Y0(e,t,s);default:throw new ot(`The axis is not within the rank of the tensor ${i}`)}default:throw new ot(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function mC(e,t=-1){let s;return t<0&&(s=e[0].rank,s!==0?t=s:t=0),t===e[0].rank&&(t=-1),on(e,t)}function mA(e,t){switch(e.rank){case 1:return lF([e,t]);case 2:return uF([e,t],0);case 3:return hF([e,t],0);case 4:return cF([e,t],0);default:throw new ot(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function Zy(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new ot(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return mi(e,t)}function Ag(e,t=0,s=1,i,o){return gT(e,t,s,i,o)}function yr(e,t,s,i){if(e.rank<2||t.rank<2)throw new qt(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){const o=e.shape.slice(-1)[0],y=t.shape.slice(-2)[0];if(o!==y)throw new qt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(e.rank===2&&t.rank===2)return Hy({a:e,b:t,transposeA:!1,transposeB:!1,bias:i?Jy(e.rank,i,Ki()):null,activation:s});{const o=e.shape.slice(),y=o.pop();e=at(e,[-1,y]);const r=t.shape.slice(),g=r.pop(),n=r.pop(),a=[...r,g],p=Array.from({length:t.rank},(l,c)=>c===0?t.rank-2:c<=t.rank-2?c-1:c);t=at(ue(t,p),[n,-1]);const h=[...o,...a];return at(Hy({a:e,b:t,transposeA:!1,transposeB:!1,bias:i?Jy(e.rank,i,Ki()):null,activation:s}),h)}}function nD(e,t,s){return ft(()=>(Array.isArray(t)?t=is(t,"int32"):t=Ft(t,"int32"),If(e,t,s)))}function Df(e){return rt(e,e)}function Jy(e,t,s){const i=t.shape;if(t.rank!==1&&t.rank!==e)throw new ot(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(e===5){if(s==="channelsFirst")return i.length===1?at(t,[1,i[0],1,1,1]):at(t,[1,i[3],i[0],i[1],i[2]]);if(s==="channelsLast")return i.length===1?at(t,[1,1,1,1,i[0]]):at(t,[1].concat(i))}else if(e===4){if(s==="channelsFirst")return i.length===1?at(t,[1,i[0],1,1]):at(t,[1,i[2],i[0],i[1]]);if(s==="channelsLast")return i.length===1?at(t,[1,1,1,i[0]]):at(t,[1].concat(i))}else if(e===3){if(s==="channelsFirst")return i.length===1?at(t,[1,i[0],1]):at(t,[1,i[1],i[0]]);if(s==="channelsLast")return i.length===1?at(t,[1,1,i[0]]):at(t,[1].concat(i))}else if(e<3)return t;throw new ot(`Unsupported input rank by biasAdd: ${t.rank}`)}function Qi(e,t,s){return ft(()=>(s==null&&(s=Ki()),en(s),wt(e,Jy(e.rank,t,s))))}function Pq(e,t=1){if(t!==1)throw new qt(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return Ef(e)}function Fq(e){return ft(()=>kt(e,wt(un(e),1)))}function sD(e,t,s,i){return ft(()=>XF(e,t,s,i))}function Oq(e){return ft(()=>{const t=wt(.5,rt(.2,e));return Ds(t,0,1)})}function Lf(e,t,s=!1){return s?e():t()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Dq=["fanIn","fanOut","fanAvg"],Lq=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mq(e){_o(Dq,"FanMode",e)}function $q(e){_o(Lq,"Distribution",e)}class Ni extends Ou{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class iD extends Ni{apply(t,s){return fn(t,s)}}iD.className="Zeros";Et(iD);class vC extends Ni{apply(t,s){return Us(t,s)}}vC.className="Ones";Et(vC);class rD extends Ni{constructor(t){if(super(),typeof t!="object")throw new ot(`Expected argument of type ConstantConfig but got ${t}`);if(t.value===void 0)throw new ot(`config must have value set but got ${t}`);this.value=t.value}apply(t,s){return ft(()=>rt(Wt(this.value),Us(t,s)))}getConfig(){return{value:this.value}}}rD.className="Constant";Et(rD);class aD extends Ni{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,s){return Jo(t,this.minval,this.maxval,s,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}aD.className="RandomUniform";Et(aD);class oD extends Ni{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,s){if(s=s||"float32",s!=="float32"&&s!=="int32")throw new qt(`randomNormal does not support dType ${s}.`);return Ag(t,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}oD.className="RandomNormal";Et(oD);class lD extends Ni{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,s){if(s=s||"float32",s!=="float32"&&s!=="int32")throw new qt(`truncatedNormal does not support dType ${s}.`);return NT(t,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}lD.className="TruncatedNormal";Et(lD);class uD extends Ni{constructor(t){super(),this.gain=t.gain!=null?t.gain:1}apply(t,s){return ft(()=>{if(t.length!==2||t[0]!==t[1])throw new ot("Identity matrix initializer can only be used for 2D square matrices.");return rt(this.gain,iT(t[0]))})}getConfig(){return{gain:this.gain}}}uD.className="Identity";Et(uD);function Bq(e,t="channelsLast"){let s,i;if(en(t),e.length===2)s=e[0],i=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){const o=Na(e,2);s=e[1]*o,i=e[0]*o}else if(t==="channelsLast"){const o=Na(e,0,e.length-2);s=e[e.length-2]*o,i=e[e.length-1]*o}}else{const o=Na(e);s=Math.sqrt(o),i=Math.sqrt(o)}return[s,i]}class Ls extends Ni{constructor(t){if(super(),t.scale<0)throw new ot(`scale must be a positive float. Got: ${t.scale}`);this.scale=t.scale==null?1:t.scale,this.mode=t.mode==null?"fanIn":t.mode,Mq(this.mode),this.distribution=t.distribution==null?"normal":t.distribution,$q(this.distribution),this.seed=t.seed}apply(t,s){const i=Bq(t),o=i[0],y=i[1];let r=this.scale;if(this.mode==="fanIn"?r/=Math.max(1,o):this.mode==="fanOut"?r/=Math.max(1,y):r/=Math.max(1,(o+y)/2),this.distribution==="normal"){const g=Math.sqrt(r);if(s=s||"float32",s!=="float32"&&s!=="int32")throw new qt(`${this.getClassName()} does not support dType ${s}.`);return NT(t,0,g,s,this.seed)}else{const g=Math.sqrt(3*r);return Jo(t,-g,g,s,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ls.className="VarianceScaling";Et(Ls);class gC extends Ls{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Ls.className}}gC.className="GlorotUniform";Et(gC);class xC extends Ls{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Ls.className}}xC.className="GlorotNormal";Et(xC);class yC extends Ls{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Ls.className}}yC.className="HeNormal";Et(yC);class SC extends Ls{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Ls.className}}SC.className="HeUniform";Et(SC);class TC extends Ls{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Ls.className}}TC.className="LeCunNormal";Et(TC);class CC extends Ls{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Ls.className}}CC.className="LeCunUniform";Et(CC);class hD extends Ni{constructor(t){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=t.gain==null?this.DEFAULT_GAIN:t.gain,this.seed=t.seed}apply(t,s){return ft(()=>{if(t.length<2)throw new qt("Shape must be at least 2D.");if(s!=="int32"&&s!=="float32"&&s!==void 0)throw new TypeError(`Unsupported data type ${s}.`);s=s;const i=vt(t.slice(0,-1)),o=t[t.length-1],y=i*o;y>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${y}) elements: Slowness may result.`);const r=[Math.max(o,i),Math.min(o,i)],g=Ag(r,0,1,s,this.seed),n=tO.qr(g,!1);let a=n[0];const h=n[1].flatten().stridedSlice([0],[Math.min(o,i)*Math.min(o,i)],[Math.min(o,i)+1]);return a=rt(a,h.sign()),i<o&&(a=a.transpose()),rt(Wt(this.gain),a.reshape(t))})}getConfig(){return{gain:this.gain,seed:this.seed}}}hD.className="Orthogonal";Et(hD);const vA={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function gA(e,t={}){return Ff(e,ui.getMap().classNameMap,t,"initializer")}function Ue(e){return dC(e)}function ke(e){if(typeof e=="string"){const t=e in vA?vA[e]:e;if(t==="GlorotNormal")return new xC;if(t==="GlorotUniform")return new gC;if(t==="HeNormal")return new yC;if(t==="HeUniform")return new SC;if(t==="LeCunNormal")return new TC;if(t==="LeCunUniform")return new CC;{const s={};return s.className=t,s.config={},gA(s)}}else return e instanceof Ni?e:gA(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qy(e){return Array.isArray(e)&&Array.isArray(e[0])}function Zp(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function jt(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new ot(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function pe(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new ot(`Expected exactly 1 Shape; got ${e.length}`)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jp(e){let t=0;for(const s of e)s.shape.length===0?t+=1:t+=s.shape.reduce((i,o)=>i*o);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const xA="Variable";class kq{constructor(t,s="float32",i=xA,o=!0,y=null){this.dtype=s??"float32",this.shape=t.shape,this.id=QO(),i=i??xA,this.originalName=_O(i),this.name=tD(this.originalName),this.trainable_=o,this.constraint=y,this.val=WF(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),zq(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function zq(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function qy(e){return e.map(t=>t.read())}function wC(e){e.forEach(t=>{t[0].write(t[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class pn{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class ur{constructor(t,s,i,o,y,r,g){this.dtype=t,this.shape=s,this.sourceLayer=i,this.inputs=o,this.callArgs=y,this.outputTensorIndex=g,this.id=QO(),r!=null&&(this.originalName=_O(r),this.name=tD(this.originalName)),this.rank=s.length}}let Vq=0,Ig=class{constructor(t,s){this.callArgs=s,this.id=Vq++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const i of t.inboundLayers)i!=null&&i.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const s of this.inboundLayers)s!=null?t.push(s.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},Gq=0;class ie extends Ou{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Gq++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let s=t.name;if(!s){const i=this.getClassName();s=Fr(i)+"_"+bg(i)}if(this.name=s,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let i;if(t.batchInputShape!=null)i=t.batchInputShape;else if(t.inputShape!=null){let y=null;t.batchSize!=null&&(y=t.batchSize),i=[y].concat(t.inputShape)}this.batchInputShape=i;let o=t.dtype;o==null&&(o=t.inputDType),o==null&&(o="float32"),this.dtype=o}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,s){return t.name+"_ib-"+s.toString()}getNodeAtIndex(t,s){if(this.inboundNodes.length===0)throw new vi(`The layer has never been called and thus has no defined ${s}.`);if(this.inboundNodes.length<=t)throw new ot(`Asked to get ${s} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return fs(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return fs(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new ir(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new ir(`Layer ${this.name} is not connected, no input to return.`);return fs(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new ir(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new ir(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return fs(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(s=>s.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=Pe(t),this.inputSpec==null||this.inputSpec.length===0)return;const s=Pe(this.inputSpec);if(t.length!==s.length)throw new ot(`Layer ${this.name} expects ${s.length} inputs, but it received ${t.length} input tensors. Input received: ${t}`);for(let i=0;i<t.length;i++){const o=t[i],y=s[i];if(y==null)continue;const r=o.rank;if(y.ndim!=null&&r!==y.ndim)throw new ot(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${y.ndim}, found ndim=${r}`);if(y.maxNDim!=null&&r>y.maxNDim)throw new ot(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${y.maxNDim}, found ndim=${r}`);if(y.minNDim!=null&&r<y.minNDim)throw new ot(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${y.minNDim}, found ndim=${r}.`);if(y.dtype!=null&&o.dtype!==y.dtype)throw new ot(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${y.dtype}, found dtype=${o.dtype}.`);if(y.axes){const g=o.shape;for(const n in y.axes){const a=Number(n),p=y.axes[n],h=a>=0?g[a]:g[g.length+a];if(p!=null&&[p,null].indexOf(h)===-1)throw new ot(`Input ${i} is incompatible with layer ${this.name}: expected axis ${a} of input shape to have value ${p} but got shape ${g}.`)}}if(y.shape!=null)for(let g=0;g<y.shape.length;++g){const n=y.shape[g],a=o.shape[g];if(n!=null&&a!=null&&n!==a)throw new ot(`Input ${i} is incompatible with layer ${this.name}: expected shape=${y.shape}, found shape=${o.shape}.`)}}}call(t,s){return t}invokeCallHook(t,s){this._callHook!=null&&this._callHook(t,s)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,s){s=s||{},this.assertNotDisposed();const i=Pe(t);let o=!0;for(const r of i)if(!(r instanceof ur)){o=!1;break}let y=!0;for(const r of i)if(r instanceof ur){y=!1;break}if(o===y)throw new ot("Arguments to apply() must be all SymbolicTensors or all Tensors");return Co(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const r=[];for(const g of Pe(t))r.push(g.shape);this.build(fs(r)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&y&&(this._refCount=1)}if(this.assertInputCompatibility(t),y){let r=this.call(t,s);const g=Pe(r),n=[];for(let a of g)i.indexOf(a)!==-1&&(a=a.clone()),n.push(a);if(r=fs(n),this.activityRegularizer!=null)throw new qt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}else{const r=Uq(t),g=this.computeOutputShape(r);let n;const a=Wq(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?r[0]:r),g!=null&&g.length>0&&Array.isArray(g[0])?n=g.map((p,h)=>new ur(a,p,this,Pe(t),s,this.name,h)):n=new ur(a,g,this,Pe(t),s,this.name),this.addInboundNode(t,n,null,null,r,g,s),this._refCount++,this.activityRegularizer!=null)throw new qt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return n}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let s=!1;this.batchInputShape.forEach((i,o)=>{i!=null&&t[o]!=null&&t[o]!==i&&(s=!0)}),s&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new ir(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const s of this.inboundNodes){const i=JSON.stringify(s.outputShapes);t.indexOf(i)===-1&&t.push(i)}if(t.length===1){const s=this.inboundNodes[0].outputShapes;return Array.isArray(s)&&Array.isArray(s[0])&&s.length===1?s[0]:s}else throw new ir(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new vi(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Jp(this.weights)}build(t){this.built=!0}getWeights(t=!1){return qy(t?this.trainableWeights:this.weights)}setWeights(t){ft(()=>{const s=this.weights;if(s.length!==t.length)throw new ot(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${s.length} weights. Provided weights: ${t}...`);if(s.length===0)return;const i=[],o=qy(s);for(let y=0;y<o.length;++y){const r=o[y],g=s[y],n=t[y];if(!oe(r.shape,n.shape))throw new ot(`Layer weight shape ${r.shape} not compatible with provided weight shape ${n.shape}`);i.push([g,n])}wC(i)})}addWeight(t,s,i,o,y,r,g,n){if(this._addedWeightNames.indexOf(t)!==-1)throw new ot(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),i==null&&(i="float32"),this.fastWeightInitDuringBuild&&(o=n!=null?n():ke("zeros"));const a=o.apply(s,i),p=new kq(a,i,t,r,g);return a.dispose(),y!=null&&this.addLoss(()=>y.apply(p.read())),r==null&&(r=!0),r?this._trainableWeights.push(p):this._nonTrainableWeights.push(p),p}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=Pe(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,s){if(!this.supportsMasking){if(s!=null)if(Array.isArray(s))s.forEach(i=>{if(i!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return s}addInboundNode(t,s,i,o,y,r,g=null){const n=Pe(t);s=Pe(s),i=Pe(i),o=Pe(o),y=Zp(y),r=Zp(r);const a=[],p=[],h=[];for(const u of n)a.push(u.sourceLayer),p.push(u.nodeIndex),h.push(u.tensorIndex);new Ig({outboundLayer:this,inboundLayers:a,nodeIndices:p,tensorIndices:h,inputTensors:n,outputTensors:s,inputMasks:i,outputMasks:o,inputShapes:y,outputShapes:r},g);for(let u=0;u<s.length;u++)s[u].sourceLayer=this,s[u].nodeIndex=this.inboundNodes.length-1,s[u].tensorIndex=u}getConfig(){const t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function Uq(e){e=Pe(e);const t=[];for(const s of e)t.push(s.shape);return fs(t)}function Wq(e){return"float32"}function cD(e,t,s){if((t==null||s!=null&&s>0)&&(t=e.sourceLayer,s=e.nodeIndex),t.inboundNodes.length===0)return[e];{const i=t.inboundNodes[s];if(i.inboundLayers.length===0)return i.inputTensors;{const o=[];for(let y=0;y<i.inboundLayers.length;y++){const r=i.inputTensors[y],g=i.inboundLayers[y],n=i.nodeIndices[y],a=cD(r,g,n);for(const p of a)o.indexOf(p)===-1&&o.push(p)}return o}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Mf extends ie{constructor(t){if(super({dtype:t.dtype,name:t.name!=null?t.name:bg("input").toString()}),t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new ot("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let s=t.batchInputShape;if(s==null){if(t.inputShape==null)throw new ot("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");s=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new ot("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const i=t.dtype||"float32";this.batchInputShape=s,this.dtype=i,this.inputSpec=[{shape:s}];const o=new ur(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new Ig({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[s],outputShapes:[s]})}apply(t,s){throw new ot(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Mf.className="InputLayer";Et(Mf);function Hq(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new ot("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let s=e.dtype;return s==null&&(s="float32"),new Mf({batchInputShape:t,name:e.name,dtype:s,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xq(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return Ft(t,e.dtype)}catch{throw new ot(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}class ma{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof ma)for(const s in t.id2Value)this.id2Value[s]=t.id2Value[s],s in t.id2Mask&&(this.id2Mask[s]=t.id2Mask[s]);else{if(t==null)return;for(const s of t)this.add(s.key,s.value)}}add(t,s,i){if(this.id2Value[t.id]==null)this.id2Value[t.id]=Xq(t,s),this.name2Id[t.name]=t.id,i!=null&&(this.id2Mask[t.id]=i);else throw new ot(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof ur){if(this.id2Value[t.id]==null)throw new ot(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{const s=this.name2Id[t];if(s==null)throw new ot(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[s]}}getMask(t){if(t instanceof ur){if(this.id2Value[t.id]==null)throw new ot(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{const s=this.name2Id[t];if(s==null)throw new ot(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[s]}}disposeMasks(){this.id2Mask!=null&&ne(this.id2Mask)}}const Qp=new jO,qp=new jO;function Yq(e){Qp!=null&&Qp.setMaxEntries(e),qp!=null&&qp.setMaxEntries(e)}function mh(e,t,s,i){const o=s==null?!1:s.training,y=Array.isArray(e),r=y?e:[e],g=r.map(l=>l.name),n=[],a=t.names();for(const l of g)a.indexOf(l)!==-1?n.push(t.getValue(l)):n.push(null);i!=null&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);const p=g.join(",")+"|"+t.names().sort().join(",");let h=Qp.get(p),u;if(h==null){const l=Kq(r,t);h=l.sorted,u=l.recipientCounts,Qp.put(p,h),qp.put(p,u)}u={},o||Object.assign(u,qp.get(p));const d=new ma(t);for(let l=0;l<h.length;++l){if(i!=null){const E=Gy().numTensors;E>i.maxNumTensors&&(i.maxNumTensors=E),E<i.minNumTensors&&(i.minNumTensors=E)}const c=h[l],m=c.sourceLayer;if(m instanceof Mf)continue;const f=[],v=[],S=[];let x=!1;for(const E of c.inputs){const A=d.getValue(E),I=d.getMask(E);f.push(A),v.push(I),I!=null&&(x=!0),o||(u[E.name]--,u[E.name]===0&&!t.hasKey(E)&&g.indexOf(E.name)===-1&&!A.isDisposed&&E.sourceLayer.stateful!==!0&&S.push(A))}x&&(s=s||{},s.mask=v[0]);const T=Pe(m.apply(f,s));let C=null;m.supportsMasking&&(C=m.computeMask(f,v));const w=Zq(c),b=Array.isArray(w)?w:[w];for(let E=0;E<b.length;++E){d.hasKey(b[E])||d.add(b[E],T[E],Array.isArray(C)?C[0]:C);const A=g.indexOf(b[E].name);A!==-1&&(n[A]=T[E])}o||ne(S)}return d.disposeMasks(),y?n:n[0]}function Kq(e,t){q(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let s=[],i={};if(e.length===1){const o=yA(e[0],t);s=o.sorted,i=o.recipientMap}else{const o=new Set;for(const y of e){const{sorted:r,recipientMap:g}=yA(y,t);for(const n of r)o.has(n.name)||(s.push(n),o.add(n.name));for(const n in g)i[n]==null&&(i[n]=new Set),g[n].forEach(a=>i[n].add(a))}}return{sorted:s,recipientCounts:jq(i)}}function jq(e){const t={};for(const s in e)t[s]=e[s].size;return t}function yA(e,t){const s=new Set,i=[],o={};for(const g of t.names())s.add(g);const y=[],r=[];for(y.push(e);y.length>0;){const g=y[y.length-1];if(s.has(g.name)){y.pop();continue}const n=r[r.length-1]===y.length-1;if(g.inputs.length===0||n)y.pop(),i.push(g),s.add(g.name),n&&r.pop();else{r.push(y.length-1);for(const a of g.inputs)o[a.name]==null&&(o[a.name]=new Set),o[a.name].add(g.name),!s.has(a.name)&&y.push(a)}}return{sorted:i,recipientMap:o}}function Zq(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let s=null;for(let i=0;i<e.sourceLayer.inboundNodes.length;++i)for(const o of e.sourceLayer.inboundNodes[i].outputTensors)if(o.id===e.id){s=i;break}t=e.sourceLayer.getOutputAt(s)}return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jq=pt();Jq.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Yq);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function EC(e,t){return ft(()=>Kn(Mt(rt(e,e),t,!0)))}class $f extends Ou{getConfig(){return{}}}class fD extends $f{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return ft(()=>{const s=EC(t,this.axis),i=Ds(s,0,this.maxValue);return rt(t,kt(i,wt(dn(),s)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}fD.className="MaxNorm";Et(fD);class dD extends $f{constructor(t){super(),this.defaultAxis=0,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return ft(()=>kt(t,wt(dn(),EC(t,this.axis))))}getConfig(){return{axis:this.axis}}}dD.className="UnitNorm";Et(dD);class pD extends $f{apply(t){return Cr(t)}}pD.className="NonNeg";Et(pD);class mD extends $f{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=t.minValue!=null?t.minValue:this.defaultMinValue,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.rate=t.rate!=null?t.rate:this.defaultRate,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return ft(()=>{const s=EC(t,this.axis),i=wt(rt(this.rate,Ds(s,this.minValue,this.maxValue)),rt(1-this.rate,s));return rt(t,kt(i,wt(dn(),s)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}mD.className="MinMaxNorm";Et(mD);const SA={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function gn(e){return dC(e)}function TA(e,t={}){return Ff(e,ui.getMap().classNameMap,t,"constraint")}function xn(e){if(e==null)return null;if(typeof e=="string"){const s={className:e in SA?SA[e]:e,config:{}};return TA(s)}else return e instanceof $f?e:TA(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function io(e){if(e==null)return;const t=[],s=[],i=[];for(const o in e){const y=e[o];if(typeof y!="number"){const r=y;t.push(r.data()),s.push(o),i.push(r)}}if(t.length>0){const o=await Promise.all(t);for(let y=0;y<o.length;++y)e[s[y]]=o[y][0];ne(i)}}function vD(e){if(e!=null)for(const t in e){const s=e[t];typeof s!="number"&&s.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var CA;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(CA||(CA={}));const Qq=125;class ac{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,s){}async onEpochEnd(t,s){}async onBatchBegin(t,s){}async onBatchEnd(t,s){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class qq{constructor(t,s=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=s}append(t){this.callbacks.push(t)}setParams(t){for(const s of this.callbacks)s.setParams(t)}setModel(t){for(const s of this.callbacks)s.setModel(t)}async onEpochBegin(t,s){s==null&&(s={});for(const i of this.callbacks)await i.onEpochBegin(t,s)}async onEpochEnd(t,s){s==null&&(s={});for(const i of this.callbacks)await i.onEpochEnd(t,s)}async onBatchBegin(t,s){s==null&&(s={});for(const i of this.callbacks)await i.onBatchBegin(t,s)}async onBatchEnd(t,s){s==null&&(s={});for(const i of this.callbacks)await i.onBatchEnd(t,s)}async onTrainBegin(t){t==null&&(t={});for(const s of this.callbacks)await s.onTrainBegin(t)}async onTrainEnd(t){t==null&&(t={});for(const s of this.callbacks)await s.onTrainEnd(t)}}class _q extends ac{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,s){s==null&&(s={});const i=s.size==null?0:s.size;this.seen+=i;for(const o in s){const y=s[o];if(typeof y=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+y*i;else{let r;o in this.totals?r=this.totals[o]:this.totals[o]=0;const g=ft(()=>wt(this.totals[o],rt(y,i)));this.totals[o]=g,r!=null&&r.dispose()}}}async onEpochEnd(t,s){if(s!=null)for(const i of this.params.metrics)this.totals[i]!=null&&(typeof this.totals[i]=="number"?s[i]=this.totals[i]/this.seen:ft(()=>{const o=rt(kt(1,this.seen),this.totals[i]);s[i]=o,this.totals[i].dispose(),bn(s[i])}))}}class t_ extends ac{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,s){s==null&&(s={}),this.epoch.push(t);for(const i in s)this.history[i]==null&&(this.history[i]=[]),this.history[i].push(s[i])}async syncData(){const t=[],s=[],i=[];for(const y in this.history){const r=this.history[y];for(let g=0;g<r.length;++g)if(typeof r[g]!="number"){const n=r[g];t.push(n.data()),s.push(y),i.push(g)}}const o=await Promise.all(t);for(let y=0;y<o.length;++y)this.history[s[y]][i[y]].dispose(),this.history[s[y]][i[y]]=o[y][0]}}class e_ extends ac{constructor(t,s){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||TO,this.yieldEvery=s||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Qq),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Ey(this.yieldEvery)&&(this.maybeWait=vq(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,s,i){const o=[];this.yield!=null&&(await io(i),o.push(this.yield(t,s,i))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(t,s){this.currentEpoch=t,this.epochBegin!=null&&(await io(s),await this.epochBegin(t,s))}async onEpochEnd(t,s){const i=[];this.epochEnd!=null&&(await io(s),i.push(this.epochEnd(t,s))),this.yieldEvery==="epoch"&&i.push(this.nextFrameFunc()),await Promise.all(i)}async onBatchBegin(t,s){this.batchBegin!=null&&(await io(s),await this.batchBegin(t,s))}async onBatchEnd(t,s){const i=[];this.batchEnd!=null&&(await io(s),i.push(this.batchEnd(t,s))),this.yieldEvery==="batch"?i.push(this.nextFrameFunc()):Ey(this.yieldEvery)&&i.push(this.maybeWait(this.currentEpoch,t,s)),await Promise.all(i)}async onTrainBegin(t){this.trainBegin!=null&&(await io(t),await this.trainBegin(t))}async onTrainEnd(t){this.trainEnd!=null&&(await io(t),await this.trainEnd(t))}}function gD(e,t){return e==null&&(e={}),e instanceof ac?[e]:Array.isArray(e)&&e[0]instanceof ac?e:Pe(e).map(i=>new e_(i,t))}class ri{constructor(){}static registerCallbackConstructor(t,s){q(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),ri.checkForDuplicate(s),ri.constructors[t]==null&&(ri.constructors[t]=[]),ri.constructors[t].push(s)}static checkForDuplicate(t){for(const s in ri.constructors)ri.constructors[+s].forEach(o=>{if(o===t)throw new ot("Duplicate callback constructor.")})}static clear(){ri.constructors={}}static createCallbacks(t){const s=[];for(const i in ri.constructors){const o=+i;t>=o&&s.push(...ri.constructors[o])}return s.map(i=>new i)}}ri.constructors={};function xD(e,t,s,i,o,y,r,g,n){const a=new t_,p=[new _q,...ri.createCallbacks(t)];e!=null&&p.push(...e),p.push(a);const h=new qq(p);return h.setParams({epochs:s,initialEpoch:i,samples:o,steps:y,batchSize:r,verbose:t,doValidation:g,metrics:n}),{callbackList:h,history:a}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vr(e,t={},s=!1){return Ff(e,ui.getMap().classNameMap,t,"layer",s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _p(e,t){return ft(()=>{e.dtype!=="float32"&&(e=Ft(e,"float32"));const s=Mt(Df(e),t,!0),i=Ru(s.shape,dn()),o=Kn(_r(s,i));return kt(e,o)})}function Rg(e,t){return ft(()=>Ye(Df(Dt(t,e)),-1))}function bC(e,t){return ft(()=>Ye(un(Dt(t,e)),-1))}function AC(e,t){return ft(()=>{const s=Dt(e,t),i=Ds(un(e),dn(),Number.MAX_VALUE),o=un(kt(s,i));return rt(100,Ye(o,-1))})}function n_(e,t){return ft(()=>{const s=Ds(t,dn(),Number.MAX_VALUE),i=js(wt(1,s)),o=Ds(e,dn(),Number.MAX_VALUE),y=js(wt(1,o));return Ye(Df(Dt(i,y)),-1)})}function s_(e,t){return ft(()=>{const s=_r(0,Dt(1,rt(e,t)));return Ye(Df(s),-1)})}function i_(e,t){return ft(()=>{const s=_r(0,Dt(1,rt(e,t)));return Ye(s,-1)})}function r_(e,t){return ft(()=>{const s=Mt(rt(e,t),-1),i=Ti(rt(Dt(1,e),t),-1);return _r(0,wt(1,Dt(i,s)))})}function a_(e,t){return ft(()=>{const s=Math.log(2),i=Dt(t,e),o=Dt(wt(i,Nu(rt(-2,i))),s);return Ye(o,-1)})}function oc(e,t,s=!1){return ft(()=>{if(s)t=pg(t);else{const i=Mt(t,t.shape.length-1,!0);t=kt(t,i)}return t=Ds(t,dn(),1-dn()),Le(Mt(rt(Ft(e,"float32"),js(t)),t.shape.length-1))})}function tm(e,t,s=!1){return ft(()=>{const i=Ft(Af(Rq(e)),"int32");t=Ds(t,dn(),1-dn());const o=t.shape,y=at(uT(i,o[o.length-1]),o);return oc(y,t,s)})}function o_(e,t){if(!oe(e.shape,t.shape))throw new ot(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return ft(()=>{const s=Cr(t),i=Le(un(t));return wt(Dt(s,rt(t,e)),rg(Ks(i)))})}function Ng(e,t){return ft(()=>{let s;return s=Ds(t,dn(),1-dn()),s=js(kt(s,Dt(1,s))),Ye(o_(e,s),-1)})}function l_(e,t){return ft(()=>{const s=Ds(e,dn(),1),i=Ds(t,dn(),1);return Mt(rt(e,js(kt(s,i))),-1)})}function u_(e,t){return ft(()=>{const s=js(wt(dn(),t));return Ye(Dt(t,rt(e,s)),-1)})}function yD(e,t){return ft(()=>{const s=_p(e,-1),i=_p(t,-1),o=rt(s,i);return Le(Mt(o,-1))})}const em={meanSquaredError:Rg,meanAbsoluteError:bC,meanAbsolutePercentageError:AC,meanSquaredLogarithmicError:n_,squaredHinge:s_,hinge:i_,categoricalHinge:r_,logcosh:a_,categoricalCrossentropy:oc,sparseCategoricalCrossentropy:tm,binaryCrossentropy:Ng,kullbackLeiblerDivergence:l_,poisson:u_,cosineProximity:yD};function K0(e){if(typeof e=="string"){if(e in em)return em[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ot(t)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function SD(e,t){return ft(()=>{const s=rt(.5,Zs(t)),i=xr(ks(t,s),e.dtype);return Ye(Xi(e,i),-1)})}function TD(e,t){return ft(()=>xr(Xi(ru(e,-1),ru(t,-1)),"float32"))}function h_(e,t){return ft(()=>Ft(Mt(Sr(Xi(e,1),Xi(t,1))),"float32"))}function c_(e,t){return ft(()=>Ft(Mt(Sr(Xi(e,0),Xi(t,1))),"float32"))}function f_(e,t){return ft(()=>{const s=h_(e,t),i=c_(e,t),o=wt(s,i);return Ft(Hn(ks(o,0),kt(s,o),0),"float32")})}function d_(e,t){return Ng(e,t)}function p_(e,t){return e.rank===t.rank&&(e=Qo(e,[e.rank-1])),t=ru(t,-1),t.dtype!==e.dtype&&(t=Ft(t,e.dtype)),Ft(Xi(e,t),"float32")}const m_=Rg,v_=Rg,g_=bC,x_=bC,y_=AC,S_=AC,CD=oc,T_=yD,wD=tm,nm={binaryAccuracy:SD,categoricalAccuracy:TD,precision:f_,categoricalCrossentropy:CD,sparseCategoricalCrossentropy:wD,mse:m_,MSE:v_,mae:g_,MAE:x_,mape:y_,MAPE:S_,cosine:T_};function C_(e){if(typeof e=="string"&&e in nm)return nm[e];if(typeof e!="string"&&e!=null)return e;throw new ot(`Unknown metric ${e}`)}function Ed(e){if(rr(e!==null,`Unknown LossOrMetricFn ${e}`),typeof e=="string")return e;{let t;for(const s of Object.keys(em))if(em[s]===e){t=s;break}if(t!==void 0)return t;for(const s of Object.keys(nm))if(nm[s]===e){t=s;break}return t!==void 0?t:e.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function w_(e){const t={Adagrad:()=>dl.adagrad(.01),Adadelta:()=>dl.adadelta(1,.95,dn()),Adam:()=>dl.adam(.001,.9,.999,dn()),Adamax:()=>dl.adamax(.002,.9,.999,dn(),0),RMSProp:()=>dl.rmsprop(.001,.9,0,dn()),SGD:()=>dl.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new ot(`Unknown Optimizer ${e}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const wA=1*1024*1024;function EA(e,t,s=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!_y(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(s){const i=JSON.stringify(e);i.length>wA&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${i.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${wA}.`)}}function _y(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const s of t)if(typeof s!="string"||!_y(e[s]))return!1;return!0}else if(Array.isArray(e)){for(const t of e)if(!_y(t))return!1;return!0}else return!1;else{const t=typeof e;return t==="string"||t==="number"||t==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function E_(e,t,s,i=console.log){const o=A_(e),y=["Layer (type)","Input Shape","Output shape","Param #"];o?(t=t||90,s=s||[.32,.61,.89,1]):(t=t||115,s=s||[.24,.48,.7,.8,1]),s[s.length-1]<=1&&(s=s.map(p=>Math.floor(t*p)));let r;if(!o){y.push("Receives inputs"),r=[];for(const p in e.nodesByDepth)r.push(...e.nodesByDepth[p])}i("_".repeat(t)),sm(y,s,i),i("=".repeat(t));const g=e.layers;for(let p=0;p<g.length;++p)o?I_(g[p],s,i):R_(g[p],s,r,i),i((p===g.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const n=b_(e),a=Jp(e.nonTrainableWeights);i(`Total params: ${n+a}`),i(`Trainable params: ${n}`),i(`Non-trainable params: ${a}`),i("_".repeat(t))}function b_(e){let t;return e.collectedTrainableWeights!=null?t=Jp(e.collectedTrainableWeights):t=Jp(e.trainableWeights),t}function A_(e){let t=!0;const s=[],i=[];for(const o in e.nodesByDepth)s.push(e.nodesByDepth[o]);for(const o of s){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){t=!1;break}i.push(...o)}if(t)for(const o of e.layers){let y=!1;for(const r of o.inboundNodes)if(i.indexOf(r)!==-1)if(y){t=!1;break}else y=!0;if(!t)break}return t}function sm(e,t,s=console.log){let i="";for(let o=0;o<e.length;++o)o>0&&(i=i.slice(0,i.length-1)+" "),i+=e[o],i=i.slice(0,t[o]),i+=" ".repeat(t[o]-i.length);s(i)}function I_(e,t,s){let i,o;try{o=e.inboundNodes.map(n=>JSON.stringify(n.inputShapes)).join(",")}catch{o="multiple"}try{i=JSON.stringify(e.outputShape)}catch{i="multiple"}const y=e.name,r=e.getClassName(),g=[`${y} (${r})`,o,i,e.countParams().toString()];sm(g,t,s)}function R_(e,t,s,i){let o,y;try{y=e.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{y="multiple"}try{o=JSON.stringify(e.outputShape)}catch{o="multiple"}const r=[];for(const h of e.inboundNodes)if(!(s!=null&&s.length>0&&s.indexOf(h)===-1))for(let u=0;u<h.inboundLayers.length;++u){const d=h.inboundLayers[u].name,l=h.nodeIndices[u],c=h.tensorIndices[u];r.push(`${d}[${l}][${c}]`)}const g=e.name,n=e.getClassName(),a=r.length===0?"":r[0],p=[`${g} (${n})`,y,o,e.countParams().toString(),a];sm(p,t,i);for(let h=1;h<r.length;++h)sm(["","","","",r[h]],t,i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ED(e,t,s){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof s=="string"}function t1(e,t){if(e===null)return null;if(typeof e=="string")return ho(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const s=[],i=e.length;for(let o=0;o<i;++o){const y=e[o];ED(t,o,y)?s.push(y):s.push(t1(y,t))}return s}else{const s={};for(const i of Object.keys(e)){const o=e[i];if(i==="name"&&typeof o=="string")s[i]=o;else{const y=ho(i);s[y]=t1(o,y)}}return s}}function e1(e,t){if(e==null)return null;if(typeof e=="string")return Fr(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const s=[],i=e.length;for(let o=0;o<i;++o){const y=e[o];ED(t,o,y)?s.push(y):s.push(e1(y,t))}return s}else{const s={};for(const i of Object.keys(e)){const o=e[i],y=Fr(i);(i==="name"||i==="className")&&typeof o=="string"?s[y]=o:s[y]=e1(o,i)}return s}}/** @license See the LICENSE file. */const bD="4.9.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Li extends ie{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=bg(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],Ra(this.inputs).length!==this.inputs.length)throw new ot(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);Ra(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const S=v.sourceLayer,x=v.nodeIndex,T=v.tensorIndex;this.outputLayers.push(S),this.outputLayersNodeIndices.push(x),this.outputLayersTensorIndices.push(T)}for(const v of this.inputs){const S=v.sourceLayer,x=v.nodeIndex,T=v.tensorIndex;rr(x===0,"input layer has >1 nodes"),rr(T===0,"input layer has >1 tensors"),this.inputLayers.push(S),this.inputLayersNodeIndices.push(x),this.inputLayersTensorIndices.push(T)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const S=this.inputLayers[v];if(!(S instanceof Mf))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${v} (0-based) originates from layer type ${S.getClassName()}.`);this.inputNames.push(S.name),this.feedInputShapes.push(S.batchInputShape),this.feedInputNames.push(S.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const s={},i={},o={},y={},r={},g=[],n=(v,S,x,T,C,w)=>{(T==null||C==null||w==null)&&(T=v.sourceLayer,C=v.nodeIndex,w=v.tensorIndex);const b=T.inboundNodes[C];if(x.indexOf(b)!==-1)throw new vi(`The tensor ${v.name} at layer "${T.name}" is part of a cycle.`);if(S.indexOf(b)!==-1)return;this.containerNodes.add(Li.nodeKey(T,C)),T.id in r||(r[T.id]=Object.keys(r).length),x.indexOf(b)===-1&&x.push(b);const E=b.inboundLayers.length;for(let A=0;A<E;A++){const I=b.inputTensors[A],R=b.inboundLayers[A],N=b.nodeIndices[A],F=b.tensorIndices[A];n(I,S,x,R,N,F)}for(S.push(b);x.indexOf(b)>=0;)x.splice(x.indexOf(b),1);g.push(b)},a=[],p=[];for(const v of this.outputs)n(v,a,p);const h=g.slice().reverse();for(const v of h){i[v.id]=v,v.id in s||(s[v.id]=0);let S=s[v.id];const x=o[v.outboundLayer.id]==null?0:o[v.outboundLayer.id];S=Math.max(S,x),o[v.outboundLayer.id]=S,y[v.outboundLayer.id]=v.outboundLayer,s[v.id]=S;for(let T=0;T<v.inboundLayers.length;T++){const C=v.inboundLayers[T],w=v.nodeIndices[T],b=C.inboundNodes[w],E=s[b.id]==null?0:s[b.id];s[b.id]=Math.max(S+1,E),i[b.id]=b}}const u={};for(const v in s){const S=s[v];S in u||(u[S]=[]),u[S].push(i[v])}const d={};for(const v in o){const S=o[v];S in d||(d[S]=[]),d[S].push(y[v])}let l=Object.keys(d).map(v=>parseInt(v,10)).sort(Td);this.layers=[];for(const v of l){const S=d[v];S.sort((x,T)=>{const C=r[x.id],w=r[T.id];return C<w?-1:C>w?1:0});for(const x of S)x instanceof Li&&this.internalContainerRefs.push(x),this.layers.push(x)}this.layersByDepth=d,l=Object.keys(u).map(v=>parseInt(v,10)).sort(Td);const c=this.inputs.slice(),m=[];for(const v of l)for(const S of u[v]){const x=S.outboundLayer;if(x!=null){for(const T of S.inputTensors)if(c.indexOf(T)===-1)throw new vi(`Graph disconnected: cannot obtain value for tensor ${T} at layer "${x.name}". The following previous layers were accessed without issue: ${m}`);for(const T of S.outputTensors)c.push(T);m.push(x.name)}}this.nodesByDepth=u;const f=this.layers.map(v=>v.name);for(const v of f){const S=f.filter(x=>x===v).length;if(S!==1)throw new vi(`The name "${v}" is used ${S} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(f))}this.outboundNodes=[],this.inboundNodes=[],new Ig({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const s of this.layers)t.numDisposedVariables+=s.dispose().numDisposedVariables;for(const s of this.internalContainerRefs)t.numDisposedVariables+=s.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(s=>{s._trainableWeights.forEach(i=>i.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new ot("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const s of this.layers)t=t.concat(s.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const s of this.layers)t.push(...s.nonTrainableWeights);if(!this.trainable){const s=[];for(const i of this.layers)s.push(...i.trainableWeights);return s.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,s=!0){const i={};let o=0;const y=Object.keys(t)[0].split("/"),r=!isNaN(parseInt(y[y.length-1],10));for(const n of this.layers)for(const[a,p]of n.weights.entries()){const h=r?`${p.name.split("/").slice(0,-1).join("/")+"/"}${a}`:p.originalName;if(i[h]!=null)throw new ot(`Duplicate weight name: ${h}`);i[h]=p,o++}const g=[];for(const n in t){let a=n;if(i[n]==null){const p=n.split("/");a=p.slice(0,-2).concat([p[p.length-1]]).join("/")}if(i[a]!=null)g.push([i[a],t[n]]);else if(s)throw new ot(`Provided weight data has no target variable: ${n}`);delete i[a]}if(s){const n=[];for(const a in i)n.push(a);if(n.length>0)throw new ot(`${n.length} of ${o} weights are not set: ${n}`)}wC(g)}updatedConfig(){const t=this.getConfig(),s={};return s.className=this.getClassName(),s.config=t,s.kerasVersion=`tfjs-layers ${bD}`,s.backend="TensorFlow.js",s}toJSON(t,s=!0){const i=e1(this.updatedConfig());return s?JSON.stringify(i):i}call(t,s){return ft(()=>{t=Pe(t);const i=new ma;for(let o=0;o<this.inputs.length;++o)i.add(this.inputs[o],t[o]);return mh(this.outputs,i,s)})}computeMask(t,s){return ft(()=>{t=Pe(t);let i;return s==null?i=ko(null,t.length):i=Pe(s),this.runInternalGraph(t,i)[1]})}computeOutputShape(t){const s=Zp(t);if(s.length!==this.inputLayers.length)throw new ot(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const i={};for(let g=0;g<s.length;g++){const n=this.inputLayers[g],a=s[g],p=n.name+"_0_0";i[p]=a}const o=Object.keys(this.nodesByDepth).map(g=>parseInt(g,10)).sort(Td);if(o.length>1)for(const g of o){const n=this.nodesByDepth[g];for(const a of n){const p=a.outboundLayer;if(this.inputLayers.map(c=>c.id).indexOf(p.id)!==-1)continue;const h=[];for(let c=0;c<a.inboundLayers.length;c++){const m=a.inboundLayers[c],f=a.nodeIndices[c],v=a.tensorIndices[c],S=`${m.name}_${f}_${v}`,x=i[S];h.push(x)}const u=p.computeOutputShape(fs(h)),d=Zp(u),l=p.inboundNodes.indexOf(a);for(let c=0;c<d.length;c++){const m=`${p.name}_${l}_${c}`;i[m]=d[c]}}}const y=[],r=[];for(let g=0;g<this.outputLayers.length;g++){const n=this.outputLayers[g],a=this.outputLayersNodeIndices[g],p=this.outputLayersTensorIndices[g],h=`${n.name}_${a}_${p}`;r.push(h)}for(let g=0;g<r.length;g++){const n=r[g];rr(n in i),y.push(i[n])}return fs(y)}runInternalGraph(t,s){s==null&&(s=ko(null,t.length));const i={};for(let n=0;n<this.inputs.length;++n){const a=this.inputs[n],p=t[n],h=s[n];i[a.id]=[p,h]}const o=Object.keys(this.nodesByDepth).map(n=>parseInt(n,10)).sort(Td);for(const n of o){const a=this.nodesByDepth[n];for(const p of a){const h=p.outboundLayer,u=p.inputTensors,d=p.outputTensors,l=new Array;for(const c of u)c.id in i&&l.push(i[c.id]);if(l.length===u.length){let c={},m,f,v,S;if(p.callArgs!=null&&(c=p.callArgs),l.length===1){const[x,T]=l[0];c.mask==null&&(c.mask=T),v=Pe(h.call(x,c)),S=Pe(h.computeMask(x,T)),m=[x],f=[T]}else m=l.map(x=>x[0]),f=l.map(x=>x[1]),c.mask==null&&(c.mask=f),v=Pe(h.call(m,c)),S=Pe(h.computeMask(m,f));if(h.activityRegularizer)throw new qt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let x=0;x<d.length;++x){const T=d[x],C=v[x],w=S[x];i[T.id]=[C,w]}}}}const y=[],r=[],g=[];for(const n of this.outputs){rr(n.id in i,`Could not compute output ${n.name} : ${n.id}`);const[a,p]=i[n.id];g.push(a.shape),y.push(a),r.push(p)}return[y,r,g]}buildNodeConversionMap(t){const s={};let i;for(const o of this.layers){i=o instanceof Li?1:0;for(let y=0;y<o.inboundNodes.length;y++){const r=Li.nodeKey(o,y);this.containerNodes.has(r)&&(s[r]=i,i+=1)}}return s}getLayer(t,s){if(s!=null)return this.findLayer(s);if(t==null)throw new ot("Provide either a layer name or layer index");if(typeof t=="number")return this.findLayer(t);for(const i of this.layers)if(i.name===t)return i;throw new ot(`No such layer: ${t}`)}findLayer(t){if(this.layers.length<=t)throw new ot(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}calculateLosses(){return ft(()=>{const t=[];for(const s of this.layers)for(let i=0;i<s.inboundNodes.length;++i){const o=Li.nodeKey(s,i);this.containerNodes.has(o)&&t.push(...s.calculateLosses())}return t})}getConfig(){const t={name:this.name},s=this.buildNodeConversionMap(this.layers),i=[];for(const r of this.layers){const g=r.getClassName(),n=r.getConfig(),a=[];for(let h=0;h<r.inboundNodes.length;h++){const u=r.inboundNodes[h],d=Li.nodeKey(r,h);let l={};if(this.containerNodes.has(d)){if(u.callArgs)try{JSON.stringify(u.callArgs),l=u.callArgs}catch{console.warn(`Layer ${r.name} was passed non-serializable keyword arguments: ${u.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),l={}}if(u.inboundLayers.length>0){const c=[];for(let m=0;m<u.inboundLayers.length;m++){const f=u.inboundLayers[m],v=u.nodeIndices[m],S=u.tensorIndices[m],x=Li.nodeKey(f,v);let T=s[x];T==null&&(T=0),c.push([f.name,T,S,l])}a.push(c)}}}const p={};p.name=r.name,p.className=g,p.config=n,p.inboundNodes=a,i.push(p)}t.layers=i;const o=[];for(let r=0;r<this.inputLayers.length;r++){const g=this.inputLayers[r],n=this.inputLayersNodeIndices[r],a=Li.nodeKey(g,n);if(!this.containerNodes.has(a))continue;let p=s[a];p==null&&(p=0);const h=this.inputLayersTensorIndices[r];o.push([g.name,p,h])}t.inputLayers=o;const y=[];for(let r=0;r<this.outputLayers.length;r++){const g=this.outputLayers[r],n=this.outputLayersNodeIndices[r],a=Li.nodeKey(g,n);if(!this.containerNodes.has(a))continue;let p=s[a];p==null&&(p=0);const h=this.outputLayersTensorIndices[r];y.push([g.name,p,h])}return t.outputLayers=y,t}static fromConfig(t,s,i={},o=!1){const y={},r={};function g(m,f){m.name in r?r[m.name].push(f):r[m.name]=[f]}function n(m,f){const v=[];let S;for(const x of f){const T=x[0],C=x[1],w=x[2];if(S=x[3]==null?{}:x[3],!(T in y)){g(m,f);return}const b=y[T];if(b.inboundNodes.length<=C){g(m,f);return}const E=b.inboundNodes[C];v.push(E.outputTensors[w])}v.length>0&&m.apply(fs(v),S)}function a(m){const f=m.name,v=Vr(m,s.customObjects!=null?s.customObjects:{});v.setFastWeightInitDuringBuild(o),y[f]=v,m.inboundNodes.forEach(x=>{if(!(x instanceof Array))throw new ot(`Corrupted configuration, expected array for nodeData: ${x}`);g(v,x)})}const p=s.name,h=s.layers;for(const m of h)a(m);for(;!mq(r);)for(const m of h){const f=y[m.name];if(f.name in r){const v=r[f.name];delete r[f.name];for(const S of v)n(f,S)}}const u=[],d=[],l=s.inputLayers;for(const m of l){const f=m[0],v=m[1],S=m[2];rr(f in y);const T=y[f].inboundNodes[v].outputTensors;u.push(T[S])}const c=s.outputLayers;for(const m of c){const f=m[0],v=m[1],S=m[2];rr(f in y);const T=y[f].inboundNodes[v].outputTensors;d.push(T[S])}return new t({inputs:u,outputs:d,name:p})}get stateful(){if(this._stateful)throw new ot("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){ft(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function N_(e,t,s){const i=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(o=>null);if(i===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==i)throw new Error(`Provided ${s} is an array of ${e.length} element(s), but the model has ${i} outputs. Make sure a set of weights is provided for each model output.`);return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){const o=[];return t.forEach(y=>{y in e?o.push(e[y]):o.push(null)}),o}else throw new Error(`The model has multiple (${i}) outputs, so ${s} must be either an array with ${i} elements or an object with ${t} keys. Provided ${s} not understood: ${JSON.stringify(e)}`)}function AD(e,t){return N_(e,t,"classWeight")}async function ID(e,t,s,i){if(t!=null||i!=null)throw new Error("Support sampleWeight is not implemented yet");if(s!=null){const o=ft(()=>{if(e.shape.length===1)return zr(e);if(e.shape.length===2){if(e.shape[1]>1)return ru(e,1);if(e.shape[1]===1)return at(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),y=Array.from(await o.data());ne(o);const r=[];return y.forEach(g=>{if(s[g]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${g} exists in the data but not in classWeight`);r.push(s[g])}),is(r,"float32")}else return null}function P_(e,t){return rt(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const F_=32;function RD(e,t){let s,i;const o=t;s=o.xs,i=o.ys,q(s!=null&&i!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);const y=bA("input",e.inputNames,s),r=bA("output",e.outputNames,i),g=y[0].shape[0];q(y.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${y.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),q(r.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${r.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let n=0;n<y.length;n++)q(y[n].shape[0]===g,()=>`Batch size mismatch: input ${e.inputNames[n]} has ${y[n].shape[0]}; expected  ${g} based on input ${e.inputNames[0]}.`);for(let n=0;n<r.length;n++)q(r[n].shape[0]===g,()=>`Batch size mismatch: output ${e.outputNames[n]} has ${r[n].shape[0]}; expected  ${g} based on input ${e.inputNames[0]}.`);return{xs:y,ys:r}}function bA(e,t,s){if(s instanceof $e)return[s];if(Array.isArray(s))return q(s.length===t.length,()=>`Received an array of ${s.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),s;{const i=[];for(const o of t){if(s[o]==null)throw new ot(`The feature data generated by the dataset lacks the required ${e} key '${o}'.`);i.push(s[o])}return i}}function O_(e){if(e.length===3)throw new qt("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function D_(e,t,s){const i=s.batchesPerEpoch!=null;if(q(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),q(s!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),q(s.epochs!=null&&s.epochs>0&&Number.isInteger(s.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${s.epochs}`),q(!i||s.batchesPerEpoch>0&&Number.isInteger(s.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${s.batchesPerEpoch}`),q(s.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const o=s.validationData!=null;let y,r;if(o)if(AA(s.validationData))q(s.validationBatches==null||s.validationBatches>0&&Number.isInteger(s.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${s.validationBatches}`);else{const m=O_(s.validationData);y=m.xs,r=m.ys}const g=e.makeTrainFunction(),n=e.getDedupedMetricsNames();let a;o?a=n.slice().concat(n.map(m=>"val_"+m)):a=n.slice();const p=gD(s.callbacks,s.yieldEvery),h=s.verbose==null?1:s.verbose,{callbackList:u,history:d}=xD(p,h,s.epochs,null,null,L_(t,s),null,o,a);u.setModel(e),e.history=d,await u.onTrainBegin(),e.stopTraining_=!1;let l=s.initialEpoch==null?0:s.initialEpoch,c=await t.iterator();for(;l<s.epochs;){const m={};await u.onEpochBegin(l);let f=0,v=0;for(i||(c=await t.iterator());!i||f<s.batchesPerEpoch;){const S=await c.next();if(i&&S.done){console.warn(`You provided \`batchesPerEpoch\` as ${s.batchesPerEpoch}, but your dataset iterator ran out of data after ${f} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${s.batchesPerEpoch*s.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(S.value!=null){const{xs:x,ys:T}=RD(e,S.value),C={};C.batch=v,C.size=x[0].shape[0],await u.onBatchBegin(v,C);const w=[];if(s.classWeight!=null){const A=AD(s.classWeight,e.outputNames);for(let I=0;I<A.length;++I)w.push(await ID(T[I],null,A[I]))}const b=x.concat(T).concat(w),E=g(b);ne(b);for(let A=0;A<n.length;++A){const I=n[A],R=E[A];C[I]=R,bn(R)}await u.onBatchEnd(v,C),vD(C),v++,f++}if(i?f>=s.batchesPerEpoch:S.done){if(o){let x;AA(s.validationData)?x=Pe(await e.evaluateDataset(s.validationData,{batches:s.validationBatches})):x=Pe(e.evaluate(y,r,{batchSize:s.validationBatchSize==null?F_:s.validationBatchSize,verbose:0}));for(let T=0;T<e.metricsNames.length;++T)m[`val_${e.metricsNames[T]}`]=x[T]}break}if(e.stopTraining_)break}if(await u.onEpochEnd(l,m),l++,e.stopTraining_)break}return await u.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function L_(e,t){let s=null;return t.batchesPerEpoch!=null?s=t.batchesPerEpoch:Number.isFinite(e.size)&&(s=e.size),s}function AA(e){return typeof e.iterator=="function"}function M_(e){return typeof e.next=="function"}async function $_(e,t,s){s=s||{};const i=s.batches!=null,o=e.testFunction;let y=[];if(s.verbose>0)throw new qt("Verbose mode is not implemented yet.");q(!i||s.batches>0&&Number.isInteger(s.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(s.batches)}`);const r=M_(t)?t:await t.iterator();let g=0,n=0;for(;!i||n<s.batches;){const a=await r.next();if(y=ft(()=>{if(a.value){const{xs:p,ys:h}=RD(e,a.value),u=p.concat(h),d=ft(()=>o(u));if(ne(u),n===0)for(let c=0;c<d.length;++c)y.push(Wt(0));const l=u[0].shape[0];for(let c=0;c<d.length;++c){const m=d[c],f=y[c];y[c]=ft(()=>wt(y[c],rt(l,m))),n>0&&ne(f)}ne(d),g+=l,++n}return y}),a.done){i&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${s.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let a=0;a<y.length;++a){const p=y[a];y[a]=kt(y[a],g),ne(p)}return fs(y)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function j0(e){q(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function ih(e,t,s){return e==null?[null]:Array.isArray(e)?e.map(i=>wo(i,t,s-t)):wo(e,t,s-t)}function n1(e,t){return ft(()=>e==null?null:Array.isArray(e)?e.map(s=>n1(s,t)):nD(e,t.dtype==="int32"?t:Ft(t,"int32")))}function Z0(e,t){const s=[];let i=0,o=null;for(;i<e;)o=i+t,o>=e&&(o=e),s.push([i,o]),i=o;return s}function ND(e){const t=[];e instanceof $e&&(e=[e]);for(let s=0;s<e.length;++s){const i=e[s];if(i.rank===1)t.push(Of(i,1));else{if(i.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(i)}}return t}function Di(e,t){if(e==null)return;const s=[];if(t instanceof $e)s.push(t.id);else if(Array.isArray(t))t.forEach(o=>s.push(o.id));else if(t!=null)for(const o in t){const y=t[o];s.push(y.id)}const i=[];if(e instanceof $e)s.indexOf(e.id)===-1&&i.push(e);else if(Array.isArray(e))e.forEach(o=>{s.indexOf(o.id)===-1&&i.push(o)});else if(e!=null)for(const o in e){const y=e[o];s.indexOf(y.id)===-1&&i.push(y)}i.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function B_(e){return e instanceof $e}function s1(e){return Array.isArray(e)}function IA(e){return!B_(e)&&!s1(e)}function RA(e,t,s,i=!0,o=""){if(t==null||t.length===0){if(e!=null){let r=!1;if(s1(e)&&e.length>0)r=!0;else if(IA(e)){for(const g in e)if(e.hasOwnProperty(g)){r=!0;break}}else r=!0;if(r)throw new ot(`Error when checking model ${o} expected no data, but got ${e}`)}return[]}if(e==null)return t.map(r=>null);let y;if(IA(e)){e=e,y=[];for(const r of t){if(e[r]==null)throw new ot(`No data provided for "${r}". Need data for each key in: ${t}`);y.push(e[r])}}else if(s1(e)){if(e=e,e.length!==t.length)throw new ot(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);y=e}else{if(e=e,t.length>1)throw new ot(`The model ${o} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);y=[e]}if(y=ND(y),s!=null)for(let r=0;r<t.length;++r){if(s[r]==null)continue;const g=y[r];if(g.shape.length!==s[r].length)throw new ot(`Error when checking ${o}: expected ${t[r]} to have ${s[r].length} dimension(s). but got array with shape ${g.shape}`);for(let n=0;n<s[r].length;++n){if(n===0&&!i)continue;const a=g.shape[n],p=s[r][n];if(p!=null&&p>=0&&a!==p)throw new ot(`${o} expected a batch of elements where each example has shape [${s[r].slice(1,s[r].length)}] (i.e.,tensor shape [*,${s[r].slice(1,s[r].length)}]) but the ${o} received an input with ${g.shape[0]} examples, each with shape [${g.shape.slice(1,g.shape.length)}] (tensor shape [${g.shape}])`)}}return y}function k_(e,t,s){const i=Ra(e.map(y=>y.shape[0]));i.sort();const o=Ra(t.map(y=>y.shape[0]));if(o.sort(),i.length>1)throw new ot(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(y=>y.shape))}`);if(o.length>1)throw new ot(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(y=>y.shape))}`);if(i.length>0&&o.length>0&&!oe(i,o))throw new ot(`Input Tensors should have the same number of samples as target Tensors. Found ${i[0]} input sample(s) and ${o[0]} target sample(s).`)}function z_(e,t,s){const i=[Rg,Ng,oc];for(let o=0;o<e.length;++o){const y=e[o],r=t[o],g=s[o];if(r!=null){if(r===oc&&y.shape[y.shape.length-1]===1)throw new ot(`You are passing a target array of shape ${y.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(i.indexOf(r)!==-1){const n=y.shape.slice(1),a=g.slice(1);for(let p=0;p<n.length;++p){const h=n[p],u=a[p];if(u!=null&&h!==u)throw new ot(`A target Tensor with shape ${y.shape} was passed for an output of shape ${g}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function NA(e,t,s,i=!0,o=""){let y;if(Array.isArray(e)){if(e.length!==t.length)throw new ot(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);y=e}else{if(t.length>1)throw new ot(`The model expects ${t.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);y=[e]}if(s!=null)for(let r=0;r<t.length;++r){if(s[r]==null)continue;const g=y[r];if(g.shape.length!==s[r].length)throw new ot(`Error when checking ${o}: expected ${t[r]} to have ${s[r].length} dimension(s), but got array with shape ${JSON.stringify(g.shape)}`);for(let n=0;n<s[r].length;++n){if(n===0&&!i)continue;const a=g.shape[n],p=s[r][n];if(p!=null&&p!==a)throw new ot(`Error when checking ${o}: expected ${t[r]} to have shape ${JSON.stringify(s[r])} but got array with shape ${JSON.stringify(g.shape)}.`)}}}function V_(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(i=>[]);let s;if(typeof e=="string"||typeof e=="function")s=[e];else if(Array.isArray(e)||typeof e=="object")s=e;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);if(Array.isArray(s))return t.map(i=>s);{const i=[];for(const o of t){let y=s.hasOwnProperty(o)?s[o]:[];Array.isArray(y)||(y=[y]),i.push(y)}return i}}const G_="layers-model";class Xl extends Li{constructor(t){super(t),this.isTraining=!1}summary(t,s,i=console.log){if(!this.built)throw new ot("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");E_(this,t,s,i)}compile(t){if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=w_(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof _a))throw new ot("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let s=[];if(!Array.isArray(t.loss)&&typeof t.loss!="string"&&typeof t.loss!="function"){t.loss=t.loss;for(const r in t.loss)if(this.outputNames.indexOf(r)===-1)throw new ot(`Unknown entry in loss dictionary: "${r}". Only expected the following keys: ${this.outputNames}`);for(const r of this.outputNames)t.loss[r]==null&&console.warn(`Output "${r}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${r} during training`),s.push(K0(t.loss[r]))}else if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new ot(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);s=t.loss.map(g=>K0(g))}else{const r=K0(t.loss);this.outputs.forEach(g=>{s.push(r)})}this.lossFunctions=s,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let r=0;r<this.outputs.length;++r){const g=this.internalOutputShapes[r],n=this.outputNames[r];this.feedOutputNames.push(n),this.feedOutputShapes.push(g),this.feedLossFns.push(this.lossFunctions[r])}const i=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Co("loss",()=>{for(let r=0;r<this.outputs.length;++r){if(i.indexOf(r)!==-1)continue;const g=this.lossFunctions[r];this.outputs.length>1&&(this.metricsTensors.push([g,r]),this.metricsNames.push(this.outputNames[r]+"_loss"))}});const o=V_(t.metrics,this.outputNames),y=(r,g,n)=>{this.outputNames.length>1&&(g=this.outputNames[r]+"_"+g),this.metricsNames.push(g),this.metricsTensors.push([n,r])};Co("metric",()=>{for(let r=0;r<this.outputs.length;++r){if(i.indexOf(r)!==-1)continue;const g=o[r];(a=>{const p="";let h,u,d;for(const l of a){if(typeof l=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(l)!==-1){const m=this.internalOutputShapes[r];m[m.length-1]===1||this.lossFunctions[r]===Ng?["accuracy","acc"].indexOf(l)!==-1?u=SD:["crossentropy","ce"].indexOf(l)!==-1&&(u=d_):this.lossFunctions[r]===tm?["accuracy","acc"].indexOf(l)!==-1?u=p_:["crossentropy","ce"].indexOf(l)!==-1&&(u=wD):["accuracy","acc"].indexOf(l)!==-1?u=TD:["crossentropy","ce"].indexOf(l)!==-1&&(u=CD);let f;["accuracy","acc"].indexOf(l)!==-1?f="acc":["crossentropy","ce"].indexOf(l)!==-1&&(f="ce"),d=u,h=p+f}else d=C_(l),h=p+Ed(l);let c;Co(h,()=>{c=d}),y(r,h,c)}})(g)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,s,i={}){const o=i.batchSize==null?32:i.batchSize;j0(o);const y=!0,r=this.standardizeUserDataXY(t,s,y,o);try{const g=r[0].concat(r[1]);this.makeTestFunction();const n=this.testFunction,a=this.testLoop(n,g,o,i.verbose,i.steps);return fs(a)}finally{Di(r[0],t),Di(r[1],s)}}async evaluateDataset(t,s){return this.makeTestFunction(),$_(this,t,s)}checkNumSamples(t,s,i,o="steps"){let y;if(i!=null){if(y=null,s!=null)throw new ot(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${s}`)}else if(t!=null)Array.isArray(t)?y=t[0].shape[0]:y=t.shape[0];else throw new ot(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return y}execute(t,s){if(Array.isArray(s)&&s.length===0)throw new ot("`outputs` is an empty Array, which is not allowed.");const i=Array.isArray(s),o=i?s:[s],y=this.retrieveSymbolicTensors(o),r=new ma;if(t instanceof $e&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new ot(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let n=0;n<this.inputs.length;++n)r.add(this.inputs[n],t[n])}else for(const n of this.inputs){const a=t[n.name];if(a==null)throw new ot(`No value is provided for the model's input ${n.name}`);r.add(n,a)}const g=mh(y,r);return i?g:g[0]}retrieveSymbolicTensors(t){const s=ko(null,t.length);let i=t.length;for(const o of this.layers){const y=Array.isArray(o.output)?o.output:[o.output],r=y.map(g=>g.name);for(let g=0;g<t.length;++g){const n=r.indexOf(t[g]);if(n!==-1&&(s[g]=y[n],i--),i===0)break}if(i===0)break}if(i>0){const o=[];throw s.forEach((y,r)=>{y==null&&o.push(t[r])}),new ot(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return s}predictLoop(t,s=32,i=!1){return ft(()=>{const o=this.checkNumSamples(t);if(i)throw new qt("Verbose predictLoop() is not implemented yet.");const y=Z0(o,s),r=this.outputs.map(g=>[]);for(let g=0;g<y.length;++g)ft(()=>{const a=y[g][0],p=y[g][1],h=ih(t,a,p),u=[];if(Array.isArray(h))for(let l=0;l<h.length;++l)u.push({key:this.inputs[l],value:h[l]});else u.push({key:this.inputs[0],value:h});const d=new ma(u);return mh(this.outputs,d)}).forEach((a,p)=>r[p].push(a));return fs(r.map(g=>on(g,0)))})}predict(t,s={}){const i=ND(t);NA(i,this.inputNames,this.feedInputShapes,!1);try{const o=s.batchSize==null?32:s.batchSize;return j0(o),this.predictLoop(i,o)}finally{Di(i,t)}}predictOnBatch(t){NA(t,this.inputNames,this.feedInputShapes,!0);const s=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,s)}standardizeUserDataXY(t,s,i=!0,o){if(this.optimizer_==null)throw new vi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const y=[];for(let r=0;r<this.feedOutputShapes.length;++r){const g=this.feedOutputShapes[r];this.feedLossFns[r]===tm?y.push(g.slice(0,g.length-1).concat([1])):y.push(g)}if(t=RA(t,this.feedInputNames,this.feedInputShapes,!1,"input"),s=RA(s,this.feedOutputNames,y,!1,"target"),k_(t,s),z_(s,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&t[0].shape[0]%o!==0)throw new ot(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${t[0].shape[0]} sample(s).`);return[t,s]}async standardizeUserData(t,s,i,o,y=!0,r){const[g,n]=this.standardizeUserDataXY(t,s,y,r);if(i!=null)throw new Error("sample weight is not supported yet.");let a=null;if(o!=null){const p=AD(o,this.outputNames);a=[];for(let h=0;h<p.length;++h)a.push(await ID(n[h],null,p[h]))}return[g,n,a]}testLoop(t,s,i,o=0,y){return ft(()=>{const r=this.checkNumSamples(s,i,y,"steps"),g=[];if(o>0)throw new qt("Verbose mode is not implemented yet.");if(y!=null)throw new qt("steps mode in testLoop() is not implemented yet");{const n=Z0(r,i),a=is(Yi(0,r));for(let p=0;p<n.length;++p){const h=n[p][0],u=n[p][1],d=wo(a,h,u-h),l=n1(s,d),c=t(l);if(p===0)for(let m=0;m<c.length;++m)g.push(Wt(0));for(let m=0;m<c.length;++m){const f=c[m];g[m]=wt(g[m],rt(u-h,f))}}for(let p=0;p<g.length;++p)g[p]=kt(g[p],r)}return g})}getDedupedMetricsNames(){const t=this.metricsNames,s=[];for(let i=0;i<t.length;++i){const o=t[i];let y=o;if(dA(t,o)>1){const r=dA(t.slice(0,i),o);y+=`_${r}`}s.push(y)}return s}makeTrainFunction(){return t=>{const s=[],i=t.slice(0,this.inputs.length),o=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),y=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),r=[],g=()=>{const h=[];for(let c=0;c<this.inputs.length;++c)h.push({key:this.inputs[c],value:i[c]});const u=new ma(h),d=mh(this.outputs,u,{training:!0});let l;for(let c=0;c<this.lossFunctions.length;++c){const m=this.lossFunctions[c];let f=m(o[c],d[c]);y[c]!=null&&(f=P_(f,y[c]));const v=Ye(f);s.push(v),c===0?l=f:l=wt(l,f)}for(let c=0;c<this.metricsTensors.length;++c){let m;if(this.outputs.length>1&&c<this.outputs.length)m=s[c];else{const f=this.metricsTensors[c][0],v=this.metricsTensors[c][1];m=Ye(f(o[v],d[v]))}bn(m),r.push(m)}return l=Ye(l),this.calculateLosses().forEach(c=>{l=wt(l,c)}),l},n=this.collectedTrainableWeights.map(h=>h.read()),a=!0;return[this.optimizer_.minimize(g,a,n)].concat(r)}}makeTestFunction(){this.testFunction=t=>ft(()=>{const s=[];let i;const o=t.slice(0,this.inputs.length),y=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=[];for(let a=0;a<this.inputs.length;++a)r.push({key:this.inputs[a],value:o[a]});const g=new ma(r),n=mh(this.outputs,g);for(let a=0;a<this.lossFunctions.length;++a){const p=this.lossFunctions[a],h=Ye(p(y[a],n[a]));a===0?i=h:i=wt(i,h),s.push(i)}for(let a=0;a<this.metricsTensors.length;++a){const p=this.metricsTensors[a][0],h=this.metricsTensors[a][1],u=Ye(p(y[h],n[h]));s.push(u)}return s})}async fit(t,s,i={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let o,y,r,g,n,a,p,h,u;try{const d=i.batchSize==null?32:i.batchSize;j0(d);const l=!1,c=await this.standardizeUserData(t,s,i.sampleWeight,i.classWeight,l,d);o=c[0],y=c[1],u=c[2];let m=!1,f;if(i.validationData!=null&&i.validationData.length>0){if(m=!0,i.validationData.length===2)n=i.validationData[0],a=i.validationData[1];else throw i.validationData.length===3?new qt("validationData including sample weights is not supported yet."):new ot(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${i.validationData} is invalid.`);const E=!0,A=await this.standardizeUserData(n,a,null,null,E,d);p=A[0],h=A[1],f=p.concat(h)}else if(i.validationSplit!=null&&i.validationSplit>0&&i.validationSplit<1){m=!0;const E=Math.floor(o[0].shape[0]*(1-i.validationSplit)),A=o[0].shape[0];p=ih(o,E,A),r=o,o=ih(o,0,E),h=ih(y,E,A),g=y,y=ih(y,0,E),f=p.concat(h)}else i.validationSteps!=null&&(m=!0);const v=o.concat(y).concat(u);this.checkTrainableWeightsConsistency();const S=this.makeTrainFunction(),x=this.getDedupedMetricsNames();let T,C;m?(this.makeTestFunction(),T=this.testFunction,C=x.slice().concat(x.map(E=>"val_"+E))):(T=null,f=[],C=x.slice());const w=gD(i.callbacks,i.yieldEvery);return await this.fitLoop(S,v,x,d,i.epochs,i.verbose,w,T,f,i.shuffle,C,i.initialEpoch,null,null)}finally{this.isTraining=!1,Di(o,t),Di(y,s),Di(r,t),Di(g,s),Di(p,n),Di(h,a),u!=null&&ne(u)}}async fitLoop(t,s,i,o,y,r,g,n,a,p,h,u,d,l){o==null&&(o=32),y==null&&(y=1),p==null&&(p=!0),u==null&&(u=0);let c=!1;if(n!=null&&a!=null&&(c=!0),l!=null&&(c=!0,d==null))throw new ot("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(s,o,d,"steps_per_epoch");let f;m!=null&&(f=Yi(0,m)),r==null&&(r=1);const{callbackList:v,history:S}=xD(g,r,y,u,m,d,o,c,h);v.setModel(this),this.history=S,await v.onTrainBegin(),this.stopTraining_=!1;for(let x=u;x<y;++x){await v.onEpochBegin(x);const T={};if(d!=null)throw new qt("stepsPerEpoch mode is not implemented yet.");{if(p==="batch")throw new qt("batch shuffling is not implemneted yet");p&&zG(f);const C=is(f),w=Z0(m,o);for(let b=0;b<w.length;++b){const E={};if(await v.onBatchBegin(b,E),ft(()=>{const A=w[b][0],I=w[b][1],R=wo(C,A,I-A);E.batch=b,E.size=I-A;const N=n1(s,R),F=t(N);for(let P=0;P<i.length;++P){const D=i[P],M=F[P];E[D]=M,bn(M)}if(b===w.length-1&&c){const P=this.testLoop(n,a,o);for(let D=0;D<i.length;++D){const M=i[D],L=P[D];bn(L),T["val_"+M]=L}}}),await v.onBatchEnd(b,E),vD(E),this.stopTraining_)break}C.dispose()}if(await v.onEpochEnd(x,T),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(t,s){return D_(this,t,s)}async trainOnBatch(t,s){const i=await this.standardizeUserData(t,s),o=i[0],y=i[1],g=this.makeTrainFunction()(o.concat(y)),n=[];for(const a of g){const p=await a.data();n.push(p[0])}return ne(g),Di(i[0],t),Di(i[1],s),fs(n)}getNamedWeights(t){const s=[],i=t!=null&&t.trainableOnly,o=i?this.trainableWeights:this.weights,y=this.getWeights(i);for(let r=0;r<o.length;++r)i&&!o[r].trainable||s.push({name:o[r].originalName,tensor:y[r]});return s}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const s=Gy().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=s-Gy().numTensors}return t}getLossIdentifiers(){let t;if(typeof this.loss=="string")t=Fr(this.loss);else if(Array.isArray(this.loss)){for(const s of this.loss)if(typeof s!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(s=>Fr(s))}else{const s=Object.keys(this.loss);t={};const i=this.loss;for(const o of s)if(typeof i[o]=="string")t[o]=Fr(i[o]);else throw new Error("Serialization of non-string loss is not supported.")}return t}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Fr(Ed(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>Fr(Ed(t)));{const t={};for(const s in this.metrics)t[s]=Fr(Ed(this.metrics[s]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const s=t1(t.optimizer_config),i=Vr(s);let o;if(typeof t.loss=="string")o=ho(t.loss);else if(Array.isArray(t.loss))o=t.loss.map(r=>ho(r));else if(t.loss!=null){o={};for(const r in t.loss)o[r]=ho(t.loss[r])}let y;if(Array.isArray(t.metrics))y=t.metrics.map(r=>ho(r));else if(t.metrics!=null){y={};for(const r in t.metrics)y[r]=ho(t.metrics[r])}this.compile({loss:o,metrics:y,optimizer:i})}async save(t,s){if(typeof t=="string"){const a=k3(t);if(a.length===0)throw new ot(`Cannot find any save handlers for URL '${t}'`);if(a.length>1)throw new ot(`Found more than one (${a.length}) save handlers for URL '${t}'`);t=a[0]}if(t.save==null)throw new ot("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const i=await By(this.getNamedWeights(s)),o=!1,y=null,g={modelTopology:this.toJSON(y,o),format:G_,generatedBy:`TensorFlow.js tfjs-layers v${bD}`,convertedBy:null};if((s==null?!1:s.includeOptimizer)&&this.optimizer!=null){g.trainingConfig=this.getTrainingConfig();const a="optimizer",{data:p,specs:h}=await By(await this.optimizer.getWeights(),a);i.specs.push(...h),i.data=L3([i.data,p])}return this.userDefinedMetadata!=null&&(EA(this.userDefinedMetadata,this.name,!0),g.userDefinedMetadata=this.userDefinedMetadata),g.weightData=i.data,g.weightSpecs=i.specs,t.save(g)}setUserDefinedMetadata(t){EA(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}Xl.className="Model";Et(Xl);class PD extends Xl{}PD.className="Functional";Et(PD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class lc extends Xl{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:bg("sequential_"),t.layers!=null)for(const s of t.layers)this.add(s)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(i=>i<0))throw new ot(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const s=t instanceof lc||t instanceof Xl;let i;if(s){if(i=t,i.outputs.length!==1)throw new ot("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(i.inputs.length!==1)throw new ot("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new ot("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=Hq({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(o)}if(s)this.outputs=i.outputs,this.inputs=i.inputs;else{if(t.inboundNodes.length!==1)throw new ot(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new ot("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=cD(this.outputs[0])}this.inboundNodes=[],new Ig({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:ko(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=t.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,s){return this.model==null&&this.build(),this.model.call(t,s)}build(t){if(pe(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Xl({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,s,i=console.log){this.built||this.build(),super.summary(t,s,i)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,s,i={}){if(!this.built)throw new vi("The model needs to be compiled before being used.");return this.model.evaluate(t,s,i)}async evaluateDataset(t,s){if(!this.built)throw new vi("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,s)}predict(t,s={}){return this.model==null&&this.build(),this.model.predict(t,s)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,s,i={}){if(!this.built)throw new vi("The model needs to be compiled before being used.");return this.model.fit(t,s,i)}async fitDataset(t,s){if(!this.built)throw new vi("The model needs to be compiled before being used.");return this.model.fitDataset(t,s)}async trainOnBatch(t,s){return this.model.trainOnBatch(t,s)}static fromConfig(t,s,i={},o=!1){let y,r={};if(s instanceof Array){if(s[0].className==null||s[0].className==="Merge")throw new ot("Legacy serialization format not supported yet.");y=s}else q(s.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),y=s.layers,delete s.layers,r=s;const g=new t(r);if(!(g instanceof lc))throw new qt(`Sequential.fromConfig called on non-Sequential input: ${g}`);for(const n of y){const p=Vr(n,void 0,o);o&&p.setFastWeightInitDuringBuild(!0),g.add(p)}return g}set stopTraining(t){if(this.model==null)throw new ot("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new ot("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const s of this.layers){const i={};i.className=s.getClassName(),i.config=s.getConfig(),t.push(i)}return{name:this.name,layers:t}}}lc.className="Sequential";Et(lc);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ys=class extends Ou{getConfig(){return{}}};class FD extends ys{apply(t,s=1){return Pq(t,s)}}FD.className="elu";Et(FD);class OD extends ys{apply(t){return TT(t)}}OD.className="selu";Et(OD);class DD extends ys{apply(t){return Cr(t)}}DD.className="relu";Et(DD);class LD extends ys{apply(t){return ft(()=>$o(6,Cr(t)))}}LD.className="relu6";Et(LD);class MD extends ys{apply(t){return t}}MD.className="linear";Et(MD);class $D extends ys{apply(t){return vr(t)}}$D.className="sigmoid";Et($D);class BD extends ys{apply(t){return Oq(t)}}BD.className="hardSigmoid";Et(BD);class kD extends ys{apply(t){return Nu(t)}}kD.className="softplus";Et(kD);class zD extends ys{apply(t){return Fq(t)}}zD.className="softsign";Et(zD);class VD extends ys{apply(t){return au(t)}}VD.className="tanh";Et(VD);let IC=class extends ys{apply(t,s=-1){return pg(t,s)}};IC.className="softmax";Et(IC);class GD extends ys{apply(t,s=-1){return rT(t,s)}}GD.className="logSoftmax";Et(GD);class UD extends ys{apply(t,s=1){return ft(()=>rt(vr(rt(t,s)),t))}}UD.className="swish";Et(UD);class WD extends ys{apply(t){return ft(()=>rt(t,au(Nu(t))))}}WD.className="mish";Et(WD);function ka(e){return e.getClassName()}function J0(e,t={}){return Ff(e,ui.getMap().classNameMap,t,"activation")}function za(e){if(e==null){const t={};return t.className="linear",t.config={},J0(t)}if(typeof e=="string"){const t={};return t.className=e,t.config={},J0(t)}else return e instanceof ys?e:J0(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function U_(e){if(e!=null&&typeof e!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}class HD extends Ou{}class XD extends HD{constructor(t){super(),U_(t),this.l1=t==null||t.l1==null?.01:t.l1,this.l2=t==null||t.l2==null?.01:t.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(t){return ft(()=>{let s=fn([1]);return this.hasL1&&(s=wt(s,Mt(rt(this.l1,un(t))))),this.hasL2&&(s=wt(s,Mt(rt(this.l2,Df(t))))),at(s,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,s){return new t({l1:s.l1,l2:s.l2})}}XD.className="L1L2";Et(XD);const PA={l1l2:"L1L2"};function Ae(e){return dC(e)}function FA(e,t={}){return Ff(e,ui.getMap().classNameMap,t,"regularizer")}function ze(e){if(e==null)return null;if(typeof e=="string"){const s={className:e in PA?PA[e]:e,config:{}};return FA(s)}else return e instanceof HD?e:FA(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class YD extends ie{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null&&(this.maxValue=t.maxValue)}call(t,s){t=jt(t);let i=Cr(t);return this.maxValue!=null&&(i=Ds(i,0,this.maxValue)),i}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},s=super.getConfig();return Object.assign(t,s),t}}YD.className="ReLU";Et(YD);class KD extends ie{constructor(t){super(t??{}),this.DEFAULT_ALPHA=.3,t==null&&(t={}),this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,s){const i=jt(t);return ig(i,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},s=super.getConfig();return Object.assign(t,s),t}}KD.className="LeakyReLU";Et(KD);class jD extends ie{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),this.supportsMasking=!0,this.alphaInitializer=ke(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ze(t.alphaRegularizer),this.alphaConstraint=xn(t.alphaConstraint),t.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else if(typeof t.sharedAxes=="number")this.sharedAxes=[t.sharedAxes];else throw new ot(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`)}build(t){t=pe(t);const s=t.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)s[o-1]=1;this.alpha=this.addWeight("alpha",s,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const i={};if(this.sharedAxes!=null)for(let o=1;o<t.length;++o)i[o]=t[o];this.inputSpec=[new pn({ndim:t.length,axes:i})],this.built=!0}call(t,s){return t=jt(t),hg(t,this.alpha.read())}getConfig(){const t={alphaInitializer:Ue(this.alphaInitializer),alphaRegularizer:Ae(this.alphaRegularizer),alphaConstraint:gn(this.alphaConstraint),sharedAxes:this.sharedAxes},s=super.getConfig();return Object.assign(t,s),t}}jD.className="PReLU";Et(jD);let ZD=class extends ie{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==this.DEFAULT_ALPHA)throw new qt(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,s){const i=jt(t);return Ef(i)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},s=super.getConfig();return Object.assign(t,s),t}};ZD.className="ELU";Et(ZD);class JD extends ie{constructor(t){super(t??{}),this.DEFAULT_THETA=1,t==null&&(t={}),this.theta=t.theta==null?this.DEFAULT_THETA:t.theta}call(t,s){const i=jt(t);return rt(i,Ft(ks(i,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},s=super.getConfig();return Object.assign(t,s),t}}JD.className="ThresholdedReLU";Et(JD);class QD extends ie{constructor(t){super(t??{}),this.DEFAULT_AXIS=1,t==null&&(t={}),this.softmax=new IC().apply,this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis}call(t,s){const i=jt(t);return this.softmax(i,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},s=super.getConfig();return Object.assign(t,s),t}}QD.className="Softmax";Et(QD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yl(e,t,s){if(typeof e=="number")return ko(e,t);if(e.length!==t)throw new ot(`The ${s} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let i=0;i<t;++i){const o=e[i];if(!Aq(o))throw new ot(`The ${s} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${o}`)}return e}function Wi(e,t,s,i,o=1){if(e==null)return e;const y=t+(t-1)*(o-1);let r;return s==="same"?r=e:r=e-y+1,Math.floor((r+i-1)/i)}function ar(e,t,s,i){if(e==null)return null;if(i==="valid")e=e*t+Ba([s-t,0]);else if(i==="same")e=e*t;else throw new ot(`Unsupport padding mode: ${i}.`);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RC(e,t){return ft(()=>(en(t),t==="channelsFirst"?ue(e,[0,2,3,1]):e))}function qD(e,t){return ft(()=>(en(t),t==="channelsFirst"?ue(e,[0,2,3,4,1]):e))}function W_(e,t,s,i=1,o="valid",y,r=1){return ft(()=>{if(y==null&&(y=Ki()),en(y),e.shape.length!==3)throw new ot(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(t.shape.length!==3)throw new ot(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(s!=null&&s.shape.length!==1)throw new ot(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(y==="channelsFirst"&&(e=ue(e,[0,2,1])),o==="causal")throw new qt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let g=qS(e,t,i,o==="same"?"same":"valid","NWC",r);return s!=null&&(g=Qi(g,s)),g})}function OA(e,t,s,i=[1,1],o="valid",y,r,g=null){return ft(()=>{if(y==null&&(y=Ki()),en(y),e.rank!==3&&e.rank!==4)throw new ot(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(t.rank!==3&&t.rank!==4)throw new ot(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let n=RC(e,y);if(o==="causal")throw new qt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return n=KF({x:n,filter:t,strides:i,pad:o==="same"?"same":"valid",dilations:r,dataFormat:"NHWC",bias:s,activation:g}),y==="channelsFirst"&&(n=ue(n,[0,3,1,2])),n})}function H_(e,t,s,i=[1,1,1],o="valid",y,r){return ft(()=>{if(y==null&&(y=Ki()),en(y),e.rank!==4&&e.rank!==5)throw new ot(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(t.rank!==4&&t.rank!==5)throw new ot(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let g=qD(e,y);if(o==="causal")throw new qt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return g=fF(g,t,i,o==="same"?"same":"valid","NDHWC",r),s!=null&&(g=Qi(g,s)),y==="channelsFirst"&&(g=ue(g,[0,4,1,2,3])),g})}class Pg extends ie{constructor(t,s){if(super(s),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Pg.verifyArgs(s),this.rank=t,An(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new qt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Yl(s.kernelSize,t,"kernelSize"),this.strides=Yl(s.strides==null?1:s.strides,t,"strides"),this.padding=s.padding==null?"valid":s.padding,ei(this.padding),this.dataFormat=s.dataFormat==null?"channelsLast":s.dataFormat,en(this.dataFormat),this.activation=za(s.activation),this.useBias=s.useBias==null?!0:s.useBias,this.biasInitializer=ke(s.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=xn(s.biasConstraint),this.biasRegularizer=ze(s.biasRegularizer),this.activityRegularizer=ze(s.activityRegularizer),this.dilationRate=Yl(s.dilationRate==null?1:s.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ot(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ot(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ot(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(rr("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!pC(t.kernelSize,"number",1,3))throw new ot(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:ka(this.activation),useBias:this.useBias,biasInitializer:Ue(this.biasInitializer),biasRegularizer:Ae(this.biasRegularizer),activityRegularizer:Ae(this.activityRegularizer),biasConstraint:gn(this.biasConstraint)},s=super.getConfig();return Object.assign(t,s),t}}class Du extends Pg{constructor(t,s){super(t,s),this.kernel=null,Du.verifyArgs(s),this.filters=s.filters,An(this.filters,"filters"),this.kernelInitializer=ke(s.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=xn(s.kernelConstraint),this.kernelRegularizer=ze(s.kernelRegularizer)}build(t){t=pe(t);const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null)throw new ot(`The channel dimension of the input should be defined. Found ${t[s]}`);const i=t[s],o=this.kernelSize.concat([i,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[s]:i}}],this.built=!0}call(t,s){return ft(()=>{t=jt(t);let i;const o=this.bias==null?null:this.bias.read(),y=JO(this.activation.getClassName());if(y!=null&&this.rank===2)i=OA(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,y);else{if(this.rank===1)i=W_(t,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)i=OA(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)i=H_(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new qt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(i=this.activation.apply(i))}return i})}computeOutputShape(t){t=pe(t);const s=[],i=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let y=0;y<i.length;++y){const r=Wi(i[y],this.kernelSize[y],this.padding,this.strides[y],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[y]);s.push(r)}let o=[t[0]];return this.dataFormat==="channelsLast"?(o=o.concat(s),o.push(this.filters)):(o.push(this.filters),o=o.concat(s)),o}getConfig(){const t={filters:this.filters,kernelInitializer:Ue(this.kernelInitializer),kernelRegularizer:Ae(this.kernelRegularizer),kernelConstraint:gn(this.kernelConstraint)},s=super.getConfig();return Object.assign(t,s),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new ot(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class Bf extends Du{constructor(t){super(2,t),Bf.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!pC(t.kernelSize,"number",1,2))throw new ot(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}Bf.className="Conv2D";Et(Bf);class kf extends Du{constructor(t){super(3,t),kf.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new ot(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}kf.className="Conv3D";Et(kf);class _D extends Bf{constructor(t){if(super(t),this.inputSpec=[new pn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ot(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=pe(t),t.length!==4)throw new ot("Input should have rank 4; Received input shape: "+JSON.stringify(t));const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null)throw new ot("The channel dimension of the inputs should be defined. Found `None`.");const i=t[s],o=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new pn({ndim:4,axes:{[s]:i}})],this.built=!0}call(t,s){return ft(()=>{let i=jt(t);if(i.shape.length!==4)throw new ot(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);const o=i.shape,y=o[0];let r,g;this.dataFormat==="channelsFirst"?(r=2,g=3):(r=1,g=2);const n=o[r],a=o[g],p=this.kernelSize[0],h=this.kernelSize[1],u=this.strides[0],d=this.strides[1],l=ar(n,u,p,this.padding),c=ar(a,d,h,this.padding),m=[y,l,c,this.filters];this.dataFormat!=="channelsLast"&&(i=ue(i,[0,2,3,1]));let f=tT(i,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(f=ue(f,[0,3,1,2])),this.bias!=null&&(f=Qi(f,this.bias.read(),this.dataFormat)),this.activation!=null&&(f=this.activation.apply(f)),f})}computeOutputShape(t){t=pe(t);const s=t.slice();let i,o,y;this.dataFormat==="channelsFirst"?(i=1,o=2,y=3):(i=3,o=1,y=2);const r=this.kernelSize[0],g=this.kernelSize[1],n=this.strides[0],a=this.strides[1];return s[i]=this.filters,s[o]=ar(s[o],n,r,this.padding),s[y]=ar(s[y],a,g,this.padding),s}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}_D.className="Conv2DTranspose";Et(_D);class tL extends kf{constructor(t){if(super(t),this.inputSpec=[new pn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ot(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=pe(t),t.length!==5)throw new ot("Input should have rank 5; Received input shape: "+JSON.stringify(t));const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null)throw new ot("The channel dimension of the inputs should be defined. Found `None`.");const i=t[s],o=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new pn({ndim:5,axes:{[s]:i}})],this.built=!0}call(t,s){return ft(()=>{let i=jt(t);if(i.shape.length!==5)throw new ot(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${i.shape.length}`);const o=i.shape,y=o[0];let r,g,n;this.dataFormat==="channelsFirst"?(n=2,r=3,g=4):(n=1,r=2,g=3);const a=o[n],p=o[r],h=o[g],u=this.kernelSize[0],d=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],m=this.strides[1],f=this.strides[2],v=ar(a,c,u,this.padding),S=ar(p,m,d,this.padding),x=ar(h,f,l,this.padding),T=[y,v,S,x,this.filters];this.dataFormat!=="channelsLast"&&(i=ue(i,[0,2,3,4,1]));let C=pF(i,this.kernel.read(),T,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=ue(C,[0,4,1,2,3])),this.bias!==null&&(C=Qi(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(t){t=pe(t);const s=t.slice();let i,o,y,r;this.dataFormat==="channelsFirst"?(i=1,o=2,y=3,r=4):(i=4,o=1,y=2,r=3);const g=this.kernelSize[0],n=this.kernelSize[1],a=this.kernelSize[2],p=this.strides[0],h=this.strides[1],u=this.strides[2];return s[i]=this.filters,s[o]=ar(s[o],p,g,this.padding),s[y]=ar(s[y],h,n,this.padding),s[r]=ar(s[r],u,a,this.padding),s}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}tL.className="Conv3DTranspose";Et(tL);class eL extends Du{constructor(t,s){if(super(t,s),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,s.filters==null)throw new ot("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(s.kernelInitializer!=null||s.kernelRegularizer!=null||s.kernelConstraint!=null)throw new ot("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(s.padding!=null&&s.padding!=="same"&&s.padding!=="valid")throw new ot(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(s.padding)}`);this.depthMultiplier=s.depthMultiplier==null?1:s.depthMultiplier,this.depthwiseInitializer=ke(s.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ze(s.depthwiseRegularizer),this.depthwiseConstraint=xn(s.depthwiseConstraint),this.pointwiseInitializer=ke(s.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ze(s.pointwiseRegularizer),this.pointwiseConstraint=xn(s.pointwiseConstraint)}build(t){if(t=pe(t),t.length<this.rank+2)throw new ot(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null||t[s]<0)throw new ot(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[s])}`);const i=t[s],o=this.kernelSize.concat([i,this.depthMultiplier]),y=[];for(let g=0;g<this.rank;++g)y.push(1);y.push(i*this.depthMultiplier,this.filters);const r=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,r,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",y,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,r,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,r,this.biasConstraint):this.bias=null,this.inputSpec=[new pn({ndim:this.rank+2,axes:{[s]:i}})],this.built=!0}call(t,s){return ft(()=>{t=jt(t);let i;if(this.rank===1)throw new qt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(t=ue(t,[0,2,3,1])),i=CT(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(i=Qi(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),this.dataFormat==="channelsFirst"&&(i=ue(i,[0,3,1,2])),i})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=Ue(this.depthwiseInitializer),t.pointwiseInitializer=Ue(this.pointwiseInitializer),t.depthwiseRegularizer=Ae(this.depthwiseRegularizer),t.pointwiseRegularizer=Ae(this.pointwiseRegularizer),t.depthwiseConstraint=gn(this.depthwiseConstraint),t.pointwiseConstraint=gn(this.pointwiseConstraint),t}}eL.className="SeparableConv";class nL extends eL{constructor(t){super(2,t)}}nL.className="SeparableConv2D";Et(nL);class Fg extends Du{constructor(t){super(1,t),Fg.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!pC(t.kernelSize,"number",1,1))throw new ot(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}Fg.className="Conv1D";Et(Fg);class sL extends ie{constructor(t){super(t),typeof t.cropping=="number"?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,s){return ft(()=>{if(t=jt(t),this.dataFormat==="channelsLast"){const i=wd(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return wd(i,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const i=wd(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return wd(i,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},s=super.getConfig();return Object.assign(t,s),t}}sL.className="Cropping2D";Et(sL);class iL extends ie{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=t.size==null?this.DEFAULT_SIZE:t.size,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,en(this.dataFormat),this.interpolation=t.interpolation==null?"nearest":t.interpolation,wq(this.interpolation)}computeOutputShape(t){if(this.dataFormat==="channelsFirst"){const s=t[2]==null?null:this.size[0]*t[2],i=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],s,i]}else{const s=t[1]==null?null:this.size[0]*t[1],i=t[2]==null?null:this.size[1]*t[2];return[t[0],s,i,t[3]]}}call(t,s){return ft(()=>{let i=jt(t);const o=i.shape;if(this.dataFormat==="channelsFirst"){i=ue(i,[0,2,3,1]);const y=this.size[0]*o[2],r=this.size[1]*o[3],g=this.interpolation==="nearest"?lr.resizeNearestNeighbor(i,[y,r]):lr.resizeBilinear(i,[y,r]);return ue(g,[0,3,1,2])}else{const y=this.size[0]*o[1],r=this.size[1]*o[2];return this.interpolation==="nearest"?lr.resizeNearestNeighbor(i,[y,r]):lr.resizeBilinear(i,[y,r])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},s=super.getConfig();return Object.assign(t,s),t}}iL.className="UpSampling2D";Et(iL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function X_(e,t,s=[1,1],i="valid",o,y){return ft(()=>{o==null&&(o=Ki()),en(o);let r=RC(e,o);if(e.rank!==4)throw new ot(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(t.rank!==4)throw new ot(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return r=wf(r,t,s,i==="same"?"same":"valid","NHWC",y),o==="channelsFirst"&&(r=ue(r,[0,3,1,2])),r})}class rL extends Pg{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=ke(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=xn(t.depthwiseConstraint),this.depthwiseRegularizer=ze(t.depthwiseRegularizer)}build(t){if(t=pe(t),t.length<4)throw new ot(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const s=this.dataFormat==="channelsFirst"?1:3;if(t[s]==null||t[s]<0)throw new ot(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[s]}).`);const i=t[s],o=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,s){return ft(()=>{t=jt(t);let i=X_(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(i=Qi(i,this.bias.read(),this.dataFormat)),this.activation!=null&&(i=this.activation.apply(i)),i})}computeOutputShape(t){t=pe(t);const s=this.dataFormat==="channelsFirst"?t[2]:t[1],i=this.dataFormat==="channelsFirst"?t[3]:t[2],o=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,y=Wi(s,this.kernelSize[0],this.padding,this.strides[0]),r=Wi(i,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],o,y,r]:[t[0],y,r,o]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=Ue(this.depthwiseInitializer),t.depthwiseRegularizer=Ae(this.depthwiseRegularizer),t.depthwiseConstraint=gn(this.depthwiseRegularizer),t}}rL.className="DepthwiseConv2D";Et(rL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aL(e,t,s,i){if(Array.isArray(e)){if(t!=null||s!=null)throw new ot("When inputs is an array, neither initialState or constants should be provided");i!=null&&(s=e.slice(e.length-i,e.length),e=e.slice(0,e.length-i)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function o(y){return y==null||Array.isArray(y)?y:[y]}return t=o(t),s=o(s),{inputs:e,initialState:t,constants:s}}function oL(e,t,s,i=!1,o,y,r=!1,g=!1){return ft(()=>{const n=t.shape.length;if(n<3)throw new ot(`Input should be at least 3D, but is ${n}D.`);const a=[1,0].concat(Yi(2,n));if(t=ue(t,a),y!=null)throw new qt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");r&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=Ft(Ft(o,"bool"),"float32"),o.rank===n-1&&(o=ns(o,-1)),o=ue(o,a)),i&&(t=Ai(t,0),o!=null&&(o=Ai(o,0)));const p=[];let h,u=s;const d=t.shape[0],l=Ii(t);let c;o!=null&&(c=Ii(o));for(let f=0;f<d;++f){const v=l[f],S=ft(()=>e(v,u));if(o==null)h=S[0],u=S[1];else{const x=ft(()=>{const T=c[f],C=Dt(Zs(T),T),w=wt(rt(S[0],T),rt(u[0],C)),b=u.map((E,A)=>wt(rt(S[1][A],T),rt(E,C)));return{output:w,newStates:b}});h=x.output,u=x.newStates}g&&p.push(h)}let m;return g&&(m=Js(p,1)),[h,m,u]})}class to extends ie{constructor(t){super(t);let s;if(t.cell==null)throw new ot("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?s=new FC({cells:t.cell}):s=t.cell,s.stateSize==null)throw new ot("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=s,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new pn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Yi(0,t).map(s=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){Qy(t)&&(t=t[0]),t=t;let s=this.cell.stateSize;Array.isArray(s)||(s=[s]);const i=s[0];let o;if(this.returnSequences?o=[t[0],t[1],i]:o=[t[0],i],this.returnState){const y=[];for(const r of s)y.push([t[0],r]);return[o].concat(y)}else return o}computeMask(t,s){return ft(()=>{Array.isArray(s)&&(s=s[0]);const i=this.returnSequences?s:null;if(this.returnState){const o=this.states.map(y=>null);return[i].concat(o)}else return i})}get states(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,s=[];for(let i=0;i<t;++i)s.push(null);return s}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new qt("Constants support is not implemented in RNN yet.");Qy(t)&&(t=t[0]),t=t;const s=this.stateful?t[0]:null,i=t.slice(2);this.inputSpec[0]=new pn({shape:[s,null,...i]});const o=[t[0]].concat(t.slice(2));this.cell.build(o);let y;if(Array.isArray(this.cell.stateSize)?y=this.cell.stateSize:y=[this.cell.stateSize],this.stateSpec!=null){if(!oe(this.stateSpec.map(r=>r.shape[r.shape.length-1]),y))throw new ot(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=y.map(r=>new pn({shape:[null,r]}));this.stateful&&this.resetStates()}resetStates(t,s=!1){ft(()=>{if(!this.stateful)throw new ir("Cannot call resetStates() on an RNN Layer that is not stateful.");const i=this.inputSpec[0].shape[0];if(i==null)throw new ot("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>fn([i,o])):this.states_=[fn([i,this.cell.stateSize])];else if(t==null)ne(this.states_),this.keptStates!=null&&(ne(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>fn([i,o])):this.states_[0]=fn([i,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new ot(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);s===!0?this.keptStates.push(this.states_.slice()):ne(this.states_);for(let o=0;o<this.states_.length;++o){const y=t[o],r=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,g=[i,r];if(!oe(y.shape,g))throw new ot(`State ${o} is incompatible with layer ${this.name}: expected shape=${g}, received shape=${y.shape}`);this.states_[o]=y}}this.states_=this.states_.map(o=>bn(o.clone()))})}apply(t,s){let i=s==null?null:s.initialState,o=s==null?null:s.constants;s==null&&(s={});const y=aL(t,i,o,this.numConstants);t=y.inputs,i=y.initialState,o=y.constants;let r=[],g=[];if(i!=null){s.initialState=i,r=r.concat(i),this.stateSpec=[];for(const a of i)this.stateSpec.push(new pn({shape:a.shape}));g=g.concat(this.stateSpec)}if(o!=null&&(s.constants=o,r=r.concat(o),this.numConstants=o.length),r[0]instanceof ur){const a=[t].concat(r),p=this.inputSpec.concat(g),h=this.inputSpec;this.inputSpec=p;const u=super.apply(a,s);return this.inputSpec=h,u}else return super.apply(t,s)}call(t,s){return ft(()=>{const i=s==null?null:s.mask,o=s==null?null:s.training;let y=s==null?null:s.initialState;t=jt(t),y==null&&(this.stateful?y=this.states_:y=this.getInitialState(t));const r=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(y.length!==r)throw new ot(`RNN Layer has ${r} state(s) but was passed ${y.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const g={training:o},a=oL((l,c)=>{const m=this.cell.call([l].concat(c),g);return[m[0],m.slice(1)]},t,y,this.goBackwards,i,null,this.unroll,this.returnSequences),p=a[0],h=a[1],u=a[2];this.stateful&&this.resetStates(u,o);const d=this.returnSequences?h:p;return this.returnState?[d].concat(u):d})}getInitialState(t){return ft(()=>{let s=fn(t.shape);return s=Mt(s,[1,2]),s=Of(s),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(i=>i>1?Zy(s,[1,i]):s):this.cell.stateSize>1?[Zy(s,[1,this.cell.stateSize])]:[s]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),s={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(s.numConstants=this.numConstants);const i=this.cell.getConfig();return this.getClassName()===to.className&&(s.cell={className:this.cell.getClassName(),config:i}),Object.assign(Object.assign(Object.assign({},i),t),s)}static fromConfig(t,s,i={}){const o=s.cell,y=Vr(o,i);return new t(Object.assign(s,{cell:y}))}}to.className="RNN";Et(to);class Og extends ie{}class NC extends Og{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,An(this.units,"units"),this.activation=za(t.activation==null?this.DEFAULT_ACTIVATION:t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=ke(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ke(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ke(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ze(t.kernelRegularizer),this.recurrentRegularizer=ze(t.recurrentRegularizer),this.biasRegularizer=ze(t.biasRegularizer),this.kernelConstraint=xn(t.kernelConstraint),this.recurrentConstraint=xn(t.recurrentConstraint),this.biasConstraint=xn(t.biasConstraint),this.dropout=hu([1,Ba([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=hu([1,Ba([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=pe(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,s){return ft(()=>{if(t=t,t.length!==2)throw new ot(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let i=t[1];t=t[0];const o=s.training==null?!1:s.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Va({ones:()=>Zs(t),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Va({ones:()=>Zs(i),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let y;const r=this.dropoutMask,g=this.recurrentDropoutMask;r!=null?y=yr(rt(t,r),this.kernel.read()):y=yr(t,this.kernel.read()),this.bias!=null&&(y=Qi(y,this.bias.read())),g!=null&&(i=rt(i,g));let n=wt(y,yr(i,this.recurrentKernel.read()));return this.activation!=null&&(n=this.activation.apply(n)),[n,n]})}getConfig(){const t=super.getConfig(),s={units:this.units,activation:ka(this.activation),useBias:this.useBias,kernelInitializer:Ue(this.kernelInitializer),recurrentInitializer:Ue(this.recurrentInitializer),biasInitializer:Ue(this.biasInitializer),kernelRegularizer:Ae(this.kernelRegularizer),recurrentRegularizer:Ae(this.recurrentRegularizer),biasRegularizer:Ae(this.biasRegularizer),activityRegularizer:Ae(this.activityRegularizer),kernelConstraint:gn(this.kernelConstraint),recurrentConstraint:gn(this.recurrentConstraint),biasConstraint:gn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},t),s)}}NC.className="SimpleRNNCell";Et(NC);class lL extends to{constructor(t){t.cell=new NC(t),super(t)}call(t,s){return ft(()=>{this.cell.dropoutMask!=null&&(ne(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ne(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const i=s==null?null:s.mask,o=s==null?null:s.training,y=s==null?null:s.initialState;return super.call(t,{mask:i,training:o,initialState:y})})}static fromConfig(t,s){return new t(s)}}lL.className="SimpleRNN";Et(lL);class PC extends Og{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new ot("GRUCell does not support reset_after parameter set to true.");this.units=t.units,An(this.units,"units"),this.activation=za(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=za(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=ke(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ke(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ke(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ze(t.kernelRegularizer),this.recurrentRegularizer=ze(t.recurrentRegularizer),this.biasRegularizer=ze(t.biasRegularizer),this.kernelConstraint=xn(t.kernelConstraint),this.recurrentConstraint=xn(t.recurrentConstraint),this.biasConstraint=xn(t.biasConstraint),this.dropout=hu([1,Ba([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=hu([1,Ba([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=pe(t);const s=t[t.length-1];this.kernel=this.addWeight("kernel",[s,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,s){return ft(()=>{if(t=t,t.length!==2)throw new ot(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const i=s.training==null?!1:s.training;let o=t[1];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Va({ones:()=>Zs(t),rate:this.dropout,training:i,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Va({ones:()=>Zs(o),rate:this.recurrentDropout,training:i,count:3,dropoutFunc:this.dropoutFunc}));const y=this.dropoutMask,r=this.recurrentDropoutMask;let g,n,a;0<this.dropout&&this.dropout<1&&(t=rt(t,y[0]));let p=yr(t,this.kernel.read());this.useBias&&(p=Qi(p,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=rt(o,r[0]));const h=this.recurrentKernel.read(),[u,d]=Ps(h,[2*this.units,this.units],h.rank-1),l=yr(o,u),[c,m,f]=Ps(p,3,p.rank-1),[v,S]=Ps(l,2,l.rank-1);g=this.recurrentActivation.apply(wt(c,v)),n=this.recurrentActivation.apply(wt(m,S));const x=yr(rt(n,o),d);a=this.activation.apply(wt(f,x));const T=wt(rt(g,o),rt(wt(1,Le(g)),a));return[T,T]})}getConfig(){const t=super.getConfig(),s={units:this.units,activation:ka(this.activation),recurrentActivation:ka(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ue(this.kernelInitializer),recurrentInitializer:Ue(this.recurrentInitializer),biasInitializer:Ue(this.biasInitializer),kernelRegularizer:Ae(this.kernelRegularizer),recurrentRegularizer:Ae(this.recurrentRegularizer),biasRegularizer:Ae(this.biasRegularizer),activityRegularizer:Ae(this.activityRegularizer),kernelConstraint:gn(this.kernelConstraint),recurrentConstraint:gn(this.recurrentConstraint),biasConstraint:gn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},t),s)}}PC.className="GRUCell";Et(PC);class uL extends to{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new PC(t),super(t)}call(t,s){return ft(()=>{this.cell.dropoutMask!=null&&(ne(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ne(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const i=s==null?null:s.mask,o=s==null?null:s.training,y=s==null?null:s.initialState;return super.call(t,{mask:i,training:o,initialState:y})})}static fromConfig(t,s){return s.implmentation===0&&(s.implementation=1),new t(s)}}uL.className="GRU";Et(uL);class Dg extends Og{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,An(this.units,"units"),this.activation=za(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=za(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=ke(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ke(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ke(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=ze(t.kernelRegularizer),this.recurrentRegularizer=ze(t.recurrentRegularizer),this.biasRegularizer=ze(t.biasRegularizer),this.kernelConstraint=xn(t.kernelConstraint),this.recurrentConstraint=xn(t.recurrentConstraint),this.biasConstraint=xn(t.biasConstraint),this.dropout=hu([1,Ba([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=hu([1,Ba([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var s;t=pe(t);const i=t[t.length-1];this.kernel=this.addWeight("kernel",[i,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const y=this.biasInitializer,r=this.units;o=new(s=class extends Ni{apply(n,a){const p=y.apply([r]),h=new vC().apply([r]),u=y.apply([r*2]);return mA(mA(p,h),u)}},s.className="CustomInit",s)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,s){return ft(()=>{const i=s.training==null?!1:s.training;if(t=t,t.length!==3)throw new ot(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let o=t[1];const y=t[2];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Va({ones:()=>Zs(t),rate:this.dropout,training:i,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Va({ones:()=>Zs(o),rate:this.recurrentDropout,training:i,count:4,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,g=this.recurrentDropoutMask;let n,a,p,h;0<this.dropout&&this.dropout<1&&(t=rt(t,r[0]));let u=yr(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=rt(o,g[0])),u=wt(u,yr(o,this.recurrentKernel.read())),this.useBias&&(u=Qi(u,this.bias.read()));const[d,l,c,m]=Ps(u,4,u.rank-1);n=this.recurrentActivation.apply(d),a=this.recurrentActivation.apply(l),p=wt(rt(a,y),rt(n,this.activation.apply(c))),h=this.recurrentActivation.apply(m);const f=rt(h,this.activation.apply(p));return[f,f,p]})}getConfig(){const t=super.getConfig(),s={units:this.units,activation:ka(this.activation),recurrentActivation:ka(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ue(this.kernelInitializer),recurrentInitializer:Ue(this.recurrentInitializer),biasInitializer:Ue(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ae(this.kernelRegularizer),recurrentRegularizer:Ae(this.recurrentRegularizer),biasRegularizer:Ae(this.biasRegularizer),activityRegularizer:Ae(this.activityRegularizer),kernelConstraint:gn(this.kernelConstraint),recurrentConstraint:gn(this.recurrentConstraint),biasConstraint:gn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},t),s)}}Dg.className="LSTMCell";Et(Dg);class hL extends to{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new Dg(t),super(t)}call(t,s){return ft(()=>{this.cell.dropoutMask!=null&&(ne(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ne(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const i=s==null?null:s.mask,o=s==null?null:s.training,y=s==null?null:s.initialState;return super.call(t,{mask:i,training:o,initialState:y})})}static fromConfig(t,s){return s.implmentation===0&&(s.implementation=1),new t(s)}}hL.className="LSTM";Et(hL);class FC extends Og{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const s of this.cells.slice().reverse())Array.isArray(s.stateSize)?t.push(...s.stateSize):t.push(s.stateSize);return t}call(t,s){return ft(()=>{t=t;let i=t.slice(1);const o=[];for(const g of this.cells.slice().reverse())Array.isArray(g.stateSize)?o.push(i.splice(0,g.stateSize.length)):o.push(i.splice(0,1));o.reverse();const y=[];let r;for(let g=0;g<this.cells.length;++g){const n=this.cells[g];i=o[g],g===0?r=[t[0]].concat(i):r=[r[0]].concat(i),r=n.call(r,s),y.push(r.slice(1))}i=[];for(const g of y.slice().reverse())i.push(...g);return[r[0]].concat(i)})}build(t){Qy(t)&&(t=t[0]),t=t;let s;this.cells.forEach((i,o)=>{Co(`RNNCell_${o}`,()=>{i.build(t),Array.isArray(i.stateSize)?s=i.stateSize[0]:s=i.stateSize,t=[t[0],s]})}),this.built=!0}getConfig(){const t=super.getConfig(),s=y=>({className:y.getClassName(),config:y.getConfig()}),o={cells:this.cells.map(s)};return Object.assign(Object.assign({},t),o)}static fromConfig(t,s,i={}){const o=[];for(const y of s.cells)o.push(Vr(y,i));return new t({cells:o})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const s of this.cells)t.push(...s.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const s of this.cells)t.push(...s.nonTrainableWeights);if(!this.trainable){const s=[];for(const i of this.cells)s.push(...i.trainableWeights);return s.concat(t)}return t}getWeights(){const t=[];for(const s of this.cells)t.push(...s.weights);return qy(t)}setWeights(t){const s=[];for(const i of this.cells){const o=i.weights.length,y=t.splice(o);for(let r=0;r<i.weights.length;++r)s.push([i.weights[r],y[r]])}wC(s)}}FC.className="StackedRNNCells";Et(FC);function Va(e){const{ones:t,rate:s,training:i=!1,count:o=1,dropoutFunc:y}=e,r=()=>y!=null?y(t(),s):sD(t(),s),g=()=>Lf(r,t,i);return!o||o<=1?bn(g().clone()):Array(o).fill(void 0).map(g).map(a=>bn(a.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Y_=globalThis&&globalThis.__rest||function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(s[i[o]]=e[i[o]]);return s};class cL extends to{constructor(t){if(t.unroll)throw new qt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new qt("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new pn({ndim:5})]}call(t,s){return ft(()=>{if(this.cell.dropoutMask!=null&&(ne(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ne(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),s&&s.constants)throw new ot("ConvRNN2D cell does not support constants");const i=s==null?null:s.mask,o=s==null?null:s.training,y=s==null?null:s.initialState;return super.call(t,{mask:i,training:o,initialState:y})})}computeOutputShape(t){let s=this.computeSingleOutputShape(t);return this.returnSequences||(s=[s[0],...s.slice(2)]),this.returnState&&(s=[s,...Array(2).fill([t[0],...s.slice(-3)])]),s}getInitialState(t){return ft(()=>{const{stateSize:s}=this.cell,i=t.shape,o=this.computeSingleOutputShape(i),y=[o[0],...o.slice(2)],r=fn(y);return Array.isArray(s)?Array(s.length).fill(r):[r]})}resetStates(t,s=!1){ft(()=>{if(!this.stateful)throw new ir("Cannot call resetStates() on an RNN Layer that is not stateful.");const i=this.inputSpec[0].shape,o=this.computeSingleOutputShape(i),y=[o[0],...o.slice(2)];if(i[0]==null)throw new ot("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>fn(y)):this.states_=[fn(y)];else if(t==null)ne(this.states_),this.keptStates!=null&&(ne(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>fn(y)):this.states_[0]=fn(y);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new ot(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);s?this.keptStates.push(this.states_.slice()):ne(this.states_);for(let g=0;g<this.states_.length;++g){const n=t[g],a=y;if(!oe(n.shape,a))throw new ot(`State ${g} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${n.shape}`);this.states_[g]=n}}this.states_=this.states_.map(g=>bn(g.clone()))})}computeSingleOutputShape(t){const{dataFormat:s,filters:i,kernelSize:o,padding:y,strides:r,dilationRate:g}=this.cell,n=s==="channelsFirst",a=t[n?3:2],p=t[n?4:3],h=Wi(a,o[0],y,r[0],g[0]),u=Wi(p,o[1],y,r[1],g[1]);return[...t.slice(0,2),...n?[i,h,u]:[h,u,i]]}}cL.className="ConvRNN2D";class OC extends Dg{constructor(t){const{filters:s,kernelSize:i,strides:o,padding:y,dataFormat:r,dilationRate:g}=t;super(Object.assign(Object.assign({},t),{units:s})),this.filters=s,An(this.filters,"filters"),this.kernelSize=Yl(i,2,"kernelSize"),this.kernelSize.forEach(n=>An(n,"kernelSize")),this.strides=Yl(o||1,2,"strides"),this.strides.forEach(n=>An(n,"strides")),this.padding=y||"valid",ei(this.padding),this.dataFormat=r||"channelsLast",en(this.dataFormat),this.dilationRate=Yl(g||1,2,"dilationRate"),this.dilationRate.forEach(n=>An(n,"dilationRate"))}build(t){var s;t=pe(t);const i=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[i]==null)throw new ot(`The channel dimension of the input should be defined. Found ${t[i]}`);const o=t[i],y=4,r=this.kernelSize.concat([o,this.filters*y]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const g=this.kernelSize.concat([this.filters,this.filters*y]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",g,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let n;if(this.unitForgetBias){const a=this.biasInitializer,p=this.filters;n=new(s=class extends Ni{apply(u,d){const l=a.apply([p]),c=Us([p]),m=a.apply([p*2]);return mC([l,c,m])}},s.className="CustomInit",s)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*y],null,n,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,s){return ft(()=>{if(t.length!==3)throw new ot(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const i=s.training||!1,o=t[0],y=t[1],r=t[2],g=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Va({ones:()=>Zs(o),rate:this.dropout,training:i,count:g,dropoutFunc:this.dropoutFunc}));const n=this.dropoutMask,a=(V,W,K)=>!W||!W[K]?V:rt(W[K],V);let p=a(o,n,0),h=a(o,n,1),u=a(o,n,2),d=a(o,n,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Va({ones:()=>Zs(y),rate:this.recurrentDropout,training:i,count:g,dropoutFunc:this.dropoutFunc}));const l=this.recurrentDropoutMask;let c=a(y,l,0),m=a(y,l,1),f=a(y,l,2),v=a(y,l,3);const S=3,[x,T,C,w]=Ps(this.kernel.read(),g,S),[b,E,A,I]=this.useBias?Ps(this.bias.read(),g):[null,null,null,null];p=this.inputConv(p,x,b,this.padding),h=this.inputConv(h,T,E,this.padding),u=this.inputConv(u,C,A,this.padding),d=this.inputConv(d,w,I,this.padding);const[R,N,F,P]=Ps(this.recurrentKernel.read(),g,S);c=this.recurrentConv(c,R),m=this.recurrentConv(m,N),f=this.recurrentConv(f,F),v=this.recurrentConv(v,P);const D=this.recurrentActivation.apply(wt(p,c)),M=this.recurrentActivation.apply(wt(h,m)),L=wt(rt(M,r),rt(D,this.activation.apply(wt(u,f)))),k=rt(this.recurrentActivation.apply(wt(d,v)),this.activation.apply(L));return[k,k,L]})}getConfig(){const t=super.getConfig(),s=Y_(t,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},s),i)}inputConv(t,s,i,o){const y=Ma(t,s,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return i?Qi(y,i,this.dataFormat):y}recurrentConv(t,s){return Ma(t,s,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}OC.className="ConvLSTM2DCell";Et(OC);class fL extends cL{constructor(t){const s=new OC(t);super(Object.assign(Object.assign({},t),{cell:s}))}static fromConfig(t,s){return new t(s)}}fL.className="ConvLSTM2D";Et(fL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class DC extends ie{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(this.noiseShape==null)return this.noiseShape;const s=t.shape,i=[];for(let o=0;o<this.noiseShape.length;++o)i.push(this.noiseShape[o]==null?s[o]:this.noiseShape[o]);return i}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const i=jt(t);if(0<this.rate&&this.rate<1){const o=s.training==null?!1:s.training,y=this.getNoiseShape(i);return Lf(()=>sD(i,this.rate,y,this.seed),()=>i,o)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},s=super.getConfig();return Object.assign(t,s),t}dispose(){return super.dispose()}}DC.className="Dropout";Et(DC);class dL extends DC{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const s=t.shape;return[s[0],1,s[2]]}}dL.className="SpatialDropout1D";Et(dL);class pL extends ie{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){let s=null;t.batchSize!=null&&(s=t.batchSize),this.batchInputShape=[s,t.inputDim]}this.units=t.units,An(this.units,"units"),this.activation=za(t.activation),t.useBias!=null&&(this.useBias=t.useBias),this.kernelInitializer=ke(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=ke(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=xn(t.kernelConstraint),this.biasConstraint=xn(t.biasConstraint),this.kernelRegularizer=ze(t.kernelRegularizer),this.biasRegularizer=ze(t.biasRegularizer),this.activityRegularizer=ze(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=pe(t);const s=t[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[s,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:s}}],this.built=!0}computeOutputShape(t){t=pe(t);const s=t.slice();return s[s.length-1]=this.units,s}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const i=jt(t),o=JO(this.activation.getClassName());let y;return o!=null?y=yr(i,this.kernel.read(),o,this.bias?this.bias.read():null):(y=yr(i,this.kernel.read()),this.bias!=null&&(y=Qi(y,this.bias.read())),this.activation!=null&&(y=this.activation.apply(y))),y})}getConfig(){const t={units:this.units,activation:ka(this.activation),useBias:this.useBias,kernelInitializer:Ue(this.kernelInitializer),biasInitializer:Ue(this.biasInitializer),kernelRegularizer:Ae(this.kernelRegularizer),biasRegularizer:Ae(this.biasRegularizer),activityRegularizer:Ae(this.activityRegularizer),kernelConstraint:gn(this.kernelConstraint),biasConstraint:gn(this.biasConstraint)},s=super.getConfig();return Object.assign(t,s),t}}pL.className="Dense";Et(pL);class mL extends ie{constructor(t){t=t||{},super(t),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=pe(t);for(const s of t.slice(1))if(s==null)throw new ot(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],Na(t,1)]}call(t,s){return ft(()=>{this.invokeCallHook(t,s);let i=jt(t);if(this.dataFormat==="channelsFirst"&&i.rank>1){const o=[0];for(let y=2;y<i.rank;++y)o.push(y);o.push(1),i=ue(i,o)}return Nq(i)})}getConfig(){const t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);const s=super.getConfig();return Object.assign(t,s),t}}mL.className="Flatten";Et(mL);class vL extends ie{constructor(t){super(t),this.supportsMasking=!0,this.activation=za(t.activation)}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const i=jt(t);return this.activation.apply(i)})}getConfig(){const t={activation:ka(this.activation)},s=super.getConfig();return Object.assign(t,s),t}}vL.className="Activation";Et(vL);class gL extends ie{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,s){return ft(()=>(t=jt(t),Iq(t,this.n)))}getConfig(){const t={n:this.n},s=super.getConfig();return Object.assign(t,s),t}}gL.className="RepeatVector";Et(gL);class xL extends ie{constructor(t){super(t),this.targetShape=t.targetShape;for(let s=0;s<this.targetShape.length;++s)this.isUnknown(this.targetShape[s])&&(this.targetShape[s]=null)}isUnknown(t){return t<0||t==null}fixUnknownDimension(t,s){const i="Total size of new array must be unchanged.",o=s.slice();let y=1,r=null;for(let n=0;n<o.length;++n){const a=o[n];if(this.isUnknown(a))if(r===null)r=n;else throw new ot("Can only specifiy one unknown dimension.");else y*=a}const g=Na(t);if(r!==null){if(y===0||g%y!==0)throw new ot(i);o[r]=g/y}else if(g!==y)throw new ot(i);return o}computeOutputShape(t){let s=!1;for(let i=0;i<t.length;++i)if(this.isUnknown(t[i])){s=!0;break}return s?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const i=jt(t),o=i.shape,y=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return at(i,y)})}getConfig(){const t={targetShape:this.targetShape},s=super.getConfig();return Object.assign(t,s),t}}xL.className="Reshape";Et(xL);class yL extends ie{constructor(t){if(super(t),t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const s=Yi(1,t.dims.length+1);if(!oe(t.dims.slice().sort(),s))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new pn({ndim:this.dims.length+1})]}computeOutputShape(t){t=pe(t);const s=t.slice();return this.dims.forEach((i,o)=>{s[o+1]=t[i]}),s}call(t,s){return ue(jt(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},s=super.getConfig();return Object.assign(t,s),t}}yL.className="Permute";Et(yL);class SL extends ie{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null?this.maskValue=t.maskValue==null?0:t.maskValue:this.maskValue=0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),s={maskValue:this.maskValue};return Object.assign(s,t),s}computeMask(t,s){const i=jt(t),o=-1;return Kp(lu(i,this.maskValue),o)}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const i=jt(t),o=-1,y=!0,r=Kp(lu(i,this.maskValue),o,y);return rt(i,Ft(r,i.dtype))})}}SL.className="Masking";Et(SL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class TL extends ie{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){let s=null;t.batchSize!=null&&(s=t.batchSize),t.inputLength==null?this.batchInputShape=[s,null]:this.batchInputShape=[s].concat(Pe(t.inputLength))}this.inputDim=t.inputDim,An(this.inputDim,"inputDim"),this.outputDim=t.outputDim,An(this.outputDim,"outputDim"),this.embeddingsInitializer=ke(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ze(t.embeddingsRegularizer),this.activityRegularizer=ze(t.activityRegularizer),this.embeddingsConstraint=xn(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,s){return ft(()=>this.maskZero?(t=jt(t),lu(t,he(t))):null)}computeOutputShape(t){if(t=pe(t),this.inputLength==null)return[...t,this.outputDim];const s=Pe(this.inputLength);if(s.length!==t.length-1)throw new ot(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let i=0;for(let o=0;o<s.length;++o){const y=s[o],r=t[o+1];if(y!=null&&r!=null&&y!==r)throw new ot(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);y==null&&(s[i]=r),i++}}return[t[0],...s,this.outputDim]}call(t,s){return ft(()=>{this.invokeCallHook(t,s);let i=jt(t);i.dtype!=="int32"&&(i=xr(i,"int32"));const o=nD(this.embeddings.read(),at(i,[i.size]));return at(o,pe(this.computeOutputShape(i.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Ue(this.embeddingsInitializer),embeddingsRegularizer:Ae(this.embeddingsRegularizer),activityRegularizer:Ae(this.activityRegularizer),embeddingsConstraint:gn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},s=super.getConfig();return Object.assign(t,s),t}}TL.className="Embedding";Et(TL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tl extends ie{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new qt}computeElementwiseOpOutputShape(t,s){if(t==null||s==null)return null;if(t.length<s.length)return this.computeElementwiseOpOutputShape(s,t);if(s.length===0)return t;const i=t.slice(0,t.length-s.length);for(let o=0;o<s.length;++o){const y=t[t.length-s.length+o],r=s[o];if(y==null||r==null||y<0||r<0)i.push(null);else if(y===1)i.push(r);else if(r===1)i.push(y);else{if(y!==r)throw new ot("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(s));i.push(y)}}return i}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[pe(t)]),t=t,t.length<2)throw new ot(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let s=[];for(const y of t)y!=null&&y[0]!==null&&s.push(y[0]);if(s=Ra(s),s.length>1)throw new ot(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let i=t[0]==null?null:t[0].slice(1);for(let y=1;y<t.length;++y){const r=t[y]==null?null:t[y].slice(1);i=this.computeElementwiseOpOutputShape(i,r)}const o=t.map(y=>y.length);t.indexOf(null)===-1&&Ra(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,s){return ft(()=>{if(t=t,this.reshapeRequired){const i=[],o=t.map(y=>y.rank);if(o.indexOf(null)===-1){const y=Ba(o);for(let r of t){const g=r.rank;for(let n=0;n<y-g;++n)r=Of(r,1);i.push(r)}return this.mergeFunction(i)}else{let y=!1;for(const n of t){const a=n.rank;if(a==null){const p=n.shape,h=p[0],u=p.slice(1).concat([h]);let d=at(n,[h].concat(Na(p.slice(1))));d=ue(d,[1,0]),d=at(d,u),i.push(d),y=!0}else if(a>1){const p=Yi(1,a).concat([0]);i.push(ue(n,p)),y=!0}else i.push(n)}let r=this.mergeFunction(i);const g=r.rank;if(y){if(g==null){const n=r.shape,a=n.length,p=n[a-1],h=[p].concat(n.slice(0,n.length-1));r=at(ue(at(r,[-1,p]),[1,0]),h)}else if(g>1){const n=[g-1].concat(Yi(0,g-1));r=ue(r,n)}}return r}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let s;t[0]==null?s=null:s=t[0].slice(1);for(let o=1;o<t.length;++o){const y=t[o]==null?null:t[o].slice(1);s=this.computeElementwiseOpOutputShape(s,y)}let i=[];for(const o of t)o!=null&&o[0]!==null&&i.push(o[0]);return i=Ra(i),i.length===1?s=i.concat(s):s=[null].concat(s),s}computeMask(t,s){return ft(()=>{if(s==null)return null;if(!Array.isArray(s))throw new ot("`mask` should be an Array");if(!Array.isArray(t))throw new ot("`inputs` should be an Array");if(s.length!==t.length)throw new ot(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${s.length})`);if(s.every(o=>o==null))return null;s=s.map(o=>o==null?o:ns(o,0));let i=s[0];for(let o=1;o<s.length-1;++o)i=Sr(i,s[o]);return i})}}class CL extends tl{constructor(t){super(t)}mergeFunction(t){return ft(()=>{let s=t[0].clone();for(let i=1;i<t.length;++i)s=wt(s,t[i]);return s})}}CL.className="Add";Et(CL);class wL extends tl{constructor(t){super(t)}mergeFunction(t){return ft(()=>{let s=t[0].clone();for(let i=1;i<t.length;++i)s=rt(s,t[i]);return s})}}wL.className="Multiply";Et(wL);class EL extends tl{constructor(t){super(t)}mergeFunction(t){return ft(()=>{let s=t[0].clone();for(let i=1;i<t.length;++i)s=wt(s,t[i]);return rt(1/t.length,s)})}}EL.className="Average";Et(EL);class bL extends tl{constructor(t){super(t)}mergeFunction(t){return ft(()=>{let s=t[0];for(let i=1;i<t.length;++i)s=_r(s,t[i]);return s})}}bL.className="Maximum";Et(bL);class AL extends tl{constructor(t){super(t)}mergeFunction(t){return ft(()=>{let s=t[0];for(let i=1;i<t.length;++i)s=$o(s,t[i]);return s})}}AL.className="Minimum";Et(AL);class IL extends tl{constructor(t){super(t),this.DEFAULT_AXIS=-1,t==null&&(t={}),this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!(Array.isArray(t)&&Array.isArray(t[0]))||t.length===1)throw new ot("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let s=!0;for(const o of t)if(o!=null){s=!1;break}if(s)return;const i=[];for(let o=0;o<t.length;++o){const y=t[o].slice();y.splice(this.axis,1);let r=!1;for(const g of i)if(oe(g,y)){r=!0;break}r||i.push(y)}if(i.length>1)throw new ot("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return ft(()=>mC(t,this.axis))}computeOutputShape(t){if(!(Array.isArray(t)&&Array.isArray(t[0])))throw new ot("A `Concatenate` layer should be called on a list of inputs.");const s=t,i=s[0].slice(),o=this.axis<0?i.length+this.axis:this.axis;for(const y of s.slice(1)){if(i[o]==null||y[o]==null){i[o]=null;break}i[o]+=y[o]}return i}computeMask(t,s){if(s==null)return null;if(!Array.isArray(s))throw new ot("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new ot("`inputs` should be an array for Concatenate");if(s.length!==t.length)throw new ot(`Mismatch in the length of mask (${s.length}) and the legnth of inputs (${t.length})`);return ft(()=>{let i=!0;if(s.forEach(r=>{if(r!=null){i=!1;return}}),i)return null;const o=[];for(let r=0;r<t.length;++r)s[r]==null?o.push(Ft(Zs(t[r]),"bool")):s[r].rank<t[r].rank?o.push(ns(s[r],-1)):o.push(s[r]);const y=on(o,this.axis);return JS(y,-1,!1)})}getConfig(){const t={axis:this.axis},s=super.getConfig();return Object.assign(t,s),t}}IL.className="Concatenate";Et(IL);function rh(e,t){for(;e<0;)e+=t;return e}function K_(e,t,s){if(e.shape.length>3||t.shape.length>3)throw new qt("batchDot is not implemented for tensors of 4D or higher rank yet");if(q(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),q(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof s=="number"&&(s=[s,s]),e.dtype==="complex64"||t.dtype==="complex64")throw new qt("batchDot is not implemented for complex64-type Tensors yet.");const i=e.shape.length,o=t.shape.length;s==null&&(s=[i-1,o-2]);const y=s;return ft(()=>{let r;if(i>o){r=i-o;const n=[];for(let a=0;a<r;++a)n.push(1);t=at(t,t.shape.concat(n))}else if(o>i){r=o-i;const n=[];for(let a=0;a<r;++a)n.push(1);e=at(e,e.shape.concat(n))}else r=0;let g;if(e.shape.length===2&&t.shape.length===2)y[0]===y[1]?g=Mt(rt(e,t),y[0]):g=Mt(rt(ue(e,[1,0]),t),y[1]);else{const n=y[0]!==e.shape.length-1,a=y[1]===t.shape.length-1;g=re(e,t,n,a)}if(r>0){let n;i>o?n=i+o-3:n=i-1;const a=[];for(let p=n;p<n+r;++p)a.push(p);g=Qo(g,a)}return g.shape.length===1&&(g=ns(g,1)),g})}class RL extends tl{constructor(t){super(t),this.axes=t.axes,this.normalize=t.normalize==null?!1:t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){q(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const s=t[0],i=t[1];if(s.length>3||i.length>3)throw new qt("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(s,i);if(s[o[0]]!==i[o[1]])throw new ot(`Dimension incompatibility: ${s[o[0]]} !== ${i[o[1]]}`)}mergeFunction(t){if(t.length!==2)throw new ot(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let s=t[0],i=t[1],o;return Array.isArray(this.axes)?o=this.axes.map((y,r)=>rh(y,t[r].shape.length)):o=[rh(this.axes,s.shape.length),rh(this.axes,i.shape.length)],this.normalize&&(s=_p(s,o[0]),i=_p(i,o[1])),K_(s,i,o)}interpretAxes(t,s){let i;return Array.isArray(this.axes)?i=this.axes:i=[rh(this.axes,t.length),rh(this.axes,s.length)],i}computeOutputShape(t){q(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const s=t[0].slice(),i=t[1].slice();if(s.length>3||i.length>3)throw new qt("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(s,i);s.splice(o[0],1),i.splice(o[1],1),i.splice(0,1);const y=s.concat(i);return y.length===1&&y.push(1),y}computeMask(t,s){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},s=super.getConfig();return Object.assign(t,s),t}}RL.className="Dot";Et(RL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class NL extends ie{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),s={stddev:this.stddev};return Object.assign(s,t),s}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const i=jt(t);return Lf(()=>wt(Ag(i.shape,0,this.stddev),i),()=>i,s.training||!1)})}}NL.className="GaussianNoise";Et(NL);class PL extends ie{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),s={rate:this.rate};return Object.assign(s,t),s}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const i=jt(t);return this.rate>0&&this.rate<1?Lf(()=>{const y=Math.sqrt(this.rate/(1-this.rate));return rt(i,Ag(i.shape,1,y))},()=>i,s.training||!1):i})}}PL.className="GaussianDropout";Et(PL);class FL extends ie{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||jt(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),s={rate:this.rate};return Object.assign(s,t),s}call(t,s){return ft(()=>{if(this.rate<1&&this.rate>0){const i=this._getNoiseShape(t);return Lf(()=>{const y=jt(t),r=1.6732632423543772,g=1.0507009873554805,n=-r*g;let a=Qa(Jo(i),this.rate);a=xr(a,"float32");const p=((1-this.rate)*(1+this.rate*n**2))**-.5,h=-p*n*this.rate,u=wt(rt(y,a),rt(wt(a,-1),n));return wt(rt(u,p),h)},()=>jt(t),s.training||!1)}return t})}}FL.className="AlphaDropout";Et(FL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uc(e,t,s,i,o,y=.001){let r;if(e.rank===2)r=sF(e,t,s,i,o,y);else if(e.rank===3)r=iF(e,t,s,i,o,y);else if(e.rank===4)r=rF(e,t,s,i,o,y);else throw new qt(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return r}function j_(e,t,s,i,o=.001){return ft(()=>{const y=lg(e,i),r=y.mean,g=y.variance;return[uc(e,r,g,s,t,o),r,g]})}function Z_(e,t,s,i,o=.001){return ft(()=>{const y=lg(e,i),r=y.mean,g=y.variance,n=[];for(const l of Yi(0,e.rank))i.indexOf(l)!==-1?n.push(1):n.push(e.shape[l]);const a=at(r,n),p=at(g,n),h=t==null?null:at(t,n),u=s==null?null:at(s,n);return[uc(e,a,p,u,h,o),r,g]})}function J_(e,t,s,i,o=.001){return oe(i.slice().sort(),Yi(0,e.rank-1))?j_(e,t,s,i,o):Z_(e,t,s,i,o)}class OL extends ie{constructor(t){t==null&&(t={}),super(t),this.supportsMasking=!0,this.axis=t.axis==null?-1:t.axis,this.momentum=t.momentum==null?.99:t.momentum,this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=ke(t.betaInitializer||"zeros"),this.gammaInitializer=ke(t.gammaInitializer||"ones"),this.movingMeanInitializer=ke(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=ke(t.movingVarianceInitializer||"ones"),this.betaConstraint=xn(t.betaConstraint),this.gammaConstraint=xn(t.gammaConstraint),this.betaRegularizer=ze(t.betaRegularizer),this.gammaRegularizer=ze(t.gammaRegularizer)}build(t){t=pe(t);const s=this.axis>=0?this.axis:this.axis+t.length,i=t[s];if(i==null)throw new ot(`Axis ${s} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new pn({ndim:t.length,axes:{[s]:i}})];const o=[i];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,s){return ft(()=>{const i=s.training==null?!1:s.training,o=jt(t),y=o.shape,r=y.length,g=Yi(0,r),n=this.axis>=0?this.axis:this.axis+r;g.splice(n,1);const a=ko(1,r);a[n]=y[n];const p=g.slice();p.sort();const h=!oe(p,Yi(0,r).slice(0,r-1)),u=()=>{if(h){const v=at(this.movingMean.read(),a),S=at(this.movingVariance.read(),a),x=this.center?at(this.beta.read(),a):null,T=this.scale?at(this.gamma.read(),a):null;return uc(o,v,S,x,T,this.epsilon)}else return uc(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!i)return u();const[d,l,c]=J_(o,this.gamma.read(),this.beta.read(),g,this.epsilon),m=(v,S,x)=>{ft(()=>{const T=1-x,C=v.read(),w=rt(Dt(C,S),T);v.write(Dt(C,w))})};return(()=>{m(this.movingMean,l,this.momentum),m(this.movingVariance,c,this.momentum)})(),d})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Ue(this.betaInitializer),gammaInitializer:Ue(this.gammaInitializer),movingMeanInitializer:Ue(this.movingMeanInitializer),movingVarianceInitializer:Ue(this.movingVarianceInitializer),betaRegularizer:Ae(this.betaRegularizer),gammaRegularizer:Ae(this.gammaRegularizer),betaConstraint:gn(this.betaConstraint),gammaConstraint:gn(this.gammaConstraint)},s=super.getConfig();return Object.assign(t,s),t}}OL.className="BatchNormalization";Et(OL);class DL extends ie{constructor(t){if(t==null&&(t={}),super(t),this.axis=t.axis==null?-1:t.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const s of this.axis)if(!Number.isInteger(s))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=ke(t.betaInitializer||"zeros"),this.gammaInitializer=ke(t.gammaInitializer||"ones"),this.betaRegularizer=ze(t.betaRegularizer),this.gammaRegularizer=ze(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=pe(t);const s=t.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let y=0;y<this.axis.length;++y)this.axis[y]<0&&(this.axis[y]+=s);for(const y of this.axis)if(y<0||y>=s)throw new Error(`Invalid axis: ${y}`);if(this.axis.length!==Ra(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const i=this.axis.map(y=>t[y]),o=!0;this.scale?this.gamma=this.addWeight("gamma",i,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",i,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(t,s){const i=jt(t),o=i.shape,y=o.length;return ft(()=>{let{mean:g,variance:n}=lg(i,this.axis,!0);const a=ko(1,y);for(const c of this.axis)a[c]=o[c];const p=c=>c!=null&&c.shape.length!==y?at(c,a):c;let h=this.scale?p(this.gamma.read()):null,u=this.center?p(this.beta.read()):null;const d=[],l=[];for(let c=0;c<y;++c)this.axis.indexOf(c)!==-1?(d.push(o[c]),l.push(1)):(d.push(1),l.push(o[c]));return g=mi(g,d),n=mi(n,d),h!=null&&(h=mi(h,l)),u!=null&&(u=mi(u,l)),uc(i,g,n,u,h,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Ue(this.betaInitializer),gammaInitializer:Ue(this.gammaInitializer),betaRegularizer:Ae(this.betaRegularizer),gammaRegularizer:Ae(this.gammaRegularizer)},s=super.getConfig();return Object.assign(t,s),t}}DL.className="LayerNormalization";Et(DL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Q_(e,t,s){return ft(()=>{if(e.rank!==4)throw new ot(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new ot("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(s==null&&(s=Ki()),s!=="channelsLast"&&s!=="channelsFirst")throw new ot(`Unknown data format: ${s}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let i;return s==="channelsFirst"?i=[[0,0],[0,0],t[0],t[1]]:i=[[0,0],t[0],t[1],[0,0]],qa(e,i)})}class LL extends ie{constructor(t){if(t==null&&(t={}),super(t),this.dataFormat=t.dataFormat==null?Ki():t.dataFormat,t.padding==null)this.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new ot(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let s,i;if(typeof t.padding[0]=="number")s=[t.padding[0],t.padding[0]],i=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new ot(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(s=t.padding[0],t.padding[1].length!==2)throw new ot(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);i=t.padding[1]}this.padding=[s,i]}this.inputSpec=[new pn({ndim:4})]}computeOutputShape(t){t=pe(t);let s,i;return this.dataFormat==="channelsFirst"?(t[2]!=null&&t[2]>=0?s=t[2]+this.padding[0][0]+this.padding[0][1]:s=null,t[3]!=null&&t[3]>=0?i=t[3]+this.padding[1][0]+this.padding[1][1]:i=null,[t[0],t[1],s,i]):(t[1]!=null&&t[1]>=0?s=t[1]+this.padding[0][0]+this.padding[0][1]:s=null,t[2]!=null&&t[2]>=0?i=t[2]+this.padding[1][0]+this.padding[1][1]:i=null,[t[0],s,i,t[3]])}call(t,s){return ft(()=>Q_(jt(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},s=super.getConfig();return Object.assign(t,s),t}}LL.className="ZeroPadding2D";Et(LL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lg(e,t,s,i,o,y){return ft(()=>{en(o),qO(y),ei(i),s==null&&(s=[1,1]),i==null&&(i="valid"),o==null&&(o=Ki()),y==null&&(y="max"),e=RC(e,o);let r;const g=i==="same"?"same":"valid";return y==="max"?r=og(e,t,s,g):r=tg(e,t,s,g),o==="channelsFirst"&&(r=ue(r,[0,3,1,2])),r})}function ML(e,t,s,i,o,y){return ft(()=>{en(o),qO(y),ei(i),s==null&&(s=[1,1,1]),i==null&&(i="valid"),o==null&&(o=Ki()),y==null&&(y="max"),e=qD(e,o);let r;const g=i==="same"?"same":"valid";return y==="max"?r=PF(e,t,s,g):r=nF(e,t,s,g),o==="channelsFirst"&&(r=ue(r,[0,4,1,2,3])),r})}class $L extends ie{constructor(t){if(t.poolSize==null&&(t.poolSize=2),super(t),typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new ot(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(An(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new ot(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);An(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,ei(this.padding),this.inputSpec=[new pn({ndim:3})]}computeOutputShape(t){t=pe(t);const s=Wi(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],s,t[2]]}call(t,s){return ft(()=>{this.invokeCallHook(t,s),t=Of(jt(t),2);const i=this.poolingFunction(jt(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Qo(i,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},s=super.getConfig();return Object.assign(t,s),t}}class BL extends $L{constructor(t){super(t)}poolingFunction(t,s,i,o,y){return en(y),ei(o),Lg(t,s,i,o,y,"max")}}BL.className="MaxPooling1D";Et(BL);class kL extends $L{constructor(t){super(t)}poolingFunction(t,s,i,o,y){return en(y),ei(o),Lg(t,s,i,o,y,"avg")}}kL.className="AveragePooling1D";Et(kL);class zL extends ie{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new ot(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];An(this.poolSize,"poolSize"),An(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,en(this.dataFormat),ei(this.padding),this.inputSpec=[new pn({ndim:4})]}computeOutputShape(t){t=pe(t);let s=this.dataFormat==="channelsFirst"?t[2]:t[1],i=this.dataFormat==="channelsFirst"?t[3]:t[2];return s=Wi(s,this.poolSize[0],this.padding,this.strides[0]),i=Wi(i,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],s,i]:[t[0],s,i,t[3]]}call(t,s){return ft(()=>(this.invokeCallHook(t,s),this.poolingFunction(jt(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},s=super.getConfig();return Object.assign(t,s),t}}class VL extends zL{constructor(t){super(t)}poolingFunction(t,s,i,o,y){return en(y),ei(o),Lg(t,s,i,o,y,"max")}}VL.className="MaxPooling2D";Et(VL);class GL extends zL{constructor(t){super(t)}poolingFunction(t,s,i,o,y){return en(y),ei(o),Lg(t,s,i,o,y,"avg")}}GL.className="AveragePooling2D";Et(GL);class UL extends ie{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new ot(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];An(this.poolSize,"poolSize"),An(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,en(this.dataFormat),ei(this.padding),this.inputSpec=[new pn({ndim:5})]}computeOutputShape(t){t=pe(t);let s=this.dataFormat==="channelsFirst"?t[2]:t[1],i=this.dataFormat==="channelsFirst"?t[3]:t[2],o=this.dataFormat==="channelsFirst"?t[4]:t[3];return s=Wi(s,this.poolSize[0],this.padding,this.strides[0]),i=Wi(i,this.poolSize[1],this.padding,this.strides[1]),o=Wi(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],s,i,o]:[t[0],s,i,o,t[4]]}call(t,s){return ft(()=>(this.invokeCallHook(t,s),this.poolingFunction(jt(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},s=super.getConfig();return Object.assign(t,s),t}}class WL extends UL{constructor(t){super(t)}poolingFunction(t,s,i,o,y){return en(y),ei(o),ML(t,s,i,o,y,"max")}}WL.className="MaxPooling3D";Et(WL);class HL extends UL{constructor(t){super(t)}poolingFunction(t,s,i,o,y){return en(y),ei(o),ML(t,s,i,o,y,"avg")}}HL.className="AveragePooling3D";Et(HL);class XL extends ie{constructor(t){super(t),this.inputSpec=[new pn({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,s){throw new qt}}class YL extends XL{constructor(t){super(t||{})}call(t,s){return ft(()=>{const i=jt(t);return Ye(i,1)})}}YL.className="GlobalAveragePooling1D";Et(YL);class KL extends XL{constructor(t){super(t||{})}call(t,s){return ft(()=>{const i=jt(t);return Ti(i,1)})}}KL.className="GlobalMaxPooling1D";Et(KL);class jL extends ie{constructor(t){super(t),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,en(this.dataFormat),this.inputSpec=[new pn({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,s){throw new qt}getConfig(){const t={dataFormat:this.dataFormat},s=super.getConfig();return Object.assign(t,s),t}}class ZL extends jL{call(t,s){return ft(()=>{const i=jt(t);return this.dataFormat==="channelsLast"?Ye(i,[1,2]):Ye(i,[2,3])})}}ZL.className="GlobalAveragePooling2D";Et(ZL);class JL extends jL{call(t,s){return ft(()=>{const i=jt(t);return this.dataFormat==="channelsLast"?Ti(i,[1,2]):Ti(i,[2,3])})}}JL.className="GlobalMaxPooling2D";Et(JL);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class QL extends ie{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},s=super.getConfig();return Object.assign(t,s),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,s,i={}){const o=s.layer,y=Vr(o,i);delete s.layer;const r={layer:y};return Object.assign(r,s),new t(r)}}class qL extends QL{constructor(t){super(t),this.supportsMasking=!0}build(t){if(t=pe(t),t.length<3)throw new ot(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const s=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(s),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=pe(t);const s=[t[0]].concat(t.slice(2)),i=this.layer.computeOutputShape(s),o=t[1];return[i[0],o].concat(i.slice(1))}call(t,s){return ft(()=>(t=jt(t),oL((r,g)=>[jt(this.layer.call(r,s)),[]],t,[],!1,null,null,!1,!0)[1]))}}qL.className="TimeDistributed";Et(qL);function q_(e){_o(Cq,"BidirectionalMergeMode",e)}const __="concat";class _L extends QL{constructor(t){super(t);const s=t.layer.getConfig(),i={};i.className=t.layer.getClassName(),i.config=s,this.forwardLayer=Vr(i),s.goBackwards=s.goBackwards!==!0;const o={};if(o.className=t.layer.getClassName(),o.config=s,this.backwardLayer=Vr(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=t.mergeMode===void 0?__:t.mergeMode,q_(this.mergeMode),t.weights)throw new qt("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const s=t.length,i=Math.floor(s/2);this.forwardLayer.setWeights(t.slice(0,i)),this.backwardLayer.setWeights(t.slice(i))}computeOutputShape(t){let s=this.forwardLayer.computeOutputShape(t);Array.isArray(s)&&Array.isArray(s[0])||(s=[s]),s=s;let i,o,y;return this.returnState&&(y=s.slice(1)),i=s[0],i=i,this.mergeMode==="concat"?(i[i.length-1]*=2,o=[i]):this.mergeMode==null?o=[i,i.slice()]:o=[i],this.returnState?this.mergeMode==null?o.concat(y).concat(y.slice()):[i].concat(y).concat(y.slice()):fs(o)}apply(t,s){let i=s==null?null:s.initialState,o=s==null?null:s.constants;s==null&&(s={});const y=aL(t,i,o,this.numConstants);if(t=y.inputs,i=y.initialState,o=y.constants,Array.isArray(t)&&(i=t.slice(1),t=t[0]),(i==null||i.length===0)&&o==null)return super.apply(t,s);const r=[],g=[];if(i!=null){const a=i.length;if(a%2>0)throw new ot("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");s.initialState=i,r.push(...i);const p=i.map(h=>new pn({shape:h.shape}));this.forwardLayer.stateSpec=p.slice(0,a/2),this.backwardLayer.stateSpec=p.slice(a/2),g.push(...p)}if(o!=null)throw new qt("Support for constants in Bidirectional layers is not implemented yet.");const n=r[0]instanceof ur;for(const a of r)if(a instanceof ur!==n)throw new ot("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(n){const a=[t].concat(r),p=this.inputSpec.concat(g),h=this.inputSpec;this.inputSpec=p;const u=super.apply(a,s);return this.inputSpec=h,u}else return super.apply(t,s)}call(t,s){return ft(()=>{const i=s.initialState;let o,y;if(i==null)o=this.forwardLayer.call(t,s),y=this.backwardLayer.call(t,s);else{const n=i.slice(0,i.length/2),a=i.slice(i.length/2);o=this.forwardLayer.call(t,Object.assign(s,{initialState:n})),y=this.backwardLayer.call(t,Object.assign(s,{initialState:a}))}let r;this.returnState&&(Array.isArray(o)&&(r=o.slice(1).concat(y.slice(1))),o=o[0],y=y[0]),this.returnSequences&&(y=Ai(y,1));let g;return this.mergeMode==="concat"?g=mC([o,y]):this.mergeMode==="sum"?g=wt(o,y):this.mergeMode==="ave"?g=rt(.5,wt(o,y)):this.mergeMode==="mul"?g=rt(o,y):this.mergeMode==null&&(g=[o,y]),this.returnState?this.mergeMode==null?g.concat(r):[g].concat(r):g})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){Co(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),Co(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,s){Array.isArray(s)&&(s=s[0]);let i;if(this.returnSequences?this.mergeMode==null?i=[s,s]:i=s:this.mergeMode==null?i=[null,null]:i=null,this.returnState){const y=this.forwardLayer.states.map(r=>null);return Array.isArray(i)?i.concat(y).concat(y):[i].concat(y).concat(y)}else return i}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},s=super.getConfig();return Object.assign(t,s),t}static fromConfig(t,s){const i=Vr(s.layer);if(delete s.layer,s.numConstants!=null)throw new qt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=s;return o.layer=i,new t(o)}}_L.className="Bidirectional";Et(_L);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tM extends ie{constructor(t){super(t),this.scale=t.scale,t.offset?this.offset=t.offset:this.offset=0}getConfig(){const t={scale:this.scale,offset:this.offset},s=super.getConfig();return Object.assign(t,s),t}call(t,s){return ft(()=>(t=jt(t),t.dtype!=="float32"&&(t=xr(t,"float32")),wt(rt(t,this.scale),this.offset)))}}tM.className="Rescaling";Et(tM);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:ttt,cropAndResize:ett}=lr;class eM extends ie{constructor(t){super(t),this.height=t.height,this.width=t.width}centerCrop(t,s,i,o,y,r,g,n){return ft(()=>{let a,p=!1;const h=s/r,u=i/g,d=(o+s)/r,l=(y+i)/g,c=[h,u,d,l],m=[];t.rank===3?(p=!0,a=Js([t])):a=t;for(let T=0;T<a.shape[0];T++)m.push(c);const f=Si(m,[m.length,4]),v=uu(0,m.length,1,"int32"),x=ett(a,f,v,[o,y],"nearest");return xr(p?jt(Ii(x)):x,n)})}upsize(t,s,i,o){return ft(()=>{const y=ttt(t,[s,i]);return xr(y,o)})}call(t,s){return ft(()=>{const i=jt(t),o=i.dtype,y=i.shape,r=y[y.length-3],g=y[y.length-2];let n=0;r!==this.height&&(n=Math.floor((r-this.height)/2));let a=0;return g!==this.width&&(a=Math.floor((g-this.width)/2),a===0&&(a=1)),n>=0&&a>=0?this.centerCrop(i,n,a,this.height,this.width,r,g,o):this.upsize(t,this.height,this.width,o)})}getConfig(){const t={height:this.height,width:this.width},s=super.getConfig();return Object.assign(t,s),t}computeOutputShape(t){t=pe(t);const s=t.length-3,i=t.length-2;return t[s]=this.height,t[i]=this.width,t}}eM.className="CenterCrop";Et(eM);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ntt(e,t,s,i){let o=jt(e);if(o.dtype!=="int32"&&(o=xr(o,"int32")),t==="int")return o;const y=o.shape;if(o.rank===0&&(o=ns(o,-1)),t==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=ns(o,-1)),o.rank>2)throw new ot(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${y} which would result in output rank ${o.rank}.`);const r=["multiHot","oneHot"].includes(t),g=o;let n;if(typeof i<"u"&&t==="count"?n=Wy(g,i,s,r):n=Wy(g,[],s,r),t!=="tfIdf")return n;if(i)return rt(n,i);throw new ot("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nM extends ie{constructor(t){super(t),this.numTokens=t.numTokens,t.outputMode?this.outputMode=t.outputMode:this.outputMode="multiHot"}getConfig(){const t={numTokens:this.numTokens,outputMode:this.outputMode},s=super.getConfig();return Object.assign(t,s),t}computeOutputShape(t){return t=pe(t),t==null?[this.numTokens]:this.outputMode==="oneHot"&&t[t.length-1]!==1?(t.push(this.numTokens),t):(t[t.length-1]=this.numTokens,t)}call(t,s){return ft(()=>{t=jt(t),t.dtype!=="int32"&&(t=xr(t,"int32"));let i;if(typeof s.countWeights<"u"){if(this.outputMode!=="count")throw new ot(`countWeights is not used when outputMode !== count.
              Received countWeights=${s.countWeights}`);i=jt(s.countWeights)}const o=Ti(t),y=ec(t),r=ks(this.numTokens,o).bufferSync().get(0),g=Qa(y,0).bufferSync().get(0);if(!(r&&g))throw new ot(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return ntt(t,this.outputMode,this.numTokens,i)})}}nM.className="CategoryEncoding";Et(nM);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const stt=["bilinear","nearest"],DA=new Set(stt);class sM extends ie{constructor(t){if(super(t),this.height=t.height,this.width=t.width,t.interpolation)if(DA.has(t.interpolation))this.interpolation=t.interpolation;else throw new ot(`Invalid interpolation parameter: ${t.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!t.cropToAspectRatio}computeOutputShape(t){t=pe(t);const s=t[2];return[this.height,this.width,s]}getConfig(){const t={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},s=super.getConfig();return Object.assign(t,s),t}call(t,s){return ft(()=>{const i=[this.height,this.width];if(this.interpolation==="bilinear")return lr.resizeBilinear(t,i,!this.cropToAspectRatio);if(this.interpolation==="nearest")return lr.resizeNearestNeighbor(t,i,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...DA]} are supported`)})}}sM.className="Resizing";Et(sM);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class iM{constructor(t){this.seed=t}next(){if(this.seed!==void 0)return this.seed++}}iM.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rM extends ie{constructor(t){super(t),this.randomGenerator=new iM(t.seed)}getConfig(){const t={seed:this.randomGenerator.seed},s=super.getConfig();return Object.assign(t,s),t}}rM.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const itt=["bilinear","nearest"],LA=new Set(itt);class aM extends rM{constructor(t){super(t);const{factor:s,interpolation:i="bilinear"}=t;if(this.factor=s,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ot(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ot(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ot(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(i)if(LA.has(i))this.interpolation=i;else throw new ot(`Invalid interpolation parameter: ${i} is not implemented`)}getConfig(){const t={factor:this.factor,interpolation:this.interpolation},s=super.getConfig();return Object.assign(t,s),t}computeOutputShape(t){t=pe(t);const s=t[2];return[this.imgHeight,-1,s]}call(t,s){return ft(()=>{const i=jt(t);this.imgHeight=i.shape[i.shape.length-3];const o=i.shape[i.shape.length-2];this.widthFactor=Jo([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let y=this.widthFactor.dataSync()[0]*o;y=Math.round(y);const r=[this.imgHeight,y];switch(this.interpolation){case"bilinear":return lr.resizeBilinear(t,r);case"nearest":return lr.resizeNearestNeighbor(t,r);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...LA]} are supported`)}})}}aM.className="RandomWidth";Et(aM);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rtt=pt();rtt.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ii;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(ii||(ii={}));var MA;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(MA||(MA={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const att={};function oM(e){return att[e]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j(e,t,s,i,o){const y=t.inputParams[e];if(y&&y.inputIndexStart!==void 0){const g=y.inputIndexStart,n=y.inputIndexEnd===0?void 0:y.inputIndexEnd===void 0?g+1:y.inputIndexEnd,a=g<0?t.inputNames.length+g:g;if(y.type==="tensor")return Fn(t.inputNames[a],s,i,o);if(y.type==="tensors"){const u=t.inputs.slice(g,n);return t.inputNames.slice(g,n).filter((l,c)=>{var m;return((m=u[c])===null||m===void 0?void 0:m.op)!=="NoOp"}).map(l=>Fn(l,s,i,o))}const p=Fn(t.inputNames[a],s,i,o),h=p.dataSync();return y.type==="number"?h[0]:yi(p.shape,h)}const r=t.attrParams[e];return r&&r.value}function Fn(e,t,s,i){const[o,y]=Cs(e,s);if(i!=null){const g=i.getHashTableHandleByName(o);if(g!=null)return g}const r=s.currentContextIds.find(g=>!!t[im(o,g)]);return r!==void 0?t[im(o,r)][y]:void 0}function $A(e,t,s){return t[im(e,s.currentContextId)]}function Or(e,t){const[s,i,o]=Cs(e,t);return[im(s,t&&t.currentContextId),i,o]}function im(e,t){return t?`${e}-${t}`:e}function Cs(e,t){if(e==="")return["",0,void 0];const s=t!=null&&t.parseNodeNameCache!=null;if(s){const y=t.parseNodeNameCache.get(e);if(y!=null)return y}const i=e.split(":");let o;if(i.length===1)o=[e,0,void 0];else{const y=i[0],r=i.length===3?i[1]:void 0,g=Number(i[i.length-1]);o=[y,g,r]}return s&&t.parseNodeNameCache.set(e,o),o}function Qd(e,t,s){let i=j("pad",e,t,s);if(i==="explicit"){i=j("explicitPaddings",e,t,s);const o=[[0,0],[0,0],[0,0],[0,0]];for(let y=0;y<4;y++)o[y][0]=i[y*2],o[y][1]=i[y*2+1];return o}return i}function Dr(e){return e.kept?e:zr(e)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ott=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ltt=Object.freeze(Object.defineProperty({__proto__:null,json:ott},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const utt=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],htt=Object.freeze(Object.defineProperty({__proto__:null,json:utt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ctt=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],ftt=Object.freeze(Object.defineProperty({__proto__:null,json:ctt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dtt=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],ptt=Object.freeze(Object.defineProperty({__proto__:null,json:dtt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mtt=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],vtt=Object.freeze(Object.defineProperty({__proto__:null,json:mtt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gtt=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],xtt=Object.freeze(Object.defineProperty({__proto__:null,json:gtt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ytt=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Stt=Object.freeze(Object.defineProperty({__proto__:null,json:ytt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ttt=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Ctt=Object.freeze(Object.defineProperty({__proto__:null,json:Ttt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wtt=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Ett=Object.freeze(Object.defineProperty({__proto__:null,json:wtt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const btt=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Att=Object.freeze(Object.defineProperty({__proto__:null,json:btt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Itt=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Rtt=Object.freeze(Object.defineProperty({__proto__:null,json:Itt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ntt=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Ptt=Object.freeze(Object.defineProperty({__proto__:null,json:Ntt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ftt=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Ott=Object.freeze(Object.defineProperty({__proto__:null,json:Ftt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dtt=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Ltt=Object.freeze(Object.defineProperty({__proto__:null,json:Dtt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mtt=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],$tt=Object.freeze(Object.defineProperty({__proto__:null,json:Mtt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Btt=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],ktt=Object.freeze(Object.defineProperty({__proto__:null,json:Btt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ztt=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Vtt=Object.freeze(Object.defineProperty({__proto__:null,json:ztt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gtt=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Utt=Object.freeze(Object.defineProperty({__proto__:null,json:Gtt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wtt=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Htt=Object.freeze(Object.defineProperty({__proto__:null,json:Wtt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BA{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[ltt,htt,ftt,ptt,vtt,xtt,Stt,Ctt,Ett,Att,Rtt,Ptt,Ott,Ltt,$tt,ktt,Vtt,Utt,Htt],s=[].concat(...t.map(i=>i.json));this.opMappers=s.reduce((i,o)=>(i[o.tfOpName]=o,i),{})}transformGraph(t,s={}){const i=t.node,o=[],y=[],r=[],g=i.reduce((c,m)=>(c[m.name]=this.mapNode(m),m.op.startsWith("Placeholder")?o.push(c[m.name]):m.op==="Const"?y.push(c[m.name]):(m.input==null||m.input.length===0)&&r.push(c[m.name]),c),{});let n=[];const a=[];let p={},h={};s!=null&&(p=this.mapSignatureEntries(s.inputs),h=this.mapSignatureEntries(s.outputs));const u=Object.keys(g);u.forEach(c=>{const m=g[c];m.inputNames.forEach((f,v)=>{const[S,,x]=Or(f),T=g[S];if(T.outputs!=null){const C=T.outputs.indexOf(x);if(C!==-1){const w=`${S}:${C}`;m.inputNames[v]=w}}m.inputs.push(T),T.children.push(m)})}),Object.keys(h).length===0?u.forEach(c=>{const m=g[c];m.children.length===0&&a.push(m)}):Object.keys(h).forEach(c=>{const[m]=Or(c),f=g[m];f!=null&&(f.signatureKey=h[c],a.push(f))}),Object.keys(p).length>0?Object.keys(p).forEach(c=>{const[m]=Or(c),f=g[m];f&&(f.signatureKey=p[c],n.push(f))}):n=o;let d={};t.library!=null&&t.library.function!=null&&(d=t.library.function.reduce((c,m)=>(c[m.signature.name]=this.mapFunction(m),c),{}));const l={nodes:g,inputs:n,outputs:a,weights:y,placeholders:o,signature:s,functions:d};return r.length>0&&(l.initNodes=r),l}mapSignatureEntries(t){return Object.keys(t||{}).reduce((s,i)=>(s[t[i].name]=i,s),{})}mapNode(t){const s=oM(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});const i={name:t.name,op:t.op,category:s.category,inputNames:(t.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:s.outputs};return s.inputs!=null&&(i.inputParams=s.inputs.reduce((o,y)=>(o[y.name]={type:y.type,inputIndexStart:y.start,inputIndexEnd:y.end},o),{})),s.attrs!=null&&(i.attrParams=s.attrs.reduce((o,y)=>{const r=y.type;let g;switch(y.type){case"string":g=i1(t.attr,y.tfName,y.defaultValue),g===void 0&&y.tfDeprecatedName&&(g=i1(t.attr,y.tfDeprecatedName,y.defaultValue));break;case"string[]":g=c1(t.attr,y.tfName,y.defaultValue),g===void 0&&y.tfDeprecatedName&&(g=c1(t.attr,y.tfDeprecatedName,y.defaultValue));break;case"number":g=a1(t.attr,y.tfName,y.defaultValue||0),g===void 0&&y.tfDeprecatedName&&(g=a1(t.attr,y.tfDeprecatedName,y.defaultValue));break;case"number[]":g=h1(t.attr,y.tfName,y.defaultValue),g===void 0&&y.tfDeprecatedName&&(g=h1(t.attr,y.tfDeprecatedName,y.defaultValue));break;case"bool":g=r1(t.attr,y.tfName,y.defaultValue),g===void 0&&y.tfDeprecatedName&&(g=r1(t.attr,y.tfDeprecatedName,y.defaultValue));break;case"bool[]":g=d1(t.attr,y.tfName,y.defaultValue),g===void 0&&y.tfDeprecatedName&&(g=d1(t.attr,y.tfDeprecatedName,y.defaultValue));break;case"shape":g=u1(t.attr,y.tfName,y.defaultValue),g===void 0&&y.tfDeprecatedName&&(g=u1(t.attr,y.tfDeprecatedName,y.defaultValue));break;case"shape[]":g=f1(t.attr,y.tfName,y.defaultValue),g===void 0&&y.tfDeprecatedName&&(g=f1(t.attr,y.tfDeprecatedName,y.defaultValue));break;case"dtype":g=o1(t.attr,y.tfName,y.defaultValue),g===void 0&&y.tfDeprecatedName&&(g=o1(t.attr,y.tfDeprecatedName,y.defaultValue));break;case"dtype[]":g=l1(t.attr,y.tfName,y.defaultValue),g===void 0&&y.tfDeprecatedName&&(g=l1(t.attr,y.tfDeprecatedName,y.defaultValue));break;case"func":g=kA(t.attr,y.tfName,y.defaultValue),g===void 0&&y.tfDeprecatedName&&(g=kA(t.attr,y.tfDeprecatedName,y.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${y.type} for op: ${t.op}`)}return o[y.name]={value:g,type:r},o},{})),i}mapFunction(t){const s=t.nodeDef,i=[],o=[];let y={};s!=null&&(y=s.reduce((h,u)=>(h[u.name]=this.mapNode(u),u.op==="Const"&&o.push(h[u.name]),h),{}));const r=[],g=[];t.signature.inputArg.forEach(h=>{const[u]=Or(h.name),d={name:u,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:LC(h.type),type:"dtype"}},children:[]};d.signatureKey=h.name,r.push(d),y[u]=d}),Object.keys(y).forEach(h=>{const u=y[h];u.inputNames.forEach((d,l)=>{const[c,,m]=Or(d),f=y[c];if(f.outputs!=null){const v=f.outputs.indexOf(m);if(v!==-1){const S=`${c}:${v}`;u.inputNames[l]=S}}u.inputs.push(f),f.children.push(u)})});const a=t.ret;t.signature.outputArg.forEach(h=>{const[u,d]=Or(a[h.name]),l=y[u];l!=null&&(l.defaultOutput=d,g.push(l))});const p=this.mapArgsToSignature(t);return{nodes:y,inputs:r,outputs:g,weights:o,placeholders:i,signature:p}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((s,i)=>(s[i.name]=this.mapArgToTensorInfo(i),s),{}),outputs:t.signature.outputArg.reduce((s,i)=>(s[i.name]=this.mapArgToTensorInfo(i,t.ret),s),{})}}mapArgToTensorInfo(t,s){let i=t.name;return s!=null&&(i=s[i]),{name:i,dtype:t.type}}}function Xtt(e){const t=pt().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function lM(e,t){const s=Array.isArray(e)?String.fromCharCode.apply(null,e):Xtt(e);return t?s:s.toLowerCase()}function i1(e,t,s,i=!1){const o=e[t];return o!=null?lM(o.s,i):s}function r1(e,t,s){const i=e[t];return i?i.b:s}function a1(e,t,s){const i=e[t]||{},o=i.i!=null?i.i:i.f!=null?i.f:s;return typeof o=="number"?o:parseInt(o,10)}function LC(e){switch(typeof e=="string"&&(e=ii[e]),e){case ii.DT_FLOAT:case ii.DT_HALF:return"float32";case ii.DT_INT32:case ii.DT_INT64:case ii.DT_INT8:case ii.DT_UINT8:return"int32";case ii.DT_BOOL:return"bool";case ii.DT_DOUBLE:return"float32";case ii.DT_STRING:return"string";default:return null}}function kA(e,t,s){const i=e[t];return i&&i.func?i.func.name:s}function o1(e,t,s){const i=e[t];return i&&i.type?LC(i.type):s}function l1(e,t,s){const i=e[t];return i&&i.list&&i.list.type?i.list.type.map(o=>LC(o)):s}function uM(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function u1(e,t,s){const i=e[t];return i&&i.shape?uM(i.shape):s}function h1(e,t,s){const i=e[t];return i?((i.list.f&&i.list.f.length?i.list.f:i.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):s}function c1(e,t,s,i=!1){const o=e[t];return o&&o.list&&o.list.s?o.list.s.map(y=>lM(y,i)):s}function f1(e,t,s){const i=e[t];return i&&i.list&&i.list.shape?i.list.shape.map(o=>uM(o)):s}function d1(e,t,s){const i=e[t];return i&&i.list&&i.list.b?i.list.b:s}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ytt{constructor(t,s,i){this.node=t,this.tensorMap=s,this.context=i,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(o=>this.getInput(o)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((o,y)=>(o[y]=this.getAttr(y),o),{}))}getInput(t){return Fn(t,this.tensorMap,this.context)}getAttr(t,s){const i=this.node.rawAttrs[t];if(i.tensor!=null)return Fn(t,this.tensorMap,this.context);if(i.i!=null||i.f!=null)return a1(this.node.rawAttrs,t,s);if(i.s!=null)return i1(this.node.rawAttrs,t,s);if(i.b!=null)return r1(this.node.rawAttrs,t,s);if(i.shape!=null)return u1(this.node.rawAttrs,t,s);if(i.type!=null)return o1(this.node.rawAttrs,t,s);if(i.list!=null){if(i.list.i!=null||i.list.f!=null)return h1(this.node.rawAttrs,t,s);if(i.list.s!=null)return c1(this.node.rawAttrs,t,s);if(i.list.shape!=null)return f1(this.node.rawAttrs,t,s);if(i.list.b!=null)return d1(this.node.rawAttrs,t,s);if(i.list.type!=null)return l1(this.node.rawAttrs,t,s)}return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kn=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:O3,abs:un,acos:j3,acosh:Z3,add:wt,addN:vW,all:JS,any:Kp,argMax:ru,argMin:J3,asin:Q3,asinh:q3,atan:_3,atan2:tF,atanh:eF,avgPool:tg,avgPool3d:nF,basicLSTMCell:zW,batchNorm:Cf,batchNorm2d:sF,batchNorm3d:iF,batchNorm4d:rF,batchToSpaceND:eg,bincount:aF,bitwiseAnd:jW,booleanMaskAsync:FK,broadcastArgs:JW,broadcastTo:Hl,buffer:te,cast:Ft,ceil:oF,clipByValue:Ds,clone:zr,complex:Da,concat:on,concat1d:lF,concat2d:uF,concat3d:hF,concat4d:cF,conv1d:qS,conv2d:Ma,conv2dTranspose:tT,conv3d:fF,conv3dTranspose:pF,cos:ng,cosh:eT,cosineWindow:OT,cumprod:jp,cumsum:nT,denseBincount:Wy,depthToSpace:mF,depthwiseConv2d:wf,diag:yH,dilation2d:vF,div:kt,divNoNan:gF,dot:xF,dropout:XF,einsum:yl,elu:Ef,enclosingPowerOfTwo:YF,ensureShape:NH,equal:Xi,erf:yF,euclideanNorm:CF,exp:Ks,expandDims:ns,expm1:wF,eye:iT,fft:mg,fill:Ru,floor:Af,floorDiv:ZS,fused:_K,gather:If,gatherND:GK,greater:ks,greaterEqual:Qa,ifft:rc,imag:sg,image:lr,inTopKAsync:XK,irfft:AT,isFinite:EF,isInf:bF,isNaN:AF,leakyRelu:ig,less:nc,lessEqual:jo,linalg:tO,linspace:eX,localResponseNormalization:IF,log:js,log1p:rg,logSigmoid:RF,logSoftmax:rT,logSumExp:aT,logicalAnd:Sr,logicalNot:ag,logicalOr:oT,logicalXor:NF,losses:PZ,lowerBound:gX,matMul:re,max:Ti,maxPool:og,maxPool3d:PF,maxPoolWithArgmax:TX,maximum:_r,mean:Ye,meshgrid:EX,min:ec,minimum:$o,mirrorPad:FF,mod:OF,moments:lg,movingAverage:LK,mul:rt,multiRNNCell:PX,multinomial:OX,neg:Le,norm:bf,notEqual:lu,oneHot:uT,ones:Us,onesLike:Zs,op:st,outerProduct:BX,pad:qa,pad1d:VX,pad2d:UX,pad3d:HX,pad4d:YX,pool:DF,pow:$a,prelu:hg,print:Y3,prod:LF,raggedGather:tY,raggedRange:nY,raggedTensorToTensor:iY,rand:aY,randomGamma:AY,randomNormal:gT,randomStandardNormal:NY,randomUniform:Jo,randomUniformInt:OY,range:uu,real:sc,reciprocal:$F,relu:Cr,relu6:xT,reshape:at,reverse:Ai,reverse1d:zY,reverse2d:GY,reverse3d:WY,reverse4d:XY,rfft:vg,round:yT,rsqrt:ST,scalar:Wt,scatterND:$K,searchSorted:lT,selu:TT,separableConv2d:CT,setdiff1dAsync:QY,sigmoid:vr,sign:BF,signal:NZ,sin:wT,sinh:ET,slice:le,slice1d:fg,slice2d:bT,slice3d:dg,slice4d:ic,softmax:pg,softplus:Nu,spaceToBatchND:ug,sparse:FZ,sparseToDense:zK,spectral:RZ,split:Ps,sqrt:Kn,square:be,squaredDifference:IT,squeeze:Qo,stack:Js,step:Pu,stridedSlice:kF,string:OZ,sub:Dt,sum:Mt,tan:zF,tanh:au,tensor:Si,tensor1d:is,tensor2d:Nh,tensor3d:gK,tensor4d:xK,tensor5d:yK,tensor6d:SK,tensorScatterUpdate:CK,tile:mi,topk:GF,transpose:ue,truncatedNormal:NT,unique:UF,unsortedSegmentSum:PT,unstack:Ii,upperBound:RK,variable:WF,where:Hn,whereAsync:HF,zeros:fn,zerosLike:he},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ktt=(e,t,s,i=kn)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[i.add(j("a",e,t,s),j("b",e,t,s))];case"AddN":return[i.addN(j("tensors",e,t,s))];case"FloorMod":case"Mod":return[i.mod(j("a",e,t,s),j("b",e,t,s))];case"Mul":return[i.mul(j("a",e,t,s),j("b",e,t,s))];case"RealDiv":case"Div":return[i.div(j("a",e,t,s),j("b",e,t,s))];case"DivNoNan":return[i.divNoNan(j("a",e,t,s),j("b",e,t,s))];case"FloorDiv":return[i.floorDiv(j("a",e,t,s),j("b",e,t,s))];case"Sub":return[i.sub(j("a",e,t,s),j("b",e,t,s))];case"Minimum":return[i.minimum(j("a",e,t,s),j("b",e,t,s))];case"Maximum":return[i.maximum(j("a",e,t,s),j("b",e,t,s))];case"Pow":return[i.pow(j("a",e,t,s),j("b",e,t,s))];case"SquaredDifference":return[i.squaredDifference(j("a",e,t,s),j("b",e,t,s))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jtt=(e,t,s,i=kn)=>{switch(e.op){case"Abs":case"ComplexAbs":return[i.abs(j("x",e,t,s))];case"Acos":return[i.acos(j("x",e,t,s))];case"Acosh":return[i.acosh(j("x",e,t,s))];case"Asin":return[i.asin(j("x",e,t,s))];case"Asinh":return[i.asinh(j("x",e,t,s))];case"Atan":return[i.atan(j("x",e,t,s))];case"Atan2":return[i.atan2(j("x",e,t,s),j("y",e,t,s))];case"Atanh":return[i.atanh(j("x",e,t,s))];case"Ceil":return[i.ceil(j("x",e,t,s))];case"Complex":return[i.complex(j("real",e,t,s),j("imag",e,t,s))];case"Cos":return[i.cos(j("x",e,t,s))];case"Cosh":return[i.cosh(j("x",e,t,s))];case"Elu":return[i.elu(j("x",e,t,s))];case"Erf":return[i.erf(j("x",e,t,s))];case"Exp":return[i.exp(j("x",e,t,s))];case"Expm1":return[i.expm1(j("x",e,t,s))];case"Floor":return[i.floor(j("x",e,t,s))];case"Log":return[i.log(j("x",e,t,s))];case"Log1p":return[i.log1p(j("x",e,t,s))];case"Imag":return[i.imag(j("x",e,t,s))];case"Neg":return[i.neg(j("x",e,t,s))];case"Reciprocal":return[i.reciprocal(j("x",e,t,s))];case"Real":return[i.real(j("x",e,t,s))];case"Relu":return[i.relu(j("x",e,t,s))];case"Round":return[i.round(j("x",e,t,s))];case"Selu":return[i.selu(j("x",e,t,s))];case"Sigmoid":return[i.sigmoid(j("x",e,t,s))];case"Sin":return[i.sin(j("x",e,t,s))];case"Sign":return[i.sign(j("x",e,t,s))];case"Sinh":return[i.sinh(j("x",e,t,s))];case"Softplus":return[i.softplus(j("x",e,t,s))];case"Sqrt":return[i.sqrt(j("x",e,t,s))];case"Square":return[i.square(j("x",e,t,s))];case"Tanh":return[i.tanh(j("x",e,t,s))];case"Tan":return[i.tan(j("x",e,t,s))];case"ClipByValue":return[i.clipByValue(j("x",e,t,s),j("clipValueMin",e,t,s),j("clipValueMax",e,t,s))];case"Relu6":return[i.relu6(j("x",e,t,s))];case"Rsqrt":return[i.rsqrt(Fn(e.inputNames[0],t,s))];case"LeakyRelu":return[i.leakyRelu(j("x",e,t,s),j("alpha",e,t,s))];case"Prelu":return[i.prelu(j("x",e,t,s),j("alpha",e,t,s))];case"IsNan":return[i.isNaN(Fn(e.inputNames[0],t,s))];case"IsInf":return[i.isInf(Fn(e.inputNames[0],t,s))];case"IsFinite":return[i.isFinite(Fn(e.inputNames[0],t,s))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ai(e,t,s=""){if(!(typeof e=="number"||typeof t=="number")){q(e.length===t.length,()=>s+` Shapes ${e} and ${t} must match`);for(let i=0;i<e.length;i++){const o=e[i],y=t[i];q(o<0||y<0||o===y,()=>s+` Shapes ${e} and ${t} must match`)}}}function zA(e){return!(typeof e=="number"||e.some(t=>t<0))}function ah(e,t,s){let i=p1(e,s);const o=!zA(i);if(o&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${i}`);if(o&&t.forEach(y=>{i=p1(y.shape,i)}),!zA(i))throw new Error(`Non-fully-defined elementShape: ${i}`);return i}function p1(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const s=[];for(let i=0;i<e.length;++i){const o=e[i],y=t[i];if(o>=0&&y>=0&&o!==y)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);s[i]=o>=0?o:y}return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ztt{constructor(t,s,i,o,y,r,g){this.name=t,this.dtype=s,this.maxSize=i,this.elementShape=o,this.identicalElementShapes=y,this.dynamicSize=r,this.clearAfterRead=g,this.tensors=[],this.closed_=!1,this.idTensor=Wt(0),bn(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(s=>{(t==null||!t.has(s.tensor.id))&&s.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const s=this.tensors[t];if(s.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(s.cleared=!0),s.read=!0,s.tensor}readMany(t){return t.map(s=>this.read(s))}write(t,s){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const i=this.tensors[t]||{};if(s.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${s.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=s.shape),ai(this.elementShape,s.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),i.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(i.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);i.tensor=s,bn(s),i.written=!0,this.tensors[t]=i}writeMany(t,s){if(t.length!==s.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${s.length}.`);t.forEach((i,o)=>this.write(i,s[o]))}gather(t,s){if(s&&s!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${s}`);if(t)t=t.slice(0,this.size());else{t=[];for(let o=0;o<this.size();o++)t.push(o)}if(t.length===0)return Si([],[0].concat(this.elementShape));const i=this.readMany(t);return ai(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),Js(i,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return Si([],[0].concat(this.elementShape));const s=[];for(let o=0;o<this.size();o++)s.push(o);const i=this.readMany(s);return ai(this.elementShape,i[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${i[0].shape})`),on(i,0)}scatter(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);if(t.length!==s.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${s.shape[0]}`);const i=Math.max(...t);if(!this.dynamicSize&&i>=this.maxSize)throw new Error(`Max index must be < array size (${i}  vs. ${this.maxSize})`);this.writeMany(t,Ii(s,0))}split(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);let i=0;const o=t.map(n=>(i+=n,i));if(i!==s.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${i}, and tensor's shape is: ${s.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const y=i===0?0:s.size/i,r=[];ft(()=>{s=at(s,[1,i,y]);for(let n=0;n<t.length;++n){const p=[0,n===0?0:o[n-1],0],h=[1,t[n],y];r[n]=at(le(s,p,h),this.elementShape)}return r});const g=[];for(let n=0;n<t.length;n++)g[n]=n;this.writeMany(g,r)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zo{get id(){return this.idTensor.id}constructor(t,s,i,o=-1){this.tensors=t,this.elementShape=s,this.elementDtype=i,t!=null&&t.forEach(y=>{if(i!==y.dtype)throw new Error(`Invalid data types; op elements ${i}, but list elements ${y.dtype}`);ai(s,y.shape,"TensorList shape mismatch: "),bn(y)}),this.idTensor=Wt(0),this.maxNumElements=o,bn(this.idTensor)}copy(){return new zo([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(s=>{(t==null||!t.has(s.id))&&s.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,s,i=-1){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);if(i!==-1&&this.tensors.length!==i)throw new Error(`Operation expected a list with ${i} elements but got a list with ${this.tensors.length} elements.`);ai(t,this.elementShape,"TensorList shape mismatch: ");const o=ah(this.elementShape,this.tensors,t);return ft(()=>{const y=this.tensors.map(r=>at(r,o));return Js(y,0)})}popBack(t,s){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const i=ah(this.elementShape,this.tensors,t),o=this.tensors.pop();return o.kept=!1,ai(o.shape,t,"TensorList shape mismatch: "),at(o,i)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(ai(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");bn(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);const s=new zo([],this.elementShape,this.elementDtype,this.maxNumElements);s.tensors.length=t;for(let i=0;i<Math.min(this.tensors.length,t);++i)s.tensors[i]=this.tensors[i];return s}getItem(t,s,i){if(i!==this.elementDtype)throw new Error(`Invalid data types; op elements ${i}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);ai(this.tensors[t].shape,s,"TensorList shape mismatch: ");const o=ah(this.elementShape,this.tensors,s);return at(this.tensors[t],o)}setItem(t,s){if(s.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);ai(this.elementShape,s.shape,"TensorList shape mismatch: "),bn(s),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=s}gather(t,s,i){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);ai(this.elementShape,i,"TensorList shape mismatch: "),t=t.slice(0,this.size());const o=ah(this.elementShape,this.tensors,i);return t.length===0?Si([],[0].concat(o)):ft(()=>{const y=t.map(r=>at(this.tensors[r],o));return Js(y,0)})}concat(t,s){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);ai(this.elementShape,s,"TensorList shape mismatch: ");const i=ah(this.elementShape,this.tensors,s);return this.size()===0?Si([],[0].concat(i)):ft(()=>{const o=this.tensors.map(y=>at(y,i));return on(o,0)})}}function Jtt(e,t,s){const i=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==s)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${s}`);const o=e.shape.slice(1);ai(o,t,"TensorList shape mismatch: ");const y=Ii(e);return new zo(y,t,i)}function Qtt(e,t,s,i){return new zo([],e,t,i)}function qtt(e,t,s,i){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const o=Math.max(...t);if(i!=null&&i!==-1&&o>=i)throw new Error(`Max index must be < array size (${o}  vs. ${i})`);const y=new zo([],s,e.dtype,i),r=Ii(e,0);return t.forEach((g,n)=>{y.setItem(g,r[n])}),y}function _tt(e,t,s){let i=0;const o=t.map(p=>(i+=p,i));if(i!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${i}, and tensor's shape is: ${e.shape}`);const y=e.shape.slice(1),r=p1(y,s),g=i===0?0:e.size/i,n=ft(()=>{const p=[];e=at(e,[1,i,g]);for(let h=0;h<t.length;++h){const d=[0,h===0?0:o[h-1],0],l=[1,t[h],g];p[h]=at(le(e,d,l),r)}return e.dispose(),p}),a=new zo([],s,e.dtype,t.length);for(let p=0;p<n.length;p++)a.setItem(p,n[p]);return a}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tet=async(e,t,s)=>{switch(e.op){case"If":case"StatelessIf":{const i=j("thenBranch",e,t,s),o=j("elseBranch",e,t,s),y=j("cond",e,t,s),r=j("args",e,t,s);return(await y.data())[0]?s.functionMap[i].executeFunctionAsync(r,s.tensorArrayMap,s.tensorListMap):s.functionMap[o].executeFunctionAsync(r,s.tensorArrayMap,s.tensorListMap)}case"While":case"StatelessWhile":{const i=j("body",e,t,s),o=j("cond",e,t,s),y=j("args",e,t,s),r=await s.functionMap[o].executeFunctionAsync(y,s.tensorArrayMap,s.tensorListMap),g=y.map(p=>p.id);let n=await r[0].data();r.forEach(p=>{!p.kept&&g.indexOf(p.id)===-1&&p.dispose()});let a=y;for(;n[0];){const p=a;a=await s.functionMap[i].executeFunctionAsync(a,s.tensorArrayMap,s.tensorListMap);const h=a.map(d=>d.id);p.forEach(d=>{!d.kept&&g.indexOf(d.id)===-1&&h.indexOf(d.id)===-1&&d.dispose()});const u=await s.functionMap[o].executeFunctionAsync(a,s.tensorArrayMap,s.tensorListMap);n=await u[0].data(),u.forEach(d=>{!d.kept&&g.indexOf(d.id)===-1&&h.indexOf(d.id)===-1&&d.dispose()})}return a}case"LoopCond":{const i=j("pred",e,t,s);return[Dr(i)]}case"Switch":{const i=j("pred",e,t,s);let o=j("data",e,t,s);return o.kept||(o=Dr(o)),(await i.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{const i=e.inputNames.find(o=>Fn(o,t,s)!==void 0);if(i){const o=Fn(i,t,s);return[Dr(o)]}return}case"Enter":{const i=j("frameName",e,t,s),o=j("tensor",e,t,s);return s.enterFrame(i),[Dr(o)]}case"Exit":{const i=j("tensor",e,t,s);return s.exitFrame(),[Dr(i)]}case"NextIteration":{const i=j("tensor",e,t,s);return s.nextIteration(),[Dr(i)]}case"TensorArrayV3":{const i=j("size",e,t,s),o=j("dtype",e,t,s),y=j("elementShape",e,t,s),r=j("dynamicSize",e,t,s),g=j("clearAfterRead",e,t,s),n=j("identicalElementShapes",e,t,s),a=j("name",e,t,s),p=new Ztt(a,o,i,y,n,r,g);return s.addTensorArray(p),[p.idTensor,Wt(1)]}case"TensorArrayWriteV3":{const i=j("tensorArrayId",e,t,s),o=j("index",e,t,s),y=j("tensor",e,t,s),r=s.getTensorArray(i.id);return r.write(o,y),[r.idTensor]}case"TensorArrayReadV3":{const i=j("tensorArrayId",e,t,s),o=j("index",e,t,s);return[s.getTensorArray(i.id).read(o)]}case"TensorArrayGatherV3":{const i=j("tensorArrayId",e,t,s),o=j("indices",e,t,s),y=j("dtype",e,t,s);return[s.getTensorArray(i.id).gather(o,y)]}case"TensorArrayScatterV3":{const i=j("tensorArrayId",e,t,s),o=j("indices",e,t,s),y=j("tensor",e,t,s),r=s.getTensorArray(i.id);return r.scatter(o,y),[r.idTensor]}case"TensorArrayConcatV3":{const i=j("tensorArrayId",e,t,s),o=s.getTensorArray(i.id),y=j("dtype",e,t,s);return[o.concat(y)]}case"TensorArraySplitV3":{const i=j("tensorArrayId",e,t,s),o=j("tensor",e,t,s),y=j("lengths",e,t,s),r=s.getTensorArray(i.id);return r.split(y,o),[r.idTensor]}case"TensorArraySizeV3":{const i=j("tensorArrayId",e,t,s),o=s.getTensorArray(i.id);return[Wt(o.size(),"int32")]}case"TensorArrayCloseV3":{const i=j("tensorArrayId",e,t,s),o=s.getTensorArray(i.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{const i=j("tensorListId",e,t,s),o=j("index",e,t,s),y=j("tensor",e,t,s),r=s.getTensorList(i.id);return r.setItem(o,y),[r.idTensor]}case"TensorListGetItem":{const i=j("tensorListId",e,t,s),o=j("index",e,t,s),y=j("elementShape",e,t,s),r=j("elementDType",e,t,s);return[s.getTensorList(i.id).getItem(o,y,r)]}case"TensorListScatterV2":case"TensorListScatter":{const i=j("indices",e,t,s),o=j("tensor",e,t,s),y=j("elementShape",e,t,s),r=j("numElements",e,t,s),g=qtt(o,i,y,r);return s.addTensorList(g),[g.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const i=j("elementShape",e,t,s),o=j("elementDType",e,t,s);let y;e.op==="TensorListReserve"?y="numElements":y="maxNumElements";const r=j(y,e,t,s),g=e.op==="TensorListReserve"?-1:r,n=Qtt(i,o,r,g);return s.addTensorList(n),[n.idTensor]}case"TensorListGather":{const i=j("tensorListId",e,t,s),o=j("indices",e,t,s),y=j("elementShape",e,t,s),r=j("elementDType",e,t,s);return[s.getTensorList(i.id).gather(o,r,y)]}case"TensorListStack":{const i=j("tensorListId",e,t,s),o=j("elementShape",e,t,s),y=j("elementDType",e,t,s),r=j("numElements",e,t,s);return[s.getTensorList(i.id).stack(o,y,r)]}case"TensorListFromTensor":{const i=j("tensor",e,t,s),o=j("elementShape",e,t,s),y=j("elementDType",e,t,s),r=Jtt(i,o,y);return s.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const i=j("tensorListId",e,t,s),o=s.getTensorList(i.id),y=j("dtype",e,t,s),r=j("elementShape",e,t,s);return[o.concat(y,r)]}case"TensorListPushBack":{const i=j("tensorListId",e,t,s),o=j("tensor",e,t,s),y=s.getTensorList(i.id);return y.pushBack(o),[y.idTensor]}case"TensorListPopBack":{const i=j("tensorListId",e,t,s),o=j("elementShape",e,t,s),y=j("elementDType",e,t,s);return[s.getTensorList(i.id).popBack(o,y)]}case"TensorListSplit":{const i=j("tensor",e,t,s),o=j("elementShape",e,t,s),y=j("lengths",e,t,s),r=_tt(i,y,o);return s.addTensorList(r),[r.idTensor]}case"TensorListLength":{const i=j("tensorListId",e,t,s),o=s.getTensorList(i.id);return[Wt(o.size(),"int32")]}case"TensorListResize":{const i=j("tensorListId",e,t,s),o=j("size",e,t,s),r=s.getTensorList(i.id).resize(o);return s.addTensorList(r),[r.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VA(e,t,s){const[i,o]=j("fusedOps",e,t,s),y=i==="biasadd",r=!y,g=o==="prelu",n=i==="fusedbatchnorm",a=j("numArgs",e,t,s);if(y){if(g&&a!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!g&&y&&a!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(n)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const p=j("strides",e,t,s),h=Qd(e,t,s),u=j("dataFormat",e,t,s).toUpperCase(),d=j("dilations",e,t,s);let[l,c]=j("args",e,t,s);r&&(c=l,l=void 0);const m=j("leakyreluAlpha",e,t,s);return{stride:p,pad:h,dataFormat:u,dilations:d,biasArg:l,preluArg:c,activationFunc:o,leakyreluAlpha:m}}const eet=(e,t,s,i=kn)=>{switch(e.op){case"Conv1D":{const o=j("stride",e,t,s),y=j("pad",e,t,s),r=j("dataFormat",e,t,s).toUpperCase(),g=j("dilation",e,t,s);return[i.conv1d(j("x",e,t,s),j("filter",e,t,s),o,y,r,g)]}case"Conv2D":{const o=j("strides",e,t,s),y=Qd(e,t,s),r=j("dataFormat",e,t,s).toUpperCase(),g=j("dilations",e,t,s);return[i.conv2d(j("x",e,t,s),j("filter",e,t,s),[o[1],o[2]],y,r,[g[1],g[2]])]}case"_FusedConv2D":{const{stride:o,pad:y,dataFormat:r,dilations:g,biasArg:n,preluArg:a,activationFunc:p,leakyreluAlpha:h}=VA(e,t,s);return[i.fused.conv2d({x:j("x",e,t,s),filter:j("filter",e,t,s),strides:[o[1],o[2]],pad:y,dataFormat:r,dilations:[g[1],g[2]],bias:n,activation:p,preluActivationWeights:a,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:o,pad:y,dataFormat:r,dilations:g,biasArg:n,preluArg:a,activationFunc:p,leakyreluAlpha:h}=VA(e,t,s);return[i.fused.depthwiseConv2d({x:j("x",e,t,s),filter:j("filter",e,t,s),strides:[o[1],o[2]],pad:y,dataFormat:r,dilations:[g[1],g[2]],bias:n,activation:p,preluActivationWeights:a,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const o=j("outputShape",e,t,s),y=j("strides",e,t,s),r=Qd(e,t,s);return[i.conv2dTranspose(j("x",e,t,s),j("filter",e,t,s),o,[y[1],y[2]],r)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const o=j("strides",e,t,s),y=Qd(e,t,s),r=j("dilations",e,t,s),g=j("dataFormat",e,t,s).toUpperCase();return[i.depthwiseConv2d(j("input",e,t,s),j("filter",e,t,s),[o[1],o[2]],y,g,[r[1],r[2]])]}case"Conv3D":{const o=j("strides",e,t,s),y=j("pad",e,t,s),r=j("dataFormat",e,t,s).toUpperCase(),g=j("dilations",e,t,s);return[i.conv3d(j("x",e,t,s),j("filter",e,t,s),[o[1],o[2],o[3]],y,r,[g[1],g[2],g[3]])]}case"AvgPool":{const o=j("strides",e,t,s),y=j("pad",e,t,s),r=j("kernelSize",e,t,s);return[i.avgPool(j("x",e,t,s),[r[1],r[2]],[o[1],o[2]],y)]}case"MaxPool":{const o=j("strides",e,t,s),y=j("pad",e,t,s),r=j("kernelSize",e,t,s);return[i.maxPool(j("x",e,t,s),[r[1],r[2]],[o[1],o[2]],y)]}case"MaxPoolWithArgmax":{const o=j("strides",e,t,s),y=j("pad",e,t,s),r=j("kernelSize",e,t,s),g=j("includeBatchInIndex",e,t,s),{result:n,indexes:a}=i.maxPoolWithArgmax(j("x",e,t,s),[r[1],r[2]],[o[1],o[2]],y,g);return[n,a]}case"AvgPool3D":{const o=j("strides",e,t,s),y=j("pad",e,t,s),r=j("kernelSize",e,t,s);return[i.avgPool3d(j("x",e,t,s),[r[1],r[2],r[3]],[o[1],o[2],o[3]],y)]}case"MaxPool3D":{const o=j("strides",e,t,s),y=j("pad",e,t,s),r=j("kernelSize",e,t,s);return[i.maxPool3d(j("x",e,t,s),[r[1],r[2],r[3]],[o[1],o[2],o[3]],y)]}case"Dilation2D":{const o=j("strides",e,t,s),y=j("pad",e,t,s),r=j("dilations",e,t,s),g=o[1],n=o[2],a=r[1],p=r[2];return[i.dilation2d(j("x",e,t,s),j("filter",e,t,s),[g,n],y,[a,p],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const net=(e,t,s,i=kn)=>{switch(e.op){case"Fill":{const o=j("shape",e,t,s),y=j("dtype",e,t,s),r=j("value",e,t,s);return[i.fill(o,r,y)]}case"LinSpace":{const o=j("start",e,t,s),y=j("stop",e,t,s),r=j("num",e,t,s);return[i.linspace(o,y,r)]}case"Multinomial":{const o=j("logits",e,t,s),y=j("numSamples",e,t,s),r=j("seed",e,t,s);return[i.multinomial(o,y,r)]}case"OneHot":{const o=j("indices",e,t,s),y=j("depth",e,t,s),r=j("onValue",e,t,s),g=j("offValue",e,t,s),n=j("dtype",e,t,s);return[i.oneHot(o,y,r,g,n)]}case"Ones":return[i.ones(j("shape",e,t,s),j("dtype",e,t,s))];case"OnesLike":return[i.onesLike(j("x",e,t,s))];case"RandomStandardNormal":return[i.randomStandardNormal(j("shape",e,t,s),j("dtype",e,t,s),j("seed",e,t,s))];case"RandomUniform":return[i.randomUniform(j("shape",e,t,s),j("minval",e,t,s),j("maxval",e,t,s),j("dtype",e,t,s))];case"RandomUniformInt":return[i.randomUniformInt(j("shape",e,t,s),j("minval",e,t,s),j("maxval",e,t,s),j("seed",e,t,s))];case"Range":{const o=j("start",e,t,s),y=j("stop",e,t,s),r=j("step",e,t,s);return[i.range(o,y,r,j("dtype",e,t,s))]}case"TruncatedNormal":{const o=j("shape",e,t,s),y=j("mean",e,t,s),r=j("stdDev",e,t,s),g=j("seed",e,t,s);return[i.truncatedNormal(o,y,r,j("dtype",e,t,s),g)]}case"Zeros":return[i.zeros(j("shape",e,t,s),j("dtype",e,t,s))];case"ZerosLike":return[i.zerosLike(j("x",e,t,s))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q0(e,t,s){const i=j("boxes",e,t,s),o=j("scores",e,t,s),y=j("maxOutputSize",e,t,s),r=j("iouThreshold",e,t,s),g=j("scoreThreshold",e,t,s),n=j("softNmsSigma",e,t,s);return{boxes:i,scores:o,maxOutputSize:y,iouThreshold:r,scoreThreshold:g,softNmsSigma:n}}const set=async(e,t,s,i,o=kn)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:y,scores:r,maxOutputSize:g,iouThreshold:n,scoreThreshold:a,softNmsSigma:p}=Q0(e,t,s),h=await o.image.nonMaxSuppressionWithScoreAsync(y,r,g,n,a,p);return[h.selectedIndices,h.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:y,scores:r,maxOutputSize:g,iouThreshold:n,scoreThreshold:a}=Q0(e,t,s),p=j("padToMaxOutputSize",e,t,s),h=await o.image.nonMaxSuppressionPaddedAsync(y,r,g,n,a,p);return[h.selectedIndices,h.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:y,scores:r,maxOutputSize:g,iouThreshold:n,scoreThreshold:a}=Q0(e,t,s);return[await o.image.nonMaxSuppressionAsync(y,r,g,n,a)]}case"Where":{const y=o.cast(j("condition",e,t,s),"bool"),r=[await o.whereAsync(y)];return y.dispose(),r}case"ListDiff":return o.setdiff1dAsync(j("x",e,t,s),j("y",e,t,s));default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iet=(e,t,s,i=kn)=>{switch(e.op){case"LowerBound":{const o=j("sortedSequence",e,t,s),y=j("values",e,t,s);return[i.lowerBound(o,y)]}case"TopKV2":{const o=j("x",e,t,s),y=j("k",e,t,s),r=j("sorted",e,t,s),g=i.topk(o,y,r);return[g.values,g.indices]}case"UpperBound":{const o=j("sortedSequence",e,t,s),y=j("values",e,t,s);return[i.upperBound(o,y)]}case"Unique":{const o=j("x",e,t,s),y=i.unique(o);return[y.values,y.indices]}case"UniqueV2":{const o=j("x",e,t,s),y=j("axis",e,t,s),r=i.unique(o,y);return[r.values,r.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ret=(e,t,s,i=kn)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const o=j("default",e,t,s);return[Fn(e.name,t,s)||o];case"Placeholder":return[Fn(e.name,t,s)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const p=j("x",e,t,s);return[Dr(p)]}case"IdentityN":return j("x",e,t,s).map(p=>Dr(p));case"Snapshot":const y=j("x",e,t,s);return[Dr(y)];case"Shape":return[i.tensor1d(j("x",e,t,s).shape,"int32")];case"ShapeN":return j("x",e,t,s).map(p=>i.tensor1d(p.shape));case"Size":return[i.scalar(j("x",e,t,s).size,"int32")];case"Rank":return[i.scalar(j("x",e,t,s).rank,"int32")];case"NoOp":return[i.scalar(1)];case"Print":const r=j("x",e,t,s),g=j("data",e,t,s),n=j("message",e,t,s),a=j("summarize",e,t,s);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(n);for(let p=0;p<g.length;p++)console.log(Array.prototype.slice.call(g[p].dataSync()).slice(0,a));return[r];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aet{get id(){return this.handle.id}constructor(t,s){this.keyDType=t,this.valueDType=s,this.handle=Wt(0),this.tensorMap=new Map,bn(this.handle)}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Wt(this.size(),"int32")}async import(t,s){this.checkKeyAndValueTensor(t,s);const i=await t.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),ft(()=>{const o=Ii(s),y=i.length,r=o.length;q(y===r,()=>`The number of elements doesn't match, keys has ${y} elements, the values has ${r} elements.`);for(let g=0;g<y;g++){const n=i[g],a=o[g];bn(a),this.tensorMap.set(n,a)}return this.handle})}async find(t,s){this.checkKeyAndValueTensor(t,s);const i=await t.data();return ft(()=>{const o=[];for(let y=0;y<i.length;y++){const r=i[y],g=this.findWithDefault(r,s);o.push(g)}return Js(o)})}findWithDefault(t,s){const i=this.tensorMap.get(t);return i??s}checkKeyAndValueTensor(t,s){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(s.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${s.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oet=async(e,t,s,i)=>{switch(e.op){case"HashTable":case"HashTableV2":{const o=i.getHashTableHandleByName(e.name);if(o!=null)return[o];{const y=j("keyDType",e,t,s),r=j("valueDType",e,t,s),g=new aet(y,r);return i.addHashTable(e.name,g),[g.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const o=j("tableHandle",e,t,s,i),y=j("keys",e,t,s),r=j("values",e,t,s);return[await i.getHashTableById(o.id).import(y,r)]}case"LookupTableFind":case"LookupTableFindV2":{const o=j("tableHandle",e,t,s,i),y=j("keys",e,t,s),r=j("defaultValue",e,t,s);return[await i.getHashTableById(o.id).find(y,r)]}case"LookupTableSize":case"LookupTableSizeV2":{const o=j("tableHandle",e,t,s,i);return[i.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uet=(e,t,s,i=kn)=>{switch(e.op){case"ResizeBilinear":{const o=j("images",e,t,s),y=j("size",e,t,s),r=j("alignCorners",e,t,s),g=j("halfPixelCenters",e,t,s);return[i.image.resizeBilinear(o,[y[0],y[1]],r,g)]}case"ResizeNearestNeighbor":{const o=j("images",e,t,s),y=j("size",e,t,s),r=j("alignCorners",e,t,s),g=j("halfPixelCenters",e,t,s);return[i.image.resizeNearestNeighbor(o,[y[0],y[1]],r,g)]}case"CropAndResize":{const o=j("image",e,t,s),y=j("boxes",e,t,s),r=j("boxInd",e,t,s),g=j("cropSize",e,t,s),n=j("method",e,t,s),a=j("extrapolationValue",e,t,s);return[i.image.cropAndResize(o,y,r,g,n,a)]}case"ImageProjectiveTransformV3":{const o=j("images",e,t,s),y=j("transforms",e,t,s),r=j("outputShape",e,t,s),g=j("fillValue",e,t,s),n=j("interpolation",e,t,s),a=j("fillMode",e,t,s);return[i.image.transform(o,y,n.toLowerCase(),a.toLowerCase(),g,r)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const het=(e,t,s,i=kn)=>{switch(e.op){case"Equal":return[i.equal(j("a",e,t,s),j("b",e,t,s))];case"NotEqual":return[i.notEqual(j("a",e,t,s),j("b",e,t,s))];case"Greater":return[i.greater(j("a",e,t,s),j("b",e,t,s))];case"GreaterEqual":return[i.greaterEqual(j("a",e,t,s),j("b",e,t,s))];case"Less":return[i.less(j("a",e,t,s),j("b",e,t,s))];case"LessEqual":return[i.lessEqual(j("a",e,t,s),j("b",e,t,s))];case"LogicalAnd":return[i.logicalAnd(j("a",e,t,s),j("b",e,t,s))];case"LogicalNot":return[i.logicalNot(j("a",e,t,s))];case"LogicalOr":return[i.logicalOr(j("a",e,t,s),j("b",e,t,s))];case"Select":case"SelectV2":return[i.where(j("condition",e,t,s),j("a",e,t,s),j("b",e,t,s))];case"BitwiseAnd":return[i.bitwiseAnd(j("a",e,t,s),j("b",e,t,s))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cet=(e,t,s,i=kn)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[i.matMul(j("a",e,t,s),j("b",e,t,s),j("transposeA",e,t,s),j("transposeB",e,t,s))];case"Einsum":return[i.einsum(j("equation",e,t,s),...j("tensors",e,t,s))];case"Transpose":return[i.transpose(j("x",e,t,s),j("perm",e,t,s))];case"_FusedMatMul":const[o,y]=j("fusedOps",e,t,s),r=o==="biasadd",g=y==="prelu",n=j("numArgs",e,t,s),a=j("leakyreluAlpha",e,t,s);if(r){if(g&&n!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!g&&n!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[p,h]=j("args",e,t,s);return[i.fused.matMul({a:j("a",e,t,s),b:j("b",e,t,s),transposeA:j("transposeA",e,t,s),transposeB:j("transposeB",e,t,s),bias:p,activation:y,preluActivationWeights:h,leakyreluAlpha:a})];case"MatrixBandPart":return[i.linalg.bandPart(j("a",e,t,s),j("numLower",e,t,s),j("numUpper",e,t,s))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fet=(e,t,s,i=kn)=>{switch(e.op){case"EuclideanNorm":return[i.euclideanNorm(j("x",e,t,s),j("axis",e,t,s),j("keepDims",e,t,s))];case"FusedBatchNorm":case"FusedBatchNormV2":return[i.batchNorm(j("x",e,t,s),j("mean",e,t,s),j("variance",e,t,s),j("offset",e,t,s),j("scale",e,t,s),j("epsilon",e,t,s))];case"FusedBatchNormV3":return[i.batchNorm(j("x",e,t,s),j("mean",e,t,s),j("variance",e,t,s),j("offset",e,t,s),j("scale",e,t,s),j("epsilon",e,t,s))];case"LRN":return[i.localResponseNormalization(j("x",e,t,s),j("radius",e,t,s),j("bias",e,t,s),j("alpha",e,t,s),j("beta",e,t,s))];case"Softmax":return[i.softmax(j("x",e,t,s))];case"LogSoftmax":return[i.logSoftmax(j("x",e,t,s))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const det=(e,t,s,i=kn)=>{switch(e.op){case"RaggedGather":{const{outputNestedSplits:o,outputDenseValues:y}=i.raggedGather(j("paramsNestedSplits",e,t,s),j("paramsDenseValues",e,t,s),j("indices",e,t,s),j("outputRaggedRank",e,t,s));return o.concat(y)}case"RaggedRange":{const{rtNestedSplits:o,rtDenseValues:y}=i.raggedRange(j("starts",e,t,s),j("limits",e,t,s),j("splits",e,t,s));return[o,y]}case"RaggedTensorToTensor":return[i.raggedTensorToTensor(j("shape",e,t,s),j("values",e,t,s),j("defaultValue",e,t,s),j("rowPartitionTensors",e,t,s),j("rowPartitionTypes",e,t,s))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pet=(e,t,s,i=kn)=>{switch(e.op){case"Max":{const g=j("axis",e,t,s),n=j("keepDims",e,t,s);return[i.max(j("x",e,t,s),g,n)]}case"Mean":{const g=j("axis",e,t,s),n=j("keepDims",e,t,s);return[i.mean(j("x",e,t,s),g,n)]}case"Min":{const g=j("axis",e,t,s),n=j("keepDims",e,t,s);return[i.min(j("x",e,t,s),g,n)]}case"Sum":{const g=j("axis",e,t,s),n=j("keepDims",e,t,s);return[i.sum(j("x",e,t,s),g,n)]}case"All":{const g=j("axis",e,t,s),n=j("keepDims",e,t,s);return[i.all(j("x",e,t,s),g,n)]}case"Any":{const g=j("axis",e,t,s),n=j("keepDims",e,t,s);return[i.any(j("x",e,t,s),g,n)]}case"ArgMax":{const g=j("axis",e,t,s);return[i.argMax(j("x",e,t,s),g)]}case"ArgMin":{const g=j("axis",e,t,s);return[i.argMin(j("x",e,t,s),g)]}case"Prod":{const g=j("axis",e,t,s),n=j("keepDims",e,t,s);return[i.prod(j("x",e,t,s),g,n)]}case"Cumprod":{const g=j("axis",e,t,s),n=j("exclusive",e,t,s),a=j("reverse",e,t,s);return[i.cumprod(j("x",e,t,s),g,n,a)]}case"Cumsum":{const g=j("axis",e,t,s),n=j("exclusive",e,t,s),a=j("reverse",e,t,s);return[i.cumsum(j("x",e,t,s),g,n,a)]}case"Bincount":const o=j("x",e,t,s),y=j("weights",e,t,s),r=j("size",e,t,s);return[i.bincount(o,y,r)];case"DenseBincount":{const g=j("x",e,t,s),n=j("weights",e,t,s),a=j("size",e,t,s),p=j("binaryOutput",e,t,s);return[i.denseBincount(g,n,a,p)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const met=(e,t,s,i=kn)=>{switch(e.op){case"ConcatV2":case"Concat":{const o=j("n",e,t,s),y=j("axis",e,t,s);let r=j("tensors",e,t,s);return r=r.slice(0,o),[i.concat(r,y)]}case"Gather":{const o=j("x",e,t,s),y=j("indices",e,t,s);return[i.gather(o,i.cast(y,"int32"),0)]}case"GatherV2":{const o=j("axis",e,t,s),y=j("batchDims",e,t,s),r=j("x",e,t,s),g=j("indices",e,t,s);return[i.gather(r,i.cast(g,"int32"),o,y)]}case"Reverse":{const o=j("dims",e,t,s),y=[];for(let g=0;g<o.length;g++)o[g]&&y.push(g);const r=j("x",e,t,s);return[i.reverse(r,y)]}case"ReverseV2":{const o=j("axis",e,t,s),y=j("x",e,t,s);return[i.reverse(y,o)]}case"Slice":{const o=j("begin",e,t,s),y=j("size",e,t,s);return[i.slice(j("x",e,t,s),o,y)]}case"StridedSlice":{const o=j("begin",e,t,s),y=j("end",e,t,s),r=j("strides",e,t,s),g=j("beginMask",e,t,s),n=j("endMask",e,t,s),a=j("ellipsisMask",e,t,s),p=j("newAxisMask",e,t,s),h=j("shrinkAxisMask",e,t,s),u=j("x",e,t,s);return[i.stridedSlice(u,o,y,r,g,n,a,p,h)]}case"Pack":return ft(()=>{const o=j("axis",e,t,s),y=j("tensors",e,t,s),r=y[0].shape,g=i.squeeze(y[0]).shape,n=y.map(a=>{const p=oe(a.shape,r);if(!p&&!oe(i.squeeze(a).shape,g))throw new Error("the input tensors shape does not match");return p?a:i.reshape(a,r)});return[i.stack(n,o)]});case"Unpack":{const o=j("axis",e,t,s),y=j("tensor",e,t,s);return i.unstack(y,o)}case"Tile":{const o=j("reps",e,t,s);return[i.tile(j("x",e,t,s),o)]}case"Split":case"SplitV":{const o=j("axis",e,t,s),y=j("numOrSizeSplits",e,t,s),r=j("x",e,t,s);return i.split(r,y,o)}case"ScatterNd":{const o=j("indices",e,t,s),y=j("values",e,t,s),r=j("shape",e,t,s);return[i.scatterND(o,y,r)]}case"GatherNd":{const o=j("x",e,t,s),y=j("indices",e,t,s);return[i.gatherND(o,y)]}case"SparseToDense":{const o=j("sparseIndices",e,t,s),y=j("outputShape",e,t,s),r=j("sparseValues",e,t,s),g=j("defaultValue",e,t,s);return[i.sparseToDense(o,r,y,r.dtype===g.dtype?g:i.cast(g,r.dtype))]}case"TensorScatterUpdate":{const o=j("indices",e,t,s),y=j("values",e,t,s),r=j("tensor",e,t,s);return[i.tensorScatterUpdate(r,o,y)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vet=(e,t,s,i=kn)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:o,outputValues:y,emptyRowIndicator:r,reverseIndexMap:g}=i.sparse.sparseFillEmptyRows(j("indices",e,t,s),j("values",e,t,s),j("denseShape",e,t,s),j("defaultValue",e,t,s));return[o,y,r,g]}case"SparseReshape":{const{outputIndices:o,outputShape:y}=i.sparse.sparseReshape(j("inputIndices",e,t,s),j("inputShape",e,t,s),j("newShape",e,t,s));return[o,y]}case"SparseSegmentMean":return[i.sparse.sparseSegmentMean(j("data",e,t,s),j("indices",e,t,s),j("segmentIds",e,t,s))];case"SparseSegmentSum":return[i.sparse.sparseSegmentSum(j("data",e,t,s),j("indices",e,t,s),j("segmentIds",e,t,s))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const get=(e,t,s,i=kn)=>{switch(e.op){case"FFT":return[i.fft(j("x",e,t,s))];case"IFFT":return[i.ifft(j("x",e,t,s))];case"RFFT":return[i.rfft(j("x",e,t,s))];case"IRFFT":return[i.irfft(j("x",e,t,s))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xet=(e,t,s,i=kn)=>{switch(e.op){case"StaticRegexReplace":return[i.string.staticRegexReplace(j("input",e,t,s),j("pattern",e,t,s),j("rewrite",e,t,s),j("replaceGlobal",e,t,s))];case"StringNGrams":{const{nGrams:o,nGramsSplits:y}=i.string.stringNGrams(j("data",e,t,s),j("dataSplits",e,t,s),j("separator",e,t,s),j("nGramWidths",e,t,s),j("leftPad",e,t,s),j("rightPad",e,t,s),j("padWidth",e,t,s),j("preserveShortSequences",e,t,s));return[o,y]}case"StringSplit":{const{indices:o,values:y,shape:r}=i.string.stringSplit(j("input",e,t,s),j("delimiter",e,t,s),j("skipEmpty",e,t,s));return[o,y,r]}case"StringToHashBucketFast":return[i.string.stringToHashBucketFast(j("input",e,t,s),j("numBuckets",e,t,s))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yet=(e,t,s,i=kn)=>{switch(e.op){case"Cast":return[i.cast(j("x",e,t,s),j("dtype",e,t,s))];case"ExpandDims":{const o=j("axis",e,t,s);return[i.expandDims(j("x",e,t,s),o)]}case"Squeeze":{const o=j("axis",e,t,s);return[i.squeeze(j("x",e,t,s),o)]}case"Reshape":return[i.reshape(j("x",e,t,s),j("shape",e,t,s))];case"EnsureShape":return[i.ensureShape(j("x",e,t,s),j("shape",e,t,s))];case"MirrorPad":return[i.mirrorPad(j("x",e,t,s),j("padding",e,t,s),j("mode",e,t,s))];case"PadV2":case"Pad":return[i.pad(j("x",e,t,s),j("padding",e,t,s),j("constantValue",e,t,s))];case"SpaceToBatchND":{const o=j("blockShape",e,t,s),y=j("paddings",e,t,s);return[i.spaceToBatchND(j("x",e,t,s),o,y)]}case"BatchToSpaceND":{const o=j("blockShape",e,t,s),y=j("crops",e,t,s);return[i.batchToSpaceND(j("x",e,t,s),o,y)]}case"DepthToSpace":{const o=j("blockSize",e,t,s),y=j("dataFormat",e,t,s).toUpperCase();return[i.depthToSpace(j("x",e,t,s),o,y)]}case"BroadcastTo":return[i.broadcastTo(j("x",e,t,s),j("shape",e,t,s))];case"BroadcastArgs":return[i.broadcastArgs(j("s0",e,t,s),j("s1",e,t,s))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GA(e,t,s,i,o=ft){const y=((r,g,n)=>{switch(r.category){case"arithmetic":return o(()=>Ktt(r,g,n));case"basic_math":return o(()=>jtt(r,g,n));case"control":return tet(r,g,n);case"convolution":return o(()=>eet(r,g,n));case"creation":return o(()=>net(r,g,n));case"dynamic":return set(r,g,n);case"evaluation":return o(()=>iet(r,g,n));case"image":return o(()=>uet(r,g,n));case"graph":return o(()=>ret(r,g,n));case"logical":return o(()=>het(r,g,n));case"matrices":return o(()=>cet(r,g,n));case"normalization":return o(()=>fet(r,g,n));case"ragged":return o(()=>det(r,g,n));case"reduction":return o(()=>pet(r,g,n));case"slice_join":return o(()=>met(r,g,n));case"sparse":return o(()=>vet(r,g,n));case"spectral":return o(()=>get(r,g,n));case"string":return o(()=>xet(r,g,n));case"transformation":return o(()=>yet(r,g,n));case"hash_table":return oet(r,g,n,i);case"custom":const a=oM(r.op);if(a&&a.customExecutor)return a.customExecutor(new Ytt(r,g,n));throw TypeError(`Custom op ${r.op} is not registered.`);default:throw TypeError(`Unknown op '${r.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,s);return Fo(y)?y.then(r=>[].concat(r)):[].concat(y)}class UA{constructor(t={},s={},i={},o={},y){this.weightMap=t,this.tensorArrayMap=s,this.tensorListMap=i,this.functionMap=o,this.parseNodeNameCache=y,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,s){return{id:t,frameName:s,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let s=0;s<this.contexts.length-1;s++){const i=this.contexts.slice(0,this.contexts.length-s);t.push(this.contextIdforContexts(i))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(s=>s.id===0&&s.iterationId===0?"":`${s.frameName}-${s.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const s in this.tensorArrayMap)this.tensorArrayMap[s].clearAndClose(t);for(const s in this.tensorListMap)this.tensorListMap[s].clearAndClose(t)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WA(e,t,s,i){const o=new Set,y=[];let r=null,g=null;const n=new Set,a=new Set(Object.keys(e).map(u=>Cs(u)[0]));i=i||[];const p=new Set(i.map(u=>Cs(u.name)[0])),h=[...t];for(;h.length>0;){const u=h.pop();if((co(u)||Ret(u)||Net(u))&&r==null&&(r=u,g=r.children.map(d=>d.name).filter(d=>o.has(d))),o.add(u.name),s[u.name]==null&&!a.has(u.name)&&!p.has(u.name)){if(u.inputs.length===0){y.push(u.name);continue}u.inputs.forEach(d=>{n.has(d.name)||(n.add(d.name),h.push(d))})}}return{inputs:e,outputs:t,usedNodes:o,missingInputs:y,dynamicNode:r,syncInputs:g}}function Tet(e,t){const{usedNodes:s,inputs:i}=t,o=Object.keys(i).map(m=>Cs(m)[0]).map(m=>e.nodes[m]),y=e.initNodes||[],r=m=>s.has(typeof m=="string"?m:m.name);function g(m){return[...new Map(m.map(f=>[f.name,f])).values()]}const n=g([...o,...e.weights,...y]).filter(r),a=g([...n,...Object.values(e.nodes)]).filter(r),p=new Map(a.map(m=>[m.name,m])),h={};for(const m of a){h[m.name]=h[m.name]||0;for(const f of m.children)r(f)||(h[f.name]=Number.POSITIVE_INFINITY),h[f.name]=(h[f.name]||0)+1}const u=Object.entries(h).filter(([,m])=>m===0).map(([m])=>m),d=[...u];for(;u.length>0;){const m=u.pop(),f=p.get(m);for(const v of f.children.filter(r))--h[v.name]===0&&(d.push(v.name),u.push(v.name))}const l=d.map(m=>p.get(m)),c=Cet(l,n);return wet(c,n),c}function Cet(e,t){const s=new Map(e.map(r=>[r.name,r])),i=t.map(r=>r.name),o=new Set(i);for(;i.length>0;){const r=i.pop(),g=s.get(r);for(const n of g.children)!s.has(n.name)||o.has(n.name)||(o.add(n.name),i.push(n.name))}return e.filter(r=>o.has(r.name))}class bd extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}}function wet(e,t){const s=new Map(e.map((g,n)=>[g.name,n])),i=new Set(t.map(g=>g.name)),o=g=>i.has(typeof g=="string"?g:g.name),y=new Set(e.map(g=>g.name)),r=g=>y.has(typeof g=="string"?g:g.name);for(const g of e){for(const n of g.children.filter(r)){if(!s.has(n.name))throw new bd(`Child ${n.name} of node ${g.name} is unreachable.`);if(s.get(g.name)>s.get(n.name))throw new bd(`Node ${g.name} is scheduled to run after its child ${n.name}.`)}if(!o(g))for(const n of g.inputs){if(!s.has(n.name))throw new bd(`Input ${n.name} of node ${g.name} is unreachable.`);if(s.get(n.name)>s.get(g.name))throw new bd(`Node ${g.name} is scheduled to run before its input ${n.name}.`)}}}function Eet(e){const t=new Map(e.map((g,n)=>[g.name,n])),s=Number.MAX_SAFE_INTEGER,i=e.map((g,n)=>co(g)?s:n),o=g=>{const n=i[t.get(g.name)];return n??-1},y=e.map((g,n)=>g.children.map(o).reduce((a,p)=>Math.max(a,p),i[n])),r=new Map;for(let g=0;g<e.length;++g){const n=y[g];if(n===s)continue;const a=e[g],p=e[n];r.has(p.name)||r.set(p.name,[]),r.get(p.name).push(a)}return r}const bet=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Aet=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Iet=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function co(e){return bet.has(e.op)}function Ret(e){return Aet.has(e.op)}function Net(e){return Iet.has(e.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rm{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const s=Object.keys(t).map(i=>t[i].map(o=>o.id));this._weightIds=[].concat(...s),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const s=t.signatureKey||t.name;return t.defaultOutput?`${s}:${t.defaultOutput}`:s})}get functions(){return Object.keys(this._functions).reduce((t,s)=>(t[s]=this._functions[s].signature,t),{})}constructor(t,s){this.graph=t,this.parent=s,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(i=>{this._functionExecutorMap[i]=new rm(t.functions[i],this)})}getCompilationKey(t,s){const i=t.map(y=>y.name).sort(),o=s.map(y=>y.name).sort();return i.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(t,s){const i=WA(t,s,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:y,syncInputs:r}=i;if(y!=null)throw new Error(`This execution contains the node '${y.name}', which has the dynamic op '${y.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${r}]`);if(o.length>0){const a=s.map(h=>h.name),p=Object.keys(t);throw new Error(`Cannot compute the outputs [${a}] from the provided inputs [${p}]. Missing the following inputs: [${o}]`)}const g=Tet(this.graph,i),n=Eet(g);return{orderedNodes:g,nodeLiveUntilMap:n}}cloneAndKeepTensor(t){if(t==null)return null;const s=t.clone();return bn(s),s}cloneTensorList(t){return t?t.map(i=>this.cloneAndKeepTensor(i)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([s,i])=>[s,this.cloneTensorList(i)]))}execute(t,s){this.disposeIntermediateTensors(),t=this.mapInputs(t);const i=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),s=this.mapOutputs(s),this.checkOutputs(s);const o=i.map(u=>this.graph.nodes[Cs(u)[0]]),y=s.map(u=>Cs(u)[0]),r=new Set(y);let g=y.map(u=>this.graph.nodes[u]);g.length===0&&(g=this._outputs);const n=this.getCompilationKey(o,g);let a=this.compiledMap.get(n);a==null&&(a=this.compile(t,g),this.compiledMap.set(n,a));try{this.keepIntermediateTensors=pt().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(u){this.keepIntermediateTensors=!1,console.warn(u.message)}const p={},h={};return ft(()=>{const u=new UA(this.weightMap,p,h,this.functionExecutorMap,this.parseNodeNameCache),d=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(f=>{const[v,S]=Cs(f,u),x=[];x[S]=t[f],d[v]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[v]=this.cloneTensorList(x))});const l=this.getFrozenTensorIds(d),{orderedNodes:c,nodeLiveUntilMap:m}=a;for(const f of c){if(d[f.name])continue;const v=GA(f,d,u,this._resourceManager);if(Fo(v))throw new Error(`The execution of the op '${f.op}' returned a promise. Please use model.executeAsync() instead.`);d[f.name]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[f.name]=this.cloneTensorList(v)),this.checkTensorForDisposalWithNodeLiveUntilInfo(f,d,u,l,r,m.get(f.name))}return this.parent==null&&u.dispose(l),s.map(f=>Fn(f,d,u))})}getFrozenTensorIds(t){const s=[].concat.apply([],Object.keys(t).map(i=>t[i]).map(i=>i.map(o=>o.id)));return new Set(s)}checkTensorForDisposal(t,s,i,o,y,r,g){if(!(co(s)||r.has(t))){for(const n of i[t])n!=null&&(g[n.id]=(g[n.id]||0)+s.children.length);for(const n of s.inputs){if(co(n))continue;const a=$A(n.name,i,o);if(a!=null)for(const p of a){if(!p||p.kept||y.has(p.id))continue;const h=g[p.id];h===1?(p.dispose(),delete g[p.id]):h!=null&&g[p.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,s,i,o,y,r){function g(n){return co(n)||y.has(n.name)}if(!(co(t)||r==null))for(const n of r){if(g(n))continue;const a=$A(n.name,s,i);for(const p of a)!p||p.kept||o.has(p.id)||p.dispose()}}async executeAsync(t,s){return this._executeAsync(t,s)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(const s of t)s&&!s.isDisposed&&s.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(t,s,i=!1,o={},y={}){this.disposeIntermediateTensors(),i||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),s=this.mapOutputs(s),this.checkOutputs(s));try{this.keepIntermediateTensors=pt().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(u){this.keepIntermediateTensors=!1,console.warn(u.message)}const r=new UA(this.weightMap,o,y,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const g=await this.executeWithControlFlow(t,r,s,i),n=s.map(u=>Fn(u,g,r)),a=n.map(u=>u.id),p=Object.keys(t).map(u=>t[u].id),h=new Set([...a,...p,...this.weightIds]);return Object.values(g).forEach(u=>{u.forEach(d=>{d&&!d.isDisposed&&!h.has(d.id)&&d.dispose()})}),this.parent==null&&r.dispose(h),n}async executeFunctionAsync(t,s,i){const o=t.reduce((y,r,g)=>(y[this.inputs[g].name]=r,y),{});return this._executeAsync(o,this.outputNodes,!0,s,i)}async executeWithControlFlow(t,s,i,o){const y=Object.keys(t),r=y.map(x=>this.graph.nodes[Cs(x)[0]]),g=i.map(x=>Cs(x)[0]),n=new Set(g);let a=g.map(x=>this.graph.nodes[x]);a.length===0&&(a=this._outputs);const{usedNodes:p,missingInputs:h,dynamicNode:u,syncInputs:d}=WA(t,a,this.weightMap,this._initNodes),l=[...r,...this.graph.weights,...this._initNodes||[]].map(x=>({node:x,contexts:s.currentContext})),c=Object.assign({},this.weightMap);Object.keys(t).forEach(x=>{const[T,C]=Cs(x),w=[];w[C]=t[x],c[T]=w});const m={},f=this.getFrozenTensorIds(c),v={};for(;l.length>0;){const x=this.processStack(r,l,s,c,v,f,n,m,p);await Promise.all(x)}u==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const S=a.filter(x=>!co(x)&&!Fn(x.name,c,s)).map(x=>x.name);if(S.length>0){let x="";throw u!=null&&(x=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${S}] from the provided inputs [${y}]. Consider providing the following inputs: [${h}]. ${x}`)}return c}processStack(t,s,i,o,y,r,g,n,a){const p=[];for(;s.length>0;){const h=s.pop();i.currentContext=h.contexts;let u="";if(h.node.op==="Enter"&&j("isConstant",h.node,o,i)&&([u]=Or(h.node.name,i)),o[h.node.name]==null){const d=GA(h.node,o,i,this._resourceManager);u||([u]=Or(h.node.name,i));const l=i.currentContext;Fo(d)?p.push(d.then(c=>(o[u]=c,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(c)),i.currentContext=l,this.checkTensorForDisposal(u,h.node,o,i,r,g,n),this.processChildNodes(h.node,s,i,o,y,a),c))):(o[u]=d,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(d)),this.checkTensorForDisposal(u,h.node,o,i,r,g,n),this.processChildNodes(h.node,s,i,o,y,a))}else this.processChildNodes(h.node,s,i,o,y,a)}return p}processChildNodes(t,s,i,o,y,r){t.children.forEach(g=>{const[n]=Or(g.name,i);y[n]||!r.has(g.name)||(g.op==="Merge"?g.inputNames.some(a=>!!Fn(a,o,i))&&(y[n]=!0,s.push({contexts:i.currentContext,node:g})):g.inputNames.every(a=>!!Fn(a,o,i))&&(y[n]=!0,s.push({contexts:i.currentContext,node:g})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(s=>s.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(s=>{const i=t[s],[o]=Cs(s),y=this.graph.nodes[o];if(y.attrParams.shape&&y.attrParams.shape.value){const r=y.attrParams.shape.value,g=r.length===i.shape.length&&i.shape.every((n,a)=>r[a]===-1||r[a]===n);q(g,()=>`The shape of dict['${y.name}'] provided in model.execute(dict) must be [${r}], but was [${i.shape}]`)}y.attrParams.dtype&&y.attrParams.dtype.value&&q(i.dtype===y.attrParams.dtype.value,()=>`The dtype of dict['${y.name}'] provided in model.execute(dict) must be ${y.attrParams.dtype.value}, but was ${i.dtype}`)})}mapInputs(t){var s,i;const o={};for(const y in t){const r=(i=(s=this._signature)===null||s===void 0?void 0:s.inputs)===null||i===void 0?void 0:i[y];r!=null?o[r.name]=t[y]:o[y]=t[y]}return o}checkInputs(t){const s=Object.keys(t).filter(i=>{const[o]=Cs(i);return this.graph.nodes[o]==null});if(s.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${s}] that are not part of graph`)}mapOutputs(t){return t.map(s=>{var i,o;const y=(o=(i=this._signature)===null||i===void 0?void 0:i.outputs)===null||o===void 0?void 0:o[s];return y!=null?y.name:s},{})}checkOutputs(t){t.forEach(s=>{const[i]=Cs(s);if(!this.graph.nodes[i])throw new Error(`The output '${s}' is not found in the graph`)})}}class Pet{constructor(t={},s={}){this.hashTableNameToHandle=t,this.hashTableMap=s}addHashTable(t,s){this.hashTableNameToHandle[t]=s.handle,this.hashTableMap[s.id]=s}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(const t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(const t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fet="?tfjs-format=file",Oet="model.json";class Det{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,s={},i=fO){this.modelUrl=t,this.loadOptions=s,this.version="n/a",this.io=i,s==null&&(this.loadOptions={}),this.resourceManager=new Pet}findIOHandler(){const t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{const s=this.io.getLoadHandlers(t,this.loadOptions);if(s.length===0)s.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(s.length>1)throw new Error(`Found more than one (${s.length}) load handlers for URL '${[t]}'`);this.handler=s[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=this.handler.load();return Fo(t)?t.then(s=>this.loadSync(s)):this.loadSync(t)}loadSync(t){this.artifacts=t;const s=this.artifacts.modelTopology;let i=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const y=this.artifacts.userDefinedMetadata;y.signature!=null&&(i=y.signature),y.structuredOutputKeys!=null&&(this.structuredOutputKeys=y.structuredOutputKeys)}this.signature=i,this.version=`${s.versions.producer}.${s.versions.minConsumer}`;const o=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new rm(BA.Instance.transformGraph(s,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(o),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){const y=BA.Instance.transformGraph(t.modelInitializer);this.initializer=new rm(y),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}async save(t,s){if(typeof t=="string"){const i=this.io.getSaveHandlers(t);if(i.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(i.length>1)throw new Error(`Found more than one (${i.length}) save handlers for URL '${t}'`);t=i[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}addStructuredOutputNames(t){if(this.structuredOutputKeys){const s=t instanceof $e?[t]:t,i={};return s.forEach((o,y)=>i[this.structuredOutputKeys[y]]=o),i}return t}predict(t,s){const i=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(i)}async predictAsync(t,s){const i=await this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(i)}normalizeInputs(t){var s;if(!(t instanceof $e)&&!Array.isArray(t)){const y=(s=this.signature)===null||s===void 0?void 0:s.inputs;if(y!=null)for(const r in y){const g=y[r];g.resourceId!=null&&(t[r]=this.resourceIdToCapturedInput[g.resourceId])}return t}t=Array.isArray(t)?t:[t];const i=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+i!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-i} non-resource placeholders, while there are ${t.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((y,r)=>{var g,n,a;const p=(a=(n=(g=this.signature)===null||g===void 0?void 0:g.inputs)===null||n===void 0?void 0:n[r])===null||a===void 0?void 0:a.resourceId;return p!=null?y[r]=this.resourceIdToCapturedInput[p]:y[r]=t[o++],y},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){const s=this.initializerSignature.outputs,i=Object.keys(s);for(let o=0;o<i.length;o++){const y=i[o],r=s[y];this.resourceIdToCapturedInput[r.resourceId]=t[o]}}}execute(t,s){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),s=this.normalizeOutputs(s);const i=this.executor.execute(t,s);return i.length>1?i:i[0]}async executeAsync(t,s){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),s=this.normalizeOutputs(s);const i=await this.executor.executeAsync(t,s);return i.length>1?i:i[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((s,i)=>(s[i]=[t[i]],s),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&ne(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Let(e,t={},s=fO){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=Met(e));const i=new Det(e,t,s);return await i.load(),i}function Met(e){return e.endsWith("/")||(e=e+"/"),`${e}${Oet}${Fet}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var HA;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(HA||(HA={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $t(e,t){Array.isArray(e)||(e=[e]),e.forEach(s=>{s!=null&&q(s.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $et=FT;class Mg extends B2{nextDataId(){return Mg.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new r3(this,tr())}write(t,s,i){this.firstUse&&(this.firstUse=!1,pt().get("IS_NODE")&&Vs(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:t,dtype:i,refCount:1}),o}makeTensorInfo(t,s,i){let o;if(s==="string"&&i!=null&&i.length>0&&wc(i[0])){const y=i.map(r=>Ia(r));o=this.write(y,t,s)}else o=this.write(i,t,s);return{dataId:o,shape:t,dtype:s}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const s=this.data.get(t);s.refCount++}decRef(t){if(this.data.has(t)){const s=this.data.get(t);s.refCount--}}move(t,s,i,o,y){this.data.set(t,{values:s,dtype:o,refCount:y})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:s,complexTensorInfos:i}=this.data.get(t);if(s==="complex64"){const o=this.readSync(i.real.dataId),y=this.readSync(i.imag.dataId);return Kr(o,y)}return YG(this.data.get(t).values,s)}bufferSync(t){const s=this.readSync(t.dataId);if(t.dtype==="string")try{const i=s.map(o=>Oa(o));return te(t.shape,t.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return te(t.shape,t.dtype,s)}makeOutput(t,s,i){return tr().makeTensorFromTensorInfo(this.makeTensorInfo(s,i,t),this)}disposeData(t,s=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!s&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:i}=this.data.get(t);i!=null&&(this.disposeData(i.real.dataId,!0),this.disposeData(i.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const s=cs();return t(),{kernelMs:cs()-s}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){$t([t],"where");const s=this.readSync(t.dataId);return $et(t.shape,s)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Mg.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hM(e){const t=new Float32Array(e.length);for(let s=0;s<e.length;++s)t[s]=Math.abs(e[s]);return t}const Bet=e=>{const{x:t}=e.inputs,s=e.backend;$t(t,"abs");let i=new Float32Array(vt(t.shape));const o=s.data.get(t.dataId).values;return i=hM(o),s.makeOutput(i,t.shape,t.dtype)},ket={kernelName:Jm,backendName:"cpu",kernelFunc:Bet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nn(e){return(t,s,i,o,y)=>{const r=Qt(t,s),g=r.length,n=Vt(r),a=vt(r),p=Ln(y,a),h=t.length,u=s.length,d=Vt(t),l=Vt(s),c=ou(t,r),m=ou(s,r);if(c.length+m.length===0)for(let f=0;f<p.length;++f)p[f]=e(i[f%i.length],o[f%o.length]);else for(let f=0;f<p.length;++f){const v=Au(f,g,n),S=v.slice(-h);c.forEach(w=>S[w]=0);const x=mr(S,h,d),T=v.slice(-u);m.forEach(w=>T[w]=0);const C=mr(T,u,l);p[f]=e(i[x],o[C])}return[p,r]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Es(e){const{inputs:t,backend:s}=e,{real:i,imag:o}=t,y=s.data.get(i.dataId).values,r=s.data.get(o.dataId).values,g=s.makeTensorInfo(i.shape,"complex64"),n=s.data.get(g.dataId);return n.complexTensorInfos={real:s.makeTensorInfo(i.shape,"float32",y),imag:s.makeTensorInfo(o.shape,"float32",r)},g}const zet={kernelName:K2,backendName:"cpu",kernelFunc:Es};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function am(e,t,s="float32"){if(s==="complex64"){const o=am(e,t,"float32"),y=am(e,t,"float32");return Es({inputs:{real:o,imag:y},backend:e})}const i=Yn(vt(t),s);return e.makeTensorInfo(t,s,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tr(e){const{inputs:t,backend:s}=e,{x:i}=t;return s.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}const Vet={kernelName:Hc,backendName:"cpu",kernelFunc:Tr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vo(e){const{inputs:t,backend:s}=e,{input:i}=t,o=s.data.get(i.dataId).complexTensorInfos.real,y=s.data.get(o.dataId).values;return s.makeTensorInfo(o.shape,o.dtype,y)}const Get={kernelName:bS,backendName:"cpu",kernelFunc:Vo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cM(e,t,s,i){if(i==="int32"){const o=Int32Array.from(e);return[t,"int32",o]}if(i==="bool"){const o=Ko([0],s),[y,r]=nn((g,n)=>g!==n?1:0)(t,[],e,o,"bool");return[r,"bool",y]}throw new Error(`Error in Cast: failed to cast ${s} to ${i}`)}function Ga(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{dtype:y}=i;if(y==="complex64"){if(o.dtype==="complex64")return Tr({inputs:{x:o},backend:s});const p=am(s,o.shape,o.dtype),h=Ga({inputs:{x:o},backend:s,attrs:{dtype:"float32"}}),u=Es({inputs:{real:h,imag:p},backend:s});return s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(h),u}if(o.dtype==="complex64"){const p=Vo({inputs:{input:o},backend:s}),h=Ga({inputs:{x:p},backend:s,attrs:{dtype:y}});return s.disposeIntermediateTensorInfo(p),h}if(!o3(o.dtype,y)){const p=Tr({inputs:{x:o},backend:s});return{dataId:p.dataId,shape:p.shape,dtype:y}}const r=s.data.get(o.dataId).values,[g,n,a]=cM(r,o.shape,o.dtype,y);return s.makeTensorInfo(g,n,a)}const Uet={kernelName:Fc,backendName:"cpu",kernelFunc:Ga};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sn(e,t,s,i){return s==null?({inputs:o,backend:y})=>{const{a:r,b:g}=o,n=y;$t([r,g],e);const a=n.data.get(r.dataId).values,p=n.data.get(g.dataId).values,h=r.dtype==="string"?jr(a):a,u=r.dtype==="string"?jr(p):p,d=i||r.dtype,[l,c]=t(r.shape,g.shape,h,u,d);return n.makeTensorInfo(c,d,l)}:({inputs:o,backend:y})=>{const{a:r,b:g}=o,n=y;if(r.dtype==="complex64"||g.dtype==="complex64"){const a=Ga({inputs:{x:r},backend:n,attrs:{dtype:"complex64"}}),p=n.data.get(a.dataId),h=p.complexTensorInfos.real,u=p.complexTensorInfos.imag,d=n.data.get(h.dataId).values,l=n.data.get(u.dataId).values,c=Ga({inputs:{x:g},backend:n,attrs:{dtype:"complex64"}}),m=n.data.get(c.dataId),f=m.complexTensorInfos.real,v=m.complexTensorInfos.imag,S=n.data.get(f.dataId).values,x=n.data.get(v.dataId).values,[T,C,w]=s(r.shape,g.shape,d,l,S,x),b=n.makeTensorInfo(w,"float32",T),E=n.makeTensorInfo(w,"float32",C),A=Es({inputs:{real:b,imag:E},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(E),A}else{const a=n.data.get(r.dataId).values,p=n.data.get(g.dataId).values,h=i||r.dtype,[u,d]=t(r.shape,g.shape,a,p,h);return n.makeTensorInfo(d,h,u)}}}function MC(e){return(t,s,i,o,y,r)=>{const g=Qt(t,s),n=vt(g),a=g.length,p=Vt(g),h=Ln("float32",n),u=Ln("float32",n),d=ou(t,g),l=ou(s,g),c=Kr(i,o),m=Kr(y,r),f=t.length,v=Vt(t),S=s.length,x=Vt(s);if(d.length+l.length===0)for(let T=0;T<h.length;T++){const C=T%c.length,w=T%m.length,b=e(c[C*2],c[C*2+1],m[w*2],m[w*2+1]);h[T]=b.real,u[T]=b.imag}else for(let T=0;T<h.length;T++){const C=Au(T,a,p),w=C.slice(-f);d.forEach(R=>w[R]=0);const b=mr(w,f,v),E=C.slice(-S);l.forEach(R=>E[R]=0);const A=mr(E,S,x),I=e(c[b*2],c[b*2+1],m[A*2],m[A*2+1]);h[T]=I.real,u[T]=I.imag}return[h,u,g]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fM=nn((e,t)=>e+t),Wet=MC((e,t,s,i)=>({real:e+s,imag:t+i})),cu=Sn(Iu,fM,Wet),Het={kernelName:Iu,backendName:"cpu",kernelFunc:cu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $C(e,t,s,i,o){const y=vt(i),r=Yn(o,s);for(let g=0;g<e.length;g++){const n=e[g];if(n<0)throw new Error("Input x must be non-negative!");n>=o||(y>0?r[n]+=t[g]:r[n]+=1)}return r}function dM(e,t,s,i=!1){const o=e.shape[0],y=e.shape[1],r=te([o,s],t.dtype);for(let g=0;g<o;g++)for(let n=0;n<y;n++){const a=e.get(g,n);if(a<0)throw new Error("Input x must be non-negative!");a>=s||(i?r.set(1,g,a):t.size>0?r.set(r.get(g,a)+t.get(g,n),g,a):r.set(r.get(g,a)+1,g,a))}return r}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pM=nn((e,t)=>e&t),Xet=Sn(iv,pM),Yet={kernelName:iv,backendName:"cpu",kernelFunc:Xet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wr(e){return(t,s,i)=>{const o=Qe(s,t.length);for(let y=0;y<t.length;++y)o[y]=e(t[y],i);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Se(e,t,s){const i=wr(t);return eo(e,i,s)}function eo(e,t,s){return({inputs:i,attrs:o,backend:y})=>{const{x:r}=i;$t(r,e);const g=y,n=g.data.get(r.dataId).values;let a;if(r.dtype==="string"){if(!Array.isArray(n))throw new Error("String tensor's value was not an instance of Array");a=jr(n)}else a=n;const p=s||r.dtype,h=t(a,p,o);return g.makeTensorInfo(r.shape,p,h)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mM=wr(e=>Math.ceil(e)),Ket=eo(Oc,mM),jet={kernelName:Oc,backendName:"cpu",kernelFunc:Ket};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vM(e,t,s,i){const o=Qe(s,vt(t));if(i&&s!=="string"){let y=0;e.forEach(r=>{const g=vt(r.shape);o.set(r.vals,y),y+=g})}else{let y=0;e.forEach(r=>{const g=s==="string"?jr(r.vals):r.vals;let n=0;for(let a=0;a<r.shape[0];++a){const p=a*t[1]+y;for(let h=0;h<r.shape[1];++h)o[p+h]=g[n++]}y+=r.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gM=nn((e,t)=>e===t?1:0),xM=Sn(dv,gM,null,"bool"),Zet={kernelName:dv,backendName:"cpu",kernelFunc:xM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yM=wr(e=>Math.exp(e)),SM=eo(zc,yM,"float32"),Jet={kernelName:zc,backendName:"cpu",kernelFunc:SM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TM=wr(e=>Math.expm1(e)),Qet=eo(Vc,TM),qet={kernelName:Vc,backendName:"cpu",kernelFunc:Qet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CM=wr(e=>Math.floor(e)),_et=eo(Gc,CM),tnt={kernelName:Gc,backendName:"cpu",kernelFunc:_et};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wM=nn((e,t)=>Math.floor(e/t)),ent=Sn(Uc,wM,null,"int32"),nnt={kernelName:Uc,backendName:"cpu",kernelFunc:ent};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EM(e,t,s,i,o,y,r,g,n){const a=te([i,y],s);for(let p=0;p<i;p++){const h=[];let u=0;for(let d=0;d<o;d++){const l=e[p*o+d];u+=l*r[d],h.push(l)}if(u<0||u>=n/y)throw new Error(`Invalid indices: ${h} does not index into ${g}`);for(let d=0;d<y;d++)a.values[p*y+d]=t.get(...t.indexToLoc(u*y+d))}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bM(e,t,s){const i=te(s,e.dtype);for(let o=0;o<i.size;++o){const r=i.indexToLoc(o).slice(),g=r[0],n=r[2],a=t.locToIndex([g,n]);r[2]=t.values[a];const p=e.locToIndex(r);0<=p&&p<e.values.length&&(i.values[o]=e.values[p])}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AM=nn((e,t)=>e>t?1:0),snt=Sn(gv,AM,null,"bool"),int={kernelName:gv,backendName:"cpu",kernelFunc:snt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IM=nn((e,t)=>e>=t?1:0),rnt=Sn(Wc,IM,null,"bool"),ant={kernelName:Wc,backendName:"cpu",kernelFunc:rnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RM=nn((e,t)=>e<t?1:0),ont=Sn(yv,RM,null,"bool"),lnt={kernelName:yv,backendName:"cpu",kernelFunc:ont};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NM=nn((e,t)=>e<=t?1:0),unt=Sn(Sv,NM,null,"bool"),hnt={kernelName:Sv,backendName:"cpu",kernelFunc:unt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PM(e,t,s){const i=(t-e)/(s-1),o=Yn(s,"float32");o[0]=e;for(let y=1;y<o.length;y++)o[y]=o[y-1]+i;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FM=wr(e=>Math.log(e)),cnt=eo(jc,FM),fnt={kernelName:jc,backendName:"cpu",kernelFunc:cnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OM(e,t,s,i){const o=Ln(i,vt(s));for(let y=0;y<o.length;++y){const r=y*t;let g=e[r];for(let n=0;n<t;++n){const a=e[r+n];(Number.isNaN(a)||a>g)&&(g=a)}o[y]=g}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DM=nn((e,t)=>Math.max(e,t)),dnt=Sn(Jc,DM),pnt={kernelName:Jc,backendName:"cpu",kernelFunc:dnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LM=nn((e,t)=>Math.min(e,t)),mnt=Sn(Qc,LM),vnt={kernelName:Qc,backendName:"cpu",kernelFunc:mnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BC=nn((e,t)=>e*t),gnt=MC((e,t,s,i)=>({real:e*s-t*i,imag:e*i+t*s})),$g=Sn(_c,BC,gnt),xnt={kernelName:_c,backendName:"cpu",kernelFunc:$g};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MM(e,t,s){const i=Ya(-1,s);return BC([],t,i,e,s)}function ynt(e){const{inputs:t,backend:s}=e,{x:i}=t;$t(i,"neg");const o=s.data.get(i.dataId).values,[y,r]=MM(o,i.shape,i.dtype);return s.makeTensorInfo(r,i.dtype,y)}const Snt={kernelName:Fv,backendName:"cpu",kernelFunc:ynt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $M=nn((e,t)=>e!==t?1:0),Tnt=Sn(Ov,$M,null,"bool"),Cnt={kernelName:Ov,backendName:"cpu",kernelFunc:Tnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kC(e,t,s,i,o){const y=t.length,r=vt(t),g=Vt(t),n=Vt(o),a=Ln(s,vt(o));for(let p=0;p<r;++p){const h=Au(p,y,g),u=new Array(h.length);for(let l=0;l<u.length;l++)u[l]=h[i[l]];const d=mr(u,y,n);a[d]=e[p]}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vs(e){const{inputs:t,attrs:s,backend:i}=e,{x:o}=t,{perm:y}=s;$t(o,"transpose");const r=o.shape.length,g=new Array(r);for(let h=0;h<g.length;h++)g[h]=o.shape[y[h]];const n=i.data.get(o.dataId).values,a=kC(n,o.shape,o.dtype,y,g);return{dataId:i.write(a,g,o.dtype),shape:g,dtype:o.dtype}}const wnt={kernelName:Gl,backendName:"cpu",kernelFunc:vs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BM(e,t,s,i){const[o,y]=Nn(e,i),r=Os(t,"int32"),g=Yn(vt(o),r),n=vt(y);for(let a=0;a<g.length;++a){const p=a*n;let h=1;for(let u=0;u<n;++u)h*=s[p+u];g[a]=h}return{outVals:g,outShape:o,outDtype:r}}function Ent(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,keepDims:r}=i;$t(o,"prod");const g=o.shape.length,n=se(y,o.shape),a=We(n,g);let p=n,h=o;const u=[];a!=null&&(h=vs({inputs:{x:o},backend:s,attrs:{perm:a}}),u.push(h),p=tn(p.length,g));const d=s.data.get(h.dataId).values,{outVals:l,outShape:c,outDtype:m}=BM(h.shape,h.dtype,d,p);let f=c;return r&&(f=_e(c,n)),u.forEach(v=>s.disposeIntermediateTensorInfo(v)),s.makeTensorInfo(f,m,l)}const bnt={kernelName:kv,backendName:"cpu",kernelFunc:Ent};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ant(e,t,s){e.forEach((i,o)=>{if(i<0||i>=s){const y=Au(o,t.length,Vt(t)).join(",");throw new Error(`indices[${y}] = ${i} is not in [0, ${s})`)}})}function Int(e,t){for(let s=0;s<e.length;++s){const i=e[s],o=s===e.length-1?t:e[s+1].length;if(i.length===0)throw new Error("Ragged splits may not be empty");if(i[0]<0)throw new Error("Ragged splits must be non-negative");if(i[i.length-1]>o)throw new Error("Ragged splits must not point past values");for(let y=1;y<i.length;++y)if(i[y-1]>i[y])throw new Error("Ragged splits must be sorted in ascending order")}}function Rnt(e,t,s,i){const o=[];let y=0;const r=t.length-1+s.length,g=new Array(r).fill(null).map(()=>[0]);Int(s,i);let n=1;for(let a=0;a<t.length-1;++a){n*=t[a];const p=t[a+1];for(let h=1;h<n+1;++h)g[a].push(h*p)}for(let a=0;a<e.length;++a){let p=e[a],h=e[a]+1;for(let u=0;u<s.length;++u){const d=s[u],l=u+t.length-1;if(l>=0){const c=g[l],m=c[c.length-1]-d[p];for(let f=p;f<h;++f)g[l].push(d[f+1]+m)}p=d[p],h=d[h]}h!==p&&(o.push([p,h]),y+=h-p)}return{outSplits:g,valueSlices:o,numValues:y}}function Nnt(e){const t=[];for(let s=0;s<e.length;++s){const i=e[s].length,o=Qe("int32",i);t.push(o),e[s].forEach((y,r)=>o[r]=y)}return t}function XA(e,t){const s=e.slice(0,t);for(;s.length<t;)s.push(1);for(let i=t;i<e.length;i++)s[t-1]*=e[i];return s}function Pnt(e,t,s,i,o,y){const r=XA(t,2)[1],g=XA(y,2)[1];let n=0;for(const a of s)for(let p=a[0];p<a[1];++p){for(let h=0;h<i;++h)o[n*g+h]=e[p*r+h];++n}}function Fnt(e,t,s,i,o){const y=t.slice();y[0]=o;const r=Qe(s,vt(y)),g=e.length,n=g===0?0:g/t[0];return Pnt(e,t,i,n,r,y),[r,y]}function kM(e,t,s,i,o,y,r,g){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");const n=t[0][0]-1;if(Ant(y,r,n),i.length===0)throw new Error("params.rank must be nonzero");const a=i[0],{outSplits:p,valueSlices:h,numValues:u}=Rnt(y,r,e,a),d=Nnt(p),l=Fnt(s,i,o,h,u);return[d,l[0],l[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YA=2147483647;function zM(e,t,s,i,o,y,r){if(t.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(r.length>1)throw new Error("deltas must be a scalar or vector");const g=t.length===0,n=o.length===0,a=r.length===0,p=[];g||p.push(t[0]),n||p.push(o[0]),a||p.push(r[0]);for(let m=1;m<p.length;++m)if(p[m]!==p[m-1])throw new Error("starts, limits, and deltas must have the same shape");const h=p.length===0?1:p[0],u=Qe("int32",h+1);u[0]=0;for(let m=0;m<h;++m){const f=g?e[0]:e[m],v=n?i[0]:i[m],S=a?y[0]:y[m];if(S===0)throw new Error("Requires delta != 0");let x;if(S>0&&v<f||S<0&&v>f)x=0;else if(x=Math.ceil(Math.abs((v-f)/S)),x>YA)throw new Error(`Requires ((limit - start) / delta) <= ${YA}`);u[m+1]=u[m]+x}const d=u[h],l=Qe(s,d);let c=0;for(let m=0;m<h;++m){const f=u[m+1]-u[m];let v=g?e[0]:e[m];const S=a?y[0]:y[m];for(let x=0;x<f;++x)l[c++]=v,v+=S}return[u,l]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var si=zi;class om{constructor(t,s,i,o,y,r,g,n,a,p){this.shape=t,this.shapeShape=s,this.values=i,this.valuesShape=o,this.valuesDType=y,this.defaultValue=r,this.defaultValueShape=g,this.rowPartitionValues=n,this.rowPartitionValuesShapes=a,this.rowPartitionTypes=wO(p),this.raggedRank=EO(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===si.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===si.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const s=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case si.VALUE_ROWIDS:return om.getMaxWidthValueRowID(s);case si.ROW_SPLITS:return om.getMaxWidthRowSplit(s);default:throw new Error(`Cannot handle partition type ${si[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){const s=t.length;if(s===0||s===1)return 0;let i=0;for(let o=0;o<s-1;++o){const y=t[o+1]-t[o];y>i&&(i=y)}return i}static getMaxWidthValueRowID(t){const s=t.length;if(s===0)return 0;let i=0,o=t[0],y=0;for(let r=1;r<s;++r){const g=t[r];g!==o&&(o=g,y=Math.max(r-i,y),i=r)}return Math.max(s-i,y)}tensorShapeFromTensor(t,s,i=!0){if(s.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return jA(t,i)}calculateOutputSize(t){const s=this.valuesShape,i=this.defaultValueShape;bO(i,s);const o=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=CO(this.raggedRank,o,s);r[0]<0&&(r[0]=t);for(let g=1;g<=this.raggedRank;++g)r[g]<0&&(r[g]=this.getMaxWidth(g));return r}calculateFirstParentOutputIndex(t,s,i){const o=Math.min(t,i),y=[];let r=0;for(let g=0;g<o;++g,r+=s)y.push(r);for(let g=o;g<t;++g)y.push(-1);return q(y.length===t,()=>"Final length of result must be equal to firstDimension."),y}calculateOutputIndexRowSplit(t,s,i,o){const y=t.length,r=[];for(let g=0;g<y-1;++g){const n=t[g+1]-t[g];let a=Math.min(o,n),p=s[g];p===-1&&(a=0);for(let h=0;h<a;++h)r.push(p),p+=i;for(let h=0;h<n-a;++h)r.push(-1)}if(y>0&&r.length!==t[y-1])throw new Error("Invalid row split size.");return r}calculateOutputIndexValueRowID(t,s,i,o){const y=t.length,r=[];if(y===0)return[];let g=0,n=t[0];if(n>=s.length)throw new Error(`Got currentValueRowId=${n}, which is not less than ${s.length}`);let a=s[n];r.push(a);for(let p=1;p<y;++p){const h=t[p];if(h===n)a>=0&&(++g,g<o?a+=i:a=-1);else{if(g=0,n=h,h>=s.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${s.length}`);a=s[h]}r.push(a)}if(r.length!==t.length)throw new Error("Invalid row ids.");return r}calculateOutputIndex(t,s,i,o){const y=this.getRowPartitionTensor(t),r=this.getRowPartitionTypeByDimension(t);switch(r){case si.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(y,s,i,o);case si.ROW_SPLITS:if(y.length-1>s.length)throw new Error(`Row partition size is greater than output size: ${y.length-1} > ${s.length}`);return this.calculateOutputIndexRowSplit(y,s,i,o);default:throw new Error(`Unsupported partition type: ${si[r]}`)}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const s=this.rowPartitionTypes[0];switch(s){case si.FIRST_DIM_SIZE:return t[0];case si.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case si.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${si[s]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const s=this.getFirstDimensionSize(),i=this.calculateOutputSize(s),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let n=o.length-2;n>=0;--n)o[n]=o[n+1]*i[n+1];const y=jA(i,!1),r=Qe(this.valuesDType,vt(y));if(o[0]*i[0]>0){let n=this.calculateFirstParentOutputIndex(s,o[0],i[0]);for(let a=1;a<=this.raggedRank;++a)n=this.calculateOutputIndex(a-1,n,o[a],i[a]);this.setOutput(this.raggedRank,n,r,y)}return[y,r]}setOutput(t,s,i,o){if(i.length===0)return;const y=this.values,r=i;let g=o.slice();g=g.slice(t+1);const n=vt(g),a=s.length;let p=this.defaultValue;if(p.length!==n&&p.length!==1){const l=this.defaultValueShape;ft(()=>{const c=at(p,l);p=Hl(c,g).dataSync()})}let h=0,u=0,d=0;for(let l=0;l<=a;++l){let c=l<a?s[l]:-1;if(c===d){++d;continue}if(u<d){const m=y.subarray(h*n),f=r.subarray(u*n),v=(d-u)*n;KA(f,m,v)}if(l>=a){const m=i.length;c=Math.floor(m/n)}if(c>d)if(this.defaultValue.length===1)r.subarray(d*n,c*n).fill(this.defaultValue[0]),d=c;else for(;c>d;){const m=r.slice(d*n);KA(m,p,n),++d}c<0?(h=l+1,u=d):(h=l,u=d,d=u+1)}}}function KA(e,t,s){for(let i=0;i<s;i++)e[i]=t[i]}function jA(e,t){const s=[];for(let i of e){if(i<0){if(!t)throw new Error(`Dimension ${i} must be >= 0`);if(i<-1)throw new Error(`Dimension ${i} must be >= -1`);i=-1}s.push(i)}return s}function VM(e,t,s,i,o,y,r,g,n,a){return new om(e,t,s,i,o,y,r,g,n,a).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GM(e,t,s,i){const o=e===t,y=e<t&&s<0,r=t<e&&s>1;if(o||y||r)return Yn(0,i);const g=Math.abs(Math.ceil((t-e)/s)),n=Yn(g,i);t<e&&s===1&&(s=-1),n[0]=e;for(let a=1;a<n.length;a++)n[a]=n[a-1]+s;return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UM=wr(e=>1/Math.sqrt(e)),Ont=eo(af,UM),Dnt={kernelName:af,backendName:"cpu",kernelFunc:Ont};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yo(e,t,s,i,o,y,r,g,n,a){const p=[i/o,o],h=e.values,u=t.values;if(i===0)return te(s,t.dtype);const d=n instanceof vn?n:te(p,t.dtype);typeof n=="string"||typeof n=="number"?d.values.fill(n):typeof n=="boolean"&&d.values.fill(+n);for(let l=0;l<y;l++){const c=[];let m=0;for(let f=0;f<r;f++){const v=h[l*r+f];c.push(v),m+=v*g[f]}if(m<0||m>=i/o)throw new Error(`Invalid indices: ${c} does not index into ${s}`);for(let f=0;f<o;f++)a?d.values[m*o+f]+=u[l*o+f]:d.values[m*o+f]=t.rank===0?u[0]:u[l*o+f]}return d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lnt=wr(e=>1/(1+Math.exp(-e))),WM=Se(cf,e=>1/(1+Math.exp(-e))),Mnt={kernelName:cf,backendName:"cpu",kernelFunc:WM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HM(e,t,s,i,o){const y=HT(i,t,s),r=vt(s),g=Vt(i);if(y){const h=XT(t,g);return o==="string"?e.slice(h,h+r):e.subarray(h,h+r)}const n=o==="string"?jr(e):e,a=te(i,o,n),p=te(s,o);for(let h=0;h<p.size;++h){const u=p.indexToLoc(h),d=u.map((l,c)=>l+t[c]);p.set(a.get(...d),...u)}return o==="string"?XO(p.values):p.values}function Go(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{begin:y,size:r}=i;$t(o,"slice");const[g,n]=Tg(o,y,r);UT(o,g,n);const a=s.data.get(o.dataId).values,p=HM(a,g,n,o.shape,o.dtype);return s.makeTensorInfo(n,o.dtype,p)}const $nt={kernelName:Hv,backendName:"cpu",kernelFunc:Go};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XM(e,t,s,i,o,y,r){const g=t[0],n=y[0],a=new Array(n),p=new Array(g),h=t[1];if(n===0){if(g!==0)throw new Error(OO(g));const m=Qe(s,0),f=Qe(o,0);return[m,[0,h],f,a,p]}let u=!0,d=0;const l=new Array(n).fill(0);for(let m=0;m<g;++m){const f=e[m*h];if(f<0)throw new Error(DO(m,f));if(f>=n)throw new Error(LO(m,f,n));++l[f],u=u&&f>=d,d=f}let c=!0;for(let m=0;m<n;++m){const f=l[m]===0;a[m]=f,c=c&&!f,l[m]=Math.max(l[m],1),m>0&&(l[m]+=l[m-1])}if(c&&u){const m=e,f=i;for(let v=0;v<g;++v)p[v]=v;return[m,[g,h],f,a,p]}else{const m=l[n-1],f=Qe(s,m*h),v=Qe(o,m),S=new Array(n).fill(0);for(let x=0;x<g;++x){const T=e[x*h],C=S[T],w=(T===0?0:l[T-1])+C;S[T]++;for(let b=0;b<h;++b)f[w*h+b]=e[x*h+b];v[w]=i[x],p[x]=w}for(let x=0;x<n;++x)if(S[x]===0){const C=x===0?0:l[x-1];f[C*h+0]=x;for(let w=1;w<h;++w)f[C*h+w]=0;v[C]=r}return[f,[m,h],v,a,p]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YM(e,t,s,i,o){const y=vt(i),r=t[0],g=o.length,n=[];let a=1,p=-1;for(let m=0;m<g;++m){const f=o[m];if(f===-1){if(p!==-1)throw new Error(MO(p,m));p=m,n.push(1)}else{if(f<0)throw new Error($O(m,f));a*=f,n.push(f)}}if(p!==-1){if(a<=0)throw new Error(BO());const m=Math.trunc(y/a);if(a*m!==y)throw new Error(kO(i,n));n[p]=m}if(vt(n)!==y)throw new Error(zO(i,n));const u=i.length,d=[];if(u>0){d[u-1]=1;for(let m=u-2;m>=0;--m)d[m]=d[m+1]*i[m+1]}const l=[];if(g>0){l[g-1]=1;for(let m=g-2;m>=0;--m)l[m]=l[m+1]*n[m+1]}const c=Qe(s,r*g);for(let m=0;m<r;++m){let f=0;for(let v=0;v<u;++v)f+=e[m*u+v]*d[v];for(let v=0;v<g;++v)c[m*g+v]=Math.trunc(f/l[v]),f%=l[v]}return[c,[r,g],n]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zC(e,t,s,i,o,y=!1,r=0){const g=i.length,n=[t[0],e.length/t[0]],a=n[1],h=g>0?o[g-1]+1:0;if(h<0)throw new Error(Ky());const u=t.slice();u[0]=h;const d=u.reduce((S,x)=>S*x,1),l=Qe(s,d);if(g===0)return h>0&&l.fill(r),[l,u];if(h<=0)throw new Error(Ky());let c=0,m=1,f=0,v=o[c];for(;;){let S=0;if(m<g){if(S=o[m],v===S){++m;continue}if(v>=S)throw new Error(VO())}if(v<0||v>=h)throw new Error(GO(v,h));v>f&&l.fill(r,f*a,v*a);for(let x=c;x<m;++x){const T=i[x];if(T<0||T>=n[0])throw new Error(UO(x,i[x],n[0]));for(let C=0;C<a;C++)l[v*a+C]+=e[T*a+C]}if(y)for(let x=0;x<a;x++)l[v*a+x]/=m-c;if(c=m,++m,f=v+1,v=S,m>g)break}return f<h&&l.fill(r,f*a,h*a),[l,u]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bnt=wr(e=>Math.sqrt(e)),knt=Se(df,e=>Math.sqrt(e)),znt={kernelName:df,backendName:"cpu",kernelFunc:knt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KM=nn((e,t)=>{const s=e-t;return s*s}),Vnt=Sn(pf,KM),Gnt={kernelName:pf,backendName:"cpu",kernelFunc:Vnt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jM=wr((e,t)=>{const{pattern:s,replaceGlobal:i,rewrite:o}=t;return e.replace(new RegExp(s,i?"g":""),o)}),Unt=eo(Zv,jM),Wnt={kernelName:Zv,backendName:"cpu",kernelFunc:Unt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZM(e,t,s,i){const o=te(e,t.dtype);for(let y=0;y<o.size;y++){const r=o.indexToLoc(y),g=new Array(r.length);for(let n=0;n<g.length;n++)g[n]=r[n]*s[n]+i[n];o.set(t.get(...g),...r)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hnt{constructor(t,s,i,o,y,r){this.separator=Ia(t),this.nGramWidths=s,this.leftPad=Ia(i),this.rightPad=Ia(o),this.padWidth=y,this.preserveShort=r}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,s){const i=this.getPadWidth(s);return Math.max(0,t+2*i-s+1)}createNGrams(t,s,i,o,y,r){for(let g=0;g<y;++g){const n=this.getPadWidth(r),a=Math.max(0,n-g),p=Math.max(0,n-(y-(g+1))),h=r-(a+p),u=s+(a>0?0:g-n);let d=0;d+=a*this.leftPad.length;for(let v=0;v<h;++v)d+=t[u+v].length;d+=p*this.rightPad.length;const l=a+p+h-1;d+=l*this.separator.length,i[o+g]=new Uint8Array(d);const c=i[o+g];let m=0;const f=v=>v.forEach(S=>c[m++]=S);for(let v=0;v<a;++v)f(this.leftPad),f(this.separator);for(let v=0;v<h-1;++v)f(t[u+v]),f(this.separator);if(h>0){f(t[u+h-1]);for(let v=0;v<p;++v)f(this.separator),f(this.rightPad)}else{for(let v=0;v<p-1;++v)f(this.rightPad),f(this.separator);f(this.rightPad)}}}compute(t,s){const i=t.length,o=s.length;if(o>0){let n=s[0];if(n!==0)throw new Error(`First split value must be 0, got ${n}`);for(let a=1;a<o;++a){let p=s[a]>=n;if(p=p&&s[a]<=i,!p)throw new Error(`Invalid split value ${s[a]}, must be in [${n}, ${i}]`);n=s[a]}if(n!==i)throw new Error(`Last split value must be data size. Expected ${i}, got ${n}`)}const y=o-1,r=Qe("int32",o);if(i===0||o===0){const n=new Array(i);for(let a=0;a<=y;++a)r[a]=0;return[n,r]}r[0]=0;for(let n=1;n<=y;++n){const a=s[n]-s[n-1];let p=0;this.nGramWidths.forEach(h=>{p+=this.getNumNGrams(a,h)}),this.preserveShort&&a>0&&p===0&&(p=1),r[n]=r[n-1]+p}const g=new Array(r[y]);for(let n=0;n<y;++n){const a=s[n];let p=r[n];if(this.nGramWidths.forEach(h=>{const u=s[n+1]-s[n],d=this.getNumNGrams(u,h);this.createNGrams(t,a,g,p,d,h),p+=d}),this.preserveShort&&p===r[n]){const h=s[n+1]-s[n];if(h===0)continue;const u=h+2*this.padWidth,d=1;this.createNGrams(t,a,g,p,d,u)}}return[g,r]}}function JM(e,t,s,i,o,y,r,g){return new Hnt(s,i,o,y,r,g).compute(e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xnt(e,t,s,i){if(!e.length)return;if(t.length===0){for(let y=0;y<e.length;++y)i.push(e.subarray(y,y+1));return}if(t.length===1){const y=t[0];let r=e.indexOf(y);for(;r!==-1;){const g=e.subarray(0,r);(!s||g.length!==0)&&i.push(g),e=e.subarray(r+1),r=e.indexOf(y)}(!s||e.length!==0)&&i.push(e);return}let o=0;for(let y=0;y<e.length+1;y++)if(y===e.length||t.indexOf(e[y])!==-1){const r=e.subarray(o,y);(!s||r.length!==0)&&i.push(r),o=y+1}}function QM(e,t,s){const i=e.length,o=[];let y=0,r=0;const g=new Array(i);for(let u=0;u<i;++u){const d=o.length;Xnt(e[u],t,s,o);const l=o.length-d;g[u]=l,y+=l,r=Math.max(r,l)}const n=Qe("int32",y*2),a=new Array(y),p=[i,r];let h=0;for(let u=0;u<i;++u)for(let d=0;d<g[u];++d)n[h*2]=u,n[h*2+1]=d,a[h]=o[h],++h;return[n,a,p]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qM(e,t){const s=Qe("int32",e.length);for(let i=0;i<e.length;++i)s[i]=cU(e[i]).modulo(t).getLowBitsUnsigned();return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _M=nn((e,t)=>e-t),Ynt=MC((e,t,s,i)=>({real:e-s,imag:t-i})),VC=Sn(mf,_M,Ynt),Knt={kernelName:mf,backendName:"cpu",kernelFunc:VC};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t4(e,t){const s=new Array(e.rank);for(let o=0;o<s.length;o++)s[o]=e.shape[o]*t[o];const i=te(s,e.dtype);for(let o=0;o<i.values.length;++o){const y=i.indexToLoc(o),r=new Array(e.rank);for(let n=0;n<r.length;n++)r[n]=y[n]%e.shape[n];const g=e.locToIndex(r);i.values[o]=e.values[g]}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vh=(e,t)=>{const s=t.value-e.value;return s===0?e.index-t.index:s};function e4(e,t,s=0,i=e.length-1){for(;i>s;){if(i-s>600){const g=i-s+1,n=t-s+1,a=Math.log(g),p=.5*Math.exp(2*a/3),h=.5*Math.sqrt(a*p*(g-p)/g)*Math.sign(n-g/2),u=Math.max(s,Math.floor(t-n*p/g+h)),d=Math.min(i,Math.floor(t+(g-n)*p/g+h));e4(e,t,u,d)}const o=e[t];let y=s,r=i;for(vl(e,s,t),vh(e[i],o)>0&&vl(e,s,i);y<r;){for(vl(e,y,r),y++,r--;vh(e[y],o)<0;)y=y+1;for(;vh(e[r],o)>0;)r=r-1}vh(e[s],o)===0?vl(e,s,r):(r=r+1,vl(e,r,i)),r<=t&&(s=r+1),t<=r&&(i=r-1)}}function n4(e,t,s,i,o){const y=t[t.length-1],[r,g]=[e.length/y,y],n=Ln(s,r*i),a=Ln("int32",r*i);for(let h=0;h<r;h++){const u=h*g,d=e.subarray(u,u+g);let l=new Array(d.length);d.forEach((v,S)=>l[S]={value:v,index:S}),i<l.length&&(e4(l,i),l=l.slice(0,i)),o&&l.sort(vh);const c=h*i,m=n.subarray(c,c+i),f=a.subarray(c,c+i);for(let v=0;v<i;v++)m[v]=l[v].value,f[v]=l[v].index}const p=t.slice();return p[p.length-1]=i,[te(p,s,n),te(p,"int32",a)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s4(e,t,s,i){const o=se(t,s)[0],y=[1,s[0],1];for(let l=0;l<o;l++)y[0]*=s[l];y[1]=s[o];for(let l=o+1;l<s.length;l++)y[2]*=s[l];const r=new Map,g=new Int32Array(s[o]),n=new vn(y,i,e),a=[],p=y[0]===1&&y[2]===1;for(let l=0;l<s[o];l++){let c;if(p)c=e[l].toString();else{const f=[];for(let v=0;v<y[0];v++)for(let S=0;S<y[2];S++)f.push(n.get(v,l,S));c=f.join(",")}const m=r.get(c);if(m!=null)g[l]=m;else{const f=r.size;r.set(c,f),g[l]=f,a.push(l)}}const h=y.slice();h[1]=r.size;const u=new vn(h,i);a.forEach((l,c)=>{for(let m=0;m<y[0];m++)for(let f=0;f<y[2];f++)u.set(n.get(m,l,f),m,c,f)});const d=s.slice();return d[o]=h[1],{outputValues:u.values,outputShape:d,indices:g}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jnt=Object.freeze(Object.defineProperty({__proto__:null,addImpl:fM,bincountImpl:$C,bincountReduceImpl:dM,bitwiseAndImpl:pM,castImpl:cM,ceilImpl:mM,concatImpl:vM,equalImpl:gM,expImpl:yM,expm1Impl:TM,floorDivImpl:wM,floorImpl:CM,gatherNdImpl:EM,gatherV2Impl:bM,greaterEqualImpl:IM,greaterImpl:AM,lessEqualImpl:NM,lessImpl:RM,linSpaceImpl:PM,logImpl:FM,maxImpl:OM,maximumImpl:DM,minimumImpl:LM,multiplyImpl:BC,negImpl:MM,notEqualImpl:$M,prodImpl:BM,raggedGatherImpl:kM,raggedRangeImpl:zM,raggedTensorToTensorImpl:VM,rangeImpl:GM,rsqrtImpl:UM,scatterImpl:yo,sigmoidImpl:Lnt,simpleAbsImpl:hM,sliceImpl:HM,sparseFillEmptyRowsImpl:XM,sparseReshapeImpl:YM,sparseSegmentReductionImpl:zC,sqrtImpl:Bnt,squaredDifferenceImpl:KM,staticRegexReplaceImpl:jM,stridedSliceImpl:ZM,stringNGramsImpl:JM,stringSplitImpl:QM,stringToHashBucketFastImpl:qM,subImpl:_M,tileImpl:t4,topKImpl:n4,transposeImpl:kC,uniqueImpl:s4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */K3("cpu",()=>new Mg,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i4=Se(Bc,e=>e>=0?e:Math.exp(e)-1),Znt={kernelName:Bc,backendName:"cpu",kernelFunc:i4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r4(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{alpha:y}=i;$t([o],"leakyRelu");const r=vt(o.shape),g=s.data.get(o.dataId).values,n=Ln("float32",r);for(let a=0;a<g.length;a++)n[a]=g[a]<0?y*g[a]:g[a];return s.makeTensorInfo(o.shape,"float32",n)}const Jnt={kernelName:xv,backendName:"cpu",kernelFunc:r4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qnt=nn((e,t)=>e<0?t*e:e);function a4(e){const{inputs:t,backend:s}=e,{x:i,alpha:o}=t;$t([i,o],"prelu");const y=s.data.get(i.dataId).values,r=s.data.get(o.dataId).values,[g,n]=Qnt(i.shape,o.shape,y,r,"float32");return s.makeTensorInfo(n,"float32",g)}const qnt={kernelName:Bv,backendName:"cpu",kernelFunc:a4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4=Se(nf,e=>Math.max(0,e)),_nt={kernelName:nf,backendName:"cpu",kernelFunc:o4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l4=Se(sf,e=>Math.min(Math.max(0,e),6)),tst={kernelName:sf,backendName:"cpu",kernelFunc:l4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lm(e,t,s,i,o){if(s==="linear")return Tr({inputs:{x:t},backend:e});if(s==="relu")return o4({inputs:{x:t},backend:e});if(s==="elu")return i4({inputs:{x:t},backend:e});if(s==="relu6")return l4({inputs:{x:t},backend:e});if(s==="prelu")return a4({inputs:{x:t,alpha:i},backend:e});if(s==="leakyrelu")return r4({inputs:{x:t},backend:e,attrs:{alpha:o}});if(s==="sigmoid")return WM({inputs:{x:t},backend:e});throw new Error(`Activation ${s} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Re(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{shape:y}=i,r=vt(o.shape),g=a3(y,r),n=vt(g);q(r===n,()=>`The new shape (${g}) has ${n} elements and the old shape (${o.shape}) has ${r} elements. The new shape and old shape must have the same number of elements.`),s.incRef(o.dataId);const a=s.data.get(o.dataId);if(a.complexTensorInfos!=null){const p=a.complexTensorInfos.real,h=a.complexTensorInfos.imag;p.shape=g,h.shape=g}return{dataId:o.dataId,shape:g,dtype:o.dtype}}const est={kernelName:zv,backendName:"cpu",kernelFunc:Re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u4(e){const{inputs:t,backend:s,attrs:i}=e,{a:o,b:y}=t,{transposeA:r,transposeB:g}=i;$t([o,y],"matMul");const n=o.shape.length,a=y.shape.length,p=r?o.shape[n-2]:o.shape[n-1],h=g?y.shape[a-1]:y.shape[a-2],u=r?o.shape[n-1]:o.shape[n-2],d=g?y.shape[a-2]:y.shape[a-1],l=o.shape.slice(0,-2),c=y.shape.slice(0,-2),m=vt(l),f=vt(c),S=Qt(o.shape.slice(0,-2),y.shape.slice(0,-2)).concat([u,d]);q(p===h,()=>`Error in matMul: inner shapes (${p}) and (${h}) of Tensors with shapes ${o.shape} and ${y.shape} and transposeA=${r} and transposeB=${g} must match.`);const x=r?[m,p,u]:[m,u,p],T=g?[f,d,h]:[f,h,d],C=Re({inputs:{x:o},backend:s,attrs:{shape:x}}),w=Re({inputs:{x:y},backend:s,attrs:{shape:T}}),b=r?C.shape[1]:C.shape[2],E=r?C.shape[2]:C.shape[1],A=g?w.shape[1]:w.shape[2],I=Math.max(m,f),R=s.data.get(C.dataId).values,N=s.data.get(w.dataId).values,F=Vt(C.shape),P=Vt(w.shape),[D,M,L]=r?[F[0],1,F[1]]:[F[0],F[1],1],[k,V,W]=g?[1,P[1],P[0]]:[P[1],1,P[0]],K=E*A,B=te([I,E,A],C.dtype),G=B.values,O=s.blockSize;for(let $=0;$<I;$++){const z=$%m,X=$%f;for(let Y=0;Y<E;Y+=O){const Z=Math.min(Y+O,E);for(let J=0;J<A;J+=O){const tt=Math.min(J+O,A);for(let et=0;et<b;et+=O){const lt=Math.min(et+O,b);for(let ut=Y;ut<Z;ut++)for(let ct=J;ct<tt;ct++){let ht=0;for(let xt=et;xt<lt;xt++){const Tt=R[z*D+ut*M+xt*L],At=N[xt*k+ct*V+X*W];ht+=Tt*At}G[$*K+(ut*A+ct)]+=ht}}}}}return s.disposeIntermediateTensorInfo(C),s.disposeIntermediateTensorInfo(w),s.makeTensorInfo(S,B.dtype,B.values)}const nst={kernelName:nv,backendName:"cpu",kernelFunc:u4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sst(e){const{inputs:t,backend:s,attrs:i}=e,{a:o,b:y,bias:r,preluActivationWeights:g}=t,{transposeA:n,transposeB:a,activation:p,leakyreluAlpha:h}=i;let u,d,l;const c=[];u=u4({inputs:{a:o,b:y},attrs:{transposeA:n,transposeB:a},backend:s}),r&&(d=cu({inputs:{a:u,b:r},backend:s}),c.push(u),u=d),p&&(l=lm(s,u,p,g,h),c.push(u),u=l);for(const f of c)s.disposeIntermediateTensorInfo(f);return u}const ist={kernelName:zp,backendName:"cpu",kernelFunc:sst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rst=Se(Ec,e=>Math.acos(e)),ast={kernelName:Ec,backendName:"cpu",kernelFunc:rst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ost=Se(bc,e=>Math.acosh(e)),lst={kernelName:bc,backendName:"cpu",kernelFunc:ost};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ust(e){const{inputs:t,backend:s}=e,i=t;$t(t,"addN");const o=i.map(g=>s.data.get(g.dataId).values),y=te(i[0].shape,i[0].dtype),r=y.values;for(let g=0;g<i.length;g++){const n=o[g];for(let a=0;a<r.length;a++)r[a]+=n[a]}return s.makeTensorInfo(y.shape,y.dtype,y.values)}const hst={kernelName:Qm,backendName:"cpu",kernelFunc:ust};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cst(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,keepDims:r}=i;$t(o,"all");const g=se(y,o.shape);let n=g;const a=We(n,o.shape.length);let p=o;a!=null&&(p=vs({inputs:{x:o},backend:s,attrs:{perm:a}}),n=tn(n.length,o.shape.length)),Bn("all",n,p.shape.length);const[h,u]=Nn(p.shape,n),d=vt(u),l=Yn(vt(h),p.dtype),c=s.data.get(p.dataId).values;for(let f=0;f<l.length;++f){const v=f*d;let S=c[v];for(let x=0;x<d;++x){const T=c[v+x];S=S&&T}l[f]=S}a!=null&&s.disposeIntermediateTensorInfo(p);const m=s.makeTensorInfo(h,p.dtype,l);if(r){const f=_e(h,g),v=Re({inputs:{x:m},backend:s,attrs:{shape:f}});return s.disposeIntermediateTensorInfo(m),v}return m}const fst={kernelName:G2,backendName:"cpu",kernelFunc:cst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dst(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,keepDims:r}=i;$t(o,"any");const g=se(y,o.shape);let n=g;const a=We(n,o.shape.length);let p=o;a!=null&&(p=vs({inputs:{x:o},backend:s,attrs:{perm:a}}),n=tn(n.length,o.shape.length)),Bn("any",n,p.shape.length);const[h,u]=Nn(p.shape,n),d=vt(u),l=Yn(vt(h),p.dtype),c=s.data.get(p.dataId).values;for(let f=0;f<l.length;++f){const v=f*d;let S=c[v];for(let x=0;x<d;++x){const T=c[v+x];S=S||T}l[f]=S}a!=null&&s.disposeIntermediateTensorInfo(p);const m=s.makeTensorInfo(h,p.dtype,l);if(r){const f=_e(h,g),v=Re({inputs:{x:m},backend:s,attrs:{shape:f}});return s.disposeIntermediateTensorInfo(m),v}return m}const pst={kernelName:U2,backendName:"cpu",kernelFunc:dst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mst(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y}=i;$t(o,"argMax");let r=se(y,o.shape);const g=We(r,o.shape.length);let n=o;const a=[];g!=null&&(n=vs({inputs:{x:o},backend:s,attrs:{perm:g}}),a.push(n),r=tn(r.length,n.shape.length)),r=[r[0]],Bn("argMax",r,n.shape.length);const[p,h]=Nn(n.shape,r),u=vt(p),d=Yn(u,"int32"),l=vt(h),c=s.data.get(n.dataId).values;for(let m=0;m<d.length;++m){const f=m*l;let v=c[f],S=0;for(let x=0;x<l;++x){const T=c[f+x];T>v&&(v=T,S=x)}d[m]=S}return a.forEach(m=>s.disposeIntermediateTensorInfo(m)),s.makeTensorInfo(p,"int32",d)}const vst={kernelName:qm,backendName:"cpu",kernelFunc:mst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gst(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y}=i;$t(o,"argMin");let r=se(y,o.shape);const g=We(r,o.shape.length);let n=o;const a=[];g!=null&&(n=vs({inputs:{x:o},backend:s,attrs:{perm:g}}),a.push(n),r=tn(r.length,n.shape.length)),r=[r[0]],Bn("argMin",r,n.shape.length);const[p,h]=Nn(n.shape,r),u=vt(p),d=Yn(u,"int32"),l=vt(h),c=s.data.get(n.dataId).values;for(let m=0;m<d.length;++m){const f=m*l;let v=c[f],S=0;for(let x=0;x<l;++x){const T=c[f+x];T<v&&(v=T,S=x)}d[m]=S}return a.forEach(m=>s.disposeIntermediateTensorInfo(m)),s.makeTensorInfo(p,"int32",d)}const xst={kernelName:_m,backendName:"cpu",kernelFunc:gst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yst=Se(Ac,e=>Math.asin(e)),Sst={kernelName:Ac,backendName:"cpu",kernelFunc:yst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tst=Se(Ic,e=>Math.asinh(e)),Cst={kernelName:Ic,backendName:"cpu",kernelFunc:Tst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wst=Se(Rc,e=>Math.atan(e)),Est={kernelName:Rc,backendName:"cpu",kernelFunc:wst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bst=nn((e,t)=>Math.atan2(e,t)),Ast=Sn(Pc,bst),Ist={kernelName:Pc,backendName:"cpu",kernelFunc:Ast};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rst=Se(Nc,e=>Math.atanh(e)),Nst={kernelName:Nc,backendName:"cpu",kernelFunc:Rst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GC(e,t,s,i,o,y){const r=o.strideHeight,g=o.strideWidth,n=o.dilationHeight,a=o.dilationWidth,p=o.effectiveFilterHeight,h=o.effectiveFilterWidth,u=o.padInfo.top,d=o.padInfo.left,l=y==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,c=te(o.outShape,s),m=c.values,f=o.outShape[1]*o.outShape[2]*o.outShape[3],v=o.outShape[2]*o.outShape[3],S=o.outShape[3];for(let x=0;x<o.batchSize;++x){const T=x*f,C=x*i[0];for(let w=0;w<o.inChannels;++w)for(let b=0;b<o.outHeight;++b){const E=b*r-u,A=Math.max(0,E),I=Math.min(o.inHeight,p+E),R=T+b*v;for(let N=0;N<o.outWidth;++N){const F=N*g-d,P=Math.max(0,F),D=Math.min(o.inWidth,h+F);let M=l,L=0,k=0;for(let W=A;W<I;W+=n){const K=C+W*i[1];for(let B=P;B<D;B+=a){const G=K+B*i[2],O=e[G+w];y==="max"&&O>M?M=O:y==="avg"&&(L+=O,k++)}if(isNaN(M))break}const V=R+N*S+w;m[V]=y==="avg"?L/k:M}}}return c}function h4(e,t,s,i,o=!1,y=!1){const r=te(i.outShape,"int32"),g=i.strideHeight,n=i.strideWidth,a=i.dilationHeight,p=i.dilationWidth,h=i.effectiveFilterHeight,u=i.effectiveFilterWidth,d=i.padInfo.top,l=i.padInfo.left,c=te(t,s,e);for(let m=0;m<i.batchSize;++m)for(let f=0;f<i.inChannels;++f)for(let v=0;v<i.outHeight;++v){const S=v*g-d;let x=S;for(;x<0;)x+=a;const T=Math.min(i.inHeight,h+S);for(let C=0;C<i.outWidth;++C){const w=C*n-l;let b=w;for(;b<0;)b+=p;const E=Math.min(i.inWidth,u+w);let A=Number.NEGATIVE_INFINITY,I=-1;for(let R=x;R<T;R+=a){const N=R-S;for(let F=b;F<E;F+=p){const P=F-w,D=c.get(m,R,F,f);D>A&&(A=D,o?I=y?((m*i.inHeight+R)*i.inWidth+F)*i.inChannels+f:(R*i.inWidth+F)*i.inChannels+f:I=N*u+P)}}r.set(I,m,v,C,f)}}return r}function c4(e,t,s,i,o,y){const r=o.strideDepth,g=o.strideHeight,n=o.strideWidth,a=o.dilationDepth,p=o.dilationHeight,h=o.dilationWidth,u=o.effectiveFilterDepth,d=o.effectiveFilterHeight,l=o.effectiveFilterWidth,c=o.padInfo.front,m=o.padInfo.top,f=o.padInfo.left,v=y==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,S=te(o.outShape,s),x=S.values,T=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],C=o.outShape[2]*o.outShape[3]*o.outShape[4],w=o.outShape[3]*o.outShape[4],b=o.outShape[4];for(let E=0;E<o.batchSize;++E){const A=E*T,I=E*i[0];for(let R=0;R<o.inChannels;++R)for(let N=0;N<o.outDepth;++N){const F=N*r-c;let P=F;for(;P<0;)P+=a;const D=Math.min(o.inDepth,u+F),M=A+N*C;for(let L=0;L<o.outHeight;++L){const k=L*g-m;let V=k;for(;V<0;)V+=p;const W=Math.min(o.inHeight,d+k),K=M+L*w;for(let B=0;B<o.outWidth;++B){const G=B*n-f;let O=G;for(;O<0;)O+=h;const $=Math.min(o.inWidth,l+G),z=K+B*b;let X=v,Y=0,Z=0;for(let tt=P;tt<D;tt+=a){const et=I+tt*i[1];for(let lt=V;lt<W;lt+=p){const ut=et+lt*i[2];for(let ct=O;ct<$;ct+=h){const ht=ut+ct*i[3],xt=e[ht+R];if(y==="max"&&xt>X?X=xt:y==="avg"&&(Y+=xt,Z++),isNaN(X))break}if(isNaN(X))break}if(isNaN(X))break}const J=z+R;x[J]=y==="avg"?Y/Math.max(Z,1):X}}}}return S}function Pst(e,t){const s=te(t.outShape,"int32"),i=t.strideDepth,o=t.strideHeight,y=t.strideWidth,r=t.dilationDepth,g=t.dilationHeight,n=t.dilationWidth,a=t.effectiveFilterDepth,p=t.effectiveFilterHeight,h=t.effectiveFilterWidth,u=t.padInfo.front,d=t.padInfo.top,l=t.padInfo.left;for(let c=0;c<t.batchSize;++c)for(let m=0;m<t.inChannels;++m)for(let f=0;f<t.outDepth;++f){const v=f*i-u;let S=v;for(;S<0;)S+=r;const x=Math.min(t.inDepth,a+v);for(let T=0;T<t.outHeight;++T){const C=T*o-d;let w=C;for(;w<0;)w+=g;const b=Math.min(t.inHeight,p+C);for(let E=0;E<t.outWidth;++E){const A=E*y-l;let I=A;for(;I<0;)I+=n;const R=Math.min(t.inWidth,h+A);let N=Number.NEGATIVE_INFINITY,F=-1;for(let P=S;P<x;P+=r){const D=P-v;for(let M=w;M<b;M+=g){const L=M-C;for(let k=I;k<R;k+=n){const V=k-A,W=e.get(c,P,M,k,m);W>=N&&(N=W,F=D*p*h+L*p+V)}}}s.set(F,c,f,T,E,m)}}}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fst(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t;$t(o,"avgPool");const{filterSize:y,strides:r,pad:g,dimRoundingMode:n}=i,a=1;q($n(r,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`);const p=Ri(o.shape,y,r,a,g,n);let h;if(p.filterWidth===1&&p.filterHeight===1&&oe(p.inShape,p.outShape))h=Tr({inputs:{x:o},backend:s});else{const u=s.data.get(o.dataId).values,d=Vt(o.shape),l=GC(u,o.shape,o.dtype,d,p,"avg");h=s.makeTensorInfo(p.outShape,o.dtype,l.values)}return h}const Ost={kernelName:tv,backendName:"cpu",kernelFunc:Fst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dst(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{filterSize:y,strides:r,pad:g,dimRoundingMode:n,dataFormat:a}=i;$t(o,"avgPool3d");const p=Qr(o.shape,y,r,1,g,n,a),h=s.data.get(o.dataId).values,u=c4(h,o.shape,o.dtype,Vt(o.shape),p,"avg");return s.makeTensorInfo(u.shape,"float32",u.values)}const Lst={kernelName:ev,backendName:"cpu",kernelFunc:Dst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mst(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,input:y}=t,{filterSize:r,strides:g,pad:n,dimRoundingMode:a}=i;$t([o,y],"avgPool3DGrad");const p=Qr(y.shape,r,g,1,n,a),h=p.strideDepth,u=p.strideHeight,d=p.strideWidth,l=p.filterDepth,c=p.filterHeight,m=p.filterWidth,f=p.dilationDepth,v=p.dilationHeight,S=p.dilationWidth,x=p.effectiveFilterDepth,T=p.effectiveFilterHeight,C=p.effectiveFilterWidth,w=x-1-p.padInfo.front,b=C-1-p.padInfo.left,E=T-1-p.padInfo.top,A=te(y.shape,"float32"),I=1/(l*c*m),R=s.bufferSync(o);for(let N=0;N<p.batchSize;++N)for(let F=0;F<p.inChannels;++F)for(let P=0;P<p.inDepth;++P)for(let D=0;D<p.inHeight;++D)for(let M=0;M<p.inWidth;++M){const L=P-w,k=D-E,V=M-b;let W=0;for(let K=0;K<x;K+=f){const B=(L+K)/h;if(!(B<0||B>=p.outDepth||Math.floor(B)!==B))for(let G=0;G<T;G+=v){const O=(k+G)/u;if(!(O<0||O>=p.outHeight||Math.floor(O)!==O))for(let $=0;$<C;$+=S){const z=(V+$)/d;if(z<0||z>=p.outWidth||Math.floor(z)!==z)continue;const X=R.get(N,B,O,z,F);W+=X}}}A.set(W*I,N,P,D,M,F)}return s.makeTensorInfo(A.shape,A.dtype,A.values)}const $st={kernelName:H2,backendName:"cpu",kernelFunc:Mst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bst(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,input:y}=t,r=y;$t([o,y],"avgPoolGrad");const{filterSize:g,strides:n,pad:a}=i,p=Ri(r.shape,g,n,1,a),h=p.strideHeight,u=p.strideWidth,d=p.filterHeight,l=p.filterWidth,c=p.dilationHeight,m=p.dilationWidth,f=p.effectiveFilterHeight,v=p.effectiveFilterWidth,S=v-1-p.padInfo.left,x=f-1-p.padInfo.top,T=te(r.shape,"float32"),C=1/(d*l),w=s.data.get(o.dataId).values,b=te(o.shape,"float32",w);for(let E=0;E<p.batchSize;++E)for(let A=0;A<p.inChannels;++A)for(let I=0;I<p.inHeight;++I)for(let R=0;R<p.inWidth;++R){const N=I-x,F=R-S;let P=0;for(let D=0;D<f;D+=c){const M=(N+D)/h;if(!(M<0||M>=p.outHeight||Math.floor(M)!==M))for(let L=0;L<v;L+=m){const k=(F+L)/u;if(k<0||k>=p.outWidth||Math.floor(k)!==k)continue;const V=b.get(E,M,k,A);P+=V}}T.set(P*C,E,I,R,A)}return s.makeTensorInfo(T.shape,T.dtype,T.values)}const kst={kernelName:W2,backendName:"cpu",kernelFunc:Bst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zst(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,scale:y,offset:r,mean:g,variance:n}=t;q(g.shape.length===n.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(r==null||g.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(y==null||g.shape.length===y.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),$t([o,g,n,y,r],"batchNorm");let{varianceEpsilon:a}=i;a==null&&(a=.001);const p=s.data.get(o.dataId).values,h=s.data.get(g.dataId).values,u=s.data.get(n.dataId).values,d=y?s.data.get(y.dataId).values:new Float32Array([1]),l=r?s.data.get(r.dataId).values:new Float32Array([0]),c=new Float32Array(p.length),m=l.length,f=d.length,v=u.length,S=h.length;let x=0,T=0,C=0,w=0;for(let b=0;b<p.length;++b)c[b]=l[x++]+(p[b]-h[T++])*d[C++]/Math.sqrt(u[w++]+a),x>=m&&(x=0),T>=S&&(T=0),C>=f&&(C=0),w>=v&&(w=0);return s.makeTensorInfo(o.shape,o.dtype,c)}const Vst={kernelName:mv,backendName:"cpu",kernelFunc:zst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gst(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{blockShape:y,crops:r}=i;$t([o],"batchToSpaceND");const g=y.reduce((f,v)=>f*v),n=Rf(o.shape,y,g),a=Nf(n.length,y.length),p=Pf(o.shape,y,g),h=JT(r,y.length),u=QT(p,r,y.length),d=Re({inputs:{x:o},backend:s,attrs:{shape:n}}),l=vs({inputs:{x:d},backend:s,attrs:{perm:a}}),c=Re({inputs:{x:l},backend:s,attrs:{shape:p}}),m=Go({inputs:{x:c},backend:s,attrs:{begin:h,size:u}});return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(c),m}const Ust={kernelName:sv,backendName:"cpu",kernelFunc:Gst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wst(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,weights:y}=t,{size:r}=i,g=s.data.get(o.dataId).values,n=s.data.get(y.dataId).values,a=$C(g,n,y.dtype,y.shape,r);return s.makeTensorInfo([r],y.dtype,a)}const Hst={kernelName:X2,backendName:"cpu",kernelFunc:Wst};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xst(e){const{inputs:t,backend:s}=e,{s0:i,s1:o}=t,y=s.data.get(i.dataId).values,r=s.data.get(o.dataId).values,g=Qt(Array.from(y),Array.from(r));return s.makeTensorInfo([g.length],"int32",Int32Array.from(g))}const Yst={kernelName:Y2,backendName:"cpu",kernelFunc:Xst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kst=Se(Dc,(e,t)=>{const s=t;return e>s.clipValueMax?s.clipValueMax:e<s.clipValueMin?s.clipValueMin:e}),jst={kernelName:Dc,backendName:"cpu",kernelFunc:Kst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zst=e=>{const{x:t}=e.inputs,s=e.backend,i=new Float32Array(vt(t.shape)),o=s.data.get(t.dataId),y=o.complexTensorInfos.real,r=o.complexTensorInfos.imag,g=s.data.get(y.dataId).values,n=s.data.get(r.dataId).values;for(let a=0;a<g.length;a++){const p=g[a],h=n[a];i[a]=Math.hypot(p,h)}return s.makeOutput(i,t.shape,"float32")},Jst={kernelName:rv,backendName:"cpu",kernelFunc:Zst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fu(e){const{inputs:t,backend:s}=e,{input:i}=t,o=s.data.get(i.dataId).complexTensorInfos.imag,y=s.data.get(o.dataId).values;return s.makeTensorInfo(o.shape,o.dtype,y)}const Qst={kernelName:cS,backendName:"cpu",kernelFunc:fu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function du(e){const{inputs:t,backend:s,attrs:i}=e,{axis:o}=i,y=se(o,t[0].shape)[0],r=t.map(c=>c.shape);KT(r,y);let g=gr(t.map(c=>c.shape),y);if(vt(g)===0)return s.makeTensorInfo(g,t[0].dtype,[]);const n=t.filter(c=>vt(c.shape)>0);if(n.length===1)return Tr({inputs:{x:n[0]},backend:s});if(n[0].dtype==="complex64"){const c=n.map(x=>Vo({inputs:{input:x},backend:s})),m=n.map(x=>fu({inputs:{input:x},backend:s})),f=du({inputs:c,backend:s,attrs:{axis:y}}),v=du({inputs:m,backend:s,attrs:{axis:y}}),S=Es({inputs:{real:f,imag:v},backend:s});return c.forEach(x=>s.disposeIntermediateTensorInfo(x)),m.forEach(x=>s.disposeIntermediateTensorInfo(x)),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(v),S}const a=n.map(c=>{const f=[-1,vt(c.shape.slice(y))];return Re({inputs:{x:c},backend:s,attrs:{shape:f}})}),p=a.map(c=>({vals:s.data.get(c.dataId).values,shape:c.shape}));g=gr(a.map(c=>c.shape),1);const h=a[0].shape[0]===1,u=vM(p,g,t[0].dtype,h),d=gr(n.map(c=>c.shape),y),l=s.makeTensorInfo(d,t[0].dtype,u);return a.forEach(c=>s.disposeIntermediateTensorInfo(c)),l}const qst={kernelName:av,backendName:"cpu",kernelFunc:du};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f4(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,filter:y}=t,{strides:r,pad:g,dataFormat:n,dilations:a,dimRoundingMode:p}=i;$t([o,y],"conv2d");const h=qr(n),u=Rn(o.shape,y.shape,r,a,g,p,!1,h),d=u.filterHeight,l=u.filterWidth,c=u.dilationHeight,m=u.dilationWidth,f=u.padInfo.left,v=u.padInfo.top,S=u.dataFormat==="channelsLast",x=new vn(u.outShape,o.dtype),T=Vt(o.shape),C=Vt(y.shape),w=T[0],b=S?T[1]:T[2],E=S?T[2]:1,A=S?1:T[1],I=x.strides[0],R=S?x.strides[1]:x.strides[2],N=S?x.strides[2]:1,F=S?1:x.strides[1],P=s.data.get(o.dataId).values,D=s.data.get(y.dataId).values,M=x.values;for(let L=0;L<u.batchSize;++L){const k=L*w,V=L*I;for(let W=0;W<u.outHeight;++W){const K=V+W*R,B=W*u.strideHeight-v;for(let G=0;G<d;++G){const O=B+G*c;if(O<0||O>=u.inHeight)continue;const $=G*C[0],z=k+O*b;for(let X=0;X<u.outWidth;++X){const Y=K+X*N,Z=X*u.strideWidth-f;for(let J=0;J<l;++J){const tt=Z+J*m;if(tt<0||tt>=u.inWidth)continue;const et=$+J*C[1],lt=z+tt*E;let ut=et;for(let ct=0;ct<u.inChannels;++ct){const ht=P[lt+ct*A];for(let xt=0;xt<u.outChannels;++xt)M[Y+xt*F]+=ht*D[ut+xt];ut+=u.outChannels}}}}}}return s.makeTensorInfo(x.shape,x.dtype,M)}const _st={kernelName:ov,backendName:"cpu",kernelFunc:f4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tit(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,dy:y}=t,{strides:r,pad:g,dataFormat:n,dimRoundingMode:a,filterShape:p}=i;$t([o,y],"conv2dBackpropFilter");const h=qr(n),u=Rn(o.shape,p,r,1,g,a,!1,h),{strideHeight:d,strideWidth:l,filterHeight:c,filterWidth:m}=u,f=u.dataFormat==="channelsLast",v=new vn(u.filterShape,"float32"),S=u.padInfo.left,x=u.padInfo.top,T=s.data.get(o.dataId).values,C=s.data.get(y.dataId).values,w=new vn(o.shape,o.dtype,T),b=new vn(y.shape,y.dtype,C);for(let E=0;E<c;++E){const A=Math.max(0,Math.ceil((x-E)/d)),I=Math.min(u.outHeight,(u.inHeight+x-E)/d);for(let R=0;R<m;++R){const N=Math.max(0,Math.ceil((S-R)/l)),F=Math.min(u.outWidth,(u.inWidth+S-R)/l);for(let P=0;P<u.inChannels;++P)for(let D=0;D<u.outChannels;++D){let M=0;for(let L=0;L<u.batchSize;++L)for(let k=A;k<I;++k){const V=E+k*d-x;for(let W=N;W<F;++W){const K=R+W*l-S;f?M+=w.get(L,V,K,P)*b.get(L,k,W,D):M+=w.get(L,P,V,K)*b.get(L,D,k,W)}}v.set(M,E,R,P,D)}}}return s.makeTensorInfo(v.shape,v.dtype,v.values)}const eit={kernelName:j2,backendName:"cpu",kernelFunc:tit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nit(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,filter:y}=t,{inputShape:r,strides:g,pad:n,dataFormat:a,dimRoundingMode:p}=i;$t([o,y],"conv2dBackpropInput");const h=Vt(y.shape),u=Vt(o.shape);let d=qr(a);const l=Rn(r,y.shape,g,1,n,p,!1,d),c=new vn(l.inShape,"float32"),m=c.values,f=s.data.get(o.dataId).values,v=s.data.get(y.dataId).values,[S,x,T]=h,{batchSize:C,filterHeight:w,filterWidth:b,inChannels:E,inHeight:A,inWidth:I,outChannels:R,outHeight:N,outWidth:F,strideHeight:P,strideWidth:D}=l;d=l.dataFormat;const M=w-1-l.padInfo.top,L=b-1-l.padInfo.left,k=d==="channelsLast",V=c.strides[0],W=k?c.strides[1]:c.strides[2],K=k?c.strides[2]:1,B=k?1:c.strides[1],G=u[0],O=k?u[1]:u[2],$=k?u[2]:1,z=k?1:u[1];for(let X=0;X<C;++X)for(let Y=0;Y<E;++Y)for(let Z=0;Z<A;++Z){const J=Z-M,tt=Math.max(0,Math.ceil(J/P)),et=Math.min(N,(w+J)/P);for(let lt=0;lt<I;++lt){const ut=lt-L,ct=Math.max(0,Math.ceil(ut/D)),ht=Math.min(F,(b+ut)/D);let xt=0;for(let At=tt;At<et;++At){const Rt=At*P-J;for(let mt=ct;mt<ht;++mt){const bt=mt*D-ut,Ct=G*X+O*At+$*mt,Ht=S*(w-1-Rt)+x*(b-1-bt)+T*Y;for(let zt=0;zt<R;++zt){const Jt=f[Ct+z*zt],ae=v[Ht+zt];xt+=Jt*ae}}}const Tt=V*X+W*Z+K*lt+B*Y;m[Tt]=xt}}return s.makeTensorInfo(c.shape,c.dtype,c.values)}const sit={kernelName:lv,backendName:"cpu",kernelFunc:nit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iit(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,filter:y}=t,{strides:r,pad:g,dilations:n}=i;$t([o,y],"conv3d");const a=Za(o.shape,y.shape,r,n,g),{filterDepth:p,filterHeight:h,filterWidth:u,dilationDepth:d,dilationHeight:l,dilationWidth:c,padInfo:m}=a,f=m.front,v=m.left,S=m.top,x=new vn(a.outShape,o.dtype),T=s.data.get(o.dataId).values,C=s.data.get(y.dataId).values,w=x.values,b=Vt(o.shape),E=Vt(y.shape);for(let A=0;A<a.batchSize;++A){const I=A*b[0],R=A*x.strides[0];for(let N=0;N<a.outDepth;++N){const F=R+N*x.strides[1],P=N*a.strideDepth-f;for(let D=0;D<p;++D){const M=P+D*d;if(M<0||M>=a.inDepth)continue;const L=D*E[0],k=I+M*b[1];for(let V=0;V<a.outHeight;++V){const W=F+V*x.strides[2],K=V*a.strideHeight-S;for(let B=0;B<h;++B){const G=K+B*l;if(G<0||G>=a.inHeight)continue;const O=L+B*E[1],$=k+G*b[2];for(let z=0;z<a.outWidth;++z){const X=W+z*a.outChannels,Y=z*a.strideWidth-v;for(let Z=0;Z<u;++Z){const J=Y+Z*c;if(J<0||J>=a.inWidth)continue;const tt=O+Z*E[2],et=$+J*a.inChannels;let lt=tt;for(let ut=0;ut<a.inChannels;++ut){const ct=T[et+ut];for(let ht=0;ht<a.outChannels;++ht)w[X+ht]+=ct*C[lt+ht];lt+=a.outChannels}}}}}}}}return s.makeTensorInfo(x.shape,x.dtype,x.values)}const rit={kernelName:uv,backendName:"cpu",kernelFunc:iit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ait(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,dy:y}=t,{strides:r,pad:g,filterShape:n}=i;$t([o,y],"conv3dBackpropFilterV2");const a=Vt(o.shape),p=Vt(y.shape),h=Za(o.shape,n,r,1,g),u=h.strideDepth,d=h.strideHeight,l=h.strideWidth,c=h.filterDepth,m=h.filterHeight,f=h.filterWidth,v=new vn(h.filterShape,"float32"),S=v.values,[x,T,C,w]=v.strides,b=s.data.get(y.dataId).values,[E,A,I,R]=p,N=s.data.get(o.dataId).values,[F,P,D,M]=a,L=h.padInfo.front,k=h.padInfo.left,V=h.padInfo.top;for(let W=0;W<c;++W){const K=Math.max(0,Math.ceil((L-W)/u)),B=Math.min(h.outDepth,(h.inDepth+L-W)/u),G=W*x;for(let O=0;O<m;++O){const $=Math.max(0,Math.ceil((V-O)/d)),z=Math.min(h.outHeight,(h.inHeight+V-O)/d),X=O*T+G;for(let Y=0;Y<f;++Y){const Z=Math.max(0,Math.ceil((k-Y)/l)),J=Math.min(h.outWidth,(h.inWidth+k-Y)/l),tt=Y*C+X;for(let et=0;et<h.inChannels;++et){const lt=et*w+tt;for(let ut=0;ut<h.outChannels;++ut){let ct=0;for(let ht=0;ht<h.batchSize;++ht){const xt=ht*F,Tt=ht*E;for(let At=K;At<B;++At){const mt=(W+At*u-L)*P+xt,bt=At*A+Tt;for(let Ct=$;Ct<z;++Ct){const zt=(O+Ct*d-V)*D+mt,Jt=Ct*I+bt;for(let ae=Z;ae<J;++ae){const Zt=(Y+ae*l-k)*M+zt,de=ae*R+Jt;ct+=N[Zt+et]*b[de+ut]}}}}S[lt+ut]=ct}}}}}return s.makeTensorInfo(v.shape,v.dtype,v.values)}const oit={kernelName:Z2,backendName:"cpu",kernelFunc:ait};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lit(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,filter:y}=t,{pad:r,strides:g,inputShape:n}=i;$t([o],"conv3dBackpropInputV2");const a=Vt(o.shape),p=Vt(y.shape),h=Za(n,y.shape,g,1,r),u=new vn(h.inShape,"float32"),d=u.values,[l,c,m,f]=u.strides,v=s.data.get(o.dataId).values,[S,x,T,C]=a,w=s.data.get(y.dataId).values,[b,E,A,I]=p,{batchSize:R,filterDepth:N,filterHeight:F,filterWidth:P,inChannels:D,inDepth:M,inHeight:L,inWidth:k,outChannels:V,outDepth:W,outHeight:K,outWidth:B,strideDepth:G,strideHeight:O,strideWidth:$}=h,z=N-1-h.padInfo.front,X=F-1-h.padInfo.top,Y=P-1-h.padInfo.left;for(let Z=0;Z<R;++Z)for(let J=0;J<D;++J)for(let tt=0;tt<M;++tt){const et=tt-z,lt=Math.max(0,Math.ceil(et/G)),ut=Math.min(W,(N+et)/G);for(let ct=0;ct<L;++ct){const ht=ct-X,xt=Math.max(0,Math.ceil(ht/O)),Tt=Math.min(K,(F+ht)/O);for(let At=0;At<k;++At){const Rt=At-Y,mt=Math.max(0,Math.ceil(Rt/$)),bt=Math.min(B,(P+Rt)/$);let Ct=0;for(let Ht=lt;Ht<ut;++Ht){const zt=Ht*G-et;for(let Jt=xt;Jt<Tt;++Jt){const ae=Jt*O-ht;for(let _t=mt;_t<bt;++_t){const Zt=_t*$-Rt,de=S*Z+x*Ht+T*Jt+C*_t,He=b*(N-1-zt)+E*(F-1-ae)+A*(P-1-Zt)+I*J;for(let Ne=0;Ne<V;++Ne){const sn=v[de+Ne],Vn=w[He+Ne];Ct+=sn*Vn}}}}d[l*Z+c*tt+m*ct+f*At+J]=Ct}}}return s.makeTensorInfo(u.shape,u.dtype,u.values)}const uit={kernelName:J2,backendName:"cpu",kernelFunc:lit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hit=Se(Lc,e=>Math.cos(e)),cit={kernelName:Lc,backendName:"cpu",kernelFunc:hit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fit=Se(Mc,e=>Math.cosh(e)),dit={kernelName:Mc,backendName:"cpu",kernelFunc:fit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pit(e){const{inputs:t,backend:s,attrs:i}=e,{image:o,boxes:y,boxInd:r}=t,{cropSize:g,method:n,extrapolationValue:a}=i,[p,h,u,d]=o.shape,l=y.shape[0],[c,m]=g,f=te([l,c,m,d],"float32"),v=s.data.get(y.dataId).values,S=s.data.get(r.dataId).values,x=s.data.get(o.dataId).values,T=Vt(o.shape),C=Vt(f.shape);for(let w=0;w<l;w++){const b=w*4,E=v[b],A=v[b+1],I=v[b+2],R=v[b+3],N=S[w];if(N>=p)continue;const F=c>1?(I-E)*(h-1)/(c-1):0,P=m>1?(R-A)*(u-1)/(m-1):0;for(let D=0;D<c;D++){const M=c>1?E*(h-1)+D*F:.5*(E+I)*(h-1);if(M<0||M>h-1){for(let L=0;L<m;L++)for(let k=0;k<d;k++){const V=k+L*C[2]+D*C[1]+w*C[0];f.values[V]=a}continue}if(n==="bilinear"){const L=Math.floor(M),k=Math.ceil(M),V=M-L;for(let W=0;W<m;W++){const K=m>1?A*(u-1)+W*P:.5*(A+R)*(u-1);if(K<0||K>u-1){for(let $=0;$<d;$++){const z=$+W*C[2]+D*C[1]+w*C[0];f.values[z]=a}continue}const B=Math.floor(K),G=Math.ceil(K),O=K-B;for(let $=0;$<d;$++){let z=$+B*T[2]+L*T[1]+N*T[0];const X=x[z];z=$+G*T[2]+L*T[1]+N*T[0];const Y=x[z];z=$+B*T[2]+k*T[1]+N*T[0];const Z=x[z];z=$+G*T[2]+k*T[1]+N*T[0];const J=x[z],tt=X+(Y-X)*O,et=Z+(J-Z)*O;z=$+W*C[2]+D*C[1]+w*C[0],f.values[z]=tt+(et-tt)*V}}}else for(let L=0;L<m;++L){const k=m>1?A*(u-1)+L*P:.5*(A+R)*(u-1);if(k<0||k>u-1){for(let K=0;K<d;K++){const B=K+L*C[2]+D*C[1]+w*C[0];f.values[B]=a}continue}const V=Math.round(k),W=Math.round(M);for(let K=0;K<d;K++){const B=K+V*T[2]+W*T[1]+N*T[0],G=K+L*C[2]+D*C[1]+w*C[0];f.values[G]=x[B]}}}}return s.makeTensorInfo(f.shape,f.dtype,f.values)}const mit={kernelName:q2,backendName:"cpu",kernelFunc:pit};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vit(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,exclusive:r,reverse:g}=i;$t(o,"cumprod");const n=We([y],o.shape.length);let a=o;n!=null&&(a=vs({inputs:{x:o},backend:s,attrs:{perm:n}}));const p=tn(1,o.shape.length)[0];if(p!==a.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${a.shape.length-1} but got axis=${p}`);const h=Os(a.dtype,"int32"),u=z2(vt(a.shape),h),d=s.data.get(a.dataId).values,l=a.shape[a.shape.length-1],c=g?(f,v)=>f+l-v-1:(f,v)=>f+v;for(let f=0;f<d.length;f+=l)for(let v=0;v<l;v++){const S=c(f,v);if(v===0)u[S]=r?1:d[S];else{const x=c(f,v-1);u[S]=r?d[x]*u[x]:d[S]*u[x]}}const m=s.makeTensorInfo(a.shape,h,u);if(n!=null){const f=Ja(n),v=vs({inputs:{x:m},backend:s,attrs:{perm:f}});return s.disposeIntermediateTensorInfo(m),s.disposeIntermediateTensorInfo(a),v}return m}const git={kernelName:Q2,backendName:"cpu",kernelFunc:vit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xit(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,exclusive:r,reverse:g}=i;$t(o,"cumsum");const n=We([y],o.shape.length);let a=o;n!=null&&(a=vs({inputs:{x:o},backend:s,attrs:{perm:n}}));const p=tn(1,o.shape.length)[0];if(p!==a.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${a.shape.length-1} but got axis=${p}`);const h=Os(a.dtype,"int32"),u=Yn(vt(a.shape),h),d=s.data.get(a.dataId).values,l=a.shape[a.shape.length-1],c=g?(f,v)=>f+l-v-1:(f,v)=>f+v;for(let f=0;f<d.length;f+=l)for(let v=0;v<l;v++){const S=c(f,v);if(v===0)u[S]=r?0:d[S];else{const x=c(f,v-1);u[S]=r?d[x]+u[x]:d[S]+u[x]}}const m=s.makeTensorInfo(a.shape,h,u);if(n!=null){const f=Ja(n),v=vs({inputs:{x:m},backend:s,attrs:{perm:f}});return s.disposeIntermediateTensorInfo(m),s.disposeIntermediateTensorInfo(a),v}return m}const yit={kernelName:hv,backendName:"cpu",kernelFunc:xit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sit(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,weights:y}=t,{size:r,binaryOutput:g}=i;if(o.shape.length===1){const n=s.data.get(o.dataId).values,a=s.data.get(y.dataId).values,p=$C(n,a,y.dtype,y.shape,r);return s.makeTensorInfo([r],y.dtype,p)}else if(o.shape.length===2){const n=s.bufferSync(o),a=s.bufferSync(y),p=dM(n,a,r,g);return s.makeTensorInfo(p.shape,y.dtype,p.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const Tit={kernelName:_2,backendName:"cpu",kernelFunc:Sit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cit(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{blockSize:y,dataFormat:r}=i;q(r==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${r}`);const g=o.shape[0],n=o.shape[1],a=o.shape[2],p=o.shape[3],h=n*y,u=a*y,d=p/(y*y),l=s.data.get(o.dataId).values,c=new Float32Array(g*h*u*d);let m=0;for(let f=0;f<g;++f)for(let v=0;v<h;++v){const S=Math.floor(v/y),x=v%y;for(let T=0;T<u;++T){const C=Math.floor(T/y),w=T%y,b=(x*y+w)*d;for(let E=0;E<d;++E){const I=E+b+p*(C+a*(S+n*f));c[m++]=l[I]}}}return s.makeTensorInfo([g,h,u,d],o.dtype,c)}const wit={kernelName:tS,backendName:"cpu",kernelFunc:Cit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d4(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,filter:y}=t,{strides:r,pad:g,dilations:n,dimRoundingMode:a}=i;$t([o,y],"depthwiseConv2DNative");const p=Vt(o.shape),h=Vt(y.shape);let u=n;u==null&&(u=[1,1]),q($n(r,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${r} and dilations '${u}'`);const d=Rn(o.shape,y.shape,r,u,g,a,!0),{filterHeight:l,filterWidth:c,dilationHeight:m,dilationWidth:f,padInfo:v}=d,S=v.left,x=v.top,T=d.outChannels/d.inChannels,C=new vn(d.outShape,o.dtype),w=s.data.get(o.dataId).values,b=s.data.get(y.dataId).values,E=C.values;for(let A=0;A<d.batchSize;++A){const I=A*p[0],R=A*C.strides[0];for(let N=0;N<d.outHeight;++N){const F=R+N*C.strides[1],P=N*d.strideHeight-x;for(let D=0;D<l;++D){const M=P+D*m;if(M<0||M>=d.inHeight)continue;const L=D*h[0],k=I+M*p[1];for(let V=0;V<d.outWidth;++V){const W=F+V*C.strides[2],K=V*d.strideWidth-S;for(let B=0;B<c;++B){const G=K+B*f;if(G<0||G>=d.inWidth)continue;const O=L+B*h[1],$=k+G*d.inChannels;let z=W,X=O;for(let Y=0;Y<d.inChannels;++Y){const Z=w[$+Y];for(let J=0;J<T;++J)E[z+J]+=Z*b[X+J];z+=T,X+=T}}}}}}return s.makeTensorInfo(C.shape,C.dtype,C.values)}const Eit={kernelName:cv,backendName:"cpu",kernelFunc:d4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bit(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,dy:y}=t,{strides:r,dilations:g,pad:n,dimRoundingMode:a,filterShape:p}=i;$t([o,y],"depthwiseConv2dNativeBackpropFilter");const h=Rn(o.shape,p,r,g,n,a,!0),{strideHeight:u,strideWidth:d,filterHeight:l,filterWidth:c}=h,m=new vn(h.filterShape,"float32"),f=h.padInfo.left,v=h.padInfo.top,S=h.outChannels/h.inChannels,x=s.data.get(o.dataId).values,T=new vn(o.shape,o.dtype,x),C=s.data.get(y.dataId).values,w=new vn(y.shape,y.dtype,C);for(let b=0;b<l;++b){const E=Math.max(0,Math.ceil((v-b)/u)),A=Math.min(h.outHeight,(h.inHeight+v-b)/u);for(let I=0;I<c;++I){const R=Math.max(0,Math.ceil((f-I)/d)),N=Math.min(h.outWidth,(h.inWidth+f-I)/d);for(let F=0;F<h.outChannels;++F){const P=Math.trunc(F/S),D=F%S;let M=0;for(let L=0;L<h.batchSize;++L)for(let k=E;k<A;++k){const V=b+k*u-v;for(let W=R;W<N;++W){const K=I+W*d-f;M+=T.get(L,V,K,P)*w.get(L,k,W,F)}}m.set(M,b,I,P,D)}}}return s.makeTensorInfo(m.shape,m.dtype,m.values)}const Ait={kernelName:eS,backendName:"cpu",kernelFunc:bit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iit(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,filter:y}=t,{strides:r,dilations:g,pad:n,dimRoundingMode:a,inputShape:p}=i;$t([o,y],"depthwiseConv2DNativeBackpropInput");const h=Vt(o.shape),u=Vt(y.shape),d=Rn(p,y.shape,r,g,n,a,!0),l=new vn(d.inShape,"float32"),c=l.values,[m,f,v]=l.strides,S=s.data.get(o.dataId).values,[x,T,C]=h,w=s.data.get(y.dataId).values,[b,E,A]=u,{batchSize:I,filterHeight:R,filterWidth:N,inChannels:F,inHeight:P,inWidth:D,outChannels:M,outHeight:L,outWidth:k,strideHeight:V,strideWidth:W}=d,K=R-1-d.padInfo.top,B=N-1-d.padInfo.left,G=M/F;for(let O=0;O<I;++O)for(let $=0;$<F;++$)for(let z=0;z<P;++z){const X=z-K,Y=Math.max(0,Math.ceil(X/V)),Z=Math.min(L,(R+X)/V);for(let J=0;J<D;++J){const tt=J-B,et=Math.max(0,Math.ceil(tt/W)),lt=Math.min(k,(N+tt)/W);let ut=0;for(let ct=Y;ct<Z;++ct){const ht=ct*V-X;for(let xt=et;xt<lt;++xt){const Tt=xt*W-tt,At=x*O+T*ct+C*xt,Rt=b*(R-1-ht)+E*(N-1-Tt)+A*$;for(let mt=0;mt<G;++mt){const bt=$*G+mt,Ct=S[At+bt],Ht=w[Rt+mt];ut+=Ct*Ht}}}c[m*O+f*z+v*J+$]=ut}}return s.makeTensorInfo(l.shape,l.dtype,l.values)}const Rit={kernelName:nS,backendName:"cpu",kernelFunc:Iit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nit(e){const{inputs:t,backend:s}=e,{x:i}=t,o=vt(i.shape),y=s.data.get(i.dataId).values,r=te([o,o],i.dtype),g=r.values;for(let a=0;a<y.length;a++)g[a*o+a]=y[a];const n=[...i.shape,...i.shape];return s.makeTensorInfo(n,r.dtype,r.values)}const Pit={kernelName:sS,backendName:"cpu",kernelFunc:Nit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fit={kernelName:fv,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:s})=>{const{x:i,filter:o}=e,{strides:y,pad:r,dilations:g}=s,n=t,a=n.data.get(i.dataId).values,p=i.shape.length,h=n.data.get(o.dataId).values,u=o.shape.length,{batchSize:d,inHeight:l,inWidth:c,inChannels:m,outHeight:f,outWidth:v,padInfo:S,strideHeight:x,strideWidth:T,filterHeight:C,filterWidth:w,dilationHeight:b,dilationWidth:E,outShape:A}=Tf(i.shape,o.shape,y,r,"NHWC",g),I=vt(A),R=A.length,N=Qe(i.dtype,I);for(let P=0;P<d;++P)for(let D=0;D<f;++D){const M=D*x-S.top;for(let L=0;L<v;++L){const k=L*T-S.left;for(let V=0;V<m;++V){let W=Number.MIN_SAFE_INTEGER;for(let B=0;B<C;++B){const G=M+B*b;if(G>=0&&G<l)for(let O=0;O<w;++O){const $=k+O*E;if($>=0&&$<c){const z=mr([P,G,$,V],p,Vt(i.shape)),X=mr([B,O,V],u,Vt(o.shape)),Y=a[z]+h[X];Y>W&&(W=Y)}}}const K=mr([P,D,L,V],R,Vt(A));N[K]=W}}}return{dataId:n.write(Ko(N,i.dtype),A,i.dtype),shape:A,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oit={kernelName:Ry,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:s})=>{const{x:i,filter:o,dy:y}=e,{strides:r,pad:g,dilations:n}=s,a=t,p=yi(i.shape,a.data.get(i.dataId).values),h=yi(o.shape,a.data.get(o.dataId).values),{batchSize:u,inHeight:d,inWidth:l,inChannels:c,outHeight:m,outWidth:f,padInfo:v,strideHeight:S,strideWidth:x,filterHeight:T,filterWidth:C,dilationHeight:w,dilationWidth:b,outShape:E}=Tf(i.shape,o.shape,r,g,"NHWC",n);q(y.rank===E.length,()=>`Error in ${Ry}, dy must have the same rank as output ${E.length}, but got ${y.rank}`);const A=yi(E,a.data.get(y.dataId).values),I=u3(o.shape,o.dtype);for(let N=0;N<u;++N)for(let F=0;F<m;++F){const P=F*S-v.top;for(let D=0;D<f;++D){const M=D*x-v.left;for(let L=0;L<c;++L){let k=Number.MIN_SAFE_INTEGER,V=0,W=0;for(let K=0;K<T;++K){const B=P+K*w;if(B>=0&&B<d)for(let G=0;G<C;++G){const O=M+G*b;if(O>=0&&O<l){const $=p[N][B][O][L]+h[K][G][L];$>k&&(k=$,V=K,W=G)}}}I[V][W][L]+=A[N][F][D][L]}}}return{dataId:a.write(Ko(I,i.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dit={kernelName:Iy,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:s})=>{const{x:i,filter:o,dy:y}=e,{strides:r,pad:g,dilations:n}=s,a=t,p=yi(i.shape,a.data.get(i.dataId).values),h=yi(o.shape,a.data.get(o.dataId).values),{batchSize:u,inHeight:d,inWidth:l,inChannels:c,outHeight:m,outWidth:f,padInfo:v,strideHeight:S,strideWidth:x,filterHeight:T,filterWidth:C,dilationHeight:w,dilationWidth:b,outShape:E}=Tf(i.shape,o.shape,r,g,"NHWC",n);q(y.rank===E.length,()=>`Error in ${Iy}, dy must have the same rank as output ${E.length}, but got ${y.rank}`);const A=yi(E,a.data.get(y.dataId).values),I=u3(i.shape,i.dtype);for(let N=0;N<u;++N)for(let F=0;F<m;++F){const P=F*S-v.top;for(let D=0;D<f;++D){const M=D*x-v.left;for(let L=0;L<c;++L){let k=Number.MIN_SAFE_INTEGER,V=P<0?0:P,W=M<0?0:M;for(let K=0;K<T;++K){const B=P+K*w;if(B>=0&&B<d)for(let G=0;G<C;++G){const O=M+G*b;if(O>=0&&O<l){const $=p[N][B][O][L]+h[K][G][L];$>k&&(k=$,V=B,W=O)}}}I[N][V][W][L]+=A[N][F][D][L]}}}return{dataId:a.write(Ko(I,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lit(e){const{inputs:t,backend:s,attrs:i}=e,{image:o}=t,{canvas:y,options:r}=i,{contextOptions:g,imageOptions:n}=r||{},a=(n==null?void 0:n.alpha)||1,p=(g==null?void 0:g.contextType)||"2d";if(p!=="2d")throw new Error(`Context type ${g.contextType} is not supported by the CPU backend.`);const h=y.getContext(p,(g==null?void 0:g.contextAttributes)||{});if(h==null)throw new Error(`Could not get the context with ${p} type.`);const[u,d]=o.shape.slice(0,2),l=o.shape.length===2?1:o.shape[2],c=s.data.get(o.dataId).values,m=o.dtype==="float32"?255:1,f=new Uint8ClampedArray(d*u*4);for(let S=0;S<u*d;++S){const x=[0,0,0,255*a];for(let C=0;C<l;C++){const w=c[S*l+C];if(o.dtype==="float32"){if(w<0||w>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${w}.`)}else if(o.dtype==="int32"&&(w<0||w>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${w}.`);l===1?(x[0]=w*m,x[1]=w*m,x[2]=w*m):x[C]=w*m}const T=S*4;f[T+0]=Math.round(x[0]),f[T+1]=Math.round(x[1]),f[T+2]=Math.round(x[2]),f[T+3]=Math.round(x[3])}y.width=d,y.height=u;const v=new ImageData(f,d,u);return h.putImageData(v,0,0),o}const Mit={kernelName:tU,backendName:"cpu",kernelFunc:Lit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zf(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,keepDims:r}=i;$t(o,"sum");let g;o.dtype==="bool"?g=Ga({inputs:{x:o},backend:s,attrs:{dtype:"int32"}}):g=Tr({inputs:{x:o},backend:s});const n=g.shape.length,a=se(y,g.shape),p=We(a,n);let h=a,u=g;p!=null&&(u=vs({inputs:{x:g},backend:s,attrs:{perm:p}}),h=tn(h.length,n)),Bn("sum",h,u.shape.length);const[d,l]=Nn(u.shape,h),c=Os(u.dtype,"int32");let m=am(s,d,c);const f=vt(l),v=s.data.get(m.dataId).values,S=s.data.get(u.dataId).values;for(let x=0;x<v.length;++x){const T=x*f;let C=0;for(let w=0;w<f;++w)C+=S[T+w];v[x]=C}if(r){const x=_e(m.shape,a),T=m;m=Re({inputs:{x:m},backend:s,attrs:{shape:x}}),s.disposeIntermediateTensorInfo(T)}return s.disposeIntermediateTensorInfo(g),p!=null&&s.disposeIntermediateTensorInfo(u),m}const $it={kernelName:Xv,backendName:"cpu",kernelFunc:zf};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bit(e){const{inputs:t,backend:s,attrs:i}=e,{equation:o}=i,y=t,{allDims:r,summedDims:g,idDims:n}=rC(o,y.length);oC(r.length,n,y);const{path:a,steps:p}=lC(g,n),h=p.length;let u=null,d=r.length;const l=[];for(let c=0;c<h;++c){for(const m of p[c]){const{permutationIndices:f,expandDims:v}=aC(d,n[m]);let S;uC(f)?S=y[m]:(S=vs({inputs:{x:y[m]},backend:s,attrs:{perm:f}}),l.push(S));const x=S.shape.slice();for(let T=0;T<v.length;++T)x.splice(v[T],0,1);oe(S.shape,x)||(S=Re({inputs:{x:S},backend:s,attrs:{shape:x}}),l.push(S)),u===null?u=S:(u=$g({inputs:{a:S,b:u},backend:s}),l.push(u))}c<h-1&&(a[c]>=0&&(u=zf({inputs:{x:u},backend:s,attrs:{axis:a[c]-(r.length-d),keepDims:!1}}),l.push(u)),d--)}for(const c of l)c!==u&&s.disposeIntermediateTensorInfo(c);return u}const kit={kernelName:iS,backendName:"cpu",kernelFunc:Bit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zit(e){const{inputs:t,backend:s}=e,{dy:i,y:o}=t;$t([i,o],"eluGrad");const y=new Float32Array(vt(o.shape)),r=s.data.get(o.dataId).values,g=s.data.get(i.dataId).values;for(let n=0;n<r.length;++n){const a=r[n];a>=0?y[n]=g[n]:y[n]=g[n]*(a+1)}return s.makeTensorInfo(o.shape,"float32",y)}const Vit={kernelName:rS,backendName:"cpu",kernelFunc:zit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Git=qT,Uit=_T,Wit=tC,Hit=eC,Xit=nC,Yit=sC,Kit=Se(kc,e=>{const t=Math.sign(e),s=Math.abs(e),i=1/(1+Git*s);return t*(1-((((Yit*i+Xit)*i+Hit)*i+Wit)*i+Uit)*i*Math.exp(-s*s))}),jit={kernelName:kc,backendName:"cpu",kernelFunc:Kit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function um(e){const{inputs:t,backend:s,attrs:i}=e,{input:o}=t,{dim:y}=i,r=o.shape.length,g=o.shape.slice();let n=y;return y<0&&(q(-(r+1)<=y,()=>`Axis must be in the interval [${-(r+1)}, ${r}]`),n=r+y+1),g.splice(n,0,1),Re({inputs:{x:o},backend:s,attrs:{shape:g}})}const Zit={kernelName:pv,backendName:"cpu",kernelFunc:um};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jit=nn((e,t)=>e/t),UC=Sn($c,Jit),m1={kernelName:$c,backendName:"cpu",kernelFunc:UC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p4(e,t,s){const i=e.shape,o=i[0],y=i[1],r=s.data.get(e.dataId),g=r.complexTensorInfos.real,n=r.complexTensorInfos.imag,a=[o,y],p=vt(a),h=Ln("float32",p),u=Ln("float32",p);for(let m=0;m<o;m++){const f=Go({inputs:{x:g},backend:s,attrs:{begin:[m,0],size:[1,y]}}),v=Go({inputs:{x:n},backend:s,attrs:{begin:[m,0],size:[1,y]}}),S=Es({inputs:{real:f,imag:v},backend:s}),{real:x,imag:T}=Qit(S,t,s),C=Kr(x,T);for(let w=0;w<y;w++){const b=iC(C,w);h[m*y+w]=b.real,u[m*y+w]=b.imag}s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(S)}const d=s.makeTensorInfo(a,"float32",h),l=s.makeTensorInfo(a,"float32",u),c=Es({inputs:{real:d,imag:l},backend:s});return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(l),c}function Qit(e,t,s){const i=vt(e.shape),o=s.data.get(e.dataId),y=s.data.get(o.complexTensorInfos.real.dataId).values,r=s.data.get(o.complexTensorInfos.imag.dataId).values;if(qit(i)){const g=v1(y,r,i,t,s),n=[e.shape[0],e.shape[1]];if(t){const a=s.makeTensorInfo(n,"float32",g.real),p=s.makeTensorInfo(n,"float32",g.imag),h=s.makeTensorInfo([],"float32",Ya(i,"float32")),u=Tr({inputs:{x:h},backend:s}),d=m1.kernelFunc({inputs:{a,b:h},backend:s}),l=m1.kernelFunc({inputs:{a:p,b:u},backend:s}),c=s.data.get(d.dataId).values,m=s.data.get(l.dataId).values;return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(l),{real:c,imag:m}}return g}else{const g=Kr(y,r),n=_it(g,i,t);return AO(n)}}function qit(e){return(e&e-1)===0}function v1(e,t,s,i,o){if(s===1)return{real:e,imag:t};const y=Kr(e,t),r=s/2,g=IO(y),n=g.real,a=g.imag,p=[n.length],h=o.makeTensorInfo(p,"float32",n),u=o.makeTensorInfo(p,"float32",a),d=Es({inputs:{real:h,imag:u},backend:o}),l=RO(y),c=l.real,m=l.imag,f=[c.length],v=o.makeTensorInfo(f,"float32",c),S=o.makeTensorInfo(f,"float32",m),x=Es({inputs:{real:v,imag:S},backend:o}),T=v1(n,a,r,i,o),C=T.real,w=T.imag,b=[C.length],E=o.makeTensorInfo(b,"float32",C),A=o.makeTensorInfo(b,"float32",w),I=Es({inputs:{real:E,imag:A},backend:o}),R=v1(c,m,r,i,o),N=R.real,F=R.imag,P=[N.length],D=o.makeTensorInfo(P,"float32",N),M=o.makeTensorInfo(P,"float32",F),L=Es({inputs:{real:D,imag:M},backend:o}),k=PO(s,i),V=[k.real.length],W=o.makeTensorInfo(V,"float32",k.real),K=o.makeTensorInfo(V,"float32",k.imag),B=Es({inputs:{real:W,imag:K},backend:o}),G=$g({inputs:{a:B,b:L},backend:o}),O=cu({inputs:{a:I,b:G},backend:o}),$=VC({inputs:{a:I,b:G},backend:o}),z=Vo({inputs:{input:O},backend:o}),X=Vo({inputs:{input:$},backend:o}),Y=fu({inputs:{input:O},backend:o}),Z=fu({inputs:{input:$},backend:o}),J=du({inputs:[z,X],backend:o,attrs:{axis:0}}),tt=du({inputs:[Y,Z],backend:o,attrs:{axis:0}}),et=o.data.get(J.dataId).values,lt=o.data.get(tt.dataId).values;return o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(u),o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(v),o.disposeIntermediateTensorInfo(S),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(E),o.disposeIntermediateTensorInfo(A),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(M),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(K),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(O),o.disposeIntermediateTensorInfo($),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(Y),o.disposeIntermediateTensorInfo(X),o.disposeIntermediateTensorInfo(Z),o.disposeIntermediateTensorInfo(J),o.disposeIntermediateTensorInfo(tt),{real:et,imag:lt}}function _it(e,t,s){const i=new Float32Array(t*2);for(let o=0;o<t;o++){let y=0,r=0;for(let g=0;g<t;g++){const n=FO(o*g,t,s),a=iC(e,g);y+=a.real*n.real-a.imag*n.imag,r+=a.real*n.imag+a.imag*n.real}s&&(y/=t,r/=t),NO(i,y,r,o)}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function trt(e){const{inputs:t,backend:s}=e,{input:i}=t,o=vt(i.shape),y=i.shape[i.shape.length-1],r=o/y,g=Re({inputs:{x:i},backend:s,attrs:{shape:[r,y]}}),n=p4(g,!1,s),a=Re({inputs:{x:n},backend:s,attrs:{shape:i.shape}});return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(n),a}const ert={kernelName:aS,backendName:"cpu",kernelFunc:trt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WC(e){const{backend:t,attrs:s}=e,{shape:i,value:o,dtype:y}=s,r=y||bu(o),g=Qe(r,vt(i));return srt(g,o,r),t.makeTensorInfo(i,r,g)}const nrt={kernelName:oS,backendName:"cpu",kernelFunc:WC};function srt(e,t,s){e.fill(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const irt={kernelName:lS,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:s})=>{const{image:i}=e,o=s,y=Ln(i.dtype,vt(i.shape)),[r,g,n,a]=i.shape,p=o.data.get(i.dataId).values;for(let u=0;u<r;u++){const d=u*n*g*a;for(let l=0;l<g;l++){const c=l*(n*a);for(let m=0;m<n;m++){const f=m*a;for(let v=0;v<a;v++){const S=Math.round(n-m-1),x=d+c+f+v;let T=p[x];if(S>=0&&S<n){const C=S*a,w=d+c+C+v;T=p[w]}y[x]=T}}}}return{dataId:o.write(y,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rrt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,filter:y,bias:r,preluActivationWeights:g}=t,{strides:n,pad:a,dataFormat:p,dilations:h,dimRoundingMode:u,activation:d,leakyreluAlpha:l}=i;let c=f4({inputs:{x:o,filter:y},backend:s,attrs:{strides:n,pad:a,dataFormat:p,dilations:h,dimRoundingMode:u}});if(r){const m=c;if(p==="NCHW"&&r.shape.length===1&&r.shape[0]!==1){const f=Re({inputs:{x:r},backend:s,attrs:{shape:[r.shape[0],1,1]}});c=cu({inputs:{a:c,b:f},backend:s}),s.disposeIntermediateTensorInfo(f)}else c=cu({inputs:{a:c,b:r},backend:s});s.disposeIntermediateTensorInfo(m)}if(d){const m=c;if(p==="NCHW"&&d==="prelu"&&g.shape.length===1&&g.shape[0]!==1){const f=Re({inputs:{x:g},backend:s,attrs:{shape:[g.shape[0],1,1]}});c=lm(s,c,d,f,l),s.disposeIntermediateTensorInfo(f)}else c=lm(s,c,d,g,l);s.disposeIntermediateTensorInfo(m)}return c}const art={kernelName:Vp,backendName:"cpu",kernelFunc:rrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ort(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,filter:y,bias:r,preluActivationWeights:g}=t,{strides:n,pad:a,dataFormat:p,dilations:h,dimRoundingMode:u,activation:d,leakyreluAlpha:l}=i;let c=d4({inputs:{x:o,filter:y},backend:s,attrs:{strides:n,pad:a,dataFormat:p,dilations:h,dimRoundingMode:u}});if(r){const m=c;c=cu({inputs:{a:c,b:r},backend:s}),s.disposeIntermediateTensorInfo(m)}if(d){const m=c;c=lm(s,c,d,g,l),s.disposeIntermediateTensorInfo(m)}return c}const lrt={kernelName:Gp,backendName:"cpu",kernelFunc:ort};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function urt(e){const{inputs:t,backend:s}=e,{params:i,indices:o}=t,y=vt(i.shape),r=o.shape,g=r[r.length-1],[n,a,p,h]=GT(i,o);if(a===0)return s.makeTensorInfo(n,i.dtype,[]);const u=s.data.get(o.dataId).values,d=s.bufferSync(i),l=EM(u,d,i.dtype,a,g,p,h,i.shape,y);return s.makeTensorInfo(n,i.dtype,l.values)}const hrt={kernelName:uS,backendName:"cpu",kernelFunc:urt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function crt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,indices:y}=t,{axis:r,batchDims:g}=i;$t([o,y],"gatherV2");const n=se(r,o.shape)[0],a=s.data.get(y.dataId).values,p=o.shape[n];for(let x=0;x<a.length;++x){const T=a[x];q(T<=p-1&&T>=0,()=>`GatherV2: the index value ${T} is not in [0, ${p-1}]`)}let h=g;g==null&&(h=0);const u=vt(y.shape),d=cC(o,y,n,h),l=Re({inputs:{x:o},backend:s,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),c=Re({inputs:{x:y},backend:s,attrs:{shape:[d.batchSize,u/d.batchSize]}}),m=[d.batchSize,d.outerSize,u/d.batchSize,d.sliceSize],f=s.bufferSync(c),v=s.bufferSync(l),S=bM(v,f,m);return s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(c),s.makeTensorInfo(d.outputShape,S.dtype,S.values)}const frt={kernelName:vv,backendName:"cpu",kernelFunc:crt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function drt(e){const{inputs:t,backend:s}=e,{input:i}=t,o=vt(i.shape),y=i.shape[i.shape.length-1],r=o/y,g=Re({inputs:{x:i},backend:s,attrs:{shape:[r,y]}}),n=p4(g,!0,s),a=Re({inputs:{x:n},backend:s,attrs:{shape:i.shape}});return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(n),a}const prt={kernelName:hS,backendName:"cpu",kernelFunc:drt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mrt=Se(Xc,e=>Number.isFinite(e)?1:0,"bool"),vrt={kernelName:Xc,backendName:"cpu",kernelFunc:mrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const grt=Se(Yc,e=>Math.abs(e)===1/0?1:0,"bool"),xrt={kernelName:Yc,backendName:"cpu",kernelFunc:grt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yrt=Se(Kc,e=>Number.isNaN(e)?1:0,"bool"),Srt={kernelName:Kc,backendName:"cpu",kernelFunc:yrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Trt(e){const{backend:t,attrs:s}=e,{start:i,stop:o,num:y}=s,r=PM(i,o,y);return t.makeTensorInfo([r.length],"float32",r)}const Crt={kernelName:fS,backendName:"cpu",kernelFunc:Trt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wrt=Se(Zc,e=>Math.log1p(e)),Ert={kernelName:Zc,backendName:"cpu",kernelFunc:wrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const brt=nn((e,t)=>e&&t),Art=Sn(Tv,brt,null,"bool"),Irt={kernelName:Tv,backendName:"cpu",kernelFunc:Art};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rrt=Se(Cv,e=>e?0:1,"bool"),Nrt={kernelName:Cv,backendName:"cpu",kernelFunc:Rrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Prt=nn((e,t)=>e||t),Frt=Sn(wv,Prt,null,"bool"),Ort={kernelName:wv,backendName:"cpu",kernelFunc:Frt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Drt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{depthRadius:y,bias:r,alpha:g,beta:n}=i;$t(o,"LRN");const a=o.shape[3],p=a-1,h=s.data.get(o.dataId).values,u=vt(o.shape),d=new Float32Array(u);function l(c){const m=c%a;let f=c-m+Math.max(0,m-y);const v=c-m+Math.min(m+y,p);let S=0;for(;f<=v;f++){const x=h[f];S+=x*x}return S}for(let c=0;c<u;c++){const m=l(c),f=h[c]*Math.pow(r+g*m,-n);d[c]=f}return s.makeTensorInfo(o.shape,o.dtype,d)}const Lrt={kernelName:Ev,backendName:"cpu",kernelFunc:Drt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mrt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,y,dy:r}=t,{depthRadius:g,bias:n,alpha:a,beta:p}=i;$t(r,"LRNGrad");const h=vt(r.shape),u=r.shape[3],d=s.data.get(r.dataId).values,l=s.data.get(o.dataId).values,c=s.data.get(y.dataId).values,m=new Float32Array(h),f=h;for(let v=0;v<f;v++){const S=v%u,x=v-S+Math.max(0,S-g),T=v-S+Math.min(u,S+g+1);let C=0;for(let w=x;w<T;w++)C+=Math.pow(l[w],2);C=a*C+n;for(let w=x;w<T;w++){let b=-2*a*p*l[w]*c[v]/C;v===w&&(b+=Math.pow(C,-p)),b*=d[v],m[w]+=b}}return s.makeTensorInfo(r.shape,o.dtype,m)}const $rt={kernelName:dS,backendName:"cpu",kernelFunc:Mrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m4(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{reductionIndices:y,keepDims:r}=i,g=s;let n=o.shape;const a=n.length,p=se(y,n);let h=p;const u=We(h,a);let d=g.data.get(o.dataId).values;if(u!=null){const x=new Array(a);for(let T=0;T<x.length;T++)x[T]=n[u[T]];d=kC(d,n,o.dtype,u,x),h=tn(h.length,a),n=x}$t(o,"max"),Bn("max",h,a);const[l,c]=Nn(n,h),m=vt(c),f=OM(d,m,l,o.dtype),v=g.write(f,l,o.dtype);let S=l;return r&&(S=_e(l,p)),{dataId:v,shape:S,dtype:o.dtype}}const Brt={kernelName:bv,backendName:"cpu",kernelFunc:m4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function krt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t;$t(o,"maxPool");const{filterSize:y,strides:r,pad:g,dimRoundingMode:n}=i,a=1;q($n(r,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`);const p=Ri(o.shape,y,r,a,g,n);let h;if(p.filterWidth===1&&p.filterHeight===1&&oe(p.inShape,p.outShape))h=Tr({inputs:{x:o},backend:s});else{const u=s.data.get(o.dataId).values,d=Vt(o.shape),l=GC(u,o.shape,o.dtype,d,p,"max");h=s.makeTensorInfo(p.outShape,o.dtype,l.values)}return h}const zrt={kernelName:Av,backendName:"cpu",kernelFunc:krt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vrt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{filterSize:y,strides:r,pad:g,dimRoundingMode:n,dataFormat:a}=i;$t(o,"maxPool3d");const p=Qr(o.shape,y,r,1,g,n,a),h=s.data.get(o.dataId).values,u=c4(h,o.shape,o.dtype,Vt(o.shape),p,"max");return s.makeTensorInfo(u.shape,"float32",u.values)}const Grt={kernelName:Iv,backendName:"cpu",kernelFunc:Vrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Urt(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,input:y}=t,{filterSize:r,strides:g,pad:n,dimRoundingMode:a}=i;$t([o,y],"maxPool3DGrad");const p=Qr(y.shape,r,g,1,n,a),h=s.bufferSync(y),u=Pst(h,p),d=p.strideDepth,l=p.strideHeight,c=p.strideWidth,m=p.dilationDepth,f=p.dilationHeight,v=p.dilationWidth,S=p.effectiveFilterDepth,x=p.effectiveFilterHeight,T=p.effectiveFilterWidth,C=S-1-p.padInfo.front,w=T-1-p.padInfo.left,b=x-1-p.padInfo.top,E=te(y.shape,"float32"),A=s.bufferSync(o);for(let I=0;I<p.batchSize;++I)for(let R=0;R<p.inChannels;++R)for(let N=0;N<p.inDepth;++N)for(let F=0;F<p.inHeight;++F)for(let P=0;P<p.inWidth;++P){const D=N-C,M=F-b,L=P-w;let k=0;for(let V=0;V<S;V+=m){const W=(D+V)/d;if(!(W<0||W>=p.outDepth||Math.floor(W)!==W))for(let K=0;K<x;K+=f){const B=(M+K)/l;if(!(B<0||B>=p.outHeight||Math.floor(B)!==B))for(let G=0;G<T;G+=v){const O=(L+G)/c;if(O<0||O>=p.outWidth||Math.floor(O)!==O)continue;const $=S*x*T-1-u.get(I,W,B,O,R),z=V*x*T+K*T+G,X=$===z?1:0;if(X===0)continue;const Y=A.get(I,W,B,O,R);k+=Y*X}}}E.set(k,I,N,F,P,R)}return s.makeTensorInfo(E.shape,E.dtype,E.values)}const Wrt={kernelName:mS,backendName:"cpu",kernelFunc:Urt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hrt(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,input:y,output:r}=t,g=y;$t([y,r],"maxPoolGrad");const{filterSize:n,strides:a,pad:p,dimRoundingMode:h}=i,u=Ri(g.shape,n,a,1,p,h),d=s.data.get(g.dataId).values,l=te(u.outShape,g.dtype,h4(d,g.shape,g.dtype,u).values),c=u.strideHeight,m=u.strideWidth,f=u.dilationHeight,v=u.dilationWidth,S=u.effectiveFilterHeight,x=u.effectiveFilterWidth,T=x-1-u.padInfo.left,C=S-1-u.padInfo.top,w=te(g.shape,"float32"),b=s.data.get(o.dataId).values,E=te(o.shape,"float32",b);for(let A=0;A<u.batchSize;++A)for(let I=0;I<u.inChannels;++I)for(let R=0;R<u.inHeight;++R)for(let N=0;N<u.inWidth;++N){const F=R-C,P=N-T;let D=0;for(let M=0;M<S;M+=f){const L=(F+M)/c;if(!(L<0||L>=u.outHeight||Math.floor(L)!==L))for(let k=0;k<x;k+=v){const V=(P+k)/m;if(V<0||V>=u.outWidth||Math.floor(V)!==V)continue;const W=S*x-1-l.get(A,L,V,I),K=M*x+k,B=W===K?1:0;if(B===0)continue;const G=E.get(A,L,V,I);D+=G*B}}w.set(D,A,R,N,I)}return s.makeTensorInfo(w.shape,w.dtype,w.values)}const Xrt={kernelName:pS,backendName:"cpu",kernelFunc:Hrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yrt(e,t,s,i,o){const y=Vt(t),r=GC(e,t,s,y,o,"max"),g=h4(e,t,s,o,!0,i);return[r.values,g.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Krt={kernelName:vS,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:s})=>{const{x:i}=e,{filterSize:o,strides:y,pad:r,includeBatchInIndex:g}=t,n=s;$t(i,"MaxPoolWithArgmax");const a=n.data.get(i.dataId).values,p=Ri(i.shape,o,y,[1,1],r),[h,u]=Yrt(a,i.shape,i.dtype,g,p),d=n.write(h,p.outShape,i.dtype),l=n.write(u,p.outShape,i.dtype);return[{dataId:d,shape:p.outShape,dtype:i.dtype},{dataId:l,shape:p.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jrt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,keepDims:r}=i,g=se(y,o.shape),a=Nn(o.shape,g)[1],p=vt(a),h=[],u=s.makeTensorInfo([],"float32",new Float32Array([p]));h.push(u);const d=Ga({inputs:{x:o},backend:s,attrs:{dtype:"float32"}});h.push(d);const l=UC({inputs:{a:d,b:u},backend:s});h.push(l);const c=zf({inputs:{x:l},backend:s,attrs:{axis:y,keepDims:r}});return h.forEach(m=>s.disposeIntermediateTensorInfo(m)),c}const Zrt={kernelName:Rv,backendName:"cpu",kernelFunc:jrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jrt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,keepDims:r}=i;$t(o,"min");const g=se(y,o.shape);let n=g;const a=We(n,o.shape.length);let p=o;a!=null&&(p=vs({inputs:{x:o},backend:s,attrs:{perm:a}}),n=tn(n.length,o.shape.length)),Bn("min",n,p.shape.length);const[h,u]=Nn(p.shape,n),d=vt(u),l=Yn(vt(h),p.dtype),c=s.data.get(p.dataId).values;for(let f=0;f<l.length;++f){const v=f*d;let S=c[v];for(let x=0;x<d;++x){const T=c[v+x];(Number.isNaN(T)||T<S)&&(S=T)}l[f]=S}a!=null&&s.disposeIntermediateTensorInfo(p);const m=s.makeTensorInfo(h,p.dtype,l);if(r){const f=_e(h,g),v=Re({inputs:{x:m},backend:s,attrs:{shape:f}});return s.disposeIntermediateTensorInfo(m),v}return m}const Qrt={kernelName:Nv,backendName:"cpu",kernelFunc:Jrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qrt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{paddings:y,mode:r}=i;$t(o,"mirrorPad");const g=y.map((S,x)=>S[0]+o.shape[x]+S[1]),n=y.map(S=>S[0]),a=y.map((S,x)=>S[0]+o.shape[x]),p=r==="reflect"?0:1,h=s.data.get(o.dataId).values,u=o.shape.length,d=Vt(o.shape),l=vt(g),c=g.length,m=Vt(g),f=Ln(o.dtype,l);for(let S=0;S<l;S++){let x=Au(S,c,m);for(let C=0;C<c;C++)x[C]<n[C]?x[C]=n[C]*2-x[C]-p:x[C]>=a[C]&&(x[C]=(a[C]-1)*2-x[C]+p);x=x.map((C,w)=>C-n[w]);const T=mr(x,u,d);f[S]=h[T]}return{dataId:s.write(f,g,o.dtype),shape:g,dtype:o.dtype}}const _rt={kernelName:Pv,backendName:"cpu",kernelFunc:qrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tat=nn((e,t)=>{const s=e%t;return e<0&&t<0||e>=0&&t>=0?s:(s+t)%t}),eat=Sn(qc,tat),nat={kernelName:qc,backendName:"cpu",kernelFunc:eat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v4(e){const{inputs:t,backend:s,attrs:i}=e,{logits:o}=t,{dim:y}=i,r=o.shape.length;let g=y;if(g===-1&&(g=r-1),g!==r-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${r} and dim was ${g}`);const n=se([g],o.shape),a=m4({inputs:{x:o},backend:s,attrs:{reductionIndices:n,keepDims:!1}}),p=_e(a.shape,n),h=Re({inputs:{x:a},backend:s,attrs:{shape:p}}),u=VC({inputs:{a:o,b:h},backend:s}),d=SM({inputs:{x:u},backend:s}),l=zf({inputs:{x:d},backend:s,attrs:{axis:n,keepDims:!1}}),c=Re({inputs:{x:l},backend:s,attrs:{shape:p}}),m=UC({inputs:{a:d,b:c},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(c),m}const sat={kernelName:jv,backendName:"cpu",kernelFunc:v4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iat(e){const{inputs:t,backend:s,attrs:i}=e,{logits:o}=t,{numSamples:y,seed:r,normalized:g}=i;$t(o,"multinomial");const n=g?o:v4({inputs:{logits:o},backend:s,attrs:{dim:-1}}),a=n.shape[0],p=n.shape[1],h=s.data.get(n.dataId).values,u=[a,y],d=Yn(vt(u),"int32");for(let l=0;l<a;++l){const c=l*p,m=new Float32Array(p-1);m[0]=h[c];for(let S=1;S<m.length;++S)m[S]=m[S-1]+h[c+S];const f=cg.alea(r.toString()),v=l*y;for(let S=0;S<y;++S){const x=f();d[v+S]=m.length;for(let T=0;T<m.length;T++)if(x<m[T]){d[v+S]=T;break}}}return g||s.disposeIntermediateTensorInfo(n),s.makeTensorInfo(u,"int32",d)}const rat={kernelName:gS,backendName:"cpu",kernelFunc:iat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aat=LT;function oat(e){const{inputs:t,backend:s,attrs:i}=e,{boxes:o,scores:y}=t,{maxOutputSize:r,iouThreshold:g,scoreThreshold:n}=i;$t(o,"NonMaxSuppression");const a=s.data.get(o.dataId).values,p=s.data.get(y.dataId).values,{selectedIndices:h}=aat(a,p,r,g,n);return s.makeTensorInfo([h.length],"int32",new Int32Array(h))}const lat={kernelName:xS,backendName:"cpu",kernelFunc:oat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uat=MT;function hat(e){const{inputs:t,backend:s,attrs:i}=e,{boxes:o,scores:y}=t,{maxOutputSize:r,iouThreshold:g,scoreThreshold:n,padToMaxOutputSize:a}=i;$t(o,"NonMaxSuppressionPadded");const p=s.data.get(o.dataId).values,h=s.data.get(y.dataId).values,{selectedIndices:u,validOutputs:d}=uat(p,h,r,g,n,a);return[s.makeTensorInfo([u.length],"int32",new Int32Array(u)),s.makeTensorInfo([],"int32",new Int32Array([d]))]}const cat={kernelName:yS,backendName:"cpu",kernelFunc:hat};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fat=$T;function dat(e){const{inputs:t,backend:s,attrs:i}=e,{boxes:o,scores:y}=t,{maxOutputSize:r,iouThreshold:g,scoreThreshold:n,softNmsSigma:a}=i;$t(o,"NonMaxSuppressionWithScore");const p=s.data.get(o.dataId).values,h=s.data.get(y.dataId).values,u=r,d=g,l=n,c=a,{selectedIndices:m,selectedScores:f}=fat(p,h,u,d,l,c);return[s.makeTensorInfo([m.length],"int32",new Int32Array(m)),s.makeTensorInfo([f.length],"float32",new Float32Array(f))]}const pat={kernelName:SS,backendName:"cpu",kernelFunc:dat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mat(e){const{inputs:t,backend:s,attrs:i}=e,{indices:o}=t,{dtype:y,depth:r,onValue:g,offValue:n}=i;$t(o,"oneHot");const a=vt(o.shape),p=new Float32Array(a*r);p.fill(n);const h=s.data.get(o.dataId).values;for(let u=0;u<a;++u)h[u]>=0&&h[u]<r&&(p[u*r+h[u]]=g);return s.makeTensorInfo([...o.shape,r],y,p)}const vat={kernelName:Lv,backendName:"cpu",kernelFunc:mat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hm(e){const{inputs:t,backend:s}=e,{x:i}=t;if(i.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(i.dtype==="complex64"){const o=Vo({inputs:{input:i},backend:s}),y=hm({inputs:{x:o},backend:s}),r=fu({inputs:{input:i},backend:s}),g=hm({inputs:{x:r},backend:s}),n=Es({inputs:{real:y,imag:g},backend:s});return s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(y),s.disposeIntermediateTensorInfo(r),s.disposeIntermediateTensorInfo(g),n}else return WC({backend:s,attrs:{shape:i.shape,value:0,dtype:i.dtype}})}const gat={kernelName:qv,backendName:"cpu",kernelFunc:hm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g4(e){const{inputs:t,backend:s}=e,{x:i}=t;if(i.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(i.dtype==="complex64"){const o=Vo({inputs:{input:i},backend:s}),y=g4({inputs:{x:o},backend:s}),r=fu({inputs:{input:i},backend:s}),g=hm({inputs:{x:r},backend:s}),n=Es({inputs:{real:y,imag:g},backend:s});return s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(y),s.disposeIntermediateTensorInfo(r),s.disposeIntermediateTensorInfo(g),n}else return WC({backend:s,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}const xat={kernelName:Dv,backendName:"cpu",kernelFunc:g4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x4(e){const{inputs:t,backend:s,attrs:i}=e,{axis:o}=i;if(t.length===1)return um({inputs:{input:t[0]},backend:s,attrs:{dim:o}});const y=t[0].shape,r=t[0].dtype;t.forEach(p=>{$s(y,p.shape,"All tensors passed to stack must have matching shapes"),q(r===p.dtype,()=>"All tensors passed to stack must have matching dtypes")});const g=[],n=t.map(p=>{const h=um({inputs:{input:p},backend:s,attrs:{dim:o}});return g.push(h),h}),a=du({inputs:n,backend:s,attrs:{axis:o}});return g.forEach(p=>s.disposeIntermediateTensorInfo(p)),a}const yat={kernelName:Mv,backendName:"cpu",kernelFunc:x4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sat(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{paddings:y,constantValue:r}=i;$t(o,"pad");const g=y.map((v,S)=>v[0]+o.shape[S]+v[1]),n=y.map(v=>v[0]),a=s.data.get(o.dataId).values,p=vt(o.shape),h=o.shape.length,u=Vt(o.shape),d=vt(g),l=g.length,c=Vt(g),m=Ln(o.dtype,d);r!==0&&m.fill(r);for(let v=0;v<p;v++){const x=Au(v,h,u).map((C,w)=>C+n[w]),T=mr(x,l,c);m[T]=a[v]}return{dataId:s.write(m,g,o.dtype),shape:g,dtype:o.dtype}}const y4={kernelName:$v,backendName:"cpu",kernelFunc:Sat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tat=nn((e,t)=>Math.pow(e,t)),Cat=Sn(tf,Tat),wat={kernelName:tf,backendName:"cpu",kernelFunc:Cat};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eat(e){const{inputs:t,backend:s,attrs:i}=e,{paramsNestedSplits:o,paramsDenseValues:y,indices:r}=t,g=o.map(m=>s.data.get(m.dataId).values),n=o.map(m=>m.shape),a=s.data.get(y.dataId).values,p=s.data.get(r.dataId).values,[h,u,d]=kM(g,n,a,y.shape,y.dtype,p,r.shape),l=h.map(m=>s.makeTensorInfo([m.length],"int32",m)),c=s.makeTensorInfo(d,y.dtype,u);return l.concat([c])}const bat={kernelName:TS,backendName:"cpu",kernelFunc:Eat};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aat(e){const{inputs:t,backend:s}=e,{starts:i,limits:o,deltas:y}=t,r=s.data.get(i.dataId).values,g=s.data.get(o.dataId).values,n=s.data.get(y.dataId).values,[a,p]=zM(r,i.shape,i.dtype,g,o.shape,n,y.shape),h=s.makeTensorInfo([a.length],"int32",a),u=s.makeTensorInfo([p.length],i.dtype,p);return[h,u]}const Iat={kernelName:CS,backendName:"cpu",kernelFunc:Aat};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rat(e){const{inputs:t,backend:s,attrs:i}=e,{shape:o,values:y,defaultValue:r,rowPartitionTensors:g}=t,{rowPartitionTypes:n}=i,a=s.data.get(o.dataId).values,p=s.data.get(y.dataId).values,h=s.data.get(r.dataId).values,u=g.map(m=>s.data.get(m.dataId).values),d=g.map(m=>m.shape),[l,c]=VM(a,o.shape,p,y.shape,y.dtype,h,r.shape,u,d,n);return s.makeTensorInfo(l,y.dtype,c)}const Nat={kernelName:wS,backendName:"cpu",kernelFunc:Rat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pat(e){const{backend:t,attrs:s}=e,{start:i,stop:o,dtype:y,step:r}=s,g=GM(i,o,r,y);return t.makeTensorInfo([g.length],y,g)}const Fat={kernelName:ES,backendName:"cpu",kernelFunc:Pat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oat=Se(ef,e=>1/e),Dat={kernelName:ef,backendName:"cpu",kernelFunc:Oat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lat(e){const{inputs:t,backend:s,attrs:i}=e,{images:o}=t,{alignCorners:y,halfPixelCenters:r,size:g}=i;$t(o,"resizeBilinear");const n=Vt(o.shape),[a,p]=g,[h,u,d,l]=o.shape,c=s.data.get(o.dataId).values,m=new Float32Array(vt([h,a,p,l])),f=[y&&a>1?u-1:u,y&&p>1?d-1:d],v=[y&&a>1?a-1:a,y&&p>1?p-1:p];let S=0;const x=f[0]/v[0],T=f[1]/v[1];for(let C=0;C<h;C++)for(let w=0;w<a;w++){let b;r?b=x*(w+.5)-.5:b=x*w;const E=Math.max(0,Math.floor(b)),A=b-E,I=Math.min(u-1,Math.ceil(b)),R=C*n[0]+E*n[1],N=C*n[0]+I*n[1];for(let F=0;F<p;F++){let P;r?P=T*(F+.5)-.5:P=T*F;const D=Math.max(0,Math.floor(P)),M=P-D,L=Math.min(d-1,Math.ceil(P)),k=R+D*n[2],V=N+D*n[2],W=R+L*n[2],K=N+L*n[2];for(let B=0;B<l;B++){const G=c[k+B],O=c[V+B],$=c[W+B],z=c[K+B],X=G+($-G)*M,Y=O+(z-O)*M,Z=X+(Y-X)*A;m[S++]=Z}}}return s.makeTensorInfo([h,a,p,l],"float32",m)}const Mat={kernelName:Gv,backendName:"cpu",kernelFunc:Lat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $at(e){const{inputs:t,backend:s,attrs:i}=e,{images:o,dy:y}=t,{alignCorners:r}=i;$t([y,o],"resizeBilinearGrad");const g=Vt(o.shape),[n,a,p,h]=o.shape,[,u,d]=y.shape,l=new Float32Array(n*a*p*h),c=[r&&u>1?a-1:a,r&&d>1?p-1:p],m=[r&&u>1?u-1:u,r&&d>1?d-1:d],f=c[0]/m[0],v=c[1]/m[1],S=s.data.get(y.dataId).values;let x=0;for(let T=0;T<n;T++){const C=T*g[0];for(let w=0;w<u;w++){const b=w*f,E=Math.floor(b),A=Math.min(Math.ceil(b),a-1),I=C+E*g[1],R=C+A*g[1],N=b-E,F=1-N;for(let P=0;P<d;P++){const D=P*v,M=Math.floor(D),L=Math.min(Math.ceil(D),p-1),k=D-M,V=1-k,W=I+M*g[2],K=I+L*g[2],B=R+M*g[2],G=R+L*g[2],O=F*V,$=F*k,z=N*V,X=N*k;for(let Y=0;Y<h;Y++){const Z=S[x++];l[W+Y]+=Z*O,l[K+Y]+=Z*$,l[B+Y]+=Z*z,l[G+Y]+=Z*X}}}}return s.makeTensorInfo([n,p,a,h],"float32",l)}const Bat={kernelName:IS,backendName:"cpu",kernelFunc:$at};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kat(e){const{inputs:t,backend:s,attrs:i}=e,{images:o}=t,{alignCorners:y,halfPixelCenters:r,size:g}=i;$t(o,"resizeNearestNeighbor");const n=Vt(o.shape),[a,p]=g,[h,u,d,l]=o.shape,c=s.data.get(o.dataId).values,m=new Float32Array(h*a*p*l),f=[y&&a>1?u-1:u,y&&p>1?d-1:d],v=[y&&a>1?a-1:a,y&&p>1?p-1:p],S=f[0]/v[0],x=f[1]/v[1];let T=0;for(let C=0;C<h;C++){const w=C*n[0];for(let b=0;b<a;b++){const E=r?S*(b+.5):S*b;let A=Math.min(u-1,y?Math.round(E):Math.floor(E));r&&(A=Math.max(0,A));const I=w+A*n[1];for(let R=0;R<p;R++){const N=r?x*(R+.5):x*R;let F=Math.min(d-1,y?Math.round(N):Math.floor(N));r&&(F=Math.max(0,F));const P=I+F*n[2];for(let D=0;D<l;D++){const M=c[P+D];m[T++]=M}}}}return s.makeTensorInfo([h,a,p,l],o.dtype,m)}const zat={kernelName:Vv,backendName:"cpu",kernelFunc:kat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vat(e){const{inputs:t,backend:s,attrs:i}=e,{images:o,dy:y}=t,{alignCorners:r}=i;$t([y,o],"resizeNearestNeighborGrad");const g=Vt(o.shape),n=Vt(y.shape),[a,p,h,u]=o.shape,[,d,l]=y.shape,c=new Float32Array(a*p*h*u),m=s.data.get(y.dataId).values,f=[r&&d>1?p-1:p,r&&l>1?h-1:h],v=[r&&d>1?d-1:d,r&&l>1?l-1:l],S=f[0]/v[0],x=f[1]/v[1],T=1/S,C=1/x,w=Math.ceil(T)*2+2,b=Math.ceil(C)*2+2;for(let E=0;E<a;E++){const A=E*g[0];for(let I=0;I<p;I++){const R=A+I*g[1],N=Math.floor(I*T),F=Math.floor(N-w/2);for(let P=0;P<h;P++){const D=R+P*g[2],M=Math.floor(P*C),L=Math.floor(M-b/2);for(let k=0;k<u;k++){let V=0;for(let W=0;W<w;W++){const K=W+F;if(K<0||K>=d)continue;const B=A+K*n[1],G=K*S,O=Math.min(p-1,r?Math.round(G):Math.floor(G));if(I===O)for(let $=0;$<b;$++){const z=$+L;if(z<0||z>=l)continue;const X=B+z*n[2],Y=z*x,Z=Math.min(h-1,r?Math.round(Y):Math.floor(Y));P===Z&&(V+=m[X+k])}}c[D+k]=V}}}}return s.makeTensorInfo(o.shape,o.dtype,c)}const Gat={kernelName:AS,backendName:"cpu",kernelFunc:Vat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uat(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{dims:y}=i;$t(o,"reverse");const r=o.shape.length,g=se(y,o.shape);if(r===0)return Tr({inputs:{x:o},backend:s});const n=new vn(o.shape,o.dtype),a=s.bufferSync(o);for(let p=0;p<n.size;p++){const h=n.indexToLoc(p),u=h.slice();g.forEach(d=>u[d]=o.shape[d]-1-u[d]),n.set(a.get(...u),...h)}return s.makeTensorInfo(n.shape,n.dtype,n.values)}const Wat={kernelName:Uv,backendName:"cpu",kernelFunc:Uat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hat={kernelName:HS,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:s})=>{const{image:i}=e,{radians:o,fillValue:y,center:r}=t,g=s,n=Ln(i.dtype,vt(i.shape)),[a,p,h,u]=i.shape,[d,l]=ZT(r,p,h),c=255,m=Math.sin(o),f=Math.cos(o),v=g.data.get(i.dataId).values;for(let x=0;x<a;x++){const T=x*h*p*u;for(let C=0;C<p;C++){const w=C*(h*u);for(let b=0;b<h;b++){const E=b*u;for(let A=0;A<u;A++){const I=[a,C,b,A],R=I[2],N=I[1];let F=(R-d)*f-(N-l)*m,P=(R-d)*m+(N-l)*f;F=Math.round(F+d),P=Math.round(P+l);let D=y;if(typeof y!="number"&&(A===3?D=c:D=y[A]),F>=0&&F<h&&P>=0&&P<p){const L=P*(h*u),k=F*u,V=T+L+k+A;D=v[V]}const M=T+w+E+A;n[M]=D}}}}return{dataId:g.write(n,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xat=Se(rf,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),Yat={kernelName:rf,backendName:"cpu",kernelFunc:Xat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kat(e){const{inputs:t,backend:s,attrs:i}=e,{indices:o,updates:y}=t,{shape:r}=i,{sliceRank:g,numUpdates:n,sliceSize:a,strides:p,outputSize:h}=qo(y,o,r),u=!0,d=s.bufferSync(o),l=s.bufferSync(y),c=yo(d,l,r,h,a,n,g,p,0,u);return s.makeTensorInfo(r,c.dtype,c.values)}const jat={kernelName:RS,backendName:"cpu",kernelFunc:Kat};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zat(e,t){let s=0,i=e.length,o=0;for(;s<i;)o=Math.floor((s+i)/2),e[o]<t?s=o+1:i=o;return i}function Jat(e,t){let s=0,i=e.length,o=0;for(;s<i;)o=Math.floor((s+i)/2),e[o]<=t?s=o+1:i=o;return i}function Qat(e,t,s,i,o,y){const r=Qe("int32",s*o);for(let g=0;g<s;++g){const n=e.slice(g*i,(g+1)*i),a=g*o;for(let p=0;p<o;++p)r[a+p]=y==="left"?Zat(n,t[p+a]):Jat(n,t[p+a])}return r}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qat(e){const{inputs:t,backend:s,attrs:i}=e,{sortedSequence:o,values:y}=t,{side:r}=i,g=s.data.get(o.dataId).values,n=s.data.get(y.dataId).values,a=Qat(g,n,o.shape[0],o.shape[1],y.shape[1],r);return s.makeTensorInfo(y.shape,"int32",a)}const _at={kernelName:PS,backendName:"cpu",kernelFunc:qat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tot(e){const{inputs:t,backend:s}=e,{condition:i,t:o,e:y}=t;$t([i,o,y],"select");const r=i.shape.length,g=s.data.get(i.dataId).values,n=s.data.get(o.dataId).values,a=s.data.get(y.dataId).values,p=Os(o.dtype,y.dtype),h=Yn(vt(o.shape),p);let u=0;const d=r===0||r>1||o.shape.length===1?1:vt(o.shape.slice(1));for(let l=0;l<g.length;l++)for(let c=0;c<d;c++)g[l]===1?h[u++]=n[l]:h[u++]=a[l];return s.makeTensorInfo(o.shape,p,h)}const eot={kernelName:Wv,backendName:"cpu",kernelFunc:tot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const not=wg,sot=Eg,iot=Se(of,e=>e>=0?sot*e:not*(Math.exp(e)-1)),rot={kernelName:of,backendName:"cpu",kernelFunc:iot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aot=Se(hf,e=>e<0?-1:e>0?1:0),oot={kernelName:hf,backendName:"cpu",kernelFunc:aot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lot=Se(lf,e=>Math.sin(e)),uot={kernelName:lf,backendName:"cpu",kernelFunc:lot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hot=Se(uf,e=>Math.sinh(e)),cot={kernelName:uf,backendName:"cpu",kernelFunc:hot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fot=11920928955078125e-23,ZA=Math.log(fot)+2,dot=Se(ff,e=>{const t=e>-ZA,s=e<ZA,i=Math.exp(e);let o;return s?o=i:t?o=e:o=Math.log(1+i),o}),pot={kernelName:ff,backendName:"cpu",kernelFunc:dot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mot(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{blockShape:y,paddings:r}=i;$t([o],"spaceToBatchND");const g=vt(y),n=[[0,0]];n.push(...r);for(let C=1+y.length;C<o.shape.length;++C)n.push([0,0]);const a=y4.kernelFunc({inputs:{x:o},backend:s,attrs:{paddings:n,constantValue:0}}),p=Rf(a.shape,y,g,!1),h=Nf(p.length,y.length,!1),u=Pf(a.shape,y,g,!1),c=Re({inputs:{x:a},backend:s,attrs:{shape:p}}),v=vs({inputs:{x:c},backend:s,attrs:{perm:h}}),T=Re({inputs:{x:v},backend:s,attrs:{shape:u}});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(v),T}const vot={kernelName:Yv,backendName:"cpu",kernelFunc:mot};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function got(e){const{inputs:t,backend:s}=e,{indices:i,values:o,denseShape:y,defaultValue:r}=t;if(y.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${y.shape}`);if(i.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${i.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(r.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${r.shape}`);const g=s.data.get(i.dataId).values,n=s.data.get(o.dataId).values,a=s.data.get(y.dataId).values,p=s.data.get(r.dataId).values[0],[h,u,d,l,c]=XM(g,i.shape,i.dtype,n,o.dtype,a,p);return[s.makeTensorInfo(u,i.dtype,h),s.makeTensorInfo([u[0]],o.dtype,d),s.makeTensorInfo([l.length],"bool",new Uint8Array(l.map(m=>Number(m)))),s.makeTensorInfo([c.length],i.dtype,new Int32Array(c))]}const xot={kernelName:FS,backendName:"cpu",kernelFunc:got};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yot(e){const{inputs:t,backend:s}=e,{inputIndices:i,inputShape:o,newShape:y}=t;if(i.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${i.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(y.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${y.shape}`);const r=Array.from(s.data.get(o.dataId).values),g=s.data.get(i.dataId).values,n=Array.from(s.data.get(y.dataId).values),[a,p,h]=YM(g,i.shape,i.dtype,r,n);return[s.makeTensorInfo(p,i.dtype,a),s.makeTensorInfo([h.length],y.dtype,new Int32Array(h))]}const Sot={kernelName:OS,backendName:"cpu",kernelFunc:yot};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tot(e){const{inputs:t,backend:s}=e,{data:i,indices:o,segmentIds:y}=t;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(y.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${y.shape}`);if(o.shape[0]!==y.shape[0])throw new Error("segmentIds and indices should have same size.");const r=s.data.get(i.dataId).values,g=s.data.get(o.dataId).values,n=s.data.get(y.dataId).values,[a,p]=zC(r,i.shape,i.dtype,g,n,!0);return s.makeTensorInfo(p,i.dtype,a)}const Cot={kernelName:DS,backendName:"cpu",kernelFunc:Tot};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wot(e){const{inputs:t,backend:s}=e,{data:i,indices:o,segmentIds:y}=t;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(y.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${y.shape}`);if(o.shape[0]!==y.shape[0])throw new Error("segmentIds and indices should have same size.");const r=s.data.get(i.dataId).values,g=s.data.get(o.dataId).values,n=s.data.get(y.dataId).values,[a,p]=zC(r,i.shape,i.dtype,g,n);return s.makeTensorInfo(p,i.dtype,a)}const Eot={kernelName:LS,backendName:"cpu",kernelFunc:wot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bot(e){const{inputs:t,backend:s,attrs:i}=e,{sparseIndices:o,sparseValues:y,defaultValue:r}=t,{outputShape:g}=i,{sliceRank:n,numUpdates:a,sliceSize:p,strides:h,outputSize:u}=qo(y,o,g),d=!1,l=s.bufferSync(o);let c;switch(y.dtype){case"bool":{const m=s.bufferSync(y),f=!!s.data.get(r.dataId).values[0];c=yo(l,m,g,u,p,a,n,h,f,d);break}case"float32":{const m=s.bufferSync(y),f=s.data.get(r.dataId).values[0];c=yo(l,m,g,u,p,a,n,h,f,d);break}case"int32":{const m=s.bufferSync(y),f=s.data.get(r.dataId).values[0];c=yo(l,m,g,u,p,a,n,h,f,d);break}case"string":{const m=s.bufferSync(y),f=Oa(s.data.get(r.dataId).values[0]);c=yo(l,m,g,u,p,a,n,h,f,d);break}default:throw new Error(`Unsupported type ${y.dtype}`)}return s.makeTensorInfo(g,c.dtype,c.values)}const Aot={kernelName:MS,backendName:"cpu",kernelFunc:bot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iot(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{numOrSizeSplits:y,axis:r}=i,g=se(r,o.shape)[0],n=hC(o,y,g),a=new Array(o.shape.length).fill(0),p=o.shape.slice();return n.map(h=>{const u=[...p];u[g]=h;const d=Go({inputs:{x:o},backend:s,attrs:{begin:a,size:u}});return a[g]+=h,d})}const Rot={kernelName:Kv,backendName:"cpu",kernelFunc:Iot};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Not={kernelName:$S,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:s}=e,i=t;$t(s,"square");const o=i.data.get(s.dataId).values,y=new Float32Array(o.length);for(let g=0;g<o.length;++g){const n=o[g];y[g]=n*n}return{dataId:i.write(y,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pot=Se(yf,(e,t)=>{const s=t;return isNaN(e)?NaN:e>0?1:s.alpha}),Fot={kernelName:yf,backendName:"cpu",kernelFunc:Pot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oot(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{begin:y,end:r,strides:g,beginMask:n,endMask:a,ellipsisMask:p,newAxisMask:h,shrinkAxisMask:u}=i;$t(o,"stridedSlice");const{finalShapeSparse:d,finalShape:l,isIdentity:c,sliceDim0:m,isSimpleSlice:f,begin:v,end:S,strides:x}=YT(o.shape,y,r,g,n,a,p,h,u);let T;if(c)T=Re({inputs:{x:o},backend:s,attrs:{shape:l}});else if(m||f){q(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const C=WT(v,S,x),w=Go({inputs:{x:o},backend:s,attrs:{begin:v,size:C}});T=Re({inputs:{x:w},backend:s,attrs:{shape:l}}),s.disposeIntermediateTensorInfo(w)}else{const C=s.bufferSync(o),w=ZM(d,C,x,v);T=s.makeTensorInfo(l,w.dtype,w.values)}return T}const Dot={kernelName:BS,backendName:"cpu",kernelFunc:Oot};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lot(e){const{inputs:t,backend:s,attrs:i}=e,{separator:o,nGramWidths:y,leftPad:r,rightPad:g,padWidth:n,preserveShortSequences:a}=i,{data:p,dataSplits:h}=t,u=s.data.get(p.dataId).values,d=s.data.get(h.dataId).values,[l,c]=JM(u,d,o,y,r,g,n,a);return[s.makeTensorInfo([l.length],"string",l),s.makeTensorInfo(h.shape,"int32",c)]}const Mot={kernelName:kS,backendName:"cpu",kernelFunc:Lot};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ot(e){const{inputs:t,backend:s,attrs:i}=e,{skipEmpty:o}=i,{input:y,delimiter:r}=t;if(y.dtype!=="string")throw new Error("Input must be of datatype string");if(y.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${y.shape}`);if(r.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${r.shape}`);const g=s.data.get(y.dataId).values,n=s.data.get(r.dataId).values[0],[a,p,h]=QM(g,n,o),u=p.length;return[s.makeTensorInfo([u,2],"int32",a),s.makeTensorInfo([u],"string",p),s.makeTensorInfo([2],"int32",new Int32Array(h))]}const Bot={kernelName:zS,backendName:"cpu",kernelFunc:$ot};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kot(e){const{inputs:t,backend:s,attrs:i}=e,{numBuckets:o}=i,{input:y}=t;if(y.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const r=s.data.get(y.dataId).values,g=qM(r,o);return s.makeTensorInfo(y.shape,"int32",g)}const zot={kernelName:VS,backendName:"cpu",kernelFunc:kot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vot=Se(vf,e=>Math.tan(e)),Got={kernelName:vf,backendName:"cpu",kernelFunc:Vot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uot=Se(gf,e=>Math.tanh(e)),Wot={kernelName:gf,backendName:"cpu",kernelFunc:Uot};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hot(e){const{inputs:t,backend:s}=e,{tensor:i,indices:o,updates:y}=t,{sliceRank:r,numUpdates:g,sliceSize:n,strides:a,outputSize:p}=qo(y,o,i.shape),h=!1,u=s.bufferSync(o),d=s.bufferSync(y),l=s.bufferSync(i),c=yo(u,d,i.shape,p,n,g,r,a,l,h);return s.makeTensorInfo(i.shape,c.dtype,c.values)}const Xot={kernelName:NS,backendName:"cpu",kernelFunc:Hot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yot(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{reps:y}=i;$t(o,"tile");const r=t4(s.bufferSync(o),y);return s.makeTensorInfo(r.shape,r.dtype,r.values)}const Kot={kernelName:xf,backendName:"cpu",kernelFunc:Yot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jot(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{k:y,sorted:r}=i;$t(o,"topk");const g=s.data.get(o.dataId).values,[n,a]=n4(g,o.shape,o.dtype,y,r);return[s.makeTensorInfo(n.shape,n.dtype,n.values),s.makeTensorInfo(a.shape,a.dtype,a.values)]}const Zot={kernelName:GS,backendName:"cpu",kernelFunc:jot};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jot(e){const{inputs:t,attrs:s,backend:i}=e,{image:o,transforms:y}=t,{interpolation:r,fillMode:g,fillValue:n,outputShape:a}=s,[p,h,u,d]=o.shape,[l,c]=a??[h,u],m=[p,l,c,d],f=Vt(o.shape),v=f[0],S=f[1],x=f[2],T=Vt(m),C=T[0],w=T[1],b=T[2],E=Ln(o.dtype,vt(m));E.fill(n);const A=i.data.get(o.dataId).values,I=i.data.get(y.dataId).values;for(let N=0;N<p;++N){const F=y.shape[0]===1?I:I.subarray(N*8,N*8+8);for(let P=0;P<l;++P)for(let D=0;D<c;++D)for(let M=0;M<d;++M){let L;const k=F[6]*D+F[7]*P+1;if(k===0)continue;const V=(F[0]*D+F[1]*P+F[2])/k,W=(F[3]*D+F[4]*P+F[5])/k,K=JA(V,u,g),B=JA(W,h,g);switch(r){case"nearest":L=nlt(A,h,u,v,S,x,N,B,K,M,n);break;case"bilinear":L=slt(A,h,u,v,S,x,N,B,K,M,n);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${r}`)}const G=N*C+P*w+D*b+M;E[G]=L}return i.makeTensorInfo(m,o.dtype,E)}return{dataId:i.write(E,m,o.dtype),shape:o.shape,dtype:o.dtype}}const Qot={kernelName:US,backendName:"cpu",kernelFunc:Jot};function JA(e,t,s){switch(s){case"reflect":return qot(e,t);case"wrap":return _ot(e,t);case"nearest":return elt(e,t);case"constant":default:return tlt(e)}}function qot(e,t){let s=e;if(s<0)if(t<=1)s=0;else{const i=2*t;s<i&&(s=i*Math.trunc(-s/i)+s),s=s<-t?s+i:-s-1}else if(s>t-1)if(t<=1)s=0;else{const i=2*t;s-=i*Math.trunc(s/i),s>=t&&(s=i-s-1)}return Po(0,s,t-1)}function _ot(e,t){let s=e;if(s<0)if(t<=1)s=0;else{const i=t-1;s+=t*(Math.trunc(-s/i)+1)}else if(s>t-1)if(t<=1)s=0;else{const i=t-1;s-=t*Math.trunc(s/i)}return Po(0,s,t-1)}function tlt(e,t){return e}function elt(e,t){return Po(0,e,t-1)}function gh(e,t,s,i,o,y,r,g,n,a,p){const h=r*i+g*o+n*y+a;return 0<=g&&g<t&&0<=n&&n<s?e[h]:p}function nlt(e,t,s,i,o,y,r,g,n,a,p){const h=Math.round(g),u=Math.round(n);return gh(e,t,s,i,o,y,r,h,u,a,p)}function slt(e,t,s,i,o,y,r,g,n,a,p){const h=Math.floor(g),u=Math.floor(n),d=h+1,l=u+1,c=(l-n)*gh(e,t,s,i,o,y,r,h,u,a,p)+(n-u)*gh(e,t,s,i,o,y,r,h,l,a,p),m=(l-n)*gh(e,t,s,i,o,y,r,d,u,a,p)+(n-u)*gh(e,t,s,i,o,y,r,d,l,a,p);return(d-g)*c+(g-h)*m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ilt(e){const{inputs:t,attrs:s,backend:i}=e,{axis:o}=s,{x:y}=t;$t(y,"unique");const r=i.data.get(y.dataId).values,{outputValues:g,outputShape:n,indices:a}=s4(r,o,y.shape,y.dtype);return[i.makeTensorInfo(n,y.dtype,g),i.makeTensorInfo([a.length],"int32",a)]}const rlt={kernelName:WS,backendName:"cpu",kernelFunc:ilt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function alt(e){const{inputs:t,backend:s,attrs:i}=e,{value:o}=t;let{axis:y}=i;y<0&&(y+=o.shape.length);const r=o.shape.length,g=o.shape[y],n=new Array(r-1);let a=0;for(let d=0;d<r;d++)d!==y&&(n[a++]=o.shape[d]);const p=new Array(r).fill(0),h=o.shape.slice();h[y]=1;const u=new Array(g);for(let d=0;d<u.length;d++){p[y]=d;const l=Go({inputs:{x:o},backend:s,attrs:{begin:p,size:h}});u[d]=Re({inputs:{x:l},backend:s,attrs:{shape:n}}),s.disposeIntermediateTensorInfo(l)}return u}const olt={kernelName:Jv,backendName:"cpu",kernelFunc:alt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function llt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,segmentIds:y}=t,{numSegments:r}=i;$t(o,"unsortedSegmentSum");const g=o.shape.length,n=y.shape.length,a=[],p=[],h=g-n;let u=y;for(let l=0;l<h;++l){const c=um({inputs:{input:u},backend:s,attrs:{dim:l+1}});u=c,p.push(c)}for(let l=0;l<r;++l){const c=Ya(l,"int32"),m=s.makeTensorInfo([],"int32",c),f=xM({inputs:{a:m,b:u},backend:s}),v=Ga({inputs:{x:f},backend:s,attrs:{dtype:"float32"}}),S=$g({inputs:{a:v,b:o},backend:s}),x=zf({inputs:{x:S},backend:s,attrs:{axis:0,keepDims:!1}});a.push(x),p.push(m),p.push(f),p.push(v),p.push(S),p.push(x)}const d=x4({inputs:a,backend:s,attrs:{axis:0}});return p.forEach(l=>s.disposeIntermediateTensorInfo(l)),d}const ult={kernelName:Qv,backendName:"cpu",kernelFunc:llt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hlt=[ist,ket,ast,lst,Het,hst,fst,pst,vst,xst,Sst,Cst,Est,Ist,Nst,Ost,Lst,$st,kst,nst,Vst,Ust,Hst,Yet,Yst,Uet,jet,jst,zet,Jst,qst,_st,eit,sit,rit,oit,uit,cit,dit,mit,git,yit,Tit,wit,Eit,Ait,Rit,Pit,Fit,Oit,Dit,Mit,kit,Znt,Vit,Zet,jit,Jet,Zit,qet,ert,nrt,irt,tnt,nnt,art,lrt,hrt,frt,int,ant,Vet,prt,Qst,vrt,xrt,Srt,Jnt,lnt,hnt,Crt,fnt,Ert,Irt,Nrt,Ort,Lrt,$rt,Brt,pnt,zrt,Grt,Wrt,Xrt,Krt,Zrt,Qrt,vnt,_rt,nat,rat,xnt,Snt,lat,cat,pat,Cnt,vat,xat,yat,y4,wat,qnt,bnt,bat,Iat,Nat,Fat,Get,m1,Dat,_nt,tst,est,Mat,Bat,zat,Gat,Wat,Hat,Yat,Dnt,jat,_at,eot,rot,Mnt,oot,uot,cot,$nt,sat,pot,vot,xot,Sot,Cot,Eot,Aot,Rot,znt,Not,Gnt,Wnt,Fot,Dot,Mot,Bot,zot,Knt,$it,Got,Wot,Xot,Kot,Zot,Qot,wnt,rlt,olt,ult,gat];for(const e of hlt)f3(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fo={},Ad={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function clt(e,t){fo[e]=t}function ji(e,t){if(!(e in fo)||t!=null){const i=dlt(e,t);if(i!==null)fo[e]=i;else return console.log("Could not get context for WebGL version",e),null}const s=fo[e];return s==null||s.isContextLost()?(delete fo[e],ji(e)):(s.disable(s.DEPTH_TEST),s.disable(s.STENCIL_TEST),s.disable(s.BLEND),s.disable(s.DITHER),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SAMPLE_COVERAGE),s.enable(s.SCISSOR_TEST),s.enable(s.CULL_FACE),s.cullFace(s.BACK),fo[e])}function flt(e){if(!pt().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function dlt(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const s=t??flt(e);return s.addEventListener("webglcontextlost",i=>{i.preventDefault(),delete fo[e]},!1),pt().getBool("SOFTWARE_WEBGL_ENABLED")&&(Ad.failIfMajorPerformanceCaveat=!1),e===1?s.getContext("webgl",Ad)||s.getContext("experimental-webgl",Ad):s.getContext("webgl2",Ad)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var hc;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(hc||(hc={}));var Ws;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(Ws||(Ws={}));var On;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(On||(On={}));function Vf(e,t){return[t,e]}function plt(e,t){return e*t}function Id(e){const t=vt(e),s=Math.ceil(t/4);return wy(s)}function Lu(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function mlt(e,t){const[s,i]=Lu(e,t);return s*i*4}function HC(e,t){const s=e;let i,o,y,r,g,n,a,p,h,u;return pt().getNumber("WEBGL_VERSION")===2?(i=s.R32F,o=s.R16F,y=s.RGBA16F,r=s.RGBA32F,g=s.RED,a=4,p=1,h=s.HALF_FLOAT,u=s.FLOAT,n=s.RGBA8):(i=e.RGBA,o=e.RGBA,y=e.RGBA,r=s.RGBA,g=e.RGBA,a=4,p=4,h=t!=null?t.HALF_FLOAT_OES:null,u=e.FLOAT,n=e.RGBA),{internalFormatFloat:i,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:y,internalFormatPackedFloat:r,textureFormatFloat:g,downloadTextureFormat:n,downloadUnpackNumChannels:a,defaultNumChannels:p,textureTypeHalfFloat:h,textureTypeFloat:u}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ot(e,t){const s=t();return pt().getBool("DEBUG")&&vlt(e),s}function vlt(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+Slt(e,t))}const glt=596e-10,xlt=65504;function ylt(e){return!!(pt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||glt<Math.abs(e)&&Math.abs(e)<xlt)}function Slt(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function Rd(e,t){return ea(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function Tlt(e,t){const s=ea(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ot(e,()=>e.shaderSource(s,t)),Ot(e,()=>e.compileShader(s)),e.getShaderParameter(s,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(s)),new Error("Failed to compile vertex shader.");return s}function Clt(e,t){const s=ea(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ot(e,()=>e.shaderSource(s,t)),Ot(e,()=>e.compileShader(s)),pt().get("ENGINE_COMPILE_ONLY"))return s;if(e.getShaderParameter(s,e.COMPILE_STATUS)===!1)throw S4(t,e.getShaderInfoLog(s)),new Error("Failed to compile fragment shader.");return s}const wlt=/ERROR: [0-9]+:([0-9]+):/g;function S4(e,t){const s=wlt.exec(t);if(s==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}const i=+s[1],o=e.split(`
`),y=o.length.toString().length+2,r=o.map((h,u)=>Vl((u+1).toString(),y)+h);let g=0;for(let h=0;h<r.length;h++)g=Math.max(r[h].length,g);const n=r.slice(0,i-1),a=r.slice(i-1,i),p=r.slice(i);console.log(n.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${Vl(a[0],g)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join(`
`))}function Elt(e){return ea(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function blt(e,t){if(Ot(e,()=>e.linkProgram(t)),!pt().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function q0(e,t){if(Ot(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Alt(e,t){const s=ea(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Ot(e,()=>e.bindBuffer(e.ARRAY_BUFFER,s)),Ot(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),s}function Ilt(e,t){const s=ea(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Ot(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,s)),Ot(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),s}function Rlt(e){return ea(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function Nlt(e,t){const s=pt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const i=`[${e}x${t}]`;throw new Error("Requested texture size "+i+" is invalid.")}if(e>s||t>s){const i=`[${e}x${t}]`,o=`[${s}x${s}]`;throw new Error("Requested texture size "+i+" greater than WebGL maximum on this browser / GPU "+o+".")}}function Plt(e){return ea(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function QA(e,t,s,i,o,y,r){const g=e.getAttribLocation(t,s);return g===-1?!1:(Ot(e,()=>e.bindBuffer(e.ARRAY_BUFFER,i)),Ot(e,()=>e.vertexAttribPointer(g,o,e.FLOAT,!1,y,r)),Ot(e,()=>e.enableVertexAttribArray(g)),!0)}function Flt(e,t,s){$lt(e,s),Ot(e,()=>e.activeTexture(e.TEXTURE0+s)),Ot(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function Olt(e,t,s){return ea(e,()=>e.getUniformLocation(t,s),'uniform "'+s+'" not present in program.')}function Dlt(e,t,s){return e.getUniformLocation(t,s)}function Llt(e,t,s,i){Ot(e,()=>Flt(e,t,i)),Ot(e,()=>e.uniform1i(s,i))}function _0(e,t,s){Ot(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,s)),Ot(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function qA(e,t){Ot(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),Ot(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function Nd(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Mlt(e,t))}function Mlt(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function ea(e,t,s){const i=Ot(e,()=>t());if(i==null)throw new Error(s);return i}function $lt(e,t){const s=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,i=t+e.TEXTURE0;if(i<e.TEXTURE0||i>s){const o=`[gl.TEXTURE0, gl.TEXTURE${s}]`;throw new Error(`textureUnit must be in ${o}.`)}}function pu(e,t=2){return vt(e.slice(0,e.length-t))}function mu(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Pd(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[pu(e),...mu(e)]),t}function Blt(e,t=!1){let s=pt().getNumber("WEBGL_MAX_TEXTURE_SIZE"),i=pt().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");i===1/0&&pt().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(i=s/2),t&&(s=s*2,i=i*2,e=e.map((g,n)=>n>=e.length-2?k2(e[n]):e[n]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=Xa(e).newShape);let o=vt(e),y=null;e.length<=1&&o<=s?y=[1,o]:e.length===2&&e[0]<=s&&e[1]<=s?y=e:e.length===3&&e[0]*e[1]<=s&&e[2]<=s?y=[e[0]*e[1],e[2]]:e.length===3&&e[0]<=s&&e[1]*e[2]<=s?y=[e[0],e[1]*e[2]]:e.length===4&&e[0]*e[1]*e[2]<=s&&e[3]<=s?y=[e[0]*e[1]*e[2],e[3]]:e.length===4&&e[0]<=s&&e[1]*e[2]*e[3]<=s&&(y=[e[0],e[1]*e[2]*e[3]]);const r=y!=null&&Math.max(...y)>i&&Math.min(...y)<=(t?2:1)&&Math.min(...y)>0;if(y==null||r)if(t){const g=pu(e);let n=2,a=2;e.length&&([n,a]=mu(e)),o=g*(n/2)*(a/2),y=wy(o).map(p=>p*2)}else y=wy(o);return y}function Fd(e){return e%2===0}function cm(e,t){if(e=e.slice(-2),t=t.slice(-2),oe(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){const s=e[e.length-1],i=t[t.length-1];if(s===i||Fd(s)&&Fd(i)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Fd(e[0])&&Fd(t[0])}let tx,ex;function klt(e){if(tx==null){const t=ji(e);tx=t.getParameter(t.MAX_TEXTURE_SIZE)}return tx}function zlt(e){if(ex==null){const t=ji(e);ex=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ex)}function Vlt(e){if(e===0)return 0;let t;const s=ji(e);return gi(s,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:gi(s,"EXT_disjoint_timer_query")?t=1:t=0,t}function gi(e,t){return e.getExtension(t)!=null}function _A(e){try{if(ji(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Glt(e){if(e===0)return!1;const t=ji(e);if(e===1){if(!gi(t,"OES_texture_float"))return!1}else if(!gi(t,"EXT_color_buffer_float"))return!1;return g1(t)}function Ult(e){if(e===0)return!1;const t=ji(e);if(e===1){if(!gi(t,"OES_texture_float")||!gi(t,"WEBGL_color_buffer_float"))return!1}else{if(gi(t,"EXT_color_buffer_float"))return g1(t);const i="EXT_color_buffer_half_float";if(gi(t,i)){const o=t.getExtension(i);return Wlt(t,o)}return!1}return g1(t)}function g1(e){const t=HC(e),s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const i=1,o=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,i,o,0,t.textureFormatFloat,t.textureTypeFloat,null);const y=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,y),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0);const r=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(s),e.deleteFramebuffer(y),r}function Wlt(e,t){const s=HC(e,t),i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);const o=1,y=1;e.texImage2D(e.TEXTURE_2D,0,s.internalFormatHalfFloat,o,y,0,s.textureFormatFloat,s.textureTypeHalfFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0);const g=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(i),e.deleteFramebuffer(r),g}function Hlt(e){return e!==2?!1:ji(e).fenceSync!=null}function Gf(e,t){Array.isArray(e)||(e=[e]),e.forEach(s=>{s!=null&&q(s.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bt=pt();Bt.registerFlag("HAS_WEBGL",()=>Bt.getNumber("WEBGL_VERSION")>0);Bt.registerFlag("WEBGL_VERSION",()=>_A(2)?2:_A(1)?1:0);Bt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Bt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Bt.get("WEBGL_VERSION")===2);Bt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Bt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Bt.registerFlag("WEBGL_PACK",()=>Bt.getBool("HAS_WEBGL"));Bt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Bt.getBool("WEBGL_PACK"));Bt.registerFlag("WEBGL_PACK_CLIP",()=>Bt.getBool("WEBGL_PACK"));Bt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Bt.getBool("WEBGL_PACK"));Bt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Bt.getBool("WEBGL_PACK"));Bt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Bt.getBool("WEBGL_PACK"));Bt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Bt.getBool("WEBGL_PACK"));Bt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Bt.getBool("WEBGL_PACK"));Bt.registerFlag("WEBGL_PACK_REDUCE",()=>Bt.getBool("WEBGL_PACK"));Bt.registerFlag("WEBGL_LAZILY_UNPACK",()=>Bt.getBool("WEBGL_PACK"));Bt.registerFlag("WEBGL_CONV_IM2COL",()=>Bt.getBool("WEBGL_PACK"));Bt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>klt(Bt.getNumber("WEBGL_VERSION")));Bt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>zlt(Bt.getNumber("WEBGL_VERSION")));Bt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=Bt.getNumber("WEBGL_VERSION");return e===0?0:Vlt(e)});Bt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Bt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!N3());Bt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Glt(Bt.getNumber("WEBGL_VERSION")));Bt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Bt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Bt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Bt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Ult(Bt.getNumber("WEBGL_VERSION")));Bt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Hlt(Bt.getNumber("WEBGL_VERSION")));Bt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Bt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Bt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});Bt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>N3()?1:-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});Bt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Bt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Bt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Bt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Bt.registerFlag("WEBGL_EXP_CONV",()=>!1);Bt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Bt.getBool("IS_TEST"));Bt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Bt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Bt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Bt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ls(){let e,t,s,i,o,y,r,g,n,a;return pt().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",s="out",i="in",o="texture",y="outputColor",r="out vec4 outputColor;",g=pt().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",n="",a=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",s="varying",i="varying",o="texture2D",y="gl_FragColor",r="",g=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,n=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,a=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:s,varyingFs:i,texture2D:o,output:y,defineOutput:r,defineSpecialNaN:g,defineSpecialInf:n,defineRound:a}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function el(e,t,s="index"){const i=Vt(t);return i.map((o,y)=>{const r=`int ${e[y]} = ${s} / ${o}`,g=y===i.length-1?`int ${e[y+1]} = ${s} - ${e[y]} * ${o}`:`index -= ${e[y]} * ${o}`;return`${r}; ${g};`}).join("")}function Bg(e,t,s="index"){const i=Vt(t);return i.map((o,y)=>{const r=`int ${e[y]} = ${s} / outShapeStrides[${y}]`,g=y===i.length-1?`int ${e[y+1]} = ${s} - ${e[y]} * outShapeStrides[${y}]`:`index -= ${e[y]} * outShapeStrides[${y}]`;return`${r}; ${g};`}).join("")}function Xlt(e,t){const s=e.length,i=e.map(y=>`${t}[${y}]`),o=new Array(s-1);o[s-2]=i[s-1];for(let y=s-3;y>=0;--y)o[y]=`(${o[y+1]} * ${i[y+1]})`;return o}function Ylt(e,t,s="index"){const i=e.map((y,r)=>r),o=Xlt(i,t);return o.map((y,r)=>{const g=`int ${e[r]} = ${s} / ${o[r]}`,n=r===o.length-1?`int ${e[r+1]} = ${s} - ${e[r]} * ${o[r]}`:`index -= ${e[r]} * ${o[r]}`;return`${g}; ${n};`}).join("")}function XC(e){const t=Vt(e).map(s=>s.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function YC(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const T4=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:C4}=uJ;function Klt(e,t,s){const i=[];if(e.forEach(d=>{const l=vt(d.shapeInfo.logicalShape);if(d.shapeInfo.isUniform?i.push(`uniform float ${d.name}${l>1?`[${l}]`:""};`):(i.push(`uniform sampler2D ${d.name};`),i.push(`uniform int offset${d.name};`)),s.enableShapeUniforms){const{uniformShape:c}=KC(s.packedInputs,d.shapeInfo.logicalShape,d.shapeInfo.texShape);switch(c.length){case 1:i.push(`uniform int ${d.name}Shape;`);break;case 2:i.push(`uniform ivec2 ${d.name}Shape;`);break;case 3:i.push(`uniform ivec3 ${d.name}Shape;`);break;case 4:i.push(`uniform ivec4 ${d.name}Shape;`);break}i.push(`uniform ivec2 ${d.name}TexShape;`)}}),s.enableShapeUniforms){switch(t.logicalShape.length){case 1:i.push("uniform int outShape;");break;case 2:i.push("uniform ivec2 outShape;"),i.push("uniform int outShapeStrides;");break;case 3:i.push("uniform ivec3 outShape;"),i.push("uniform ivec2 outShapeStrides;");break;case 4:i.push("uniform ivec4 outShape;"),i.push("uniform ivec3 outShapeStrides;");break}i.push("uniform ivec2 outTexShape;")}s.customUniforms&&s.customUniforms.forEach(d=>{i.push(`uniform ${d.type} ${d.name}${d.arrayIndex?`[${d.arrayIndex}]`:""};`)});const o=i.join(`
`),y=e.map(d=>jlt(d,t,s.packedInputs,s.enableShapeUniforms)).join(`
`),r=t.texShape,g=ls(),n=Qlt(g);let a,p,h=tut(g);return t.isPacked?(a=Zlt(t.logicalShape,r,s.enableShapeUniforms),p=_lt(g)):(a=Jlt(t.logicalShape,r,s.enableShapeUniforms),p=qlt(g)),s.packedInputs&&(h+=iut),[h,n,p,o,a,y,s.userCode].join(`
`)}function Mu(e,t=!1){const s=e.shapeInfo.logicalShape;switch(s.length){case 0:return vut(e,t);case 1:return xut(e,t);case 2:return Sut(e,t);case 3:return Cut(e,t);case 4:return Eut(e,t);case 5:return but(e);case 6:return Aut(e);default:throw new Error(`${s.length}-D input sampling is not yet supported`)}}function w4(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return mut(e);case 1:return gut(e,t);case 2:return yut(e,t);case 3:return Tut(e,t);default:return wut(e,t)}}function jlt(e,t,s=!1,i){let o="";s?o+=w4(e,i):o+=Mu(e,i);const y=e.shapeInfo.logicalShape,r=t.logicalShape;return y.length<=r.length&&(s?o+=Iut(e,t):o+=Rut(e,t)),o}function Zlt(e,t,s){switch(e.length){case 0:return E4();case 1:return rut(e,t,s);case 2:return dut(e,t,s);case 3:return out(e,t,s);default:return uut(e,t,s)}}function Jlt(e,t,s){switch(e.length){case 0:return E4();case 1:return aut(e,t,s);case 2:return put(e,t,s);case 3:return lut(e,t,s);case 4:return hut(e,t,s);case 5:return cut(e,t);case 6:return fut(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function Qlt(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function qlt(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function _lt(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function tut(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${eut}
    ${nut}
    ${sut}
  `}const eut=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,nut=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,sut=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,iut=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function E4(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function rut(e,t,s){const i=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return i[0]===1?s?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${i[1]}.0);
      }
    `:i[1]===1?s?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${i[0]}.0);
      }
    `:s?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      return 2 * (resTexRC.x * ${i[1]} + resTexRC.y);
    }
  `}function aut(e,t,s){return t[0]===1?s?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?s?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:s?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function out(e,t,s){if(s)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const i=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),y=o*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;

      int b = index / ${y};
      index -= b * ${y};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function lut(e,t,s){if(s)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Bg(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;const i=el(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${i}
      return ivec3(r, c, d);
    }
  `}function uut(e,t,s){if(s)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const i=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),y=o*Math.ceil(e[e.length-2]/2);let r=y,g="",n="b, r, c";for(let a=2;a<e.length-1;a++)r*=e[e.length-a-1],g=`
      int b${a} = index / ${r};
      index -= b${a} * ${r};
    `+g,n=`b${a}, `+n;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;

      ${g}

      int b = index / ${y};
      index -= b * ${y};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${e.length}(${n});
    }
  `}function hut(e,t,s){if(s)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Bg(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;const i=el(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${i}
      return ivec4(r, c, d, d2);
    }
  `}function cut(e,t){const s=el(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${s}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function fut(e,t){const s=el(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${s}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function dut(e,t,s){const i=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(oe(e,t))return s?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${i[0]}, ${i[1]}));
      }
    `;const o=Math.ceil(e[1]/2);return s?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));

      int index = resTexRC.x * ${i[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function put(e,t,s){return oe(e,t)?s?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?s?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?s?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:s?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function nl(e){return`offset${e}`}function mut(e){const t=e.name,s="get"+t.charAt(0).toUpperCase()+t.slice(1),i=ls();return`
    vec4 ${s}() {
      return ${i.texture2D}(${t}, halfCR);
    }
  `}function vut(e,t){const s=e.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1);if(e.shapeInfo.isUniform)return`float ${i}() {return ${s};}`;const[o,y]=e.shapeInfo.texShape;if(o===1&&y===1)return`
      float ${i}() {
        return sampleTexture(${s}, halfCR);
      }
    `;const r=nl(s);if(t)return`
    float ${i}() {
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], ${r});
      return sampleTexture(${s}, uv);
    }
  `;const[g,n]=e.shapeInfo.texShape;return`
    float ${i}() {
      vec2 uv = uvFromFlat(${g}, ${n}, ${r});
      return sampleTexture(${s}, uv);
    }
  `}function gut(e,t){const s=e.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=e.shapeInfo.texShape,y=ls();if(t)return`
    vec4 ${i}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${y.texture2D}(${s}, uv);
    }
  `;const r=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${i}(int index) {
      vec2 uv = packedUVfrom1D(
        ${r[0]}, ${r[1]}, index);
      return ${y.texture2D}(${s}, uv);
    }
  `}function xut(e,t){const s=e.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1);if(e.shapeInfo.isUniform)return`
      float ${i}(int index) {
        ${$u(e)}
      }
    `;const o=e.shapeInfo.texShape,y=o[0],r=o[1];if(r===1&&y===1)return`
      float ${i}(int index) {
        return sampleTexture(${s}, halfCR);
      }
    `;const g=nl(s);return r===1?t?`
      float ${i}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${g}) + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${i}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${g}) + 0.5) / ${y}.0);
        return sampleTexture(${s}, uv);
      }
    `:y===1?t?`
      float ${i}(int index) {
        vec2 uv = vec2((float(index + ${g}) + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${i}(int index) {
        vec2 uv = vec2((float(index + ${g}) + 0.5) / ${r}.0, 0.5);
        return sampleTexture(${s}, uv);
      }
    `:t?`
    float ${i}(int index) {
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${g});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${i}(int index) {
      vec2 uv = uvFromFlat(${y}, ${r}, index + ${g});
      return sampleTexture(${s}, uv);
    }
  `}function yut(e,t){const s=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),y=e.shapeInfo.texShape,r=y[0],g=y[1],n=ls();if(y!=null&&oe(s,y))return t?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);

        return ${n.texture2D}(${i}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${r}.0);

        return ${n.texture2D}(${i}, uv);
      }
    `;if(t)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${i}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${n.texture2D}(${i}, uv);
    }
  `;const a=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)],p=Math.ceil(s[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${p}, ${a[0]}, ${a[1]}, row, col);
      return ${n.texture2D}(${i}, uv);
    }
  `}function Sut(e,t){const s=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),y=e.shapeInfo.texShape;if(y!=null&&oe(s,y)){if(t)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `;const u=y[0],d=y[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${d}.0, ${u}.0);
      return sampleTexture(${i}, uv);
    }
  `}const{newShape:r,keptDims:g}=Xa(s),n=r;if(n.length<s.length){const u=Bu(e,n),d=["row","col"];return`
      ${Mu(u,t)}
      float ${o}(int row, int col) {
        return ${o}(${ku(d,g)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${s[1]}, 1)));
        ${$u(e)}
      }
    `;const a=y[0],p=y[1],h=nl(i);return p===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${i}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${i}TexShape[0]));
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${s[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${a}.0);
      return sampleTexture(${i}, uv);
    }
  `:a===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${i}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${i}TexShape[1]), 0.5);
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${s[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${p}.0, 0.5);
      return sampleTexture(${i}, uv);
    }
  `:t?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);
        return sampleTexture(${i}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${s[1]} + col + ${h};
    vec2 uv = uvFromFlat(${a}, ${p}, index);
    return sampleTexture(${i}, uv);
  }
`}function Tut(e,t){const s=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),y=e.shapeInfo.texShape,r=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)];if(s[0]===1){const u=s.slice(1),d=[1,2],l=Bu(e,u),c=["b","row","col"];return`
        ${w4(l,t)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${ku(c,d)});
        }
      `}const g=ls();if(t)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${i}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${i}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${g.texture2D}(${i}, uv);
    }
  `;const n=r[0],a=r[1],p=Math.ceil(s[2]/2),h=p*Math.ceil(s[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${n}, ${a}, ${h}, ${p}, b, row, col);
      return ${g.texture2D}(${i}, uv);
    }
  `}function Cut(e,t){const s=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),y=s[1]*s[2],r=s[2],{newShape:g,keptDims:n}=Xa(s),a=g;if(a.length<s.length){const c=Bu(e,a),m=["row","col","depth"];return`
        ${Mu(c,t)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${ku(m,n)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${y}, ${r}, 1)));
        ${$u(e)}
      }
    `;const p=e.shapeInfo.texShape,h=p[0],u=p[1],d=e.shapeInfo.flatOffset;if(u===y&&d==null)return t?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${i}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${r}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${u}.0, ${h}.0);
          return sampleTexture(${i}, uv);
        }
      `;if(u===r&&d==null)return t?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${i}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${s[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}.0, ${h}.0);
      return sampleTexture(${i}, uv);
    }
  `;const l=nl(i);return t?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${i}Shape[1] * ${i}Shape[2];
      int stride1 = ${i}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${l};
      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);
      return sampleTexture(${i}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${y} + col * ${r} + depth + ${l};
        vec2 uv = uvFromFlat(${h}, ${u}, index);
        return sampleTexture(${i}, uv);
      }
  `}function wut(e,t){const s=e.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=ls();if(t)return`
    vec4 ${i}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${s}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${s}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${s}, uv);
    }
  `;const y=e.shapeInfo.logicalShape,r=y.length,g=e.shapeInfo.texShape,n=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],a=n[0],p=n[1],h=Math.ceil(y[r-1]/2);let u=h*Math.ceil(y[r-2]/2),d="int b, int row, int col",l=`b * ${u} + (row / 2) * ${h} + (col / 2)`;for(let c=2;c<r-1;c++)d=`int b${c}, `+d,u*=y[r-c-1],l=`b${c} * ${u} + `+l;return`
    vec4 ${i}(${d}) {
      int index = ${l};
      int texR = index / ${p};
      int texC = index - texR * ${p};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}, ${a});
      return ${o.texture2D}(${s}, uv);
    }
  `}function Eut(e,t){const s=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),y=s[3],r=s[2]*y,g=s[1]*r,{newShape:n,keptDims:a}=Xa(s);if(n.length<s.length){const v=Bu(e,n),S=["row","col","depth","depth2"];return`
      ${Mu(v,t)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${ku(S,a)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${g}, ${r}, ${y}, 1)));
        ${$u(e)}
      }
    `;const p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,u=h[0],d=h[1],l=`int stride2 = ${i}Shape[3];`,c=`int stride1 = ${i}Shape[2] * stride2;`,m=`int stride0 = ${i}Shape[1] * stride1;`;if(d===g&&p==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${l}
        ${c}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${r}, ${y}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${u}.0);
        return sampleTexture(${i}, uv);
      }
    `;if(d===y&&p==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${i}Shape[1] * ${i}Shape[2], ${i}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s[1]*s[2]}, ${s[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${u}.0);
        return sampleTexture(${i}, uv);
      }
    `;const f=nl(i);return t?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${l}
      ${c}
      ${m}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index + ${f});
      return sampleTexture(${i}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${g} + col * ${r} +
          depth * ${y} + depth2;
      vec2 uv = uvFromFlat(${u}, ${d}, index + ${f});
      return sampleTexture(${i}, uv);
    }
  `}function but(e){const t=e.shapeInfo.logicalShape,s=e.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=t[4],y=t[3]*o,r=t[2]*y,g=t[1]*r,{newShape:n,keptDims:a}=Xa(t);if(n.length<t.length){const c=Bu(e,n),m=["row","col","depth","depth2","depth3"];return`
      ${Mu(c)}
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        return ${i}(${ku(m,a)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${g}, ${r}, ${y}, ${o})) +
          depth3;
        ${$u(e)}
      }
    `;const p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,u=h[0],d=h[1];if(d===g&&p==null)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${r}, ${y}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${u}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(d===o&&p==null)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${u}.0);
        return sampleTexture(${s}, uv);
      }
    `;const l=nl(s);return`
    float ${i}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${g} + col * ${r} + depth * ${y} +
          depth2 * ${o} + depth3 + ${l};
      vec2 uv = uvFromFlat(${u}, ${d}, index);
      return sampleTexture(${s}, uv);
    }
  `}function Aut(e){const t=e.shapeInfo.logicalShape,s=e.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),{newShape:o,keptDims:y}=Xa(t);if(o.length<t.length){const m=Bu(e,o),f=["row","col","depth","depth2","depth3","depth4"];return`
      ${Mu(m)}
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${i}(${ku(f,y)});
      }
    `}const r=t[5],g=t[4]*r,n=t[3]*g,a=t[2]*n,p=t[1]*a;if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${p}, ${a}, ${n}, ${g})) +
          dot(
            vec2(depth3, depth4),
            vec2(${r}, 1)));
        ${$u(e)}
      }
    `;const h=e.shapeInfo.flatOffset,u=e.shapeInfo.texShape,d=u[0],l=u[1];if(l===p&&h==null)return`
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${a}, ${n}, ${g}, ${r})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${l}.0, ${d}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(l===r&&h==null)return`
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${l}.0, ${d}.0);
        return sampleTexture(${s}, uv);
      }
    `;const c=nl(s);return`
    float ${i}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${p} + col * ${a} + depth * ${n} +
          depth2 * ${g} + depth3 * ${r} + depth4 + ${c};
      vec2 uv = uvFromFlat(${d}, ${l}, index);
      return sampleTexture(${s}, uv);
    }
  `}function $u(e){const t=e.name,s=vt(e.shapeInfo.logicalShape);return s<2?`return ${t};`:`
    for (int i = 0; i < ${s}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function Iut(e,t){const s=e.name,i=s.charAt(0).toUpperCase()+s.slice(1),o="get"+i+"AtOutCoords",y=e.shapeInfo.logicalShape.length,r=t.logicalShape.length,g=C4(e.shapeInfo.logicalShape,t.logicalShape),n=we(r),a=r-y;let p;const h=["x","y","z","w","u","v"];y===0?p="":r<2&&g.length>=1?p="coords = 0;":p=g.map(v=>`coords.${h[v+a]} = 0;`).join(`
`);let u="";r<2&&y>0?u="coords":u=e.shapeInfo.logicalShape.map((v,S)=>`coords.${h[S+a]}`).join(", ");let d="return outputValue;";const c=vt(e.shapeInfo.logicalShape)===1,f=vt(t.logicalShape)===1;if(y===1&&!c&&!f)d=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(c&&!f)r===1?d=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:d=`
        return vec4(outputValue.x);
      `;else if(g.length){const v=y-2,S=y-1;g.indexOf(v)>-1&&g.indexOf(S)>-1?d="return vec4(outputValue.x);":g.indexOf(v)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":g.indexOf(S)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${n} coords = getOutputCoords();
      ${p}
      vec4 outputValue = get${i}(${u});
      ${d}
    }
  `}function Rut(e,t){const s=e.name,i=s.charAt(0).toUpperCase()+s.slice(1),o="get"+i+"AtOutCoords",y=t.texShape,r=e.shapeInfo.texShape,g=e.shapeInfo.logicalShape.length,n=t.logicalShape.length;if(!e.shapeInfo.isUniform&&g===n&&e.shapeInfo.flatOffset==null&&oe(r,y))return`
      float ${o}() {
        return sampleTexture(${s}, resultUV);
      }
    `;const a=we(n),p=C4(e.shapeInfo.logicalShape,t.logicalShape),h=n-g;let u;const d=["x","y","z","w","u","v"];g===0?u="":n<2&&p.length>=1?u="coords = 0;":u=p.map(c=>`coords.${d[c+h]} = 0;`).join(`
`);let l="";return n<2&&g>0?l="coords":l=e.shapeInfo.logicalShape.map((c,m)=>`coords.${d[m+h]}`).join(", "),`
    float ${o}() {
      ${a} coords = getOutputCoords();
      ${u}
      return get${i}(${l});
    }
  `}function we(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function KC(e,t,s){const{newShape:i,keptDims:o}=Xa(t),y=t.length,r=e&&y===3&&t[0]===1,g=r?t.slice(1):i,n=!e&&y>1&&!oe(t,s)&&i.length<y||r;return{useSqueezeShape:n,uniformShape:n?g:t,keptDims:o}}function Bu(e,t){const s=JSON.parse(JSON.stringify(e));return s.shapeInfo.logicalShape=t,s}function ku(e,t){return t.map(s=>e[s]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nut(e,t,s,i){const o=s.map((p,h)=>{const u={logicalShape:p.shape,texShape:p.isUniform?null:p.texData.texShape,isUniform:p.isUniform,isPacked:p.isUniform?!1:p.texData.isPacked,flatOffset:null};return p.texData!=null&&p.texData.slice!=null&&p.texData.slice.flatOffset>0&&(u.flatOffset=p.texData.slice.flatOffset),{name:t.variableNames[h],shapeInfo:u}}),y=o.map(p=>p.shapeInfo),r={logicalShape:i.shape,texShape:i.texData.texShape,isUniform:!1,isPacked:i.texData.isPacked,flatOffset:null},g=Klt(o,r,t),n=Clt(e.gl,g),a=e.createProgram(n);return pt().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:n,source:g,webGLProgram:a,inShapeInfos:y,outShapeInfo:r,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(a),Object.assign({program:t,fragmentShader:n,source:g,webGLProgram:a,inShapeInfos:y,outShapeInfo:r},b4(e,t,a)))}function b4(e,t,s){const i=[],o=[];let y,r,g,n=null,a=null;a=e.getUniformLocation(s,"NAN",!1),pt().getNumber("WEBGL_VERSION")===1&&(n=e.getUniformLocation(s,"INFINITY",!1));const p=!1;for(const h of t.variableNames){const u={name:h,uniform:e.getUniformLocation(s,h,p),offset:e.getUniformLocation(s,`offset${h}`,p)};t.enableShapeUniforms&&(u.shape=e.getUniformLocation(s,`${h}Shape`,p),u.texShape=e.getUniformLocation(s,`${h}TexShape`,p)),i.push(u)}if(t.enableShapeUniforms&&(y=e.getUniformLocation(s,"outShape",p),g=e.getUniformLocation(s,"outShapeStrides",p),r=e.getUniformLocation(s,"outTexShape",p)),t.customUniforms)for(const h of t.customUniforms)o.push(e.getUniformLocation(s,h.name,p));return{variablesLocations:i,customUniformLocations:o,infLoc:n,nanLoc:a,outShapeLocation:y,outShapeStridesLocation:g,outTexShapeLocation:r}}function tI(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((s,i)=>{const o=s.logicalShape,y=t[i],r=y.shape;if(!oe(o,r))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${r} must match`);if(s.isUniform&&y.isUniform)return;const g=s.texShape,n=y.isUniform?null:y.texData.texShape;if(!oe(g,n))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${g} and ${n} must match`)})}function Put(e,t,s,i,o){t.program.enableShapeUniforms||(tI(t.inShapeInfos,s),tI([t.outShapeInfo],[i]));const y=i.texData.texture,r=i.texData.texShape;i.texData.isPacked?e.setOutputPackedMatrixTexture(y.texture,r[0],r[1]):e.setOutputMatrixTexture(y.texture,r[0],r[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),pt().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN);for(let n=0;n<s.length;++n){const a=s[n],{uniform:p,offset:h,shape:u,texShape:d}=t.variablesLocations[n];if(u){const{uniformShape:l}=KC(t.program.packedInputs,a.shape,a.texData.texShape);switch(l.length){case 1:e.gl.uniform1iv(u,new Int32Array(l));break;case 2:e.gl.uniform2iv(u,new Int32Array(l));break;case 3:e.gl.uniform3iv(u,new Int32Array(l));break;case 4:e.gl.uniform4iv(u,new Int32Array(l));break}}if(d&&e.gl.uniform2i(d,a.texData.texShape[0],a.texData.texShape[1]),p!=null){if(a.isUniform){if(vt(a.shape)<2)e.gl.uniform1f(p,a.uniformValues[0]);else{let l=a.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(p,l)}continue}a.texData.slice!=null&&h!=null&&e.gl.uniform1i(h,a.texData.slice.flatOffset),e.setInputMatrixTexture(a.texData.texture.texture,p,n)}}const g=t.outShapeLocation;if(g)switch(i.shape.length){case 1:e.gl.uniform1iv(g,new Int32Array(i.shape));break;case 2:e.gl.uniform2iv(g,new Int32Array(i.shape));break;case 3:e.gl.uniform3iv(g,new Int32Array(i.shape));break;case 4:e.gl.uniform4iv(g,new Int32Array(i.shape));break}if(t.outShapeStridesLocation){const n=Vt(i.shape);switch(i.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n));break}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,i.texData.texShape[0],i.texData.texShape[1]),t.program.customUniforms&&o)for(let n=0;n<t.program.customUniforms.length;++n){const a=t.program.customUniforms[n],p=t.customUniformLocations[n],h=o[n];if(a.type==="float")e.gl.uniform1fv(p,h);else if(a.type==="vec2")e.gl.uniform2fv(p,h);else if(a.type==="vec3")e.gl.uniform3fv(p,h);else if(a.type==="vec4")e.gl.uniform4fv(p,h);else if(a.type==="int")e.gl.uniform1iv(p,h);else if(a.type==="ivec2")e.gl.uniform2iv(p,h);else if(a.type==="ivec3")e.gl.uniform3iv(p,h);else if(a.type==="ivec4")e.gl.uniform4iv(p,h);else throw Error(`uniform type ${a.type} is not supported yet.`)}e.executeProgram()}function Fut(e,t,s){let i="";t.concat(s).forEach(r=>{const g=r.texData!=null&&r.texData.slice!=null&&r.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!r.isUniform){const n=r.texData.texShape,{useSqueezeShape:a,uniformShape:p,keptDims:h}=KC(e.packedInputs,r.shape,n);let u="",d="",l="";if(p.length===1&&e.packedInputs){const T=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];u=`${T[0]>1}_${T[1]>1}`}else if(p.length===2&&!e.packedInputs)d=`${p[0]>1}_${p[1]>1}`;else if(p.length>2&&!e.packedInputs){const T=Vt(p);l=`${T[0]===n[1]}_${T[T.length-1]===n[1]}`}const c=r.shape.length,m=p.length===2&&oe(r.shape,n),f=vt(r.shape)===1,v=ou(r.shape,s.shape),S=!e.packedInputs&&c===s.shape.length&&oe(n,s.texData.texShape),x=e.packedInputs||p.length>2?"":`${n[0]>1}_${n[1]>1}`;i+=`${c}_${S}_${a?h:""}_${p.length}_${f}_${v}_${m}_${u}_${d}_${l}_${x}_${g}`}else{const n=r.isUniform?"uniform":r.texData.texShape;i+=`${r.shape}_${n}_${g}`}});const o=e.userCode;let y=e.constructor.name;return y+="_"+i+"_"+o+`${pt().getNumber("WEBGL_VERSION")}`,y}function jn(e){return pt().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Out{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=hc.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=ls();this.outputShape=t,this.enableShapeUniforms=jn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Bg(["r","c","d"],t):el(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dut{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=hc.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=ls();this.outputShape=t,this.enableShapeUniforms=jn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Bg(["r","c","d"],t):el(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lut{constructor(t){this.variableNames=["A"],this.outTexUsage=Ws.DOWNLOAD;const s=ls();this.outputShape=t,this.userCode=`
      ${T4}

      void main() {
        float x = getAAtOutCoords();
        ${s.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mut{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ws.DOWNLOAD;const s=ls();this.outputShape=t,this.userCode=`
      ${T4}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${s.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ut={R:0,G:1,B:2,A:3};class eI{constructor(t,s=!1,i="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=ls();this.outputShape=t,this.enableShapeUniforms=jn(this.outputShape.length);let y="result";s&&(y="floor(result * 255. + 0.5)");let r="";for(let g=0;g<i.length;g++){const n=i[g];r+=`
          if(offset == ${g}) {
            result = values[${$ut[n]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?YC():XC(t)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${i.length});

        flatIndex = idiv(flatIndex, ${i.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${r}
        }
        ${o.output} = vec4(${y}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class But{constructor(t,s=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=ls();this.outputShape=t,this.enableShapeUniforms=jn(this.outputShape.length);let o="",y="result";s&&(y="floor(result * 255. + 0.5)");for(let r=0;r<=1;r++)for(let g=0;g<=1;g++){const n=r*2+g;o+=`
          localCoords = coords;
          if(localCoords[2] + ${g} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${g};
          if (localCoords[1] + ${r} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${r};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${i.texture2D}(A, uv);

            if (offset == 0) {
              result[${n}] = values[0];
            } else if (offset == 1) {
              result[${n}] = values[1];
            } else if (offset == 2) {
              result[${n}] = values[2];
            } else {
              result[${n}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?YC():XC(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${i.output} = ${y};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kut(e){const t=ls(),s=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Tlt(e,s)}function zut(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Alt(e,t)}function Vut(e){const t=new Uint16Array([0,1,2,2,1,3]);return Ilt(e,t)}function Uf(e,t,s,i,o,y){Nlt(t,s);const r=Rlt(e),g=e.TEXTURE_2D;return Ot(e,()=>e.bindTexture(g,r)),Ot(e,()=>e.texParameteri(g,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),Ot(e,()=>e.texParameteri(g,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),Ot(e,()=>e.texParameteri(g,e.TEXTURE_MIN_FILTER,e.NEAREST)),Ot(e,()=>e.texParameteri(g,e.TEXTURE_MAG_FILTER,e.NEAREST)),pt().getNumber("WEBGL_VERSION")===1?Ot(e,()=>e.texImage2D(g,0,i,t,s,0,o,y,null)):Ot(e,()=>e.texStorage2D(g,1,i,t,s)),Ot(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:r,texShape:[s,t]}}function A4(e){return e.internalFormatFloat}function Gut(e,t,s,i){const[o,y]=Vf(t,s);return Uf(e,o,y,A4(i),i.textureFormatFloat,e.FLOAT)}function I4(e){return e.internalFormatHalfFloat}function Uut(e,t,s,i){const[o,y]=Vf(t,s);return Uf(e,o,y,I4(i),i.textureFormatFloat,i.textureTypeHalfFloat)}function R4(e){return e.downloadTextureFormat}function Wut(e,t,s,i){const[o,y]=Vf(t,s);return Uf(e,o,y,R4(i),e.RGBA,e.UNSIGNED_BYTE)}function N4(e){return e.internalFormatPackedFloat}function Hut(e,t,s,i){const[o,y]=Lu(t,s);return Uf(e,o,y,N4(i),e.RGBA,e.FLOAT)}function P4(e){return e.internalFormatPackedHalfFloat}function Xut(e,t,s,i){const[o,y]=Lu(t,s);return Uf(e,o,y,P4(i),e.RGBA,i.textureTypeHalfFloat)}function Yut(e,t,s){return Ot(e,()=>e.bindBuffer(e.ARRAY_BUFFER,s)),QA(e,t,"clipSpacePos",s,3,20,0)&&QA(e,t,"uv",s,2,20,12)}function Kut(e,t,s,i,o,y){Ot(e,()=>e.bindTexture(e.TEXTURE_2D,t));let r,g,n;o instanceof Uint8Array?(r=new Uint8Array(s*i*4),g=e.UNSIGNED_BYTE,n=e.RGBA):(r=new Float32Array(s*i*4),g=e.FLOAT,n=y.internalFormatPackedFloat),r.set(o),pt().getNumber("WEBGL_VERSION")===2?Ot(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,s,i,e.RGBA,g,r)):Ot(e,()=>e.texImage2D(e.TEXTURE_2D,0,n,s,i,0,e.RGBA,g,r)),Ot(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function jut(e,t,s){Ot(e,()=>e.bindTexture(e.TEXTURE_2D,t)),s.data instanceof Uint8Array?pt().getNumber("WEBGL_VERSION")===2?Ot(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,s.width,s.height,e.RGBA,e.UNSIGNED_BYTE,s.data)):Ot(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,s.width,s.height,0,e.RGBA,e.UNSIGNED_BYTE,s.data)):pt().getNumber("WEBGL_VERSION")===2?Ot(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,s)):Ot(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s)),Ot(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function Zut(e,t,s,i){const o=e.createBuffer();Ot(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));const g=4*4*t*s;return Ot(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,g,e.STREAM_READ)),Ot(e,()=>e.readPixels(0,0,s,t,e.RGBA,e.FLOAT,0)),Ot(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function Jut(e,t,s){const i=e,o=new Float32Array(s);return i.bindBuffer(i.PIXEL_PACK_BUFFER,t),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,o),i.bindBuffer(i.PIXEL_PACK_BUFFER,null),o}function Qut(e,t,s,i){const[o,y]=Vf(t,s),r=4,g=new Uint8Array(plt(t*s,r));return Ot(e,()=>e.readPixels(0,0,o,y,i.downloadTextureFormat,e.UNSIGNED_BYTE,g)),new Float32Array(g.buffer)}function qut(e,t,s,i,o,y,r,g){const n=e,a=new Float32Array(mlt(y,r));return n.bindBuffer(n.PIXEL_PACK_BUFFER,t),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,a),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),a}function _ut(e,t,s){const i=new Float32Array(t*s*4);return Ot(e,()=>e.readPixels(0,0,s,t,e.RGBA,e.FLOAT,i)),i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nx{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const s=pt().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,clt(s,t)):this.gl=ji(s),t=this.gl,pt().getNumber("WEBGL_VERSION")===2){const y=t;this.createVertexArray=()=>Ot(y,()=>y.createVertexArray()),this.bindVertexArray=r=>Ot(y,()=>y.bindVertexArray(r)),this.deleteVertexArray=r=>Ot(y,()=>y.deleteVertexArray(r)),this.getVertexArray=()=>Ot(y,()=>y.getParameter(y.VERTEX_ARRAY_BINDING))}else if(t!=null){const y=t.getExtension("OES_vertex_array_object");if(y==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Ot(t,()=>y.createVertexArrayOES()),this.bindVertexArray=r=>Ot(t,()=>y.bindVertexArrayOES(r)),this.deleteVertexArray=r=>Ot(t,()=>y.deleteVertexArrayOES(r)),this.getVertexArray=()=>Ot(t,()=>t.getParameter(y.VERTEX_ARRAY_BINDING_OES))}let i="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),pt().getNumber("WEBGL_VERSION")===1){const y="OES_texture_float",r="OES_texture_half_float";if(this.textureFloatExtension=Rd(this.gl,y),gi(this.gl,r))this.textureHalfFloatExtension=Rd(this.gl,r);else if(pt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),gi(this.gl,o))this.colorBufferHalfFloatExtension=Rd(this.gl,o);else if(pt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",gi(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else if(gi(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=zut(this.gl),this.indexBuffer=Vut(this.gl),this.framebuffer=Plt(this.gl),this.textureConfig=HC(this.gl,this.textureHalfFloatExtension)}get debug(){return pt().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;Ot(t,()=>t.finish()),Ot(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Ot(t,()=>t.deleteFramebuffer(this.framebuffer)),Ot(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Ot(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Ot(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,s){return this.throwIfDisposed(),Gut(this.gl,t,s,this.textureConfig)}createFloat16MatrixTexture(t,s){return this.throwIfDisposed(),Uut(this.gl,t,s,this.textureConfig)}createUnsignedBytesMatrixTexture(t,s){return this.throwIfDisposed(),Wut(this.gl,t,s,this.textureConfig)}uploadPixelDataToTexture(t,s){this.throwIfDisposed(),jut(this.gl,t,s)}uploadDenseMatrixToTexture(t,s,i,o){this.throwIfDisposed(),Kut(this.gl,t,s,i,o,this.textureConfig)}createFloat16PackedMatrixTexture(t,s){return this.throwIfDisposed(),Xut(this.gl,t,s,this.textureConfig)}createPackedMatrixTexture(t,s){return this.throwIfDisposed(),Hut(this.gl,t,s,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(qA(this.gl,this.framebuffer),this.outputTexture=null),Ot(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,s,i){return this.downloadMatrixDriver(t,()=>Qut(this.gl,s,i,this.textureConfig))}downloadPackedMatrixFromBuffer(t,s,i,o,y,r){return qut(this.gl,t,s,i,o,y,r,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,s){return Jut(this.gl,t,s)}createBufferFromTexture(t,s,i){this.bindTextureToFrameBuffer(t);const o=Zut(this.gl,s,i,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let s,i;if(pt().getBool("WEBGL_FENCE_API_ENABLED")){const o=t,y=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),i=()=>{const r=o.clientWaitSync(y,0,0);return r===o.ALREADY_SIGNALED||r===o.CONDITION_SATISFIED},s=y}else pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(s=this.beginQuery(),this.endQuery(),i=()=>this.isQueryAvailable(s,pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):i=()=>!0;return{query:s,isFencePassed:i}}downloadMatrixFromPackedTexture(t,s,i){return this.downloadMatrixDriver(t,()=>_ut(this.gl,s,i))}createProgram(t){this.throwIfDisposed();const s=this.gl;this.vertexShader==null&&(this.vertexShader=kut(s));const i=Elt(s);Ot(s,()=>s.attachShader(i,this.vertexShader)),Ot(s,()=>s.attachShader(i,t)),blt(s,i);const o=Object.assign(i,{vao:this.createVertexArray()});return this.debug&&q0(s,o),o}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);const s=this.gl;Ot(s,()=>s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Yut(s,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(Ot(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&q0(this.gl,this.program),Ot(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,s,i=!0){return this.throwIfDisposed(),i?Olt(this.gl,t,s):Dlt(this.gl,t,s)}getAttributeLocation(t,s){return this.throwIfDisposed(),Ot(this.gl,()=>this.gl.getAttribLocation(t,s))}getUniformLocationNoThrow(t,s){return this.throwIfDisposed(),this.gl.getUniformLocation(t,s)}setInputMatrixTexture(t,s,i){this.throwIfDisposed(),this.throwIfNoProgram(),Llt(this.gl,t,s,i)}setOutputMatrixTexture(t,s,i){this.setOutputMatrixTextureDriver(t,i,s)}setOutputPackedMatrixTexture(t,s,i){this.throwIfDisposed();const[o,y]=Lu(s,i);this.setOutputMatrixTextureDriver(t,o,y)}setOutputMatrixWriteRegion(t,s,i,o){this.setOutputMatrixWriteRegionDriver(i,t,o,s)}setOutputPackedMatrixWriteRegion(t,s,i,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&q0(this.gl,this.program),Nd(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;if(this.debug){const s=this.getVertexArray();console.assert(s===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Ot(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ot(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Rd(this.gl,pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const i=this.gl,o=this.getQueryTimerExtensionWebGL2(),y=i.createQuery();return i.beginQuery(o.TIME_ELAPSED_EXT,y),y}const t=this.getQueryTimerExtensionWebGL1(),s=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,s),s}endQuery(){if(pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,i=this.getQueryTimerExtensionWebGL2();s.endQuery(i.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await Bb(()=>this.disposed||this.isQueryAvailable(t,pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,s){if(s===0)return null;if(s===2){const i=this.gl;return i.getQueryParameter(t,i.QUERY_RESULT)/1e6}else{const i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(t,i.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,s){if(s===0)return!0;if(s===2){const i=this.gl,o=this.getQueryTimerExtensionWebGL2(),y=i.getQueryParameter(t,i.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),y&&!this.disjoint}else{const i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(t,i.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(t){return new Promise(s=>{this.addItemToPoll(()=>t.isFencePassed(),()=>s())})}pollItems(){const t=tht(this.itemsToPoll.map(s=>s.isDoneFn));for(let s=0;s<=t;++s){const{resolveFn:i}=this.itemsToPoll[s];i()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,s){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:s}),this.itemsToPoll.length>1)return;let i;"setTimeoutCustom"in pt().platform&&(i=pt().platform.setTimeoutCustom.bind(pt().platform)),Bb(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,i)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),_0(this.gl,t,this.framebuffer),this.debug&&Nd(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(_0(this.gl,this.outputTexture,this.framebuffer),this.debug&&Nd(this.gl)):qA(this.gl,this.framebuffer)}downloadMatrixDriver(t,s){this.bindTextureToFrameBuffer(t);const i=s();return this.unbindTextureToFrameBuffer(),i}setOutputMatrixTextureDriver(t,s,i){this.throwIfDisposed();const o=this.gl;_0(o,t,this.framebuffer),this.debug&&Nd(o),this.outputTexture=t,Ot(o,()=>o.viewport(0,0,s,i)),Ot(o,()=>o.scissor(0,0,s,i))}setOutputMatrixWriteRegionDriver(t,s,i,o){this.throwIfDisposed(),Ot(this.gl,()=>this.gl.scissor(t,s,i,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function tht(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:eht,bincountImpl:F4,bincountReduceImpl:nht,bitwiseAndImpl:sht,castImpl:iht,ceilImpl:rht,concatImpl:aht,equalImpl:oht,expImpl:lht,expm1Impl:uht,floorImpl:hht,gatherNdImpl:cht,gatherV2Impl:fht,greaterImpl:dht,greaterEqualImpl:pht,lessImpl:mht,lessEqualImpl:vht,linSpaceImpl:ght,logImpl:xht,maxImpl:yht,maximumImpl:Sht,minimumImpl:Tht,multiplyImpl:Cht,negImpl:wht,notEqualImpl:Eht,prodImpl:bht,raggedGatherImpl:Aht,raggedRangeImpl:Iht,raggedTensorToTensorImpl:Rht,rangeImpl:Nht,rsqrtImpl:Pht,scatterImpl:Fht,sigmoidImpl:Oht,simpleAbsImpl:O4,sliceImpl:Dht,sparseFillEmptyRowsImpl:Lht,sparseReshapeImpl:Mht,sparseSegmentReductionImpl:D4,sqrtImpl:$ht,staticRegexReplaceImpl:Bht,stridedSliceImpl:kht,stringNGramsImpl:zht,stringSplitImpl:Vht,stringToHashBucketFastImpl:Ght,subImpl:Uht,tileImpl:Wht,topKImpl:Hht,transposeImpl:jC,uniqueImpl:Xht}=jnt;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L4(e,t){return["x","y","z","w","u","v"].slice(0,t).map(s=>`${e}.${s}`)}function ss(e,t){return t===1?[e]:L4(e,t)}function Yht(e,t){if(e===1)return"rc";let s="";for(let i=0;i<e;i++)s+=t[i],i<e-1&&(s+=",");return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kht{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=jn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const s=ss("rc",this.rank),i=we(this.rank),o=this.getOutOfBoundsCondition(s),y=this.getSetup(s),r=this.getOutput(s);this.userCode=`
        void main() {
          ${i} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${y}

            setOutput(vec4(${r}));
          }
        }
      `}}getSourceCoordsArr(t){const s=[];for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){let y=`${i===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let r=2;r<this.rank;r++)y=`${t[t.length-1-r]},`+y;s.push(y)}return s}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let s="";for(let i=this.rank-2;i<this.rank;i++)s+=`${t[i]} >= ${this.enableShapeUniforms?`outShape[${i}]`:this.outputShape[i]}`,i<this.rank-1&&(s+="||");return s}getSetup(t){if(this.rank===1)return"";const s=t.slice(-2),i=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${s[0]};
      int c = ${s[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${i};
      bool rEdge = rp1 >= ${o};
    `}getOutput(t){const s=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${s[0]}),
            cEdge ? 0. : getA(${s[1]}),
            rEdge ? 0. : getA(${s[2]}),
            rEdge || cEdge ? 0. : getA(${s[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M4{constructor(t,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=jn(this.outputShape.length);let i="";for(let o=0;o<4;o++){let y="thisRC = rc;";o%2===1&&(y+="thisRC.z += 1;"),o>1&&(y+="thisRC.y += 1;"),i+=`
        ${y}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${jht(s,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?YC():XC(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${i}

        setOutput(result);
      }
    `}}function jht(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?Ylt(["r","c","d"],"inputShape"):el(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zht{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,s,i){const o=sI(s,i),y=iI(t,o,i);y in this.freeTextures||(this.freeTextures[y]=[]),y in this.usedTextures||(this.usedTextures[y]=[]);const r=nI(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,i);if(this.freeTextures[y].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=r,this.log();const n=this.freeTextures[y].pop();return this.usedTextures[y].push(n),n}let g;return o===On.PACKED_2X2_FLOAT32?g=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===On.PACKED_2X2_FLOAT16?g=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===On.UNPACKED_FLOAT32?g=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===On.UNPACKED_FLOAT16?g=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===On.PACKED_4X1_UNSIGNED_BYTE&&(g=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[y].push(g),this.numUsedTextures++,this._numBytesAllocated+=r,this.log(),g}releaseTexture(t,s,i,o){if(this.freeTextures==null)return;const y=sI(i,o),r=iI(s,y,o);r in this.freeTextures||(this.freeTextures[r]=[]);const g=nI(s,y,this.gpgpu.gl,this.gpgpu.textureConfig,o),n=pt().get("WEBGL_DELETE_TEXTURE_THRESHOLD");n!==-1&&this._numBytesAllocated>n?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=g):(this.freeTextures[r].push(t),this.numFreeTextures++,this._numBytesFree+=g),this.numUsedTextures--;const a=this.usedTextures[r],p=a&&a.indexOf(t);if(p==null||p<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a[p]=a[a.length-1],a.pop(),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const s=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*s)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(s=>{this.gpgpu.deleteMatrixTexture(s.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(s=>{this.gpgpu.deleteMatrixTexture(s.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Jht(e,t){const s=e;if(t===s.R32F)return 4;if(t===s.R16F)return 2;if(t===s.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===s.RGBA16F)return 8;if(t===s.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function nI(e,t,s,i,o){const y=Qht(t,i);let r;if(o){const[n,a]=Lu(e[0],e[1]);r=n*a}else{const[n,a]=Vf(e[0],e[1]);r=n*a}const g=Jht(s,y);return r*g}function Qht(e,t){switch(e){case On.PACKED_2X2_FLOAT32:return N4(t);case On.PACKED_2X2_FLOAT16:return P4(t);case On.UNPACKED_FLOAT32:return A4(t);case On.UNPACKED_FLOAT16:return I4(t);case On.PACKED_4X1_UNSIGNED_BYTE:return R4(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function qht(e){return pt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?On.PACKED_2X2_FLOAT32:On.UNPACKED_FLOAT32:e?On.PACKED_2X2_FLOAT16:On.UNPACKED_FLOAT16}function sI(e,t){if(e===Ws.UPLOAD)return On.PACKED_2X2_FLOAT32;if(e===Ws.RENDER||e==null)return qht(t);if(e===Ws.DOWNLOAD||e===Ws.PIXELS)return On.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function iI(e,t,s){return`${e[0]}_${e[1]}_${t}_${s}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hr{constructor(t,s){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=jn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${s}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Pi="if (isnan(x)) return x;",_ht="return x;",rI="return abs(x);",tct="return (x >= 0.0) ? x : (exp(x) - 1.0);",ect=Pi+`
  return (x < 0.0) ? 0.0 : x;
`,nct=Pi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,la="return x;",sct="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ict="return x;",rct=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,act=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,oct=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,lct="return 1.0 / (1.0 + exp(-1.0 * x));";class va{constructor(t,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=jn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${s}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uct{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=jn(this.outputShape.length);const s=t.length,i=ss("rc",s),o=we(s),y=Yht(s,i),r=i.slice(-2),g=s<=1?"rc":`vec2(${r.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${y});

        setOutput(getChannel(packedInput, ${g}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hct=FT,cct=1e-7,fct=1e-4,Od={};function dct(e){return e in Od||(Od[e]={}),Od[e]}const pct=pt().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),mct=600;function vct(){return pt().global.screen==null?1024:pt().global.screen.height*pt().global.screen.width*window.devicePixelRatio*mct/1024/1024}class kg extends B2{nextDataId(){return kg.nextDataId++}constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!pt().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let s;if(t!=null){if(t instanceof nx)s=t;else{const i=ji(pt().getNumber("WEBGL_VERSION"),t);s=new nx(i)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const i=ji(pt().getNumber("WEBGL_VERSION"));s=new nx(i),this.binaryCache=dct(pt().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=s,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Zht(this.gpgpu),this.numMBBeforeWarning=vct(),this.texData=new r3(this,tr())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(t,s,i,o,y,r){const g=this.makeTensorInfo(s,i),n=this.texData.get(g.dataId);n.isPacked=!1,n.texture={texture:t,texShape:[o,y]},n.texShape=[o,y];const a=Pd(s),p=new eI(a,!1,r),h=this.runWebGLProgram(p,[g],i,[[o,y]]);return h.shape=s,n.texture=null,this.disposeIntermediateTensorInfo(g),h.dataId}write(t,s,i){if((pt().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||pt().getBool("DEBUG"))&&this.checkNumericalProblems(t),i==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:s,dtype:i,values:t,usage:Ws.UPLOAD,refCount:1}),o}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const s=this.texData.get(t);s.refCount++}decRef(t){if(this.texData.has(t)){const s=this.texData.get(t);s.refCount--}}move(t,s,i,o,y){if(pt().getBool("DEBUG")&&this.checkNumericalProblems(s),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:i,dtype:o,values:s,usage:Ws.UPLOAD,refCount:y})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const s=this.texData.get(t),{values:i,dtype:o,complexTensorInfos:y,slice:r,shape:g,isPacked:n}=s;if(r!=null){let u;n?u=new va(g,la):u=new hr(g,la);const d=this.runWebGLProgram(u,[{dataId:t,shape:g,dtype:o}],o),l=this.readSync(d.dataId);return this.disposeIntermediateTensorInfo(d),l}if(i!=null)return this.convertAndCacheOnCPU(t);if(o==="string")return i;const a=this.activeTimers!=null;let p;a&&(p=cs());let h;if(o==="complex64"){const u=this.readSync(y.real.dataId),d=this.readSync(y.imag.dataId);h=Kr(u,d)}else h=this.getValuesFromTexture(t);return a&&(this.downloadWaitMs+=cs()-p),this.convertAndCacheOnCPU(t,h)}async read(t){if(this.pendingRead.has(t)){const l=this.pendingRead.get(t);return new Promise(c=>l.push(c))}const s=this.texData.get(t),{values:i,shape:o,slice:y,dtype:r,complexTensorInfos:g,isPacked:n}=s;if(y!=null){let l;n?l=new va(o,la):l=new hr(o,la);const c=this.runWebGLProgram(l,[{dataId:t,shape:o,dtype:r}],r),m=this.read(c.dataId);return this.disposeIntermediateTensorInfo(c),m}if(i!=null)return this.convertAndCacheOnCPU(t);if(pt().getBool("DEBUG")&&!pt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&pt().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let a=null,p;if(r!=="complex64"&&pt().get("WEBGL_BUFFER_SUPPORTED")){p=this.decode(t);const l=this.texData.get(p.dataId);a=this.gpgpu.createBufferFromTexture(l.texture.texture,...Id(o))}this.pendingRead.set(t,[]),r!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(r==="complex64"){const l=await Promise.all([this.read(g.real.dataId),this.read(g.imag.dataId)]),c=l[0],m=l[1];h=Kr(c,m)}else if(a==null)h=this.getValuesFromTexture(t);else{const l=vt(o);h=this.gpgpu.downloadFloat32MatrixFromBuffer(a,l)}if(p!=null&&this.disposeIntermediateTensorInfo(p),a!=null){const l=this.gpgpu.gl;Ot(l,()=>l.deleteBuffer(a))}const u=this.convertAndCacheOnCPU(t,h),d=this.pendingRead.get(t);return this.pendingRead.delete(t),d.forEach(l=>l(u)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&tr().removeDataId(t,this),this.pendingDeletes--),u}readToGPU(t,s={}){const i=this.texData.get(t),{values:o,shape:y,slice:r,dtype:g,isPacked:n,texture:a}=i;if(g==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(r!=null){let d;n?d=new va(y,la):d=new hr(y,la);const l=this.runWebGLProgram(d,[{dataId:t,shape:y,dtype:g}],g),c=this.readToGPU(l,s);return this.disposeIntermediateTensorInfo(l),c}if(a==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const p=this.decode(t,s.customTexShape),h=tr().makeTensorFromTensorInfo(p),u=this.texData.get(p.dataId);return Object.assign({tensorRef:h},u.texture)}bufferSync(t){const s=this.readSync(t.dataId);if(t.dtype==="string")try{const i=s.map(o=>Oa(o));return te(t.shape,t.dtype,i)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return te(t.shape,t.dtype,s)}checkNumericalProblems(t){if(t!=null)for(let s=0;s<t.length;s++){const i=t[s];if(!ylt(i))throw pt().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${i} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${i} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:s,dtype:i,isPacked:o}=this.texData.get(t),y=vt(s);if(pt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const u=this.decode(t),d=this.texData.get(u.dataId),l=this.gpgpu.downloadMatrixFromPackedTexture(d.texture.texture,...Id(s)).subarray(0,y);return this.disposeIntermediateTensorInfo(u),l}const r=pt().getBool("WEBGL_PACK")&&o===!0,g=r?Pd(s):s,n=r?new Mut(g):new Lut(g),a=this.runWebGLProgram(n,[{shape:g,dtype:i,dataId:t}],"float32"),p=this.texData.get(a.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture.texture,p.texShape[0],p.texShape[1]).subarray(0,y);return this.disposeIntermediateTensorInfo(a),h}timerAvailable(){return pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const s=this.activeTimers,i=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,t();const y=Oo(this.activeTimers.map(n=>n.query)).filter(n=>n!=null),r=Oo(this.activeTimers.map(n=>n.name)).filter(n=>n!=null);this.activeTimers=s,o&&(this.programTimersStack=null);const g={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const n=await Promise.all(y);g.kernelMs=VG(n),g.getExtraProfileInfo=()=>n.map((a,p)=>({name:r[p],ms:a})).map(a=>`${a.name}: ${a.ms}`).join(", ")}else g.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,g})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:cs(),endMs:null}}endTimer(t){return pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=cs(),t)}async getQueryTime(t){if(pt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const s=t;return s.endMs-s.startMs}disposeData(t,s=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(s?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!s&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:i}=this.texData.get(t);return i!=null&&(this.disposeData(i.real.dataId,s),this.disposeData(i.imag.dataId,s)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:s,dtype:i,texShape:o,usage:y,isPacked:r,slice:g}=this.texData.get(t),n=g&&g.origDataId||t,a=this.dataRefCount.get(n);a>1?this.dataRefCount.set(n,a-1):(this.dataRefCount.delete(n),s!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(s,o,y,r)));const p=this.texData.get(t);p.texture=null,p.texShape=null,p.isPacked=!1,p.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,s=pct){return pt().getBool("WEBGL_CPU_FORWARD")&&t.every(i=>this.texData.get(i.dataId).texture==null&&vt(i.shape)<s)}getGPGPUContext(){return this.gpgpu}where(t){Vs("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const s=t.dataSync();return hct(t.shape,s)}packedUnaryOp(t,s,i){const o=new va(t.shape,s),y=this.compileAndRun(o,[t],i);return tr().makeTensorFromTensorInfo(y)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const o=O4(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,o)}if(pt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,rI,t.dtype);const s=new hr(t.shape,rI),i=this.compileAndRun(s,[t]);return tr().makeTensorFromTensorInfo(i)}makeTensorInfo(t,s,i){let o;if(s==="string"&&i!=null&&i.length>0&&wc(i[0])){const y=i.map(r=>Ia(r));o=this.write(y,t,s)}else o=this.write(i,t,s);return this.texData.get(o).usage=null,{dataId:o,shape:t,dtype:s}}makeOutput(t,s,i){return tr().makeTensorFromTensorInfo(this.makeTensorInfo(t,s,i),this)}unpackTensor(t){const s=new uct(t.shape);return this.runWebGLProgram(s,[t],t.dtype)}packTensor(t){const s=new Kht(t.shape),i=!0;return this.runWebGLProgram(s,[t],t.dtype,null,i)}packedReshape(t,s){const i=[pu(t.shape),...mu(t.shape)],o={dtype:t.dtype,shape:i,dataId:t.dataId},y=[pu(s),...mu(s)],r=new M4(y,i),g=!0,n=[i],a=this.runWebGLProgram(r,[o],t.dtype,n,g);return{dataId:a.dataId,shape:s,dtype:a.dtype}}decode(t,s){const i=this.texData.get(t),{isPacked:o,shape:y,dtype:r}=i;if(s!=null){const u=vt(y),d=s[0]*s[1]*4;q(u<=d,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const g=Pd(y);let n;o?n=new Dut(g):n=new Out(g);const a=!0,p=[s??Id(g)],h=this.runWebGLProgram(n,[{shape:g,dtype:r,dataId:t}],r,p,a,s);return{dtype:r,shape:y,dataId:h.dataId}}runWebGLProgram(t,s,i,o,y=!1,r){const g=this.makeTensorInfo(t.outputShape,i),n=this.texData.get(g.dataId);if(t.packedOutput&&(n.isPacked=!0),t.outPackingScheme===hc.DENSE){const f=r??Id(t.outputShape);n.texShape=f.map(v=>v*2)}if(t.outTexUsage!=null&&(n.usage=t.outTexUsage),vt(g.shape)===0)return n.values=Ln(g.dtype,0),g;const a=[],p=s.map(f=>{if(f.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(f.dataId);if(v.texture==null){if(!t.packedInputs&&vt(f.shape)<=pt().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:f.shape,texData:null,isUniform:!0,uniformValues:v.values};t.packedInputs&&(v.isPacked=!0,v.shape=f.shape)}if(this.uploadToGPU(f.dataId),!!v.isPacked!=!!t.packedInputs)f=v.isPacked?this.unpackTensor(f):this.packTensor(f),a.push(f),v=this.texData.get(f.dataId);else if(v.isPacked&&!cm(v.shape,f.shape)){const S=f,x=f.shape;f.shape=v.shape,f=this.packedReshape(f,x),a.push(f),v=this.texData.get(f.dataId),S.shape=x}return{shape:f.shape,texData:v,isUniform:!1}});this.uploadToGPU(g.dataId);const h={shape:g.shape,texData:n,isUniform:!1},u=Fut(t,p,h),d=this.getAndSaveBinary(u,()=>Nut(this.gpgpu,t,p,h)),l=this.activeTimers!=null;let c;l&&(c=this.startTimer()),pt().get("ENGINE_COMPILE_ONLY")||Put(this.gpgpu,d,p,h,o),a.forEach(f=>this.disposeIntermediateTensorInfo(f)),l&&(c=this.endTimer(c),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(c)}));const m=pt().get("WEBGL_FLUSH_THRESHOLD");if(m>0){const f=cs();f-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=f)}if(!pt().getBool("WEBGL_LAZILY_UNPACK")&&n.isPacked&&y===!1){const f=this.unpackTensor(g);return this.disposeIntermediateTensorInfo(g),f}return g}compileAndRun(t,s,i,o,y=!1){return i=i||s[0].dtype,this.runWebGLProgram(t,s,i,o,y)}getAndSaveBinary(t,s){return t in this.binaryCache||(this.binaryCache[t]=s()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(pt().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(s=>{this.gpgpu.deleteProgram(this.binaryCache[s].webGLProgram),delete this.binaryCache[s]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ft(()=>{if(!pt().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=pt().getBool("DEBUG");pt().set("DEBUG",!1);const s=this.abs(Wt(1e-8)).dataSync()[0];if(pt().set("DEBUG",t),s>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?cct:fct}uploadToGPU(t){const s=this.texData.get(t),{shape:i,dtype:o,values:y,texture:r,usage:g,isPacked:n}=s;if(r!=null)return;const a=this.activeTimers!=null;let p;a&&(p=cs());let h=s.texShape;if(h==null&&(h=Blt(i,n),s.texShape=h),y!=null){const u=Pd(i);let d,l=h[1],c=h[0];const m=y instanceof Uint8Array||y instanceof Uint8ClampedArray;(n||!m)&&([l,c]=Lu(h[0],h[1])),n?d=new But(u,m):d=new eI(u,m);const f=m?[c,l]:h,v=this.makeTensorInfo(f,o),S=this.texData.get(v.dataId);m?S.usage=Ws.PIXELS:S.usage=Ws.UPLOAD,S.texShape=f,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),l,c,y);const x=[[c,l]],T=!0,C=this.runWebGLProgram(d,[v],o,x,T),w=this.texData.get(C.dataId);s.texShape=w.texShape,s.isPacked=w.isPacked,s.usage=w.usage,pt().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(s.texture=w.texture,s.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(v),a&&(this.uploadWaitMs+=cs()-p)}else{const u=this.acquireTexture(h,g,o,n);s.texture=u}}convertAndCacheOnCPU(t,s){const i=this.texData.get(t),{dtype:o}=i;return s!=null&&(i.values=gct(s,o)),i.values}acquireTexture(t,s,i,o){if(this.numBytesInGPU+=this.computeBytes(t,i),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const y=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${y} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,s,o)}computeBytes(t,s){return t[0]*t[1]*kp(s)}checkCompileCompletion(){for(const[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){const t=[];if(this.gpgpu.parallelCompilationExtension){for(const[,s]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(s));return Promise.all(t)}else{for(const[,s]of Object.entries(this.binaryCache)){const i=new Promise(o=>{try{this.checkCompletion_(s),o(!0)}catch(y){throw y}});t.push(i)}return Promise.all(t)}}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await TO(),this.checkCompletionAsync_(t))}checkCompletion_(t){if(this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(S4(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const t of Object.values(this.binaryCache)){this.gpgpu.buildVao(t.webGLProgram);const{variablesLocations:s,customUniformLocations:i,infLoc:o,nanLoc:y,outShapeLocation:r,outShapeStridesLocation:g,outTexShapeLocation:n}=b4(this.gpgpu,t.program,t.webGLProgram);t.variablesLocations=s,t.customUniformLocations=i,t.infLoc=o,t.nanLoc=y,t.outShapeLocation=r,t.outShapeStridesLocation=g,t.outTexShapeLocation=n}}createTensorFromGPUData(t,s,i){t.channels=t.channels||"RGBA";const{texture:o,height:y,width:r,channels:g}=t,n=tr().backend;if(!n.gpgpu.gl.isTexture(o))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const a=n.writeTexture(o,s,i,y,r,g);return tr().makeTensorFromDataId(a,s,i,n)}}kg.nextDataId=0;function gct(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){const s=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let i=0;i<s.length;++i)s[i]=Math.round(e[i]);return s}else throw new Error(`Unknown dtype ${t}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P3()&&K3("webgl",()=>new kg,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZC=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Uo{constructor(t,s,i){this.variableNames=["A","B"],this.outputShape=Qt(s,i),this.enableShapeUniforms=jn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sl=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class zu{constructor(t,s,i,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Qt(s,i);const y=this.outputShape.length;this.enableShapeUniforms=jn(y);let r="";if(o)if(y===0||vt(this.outputShape)===1)r=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(r=`
          ${we(y)} coords = getOutputCoords();
        `,y===1)this.enableShapeUniforms?r+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:r+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const n=ss("coords",y);this.enableShapeUniforms?r+=`
            bool nextRowOutOfBounds =
              (${n[y-2]} + 1) >= outShape[${y} - 2];
            bool nextColOutOfBounds =
              (${n[y-1]} + 1) >= outShape[${y} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:r+=`
            bool nextRowOutOfBounds =
              (${n[y-2]} + 1) >= ${this.outputShape[y-2]};
            bool nextColOutOfBounds =
              (${n[y-1]} + 1) >= ${this.outputShape[y-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${r}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ms(e){const{inputs:t,backend:s}=e,{x:i}=t;return s.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}const xct={kernelName:Hc,backendName:"webgl",kernelFunc:Ms};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function no(e){const{inputs:t,backend:s}=e,{real:i,imag:o}=t,y=s.makeTensorInfo(i.shape,"complex64"),r=s.texData.get(y.dataId),g=Ms({inputs:{x:i},backend:s}),n=Ms({inputs:{x:o},backend:s});return r.complexTensorInfos={real:g,imag:n},y}const yct={kernelName:K2,backendName:"webgl",kernelFunc:no};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4="return (a < 0.) ? b * a : a;",B4=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Sct(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{alpha:y}=i,r=s.makeTensorInfo([],"float32",Ya(y,"float32")),g=pt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zu(B4,o.shape,r.shape):new Uo($4,o.shape,r.shape),n=s.runWebGLProgram(g,[o,r],"float32");return s.disposeIntermediateTensorInfo(r),n}const Tct={kernelName:xv,backendName:"webgl",kernelFunc:Sct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k4="return (a < 0.) ? b * a : a;",z4=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Cct(e){const{inputs:t,backend:s}=e,{x:i,alpha:o}=t,y=pt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zu(z4,i.shape,o.shape):new Uo(k4,i.shape,o.shape);return s.runWebGLProgram(y,[i,o],"float32")}const wct={kernelName:Bv,backendName:"webgl",kernelFunc:Cct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vu="if (isnan(x)) return x;";function fe({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:y})=>{const{x:r}=o,g=y,n=i||r.dtype;if(g.shouldExecuteOnCPU([r])&&s!=null){const h=g.texData.get(r.dataId),u=s(h.values,n);return g.makeTensorInfo(r.shape,n,u)}const a=pt().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let p;return a?p=new va(r.shape,t):p=new hr(r.shape,e),g.runWebGLProgram(p,[r],n)}}function zn({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:s=!1,supportsComplex:i=!1,cpuKernelImpl:o,dtype:y}){return({inputs:r,backend:g})=>{const{a:n,b:a}=r,p=g;if(i&&n.dtype==="complex64"){const l=p.texData.get(n.dataId),c=p.texData.get(a.dataId),[m,f]=[[l.complexTensorInfos.real,c.complexTensorInfos.real],[l.complexTensorInfos.imag,c.complexTensorInfos.imag]].map(S=>{const[x,T]=S,C={dataId:x.dataId,dtype:x.dtype,shape:n.shape},w={dataId:T.dataId,dtype:T.dtype,shape:a.shape},b=new Uo(e,n.shape,a.shape);return p.runWebGLProgram(b,[C,w],Os(x.dtype,T.dtype))}),v=no({inputs:{real:m,imag:f},backend:p});return p.disposeIntermediateTensorInfo(m),p.disposeIntermediateTensorInfo(f),v}const h=y||Os(n.dtype,a.dtype);if((n.dtype==="string"||a.dtype==="string"||p.shouldExecuteOnCPU([n,a]))&&o!=null){const l=p.texData.get(n.dataId).values,c=p.texData.get(a.dataId).values,m=n.dtype==="string"?jr(l):l,f=n.dtype==="string"?jr(c):c,[v,S]=o(n.shape,a.shape,m,f,h),x=p.makeTensorInfo(S,h),T=p.texData.get(x.dataId);return T.values=v,x}const u=pt().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let d;return u?d=new zu(t,n.shape,a.shape,s):d=new Uo(e,n.shape,a.shape),p.runWebGLProgram(d,[n,a],h)}}function cc(e,t=!1){if(e==="linear")return t?ict:_ht;if(e==="relu")return t?act:ect;if(e==="elu")return t?rct:tct;if(e==="relu6")return t?oct:nct;if(e==="prelu")return t?z4:k4;if(e==="leakyrelu")return t?B4:$4;if(e==="sigmoid")return t?lct:sct;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V4{constructor(t,s,i,o=!1,y=!1,r=!1,g=null,n=!1,a=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i,this.enableShapeUniforms=jn(this.outputShape.length);const p=o?t[1]:t[2],h=Math.ceil(p/2),u=o?"i * 2, rc.y":"rc.y, i * 2",d=y?"rc.z, i * 2":"i * 2, rc.z",l=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],c=y?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",f="";g&&(n?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${g}
        }`:a?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${g}
        }`:m=`vec4 activation(vec4 x) {
          ${g}
        }`,f="result = activation(result);");const v=r?"result += getBiasAtOutCoords();":"";r&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha");let S="rc.x",x="rc.x";t[0]<s[0]?S=`imod(rc.x, ${t[0]})`:s[0]<t[0]&&(x=`imod(rc.x, ${s[0]})`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${S};
        int batchB = ${x};
        for (int i = 0; i < ${h}; i++) {
          vec4 a = getMatrixA(batchA, ${u});
          vec4 b = getMatrixB(batchB, ${d});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${l[0]} * ${c[0]});
          result += (${l[1]} * ${c[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${f}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aI={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class oI{constructor(t,s,i){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Qt(s,i),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lI="return a * b;";function JC(e){const{inputs:t,backend:s}=e,{a:i,b:o}=t,y=Os(i.dtype,o.dtype);if(i.dtype==="complex64"){const g=s.texData.get(i.dataId),n=s.texData.get(o.dataId),a=new oI(aI.REAL,i.shape,o.shape),p=new oI(aI.IMAG,i.shape,o.shape),h=[{dataId:g.complexTensorInfos.real.dataId,dtype:g.complexTensorInfos.real.dtype,shape:i.shape},{dataId:g.complexTensorInfos.imag.dataId,dtype:g.complexTensorInfos.imag.dtype,shape:i.shape},{dataId:n.complexTensorInfos.real.dataId,dtype:n.complexTensorInfos.real.dtype,shape:o.shape},{dataId:n.complexTensorInfos.imag.dataId,dtype:n.complexTensorInfos.imag.dtype,shape:o.shape}],u=s.runWebGLProgram(a,h,"float32"),d=s.runWebGLProgram(p,h,"float32"),l=no({inputs:{real:u,imag:d},backend:s});return s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(d),l}if(s.shouldExecuteOnCPU([i,o])){const g=s.texData.get(i.dataId),n=s.texData.get(o.dataId),[a,p]=Cht(i.shape,o.shape,g.values,n.values,y),h=s.makeTensorInfo(p,y),u=s.texData.get(h.dataId);return u.values=a,h}let r;return pt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?r=new zu(lI,i.shape,o.shape):r=new Uo(lI,i.shape,o.shape),s.runWebGLProgram(r,[i,o],y)}const Ect={kernelName:_c,backendName:"webgl",kernelFunc:JC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bct(e,t,s){const i=[pu(e.shape),...mu(e.shape)],o={dtype:e.dtype,shape:i,dataId:e.dataId},y=[pu(t),...mu(t)],r=new M4(y,i),g=!0,n=[i],a=s.runWebGLProgram(r,[o],e.dtype,n,g);return{dataId:a.dataId,shape:t,dtype:a.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{shape:y}=i,r=s,g=vt(o.shape),n=a3(y,g),a=vt(n);q(g===a,()=>`The new shape (${n}) has ${a} elements and the old shape (${o.shape}) has ${g} elements. The new shape and old shape must have the same number of elements.`);const p=r.texData.get(o.dataId);return p.isPacked&&!cm(o.shape,n)&&!(p.texture!==null&&cm(p.shape,n))?bct(o,n,r):(r.incRef(o.dataId),{dataId:o.dataId,shape:n,dtype:o.dtype})}const Act={kernelName:zv,backendName:"webgl",kernelFunc:Nt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uI{constructor(t,s){this.variableNames=["x"];const{windowSize:i,batchSize:o,inSize:y,outSize:r}=t;this.outputShape=[o,r];const g=Math.floor(i/4)*4,n=i%4;let a="sumValue += dot(values, ones);";if(s!=null){const h=1/s;a=`sumValue += dot(values * ${nu(h)?h.toPrecision(2):h}, ones);`}let p="";y%i>0&&(p=`
        if (inIdx < 0 || inIdx >= ${y}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        float sumValue = 0.0;

        for (int i = 0; i < ${g}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${a}
        }

        int inIdx = inOffset + ${g};
        if (${n===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${a}
        } else if (${n===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${a}
        } else if (${n===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${a}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ict{constructor(t,s){this.variableNames=["x"];const{windowSize:i,batchSize:o,inSize:y,outSize:r}=t;this.outputShape=[o,r];let g="0.0",n="";s==="prod"?g="1.0":s==="min"?(g="1.0 / 1e-20",n="min"):s==="max"&&(g="-1.0 / 1e-20",n="max");let a=`${s}(${s}(${s}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;s==="sum"?a="sumValue":s==="prod"?a="prodValue":s==="all"?a="allValue":s==="any"&&(a="anyValue");const p=Math.floor(i/4)*4,h=i%4;let u=`
      if (${s==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${s==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${n}(values, minMaxValue);
        if (${s==="min"} || ${s==="max"}) {
          minMaxValue = ${n}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,d="vec4";s==="all"?(g="1.0",u=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):s==="any"&&(g="0.0",u=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");let l="";y%i>0&&(l=`
        if (inIdx < 0 || inIdx >= ${y}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${g};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${l}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        vec4 minMaxValue = vec4(${g});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${p}; i += 4) {
          int inIdx = inOffset + i;
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${p};
        if (${h===1}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${u}
        } else if (${h===2}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${u}
        } else if (${h===3}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${u}
        }
        setOutput(${a});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rct(e){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const s=t.length?t[t.length-1].outSize:e[1],i=Cg(s);t.push({inSize:s,windowSize:i,outSize:Math.ceil(s/i)})}return t}function il(e,t,s,i){const o=Rct(e.shape);let y=e;for(let r=0;r<o.length;r++){const{inSize:g,windowSize:n,outSize:a}=o[r];let p,h;s==="mean"?p=r===0?new uI({windowSize:n,inSize:g,batchSize:e.shape[0],outSize:a},g):new uI({windowSize:n,inSize:g,batchSize:e.shape[0],outSize:a}):p=new Ict({windowSize:n,inSize:g,batchSize:e.shape[0],outSize:a},s),h=y,y=i.runWebGLProgram(p,[y],t),h.dataId!==e.dataId&&i.disposeIntermediateTensorInfo(h)}return y}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nct{constructor(t,s){this.variableNames=["A"];const i=new Array(t.length);for(let r=0;r<i.length;r++)i[r]=t[s[r]];this.outputShape=i,this.rank=i.length;const o=we(this.rank),y=Pct(s);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${y}));
    }
    `}}function Pct(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const s=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],i=new Array(t);for(let o=0;o<e.length;o++)i[e[o]]=s[o];return i.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fct{constructor(t,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const i=new Array(t.length);for(let p=0;p<i.length;p++)i[p]=t[s[p]];if(this.outputShape=i,this.rank=i.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=we(this.rank),y=L4("rc",this.rank),r=new Array(this.rank);for(let p=0;p<s.length;p++)r[s[p]]=y[p];const g=`vec2(${r.slice(-2).join()})`,n=`++${y[this.rank-1]} < ${i[this.rank-1]}`,a=`getChannel(getA(${r.join()}), ${g})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${a};
      if(${n}) {
        result[1] = ${a};
      }
      --${y[this.rank-1]};
      if(++${y[this.rank-2]} < ${i[this.rank-2]}) {
        result[2] = ${a};
        if(${n}) {
          result[3] = ${a};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zg(e,t,s){const i=pt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Fct(e.shape,t):new Nct(e.shape,t);return s.runWebGLProgram(i,[e],e.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oct(e,t,s,i){const o=t,y=e.shape.length,r=se(o,e.shape);let g=r;const n=We(g,y),a=n!=null;let p=e;a&&(p=zg(e,n,i),g=tn(g.length,y)),Bn("sum",g,y);const[h,u]=Nn(p.shape,g);let d=h;s&&(d=_e(h,r));const l=vt(u),m=vt(e.shape)/l,f=Nt({inputs:{x:p},attrs:{shape:[m,l]},backend:i}),v=YS(e.dtype),S=il(f,v,"sum",i),x=Nt({inputs:{x:S},attrs:{shape:d},backend:i});return i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(S),a&&i.disposeIntermediateTensorInfo(p),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vg(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,keepDims:r}=i;return Oct(o,y,r,s)}const Dct={kernelName:Xv,backendName:"webgl",kernelFunc:Vg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function as(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{perm:y}=i,r=s,g=o.shape.length,n=new Array(g);for(let p=0;p<n.length;p++)n[p]=o.shape[y[p]];let a;if(r.shouldExecuteOnCPU([o])){const h=r.texData.get(o.dataId).values,u=jC(h,o.shape,o.dtype,y,n);a=r.makeTensorInfo(n,o.dtype);const d=r.texData.get(a.dataId);d.values=u}else a=zg(o,y,r);return a}const Lct={kernelName:Gl,backendName:"webgl",kernelFunc:as};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4=1e3;function fm({a:e,b:t,transposeA:s,transposeB:i,backend:o,bias:y=null,preluActivationWeights:r=null,leakyreluAlpha:g=0,activation:n=null}){const a=e.shape.length,p=t.shape.length,h=s?e.shape[a-2]:e.shape[a-1],u=i?t.shape[p-1]:t.shape[p-2],d=s?e.shape[a-1]:e.shape[a-2],l=i?t.shape[p-2]:t.shape[p-1],c=e.shape.slice(0,-2),m=t.shape.slice(0,-2),f=vt(c),v=vt(m),x=Qt(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([d,l]);q(h===u,()=>`Error in matMul: inner shapes (${h}) and (${u}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${s} and transposeB=${i} must match.`);const T=s?[f,h,d]:[f,d,h],C=i?[v,l,u]:[v,u,l],w=Nt({inputs:{x:e},backend:o,attrs:{shape:T}}),b=Nt({inputs:{x:t},backend:o,attrs:{shape:C}}),E=[w,b],A=Math.max(f,v),I=s?w.shape[1]:w.shape[2],R=y!=null,N=r!=null,F=n==="leakyrelu",P=n!=null?cc(n,!0):null,D=R||N||F||P!=null;let M;if((d===1||l===1)&&I>G4&&D===!1){let k=w,V=b;s&&(k=as({inputs:{x:w},backend:o,attrs:{perm:[0,2,1]}}),E.push(k)),i&&(V=as({inputs:{x:b},backend:o,attrs:{perm:[0,2,1]}}),E.push(V));const W=l!==1,K=l===1;let B=k;W&&(B=Nt({inputs:{x:k},backend:o,attrs:{shape:[A,I,1]}}),E.push(B));const G=l===1?2:1;let O=V;K&&(O=Nt({inputs:{x:V},backend:o,attrs:{shape:[A,1,I]}}),E.push(O));const $=JC({inputs:{a:B,b:O},backend:o});M=Vg({inputs:{x:$},backend:o,attrs:{axis:G,keepDims:!0}}),E.push($)}else{const k=Os(e.dtype,t.dtype),V=new V4(T,C,[A,d,l],s,i,R,P,N,F),W=[w,b];if(y!=null&&W.push(y),N&&W.push(r),F){const K=o.makeTensorInfo([],"float32",Ya(g,"float32"));W.push(K),E.push(K)}M=o.runWebGLProgram(V,W,k)}const L=Nt({inputs:{x:M},backend:o,attrs:{shape:x}});E.push(M);for(const k of E)o.disposeIntermediateTensorInfo(k);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mct(e){const{inputs:t,backend:s,attrs:i}=e,{a:o,b:y,bias:r,preluActivationWeights:g}=t,{transposeA:n,transposeB:a,activation:p,leakyreluAlpha:h}=i;return fm({a:o,b:y,transposeA:n,transposeB:a,backend:s,bias:r,preluActivationWeights:g,leakyreluAlpha:h,activation:p})}const $ct={kernelName:zp,backendName:"webgl",kernelFunc:Mct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hI="return abs(x);";function Bct(e){const{inputs:t,backend:s}=e,{x:i}=t;if(s.shouldExecuteOnCPU([i])&&i.dtype!=="complex64"){const y=s.texData.get(i.dataId),r=O4(y.values);return s.makeTensorInfo(i.shape,i.dtype,r)}let o;return pt().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new va(i.shape,hI):o=new hr(i.shape,hI),s.runWebGLProgram(o,[i],i.dtype)}const kct={kernelName:Jm,backendName:"webgl",kernelFunc:Bct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zct=Pi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Vct=fe({opSnippet:zct}),Gct={kernelName:Ec,backendName:"webgl",kernelFunc:Vct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uct=Pi+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,Wct=fe({opSnippet:Uct}),Hct={kernelName:bc,backendName:"webgl",kernelFunc:Wct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cI="return a + b;",Xct=zn({opSnippet:cI,packedOpSnippet:cI,supportsComplex:!0,cpuKernelImpl:eht}),Yct={kernelName:Iu,backendName:"webgl",kernelFunc:Xct};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kct{constructor(t,s){this.outputShape=[],this.outputShape=t,this.variableNames=s.map((y,r)=>`T${r}`);const i=[];this.variableNames.forEach(y=>{i.push(`float v${y} = get${y}AtOutCoords();`)});const o=this.variableNames.map(y=>`v${y}`).join(" + ");this.userCode=`
      void main() {
        ${i.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jct{constructor(t,s){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=s.map((y,r)=>`T${r}`);const i=[];this.variableNames.forEach(y=>{i.push(`vec4 v${y} = get${y}AtOutCoords();`)});const o=this.variableNames.map(y=>`v${y}`).join(" + ");this.userCode=`
      void main() {
        ${i.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qd(e){const{inputs:t,backend:s}=e,i=t;if(i.length===1)return Ms({inputs:{x:i[0]},backend:s});if(i.length>pt().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const n=Math.floor(i.length/2),a=qd({inputs:i.slice(0,n),backend:s}),p=qd({inputs:i.slice(n),backend:s});return qd({inputs:[a,p],backend:s})}const o=i.map(n=>n.dtype).reduce((n,a)=>Os(n,a)),y=i.map(n=>n.shape),g=pt().getBool("WEBGL_PACK")?new jct(i[0].shape,y):new Kct(i[0].shape,y);return s.runWebGLProgram(g,i,o)}const Zct={kernelName:Qm,backendName:"webgl",kernelFunc:qd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jct(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,keepDims:r}=i,g=o.shape.length,n=se(y,o.shape);let a=n;const p=We(a,g);let h=o;p!=null&&(h=as({inputs:{x:o},backend:s,attrs:{perm:p}}),a=tn(a.length,g)),Bn("all",a,g);const[u,d]=Nn(h.shape,a),l=vt(d),c=Nt({inputs:{x:h},backend:s,attrs:{shape:[-1,l]}}),m=il(c,c.dtype,"all",s);let f;if(r){const v=_e(u,n);f=Nt({inputs:{x:m},backend:s,attrs:{shape:v}})}else f=Nt({inputs:{x:m},backend:s,attrs:{shape:u}});return s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(m),p!=null&&s.disposeIntermediateTensorInfo(h),f}const Qct={kernelName:G2,backendName:"webgl",kernelFunc:Jct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qct(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,keepDims:r}=i,g=o.shape.length,n=se(y,o.shape);let a=n;const p=We(a,g);let h=o;p!=null&&(h=as({inputs:{x:o},backend:s,attrs:{perm:p}}),a=tn(a.length,g)),Bn("any",a,g);const[u,d]=Nn(h.shape,a),l=vt(d),c=Nt({inputs:{x:h},backend:s,attrs:{shape:[-1,l]}}),m=il(c,c.dtype,"any",s);let f;if(r){const v=_e(u,n);f=Nt({inputs:{x:m},backend:s,attrs:{shape:v}})}else f=Nt({inputs:{x:m},backend:s,attrs:{shape:u}});return s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(m),p!=null&&s.disposeIntermediateTensorInfo(h),f}const _ct={kernelName:U2,backendName:"webgl",kernelFunc:qct};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tft{constructor(t,s,i){this.variableNames=["A"];const{windowSize:o,batchSize:y,outSize:r}=t;i||this.variableNames.push("bestIndicesA"),this.outputShape=[y,r];const g=s==="max"?">":"<",n=i?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${n};
          float candidate = getA(batch, inIdx);
          if (candidate ${g} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eft{constructor(t,s,i,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,q(t.length>2,()=>`Packed arg${i.charAt(0).toUpperCase()+i.slice(1)} supports only inputs with rank above 2.`);const y=t[t.length-1],r=Math.ceil(y/s);this.outputShape=t.slice(0,-1),r>1&&this.outputShape.push(r),o||this.variableNames.push("bestIndicesA");const g=this.outputShape,n=g.length,a=we(n),p=ss("coords",n);let h,u;if(r===1){u=n+1;const b=we(u);h=`
        ${b} sourceLocR = ${b}(${p.join()}, 0);
        ++${p[n-1]};
        ${b} sourceLocG = ${b}(${p.join()}, 0);
        ++${p[n-2]};
        ${b} sourceLocA = ${b}(${p.join()}, 0);
        --${p[n-1]};
        ${b} sourceLocB = ${b}(${p.join()}, 0);
        --${p[n-2]};`}else u=n,h=`
        ${a} sourceLocR = coords;
        ++${p[n-1]};
        ${a} sourceLocG = coords;
        ++${p[n-2]};
        ${a} sourceLocA = coords;
        --${p[n-1]};
        ${a} sourceLocB = coords;
        --${p[n-2]};`;const d=["x","y","z","w","u","v"].slice(0,u),l="."+d[u-1],c=d.map(b=>"int "+b),m=ss("sourceLocR",u-1).concat("inIdx.r"),f=ss("sourceLocG",u-1).concat("inIdx.g"),v=ss("sourceLocB",u-1).concat("inIdx.b"),S=ss("sourceLocA",u-1).concat("inIdx.a"),x=i==="max"?"greaterThan":"lessThan",T=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${f.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${S.join()})));`,C=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${f.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${S.join()}) : 0.)`,w=o?"":`
      float getBestIndicesAChannel(${c.join()}) {
        return getChannel(getBestIndicesA(${d.join()}),
                                          vec2(${d.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${c.join()}) {
        return getChannel(getA(${d.join()}),
                               vec2(${d.slice(-2).join()}));
      }
      ${w}
      void main() {
        ${a} coords = getOutputCoords();
        bool hasNextCol = ${p[n-1]} < ${g[n-1]-1};
        bool hasNextRow = ${p[n-2]} < ${g[n-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${l}, sourceLocG${l},
          sourceLocB${l}, sourceLocA${l}) * ${s};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${s}; i++) {
          inIdx = srcIdx;
          ${T}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U4(e,t,s,i=null){let o=t.shape[0],y=t.shape[1];i!=null&&(o=i.shape[0],y=i.shape[1]);const r=Cg(y),g={windowSize:r,inSize:y,batchSize:o,outSize:Math.ceil(y/r)},n=new tft(g,s,i==null),a=[t];i!=null&&a.push(i);const p=e.runWebGLProgram(n,a,"int32");if(p.shape[1]===1)return p;const h=U4(e,t,s,p);return e.disposeIntermediateTensorInfo(p),h}function W4(e,t,s,i=null){const o=i!=null?i.shape:t.shape,y=o[o.length-1],r=Cg(y),g=new eft(o,r,s,i==null),n=i==null?[t]:[t,i],a=e.runWebGLProgram(g,n,"int32");if(a.shape.length===t.shape.length){const p=W4(e,t,s,a);return e.disposeIntermediateTensorInfo(a),p}return a}function H4(e,t,s,i){const o=[s];if(Bn("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,t.shape.length),!pt().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const y=[],r=e.texData.get(t.dataId),g=r!==null&&r.isPacked;let n=t;g&&(n=e.unpackTensor(t),y.push(n));const[a,p]=Nn(n.shape,o),h=vt(p),u=Nt({inputs:{x:n},backend:e,attrs:{shape:[-1,h]}});y.push(u);const d=U4(e,u,i);y.push(d);const l=Nt({inputs:{x:d},backend:e,attrs:{shape:a}});return y.forEach(c=>e.disposeIntermediateTensorInfo(c)),l}return W4(e,t,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nft(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y}=i;let r=se(y,o.shape);const g=We(r,o.shape.length);let n=o;const a=[];g!=null&&(n=as({inputs:{x:o},backend:s,attrs:{perm:g}}),a.push(n),r=tn(r.length,n.shape.length)),Bn("argMax",[r[0]],n.shape.length);const p=H4(s,n,r[0],"max");return a.forEach(h=>s.disposeIntermediateTensorInfo(h)),p}const sft={kernelName:qm,backendName:"webgl",kernelFunc:nft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ift(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y}=i;let r=se(y,o.shape);const g=We(r,o.shape.length);let n=o;const a=[];g!=null&&(n=as({inputs:{x:o},backend:s,attrs:{perm:g}}),a.push(n),r=tn(r.length,n.shape.length)),Bn("argMin",[r[0]],n.shape.length);const p=H4(s,n,r[0],"min");return a.forEach(h=>s.disposeIntermediateTensorInfo(h)),p}const rft={kernelName:_m,backendName:"webgl",kernelFunc:ift};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aft=Pi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,oft=fe({opSnippet:aft}),lft={kernelName:Ac,backendName:"webgl",kernelFunc:oft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uft=Pi+"return log(x + sqrt(x * x + 1.0));",hft=fe({opSnippet:uft}),cft={kernelName:Ic,backendName:"webgl",kernelFunc:hft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fft=Pi+`
  return atan(x);
`,dft=fe({opSnippet:fft}),pft={kernelName:Rc,backendName:"webgl",kernelFunc:dft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mft=ZC+`
  return atan(a, b);
`,vft=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+sl+`
  return result;
`,gft=zn({opSnippet:mft,packedOpSnippet:vft}),xft={kernelName:Pc,backendName:"webgl",kernelFunc:gft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yft=Pi+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Sft=fe({opSnippet:yft}),Tft={kernelName:Nc,backendName:"webgl",kernelFunc:Sft};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fc{constructor(t,s,i,o=!1,y=!1){if(this.variableNames=["x"],s==="avg"&&i)throw new Error("Cannot compute positions for average pool.");const r=t.filterWidth,g=t.strideHeight,n=t.strideWidth,a=t.dilationHeight,p=t.dilationWidth,h=t.effectiveFilterHeight,u=t.effectiveFilterWidth,d=t.padInfo.top,l=t.padInfo.left;this.outputShape=t.outShape;const c=s==="avg",m=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,f=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let v="0.0";if(c||(v="-1.0 / 1e-20"),i){const b=">=";this.userCode=`
        const ivec2 strides = ivec2(${g}, ${n});
        const ivec2 pads = ivec2(${d}, ${l});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${a}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${u};
                wC += ${p}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${b} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?y?m:f:`wR * ${u} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const S="max";let x=`${s}(${s}(${s}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;s==="avg"&&(x="avgValue / max(count, 1.0)");const T=Math.floor(r/4)*4,C=r%4,w=`
      if (${c}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${S}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${g}, ${n});
      const ivec2 pads = ivec2(${d}, ${l});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${a}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${T}; wC += 4) {
            int xC = xCCorner + wC * ${p};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${p}, d),
              getValue(batch, xR, xC + 2 * ${p}, d),
              getValue(batch, xR, xC + 3 * ${p}, d)
            );

            ${w}
          }

          int xC = xCCorner + ${T};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${w}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${p}, d),
              initializationValue,
              initializationValue
            );

            ${w}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${p}, d),
              getValue(batch, xR, xC + 2 * ${p}, d),
              initializationValue
            );

            ${w}
          }
        }
        setOutput(${x});
      }
    `}}class QC{constructor(t,s,i,o=!1,y=!1){if(this.variableNames=["x"],s==="avg"&&i)throw new Error("Cannot compute positions for average pool.");const r=t.filterWidth,g=t.strideDepth,n=t.strideHeight,a=t.strideWidth,p=t.dilationDepth,h=t.dilationHeight,u=t.dilationWidth,d=t.effectiveFilterDepth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,m=t.padInfo.front,f=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;const S=s==="avg";let x="0.0";if(S||(x="-1.0 / 1e-20"),i){const A=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${g}, ${n}, ${a});
        const ivec3 pads = ivec3(${m}, ${f}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${d};
              wD += ${p}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${l};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${c};
                  wC += ${u}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${A} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?y?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${l} * ${c} +
                      wR * ${c} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const T="max";let C=`${s}(${s}(${s}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;s==="avg"&&(C="avgValue / max(count, 1.0)");const w=Math.floor(r/4)*4,b=r%4,E=`
      if (${S}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${T}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${g}, ${n}, ${a});
      const ivec3 pads = ivec3(${m}, ${f}, ${v});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${p}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${l};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${w}; wC += 4) {
              int xC = xCCorner + wC * ${u};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${u}, ch),
                getValue(batch, xD, xR, xC + 2 * ${u}, ch),
                getValue(batch, xD, xR, xC + 3 * ${u}, ch)
              );

              ${E}
            }

            int xC = xCCorner + ${w};
            if (${b===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${b===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${u}, ch),
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${b===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${u}, ch),
                getValue(batch, xD, xR, xC + 2 * ${u}, ch),
                initializationValue
              );

              ${E}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cft(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t;Gf(o,"avgPool");const{filterSize:y,strides:r,pad:g,dimRoundingMode:n}=i,a=1;q($n(r,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`);const p=Ri(o.shape,y,r,a,g,n);if(p.filterWidth===1&&p.filterHeight===1&&oe(p.inShape,p.outShape))return Ms({inputs:{x:o},backend:s});const h=new fc(p,"avg",!1);return s.runWebGLProgram(h,[o],"float32")}const wft={kernelName:tv,backendName:"webgl",kernelFunc:Cft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eft(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{filterSize:y,strides:r,pad:g,dimRoundingMode:n,dataFormat:a}=i,p=[1,1,1],h=Qr(o.shape,y,r,p,g,n,a),u=new QC(h,"avg",!1);return s.runWebGLProgram(u,[o],"float32")}const bft={kernelName:ev,backendName:"webgl",kernelFunc:Eft};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aft{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const s=t.filterHeight,i=t.filterWidth,o=t.strideHeight,y=t.strideWidth,r=t.dilationHeight,g=t.dilationWidth,n=t.effectiveFilterHeight,a=t.effectiveFilterWidth,p=n-1-t.padInfo.top,h=a-1-t.padInfo.left,u=1/(s*i);this.userCode=`
      const ivec2 pads = ivec2(${p}, ${h});
      const float avgMultiplier = float(${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n};
            wR += ${r}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a};
            wC+= ${g}) {
            float dyC = float(dyCCorner + wC) / ${y}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Ift{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const s=t.filterDepth,i=t.filterHeight,o=t.filterWidth,y=t.strideDepth,r=t.strideHeight,g=t.strideWidth,n=t.dilationDepth,a=t.dilationHeight,p=t.dilationWidth,h=t.effectiveFilterDepth,u=t.effectiveFilterHeight,d=t.effectiveFilterWidth,l=h-1-t.padInfo.front,c=u-1-t.padInfo.top,m=d-1-t.padInfo.left,f=1/(s*i*o);this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${m});
      const float avgMultiplier = float(${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${n}) {
          float dyD = float(dyDCorner + wD) / ${y}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${p}) {
              float dyC = float(dyCCorner + wC) / ${g}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rft(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,input:y}=t,r=y,{filterSize:g,strides:n,pad:a,dimRoundingMode:p}=i,h=[1,1,1],u=Qr(r.shape,g,n,h,a,p),d=new Ift(u);return s.runWebGLProgram(d,[o],r.dtype)}const Nft={kernelName:H2,backendName:"webgl",kernelFunc:Rft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pft(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,input:y}=t,r=y;Gf([o,y],"avgPoolGrad");const{filterSize:g,strides:n,pad:a}=i,p=Ri(r.shape,g,n,1,a),h=new Aft(p);return s.runWebGLProgram(h,[o],r.dtype)}const Fft={kernelName:W2,backendName:"webgl",kernelFunc:Pft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oft(e){const{inputs:t,backend:s,attrs:i}=e,{a:o,b:y}=t,{transposeA:r,transposeB:g}=i;return fm({a:o,b:y,transposeA:r,transposeB:g,backend:s})}const Dft={kernelName:nv,backendName:"webgl",kernelFunc:Oft};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lft{constructor(t,s,i,o,y,r){this.outputShape=[],this.variableNames=["x","mean","variance"],Qt(t,s),Qt(t,i);let g="0.0";o!=null&&(Qt(t,o),this.variableNames.push("offset"),g="getOffsetAtOutCoords()");let n="1.0";y!=null&&(Qt(t,y),this.variableNames.push("scale"),n="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${g};
        float scale = ${n};
        float inv = scale * inversesqrt(variance + float(${r}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mft{constructor(t,s,i,o,y,r){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Qt(t,s),Qt(t,i);let g="vec4(0.0)";o!=null&&(Qt(t,o),this.variableNames.push("offset"),g="getOffsetAtOutCoords()");let n="vec4(1.0)";y!=null&&(Qt(t,y),this.variableNames.push("scale"),n="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${g};
        vec4 scale = ${n};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${r}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ft=({inputs:e,backend:t,attrs:s})=>{const{x:i,mean:o,variance:y,offset:r,scale:g}=e;q(o.shape.length===y.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(r==null||o.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(g==null||o.shape.length===g.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:n}=s;n==null&&(n=.001);const a=[i,o,y];let p=null;r!=null&&(p=r.shape,a.push(r));let h=null;g!=null&&(h=g.shape,a.push(g));const u=pt().getBool("WEBGL_PACK_NORMALIZATION")?new Mft(i.shape,o.shape,y.shape,p,h,n):new Lft(i.shape,o.shape,y.shape,p,h,n);return t.runWebGLProgram(u,a,a[0].dtype)},Bft={kernelName:mv,backendName:"webgl",kernelFunc:$ft};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kft{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const s=we(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const i=zft(this.rank);let o;const y=t.map((r,g)=>`sourceLoc.${x1[g]} = start[${g}] + coords.${x1[g]};`);o=`
        ${s} sourceLoc;
        ${s} coords = getOutputCoords();
        ${y.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${i}));
      }
    `}}const x1=["x","y","z","w","u","v"];function zft(e){if(e===1)return"sourceLoc";if(e<=6)return x1.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vft{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=we(this.rank),i=ss("coords",this.rank),o=ss("sourceLoc",this.rank),y=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,r=`getChannel(getSource(${o.join()}), ${y})`,g=`
      result.x = ${r};
      if (++${i[this.rank-1]} < ${t[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${r};
        --${o[this.rank-1]};
      }
    `,n=this.rank===1?"":`
      --${i[this.rank-1]};
      if (++${i[this.rank-2]} < ${t[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${r};
        if (++${i[this.rank-1]} < ${t[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${r};
        }
      }
    `,a=this.rank<=4?`sourceLoc = coords +
            ${s}(${t.map((p,h)=>`start[${h}]`).join()});`:t.map((p,h)=>`${o[h]} = ${i[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        ${s} sourceLoc;
        ${a}
        vec4 result = vec4(0.);
        ${g}
        ${n}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gft(e,t,s,i){const o=i.texData.get(e.dataId),y=i.makeTensorInfo(s,e.dtype),r=i.texData.get(y.dataId);Object.assign(r,o),r.refCount=1,r.shape=s,r.dtype=e.dtype;let g=XT(t,Vt(e.shape));o.slice&&(g+=o.slice.flatOffset),r.slice={flatOffset:g,origDataId:o.slice&&o.slice.origDataId||e.dataId};const n=i.dataRefCount.get(r.slice.origDataId)||1;return i.dataRefCount.set(r.slice.origDataId,n+1),y}function Gu(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{begin:y,size:r}=i,[g,n]=Tg(o,y,r);if(UT(o,g,n),vt(n)===0)return s.makeTensorInfo(n,o.dtype,[]);if(s.shouldExecuteOnCPU([o])||o.dtype==="string"){const h=s.texData.get(o.dataId),u=Dht(h.values,g,n,o.shape,o.dtype);return s.makeTensorInfo(n,o.dtype,u)}const{isPacked:a}=s.texData.get(o.dataId),p=HT(o.shape,g,n);if(a||!p){const h=pt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Vft(n):new kft(n),u=[g];return s.runWebGLProgram(h,[o],o.dtype,u)}return s.uploadToGPU(o.dataId),Gft(o,g,n,s)}const Uft={kernelName:Hv,backendName:"webgl",kernelFunc:Gu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wft=e=>{const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{blockShape:y,crops:r}=i;q(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const g=y.reduce((v,S)=>v*S),n=Rf(o.shape,y,g),a=Nf(n.length,y.length),p=Pf(o.shape,y,g),h=JT(r,y.length),u=QT(p,r,y.length),d=[],l=Nt({inputs:{x:o},backend:s,attrs:{shape:n}}),c=as({inputs:{x:l},backend:s,attrs:{perm:a}}),m=Nt({inputs:{x:c},backend:s,attrs:{shape:p}}),f=Gu({inputs:{x:m},backend:s,attrs:{begin:h,size:u}});return d.push(l),d.push(c),d.push(m),d.forEach(v=>s.disposeIntermediateTensorInfo(v)),f},Hft={kernelName:sv,backendName:"webgl",kernelFunc:Wft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xft(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,weights:y}=t,{size:r}=i,g=s.readSync(o.dataId),n=s.readSync(y.dataId),a=F4(g,n,y.dtype,y.shape,r);return s.makeTensorInfo([r],y.dtype,a)}const Yft={kernelName:X2,backendName:"webgl",kernelFunc:Xft};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kft=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,jft=`
  return float(int(a.r) & int(b.r));
`;function Zft(e){const{inputs:t,backend:s}=e,{a:i,b:o}=t,y=pt().getBool("WEBGL_PACK_BINARY_OPERATIONS"),r=pt().getNumber("WEBGL_VERSION");if(s.shouldExecuteOnCPU([i,o])||r===1){const n=s.texData.get(i.dataId).values,a=s.texData.get(o.dataId).values,[p,h]=sht(i.shape,o.shape,n,a,i.dtype),u=s.makeTensorInfo(h,i.dtype),d=s.texData.get(u.dataId);return d.values=p,u}let g;return y?g=new zu(Kft,i.shape,o.shape,!1):g=new Uo(jft,i.shape,o.shape),s.runWebGLProgram(g,[i,o],i.dtype)}const Jft={kernelName:iv,backendName:"webgl",kernelFunc:Zft};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qft(e){const{inputs:t,backend:s}=e,{s0:i,s1:o}=t,y=s.readSync(i.dataId),r=s.readSync(o.dataId),g=Qt(Array.from(y),Array.from(r));return s.makeTensorInfo([g.length],"int32",Int32Array.from(g))}const qft={kernelName:Y2,backendName:"webgl",kernelFunc:Qft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ft="return float(a != b);",X4=zn({opSnippet:_ft,cpuKernelImpl:Eht,dtype:"bool"}),tdt={kernelName:Ov,backendName:"webgl",kernelFunc:X4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wf(e){const{inputs:t,backend:s}=e,{input:i}=t,o=s.texData.get(i.dataId);return Ms({inputs:{x:o.complexTensorInfos.real},backend:s})}const edt={kernelName:bS,backendName:"webgl",kernelFunc:Wf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ndt="return float(int(x));";function sdt(e,t){const s=new hr(e.shape,ndt),i=t.runWebGLProgram(s,[e],"int32");return{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y1(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{dtype:y}=i;if(y==="complex64"){if(o.dtype==="complex64")return Ms({inputs:{x:o},backend:s});const r=fn(o.shape),g=y1({inputs:{x:o},backend:s,attrs:{dtype:"float32"}}),n=no({inputs:{real:g,imag:r},backend:s});return r.dispose(),s.disposeIntermediateTensorInfo(g),n}if(o.dtype==="complex64"){const r=Wf({inputs:{input:o},backend:s}),g=y1({inputs:{x:r},backend:s,attrs:{dtype:y}});return s.disposeIntermediateTensorInfo(r),g}if(!o3(o.dtype,y)){const r=Ms({inputs:{x:o},backend:s});return{dataId:r.dataId,shape:r.shape,dtype:y}}if(s.shouldExecuteOnCPU([o])){const r=s.texData.get(o.dataId).values,[g,n,a]=iht(r,o.shape,o.dtype,y);return s.makeTensorInfo(g,n,a)}if(y==="int32")return sdt(o,s);if(y==="bool"){const r=s.makeTensorInfo([],"bool",Ln("bool",1)),n=X4({inputs:{a:o,b:r},backend:s});return s.disposeIntermediateTensorInfo(r),n}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${y}`)}const idt={kernelName:Fc,backendName:"webgl",kernelFunc:y1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fI="return ceil(x);",rdt=fe({opSnippet:fI,packedOpSnippet:fI,cpuKernelImpl:rht}),adt={kernelName:Oc,backendName:"webgl",kernelFunc:rdt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class odt{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ldt{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function udt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{clipValueMin:y,clipValueMax:r}=i;let g;pt().getBool("WEBGL_PACK_CLIP")?g=new ldt(o.shape):g=new odt(o.shape);const n=[[y],[r]];return s.runWebGLProgram(g,[o],o.dtype,n)}const hdt={kernelName:Dc,backendName:"webgl",kernelFunc:udt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cdt{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dI(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function fdt(e){const{inputs:t,backend:s}=e,{x:i}=t,o=s.texData.get(i.dataId),y=new cdt(i.shape),r=[dI(i,o.complexTensorInfos.real),dI(i,o.complexTensorInfos.imag)];return s.runWebGLProgram(y,r,r[0].dtype)}const ddt={kernelName:rv,backendName:"webgl",kernelFunc:fdt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pdt{constructor(t){this.outputShape=[],this.outputShape=gr(t,1),this.variableNames=t.map((r,g)=>`T${g}`);const s=new Array(t.length-1);s[0]=t[0][1];for(let r=1;r<s.length;r++)s[r]=s[r-1]+t[r][1];const i=[`if (yC < ${s[0]}) setOutput(getT0(yR, yC));`];for(let r=1;r<s.length;r++){const g=s[r-1];i.push(`else if (yC < ${s[r]}) setOutput(getT${r}(yR, yC-${g}));`)}const o=s.length,y=s[s.length-1];i.push(`else setOutput(getT${o}(yR, yC-${y}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${i.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mdt{constructor(t,s){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=gr(t,s);const i=this.outputShape,o=i.length,y=we(o),r=ss("coords",o),g=["x","y","z","w","u","v"].slice(0,o);this.variableNames=t.map((c,m)=>`T${m}`);const n=new Array(t.length-1);n[0]=t[0][s];for(let c=1;c<n.length;c++)n[c]=n[c-1]+t[c][s];const a=g[s],p=g.slice(-2),h=g.join();let u=`if (${a} < ${n[0]}) {
        return getChannel(
            getT0(${h}), vec2(${p.join()}));
        }`;for(let c=1;c<n.length;c++){const m=n[c-1];u+=`
        if (${a} < ${n[c]}  && ${a} >= ${n[c-1]}) {
          return getChannel(
            getT${c}(${Dd(g,a,m)}),
            vec2(${Dd(p,a,m)}));
        }`}const d=n.length,l=n[n.length-1];u+=`
        return getChannel(
          getT${d}(${Dd(g,a,l)}),
          vec2(${Dd(p,a,l)}));`,this.userCode=`
      float getValue(${g.map(c=>"int "+c)}) {
        ${u}
      }

      void main() {
        ${y} coords = getOutputCoords();
        vec4 result = vec4(getValue(${r}), 0., 0., 0.);

        ${r[o-1]} = ${r[o-1]} + 1;
        if (${r[o-1]} < ${i[o-1]}) {
          result.g = getValue(${r});
        }

        ${r[o-2]} = ${r[o-2]} + 1;
        if (${r[o-2]} < ${i[o-2]}) {
          result.a = getValue(${r});
        }

        ${r[o-1]} = ${r[o-1]} - 1;
        if (${r[o-2]} < ${i[o-2]} &&
            ${r[o-1]} < ${i[o-1]}) {
          result.b = getValue(${r});
        }
        setOutput(result);
      }
    `}}function Dd(e,t,s){const i=e.indexOf(t);return e.map((y,r)=>r===i?`${y} - ${s}`:y).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gg(e){const{inputs:t,backend:s}=e,{input:i}=t,o=s.texData.get(i.dataId);return Ms({inputs:{x:o.complexTensorInfos.imag},backend:s})}const vdt={kernelName:cS,backendName:"webgl",kernelFunc:Gg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xh(e,t,s){const i=e[0].dtype;if(i==="complex64"){const d=e.map(v=>Wf({inputs:{input:v},backend:s})),l=e.map(v=>Gg({inputs:{input:v},backend:s})),c=xh(d,t,s),m=xh(l,t,s),f=no({inputs:{real:c,imag:m},backend:s});return d.forEach(v=>s.disposeIntermediateTensorInfo(v)),l.forEach(v=>s.disposeIntermediateTensorInfo(v)),s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(m),f}let o=s.shouldExecuteOnCPU(e);if(i==="string"&&(o=!0),o){const d=e.map(x=>{const C=[-1,vt(x.shape.slice(t))];return Nt({inputs:{x},backend:s,attrs:{shape:C}})}),l=d.map(x=>({vals:s.readSync(x.dataId),shape:x.shape})),c=gr(d.map(x=>x.shape),1),m=d[0].shape[0]===1,f=aht(l,c,i,m),v=gr(e.map(x=>x.shape),t),S=s.makeTensorInfo(v,i,f);return d.forEach(x=>s.disposeIntermediateTensorInfo(x)),S}const y=e.filter(d=>vt(d.shape)>0),r=pt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&y[0].shape.length>1;if(y.length===1){const d=r?new hr(e[0].shape,la):new va(e[0].shape,la);return s.runWebGLProgram(d,e,i)}const g=pt().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(y.length>g){const d=[];for(let c=0;c<y.length;c+=g){const m=y.slice(c,c+g);d.push(xh(m,t,s))}const l=xh(d,t,s);for(const c of d)s.disposeIntermediateTensorInfo(c);return l}if(r){const d=new mdt(y.map(l=>l.shape),t);return s.runWebGLProgram(d,y,i)}const{tensors2D:n,outShape:a}=gdt(y,t,s),p=new pdt(n.map(d=>d.shape)),h=s.runWebGLProgram(p,n,i);n.forEach(d=>s.disposeIntermediateTensorInfo(d));const u=Nt({inputs:{x:h},attrs:{shape:a},backend:s});return s.disposeIntermediateTensorInfo(h),u}function gdt(e,t,s){const i=gr(e.map(y=>y.shape),t);return{tensors2D:e.map(y=>Nt({inputs:{x:y},attrs:{shape:[-1,vt(y.shape.slice(t))]},backend:s})),outShape:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y4(e){const{inputs:t,backend:s,attrs:i}=e,{axis:o}=i,y=se(o,t[0].shape)[0],r=t.map(a=>a.shape);KT(r,y);const g=gr(t.map(a=>a.shape),y);if(vt(g)===0)return s.makeTensorInfo(g,t[0].dtype,[]);const n=t.filter(a=>vt(a.shape)>0);return n.length===1?Ms({inputs:{x:n[0]},backend:s}):xh(n,y,s)}const xdt={kernelName:av,backendName:"webgl",kernelFunc:Y4};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K4{constructor(t,s=!1,i=null,o=!1,y=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const r=t.padInfo.top,g=t.padInfo.left,n=t.strideHeight,a=t.strideWidth,p=t.dilationHeight,h=t.dilationWidth,u=t.filterHeight,d=t.filterWidth,l=Math.floor(t.inChannels/4)*4,c=t.inChannels%4,m=t.dataFormat==="channelsLast",f=m?1:2,v=m?2:3,S=m?3:1;let x="",T="";i&&(o?x=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:y?x=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:x=`
          float activation(float x) {
            ${i}
          }
        `,T="result = activation(result);");const C=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),y&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${n}, ${a});
      const ivec2 pads = ivec2(${r}, ${g});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${S}];

        ivec2 xRCCorner =
            ivec2(coords[${f}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u}; wR++) {
          int xR = xRCorner + wR * ${p};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${d}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${l}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${c===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${l}) *
                    getW(wR, wC, ${l}, d2);
              } else {
                dotProd +=
                    getX(batch, ${l}, xR, xC) *
                    getW(wR, wC, ${l}, d2);
              }

            } else if (${c===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${l}, d2),
                getW(wR, wC, ${l} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${l}),
                  getX(batch, xR, xC, ${l} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${l}, xR, xC),
                  getX(batch, ${l} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${c===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${l}, d2),
                getW(wR, wC, ${l} + 1, d2),
                getW(wR, wC, ${l} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${l}),
                  getX(batch, xR, xC, ${l} + 1),
                  getX(batch, xR, xC, ${l} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${l}, xR, xC),
                  getX(batch, ${l} + 1, xR, xC),
                  getX(batch, ${l} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${T}
        setOutput(result);
      }
    `}}class ydt{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const s=t.padInfo.front,i=t.padInfo.top,o=t.padInfo.left,y=t.strideDepth,r=t.strideHeight,g=t.strideWidth,n=t.dilationDepth,a=t.dilationHeight,p=t.dilationWidth,h=t.filterDepth,u=t.filterHeight,d=t.filterWidth,l=Math.floor(t.inChannels/4)*4,c=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${y}, ${r}, ${g});
      const ivec3 pads = ivec3(${s}, ${i}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${n};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${u}; wR++) {
            int xR = xRCorner + wR * ${a};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d}; wC++) {
              int xC = xCCorner + wC * ${p};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${l}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${c===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${l}) *
                  getW(wF, wR, wC, ${l}, d2);
              } else if (${c===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${l}),
                  getX(batch, xF, xR, xC, ${l} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${l}, d2),
                  getW(wF, wR, wC, ${l} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${c===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${l}),
                  getX(batch, xF, xR, xC, ${l} + 1),
                  getX(batch, xF, xR, xC, ${l} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${l}, d2),
                  getW(wF, wR, wC, ${l} + 1, d2),
                  getW(wF, wR, wC, ${l} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j4{constructor(t,s=!1,i=null,o=!1,y=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=jn(this.outputShape.length);const r=t.padInfo.left,g=t.strideWidth,n=t.dilationWidth,a=t.filterHeight,p=t.filterWidth,h=p;let u=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let m=0;m<p;m++)u+=`
           vec4 xTexelC${m*2};
           int xTexelC${m*2}Ready;
           vec4 xTexelC${m*2+1};
           int xTexelC${m*2+1}Ready;
           vec4 xC${m};`;u+=`
     for (int r = 0; r < ${a}; r++) {
      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {
       `;for(let m=0;m<p;m++)u+=`
           xTexelC${m*2} = vec4(0.0);
           xTexelC${m*2}Ready = 0;
           xTexelC${m*2+1} = vec4(0.0);
           xTexelC${m*2+1}Ready = 0;
           xC${m} = vec4(0.0);`;u+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let m=0;m<(h+1)/2;m++){const f=m*2;if(u+=`
           xC = xCCorner + ${f*n};
           `,g===1){if(f<p&&(r%2===1?(u+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${f}Ready == 0) {
                   xTexelC${f} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${f}.zw = vec2(0.0);
                   }
                   xTexelC${f}Ready = 1;
                 }
               `,n===1&&f>0?u+=`
                 xC${f} = vec4(xTexelC${f-2}.zw, xTexelC${f}.xy);
                 `:u+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${f} = vec4(previous.zw, xTexelC${f}.xy);
                   } else {
                     xC${f} = vec4(0.0, 0.0, xTexelC${f}.xy);
                   }
                   `):u+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${f}Ready == 0) {
                   xTexelC${f} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${f}.zw = vec2(0.0);
                   }
                   xTexelC${f}Ready = 1;
                 }

                 xC${f} = xTexelC${f};
                 `,f+1<p)){const v=r%2===0?k2(n):n;n%2===0&&r%2===1||n%2!==0&&r%2!==1?(u+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${f+1}Ready == 0) {
                     xTexelC${f+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${f+1}.zw = vec2(0.0);
                     }
                     xTexelC${f+1}Ready = 1;
                   }
                   `,n>1?u+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${f+1} = vec4(previous.zw, xTexelC${f+1}.xy);
                     } else {
                      xC${f+1} = vec4(0.0, 0.0, xTexelC${f+1}.xy);
                     }
                     `:u+=`
                     xC${f+1} = vec4(xTexelC${f}.zw, xTexelC${f+1}.xy);
                     `):v===1?u+=`
                     xC${f+1} = xTexelC${f};
                     `:u+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${f+1}Ready == 0) {
                       xTexelC${f+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${f+1}.zw = vec2(0.0);
                       }
                       xTexelC${f+1}Ready = 1;
                     }

                     xC${f+1} = xTexelC${f+1};
                     `}}else f<p&&(r%2===1?(u+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${f}Ready == 0) {
                   xTexelC${f} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${f}.zw = vec2(0.0);
                   }
                   xTexelC${f}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${f+1}Ready == 0) {
                   xTexelC${f+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${f+1}.zw = vec2(0.0);
                   }
                   xTexelC${f+1}Ready = 1;
                 }

                 xC${f} = vec4(xTexelC${f}.zw, xTexelC${f+1}.zw);
               `,f+1<p&&(u+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${f+1} = vec4(xTexelC${f+1}.xy, final.xy);
                 `)):(u+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${f}Ready == 0) {
                   xTexelC${f} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${f}.zw = vec2(0.0);
                   }
                   xTexelC${f}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${f+1}Ready == 0) {
                   xTexelC${f+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${f+1}.zw = vec2(0.);
                   }
                   xTexelC${f+1}Ready = 1;
                 }

                 xC${f} = vec4(
                   xTexelC${f}.xy, xTexelC${f+1}.xy);
               `,f+1<p&&(u+=`
                   xC${f+1} = vec4(xTexelC${f}.zw, xTexelC${f+1}.zw);
                 `)));f<p&&(u+=`
             wTexel = getW(r, ${f}, d1, d2);
             dotProd += xC${f}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${t.inChannels}) {
               dotProd += xC${f}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,f+1<p&&(u+=`
               wTexel = getW(r, ${f+1}, d1, d2);
               dotProd += xC${f+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${t.inChannels}) {
                 dotProd += xC${f+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}u+=`
     }
   `,u+=`
     }
   `,u+=`
     }
   `;let d="",l="";i&&(o?d=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${i}
         }`:y?d=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${i}
         }`:d=`vec4 activation(vec4 x) {
           ${i}
         }`,l="result = activation(result);");const c=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),y&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${d}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${u}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${c}
         ${l}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sdt{constructor(t,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=jn(this.outputShape.length);const{dataFormat:i}=s,o=ls(),y=i==="channelsLast",r=y?1:2,g=y?2:3,n=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`;let a="";for(let p=0;p<=1;p++)for(let h=0;h<=1;h++)a+=`
          blockIndex = rc.z + ${h};
          pos = rc.y + ${p};

          ${n}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${r}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${g}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${y}) {
                  innerDims = vec2(d1, ch);
                  result[${p*2+h}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${p*2+h}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${a}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dm(e,t){const s=e.length;return s>=3?t?[...e.slice(0,-3),e[s-3]*e[s-2],e[s-1]]:[...e.slice(0,-3),e[s-3],e[s-2]*e[s-1]]:!t&&s===1&&e[0]>1?[e[0],1]:null}function Z4({x:e,filter:t,convInfo:s,backend:i,bias:o=null,preluActivationWeights:y=null,leakyreluAlpha:r=0,activation:g=null}){const n=e.shape,a=i.texData.get(e.dataId),p=s.inChannels,h=n[0]*n[1]*n[2],u=s.outChannels,d=s.dataFormat==="channelsLast",l=!1,c=!1;let m;const f=[];if(y!=null){const x=dm(y.shape,d);x!=null&&(y=Nt({inputs:{x:y},backend:i,attrs:{shape:x}}),f.push(y))}if(o!=null){const x=dm(o.shape,d);x!=null&&(o=Nt({inputs:{x:o},backend:i,attrs:{shape:x}}),f.push(o))}if(!((h===1||u===1)&&p>G4)&&a.isPacked&&d&&a.texture!=null&&n[2]%2!==0&&oe(a.shape.slice(-3),n.slice(-3))){const x=n[0]*n[1]*(n[2]+1),T={dataId:e.dataId,shape:[1,x,s.inChannels],dtype:e.dtype},C=a.shape;a.shape=a.shape.slice(),a.shape[a.shape.length-2]++,q(cm(a.shape,T.shape),()=>`packed reshape ${a.shape} to ${T.shape} isn't free`);const w=Nt({inputs:{x:t},backend:i,attrs:{shape:[1,s.inChannels,s.outChannels]}});f.push(w);const b=fm({a:T,b:w,backend:i,transposeA:l,transposeB:c,bias:o,activation:g,preluActivationWeights:y,leakyreluAlpha:r}),E=i.texData.get(b.dataId);q(E.isPacked,()=>"batchMatMul result is expected to be packed"),a.shape=C,E.shape=s.outShape,m=Ms({inputs:{x:b},backend:i}),m.shape=s.outShape,f.push(b)}else{const x=s.outHeight*s.outWidth,T=Nt({inputs:{x:e},backend:i,attrs:{shape:d?[s.batchSize,x,s.inChannels]:[s.batchSize,s.inChannels,x]}}),C=Nt({inputs:{x:t},backend:i,attrs:{shape:[1,s.inChannels,s.outChannels]}}),w=fm({a:d?T:C,b:d?C:T,transposeA:!d,transposeB:c,backend:i,bias:o,activation:g,preluActivationWeights:y,leakyreluAlpha:r});m=Nt({inputs:{x:w},backend:i,attrs:{shape:s.outShape}}),f.push(T),f.push(C),f.push(w)}for(const x of f)i.disposeIntermediateTensorInfo(x);return m}function J4({x:e,filter:t,convInfo:s,backend:i,bias:o=null,preluActivationWeights:y=null,leakyreluAlpha:r=0,activation:g=null}){const{filterWidth:n,filterHeight:a,inChannels:p,outWidth:h,outHeight:u,dataFormat:d}=s,l=d==="channelsLast",c=n*a*p,m=u*h,f=[s.batchSize,c,m],v=!0,S=!1,x=[];if(y!=null){const L=dm(y.shape,l);L!=null&&(y=Nt({inputs:{x:y},backend:i,attrs:{shape:L}}),x.push(y))}if(o!=null){const L=dm(o.shape,l);L!=null&&(o=Nt({inputs:{x:o},backend:i,attrs:{shape:L}}),x.push(o))}const T=Nt({inputs:{x:t},backend:i,attrs:{shape:[1,c,vt(t.shape)/c]}});x.push(T);const C=new Sdt(f,s),w=[e.shape,[s.padInfo.top,s.padInfo.left],[s.strideHeight,s.strideWidth],[s.dilationHeight,s.dilationWidth],[s.inChannels],[s.filterWidth*s.inChannels],[s.outWidth]],b=i.runWebGLProgram(C,[e],"float32",w),E=Nt({inputs:{x:b},backend:i,attrs:{shape:f}});x.push(b),x.push(E);const A=o!=null,I=y!=null,R=g==="leakyrelu",N=g?cc(g,!0):null,F=new V4(l?E.shape:T.shape,l?T.shape:E.shape,l?[s.batchSize,m,s.outChannels]:[s.batchSize,s.outChannels,m],v,S,A,N,I,R),P=l?[E,T]:[T,E];if(o&&P.push(o),I&&P.push(y),R){const L=i.makeTensorInfo([],"float32",Ya(r,"float32"));P.push(L),x.push(L)}const D=i.runWebGLProgram(F,P,"float32"),M=Nt({inputs:{x:D},backend:i,attrs:{shape:s.outShape}});x.push(D);for(const L of x)i.disposeIntermediateTensorInfo(L);return M}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tdt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,filter:y}=t,{strides:r,pad:g,dataFormat:n,dilations:a,dimRoundingMode:p}=i,h=qr(n),u=Rn(o.shape,y.shape,r,a,g,p,!1,h);let d;if(u.filterHeight===1&&u.filterWidth===1&&u.dilationHeight===1&&u.dilationWidth===1&&u.strideHeight===1&&u.strideWidth===1&&(u.padInfo.type==="SAME"||u.padInfo.type==="VALID"))d=Z4({x:o,filter:y,convInfo:u,backend:s});else if(u.strideWidth<=2&&h==="channelsLast"&&pt().getBool("WEBGL_EXP_CONV")){const c=new j4(u),m=[[u.padInfo.top,u.padInfo.left],[u.strideHeight,u.strideWidth],[u.dilationHeight,u.dilationWidth],[u.inHeight,u.inWidth]];d=s.runWebGLProgram(c,[o,y],"float32",m)}else if(pt().getBool("WEBGL_CONV_IM2COL"))d=J4({x:o,filter:y,convInfo:u,backend:s});else{const c=new K4(u);d=s.runWebGLProgram(c,[o,y],"float32")}const l=Nt({inputs:{x:d},backend:s,attrs:{shape:u.outShape}});return s.disposeIntermediateTensorInfo(d),l}const Cdt={kernelName:ov,backendName:"webgl",kernelFunc:Tdt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wdt{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const s=t.strideHeight,i=t.strideWidth,o=t.padInfo.top,y=t.padInfo.left,r=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${s} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${i} - ${y};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              ${r?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Edt{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const s=t.filterHeight,i=t.filterWidth,o=t.strideHeight,y=t.strideWidth,r=t.dataFormat==="channelsLast",g=s-1-t.padInfo.top,n=i-1-t.padInfo.left,a=r?1:2,p=r?2:3,h=r?3:1;this.userCode=`
      const ivec2 pads = ivec2(${g}, ${n});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${a}], coords[${p}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${s} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${y}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${i} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${r}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class bdt{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const s=t.strideDepth,i=t.strideHeight,o=t.strideWidth,y=t.padInfo.front,r=t.padInfo.top,g=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${s} - ${y};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${i} - ${r};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${g};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Adt{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const s=t.filterDepth,i=t.filterHeight,o=t.filterWidth,y=t.strideDepth,r=t.strideHeight,g=t.strideWidth,n=s-1-t.padInfo.front,a=i-1-t.padInfo.top,p=o-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${n}, ${a}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${s}; wF++) {
          float dyF = float(dyFCorner + wF) / ${y}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${s} - 1 - wF;

          for (int wR = 0; wR < ${i}; wR++) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${i} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${g}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Idt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,dy:y}=t,{strides:r,pad:g,dataFormat:n,dimRoundingMode:a,filterShape:p}=i,h=qr(n),u=Rn(o.shape,p,r,1,g,a,!1,h),d=new wdt(u);return s.runWebGLProgram(d,[o,y],"float32")}const Rdt={kernelName:j2,backendName:"webgl",kernelFunc:Idt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ndt{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=jn(this.outputShape.length);const s=t.filterHeight,i=t.filterWidth,o=s-1-t.padInfo.top,y=i-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${y});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${s}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${s} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            int wCPerm = ${i} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${t.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${t.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pdt(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,filter:y}=t,{inputShape:r,strides:g,pad:n,dataFormat:a,dimRoundingMode:p}=i,h=qr(a),u=Rn(r,y.shape,g,1,n,p,!1,h);if(pt().getBool("WEBGL_PACK")&&h==="channelsLast"){const d=[[u.strideHeight,u.strideWidth]],l=new Ndt(u);return s.runWebGLProgram(l,[o,y],"float32",d)}else{const d=new Edt(u);return s.runWebGLProgram(d,[o,y],"float32")}}const Fdt={kernelName:lv,backendName:"webgl",kernelFunc:Pdt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Odt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,filter:y}=t,{strides:r,pad:g,dilations:n}=i,a=Za(o.shape,y.shape,r,n,g),p=new ydt(a);return s.runWebGLProgram(p,[o,y],"float32")}const Ddt={kernelName:uv,backendName:"webgl",kernelFunc:Odt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ldt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,dy:y}=t,{strides:r,pad:g,filterShape:n}=i,a=Za(o.shape,n,r,1,g),p=new bdt(a);return s.runWebGLProgram(p,[o,y],"float32")}const Mdt={kernelName:Z2,backendName:"webgl",kernelFunc:Ldt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $dt(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,filter:y}=t,{pad:r,strides:g,inputShape:n}=i,a=Za(n,y.shape,g,1,r),p=new Adt(a);return s.runWebGLProgram(p,[o,y],"float32")}const Bdt={kernelName:J2,backendName:"webgl",kernelFunc:$dt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kdt=Vu+`
  return cos(x);
`,zdt=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${sl}
  return result;
`,Vdt=fe({opSnippet:kdt,packedOpSnippet:zdt}),Gdt={kernelName:Lc,backendName:"webgl",kernelFunc:Vdt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Udt=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,Wdt=fe({opSnippet:Udt}),Hdt={kernelName:Mc,backendName:"webgl",kernelFunc:Wdt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xdt{constructor(t,s,i,o,y){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[r,g,n,a]=t,[p]=s,[h,u]=i;this.outputShape=[p,h,u,a];const d=o==="bilinear"?1:0,[l,c]=[`${g-1}.0`,`${n-1}.0`],[m,f,v]=h>1?[`${(g-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${l} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${l}`],[S,x,T]=u>1?[`${(n-1)/(u-1)}`,"(x2-x1) * width_ratio",`x1*${c} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${c}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${S});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${r}) {
          return;
        }

        float height_scale = ${f};
        float width_scale = ${x};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${l} ) {
          setOutput(float(${y}));
          return;
        }
        float in_x = ${T};
        if( in_x < 0.0 || in_x > ${c} ) {
          setOutput(float(${y}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${d} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ydt=e=>{const{inputs:t,backend:s,attrs:i}=e,{image:o,boxes:y,boxInd:r}=t,{cropSize:g,method:n,extrapolationValue:a}=i,p=new Xdt(o.shape,y.shape,g,n,a);return s.runWebGLProgram(p,[o,y,r],"float32")},Kdt={kernelName:q2,backendName:"webgl",kernelFunc:Ydt};var dc;(function(e){e.Prod="*",e.Sum="+"})(dc||(dc={}));class pI{constructor(t,s,i,o){this.op=t,this.outputShape=s,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const y=this.outputShape.length,r=this.op===dc.Prod?"1.0":"0.0",g=i?r:`getX(${mI(y,"coords",this.op)})`,n=this.outputShape[this.outputShape.length-1];let a="",p="";i?(a=o?`end != ${n-1}`:"end != 0",p=o?"end + 1":"end - 1"):(a=o?`end + pow2 < ${n}`:"end >= pow2",p=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${we(y)} coords = getOutputCoords();
        int end = ${vI(y,"coords",this.op)};
        float val = ${g};
        int pow2 = int(pow(2.0, index));
        if (${a}) {
          int idx = ${p};
          ${vI(y,"coords",this.op)} = idx;
          val ${this.op}= getX(${mI(y,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function mI(e,t,s){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${s} for rank ${e} is not yet supported`)}function vI(e,t,s){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw new Error(`Cumulative ${s} for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q4(e,t,s,i,o,y){const r=t.shape.length,g=We([i],r);let n=t;g!=null&&(n=as({inputs:{x:t},backend:s,attrs:{perm:g}}));const a=tn(1,r)[0];if(a!==r-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${i}`);const p=n.shape[a];let h=Ms({inputs:{x:n},backend:s});for(let u=0;u<=Math.ceil(Math.log2(p))-1;u++){const d=new pI(e,n.shape,!1,y),l=[[u]],c=h;h=s.runWebGLProgram(d,[h],h.dtype,l),s.disposeIntermediateTensorInfo(c)}if(o){const u=new pI(e,n.shape,o,y),d=h;h=s.runWebGLProgram(u,[h],h.dtype),s.disposeIntermediateTensorInfo(d)}if(g!=null){const u=Ja(g),d=as({inputs:{x:h},backend:s,attrs:{perm:u}});return s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(n),d}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jdt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,exclusive:r,reverse:g}=i;return Q4(dc.Prod,o,s,y,r,g)}const Zdt={kernelName:Q2,backendName:"webgl",kernelFunc:jdt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jdt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,exclusive:r,reverse:g}=i;return Q4(dc.Sum,o,s,y,r,g)}const Qdt={kernelName:hv,backendName:"webgl",kernelFunc:Jdt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qdt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,weights:y}=t,{size:r,binaryOutput:g}=i;if(o.shape.length===1){const n=s.readSync(o.dataId),a=s.readSync(y.dataId),p=F4(n,a,y.dtype,y.shape,r);return s.makeTensorInfo([r],y.dtype,p)}else if(o.shape.length===2){const n=s.bufferSync(o),a=s.bufferSync(y),p=nht(n,a,r,g);return s.makeTensorInfo(p.shape,y.dtype,p.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const _dt={kernelName:_2,backendName:"webgl",kernelFunc:qdt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tpt{constructor(t,s,i){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=s,this.dataFormat=i,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${s};
      int offset_h = imod(h, ${s});
      int in_w = w / ${s};
      int offset_w = imod(w, ${s});
      int offset_d = (offset_h * ${s} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ept(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{blockSize:y,dataFormat:r}=i,g=o.shape[0],n=r==="NHWC"?o.shape[1]:o.shape[2],a=r==="NHWC"?o.shape[2]:o.shape[3],p=r==="NHWC"?o.shape[3]:o.shape[1],h=n*y,u=a*y,d=p/(y*y),l=r==="NHWC"?[g,h,u,d]:[g,d,h,u],c=new tpt(l,y,r);return s.runWebGLProgram(c,[o],o.dtype)}const npt={kernelName:tS,backendName:"webgl",kernelFunc:ept};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q4{constructor(t,s=!1,i=null,o=!1,y=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=jn(this.outputShape.length);const r=t.filterHeight,g=t.filterWidth,n=t.outChannels/t.inChannels;let a="",p="";i&&(o?a=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:y?a=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:a=`
          float activation(float x) {
            ${i}
          }
        `,p="result = activation(result);");const h=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),y&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${a}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${n};
        int q = d2 - d1 * ${n};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${r}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _4{constructor(t,s=!1,i=null,o=!1,y=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=jn(this.outputShape.length);const r=t.outChannels/t.inChannels,g=t.padInfo.left,n=t.strideWidth,a=t.dilationWidth,p=t.filterHeight,h=t.filterWidth,u=h;let d=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let f=0;f<h;f++)d+=`
          vec4 xTexelC${f*2};
          int xTexelC${f*2}Ready;
          vec4 xTexelC${f*2+1};
          int xTexelC${f*2+1}Ready;
          vec4 xC${f};`;d+=`
    for (int r = 0; r < ${p}; r++) {
      `;for(let f=0;f<h;f++)d+=`
          xTexelC${f*2} = vec4(0.0);
          xTexelC${f*2}Ready = 0;
          xTexelC${f*2+1} = vec4(0.0);
          xTexelC${f*2+1}Ready = 0;
          xC${f} = vec4(0.0);`;d+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let f=0;f<(u+1)/2;f++){const v=f*2;if(d+=`
          xC = xCCorner + ${v*a};
          `,n===1){if(v<h&&(g%2===1?(d+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,a===1&&v>0?d+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:d+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):d+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<h)){const S=g%2===0?k2(a):a;a%2===0&&g%2===1||a%2!==0&&g%2!==1?(d+=`
                  xCOffset = xC + imod(pads[1], 2) + ${S};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,a>1?d+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:d+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):S===1?d+=`
                    xC${v+1} = xTexelC${v};
                    `:d+=`
                    xCOffset = xC + ${S};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<h&&(g%2===1?(d+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<h&&(d+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(d+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<h&&(d+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<h&&(d+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<h&&(d+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}d+=`
    }
  `,d+=`
      }
    `;let l="",c="";i&&(o?l=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:y?l=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:l=`vec4 activation(vec4 x) {
          ${i}
        }`,c="result = activation(result);");const m=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),y&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${r};
        int q = d2 - d1 * ${r};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${d}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,filter:y}=t,{strides:r,pad:g,dilations:n,dimRoundingMode:a}=i;let p=n;p==null&&(p=[1,1]),q($n(r,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${r} and dilations '${p}'`);const h=Rn(o.shape,y.shape,r,p,g,a,!0);let u;pt().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?u=new _4(h):u=new q4(h);const d=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return s.runWebGLProgram(u,[o,y],"float32",d)}const ipt={kernelName:cv,backendName:"webgl",kernelFunc:spt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rpt{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const s=t.strideHeight,i=t.strideWidth,o=t.padInfo.top,y=t.padInfo.left,r=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${r} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${s} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${i} - ${y};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class apt{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const s=t.filterHeight,i=t.filterWidth,o=t.strideHeight,y=t.strideWidth,r=s-1-t.padInfo.top,g=i-1-t.padInfo.left,n=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${r}, ${g});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${s}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${s} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${y}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${i} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${n}; dm++) {
              int d2 = d1 * ${n} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function opt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,dy:y}=t,{strides:r,dilations:g,pad:n,dimRoundingMode:a,filterShape:p}=i,h=Rn(o.shape,p,r,g,n,a,!0),u=new rpt(h);return s.runWebGLProgram(u,[o,y],"float32")}const lpt={kernelName:eS,backendName:"webgl",kernelFunc:opt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function upt(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,filter:y}=t,{strides:r,dilations:g,pad:n,dimRoundingMode:a,inputShape:p}=i,h=Rn(p,y.shape,r,g,n,a,!0),u=new apt(h);return s.runWebGLProgram(u,[o,y],"float32")}const hpt={kernelName:nS,backendName:"webgl",kernelFunc:upt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cpt{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fpt(e){const{inputs:t,backend:s}=e,{x:i}=t,o=[...i.shape,...i.shape],y=vt(i.shape),r=Nt({inputs:{x:i},backend:s,attrs:{shape:[y]}}),g=new cpt(y),n=s.runWebGLProgram(g,[r],r.dtype),a=Nt({inputs:{x:n},backend:s,attrs:{shape:o}});return s.disposeIntermediateTensorInfo(r),s.disposeIntermediateTensorInfo(n),a}const dpt={kernelName:sS,backendName:"webgl",kernelFunc:fpt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ppt{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:s,inWidth:i,padInfo:o,strideHeight:y,strideWidth:r,filterHeight:g,filterWidth:n,dilationHeight:a,dilationWidth:p}=t,{top:h,left:u}=o;this.userCode=`
      const ivec2 strides = ivec2(${y}, ${r});
      const ivec2 pads = ivec2(${h}, ${u});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${g}; h++) {
          int hIn = hBeg + h * ${a};

          if (hIn >= 0 && hIn < ${s}) {
            for (int w = 0; w < ${n}; w++) {
              int wIn = wBeg + w * ${p};

              if (wIn >= 0 && wIn < ${i}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mpt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,filter:y}=t,{strides:r,pad:g,dilations:n}=i,a=Tf(o.shape,y.shape,r,g,"NHWC",n);let p;const h=new ppt(a);p=s.runWebGLProgram(h,[o,y],"float32");const u=Nt({inputs:{x:p},backend:s,attrs:{shape:a.outShape}});return s.disposeIntermediateTensorInfo(p),u}const vpt={kernelName:fv,backendName:"webgl",kernelFunc:mpt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gpt(e){const{inputs:t,backend:s,attrs:i}=e,{equation:o}=i,y=t,{allDims:r,summedDims:g,idDims:n}=rC(o,y.length);oC(r.length,n,y);const{path:a,steps:p}=lC(g,n),h=p.length;let u=null,d=r.length;const l=[];for(let c=0;c<h;++c){for(const m of p[c]){const{permutationIndices:f,expandDims:v}=aC(d,n[m]);let S;uC(f)?S=y[m]:(S=as({inputs:{x:y[m]},backend:s,attrs:{perm:f}}),l.push(S));const x=S.shape.slice();for(let T=0;T<v.length;++T)x.splice(v[T],0,1);oe(S.shape,x)||(S=Nt({inputs:{x:S},backend:s,attrs:{shape:x}}),l.push(S)),u===null?u=S:(u=JC({inputs:{a:S,b:u},backend:s}),l.push(u))}c<h-1&&(a[c]>=0&&(u=Vg({inputs:{x:u},backend:s,attrs:{axis:a[c]-(r.length-d),keepDims:!1}}),l.push(u)),d--)}for(const c of l)c!==u&&s.disposeIntermediateTensorInfo(c);return u}const xpt={kernelName:iS,backendName:"webgl",kernelFunc:gpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ypt="return (x >= 0.0) ? x : (exp(x) - 1.0);",Spt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Tpt=fe({opSnippet:ypt,packedOpSnippet:Spt}),Cpt={kernelName:Bc,backendName:"webgl",kernelFunc:Tpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wpt="return (b >= 0.0) ? a : a * (b + 1.0);",Ept=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,bpt=e=>{const{inputs:t,backend:s}=e,{dy:i,y:o}=t,y=pt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zu(Ept,i.shape,o.shape):new Uo(wpt,i.shape,o.shape);return s.runWebGLProgram(y,[i,o],i.dtype)},Apt={kernelName:rS,backendName:"webgl",kernelFunc:bpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ipt=`
  return vec4(equal(a, b));
`,Rpt="return float(a == b);",Npt=zn({opSnippet:Rpt,packedOpSnippet:Ipt,dtype:"bool",cpuKernelImpl:oht}),Ppt={kernelName:dv,backendName:"webgl",kernelFunc:Npt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fpt=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${qT};
  float a1 = ${_T};
  float a2 = ${tC};
  float a3 = ${eC};
  float a4 = ${nC};
  float a5 = ${sC};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,Opt=fe({opSnippet:Fpt}),Dpt={kernelName:kc,backendName:"webgl",kernelFunc:Opt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lpt=Vu+`
  return exp(x);
`,Mpt=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,t5=fe({opSnippet:Lpt,packedOpSnippet:Mpt,cpuKernelImpl:lht,dtype:"float32"}),$pt={kernelName:zc,backendName:"webgl",kernelFunc:t5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S1(e){const{inputs:t,attrs:s,backend:i}=e,{dim:o}=s,{input:y}=t,r=y.shape.length,g=y.shape.slice();let n=o;return o<0&&(q(-(r+1)<=o,()=>`Axis must be in the interval [${-(r+1)}, ${r}]`),n=r+o+1),g.splice(n,0,1),Nt({inputs:{x:y},backend:i,attrs:{shape:g}})}const Bpt={kernelName:pv,backendName:"webgl",kernelFunc:S1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gI="return exp(x) - 1.0;",kpt=fe({opSnippet:gI,packedOpSnippet:gI,cpuKernelImpl:uht}),zpt={kernelName:Vc,backendName:"webgl",kernelFunc:kpt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xI{constructor(t,s,i){this.variableNames=["real","imag"];const o=s[1];this.outputShape=s;const y=i?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,r=i?`${o}.0`:"1.0";let g;if(t==="real")g="return real * expR - imag * expI;";else if(t==="imag")g="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${y};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${g}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${r};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e5(e,t,s){const i=s.texData.get(e.dataId),o=vt(e.shape),y=e.shape[e.shape.length-1],r=o/y,g=Nt({inputs:{x:e},backend:s,attrs:{shape:[r,y]}}),n=g.shape,a=new xI("real",n,t),p=new xI("imag",n,t),h=[{dataId:i.complexTensorInfos.real.dataId,dtype:i.complexTensorInfos.real.dtype,shape:n},{dataId:i.complexTensorInfos.imag.dataId,dtype:i.complexTensorInfos.imag.dtype,shape:n}],u=s.runWebGLProgram(a,h,"float32"),d=s.runWebGLProgram(p,h,"float32"),l=no({inputs:{real:u,imag:d},backend:s});s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(d);const c=Nt({inputs:{x:l},backend:s,attrs:{shape:e.shape}});return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vpt(e){const{inputs:t,backend:s}=e,{input:i}=t;return e5(i,!1,s)}const Gpt={kernelName:aS,backendName:"webgl",kernelFunc:Vpt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Upt{constructor(t,s){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hf(e){const{backend:t,attrs:s}=e,{shape:i,value:o}=s;let{dtype:y}=s;if(y=y||bu(o),y==="string"){const r=Qe(y,vt(i));return r.fill(o),t.makeTensorInfo(i,y,r)}else{const r=new Upt(i,o),g=[[o]];return t.runWebGLProgram(r,[],y,g)}}const Wpt={kernelName:oS,backendName:"webgl",kernelFunc:Hf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hpt{constructor(t){this.variableNames=["Image"],this.outputShape=[];const s=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${s} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${s}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xpt={kernelName:lS,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:s}=e,i=t,o=new Hpt(s.shape);return i.runWebGLProgram(o,[s],s.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yI="return floor(x);",Ypt=fe({opSnippet:yI,packedOpSnippet:yI,cpuKernelImpl:hht}),Kpt={kernelName:Gc,backendName:"webgl",kernelFunc:Ypt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jpt=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Zpt=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Jpt=zn({opSnippet:jpt,packedOpSnippet:Zpt,dtype:"int32"}),Qpt={kernelName:Uc,backendName:"webgl",kernelFunc:Jpt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qpt{constructor(t){this.variableNames=["A"];const s=ls(),[i,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${i}.0);

        vec4 values = ${s.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _pt{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const s=ls(),[i,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${i}.0);
            vec4 values = ${s.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tmt={kernelName:nU,backendName:"webgl",kernelFunc:emt};let ml,sx=pt().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function emt(e){const{inputs:t,backend:s,attrs:i}=e;let{pixels:o}=t;const{numChannels:y}=i,r=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,g=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[n,a]=r?[o.videoWidth,o.videoHeight]:[o.width,o.height],p=[a,n],h=[a,n,y];if(g||r){const c=pt().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(ml==null||c!==sx)&&(sx=c,ml=document.createElement("canvas").getContext("2d",{willReadFrequently:sx})),ml.canvas.width=n,ml.canvas.height=a,ml.drawImage(o,0,0,n,a),o=ml.canvas}const u=s.makeTensorInfo(p,"int32");s.texData.get(u.dataId).usage=Ws.PIXELS,s.gpgpu.uploadPixelDataToTexture(s.getTexture(u.dataId),o);const d=pt().getBool("WEBGL_PACK")?new _pt(h):new qpt(h),l=s.runWebGLProgram(d,[u],"int32");return s.disposeData(u.dataId),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nmt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,filter:y,bias:r,preluActivationWeights:g}=t,{strides:n,pad:a,dataFormat:p,dilations:h,dimRoundingMode:u,activation:d,leakyreluAlpha:l}=i,c=qr(p),m=Rn(o.shape,y.shape,n,h,a,u,!1,c);let f;const v=[],S=r!=null,x=g!=null,T=d==="leakyrelu",C=()=>{const b=[o,y],E=(A,I)=>{if(I==="NCHW"&&A.shape.length===1&&A.shape[0]!==1){const R=Nt({inputs:{x:A},backend:s,attrs:{shape:[A.shape[0],1,1]}});return v.push(R),R}return A};if(S&&b.push(E(r,p)),x&&b.push(E(g,p)),T){const A=s.makeTensorInfo([],"float32",Ya(l,"float32"));b.push(A),v.push(A)}return b};if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))f=Z4({x:o,filter:y,convInfo:m,backend:s,bias:r,activation:d,preluActivationWeights:g,leakyreluAlpha:l});else if(m.strideWidth<=2&&c==="channelsLast"&&pt().getBool("WEBGL_EXP_CONV")){const b=d?cc(d,!0):null,E=new j4(m,S,b,x,T),A=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],I=C();f=s.runWebGLProgram(E,I,"float32",A)}else if(pt().getBool("WEBGL_CONV_IM2COL"))f=J4({x:o,filter:y,convInfo:m,backend:s,bias:r,activation:d,preluActivationWeights:g,leakyreluAlpha:l});else{const b=d?cc(d,!1):null,E=new K4(m,S,b,x,T),A=C();f=s.runWebGLProgram(E,A,"float32")}const w=Nt({inputs:{x:f},backend:s,attrs:{shape:m.outShape}});return v.push(f),v.forEach(b=>s.disposeIntermediateTensorInfo(b)),w}const smt={kernelName:Vp,backendName:"webgl",kernelFunc:nmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,filter:y,bias:r,preluActivationWeights:g}=t,{strides:n,pad:a,dilations:p,dimRoundingMode:h,activation:u,leakyreluAlpha:d}=i,l=[];let c=p;c==null&&(c=[1,1]),q($n(n,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${c}'`);const m=Rn(o.shape,y.shape,n,c,a,h,!0),f=pt().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,v=u?cc(u,f):null,S=[o,y],x=r!=null,T=g!=null,C=u==="leakyrelu";if(x&&S.push(r),T&&S.push(g),C){const A=s.makeTensorInfo([],"float32",Ya(d,"float32"));S.push(A),l.push(A)}let w;f?w=new _4(m,x,v,T,C):w=new q4(m,x,v,T,C);const b=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],E=s.runWebGLProgram(w,S,"float32",b);return l.forEach(A=>s.disposeIntermediateTensorInfo(A)),E}const rmt={kernelName:Gp,backendName:"webgl",kernelFunc:imt};class amt{constructor(t,s,i,o){this.sliceDim=t,this.strides=s,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=i;const y=we(i.length);let r=`
    int index;`;for(let g=0;g<this.sliceDim;g++)r+=`
          index = round(getIndices(coords[0], ${g}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[g]};
          flattenIndex += index * ${this.strides[g]};`;this.userCode=`
         void main() {
          ${y} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${r}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function omt(e){const{inputs:t,backend:s}=e,{params:i,indices:o}=t,y=o.shape,r=y[y.length-1],g=vt(i.shape),[n,a,p,h]=GT(i,o),u=Nt({inputs:{x:o},backend:s,attrs:{shape:[a,r]}}),d=Nt({inputs:{x:i},backend:s,attrs:{shape:[vt(i.shape)/p,p]}});if(s.shouldExecuteOnCPU([i,o])||i.dtype==="string"){const f=s.readSync(o.dataId),v=s.bufferSync(i),S=cht(f,v,i.dtype,a,r,p,h,i.shape,g);return s.makeTensorInfo(n,i.dtype,S.values)}const l=new amt(r,h,[a,p],i.shape),c=s.runWebGLProgram(l,[d,u],d.dtype),m=Nt({inputs:{x:c},backend:s,attrs:{shape:n}});return s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(c),m}const lmt={kernelName:uS,backendName:"webgl",kernelFunc:omt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class umt{constructor(t,s){this.variableNames=["A","indices"],this.outputShape=s,this.rank=s.length;const i=we(this.rank),o=hmt(t);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function hmt(e,t){const s=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[];for(let o=0;o<e.length;o++)o===2?i.push("index"):i.push(`${s[o]}`);return i.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n5(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,indices:y}=t,{axis:r,batchDims:g}=i,n=se(r,o.shape)[0];if(pt().get("DEBUG")){const v=s.readSync(y.dataId),S=o.shape[n];for(let x=0;x<v.length;++x){const T=v[x];q(T<=S-1&&T>=0,()=>`GatherV2: the index value ${T} is not in [0, ${S-1}]`)}}const a=cC(o,y,n,g),p=vt(y.shape),h=[],u=Nt({inputs:{x:o},backend:s,attrs:{shape:[a.batchSize,a.outerSize,a.dimSize,a.sliceSize]}}),d=Nt({inputs:{x:y},backend:s,attrs:{shape:[a.batchSize,p/a.batchSize]}});h.push(u),h.push(d);const l=[a.batchSize,a.outerSize,p/a.batchSize,a.sliceSize];if(s.shouldExecuteOnCPU([o,y])||o.dtype==="string"){const v=s.bufferSync(d),S=s.bufferSync(u),x=fht(S,v,l);return h.forEach(T=>s.disposeIntermediateTensorInfo(T)),s.makeTensorInfo(a.outputShape,x.dtype,x.values)}const c=new umt(u.shape,l),m=s.runWebGLProgram(c,[u,d],u.dtype);h.push(m);const f=Nt({inputs:{x:m},backend:s,attrs:{shape:a.outputShape}});return h.forEach(v=>s.disposeIntermediateTensorInfo(v)),f}const cmt={kernelName:vv,backendName:"webgl",kernelFunc:n5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fmt="return float(a > b);",dmt=`
  return vec4(greaterThan(a, b));
`,pmt=zn({opSnippet:fmt,packedOpSnippet:dmt,cpuKernelImpl:dht,dtype:"bool"}),mmt={kernelName:gv,backendName:"webgl",kernelFunc:pmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vmt="return float(a >= b);",gmt=`
  return vec4(greaterThanEqual(a, b));
`,xmt=zn({opSnippet:vmt,packedOpSnippet:gmt,dtype:"bool",cpuKernelImpl:pht}),ymt={kernelName:Wc,backendName:"webgl",kernelFunc:xmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Smt(e){const{inputs:t,backend:s}=e,{input:i}=t;return e5(i,!0,s)}const Tmt={kernelName:hS,backendName:"webgl",kernelFunc:Smt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cmt="return float(!isnan(x) && !isinf(x));",wmt=fe({opSnippet:Cmt,dtype:"bool"}),Emt={kernelName:Xc,backendName:"webgl",kernelFunc:wmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bmt="return float(isinf(x));",Amt=fe({opSnippet:bmt,dtype:"bool"}),Imt={kernelName:Yc,backendName:"webgl",kernelFunc:Amt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rmt="return float(isnan(x));",Nmt=fe({opSnippet:Rmt,dtype:"bool"}),Pmt={kernelName:Kc,backendName:"webgl",kernelFunc:Nmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fmt="return float(a < b);",Omt=`
  return vec4(lessThan(a, b));
`,Dmt=zn({opSnippet:Fmt,packedOpSnippet:Omt,cpuKernelImpl:mht,dtype:"bool"}),Lmt={kernelName:yv,backendName:"webgl",kernelFunc:Dmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mmt="return float(a <= b);",$mt=`
  return vec4(lessThanEqual(a, b));
`,Bmt=zn({opSnippet:Mmt,packedOpSnippet:$mt,cpuKernelImpl:vht,dtype:"bool"}),kmt={kernelName:Sv,backendName:"webgl",kernelFunc:Bmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zmt(e){const{backend:t,attrs:s}=e,{start:i,stop:o,num:y}=s,r=ght(i,o,y);return t.makeTensorInfo([r.length],"float32",r)}const Vmt={kernelName:fS,backendName:"webgl",kernelFunc:zmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gmt=Vu+`
  return x < 0.0 ? 0./0. : log(x);
`,Umt=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,Wmt=fe({opSnippet:Gmt,packedOpSnippet:Umt,cpuKernelImpl:xht}),Hmt={kernelName:jc,backendName:"webgl",kernelFunc:Wmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xmt=Vu+`
  return log(1.0 + x);
`,Ymt=fe({opSnippet:Xmt}),Kmt={kernelName:Zc,backendName:"webgl",kernelFunc:Ymt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jmt="return float(a >= 1.0 && b >= 1.0);",Zmt=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Jmt=zn({opSnippet:jmt,packedOpSnippet:Zmt,dtype:"bool"}),Qmt={kernelName:Tv,backendName:"webgl",kernelFunc:Jmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qmt="return float(!(x >= 1.0));",_mt=fe({opSnippet:qmt}),tvt={kernelName:Cv,backendName:"webgl",kernelFunc:_mt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const evt="return float(a >= 1.0 || b >= 1.0);",nvt=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,svt=zn({opSnippet:evt,packedOpSnippet:nvt,dtype:"bool"}),ivt={kernelName:wv,backendName:"webgl",kernelFunc:svt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rvt{constructor(t,s,i,o,y){this.variableNames=["x"],this.outputShape=[];const r=s,g=t[3]-1;this.outputShape=t;let n;const a=`float(${i}) + float(${o}) * sum`;y===.5?n=`inversesqrt(${a})`:y===1?n=`1.0/(${a})`:n=`exp(log(${a}) * float(-${y}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${r}; j <= ${r}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${g}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${n};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class avt{constructor(t,s,i,o,y){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const r=s,g=t[3]-1;this.outputShape=t;let n;const a=`float(${i}) + float(${o}) * sum`;y===.5?n=`inversesqrt(${a})`:y===1?n=`1.0/(${a})`:n=`exp(log(${a}) * float(-${y}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${r};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${r}; j <= ${r}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${g}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${n};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ovt=e=>{const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{depthRadius:y,bias:r,alpha:g,beta:n}=i,a=pt().getBool("WEBGL_PACK_NORMALIZATION")?new avt(o.shape,y,r,g,n):new rvt(o.shape,y,r,g,n);return s.runWebGLProgram(a,[o],o.dtype)},lvt={kernelName:Ev,backendName:"webgl",kernelFunc:ovt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uvt{constructor(t,s,i,o,y){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=s,this.bias=i,this.alpha=o,this.beta=y,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${s})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${s} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${i});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${y})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${y});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hvt=e=>{const{inputs:t,backend:s,attrs:i}=e,{x:o,y,dy:r}=t,{depthRadius:g,bias:n,alpha:a,beta:p}=i,h=new uvt(o.shape,g,n,a,p);return s.runWebGLProgram(h,[o,y,r],o.dtype)},cvt={kernelName:dS,backendName:"webgl",kernelFunc:hvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fvt(e,t,s,i){const o=vt(t),r=vt(e.shape)/o,g=Nt({inputs:{x:e},attrs:{shape:[r,o]},backend:i}),n=il(g,e.dtype,"max",i),a=Nt({inputs:{x:n},attrs:{shape:s},backend:i});return i.disposeIntermediateTensorInfo(g),i.disposeIntermediateTensorInfo(n),a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{reductionIndices:y,keepDims:r}=i,g=o.shape.length,n=se(y,o.shape);let a=n;const p=We(a,g),h=p!=null,u=s.shouldExecuteOnCPU([o]);let d=o;if(h){if(u){const S=s.texData.get(d.dataId).values,x=new Array(g);for(let w=0;w<x.length;w++)x[w]=o.shape[p[w]];const T=jC(S,o.shape,o.dtype,p,x);d=s.makeTensorInfo(x,o.dtype);const C=s.texData.get(d.dataId);C.values=T}else d=zg(o,p,s);a=tn(a.length,g)}Bn("max",a,g);const[l,c]=Nn(d.shape,a);let m=l;r&&(m=_e(l,n));let f;if(u){const S=s.texData.get(d.dataId).values,x=yht(S,vt(c),m,o.dtype);f=s.makeTensorInfo(m,o.dtype);const T=s.texData.get(f.dataId);T.values=x}else f=fvt(d,c,m,s);return h&&s.disposeIntermediateTensorInfo(d),f}const dvt={kernelName:bv,backendName:"webgl",kernelFunc:s5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pvt=ZC+`
  return max(a, b);
`,mvt=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+sl+`
  return result;
`,vvt=zn({opSnippet:pvt,packedOpSnippet:mvt,cpuKernelImpl:Sht}),gvt={kernelName:Jc,backendName:"webgl",kernelFunc:vvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xvt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t;Gf(o,"maxPool");const{filterSize:y,strides:r,pad:g,dimRoundingMode:n}=i,a=1;q($n(r,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`);const p=Ri(o.shape,y,r,a,g,n);if(p.filterWidth===1&&p.filterHeight===1&&oe(p.inShape,p.outShape))return Ms({inputs:{x:o},backend:s});const h=new fc(p,"max",!1);return s.runWebGLProgram(h,[o],o.dtype)}const yvt={kernelName:Av,backendName:"webgl",kernelFunc:xvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Svt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{filterSize:y,strides:r,pad:g,dataFormat:n,dimRoundingMode:a}=i,p=[1,1,1],h=Qr(o.shape,y,r,p,g,a,n),u=new QC(h,"max",!1);return s.runWebGLProgram(u,[o],o.dtype)}const Tvt={kernelName:Iv,backendName:"webgl",kernelFunc:Svt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cvt{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const s=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,y=t.effectiveFilterHeight,r=t.effectiveFilterWidth,g=y-1-t.padInfo.top,n=r-1-t.padInfo.left,a=y*r-1;this.userCode=`
      const ivec2 pads = ivec2(${g}, ${n});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${y};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${a} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${r} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class wvt{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const s=t.strideDepth,i=t.strideHeight,o=t.strideWidth,y=t.dilationDepth,r=t.dilationHeight,g=t.dilationWidth,n=t.effectiveFilterDepth,a=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=n-1-t.padInfo.front,u=a-1-t.padInfo.top,d=p-1-t.padInfo.left,l=n*a*p-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${u}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${n};
           wD += ${y}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${a};
              wR += ${r}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${g}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${l} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${a} * ${p} +
                  wR * ${p} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Evt(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,input:y}=t,r=y,{filterSize:g,strides:n,pad:a,dimRoundingMode:p}=i,h=[1,1,1],u=Qr(r.shape,g,n,h,a,p),d=new QC(u,"max",!0),l=s.runWebGLProgram(d,[r],r.dtype),c=new wvt(u),m=s.runWebGLProgram(c,[o,l],r.dtype);return s.disposeIntermediateTensorInfo(l),m}const bvt={kernelName:mS,backendName:"webgl",kernelFunc:Evt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Avt(e){const{inputs:t,backend:s,attrs:i}=e,{dy:o,input:y,output:r}=t,g=y;Gf([y,r],"maxPoolGrad");const{filterSize:n,strides:a,pad:p,dimRoundingMode:h}=i,u=Ri(g.shape,n,a,1,p,h),d=!0,l=new fc(u,"max",d),c=s.runWebGLProgram(l,[g],g.dtype),m=new Cvt(u),f=s.runWebGLProgram(m,[o,c],g.dtype);return s.disposeIntermediateTensorInfo(c),f}const Ivt={kernelName:pS,backendName:"webgl",kernelFunc:Avt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rvt(e,t,s,i){let o=new fc(s,"max",!1);const y=i.runWebGLProgram(o,[e],"float32");o=new fc(s,"max",!0,!0,t);const r=i.runWebGLProgram(o,[e],"float32");return[y,r]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nvt={kernelName:vS,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:s})=>{const{x:i}=e,{filterSize:o,strides:y,pad:r,includeBatchInIndex:g}=t,n=s;q(i.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);const a=[1,1];q($n(y,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${y} and dilations '${a}'`);const p=Ri(i.shape,o,y,a,r),[h,u]=Rvt(i,g,p,n);return[h,u]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pvt(e,t,s,i){const o=vt(t),r=vt(e.shape)/o,g=Nt({inputs:{x:e},attrs:{shape:[r,o]},backend:i}),n=il(g,"float32","mean",i),a=Nt({inputs:{x:n},attrs:{shape:s},backend:i});return i.disposeIntermediateTensorInfo(g),i.disposeIntermediateTensorInfo(n),a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fvt={kernelName:Rv,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:s})=>{const{x:i}=e,{keepDims:o,axis:y}=t,r=s,g=i.shape.length,n=se(y,i.shape);let a=n;const p=We(a,g),h=p!=null,u=r.shouldExecuteOnCPU([i]),d=[];let l=i;if(h){if(u){const x=r.texData.get(l.dataId).values,T=new Array(g);for(let b=0;b<T.length;b++)T[b]=i.shape[p[b]];const C=jC(x,i.shape,i.dtype,p,T);l=r.makeTensorInfo(T,i.dtype);const w=r.texData.get(l.dataId);w.values=C}else l=zg(i,p,r);d.push(l),a=tn(a.length,g)}Bn("sum",a,g);const[c,m]=Nn(l.shape,a);let f=c;o&&(f=_e(c,n));const v=Pvt(l,m,f,r);for(const S of d)r.disposeIntermediateTensorInfo(S);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ovt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,keepDims:r}=i,g=o.shape.length,n=se(y,o.shape);let a=n;const p=We(a,g);let h=o;p!=null&&(h=as({inputs:{x:o},backend:s,attrs:{perm:p}}),a=tn(a.length,o.shape.length)),Bn("min",a,g);const[u,d]=Nn(h.shape,a),l=vt(d),c=Nt({inputs:{x:h},backend:s,attrs:{shape:[-1,l]}}),m=il(c,c.dtype,"min",s);let f;if(r){const v=_e(u,n);f=Nt({inputs:{x:m},backend:s,attrs:{shape:v}})}else f=Nt({inputs:{x:m},backend:s,attrs:{shape:u}});return s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(m),p!=null&&s.disposeIntermediateTensorInfo(h),f}const Dvt={kernelName:Nv,backendName:"webgl",kernelFunc:Ovt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lvt=ZC+`
  return min(a, b);
`,Mvt=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+sl+`
  return result;
`,$vt=zn({opSnippet:Lvt,packedOpSnippet:Mvt,cpuKernelImpl:Tht}),Bvt={kernelName:Qc,backendName:"webgl",kernelFunc:$vt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kvt{constructor(t,s,i){this.variableNames=["x"],this.outputShape=s.map((p,h)=>p[0]+t[h]+p[1]);const o=t.length,y=we(o),r=s.map(p=>p[0]).join(","),g=s.map((p,h)=>p[0]+t[h]).join(","),n=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),a=i==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${r};
        int end = ${g};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${a};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${a};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${y} start = ${y}(${r});
      ${y} end = ${y}(${g});

      void main() {
        ${y} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${a};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${a};
          }
        }
        ${y} coords = outC - start;
        setOutput(getX(${n}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zvt{constructor(t,s,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s.map((l,c)=>l[0]+t[c]+l[1]);const o=t.length,y=we(o),r=s.map(l=>l[0]).join(","),g=s.map((l,c)=>l[0]+t[c]).join(","),n=ss("rc",o),a=ss("source",o),p=`${n[o-1]} < ${this.outputShape[o-1]}`,h=o===1?"source":`vec2(${a.slice(-2).join()})`,u=i==="reflect"?0:1;let d="";if(o===1){const l=`
        ${y} source = rc;
        if (source < start) {
          source = start * 2 - source - ${u};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${u};
        }
        source -= start;
      `;d=`
        ${y} rc = outputLoc;
        ${l}
        result[0] = getChannel(getX(${a.join()}), ${h});
        ${n[o-1]} += 1;
        if(${p}) {
          ${l}
          result[1] = getChannel(getX(${a.join()}), ${h});
        }
      `}else{const l=`
        ${y} source = rc;
        ${y} lt = ${y}(lessThan(source, start));
        ${y} gte = ${y}(greaterThanEqual(source, end));
        ${y} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${u}) +
                gte * ((end - 1) * 2 - source + ${u});
        source -= start;
      `;d=`
        ${y} rc = outputLoc;
        ${l}
        result[0] = getChannel(getX(${a.join()}), ${h});
        ${n[o-1]} += 1;
        if(${p}) {
          ${l}
          result[1] = getChannel(getX(${a.join()}), ${h});
        }
        rc = outputLoc;
        ${n[o-2]} += 1;
        if(${n[o-2]} < ${this.outputShape[o-2]}) {
          ${l}
          result[2] = getChannel(getX(${a.join()}), ${h});
          ${n[o-1]} += 1;
          if(${p}) {
            ${l}
            result[3] = getChannel(getX(${a.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${y} start = ${y}(${r});
      const ${y} end = ${y}(${g});

      void main() {
        ${y} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${d}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vvt=({inputs:e,backend:t,attrs:s})=>{const{x:i}=e,{paddings:o,mode:y}=s,r=pt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zvt(i.shape,o,y):new kvt(i.shape,o,y);return t.runWebGLProgram(r,[i],i.dtype)},Gvt={kernelName:Pv,backendName:"webgl",kernelFunc:Vvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uvt=`if (b == 0.0) return NAN;
  return mod(a, b);`,Wvt=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+sl+`
  return result;
`,Hvt=zn({opSnippet:Uvt,packedOpSnippet:Wvt}),Xvt={kernelName:qc,backendName:"webgl",kernelFunc:Hvt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yvt{constructor(t,s,i){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,i],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${s-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${s-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kvt=`
if (a == b) {
  return 1.0;
};
return a / b;`,jvt=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,i5=zn({opSnippet:Kvt,packedOpSnippet:jvt,checkOutOfBounds:!0}),Zvt={kernelName:$c,backendName:"webgl",kernelFunc:i5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SI="return a - b;",r5=zn({opSnippet:SI,packedOpSnippet:SI,supportsComplex:!0,cpuKernelImpl:Uht}),Jvt={kernelName:mf,backendName:"webgl",kernelFunc:r5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a5(e){const{inputs:t,backend:s,attrs:i}=e,{logits:o}=t,{dim:y}=i,r=se([y],o.shape),g=s5({inputs:{x:o},backend:s,attrs:{reductionIndices:r,keepDims:!1}}),n=_e(g.shape,r),a=Nt({inputs:{x:g},backend:s,attrs:{shape:n}}),p=r5({inputs:{a:o,b:a},backend:s}),h=t5({inputs:{x:p},backend:s}),u=Vg({inputs:{x:h},backend:s,attrs:{axis:r,keepDims:!1}}),d=Nt({inputs:{x:u},backend:s,attrs:{shape:n}}),l=i5({inputs:{a:h,b:d},backend:s});return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(d),l}const Qvt={kernelName:jv,backendName:"webgl",kernelFunc:a5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qvt(e){const{inputs:t,backend:s,attrs:i}=e,{logits:o}=t,{numSamples:y,seed:r,normalized:g}=i,n=g?o:a5({inputs:{logits:o},backend:s,attrs:{dim:o.shape.length-1}}),a=n.shape[0],p=n.shape[1],h=new Yvt(a,p,y),u=[[r]],d=s.runWebGLProgram(h,[n],"int32",u);return g||s.disposeIntermediateTensorInfo(n),d}const _vt={kernelName:gS,backendName:"webgl",kernelFunc:qvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tgt=Pi+`
  return -x;
`,egt=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function ngt(e){const{inputs:t,backend:s}=e,{x:i}=t;if(s.shouldExecuteOnCPU([i])){const y=s.texData.get(i.dataId),[r,g]=wht(y.values,i.shape,i.dtype);return s.makeTensorInfo(g,i.dtype,r)}let o;return pt().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new va(i.shape,egt):o=new hr(i.shape,tgt),s.runWebGLProgram(o,[i],i.dtype)}const sgt={kernelName:Fv,backendName:"webgl",kernelFunc:ngt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const igt=LT;function rgt(e){Vs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:s,attrs:i}=e,{boxes:o,scores:y}=t,{maxOutputSize:r,iouThreshold:g,scoreThreshold:n}=i,a=s.readSync(o.dataId),p=s.readSync(y.dataId),{selectedIndices:h}=igt(a,p,r,g,n);return s.makeTensorInfo([h.length],"int32",new Int32Array(h))}const agt={kernelName:xS,backendName:"webgl",kernelFunc:rgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ogt=MT;function lgt(e){Vs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:s,attrs:i}=e,{boxes:o,scores:y}=t,{maxOutputSize:r,iouThreshold:g,scoreThreshold:n,padToMaxOutputSize:a}=i,p=s.readSync(o.dataId),h=s.readSync(y.dataId),{selectedIndices:u,validOutputs:d}=ogt(p,h,r,g,n,a);return[s.makeTensorInfo([u.length],"int32",new Int32Array(u)),s.makeTensorInfo([],"int32",new Int32Array([d]))]}const ugt={kernelName:yS,backendName:"webgl",kernelFunc:lgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hgt=$T;function cgt(e){Vs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:s,attrs:i}=e,{boxes:o,scores:y}=t,{maxOutputSize:r,iouThreshold:g,scoreThreshold:n,softNmsSigma:a}=i,p=s.readSync(o.dataId),h=s.readSync(y.dataId),u=r,d=g,l=n,c=a,{selectedIndices:m,selectedScores:f}=hgt(p,h,u,d,l,c);return[s.makeTensorInfo([m.length],"int32",new Int32Array(m)),s.makeTensorInfo([f.length],"float32",new Float32Array(f))]}const fgt={kernelName:SS,backendName:"webgl",kernelFunc:cgt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dgt{constructor(t,s,i,o){this.variableNames=["indices"],this.outputShape=[t,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${i}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pgt=e=>{const{inputs:t,backend:s,attrs:i}=e,{indices:o}=t,{dtype:y,depth:r,onValue:g,offValue:n}=i,a=vt(o.shape),p=new dgt(a,r,g,n),h=Nt({inputs:{x:o},backend:s,attrs:{shape:[a]}}),u=s.runWebGLProgram(p,[h],y);s.disposeIntermediateTensorInfo(h);const d=[...o.shape,r],l=Nt({inputs:{x:u},backend:s,attrs:{shape:d}});return s.disposeIntermediateTensorInfo(u),l},mgt={kernelName:Lv,backendName:"webgl",kernelFunc:pgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pm(e){const{inputs:t,backend:s}=e,{x:i}=t;if(i.dtype==="complex64"){const o=Wf({inputs:{input:i},backend:s}),y=pm({inputs:{x:o},backend:s}),r=Gg({inputs:{input:i},backend:s}),g=pm({inputs:{x:r},backend:s}),n=no({inputs:{real:y,imag:g},backend:s});return s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(y),s.disposeIntermediateTensorInfo(r),s.disposeIntermediateTensorInfo(g),n}else return Hf({attrs:{shape:i.shape,dtype:i.dtype,value:i.dtype==="string"?"":0},backend:s})}const vgt={kernelName:qv,backendName:"webgl",kernelFunc:pm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5(e){const{inputs:t,backend:s}=e,{x:i}=t;if(i.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(i.dtype==="complex64"){const o=Wf({inputs:{input:i},backend:s}),y=o5({inputs:{x:o},backend:s}),r=Gg({inputs:{input:i},backend:s}),g=pm({inputs:{x:r},backend:s}),n=no({inputs:{real:y,imag:g},backend:s});return s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(y),s.disposeIntermediateTensorInfo(r),s.disposeIntermediateTensorInfo(g),n}else return Hf({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:s})}const ggt={kernelName:Dv,backendName:"webgl",kernelFunc:o5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xgt(e){const{inputs:t,backend:s,attrs:i}=e,{axis:o}=i;if(t.length===1)return S1({inputs:{input:t[0]},backend:s,attrs:{dim:o}});const y=t[0].shape,r=t[0].dtype;t.forEach(p=>{$s(y,p.shape,"All tensors passed to stack must have matching shapes"),q(r===p.dtype,()=>"All tensors passed to stack must have matching dtypes")});const g=[],n=t.map(p=>{const h=S1({inputs:{input:p},backend:s,attrs:{dim:o}});return g.push(h),h}),a=Y4({inputs:n,backend:s,attrs:{axis:o}});return g.forEach(p=>s.disposeIntermediateTensorInfo(p)),a}const ygt={kernelName:Mv,backendName:"webgl",kernelFunc:xgt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sgt{constructor(t,s,i){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=s.map((a,p)=>a[0]+t[p]+a[1]);const o=t.length,y=we(o),r=s.map(a=>a[0]).join(","),g=s.map((a,p)=>a[0]+t[p]).join(","),n=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${r};
        int end = ${g};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${y} start = ${y}(${r});
      ${y} end = ${y}(${g});

      void main() {
        ${y} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${y} coords = outC - start;
          setOutput(getX(${n}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tgt{constructor(t,s,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=s.map((c,m)=>c[0]+t[m]+c[1]);const o=t.length,y=we(o),r=s.map(c=>c[0]).join(","),g=s.map((c,m)=>c[0]+t[m]).join(","),n=ss("rc",o),a=ss("source",o),p=`${n[o-1]} < ${this.outputShape[o-1]}`,h=o===1?"source":`vec2(${a.slice(-2).join()})`,u=[`${y} rc = outputLoc;`,`${n[o-1]} += 1;
       if(${p}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${n[o-2]} += 1;
       if(${n[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${n[o-1]} += 1;
         if(${p}) {`],d=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let l="";for(let c=0,m=o===1?2:4;c<m;c++)l+=`
        ${u[c]}
        if (${d}) {
          result[${c}] = float(value);
        } else {
          ${y} source = rc - start;
          result[${c}] = getChannel(getX(${a.join()}), ${h});
        }
      `;l+=o===1?"} ":"}}",this.userCode=`
      const ${y} start = ${y}(${r});
      const ${y} end = ${y}(${g});

      void main() {
        ${y} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l5=e=>{const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{paddings:y,constantValue:r}=i;if(vt(o.shape)===0){const a=y.map((p,h)=>p[0]+o.shape[h]+p[1]);return Hf({backend:s,attrs:{shape:a,value:r,dtype:o.dtype}})}const g=pt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Tgt(o.shape,y,r):new Sgt(o.shape,y,r),n=[[r]];return s.runWebGLProgram(g,[o],o.dtype,n)},Cgt={kernelName:$v,backendName:"webgl",kernelFunc:l5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wgt=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Egt=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+sl+`
  return result;
`,bgt=zn({opSnippet:wgt,packedOpSnippet:Egt}),Agt={kernelName:tf,backendName:"webgl",kernelFunc:bgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Igt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{axis:y,keepDims:r}=i,g=o.shape.length,n=[],a=se(y,o.shape);let p=a;const h=We(p,g);let u=o;h!=null&&(u=as({inputs:{x:o},backend:s,attrs:{perm:h}}),p=tn(p.length,g),n.push(u)),Bn("prod",p,g);let d;if(s.shouldExecuteOnCPU([u])){const l=s.texData.get(u.dataId).values,{outVals:c,outShape:m,outDtype:f}=bht(u.shape,u.dtype,l,p);d=s.makeTensorInfo(m,f,c)}else{const[l,c]=Nn(u.shape,p),m=vt(c),f=Nt({inputs:{x:u},backend:s,attrs:{shape:[-1,m]}}),v=YS(o.dtype),S=il(f,v,"prod",s);d=Nt({inputs:{x:S},backend:s,attrs:{shape:l}}),n.push(f),n.push(S)}if(r){n.push(d);const l=_e(d.shape,a);d=Nt({inputs:{x:d},backend:s,attrs:{shape:l}})}return n.forEach(l=>s.disposeIntermediateTensorInfo(l)),d}const Rgt={kernelName:kv,backendName:"webgl",kernelFunc:Igt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ngt(e){const{inputs:t,backend:s,attrs:i}=e,{paramsNestedSplits:o,paramsDenseValues:y,indices:r}=t,{outputRaggedRank:g}=i,n=o.map(f=>s.readSync(f.dataId)),a=o.map(f=>f.shape),p=s.readSync(y.dataId),h=s.readSync(r.dataId),[u,d,l]=Aht(n,a,p,y.shape,y.dtype,h,r.shape,g),c=u.map(f=>s.makeTensorInfo([f.length],"int32",f)),m=s.makeTensorInfo(l,y.dtype,d);return c.concat([m])}const Pgt={kernelName:TS,backendName:"webgl",kernelFunc:Ngt};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fgt(e){const{inputs:t,backend:s}=e,{starts:i,limits:o,deltas:y}=t,r=s.readSync(i.dataId),g=s.readSync(o.dataId),n=s.readSync(y.dataId),[a,p]=Iht(r,i.shape,i.dtype,g,o.shape,n,y.shape),h=s.makeTensorInfo([a.length],"int32",a),u=s.makeTensorInfo([p.length],i.dtype,p);return[h,u]}const Ogt={kernelName:CS,backendName:"webgl",kernelFunc:Fgt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dgt(e){const{inputs:t,backend:s,attrs:i}=e,{shape:o,values:y,defaultValue:r,rowPartitionTensors:g}=t,{rowPartitionTypes:n}=i,a=s.readSync(o.dataId),p=s.readSync(y.dataId),h=s.readSync(r.dataId),u=g.map(m=>s.readSync(m.dataId)),d=g.map(m=>m.shape),[l,c]=Rht(a,o.shape,p,y.shape,y.dtype,h,r.shape,u,d,n);return s.makeTensorInfo(l,y.dtype,c)}const Lgt={kernelName:wS,backendName:"webgl",kernelFunc:Dgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u5=e=>{const{backend:t,attrs:s}=e,{start:i,stop:o,step:y,dtype:r}=s,g=Nht(i,o,y,r);return t.makeTensorInfo([g.length],r,g)},Mgt={kernelName:ES,backendName:"webgl",kernelFunc:u5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $gt="return 1.0 / x;",Bgt=fe({opSnippet:$gt}),kgt={kernelName:ef,backendName:"webgl",kernelFunc:Bgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zgt=Pi+`
  return (x < 0.0) ? 0.0 : x;
`,Vgt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ggt=fe({opSnippet:zgt,packedOpSnippet:Vgt}),Ugt={kernelName:nf,backendName:"webgl",kernelFunc:Ggt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wgt=Pi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Hgt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Xgt=fe({opSnippet:Wgt,packedOpSnippet:Hgt}),Ygt={kernelName:sf,backendName:"webgl",kernelFunc:Xgt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kgt{constructor(t,s,i,o,y){this.variableNames=["A"],this.outputShape=[];const[r,g,n,a]=t;this.outputShape=[r,s,i,a];const p=[o&&s>1?g-1:g,o&&i>1?n-1:n],h=[o&&s>1?s-1:s,o&&i>1?i-1:i];let u;y?u="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":u="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${p[0]/h[0]},
          ${p[1]/h[1]});
      const vec2 inputShapeRC = vec2(${g}.0, ${n}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${u};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jgt{constructor(t,s,i,o,y){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[r,g,n,a]=t;this.outputShape=[r,s,i,a];const p=[o&&s>1?g-1:g,o&&i>1?n-1:n],h=[o&&s>1?s-1:s,o&&i>1?i-1:i];let u;y?u="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":u="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${p[0]/h[0]},
          ${p[1]/h[1]},
          ${p[1]/h[1]});
      const vec3 inputShapeRC = vec3(${g}.0, ${n}.0,
                                     ${n}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${u};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${a-1};
        bool hasNextRow = coords.z < ${i-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zgt(e){const{inputs:t,backend:s,attrs:i}=e,{images:o}=t,{alignCorners:y,halfPixelCenters:r,size:g}=i,[n,a]=g,p=pt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new jgt(o.shape,n,a,y,r):new Kgt(o.shape,n,a,y,r);return s.runWebGLProgram(p,[o],"float32")}const Jgt={kernelName:Gv,backendName:"webgl",kernelFunc:Zgt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qgt{constructor(t,s,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=s;const[,o,y]=s,[,r,g]=t,n=[i&&r>1?o-1:o,i&&g>1?y-1:y],a=[i&&r>1?r-1:r,i&&g>1?g-1:g],p=n[0]/a[0],h=n[1]/a[1],u=1/p,d=1/h,l=Math.ceil(u)*2+2,c=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${p});
        const float widthScale = float(${h});

        const float invHeightScale = float(${u});
        const float invWidthScale = float(${d});

        const int winHeight = int(${l});
        const int winWidth = int(${c});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${r}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${g}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${y-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qgt(e){const{inputs:t,backend:s,attrs:i}=e,{images:o,dy:y}=t,{alignCorners:r}=i,g=new Qgt(y.shape,o.shape,r);return s.runWebGLProgram(g,[y],y.dtype)}const _gt={kernelName:IS,backendName:"webgl",kernelFunc:qgt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t0t{constructor(t,s,i,o,y){this.variableNames=["A"],this.outputShape=[];const[r,g,n,a]=t;this.outputShape=[r,s,i,a];const p=[o&&s>1?g-1:g,o&&i>1?n-1:n],h=[o&&s>1?s-1:s,o&&i>1?i-1:i],u=o?"0.5":"0.0";let d;y?d="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${p[0]/h[0]},
          ${p[1]/h[1]});
      const vec2 inputShapeRC = vec2(${g}.0, ${n}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${u})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e0t{constructor(t,s,i,o,y){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[r,g,n,a]=t;this.outputShape=[r,s,i,a];const p=[o&&s>1?g-1:g,o&&i>1?n-1:n],h=[o&&s>1?s-1:s,o&&i>1?i-1:i],u=o?"0.5":"0.0";let d;y?d="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${p[0]/h[0]},
          ${p[1]/h[1]},
          ${p[1]/h[1]});
      const vec3 inputShapeRC = vec3(${g}.0, ${n}.0,
                                     ${n}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${u})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${a-1};
        bool hasNextRow = coords.z < ${i-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n0t(e){const{inputs:t,backend:s,attrs:i}=e,{images:o}=t,{alignCorners:y,halfPixelCenters:r,size:g}=i,[n,a]=g,p=pt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new e0t(o.shape,n,a,y,r):new t0t(o.shape,n,a,y,r);return s.runWebGLProgram(p,[o],o.dtype)}const s0t={kernelName:Vv,backendName:"webgl",kernelFunc:n0t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i0t{constructor(t,s,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=s;const[,o,y]=s,[,r,g]=t,n=[i&&r>1?o-1:o,i&&g>1?y-1:y],a=[i&&r>1?r-1:r,i&&g>1?g-1:g],p=n[0]/a[0],h=n[1]/a[1],u=1/p,d=1/h,l=Math.ceil(u)*2+2,c=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${p});
        const float widthScale = float(${h});

        const float invHeightScale = float(${u});
        const float invWidthScale = float(${d});

        const int winHeight = int(${l});
        const int winWidth = int(${c});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${r}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${g}) {
              continue;
            }

            float sourceFracRow =
              float(${n[0]}) *
                (float(dyR) / float(${a[0]}));

            float sourceFracCol =
                float(${n[1]}) *
                  (float(dyC) / float(${a[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${i} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${y}) - 1),
                ${i} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r0t(e){const{inputs:t,backend:s,attrs:i}=e,{images:o,dy:y}=t,{alignCorners:r}=i,g=new i0t(y.shape,o.shape,r);return s.runWebGLProgram(g,[y],y.dtype)}const a0t={kernelName:AS,backendName:"webgl",kernelFunc:r0t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o0t{constructor(t,s){this.variableNames=["x"];const i=t.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);if(this.outputShape=t,i===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const o=g=>s.indexOf(g)!==-1&&t[g]!==1?`${t[g]} - coords[${g}] - 1`:`coords[${g}]`,y=t.map((g,n)=>o(n)).join(","),r=we(i);this.userCode=`
      void main() {
        ${r} coords = getOutputCoords();
        setOutput(getX(${y}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l0t{constructor(t,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const i=t.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);this.outputShape=t;const o=ss("rc",i),y=`${o[i-1]} + 1 < ${this.outputShape[i-1]}`,r=`${o[i-2]} + 1 < ${this.outputShape[i-2]}`,g=we(i);i===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${y}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${g} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${n(o.slice())};
          if(${y}){
            result.g = ${a(o.slice())};
          }
          if(${r}) {
            result.b = ${p(o.slice())};
            if(${y}) {
              result.a = ${h(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function n(l){return u(l)}function a(l){return l[i-1]="("+l[i-1]+" + 1)",u(l)}function p(l){return l[i-2]="("+l[i-2]+" + 1)",u(l)}function h(l){return l[i-1]="("+l[i-1]+" + 1)",l[i-2]="("+l[i-2]+" + 1)",u(l)}function u(l){const c=t.map((v,S)=>d(S,l)),m=c.join(","),f=c.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${f}))`}function d(l,c){return s.indexOf(l)!==-1&&t[l]!==1?`${t[l]} - ${c[l]} - 1`:`${c[l]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u0t(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{dims:y}=i,r=o.shape.length,g=se(y,o.shape);if(r===0)return Ms({inputs:{x:o},backend:s});const n=pt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new l0t(o.shape,g):new o0t(o.shape,g);return s.runWebGLProgram(n,[o],o.dtype)}const h0t={kernelName:Uv,backendName:"webgl",kernelFunc:u0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c0t{constructor(t,s){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const i=t[1],o=t[2];this.outputShape=t;let y="";typeof s=="number"?y=`float outputValue = ${s.toFixed(2)};`:y=`
        vec3 fill = vec3(${s.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${y}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${i}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f0t={kernelName:HS,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:s})=>{const{image:i}=e,{radians:o,fillValue:y,center:r}=t,g=s,n=new c0t(i.shape,y),[a,p]=ZT(r,i.shape[1],i.shape[2]),h=[[a,p,Math.sin(o),Math.cos(o)]];return g.runWebGLProgram(n,[i],i.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d0t=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,p0t=fe({opSnippet:d0t}),m0t={kernelName:rf,backendName:"webgl",kernelFunc:p0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v0t="return inversesqrt(x);",g0t=fe({opSnippet:v0t,cpuKernelImpl:Pht}),x0t={kernelName:af,backendName:"webgl",kernelFunc:g0t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qC{constructor(t,s,i,o,y,r,g=!0,n=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=r;const a=we(y.length),p=we(r.length);let h="";i===1?h="i":i===2&&(h="i, j");const u=`getIndices(${h})`;let d="";o===1?d="i":o===2&&(d="i, coords[1]");const l=`getUpdates(${d})`;let c="";n&&(c="coords[0], coords[1]");const m=`getDefaultValue(${c})`,f=s>1?"strides[j]":"strides";this.userCode=`
        ${a} strides = ${a}(${y});

        void main() {
          ${p} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${s}; j++) {
              int index = round(${u});
              flattenedIndex += index * ${f};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${l};
              found = true;
            }
          }
          setOutput(mix(${m}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y0t{constructor(t,s,i,o,y,r,g=!0,n=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;const a=we(y.length),p=we(r.length);let h="";i===1?h="i":i===2&&(h="i, j");const u=`getIndices(${h})`;let d="";o===1?d="i":o===2&&(d="i, coords[1]");const l=`getUpdates(${d})`;let c="";n&&(c="coords[0], coords[1]");const m=`getDefaultValue(${c})`,f=s>1?"strides[j]":"strides",v=s>1?"strides[j + 1]":"strides";this.userCode=`
        ${a} strides = ${a}(${y});

        void main() {
          ${p} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${t}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${s}; j+=2) {
              ivec4 index = round(${u});
              flattenedIndex += index.xz * ${f};
              if (j + 1 < ${s}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${l};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${m}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S0t(e){const{inputs:t,backend:s,attrs:i}=e,{indices:o,updates:y}=t,{shape:r}=i,{sliceRank:g,numUpdates:n,sliceSize:a,strides:p,outputSize:h}=qo(y,o,r),u=[h/a,a];if(h===0)return s.makeTensorInfo(r,o.dtype);const d=Nt({inputs:{x:o},backend:s,attrs:{shape:[n,g]}}),l=Nt({inputs:{x:y},backend:s,attrs:{shape:[n,a]}}),c=s.makeTensorInfo([],"float32",new Float32Array([0]));let m;pt().getBool("WEBGL_PACK")?m=new y0t(n,g,d.shape.length,l.shape.length,p,u):m=new qC(n,g,d.shape.length,l.shape.length,p,u);const f=s.runWebGLProgram(m,[l,d,c],l.dtype),v=Nt({inputs:{x:f},backend:s,attrs:{shape:r}});return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(c),v}const T0t={kernelName:RS,backendName:"webgl",kernelFunc:S0t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C0t{constructor(t,s,i,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,i];const y="while (left < right) {",r=`for (int i = 0; i < ${Math.ceil(Math.log2(s+1))}; ++i) { if (left >= right) break;`,g=pt().getNumber("WEBGL_VERSION")===2?y:r,n=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${g}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${n} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w0t(e){const{inputs:t,backend:s,attrs:i}=e,{sortedSequence:o,values:y}=t,{side:r}=i,g=new C0t(o.shape[0],o.shape[1],y.shape[1],r),n=[[o.shape[1]]];return s.runWebGLProgram(g,[o,y],"int32",n)}const E0t={kernelName:PS,backendName:"webgl",kernelFunc:w0t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b0t{constructor(t,s,i){this.variableNames=["c","a","b"],this.outputShape=s;let o,y;if(i>4)throw Error(`Where for rank ${i} is not yet supported`);if(i===1)y="resRC",o="resRC";else{const g=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[],a=[];for(let p=0;p<s.length;p++)a.push(`${g[p]}`),p<t&&n.push(`${g[p]}`);o=n.join(),y=a.join()}const r=we(i);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${y}));
        } else {
          setOutput(getB(${y}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A0t(e){const{inputs:t,backend:s}=e,{condition:i,t:o,e:y}=t,r=new b0t(i.shape.length,o.shape,o.shape.length);return s.runWebGLProgram(r,[i,o,y],Os(o.dtype,y.dtype))}const I0t={kernelName:Wv,backendName:"webgl",kernelFunc:A0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R0t=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${wg};
  float scale = ${Eg};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,N0t=fe({opSnippet:R0t}),P0t={kernelName:of,backendName:"webgl",kernelFunc:N0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F0t=Vu+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,O0t=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,D0t=fe({opSnippet:F0t,packedOpSnippet:O0t,cpuKernelImpl:Oht}),L0t={kernelName:cf,backendName:"webgl",kernelFunc:D0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M0t=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,$0t=fe({opSnippet:M0t}),B0t={kernelName:hf,backendName:"webgl",kernelFunc:$0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k0t=Vu+`
  return sin(x);
`,z0t=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${sl}
  return result;
`,V0t=fe({opSnippet:k0t,packedOpSnippet:z0t}),G0t={kernelName:lf,backendName:"webgl",kernelFunc:V0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U0t=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,W0t=fe({opSnippet:U0t}),H0t={kernelName:uf,backendName:"webgl",kernelFunc:W0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X0t=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Y0t=fe({opSnippet:X0t}),K0t={kernelName:ff,backendName:"webgl",kernelFunc:Y0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j0t=e=>{const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{blockShape:y,paddings:r}=i;q(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const g=y.reduce((f,v)=>f*v),n=[[0,0]];n.push(...r);for(let f=1+y.length;f<o.shape.length;++f)n.push([0,0]);const a=[],p=l5({inputs:{x:o},backend:s,attrs:{paddings:n,constantValue:0}}),h=Rf(p.shape,y,g,!1),u=Nf(h.length,y.length,!1),d=Pf(p.shape,y,g,!1),l=Nt({inputs:{x:p},backend:s,attrs:{shape:h}}),c=as({inputs:{x:l},backend:s,attrs:{perm:u}}),m=Nt({inputs:{x:c},backend:s,attrs:{shape:d}});return a.push(p),a.push(l),a.push(c),a.forEach(f=>s.disposeIntermediateTensorInfo(f)),m},Z0t={kernelName:Yv,backendName:"webgl",kernelFunc:j0t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J0t(e){const{inputs:t,backend:s}=e,{indices:i,values:o,denseShape:y,defaultValue:r}=t;if(y.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${y.shape}`);if(i.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${i.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(r.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${r.shape}`);const g=s.readSync(i.dataId),n=s.readSync(o.dataId),a=s.readSync(y.dataId),p=s.readSync(r.dataId)[0],[h,u,d,l,c]=Lht(g,i.shape,i.dtype,n,o.dtype,a,p);return[s.makeTensorInfo(u,i.dtype,h),s.makeTensorInfo([u[0]],o.dtype,d),s.makeTensorInfo([l.length],"bool",new Uint8Array(l.map(m=>Number(m)))),s.makeTensorInfo([c.length],i.dtype,new Int32Array(c))]}const Q0t={kernelName:FS,backendName:"webgl",kernelFunc:J0t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q0t(e){const{inputs:t,backend:s}=e,{inputIndices:i,inputShape:o,newShape:y}=t;if(i.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${i.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(y.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${y.shape}`);const r=Array.from(s.readSync(o.dataId)),g=s.readSync(i.dataId),n=Array.from(s.readSync(y.dataId)),[a,p,h]=Mht(g,i.shape,i.dtype,r,n);return[s.makeTensorInfo(p,i.dtype,a),s.makeTensorInfo([h.length],y.dtype,new Int32Array(h))]}const _0t={kernelName:OS,backendName:"webgl",kernelFunc:q0t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function txt(e){const{inputs:t,backend:s}=e,{data:i,indices:o,segmentIds:y}=t;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(y.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${y.shape}`);const r=s.readSync(i.dataId),g=s.readSync(o.dataId),n=s.readSync(y.dataId),[a,p]=D4(r,i.shape,i.dtype,g,n,!0);return s.makeTensorInfo(p,i.dtype,a)}const ext={kernelName:DS,backendName:"webgl",kernelFunc:txt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nxt(e){const{inputs:t,backend:s}=e,{data:i,indices:o,segmentIds:y}=t;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(y.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${y.shape}`);const r=s.readSync(i.dataId),g=s.readSync(o.dataId),n=s.readSync(y.dataId),[a,p]=D4(r,i.shape,i.dtype,g,n);return s.makeTensorInfo(p,i.dtype,a)}const sxt={kernelName:LS,backendName:"webgl",kernelFunc:nxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ixt(e){const{inputs:t,backend:s,attrs:i}=e,{sparseIndices:o,sparseValues:y,defaultValue:r}=t,{outputShape:g}=i,{sliceRank:n,numUpdates:a,sliceSize:p,strides:h,outputSize:u}=qo(y,o,g),d=!1;if(y.dtype==="string"){const f=s.bufferSync(o),v=s.bufferSync(y),S=Oa(s.readSync(r.dataId)[0]),x=Fht(f,v,g,u,p,a,n,h,S,d);return s.makeTensorInfo(g,x.dtype,x.values)}const l=new qC(a,n,o.shape.length,y.shape.length,h,[u,1],d),c=s.runWebGLProgram(l,[y,o,r],y.dtype),m=Nt({inputs:{x:c},backend:s,attrs:{shape:g}});return s.disposeIntermediateTensorInfo(c),m}const rxt={kernelName:MS,backendName:"webgl",kernelFunc:ixt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{numOrSizeSplits:y,axis:r}=i,g=se(r,o.shape)[0],n=hC(o,y,g),a=o.shape.length,p=new Array(a).fill(0),h=o.shape.slice();return n.map(u=>{const d=[...h];d[g]=u;const l=Gu({inputs:{x:o},backend:s,attrs:{begin:p,size:d}});return p[g]+=u,l})}const oxt={kernelName:Kv,backendName:"webgl",kernelFunc:axt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TI="return sqrt(x);",lxt=fe({opSnippet:TI,packedOpSnippet:TI,cpuKernelImpl:$ht}),uxt={kernelName:df,backendName:"webgl",kernelFunc:lxt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hxt="return x * x;",cxt=fe({opSnippet:hxt}),fxt={kernelName:$S,backendName:"webgl",kernelFunc:cxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CI="return (a - b) * (a - b);",dxt=zn({opSnippet:CI,packedOpSnippet:CI}),pxt={kernelName:pf,backendName:"webgl",kernelFunc:dxt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mxt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t;if(o.dtype!=="string")throw new Error("Input must be of datatype string");const y=s.readSync(o.dataId),r=jr(y),g=Bht(r,"string",i);return s.makeTensorInfo(o.shape,"string",g)}const vxt={kernelName:Zv,backendName:"webgl",kernelFunc:mxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gxt({inputs:e,attrs:t,backend:s}){const{x:i}=e,o=Pi+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,y=new hr(i.shape,o);return s.runWebGLProgram(y,[i],i.dtype)}const xxt={kernelName:yf,backendName:"webgl",kernelFunc:gxt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yxt{constructor(t,s,i){this.variableNames=["x"],this.outputShape=i;const o=i.length,y=we(i.length),r=we(i.length);let g="";if(o===1)g="coords * strides + begin";else{let n=0;g=i.map((a,p)=>(n++,i.length===1?`coords * strides[${p}] + begin[${p}]`:`coords[${n-1}] * strides[${p}] + begin[${p}]`)).join(",")}this.userCode=`
      ${y} begin = ${y}(${t});
      ${y} strides = ${y}(${s});

      void main() {
        ${r} coords = getOutputCoords();
        setOutput(getX(${g}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sxt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{begin:y,end:r,strides:g,beginMask:n,endMask:a,ellipsisMask:p,newAxisMask:h,shrinkAxisMask:u}=i,{finalShapeSparse:d,finalShape:l,isIdentity:c,sliceDim0:m,isSimpleSlice:f,begin:v,end:S,strides:x}=YT(o.shape,y,r,g,n,a,p,h,u);let T;if(c)T=Nt({inputs:{x:o},backend:s,attrs:{shape:l}});else if(m||f){q(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const w=WT(v,S,x),b=Gu({inputs:{x:o},backend:s,attrs:{begin:v,size:w}});T=Nt({inputs:{x:b},backend:s,attrs:{shape:l}}),s.disposeIntermediateTensorInfo(b)}else if(s.shouldExecuteOnCPU([o])){const b=s.readSync(o.dataId),E=te(o.shape,o.dtype,b),A=kht(d,E,x,v);T=s.makeTensorInfo(l,o.dtype,A.values)}else{const b=new yxt(v,x,d);T=s.runWebGLProgram(b,[o],o.dtype)}const C=Nt({inputs:{x:T},backend:s,attrs:{shape:l}});return s.disposeIntermediateTensorInfo(T),C}const Txt={kernelName:BS,backendName:"webgl",kernelFunc:Sxt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cxt(e){const{inputs:t,backend:s,attrs:i}=e,{separator:o,nGramWidths:y,leftPad:r,rightPad:g,padWidth:n,preserveShortSequences:a}=i,{data:p,dataSplits:h}=t,u=s.readSync(p.dataId),d=s.readSync(h.dataId),[l,c]=zht(u,d,o,y,r,g,n,a);return[s.makeTensorInfo([l.length],"string",l),s.makeTensorInfo(h.shape,"int32",c)]}const wxt={kernelName:kS,backendName:"webgl",kernelFunc:Cxt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ext(e){const{inputs:t,backend:s,attrs:i}=e,{skipEmpty:o}=i,{input:y,delimiter:r}=t;if(y.dtype!=="string")throw new Error("Input must be of datatype string");if(y.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${y.shape}`);if(r.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${r.shape}`);const g=s.readSync(y.dataId),n=s.readSync(r.dataId)[0],[a,p,h]=Vht(g,n,o),u=p.length;return[s.makeTensorInfo([u,2],"int32",a),s.makeTensorInfo([u],"string",p),s.makeTensorInfo([2],"int32",new Int32Array(h))]}const bxt={kernelName:zS,backendName:"webgl",kernelFunc:Ext};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Axt(e){const{inputs:t,backend:s,attrs:i}=e,{numBuckets:o}=i,{input:y}=t;if(y.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const r=s.readSync(y.dataId),g=Ght(r,o);return s.makeTensorInfo(y.shape,"int32",g)}const Ixt={kernelName:VS,backendName:"webgl",kernelFunc:Axt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rxt="return tan(x);",Nxt=fe({opSnippet:Rxt}),Pxt={kernelName:vf,backendName:"webgl",kernelFunc:Nxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fxt=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,Oxt=fe({opSnippet:Fxt}),Dxt={kernelName:gf,backendName:"webgl",kernelFunc:Oxt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lxt(e){const{inputs:t,backend:s,attrs:i}=e,{tensor:o,indices:y,updates:r}=t,{sliceRank:g,numUpdates:n,sliceSize:a,strides:p,outputSize:h}=qo(r,y,o.shape),u=[h/a,a];if(h===0)return s.makeTensorInfo(o.shape,y.dtype);const d=Nt({inputs:{x:y},backend:s,attrs:{shape:[n,g]}}),l=Nt({inputs:{x:r},backend:s,attrs:{shape:[n,a]}}),c=Nt({inputs:{x:o},backend:s,attrs:{shape:u}}),m=new qC(n,g,d.shape.length,l.shape.length,p,u,!1,!0),f=s.runWebGLProgram(m,[l,d,c],c.dtype),v=Nt({inputs:{x:f},backend:s,attrs:{shape:o.shape}});return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(f),v}const Mxt={kernelName:NS,backendName:"webgl",kernelFunc:Lxt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $xt{constructor(t,s){this.variableNames=["A"];const i=new Array(t.length);for(let r=0;r<i.length;r++)i[r]=t[r]*s[r];this.outputShape=i,this.rank=i.length;const o=we(this.rank),y=Bxt(t);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${y}));
      }
    `}}function Bxt(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;const s=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],i=[];for(let o=0;o<e.length;o++)i.push(`imod(${s[o]}, ${e[o]})`);return i.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h5(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{reps:y}=i;if(o.dtype==="string"||o.shape.length>5){const n=s.readSync(o.dataId),a=o.dtype==="string"?n.map(u=>Oa(u)):n,p=te(o.shape,o.dtype,a),h=Wht(p,y);return s.makeTensorInfo(h.shape,h.dtype,h.values)}const r=new $xt(o.shape,y);return s.runWebGLProgram(r,[o],o.dtype)}const kxt={kernelName:xf,backendName:"webgl",kernelFunc:h5};class zxt{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class Vxt{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ro(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function wI(e){let t=1;for(;t<e;)t*=2;return t}function Gxt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o}=t,{k:y,sorted:r}=i,g=pt().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),n=pt().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),a=o.shape,p=a[a.length-1];if(s.shouldExecuteOnCPU([o])||p<g||y>n){const A=s.readSync(o.dataId),[I,R]=Hht(A,a,o.dtype,y,r);return[s.makeTensorInfo(I.shape,I.dtype,I.values),s.makeTensorInfo(R.shape,R.dtype,R.values)]}if(y===0)return a[a.length-1]=0,[s.makeTensorInfo(a,o.dtype,[]),s.makeTensorInfo(a,"int32",[])];if(p===1)return[o,Hf({attrs:{shape:a,dtype:"int32",value:0},backend:s})];const h=s.texData.get(o.dataId),u=h!==null&&h.isPacked,d=u?s.unpackTensor(o):o,c=vt(a)/p,m=Nt({inputs:{x:d},attrs:{shape:[c,p]},backend:s});u&&ro(s,d);const f=wI(y),v=wI(p);let S=null;const x=()=>S===null?[m,m]:[m,S],T=(A,I,R)=>{const N=x(),F=new zxt(R),D=[[p],[S===null?1:0],[Number.NEGATIVE_INFINITY],[A],[I]],M=S;S=s.runWebGLProgram(F,N,"int32",D),ro(s,M)};for(let A=1;A<f;A*=2){const I=A*2;for(let R=A;R>=1;R/=2)T(I,R,[c,v])}for(let A=v;A>f;A/=2){const I=x(),R=new Vxt([c,A/2]),F=[[p],[S===null?1:0],[f]],P=S;S=s.runWebGLProgram(R,I,"int32",F),ro(s,P);const D=f/2,M=D*2;for(let L=D;L>=1;L/=2)T(M,L,S.shape)}let C=S;S=Gu({inputs:{x:S},backend:s,attrs:{begin:0,size:[c,y]}}),ro(s,C);let w=n5({inputs:{x:m,indices:S},backend:s,attrs:{axis:1,batchDims:1}});ro(s,m);const b=a.slice(0,-1);b.push(y),C=S,S=Nt({inputs:{x:S},attrs:{shape:b},backend:s}),ro(s,C);const E=w;return w=Nt({inputs:{x:w},attrs:{shape:b},backend:s}),ro(s,E),[w,S]}const Uxt={kernelName:GS,backendName:"webgl",kernelFunc:Gxt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wxt{constructor(t,s,i,o,y,r){this.variableNames=["Image","Transforms"],this.outputShape=r;const g=i==="nearest"?1:2;let n;switch(o){case"constant":n=1;break;case"reflect":n=2;break;case"wrap":n=3;break;case"nearest":n=4;break;default:n=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${n} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${n} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${n} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${s}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${y});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${y});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${s}));
                float mapY = mapCoord(inY, float(${t}));

                if (${g} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hxt(e){const{inputs:t,backend:s,attrs:i}=e,{image:o,transforms:y}=t,{interpolation:r,fillMode:g,fillValue:n,outputShape:a}=i,[p,h,u,d]=o.shape,[l,c]=a??[h,u],m=[p,l,c,d],f=new Wxt(h,u,r,g,n,m);return s.runWebGLProgram(f,[o,y],"float32")}const Xxt={kernelName:US,backendName:"webgl",kernelFunc:Hxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxt(e){const{inputs:t,attrs:s,backend:i}=e,{axis:o}=s,{x:y}=t;Gf(y,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const r=i.readSync(y.dataId),{outputValues:g,outputShape:n,indices:a}=Xht(r,o,y.shape,y.dtype);return[i.makeTensorInfo(n,y.dtype,g),i.makeTensorInfo([a.length],"int32",a)]}const Kxt={kernelName:WS,backendName:"webgl",kernelFunc:Yxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jxt(e){const{inputs:t,backend:s,attrs:i}=e,{value:o}=t;let{axis:y}=i;y<0&&(y+=o.shape.length);const r=o,g=r.shape.length,n=o.shape[y],a=new Array(g-1);let p=0;for(let c=0;c<g;c++)c!==y&&(a[p++]=r.shape[c]);const h=[],u=new Array(g).fill(0),d=r.shape.slice();d[y]=1;const l=new Array(n);for(let c=0;c<l.length;c++){u[y]=c;const m=Gu({inputs:{x:r},backend:s,attrs:{begin:u,size:d}}),f=Nt({inputs:{x:m},backend:s,attrs:{shape:a}});l[c]=f,h.push(m)}return h.forEach(c=>s.disposeIntermediateTensorInfo(c)),l}const Zxt={kernelName:Jv,backendName:"webgl",kernelFunc:jxt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jxt{constructor(t,s){this.variableNames=["x","segmentIds"];const i=t.windowSize,o=t.batchSize,y=t.inSize,r=t.numSegments,g=r*Math.ceil(y/i);this.outputShape=[o,g];const n="0.0",a="sumValue",p=Math.floor(i/4)*4,h=i%4,u=`
        sumValue += dot(values, segFilter);
    `;let d="";y%i>0&&(d=`
        if (inIdx < 0 || inIdx >= ${y}) {
          return initializationValue;
        }
      `);let l="";y%i>0&&(l=`
        if (inIdx < 0 || inIdx >= ${y}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${n};

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${l}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${r})) * float(${i}));
        int currentSeg = int(mod(float(outIdx), float(${r})));

        float sumValue = 0.0;

        for (int i = 0; i < ${p}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${u}
        }

        int inIdx = inOffset + ${p};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${u}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${u}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${u}
        }
        setOutput(${a});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qxt(e){const{inputs:t,backend:s,attrs:i}=e,{x:o,segmentIds:y}=t,{numSegments:r}=i,g=o.shape.length,n=[];let a=0;const p=We([a],g);let h=o;p!=null&&(h=as({inputs:{x:o},backend:s,attrs:{perm:p}}),n.push(h),a=tn(1,g)[0]);const u=HO(h.shape,a,r),d=vt([h.shape[a]]),l=Nt({inputs:{x:h},backend:s,attrs:{shape:[-1,d]}});n.push(l);const c=YS(o.dtype),m=(x,T,C,w,b)=>{const E=x.shape[0],A=x.shape[1],I=WO(A,b),R={windowSize:I,inSize:A,batchSize:E,numSegments:b},N=new Jxt(R,T),F=s.compileAndRun(N,[x,C],w);if(n.push(F),F.shape[1]===b)return F;const P=u5({backend:s,attrs:{start:0,stop:b,step:1,dtype:"float32"}}),D=h5({inputs:{x:P},backend:s,attrs:{reps:[A/I]}});return n.push(P),n.push(D),m(F,T,D,w,b)},f=m(l,"unsortedSegmentSum",y,c,r),v=Nt({inputs:{x:f},backend:s,attrs:{shape:u}});let S=v;if(p!=null){n.push(v);const x=Ja(p);S=as({inputs:{x:S},backend:s,attrs:{perm:x}})}return n.forEach(x=>s.disposeIntermediateTensorInfo(x)),S}const qxt={kernelName:Qv,backendName:"webgl",kernelFunc:Qxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _xt=[$ct,kct,Gct,Hct,Yct,Zct,Qct,_ct,sft,rft,lft,cft,pft,xft,Tft,wft,bft,Nft,Fft,Dft,Bft,Hft,Yft,Jft,qft,idt,adt,hdt,yct,ddt,xdt,Cdt,Rdt,Fdt,Ddt,Mdt,Bdt,Gdt,Hdt,Kdt,Zdt,Qdt,_dt,npt,ipt,lpt,hpt,dpt,vpt,xpt,Cpt,Apt,Ppt,Dpt,$pt,Bpt,zpt,Gpt,Wpt,Xpt,Kpt,Qpt,tmt,smt,rmt,lmt,cmt,mmt,ymt,xct,Tmt,vdt,Emt,Imt,Pmt,Tct,Lmt,kmt,Vmt,Hmt,Kmt,Qmt,tvt,ivt,lvt,cvt,dvt,gvt,yvt,Tvt,bvt,Ivt,Nvt,Fvt,Dvt,Bvt,Gvt,Xvt,_vt,Ect,sgt,agt,ugt,fgt,tdt,mgt,ggt,ygt,Cgt,Agt,wct,Rgt,Pgt,Ogt,Lgt,Mgt,edt,Zvt,kgt,Ugt,Ygt,Act,Jgt,_gt,s0t,a0t,h0t,f0t,m0t,x0t,T0t,E0t,I0t,P0t,L0t,B0t,G0t,H0t,Uft,Qvt,K0t,Z0t,Q0t,_0t,ext,sxt,rxt,oxt,uxt,fxt,pxt,vxt,xxt,Txt,wxt,bxt,Ixt,Jvt,Dct,Pxt,Dxt,Mxt,kxt,Uxt,Xxt,Lct,Kxt,Zxt,qxt,vgt];for(const e of _xt)f3(e);const tyt=50,eyt=10;function nyt(e){const t=[ge.first,ge.second];return Si([t.map(s=>e.mapPiece(({value:i})=>+(i==s)).map(i=>[...i,...new Array(e.length-i.length).fill([0]).map(()=>new Array(i.length).fill(0))].map(o=>[...o,...new Array(e.length-o.length).fill(0)])))])}function syt(e,t){const s=t.length;return ft(()=>{const i=nyt(t),[o,y]=e.predict(i),r=o.arraySync()[0][0];let g=y.arraySync()[0];g=t.legalActions().map(({i:a,j:p,k:h})=>g[a*s**2+p*s+h]);const n=t3(g);return g=g.map(a=>a/n),[r,g]})}class _C{constructor(t,s){ee(this,"board");ee(this,"p");ee(this,"w");ee(this,"n");ee(this,"childNodes",[]);this.board=t,this.p=s,this.w=0,this.n=0}evaluate(t){const s=this.board.isDone();let i=0,o=[];return s?i=this.board.firstPlayerValue():this.childNodes.length==0?([i,o]=syt(t,this.board),this.childNodes=this.board.nextAll(ge.first).map((y,r)=>new _C(y.flip(),o[r]))):i=-this.nextChildNode().evaluate(t),this.w+=i,this.n+=1,i}nextChildNode(){const s=t3(this.childNodes.map(o=>o.n)),i=this.childNodes.map(o=>(o.n==0?0:-o.w/o.n)+1*o.p*s**.5/(1+o.n));return this.childNodes[e3(i)]}}class EI{constructor(t,s){ee(this,"size");ee(this,"evalNum");ee(this,"action");this.size=t,this.evalNum=s}pvMCTSScores(t,s){const i=new _C(s,0);for(let o=0;o<this.evalNum;o++)i.evaluate(t);return i.childNodes.map(o=>o.n)}pvMCTSAction(t){return s=>{const i=Date.now(),o=this.pvMCTSScores(t,s),y=s.legalActions()[e3(o)],r=Date.now();return console.log("predict:",r-i,"ms"),console.log("position",y),y}}async loadModel(t){console.log("loading...");const s=Date.now(),i=await Let(`/MOSAIC/tfjs_models/size_${this.size}/model.json`),o=this.pvMCTSAction(i);t&&o(t);const y=Date.now();console.log("load model:",y-s,"ms"),this.action=o}}const iyt=()=>{const e=Tc(),[t,s]=dt.useState(7),[i,o]=dt.useState([!1,!1]),[y,r]=dt.useState([1,1]),g={id:"size",label:"size",options:[{value:5,label:"5"},{value:7,label:"7"}],defaultValue:{value:7,label:"7"}},n=[{id:"player1",label:"player1"},{id:"player2",label:"player2"}];return Ut.jsxs("div",{className:"MainMenu flex flex-col",children:[Ut.jsxs("div",{className:"flex justify-center items-center gap-1 m-1",children:[Ut.jsx("label",{children:"size"}),Ut.jsx(oG,{...g,onChange:a=>{a&&s(a.value)}})]}),n.map((a,p)=>Ut.jsxs("div",{className:"flex justify-center items-center gap-1 m-1",children:[Ut.jsx("label",{children:a.label}),Ut.jsxs("label",{htmlFor:`${a.id}isAI`,children:[Ut.jsx("input",{type:"checkbox",id:`${a.id}isAI`,name:`${a.id}isAI`,value:"AI",checked:i[p],onChange:h=>{h&&o(i.map((u,d)=>d==p?h.target.checked:u))}}),"AI"]}),Ut.jsxs("label",{className:"border-2 rounded",children:["Level ",y[p],Ut.jsx("input",{id:`${a.id}Level`,type:"range",name:`${a.id}Level`,min:"1",max:eyt,step:"1",value:y[p],onChange:h=>{h&&r(y.map((u,d)=>d==p?parseInt(h.target.value):u))}})]})]},`player_${p}`)),Ut.jsx(jg,{id:"PlayButton",label:"Play",onClick:()=>{const a=i.map((p,h)=>p?tyt*y[h]:"human");e("/game",{state:{size:t,players:a}})}})]})};const bI=()=>{let e;const{state:t}=Cu();return dt.useEffect(()=>(e=new PG(t.size||Zm,t.players||["human","human"]),uG(e)),[]),Ut.jsxs("div",{children:[Ut.jsx("div",{id:"phaser-container"}),Ut.jsx($I,{buttons:[{id:"prev-button",label:"<prev",onClick:()=>e.prev()},{id:"next-button",label:"next>",onClick:()=>e.next()}]}),Ut.jsx($I,{buttons:[{id:"saveData",label:"save",onClick:()=>{FG(e)}},{id:"loadData",label:"load",onClick:()=>{OG(e)}},{id:"removeData",label:"remove",onClick:()=>{DG(e)}}]})]})};function c5(e,t){return function(){return e.apply(t,arguments)}}const{toString:ryt}=Object.prototype,{getPrototypeOf:tw}=Object,Ug=(e=>t=>{const s=ryt.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Er=e=>(e=e.toLowerCase(),t=>Ug(t)===e),Wg=e=>t=>typeof t===e,{isArray:Uu}=Array,pc=Wg("undefined");function ayt(e){return e!==null&&!pc(e)&&e.constructor!==null&&!pc(e.constructor)&&Ci(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const f5=Er("ArrayBuffer");function oyt(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&f5(e.buffer),t}const lyt=Wg("string"),Ci=Wg("function"),d5=Wg("number"),Hg=e=>e!==null&&typeof e=="object",uyt=e=>e===!0||e===!1,_d=e=>{if(Ug(e)!=="object")return!1;const t=tw(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},hyt=Er("Date"),cyt=Er("File"),fyt=Er("Blob"),dyt=Er("FileList"),pyt=e=>Hg(e)&&Ci(e.pipe),myt=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ci(e.append)&&((t=Ug(e))==="formdata"||t==="object"&&Ci(e.toString)&&e.toString()==="[object FormData]"))},vyt=Er("URLSearchParams"),gyt=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xf(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),Uu(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{const y=s?Object.getOwnPropertyNames(e):Object.keys(e),r=y.length;let g;for(i=0;i<r;i++)g=y[i],t.call(null,e[g],g,e)}}function p5(e,t){t=t.toLowerCase();const s=Object.keys(e);let i=s.length,o;for(;i-- >0;)if(o=s[i],t===o.toLowerCase())return o;return null}const m5=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),v5=e=>!pc(e)&&e!==m5;function T1(){const{caseless:e}=v5(this)&&this||{},t={},s=(i,o)=>{const y=e&&p5(t,o)||o;_d(t[y])&&_d(i)?t[y]=T1(t[y],i):_d(i)?t[y]=T1({},i):Uu(i)?t[y]=i.slice():t[y]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Xf(arguments[i],s);return t}const xyt=(e,t,s,{allOwnKeys:i}={})=>(Xf(t,(o,y)=>{s&&Ci(o)?e[y]=c5(o,s):e[y]=o},{allOwnKeys:i}),e),yyt=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Syt=(e,t,s,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},Tyt=(e,t,s,i)=>{let o,y,r;const g={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),y=o.length;y-- >0;)r=o[y],(!i||i(r,e,t))&&!g[r]&&(t[r]=e[r],g[r]=!0);e=s!==!1&&tw(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},Cyt=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const i=e.indexOf(t,s);return i!==-1&&i===s},wyt=e=>{if(!e)return null;if(Uu(e))return e;let t=e.length;if(!d5(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},Eyt=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&tw(Uint8Array)),byt=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=i.next())&&!o.done;){const y=o.value;t.call(e,y[0],y[1])}},Ayt=(e,t)=>{let s;const i=[];for(;(s=e.exec(t))!==null;)i.push(s);return i},Iyt=Er("HTMLFormElement"),Ryt=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,i,o){return i.toUpperCase()+o}),AI=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),Nyt=Er("RegExp"),g5=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),i={};Xf(s,(o,y)=>{t(o,y,e)!==!1&&(i[y]=o)}),Object.defineProperties(e,i)},Pyt=e=>{g5(e,(t,s)=>{if(Ci(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const i=e[s];if(Ci(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Fyt=(e,t)=>{const s={},i=o=>{o.forEach(y=>{s[y]=!0})};return Uu(e)?i(e):i(String(e).split(t)),s},Oyt=()=>{},Dyt=(e,t)=>(e=+e,Number.isFinite(e)?e:t),ix="abcdefghijklmnopqrstuvwxyz",II="0123456789",x5={DIGIT:II,ALPHA:ix,ALPHA_DIGIT:ix+ix.toUpperCase()+II},Lyt=(e=16,t=x5.ALPHA_DIGIT)=>{let s="";const{length:i}=t;for(;e--;)s+=t[Math.random()*i|0];return s};function Myt(e){return!!(e&&Ci(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const $yt=e=>{const t=new Array(10),s=(i,o)=>{if(Hg(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[o]=i;const y=Uu(i)?[]:{};return Xf(i,(r,g)=>{const n=s(r,o+1);!pc(n)&&(y[g]=n)}),t[o]=void 0,y}}return i};return s(e,0)},Byt=Er("AsyncFunction"),kyt=e=>e&&(Hg(e)||Ci(e))&&Ci(e.then)&&Ci(e.catch),St={isArray:Uu,isArrayBuffer:f5,isBuffer:ayt,isFormData:myt,isArrayBufferView:oyt,isString:lyt,isNumber:d5,isBoolean:uyt,isObject:Hg,isPlainObject:_d,isUndefined:pc,isDate:hyt,isFile:cyt,isBlob:fyt,isRegExp:Nyt,isFunction:Ci,isStream:pyt,isURLSearchParams:vyt,isTypedArray:Eyt,isFileList:dyt,forEach:Xf,merge:T1,extend:xyt,trim:gyt,stripBOM:yyt,inherits:Syt,toFlatObject:Tyt,kindOf:Ug,kindOfTest:Er,endsWith:Cyt,toArray:wyt,forEachEntry:byt,matchAll:Ayt,isHTMLForm:Iyt,hasOwnProperty:AI,hasOwnProp:AI,reduceDescriptors:g5,freezeMethods:Pyt,toObjectSet:Fyt,toCamelCase:Ryt,noop:Oyt,toFiniteNumber:Dyt,findKey:p5,global:m5,isContextDefined:v5,ALPHABET:x5,generateString:Lyt,isSpecCompliantForm:Myt,toJSONObject:$yt,isAsyncFn:Byt,isThenable:kyt};function me(e,t,s,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),i&&(this.request=i),o&&(this.response=o)}St.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:St.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const y5=me.prototype,S5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{S5[e]={value:e}});Object.defineProperties(me,S5);Object.defineProperty(y5,"isAxiosError",{value:!0});me.from=(e,t,s,i,o,y)=>{const r=Object.create(y5);return St.toFlatObject(e,r,function(n){return n!==Error.prototype},g=>g!=="isAxiosError"),me.call(r,e.message,t,s,i,o),r.cause=e,r.name=e.name,y&&Object.assign(r,y),r};const zyt=null;function C1(e){return St.isPlainObject(e)||St.isArray(e)}function T5(e){return St.endsWith(e,"[]")?e.slice(0,-2):e}function RI(e,t,s){return e?e.concat(t).map(function(o,y){return o=T5(o),!s&&y?"["+o+"]":o}).join(s?".":""):t}function Vyt(e){return St.isArray(e)&&!e.some(C1)}const Gyt=St.toFlatObject(St,{},null,function(t){return/^is[A-Z]/.test(t)});function Xg(e,t,s){if(!St.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=St.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(c,m){return!St.isUndefined(m[c])});const i=s.metaTokens,o=s.visitor||p,y=s.dots,r=s.indexes,n=(s.Blob||typeof Blob<"u"&&Blob)&&St.isSpecCompliantForm(t);if(!St.isFunction(o))throw new TypeError("visitor must be a function");function a(l){if(l===null)return"";if(St.isDate(l))return l.toISOString();if(!n&&St.isBlob(l))throw new me("Blob is not supported. Use a Buffer instead.");return St.isArrayBuffer(l)||St.isTypedArray(l)?n&&typeof Blob=="function"?new Blob([l]):Buffer.from(l):l}function p(l,c,m){let f=l;if(l&&!m&&typeof l=="object"){if(St.endsWith(c,"{}"))c=i?c:c.slice(0,-2),l=JSON.stringify(l);else if(St.isArray(l)&&Vyt(l)||(St.isFileList(l)||St.endsWith(c,"[]"))&&(f=St.toArray(l)))return c=T5(c),f.forEach(function(S,x){!(St.isUndefined(S)||S===null)&&t.append(r===!0?RI([c],x,y):r===null?c:c+"[]",a(S))}),!1}return C1(l)?!0:(t.append(RI(m,c,y),a(l)),!1)}const h=[],u=Object.assign(Gyt,{defaultVisitor:p,convertValue:a,isVisitable:C1});function d(l,c){if(!St.isUndefined(l)){if(h.indexOf(l)!==-1)throw Error("Circular reference detected in "+c.join("."));h.push(l),St.forEach(l,function(f,v){(!(St.isUndefined(f)||f===null)&&o.call(t,f,St.isString(v)?v.trim():v,c,u))===!0&&d(f,c?c.concat(v):[v])}),h.pop()}}if(!St.isObject(e))throw new TypeError("data must be an object");return d(e),t}function NI(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function ew(e,t){this._pairs=[],e&&Xg(e,this,t)}const C5=ew.prototype;C5.append=function(t,s){this._pairs.push([t,s])};C5.toString=function(t){const s=t?function(i){return t.call(this,i,NI)}:NI;return this._pairs.map(function(o){return s(o[0])+"="+s(o[1])},"").join("&")};function Uyt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function w5(e,t,s){if(!t)return e;const i=s&&s.encode||Uyt,o=s&&s.serialize;let y;if(o?y=o(t,s):y=St.isURLSearchParams(t)?t.toString():new ew(t,s).toString(i),y){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+y}return e}class Wyt{constructor(){this.handlers=[]}use(t,s,i){return this.handlers.push({fulfilled:t,rejected:s,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){St.forEach(this.handlers,function(i){i!==null&&t(i)})}}const PI=Wyt,E5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hyt=typeof URLSearchParams<"u"?URLSearchParams:ew,Xyt=typeof FormData<"u"?FormData:null,Yyt=typeof Blob<"u"?Blob:null,Kyt=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),jyt=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),cr={isBrowser:!0,classes:{URLSearchParams:Hyt,FormData:Xyt,Blob:Yyt},isStandardBrowserEnv:Kyt,isStandardBrowserWebWorkerEnv:jyt,protocols:["http","https","file","blob","url","data"]};function Zyt(e,t){return Xg(e,new cr.classes.URLSearchParams,Object.assign({visitor:function(s,i,o,y){return cr.isNode&&St.isBuffer(s)?(this.append(i,s.toString("base64")),!1):y.defaultVisitor.apply(this,arguments)}},t))}function Jyt(e){return St.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Qyt(e){const t={},s=Object.keys(e);let i;const o=s.length;let y;for(i=0;i<o;i++)y=s[i],t[y]=e[y];return t}function b5(e){function t(s,i,o,y){let r=s[y++];const g=Number.isFinite(+r),n=y>=s.length;return r=!r&&St.isArray(o)?o.length:r,n?(St.hasOwnProp(o,r)?o[r]=[o[r],i]:o[r]=i,!g):((!o[r]||!St.isObject(o[r]))&&(o[r]=[]),t(s,i,o[r],y)&&St.isArray(o[r])&&(o[r]=Qyt(o[r])),!g)}if(St.isFormData(e)&&St.isFunction(e.entries)){const s={};return St.forEachEntry(e,(i,o)=>{t(Jyt(i),o,s,0)}),s}return null}const qyt={"Content-Type":void 0};function _yt(e,t,s){if(St.isString(e))try{return(t||JSON.parse)(e),St.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(s||JSON.stringify)(e)}const Yg={transitional:E5,adapter:["xhr","http"],transformRequest:[function(t,s){const i=s.getContentType()||"",o=i.indexOf("application/json")>-1,y=St.isObject(t);if(y&&St.isHTMLForm(t)&&(t=new FormData(t)),St.isFormData(t))return o&&o?JSON.stringify(b5(t)):t;if(St.isArrayBuffer(t)||St.isBuffer(t)||St.isStream(t)||St.isFile(t)||St.isBlob(t))return t;if(St.isArrayBufferView(t))return t.buffer;if(St.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let g;if(y){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Zyt(t,this.formSerializer).toString();if((g=St.isFileList(t))||i.indexOf("multipart/form-data")>-1){const n=this.env&&this.env.FormData;return Xg(g?{"files[]":t}:t,n&&new n,this.formSerializer)}}return y||o?(s.setContentType("application/json",!1),_yt(t)):t}],transformResponse:[function(t){const s=this.transitional||Yg.transitional,i=s&&s.forcedJSONParsing,o=this.responseType==="json";if(t&&St.isString(t)&&(i&&!this.responseType||o)){const r=!(s&&s.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(g){if(r)throw g.name==="SyntaxError"?me.from(g,me.ERR_BAD_RESPONSE,this,null,this.response):g}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cr.classes.FormData,Blob:cr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};St.forEach(["delete","get","head"],function(t){Yg.headers[t]={}});St.forEach(["post","put","patch"],function(t){Yg.headers[t]=St.merge(qyt)});const nw=Yg,t1t=St.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),e1t=e=>{const t={};let s,i,o;return e&&e.split(`
`).forEach(function(r){o=r.indexOf(":"),s=r.substring(0,o).trim().toLowerCase(),i=r.substring(o+1).trim(),!(!s||t[s]&&t1t[s])&&(s==="set-cookie"?t[s]?t[s].push(i):t[s]=[i]:t[s]=t[s]?t[s]+", "+i:i)}),t},FI=Symbol("internals");function oh(e){return e&&String(e).trim().toLowerCase()}function tp(e){return e===!1||e==null?e:St.isArray(e)?e.map(tp):String(e)}function n1t(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=s.exec(e);)t[i[1]]=i[2];return t}const s1t=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function rx(e,t,s,i,o){if(St.isFunction(i))return i.call(this,t,s);if(o&&(t=s),!!St.isString(t)){if(St.isString(i))return t.indexOf(i)!==-1;if(St.isRegExp(i))return i.test(t)}}function i1t(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,i)=>s.toUpperCase()+i)}function r1t(e,t){const s=St.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+s,{value:function(o,y,r){return this[i].call(this,t,o,y,r)},configurable:!0})})}class Kg{constructor(t){t&&this.set(t)}set(t,s,i){const o=this;function y(g,n,a){const p=oh(n);if(!p)throw new Error("header name must be a non-empty string");const h=St.findKey(o,p);(!h||o[h]===void 0||a===!0||a===void 0&&o[h]!==!1)&&(o[h||n]=tp(g))}const r=(g,n)=>St.forEach(g,(a,p)=>y(a,p,n));return St.isPlainObject(t)||t instanceof this.constructor?r(t,s):St.isString(t)&&(t=t.trim())&&!s1t(t)?r(e1t(t),s):t!=null&&y(s,t,i),this}get(t,s){if(t=oh(t),t){const i=St.findKey(this,t);if(i){const o=this[i];if(!s)return o;if(s===!0)return n1t(o);if(St.isFunction(s))return s.call(this,o,i);if(St.isRegExp(s))return s.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=oh(t),t){const i=St.findKey(this,t);return!!(i&&this[i]!==void 0&&(!s||rx(this,this[i],i,s)))}return!1}delete(t,s){const i=this;let o=!1;function y(r){if(r=oh(r),r){const g=St.findKey(i,r);g&&(!s||rx(i,i[g],g,s))&&(delete i[g],o=!0)}}return St.isArray(t)?t.forEach(y):y(t),o}clear(t){const s=Object.keys(this);let i=s.length,o=!1;for(;i--;){const y=s[i];(!t||rx(this,this[y],y,t,!0))&&(delete this[y],o=!0)}return o}normalize(t){const s=this,i={};return St.forEach(this,(o,y)=>{const r=St.findKey(i,y);if(r){s[r]=tp(o),delete s[y];return}const g=t?i1t(y):String(y).trim();g!==y&&delete s[y],s[g]=tp(o),i[g]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return St.forEach(this,(i,o)=>{i!=null&&i!==!1&&(s[o]=t&&St.isArray(i)?i.join(", "):i)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const i=new this(t);return s.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[FI]=this[FI]={accessors:{}}).accessors,o=this.prototype;function y(r){const g=oh(r);i[g]||(r1t(o,r),i[g]=!0)}return St.isArray(t)?t.forEach(y):y(t),this}}Kg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);St.freezeMethods(Kg.prototype);St.freezeMethods(Kg);const Gr=Kg;function ax(e,t){const s=this||nw,i=t||s,o=Gr.from(i.headers);let y=i.data;return St.forEach(e,function(g){y=g.call(s,y,o.normalize(),t?t.status:void 0)}),o.normalize(),y}function A5(e){return!!(e&&e.__CANCEL__)}function Yf(e,t,s){me.call(this,e??"canceled",me.ERR_CANCELED,t,s),this.name="CanceledError"}St.inherits(Yf,me,{__CANCEL__:!0});function a1t(e,t,s){const i=s.config.validateStatus;!s.status||!i||i(s.status)?e(s):t(new me("Request failed with status code "+s.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}const o1t=cr.isStandardBrowserEnv?function(){return{write:function(s,i,o,y,r,g){const n=[];n.push(s+"="+encodeURIComponent(i)),St.isNumber(o)&&n.push("expires="+new Date(o).toGMTString()),St.isString(y)&&n.push("path="+y),St.isString(r)&&n.push("domain="+r),g===!0&&n.push("secure"),document.cookie=n.join("; ")},read:function(s){const i=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function l1t(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function u1t(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function I5(e,t){return e&&!l1t(t)?u1t(e,t):t}const h1t=cr.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");let i;function o(y){let r=y;return t&&(s.setAttribute("href",r),r=s.href),s.setAttribute("href",r),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return i=o(window.location.href),function(r){const g=St.isString(r)?o(r):r;return g.protocol===i.protocol&&g.host===i.host}}():function(){return function(){return!0}}();function c1t(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function f1t(e,t){e=e||10;const s=new Array(e),i=new Array(e);let o=0,y=0,r;return t=t!==void 0?t:1e3,function(n){const a=Date.now(),p=i[y];r||(r=a),s[o]=n,i[o]=a;let h=y,u=0;for(;h!==o;)u+=s[h++],h=h%e;if(o=(o+1)%e,o===y&&(y=(y+1)%e),a-r<t)return;const d=p&&a-p;return d?Math.round(u*1e3/d):void 0}}function OI(e,t){let s=0;const i=f1t(50,250);return o=>{const y=o.loaded,r=o.lengthComputable?o.total:void 0,g=y-s,n=i(g),a=y<=r;s=y;const p={loaded:y,total:r,progress:r?y/r:void 0,bytes:g,rate:n||void 0,estimated:n&&r&&a?(r-y)/n:void 0,event:o};p[t?"download":"upload"]=!0,e(p)}}const d1t=typeof XMLHttpRequest<"u",p1t=d1t&&function(e){return new Promise(function(s,i){let o=e.data;const y=Gr.from(e.headers).normalize(),r=e.responseType;let g;function n(){e.cancelToken&&e.cancelToken.unsubscribe(g),e.signal&&e.signal.removeEventListener("abort",g)}St.isFormData(o)&&(cr.isStandardBrowserEnv||cr.isStandardBrowserWebWorkerEnv?y.setContentType(!1):y.setContentType("multipart/form-data;",!1));let a=new XMLHttpRequest;if(e.auth){const d=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.set("Authorization","Basic "+btoa(d+":"+l))}const p=I5(e.baseURL,e.url);a.open(e.method.toUpperCase(),w5(p,e.params,e.paramsSerializer),!0),a.timeout=e.timeout;function h(){if(!a)return;const d=Gr.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),c={data:!r||r==="text"||r==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:d,config:e,request:a};a1t(function(f){s(f),n()},function(f){i(f),n()},c),a=null}if("onloadend"in a?a.onloadend=h:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(h)},a.onabort=function(){a&&(i(new me("Request aborted",me.ECONNABORTED,e,a)),a=null)},a.onerror=function(){i(new me("Network Error",me.ERR_NETWORK,e,a)),a=null},a.ontimeout=function(){let l=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const c=e.transitional||E5;e.timeoutErrorMessage&&(l=e.timeoutErrorMessage),i(new me(l,c.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,e,a)),a=null},cr.isStandardBrowserEnv){const d=(e.withCredentials||h1t(p))&&e.xsrfCookieName&&o1t.read(e.xsrfCookieName);d&&y.set(e.xsrfHeaderName,d)}o===void 0&&y.setContentType(null),"setRequestHeader"in a&&St.forEach(y.toJSON(),function(l,c){a.setRequestHeader(c,l)}),St.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),r&&r!=="json"&&(a.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",OI(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",OI(e.onUploadProgress)),(e.cancelToken||e.signal)&&(g=d=>{a&&(i(!d||d.type?new Yf(null,e,a):d),a.abort(),a=null)},e.cancelToken&&e.cancelToken.subscribe(g),e.signal&&(e.signal.aborted?g():e.signal.addEventListener("abort",g)));const u=c1t(p);if(u&&cr.protocols.indexOf(u)===-1){i(new me("Unsupported protocol "+u+":",me.ERR_BAD_REQUEST,e));return}a.send(o||null)})},ep={http:zyt,xhr:p1t};St.forEach(ep,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const m1t={getAdapter:e=>{e=St.isArray(e)?e:[e];const{length:t}=e;let s,i;for(let o=0;o<t&&(s=e[o],!(i=St.isString(s)?ep[s.toLowerCase()]:s));o++);if(!i)throw i===!1?new me(`Adapter ${s} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(St.hasOwnProp(ep,s)?`Adapter '${s}' is not available in the build`:`Unknown adapter '${s}'`);if(!St.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:ep};function ox(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Yf(null,e)}function DI(e){return ox(e),e.headers=Gr.from(e.headers),e.data=ax.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),m1t.getAdapter(e.adapter||nw.adapter)(e).then(function(i){return ox(e),i.data=ax.call(e,e.transformResponse,i),i.headers=Gr.from(i.headers),i},function(i){return A5(i)||(ox(e),i&&i.response&&(i.response.data=ax.call(e,e.transformResponse,i.response),i.response.headers=Gr.from(i.response.headers))),Promise.reject(i)})}const LI=e=>e instanceof Gr?e.toJSON():e;function vu(e,t){t=t||{};const s={};function i(a,p,h){return St.isPlainObject(a)&&St.isPlainObject(p)?St.merge.call({caseless:h},a,p):St.isPlainObject(p)?St.merge({},p):St.isArray(p)?p.slice():p}function o(a,p,h){if(St.isUndefined(p)){if(!St.isUndefined(a))return i(void 0,a,h)}else return i(a,p,h)}function y(a,p){if(!St.isUndefined(p))return i(void 0,p)}function r(a,p){if(St.isUndefined(p)){if(!St.isUndefined(a))return i(void 0,a)}else return i(void 0,p)}function g(a,p,h){if(h in t)return i(a,p);if(h in e)return i(void 0,a)}const n={url:y,method:y,data:y,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:g,headers:(a,p)=>o(LI(a),LI(p),!0)};return St.forEach(Object.keys(Object.assign({},e,t)),function(p){const h=n[p]||o,u=h(e[p],t[p],p);St.isUndefined(u)&&h!==g||(s[p]=u)}),s}const R5="1.4.0",sw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{sw[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const MI={};sw.transitional=function(t,s,i){function o(y,r){return"[Axios v"+R5+"] Transitional option '"+y+"'"+r+(i?". "+i:"")}return(y,r,g)=>{if(t===!1)throw new me(o(r," has been removed"+(s?" in "+s:"")),me.ERR_DEPRECATED);return s&&!MI[r]&&(MI[r]=!0,console.warn(o(r," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(y,r,g):!0}};function v1t(e,t,s){if(typeof e!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const y=i[o],r=t[y];if(r){const g=e[y],n=g===void 0||r(g,y,e);if(n!==!0)throw new me("option "+y+" must be "+n,me.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new me("Unknown option "+y,me.ERR_BAD_OPTION)}}const w1={assertOptions:v1t,validators:sw},ia=w1.validators;class mm{constructor(t){this.defaults=t,this.interceptors={request:new PI,response:new PI}}request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=vu(this.defaults,s);const{transitional:i,paramsSerializer:o,headers:y}=s;i!==void 0&&w1.assertOptions(i,{silentJSONParsing:ia.transitional(ia.boolean),forcedJSONParsing:ia.transitional(ia.boolean),clarifyTimeoutError:ia.transitional(ia.boolean)},!1),o!=null&&(St.isFunction(o)?s.paramsSerializer={serialize:o}:w1.assertOptions(o,{encode:ia.function,serialize:ia.function},!0)),s.method=(s.method||this.defaults.method||"get").toLowerCase();let r;r=y&&St.merge(y.common,y[s.method]),r&&St.forEach(["delete","get","head","post","put","patch","common"],l=>{delete y[l]}),s.headers=Gr.concat(r,y);const g=[];let n=!0;this.interceptors.request.forEach(function(c){typeof c.runWhen=="function"&&c.runWhen(s)===!1||(n=n&&c.synchronous,g.unshift(c.fulfilled,c.rejected))});const a=[];this.interceptors.response.forEach(function(c){a.push(c.fulfilled,c.rejected)});let p,h=0,u;if(!n){const l=[DI.bind(this),void 0];for(l.unshift.apply(l,g),l.push.apply(l,a),u=l.length,p=Promise.resolve(s);h<u;)p=p.then(l[h++],l[h++]);return p}u=g.length;let d=s;for(h=0;h<u;){const l=g[h++],c=g[h++];try{d=l(d)}catch(m){c.call(this,m);break}}try{p=DI.call(this,d)}catch(l){return Promise.reject(l)}for(h=0,u=a.length;h<u;)p=p.then(a[h++],a[h++]);return p}getUri(t){t=vu(this.defaults,t);const s=I5(t.baseURL,t.url);return w5(s,t.params,t.paramsSerializer)}}St.forEach(["delete","get","head","options"],function(t){mm.prototype[t]=function(s,i){return this.request(vu(i||{},{method:t,url:s,data:(i||{}).data}))}});St.forEach(["post","put","patch"],function(t){function s(i){return function(y,r,g){return this.request(vu(g||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:y,data:r}))}}mm.prototype[t]=s(),mm.prototype[t+"Form"]=s(!0)});const np=mm;class iw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(y){s=y});const i=this;this.promise.then(o=>{if(!i._listeners)return;let y=i._listeners.length;for(;y-- >0;)i._listeners[y](o);i._listeners=null}),this.promise.then=o=>{let y;const r=new Promise(g=>{i.subscribe(g),y=g}).then(o);return r.cancel=function(){i.unsubscribe(y)},r},t(function(y,r,g){i.reason||(i.reason=new Yf(y,r,g),s(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}static source(){let t;return{token:new iw(function(o){t=o}),cancel:t}}}const g1t=iw;function x1t(e){return function(s){return e.apply(null,s)}}function y1t(e){return St.isObject(e)&&e.isAxiosError===!0}const E1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(E1).forEach(([e,t])=>{E1[t]=e});const S1t=E1;function N5(e){const t=new np(e),s=c5(np.prototype.request,t);return St.extend(s,np.prototype,t,{allOwnKeys:!0}),St.extend(s,t,null,{allOwnKeys:!0}),s.create=function(o){return N5(vu(e,o))},s}const In=N5(nw);In.Axios=np;In.CanceledError=Yf;In.CancelToken=g1t;In.isCancel=A5;In.VERSION=R5;In.toFormData=Xg;In.AxiosError=me;In.Cancel=In.CanceledError;In.all=function(t){return Promise.all(t)};In.spread=x1t;In.isAxiosError=y1t;In.mergeConfig=vu;In.AxiosHeaders=Gr;In.formToJSON=e=>b5(St.isHTMLForm(e)?new FormData(e):e);In.HttpStatusCode=S1t;In.default=In;const T1t=In,C1t="5000",w1t=`http://localhost:${C1t}/api`;function E1t(){const e=Tc(),[t,s]=dt.useState(""),i=()=>{localStorage.setItem("username",t),T1t.get(w1t+"/lobby").then(o=>{e("/online/lobby",{state:o.data})}).catch(o=>{console.log(o)})};return dt.useEffect(()=>{s(localStorage.getItem("username")||"")},[]),Ut.jsxs("div",{className:"flex flex-col",children:[Ut.jsx("input",{className:"flex m-2",type:"text",value:t,onChange:o=>{s(o.target.value)},placeholder:"username"}),Ut.jsx("button",{onClick:i,children:"Send"})]})}const b1t=()=>{const{state:e}=Cu(),[t,s]=dt.useState([]);return dt.useEffect(()=>{s(e.rooms)},[]),Ut.jsx("div",{className:"Lobby flex flex-row flex-wrap",children:t.map(i=>dt.createElement(I1t,{...i,key:`room_${i.id}`}))})},A1t=()=>Ut.jsxs(Ut.Fragment,{children:[Ut.jsx("h1",{children:"404 NOT FOUND"}),Ut.jsx("p",{children:"お探しのページが見つかりませんでした。"}),Ut.jsx(d8,{to:"",children:"Topに戻る"})]}),jg=e=>Ut.jsx("button",{id:e.id,onClick:e.onClick,children:e.label}),I1t=e=>{const t=Tc();return Ut.jsxs("div",{className:"Room flex flex-col border rounded p-4 m-1",children:[Ut.jsxs("div",{children:["Room ",e.id]}),Ut.jsxs("div",{className:"text-left",children:["size: ",e.size]}),Ut.jsxs("div",{className:"text-left flex flex-row m-1",children:["1:",Ut.jsx("div",{className:"flex w-full border rounded",children:e.player1})]}),Ut.jsxs("div",{className:"text-left flex flex-row m-1",children:["2:",Ut.jsx("div",{className:"flex w-full border rounded",children:e.player2})]}),Ut.jsx(jg,{id:`ButtonRoom${e.id}`,label:"Enter",onClick:()=>{t("/online/entrance",{state:{id:e.id}})}})]})},$I=e=>{const t=e.buttons.map(s=>Ut.jsx(jg,{...s},s.id));return Ut.jsx("div",{className:"ButtonContainer",children:t})};const lx=document.getElementById("root");lx!==null&&lx.childNodes.length===0&&hx.createRoot(lx).render(Ut.jsx(m8,{}));
