var GL=Object.defineProperty;var UL=(n,t,s)=>t in n?GL(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var _t=(n,t,s)=>(UL(n,typeof t!="symbol"?t+"":t,s),s);function WL(n,t){for(var s=0;s<t.length;s++){const r=t[s];if(typeof r!="string"&&!Array.isArray(r)){for(const d in r)if(d!=="default"&&!(d in n)){const S=Object.getOwnPropertyDescriptor(r,d);S&&Object.defineProperty(n,d,S.get?S:{enumerable:!0,get:()=>r[d]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))r(d);new MutationObserver(d=>{for(const S of d)if(S.type==="childList")for(const i of S.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(d){const S={};return d.integrity&&(S.integrity=d.integrity),d.referrerPolicy&&(S.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?S.credentials="include":d.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function r(d){if(d.ep)return;d.ep=!0;const S=s(d);fetch(d.href,S)}})();var Mn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function XL(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var s=function r(){if(this instanceof r){var d=[null];d.push.apply(d,arguments);var S=Function.bind.apply(t,d);return new S}return t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var d=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(s,r,d.get?d:{enumerable:!0,get:function(){return n[r]}})}),s}var nE={exports:{}},Xd={},sE={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mh=Symbol.for("react.element"),HL=Symbol.for("react.portal"),YL=Symbol.for("react.fragment"),KL=Symbol.for("react.strict_mode"),jL=Symbol.for("react.profiler"),ZL=Symbol.for("react.provider"),QL=Symbol.for("react.context"),JL=Symbol.for("react.forward_ref"),qL=Symbol.for("react.suspense"),_L=Symbol.for("react.memo"),tM=Symbol.for("react.lazy"),nS=Symbol.iterator;function eM(n){return n===null||typeof n!="object"?null:(n=nS&&n[nS]||n["@@iterator"],typeof n=="function"?n:null)}var iE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rE=Object.assign,aE={};function Ol(n,t,s){this.props=n,this.context=t,this.refs=aE,this.updater=s||iE}Ol.prototype.isReactComponent={};Ol.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};Ol.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function oE(){}oE.prototype=Ol.prototype;function ex(n,t,s){this.props=n,this.context=t,this.refs=aE,this.updater=s||iE}var nx=ex.prototype=new oE;nx.constructor=ex;rE(nx,Ol.prototype);nx.isPureReactComponent=!0;var sS=Array.isArray,lE=Object.prototype.hasOwnProperty,sx={current:null},uE={key:!0,ref:!0,__self:!0,__source:!0};function hE(n,t,s){var r,d={},S=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(S=""+t.key),t)lE.call(t,r)&&!uE.hasOwnProperty(r)&&(d[r]=t[r]);var g=arguments.length-2;if(g===1)d.children=s;else if(1<g){for(var e=Array(g),a=0;a<g;a++)e[a]=arguments[a+2];d.children=e}if(n&&n.defaultProps)for(r in g=n.defaultProps,g)d[r]===void 0&&(d[r]=g[r]);return{$$typeof:mh,type:n,key:S,ref:i,props:d,_owner:sx.current}}function nM(n,t){return{$$typeof:mh,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function ix(n){return typeof n=="object"&&n!==null&&n.$$typeof===mh}function sM(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(s){return t[s]})}var iS=/\/+/g;function hv(n,t){return typeof n=="object"&&n!==null&&n.key!=null?sM(""+n.key):t.toString(36)}function Af(n,t,s,r,d){var S=typeof n;(S==="undefined"||S==="boolean")&&(n=null);var i=!1;if(n===null)i=!0;else switch(S){case"string":case"number":i=!0;break;case"object":switch(n.$$typeof){case mh:case HL:i=!0}}if(i)return i=n,d=d(i),n=r===""?"."+hv(i,0):r,sS(d)?(s="",n!=null&&(s=n.replace(iS,"$&/")+"/"),Af(d,t,s,"",function(a){return a})):d!=null&&(ix(d)&&(d=nM(d,s+(!d.key||i&&i.key===d.key?"":(""+d.key).replace(iS,"$&/")+"/")+n)),t.push(d)),1;if(i=0,r=r===""?".":r+":",sS(n))for(var g=0;g<n.length;g++){S=n[g];var e=r+hv(S,g);i+=Af(S,t,s,e,d)}else if(e=eM(n),typeof e=="function")for(n=e.call(n),g=0;!(S=n.next()).done;)S=S.value,e=r+hv(S,g++),i+=Af(S,t,s,e,d);else if(S==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Yc(n,t,s){if(n==null)return n;var r=[],d=0;return Af(n,r,"","",function(S){return t.call(s,S,d++)}),r}function iM(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(s){(n._status===0||n._status===-1)&&(n._status=1,n._result=s)},function(s){(n._status===0||n._status===-1)&&(n._status=2,n._result=s)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var ts={current:null},bf={transition:null},rM={ReactCurrentDispatcher:ts,ReactCurrentBatchConfig:bf,ReactCurrentOwner:sx};re.Children={map:Yc,forEach:function(n,t,s){Yc(n,function(){t.apply(this,arguments)},s)},count:function(n){var t=0;return Yc(n,function(){t++}),t},toArray:function(n){return Yc(n,function(t){return t})||[]},only:function(n){if(!ix(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};re.Component=Ol;re.Fragment=YL;re.Profiler=jL;re.PureComponent=ex;re.StrictMode=KL;re.Suspense=qL;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rM;re.cloneElement=function(n,t,s){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=rE({},n.props),d=n.key,S=n.ref,i=n._owner;if(t!=null){if(t.ref!==void 0&&(S=t.ref,i=sx.current),t.key!==void 0&&(d=""+t.key),n.type&&n.type.defaultProps)var g=n.type.defaultProps;for(e in t)lE.call(t,e)&&!uE.hasOwnProperty(e)&&(r[e]=t[e]===void 0&&g!==void 0?g[e]:t[e])}var e=arguments.length-2;if(e===1)r.children=s;else if(1<e){g=Array(e);for(var a=0;a<e;a++)g[a]=arguments[a+2];r.children=g}return{$$typeof:mh,type:n.type,key:d,ref:S,props:r,_owner:i}};re.createContext=function(n){return n={$$typeof:QL,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:ZL,_context:n},n.Consumer=n};re.createElement=hE;re.createFactory=function(n){var t=hE.bind(null,n);return t.type=n,t};re.createRef=function(){return{current:null}};re.forwardRef=function(n){return{$$typeof:JL,render:n}};re.isValidElement=ix;re.lazy=function(n){return{$$typeof:tM,_payload:{_status:-1,_result:n},_init:iM}};re.memo=function(n,t){return{$$typeof:_L,type:n,compare:t===void 0?null:t}};re.startTransition=function(n){var t=bf.transition;bf.transition={};try{n()}finally{bf.transition=t}};re.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};re.useCallback=function(n,t){return ts.current.useCallback(n,t)};re.useContext=function(n){return ts.current.useContext(n)};re.useDebugValue=function(){};re.useDeferredValue=function(n){return ts.current.useDeferredValue(n)};re.useEffect=function(n,t){return ts.current.useEffect(n,t)};re.useId=function(){return ts.current.useId()};re.useImperativeHandle=function(n,t,s){return ts.current.useImperativeHandle(n,t,s)};re.useInsertionEffect=function(n,t){return ts.current.useInsertionEffect(n,t)};re.useLayoutEffect=function(n,t){return ts.current.useLayoutEffect(n,t)};re.useMemo=function(n,t){return ts.current.useMemo(n,t)};re.useReducer=function(n,t,s){return ts.current.useReducer(n,t,s)};re.useRef=function(n){return ts.current.useRef(n)};re.useState=function(n){return ts.current.useState(n)};re.useSyncExternalStore=function(n,t,s){return ts.current.useSyncExternalStore(n,t,s)};re.useTransition=function(){return ts.current.useTransition()};re.version="18.2.0";sE.exports=re;var vh=sE.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aM=vh,oM=Symbol.for("react.element"),lM=Symbol.for("react.fragment"),uM=Object.prototype.hasOwnProperty,hM=aM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cM={key:!0,ref:!0,__self:!0,__source:!0};function cE(n,t,s){var r,d={},S=null,i=null;s!==void 0&&(S=""+s),t.key!==void 0&&(S=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)uM.call(t,r)&&!cM.hasOwnProperty(r)&&(d[r]=t[r]);if(n&&n.defaultProps)for(r in t=n.defaultProps,t)d[r]===void 0&&(d[r]=t[r]);return{$$typeof:oM,type:n,key:S,ref:i,props:d,_owner:hM.current}}Xd.Fragment=lM;Xd.jsx=cE;Xd.jsxs=cE;nE.exports=Xd;var lr=nE.exports,ng={},fE={exports:{}},Ds={},dE={exports:{}},pE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(L,k){var V=L.length;L.push(k);t:for(;0<V;){var W=V-1>>>1,K=L[W];if(0<d(K,k))L[W]=k,L[V]=K,V=W;else break t}}function s(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var k=L[0],V=L.pop();if(V!==k){L[0]=V;t:for(var W=0,K=L.length,B=K>>>1;W<B;){var G=2*(W+1)-1,D=L[G],$=G+1,z=L[$];if(0>d(D,V))$<K&&0>d(z,D)?(L[W]=z,L[$]=V,W=$):(L[W]=D,L[G]=V,W=G);else if($<K&&0>d(z,V))L[W]=z,L[$]=V,W=$;else break t}}return k}function d(L,k){var V=L.sortIndex-k.sortIndex;return V!==0?V:L.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var S=performance;n.unstable_now=function(){return S.now()}}else{var i=Date,g=i.now();n.unstable_now=function(){return i.now()-g}}var e=[],a=[],v=1,u=null,o=3,c=!1,l=!1,f=!1,m=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(L){for(var k=s(a);k!==null;){if(k.callback===null)r(a);else if(k.startTime<=L)r(a),k.sortIndex=k.expirationTime,t(e,k);else break;k=s(a)}}function x(L){if(f=!1,y(L),!l)if(s(e)!==null)l=!0,O(T);else{var k=s(a);k!==null&&M(x,k.startTime-L)}}function T(L,k){l=!1,f&&(f=!1,h(A),A=-1),c=!0;var V=o;try{for(y(k),u=s(e);u!==null&&(!(u.expirationTime>k)||L&&!I());){var W=u.callback;if(typeof W=="function"){u.callback=null,o=u.priorityLevel;var K=W(u.expirationTime<=k);k=n.unstable_now(),typeof K=="function"?u.callback=K:u===s(e)&&r(e),y(k)}else r(e);u=s(e)}if(u!==null)var B=!0;else{var G=s(a);G!==null&&M(x,G.startTime-k),B=!1}return B}finally{u=null,o=V,c=!1}}var C=!1,E=null,A=-1,w=5,b=-1;function I(){return!(n.unstable_now()-b<w)}function R(){if(E!==null){var L=n.unstable_now();b=L;var k=!0;try{k=E(!0,L)}finally{k?N():(C=!1,E=null)}}else C=!1}var N;if(typeof p=="function")N=function(){p(R)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,P=F.port2;F.port1.onmessage=R,N=function(){P.postMessage(null)}}else N=function(){m(R,0)};function O(L){E=L,C||(C=!0,N())}function M(L,k){A=m(function(){L(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){l||c||(l=!0,O(T))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return o},n.unstable_getFirstCallbackNode=function(){return s(e)},n.unstable_next=function(L){switch(o){case 1:case 2:case 3:var k=3;break;default:k=o}var V=o;o=k;try{return L()}finally{o=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,k){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=o;o=L;try{return k()}finally{o=V}},n.unstable_scheduleCallback=function(L,k,V){var W=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?W+V:W):V=W,L){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=V+K,L={id:v++,callback:k,priorityLevel:L,startTime:V,expirationTime:K,sortIndex:-1},V>W?(L.sortIndex=V,t(a,L),s(e)===null&&L===s(a)&&(f?(h(A),A=-1):f=!0,M(x,V-W))):(L.sortIndex=K,t(e,L),l||c||(l=!0,O(T))),L},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(L){var k=o;return function(){var V=o;o=k;try{return L.apply(this,arguments)}finally{o=V}}}})(pE);dE.exports=pE;var fM=dE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE=vh,Is=fM;function At(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vE=new Set,Bu={};function uo(n,t){cl(n,t),cl(n+"Capture",t)}function cl(n,t){for(Bu[n]=t,n=0;n<t.length;n++)vE.add(t[n])}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sg=Object.prototype.hasOwnProperty,dM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rS={},aS={};function pM(n){return sg.call(aS,n)?!0:sg.call(rS,n)?!1:dM.test(n)?aS[n]=!0:(rS[n]=!0,!1)}function mM(n,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function vM(n,t,s,r){if(t===null||typeof t>"u"||mM(n,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function es(n,t,s,r,d,S,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=n,this.type=t,this.sanitizeURL=S,this.removeEmptyString=i}var Nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Nn[n]=new es(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];Nn[t]=new es(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Nn[n]=new es(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Nn[n]=new es(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Nn[n]=new es(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Nn[n]=new es(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Nn[n]=new es(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Nn[n]=new es(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Nn[n]=new es(n,5,!1,n.toLowerCase(),null,!1,!1)});var rx=/[\-:]([a-z])/g;function ax(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(rx,ax);Nn[t]=new es(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(rx,ax);Nn[t]=new es(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(rx,ax);Nn[t]=new es(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Nn[n]=new es(n,1,!1,n.toLowerCase(),null,!1,!1)});Nn.xlinkHref=new es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Nn[n]=new es(n,1,!1,n.toLowerCase(),null,!0,!0)});function ox(n,t,s,r){var d=Nn.hasOwnProperty(t)?Nn[t]:null;(d!==null?d.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vM(t,s,d,r)&&(s=null),r||d===null?pM(t)&&(s===null?n.removeAttribute(t):n.setAttribute(t,""+s)):d.mustUseProperty?n[d.propertyName]=s===null?d.type===3?!1:"":s:(t=d.attributeName,r=d.attributeNamespace,s===null?n.removeAttribute(t):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,r?n.setAttributeNS(r,t,s):n.setAttribute(t,s))))}var Cr=mE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kc=Symbol.for("react.element"),zo=Symbol.for("react.portal"),Vo=Symbol.for("react.fragment"),lx=Symbol.for("react.strict_mode"),ig=Symbol.for("react.profiler"),gE=Symbol.for("react.provider"),xE=Symbol.for("react.context"),ux=Symbol.for("react.forward_ref"),rg=Symbol.for("react.suspense"),ag=Symbol.for("react.suspense_list"),hx=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),yE=Symbol.for("react.offscreen"),oS=Symbol.iterator;function iu(n){return n===null||typeof n!="object"?null:(n=oS&&n[oS]||n["@@iterator"],typeof n=="function"?n:null)}var ke=Object.assign,cv;function vu(n){if(cv===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);cv=t&&t[1]||""}return`
`+cv+n}var fv=!1;function dv(n,t){if(!n||fv)return"";fv=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(a){var r=a}Reflect.construct(n,[],t)}else{try{t.call()}catch(a){r=a}n.call(t.prototype)}else{try{throw Error()}catch(a){r=a}n()}}catch(a){if(a&&r&&typeof a.stack=="string"){for(var d=a.stack.split(`
`),S=r.stack.split(`
`),i=d.length-1,g=S.length-1;1<=i&&0<=g&&d[i]!==S[g];)g--;for(;1<=i&&0<=g;i--,g--)if(d[i]!==S[g]){if(i!==1||g!==1)do if(i--,g--,0>g||d[i]!==S[g]){var e=`
`+d[i].replace(" at new "," at ");return n.displayName&&e.includes("<anonymous>")&&(e=e.replace("<anonymous>",n.displayName)),e}while(1<=i&&0<=g);break}}}finally{fv=!1,Error.prepareStackTrace=s}return(n=n?n.displayName||n.name:"")?vu(n):""}function gM(n){switch(n.tag){case 5:return vu(n.type);case 16:return vu("Lazy");case 13:return vu("Suspense");case 19:return vu("SuspenseList");case 0:case 2:case 15:return n=dv(n.type,!1),n;case 11:return n=dv(n.type.render,!1),n;case 1:return n=dv(n.type,!0),n;default:return""}}function og(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Vo:return"Fragment";case zo:return"Portal";case ig:return"Profiler";case lx:return"StrictMode";case rg:return"Suspense";case ag:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case xE:return(n.displayName||"Context")+".Consumer";case gE:return(n._context.displayName||"Context")+".Provider";case ux:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case hx:return t=n.displayName||null,t!==null?t:og(n.type)||"Memo";case Pr:t=n._payload,n=n._init;try{return og(n(t))}catch{}}return null}function xM(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return og(t);case 8:return t===lx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function TE(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yM(n){var t=TE(n)?"checked":"value",s=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),r=""+n[t];if(!n.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,S=s.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return d.call(this)},set:function(i){r=""+i,S.call(this,i)}}),Object.defineProperty(n,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function jc(n){n._valueTracker||(n._valueTracker=yM(n))}function SE(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return n&&(r=TE(n)?n.checked?"true":"false":n.value),n=r,n!==s?(t.setValue(n),!0):!1}function Gf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function lg(n,t){var s=t.checked;return ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??n._wrapperState.initialChecked})}function lS(n,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=qr(t.value!=null?t.value:s),n._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function CE(n,t){t=t.checked,t!=null&&ox(n,"checked",t,!1)}function ug(n,t){CE(n,t);var s=qr(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+s):n.value!==""+s&&(n.value=""+s);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?hg(n,t.type,s):t.hasOwnProperty("defaultValue")&&hg(n,t.type,qr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function uS(n,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,s||t===n.value||(n.value=t),n.defaultValue=t}s=n.name,s!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,s!==""&&(n.name=s)}function hg(n,t,s){(t!=="number"||Gf(n.ownerDocument)!==n)&&(s==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+s&&(n.defaultValue=""+s))}var gu=Array.isArray;function qo(n,t,s,r){if(n=n.options,t){t={};for(var d=0;d<s.length;d++)t["$"+s[d]]=!0;for(s=0;s<n.length;s++)d=t.hasOwnProperty("$"+n[s].value),n[s].selected!==d&&(n[s].selected=d),d&&r&&(n[s].defaultSelected=!0)}else{for(s=""+qr(s),t=null,d=0;d<n.length;d++){if(n[d].value===s){n[d].selected=!0,r&&(n[d].defaultSelected=!0);return}t!==null||n[d].disabled||(t=n[d])}t!==null&&(t.selected=!0)}}function cg(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return ke({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function hS(n,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(At(92));if(gu(s)){if(1<s.length)throw Error(At(93));s=s[0]}t=s}t==null&&(t=""),s=t}n._wrapperState={initialValue:qr(s)}}function wE(n,t){var s=qr(t.value),r=qr(t.defaultValue);s!=null&&(s=""+s,s!==n.value&&(n.value=s),t.defaultValue==null&&n.defaultValue!==s&&(n.defaultValue=s)),r!=null&&(n.defaultValue=""+r)}function cS(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function EE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fg(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?EE(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Zc,AE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,d){MSApp.execUnsafeLocalFunction(function(){return n(t,s,r,d)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(Zc=Zc||document.createElement("div"),Zc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zc.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function ku(n,t){if(t){var s=n.firstChild;if(s&&s===n.lastChild&&s.nodeType===3){s.nodeValue=t;return}}n.textContent=t}var bu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TM=["Webkit","ms","Moz","O"];Object.keys(bu).forEach(function(n){TM.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),bu[t]=bu[n]})});function bE(n,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||bu.hasOwnProperty(n)&&bu[n]?(""+t).trim():t+"px"}function IE(n,t){n=n.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,d=bE(s,t[s],r);s==="float"&&(s="cssFloat"),r?n.setProperty(s,d):n[s]=d}}var SM=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dg(n,t){if(t){if(SM[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function pg(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mg=null;function cx(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vg=null,_o=null,tl=null;function fS(n){if(n=yh(n)){if(typeof vg!="function")throw Error(At(280));var t=n.stateNode;t&&(t=Zd(t),vg(n.stateNode,n.type,t))}}function RE(n){_o?tl?tl.push(n):tl=[n]:_o=n}function NE(){if(_o){var n=_o,t=tl;if(tl=_o=null,fS(n),t)for(n=0;n<t.length;n++)fS(t[n])}}function PE(n,t){return n(t)}function FE(){}var pv=!1;function DE(n,t,s){if(pv)return n(t,s);pv=!0;try{return PE(n,t,s)}finally{pv=!1,(_o!==null||tl!==null)&&(FE(),NE())}}function zu(n,t){var s=n.stateNode;if(s===null)return null;var r=Zd(s);if(r===null)return null;s=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break t;default:n=!1}if(n)return null;if(s&&typeof s!="function")throw Error(At(231,t,typeof s));return s}var gg=!1;if(mr)try{var ru={};Object.defineProperty(ru,"passive",{get:function(){gg=!0}}),window.addEventListener("test",ru,ru),window.removeEventListener("test",ru,ru)}catch{gg=!1}function CM(n,t,s,r,d,S,i,g,e){var a=Array.prototype.slice.call(arguments,3);try{t.apply(s,a)}catch(v){this.onError(v)}}var Iu=!1,Uf=null,Wf=!1,xg=null,wM={onError:function(n){Iu=!0,Uf=n}};function EM(n,t,s,r,d,S,i,g,e){Iu=!1,Uf=null,CM.apply(wM,arguments)}function AM(n,t,s,r,d,S,i,g,e){if(EM.apply(this,arguments),Iu){if(Iu){var a=Uf;Iu=!1,Uf=null}else throw Error(At(198));Wf||(Wf=!0,xg=a)}}function ho(n){var t=n,s=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(s=t.return),n=t.return;while(n)}return t.tag===3?s:null}function OE(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function dS(n){if(ho(n)!==n)throw Error(At(188))}function bM(n){var t=n.alternate;if(!t){if(t=ho(n),t===null)throw Error(At(188));return t!==n?null:n}for(var s=n,r=t;;){var d=s.return;if(d===null)break;var S=d.alternate;if(S===null){if(r=d.return,r!==null){s=r;continue}break}if(d.child===S.child){for(S=d.child;S;){if(S===s)return dS(d),n;if(S===r)return dS(d),t;S=S.sibling}throw Error(At(188))}if(s.return!==r.return)s=d,r=S;else{for(var i=!1,g=d.child;g;){if(g===s){i=!0,s=d,r=S;break}if(g===r){i=!0,r=d,s=S;break}g=g.sibling}if(!i){for(g=S.child;g;){if(g===s){i=!0,s=S,r=d;break}if(g===r){i=!0,r=S,s=d;break}g=g.sibling}if(!i)throw Error(At(189))}}if(s.alternate!==r)throw Error(At(190))}if(s.tag!==3)throw Error(At(188));return s.stateNode.current===s?n:t}function LE(n){return n=bM(n),n!==null?ME(n):null}function ME(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=ME(n);if(t!==null)return t;n=n.sibling}return null}var $E=Is.unstable_scheduleCallback,pS=Is.unstable_cancelCallback,IM=Is.unstable_shouldYield,RM=Is.unstable_requestPaint,je=Is.unstable_now,NM=Is.unstable_getCurrentPriorityLevel,fx=Is.unstable_ImmediatePriority,BE=Is.unstable_UserBlockingPriority,Xf=Is.unstable_NormalPriority,PM=Is.unstable_LowPriority,kE=Is.unstable_IdlePriority,Hd=null,Ui=null;function FM(n){if(Ui&&typeof Ui.onCommitFiberRoot=="function")try{Ui.onCommitFiberRoot(Hd,n,void 0,(n.current.flags&128)===128)}catch{}}var yi=Math.clz32?Math.clz32:LM,DM=Math.log,OM=Math.LN2;function LM(n){return n>>>=0,n===0?32:31-(DM(n)/OM|0)|0}var Qc=64,Jc=4194304;function xu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Hf(n,t){var s=n.pendingLanes;if(s===0)return 0;var r=0,d=n.suspendedLanes,S=n.pingedLanes,i=s&268435455;if(i!==0){var g=i&~d;g!==0?r=xu(g):(S&=i,S!==0&&(r=xu(S)))}else i=s&~d,i!==0?r=xu(i):S!==0&&(r=xu(S));if(r===0)return 0;if(t!==0&&t!==r&&!(t&d)&&(d=r&-r,S=t&-t,d>=S||d===16&&(S&4194240)!==0))return t;if(r&4&&(r|=s&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=r;0<t;)s=31-yi(t),d=1<<s,r|=n[s],t&=~d;return r}function MM(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $M(n,t){for(var s=n.suspendedLanes,r=n.pingedLanes,d=n.expirationTimes,S=n.pendingLanes;0<S;){var i=31-yi(S),g=1<<i,e=d[i];e===-1?(!(g&s)||g&r)&&(d[i]=MM(g,t)):e<=t&&(n.expiredLanes|=g),S&=~g}}function yg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function zE(){var n=Qc;return Qc<<=1,!(Qc&4194240)&&(Qc=64),n}function mv(n){for(var t=[],s=0;31>s;s++)t.push(n);return t}function gh(n,t,s){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-yi(t),n[t]=s}function BM(n,t){var s=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<s;){var d=31-yi(s),S=1<<d;t[d]=0,r[d]=-1,n[d]=-1,s&=~S}}function dx(n,t){var s=n.entangledLanes|=t;for(n=n.entanglements;s;){var r=31-yi(s),d=1<<r;d&t|n[r]&t&&(n[r]|=t),s&=~d}}var de=0;function VE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var GE,px,UE,WE,XE,Tg=!1,qc=[],Vr=null,Gr=null,Ur=null,Vu=new Map,Gu=new Map,Or=[],kM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mS(n,t){switch(n){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":Vu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(t.pointerId)}}function au(n,t,s,r,d,S){return n===null||n.nativeEvent!==S?(n={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:S,targetContainers:[d]},t!==null&&(t=yh(t),t!==null&&px(t)),n):(n.eventSystemFlags|=r,t=n.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),n)}function zM(n,t,s,r,d){switch(t){case"focusin":return Vr=au(Vr,n,t,s,r,d),!0;case"dragenter":return Gr=au(Gr,n,t,s,r,d),!0;case"mouseover":return Ur=au(Ur,n,t,s,r,d),!0;case"pointerover":var S=d.pointerId;return Vu.set(S,au(Vu.get(S)||null,n,t,s,r,d)),!0;case"gotpointercapture":return S=d.pointerId,Gu.set(S,au(Gu.get(S)||null,n,t,s,r,d)),!0}return!1}function HE(n){var t=Ma(n.target);if(t!==null){var s=ho(t);if(s!==null){if(t=s.tag,t===13){if(t=OE(s),t!==null){n.blockedOn=t,XE(n.priority,function(){UE(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){n.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}n.blockedOn=null}function If(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var s=Sg(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(s===null){s=n.nativeEvent;var r=new s.constructor(s.type,s);mg=r,s.target.dispatchEvent(r),mg=null}else return t=yh(s),t!==null&&px(t),n.blockedOn=s,!1;t.shift()}return!0}function vS(n,t,s){If(n)&&s.delete(t)}function VM(){Tg=!1,Vr!==null&&If(Vr)&&(Vr=null),Gr!==null&&If(Gr)&&(Gr=null),Ur!==null&&If(Ur)&&(Ur=null),Vu.forEach(vS),Gu.forEach(vS)}function ou(n,t){n.blockedOn===t&&(n.blockedOn=null,Tg||(Tg=!0,Is.unstable_scheduleCallback(Is.unstable_NormalPriority,VM)))}function Uu(n){function t(d){return ou(d,n)}if(0<qc.length){ou(qc[0],n);for(var s=1;s<qc.length;s++){var r=qc[s];r.blockedOn===n&&(r.blockedOn=null)}}for(Vr!==null&&ou(Vr,n),Gr!==null&&ou(Gr,n),Ur!==null&&ou(Ur,n),Vu.forEach(t),Gu.forEach(t),s=0;s<Or.length;s++)r=Or[s],r.blockedOn===n&&(r.blockedOn=null);for(;0<Or.length&&(s=Or[0],s.blockedOn===null);)HE(s),s.blockedOn===null&&Or.shift()}var el=Cr.ReactCurrentBatchConfig,Yf=!0;function GM(n,t,s,r){var d=de,S=el.transition;el.transition=null;try{de=1,mx(n,t,s,r)}finally{de=d,el.transition=S}}function UM(n,t,s,r){var d=de,S=el.transition;el.transition=null;try{de=4,mx(n,t,s,r)}finally{de=d,el.transition=S}}function mx(n,t,s,r){if(Yf){var d=Sg(n,t,s,r);if(d===null)Av(n,t,r,Kf,s),mS(n,r);else if(zM(d,n,t,s,r))r.stopPropagation();else if(mS(n,r),t&4&&-1<kM.indexOf(n)){for(;d!==null;){var S=yh(d);if(S!==null&&GE(S),S=Sg(n,t,s,r),S===null&&Av(n,t,r,Kf,s),S===d)break;d=S}d!==null&&r.stopPropagation()}else Av(n,t,r,null,s)}}var Kf=null;function Sg(n,t,s,r){if(Kf=null,n=cx(r),n=Ma(n),n!==null)if(t=ho(n),t===null)n=null;else if(s=t.tag,s===13){if(n=OE(t),n!==null)return n;n=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return Kf=n,null}function YE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NM()){case fx:return 1;case BE:return 4;case Xf:case PM:return 16;case kE:return 536870912;default:return 16}default:return 16}}var Mr=null,vx=null,Rf=null;function KE(){if(Rf)return Rf;var n,t=vx,s=t.length,r,d="value"in Mr?Mr.value:Mr.textContent,S=d.length;for(n=0;n<s&&t[n]===d[n];n++);var i=s-n;for(r=1;r<=i&&t[s-r]===d[S-r];r++);return Rf=d.slice(n,1<r?1-r:void 0)}function Nf(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function _c(){return!0}function gS(){return!1}function Os(n){function t(s,r,d,S,i){this._reactName=s,this._targetInst=d,this.type=r,this.nativeEvent=S,this.target=i,this.currentTarget=null;for(var g in n)n.hasOwnProperty(g)&&(s=n[g],this[g]=s?s(S):S[g]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?_c:gS,this.isPropagationStopped=gS,this}return ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=_c)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=_c)},persist:function(){},isPersistent:_c}),t}var Ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gx=Os(Ll),xh=ke({},Ll,{view:0,detail:0}),WM=Os(xh),vv,gv,lu,Yd=ke({},xh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xx,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==lu&&(lu&&n.type==="mousemove"?(vv=n.screenX-lu.screenX,gv=n.screenY-lu.screenY):gv=vv=0,lu=n),vv)},movementY:function(n){return"movementY"in n?n.movementY:gv}}),xS=Os(Yd),XM=ke({},Yd,{dataTransfer:0}),HM=Os(XM),YM=ke({},xh,{relatedTarget:0}),xv=Os(YM),KM=ke({},Ll,{animationName:0,elapsedTime:0,pseudoElement:0}),jM=Os(KM),ZM=ke({},Ll,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),QM=Os(ZM),JM=ke({},Ll,{data:0}),yS=Os(JM),qM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_M={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e4(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=t4[n])?!!t[n]:!1}function xx(){return e4}var n4=ke({},xh,{key:function(n){if(n.key){var t=qM[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=Nf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?_M[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xx,charCode:function(n){return n.type==="keypress"?Nf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Nf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),s4=Os(n4),i4=ke({},Yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TS=Os(i4),r4=ke({},xh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xx}),a4=Os(r4),o4=ke({},Ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),l4=Os(o4),u4=ke({},Yd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),h4=Os(u4),c4=[9,13,27,32],yx=mr&&"CompositionEvent"in window,Ru=null;mr&&"documentMode"in document&&(Ru=document.documentMode);var f4=mr&&"TextEvent"in window&&!Ru,jE=mr&&(!yx||Ru&&8<Ru&&11>=Ru),SS=String.fromCharCode(32),CS=!1;function ZE(n,t){switch(n){case"keyup":return c4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Go=!1;function d4(n,t){switch(n){case"compositionend":return QE(t);case"keypress":return t.which!==32?null:(CS=!0,SS);case"textInput":return n=t.data,n===SS&&CS?null:n;default:return null}}function p4(n,t){if(Go)return n==="compositionend"||!yx&&ZE(n,t)?(n=KE(),Rf=vx=Mr=null,Go=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jE&&t.locale!=="ko"?null:t.data;default:return null}}var m4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wS(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!m4[n.type]:t==="textarea"}function JE(n,t,s,r){RE(r),t=jf(t,"onChange"),0<t.length&&(s=new gx("onChange","change",null,s,r),n.push({event:s,listeners:t}))}var Nu=null,Wu=null;function v4(n){lA(n,0)}function Kd(n){var t=Xo(n);if(SE(t))return n}function g4(n,t){if(n==="change")return t}var qE=!1;if(mr){var yv;if(mr){var Tv="oninput"in document;if(!Tv){var ES=document.createElement("div");ES.setAttribute("oninput","return;"),Tv=typeof ES.oninput=="function"}yv=Tv}else yv=!1;qE=yv&&(!document.documentMode||9<document.documentMode)}function AS(){Nu&&(Nu.detachEvent("onpropertychange",_E),Wu=Nu=null)}function _E(n){if(n.propertyName==="value"&&Kd(Wu)){var t=[];JE(t,Wu,n,cx(n)),DE(v4,t)}}function x4(n,t,s){n==="focusin"?(AS(),Nu=t,Wu=s,Nu.attachEvent("onpropertychange",_E)):n==="focusout"&&AS()}function y4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Kd(Wu)}function T4(n,t){if(n==="click")return Kd(t)}function S4(n,t){if(n==="input"||n==="change")return Kd(t)}function C4(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var wi=typeof Object.is=="function"?Object.is:C4;function Xu(n,t){if(wi(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var s=Object.keys(n),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var d=s[r];if(!sg.call(t,d)||!wi(n[d],t[d]))return!1}return!0}function bS(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function IS(n,t){var s=bS(n);n=0;for(var r;s;){if(s.nodeType===3){if(r=n+s.textContent.length,n<=t&&r>=t)return{node:s,offset:t-n};n=r}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=bS(s)}}function tA(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?tA(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function eA(){for(var n=window,t=Gf();t instanceof n.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)n=t.contentWindow;else break;t=Gf(n.document)}return t}function Tx(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function w4(n){var t=eA(),s=n.focusedElem,r=n.selectionRange;if(t!==s&&s&&s.ownerDocument&&tA(s.ownerDocument.documentElement,s)){if(r!==null&&Tx(s)){if(t=r.start,n=r.end,n===void 0&&(n=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(n,s.value.length);else if(n=(t=s.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var d=s.textContent.length,S=Math.min(r.start,d);r=r.end===void 0?S:Math.min(r.end,d),!n.extend&&S>r&&(d=r,r=S,S=d),d=IS(s,S);var i=IS(s,r);d&&i&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==i.node||n.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),n.removeAllRanges(),S>r?(n.addRange(t),n.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),n.addRange(t)))}}for(t=[],n=s;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)n=t[s],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var E4=mr&&"documentMode"in document&&11>=document.documentMode,Uo=null,Cg=null,Pu=null,wg=!1;function RS(n,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;wg||Uo==null||Uo!==Gf(r)||(r=Uo,"selectionStart"in r&&Tx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pu&&Xu(Pu,r)||(Pu=r,r=jf(Cg,"onSelect"),0<r.length&&(t=new gx("onSelect","select",null,t,s),n.push({event:t,listeners:r}),t.target=Uo)))}function tf(n,t){var s={};return s[n.toLowerCase()]=t.toLowerCase(),s["Webkit"+n]="webkit"+t,s["Moz"+n]="moz"+t,s}var Wo={animationend:tf("Animation","AnimationEnd"),animationiteration:tf("Animation","AnimationIteration"),animationstart:tf("Animation","AnimationStart"),transitionend:tf("Transition","TransitionEnd")},Sv={},nA={};mr&&(nA=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function jd(n){if(Sv[n])return Sv[n];if(!Wo[n])return n;var t=Wo[n],s;for(s in t)if(t.hasOwnProperty(s)&&s in nA)return Sv[n]=t[s];return n}var sA=jd("animationend"),iA=jd("animationiteration"),rA=jd("animationstart"),aA=jd("transitionend"),oA=new Map,NS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ha(n,t){oA.set(n,t),uo(t,[n])}for(var Cv=0;Cv<NS.length;Cv++){var wv=NS[Cv],A4=wv.toLowerCase(),b4=wv[0].toUpperCase()+wv.slice(1);ha(A4,"on"+b4)}ha(sA,"onAnimationEnd");ha(iA,"onAnimationIteration");ha(rA,"onAnimationStart");ha("dblclick","onDoubleClick");ha("focusin","onFocus");ha("focusout","onBlur");ha(aA,"onTransitionEnd");cl("onMouseEnter",["mouseout","mouseover"]);cl("onMouseLeave",["mouseout","mouseover"]);cl("onPointerEnter",["pointerout","pointerover"]);cl("onPointerLeave",["pointerout","pointerover"]);uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I4=new Set("cancel close invalid load scroll toggle".split(" ").concat(yu));function PS(n,t,s){var r=n.type||"unknown-event";n.currentTarget=s,AM(r,t,void 0,n),n.currentTarget=null}function lA(n,t){t=(t&4)!==0;for(var s=0;s<n.length;s++){var r=n[s],d=r.event;r=r.listeners;t:{var S=void 0;if(t)for(var i=r.length-1;0<=i;i--){var g=r[i],e=g.instance,a=g.currentTarget;if(g=g.listener,e!==S&&d.isPropagationStopped())break t;PS(d,g,a),S=e}else for(i=0;i<r.length;i++){if(g=r[i],e=g.instance,a=g.currentTarget,g=g.listener,e!==S&&d.isPropagationStopped())break t;PS(d,g,a),S=e}}}if(Wf)throw n=xg,Wf=!1,xg=null,n}function Ae(n,t){var s=t[Rg];s===void 0&&(s=t[Rg]=new Set);var r=n+"__bubble";s.has(r)||(uA(t,n,2,!1),s.add(r))}function Ev(n,t,s){var r=0;t&&(r|=4),uA(s,n,r,t)}var ef="_reactListening"+Math.random().toString(36).slice(2);function Hu(n){if(!n[ef]){n[ef]=!0,vE.forEach(function(s){s!=="selectionchange"&&(I4.has(s)||Ev(s,!1,n),Ev(s,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[ef]||(t[ef]=!0,Ev("selectionchange",!1,t))}}function uA(n,t,s,r){switch(YE(t)){case 1:var d=GM;break;case 4:d=UM;break;default:d=mx}s=d.bind(null,t,s,n),d=void 0,!gg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),r?d!==void 0?n.addEventListener(t,s,{capture:!0,passive:d}):n.addEventListener(t,s,!0):d!==void 0?n.addEventListener(t,s,{passive:d}):n.addEventListener(t,s,!1)}function Av(n,t,s,r,d){var S=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var g=r.stateNode.containerInfo;if(g===d||g.nodeType===8&&g.parentNode===d)break;if(i===4)for(i=r.return;i!==null;){var e=i.tag;if((e===3||e===4)&&(e=i.stateNode.containerInfo,e===d||e.nodeType===8&&e.parentNode===d))return;i=i.return}for(;g!==null;){if(i=Ma(g),i===null)return;if(e=i.tag,e===5||e===6){r=S=i;continue t}g=g.parentNode}}r=r.return}DE(function(){var a=S,v=cx(s),u=[];t:{var o=oA.get(n);if(o!==void 0){var c=gx,l=n;switch(n){case"keypress":if(Nf(s)===0)break t;case"keydown":case"keyup":c=s4;break;case"focusin":l="focus",c=xv;break;case"focusout":l="blur",c=xv;break;case"beforeblur":case"afterblur":c=xv;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=xS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=HM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=a4;break;case sA:case iA:case rA:c=jM;break;case aA:c=l4;break;case"scroll":c=WM;break;case"wheel":c=h4;break;case"copy":case"cut":case"paste":c=QM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=TS}var f=(t&4)!==0,m=!f&&n==="scroll",h=f?o!==null?o+"Capture":null:o;f=[];for(var p=a,y;p!==null;){y=p;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,h!==null&&(x=zu(p,h),x!=null&&f.push(Yu(p,x,y)))),m)break;p=p.return}0<f.length&&(o=new c(o,l,null,s,v),u.push({event:o,listeners:f}))}}if(!(t&7)){t:{if(o=n==="mouseover"||n==="pointerover",c=n==="mouseout"||n==="pointerout",o&&s!==mg&&(l=s.relatedTarget||s.fromElement)&&(Ma(l)||l[vr]))break t;if((c||o)&&(o=v.window===v?v:(o=v.ownerDocument)?o.defaultView||o.parentWindow:window,c?(l=s.relatedTarget||s.toElement,c=a,l=l?Ma(l):null,l!==null&&(m=ho(l),l!==m||l.tag!==5&&l.tag!==6)&&(l=null)):(c=null,l=a),c!==l)){if(f=xS,x="onMouseLeave",h="onMouseEnter",p="mouse",(n==="pointerout"||n==="pointerover")&&(f=TS,x="onPointerLeave",h="onPointerEnter",p="pointer"),m=c==null?o:Xo(c),y=l==null?o:Xo(l),o=new f(x,p+"leave",c,s,v),o.target=m,o.relatedTarget=y,x=null,Ma(v)===a&&(f=new f(h,p+"enter",l,s,v),f.target=y,f.relatedTarget=m,x=f),m=x,c&&l)e:{for(f=c,h=l,p=0,y=f;y;y=Po(y))p++;for(y=0,x=h;x;x=Po(x))y++;for(;0<p-y;)f=Po(f),p--;for(;0<y-p;)h=Po(h),y--;for(;p--;){if(f===h||h!==null&&f===h.alternate)break e;f=Po(f),h=Po(h)}f=null}else f=null;c!==null&&FS(u,o,c,f,!1),l!==null&&m!==null&&FS(u,m,l,f,!0)}}t:{if(o=a?Xo(a):window,c=o.nodeName&&o.nodeName.toLowerCase(),c==="select"||c==="input"&&o.type==="file")var T=g4;else if(wS(o))if(qE)T=S4;else{T=y4;var C=x4}else(c=o.nodeName)&&c.toLowerCase()==="input"&&(o.type==="checkbox"||o.type==="radio")&&(T=T4);if(T&&(T=T(n,a))){JE(u,T,s,v);break t}C&&C(n,o,a),n==="focusout"&&(C=o._wrapperState)&&C.controlled&&o.type==="number"&&hg(o,"number",o.value)}switch(C=a?Xo(a):window,n){case"focusin":(wS(C)||C.contentEditable==="true")&&(Uo=C,Cg=a,Pu=null);break;case"focusout":Pu=Cg=Uo=null;break;case"mousedown":wg=!0;break;case"contextmenu":case"mouseup":case"dragend":wg=!1,RS(u,s,v);break;case"selectionchange":if(E4)break;case"keydown":case"keyup":RS(u,s,v)}var E;if(yx)t:{switch(n){case"compositionstart":var A="onCompositionStart";break t;case"compositionend":A="onCompositionEnd";break t;case"compositionupdate":A="onCompositionUpdate";break t}A=void 0}else Go?ZE(n,s)&&(A="onCompositionEnd"):n==="keydown"&&s.keyCode===229&&(A="onCompositionStart");A&&(jE&&s.locale!=="ko"&&(Go||A!=="onCompositionStart"?A==="onCompositionEnd"&&Go&&(E=KE()):(Mr=v,vx="value"in Mr?Mr.value:Mr.textContent,Go=!0)),C=jf(a,A),0<C.length&&(A=new yS(A,n,null,s,v),u.push({event:A,listeners:C}),E?A.data=E:(E=QE(s),E!==null&&(A.data=E)))),(E=f4?d4(n,s):p4(n,s))&&(a=jf(a,"onBeforeInput"),0<a.length&&(v=new yS("onBeforeInput","beforeinput",null,s,v),u.push({event:v,listeners:a}),v.data=E))}lA(u,t)})}function Yu(n,t,s){return{instance:n,listener:t,currentTarget:s}}function jf(n,t){for(var s=t+"Capture",r=[];n!==null;){var d=n,S=d.stateNode;d.tag===5&&S!==null&&(d=S,S=zu(n,s),S!=null&&r.unshift(Yu(n,S,d)),S=zu(n,t),S!=null&&r.push(Yu(n,S,d))),n=n.return}return r}function Po(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function FS(n,t,s,r,d){for(var S=t._reactName,i=[];s!==null&&s!==r;){var g=s,e=g.alternate,a=g.stateNode;if(e!==null&&e===r)break;g.tag===5&&a!==null&&(g=a,d?(e=zu(s,S),e!=null&&i.unshift(Yu(s,e,g))):d||(e=zu(s,S),e!=null&&i.push(Yu(s,e,g)))),s=s.return}i.length!==0&&n.push({event:t,listeners:i})}var R4=/\r\n?/g,N4=/\u0000|\uFFFD/g;function DS(n){return(typeof n=="string"?n:""+n).replace(R4,`
`).replace(N4,"")}function nf(n,t,s){if(t=DS(t),DS(n)!==t&&s)throw Error(At(425))}function Zf(){}var Eg=null,Ag=null;function bg(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ig=typeof setTimeout=="function"?setTimeout:void 0,P4=typeof clearTimeout=="function"?clearTimeout:void 0,OS=typeof Promise=="function"?Promise:void 0,F4=typeof queueMicrotask=="function"?queueMicrotask:typeof OS<"u"?function(n){return OS.resolve(null).then(n).catch(D4)}:Ig;function D4(n){setTimeout(function(){throw n})}function bv(n,t){var s=t,r=0;do{var d=s.nextSibling;if(n.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(r===0){n.removeChild(d),Uu(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=d}while(s);Uu(t)}function Wr(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function LS(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var s=n.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return n;t--}else s==="/$"&&t++}n=n.previousSibling}return null}var Ml=Math.random().toString(36).slice(2),ki="__reactFiber$"+Ml,Ku="__reactProps$"+Ml,vr="__reactContainer$"+Ml,Rg="__reactEvents$"+Ml,O4="__reactListeners$"+Ml,L4="__reactHandles$"+Ml;function Ma(n){var t=n[ki];if(t)return t;for(var s=n.parentNode;s;){if(t=s[vr]||s[ki]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(n=LS(n);n!==null;){if(s=n[ki])return s;n=LS(n)}return t}n=s,s=n.parentNode}return null}function yh(n){return n=n[ki]||n[vr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Xo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(At(33))}function Zd(n){return n[Ku]||null}var Ng=[],Ho=-1;function ca(n){return{current:n}}function Ie(n){0>Ho||(n.current=Ng[Ho],Ng[Ho]=null,Ho--)}function Se(n,t){Ho++,Ng[Ho]=n.current,n.current=t}var _r={},Un=ca(_r),hs=ca(!1),Ha=_r;function fl(n,t){var s=n.type.contextTypes;if(!s)return _r;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var d={},S;for(S in s)d[S]=t[S];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=d),d}function cs(n){return n=n.childContextTypes,n!=null}function Qf(){Ie(hs),Ie(Un)}function MS(n,t,s){if(Un.current!==_r)throw Error(At(168));Se(Un,t),Se(hs,s)}function hA(n,t,s){var r=n.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var d in r)if(!(d in t))throw Error(At(108,xM(n)||"Unknown",d));return ke({},s,r)}function Jf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||_r,Ha=Un.current,Se(Un,n),Se(hs,hs.current),!0}function $S(n,t,s){var r=n.stateNode;if(!r)throw Error(At(169));s?(n=hA(n,t,Ha),r.__reactInternalMemoizedMergedChildContext=n,Ie(hs),Ie(Un),Se(Un,n)):Ie(hs),Se(hs,s)}var ir=null,Qd=!1,Iv=!1;function cA(n){ir===null?ir=[n]:ir.push(n)}function M4(n){Qd=!0,cA(n)}function fa(){if(!Iv&&ir!==null){Iv=!0;var n=0,t=de;try{var s=ir;for(de=1;n<s.length;n++){var r=s[n];do r=r(!0);while(r!==null)}ir=null,Qd=!1}catch(d){throw ir!==null&&(ir=ir.slice(n+1)),$E(fx,fa),d}finally{de=t,Iv=!1}}return null}var Yo=[],Ko=0,qf=null,_f=0,Gs=[],Us=0,Ya=null,hr=1,cr="";function Ra(n,t){Yo[Ko++]=_f,Yo[Ko++]=qf,qf=n,_f=t}function fA(n,t,s){Gs[Us++]=hr,Gs[Us++]=cr,Gs[Us++]=Ya,Ya=n;var r=hr;n=cr;var d=32-yi(r)-1;r&=~(1<<d),s+=1;var S=32-yi(t)+d;if(30<S){var i=d-d%5;S=(r&(1<<i)-1).toString(32),r>>=i,d-=i,hr=1<<32-yi(t)+d|s<<d|r,cr=S+n}else hr=1<<S|s<<d|r,cr=n}function Sx(n){n.return!==null&&(Ra(n,1),fA(n,1,0))}function Cx(n){for(;n===qf;)qf=Yo[--Ko],Yo[Ko]=null,_f=Yo[--Ko],Yo[Ko]=null;for(;n===Ya;)Ya=Gs[--Us],Gs[Us]=null,cr=Gs[--Us],Gs[Us]=null,hr=Gs[--Us],Gs[Us]=null}var bs=null,ws=null,Fe=!1,vi=null;function dA(n,t){var s=Xs(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=n,t=n.deletions,t===null?(n.deletions=[s],n.flags|=16):t.push(s)}function BS(n,t){switch(n.tag){case 5:var s=n.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,bs=n,ws=Wr(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,bs=n,ws=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Ya!==null?{id:hr,overflow:cr}:null,n.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Xs(18,null,null,0),s.stateNode=t,s.return=n,n.child=s,bs=n,ws=null,!0):!1;default:return!1}}function Pg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Fg(n){if(Fe){var t=ws;if(t){var s=t;if(!BS(n,t)){if(Pg(n))throw Error(At(418));t=Wr(s.nextSibling);var r=bs;t&&BS(n,t)?dA(r,s):(n.flags=n.flags&-4097|2,Fe=!1,bs=n)}}else{if(Pg(n))throw Error(At(418));n.flags=n.flags&-4097|2,Fe=!1,bs=n}}}function kS(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;bs=n}function sf(n){if(n!==bs)return!1;if(!Fe)return kS(n),Fe=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!bg(n.type,n.memoizedProps)),t&&(t=ws)){if(Pg(n))throw pA(),Error(At(418));for(;t;)dA(n,t),t=Wr(t.nextSibling)}if(kS(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(At(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var s=n.data;if(s==="/$"){if(t===0){ws=Wr(n.nextSibling);break t}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}n=n.nextSibling}ws=null}}else ws=bs?Wr(n.stateNode.nextSibling):null;return!0}function pA(){for(var n=ws;n;)n=Wr(n.nextSibling)}function dl(){ws=bs=null,Fe=!1}function wx(n){vi===null?vi=[n]:vi.push(n)}var $4=Cr.ReactCurrentBatchConfig;function pi(n,t){if(n&&n.defaultProps){t=ke({},t),n=n.defaultProps;for(var s in n)t[s]===void 0&&(t[s]=n[s]);return t}return t}var td=ca(null),ed=null,jo=null,Ex=null;function Ax(){Ex=jo=ed=null}function bx(n){var t=td.current;Ie(td),n._currentValue=t}function Dg(n,t,s){for(;n!==null;){var r=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),n===s)break;n=n.return}}function nl(n,t){ed=n,Ex=jo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(ls=!0),n.firstContext=null)}function ni(n){var t=n._currentValue;if(Ex!==n)if(n={context:n,memoizedValue:t,next:null},jo===null){if(ed===null)throw Error(At(308));jo=n,ed.dependencies={lanes:0,firstContext:n}}else jo=jo.next=n;return t}var $a=null;function Ix(n){$a===null?$a=[n]:$a.push(n)}function mA(n,t,s,r){var d=t.interleaved;return d===null?(s.next=s,Ix(t)):(s.next=d.next,d.next=s),t.interleaved=s,gr(n,r)}function gr(n,t){n.lanes|=t;var s=n.alternate;for(s!==null&&(s.lanes|=t),s=n,n=n.return;n!==null;)n.childLanes|=t,s=n.alternate,s!==null&&(s.childLanes|=t),s=n,n=n.return;return s.tag===3?s.stateNode:null}var Fr=!1;function Rx(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vA(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function fr(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function Xr(n,t,s){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var d=r.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),r.pending=t,gr(n,s)}return d=r.interleaved,d===null?(t.next=t,Ix(r)):(t.next=d.next,d.next=t),r.interleaved=t,gr(n,s)}function Pf(n,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=n.pendingLanes,s|=r,t.lanes=s,dx(n,s)}}function zS(n,t){var s=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var d=null,S=null;if(s=s.firstBaseUpdate,s!==null){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};S===null?d=S=i:S=S.next=i,s=s.next}while(s!==null);S===null?d=S=t:S=S.next=t}else d=S=t;s={baseState:r.baseState,firstBaseUpdate:d,lastBaseUpdate:S,shared:r.shared,effects:r.effects},n.updateQueue=s;return}n=s.lastBaseUpdate,n===null?s.firstBaseUpdate=t:n.next=t,s.lastBaseUpdate=t}function nd(n,t,s,r){var d=n.updateQueue;Fr=!1;var S=d.firstBaseUpdate,i=d.lastBaseUpdate,g=d.shared.pending;if(g!==null){d.shared.pending=null;var e=g,a=e.next;e.next=null,i===null?S=a:i.next=a,i=e;var v=n.alternate;v!==null&&(v=v.updateQueue,g=v.lastBaseUpdate,g!==i&&(g===null?v.firstBaseUpdate=a:g.next=a,v.lastBaseUpdate=e))}if(S!==null){var u=d.baseState;i=0,v=a=e=null,g=S;do{var o=g.lane,c=g.eventTime;if((r&o)===o){v!==null&&(v=v.next={eventTime:c,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});t:{var l=n,f=g;switch(o=t,c=s,f.tag){case 1:if(l=f.payload,typeof l=="function"){u=l.call(c,u,o);break t}u=l;break t;case 3:l.flags=l.flags&-65537|128;case 0:if(l=f.payload,o=typeof l=="function"?l.call(c,u,o):l,o==null)break t;u=ke({},u,o);break t;case 2:Fr=!0}}g.callback!==null&&g.lane!==0&&(n.flags|=64,o=d.effects,o===null?d.effects=[g]:o.push(g))}else c={eventTime:c,lane:o,tag:g.tag,payload:g.payload,callback:g.callback,next:null},v===null?(a=v=c,e=u):v=v.next=c,i|=o;if(g=g.next,g===null){if(g=d.shared.pending,g===null)break;o=g,g=o.next,o.next=null,d.lastBaseUpdate=o,d.shared.pending=null}}while(1);if(v===null&&(e=u),d.baseState=e,d.firstBaseUpdate=a,d.lastBaseUpdate=v,t=d.shared.interleaved,t!==null){d=t;do i|=d.lane,d=d.next;while(d!==t)}else S===null&&(d.shared.lanes=0);ja|=i,n.lanes=i,n.memoizedState=u}}function VS(n,t,s){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var r=n[t],d=r.callback;if(d!==null){if(r.callback=null,r=s,typeof d!="function")throw Error(At(191,d));d.call(r)}}}var gA=new mE.Component().refs;function Og(n,t,s,r){t=n.memoizedState,s=s(r,t),s=s==null?t:ke({},t,s),n.memoizedState=s,n.lanes===0&&(n.updateQueue.baseState=s)}var Jd={isMounted:function(n){return(n=n._reactInternals)?ho(n)===n:!1},enqueueSetState:function(n,t,s){n=n._reactInternals;var r=Jn(),d=Yr(n),S=fr(r,d);S.payload=t,s!=null&&(S.callback=s),t=Xr(n,S,d),t!==null&&(Ti(t,n,d,r),Pf(t,n,d))},enqueueReplaceState:function(n,t,s){n=n._reactInternals;var r=Jn(),d=Yr(n),S=fr(r,d);S.tag=1,S.payload=t,s!=null&&(S.callback=s),t=Xr(n,S,d),t!==null&&(Ti(t,n,d,r),Pf(t,n,d))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var s=Jn(),r=Yr(n),d=fr(s,r);d.tag=2,t!=null&&(d.callback=t),t=Xr(n,d,r),t!==null&&(Ti(t,n,r,s),Pf(t,n,r))}};function GS(n,t,s,r,d,S,i){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,S,i):t.prototype&&t.prototype.isPureReactComponent?!Xu(s,r)||!Xu(d,S):!0}function xA(n,t,s){var r=!1,d=_r,S=t.contextType;return typeof S=="object"&&S!==null?S=ni(S):(d=cs(t)?Ha:Un.current,r=t.contextTypes,S=(r=r!=null)?fl(n,d):_r),t=new t(s,S),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jd,n.stateNode=t,t._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=S),t}function US(n,t,s,r){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==n&&Jd.enqueueReplaceState(t,t.state,null)}function Lg(n,t,s,r){var d=n.stateNode;d.props=s,d.state=n.memoizedState,d.refs=gA,Rx(n);var S=t.contextType;typeof S=="object"&&S!==null?d.context=ni(S):(S=cs(t)?Ha:Un.current,d.context=fl(n,S)),d.state=n.memoizedState,S=t.getDerivedStateFromProps,typeof S=="function"&&(Og(n,t,S,s),d.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Jd.enqueueReplaceState(d,d.state,null),nd(n,s,d,r),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function uu(n,t,s){if(n=s.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(At(309));var r=s.stateNode}if(!r)throw Error(At(147,n));var d=r,S=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===S?t.ref:(t=function(i){var g=d.refs;g===gA&&(g=d.refs={}),i===null?delete g[S]:g[S]=i},t._stringRef=S,t)}if(typeof n!="string")throw Error(At(284));if(!s._owner)throw Error(At(290,n))}return n}function rf(n,t){throw n=Object.prototype.toString.call(t),Error(At(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function WS(n){var t=n._init;return t(n._payload)}function yA(n){function t(h,p){if(n){var y=h.deletions;y===null?(h.deletions=[p],h.flags|=16):y.push(p)}}function s(h,p){if(!n)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function r(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function d(h,p){return h=Kr(h,p),h.index=0,h.sibling=null,h}function S(h,p,y){return h.index=y,n?(y=h.alternate,y!==null?(y=y.index,y<p?(h.flags|=2,p):y):(h.flags|=2,p)):(h.flags|=1048576,p)}function i(h){return n&&h.alternate===null&&(h.flags|=2),h}function g(h,p,y,x){return p===null||p.tag!==6?(p=Lv(y,h.mode,x),p.return=h,p):(p=d(p,y),p.return=h,p)}function e(h,p,y,x){var T=y.type;return T===Vo?v(h,p,y.props.children,x,y.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Pr&&WS(T)===p.type)?(x=d(p,y.props),x.ref=uu(h,p,y),x.return=h,x):(x=$f(y.type,y.key,y.props,null,h.mode,x),x.ref=uu(h,p,y),x.return=h,x)}function a(h,p,y,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Mv(y,h.mode,x),p.return=h,p):(p=d(p,y.children||[]),p.return=h,p)}function v(h,p,y,x,T){return p===null||p.tag!==7?(p=Ua(y,h.mode,x,T),p.return=h,p):(p=d(p,y),p.return=h,p)}function u(h,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Lv(""+p,h.mode,y),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Kc:return y=$f(p.type,p.key,p.props,null,h.mode,y),y.ref=uu(h,null,p),y.return=h,y;case zo:return p=Mv(p,h.mode,y),p.return=h,p;case Pr:var x=p._init;return u(h,x(p._payload),y)}if(gu(p)||iu(p))return p=Ua(p,h.mode,y,null),p.return=h,p;rf(h,p)}return null}function o(h,p,y,x){var T=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:g(h,p,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Kc:return y.key===T?e(h,p,y,x):null;case zo:return y.key===T?a(h,p,y,x):null;case Pr:return T=y._init,o(h,p,T(y._payload),x)}if(gu(y)||iu(y))return T!==null?null:v(h,p,y,x,null);rf(h,y)}return null}function c(h,p,y,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return h=h.get(y)||null,g(p,h,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Kc:return h=h.get(x.key===null?y:x.key)||null,e(p,h,x,T);case zo:return h=h.get(x.key===null?y:x.key)||null,a(p,h,x,T);case Pr:var C=x._init;return c(h,p,y,C(x._payload),T)}if(gu(x)||iu(x))return h=h.get(y)||null,v(p,h,x,T,null);rf(p,x)}return null}function l(h,p,y,x){for(var T=null,C=null,E=p,A=p=0,w=null;E!==null&&A<y.length;A++){E.index>A?(w=E,E=null):w=E.sibling;var b=o(h,E,y[A],x);if(b===null){E===null&&(E=w);break}n&&E&&b.alternate===null&&t(h,E),p=S(b,p,A),C===null?T=b:C.sibling=b,C=b,E=w}if(A===y.length)return s(h,E),Fe&&Ra(h,A),T;if(E===null){for(;A<y.length;A++)E=u(h,y[A],x),E!==null&&(p=S(E,p,A),C===null?T=E:C.sibling=E,C=E);return Fe&&Ra(h,A),T}for(E=r(h,E);A<y.length;A++)w=c(E,h,A,y[A],x),w!==null&&(n&&w.alternate!==null&&E.delete(w.key===null?A:w.key),p=S(w,p,A),C===null?T=w:C.sibling=w,C=w);return n&&E.forEach(function(I){return t(h,I)}),Fe&&Ra(h,A),T}function f(h,p,y,x){var T=iu(y);if(typeof T!="function")throw Error(At(150));if(y=T.call(y),y==null)throw Error(At(151));for(var C=T=null,E=p,A=p=0,w=null,b=y.next();E!==null&&!b.done;A++,b=y.next()){E.index>A?(w=E,E=null):w=E.sibling;var I=o(h,E,b.value,x);if(I===null){E===null&&(E=w);break}n&&E&&I.alternate===null&&t(h,E),p=S(I,p,A),C===null?T=I:C.sibling=I,C=I,E=w}if(b.done)return s(h,E),Fe&&Ra(h,A),T;if(E===null){for(;!b.done;A++,b=y.next())b=u(h,b.value,x),b!==null&&(p=S(b,p,A),C===null?T=b:C.sibling=b,C=b);return Fe&&Ra(h,A),T}for(E=r(h,E);!b.done;A++,b=y.next())b=c(E,h,A,b.value,x),b!==null&&(n&&b.alternate!==null&&E.delete(b.key===null?A:b.key),p=S(b,p,A),C===null?T=b:C.sibling=b,C=b);return n&&E.forEach(function(R){return t(h,R)}),Fe&&Ra(h,A),T}function m(h,p,y,x){if(typeof y=="object"&&y!==null&&y.type===Vo&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Kc:t:{for(var T=y.key,C=p;C!==null;){if(C.key===T){if(T=y.type,T===Vo){if(C.tag===7){s(h,C.sibling),p=d(C,y.props.children),p.return=h,h=p;break t}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Pr&&WS(T)===C.type){s(h,C.sibling),p=d(C,y.props),p.ref=uu(h,C,y),p.return=h,h=p;break t}s(h,C);break}else t(h,C);C=C.sibling}y.type===Vo?(p=Ua(y.props.children,h.mode,x,y.key),p.return=h,h=p):(x=$f(y.type,y.key,y.props,null,h.mode,x),x.ref=uu(h,p,y),x.return=h,h=x)}return i(h);case zo:t:{for(C=y.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){s(h,p.sibling),p=d(p,y.children||[]),p.return=h,h=p;break t}else{s(h,p);break}else t(h,p);p=p.sibling}p=Mv(y,h.mode,x),p.return=h,h=p}return i(h);case Pr:return C=y._init,m(h,p,C(y._payload),x)}if(gu(y))return l(h,p,y,x);if(iu(y))return f(h,p,y,x);rf(h,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(s(h,p.sibling),p=d(p,y),p.return=h,h=p):(s(h,p),p=Lv(y,h.mode,x),p.return=h,h=p),i(h)):s(h,p)}return m}var pl=yA(!0),TA=yA(!1),Th={},Wi=ca(Th),ju=ca(Th),Zu=ca(Th);function Ba(n){if(n===Th)throw Error(At(174));return n}function Nx(n,t){switch(Se(Zu,t),Se(ju,n),Se(Wi,Th),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fg(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=fg(t,n)}Ie(Wi),Se(Wi,t)}function ml(){Ie(Wi),Ie(ju),Ie(Zu)}function SA(n){Ba(Zu.current);var t=Ba(Wi.current),s=fg(t,n.type);t!==s&&(Se(ju,n),Se(Wi,s))}function Px(n){ju.current===n&&(Ie(Wi),Ie(ju))}var Me=ca(0);function sd(n){for(var t=n;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rv=[];function Fx(){for(var n=0;n<Rv.length;n++)Rv[n]._workInProgressVersionPrimary=null;Rv.length=0}var Ff=Cr.ReactCurrentDispatcher,Nv=Cr.ReactCurrentBatchConfig,Ka=0,Be=null,un=null,vn=null,id=!1,Fu=!1,Qu=0,B4=0;function On(){throw Error(At(321))}function Dx(n,t){if(t===null)return!1;for(var s=0;s<t.length&&s<n.length;s++)if(!wi(n[s],t[s]))return!1;return!0}function Ox(n,t,s,r,d,S){if(Ka=S,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ff.current=n===null||n.memoizedState===null?G4:U4,n=s(r,d),Fu){S=0;do{if(Fu=!1,Qu=0,25<=S)throw Error(At(301));S+=1,vn=un=null,t.updateQueue=null,Ff.current=W4,n=s(r,d)}while(Fu)}if(Ff.current=rd,t=un!==null&&un.next!==null,Ka=0,vn=un=Be=null,id=!1,t)throw Error(At(300));return n}function Lx(){var n=Qu!==0;return Qu=0,n}function Di(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Be.memoizedState=vn=n:vn=vn.next=n,vn}function si(){if(un===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=un.next;var t=vn===null?Be.memoizedState:vn.next;if(t!==null)vn=t,un=n;else{if(n===null)throw Error(At(310));un=n,n={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},vn===null?Be.memoizedState=vn=n:vn=vn.next=n}return vn}function Ju(n,t){return typeof t=="function"?t(n):t}function Pv(n){var t=si(),s=t.queue;if(s===null)throw Error(At(311));s.lastRenderedReducer=n;var r=un,d=r.baseQueue,S=s.pending;if(S!==null){if(d!==null){var i=d.next;d.next=S.next,S.next=i}r.baseQueue=d=S,s.pending=null}if(d!==null){S=d.next,r=r.baseState;var g=i=null,e=null,a=S;do{var v=a.lane;if((Ka&v)===v)e!==null&&(e=e.next={lane:0,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null}),r=a.hasEagerState?a.eagerState:n(r,a.action);else{var u={lane:v,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null};e===null?(g=e=u,i=r):e=e.next=u,Be.lanes|=v,ja|=v}a=a.next}while(a!==null&&a!==S);e===null?i=r:e.next=g,wi(r,t.memoizedState)||(ls=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=e,s.lastRenderedState=r}if(n=s.interleaved,n!==null){d=n;do S=d.lane,Be.lanes|=S,ja|=S,d=d.next;while(d!==n)}else d===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Fv(n){var t=si(),s=t.queue;if(s===null)throw Error(At(311));s.lastRenderedReducer=n;var r=s.dispatch,d=s.pending,S=t.memoizedState;if(d!==null){s.pending=null;var i=d=d.next;do S=n(S,i.action),i=i.next;while(i!==d);wi(S,t.memoizedState)||(ls=!0),t.memoizedState=S,t.baseQueue===null&&(t.baseState=S),s.lastRenderedState=S}return[S,r]}function CA(){}function wA(n,t){var s=Be,r=si(),d=t(),S=!wi(r.memoizedState,d);if(S&&(r.memoizedState=d,ls=!0),r=r.queue,Mx(bA.bind(null,s,r,n),[n]),r.getSnapshot!==t||S||vn!==null&&vn.memoizedState.tag&1){if(s.flags|=2048,qu(9,AA.bind(null,s,r,d,t),void 0,null),yn===null)throw Error(At(349));Ka&30||EA(s,t,d)}return d}function EA(n,t,s){n.flags|=16384,n={getSnapshot:t,value:s},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.stores=[n]):(s=t.stores,s===null?t.stores=[n]:s.push(n))}function AA(n,t,s,r){t.value=s,t.getSnapshot=r,IA(t)&&RA(n)}function bA(n,t,s){return s(function(){IA(t)&&RA(n)})}function IA(n){var t=n.getSnapshot;n=n.value;try{var s=t();return!wi(n,s)}catch{return!0}}function RA(n){var t=gr(n,1);t!==null&&Ti(t,n,1,-1)}function XS(n){var t=Di();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:n},t.queue=n,n=n.dispatch=V4.bind(null,Be,n),[t.memoizedState,n]}function qu(n,t,s,r){return n={tag:n,create:t,destroy:s,deps:r,next:null},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.lastEffect=n.next=n):(s=t.lastEffect,s===null?t.lastEffect=n.next=n:(r=s.next,s.next=n,n.next=r,t.lastEffect=n)),n}function NA(){return si().memoizedState}function Df(n,t,s,r){var d=Di();Be.flags|=n,d.memoizedState=qu(1|t,s,void 0,r===void 0?null:r)}function qd(n,t,s,r){var d=si();r=r===void 0?null:r;var S=void 0;if(un!==null){var i=un.memoizedState;if(S=i.destroy,r!==null&&Dx(r,i.deps)){d.memoizedState=qu(t,s,S,r);return}}Be.flags|=n,d.memoizedState=qu(1|t,s,S,r)}function HS(n,t){return Df(8390656,8,n,t)}function Mx(n,t){return qd(2048,8,n,t)}function PA(n,t){return qd(4,2,n,t)}function FA(n,t){return qd(4,4,n,t)}function DA(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function OA(n,t,s){return s=s!=null?s.concat([n]):null,qd(4,4,DA.bind(null,t,n),s)}function $x(){}function LA(n,t){var s=si();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Dx(t,r[1])?r[0]:(s.memoizedState=[n,t],n)}function MA(n,t){var s=si();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Dx(t,r[1])?r[0]:(n=n(),s.memoizedState=[n,t],n)}function $A(n,t,s){return Ka&21?(wi(s,t)||(s=zE(),Be.lanes|=s,ja|=s,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,ls=!0),n.memoizedState=s)}function k4(n,t){var s=de;de=s!==0&&4>s?s:4,n(!0);var r=Nv.transition;Nv.transition={};try{n(!1),t()}finally{de=s,Nv.transition=r}}function BA(){return si().memoizedState}function z4(n,t,s){var r=Yr(n);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},kA(n))zA(t,s);else if(s=mA(n,t,s,r),s!==null){var d=Jn();Ti(s,n,r,d),VA(s,t,r)}}function V4(n,t,s){var r=Yr(n),d={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(kA(n))zA(t,d);else{var S=n.alternate;if(n.lanes===0&&(S===null||S.lanes===0)&&(S=t.lastRenderedReducer,S!==null))try{var i=t.lastRenderedState,g=S(i,s);if(d.hasEagerState=!0,d.eagerState=g,wi(g,i)){var e=t.interleaved;e===null?(d.next=d,Ix(t)):(d.next=e.next,e.next=d),t.interleaved=d;return}}catch{}finally{}s=mA(n,t,d,r),s!==null&&(d=Jn(),Ti(s,n,r,d),VA(s,t,r))}}function kA(n){var t=n.alternate;return n===Be||t!==null&&t===Be}function zA(n,t){Fu=id=!0;var s=n.pending;s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t}function VA(n,t,s){if(s&4194240){var r=t.lanes;r&=n.pendingLanes,s|=r,t.lanes=s,dx(n,s)}}var rd={readContext:ni,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},G4={readContext:ni,useCallback:function(n,t){return Di().memoizedState=[n,t===void 0?null:t],n},useContext:ni,useEffect:HS,useImperativeHandle:function(n,t,s){return s=s!=null?s.concat([n]):null,Df(4194308,4,DA.bind(null,t,n),s)},useLayoutEffect:function(n,t){return Df(4194308,4,n,t)},useInsertionEffect:function(n,t){return Df(4,2,n,t)},useMemo:function(n,t){var s=Di();return t=t===void 0?null:t,n=n(),s.memoizedState=[n,t],n},useReducer:function(n,t,s){var r=Di();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},r.queue=n,n=n.dispatch=z4.bind(null,Be,n),[r.memoizedState,n]},useRef:function(n){var t=Di();return n={current:n},t.memoizedState=n},useState:XS,useDebugValue:$x,useDeferredValue:function(n){return Di().memoizedState=n},useTransition:function(){var n=XS(!1),t=n[0];return n=k4.bind(null,n[1]),Di().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,s){var r=Be,d=Di();if(Fe){if(s===void 0)throw Error(At(407));s=s()}else{if(s=t(),yn===null)throw Error(At(349));Ka&30||EA(r,t,s)}d.memoizedState=s;var S={value:s,getSnapshot:t};return d.queue=S,HS(bA.bind(null,r,S,n),[n]),r.flags|=2048,qu(9,AA.bind(null,r,S,s,t),void 0,null),s},useId:function(){var n=Di(),t=yn.identifierPrefix;if(Fe){var s=cr,r=hr;s=(r&~(1<<32-yi(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=Qu++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=B4++,t=":"+t+"r"+s.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},U4={readContext:ni,useCallback:LA,useContext:ni,useEffect:Mx,useImperativeHandle:OA,useInsertionEffect:PA,useLayoutEffect:FA,useMemo:MA,useReducer:Pv,useRef:NA,useState:function(){return Pv(Ju)},useDebugValue:$x,useDeferredValue:function(n){var t=si();return $A(t,un.memoizedState,n)},useTransition:function(){var n=Pv(Ju)[0],t=si().memoizedState;return[n,t]},useMutableSource:CA,useSyncExternalStore:wA,useId:BA,unstable_isNewReconciler:!1},W4={readContext:ni,useCallback:LA,useContext:ni,useEffect:Mx,useImperativeHandle:OA,useInsertionEffect:PA,useLayoutEffect:FA,useMemo:MA,useReducer:Fv,useRef:NA,useState:function(){return Fv(Ju)},useDebugValue:$x,useDeferredValue:function(n){var t=si();return un===null?t.memoizedState=n:$A(t,un.memoizedState,n)},useTransition:function(){var n=Fv(Ju)[0],t=si().memoizedState;return[n,t]},useMutableSource:CA,useSyncExternalStore:wA,useId:BA,unstable_isNewReconciler:!1};function vl(n,t){try{var s="",r=t;do s+=gM(r),r=r.return;while(r);var d=s}catch(S){d=`
Error generating stack: `+S.message+`
`+S.stack}return{value:n,source:t,stack:d,digest:null}}function Dv(n,t,s){return{value:n,source:null,stack:s??null,digest:t??null}}function Mg(n,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var X4=typeof WeakMap=="function"?WeakMap:Map;function GA(n,t,s){s=fr(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){od||(od=!0,Hg=r),Mg(n,t)},s}function UA(n,t,s){s=fr(-1,s),s.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var d=t.value;s.payload=function(){return r(d)},s.callback=function(){Mg(n,t)}}var S=n.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){Mg(n,t),typeof r!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),s}function YS(n,t,s){var r=n.pingCache;if(r===null){r=n.pingCache=new X4;var d=new Set;r.set(t,d)}else d=r.get(t),d===void 0&&(d=new Set,r.set(t,d));d.has(s)||(d.add(s),n=i5.bind(null,n,t,s),t.then(n,n))}function KS(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function jS(n,t,s,r,d){return n.mode&1?(n.flags|=65536,n.lanes=d,n):(n===t?n.flags|=65536:(n.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=fr(-1,1),t.tag=2,Xr(s,t,1))),s.lanes|=1),n)}var H4=Cr.ReactCurrentOwner,ls=!1;function Kn(n,t,s,r){t.child=n===null?TA(t,null,s,r):pl(t,n.child,s,r)}function ZS(n,t,s,r,d){s=s.render;var S=t.ref;return nl(t,d),r=Ox(n,t,s,r,S,d),s=Lx(),n!==null&&!ls?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~d,xr(n,t,d)):(Fe&&s&&Sx(t),t.flags|=1,Kn(n,t,r,d),t.child)}function QS(n,t,s,r,d){if(n===null){var S=s.type;return typeof S=="function"&&!Xx(S)&&S.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=S,WA(n,t,S,r,d)):(n=$f(s.type,null,r,t,t.mode,d),n.ref=t.ref,n.return=t,t.child=n)}if(S=n.child,!(n.lanes&d)){var i=S.memoizedProps;if(s=s.compare,s=s!==null?s:Xu,s(i,r)&&n.ref===t.ref)return xr(n,t,d)}return t.flags|=1,n=Kr(S,r),n.ref=t.ref,n.return=t,t.child=n}function WA(n,t,s,r,d){if(n!==null){var S=n.memoizedProps;if(Xu(S,r)&&n.ref===t.ref)if(ls=!1,t.pendingProps=r=S,(n.lanes&d)!==0)n.flags&131072&&(ls=!0);else return t.lanes=n.lanes,xr(n,t,d)}return $g(n,t,s,r,d)}function XA(n,t,s){var r=t.pendingProps,d=r.children,S=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Qo,Ss),Ss|=s;else{if(!(s&1073741824))return n=S!==null?S.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,Se(Qo,Ss),Ss|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=S!==null?S.baseLanes:s,Se(Qo,Ss),Ss|=r}else S!==null?(r=S.baseLanes|s,t.memoizedState=null):r=s,Se(Qo,Ss),Ss|=r;return Kn(n,t,d,s),t.child}function HA(n,t){var s=t.ref;(n===null&&s!==null||n!==null&&n.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function $g(n,t,s,r,d){var S=cs(s)?Ha:Un.current;return S=fl(t,S),nl(t,d),s=Ox(n,t,s,r,S,d),r=Lx(),n!==null&&!ls?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~d,xr(n,t,d)):(Fe&&r&&Sx(t),t.flags|=1,Kn(n,t,s,d),t.child)}function JS(n,t,s,r,d){if(cs(s)){var S=!0;Jf(t)}else S=!1;if(nl(t,d),t.stateNode===null)Of(n,t),xA(t,s,r),Lg(t,s,r,d),r=!0;else if(n===null){var i=t.stateNode,g=t.memoizedProps;i.props=g;var e=i.context,a=s.contextType;typeof a=="object"&&a!==null?a=ni(a):(a=cs(s)?Ha:Un.current,a=fl(t,a));var v=s.getDerivedStateFromProps,u=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function";u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(g!==r||e!==a)&&US(t,i,r,a),Fr=!1;var o=t.memoizedState;i.state=o,nd(t,r,i,d),e=t.memoizedState,g!==r||o!==e||hs.current||Fr?(typeof v=="function"&&(Og(t,s,v,r),e=t.memoizedState),(g=Fr||GS(t,s,g,r,o,e,a))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=e),i.props=r,i.state=e,i.context=a,r=g):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,vA(n,t),g=t.memoizedProps,a=t.type===t.elementType?g:pi(t.type,g),i.props=a,u=t.pendingProps,o=i.context,e=s.contextType,typeof e=="object"&&e!==null?e=ni(e):(e=cs(s)?Ha:Un.current,e=fl(t,e));var c=s.getDerivedStateFromProps;(v=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(g!==u||o!==e)&&US(t,i,r,e),Fr=!1,o=t.memoizedState,i.state=o,nd(t,r,i,d);var l=t.memoizedState;g!==u||o!==l||hs.current||Fr?(typeof c=="function"&&(Og(t,s,c,r),l=t.memoizedState),(a=Fr||GS(t,s,a,r,o,l,e)||!1)?(v||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,l,e),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,l,e)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||g===n.memoizedProps&&o===n.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||g===n.memoizedProps&&o===n.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=e,r=a):(typeof i.componentDidUpdate!="function"||g===n.memoizedProps&&o===n.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||g===n.memoizedProps&&o===n.memoizedState||(t.flags|=1024),r=!1)}return Bg(n,t,s,r,S,d)}function Bg(n,t,s,r,d,S){HA(n,t);var i=(t.flags&128)!==0;if(!r&&!i)return d&&$S(t,s,!1),xr(n,t,S);r=t.stateNode,H4.current=t;var g=i&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,n!==null&&i?(t.child=pl(t,n.child,null,S),t.child=pl(t,null,g,S)):Kn(n,t,g,S),t.memoizedState=r.state,d&&$S(t,s,!0),t.child}function YA(n){var t=n.stateNode;t.pendingContext?MS(n,t.pendingContext,t.pendingContext!==t.context):t.context&&MS(n,t.context,!1),Nx(n,t.containerInfo)}function qS(n,t,s,r,d){return dl(),wx(d),t.flags|=256,Kn(n,t,s,r),t.child}var kg={dehydrated:null,treeContext:null,retryLane:0};function zg(n){return{baseLanes:n,cachePool:null,transitions:null}}function KA(n,t,s){var r=t.pendingProps,d=Me.current,S=!1,i=(t.flags&128)!==0,g;if((g=i)||(g=n!==null&&n.memoizedState===null?!1:(d&2)!==0),g?(S=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Se(Me,d&1),n===null)return Fg(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,n=r.fallback,S?(r=t.mode,S=t.child,i={mode:"hidden",children:i},!(r&1)&&S!==null?(S.childLanes=0,S.pendingProps=i):S=ep(i,r,0,null),n=Ua(n,r,s,null),S.return=t,n.return=t,S.sibling=n,t.child=S,t.child.memoizedState=zg(s),t.memoizedState=kg,n):Bx(t,i));if(d=n.memoizedState,d!==null&&(g=d.dehydrated,g!==null))return Y4(n,t,i,r,g,d,s);if(S){S=r.fallback,i=t.mode,d=n.child,g=d.sibling;var e={mode:"hidden",children:r.children};return!(i&1)&&t.child!==d?(r=t.child,r.childLanes=0,r.pendingProps=e,t.deletions=null):(r=Kr(d,e),r.subtreeFlags=d.subtreeFlags&14680064),g!==null?S=Kr(g,S):(S=Ua(S,i,s,null),S.flags|=2),S.return=t,r.return=t,r.sibling=S,t.child=r,r=S,S=t.child,i=n.child.memoizedState,i=i===null?zg(s):{baseLanes:i.baseLanes|s,cachePool:null,transitions:i.transitions},S.memoizedState=i,S.childLanes=n.childLanes&~s,t.memoizedState=kg,r}return S=n.child,n=S.sibling,r=Kr(S,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,n!==null&&(s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)),t.child=r,t.memoizedState=null,r}function Bx(n,t){return t=ep({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function af(n,t,s,r){return r!==null&&wx(r),pl(t,n.child,null,s),n=Bx(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function Y4(n,t,s,r,d,S,i){if(s)return t.flags&256?(t.flags&=-257,r=Dv(Error(At(422))),af(n,t,i,r)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(S=r.fallback,d=t.mode,r=ep({mode:"visible",children:r.children},d,0,null),S=Ua(S,d,i,null),S.flags|=2,r.return=t,S.return=t,r.sibling=S,t.child=r,t.mode&1&&pl(t,n.child,null,i),t.child.memoizedState=zg(i),t.memoizedState=kg,S);if(!(t.mode&1))return af(n,t,i,null);if(d.data==="$!"){if(r=d.nextSibling&&d.nextSibling.dataset,r)var g=r.dgst;return r=g,S=Error(At(419)),r=Dv(S,r,void 0),af(n,t,i,r)}if(g=(i&n.childLanes)!==0,ls||g){if(r=yn,r!==null){switch(i&-i){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(r.suspendedLanes|i)?0:d,d!==0&&d!==S.retryLane&&(S.retryLane=d,gr(n,d),Ti(r,n,d,-1))}return Wx(),r=Dv(Error(At(421))),af(n,t,i,r)}return d.data==="$?"?(t.flags|=128,t.child=n.child,t=r5.bind(null,n),d._reactRetry=t,null):(n=S.treeContext,ws=Wr(d.nextSibling),bs=t,Fe=!0,vi=null,n!==null&&(Gs[Us++]=hr,Gs[Us++]=cr,Gs[Us++]=Ya,hr=n.id,cr=n.overflow,Ya=t),t=Bx(t,r.children),t.flags|=4096,t)}function _S(n,t,s){n.lanes|=t;var r=n.alternate;r!==null&&(r.lanes|=t),Dg(n.return,t,s)}function Ov(n,t,s,r,d){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:d}:(S.isBackwards=t,S.rendering=null,S.renderingStartTime=0,S.last=r,S.tail=s,S.tailMode=d)}function jA(n,t,s){var r=t.pendingProps,d=r.revealOrder,S=r.tail;if(Kn(n,t,r.children,s),r=Me.current,r&2)r=r&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_S(n,s,t);else if(n.tag===19)_S(n,s,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Se(Me,r),!(t.mode&1))t.memoizedState=null;else switch(d){case"forwards":for(s=t.child,d=null;s!==null;)n=s.alternate,n!==null&&sd(n)===null&&(d=s),s=s.sibling;s=d,s===null?(d=t.child,t.child=null):(d=s.sibling,s.sibling=null),Ov(t,!1,d,s,S);break;case"backwards":for(s=null,d=t.child,t.child=null;d!==null;){if(n=d.alternate,n!==null&&sd(n)===null){t.child=d;break}n=d.sibling,d.sibling=s,s=d,d=n}Ov(t,!0,s,null,S);break;case"together":Ov(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Of(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function xr(n,t,s){if(n!==null&&(t.dependencies=n.dependencies),ja|=t.lanes,!(s&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(At(153));if(t.child!==null){for(n=t.child,s=Kr(n,n.pendingProps),t.child=s,s.return=t;n.sibling!==null;)n=n.sibling,s=s.sibling=Kr(n,n.pendingProps),s.return=t;s.sibling=null}return t.child}function K4(n,t,s){switch(t.tag){case 3:YA(t),dl();break;case 5:SA(t);break;case 1:cs(t.type)&&Jf(t);break;case 4:Nx(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,d=t.memoizedProps.value;Se(td,r._currentValue),r._currentValue=d;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Se(Me,Me.current&1),t.flags|=128,null):s&t.child.childLanes?KA(n,t,s):(Se(Me,Me.current&1),n=xr(n,t,s),n!==null?n.sibling:null);Se(Me,Me.current&1);break;case 19:if(r=(s&t.childLanes)!==0,n.flags&128){if(r)return jA(n,t,s);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Se(Me,Me.current),r)break;return null;case 22:case 23:return t.lanes=0,XA(n,t,s)}return xr(n,t,s)}var ZA,Vg,QA,JA;ZA=function(n,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)n.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Vg=function(){};QA=function(n,t,s,r){var d=n.memoizedProps;if(d!==r){n=t.stateNode,Ba(Wi.current);var S=null;switch(s){case"input":d=lg(n,d),r=lg(n,r),S=[];break;case"select":d=ke({},d,{value:void 0}),r=ke({},r,{value:void 0}),S=[];break;case"textarea":d=cg(n,d),r=cg(n,r),S=[];break;default:typeof d.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Zf)}dg(s,r);var i;s=null;for(a in d)if(!r.hasOwnProperty(a)&&d.hasOwnProperty(a)&&d[a]!=null)if(a==="style"){var g=d[a];for(i in g)g.hasOwnProperty(i)&&(s||(s={}),s[i]="")}else a!=="dangerouslySetInnerHTML"&&a!=="children"&&a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Bu.hasOwnProperty(a)?S||(S=[]):(S=S||[]).push(a,null));for(a in r){var e=r[a];if(g=d!=null?d[a]:void 0,r.hasOwnProperty(a)&&e!==g&&(e!=null||g!=null))if(a==="style")if(g){for(i in g)!g.hasOwnProperty(i)||e&&e.hasOwnProperty(i)||(s||(s={}),s[i]="");for(i in e)e.hasOwnProperty(i)&&g[i]!==e[i]&&(s||(s={}),s[i]=e[i])}else s||(S||(S=[]),S.push(a,s)),s=e;else a==="dangerouslySetInnerHTML"?(e=e?e.__html:void 0,g=g?g.__html:void 0,e!=null&&g!==e&&(S=S||[]).push(a,e)):a==="children"?typeof e!="string"&&typeof e!="number"||(S=S||[]).push(a,""+e):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&(Bu.hasOwnProperty(a)?(e!=null&&a==="onScroll"&&Ae("scroll",n),S||g===e||(S=[])):(S=S||[]).push(a,e))}s&&(S=S||[]).push("style",s);var a=S;(t.updateQueue=a)&&(t.flags|=4)}};JA=function(n,t,s,r){s!==r&&(t.flags|=4)};function hu(n,t){if(!Fe)switch(n.tailMode){case"hidden":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?n.tail=null:s.sibling=null;break;case"collapsed":s=n.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ln(n){var t=n.alternate!==null&&n.alternate.child===n.child,s=0,r=0;if(t)for(var d=n.child;d!==null;)s|=d.lanes|d.childLanes,r|=d.subtreeFlags&14680064,r|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)s|=d.lanes|d.childLanes,r|=d.subtreeFlags,r|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=r,n.childLanes=s,t}function j4(n,t,s){var r=t.pendingProps;switch(Cx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(t),null;case 1:return cs(t.type)&&Qf(),Ln(t),null;case 3:return r=t.stateNode,ml(),Ie(hs),Ie(Un),Fx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(sf(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vi!==null&&(jg(vi),vi=null))),Vg(n,t),Ln(t),null;case 5:Px(t);var d=Ba(Zu.current);if(s=t.type,n!==null&&t.stateNode!=null)QA(n,t,s,r,d),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(At(166));return Ln(t),null}if(n=Ba(Wi.current),sf(t)){r=t.stateNode,s=t.type;var S=t.memoizedProps;switch(r[ki]=t,r[Ku]=S,n=(t.mode&1)!==0,s){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(d=0;d<yu.length;d++)Ae(yu[d],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":lS(r,S),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!S.multiple},Ae("invalid",r);break;case"textarea":hS(r,S),Ae("invalid",r)}dg(s,S),d=null;for(var i in S)if(S.hasOwnProperty(i)){var g=S[i];i==="children"?typeof g=="string"?r.textContent!==g&&(S.suppressHydrationWarning!==!0&&nf(r.textContent,g,n),d=["children",g]):typeof g=="number"&&r.textContent!==""+g&&(S.suppressHydrationWarning!==!0&&nf(r.textContent,g,n),d=["children",""+g]):Bu.hasOwnProperty(i)&&g!=null&&i==="onScroll"&&Ae("scroll",r)}switch(s){case"input":jc(r),uS(r,S,!0);break;case"textarea":jc(r),cS(r);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(r.onclick=Zf)}r=d,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=EE(s)),n==="http://www.w3.org/1999/xhtml"?s==="script"?(n=i.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=i.createElement(s,{is:r.is}):(n=i.createElement(s),s==="select"&&(i=n,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):n=i.createElementNS(n,s),n[ki]=t,n[Ku]=r,ZA(n,t,!1,!1),t.stateNode=n;t:{switch(i=pg(s,r),s){case"dialog":Ae("cancel",n),Ae("close",n),d=r;break;case"iframe":case"object":case"embed":Ae("load",n),d=r;break;case"video":case"audio":for(d=0;d<yu.length;d++)Ae(yu[d],n);d=r;break;case"source":Ae("error",n),d=r;break;case"img":case"image":case"link":Ae("error",n),Ae("load",n),d=r;break;case"details":Ae("toggle",n),d=r;break;case"input":lS(n,r),d=lg(n,r),Ae("invalid",n);break;case"option":d=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},d=ke({},r,{value:void 0}),Ae("invalid",n);break;case"textarea":hS(n,r),d=cg(n,r),Ae("invalid",n);break;default:d=r}dg(s,d),g=d;for(S in g)if(g.hasOwnProperty(S)){var e=g[S];S==="style"?IE(n,e):S==="dangerouslySetInnerHTML"?(e=e?e.__html:void 0,e!=null&&AE(n,e)):S==="children"?typeof e=="string"?(s!=="textarea"||e!=="")&&ku(n,e):typeof e=="number"&&ku(n,""+e):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Bu.hasOwnProperty(S)?e!=null&&S==="onScroll"&&Ae("scroll",n):e!=null&&ox(n,S,e,i))}switch(s){case"input":jc(n),uS(n,r,!1);break;case"textarea":jc(n),cS(n);break;case"option":r.value!=null&&n.setAttribute("value",""+qr(r.value));break;case"select":n.multiple=!!r.multiple,S=r.value,S!=null?qo(n,!!r.multiple,S,!1):r.defaultValue!=null&&qo(n,!!r.multiple,r.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Zf)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ln(t),null;case 6:if(n&&t.stateNode!=null)JA(n,t,n.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(At(166));if(s=Ba(Zu.current),Ba(Wi.current),sf(t)){if(r=t.stateNode,s=t.memoizedProps,r[ki]=t,(S=r.nodeValue!==s)&&(n=bs,n!==null))switch(n.tag){case 3:nf(r.nodeValue,s,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nf(r.nodeValue,s,(n.mode&1)!==0)}S&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[ki]=t,t.stateNode=r}return Ln(t),null;case 13:if(Ie(Me),r=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Fe&&ws!==null&&t.mode&1&&!(t.flags&128))pA(),dl(),t.flags|=98560,S=!1;else if(S=sf(t),r!==null&&r.dehydrated!==null){if(n===null){if(!S)throw Error(At(318));if(S=t.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(At(317));S[ki]=t}else dl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ln(t),S=!1}else vi!==null&&(jg(vi),vi=null),S=!0;if(!S)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(n===null||Me.current&1?cn===0&&(cn=3):Wx())),t.updateQueue!==null&&(t.flags|=4),Ln(t),null);case 4:return ml(),Vg(n,t),n===null&&Hu(t.stateNode.containerInfo),Ln(t),null;case 10:return bx(t.type._context),Ln(t),null;case 17:return cs(t.type)&&Qf(),Ln(t),null;case 19:if(Ie(Me),S=t.memoizedState,S===null)return Ln(t),null;if(r=(t.flags&128)!==0,i=S.rendering,i===null)if(r)hu(S,!1);else{if(cn!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(i=sd(n),i!==null){for(t.flags|=128,hu(S,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)S=s,n=r,S.flags&=14680066,i=S.alternate,i===null?(S.childLanes=0,S.lanes=n,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=i.childLanes,S.lanes=i.lanes,S.child=i.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=i.memoizedProps,S.memoizedState=i.memoizedState,S.updateQueue=i.updateQueue,S.type=i.type,n=i.dependencies,S.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),s=s.sibling;return Se(Me,Me.current&1|2),t.child}n=n.sibling}S.tail!==null&&je()>gl&&(t.flags|=128,r=!0,hu(S,!1),t.lanes=4194304)}else{if(!r)if(n=sd(i),n!==null){if(t.flags|=128,r=!0,s=n.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),hu(S,!0),S.tail===null&&S.tailMode==="hidden"&&!i.alternate&&!Fe)return Ln(t),null}else 2*je()-S.renderingStartTime>gl&&s!==1073741824&&(t.flags|=128,r=!0,hu(S,!1),t.lanes=4194304);S.isBackwards?(i.sibling=t.child,t.child=i):(s=S.last,s!==null?s.sibling=i:t.child=i,S.last=i)}return S.tail!==null?(t=S.tail,S.rendering=t,S.tail=t.sibling,S.renderingStartTime=je(),t.sibling=null,s=Me.current,Se(Me,r?s&1|2:s&1),t):(Ln(t),null);case 22:case 23:return Ux(),r=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ss&1073741824&&(Ln(t),t.subtreeFlags&6&&(t.flags|=8192)):Ln(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function Z4(n,t){switch(Cx(t),t.tag){case 1:return cs(t.type)&&Qf(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return ml(),Ie(hs),Ie(Un),Fx(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return Px(t),null;case 13:if(Ie(Me),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(At(340));dl()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Ie(Me),null;case 4:return ml(),null;case 10:return bx(t.type._context),null;case 22:case 23:return Ux(),null;case 24:return null;default:return null}}var of=!1,Bn=!1,Q4=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function Zo(n,t){var s=n.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Ve(n,t,r)}else s.current=null}function Gg(n,t,s){try{s()}catch(r){Ve(n,t,r)}}var tC=!1;function J4(n,t){if(Eg=Yf,n=eA(),Tx(n)){if("selectionStart"in n)var s={start:n.selectionStart,end:n.selectionEnd};else t:{s=(s=n.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var d=r.anchorOffset,S=r.focusNode;r=r.focusOffset;try{s.nodeType,S.nodeType}catch{s=null;break t}var i=0,g=-1,e=-1,a=0,v=0,u=n,o=null;e:for(;;){for(var c;u!==s||d!==0&&u.nodeType!==3||(g=i+d),u!==S||r!==0&&u.nodeType!==3||(e=i+r),u.nodeType===3&&(i+=u.nodeValue.length),(c=u.firstChild)!==null;)o=u,u=c;for(;;){if(u===n)break e;if(o===s&&++a===d&&(g=i),o===S&&++v===r&&(e=i),(c=u.nextSibling)!==null)break;u=o,o=u.parentNode}u=c}s=g===-1||e===-1?null:{start:g,end:e}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ag={focusedElem:n,selectionRange:s},Yf=!1,Dt=t;Dt!==null;)if(t=Dt,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,Dt=n;else for(;Dt!==null;){t=Dt;try{var l=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(l!==null){var f=l.memoizedProps,m=l.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?f:pi(t.type,f),m);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(x){Ve(t,t.return,x)}if(n=t.sibling,n!==null){n.return=t.return,Dt=n;break}Dt=t.return}return l=tC,tC=!1,l}function Du(n,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var d=r=r.next;do{if((d.tag&n)===n){var S=d.destroy;d.destroy=void 0,S!==void 0&&Gg(t,s,S)}d=d.next}while(d!==r)}}function _d(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&n)===n){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function Ug(n){var t=n.ref;if(t!==null){var s=n.stateNode;switch(n.tag){case 5:n=s;break;default:n=s}typeof t=="function"?t(n):t.current=n}}function qA(n){var t=n.alternate;t!==null&&(n.alternate=null,qA(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[ki],delete t[Ku],delete t[Rg],delete t[O4],delete t[L4])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function _A(n){return n.tag===5||n.tag===3||n.tag===4}function eC(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||_A(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wg(n,t,s){var r=n.tag;if(r===5||r===6)n=n.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(n,t):s.insertBefore(n,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(n,s)):(t=s,t.appendChild(n)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Zf));else if(r!==4&&(n=n.child,n!==null))for(Wg(n,t,s),n=n.sibling;n!==null;)Wg(n,t,s),n=n.sibling}function Xg(n,t,s){var r=n.tag;if(r===5||r===6)n=n.stateNode,t?s.insertBefore(n,t):s.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Xg(n,t,s),n=n.sibling;n!==null;)Xg(n,t,s),n=n.sibling}var bn=null,mi=!1;function Nr(n,t,s){for(s=s.child;s!==null;)tb(n,t,s),s=s.sibling}function tb(n,t,s){if(Ui&&typeof Ui.onCommitFiberUnmount=="function")try{Ui.onCommitFiberUnmount(Hd,s)}catch{}switch(s.tag){case 5:Bn||Zo(s,t);case 6:var r=bn,d=mi;bn=null,Nr(n,t,s),bn=r,mi=d,bn!==null&&(mi?(n=bn,s=s.stateNode,n.nodeType===8?n.parentNode.removeChild(s):n.removeChild(s)):bn.removeChild(s.stateNode));break;case 18:bn!==null&&(mi?(n=bn,s=s.stateNode,n.nodeType===8?bv(n.parentNode,s):n.nodeType===1&&bv(n,s),Uu(n)):bv(bn,s.stateNode));break;case 4:r=bn,d=mi,bn=s.stateNode.containerInfo,mi=!0,Nr(n,t,s),bn=r,mi=d;break;case 0:case 11:case 14:case 15:if(!Bn&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){d=r=r.next;do{var S=d,i=S.destroy;S=S.tag,i!==void 0&&(S&2||S&4)&&Gg(s,t,i),d=d.next}while(d!==r)}Nr(n,t,s);break;case 1:if(!Bn&&(Zo(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(g){Ve(s,t,g)}Nr(n,t,s);break;case 21:Nr(n,t,s);break;case 22:s.mode&1?(Bn=(r=Bn)||s.memoizedState!==null,Nr(n,t,s),Bn=r):Nr(n,t,s);break;default:Nr(n,t,s)}}function nC(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var s=n.stateNode;s===null&&(s=n.stateNode=new Q4),t.forEach(function(r){var d=a5.bind(null,n,r);s.has(r)||(s.add(r),r.then(d,d))})}}function ci(n,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var d=s[r];try{var S=n,i=t,g=i;t:for(;g!==null;){switch(g.tag){case 5:bn=g.stateNode,mi=!1;break t;case 3:bn=g.stateNode.containerInfo,mi=!0;break t;case 4:bn=g.stateNode.containerInfo,mi=!0;break t}g=g.return}if(bn===null)throw Error(At(160));tb(S,i,d),bn=null,mi=!1;var e=d.alternate;e!==null&&(e.return=null),d.return=null}catch(a){Ve(d,t,a)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eb(t,n),t=t.sibling}function eb(n,t){var s=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ci(t,n),Fi(n),r&4){try{Du(3,n,n.return),_d(3,n)}catch(f){Ve(n,n.return,f)}try{Du(5,n,n.return)}catch(f){Ve(n,n.return,f)}}break;case 1:ci(t,n),Fi(n),r&512&&s!==null&&Zo(s,s.return);break;case 5:if(ci(t,n),Fi(n),r&512&&s!==null&&Zo(s,s.return),n.flags&32){var d=n.stateNode;try{ku(d,"")}catch(f){Ve(n,n.return,f)}}if(r&4&&(d=n.stateNode,d!=null)){var S=n.memoizedProps,i=s!==null?s.memoizedProps:S,g=n.type,e=n.updateQueue;if(n.updateQueue=null,e!==null)try{g==="input"&&S.type==="radio"&&S.name!=null&&CE(d,S),pg(g,i);var a=pg(g,S);for(i=0;i<e.length;i+=2){var v=e[i],u=e[i+1];v==="style"?IE(d,u):v==="dangerouslySetInnerHTML"?AE(d,u):v==="children"?ku(d,u):ox(d,v,u,a)}switch(g){case"input":ug(d,S);break;case"textarea":wE(d,S);break;case"select":var o=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!S.multiple;var c=S.value;c!=null?qo(d,!!S.multiple,c,!1):o!==!!S.multiple&&(S.defaultValue!=null?qo(d,!!S.multiple,S.defaultValue,!0):qo(d,!!S.multiple,S.multiple?[]:"",!1))}d[Ku]=S}catch(f){Ve(n,n.return,f)}}break;case 6:if(ci(t,n),Fi(n),r&4){if(n.stateNode===null)throw Error(At(162));d=n.stateNode,S=n.memoizedProps;try{d.nodeValue=S}catch(f){Ve(n,n.return,f)}}break;case 3:if(ci(t,n),Fi(n),r&4&&s!==null&&s.memoizedState.isDehydrated)try{Uu(t.containerInfo)}catch(f){Ve(n,n.return,f)}break;case 4:ci(t,n),Fi(n);break;case 13:ci(t,n),Fi(n),d=n.child,d.flags&8192&&(S=d.memoizedState!==null,d.stateNode.isHidden=S,!S||d.alternate!==null&&d.alternate.memoizedState!==null||(Vx=je())),r&4&&nC(n);break;case 22:if(v=s!==null&&s.memoizedState!==null,n.mode&1?(Bn=(a=Bn)||v,ci(t,n),Bn=a):ci(t,n),Fi(n),r&8192){if(a=n.memoizedState!==null,(n.stateNode.isHidden=a)&&!v&&n.mode&1)for(Dt=n,v=n.child;v!==null;){for(u=Dt=v;Dt!==null;){switch(o=Dt,c=o.child,o.tag){case 0:case 11:case 14:case 15:Du(4,o,o.return);break;case 1:Zo(o,o.return);var l=o.stateNode;if(typeof l.componentWillUnmount=="function"){r=o,s=o.return;try{t=r,l.props=t.memoizedProps,l.state=t.memoizedState,l.componentWillUnmount()}catch(f){Ve(r,s,f)}}break;case 5:Zo(o,o.return);break;case 22:if(o.memoizedState!==null){iC(u);continue}}c!==null?(c.return=o,Dt=c):iC(u)}v=v.sibling}t:for(v=null,u=n;;){if(u.tag===5){if(v===null){v=u;try{d=u.stateNode,a?(S=d.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(g=u.stateNode,e=u.memoizedProps.style,i=e!=null&&e.hasOwnProperty("display")?e.display:null,g.style.display=bE("display",i))}catch(f){Ve(n,n.return,f)}}}else if(u.tag===6){if(v===null)try{u.stateNode.nodeValue=a?"":u.memoizedProps}catch(f){Ve(n,n.return,f)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===n)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break t;for(;u.sibling===null;){if(u.return===null||u.return===n)break t;v===u&&(v=null),u=u.return}v===u&&(v=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:ci(t,n),Fi(n),r&4&&nC(n);break;case 21:break;default:ci(t,n),Fi(n)}}function Fi(n){var t=n.flags;if(t&2){try{t:{for(var s=n.return;s!==null;){if(_A(s)){var r=s;break t}s=s.return}throw Error(At(160))}switch(r.tag){case 5:var d=r.stateNode;r.flags&32&&(ku(d,""),r.flags&=-33);var S=eC(n);Xg(n,S,d);break;case 3:case 4:var i=r.stateNode.containerInfo,g=eC(n);Wg(n,g,i);break;default:throw Error(At(161))}}catch(e){Ve(n,n.return,e)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function q4(n,t,s){Dt=n,nb(n)}function nb(n,t,s){for(var r=(n.mode&1)!==0;Dt!==null;){var d=Dt,S=d.child;if(d.tag===22&&r){var i=d.memoizedState!==null||of;if(!i){var g=d.alternate,e=g!==null&&g.memoizedState!==null||Bn;g=of;var a=Bn;if(of=i,(Bn=e)&&!a)for(Dt=d;Dt!==null;)i=Dt,e=i.child,i.tag===22&&i.memoizedState!==null?rC(d):e!==null?(e.return=i,Dt=e):rC(d);for(;S!==null;)Dt=S,nb(S),S=S.sibling;Dt=d,of=g,Bn=a}sC(n)}else d.subtreeFlags&8772&&S!==null?(S.return=d,Dt=S):sC(n)}}function sC(n){for(;Dt!==null;){var t=Dt;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bn||_d(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Bn)if(s===null)r.componentDidMount();else{var d=t.elementType===t.type?s.memoizedProps:pi(t.type,s.memoizedProps);r.componentDidUpdate(d,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var S=t.updateQueue;S!==null&&VS(t,S,r);break;case 3:var i=t.updateQueue;if(i!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}VS(t,i,s)}break;case 5:var g=t.stateNode;if(s===null&&t.flags&4){s=g;var e=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":e.autoFocus&&s.focus();break;case"img":e.src&&(s.src=e.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var a=t.alternate;if(a!==null){var v=a.memoizedState;if(v!==null){var u=v.dehydrated;u!==null&&Uu(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}Bn||t.flags&512&&Ug(t)}catch(o){Ve(t,t.return,o)}}if(t===n){Dt=null;break}if(s=t.sibling,s!==null){s.return=t.return,Dt=s;break}Dt=t.return}}function iC(n){for(;Dt!==null;){var t=Dt;if(t===n){Dt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Dt=s;break}Dt=t.return}}function rC(n){for(;Dt!==null;){var t=Dt;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{_d(4,t)}catch(e){Ve(t,s,e)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var d=t.return;try{r.componentDidMount()}catch(e){Ve(t,d,e)}}var S=t.return;try{Ug(t)}catch(e){Ve(t,S,e)}break;case 5:var i=t.return;try{Ug(t)}catch(e){Ve(t,i,e)}}}catch(e){Ve(t,t.return,e)}if(t===n){Dt=null;break}var g=t.sibling;if(g!==null){g.return=t.return,Dt=g;break}Dt=t.return}}var _4=Math.ceil,ad=Cr.ReactCurrentDispatcher,kx=Cr.ReactCurrentOwner,qs=Cr.ReactCurrentBatchConfig,ue=0,yn=null,qe=null,In=0,Ss=0,Qo=ca(0),cn=0,_u=null,ja=0,tp=0,zx=0,Ou=null,as=null,Vx=0,gl=1/0,sr=null,od=!1,Hg=null,Hr=null,lf=!1,$r=null,ld=0,Lu=0,Yg=null,Lf=-1,Mf=0;function Jn(){return ue&6?je():Lf!==-1?Lf:Lf=je()}function Yr(n){return n.mode&1?ue&2&&In!==0?In&-In:$4.transition!==null?(Mf===0&&(Mf=zE()),Mf):(n=de,n!==0||(n=window.event,n=n===void 0?16:YE(n.type)),n):1}function Ti(n,t,s,r){if(50<Lu)throw Lu=0,Yg=null,Error(At(185));gh(n,s,r),(!(ue&2)||n!==yn)&&(n===yn&&(!(ue&2)&&(tp|=s),cn===4&&Lr(n,In)),fs(n,r),s===1&&ue===0&&!(t.mode&1)&&(gl=je()+500,Qd&&fa()))}function fs(n,t){var s=n.callbackNode;$M(n,t);var r=Hf(n,n===yn?In:0);if(r===0)s!==null&&pS(s),n.callbackNode=null,n.callbackPriority=0;else if(t=r&-r,n.callbackPriority!==t){if(s!=null&&pS(s),t===1)n.tag===0?M4(aC.bind(null,n)):cA(aC.bind(null,n)),F4(function(){!(ue&6)&&fa()}),s=null;else{switch(VE(r)){case 1:s=fx;break;case 4:s=BE;break;case 16:s=Xf;break;case 536870912:s=kE;break;default:s=Xf}s=hb(s,sb.bind(null,n))}n.callbackPriority=t,n.callbackNode=s}}function sb(n,t){if(Lf=-1,Mf=0,ue&6)throw Error(At(327));var s=n.callbackNode;if(sl()&&n.callbackNode!==s)return null;var r=Hf(n,n===yn?In:0);if(r===0)return null;if(r&30||r&n.expiredLanes||t)t=ud(n,r);else{t=r;var d=ue;ue|=2;var S=rb();(yn!==n||In!==t)&&(sr=null,gl=je()+500,Ga(n,t));do try{n5();break}catch(g){ib(n,g)}while(1);Ax(),ad.current=S,ue=d,qe!==null?t=0:(yn=null,In=0,t=cn)}if(t!==0){if(t===2&&(d=yg(n),d!==0&&(r=d,t=Kg(n,d))),t===1)throw s=_u,Ga(n,0),Lr(n,r),fs(n,je()),s;if(t===6)Lr(n,r);else{if(d=n.current.alternate,!(r&30)&&!t5(d)&&(t=ud(n,r),t===2&&(S=yg(n),S!==0&&(r=S,t=Kg(n,S))),t===1))throw s=_u,Ga(n,0),Lr(n,r),fs(n,je()),s;switch(n.finishedWork=d,n.finishedLanes=r,t){case 0:case 1:throw Error(At(345));case 2:Na(n,as,sr);break;case 3:if(Lr(n,r),(r&130023424)===r&&(t=Vx+500-je(),10<t)){if(Hf(n,0)!==0)break;if(d=n.suspendedLanes,(d&r)!==r){Jn(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Ig(Na.bind(null,n,as,sr),t);break}Na(n,as,sr);break;case 4:if(Lr(n,r),(r&4194240)===r)break;for(t=n.eventTimes,d=-1;0<r;){var i=31-yi(r);S=1<<i,i=t[i],i>d&&(d=i),r&=~S}if(r=d,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_4(r/1960))-r,10<r){n.timeoutHandle=Ig(Na.bind(null,n,as,sr),r);break}Na(n,as,sr);break;case 5:Na(n,as,sr);break;default:throw Error(At(329))}}}return fs(n,je()),n.callbackNode===s?sb.bind(null,n):null}function Kg(n,t){var s=Ou;return n.current.memoizedState.isDehydrated&&(Ga(n,t).flags|=256),n=ud(n,t),n!==2&&(t=as,as=s,t!==null&&jg(t)),n}function jg(n){as===null?as=n:as.push.apply(as,n)}function t5(n){for(var t=n;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var d=s[r],S=d.getSnapshot;d=d.value;try{if(!wi(S(),d))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lr(n,t){for(t&=~zx,t&=~tp,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var s=31-yi(t),r=1<<s;n[s]=-1,t&=~r}}function aC(n){if(ue&6)throw Error(At(327));sl();var t=Hf(n,0);if(!(t&1))return fs(n,je()),null;var s=ud(n,t);if(n.tag!==0&&s===2){var r=yg(n);r!==0&&(t=r,s=Kg(n,r))}if(s===1)throw s=_u,Ga(n,0),Lr(n,t),fs(n,je()),s;if(s===6)throw Error(At(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,Na(n,as,sr),fs(n,je()),null}function Gx(n,t){var s=ue;ue|=1;try{return n(t)}finally{ue=s,ue===0&&(gl=je()+500,Qd&&fa())}}function Za(n){$r!==null&&$r.tag===0&&!(ue&6)&&sl();var t=ue;ue|=1;var s=qs.transition,r=de;try{if(qs.transition=null,de=1,n)return n()}finally{de=r,qs.transition=s,ue=t,!(ue&6)&&fa()}}function Ux(){Ss=Qo.current,Ie(Qo)}function Ga(n,t){n.finishedWork=null,n.finishedLanes=0;var s=n.timeoutHandle;if(s!==-1&&(n.timeoutHandle=-1,P4(s)),qe!==null)for(s=qe.return;s!==null;){var r=s;switch(Cx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qf();break;case 3:ml(),Ie(hs),Ie(Un),Fx();break;case 5:Px(r);break;case 4:ml();break;case 13:Ie(Me);break;case 19:Ie(Me);break;case 10:bx(r.type._context);break;case 22:case 23:Ux()}s=s.return}if(yn=n,qe=n=Kr(n.current,null),In=Ss=t,cn=0,_u=null,zx=tp=ja=0,as=Ou=null,$a!==null){for(t=0;t<$a.length;t++)if(s=$a[t],r=s.interleaved,r!==null){s.interleaved=null;var d=r.next,S=s.pending;if(S!==null){var i=S.next;S.next=d,r.next=i}s.pending=r}$a=null}return n}function ib(n,t){do{var s=qe;try{if(Ax(),Ff.current=rd,id){for(var r=Be.memoizedState;r!==null;){var d=r.queue;d!==null&&(d.pending=null),r=r.next}id=!1}if(Ka=0,vn=un=Be=null,Fu=!1,Qu=0,kx.current=null,s===null||s.return===null){cn=1,_u=t,qe=null;break}t:{var S=n,i=s.return,g=s,e=t;if(t=In,g.flags|=32768,e!==null&&typeof e=="object"&&typeof e.then=="function"){var a=e,v=g,u=v.tag;if(!(v.mode&1)&&(u===0||u===11||u===15)){var o=v.alternate;o?(v.updateQueue=o.updateQueue,v.memoizedState=o.memoizedState,v.lanes=o.lanes):(v.updateQueue=null,v.memoizedState=null)}var c=KS(i);if(c!==null){c.flags&=-257,jS(c,i,g,S,t),c.mode&1&&YS(S,a,t),t=c,e=a;var l=t.updateQueue;if(l===null){var f=new Set;f.add(e),t.updateQueue=f}else l.add(e);break t}else{if(!(t&1)){YS(S,a,t),Wx();break t}e=Error(At(426))}}else if(Fe&&g.mode&1){var m=KS(i);if(m!==null){!(m.flags&65536)&&(m.flags|=256),jS(m,i,g,S,t),wx(vl(e,g));break t}}S=e=vl(e,g),cn!==4&&(cn=2),Ou===null?Ou=[S]:Ou.push(S),S=i;do{switch(S.tag){case 3:S.flags|=65536,t&=-t,S.lanes|=t;var h=GA(S,e,t);zS(S,h);break t;case 1:g=e;var p=S.type,y=S.stateNode;if(!(S.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Hr===null||!Hr.has(y)))){S.flags|=65536,t&=-t,S.lanes|=t;var x=UA(S,g,t);zS(S,x);break t}}S=S.return}while(S!==null)}ob(s)}catch(T){t=T,qe===s&&s!==null&&(qe=s=s.return);continue}break}while(1)}function rb(){var n=ad.current;return ad.current=rd,n===null?rd:n}function Wx(){(cn===0||cn===3||cn===2)&&(cn=4),yn===null||!(ja&268435455)&&!(tp&268435455)||Lr(yn,In)}function ud(n,t){var s=ue;ue|=2;var r=rb();(yn!==n||In!==t)&&(sr=null,Ga(n,t));do try{e5();break}catch(d){ib(n,d)}while(1);if(Ax(),ue=s,ad.current=r,qe!==null)throw Error(At(261));return yn=null,In=0,cn}function e5(){for(;qe!==null;)ab(qe)}function n5(){for(;qe!==null&&!IM();)ab(qe)}function ab(n){var t=ub(n.alternate,n,Ss);n.memoizedProps=n.pendingProps,t===null?ob(n):qe=t,kx.current=null}function ob(n){var t=n;do{var s=t.alternate;if(n=t.return,t.flags&32768){if(s=Z4(s,t),s!==null){s.flags&=32767,qe=s;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{cn=6,qe=null;return}}else if(s=j4(s,t,Ss),s!==null){qe=s;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=n}while(t!==null);cn===0&&(cn=5)}function Na(n,t,s){var r=de,d=qs.transition;try{qs.transition=null,de=1,s5(n,t,s,r)}finally{qs.transition=d,de=r}return null}function s5(n,t,s,r){do sl();while($r!==null);if(ue&6)throw Error(At(327));s=n.finishedWork;var d=n.finishedLanes;if(s===null)return null;if(n.finishedWork=null,n.finishedLanes=0,s===n.current)throw Error(At(177));n.callbackNode=null,n.callbackPriority=0;var S=s.lanes|s.childLanes;if(BM(n,S),n===yn&&(qe=yn=null,In=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||lf||(lf=!0,hb(Xf,function(){return sl(),null})),S=(s.flags&15990)!==0,s.subtreeFlags&15990||S){S=qs.transition,qs.transition=null;var i=de;de=1;var g=ue;ue|=4,kx.current=null,J4(n,s),eb(s,n),w4(Ag),Yf=!!Eg,Ag=Eg=null,n.current=s,q4(s),RM(),ue=g,de=i,qs.transition=S}else n.current=s;if(lf&&(lf=!1,$r=n,ld=d),S=n.pendingLanes,S===0&&(Hr=null),FM(s.stateNode),fs(n,je()),t!==null)for(r=n.onRecoverableError,s=0;s<t.length;s++)d=t[s],r(d.value,{componentStack:d.stack,digest:d.digest});if(od)throw od=!1,n=Hg,Hg=null,n;return ld&1&&n.tag!==0&&sl(),S=n.pendingLanes,S&1?n===Yg?Lu++:(Lu=0,Yg=n):Lu=0,fa(),null}function sl(){if($r!==null){var n=VE(ld),t=qs.transition,s=de;try{if(qs.transition=null,de=16>n?16:n,$r===null)var r=!1;else{if(n=$r,$r=null,ld=0,ue&6)throw Error(At(331));var d=ue;for(ue|=4,Dt=n.current;Dt!==null;){var S=Dt,i=S.child;if(Dt.flags&16){var g=S.deletions;if(g!==null){for(var e=0;e<g.length;e++){var a=g[e];for(Dt=a;Dt!==null;){var v=Dt;switch(v.tag){case 0:case 11:case 15:Du(8,v,S)}var u=v.child;if(u!==null)u.return=v,Dt=u;else for(;Dt!==null;){v=Dt;var o=v.sibling,c=v.return;if(qA(v),v===a){Dt=null;break}if(o!==null){o.return=c,Dt=o;break}Dt=c}}}var l=S.alternate;if(l!==null){var f=l.child;if(f!==null){l.child=null;do{var m=f.sibling;f.sibling=null,f=m}while(f!==null)}}Dt=S}}if(S.subtreeFlags&2064&&i!==null)i.return=S,Dt=i;else t:for(;Dt!==null;){if(S=Dt,S.flags&2048)switch(S.tag){case 0:case 11:case 15:Du(9,S,S.return)}var h=S.sibling;if(h!==null){h.return=S.return,Dt=h;break t}Dt=S.return}}var p=n.current;for(Dt=p;Dt!==null;){i=Dt;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,Dt=y;else t:for(i=p;Dt!==null;){if(g=Dt,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:_d(9,g)}}catch(T){Ve(g,g.return,T)}if(g===i){Dt=null;break t}var x=g.sibling;if(x!==null){x.return=g.return,Dt=x;break t}Dt=g.return}}if(ue=d,fa(),Ui&&typeof Ui.onPostCommitFiberRoot=="function")try{Ui.onPostCommitFiberRoot(Hd,n)}catch{}r=!0}return r}finally{de=s,qs.transition=t}}return!1}function oC(n,t,s){t=vl(s,t),t=GA(n,t,1),n=Xr(n,t,1),t=Jn(),n!==null&&(gh(n,1,t),fs(n,t))}function Ve(n,t,s){if(n.tag===3)oC(n,n,s);else for(;t!==null;){if(t.tag===3){oC(t,n,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hr===null||!Hr.has(r))){n=vl(s,n),n=UA(t,n,1),t=Xr(t,n,1),n=Jn(),t!==null&&(gh(t,1,n),fs(t,n));break}}t=t.return}}function i5(n,t,s){var r=n.pingCache;r!==null&&r.delete(t),t=Jn(),n.pingedLanes|=n.suspendedLanes&s,yn===n&&(In&s)===s&&(cn===4||cn===3&&(In&130023424)===In&&500>je()-Vx?Ga(n,0):zx|=s),fs(n,t)}function lb(n,t){t===0&&(n.mode&1?(t=Jc,Jc<<=1,!(Jc&130023424)&&(Jc=4194304)):t=1);var s=Jn();n=gr(n,t),n!==null&&(gh(n,t,s),fs(n,s))}function r5(n){var t=n.memoizedState,s=0;t!==null&&(s=t.retryLane),lb(n,s)}function a5(n,t){var s=0;switch(n.tag){case 13:var r=n.stateNode,d=n.memoizedState;d!==null&&(s=d.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(At(314))}r!==null&&r.delete(t),lb(n,s)}var ub;ub=function(n,t,s){if(n!==null)if(n.memoizedProps!==t.pendingProps||hs.current)ls=!0;else{if(!(n.lanes&s)&&!(t.flags&128))return ls=!1,K4(n,t,s);ls=!!(n.flags&131072)}else ls=!1,Fe&&t.flags&1048576&&fA(t,_f,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Of(n,t),n=t.pendingProps;var d=fl(t,Un.current);nl(t,s),d=Ox(null,t,r,n,d,s);var S=Lx();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cs(r)?(S=!0,Jf(t)):S=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Rx(t),d.updater=Jd,t.stateNode=d,d._reactInternals=t,Lg(t,r,n,s),t=Bg(null,t,r,!0,S,s)):(t.tag=0,Fe&&S&&Sx(t),Kn(null,t,d,s),t=t.child),t;case 16:r=t.elementType;t:{switch(Of(n,t),n=t.pendingProps,d=r._init,r=d(r._payload),t.type=r,d=t.tag=l5(r),n=pi(r,n),d){case 0:t=$g(null,t,r,n,s);break t;case 1:t=JS(null,t,r,n,s);break t;case 11:t=ZS(null,t,r,n,s);break t;case 14:t=QS(null,t,r,pi(r.type,n),s);break t}throw Error(At(306,r,""))}return t;case 0:return r=t.type,d=t.pendingProps,d=t.elementType===r?d:pi(r,d),$g(n,t,r,d,s);case 1:return r=t.type,d=t.pendingProps,d=t.elementType===r?d:pi(r,d),JS(n,t,r,d,s);case 3:t:{if(YA(t),n===null)throw Error(At(387));r=t.pendingProps,S=t.memoizedState,d=S.element,vA(n,t),nd(t,r,null,s);var i=t.memoizedState;if(r=i.element,S.isDehydrated)if(S={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=S,t.memoizedState=S,t.flags&256){d=vl(Error(At(423)),t),t=qS(n,t,r,s,d);break t}else if(r!==d){d=vl(Error(At(424)),t),t=qS(n,t,r,s,d);break t}else for(ws=Wr(t.stateNode.containerInfo.firstChild),bs=t,Fe=!0,vi=null,s=TA(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(dl(),r===d){t=xr(n,t,s);break t}Kn(n,t,r,s)}t=t.child}return t;case 5:return SA(t),n===null&&Fg(t),r=t.type,d=t.pendingProps,S=n!==null?n.memoizedProps:null,i=d.children,bg(r,d)?i=null:S!==null&&bg(r,S)&&(t.flags|=32),HA(n,t),Kn(n,t,i,s),t.child;case 6:return n===null&&Fg(t),null;case 13:return KA(n,t,s);case 4:return Nx(t,t.stateNode.containerInfo),r=t.pendingProps,n===null?t.child=pl(t,null,r,s):Kn(n,t,r,s),t.child;case 11:return r=t.type,d=t.pendingProps,d=t.elementType===r?d:pi(r,d),ZS(n,t,r,d,s);case 7:return Kn(n,t,t.pendingProps,s),t.child;case 8:return Kn(n,t,t.pendingProps.children,s),t.child;case 12:return Kn(n,t,t.pendingProps.children,s),t.child;case 10:t:{if(r=t.type._context,d=t.pendingProps,S=t.memoizedProps,i=d.value,Se(td,r._currentValue),r._currentValue=i,S!==null)if(wi(S.value,i)){if(S.children===d.children&&!hs.current){t=xr(n,t,s);break t}}else for(S=t.child,S!==null&&(S.return=t);S!==null;){var g=S.dependencies;if(g!==null){i=S.child;for(var e=g.firstContext;e!==null;){if(e.context===r){if(S.tag===1){e=fr(-1,s&-s),e.tag=2;var a=S.updateQueue;if(a!==null){a=a.shared;var v=a.pending;v===null?e.next=e:(e.next=v.next,v.next=e),a.pending=e}}S.lanes|=s,e=S.alternate,e!==null&&(e.lanes|=s),Dg(S.return,s,t),g.lanes|=s;break}e=e.next}}else if(S.tag===10)i=S.type===t.type?null:S.child;else if(S.tag===18){if(i=S.return,i===null)throw Error(At(341));i.lanes|=s,g=i.alternate,g!==null&&(g.lanes|=s),Dg(i,s,t),i=S.sibling}else i=S.child;if(i!==null)i.return=S;else for(i=S;i!==null;){if(i===t){i=null;break}if(S=i.sibling,S!==null){S.return=i.return,i=S;break}i=i.return}S=i}Kn(n,t,d.children,s),t=t.child}return t;case 9:return d=t.type,r=t.pendingProps.children,nl(t,s),d=ni(d),r=r(d),t.flags|=1,Kn(n,t,r,s),t.child;case 14:return r=t.type,d=pi(r,t.pendingProps),d=pi(r.type,d),QS(n,t,r,d,s);case 15:return WA(n,t,t.type,t.pendingProps,s);case 17:return r=t.type,d=t.pendingProps,d=t.elementType===r?d:pi(r,d),Of(n,t),t.tag=1,cs(r)?(n=!0,Jf(t)):n=!1,nl(t,s),xA(t,r,d),Lg(t,r,d,s),Bg(null,t,r,!0,n,s);case 19:return jA(n,t,s);case 22:return XA(n,t,s)}throw Error(At(156,t.tag))};function hb(n,t){return $E(n,t)}function o5(n,t,s,r){this.tag=n,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xs(n,t,s,r){return new o5(n,t,s,r)}function Xx(n){return n=n.prototype,!(!n||!n.isReactComponent)}function l5(n){if(typeof n=="function")return Xx(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ux)return 11;if(n===hx)return 14}return 2}function Kr(n,t){var s=n.alternate;return s===null?(s=Xs(n.tag,t,n.key,n.mode),s.elementType=n.elementType,s.type=n.type,s.stateNode=n.stateNode,s.alternate=n,n.alternate=s):(s.pendingProps=t,s.type=n.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=n.flags&14680064,s.childLanes=n.childLanes,s.lanes=n.lanes,s.child=n.child,s.memoizedProps=n.memoizedProps,s.memoizedState=n.memoizedState,s.updateQueue=n.updateQueue,t=n.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=n.sibling,s.index=n.index,s.ref=n.ref,s}function $f(n,t,s,r,d,S){var i=2;if(r=n,typeof n=="function")Xx(n)&&(i=1);else if(typeof n=="string")i=5;else t:switch(n){case Vo:return Ua(s.children,d,S,t);case lx:i=8,d|=8;break;case ig:return n=Xs(12,s,t,d|2),n.elementType=ig,n.lanes=S,n;case rg:return n=Xs(13,s,t,d),n.elementType=rg,n.lanes=S,n;case ag:return n=Xs(19,s,t,d),n.elementType=ag,n.lanes=S,n;case yE:return ep(s,d,S,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case gE:i=10;break t;case xE:i=9;break t;case ux:i=11;break t;case hx:i=14;break t;case Pr:i=16,r=null;break t}throw Error(At(130,n==null?n:typeof n,""))}return t=Xs(i,s,t,d),t.elementType=n,t.type=r,t.lanes=S,t}function Ua(n,t,s,r){return n=Xs(7,n,r,t),n.lanes=s,n}function ep(n,t,s,r){return n=Xs(22,n,r,t),n.elementType=yE,n.lanes=s,n.stateNode={isHidden:!1},n}function Lv(n,t,s){return n=Xs(6,n,null,t),n.lanes=s,n}function Mv(n,t,s){return t=Xs(4,n.children!==null?n.children:[],n.key,t),t.lanes=s,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function u5(n,t,s,r,d){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mv(0),this.expirationTimes=mv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mv(0),this.identifierPrefix=r,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Hx(n,t,s,r,d,S,i,g,e){return n=new u5(n,t,s,g,e),t===1?(t=1,S===!0&&(t|=8)):t=0,S=Xs(3,null,null,t),n.current=S,S.stateNode=n,S.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rx(S),n}function h5(n,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zo,key:r==null?null:""+r,children:n,containerInfo:t,implementation:s}}function cb(n){if(!n)return _r;n=n._reactInternals;t:{if(ho(n)!==n||n.tag!==1)throw Error(At(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(cs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(At(171))}if(n.tag===1){var s=n.type;if(cs(s))return hA(n,s,t)}return t}function fb(n,t,s,r,d,S,i,g,e){return n=Hx(s,r,!0,n,d,S,i,g,e),n.context=cb(null),s=n.current,r=Jn(),d=Yr(s),S=fr(r,d),S.callback=t??null,Xr(s,S,d),n.current.lanes=d,gh(n,d,r),fs(n,r),n}function np(n,t,s,r){var d=t.current,S=Jn(),i=Yr(d);return s=cb(s),t.context===null?t.context=s:t.pendingContext=s,t=fr(S,i),t.payload={element:n},r=r===void 0?null:r,r!==null&&(t.callback=r),n=Xr(d,t,i),n!==null&&(Ti(n,d,i,S),Pf(n,d,i)),i}function hd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function lC(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var s=n.retryLane;n.retryLane=s!==0&&s<t?s:t}}function Yx(n,t){lC(n,t),(n=n.alternate)&&lC(n,t)}function c5(){return null}var db=typeof reportError=="function"?reportError:function(n){console.error(n)};function Kx(n){this._internalRoot=n}sp.prototype.render=Kx.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(At(409));np(n,t,null,null)};sp.prototype.unmount=Kx.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;Za(function(){np(null,n,null,null)}),t[vr]=null}};function sp(n){this._internalRoot=n}sp.prototype.unstable_scheduleHydration=function(n){if(n){var t=WE();n={blockedOn:null,target:n,priority:t};for(var s=0;s<Or.length&&t!==0&&t<Or[s].priority;s++);Or.splice(s,0,n),s===0&&HE(n)}};function jx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ip(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function uC(){}function f5(n,t,s,r,d){if(d){if(typeof r=="function"){var S=r;r=function(){var a=hd(i);S.call(a)}}var i=fb(t,r,n,0,null,!1,!1,"",uC);return n._reactRootContainer=i,n[vr]=i.current,Hu(n.nodeType===8?n.parentNode:n),Za(),i}for(;d=n.lastChild;)n.removeChild(d);if(typeof r=="function"){var g=r;r=function(){var a=hd(e);g.call(a)}}var e=Hx(n,0,!1,null,null,!1,!1,"",uC);return n._reactRootContainer=e,n[vr]=e.current,Hu(n.nodeType===8?n.parentNode:n),Za(function(){np(t,e,s,r)}),e}function rp(n,t,s,r,d){var S=s._reactRootContainer;if(S){var i=S;if(typeof d=="function"){var g=d;d=function(){var e=hd(i);g.call(e)}}np(t,i,n,d)}else i=f5(s,t,n,d,r);return hd(i)}GE=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var s=xu(t.pendingLanes);s!==0&&(dx(t,s|1),fs(t,je()),!(ue&6)&&(gl=je()+500,fa()))}break;case 13:Za(function(){var r=gr(n,1);if(r!==null){var d=Jn();Ti(r,n,1,d)}}),Yx(n,1)}};px=function(n){if(n.tag===13){var t=gr(n,134217728);if(t!==null){var s=Jn();Ti(t,n,134217728,s)}Yx(n,134217728)}};UE=function(n){if(n.tag===13){var t=Yr(n),s=gr(n,t);if(s!==null){var r=Jn();Ti(s,n,t,r)}Yx(n,t)}};WE=function(){return de};XE=function(n,t){var s=de;try{return de=n,t()}finally{de=s}};vg=function(n,t,s){switch(t){case"input":if(ug(n,s),t=s.name,s.type==="radio"&&t!=null){for(s=n;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==n&&r.form===n.form){var d=Zd(r);if(!d)throw Error(At(90));SE(r),ug(r,d)}}}break;case"textarea":wE(n,s);break;case"select":t=s.value,t!=null&&qo(n,!!s.multiple,t,!1)}};PE=Gx;FE=Za;var d5={usingClientEntryPoint:!1,Events:[yh,Xo,Zd,RE,NE,Gx]},cu={findFiberByHostInstance:Ma,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},p5={bundleType:cu.bundleType,version:cu.version,rendererPackageName:cu.rendererPackageName,rendererConfig:cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=LE(n),n===null?null:n.stateNode},findFiberByHostInstance:cu.findFiberByHostInstance||c5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uf.isDisabled&&uf.supportsFiber)try{Hd=uf.inject(p5),Ui=uf}catch{}}Ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d5;Ds.createPortal=function(n,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jx(t))throw Error(At(200));return h5(n,t,null,s)};Ds.createRoot=function(n,t){if(!jx(n))throw Error(At(299));var s=!1,r="",d=db;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Hx(n,1,!1,null,null,s,!1,r,d),n[vr]=t.current,Hu(n.nodeType===8?n.parentNode:n),new Kx(t)};Ds.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(At(188)):(n=Object.keys(n).join(","),Error(At(268,n)));return n=LE(t),n=n===null?null:n.stateNode,n};Ds.flushSync=function(n){return Za(n)};Ds.hydrate=function(n,t,s){if(!ip(t))throw Error(At(200));return rp(null,n,t,!0,s)};Ds.hydrateRoot=function(n,t,s){if(!jx(n))throw Error(At(405));var r=s!=null&&s.hydratedSources||null,d=!1,S="",i=db;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(S=s.identifierPrefix),s.onRecoverableError!==void 0&&(i=s.onRecoverableError)),t=fb(t,null,n,1,s??null,d,!1,S,i),n[vr]=t.current,Hu(n),r)for(n=0;n<r.length;n++)s=r[n],d=s._getVersion,d=d(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,d]:t.mutableSourceEagerHydrationData.push(s,d);return new sp(t)};Ds.render=function(n,t,s){if(!ip(t))throw Error(At(200));return rp(null,n,t,!1,s)};Ds.unmountComponentAtNode=function(n){if(!ip(n))throw Error(At(40));return n._reactRootContainer?(Za(function(){rp(null,null,n,!1,function(){n._reactRootContainer=null,n[vr]=null})}),!0):!1};Ds.unstable_batchedUpdates=Gx;Ds.unstable_renderSubtreeIntoContainer=function(n,t,s,r){if(!ip(s))throw Error(At(200));if(n==null||n._reactInternals===void 0)throw Error(At(38));return rp(n,t,s,!1,r)};Ds.version="18.2.0-next-9e3b772b8-20220608";function pb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pb)}catch(n){console.error(n)}}pb(),fE.exports=Ds;var m5=fE.exports,hC=m5;ng.createRoot=hC.createRoot,ng.hydrateRoot=hC.hydrateRoot;var mb={exports:{}};(function(n,t){(function(r,d){n.exports=d()})(Mn,()=>(()=>{var s={6659:i=>{var g=Object.prototype.hasOwnProperty,e="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(e=!1));function v(l,f,m){this.fn=l,this.context=f,this.once=m||!1}function u(l,f,m,h,p){if(typeof m!="function")throw new TypeError("The listener must be a function");var y=new v(m,h||l,p),x=e?e+f:f;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],y]:l._events[x].push(y):(l._events[x]=y,l._eventsCount++),l}function o(l,f){--l._eventsCount===0?l._events=new a:delete l._events[f]}function c(){this._events=new a,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],m,h;if(this._eventsCount===0)return f;for(h in m=this._events)g.call(m,h)&&f.push(e?h.slice(1):h);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},c.prototype.listeners=function(f){var m=e?e+f:f,h=this._events[m];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,y=h.length,x=new Array(y);p<y;p++)x[p]=h[p].fn;return x},c.prototype.listenerCount=function(f){var m=e?e+f:f,h=this._events[m];return h?h.fn?1:h.length:0},c.prototype.emit=function(f,m,h,p,y,x){var T=e?e+f:f;if(!this._events[T])return!1;var C=this._events[T],E=arguments.length,A,w;if(C.fn){switch(C.once&&this.removeListener(f,C.fn,void 0,!0),E){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,m),!0;case 3:return C.fn.call(C.context,m,h),!0;case 4:return C.fn.call(C.context,m,h,p),!0;case 5:return C.fn.call(C.context,m,h,p,y),!0;case 6:return C.fn.call(C.context,m,h,p,y,x),!0}for(w=1,A=new Array(E-1);w<E;w++)A[w-1]=arguments[w];C.fn.apply(C.context,A)}else{var b=C.length,I;for(w=0;w<b;w++)switch(C[w].once&&this.removeListener(f,C[w].fn,void 0,!0),E){case 1:C[w].fn.call(C[w].context);break;case 2:C[w].fn.call(C[w].context,m);break;case 3:C[w].fn.call(C[w].context,m,h);break;case 4:C[w].fn.call(C[w].context,m,h,p);break;default:if(!A)for(I=1,A=new Array(E-1);I<E;I++)A[I-1]=arguments[I];C[w].fn.apply(C[w].context,A)}}return!0},c.prototype.on=function(f,m,h){return u(this,f,m,h,!1)},c.prototype.once=function(f,m,h){return u(this,f,m,h,!0)},c.prototype.removeListener=function(f,m,h,p){var y=e?e+f:f;if(!this._events[y])return this;if(!m)return o(this,y),this;var x=this._events[y];if(x.fn)x.fn===m&&(!p||x.once)&&(!h||x.context===h)&&o(this,y);else{for(var T=0,C=[],E=x.length;T<E;T++)(x[T].fn!==m||p&&!x[T].once||h&&x[T].context!==h)&&C.push(x[T]);C.length?this._events[y]=C.length===1?C[0]:C:o(this,y)}return this},c.prototype.removeAllListeners=function(f){var m;return f?(m=e?e+f:f,this._events[m]&&o(this,m)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,i.exports=c},62270:(i,g,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82590),v=function(u,o,c,l){for(var f=u[0],m=1;m<u.length;m++){var h=u[m];a(h,f,o,c,l),f=h}return u};i.exports=v},61148:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6124),v=function(u,o,c,l,f){return a(u,"angle",o,c,l,f)};i.exports=v},22015:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){for(var u=0;u<e.length;u++){var o=e[u];a.call(v,o)}return e};i.exports=g},31060:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){v===void 0&&(v=0);for(var u=v;u<e.length;u++){var o=e[u],c=!0;for(var l in a)o[l]!==a[l]&&(c=!1);if(c)return o}return null};i.exports=g},52367:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){v===void 0&&(v=0);for(var u=v;u<e.length;u++){var o=e[u],c=!0;for(var l in a)o[l]!==a[l]&&(c=!1);if(c)return o}return null};i.exports=g},12673:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40327),v=e(84093),u=e(72632),o=e(72283),c=e(71030),l=new c({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1).setOrigin(0,0),f=function(m,h){h===void 0&&(h={});var p=h.hasOwnProperty("width"),y=h.hasOwnProperty("height"),x=u(h,"width",-1),T=u(h,"height",-1),C=u(h,"cellWidth",1),E=u(h,"cellHeight",C),A=u(h,"position",v.TOP_LEFT),w=u(h,"x",0),b=u(h,"y",0),I=0,R=0,N=x*C,F=T*E;l.setPosition(w,b),l.setSize(C,E);for(var P=0;P<m.length;P++)if(a(m[P],l,A),p&&x===-1)l.x+=C;else if(y&&T===-1)l.y+=E;else if(y&&!p){if(R+=E,l.y+=E,R===F&&(R=0,I+=C,l.y=b,l.x+=C,I===N))break}else if(I+=C,l.x+=C,I===N&&(I=0,R+=E,l.x=w,l.y+=E,R===F))break;return m};i.exports=f},691:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6124),v=function(u,o,c,l,f){return a(u,"alpha",o,c,l,f)};i.exports=v},3877:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6124),v=function(u,o,c,l,f){return a(u,"x",o,c,l,f)};i.exports=v},71020:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6124),v=function(u,o,c,l,f,m,h){return c==null&&(c=o),a(u,"x",o,l,m,h),a(u,"y",c,f,m,h)};i.exports=v},28970:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6124),v=function(u,o,c,l,f){return a(u,"y",o,c,l,f)};i.exports=v},82249:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){v===void 0&&(v=0),u===void 0&&(u=6.28);for(var o=v,c=(u-v)/e.length,l=a.x,f=a.y,m=a.radius,h=0;h<e.length;h++)e[h].x=l+m*Math.cos(o),e[h].y=f+m*Math.sin(o),o+=c;return e};i.exports=g},30285:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){v===void 0&&(v=0),u===void 0&&(u=6.28);for(var o=v,c=(u-v)/e.length,l=a.width/2,f=a.height/2,m=0;m<e.length;m++)e[m].x=a.x+l*Math.cos(o),e[m].y=a.y+f*Math.sin(o),o+=c;return e};i.exports=g},61557:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8570),v=function(u,o){for(var c=a(o,u.length),l=0;l<u.length;l++){var f=u[l],m=c[l];f.x=m.x,f.y=m.y}return u};i.exports=v},63549:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40053),v=e(77640),u=e(38487),o=function(c,l,f){f===void 0&&(f=0);var m=a(l,!1,c.length);f>0?v(m,f):f<0&&u(m,Math.abs(f));for(var h=0;h<c.length;h++)c[h].x=m[h].x,c[h].y=m[h].y;return c};i.exports=o},51629:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(58813),v=function(u,o,c){var l=a({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},c),f=a({x1:o.x2,y1:o.y2,x2:o.x3,y2:o.y3},c),m=a({x1:o.x3,y1:o.y3,x2:o.x1,y2:o.y1},c);l.pop(),f.pop(),m.pop(),l=l.concat(f,m);for(var h=l.length/u.length,p=0,y=0;y<u.length;y++){var x=u[y],T=l[Math.floor(p)];x.x=T.x,x.y=T.y,p+=h}return u};i.exports=v},1045:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){for(var u=0;u<e.length;u++){var o=e[u];o.anims&&o.anims.play(a,v)}return e};i.exports=g},6124:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o,c){u===void 0&&(u=0),o===void 0&&(o=0),c===void 0&&(c=1);var l,f=0,m=e.length;if(c===1)for(l=o;l<m;l++)e[l][a]+=v+f*u,f++;else for(l=o;l>=0;l--)e[l][a]+=v+f*u,f++;return e};i.exports=g},23646:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o,c){u===void 0&&(u=0),o===void 0&&(o=0),c===void 0&&(c=1);var l,f=0,m=e.length;if(c===1)for(l=o;l<m;l++)e[l][a]=v+f*u,f++;else for(l=o;l>=0;l--)e[l][a]=v+f*u,f++;return e};i.exports=g},4392:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30977),v=function(u,o){for(var c=0;c<u.length;c++)a(o,u[c]);return u};i.exports=v},94985:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72006),v=function(u,o){for(var c=0;c<u.length;c++)a(o,u[c]);return u};i.exports=v},63305:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74077),v=function(u,o){for(var c=0;c<u.length;c++)a(o,u[c]);return u};i.exports=v},90739:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(30001),v=function(u,o){for(var c=0;c<u.length;c++)a(o,u[c]);return u};i.exports=v},91417:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99761),v=function(u,o){for(var c=0;c<u.length;c++)a(o,u[c]);return u};i.exports=v},26182:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6124),v=function(u,o,c,l,f){return a(u,"rotation",o,c,l,f)};i.exports=v},87299:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72395),v=e(53996),u=function(o,c,l){for(var f=c.x,m=c.y,h=0;h<o.length;h++){var p=o[h];a(p,f,m,l,Math.max(1,v(p.x,p.y,f,m)))}return o};i.exports=u},92194:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72395),v=function(u,o,c,l){var f=o.x,m=o.y;if(l===0)return u;for(var h=0;h<u.length;h++)a(u[h],f,m,c,l);return u};i.exports=v},30363:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6124),v=function(u,o,c,l,f){return a(u,"scaleX",o,c,l,f)};i.exports=v},51449:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6124),v=function(u,o,c,l,f,m,h){return c==null&&(c=o),a(u,"scaleX",o,l,m,h),a(u,"scaleY",c,f,m,h)};i.exports=v},64895:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6124),v=function(u,o,c,l,f){return a(u,"scaleY",o,c,l,f)};i.exports=v},30329:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f){return a(u,"alpha",o,c,l,f)};i.exports=v},43954:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l){return a(u,"blendMode",o,0,c,l)};i.exports=v},70688:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f){return a(u,"depth",o,c,l,f)};i.exports=v},8314:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){for(var u=0;u<e.length;u++)e[u].setInteractive(a,v);return e};i.exports=g},12894:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f,m,h){return c==null&&(c=o),a(u,"originX",o,l,m,h),a(u,"originY",c,f,m,h),u.forEach(function(p){p.updateDisplayOrigin()}),u};i.exports=v},38767:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f){return a(u,"rotation",o,c,l,f)};i.exports=v},18584:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f,m,h){return c==null&&(c=o),a(u,"scaleX",o,l,m,h),a(u,"scaleY",c,f,m,h)};i.exports=v},17381:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f){return a(u,"scaleX",o,c,l,f)};i.exports=v},74370:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f){return a(u,"scaleY",o,c,l,f)};i.exports=v},27773:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f,m,h){return c==null&&(c=o),a(u,"scrollFactorX",o,l,m,h),a(u,"scrollFactorY",c,f,m,h)};i.exports=v},75257:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f){return a(u,"scrollFactorX",o,c,l,f)};i.exports=v},54512:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f){return a(u,"scrollFactorY",o,c,l,f)};i.exports=v},69423:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o){for(var c=0;c<e.length;c++)e[c].setTint(a,v,u,o);return e};i.exports=g},58291:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l){return a(u,"visible",o,0,c,l)};i.exports=v},94833:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f){return a(u,"x",o,c,l,f)};i.exports=v},14284:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f,m,h){return c==null&&(c=o),a(u,"x",o,l,m,h),a(u,"y",c,f,m,h)};i.exports=v},96574:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23646),v=function(u,o,c,l,f){return a(u,"y",o,c,l,f)};i.exports=v},74086:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=function(u,o,c,l,f){l===void 0&&(l=0),f===void 0&&(f=new a);var m,h,p=u.length;if(p===1)m=u[0].x,h=u[0].y,u[0].x=o,u[0].y=c;else{var y=1,x=0;l===0&&(x=p-1,y=p-2),m=u[x].x,h=u[x].y,u[x].x=o,u[x].y=c;for(var T=0;T<p;T++)if(!(y>=p||y===-1)){var C=u[y],E=C.x,A=C.y;C.x=m,C.y=h,m=E,h=A,l===0?y--:y++}}return f.x=m,f.y=h,f};i.exports=v},86347:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18592),v=function(u){return a(u)};i.exports=v},1558:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(5514),v=function(u,o,c,l,f){f===void 0&&(f=!1);var m=Math.abs(l-c)/u.length,h;if(f)for(h=0;h<u.length;h++)u[h][o]+=a(h*m,c,l);else for(h=0;h<u.length;h++)u[h][o]=a(h*m,c,l);return u};i.exports=v},9938:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87736),v=function(u,o,c,l,f){f===void 0&&(f=!1);var m=Math.abs(l-c)/u.length,h;if(f)for(h=0;h<u.length;h++)u[h][o]+=a(h*m,c,l);else for(h=0;h<u.length;h++)u[h][o]=a(h*m,c,l);return u};i.exports=v},71060:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o){if(o===void 0&&(o=!1),e.length===0)return e;if(e.length===1)return o?e[0][a]+=(u+v)/2:e[0][a]=(u+v)/2,e;var c=Math.abs(u-v)/(e.length-1),l;if(o)for(l=0;l<e.length;l++)e[l][a]+=l*c+v;else for(l=0;l<e.length;l++)e[l][a]=l*c+v;return e};i.exports=g},11207:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){for(var a=0;a<e.length;a++)e[a].visible=!e[a].visible;return e};i.exports=g},24404:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1071),v=function(u,o,c){c===void 0&&(c=0);for(var l=0;l<u.length;l++){var f=u[l];f.x=a(f.x,o.left-c,o.right+c),f.y=a(f.y,o.top-c,o.bottom+c)}return u};i.exports=v},83979:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AlignTo:e(62270),Angle:e(61148),Call:e(22015),GetFirst:e(31060),GetLast:e(52367),GridAlign:e(12673),IncAlpha:e(691),IncX:e(3877),IncXY:e(71020),IncY:e(28970),PlaceOnCircle:e(82249),PlaceOnEllipse:e(30285),PlaceOnLine:e(61557),PlaceOnRectangle:e(63549),PlaceOnTriangle:e(51629),PlayAnimation:e(1045),PropertyValueInc:e(6124),PropertyValueSet:e(23646),RandomCircle:e(4392),RandomEllipse:e(94985),RandomLine:e(63305),RandomRectangle:e(90739),RandomTriangle:e(91417),Rotate:e(26182),RotateAround:e(87299),RotateAroundDistance:e(92194),ScaleX:e(30363),ScaleXY:e(51449),ScaleY:e(64895),SetAlpha:e(30329),SetBlendMode:e(43954),SetDepth:e(70688),SetHitArea:e(8314),SetOrigin:e(12894),SetRotation:e(38767),SetScale:e(18584),SetScaleX:e(17381),SetScaleY:e(74370),SetScrollFactor:e(27773),SetScrollFactorX:e(75257),SetScrollFactorY:e(54512),SetTint:e(69423),SetVisible:e(58291),SetX:e(94833),SetXY:e(14284),SetY:e(96574),ShiftPosition:e(74086),Shuffle:e(86347),SmootherStep:e(9938),SmoothStep:e(1558),Spread:e(71060),ToggleVisible:e(11207),WrapInRectangle:e(24404)}},85463:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=e(56694),u=e(16938),o=e(2406),c=e(71519),l=e(10850),f=e(28834),m=new v({initialize:function(p,y,x){this.manager=p,this.key=y,this.type="frame",this.frames=this.getFrames(p.textureManager,l(x,"frames",[]),l(x,"defaultTextureKey",null),l(x,"sortFrames",!0)),this.frameRate=l(x,"frameRate",null),this.duration=l(x,"duration",null),this.msPerFrame,this.skipMissedFrames=l(x,"skipMissedFrames",!0),this.delay=l(x,"delay",0),this.repeat=l(x,"repeat",0),this.repeatDelay=l(x,"repeatDelay",0),this.yoyo=l(x,"yoyo",!1),this.showBeforeDelay=l(x,"showBeforeDelay",!1),this.showOnStart=l(x,"showOnStart",!1),this.hideOnComplete=l(x,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(u.PAUSE_ALL,this.pause,this),this.manager.on(u.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(h,p,y,x){y===null&&x===null?(h.frameRate=24,h.duration=24/p*1e3):y&&x===null?(h.duration=y,h.frameRate=p/(y/1e3)):(h.frameRate=x,h.duration=p/x*1e3),h.msPerFrame=1e3/h.frameRate},addFrame:function(h){return this.addFrameAt(this.frames.length,h)},addFrameAt:function(h,p){var y=this.getFrames(this.manager.textureManager,p);if(y.length>0){if(h===0)this.frames=y.concat(this.frames);else if(h===this.frames.length)this.frames=this.frames.concat(y);else{var x=this.frames.slice(0,h),T=this.frames.slice(h);this.frames=x.concat(y,T)}this.updateFrameSequence()}return this},checkFrame:function(h){return h>=0&&h<this.frames.length},getFirstTick:function(h){h.accumulator=0,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameAt:function(h){return this.frames[h]},getFrames:function(h,p,y,x){x===void 0&&(x=!0);var T=[],C,E,A=1,w,b;if(typeof p=="string"){if(b=p,!h.exists(b))return console.warn('Texture "%s" not found',b),T;var I=h.get(b),R=I.getFrameNames();x&&f(R),p=[],R.forEach(function(L){p.push({key:b,frame:L})})}if(!Array.isArray(p)||p.length===0)return T;for(w=0;w<p.length;w++){var N=p[w],F=l(N,"key",y);if(F){var P=l(N,"frame",0),O=h.getFrame(F,P);if(!O){console.warn('Texture "%s" not found',F);continue}E=new c(F,P,A,O),E.duration=l(N,"duration",0),E.isFirst=!C,C&&(C.nextFrame=E,E.prevFrame=C),T.push(E),C=E,A++}}if(T.length>0){E.isLast=!0,E.nextFrame=T[0],T[0].prevFrame=E;var M=1/(T.length-1);for(w=0;w<T.length;w++)T[w].progress=w*M}return T},getNextTick:function(h){h.accumulator-=h.nextTick,h.nextTick=h.msPerFrame+h.currentFrame.duration},getFrameByProgress:function(h){return h=a(h,0,1),o(h,this.frames,"progress")},nextFrame:function(h){var p=h.currentFrame;p.isLast?h.yoyo?this.handleYoyoFrame(h,!1):h.repeatCounter>0?h.inReverse&&h.forward?h.forward=!1:this.repeatAnimation(h):h.complete():this.updateAndGetNextTick(h,p.nextFrame)},handleYoyoFrame:function(h,p){if(p||(p=!1),h.inReverse===!p&&h.repeatCounter>0){(h.repeatDelay===0||h.pendingRepeat)&&(h.forward=p),this.repeatAnimation(h);return}if(h.inReverse!==p&&h.repeatCounter===0){h.complete();return}h.forward=p;var y=p?h.currentFrame.nextFrame:h.currentFrame.prevFrame;this.updateAndGetNextTick(h,y)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(h){var p=h.currentFrame;p.isFirst?h.yoyo?this.handleYoyoFrame(h,!0):h.repeatCounter>0?h.inReverse&&!h.forward?this.repeatAnimation(h):(h.forward=!0,this.repeatAnimation(h)):h.complete():this.updateAndGetNextTick(h,p.prevFrame)},updateAndGetNextTick:function(h,p){h.setCurrentFrame(p),this.getNextTick(h)},removeFrame:function(h){var p=this.frames.indexOf(h);return p!==-1&&this.removeFrameAt(p),this},removeFrameAt:function(h){return this.frames.splice(h,1),this.updateFrameSequence(),this},repeatAnimation:function(h){if(h._pendingStop===2){if(h._pendingStopValue===0)return h.stop();h._pendingStopValue--}h.repeatDelay>0&&!h.pendingRepeat?(h.pendingRepeat=!0,h.accumulator-=h.nextTick,h.nextTick+=h.repeatDelay):(h.repeatCounter--,h.forward?h.setCurrentFrame(h.currentFrame.nextFrame):h.setCurrentFrame(h.currentFrame.prevFrame),h.isPlaying&&(this.getNextTick(h),h.handleRepeat()))},toJSON:function(){var h={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(p){h.frames.push(p.toJSON())}),h},updateFrameSequence:function(){for(var h=this.frames.length,p=1/(h-1),y,x=0;x<h;x++)y=this.frames[x],y.index=x+1,y.isFirst=!1,y.isLast=!1,y.progress=x*p,x===0?(y.isFirst=!0,h===1?(y.isLast=!0,y.nextFrame=y,y.prevFrame=y):(y.isLast=!1,y.prevFrame=this.frames[h-1],y.nextFrame=this.frames[x+1])):x===h-1&&h>1?(y.isLast=!0,y.prevFrame=this.frames[h-2],y.nextFrame=this.frames[0]):h>1&&(y.prevFrame=this.frames[x-1],y.nextFrame=this.frames[x+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(u.PAUSE_ALL,this.pause,this),this.manager.off(u.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var h=0;h<this.frames.length;h++)this.frames[h].destroy();this.frames=[],this.manager=null}});i.exports=m},71519:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c,l,f,m){m===void 0&&(m=!1),this.textureKey=o,this.textureFrame=c,this.index=l,this.frame=f,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=m},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});i.exports=v},90249:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85463),v=e(56694),u=e(33885),o=e(6659),c=e(16938),l=e(97081),f=e(72632),m=e(10850),h=e(83392),p=e(13401),y=e(76400),x=new v({Extends:o,initialize:function(C){o.call(this),this.game=C,this.textureManager=null,this.globalTimeScale=1,this.anims=new u,this.mixes=new u,this.paused=!1,this.name="AnimationManager",C.events.once(l.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(l.DESTROY,this.destroy,this)},addMix:function(T,C,E){var A=this.anims,w=this.mixes,b=typeof T=="string"?T:T.key,I=typeof C=="string"?C:C.key;if(A.has(b)&&A.has(I)){var R=w.get(b);R||(R={}),R[I]=E,w.set(b,R)}return this},removeMix:function(T,C){var E=this.mixes,A=typeof T=="string"?T:T.key,w=E.get(A);if(w)if(C){var b=typeof C=="string"?C:C.key;w.hasOwnProperty(b)&&delete w[b]}else C||E.delete(A);return this},getMix:function(T,C){var E=this.mixes,A=typeof T=="string"?T:T.key,w=typeof C=="string"?C:C.key,b=E.get(A);return b&&b.hasOwnProperty(w)?b[w]:0},add:function(T,C){return this.anims.has(T)?(console.warn("Animation key exists: "+T),this):(C.key=T,this.anims.set(T,C),this.emit(c.ADD_ANIMATION,T,C),this)},exists:function(T){return this.anims.has(T)},createFromAseprite:function(T,C,E){var A=[],w=this.game.cache.json.get(T);if(!w)return console.warn("No Aseprite data found for: "+T),A;var b=this,I=m(w,"meta",null),R=m(w,"frames",null);if(I&&R){var N=m(I,"frameTags",[]);N.forEach(function(F){var P=[],O=f(F,"name",null),M=f(F,"from",0),L=f(F,"to",0),k=f(F,"direction","forward");if(O&&(!C||C&&C.indexOf(O)>-1)){for(var V=0,W=M;W<=L;W++){var K=W.toString(),B=R[K];if(B){var G=f(B,"duration",h.MAX_SAFE_INTEGER);P.push({key:T,frame:K,duration:G}),V+=G}}var D=V/P.length;P.forEach(function(H){H.duration-=D}),k==="reverse"&&(P=P.reverse());var $={key:O,frames:P,duration:V,yoyo:k==="pingpong"},z;E?E.anims&&(z=E.anims.create($)):z=b.create($),z&&A.push(z)}})}return A},create:function(T){var C=T.key,E=!1;return C&&(E=this.get(C),E?console.warn("AnimationManager key already exists: "+C):(E=new a(this,C,T),this.anims.set(C,E),this.emit(c.ADD_ANIMATION,C,E))),E},fromJSON:function(T,C){C===void 0&&(C=!1),C&&this.anims.clear(),typeof T=="string"&&(T=JSON.parse(T));var E=[];if(T.hasOwnProperty("anims")&&Array.isArray(T.anims)){for(var A=0;A<T.anims.length;A++)E.push(this.create(T.anims[A]));T.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=T.globalTimeScale)}else T.hasOwnProperty("key")&&T.type==="frame"&&E.push(this.create(T));return E},generateFrameNames:function(T,C){var E=m(C,"prefix",""),A=m(C,"start",0),w=m(C,"end",0),b=m(C,"suffix",""),I=m(C,"zeroPad",0),R=m(C,"outputArray",[]),N=m(C,"frames",!1);if(!this.textureManager.exists(T))return console.warn('Texture "%s" not found',T),R;var F=this.textureManager.get(T);if(!F)return R;var P;if(C)for(N||(N=p(A,w)),P=0;P<N.length;P++){var O=E+y(N[P],I,"0",1)+b;F.has(O)?R.push({key:T,frame:O}):console.warn('Frame "%s" not found in texture "%s"',O,T)}else for(N=F.getFrameNames(),P=0;P<N.length;P++)R.push({key:T,frame:N[P]});return R},generateFrameNumbers:function(T,C){var E=m(C,"start",0),A=m(C,"end",-1),w=m(C,"first",!1),b=m(C,"outputArray",[]),I=m(C,"frames",!1);if(!this.textureManager.exists(T))return console.warn('Texture "%s" not found',T),b;var R=this.textureManager.get(T);if(!R)return b;w&&R.has(w)&&b.push({key:T,frame:w}),I||(A===-1&&(A=R.frameTotal-2),I=p(E,A));for(var N=0;N<I.length;N++){var F=I[N];R.has(F)?b.push({key:T,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,T)}return b},get:function(T){return this.anims.get(T)},getAnimsFromTexture:function(T){for(var C=this.textureManager.get(T),E=C.key,A=this.anims.getArray(),w=[],b=0;b<A.length;b++)for(var I=A[b],R=I.frames,N=0;N<R.length;N++)if(R[N].textureKey===E){w.push(I.key);break}return w},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(c.PAUSE_ALL)),this},play:function(T,C){Array.isArray(C)||(C=[C]);for(var E=0;E<C.length;E++)C[E].anims.play(T);return this},staggerPlay:function(T,C,E,A){E===void 0&&(E=0),A===void 0&&(A=!0),Array.isArray(C)||(C=[C]);var w=C.length;A||w--;for(var b=0;b<C.length;b++){var I=E<0?Math.abs(E)*(w-b):E*b;C[b].anims.playAfterDelay(T,I)}return this},remove:function(T){var C=this.get(T);return C&&(this.emit(c.REMOVE_ANIMATION,T,C),this.anims.delete(T),this.removeMix(T)),C},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(c.RESUME_ALL)),this},toJSON:function(T){var C={anims:[],globalTimeScale:this.globalTimeScale};return T!==void 0&&T!==""?C.anims.push(this.anims.get(T).toJSON()):this.anims.each(function(E,A){C.anims.push(A.toJSON())}),C},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});i.exports=x},16569:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(33885),u=e(72632),o=e(16938),c=e(85463),l=new a({initialize:function(m){this.parent=m,this.animationManager=m.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(f){var m=this.parent;if(f===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,m;Array.isArray(f)||(f=[f]);for(var h=0;h<f.length;h++){var p=f[h];this.nextAnim?this.nextAnimsQueue.push(p):this.nextAnim=p}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(f){this.isPlaying&&this.stop();var m=this.animationManager,h=typeof f=="string"?f:u(f,"key",null),p=this.exists(h)?this.get(h):m.get(h);if(!p)console.warn("Missing animation: "+h);else{this.currentAnim=p;var y=p.getTotalFrames(),x=u(f,"frameRate",p.frameRate),T=u(f,"duration",p.duration);p.calculateDuration(this,y,T,x),this.delay=u(f,"delay",p.delay),this.repeat=u(f,"repeat",p.repeat),this.repeatDelay=u(f,"repeatDelay",p.repeatDelay),this.yoyo=u(f,"yoyo",p.yoyo),this.showBeforeDelay=u(f,"showBeforeDelay",p.showBeforeDelay),this.showOnStart=u(f,"showOnStart",p.showOnStart),this.hideOnComplete=u(f,"hideOnComplete",p.hideOnComplete),this.skipMissedFrames=u(f,"skipMissedFrames",p.skipMissedFrames),this.timeScale=u(f,"timeScale",this.timeScale);var C=u(f,"startFrame",0);C>p.getTotalFrames()&&(C=0);var E=p.frames[C];C===0&&!this.forward&&(E=p.getLastFrame()),this.currentFrame=E}return this.parent},pause:function(f){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),f!==void 0&&this.setCurrentFrame(f),this.parent},resume:function(f){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),f!==void 0&&this.setCurrentFrame(f),this.parent},playAfterDelay:function(f,m){if(!this.isPlaying)this.delayCounter=m,this.play(f,!0);else{var h=this.nextAnim,p=this.nextAnimsQueue;h&&p.unshift(h),this.nextAnim=f,this._pendingStop=1,this._pendingStopValue=m}return this.parent},playAfterRepeat:function(f,m){if(m===void 0&&(m=1),!this.isPlaying)this.play(f);else{var h=this.nextAnim,p=this.nextAnimsQueue;h&&p.unshift(h),this.repeatCounter!==-1&&m>this.repeatCounter&&(m=this.repeatCounter),this.nextAnim=f,this._pendingStop=2,this._pendingStopValue=m}return this.parent},play:function(f,m){m===void 0&&(m=!1);var h=this.currentAnim,p=this.parent,y=typeof f=="string"?f:f.key;if(m&&this.isPlaying&&h.key===y)return p;if(h&&this.isPlaying){var x=this.animationManager.getMix(h.key,f);if(x>0)return this.playAfterDelay(f,x)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(f)},playReverse:function(f,m){m===void 0&&(m=!1);var h=typeof f=="string"?f:f.key;return m&&this.isPlaying&&this.currentAnim.key===h?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(f))},startAnimation:function(f){this.load(f);var m=this.currentAnim,h=this.parent;return m&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,m.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),h},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(f,m){var h=this.currentAnim;if(h){var p=this.currentFrame,y=this.parent,x=p.textureFrame;y.emit(f,h,p,y,x),m&&y.emit(m+h.key,h,p,y,x)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var f=this.currentFrame;if(!f)return 0;var m=f.progress;return this.inReverse&&(m*=-1),m},setProgress:function(f){return this.forward||(f=1-f),this.setCurrentFrame(this.currentAnim.getFrameByProgress(f)),this.parent},setRepeat:function(f){return this.repeatCounter=f===-1?Number.MAX_VALUE:f,this.parent},globalRemove:function(f,m){m===void 0&&(m=this.currentAnim),this.isPlaying&&m.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(f,m){f===void 0&&(f=!1),m===void 0&&(m=!1);var h=this.currentAnim,p=this.parent;return h?(m&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),h.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!f,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(h.frames[0]),this.parent):p},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var f=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(f)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var f=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(f)}return this.parent},stopAfterDelay:function(f){return this._pendingStop=1,this._pendingStopValue=f,this.parent},stopAfterRepeat:function(f){return f===void 0&&(f=1),this.repeatCounter!==-1&&f>this.repeatCounter&&(f=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=f,this.parent},stopOnFrame:function(f){return this._pendingStop=3,this._pendingStopValue=f,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(f,m){var h=this.currentAnim;if(!(!this.isPlaying||!h||h.paused)){if(this.accumulator+=m*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=m,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?h.nextFrame(this):h.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var p=0;do this.forward?h.nextFrame(this):h.previousFrame(this),p++;while(this.isPlaying&&this.accumulator>this.nextTick&&p<60)}}},setCurrentFrame:function(f){var m=this.parent;return this.currentFrame=f,m.texture=f.frame.texture,m.frame=f.frame,m.isCropped&&m.frame.updateCropUVs(m._crop,m.flipX,m.flipY),f.setAlpha&&(m.alpha=f.alpha),m.setSizeToFrame(),m._originComponent&&(f.frame.customPivot?m.setOrigin(f.frame.pivotX,f.frame.pivotY):m.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===f&&this.stop()),m},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(f){return this.anims?this.anims.get(f):null},exists:function(f){return this.anims?this.anims.has(f):!1},create:function(f){var m=f.key,h=!1;return m&&(h=this.get(m),h?console.warn("Animation key already exists: "+m):(h=new c(this,m,f),this.anims||(this.anims=new v),this.anims.set(m,h))),h},createFromAseprite:function(f,m){return this.animationManager.createFromAseprite(f,m,this.parent)},generateFrameNames:function(f,m){return this.animationManager.generateFrameNames(f,m)},generateFrameNumbers:function(f,m){return this.animationManager.generateFrameNumbers(f,m)},remove:function(f){var m=this.get(f);return m&&(this.currentAnim===m&&this.stop(),this.anims.delete(f)),m},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});i.exports=l},44509:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="add"},84563:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationcomplete"},61586:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationcomplete-"},72175:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationrepeat"},568:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationrestart"},37690:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationstart"},58525:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationstop"},5243:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="animationupdate"},10598:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pauseall"},4860:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="remove"},31865:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resumeall"},16938:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADD_ANIMATION:e(44509),ANIMATION_COMPLETE:e(84563),ANIMATION_COMPLETE_KEY:e(61586),ANIMATION_REPEAT:e(72175),ANIMATION_RESTART:e(568),ANIMATION_START:e(37690),ANIMATION_STOP:e(58525),ANIMATION_UPDATE:e(5243),PAUSE_ALL:e(10598),REMOVE_ANIMATION:e(4860),RESUME_ALL:e(31865)}},13517:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Animation:e(85463),AnimationFrame:e(71519),AnimationManager:e(90249),AnimationState:e(16569),Events:e(16938)}},23740:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(33885),u=e(6659),o=e(69773),c=new a({initialize:function(){this.entries=new v,this.events=new u},add:function(l,f){return this.entries.set(l,f),this.events.emit(o.ADD,this,l,f),this},has:function(l){return this.entries.has(l)},exists:function(l){return this.entries.has(l)},get:function(l){return this.entries.get(l)},remove:function(l){var f=this.get(l);return f&&(this.entries.delete(l),this.events.emit(o.REMOVE,this,l,f.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});i.exports=c},43474:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23740),v=e(56694),u=e(97081),o=new v({initialize:function(l){this.game=l,this.binary=new a,this.bitmapFont=new a,this.json=new a,this.physics=new a,this.shader=new a,this.audio=new a,this.video=new a,this.text=new a,this.html=new a,this.obj=new a,this.tilemap=new a,this.xml=new a,this.custom={},this.game.events.once(u.DESTROY,this.destroy,this)},addCustom:function(c){return this.custom.hasOwnProperty(c)||(this.custom[c]=new a),this.custom[c]},destroy:function(){for(var c=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],l=0;l<c.length;l++)this[c[l]].destroy(),this[c[l]]=null;for(var f in this.custom)this.custom[f].destroy();this.custom=null,this.game=null}});i.exports=o},94762:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="add"},75968:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="remove"},69773:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADD:e(94762),REMOVE:e(75968)}},45820:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BaseCache:e(23740),CacheManager:e(43474),Events:e(69773)}},51052:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(75606),o=e(6659),c=e(89787),l=e(74118),f=e(69360),m=e(93222),h=e(93736),p=new a({Extends:o,Mixins:[v.AlphaSingle,v.Visible],initialize:function(x,T,C,E){x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=0),E===void 0&&(E=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new l,this.dirty=!0,this._x=x,this._y=T,this._width=C,this._height=E,this._bounds=new l,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new f,this.transparent=!0,this.backgroundColor=m("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new h(C/2,E/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(y){this.renderList.push(y)},setOrigin:function(y,x){return y===void 0&&(y=.5),x===void 0&&(x=y),this.originX=y,this.originY=x,this},getScroll:function(y,x,T){T===void 0&&(T=new h);var C=this.width*.5,E=this.height*.5;return T.x=y-C,T.y=x-E,this.useBounds&&(T.x=this.clampX(T.x),T.y=this.clampY(T.y)),T},centerOnX:function(y){var x=this.width*.5;return this.midPoint.x=y,this.scrollX=y-x,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(y){var x=this.height*.5;return this.midPoint.y=y,this.scrollY=y-x,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(y,x){return this.centerOnX(y),this.centerOnY(x),this},centerToBounds:function(){if(this.useBounds){var y=this._bounds,x=this.width*.5,T=this.height*.5;this.midPoint.set(y.centerX,y.centerY),this.scrollX=y.centerX-x,this.scrollY=y.centerY-T}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(y){if(this.disableCull)return y;var x=this.matrix.matrix,T=x[0],C=x[1],E=x[2],A=x[3],w=T*A-C*E;if(!w)return y;var b=x[4],I=x[5],R=this.scrollX,N=this.scrollY,F=this.width,P=this.height,O=this.y,M=O+P,L=this.x,k=L+F,V=this.culledObjects,W=y.length;w=1/w,V.length=0;for(var K=0;K<W;++K){var B=y[K];if(!B.hasOwnProperty("width")||B.parentContainer){V.push(B);continue}var G=B.width,D=B.height,$=B.x-R*B.scrollFactorX-G*B.originX,z=B.y-N*B.scrollFactorY-D*B.originY,H=$*T+z*E+b,Y=$*C+z*A+I,Z=($+G)*T+(z+D)*E+b,Q=($+G)*C+(z+D)*A+I;Z>L&&H<k&&Q>O&&Y<M&&V.push(B)}return V},getWorldPoint:function(y,x,T){T===void 0&&(T=new h);var C=this.matrix.matrix,E=C[0],A=C[1],w=C[2],b=C[3],I=C[4],R=C[5],N=E*b-A*w;if(!N)return T.x=y,T.y=x,T;N=1/N;var F=b*N,P=-A*N,O=-w*N,M=E*N,L=(w*R-b*I)*N,k=(A*I-E*R)*N,V=Math.cos(this.rotation),W=Math.sin(this.rotation),K=this.zoomX,B=this.zoomY,G=this.scrollX,D=this.scrollY,$=y+(G*V-D*W)*K,z=x+(G*W+D*V)*B;return T.x=$*F+z*O+L,T.y=$*P+z*M+k,T},ignore:function(y){var x=this.id;Array.isArray(y)||(y=[y]);for(var T=0;T<y.length;T++){var C=y[T];Array.isArray(C)?this.ignore(C):C.isParent?this.ignore(C.getChildren()):C.cameraFilter|=x}return this},preRender:function(){this.renderList.length=0;var y=this.width,x=this.height,T=y*.5,C=x*.5,E=this.zoomX,A=this.zoomY,w=this.matrix,b=y*this.originX,I=x*this.originY,R=this.scrollX,N=this.scrollY;this.useBounds&&(R=this.clampX(R),N=this.clampY(N)),this.roundPixels&&(b=Math.round(b),I=Math.round(I)),this.scrollX=R,this.scrollY=N;var F=R+T,P=N+C;this.midPoint.set(F,P);var O=y/E,M=x/A;this.worldView.setTo(F-O/2,P-M/2,O,M),w.applyITRS(this.x+b,this.y+I,this.rotation,E,A),w.translate(-b,-I)},clampX:function(y){var x=this._bounds,T=this.displayWidth,C=x.x+(T-this.width)/2,E=Math.max(C,C+x.width-T);return y<C?y=C:y>E&&(y=E),y},clampY:function(y){var x=this._bounds,T=this.displayHeight,C=x.y+(T-this.height)/2,E=Math.max(C,C+x.height-T);return y<C?y=C:y>E&&(y=E),y},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(y){return y===void 0&&(y=0),this.rotation=u(y),this},setBackgroundColor:function(y){return y===void 0&&(y="rgba(0,0,0,0)"),this.backgroundColor=m(y),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(y,x,T,C,E){return E===void 0&&(E=!1),this._bounds.setTo(y,x,T,C),this.dirty=!0,this.useBounds=!0,E?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(y){y===void 0&&(y=new l);var x=this._bounds;return y.setTo(x.x,x.y,x.width,x.height),y},setName:function(y){return y===void 0&&(y=""),this.name=y,this},setPosition:function(y,x){return x===void 0&&(x=y),this.x=y,this.y=x,this},setRotation:function(y){return y===void 0&&(y=0),this.rotation=y,this},setRoundPixels:function(y){return this.roundPixels=y,this},setScene:function(y,x){x===void 0&&(x=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=y,this.isSceneCamera=x;var T=y.sys;return this.sceneManager=T.game.scene,this.scaleManager=T.scale,this.cameraManager=T.cameras,this.updateSystem(),this},setScroll:function(y,x){return x===void 0&&(x=y),this.scrollX=y,this.scrollY=x,this},setSize:function(y,x){return x===void 0&&(x=y),this.width=y,this.height=x,this},setViewport:function(y,x,T,C){return this.x=y,this.y=x,this.width=T,this.height=C,this},setZoom:function(y,x){return y===void 0&&(y=1),x===void 0&&(x=y),y===0&&(y=.001),x===0&&(x=.001),this.zoomX=y,this.zoomY=x,this},setMask:function(y,x){return x===void 0&&(x=!0),this.mask=y,this._maskCamera=x?this.cameraManager.default:this,this},clearMask:function(y){return y===void 0&&(y=!1),y&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var y={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(y.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),y},update:function(){},setIsSceneCamera:function(y){return this.isSceneCamera=y,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var y=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,x=this.sceneManager;y&&!this._customViewport?x.customViewports++:!y&&this._customViewport&&x.customViewports--,this.dirty=!0,this._customViewport=y}},destroy:function(){this.emit(c.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(y){this._x=y,this.updateSystem()}},y:{get:function(){return this._y},set:function(y){this._y=y,this.updateSystem()}},width:{get:function(){return this._width},set:function(y){this._width=y,this.updateSystem()}},height:{get:function(){return this._height},set:function(y){this._height=y,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(y){y!==this._scrollX&&(this._scrollX=y,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(y){y!==this._scrollY&&(this._scrollY=y,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(y){this._zoomX=y,this._zoomY=y,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(y){this._zoomX=y,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(y){this._zoomY=y,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(y){this._rotation=y,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});i.exports=p},47751:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(51052),v=e(79993),u=e(82897),o=e(56694),c=e(64937),l=e(53030),f=e(89787),m=e(42798),h=e(74118),p=e(93736),y=new o({Extends:a,Mixins:[c.PostPipeline],initialize:function(T,C,E,A){a.call(this,T,C,E,A),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new l.Fade(this),this.flashEffect=new l.Flash(this),this.shakeEffect=new l.Shake(this),this.panEffect=new l.Pan(this),this.rotateToEffect=new l.RotateTo(this),this.zoomEffect=new l.Zoom(this),this.lerp=new p(1,1),this.followOffset=new p,this.deadzone=null,this._follow=null},setDeadzone:function(x,T){if(x===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=x,this.deadzone.height=T):this.deadzone=new h(0,0,x,T),this._follow){var C=this.width/2,E=this.height/2,A=this._follow.x-this.followOffset.x,w=this._follow.y-this.followOffset.y;this.midPoint.set(A,w),this.scrollX=A-C,this.scrollY=w-E}v(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(x,T,C,E,A,w){return this.fadeEffect.start(!1,x,T,C,E,!0,A,w)},fadeOut:function(x,T,C,E,A,w){return this.fadeEffect.start(!0,x,T,C,E,!0,A,w)},fadeFrom:function(x,T,C,E,A,w,b){return this.fadeEffect.start(!1,x,T,C,E,A,w,b)},fade:function(x,T,C,E,A,w,b){return this.fadeEffect.start(!0,x,T,C,E,A,w,b)},flash:function(x,T,C,E,A,w,b){return this.flashEffect.start(x,T,C,E,A,w,b)},shake:function(x,T,C,E,A){return this.shakeEffect.start(x,T,C,E,A)},pan:function(x,T,C,E,A,w,b){return this.panEffect.start(x,T,C,E,A,w,b)},rotateTo:function(x,T,C,E,A,w,b){return this.rotateToEffect.start(x,T,C,E,A,w,b)},zoomTo:function(x,T,C,E,A,w){return this.zoomEffect.start(x,T,C,E,A,w)},preRender:function(){this.renderList.length=0;var x=this.width,T=this.height,C=x*.5,E=T*.5,A=this.zoom,w=this.matrix,b=x*this.originX,I=T*this.originY,R=this._follow,N=this.deadzone,F=this.scrollX,P=this.scrollY;N&&v(N,this.midPoint.x,this.midPoint.y);var O=!1;if(this.roundPixels&&(b=Math.floor(b),I=Math.floor(I)),R&&!this.panEffect.isRunning){var M=this.lerp,L=R.x-this.followOffset.x,k=R.y-this.followOffset.y;this.roundPixels&&(L=Math.floor(L),k=Math.floor(k)),N?(L<N.x?F=m(F,F-(N.x-L),M.x):L>N.right&&(F=m(F,F+(L-N.right),M.x)),k<N.y?P=m(P,P-(N.y-k),M.y):k>N.bottom&&(P=m(P,P+(k-N.bottom),M.y))):(F=m(F,L-b,M.x),P=m(P,k-I,M.y)),O=!0}this.useBounds&&(F=this.clampX(F),P=this.clampY(P)),this.roundPixels&&(F=Math.floor(F),P=Math.floor(P)),this.scrollX=F,this.scrollY=P;var V=F+C,W=P+E;this.midPoint.set(V,W);var K=x/A,B=T/A,G=V-K/2,D=W-B/2;this.roundPixels&&(G=Math.floor(G),D=Math.floor(D)),this.worldView.setTo(G,D,K,B),w.applyITRS(Math.floor(this.x+b),Math.floor(this.y+I),this.rotation,A,A),w.translate(-b,-I),this.shakeEffect.preRender(),O&&this.emit(f.FOLLOW_UPDATE,this,R)},setLerp:function(x,T){return x===void 0&&(x=1),T===void 0&&(T=x),this.lerp.set(x,T),this},setFollowOffset:function(x,T){return x===void 0&&(x=0),T===void 0&&(T=0),this.followOffset.set(x,T),this},startFollow:function(x,T,C,E,A,w){T===void 0&&(T=!1),C===void 0&&(C=1),E===void 0&&(E=C),A===void 0&&(A=0),w===void 0&&(w=A),this._follow=x,this.roundPixels=T,C=u(C,0,1),E=u(E,0,1),this.lerp.set(C,E),this.followOffset.set(A,w);var b=this.width/2,I=this.height/2,R=x.x-A,N=x.y-w;return this.midPoint.set(R,N),this.scrollX=R-b,this.scrollY=N-I,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(x,T){this.visible&&(this.rotateToEffect.update(x,T),this.panEffect.update(x,T),this.zoomEffect.update(x,T),this.shakeEffect.update(x,T),this.flashEffect.update(x,T),this.fadeEffect.update(x,T))},destroy:function(){this.resetFX(),a.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});i.exports=y},62382:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47751),v=e(56694),u=e(72632),o=e(91963),c=e(94287),l=e(40444),f=e(7599),m=new v({initialize:function(p){this.scene=p,this.systems=p.sys,this.roundPixels=p.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,p.sys.events.once(f.BOOT,this.boot,this),p.sys.events.on(f.START,this.start,this)},boot:function(){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new a(0,0,h.scale.width,h.scale.height).setScene(this.scene),h.game.scale.on(l.RESIZE,this.onResize,this),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){if(!this.main){var h=this.systems;h.settings.cameras?this.fromJSON(h.settings.cameras):this.add(),this.main=this.cameras[0]}var p=this.systems.events;p.on(f.UPDATE,this.update,this),p.once(f.SHUTDOWN,this.shutdown,this)},add:function(h,p,y,x,T,C){h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=this.scene.sys.scale.width),x===void 0&&(x=this.scene.sys.scale.height),T===void 0&&(T=!1),C===void 0&&(C="");var E=new a(h,p,y,x);return E.setName(C),E.setScene(this.scene),E.setRoundPixels(this.roundPixels),E.id=this.getNextID(),this.cameras.push(E),T&&(this.main=E),E},addExisting:function(h,p){p===void 0&&(p=!1);var y=this.cameras.indexOf(h);return y===-1?(h.id=this.getNextID(),h.setRoundPixels(this.roundPixels),this.cameras.push(h),p&&(this.main=h),h):null},getNextID:function(){for(var h=this.cameras,p=1,y=0;y<32;y++){for(var x=!1,T=0;T<h.length;T++){var C=h[T];if(C&&C.id===p){x=!0;continue}}if(x)p=p<<1;else return p}return 0},getTotal:function(h){h===void 0&&(h=!1);for(var p=0,y=this.cameras,x=0;x<y.length;x++){var T=y[x];(!h||h&&T.visible)&&p++}return p},fromJSON:function(h){Array.isArray(h)||(h=[h]);for(var p=this.scene.sys.scale.width,y=this.scene.sys.scale.height,x=0;x<h.length;x++){var T=h[x],C=u(T,"x",0),E=u(T,"y",0),A=u(T,"width",p),w=u(T,"height",y),b=this.add(C,E,A,w);b.name=u(T,"name",""),b.zoom=u(T,"zoom",1),b.rotation=u(T,"rotation",0),b.scrollX=u(T,"scrollX",0),b.scrollY=u(T,"scrollY",0),b.roundPixels=u(T,"roundPixels",!1),b.visible=u(T,"visible",!0);var I=u(T,"backgroundColor",!1);I&&b.setBackgroundColor(I);var R=u(T,"bounds",null);if(R){var N=u(R,"x",0),F=u(R,"y",0),P=u(R,"width",p),O=u(R,"height",y);b.setBounds(N,F,P,O)}}return this},getCamera:function(h){for(var p=this.cameras,y=0;y<p.length;y++)if(p[y].name===h)return p[y];return null},getCamerasBelowPointer:function(h){for(var p=this.cameras,y=h.x,x=h.y,T=[],C=0;C<p.length;C++){var E=p[C];E.visible&&E.inputEnabled&&c(E,y,x)&&T.unshift(E)}return T},remove:function(h,p){p===void 0&&(p=!0),Array.isArray(h)||(h=[h]);for(var y=0,x=this.cameras,T=0;T<h.length;T++){var C=x.indexOf(h[T]);C!==-1&&(p?x[C].destroy():x[C].renderList=[],x.splice(C,1),y++)}return!this.main&&x[0]&&(this.main=x[0]),y},render:function(h,p){for(var y=this.scene,x=this.cameras,T=0;T<x.length;T++){var C=x[T];if(C.visible&&C.alpha>0){C.preRender();var E=this.getVisibleChildren(p.getChildren(),C);h.render(y,E,C)}}},getVisibleChildren:function(h,p){return h.filter(function(y){return y.willRender(p)})},resetAll:function(){for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(h,p){for(var y=0;y<this.cameras.length;y++)this.cameras[y].update(h,p)},onResize:function(h,p,y,x,T){for(var C=0;C<this.cameras.length;C++){var E=this.cameras[C];E._x===0&&E._y===0&&E._width===x&&E._height===T&&E.setSize(p.width,p.height)}},resize:function(h,p){for(var y=0;y<this.cameras.length;y++)this.cameras[y].setSize(h,p)},shutdown:function(){this.main=void 0;for(var h=0;h<this.cameras.length;h++)this.cameras[h].destroy();this.cameras=[];var p=this.systems.events;p.off(f.UPDATE,this.update,this),p.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(f.START,this.start,this),this.systems.events.off(f.DESTROY,this.destroy,this),this.systems.game.scale.off(l.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});o.register("CameraManager",m,"cameras"),i.exports=m},92522:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=e(56694),u=e(89787),o=new v({initialize:function(l){this.camera=l,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(c,l,f,m,h,p,y,x){if(c===void 0&&(c=!0),l===void 0&&(l=1e3),f===void 0&&(f=0),m===void 0&&(m=0),h===void 0&&(h=0),p===void 0&&(p=!1),y===void 0&&(y=null),x===void 0&&(x=this.camera.scene),!p&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=l,this.direction=c,this.progress=0,this.red=f,this.green=m,this.blue=h,this.alpha=c?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=y,this._onUpdateScope=x;var T=c?u.FADE_OUT_START:u.FADE_IN_START;return this.camera.emit(T,this.camera,this,l,f,m,h),this.camera},update:function(c,l){this.isRunning&&(this._elapsed+=l,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(c){if(!this.isRunning&&!this.isComplete)return!1;var l=this.camera;return c.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",c.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(c,l){if(!this.isRunning&&!this.isComplete)return!1;var f=this.camera,m=this.red/255,h=this.green/255,p=this.blue/255;return c.drawFillRect(f.x,f.y,f.width,f.height,l(p,h,m,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var c=this.direction?u.FADE_OUT_COMPLETE:u.FADE_IN_COMPLETE;this.camera.emit(c,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});i.exports=o},22151:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=e(56694),u=e(89787),o=new v({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(c,l,f,m,h,p,y){return c===void 0&&(c=250),l===void 0&&(l=255),f===void 0&&(f=255),m===void 0&&(m=255),h===void 0&&(h=!1),p===void 0&&(p=null),y===void 0&&(y=this.camera.scene),!h&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=c,this.progress=0,this.red=l,this.green=f,this.blue=m,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=y,this.camera.emit(u.FLASH_START,this.camera,this,c,l,f,m),this.camera)},update:function(c,l){this.isRunning&&(this._elapsed+=l,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(c){if(!this.isRunning)return!1;var l=this.camera;return c.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",c.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(c,l){if(!this.isRunning)return!1;var f=this.camera,m=this.red/255,h=this.green/255,p=this.blue/255;return c.drawFillRect(f.x,f.y,f.width,f.height,l(p,h,m,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});i.exports=o},37551:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=e(56694),u=e(35060),o=e(89787),c=e(93736),l=new v({initialize:function(m){this.camera=m,this.isRunning=!1,this.duration=0,this.source=new c,this.current=new c,this.destination=new c,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(f,m,h,p,y,x,T){h===void 0&&(h=1e3),p===void 0&&(p=u.Linear),y===void 0&&(y=!1),x===void 0&&(x=null),T===void 0&&(T=this.camera.scene);var C=this.camera;return!y&&this.isRunning||(this.isRunning=!0,this.duration=h,this.progress=0,this.source.set(C.scrollX,C.scrollY),this.destination.set(f,m),C.getScroll(f,m,this.current),typeof p=="string"&&u.hasOwnProperty(p)?this.ease=u[p]:typeof p=="function"&&(this.ease=p),this._elapsed=0,this._onUpdate=x,this._onUpdateScope=T,this.camera.emit(o.PAN_START,this.camera,this,h,f,m)),C},update:function(f,m){if(this.isRunning){this._elapsed+=m;var h=a(this._elapsed/this.duration,0,1);this.progress=h;var p=this.camera;if(this._elapsed<this.duration){var y=this.ease(h);p.getScroll(this.destination.x,this.destination.y,this.current);var x=this.source.x+(this.current.x-this.source.x)*y,T=this.source.y+(this.current.y-this.source.y)*y;p.setScroll(x,T),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,h,x,T)}else p.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,h,p.scrollX,p.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});i.exports=l},1771:(i,g,e)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var a=e(82897),v=e(56694),u=e(89787),o=e(35060),c=new v({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(l,f,m,h,p,y,x){m===void 0&&(m=1e3),h===void 0&&(h=o.Linear),p===void 0&&(p=!1),y===void 0&&(y=null),x===void 0&&(x=this.camera.scene),f===void 0&&(f=!1),this.shortestPath=f;var T=l;l<0?(T=-1*l,this.clockwise=!1):this.clockwise=!0;var C=360*Math.PI/180;T=T-Math.floor(T/C)*C;var E=this.camera;if(!p&&this.isRunning)return E;if(this.isRunning=!0,this.duration=m,this.progress=0,this.source=E.rotation,this.destination=T,typeof h=="string"&&o.hasOwnProperty(h)?this.ease=o[h]:typeof h=="function"&&(this.ease=h),this._elapsed=0,this._onUpdate=y,this._onUpdateScope=x,this.shortestPath){var A=0,w=0;this.destination>this.source?A=Math.abs(this.destination-this.source):A=Math.abs(this.destination+C)-this.source,this.source>this.destination?w=Math.abs(this.source-this.destination):w=Math.abs(this.source+C)-this.destination,A<w?this.clockwise=!0:A>w&&(this.clockwise=!1)}return this.camera.emit(u.ROTATE_START,this.camera,this,m,T),E},update:function(l,f){if(this.isRunning){this._elapsed+=f;var m=a(this._elapsed/this.duration,0,1);this.progress=m;var h=this.camera;if(this._elapsed<this.duration){var p=this.ease(m);this.current=h.rotation;var y=0,x=360*Math.PI/180,T=this.destination,C=this.current;this.clockwise===!1&&(T=this.current,C=this.destination),T>=C?y=Math.abs(T-C):y=Math.abs(T+x)-C;var E=0;this.clockwise?E=h.rotation+y*p:E=h.rotation-y*p,h.rotation=E,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,m,E)}else h.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,m,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});i.exports=c},3241:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=e(56694),u=e(89787),o=e(93736),c=new v({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(l,f,m,h,p){return l===void 0&&(l=100),f===void 0&&(f=.05),m===void 0&&(m=!1),h===void 0&&(h=null),p===void 0&&(p=this.camera.scene),!m&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,typeof f=="number"?this.intensity.set(f):this.intensity.set(f.x,f.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=h,this._onUpdateScope=p,this.camera.emit(u.SHAKE_START,this.camera,this,l,f),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(l,f){if(this.isRunning)if(this._elapsed+=f,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var m=this.intensity,h=this.camera.width,p=this.camera.height,y=this.camera.zoom;this._offsetX=(Math.random()*m.x*h*2-m.x*h)*y,this._offsetY=(Math.random()*m.y*p*2-m.y*p)*y,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});i.exports=c},13383:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=e(56694),u=e(35060),o=e(89787),c=new v({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,f,m,h,p,y){f===void 0&&(f=1e3),m===void 0&&(m=u.Linear),h===void 0&&(h=!1),p===void 0&&(p=null),y===void 0&&(y=this.camera.scene);var x=this.camera;return!h&&this.isRunning||(this.isRunning=!0,this.duration=f,this.progress=0,this.source=x.zoom,this.destination=l,typeof m=="string"&&u.hasOwnProperty(m)?this.ease=u[m]:typeof m=="function"&&(this.ease=m),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=y,this.camera.emit(o.ZOOM_START,this.camera,this,f,l)),x},update:function(l,f){this.isRunning&&(this._elapsed+=f,this.progress=a(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});i.exports=c},53030:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Fade:e(92522),Flash:e(22151),Pan:e(37551),Shake:e(3241),RotateTo:e(1771),Zoom:e(13383)}},39577:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="cameradestroy"},85373:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerafadeincomplete"},92057:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerafadeinstart"},1903:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerafadeoutcomplete"},96131:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerafadeoutstart"},85409:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="cameraflashcomplete"},25500:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="cameraflashstart"},44071:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="followupdate"},19818:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerapancomplete"},80002:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerapanstart"},87966:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="postrender"},74217:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="prerender"},34805:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerarotatecomplete"},30408:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerarotatestart"},49856:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerashakecomplete"},69189:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerashakestart"},67657:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerazoomcomplete"},14229:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="camerazoomstart"},89787:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={DESTROY:e(39577),FADE_IN_COMPLETE:e(85373),FADE_IN_START:e(92057),FADE_OUT_COMPLETE:e(1903),FADE_OUT_START:e(96131),FLASH_COMPLETE:e(85409),FLASH_START:e(25500),FOLLOW_UPDATE:e(44071),PAN_COMPLETE:e(19818),PAN_START:e(80002),POST_RENDER:e(87966),PRE_RENDER:e(74217),ROTATE_COMPLETE:e(34805),ROTATE_START:e(30408),SHAKE_COMPLETE:e(49856),SHAKE_START:e(69189),ZOOM_COMPLETE:e(67657),ZOOM_START:e(14229)}},32356:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Camera:e(47751),BaseCamera:e(51052),CameraManager:e(62382),Effects:e(53030),Events:e(89787)}},84219:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(10850),u=new a({initialize:function(c){this.camera=v(c,"camera",null),this.left=v(c,"left",null),this.right=v(c,"right",null),this.up=v(c,"up",null),this.down=v(c,"down",null),this.zoomIn=v(c,"zoomIn",null),this.zoomOut=v(c,"zoomOut",null),this.zoomSpeed=v(c,"zoomSpeed",.01),this.minZoom=v(c,"minZoom",.001),this.maxZoom=v(c,"maxZoom",1e3),this.speedX=0,this.speedY=0;var l=v(c,"speed",null);typeof l=="number"?(this.speedX=l,this.speedY=l):(this.speedX=v(c,"speed.x",0),this.speedY=v(c,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(this.active){o===void 0&&(o=1);var c=this.camera;this.up&&this.up.isDown?c.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(c.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?c.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(c.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(c.zoom-=this.zoomSpeed,c.zoom<this.minZoom&&(c.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(c.zoom+=this.zoomSpeed,c.zoom>this.maxZoom&&(c.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});i.exports=u},69370:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(10850),u=new a({initialize:function(c){this.camera=v(c,"camera",null),this.left=v(c,"left",null),this.right=v(c,"right",null),this.up=v(c,"up",null),this.down=v(c,"down",null),this.zoomIn=v(c,"zoomIn",null),this.zoomOut=v(c,"zoomOut",null),this.zoomSpeed=v(c,"zoomSpeed",.01),this.minZoom=v(c,"minZoom",.001),this.maxZoom=v(c,"maxZoom",1e3),this.accelX=0,this.accelY=0;var l=v(c,"acceleration",null);typeof l=="number"?(this.accelX=l,this.accelY=l):(this.accelX=v(c,"acceleration.x",0),this.accelY=v(c,"acceleration.y",0)),this.dragX=0,this.dragY=0;var f=v(c,"drag",null);typeof f=="number"?(this.dragX=f,this.dragY=f):(this.dragX=v(c,"drag.x",0),this.dragY=v(c,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var m=v(c,"maxSpeed",null);typeof m=="number"?(this.maxSpeedX=m,this.maxSpeedY=m):(this.maxSpeedX=v(c,"maxSpeed.x",0),this.maxSpeedY=v(c,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(this.active){o===void 0&&(o=1);var c=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(c.scrollX-=this._speedX*o|0),this._speedY!==0&&(c.scrollY-=this._speedY*o|0),this._zoom!==0&&(c.zoom+=this._zoom,c.zoom<this.minZoom?c.zoom=this.minZoom:c.zoom>this.maxZoom&&(c.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});i.exports=u},6524:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={FixedKeyControl:e(84219),SmoothedKeyControl:e(69370)}},44143:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Controls:e(6524),Scene2D:e(32356)}},86459:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={VERSION:"3.60.0",BlendModes:e(95723),ScaleModes:e(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};i.exports=a},14033:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(86459),u=e(18360),o=e(77290),c=e(72632),l=e(10850),f=e(42911),m=e(72283),h=e(5923),p=e(65641),y=e(93222),x=new a({initialize:function(C){C===void 0&&(C={});var E=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],A="#ffffff",w=l(C,"scale",null);this.width=l(w,"width",1024,C),this.height=l(w,"height",768,C),this.zoom=l(w,"zoom",1,C),this.parent=l(w,"parent",void 0,C),this.scaleMode=l(w,w?"mode":"scaleMode",0,C),this.expandParent=l(w,"expandParent",!0,C),this.autoRound=l(w,"autoRound",!1,C),this.autoCenter=l(w,"autoCenter",0,C),this.resizeInterval=l(w,"resizeInterval",500,C),this.fullscreenTarget=l(w,"fullscreenTarget",null,C),this.minWidth=l(w,"minWidth",0,C),this.maxWidth=l(w,"maxWidth",0,C),this.minHeight=l(w,"minHeight",0,C),this.maxHeight=l(w,"maxHeight",0,C),this.renderType=l(C,"type",v.AUTO),this.canvas=l(C,"canvas",null),this.context=l(C,"context",null),this.canvasStyle=l(C,"canvasStyle",null),this.customEnvironment=l(C,"customEnvironment",!1),this.sceneConfig=l(C,"scene",null),this.seed=l(C,"seed",[(Date.now()*Math.random()).toString()]),h.RND=new h.RandomDataGenerator(this.seed),this.gameTitle=l(C,"title",""),this.gameURL=l(C,"url","https://phaser.io"),this.gameVersion=l(C,"version",""),this.autoFocus=l(C,"autoFocus",!0),this.stableSort=l(C,"stableSort",-1),this.stableSort===-1&&(this.stableSort=o.browser.es2019?1:0),o.features.stableSort=this.stableSort,this.domCreateContainer=l(C,"dom.createContainer",!1),this.domPointerEvents=l(C,"dom.pointerEvents","none"),this.inputKeyboard=l(C,"input.keyboard",!0),this.inputKeyboardEventTarget=l(C,"input.keyboard.target",window),this.inputKeyboardCapture=l(C,"input.keyboard.capture",[]),this.inputMouse=l(C,"input.mouse",!0),this.inputMouseEventTarget=l(C,"input.mouse.target",null),this.inputMousePreventDefaultDown=l(C,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=l(C,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=l(C,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=l(C,"input.mouse.preventDefaultWheel",!0),this.inputTouch=l(C,"input.touch",o.input.touch),this.inputTouchEventTarget=l(C,"input.touch.target",null),this.inputTouchCapture=l(C,"input.touch.capture",!0),this.inputActivePointers=l(C,"input.activePointers",1),this.inputSmoothFactor=l(C,"input.smoothFactor",0),this.inputWindowEvents=l(C,"input.windowEvents",!0),this.inputGamepad=l(C,"input.gamepad",!1),this.inputGamepadEventTarget=l(C,"input.gamepad.target",window),this.disableContextMenu=l(C,"disableContextMenu",!1),this.audio=l(C,"audio",{}),this.hideBanner=l(C,"banner",null)===!1,this.hidePhaser=l(C,"banner.hidePhaser",!1),this.bannerTextColor=l(C,"banner.text",A),this.bannerBackgroundColor=l(C,"banner.background",E),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=l(C,"fps",null);var b=l(C,"render",null);this.pipeline=l(b,"pipeline",null,C),this.autoMobilePipeline=l(b,"autoMobilePipeline",!0,C),this.defaultPipeline=l(b,"defaultPipeline",p.MULTI_PIPELINE,C),this.antialias=l(b,"antialias",!0,C),this.antialiasGL=l(b,"antialiasGL",!0,C),this.mipmapFilter=l(b,"mipmapFilter","",C),this.desynchronized=l(b,"desynchronized",!1,C),this.roundPixels=l(b,"roundPixels",!1,C),this.pixelArt=l(b,"pixelArt",this.zoom!==1,C),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=l(b,"transparent",!1,C),this.clearBeforeRender=l(b,"clearBeforeRender",!0,C),this.preserveDrawingBuffer=l(b,"preserveDrawingBuffer",!1,C),this.premultipliedAlpha=l(b,"premultipliedAlpha",!0,C),this.failIfMajorPerformanceCaveat=l(b,"failIfMajorPerformanceCaveat",!1,C),this.powerPreference=l(b,"powerPreference","default",C),this.batchSize=l(b,"batchSize",4096,C),this.maxTextures=l(b,"maxTextures",-1,C),this.maxLights=l(b,"maxLights",10,C);var I=l(C,"backgroundColor",0);this.backgroundColor=y(I),this.transparent&&(this.backgroundColor=y(0),this.backgroundColor.alpha=0),this.preBoot=l(C,"callbacks.preBoot",m),this.postBoot=l(C,"callbacks.postBoot",m),this.physics=l(C,"physics",{}),this.defaultPhysicsSystem=l(this.physics,"default",!1),this.loaderBaseURL=l(C,"loader.baseURL",""),this.loaderPath=l(C,"loader.path",""),this.loaderMaxParallelDownloads=l(C,"loader.maxParallelDownloads",o.os.android?6:32),this.loaderCrossOrigin=l(C,"loader.crossOrigin",void 0),this.loaderResponseType=l(C,"loader.responseType",""),this.loaderAsync=l(C,"loader.async",!0),this.loaderUser=l(C,"loader.user",""),this.loaderPassword=l(C,"loader.password",""),this.loaderTimeout=l(C,"loader.timeout",0),this.loaderWithCredentials=l(C,"loader.withCredentials",!1),this.loaderImageLoadType=l(C,"loader.imageLoadType","XHR"),this.loaderLocalScheme=l(C,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=l(C,"fx.glow.quality",.1),this.glowFXDistance=l(C,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var R=l(C,"plugins",null),N=u.DefaultScene;R&&(Array.isArray(R)?this.defaultPlugins=R:f(R)&&(this.installGlobalPlugins=c(R,"global",[]),this.installScenePlugins=c(R,"scene",[]),Array.isArray(R.default)?N=R.default:Array.isArray(R.defaultMerge)&&(N=N.concat(R.defaultMerge)))),this.defaultPlugins=N;var F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=l(C,"images.default",F+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=l(C,"images.missing",F+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=l(C,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=v.WEBGL:window.FORCE_CANVAS&&(this.renderType=v.CANVAS))}});i.exports=x},50150:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70616),v=e(61068),u=e(86459),o=e(90185),c=function(l){var f=l.config;if((f.customEnvironment||f.canvas)&&f.renderType===u.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!f.customEnvironment&&!f.canvas&&f.renderType!==u.HEADLESS)if(f.renderType===u.AUTO&&(f.renderType=o.webGL?u.WEBGL:u.CANVAS),f.renderType===u.WEBGL){if(!o.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(f.renderType===u.CANVAS){if(!o.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+f.renderType);f.antialias||v.disableSmoothing();var m=l.scale.baseSize,h=m.width,p=m.height;if(f.canvas?(l.canvas=f.canvas,l.canvas.width=h,l.canvas.height=p):l.canvas=v.create(l,h,p,f.renderType),f.canvasStyle&&(l.canvas.style=f.canvasStyle),f.antialias||a.setCrisp(l.canvas),f.renderType!==u.HEADLESS){var y,x;y=e(91135),x=e(11857),f.renderType===u.WEBGL?l.renderer=new x(l):(l.renderer=new y(l),l.context=l.renderer.gameContext)}};i.exports=c},77291:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86459),v=function(u){var o=u.config;if(!o.hideBanner){var c="WebGL";o.renderType===a.CANVAS?c="Canvas":o.renderType===a.HEADLESS&&(c="Headless");var l=o.audio,f=u.device.audio,m;if(f.webAudio&&!l.disableWebAudio?m="Web Audio":l.noAudio||!f.webAudio&&!f.audioData?m="No Audio":m="HTML5 Audio",u.device.browser.ie)window.console&&console.log("Phaser v"+a.VERSION+" / https://phaser.io");else{var h="",p=[h];if(Array.isArray(o.bannerBackgroundColor)){var y;o.bannerBackgroundColor.forEach(function(T){h=h.concat("%c "),p.push("background: "+T),y=T}),p[p.length-1]="color: "+o.bannerTextColor+"; background: "+y}else h=h.concat("%c "),p.push("color: "+o.bannerTextColor+"; background: "+o.bannerBackgroundColor);p.push("background: transparent"),o.gameTitle&&(h=h.concat(o.gameTitle),o.gameVersion&&(h=h.concat(" v"+o.gameVersion)),o.hidePhaser||(h=h.concat(" / ")));var x="";o.hidePhaser||(h=h.concat("Phaser v"+a.VERSION+x+" ("+c+" | "+m+")")),h=h.concat(" %c "+o.gameURL),p[0]=h,console.log.apply(console,p)}}};i.exports=v},15213:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99584),v=e(90249),u=e(43474),o=e(61068),c=e(56694),l=e(14033),f=e(85178),m=e(50150),h=e(81078),p=e(77291),y=e(77290),x=e(21546),T=e(6659),C=e(97081),E=e(69898),A=e(91963),w=e(49274),b=e(756),I=e(13553),R=e(38203),N=e(6237),F=e(26617),P=e(26493),O=e(84191),M=new c({initialize:function(k){this.config=new l(k),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new T,this.anims=new v(this),this.textures=new N(this),this.cache=new u(this),this.registry=new h(this,new T),this.input=new E(this,this.config),this.scene=new I(this,this.config.sceneConfig),this.device=y,this.scale=new b(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new F(this,this.config.fps),this.plugins=new w(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,x(this.boot.bind(this))},boot:function(){if(!A.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),m(this),f(this),p(this),a(this.canvas,this.config.parent),this.textures.once(R.READY,this.texturesReady,this),this.events.emit(C.BOOT)},texturesReady:function(){this.events.emit(C.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),P(this);var L=this.events;L.on(C.HIDDEN,this.onHidden,this),L.on(C.VISIBLE,this.onVisible,this),L.on(C.BLUR,this.onBlur,this),L.on(C.FOCUS,this.onFocus,this)},step:function(L,k){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var V=this.events;V.emit(C.PRE_STEP,L,k),V.emit(C.STEP,L,k),this.scene.update(L,k),V.emit(C.POST_STEP,L,k);var W=this.renderer;W.preRender(),V.emit(C.PRE_RENDER,W,L,k),this.scene.render(W),W.postRender(),V.emit(C.POST_RENDER,W,L,k)}},headlessStep:function(L,k){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var V=this.events;V.emit(C.PRE_STEP,L,k),V.emit(C.STEP,L,k),this.scene.update(L,k),V.emit(C.POST_STEP,L,k),this.scene.isProcessing=!1,V.emit(C.PRE_RENDER,null,L,k),V.emit(C.POST_RENDER,null,L,k)}},onHidden:function(){this.loop.pause(),this.events.emit(C.PAUSE)},pause:function(){var L=this.isPaused;this.isPaused=!0,L||this.events.emit(C.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(C.RESUME)},resume:function(){var L=this.isPaused;this.isPaused=!1,L&&this.events.emit(C.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(L,k){k===void 0&&(k=!1),this.pendingDestroy=!0,this.removeCanvas=L,this.noReturn=k},runDestroy:function(){this.scene.destroy(),this.events.emit(C.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});i.exports=M},26617:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(10850),u=e(72283),o=e(27385),c=new a({initialize:function(f,m){this.game=f,this.raf=new o,this.started=!1,this.running=!1,this.minFps=v(m,"min",5),this.targetFps=v(m,"target",60),this.fpsLimit=v(m,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=u,this.forceSetTimeOut=v(m,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=v(m,"deltaHistory",10),this.panicMax=v(m,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=v(m,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var l=window.performance.now();this.time=l,this.lastTime=l,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0;for(var f=0;f<this.deltaSmoothingMax;f++)this.deltaHistory[f]=Math.min(this._target,this.deltaHistory[f]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(l){if(this.started)return this;this.started=!0,this.running=!0;for(var f=0;f<this.deltaSmoothingMax;f++)this.deltaHistory[f]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=l;var m=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(m,this.forceSetTimeOut,this._target)},smoothDelta:function(l){var f=this.deltaIndex,m=this.deltaHistory,h=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,l=Math.min(l,this._target)),l>this._min&&(l=m[f],l=Math.min(l,this._min)),m[f]=l,this.deltaIndex++,this.deltaIndex>=h&&(this.deltaIndex=0);for(var p=0,y=0;y<h;y++)p+=m[y];return p/=h,p},updateFPS:function(l){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0},stepLimitFPS:function(l){this.now=l;var f=Math.max(0,l-this.lastTime);this.rawDelta=f,this.time+=this.rawDelta,this.smoothStep&&(f=this.smoothDelta(f)),this.delta+=f,l>=this.nextFpsUpdate&&this.updateFPS(l),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(l,this.delta),this.delta=0),this.lastTime=l,this.frame++},step:function(l){this.now=l;var f=Math.max(0,l-this.lastTime);this.rawDelta=f,this.time+=this.rawDelta,this.smoothStep&&(f=this.smoothDelta(f)),this.delta=f,l>=this.nextFpsUpdate&&this.updateFPS(l),this.framesThisSecond++,this.callback(l,f),this.lastTime=l,this.frame++},tick:function(){var l=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(l):this.step(l)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(l){l===void 0&&(l=!1);var f=window.performance.now();if(!this.running){l&&(this.startTime+=-this.lastTime+(this.lastTime+f));var m=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(m,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=f+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});i.exports=c},26493:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97081),v=function(u){var o,c=u.events;if(document.hidden!==void 0)o="visibilitychange";else{var l=["webkit","moz","ms"];l.forEach(function(m){document[m+"Hidden"]!==void 0&&(document.hidden=function(){return document[m+"Hidden"]},o=m+"visibilitychange")})}var f=function(m){document.hidden||m.type==="pause"?c.emit(a.HIDDEN):c.emit(a.VISIBLE)};o&&document.addEventListener(o,f,!1),window.onblur=function(){c.emit(a.BLUR)},window.onfocus=function(){c.emit(a.FOCUS)},window.focus&&u.config.autoFocus&&window.focus()};i.exports=v},41651:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="blur"},5520:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="boot"},51673:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="contextlost"},25055:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},23767:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="focus"},57564:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="hidden"},38327:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},43807:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="postrender"},73652:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="poststep"},780:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="prerender"},13781:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="prestep"},38247:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="ready"},29129:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},34994:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="step"},98704:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="visible"},97081:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BLUR:e(41651),BOOT:e(5520),CONTEXT_LOST:e(51673),DESTROY:e(25055),FOCUS:e(23767),HIDDEN:e(57564),PAUSE:e(38327),POST_RENDER:e(43807),POST_STEP:e(73652),PRE_RENDER:e(780),PRE_STEP:e(13781),READY:e(38247),RESUME:e(29129),STEP:e(34994),VISIBLE:e(98704)}},80293:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Config:e(14033),CreateRenderer:e(50150),DebugHeader:e(77291),Events:e(97081),TimeStep:e(26617),VisibilityHandler:e(26493)}},52780:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(81543),v=e(61068),u=e(10850),o=function(c){var l=u(c,"data",[]),f=u(c,"canvas",null),m=u(c,"palette",a),h=u(c,"pixelWidth",1),p=u(c,"pixelHeight",h),y=u(c,"resizeCanvas",!0),x=u(c,"clearCanvas",!0),T=u(c,"preRender",null),C=u(c,"postRender",null),E=Math.floor(Math.abs(l[0].length*h)),A=Math.floor(Math.abs(l.length*p));f||(f=v.create2D(this,E,A),y=!1,x=!1),y&&(f.width=E,f.height=A);var w=f.getContext("2d",{willReadFrequently:!0});x&&w.clearRect(0,0,E,A),T&&T(f,w);for(var b=0;b<l.length;b++)for(var I=l[b],R=0;R<I.length;R++){var N=I[R];N!=="."&&N!==" "&&(w.fillStyle=m[N],w.fillRect(R*h,b*p,h,p))}return C&&C(f,w),f};i.exports=o},84106:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={GenerateTexture:e(52780),Palettes:e(25235)}},81543:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},75846:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},83206:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},13194:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},50686:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},25235:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ARNE16:e(81543),C64:e(75846),CGA:e(83206),JMP:e(13194),MSX:e(50686)}},63120:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(34631),u=e(38517),o=e(93736),c=new a({Extends:u,initialize:function(f,m,h,p){u.call(this,"CubicBezierCurve"),Array.isArray(f)&&(p=new o(f[6],f[7]),h=new o(f[4],f[5]),m=new o(f[2],f[3]),f=new o(f[0],f[1])),this.p0=f,this.p1=m,this.p2=h,this.p3=p},getStartPoint:function(l){return l===void 0&&(l=new o),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,f){f===void 0&&(f=new o);var m=this.p0,h=this.p1,p=this.p2,y=this.p3;return f.set(v(l,m.x,h.x,p.x,y.x),v(l,m.y,h.y,p.y,y.y))},draw:function(l,f){f===void 0&&(f=32);var m=this.getPoints(f);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var h=1;h<m.length;h++)l.lineTo(m[h].x,m[h].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});c.fromJSON=function(l){var f=l.points,m=new o(f[0],f[1]),h=new o(f[2],f[3]),p=new o(f[4],f[5]),y=new o(f[6],f[7]);return new c(m,h,p,y)},i.exports=c},38517:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(80222),u=e(74118),o=e(93736),c=new a({initialize:function(f){this.type=f,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(l,f){return f===void 0&&(f=32),l.strokePoints(this.getPoints(f))},getBounds:function(l,f){l||(l=new u),f===void 0&&(f=16);var m=this.getLength();f>m&&(f=m/2);var h=Math.max(1,Math.round(m/f));return v(this.getSpacedPoints(h),l)},getDistancePoints:function(l){var f=this.getLength(),m=Math.max(1,f/l);return this.getSpacedPoints(m)},getEndPoint:function(l){return l===void 0&&(l=new o),this.getPointAt(1,l)},getLength:function(){var l=this.getLengths();return l[l.length-1]},getLengths:function(l){if(l===void 0&&(l=this.arcLengthDivisions),this.cacheArcLengths.length===l+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var f=[],m,h=this.getPoint(0,this._tmpVec2A),p=0;f.push(0);for(var y=1;y<=l;y++)m=this.getPoint(y/l,this._tmpVec2B),p+=m.distance(h),f.push(p),h.copy(m);return this.cacheArcLengths=f,f},getPointAt:function(l,f){var m=this.getUtoTmapping(l);return this.getPoint(m,f)},getPoints:function(l,f,m){m===void 0&&(m=[]),l||(f?l=this.getLength()/f:l=this.defaultDivisions);for(var h=0;h<=l;h++)m.push(this.getPoint(h/l));return m},getRandomPoint:function(l){return l===void 0&&(l=new o),this.getPoint(Math.random(),l)},getSpacedPoints:function(l,f,m){m===void 0&&(m=[]),l||(f?l=this.getLength()/f:l=this.defaultDivisions);for(var h=0;h<=l;h++){var p=this.getUtoTmapping(h/l,null,l);m.push(this.getPoint(p))}return m},getStartPoint:function(l){return l===void 0&&(l=new o),this.getPointAt(0,l)},getTangent:function(l,f){f===void 0&&(f=new o);var m=1e-4,h=l-m,p=l+m;return h<0&&(h=0),p>1&&(p=1),this.getPoint(h,this._tmpVec2A),this.getPoint(p,f),f.subtract(this._tmpVec2A).normalize()},getTangentAt:function(l,f){var m=this.getUtoTmapping(l);return this.getTangent(m,f)},getTFromDistance:function(l,f){return l<=0?0:this.getUtoTmapping(0,l,f)},getUtoTmapping:function(l,f,m){var h=this.getLengths(m),p=0,y=h.length,x;f?x=Math.min(f,h[y-1]):x=l*h[y-1];for(var T=0,C=y-1,E;T<=C;)if(p=Math.floor(T+(C-T)/2),E=h[p]-x,E<0)T=p+1;else if(E>0)C=p-1;else{C=p;break}if(p=C,h[p]===x)return p/(y-1);var A=h[p],w=h[p+1],b=w-A,I=(x-A)/b;return(p+I)/(y-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});i.exports=c},48835:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(38517),u=e(75606),o=e(10850),c=e(23701),l=e(93736),f=new a({Extends:v,initialize:function(h,p,y,x,T,C,E,A){if(typeof h=="object"){var w=h;h=o(w,"x",0),p=o(w,"y",0),y=o(w,"xRadius",0),x=o(w,"yRadius",y),T=o(w,"startAngle",0),C=o(w,"endAngle",360),E=o(w,"clockwise",!1),A=o(w,"rotation",0)}else x===void 0&&(x=y),T===void 0&&(T=0),C===void 0&&(C=360),E===void 0&&(E=!1),A===void 0&&(A=0);v.call(this,"EllipseCurve"),this.p0=new l(h,p),this._xRadius=y,this._yRadius=x,this._startAngle=u(T),this._endAngle=u(C),this._clockwise=E,this._rotation=u(A)},getStartPoint:function(m){return m===void 0&&(m=new l),this.getPoint(0,m)},getResolution:function(m){return m*2},getPoint:function(m,h){h===void 0&&(h=new l);for(var p=Math.PI*2,y=this._endAngle-this._startAngle,x=Math.abs(y)<Number.EPSILON;y<0;)y+=p;for(;y>p;)y-=p;y<Number.EPSILON&&(x?y=0:y=p),this._clockwise&&!x&&(y===p?y=-p:y=y-p);var T=this._startAngle+m*y,C=this.p0.x+this._xRadius*Math.cos(T),E=this.p0.y+this._yRadius*Math.sin(T);if(this._rotation!==0){var A=Math.cos(this._rotation),w=Math.sin(this._rotation),b=C-this.p0.x,I=E-this.p0.y;C=b*A-I*w+this.p0.x,E=b*w+I*A+this.p0.y}return h.set(C,E)},setXRadius:function(m){return this.xRadius=m,this},setYRadius:function(m){return this.yRadius=m,this},setWidth:function(m){return this.xRadius=m/2,this},setHeight:function(m){return this.yRadius=m/2,this},setStartAngle:function(m){return this.startAngle=m,this},setEndAngle:function(m){return this.endAngle=m,this},setClockwise:function(m){return this.clockwise=m,this},setRotation:function(m){return this.rotation=m,this},x:{get:function(){return this.p0.x},set:function(m){this.p0.x=m}},y:{get:function(){return this.p0.y},set:function(m){this.p0.y=m}},xRadius:{get:function(){return this._xRadius},set:function(m){this._xRadius=m}},yRadius:{get:function(){return this._yRadius},set:function(m){this._yRadius=m}},startAngle:{get:function(){return c(this._startAngle)},set:function(m){this._startAngle=u(m)}},endAngle:{get:function(){return c(this._endAngle)},set:function(m){this._endAngle=u(m)}},clockwise:{get:function(){return this._clockwise},set:function(m){this._clockwise=m}},angle:{get:function(){return c(this._rotation)},set:function(m){this._rotation=u(m)}},rotation:{get:function(){return this._rotation},set:function(m){this._rotation=m}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:c(this._startAngle),endAngle:c(this._endAngle),clockwise:this._clockwise,rotation:c(this._rotation)}}});f.fromJSON=function(m){return new f(m)},i.exports=f},58084:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(38517),u=e(80222),o=e(74118),c=e(93736),l=new a({Extends:v,initialize:function(m,h){v.call(this,"LineCurve"),Array.isArray(m)&&(h=new c(m[2],m[3]),m=new c(m[0],m[1])),this.p0=m,this.p1=h,this.arcLengthDivisions=1},getBounds:function(f){return f===void 0&&(f=new o),u([this.p0,this.p1],f)},getStartPoint:function(f){return f===void 0&&(f=new c),f.copy(this.p0)},getResolution:function(f){return f===void 0&&(f=1),f},getPoint:function(f,m){return m===void 0&&(m=new c),f===1?m.copy(this.p1):(m.copy(this.p1).subtract(this.p0).scale(f).add(this.p0),m)},getPointAt:function(f,m){return this.getPoint(f,m)},getTangent:function(f,m){return m===void 0&&(m=new c),m.copy(this.p1).subtract(this.p0).normalize(),m},getUtoTmapping:function(f,m,h){var p;if(m){var y=this.getLengths(h),x=y[y.length-1],T=Math.min(m,x);p=T/x}else p=f;return p},draw:function(f){return f.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),f},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});l.fromJSON=function(f){var m=f.points,h=new c(m[0],m[1]),p=new c(m[2],m[3]);return new l(h,p)},i.exports=l},64761:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(38517),u=e(16252),o=e(93736),c=new a({Extends:v,initialize:function(f,m,h){v.call(this,"QuadraticBezierCurve"),Array.isArray(f)&&(h=new o(f[4],f[5]),m=new o(f[2],f[3]),f=new o(f[0],f[1])),this.p0=f,this.p1=m,this.p2=h},getStartPoint:function(l){return l===void 0&&(l=new o),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,f){f===void 0&&(f=new o);var m=this.p0,h=this.p1,p=this.p2;return f.set(u(l,m.x,h.x,p.x),u(l,m.y,h.y,p.y))},draw:function(l,f){f===void 0&&(f=32);var m=this.getPoints(f);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var h=1;h<m.length;h++)l.lineTo(m[h].x,m[h].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});c.fromJSON=function(l){var f=l.points,m=new o(f[0],f[1]),h=new o(f[2],f[3]),p=new o(f[4],f[5]);return new c(m,h,p)},i.exports=c},11956:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14976),v=e(56694),u=e(38517),o=e(93736),c=new v({Extends:u,initialize:function(f){f===void 0&&(f=[]),u.call(this,"SplineCurve"),this.points=[],this.addPoints(f)},addPoints:function(l){for(var f=0;f<l.length;f++){var m=new o;typeof l[f]=="number"?(m.x=l[f],m.y=l[f+1],f++):Array.isArray(l[f])?(m.x=l[f][0],m.y=l[f][1]):(m.x=l[f].x,m.y=l[f].y),this.points.push(m)}return this},addPoint:function(l,f){var m=new o(l,f);return this.points.push(m),m},getStartPoint:function(l){return l===void 0&&(l=new o),l.copy(this.points[0])},getResolution:function(l){return l*this.points.length},getPoint:function(l,f){f===void 0&&(f=new o);var m=this.points,h=(m.length-1)*l,p=Math.floor(h),y=h-p,x=m[p===0?p:p-1],T=m[p],C=m[p>m.length-2?m.length-1:p+1],E=m[p>m.length-3?m.length-1:p+2];return f.set(a(y,x.x,T.x,C.x,E.x),a(y,x.y,T.y,C.y,E.y))},toJSON:function(){for(var l=[],f=0;f<this.points.length;f++)l.push(this.points[f].x),l.push(this.points[f].y);return{type:this.type,points:l}}});c.fromJSON=function(l){return new c(l.points)},i.exports=c},73962:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Path:e(12822),MoveTo:e(53639),CubicBezier:e(63120),Curve:e(38517),Ellipse:e(48835),Line:e(58084),QuadraticBezier:e(64761),Spline:e(11956)}},53639:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(93736),u=new a({initialize:function(c,l){this.active=!1,this.p0=new v(c,l)},getPoint:function(o,c){return c===void 0&&(c=new v),c.copy(this.p0)},getPointAt:function(o,c){return this.getPoint(o,c)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});i.exports=u},12822:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(63120),u=e(48835),o=e(61286),c=e(58084),l=e(53639),f=e(64761),m=e(74118),h=e(11956),p=e(93736),y=e(83392),x=new a({initialize:function(C,E){C===void 0&&(C=0),E===void 0&&(E=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new p,this._tmpVec2A=new p,this._tmpVec2B=new p,typeof C=="object"?this.fromJSON(C):this.startPoint.set(C,E)},add:function(T){return this.curves.push(T),this},circleTo:function(T,C,E){return C===void 0&&(C=!1),this.ellipseTo(T,T,0,360,C,E)},closePath:function(){var T=this.curves[0].getPoint(0),C=this.curves[this.curves.length-1].getPoint(1);return T.equals(C)||this.curves.push(new c(C,T)),this},cubicBezierTo:function(T,C,E,A,w,b){var I=this.getEndPoint(),R,N,F;return T instanceof p?(R=T,N=C,F=E):(R=new p(E,A),N=new p(w,b),F=new p(T,C)),this.add(new v(I,R,N,F))},quadraticBezierTo:function(T,C,E,A){var w=this.getEndPoint(),b,I;return T instanceof p?(b=T,I=C):(b=new p(E,A),I=new p(T,C)),this.add(new f(w,b,I))},draw:function(T,C){for(var E=0;E<this.curves.length;E++){var A=this.curves[E];A.active&&A.draw(T,C)}return T},ellipseTo:function(T,C,E,A,w,b){var I=new u(0,0,T,C,E,A,w,b),R=this.getEndPoint(this._tmpVec2A),N=I.getStartPoint(this._tmpVec2B);return R.subtract(N),I.x=R.x,I.y=R.y,this.add(I)},fromJSON:function(T){this.curves=[],this.cacheLengths=[],this.startPoint.set(T.x,T.y),this.autoClose=T.autoClose;for(var C=0;C<T.curves.length;C++){var E=T.curves[C];switch(E.type){case"LineCurve":this.add(c.fromJSON(E));break;case"EllipseCurve":this.add(u.fromJSON(E));break;case"SplineCurve":this.add(h.fromJSON(E));break;case"CubicBezierCurve":this.add(v.fromJSON(E));break;case"QuadraticBezierCurve":this.add(f.fromJSON(E));break}}return this},getBounds:function(T,C){T===void 0&&(T=new m),C===void 0&&(C=16),T.x=Number.MAX_VALUE,T.y=Number.MAX_VALUE;for(var E=new m,A=y.MIN_SAFE_INTEGER,w=y.MIN_SAFE_INTEGER,b=0;b<this.curves.length;b++){var I=this.curves[b];I.active&&(I.getBounds(E,C),T.x=Math.min(T.x,E.x),T.y=Math.min(T.y,E.y),A=Math.max(A,E.right),w=Math.max(w,E.bottom))}return T.right=A,T.bottom=w,T},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var T=[],C=0,E=0;E<this.curves.length;E++)C+=this.curves[E].getLength(),T.push(C);return this.cacheLengths=T,T},getCurveAt:function(T){for(var C=T*this.getLength(),E=this.getCurveLengths(),A=0;A<E.length;){if(E[A]>=C)return this.curves[A];A++}return null},getEndPoint:function(T){return T===void 0&&(T=new p),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,T):T.copy(this.startPoint),T},getLength:function(){var T=this.getCurveLengths();return T[T.length-1]},getPoint:function(T,C){C===void 0&&(C=new p);for(var E=T*this.getLength(),A=this.getCurveLengths(),w=0;w<A.length;){if(A[w]>=E){var b=A[w]-E,I=this.curves[w],R=I.getLength(),N=R===0?0:1-b/R;return I.getPointAt(N,C)}w++}return null},getPoints:function(T){T===void 0&&(T=12);for(var C=[],E,A=0;A<this.curves.length;A++){var w=this.curves[A];if(w.active)for(var b=w.getResolution(T),I=w.getPoints(b),R=0;R<I.length;R++){var N=I[R];E&&E.equals(N)||(C.push(N),E=N)}}return this.autoClose&&C.length>1&&!C[C.length-1].equals(C[0])&&C.push(C[0]),C},getRandomPoint:function(T){return T===void 0&&(T=new p),this.getPoint(Math.random(),T)},getSpacedPoints:function(T){T===void 0&&(T=40);for(var C=[],E=0;E<=T;E++)C.push(this.getPoint(E/T));return this.autoClose&&C.push(C[0]),C},getStartPoint:function(T){return T===void 0&&(T=new p),T.copy(this.startPoint)},getTangent:function(T,C){C===void 0&&(C=new p);for(var E=T*this.getLength(),A=this.getCurveLengths(),w=0;w<A.length;){if(A[w]>=E){var b=A[w]-E,I=this.curves[w],R=I.getLength(),N=R===0?0:1-b/R;return I.getTangentAt(N,C)}w++}return null},lineTo:function(T,C){T instanceof p?this._tmpVec2B.copy(T):this._tmpVec2B.set(T,C);var E=this.getEndPoint(this._tmpVec2A);return this.add(new c([E.x,E.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(T){return T.unshift(this.getEndPoint()),this.add(new h(T))},moveTo:function(T,C){return T instanceof p?this.add(new l(T.x,T.y)):this.add(new l(T,C))},toJSON:function(){for(var T=[],C=0;C<this.curves.length;C++)T.push(this.curves[C].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:T}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(T,C){return new x(T,C)}),i.exports=x},81078:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(35026),u=new a({initialize:function(c,l){this.parent=c,this.events=l,l||(this.events=c.events?c.events:c),this.list={},this.values={},this._frozen=!1,!c.hasOwnProperty("sys")&&this.events&&this.events.once(v.DESTROY,this.destroy,this)},get:function(o){var c=this.list;if(Array.isArray(o)){for(var l=[],f=0;f<o.length;f++)l.push(c[o[f]]);return l}else return c[o]},getAll:function(){var o={};for(var c in this.list)this.list.hasOwnProperty(c)&&(o[c]=this.list[c]);return o},query:function(o){var c={};for(var l in this.list)this.list.hasOwnProperty(l)&&l.match(o)&&(c[l]=this.list[l]);return c},set:function(o,c){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,c);for(var l in o)this.setValue(l,o[l]);return this},inc:function(o,c){if(this._frozen)return this;c===void 0&&(c=1);var l=this.get(o);return l===void 0&&(l=0),this.set(o,l+c),this},toggle:function(o){return this._frozen?this:(this.set(o,!this.get(o)),this)},setValue:function(o,c){if(this._frozen)return this;if(this.has(o))this.values[o]=c;else{var l=this,f=this.list,m=this.events,h=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return f[o]},set:function(p){if(!l._frozen){var y=f[o];f[o]=p,m.emit(v.CHANGE_DATA,h,o,p,y),m.emit(v.CHANGE_DATA_KEY+o,h,p,y)}}}),f[o]=c,m.emit(v.SET_DATA,h,o,c)}return this},each:function(o,c){for(var l=[this.parent,null,void 0],f=1;f<arguments.length;f++)l.push(arguments[f]);for(var m in this.list)l[1]=m,l[2]=this.list[m],o.apply(c,l);return this},merge:function(o,c){c===void 0&&(c=!0);for(var l in o)o.hasOwnProperty(l)&&(c||!c&&!this.has(l))&&this.setValue(l,o[l]);return this},remove:function(o){if(this._frozen)return this;if(Array.isArray(o))for(var c=0;c<o.length;c++)this.removeValue(o[c]);else return this.removeValue(o);return this},removeValue:function(o){if(this.has(o)){var c=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(v.REMOVE_DATA,this.parent,o,c)}return this},pop:function(o){var c=void 0;return!this._frozen&&this.has(o)&&(c=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(v.REMOVE_DATA,this.parent,o,c)),c},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(v.CHANGE_DATA),this.events.off(v.SET_DATA),this.events.off(v.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var c in this.list)this.list[c]!==void 0&&o++;return o}}});i.exports=u},76508:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(81078),u=e(91963),o=e(7599),c=new a({Extends:v,initialize:function(f){v.call(this,f,f.sys.events),this.scene=f,this.systems=f.sys,f.sys.events.once(o.BOOT,this.boot,this),f.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){v.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});u.register("DataManagerPlugin",c,"data"),i.exports=c},73569:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="changedata"},15590:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="changedata-"},37669:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},87090:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="removedata"},90142:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="setdata"},35026:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CHANGE_DATA:e(73569),CHANGE_DATA_KEY:e(15590),DESTROY:e(37669),REMOVE_DATA:e(87090),SET_DATA:e(90142)}},1999:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={DataManager:e(81078),DataManagerPlugin:e(76508),Events:e(35026)}},10720:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1350),v={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function u(){if(typeof importScripts=="function")return v;v.audioData=!!window.Audio,v.webAudio=!!(window.AudioContext||window.webkitAudioContext);var o=document.createElement("audio"),c=!!o.canPlayType;try{if(c){var l=function(h,p){var y=o.canPlayType("audio/"+h).replace(/^no$/,"");return p?!!(y||o.canPlayType("audio/"+p).replace(/^no$/,"")):!!y};if(v.ogg=l('ogg; codecs="vorbis"'),v.opus=l('ogg; codecs="opus"',"opus"),v.mp3=l("mpeg"),v.wav=l("wav"),v.m4a=l("x-m4a"),v.aac=l("aac"),v.flac=l("flac","x-flac"),v.webm=l('webm; codecs="vorbis"'),o.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(a.edge)v.dolby=!0;else if(a.safari&&a.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var f=parseInt(RegExp.$1,10),m=parseInt(RegExp.$2,10);(f===10&&m>=11||f>10)&&(v.dolby=!0)}}}}catch{}return v}i.exports=u()},1350:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36580),v={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function u(){var o=navigator.userAgent;return/Edg\/\d+/.test(o)?(v.edge=!0,v.es2019=!0):/OPR/.test(o)?(v.opera=!0,v.es2019=!0):/Chrome\/(\d+)/.test(o)&&!a.windowsPhone?(v.chrome=!0,v.chromeVersion=parseInt(RegExp.$1,10),v.es2019=v.chromeVersion>69):/Firefox\D+(\d+)/.test(o)?(v.firefox=!0,v.firefoxVersion=parseInt(RegExp.$1,10),v.es2019=v.firefoxVersion>10):/AppleWebKit/.test(o)&&a.iOS?v.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(o)?(v.ie=!0,v.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(o)&&!a.windowsPhone?(v.safari=!0,v.safariVersion=parseInt(RegExp.$1,10),v.es2019=v.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(v.ie=!0,v.trident=!0,v.tridentVersion=parseInt(RegExp.$1,10),v.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(o)&&(v.silk=!0),v}i.exports=u()},98581:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61068),v={supportInverseAlpha:!1,supportNewBlendModes:!1};function u(){var l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",f="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",m=new Image;return m.onload=function(){var h=new Image;h.onload=function(){var p=a.create2D(h,6),y=p.getContext("2d",{willReadFrequently:!0});if(y.globalCompositeOperation="multiply",y.drawImage(m,0,0),y.drawImage(h,2,0),!y.getImageData(2,0,1,1))return!1;var x=y.getImageData(2,0,1,1).data;a.remove(h),v.supportNewBlendModes=x[0]===255&&x[1]===0&&x[2]===0},h.src=l+"/wCKxvRF"+f},m.src=l+"AP804Oa6"+f,!1}function o(){var l=a.create2D(this,2),f=l.getContext("2d",{willReadFrequently:!0});f.fillStyle="rgba(10, 20, 30, 0.5)",f.fillRect(0,0,1,1);var m=f.getImageData(0,0,1,1);if(m===null)return!1;f.putImageData(m,1,0);var h=f.getImageData(1,0,1,1),p=h.data[0]===m.data[0]&&h.data[1]===m.data[1]&&h.data[2]===m.data[2]&&h.data[3]===m.data[3];return a.remove(this),p}function c(){return typeof importScripts!="function"&&document!==void 0&&(v.supportNewBlendModes=u(),v.supportInverseAlpha=o()),v}i.exports=c()},90185:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36580),v=e(1350),u=e(61068),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function c(){var f=new ArrayBuffer(4),m=new Uint8Array(f),h=new Uint32Array(f);return m[0]=161,m[1]=178,m[2]=195,m[3]=212,h[0]===3569595041?!0:h[0]===2712847316?!1:null}function l(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch{o.localStorage=!1}o.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,o.fileSystem=!!window.requestFileSystem;var f=!1,m=function(){if(window.WebGLRenderingContext)try{var h=u.createWebGL(this),p=h.getContext("webgl")||h.getContext("experimental-webgl"),y=u.create2D(this),x=y.getContext("2d",{willReadFrequently:!0}),T=x.createImageData(1,1);return f=T.data instanceof Uint8ClampedArray,u.remove(h),u.remove(y),!!p}catch{return!1}return!1};return o.webGL=m(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,v.firefox&&v.firefoxVersion<21&&(o.getUserMedia=!1),!a.iOS&&(v.ie||v.firefox||v.chrome)&&(o.canvasBitBltShift=!0),(v.safari||v.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(o.littleEndian=c()),o.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&o.littleEndian!==null&&f,o}i.exports=l()},33553:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return g;var a,v="Fullscreen",u="FullScreen",o=["request"+v,"request"+u,"webkitRequest"+v,"webkitRequest"+u,"msRequest"+v,"msRequest"+u,"mozRequest"+u,"mozRequest"+v];for(a=0;a<o.length;a++)if(document.documentElement[o[a]]){g.available=!0,g.request=o[a];break}var c=["cancel"+u,"exit"+v,"webkitCancel"+u,"webkitExit"+v,"msCancel"+u,"msExit"+v,"mozCancel"+u,"mozExit"+v];if(g.available){for(a=0;a<c.length;a++)if(document[c[a]]){g.cancel=c[a];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(g.keyboard=!0),Object.defineProperty(g,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),g}i.exports=e()},95872:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1350),v={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function u(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(v.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(v.mspointer=!0),navigator.getGamepads&&(v.gamepads=!0),"onwheel"in window||a.ie&&"WheelEvent"in window?v.wheelEvent="wheel":"onmousewheel"in window?v.wheelEvent="mousewheel":a.firefox&&"MouseScrollEvent"in window&&(v.wheelEvent="DOMMouseScroll")),v}i.exports=u()},36580:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return g;var a=navigator.userAgent;/Windows/.test(a)?g.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(g.iOS=!0,g.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),g.iOSVersion=parseInt(RegExp.$1,10)):g.macOS=!0:/Android/.test(a)?g.android=!0:/Linux/.test(a)?g.linux=!0:/iP[ao]d|iPhone/i.test(a)?(g.iOS=!0,navigator.appVersion.match(/OS (\d+)/),g.iOSVersion=parseInt(RegExp.$1,10),g.iPhone=a.toLowerCase().indexOf("iphone")!==-1,g.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?g.kindle=!0:/CrOS/.test(a)&&(g.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(g.android=!1,g.iOS=!1,g.macOS=!1,g.windows=!0,g.windowsPhone=!0);var v=/Silk/.test(a);return(g.windows||g.macOS||g.linux&&!v||g.chromeOS)&&(g.desktop=!0),(g.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(g.desktop=!1),navigator.standalone&&(g.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(g.cordova=!0),window.ejecta!==void 0&&(g.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(g.node=!0),g.node&&typeof process.versions=="object"&&(g.nodeWebkit=!!process.versions["node-webkit"],g.electron=!!process.versions.electron),/Crosswalk/.test(a)&&(g.crosswalk=!0),g.pixelRatio=window.devicePixelRatio||1,g}i.exports=e()},53861:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72632),v={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function u(){if(typeof importScripts=="function")return v;var o=document.createElement("video"),c=!!o.canPlayType,l=/^no$/;try{c&&(o.canPlayType('video/ogg; codecs="theora"').replace(l,"")&&(v.ogg=!0),o.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(l,"")&&(v.h264=!0,v.mp4=!0),o.canPlayType("video/x-m4v").replace(l,"")&&(v.m4v=!0),o.canPlayType('video/webm; codecs="vp8, vorbis"').replace(l,"")&&(v.webm=!0),o.canPlayType('video/webm; codecs="vp9"').replace(l,"")&&(v.vp9=!0),o.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(l,"")&&(v.hls=!0))}catch{}return o.parentNode&&o.parentNode.removeChild(o),v.getVideoURL=function(f){Array.isArray(f)||(f=[f]);for(var m=0;m<f.length;m++){var h=a(f[m],"url",f[m]);if(h.indexOf("blob:")===0)return{url:h,type:""};var p;if(h.indexOf("data:")===0?p=h.split(",")[0].match(/\/(.*?);/):p=h.match(/\.([a-zA-Z0-9]+)($|\?)/),p=a(f[m],"type",p?p[1]:"").toLowerCase(),v[p])return{url:h,type:p}}return null},v}i.exports=u()},77290:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={os:e(36580),browser:e(1350),features:e(90185),input:e(95872),audio:e(10720),video:e(53861),fullscreen:e(33553),canvasFeatures:e(98581)}},65246:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new Float32Array(20),u=new a({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(o){return this._matrix.set(o),this._dirty=!0,this},reset:function(){var o=this._matrix;return o.fill(0),o[0]=1,o[6]=1,o[12]=1,o[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var o=this._data;return this._dirty&&(o.set(this._matrix),o[4]/=255,o[9]/=255,o[14]/=255,o[19]/=255,this._dirty=!1),o},brightness:function(o,c){o===void 0&&(o=0),c===void 0&&(c=!1);var l=o;return this.multiply([l,0,0,0,0,0,l,0,0,0,0,0,l,0,0,0,0,0,1,0],c)},saturate:function(o,c){o===void 0&&(o=0),c===void 0&&(c=!1);var l=o*2/3+1,f=(l-1)*-.5;return this.multiply([l,f,f,0,0,f,l,f,0,0,f,f,l,0,0,0,0,0,1,0],c)},desaturate:function(o){return o===void 0&&(o=!1),this.saturate(-1,o)},hue:function(o,c){o===void 0&&(o=0),c===void 0&&(c=!1),o=o/180*Math.PI;var l=Math.cos(o),f=Math.sin(o),m=.213,h=.715,p=.072;return this.multiply([m+l*(1-m)+f*-m,h+l*-h+f*-h,p+l*-p+f*(1-p),0,0,m+l*-m+f*.143,h+l*(1-h)+f*.14,p+l*-p+f*-.283,0,0,m+l*-m+f*-(1-m),h+l*-h+f*h,p+l*(1-p)+f*p,0,0,0,0,0,1,0],c)},grayscale:function(o,c){return o===void 0&&(o=1),c===void 0&&(c=!1),this.saturate(-o,c)},blackWhite:function(o){return o===void 0&&(o=!1),this.multiply(u.BLACK_WHITE,o)},contrast:function(o,c){o===void 0&&(o=0),c===void 0&&(c=!1);var l=o+1,f=-.5*(l-1);return this.multiply([l,0,0,0,f,0,l,0,0,f,0,0,l,0,f,0,0,0,1,0],c)},negative:function(o){return o===void 0&&(o=!1),this.multiply(u.NEGATIVE,o)},desaturateLuminance:function(o){return o===void 0&&(o=!1),this.multiply(u.DESATURATE_LUMINANCE,o)},sepia:function(o){return o===void 0&&(o=!1),this.multiply(u.SEPIA,o)},night:function(o,c){return o===void 0&&(o=.1),c===void 0&&(c=!1),this.multiply([o*-2,-o,0,0,0,-o,0,o,0,0,0,o,o*2,0,0,0,0,0,1,0],c)},lsd:function(o){return o===void 0&&(o=!1),this.multiply(u.LSD,o)},brown:function(o){return o===void 0&&(o=!1),this.multiply(u.BROWN,o)},vintagePinhole:function(o){return o===void 0&&(o=!1),this.multiply(u.VINTAGE,o)},kodachrome:function(o){return o===void 0&&(o=!1),this.multiply(u.KODACHROME,o)},technicolor:function(o){return o===void 0&&(o=!1),this.multiply(u.TECHNICOLOR,o)},polaroid:function(o){return o===void 0&&(o=!1),this.multiply(u.POLAROID,o)},shiftToBGR:function(o){return o===void 0&&(o=!1),this.multiply(u.SHIFT_BGR,o)},multiply:function(o,c){c===void 0&&(c=!1),c||this.reset();var l=this._matrix,f=v;return f.set(l),l.set([f[0]*o[0]+f[1]*o[5]+f[2]*o[10]+f[3]*o[15],f[0]*o[1]+f[1]*o[6]+f[2]*o[11]+f[3]*o[16],f[0]*o[2]+f[1]*o[7]+f[2]*o[12]+f[3]*o[17],f[0]*o[3]+f[1]*o[8]+f[2]*o[13]+f[3]*o[18],f[0]*o[4]+f[1]*o[9]+f[2]*o[14]+f[3]*o[19]+f[4],f[5]*o[0]+f[6]*o[5]+f[7]*o[10]+f[8]*o[15],f[5]*o[1]+f[6]*o[6]+f[7]*o[11]+f[8]*o[16],f[5]*o[2]+f[6]*o[7]+f[7]*o[12]+f[8]*o[17],f[5]*o[3]+f[6]*o[8]+f[7]*o[13]+f[8]*o[18],f[5]*o[4]+f[6]*o[9]+f[7]*o[14]+f[8]*o[19]+f[9],f[10]*o[0]+f[11]*o[5]+f[12]*o[10]+f[13]*o[15],f[10]*o[1]+f[11]*o[6]+f[12]*o[11]+f[13]*o[16],f[10]*o[2]+f[11]*o[7]+f[12]*o[12]+f[13]*o[17],f[10]*o[3]+f[11]*o[8]+f[12]*o[13]+f[13]*o[18],f[10]*o[4]+f[11]*o[9]+f[12]*o[14]+f[13]*o[19]+f[14],f[15]*o[0]+f[16]*o[5]+f[17]*o[10]+f[18]*o[15],f[15]*o[1]+f[16]*o[6]+f[17]*o[11]+f[18]*o[16],f[15]*o[2]+f[16]*o[7]+f[17]*o[12]+f[18]*o[17],f[15]*o[3]+f[16]*o[8]+f[17]*o[13]+f[18]*o[18],f[15]*o[4]+f[16]*o[9]+f[17]*o[14]+f[18]*o[19]+f[19]]),this._dirty=!0,this}});u.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],u.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],u.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],u.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],u.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],u.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],u.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],u.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],u.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],u.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],u.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],i.exports=u},39298:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72283),u=new a({initialize:function(c,l,f){this._rgb=[0,0,0],this.onChangeCallback=v,this.dirty=!1,this.set(c,l,f)},set:function(o,c,l){return o===void 0&&(o=0),c===void 0&&(c=0),l===void 0&&(l=0),this._rgb=[o,c,l],this.onChange(),this},equals:function(o,c,l){var f=this._rgb;return f[0]===o&&f[1]===c&&f[2]===l},onChange:function(){this.dirty=!0;var o=this._rgb;this.onChangeCallback.call(this,o[0],o[1],o[2])},r:{get:function(){return this._rgb[0]},set:function(o){this._rgb[0]=o,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(o){this._rgb[1]=o,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(o){this._rgb[2]=o,this.onChange()}},destroy:function(){this.onChangeCallback=null}});i.exports=u},84093:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};i.exports=g},32058:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97328),v=e(59994),u=e(73174),o=e(28417),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,v(f)+m),u(l,a(f)+h),l};i.exports=c},85535:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97328),v=e(40163),u=e(73174),o=e(74465),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,v(f)-m),u(l,a(f)+h),l};i.exports=c},9605:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97328),v=e(70271),u=e(73174),o=e(19298),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,v(f)+m),u(l,a(f)+h),l};i.exports=c},22529:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21843),v=e(59994),u=e(29568),o=function(c,l,f,m){return f===void 0&&(f=0),m===void 0&&(m=0),a(c,v(l)+f,u(l)+m),c};i.exports=o},5739:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29568),v=e(40163),u=e(81711),o=e(74465),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,v(f)-m),u(l,a(f)+h),l};i.exports=c},40327:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84093),v=[];v[a.BOTTOM_CENTER]=e(32058),v[a.BOTTOM_LEFT]=e(85535),v[a.BOTTOM_RIGHT]=e(9605),v[a.CENTER]=e(22529),v[a.LEFT_CENTER]=e(5739),v[a.RIGHT_CENTER]=e(27683),v[a.TOP_CENTER]=e(96439),v[a.TOP_LEFT]=e(81447),v[a.TOP_RIGHT]=e(47888),v[a.LEFT_BOTTOM]=v[a.BOTTOM_LEFT],v[a.LEFT_TOP]=v[a.TOP_LEFT],v[a.RIGHT_BOTTOM]=v[a.BOTTOM_RIGHT],v[a.RIGHT_TOP]=v[a.TOP_RIGHT];var u=function(o,c,l,f,m){return v[l](o,c,f,m)};i.exports=u},27683:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29568),v=e(70271),u=e(81711),o=e(19298),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,v(f)+m),u(l,a(f)+h),l};i.exports=c},96439:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59994),v=e(47196),u=e(28417),o=e(84349),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),u(l,a(f)+m),o(l,v(f)-h),l};i.exports=c},81447:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40163),v=e(47196),u=e(74465),o=e(84349),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),u(l,a(f)-m),o(l,v(f)-h),l};i.exports=c},47888:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70271),v=e(47196),u=e(19298),o=e(84349),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),u(l,a(f)+m),o(l,v(f)-h),l};i.exports=c},46997:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BottomCenter:e(32058),BottomLeft:e(85535),BottomRight:e(9605),Center:e(22529),LeftCenter:e(5739),QuickSet:e(40327),RightCenter:e(27683),TopCenter:e(96439),TopLeft:e(81447),TopRight:e(47888)}},93545:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84093),v=e(98611),u={In:e(46997),To:e(86639)};u=v(!1,u,a),i.exports=u},27118:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97328),v=e(59994),u=e(28417),o=e(84349),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),u(l,v(f)+m),o(l,a(f)+h),l};i.exports=c},84469:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97328),v=e(40163),u=e(74465),o=e(84349),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),u(l,v(f)-m),o(l,a(f)+h),l};i.exports=c},51577:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97328),v=e(70271),u=e(19298),o=e(84349),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),u(l,v(f)+m),o(l,a(f)+h),l};i.exports=c},90271:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97328),v=e(40163),u=e(73174),o=e(19298),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,v(f)-m),u(l,a(f)+h),l};i.exports=c},30466:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29568),v=e(40163),u=e(81711),o=e(19298),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,v(f)-m),u(l,a(f)+h),l};i.exports=c},50087:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40163),v=e(47196),u=e(19298),o=e(84349),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),u(l,a(f)-m),o(l,v(f)-h),l};i.exports=c},82590:(i,g,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84093),v=[];v[a.BOTTOM_CENTER]=e(27118),v[a.BOTTOM_LEFT]=e(84469),v[a.BOTTOM_RIGHT]=e(51577),v[a.LEFT_BOTTOM]=e(90271),v[a.LEFT_CENTER]=e(30466),v[a.LEFT_TOP]=e(50087),v[a.RIGHT_BOTTOM]=e(13555),v[a.RIGHT_CENTER]=e(99049),v[a.RIGHT_TOP]=e(67788),v[a.TOP_CENTER]=e(78170),v[a.TOP_LEFT]=e(54145),v[a.TOP_RIGHT]=e(75548);var u=function(o,c,l,f,m){return v[l](o,c,f,m)};i.exports=u},13555:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97328),v=e(70271),u=e(73174),o=e(74465),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,v(f)+m),u(l,a(f)+h),l};i.exports=c},99049:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29568),v=e(70271),u=e(81711),o=e(74465),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,v(f)+m),u(l,a(f)+h),l};i.exports=c},67788:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70271),v=e(47196),u=e(74465),o=e(84349),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),u(l,a(f)+m),o(l,v(f)-h),l};i.exports=c},78170:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59994),v=e(47196),u=e(73174),o=e(28417),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,a(f)+m),u(l,v(f)-h),l};i.exports=c},54145:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(40163),v=e(47196),u=e(73174),o=e(74465),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,a(f)-m),u(l,v(f)-h),l};i.exports=c},75548:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70271),v=e(47196),u=e(73174),o=e(19298),c=function(l,f,m,h){return m===void 0&&(m=0),h===void 0&&(h=0),o(l,a(f)+m),u(l,v(f)-h),l};i.exports=c},86639:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BottomCenter:e(27118),BottomLeft:e(84469),BottomRight:e(51577),LeftBottom:e(90271),LeftCenter:e(30466),LeftTop:e(50087),QuickSet:e(82590),RightBottom:e(13555),RightCenter:e(99049),RightTop:e(67788),TopCenter:e(78170),TopLeft:e(54145),TopRight:e(75548)}},21843:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28417),v=e(81711),u=function(o,c,l){return a(o,c),v(o,l)};i.exports=u},97328:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.y+e.height-e.height*e.originY};i.exports=g},7126:(i,g,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97328),v=e(40163),u=e(70271),o=e(47196),c=e(74118),l=function(f,m){m===void 0&&(m=new c);var h=v(f),p=o(f);return m.x=h,m.y=p,m.width=u(f)-h,m.height=a(f)-p,m};i.exports=l},59994:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.x-e.width*e.originX+e.width*.5};i.exports=g},29568:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.y-e.height*e.originY+e.height*.5};i.exports=g},40163:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.x-e.width*e.originX};i.exports=g},52088:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.width*e.originX};i.exports=g},23379:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.height*e.originY};i.exports=g},70271:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.x+e.width-e.width*e.originX};i.exports=g},47196:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.y-e.height*e.originY};i.exports=g},73174:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.y=a-e.height+e.height*e.originY,e};i.exports=g},28417:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.width*e.originX;return e.x=a+v-e.width*.5,e};i.exports=g},81711:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.height*e.originY;return e.y=a+v-e.height*.5,e};i.exports=g},74465:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x=a+e.width*e.originX,e};i.exports=g},19298:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x=a-e.width+e.width*e.originX,e};i.exports=g},84349:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.y=a+e.height*e.originY,e};i.exports=g},15252:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CenterOn:e(21843),GetBottom:e(97328),GetBounds:e(7126),GetCenterX:e(59994),GetCenterY:e(29568),GetLeft:e(40163),GetOffsetX:e(52088),GetOffsetY:e(23379),GetRight:e(70271),GetTop:e(47196),SetBottom:e(73174),SetCenterX:e(28417),SetCenterY:e(81711),SetLeft:e(74465),SetRight:e(19298),SetTop:e(84349)}},70616:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setCrisp:function(e){var a=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return a.forEach(function(v){e.style["image-rendering"]=v}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};i.exports=g},61068:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86459),v=e(8213),u=[],o=!1,c=function(){var l=function(E,A,w,b,I){A===void 0&&(A=1),w===void 0&&(w=1),b===void 0&&(b=a.CANVAS),I===void 0&&(I=!1);var R,N=h(b);return N===null?(N={parent:E,canvas:document.createElement("canvas"),type:b},b===a.CANVAS&&u.push(N),R=N.canvas):(N.parent=E,R=N.canvas),I&&(N.parent=R),R.width=A,R.height=w,o&&b===a.CANVAS&&v.disable(R.getContext("2d",{willReadFrequently:!1})),R},f=function(E,A,w){return l(E,A,w,a.CANVAS)},m=function(E,A,w){return l(E,A,w,a.WEBGL)},h=function(E){if(E===void 0&&(E=a.CANVAS),E===a.WEBGL)return null;for(var A=0;A<u.length;A++){var w=u[A];if(!w.parent&&w.type===E)return w}return null},p=function(E){var A=E instanceof HTMLCanvasElement;u.forEach(function(w){(A&&w.canvas===E||!A&&w.parent===E)&&(w.parent=null,w.canvas.width=1,w.canvas.height=1)})},y=function(){var E=0;return u.forEach(function(A){A.parent&&E++}),E},x=function(){return u.length-y()},T=function(){o=!0},C=function(){o=!1};return{create2D:f,create:l,createWebGL:m,disableSmoothing:T,enableSmoothing:C,first:h,free:x,pool:u,remove:p,total:y}};i.exports=c()},8213:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g="",e=function(){var a=function(c){for(var l=["i","webkitI","msI","mozI","oI"],f=0;f<l.length;f++){var m=l[f]+"mageSmoothingEnabled";if(m in c)return m}return null},v=function(c){return g===""&&(g=a(c)),g&&(c[g]=!0),c},u=function(c){return g===""&&(g=a(c)),g&&(c[g]=!1),c},o=function(c){return g!==null?c[g]:null};return{disable:u,enable:v,getPrefix:a,isEnabled:o}};i.exports=e()},59271:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a===void 0&&(a="none"),e.style.msTouchAction=a,e.style["ms-touch-action"]=a,e.style["touch-action"]=a,e};i.exports=g},36505:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a===void 0&&(a="none");var v=["-webkit-","-khtml-","-moz-","-ms-",""];return v.forEach(function(u){e.style[u+"user-select"]=a}),e.style["-webkit-touch-callout"]=a,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};i.exports=g},23514:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CanvasInterpolation:e(70616),CanvasPool:e(61068),Smoothing:e(8213),TouchAction:e(59271),UserSelect:e(36505)}},27119:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(22946),u=e(5657),o=e(24650),c=e(68033),l=new a({initialize:function(m,h,p,y){m===void 0&&(m=0),h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(m,h,p,y)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(f,m,h,p,y){return p===void 0&&(p=255),y===void 0&&(y=!0),this._locked=!0,this.red=f,this.green=m,this.blue=h,this.alpha=p,this._locked=!1,this.update(y)},setGLTo:function(f,m,h,p){return p===void 0&&(p=1),this._locked=!0,this.redGL=f,this.greenGL=m,this.blueGL=h,this.alphaGL=p,this._locked=!1,this.update(!0)},setFromRGB:function(f){return this._locked=!0,this.red=f.r,this.green=f.g,this.blue=f.b,f.hasOwnProperty("a")&&(this.alpha=f.a),this._locked=!1,this.update(!0)},setFromHSV:function(f,m,h){return o(f,m,h,this)},update:function(f){if(f===void 0&&(f=!1),this._locked)return this;var m=this.r,h=this.g,p=this.b,y=this.a;return this._color=v(m,h,p),this._color32=u(m,h,p,y),this._rgba="rgba("+m+","+h+","+p+","+y/255+")",f&&c(m,h,p,this),this},updateHSV:function(){var f=this.r,m=this.g,h=this.b;return c(f,m,h,this),this},clone:function(){return new l(this.r,this.g,this.b,this.a)},gray:function(f){return this.setTo(f,f,f)},random:function(f,m){f===void 0&&(f=0),m===void 0&&(m=255);var h=Math.floor(f+Math.random()*(m-f)),p=Math.floor(f+Math.random()*(m-f)),y=Math.floor(f+Math.random()*(m-f));return this.setTo(h,p,y)},randomGray:function(f,m){f===void 0&&(f=0),m===void 0&&(m=255);var h=Math.floor(f+Math.random()*(m-f));return this.setTo(h,h,h)},saturate:function(f){return this.s+=f/100,this},desaturate:function(f){return this.s-=f/100,this},lighten:function(f){return this.v+=f/100,this},darken:function(f){return this.v-=f/100,this},brighten:function(f){var m=this.r,h=this.g,p=this.b;return m=Math.max(0,Math.min(255,m-Math.round(255*-(f/100)))),h=Math.max(0,Math.min(255,h-Math.round(255*-(f/100)))),p=Math.max(0,Math.min(255,p-Math.round(255*-(f/100)))),this.setTo(m,h,p)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(f){this.gl[0]=Math.min(Math.abs(f),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(f){this.gl[1]=Math.min(Math.abs(f),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(f){this.gl[2]=Math.min(Math.abs(f),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(f){this.gl[3]=Math.min(Math.abs(f),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(f){f=Math.floor(Math.abs(f)),this.r=Math.min(f,255),this.gl[0]=f/255,this.update(!0)}},green:{get:function(){return this.g},set:function(f){f=Math.floor(Math.abs(f)),this.g=Math.min(f,255),this.gl[1]=f/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(f){f=Math.floor(Math.abs(f)),this.b=Math.min(f,255),this.gl[2]=f/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(f){f=Math.floor(Math.abs(f)),this.a=Math.min(f,255),this.gl[3]=f/255,this.update()}},h:{get:function(){return this._h},set:function(f){this._h=f,o(f,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(f){this._s=f,o(this._h,f,this._v,this)}},v:{get:function(){return this._v},set:function(f){this._v=f,o(this._h,this._s,f,this)}}});i.exports=l},30245:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22946),v=function(u){u===void 0&&(u=1024);var o=[],c=255,l,f=255,m=0,h=0;for(l=0;l<=c;l++)o.push({r:f,g:l,b:h,color:a(f,l,h)});for(m=255,l=c;l>=0;l--)o.push({r:l,g:m,b:h,color:a(l,m,h)});for(f=0,l=0;l<=c;l++,m--)o.push({r:f,g:m,b:l,color:a(f,m,l)});for(m=0,h=255,l=0;l<=c;l++,h--,f++)o.push({r:f,g:m,b:h,color:a(f,m,h)});if(u===1024)return o;var p=[],y=0,x=1024/u;for(l=0;l<u;l++)p.push(o[Math.floor(y)]),y+=x;return p};i.exports=v},86672:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(a.a=e>>>24),a};i.exports=g},25409:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a=e.toString(16);return a.length===1?"0"+a:a};i.exports=g},22946:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e<<16|a<<8|v};i.exports=g},5657:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){return u<<24|e<<16|a<<8|v};i.exports=g},74777:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27119),v=e(59998),u=function(o,c,l){var f=l,m=l,h=l;if(c!==0){var p=l<.5?l*(1+c):l+c-l*c,y=2*l-p;f=v(y,p,o+1/3),m=v(y,p,o),h=v(y,p,o-1/3)}var x=new a;return x.setGLTo(f,m,h,1)};i.exports=u},89263:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(24650),v=function(u,o){u===void 0&&(u=1),o===void 0&&(o=1);for(var c=[],l=0;l<=359;l++)c.push(a(l/359,u,o));return c};i.exports=v},24650:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22946);function v(o,c,l,f){var m=(o+c*6)%6,h=Math.min(m,4-m,1);return Math.round(255*(f-f*l*Math.max(0,h)))}var u=function(o,c,l,f){c===void 0&&(c=1),l===void 0&&(l=1);var m=v(5,o,c,l),h=v(3,o,c,l),p=v(1,o,c,l);return f?f.setTo?f.setTo(m,h,p,f.alpha,!0):(f.r=m,f.g=h,f.b=p,f.color=a(m,h,p),f):{r:m,g:h,b:p,color:a(m,h,p)}};i.exports=u},91487:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27119),v=function(u){var o=new a;u=u.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(h,p,y,x){return p+p+y+y+x+x});var c=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);if(c){var l=parseInt(c[1],16),f=parseInt(c[2],16),m=parseInt(c[3],16);o.setTo(l,f,m)}return o};i.exports=v},59998:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return v<0&&(v+=1),v>1&&(v-=1),v<.16666666666666666?e+(a-e)*6*v:v<.5?a:v<.6666666666666666?e+(a-e)*(.6666666666666666-v)*6:e};i.exports=g},74853:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27119),v=e(15978),u=function(o){var c=v(o);return new a(c.r,c.g,c.b,c.a)};i.exports=u},15978:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};i.exports=g},53756:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42798),v=function(c,l,f,m,h,p,y,x){y===void 0&&(y=100),x===void 0&&(x=0);var T=x/y;return{r:a(c,m,T),g:a(l,h,T),b:a(f,p,T)}},u=function(c,l,f,m){return f===void 0&&(f=100),m===void 0&&(m=0),v(c.r,c.g,c.b,l.r,l.g,l.b,f,m)},o=function(c,l,f,m,h,p){return h===void 0&&(h=100),p===void 0&&(p=0),v(c.r,c.g,c.b,l,f,m,h,p)};i.exports={RGBWithRGB:v,ColorWithRGB:o,ColorWithColor:u}},73904:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27119),v=function(u){return new a(u.r,u.g,u.b,u.a)};i.exports=v},26841:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27119),v=function(u){var o=new a,c=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(u.toLowerCase());if(c){var l=parseInt(c[1],10),f=parseInt(c[2],10),m=parseInt(c[3],10),h=c[4]!==void 0?parseFloat(c[4]):1;o.setTo(l,f,m,h*255)}return o};i.exports=v},68033:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){u===void 0&&(u={h:0,s:0,v:0}),e/=255,a/=255,v/=255;var o=Math.min(e,a,v),c=Math.max(e,a,v),l=c-o,f=0,m=c===0?0:l/c,h=c;return c!==o&&(c===e?f=(a-v)/l+(a<v?6:0):c===a?f=(v-e)/l+2:c===v&&(f=(e-a)/l+4),f/=6),u.hasOwnProperty("_h")?(u._h=f,u._s=m,u._v=h):(u.h=f,u.s=m,u.v=h),u};i.exports=g},4880:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25409),v=function(u,o,c,l,f){return l===void 0&&(l=255),f===void 0&&(f="#"),f==="#"?"#"+((1<<24)+(u<<16)+(o<<8)+c).toString(16).slice(1,7):"0x"+a(l)+a(u)+a(o)+a(c)};i.exports=v},37243:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(17489),v=e(27119),u=function(o,c){return o===void 0&&(o=0),c===void 0&&(c=255),new v(a(o,c),a(o,c),a(o,c))};i.exports=u},93222:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(91487),v=e(74853),u=e(73904),o=e(26841),c=function(l){var f=typeof l;switch(f){case"string":return l.substr(0,3).toLowerCase()==="rgb"?o(l):a(l);case"number":return v(l);case"object":return u(l)}};i.exports=c},95509:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27119);a.ColorSpectrum=e(30245),a.ColorToRGBA=e(86672),a.ComponentToHex=e(25409),a.GetColor=e(22946),a.GetColor32=e(5657),a.HexStringToColor=e(91487),a.HSLToColor=e(74777),a.HSVColorWheel=e(89263),a.HSVToRGB=e(24650),a.HueToComponent=e(59998),a.IntegerToColor=e(74853),a.IntegerToRGB=e(15978),a.Interpolate=e(53756),a.ObjectToColor=e(73904),a.RandomRGB=e(37243),a.RGBStringToColor=e(26841),a.RGBToHSV=e(68033),a.RGBToString=e(4880),a.ValueToColor=e(93222),i.exports=a},24816:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Align:e(93545),BaseShader:e(31053),Bounds:e(15252),Canvas:e(23514),Color:e(95509),ColorMatrix:e(65246),Masks:e(93310),RGB:e(39298)}},76756:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(61286),u=new a({initialize:function(c,l,f,m,h,p){l||(l=c.sys.make.image({x:f,y:m,key:h,frame:p,add:!1})),this.bitmapMask=l,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(o){this.bitmapMask=o},preRenderWebGL:function(o,c,l){o.pipelines.BITMAPMASK_PIPELINE.beginMask(this,c,l)},postRenderWebGL:function(o,c,l){o.pipelines.BITMAPMASK_PIPELINE.endMask(this,c,l)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});v.register("bitmapMask",function(o,c,l,f,m){return new u(this.scene,o,c,l,f,m)}),i.exports=u},63037:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c){this.geometryMask=c,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(u){return this.geometryMask=u,this},setInvertAlpha:function(u){return u===void 0&&(u=!0),this.invertAlpha=u,this},preRenderWebGL:function(u,o,c){var l=u.gl;u.flush(),u.maskStack.length===0&&(l.enable(l.STENCIL_TEST),l.clear(l.STENCIL_BUFFER_BIT),u.maskCount=0),u.currentCameraMask.mask!==this&&(u.currentMask.mask=this),u.maskStack.push({mask:this,camera:c}),this.applyStencil(u,c,!0),u.maskCount++},applyStencil:function(u,o,c){var l=u.gl,f=this.geometryMask,m=u.maskCount,h=255;l.colorMask(!1,!1,!1,!1),c?(l.stencilFunc(l.EQUAL,m,h),l.stencilOp(l.KEEP,l.KEEP,l.INCR),m++):(l.stencilFunc(l.EQUAL,m+1,h),l.stencilOp(l.KEEP,l.KEEP,l.DECR)),this.level=m,f.renderWebGL(u,f,o),u.flush(),l.colorMask(!0,!0,!0,!0),l.stencilOp(l.KEEP,l.KEEP,l.KEEP),this.invertAlpha?l.stencilFunc(l.NOTEQUAL,m,h):l.stencilFunc(l.EQUAL,m,h)},postRenderWebGL:function(u){var o=u.gl;u.maskStack.pop(),u.maskCount--,u.flush();var c=u.currentMask;if(u.maskStack.length===0)c.mask=null,o.disable(o.STENCIL_TEST);else{var l=u.maskStack[u.maskStack.length-1];l.mask.applyStencil(u,l.camera,!1),u.currentCameraMask.mask!==l.mask?(c.mask=l.mask,c.camera=l.camera):c.mask=null}},preRenderCanvas:function(u,o,c){var l=this.geometryMask;u.currentContext.save(),l.renderCanvas(u,l,c,null,null,!0),u.currentContext.clip()},postRenderCanvas:function(u){u.currentContext.restore()},destroy:function(){this.geometryMask=null}});i.exports=v},93310:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BitmapMask:e(76756),GeometryMask:e(63037)}},31053:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c,l,f){(!c||c==="")&&(c=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!l||l==="")&&(l=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),f===void 0&&(f=null),this.key=o,this.fragmentSrc=c,this.vertexSrc=l,this.uniforms=f}});i.exports=v},99584:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v;if(a)typeof a=="string"?v=document.getElementById(a):typeof a=="object"&&a.nodeType===1&&(v=a);else if(e.parentElement||a===null)return e;return v||(v=document.body),v.appendChild(e),e};i.exports=g},85178:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99584),v=function(u){var o=u.config;if(!(!o.parent||!o.domCreateContainer)){var c=document.createElement("div");c.style.cssText=["display: block;","width: "+u.scale.width+"px;","height: "+u.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+o.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),u.domContainer=c,a(c,o.parent)}};i.exports=v},21546:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36580),v=function(u){if(document.readyState==="complete"||document.readyState==="interactive"){u();return}var o=function(){document.removeEventListener("deviceready",o,!0),document.removeEventListener("DOMContentLoaded",o,!0),window.removeEventListener("load",o,!0),u()};document.body?a.cordova?document.addEventListener("deviceready",o,!1):(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.setTimeout(o,20)};i.exports=v},74181:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){if(!e)return window.innerHeight;var a=Math.abs(window.orientation),v={w:0,h:0},u=document.createElement("div");return u.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(u),v.w=a===90?u.offsetHeight:window.innerWidth,v.h=a===90?window.innerWidth:u.offsetHeight,document.documentElement.removeChild(u),u=null,Math.abs(window.orientation)!==90?v.h:v.w};i.exports=g},9229:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55301),v=function(u,o){var c=window.screen,l=c?c.orientation||c.mozOrientation||c.msOrientation:!1;if(l&&typeof l.type=="string")return l.type;if(typeof l=="string")return l;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return a.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return a.ORIENTATION.LANDSCAPE}else return o>u?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE};i.exports=v},2893:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a;return e!==""&&(typeof e=="string"?a=document.getElementById(e):e&&e.nodeType===1&&(a=e)),a||(a=document.body),a};i.exports=g},89200:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a="";try{if(window.DOMParser){var v=new DOMParser;a=v.parseFromString(e,"text/xml")}else a=new ActiveXObject("Microsoft.XMLDOM"),a.loadXML(e)}catch{a=null}return!a||!a.documentElement||a.getElementsByTagName("parsererror").length?null:a};i.exports=g},55638:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){e.parentNode&&e.parentNode.removeChild(e)};i.exports=g},27385:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72283),u=new a({initialize:function(){this.isRunning=!1,this.callback=v,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var c=this;this.step=function l(f){c.callback(f),c.isRunning&&(c.timeOutID=window.requestAnimationFrame(l))},this.stepTimeout=function l(){c.isRunning&&(c.timeOutID=window.setTimeout(l,c.delay)),c.callback(window.performance.now())}},start:function(o,c,l){this.isRunning||(this.callback=o,this.isSetTimeOut=c,this.delay=l,this.isRunning=!0,this.timeOutID=c?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=v}});i.exports=u},3590:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={AddToDOM:e(99584),DOMContentLoaded:e(21546),GetInnerHeight:e(74181),GetScreenOrientation:e(9229),GetTarget:e(2893),ParseXML:e(89200),RemoveFromDOM:e(55638),RequestAnimationFrame:e(27385)};i.exports=a},78491:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(6659),u=e(91963),o=new a({Extends:v,initialize:function(){v.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});u.register("EventEmitter",o,"events"),i.exports=o},95146:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={EventEmitter:e(78491)}},20170:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f){f===void 0&&(f=1),v.call(this,u.BARREL,l),this.amount=f}});i.exports=o},51182:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f,m,h,p,y,x){m===void 0&&(m=1),h===void 0&&(h=1),p===void 0&&(p=1),y===void 0&&(y=1),x===void 0&&(x=4),v.call(this,u.BLOOM,l),this.steps=x,this.offsetX=m,this.offsetY=h,this.blurStrength=p,this.strength=y,this.glcolor=[1,1,1],f!=null&&(this.color=f)},color:{get:function(){var c=this.glcolor;return(c[0]*255<<16)+(c[1]*255<<8)+(c[2]*255|0)},set:function(c){var l=this.glcolor;l[0]=(c>>16&255)/255,l[1]=(c>>8&255)/255,l[2]=(c&255)/255}}});i.exports=o},51498:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f,m,h,p,y,x){m===void 0&&(m=2),h===void 0&&(h=2),p===void 0&&(p=1),x===void 0&&(x=4),v.call(this,u.BLUR,l),this.quality=0,this.x=m,this.y=h,this.steps=x,this.strength=p,this.glcolor=[1,1,1],y!=null&&(this.color=y)},color:{get:function(){var c=this.glcolor;return(c[0]*255<<16)+(c[1]*255<<8)+(c[2]*255|0)},set:function(c){var l=this.glcolor;l[0]=(c>>16&255)/255,l[1]=(c>>8&255)/255,l[2]=(c&255)/255}}});i.exports=o},12042:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f,m,h,p,y,x,T){f===void 0&&(f=.5),m===void 0&&(m=1),h===void 0&&(h=.2),p===void 0&&(p=!1),y===void 0&&(y=1),x===void 0&&(x=1),T===void 0&&(T=1),v.call(this,u.BOKEH,l),this.radius=f,this.amount=m,this.contrast=h,this.isTiltShift=p,this.strength=T,this.blurX=y,this.blurY=x}});i.exports=o},69900:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f,m,h,p,y){f===void 0&&(f=8),p===void 0&&(p=1),y===void 0&&(y=.005),v.call(this,u.CIRCLE,l),this.scale=p,this.feather=y,this.thickness=f,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],m!=null&&(this.color=m),h!=null&&(this.backgroundColor=h)},color:{get:function(){var c=this.glcolor;return(c[0]*255<<16)+(c[1]*255<<8)+(c[2]*255|0)},set:function(c){var l=this.glcolor;l[0]=(c>>16&255)/255,l[1]=(c>>8&255)/255,l[2]=(c&255)/255}},backgroundColor:{get:function(){var c=this.glcolor2;return(c[0]*255<<16)+(c[1]*255<<8)+(c[2]*255|0)},set:function(c){var l=this.glcolor2;l[0]=(c>>16&255)/255,l[1]=(c>>8&255)/255,l[2]=(c&255)/255}}});i.exports=o},48991:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(65246),u=e(47406),o=new a({Extends:v,initialize:function(l){v.call(this),this.type=u.COLOR_MATRIX,this.gameObject=l,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});i.exports=o},47551:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c){this.type=o,this.gameObject=c,this.active=!0},setActive:function(u){return this.active=u,this},destroy:function(){this.gameObject=null,this.active=!1}});i.exports=v},47909:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f,m,h){f===void 0&&(f="__WHITE"),m===void 0&&(m=.005),h===void 0&&(h=.005),v.call(this,u.DISPLACEMENT,l),this.x=m,this.y=h,this.glTexture,this.setTexture(f)},setTexture:function(c){var l=this.gameObject.scene.sys.textures.getFrame(c);return l&&(this.glTexture=l.glTexture),this}});i.exports=o},18919:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f,m,h,p){m===void 0&&(m=4),h===void 0&&(h=0),p===void 0&&(p=!1),v.call(this,u.GLOW,l),this.outerStrength=m,this.innerStrength=h,this.knockout=p,this.glcolor=[1,1,1,1],f!==void 0&&(this.color=f)},color:{get:function(){var c=this.glcolor;return(c[0]*255<<16)+(c[1]*255<<8)+(c[2]*255|0)},set:function(c){var l=this.glcolor;l[0]=(c>>16&255)/255,l[1]=(c>>8&255)/255,l[2]=(c&255)/255}}});i.exports=o},62494:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f,m,h,p,y,x,T,C){h===void 0&&(h=.2),p===void 0&&(p=0),y===void 0&&(y=0),x===void 0&&(x=0),T===void 0&&(T=1),C===void 0&&(C=0),v.call(this,u.GRADIENT,l),this.alpha=h,this.size=C,this.fromX=p,this.fromY=y,this.toX=x,this.toY=T,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],f!=null&&(this.color1=f),m!=null&&(this.color2=m)},color1:{get:function(){var c=this.glcolor1;return(c[0]<<16)+(c[1]<<8)+(c[2]|0)},set:function(c){var l=this.glcolor1;l[0]=c>>16&255,l[1]=c>>8&255,l[2]=c&255}},color2:{get:function(){var c=this.glcolor2;return(c[0]<<16)+(c[1]<<8)+(c[2]|0)},set:function(c){var l=this.glcolor2;l[0]=c>>16&255,l[1]=c>>8&255,l[2]=c&255}}});i.exports=o},68897:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f){f===void 0&&(f=1),v.call(this,u.PIXELATE,l),this.amount=f}});i.exports=o},58575:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f,m,h,p,y,x,T){f===void 0&&(f=0),m===void 0&&(m=0),h===void 0&&(h=.1),p===void 0&&(p=1),x===void 0&&(x=6),T===void 0&&(T=1),v.call(this,u.SHADOW,l),this.x=f,this.y=m,this.decay=h,this.power=p,this.glcolor=[0,0,0,1],this.samples=x,this.intensity=T,y!==void 0&&(this.color=y)},color:{get:function(){var c=this.glcolor;return(c[0]*255<<16)+(c[1]*255<<8)+(c[2]*255|0)},set:function(c){var l=this.glcolor;l[0]=(c>>16&255)/255,l[1]=(c>>8&255)/255,l[2]=(c&255)/255}}});i.exports=o},33755:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f,m,h,p){f===void 0&&(f=.5),m===void 0&&(m=.5),h===void 0&&(h=3),p===void 0&&(p=!1),v.call(this,u.SHINE,l),this.speed=f,this.lineWidth=m,this.gradient=h,this.reveal=p}});i.exports=o},24949:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f,m,h,p){f===void 0&&(f=.5),m===void 0&&(m=.5),h===void 0&&(h=.5),p===void 0&&(p=.5),v.call(this,u.VIGNETTE,l),this.x=f,this.y=m,this.radius=h,this.strength=p}});i.exports=o},66241:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47551),u=e(47406),o=new a({Extends:v,initialize:function(l,f,m,h,p){f===void 0&&(f=.1),m===void 0&&(m=0),h===void 0&&(h=0),p===void 0&&(p=!1),v.call(this,u.WIPE,l),this.progress=0,this.wipeWidth=f,this.direction=m,this.axis=h,this.reveal=p}});i.exports=o},47406:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};i.exports=g},96910:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(98611),v=e(47406),u={Barrel:e(20170),Controller:e(47551),Bloom:e(51182),Blur:e(51498),Bokeh:e(12042),Circle:e(69900),ColorMatrix:e(48991),Displacement:e(47909),Glow:e(18919),Gradient:e(62494),Pixelate:e(68897),Shadow:e(58575),Shine:e(33755),Vignette:e(24949),Wipe:e(66241)};u=a(!1,u,v),i.exports=u},88933:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95723),v=e(20494),u=function(o,c,l){c.x=v(l,"x",0),c.y=v(l,"y",0),c.depth=v(l,"depth",0),c.flipX=v(l,"flipX",!1),c.flipY=v(l,"flipY",!1);var f=v(l,"scale",null);typeof f=="number"?c.setScale(f):f!==null&&(c.scaleX=v(f,"x",1),c.scaleY=v(f,"y",1));var m=v(l,"scrollFactor",null);typeof m=="number"?c.setScrollFactor(m):m!==null&&(c.scrollFactorX=v(m,"x",1),c.scrollFactorY=v(m,"y",1)),c.rotation=v(l,"rotation",0);var h=v(l,"angle",null);h!==null&&(c.angle=h),c.alpha=v(l,"alpha",1);var p=v(l,"origin",null);if(typeof p=="number")c.setOrigin(p);else if(p!==null){var y=v(p,"x",.5),x=v(p,"y",.5);c.setOrigin(y,x)}c.blendMode=v(l,"blendMode",a.NORMAL),c.visible=v(l,"visible",!0);var T=v(l,"add",!0);return T&&o.sys.displayList.add(c),c.preUpdate&&o.sys.updateList.add(c),c};i.exports=u},32291:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20494),v=function(u,o){var c=a(o,"anims",null);if(c===null)return u;if(typeof c=="string")u.anims.play(c);else if(typeof c=="object"){var l=u.anims,f=a(c,"key",void 0);if(f){var m=a(c,"startFrame",void 0),h=a(c,"delay",0),p=a(c,"repeat",0),y=a(c,"repeatDelay",0),x=a(c,"yoyo",!1),T=a(c,"play",!1),C=a(c,"delayedPlay",0),E={key:f,delay:h,repeat:p,repeatDelay:y,yoyo:x,startFrame:m};T?l.play(E):C>0?l.playAfterDelay(E,C):l.load(E)}}return u};i.exports=v},91713:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(71207),u=e(91963),o=e(56631),c=e(7599),l=e(17922),f=new a({Extends:v,initialize:function(h){v.call(this,h),this.sortChildrenFlag=!1,this.scene=h,this.systems=h.sys,this.events=h.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(c.BOOT,this.boot,this),this.events.on(c.START,this.start,this)},boot:function(){this.events.once(c.DESTROY,this.destroy,this)},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.parentContainer&&m.parentContainer.remove(m),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(o.ADDED_TO_SCENE,m,this.scene),this.events.emit(c.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(o.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(c.REMOVED_FROM_SCENE,m,this.scene)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(l(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,h){return m._depth-h._depth},getChildren:function(){return this.list},shutdown:function(){for(var m=this.list;m.length;)m[0].destroy(!0);this.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});u.register("DisplayList",f,"displayList"),i.exports=f},89980:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(48129),u=e(81078),o=e(6659),c=e(56631),l=e(7599),f=new a({Extends:o,initialize:function(h,p){o.call(this),this.scene=h,this.displayList=null,this.type=p,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(c.ADDED_TO_SCENE,this.addedToScene,this),this.on(c.REMOVED_FROM_SCENE,this.removedFromScene,this),h.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(m,h){return this.data||(this.data=new u(this)),this.data.set(m,h),this},incData:function(m,h){return this.data||(this.data=new u(this)),this.data.inc(m,h),this},toggleData:function(m){return this.data||(this.data=new u(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new u(this)),this.data.get(m)},setInteractive:function(m,h,p){return this.scene.sys.input.enable(this,m,h,p),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return v(this)},willRender:function(m){var h=this.displayList&&this.displayList.active?this.displayList.willRender(m):!0;return!(!h||f.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,h=this.parentContainer,p=[];h&&(p.unshift(h.getIndex(m)),m=h,h.parentContainer);)h=h.parentContainer;return this.displayList?p.unshift(this.displayList.getIndex(m)):p.unshift(this.scene.sys.displayList.getIndex(m)),p},addToDisplayList:function(m){return m===void 0&&(m=this.scene.sys.displayList),this.displayList&&this.displayList!==m&&this.removeFromDisplayList(),m.exists(this)||(this.displayList=m,m.add(this,!0),m.queueDepthSort(),this.emit(c.ADDED_TO_SCENE,this,this.scene),m.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var m=this.displayList||this.scene.sys.displayList;return m&&m.exists(this)&&(m.remove(this,!0),m.queueDepthSort(),this.displayList=null,this.emit(c.REMOVED_FROM_SCENE,this,this.scene),m.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(m){!this.scene||this.ignoreDestroy||(m===void 0&&(m=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(c.DESTROY,this,m),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});f.RENDER_MASK=15,i.exports=f},99325:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(91963),u=e(7599),o=new a({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(c,l){o.prototype.hasOwnProperty(c)||(o.prototype[c]=l)},o.remove=function(c){o.prototype.hasOwnProperty(c)&&delete o.prototype[c]},v.register("GameObjectCreator",o,"make"),i.exports=o},61286:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(91963),u=e(7599),o=new a({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},existing:function(c){return(c.renderCanvas||c.renderWebGL)&&this.displayList.add(c),c.preUpdate&&this.updateList.add(c),c},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(c,l){o.prototype.hasOwnProperty(c)||(o.prototype[c]=l)},o.remove=function(c){o.prototype.hasOwnProperty(c)&&delete o.prototype[c]},v.register("GameObjectFactory",o,"add"),i.exports=o},73329:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(69360),v=new a,u=new a,o=new a,c={camera:v,sprite:u,calc:o},l=function(f,m,h){var p=v,y=u,x=o;return y.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY),p.copyFrom(m.matrix),h?(p.multiplyWithOffset(h,-m.scrollX*f.scrollFactorX,-m.scrollY*f.scrollFactorY),y.e=f.x,y.f=f.y):(y.e-=m.scrollX*f.scrollFactorX,y.f-=m.scrollY*f.scrollFactorY),p.multiply(y,x),c};i.exports=l},92034:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(74623),u=e(91963),o=e(7599),c=new a({Extends:v,initialize:function(f){v.call(this),this.checkQueue=!0,this.scene=f,this.systems=f.sys,f.sys.events.once(o.BOOT,this.boot,this),f.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var l=this.systems.events;l.on(o.PRE_UPDATE,this.update,this),l.on(o.UPDATE,this.sceneUpdate,this),l.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(l,f){for(var m=this._active,h=m.length,p=0;p<h;p++){var y=m[p];y.active&&y.preUpdate.call(y,l,f)}},shutdown:function(){for(var l=this._active.length;l--;)this._active[l].destroy(!0);for(l=this._pending.length;l--;)this._pending[l].destroy(!0);for(l=this._destroy.length;l--;)this._destroy[l].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var f=this.systems.events;f.off(o.PRE_UPDATE,this.update,this),f.off(o.UPDATE,this.sceneUpdate,this),f.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});u.register("UpdateList",c,"updateList"),i.exports=c},8810:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o,c,l,f,m,h,p,y,x,T,C){var E=v.x-a.displayOriginX+o,A=v.y-a.displayOriginY+c,w=E+v.w,b=A+v.h,I=l.getXRound(E,A,f),R=l.getYRound(E,A,f),N=l.getXRound(E,b,f),F=l.getYRound(E,b,f),P=l.getXRound(w,b,f),O=l.getYRound(w,b,f),M=l.getXRound(w,A,f),L=l.getYRound(w,A,f);e.batchQuad(a,I,R,N,F,P,O,M,L,u.u0,u.v0,u.u1,u.v1,m,h,p,y,x,T,C)};i.exports=g},82173:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){if(v===void 0&&(v=!1),u===void 0)return u={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},u;var o=e.text,c=o.length,l=e.maxWidth,f=e.wordWrapCharCode,m=Number.MAX_VALUE,h=Number.MAX_VALUE,p=0,y=0,x=e.fontData.chars,T=e.fontData.lineHeight,C=e.letterSpacing,E=e.lineSpacing,A=0,w=0,b=0,I=null,R=e._align,N=0,F=0,P=e.fontSize/e.fontData.size,O=P*e.scaleX,M=P*e.scaleY,L=null,k=0,V=[],W=Number.MAX_VALUE,K=0,B=0,G=0,D,$=[],z=[],H=null;if(l>0){for(D=0;D<c;D++){if(b=o.charCodeAt(D),b===10){H!==null&&($.push({word:H.word,i:H.i,x:H.x*O,y:H.y*M,w:H.w*O,h:H.h*M,cr:!0}),H=null),A=0,w+=T+E,L=null;continue}if(I=x[b],!!I){if(L!==null)var Y=I.kerning[k];b===f?H!==null&&($.push({word:H.word,i:H.i,x:H.x*O,y:H.y*M,w:H.w*O,h:H.h*M,cr:!1}),H=null):(H===null&&(H={word:"",i:D,x:A,y:w,w:0,h:T,cr:!1}),H.word=H.word.concat(o[D]),H.w+=I.xOffset+I.xAdvance+(Y!==void 0?Y:0)),A+=I.xAdvance+C,L=I,k=b}}H!==null&&$.push({word:H.word,i:H.i,x:H.x*O,y:H.y*M,w:H.w*O,h:H.h*M,cr:!1}),A=0,w=0,L=null,k=0;var Z,Q=0,tt=[];for(D=0;D<$.length;D++){var et=$[D],lt=et.x,ut=et.x+et.w;if(Z){var ct=lt-(Z.x+Z.w);Q=lt-(ct+Z.w),Z=null}var ht=lt-Q,gt=ut-Q;ht>l||gt>l?(tt.push(et.i-1),et.cr?(tt.push(et.i+et.word.length),Q=0,Z=null):Z=et):et.cr&&(tt.push(et.i+et.word.length),Q=0,Z=null)}var yt=function(Le,ye,Ye){return Le.substr(0,ye)+Ye+Le.substr(ye+1)};for(D=tt.length-1;D>=0;D--)o=yt(o,tt[D],`
`);u.wrappedText=o,c=o.length,$=[],H=null}var Et=0;for(D=0;D<c;D++){if(b=o.charCodeAt(D),b===10){H!==null&&($.push({word:H.word,i:H.i,x:H.x*O,y:H.y*M,w:H.w*O,h:H.h*M}),H=null),A=0,w+=T+E,L=null,V[B]=G,G>K&&(K=G),G<W&&(W=G),B++,G=0;continue}if(I=x[b],!!I){if(N=A,F=w,L!==null){var bt=I.kerning[k];N+=bt!==void 0?bt:0}m>N&&(m=N),h>F&&(h=F);var pt=N+I.xAdvance,wt=F+T;p<pt&&(p=pt),y<wt&&(y=wt);var Tt=I.xOffset+I.xAdvance+(bt!==void 0?bt:0);b===f?H!==null&&($.push({word:H.word,i:H.i,x:H.x*O,y:H.y*M,w:H.w*O,h:H.h*M}),H=null):(H===null&&(H={word:"",i:Et,x:A,y:w,w:0,h:T}),H.word=H.word.concat(o[D]),H.w+=Tt),z.push({i:Et,idx:D,char:o[D],code:b,x:(I.xOffset+N)*P,y:(I.yOffset+w)*P,w:I.width*P,h:I.height*P,t:w*P,r:pt*P,b:T*P,line:B,glyph:I}),A+=I.xAdvance+C+(bt!==void 0?bt:0),L=I,k=b,G=pt*P,Et++}}if(H!==null&&$.push({word:H.word,i:H.i,x:H.x*O,y:H.y*M,w:H.w*O,h:H.h*M}),V[B]=G,G>K&&(K=G),G<W&&(W=G),R>0)for(var Gt=0;Gt<z.length;Gt++){var Bt=z[Gt];if(R===1){var Xt=(K-V[Bt.line])/2;Bt.x+=Xt,Bt.r+=Xt}else if(R===2){var te=K-V[Bt.line];Bt.x+=te,Bt.r+=te}}var Kt=u.local,Wt=u.global,oe=u.lines;return Kt.x=m*P,Kt.y=h*P,Kt.width=p*P,Kt.height=y*P,Wt.x=e.x-e._displayOriginX+m*O,Wt.y=e.y-e._displayOriginY+h*M,Wt.width=p*O,Wt.height=y*M,oe.shortest=W,oe.longest=K,oe.lengths=V,a&&(Kt.x=Math.ceil(Kt.x),Kt.y=Math.ceil(Kt.y),Kt.width=Math.ceil(Kt.width),Kt.height=Math.ceil(Kt.height),Wt.x=Math.ceil(Wt.x),Wt.y=Math.ceil(Wt.y),Wt.width=Math.ceil(Wt.width),Wt.height=Math.ceil(Wt.height),oe.shortest=Math.ceil(W),oe.longest=Math.ceil(K)),v&&(e._displayOriginX=e.originX*Kt.width,e._displayOriginY=e.originY*Kt.height,Wt.x=e.x-e._displayOriginX*e.scaleX,Wt.y=e.y-e._displayOriginY*e.scaleY,a&&(Wt.x=Math.ceil(Wt.x),Wt.y=Math.ceil(Wt.y))),u.words=$,u.characters=z,u.lines.height=T,u.scale=P,u.scaleX=e.scaleX,u.scaleY=e.scaleY,u};i.exports=g},68298:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(31476),v=function(u,o,c,l,f,m,h){var p=u.sys.textures.get(c),y=p.get(l),x=u.sys.cache.xml.get(f);if(y&&x){var T=a(x,y,m,h,p);return u.sys.cache.bitmapFont.add(o,{data:T,texture:c,frame:l,fromAtlas:!0}),!0}else return!1};i.exports=v},39860:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10850),v=function(u,o){var c=o.width,l=o.height,f=Math.floor(c/2),m=Math.floor(l/2),h=a(o,"chars","");if(h!==""){var p=a(o,"image",""),y=u.sys.textures.getFrame(p),x=y.cutX,T=y.cutY,C=y.source.width,E=y.source.height,A=a(o,"offset.x",0),w=a(o,"offset.y",0),b=a(o,"spacing.x",0),I=a(o,"spacing.y",0),R=a(o,"lineSpacing",0),N=a(o,"charsPerRow",null);N===null&&(N=C/c,N>h.length&&(N=h.length));for(var F=A,P=w,O={retroFont:!0,font:p,size:c,lineHeight:l+R,chars:{}},M=0,L=0;L<h.length;L++){var k=h.charCodeAt(L),V=(x+F)/C,W=(T+P)/E,K=(x+F+c)/C,B=(T+P+l)/E;O.chars[k]={x:F,y:P,width:c,height:l,centerX:f,centerY:m,xOffset:0,yOffset:0,xAdvance:c,data:{},kerning:{},u0:V,v0:W,u1:K,v1:B},M++,M===N?(M=0,F=A,P+=l+I):F+=c+b}var G={data:O,frame:null,texture:p};return G}};i.exports=v},31476:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(a,v){return parseInt(a.getAttribute(v),10)}var e=function(a,v,u,o,c){u===void 0&&(u=0),o===void 0&&(o=0);var l=v.cutX,f=v.cutY,m=v.source.width,h=v.source.height,p=v.sourceIndex,y={},x=a.getElementsByTagName("info")[0],T=a.getElementsByTagName("common")[0];y.font=x.getAttribute("face"),y.size=g(x,"size"),y.lineHeight=g(T,"lineHeight")+o,y.chars={};var C=a.getElementsByTagName("char"),E=v!==void 0&&v.trimmed;if(E)var A=v.height,w=v.width;for(var b=0;b<C.length;b++){var I=C[b],R=g(I,"id"),N=String.fromCharCode(R),F=g(I,"x"),P=g(I,"y"),O=g(I,"width"),M=g(I,"height");E&&(F<w&&(w=F),P<A&&(A=P)),E&&A!==0&&w!==0&&(F-=v.x,P-=v.y);var L=(l+F)/m,k=(f+P)/h,V=(l+F+O)/m,W=(f+P+M)/h;if(y.chars[R]={x:F,y:P,width:O,height:M,centerX:Math.floor(O/2),centerY:Math.floor(M/2),xOffset:g(I,"xoffset"),yOffset:g(I,"yoffset"),xAdvance:g(I,"xadvance")+u,data:{},kerning:{},u0:L,v0:k,u1:V,v1:W},c&&O!==0&&M!==0){var K=c.add(N,p,F,P,O,M);K&&K.setUVs(O,M,L,k,V,W)}}var B=a.getElementsByTagName("kerning");for(b=0;b<B.length;b++){var G=B[b],D=g(G,"first"),$=g(G,"second"),z=g(G,"amount");y.chars[$].kerning[D]=z}return y};i.exports=e},55873:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66863),v=e(98611),u={Parse:e(39860)};u=v(!1,u,a),i.exports=u},66863:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};i.exports=g},13468:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44616),v=e(56694),u=e(88899),o=new v({Extends:a,Mixins:[u],initialize:function(l,f,m,h,p,y,x){a.call(this,l,f,m,h,p,y,x),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(c,l){return this.cropWidth=c,this.cropHeight=l,this},setDisplayCallback:function(c){return this.displayCallback=c,this},setScrollX:function(c){return this.scrollX=c,this},setScrollY:function(c){return this.scrollY=c,this}});i.exports=o},93438:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(49584),v=function(u,o,c,l){var f=o._text,m=f.length,h=u.currentContext;if(!(m===0||!a(u,h,o,c,l))){c.addToRenderList(o);var p=o.fromAtlas?o.frame:o.texture.frames.__BASE,y=o.displayCallback,x=o.callbackData,T=o.fontData.chars,C=o.fontData.lineHeight,E=o._letterSpacing,A=0,w=0,b=0,I=null,R=0,N=0,F=0,P=0,O=0,M=0,L=null,k=0,V=o.frame.source.image,W=p.cutX,K=p.cutY,B=0,G=0,D=o._fontSize/o.fontData.size,$=o._align,z=0,H=0;o.getTextBounds(!1);var Y=o._bounds.lines;$===1?H=(Y.longest-Y.lengths[0])/2:$===2&&(H=Y.longest-Y.lengths[0]),h.translate(-o.displayOriginX,-o.displayOriginY);var Z=c.roundPixels;o.cropWidth>0&&o.cropHeight>0&&(h.beginPath(),h.rect(0,0,o.cropWidth,o.cropHeight),h.clip());for(var Q=0;Q<m;Q++){if(G=D,B=0,b=f.charCodeAt(Q),b===10){z++,$===1?H=(Y.longest-Y.lengths[z])/2:$===2&&(H=Y.longest-Y.lengths[z]),A=0,w+=C,L=null;continue}if(I=T[b],!!I){if(R=W+I.x,N=K+I.y,F=I.width,P=I.height,O=I.xOffset+A-o.scrollX,M=I.yOffset+w-o.scrollY,L!==null){var tt=I.kerning[k];O+=tt!==void 0?tt:0}if(y){x.index=Q,x.charCode=b,x.x=O,x.y=M,x.scale=G,x.rotation=B,x.data=I.data;var et=y(x);O=et.x,M=et.y,G=et.scale,B=et.rotation}O*=G,M*=G,O+=H,A+=I.xAdvance+E+(tt!==void 0?tt:0),L=I,k=b,!(F===0||P===0||b===32)&&(Z&&(O=Math.round(O),M=Math.round(M)),h.save(),h.translate(O,M),h.rotate(B),h.scale(G,G),h.drawImage(V,R,N,F,P,0,0,F,P),h.restore())}}h.restore()}};i.exports=v},67513:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13468),v=e(88933),u=e(99325),o=e(20494);u.register("dynamicBitmapText",function(c,l){c===void 0&&(c={});var f=o(c,"font",""),m=o(c,"text",""),h=o(c,"size",!1),p=new a(this.scene,0,0,f,m,h);return l!==void 0&&(c.add=l),v(this.scene,p,c),p})},94145:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13468),v=e(61286);v.register("dynamicBitmapText",function(u,o,c,l,f){return this.displayList.add(new a(this.scene,u,o,c,l,f))})},88899:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(16873),u=e(93438),i.exports={renderWebGL:v,renderCanvas:u}},16873:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=e(69360),u=e(75512),o=new v,c=function(l,f,m,h){var p=f.text,y=p.length;if(y!==0){m.addToRenderList(f);var x=l.pipelines.set(f.pipeline,f),T=a(f,m,h);l.pipelines.preBatch(f);var C=T.sprite,E=T.calc,A=o,w=f.cropWidth>0||f.cropHeight>0;w&&(x.flush(),l.pushScissor(E.tx,E.ty,f.cropWidth*E.scaleX,f.cropHeight*E.scaleY));var b=f.frame,I=b.glTexture,R=f.tintFill,N=u.getTintAppendFloatAlpha(f.tintTopLeft,m.alpha*f._alphaTL),F=u.getTintAppendFloatAlpha(f.tintTopRight,m.alpha*f._alphaTR),P=u.getTintAppendFloatAlpha(f.tintBottomLeft,m.alpha*f._alphaBL),O=u.getTintAppendFloatAlpha(f.tintBottomRight,m.alpha*f._alphaBR),M=x.setGameObject(f),L=0,k=0,V=0,W=0,K=f.letterSpacing,B,G=0,D=0,$,z=f.scrollX,H=f.scrollY,Y=f.fontData,Z=Y.chars,Q=Y.lineHeight,tt=f.fontSize/Y.size,et=0,lt=f._align,ut=0,ct=0,ht=f.getTextBounds(!1);f.maxWidth>0&&(p=ht.wrappedText,y=p.length);var gt=f._bounds.lines;lt===1?ct=(gt.longest-gt.lengths[0])/2:lt===2&&(ct=gt.longest-gt.lengths[0]);for(var yt=m.roundPixels,Et=f.displayCallback,bt=f.callbackData,pt=0;pt<y;pt++){if(V=p.charCodeAt(pt),V===10){ut++,lt===1?ct=(gt.longest-gt.lengths[ut])/2:lt===2&&(ct=gt.longest-gt.lengths[ut]),L=0,k+=Q,$=null;continue}if(B=Z[V],!!B){G=B.width,D=B.height;var wt=B.xOffset+L-z,Tt=B.yOffset+k-H;if($!==null){var Gt=B.kerning[W];wt+=Gt!==void 0?Gt:0}if(L+=B.xAdvance+K,$=B,W=V,!(G===0||D===0||V===32)){if(tt=f.fontSize/f.fontData.size,et=0,Et){bt.color=0,bt.tint.topLeft=N,bt.tint.topRight=F,bt.tint.bottomLeft=P,bt.tint.bottomRight=O,bt.index=pt,bt.charCode=V,bt.x=wt,bt.y=Tt,bt.scale=tt,bt.rotation=et,bt.data=B.data;var Bt=Et(bt);wt=Bt.x,Tt=Bt.y,tt=Bt.scale,et=Bt.rotation,Bt.color?(N=Bt.color,F=Bt.color,P=Bt.color,O=Bt.color):(N=Bt.tint.topLeft,F=Bt.tint.topRight,P=Bt.tint.bottomLeft,O=Bt.tint.bottomRight),N=u.getTintAppendFloatAlpha(N,m.alpha*f._alphaTL),F=u.getTintAppendFloatAlpha(F,m.alpha*f._alphaTR),P=u.getTintAppendFloatAlpha(P,m.alpha*f._alphaBL),O=u.getTintAppendFloatAlpha(O,m.alpha*f._alphaBR)}wt*=tt,Tt*=tt,wt-=f.displayOriginX,Tt-=f.displayOriginY,wt+=ct,A.applyITRS(wt,Tt,et,tt,tt),E.multiply(A,C);var Xt=B.u0,te=B.v0,Kt=B.u1,Wt=B.v1,oe=G,Le=D,ye=C.e,Ye=C.f,An=Le*C.c+C.e,Yn=Le*C.d+C.f,_i=oe*C.a+Le*C.c+C.e,tr=oe*C.b+Le*C.d+C.f,er=oe*C.a+C.e,nr=oe*C.b+C.f;yt&&(ye=Math.round(ye),Ye=Math.round(Ye),An=Math.round(An),Yn=Math.round(Yn),_i=Math.round(_i),tr=Math.round(tr),er=Math.round(er),nr=Math.round(nr)),x.batchQuad(f,ye,Ye,An,Yn,_i,tr,er,nr,Xt,te,Kt,Wt,N,F,P,O,R,I,M)}}}w&&(x.flush(),l.popScissor()),l.pipelines.postBatch(f)}};i.exports=c},44616:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(82897),u=e(64937),o=e(89980),c=e(82173),l=e(68298),f=e(31476),m=e(74118),h=e(84557),p=new a({Extends:o,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Texture,u.Tint,u.Transform,u.Visible,h],initialize:function(x,T,C,E,A,w,b){A===void 0&&(A=""),b===void 0&&(b=0),o.call(this,x,"BitmapText"),this.font=E;var I=this.scene.sys.cache.bitmapFont.get(E);I||console.warn("Invalid BitmapText key: "+E),this.fontData=I.data,this._text="",this._fontSize=w||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=b,this._bounds=c(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=I.fromAtlas,this.setTexture(I.texture,I.frame),this.setPosition(T,C),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(A)},setLeftAlign:function(){return this._align=p.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=p.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=p.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(y){return this._fontSize=y,this._dirty=!0,this},setLetterSpacing:function(y){return y===void 0&&(y=0),this._letterSpacing=y,this._dirty=!0,this},setLineSpacing:function(y){return y===void 0&&(y=0),this.lineSpacing=y,this},setText:function(y){return!y&&y!==0&&(y=""),Array.isArray(y)&&(y=y.join(`
`)),y!==this.text&&(this._text=y.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(y,x,T,C){return y===void 0&&(y=0),x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=.5),this.dropShadowX=y,this.dropShadowY=x,this.dropShadowColor=T,this.dropShadowAlpha=C,this},setCharacterTint:function(y,x,T,C,E,A,w){y===void 0&&(y=0),x===void 0&&(x=1),T===void 0&&(T=!1),C===void 0&&(C=-1),E===void 0&&(E=C,A=C,w=C);var b=this.text.length;x===-1&&(x=b),y<0&&(y=b+y),y=v(y,0,b-1);for(var I=v(y+x,y,b),R=this.charColors,N=y;N<I;N++){var F=R[N];if(C===-1)R[N]=null;else{var P=T?1:0;F?(F.tintEffect=P,F.tintTL=C,F.tintTR=E,F.tintBL=A,F.tintBR=w):R[N]={tintEffect:P,tintTL:C,tintTR:E,tintBL:A,tintBR:w}}}return this},setWordTint:function(y,x,T,C,E,A,w){x===void 0&&(x=1);for(var b=this.getTextBounds(),I=b.words,R=typeof y=="number",N=0,F=0;F<I.length;F++){var P=I[F];if((R&&F===y||!R&&P.word===y)&&(this.setCharacterTint(P.i,P.word.length,T,C,E,A,w),N++,N===x))return this}return this},getTextBounds:function(y){var x=this._bounds;return(this._dirty||y||this.scaleX!==x.scaleX||this.scaleY!==x.scaleY)&&(c(this,y,!0,x),this._dirty=!1),x},getCharacterAt:function(y,x,T){for(var C=this.getLocalPoint(y,x,null,T),E=this.getTextBounds(),A=E.characters,w=new m,b=0;b<A.length;b++){var I=A[b];if(w.setTo(I.x,I.t,I.r-I.x,I.b),w.contains(C.x,C.y))return I}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(y,x,T){if(x===void 0&&(x=this._fontSize),T===void 0&&(T=this._align),y!==this.font){var C=this.scene.sys.cache.bitmapFont.get(y);C&&(this.font=y,this.fontData=C.data,this._fontSize=x,this._align=T,this.fromAtlas=C.fromAtlas===!0,this.setTexture(C.texture,C.frame),c(this,!1,!0,this._bounds))}return this},setMaxWidth:function(y,x){return this._maxWidth=y,this._dirty=!0,x!==void 0&&(this.wordWrapCharCode=x),this},align:{set:function(y){this._align=y,this._dirty=!0},get:function(){return this._align}},text:{set:function(y){this.setText(y)},get:function(){return this._text}},fontSize:{set:function(y){this._fontSize=y,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(y){this._letterSpacing=y,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(y){this._lineSpacing=y,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(y){this._maxWidth=y,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var y=u.ToJSON(this),x={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return y.data=x,y},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});p.ALIGN_LEFT=0,p.ALIGN_CENTER=1,p.ALIGN_RIGHT=2,p.ParseFromAtlas=l,p.ParseXMLBitmapFont=f,i.exports=p},97545:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(49584),v=function(u,o,c,l){var f=o._text,m=f.length,h=u.currentContext;if(!(m===0||!a(u,h,o,c,l))){c.addToRenderList(o);var p=o.fromAtlas?o.frame:o.texture.frames.__BASE,y=o.fontData.chars,x=o.fontData.lineHeight,T=o._letterSpacing,C=o._lineSpacing,E=0,A=0,w=0,b=null,I=0,R=0,N=0,F=0,P=0,O=0,M=null,L=0,k=p.source.image,V=p.cutX,W=p.cutY,K=o._fontSize/o.fontData.size,B=o._align,G=0,D=0,$=o.getTextBounds(!1);o.maxWidth>0&&(f=$.wrappedText,m=f.length);var z=o._bounds.lines;B===1?D=(z.longest-z.lengths[0])/2:B===2&&(D=z.longest-z.lengths[0]),h.translate(-o.displayOriginX,-o.displayOriginY);for(var H=c.roundPixels,Y=0;Y<m;Y++){if(w=f.charCodeAt(Y),w===10){G++,B===1?D=(z.longest-z.lengths[G])/2:B===2&&(D=z.longest-z.lengths[G]),E=0,A+=x+C,M=null;continue}if(b=y[w],!!b){if(I=V+b.x,R=W+b.y,N=b.width,F=b.height,P=b.xOffset+E,O=b.yOffset+A,M!==null){var Z=b.kerning[L];P+=Z!==void 0?Z:0}P*=K,O*=K,P+=D,E+=b.xAdvance+T+(Z!==void 0?Z:0),M=b,L=w,!(N===0||F===0||w===32)&&(H&&(P=Math.round(P),O=Math.round(O)),h.save(),h.translate(P,O),h.scale(K,K),h.drawImage(k,I,R,N,F,0,0,N,F),h.restore())}}h.restore()}};i.exports=v},95499:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44616),v=e(88933),u=e(99325),o=e(20494),c=e(10850);u.register("bitmapText",function(l,f){l===void 0&&(l={});var m=c(l,"font",""),h=o(l,"text",""),p=o(l,"size",!1),y=c(l,"align",0),x=new a(this.scene,0,0,m,h,p,y);return f!==void 0&&(l.add=f),v(this.scene,x,l),x})},21797:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44616),v=e(61286);v.register("bitmapText",function(u,o,c,l,f,m){return this.displayList.add(new a(this.scene,u,o,c,l,f,m))})},84557:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(26372),u=e(97545),i.exports={renderWebGL:v,renderCanvas:u}},26372:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8810),v=e(73329),u=e(75512),o=function(c,l,f,m){var h=l._text,p=h.length;if(p!==0){f.addToRenderList(l);var y=c.pipelines.set(l.pipeline,l),x=v(l,f,m).calc;c.pipelines.preBatch(l);var T=f.roundPixels,C=f.alpha,E=l.charColors,A=l.tintFill,w=u.getTintAppendFloatAlpha,b=w(l.tintTopLeft,C*l._alphaTL),I=w(l.tintTopRight,C*l._alphaTR),R=w(l.tintBottomLeft,C*l._alphaBL),N=w(l.tintBottomRight,C*l._alphaBR),F=l.frame.glTexture,P=y.setGameObject(l),O=l.getTextBounds(!1),M,L,k,V=O.characters,W=l.dropShadowX,K=l.dropShadowY,B=W!==0||K!==0;if(B){var G=l.dropShadowColor,D=l.dropShadowAlpha,$=w(G,C*D*l._alphaTL),z=w(G,C*D*l._alphaTR),H=w(G,C*D*l._alphaBL),Y=w(G,C*D*l._alphaBR);for(M=0;M<V.length;M++)L=V[M],k=L.glyph,!(L.code===32||k.width===0||k.height===0)&&a(y,l,L,k,W,K,x,T,$,z,H,Y,1,F,P)}for(M=0;M<V.length;M++)if(L=V[M],k=L.glyph,!(L.code===32||k.width===0||k.height===0))if(E[L.i]){var Z=E[L.i],Q=Z.tintEffect,tt=w(Z.tintTL,C*l._alphaTL),et=w(Z.tintTR,C*l._alphaTR),lt=w(Z.tintBL,C*l._alphaBL),ut=w(Z.tintBR,C*l._alphaBR);a(y,l,L,k,0,0,x,T,tt,et,lt,ut,Q,F,P)}else a(y,l,L,k,0,0,x,T,b,I,R,N,A,F,P);c.pipelines.postBatch(l)}};i.exports=o},52816:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92246),v=e(41664),u=e(56694),o=e(64937),c=e(82047),l=e(89980),f=e(71207),m=new u({Extends:l,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,a],initialize:function(p,y,x,T,C){l.call(this,p,"Blitter"),this.setTexture(T,C),this.setPosition(y,x),this.initPipeline(),this.initPostPipeline(),this.children=new f,this.renderList=[],this.dirty=!1},create:function(h,p,y,x,T){x===void 0&&(x=!0),T===void 0&&(T=this.children.length),y===void 0?y=this.frame:y instanceof c||(y=this.texture.get(y));var C=new v(this,h,p,y,x);return this.children.addAt(C,T,!1),this.dirty=!0,C},createFromCallback:function(h,p,y,x){for(var T=this.createMultiple(p,y,x),C=0;C<T.length;C++){var E=T[C];h.call(this,E,C)}return T},createMultiple:function(h,p,y){p===void 0&&(p=this.frame.name),y===void 0&&(y=!0),Array.isArray(p)||(p=[p]);var x=[],T=this;return p.forEach(function(C){for(var E=0;E<h;E++)x.push(T.create(0,0,C,y))}),x},childCanRender:function(h){return h.visible&&h.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});i.exports=m},33177:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=a.getRenderList();if(o.length!==0){var c=e.currentContext,l=v.alpha*a.alpha;if(l!==0){v.addToRenderList(a),c.globalCompositeOperation=e.blendModes[a.blendMode],c.imageSmoothingEnabled=!a.frame.source.scaleMode;var f=a.x-v.scrollX*a.scrollFactorX,m=a.y-v.scrollY*a.scrollFactorY;c.save(),u&&u.copyToContext(c);for(var h=v.roundPixels,p=0;p<o.length;p++){var y=o[p],x=y.flipX||y.flipY,T=y.frame,C=T.canvasData,E=T.x,A=T.y,w=1,b=1,I=y.alpha*l;I!==0&&(c.globalAlpha=I,x?(y.flipX&&(w=-1,E-=C.width),y.flipY&&(b=-1,A-=C.height),C.width>0&&C.height>0&&(c.save(),c.translate(y.x+f,y.y+m),c.scale(w,b),c.drawImage(T.source.image,C.x,C.y,C.width,C.height,E,A,C.width,C.height),c.restore())):(h&&(E=Math.round(E),A=Math.round(A)),C.width>0&&C.height>0&&c.drawImage(T.source.image,C.x,C.y,C.width,C.height,E+y.x+f,A+y.y+m,C.width,C.height)))}c.restore()}}};i.exports=g},68452:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(52816),v=e(88933),u=e(99325),o=e(20494);u.register("blitter",function(c,l){c===void 0&&(c={});var f=o(c,"key",null),m=o(c,"frame",null),h=new a(this.scene,0,0,f,m);return l!==void 0&&(c.add=l),v(this.scene,h,c),h})},38906:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(52816),v=e(61286);v.register("blitter",function(u,o,c,l){return this.displayList.add(new a(this.scene,u,o,c,l))})},92246:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(89165),u=e(33177),i.exports={renderWebGL:v,renderCanvas:u}},89165:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(69360),v=e(75512),u=new a,o=function(c,l,f,m){var h=l.getRenderList(),p=f.alpha*l.alpha;if(!(h.length===0||p===0)){f.addToRenderList(l);var y=c.pipelines.set(this.pipeline,l),x=f.scrollX*l.scrollFactorX,T=f.scrollY*l.scrollFactorY,C=u.copyFrom(f.matrix);m&&(C.multiplyWithOffset(m,-x,-T),x=0,T=0);var E=l.x-x,A=l.y-T,w=-1,b=!1,I=f.roundPixels;c.pipelines.preBatch(l);for(var R=0;R<h.length;R++){var N=h[R],F=N.frame,P=N.alpha*p;if(P!==0){var O=F.width,M=F.height,L=E+N.x+F.x,k=A+N.y+F.y;N.flipX&&(O*=-1,L+=F.width),N.flipY&&(M*=-1,k+=F.height);var V=C.setQuad(L,k,L+O,k+M,I),W=v.getTintAppendFloatAlpha(N.tint,P);if(F.sourceIndex!==w){var K=y.setGameObject(l,F);w=F.sourceIndex}y.batchQuad(l,V[0],V[1],V[2],V[3],V[4],V[5],V[6],V[7],F.u0,F.v0,F.u1,F.v1,W,W,W,W,b,F.glTexture,K)&&(w=-1)}}c.pipelines.postBatch(l)}};i.exports=o},41664:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(82047),u=new a({initialize:function(c,l,f,m,h){this.parent=c,this.x=l,this.y=f,this.frame=m,this.data={},this.tint=16777215,this._visible=h,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(o){return o===void 0?this.frame=this.parent.frame:o instanceof v&&o.texture===this.parent.texture?this.frame=o:this.frame=this.parent.texture.get(o),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(o,c,l){return this.x=o,this.y=c,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,l&&this.setFrame(l),this},setPosition:function(o,c){return this.x=o,this.y=c,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,c){return this.flipX=o,this.flipY=c,this},setVisible:function(o){return this.visible=o,this},setAlpha:function(o){return this.alpha=o,this},setTint:function(o){return this.tint=o,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(o){this.parent.dirty|=this._visible!==o,this._visible=o}},alpha:{get:function(){return this._alpha},set:function(o){this.parent.dirty|=this._alpha>0!=o>0,this._alpha=o}}});i.exports=u},97123:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=2,u={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o,c,l,f){return o===void 0&&(o=1),c===void 0?this.alpha=o:(this._alphaTL=a(o,0,1),this._alphaTR=a(c,0,1),this._alphaBL=a(l,0,1),this._alphaBR=a(f,0,1)),this},alpha:{get:function(){return this._alpha},set:function(o){var c=a(o,0,1);this._alpha=c,this._alphaTL=c,this._alphaTR=c,this._alphaBL=c,this._alphaBR=c,c===0?this.renderFlags&=~v:this.renderFlags|=v}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(o){var c=a(o,0,1);this._alphaTL=c,c!==0&&(this.renderFlags|=v)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(o){var c=a(o,0,1);this._alphaTR=c,c!==0&&(this.renderFlags|=v)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(o){var c=a(o,0,1);this._alphaBL=c,c!==0&&(this.renderFlags|=v)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(o){var c=a(o,0,1);this._alphaBR=c,c!==0&&(this.renderFlags|=v)}}};i.exports=u},15720:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=2,u={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o){return o===void 0&&(o=1),this.alpha=o,this},alpha:{get:function(){return this._alpha},set:function(o){var c=a(o,0,1);this._alpha=c,c===0?this.renderFlags&=~v:this.renderFlags|=v}}};i.exports=u},69732:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95723),v={_blendMode:a.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(u){typeof u=="string"&&(u=a[u]),u|=0,u>=-1&&(this._blendMode=u)}},setBlendMode:function(u){return this.blendMode=u,this}};i.exports=v},28284:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,a){return this.width=e,this.height=a,this},setDisplaySize:function(e,a){return this.displayWidth=e,this.displayHeight=a,this}};i.exports=g},85293:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={texture:null,frame:null,isCropped:!1,setCrop:function(e,a,v,u){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,a,v,u,this.flipX,this.flipY);else{var o=e;this.frame.setCropUVs(this._crop,o.x,o.y,o.width,o.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};i.exports=g},14975:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};i.exports=g},88677:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(96910),u=e(72677),o=new a({initialize:function(l,f){this.gameObject=l,this.isPost=f,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(c){return c===void 0&&(c=0),this.padding=c,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(c){if(!this.isPost){var l=this.gameObject.scene.sys.renderer;l&&l.pipelines?(this.gameObject.pipeline=l.pipelines.FX_PIPELINE,c!==void 0&&(this.padding=c),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var c=this.list,l=0;l<c.length;l++)c[l].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(c){var l;if(this.isPost){var f=this.gameObject.getPostPipeline(String(c.type));for(Array.isArray(f)||(f=[f]),l=0;l<f.length;l++){var m=f[l];if(m.controller===c){this.gameObject.removePostPipeline(m),c.destroy();break}}}else{var h=this.list;for(l=0;l<h.length;l++)h[l]===c&&(u(h,l),c.destroy())}return this.gameObject},disable:function(c){return c===void 0&&(c=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,c&&this.clear(),this.gameObject},add:function(c,l){if(this.isPost){var f=String(c.type);this.gameObject.setPostPipeline(f,l);var m=this.gameObject.getPostPipeline(f);if(m)return Array.isArray(m)&&(m=m.pop()),m.controller=c,c}else return this.enabled||this.enable(),this.list.push(c),c},addGlow:function(c,l,f,m,h,p){return this.add(new v.Glow(this.gameObject,c,l,f,m),{quality:h,distance:p})},addShadow:function(c,l,f,m,h,p,y){return this.add(new v.Shadow(this.gameObject,c,l,f,m,h,p,y))},addPixelate:function(c){return this.add(new v.Pixelate(this.gameObject,c))},addVignette:function(c,l,f,m){return this.add(new v.Vignette(this.gameObject,c,l,f,m))},addShine:function(c,l,f,m){return this.add(new v.Shine(this.gameObject,c,l,f,m))},addBlur:function(c,l,f,m,h,p){return this.add(new v.Blur(this.gameObject,c,l,f,m,h,p))},addGradient:function(c,l,f,m,h,p,y,x){return this.add(new v.Gradient(this.gameObject,c,l,f,m,h,p,y,x))},addBloom:function(c,l,f,m,h,p){return this.add(new v.Bloom(this.gameObject,c,l,f,m,h,p))},addColorMatrix:function(){return this.add(new v.ColorMatrix(this.gameObject))},addCircle:function(c,l,f,m,h){return this.add(new v.Circle(this.gameObject,c,l,f,m,h))},addBarrel:function(c){return this.add(new v.Barrel(this.gameObject,c))},addDisplacement:function(c,l,f){return this.add(new v.Displacement(this.gameObject,c,l,f))},addWipe:function(c,l,f){return this.add(new v.Wipe(this.gameObject,c,l,f))},addReveal:function(c,l,f){return this.add(new v.Wipe(this.gameObject,c,l,f,!0))},addBokeh:function(c,l,f){return this.add(new v.Bokeh(this.gameObject,c,l,f))},addTiltShift:function(c,l,f,m,h,p){return this.add(new v.Bokeh(this.gameObject,c,l,f,!0,m,h,p))},destroy:function(){this.clear(),this.gameObject=null}});i.exports=o},92972:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,a){return this.flipX=e,this.flipY=a,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};i.exports=g},80693:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=e(2386),u=e(93736),o={prepareBoundsOutput:function(c,l){if(l===void 0&&(l=!1),this.rotation!==0&&v(c,this.x,this.y,this.rotation),l&&this.parentContainer){var f=this.parentContainer.getBoundsTransformMatrix();f.transformPoint(c.x,c.y,c)}return c},getCenter:function(c,l){return c===void 0&&(c=new u),c.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,c.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(c,l)},getTopLeft:function(c,l){return c||(c=new u),c.x=this.x-this.displayWidth*this.originX,c.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(c,l)},getTopCenter:function(c,l){return c||(c=new u),c.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,c.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(c,l)},getTopRight:function(c,l){return c||(c=new u),c.x=this.x-this.displayWidth*this.originX+this.displayWidth,c.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(c,l)},getLeftCenter:function(c,l){return c||(c=new u),c.x=this.x-this.displayWidth*this.originX,c.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(c,l)},getRightCenter:function(c,l){return c||(c=new u),c.x=this.x-this.displayWidth*this.originX+this.displayWidth,c.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(c,l)},getBottomLeft:function(c,l){return c||(c=new u),c.x=this.x-this.displayWidth*this.originX,c.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(c,l)},getBottomCenter:function(c,l){return c||(c=new u),c.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,c.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(c,l)},getBottomRight:function(c,l){return c||(c=new u),c.x=this.x-this.displayWidth*this.originX+this.displayWidth,c.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(c,l)},getBounds:function(c){c===void 0&&(c=new a);var l,f,m,h,p,y,x,T;if(this.parentContainer){var C=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(c),C.transformPoint(c.x,c.y,c),l=c.x,f=c.y,this.getTopRight(c),C.transformPoint(c.x,c.y,c),m=c.x,h=c.y,this.getBottomLeft(c),C.transformPoint(c.x,c.y,c),p=c.x,y=c.y,this.getBottomRight(c),C.transformPoint(c.x,c.y,c),x=c.x,T=c.y}else this.getTopLeft(c),l=c.x,f=c.y,this.getTopRight(c),m=c.x,h=c.y,this.getBottomLeft(c),p=c.x,y=c.y,this.getBottomRight(c),x=c.x,T=c.y;return c.x=Math.min(l,m,p,x),c.y=Math.min(f,h,y,T),c.width=Math.max(l,m,p,x)-c.x,c.height=Math.max(f,h,y,T)-c.y,c}};i.exports=o},39171:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(76756),v=e(63037),u={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o,c,l,f,m){return o===void 0&&(this.texture||this.shader||this.geom)&&(o=this),new a(this.scene,o,c,l,f,m)},createGeometryMask:function(o){return o===void 0&&(this.type==="Graphics"||this.geom)&&(o=this),new v(this.scene,o)}};i.exports=u},28072:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,a){return e===void 0&&(e=.5),a===void 0&&(a=e),this.originX=e,this.originY=a,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,a){return e===void 0&&(e=0),a===void 0&&(a=e),this.displayOriginX=e,this.displayOriginY=a,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};i.exports=g},54211:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75606),v=e(63130),u=e(10850),o=e(55303),c=e(93736),l={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(f,m){m===void 0&&(m=this.pathConfig);var h=this.pathTween;return h&&h.isPlaying()&&h.stop(),this.path=f,m&&this.startFollow(m),this},setRotateToPath:function(f,m){return m===void 0&&(m=0),this.rotateToPath=f,this.pathRotationOffset=m,this},isFollowing:function(){var f=this.pathTween;return f&&f.isPlaying()},startFollow:function(f,m){f===void 0&&(f={}),m===void 0&&(m=0);var h=this.pathTween;h&&h.isPlaying()&&h.stop(),typeof f=="number"&&(f={duration:f}),f.from=u(f,"from",0),f.to=u(f,"to",1);var p=v(f,"positionOnPath",!1);this.rotateToPath=v(f,"rotateToPath",!1),this.pathRotationOffset=u(f,"rotationOffset",0);var y=u(f,"startAt",m);if(y&&(f.onStart=function(T){var C=T.data[0];C.progress=y,C.elapsed=C.duration*y;var E=C.ease(C.progress);C.current=C.start+(C.end-C.start)*E,C.setTargetValue()}),this.pathOffset||(this.pathOffset=new c(this.x,this.y)),this.pathVector||(this.pathVector=new c),this.pathDelta||(this.pathDelta=new c),this.pathDelta.reset(),f.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(f),this.path.getStartPoint(this.pathOffset),p&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var x=this.path.getPoint(.1);this.rotation=Math.atan2(x.y-this.y,x.x-this.x)+a(this.pathRotationOffset)}return this.pathConfig=f,this},pauseFollow:function(){var f=this.pathTween;return f&&f.isPlaying()&&f.pause(),this},resumeFollow:function(){var f=this.pathTween;return f&&f.isPaused()&&f.resume(),this},stopFollow:function(){var f=this.pathTween;return f&&f.isPlaying()&&f.stop(),this},pathUpdate:function(){var f=this.pathTween;if(f){var m=f.data[0],h=this.pathDelta,p=this.pathVector;if(h.copy(p).negate(),m.state===o.COMPLETE){this.path.getPoint(m.end,p),h.add(p),p.add(this.pathOffset),this.setPosition(p.x,p.y);return}else if(m.state!==o.PLAYING_FORWARD&&m.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(f.getValue(),p),h.add(p),p.add(this.pathOffset);var y=this.x,x=this.y;this.setPosition(p.x,p.y);var T=this.x-y,C=this.y-x;if(T===0&&C===0)return;if(m.state!==this._prevDirection){this._prevDirection=m.state;return}this.rotateToPath&&(this.rotation=Math.atan2(C,T)+a(this.pathRotationOffset))}}};i.exports=l},58210:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28699),v={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(u){this.pipelineData={};var o=this.scene.sys.renderer;if(!o)return!1;var c=o.pipelines;if(c){u===void 0&&(u=c.default);var l=c.get(u);if(l)return this.defaultPipeline=l,this.pipeline=l,!0}return!1},setPipeline:function(u,o,c){var l=this.scene.sys.renderer;if(!l)return this;var f=l.pipelines;if(f){var m=f.get(u);m&&(this.pipeline=m),o&&(this.pipelineData=c?a(o):o)}return this},setPipelineData:function(u,o){var c=this.pipelineData;return o===void 0?delete c[u]:c[u]=o,this},resetPipeline:function(u){return u===void 0&&(u=!1),this.pipeline=this.defaultPipeline,u&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};i.exports=v},44086:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28699),v=e(88677),u=e(72677),o={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(c){this.postPipelines=[],this.postPipelineData={},this.postFX=new v(this,!0),c&&(this.preFX=new v(this,!1))},setPostPipeline:function(c,l,f){var m=this.scene.sys.renderer;if(!m)return this;var h=m.pipelines;if(h){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var y=h.getPostPipeline(c[p],this,l);y&&this.postPipelines.push(y)}l&&(this.postPipelineData=f?a(l):l)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(c,l){var f=this.postPipelineData;return l===void 0?delete f[c]:f[c]=l,this},getPostPipeline:function(c){for(var l=typeof c=="string",f=this.postPipelines,m=[],h=0;h<f.length;h++){var p=f[h];(l&&p.name===c||!l&&p instanceof c)&&m.push(p)}return m.length===1?m[0]:m},resetPostPipeline:function(c){c===void 0&&(c=!1);for(var l=this.postPipelines,f=0;f<l.length;f++)l[f].destroy();this.postPipelines=[],this.hasPostPipeline=!1,c&&(this.postPipelineData={})},removePostPipeline:function(c){for(var l=typeof c=="string",f=this.postPipelines,m=f.length-1;m>=0;m--){var h=f[m];(l&&h.name===c||!l&&h===c)&&(h.destroy(),u(f,m))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};i.exports=o},45900:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,a){return a===void 0&&(a=e),this.scrollFactorX=e,this.scrollFactorY=a,this}};i.exports=g},31654:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},setSize:function(e,a){return this.width=e,this.height=a,this},setDisplaySize:function(e,a){return this.displayWidth=e,this.displayHeight=a,this}};i.exports=g},82081:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82047),v=8,u={texture:null,frame:null,isCropped:!1,setTexture:function(o,c){return this.texture=this.scene.sys.textures.get(o),this.setFrame(c)},setFrame:function(o,c,l){return c===void 0&&(c=!0),l===void 0&&(l=!0),o instanceof a?(this.texture=this.scene.sys.textures.get(o.texture.key),this.frame=o):this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~v:this.renderFlags|=v,this._sizeComponent&&c&&this.setSizeToFrame(),this._originComponent&&l&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};i.exports=u},21850:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82047),v=8,u={texture:null,frame:null,isCropped:!1,setCrop:function(o,c,l,f){if(o===void 0)this.isCropped=!1;else if(this.frame){if(typeof o=="number")this.frame.setCropUVs(this._crop,o,c,l,f,this.flipX,this.flipY);else{var m=o;this.frame.setCropUVs(this._crop,m.x,m.y,m.width,m.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(o,c){return this.texture=this.scene.sys.textures.get(o),this.setFrame(c)},setFrame:function(o,c,l){return c===void 0&&(c=!0),l===void 0&&(l=!0),o instanceof a?(this.texture=this.scene.sys.textures.get(o.texture.key),this.frame=o):this.frame=this.texture.get(o),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~v:this.renderFlags|=v,this._sizeComponent&&c&&this.setSizeToFrame(),this._originComponent&&l&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};i.exports=u},58072:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,a,v,u){return e===void 0&&(e=16777215),a===void 0&&(a=e,v=e,u=e),this.tintTopLeft=e,this.tintTopRight=a,this.tintBottomLeft=v,this.tintBottomRight=u,this.tintFill=!1,this},setTintFill:function(e,a,v,u){return this.setTint(e,a,v,u),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};i.exports=g},48129:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(a.textureKey=e.texture.key,a.frameKey=e.frame.name),a};i.exports=g},56584:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83392),v=e(69360),u=e(64462),o=e(35786),c=e(62138),l=e(93736),f=4,m={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(h){this._scaleX=h,this._scaleY=h,h===0?this.renderFlags&=~f:this.renderFlags|=f}},scaleX:{get:function(){return this._scaleX},set:function(h){this._scaleX=h,h===0?this.renderFlags&=~f:this._scaleY!==0&&(this.renderFlags|=f)}},scaleY:{get:function(){return this._scaleY},set:function(h){this._scaleY=h,h===0?this.renderFlags&=~f:this._scaleX!==0&&(this.renderFlags|=f)}},angle:{get:function(){return c(this._rotation*a.RAD_TO_DEG)},set:function(h){this.rotation=c(h)*a.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(h){this._rotation=o(h)}},setPosition:function(h,p,y,x){return h===void 0&&(h=0),p===void 0&&(p=h),y===void 0&&(y=0),x===void 0&&(x=0),this.x=h,this.y=p,this.z=y,this.w=x,this},copyPosition:function(h){return h.x!==void 0&&(this.x=h.x),h.y!==void 0&&(this.y=h.y),h.z!==void 0&&(this.z=h.z),h.w!==void 0&&(this.w=h.w),this},setRandomPosition:function(h,p,y,x){return h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=this.scene.sys.scale.width),x===void 0&&(x=this.scene.sys.scale.height),this.x=h+Math.random()*y,this.y=p+Math.random()*x,this},setRotation:function(h){return h===void 0&&(h=0),this.rotation=h,this},setAngle:function(h){return h===void 0&&(h=0),this.angle=h,this},setScale:function(h,p){return h===void 0&&(h=1),p===void 0&&(p=h),this.scaleX=h,this.scaleY=p,this},setX:function(h){return h===void 0&&(h=0),this.x=h,this},setY:function(h){return h===void 0&&(h=0),this.y=h,this},setZ:function(h){return h===void 0&&(h=0),this.z=h,this},setW:function(h){return h===void 0&&(h=0),this.w=h,this},getLocalTransformMatrix:function(h){return h===void 0&&(h=new v),h.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(h,p){h===void 0&&(h=new v);var y=this.parentContainer;if(!y)return this.getLocalTransformMatrix(h);for(p||(p=new v),h.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);y;)p.applyITRS(y.x,y.y,y._rotation,y._scaleX,y._scaleY),p.multiply(h,h),y=y.parentContainer;return h},getLocalPoint:function(h,p,y,x){y||(y=new l),x||(x=this.scene.sys.cameras.main);var T=x.scrollX,C=x.scrollY,E=h+T*this.scrollFactorX-T,A=p+C*this.scrollFactorY-C;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(E,A,y):u(E,A,this.x,this.y,this.rotation,this.scaleX,this.scaleY,y),this._originComponent&&(y.x+=this._displayOriginX,y.y+=this._displayOriginY),y},getParentRotation:function(){for(var h=0,p=this.parentContainer;p;)h+=p.rotation,p=p.parentContainer;return h}};i.exports=m},69360:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(83392),u=e(93736),o=new a({initialize:function(l,f,m,h,p,y){l===void 0&&(l=1),f===void 0&&(f=0),m===void 0&&(m=0),h===void 0&&(h=1),p===void 0&&(p=0),y===void 0&&(y=0),this.matrix=new Float32Array([l,f,m,h,p,y,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(c){this.matrix[0]=c}},b:{get:function(){return this.matrix[1]},set:function(c){this.matrix[1]=c}},c:{get:function(){return this.matrix[2]},set:function(c){this.matrix[2]=c}},d:{get:function(){return this.matrix[3]},set:function(c){this.matrix[3]=c}},e:{get:function(){return this.matrix[4]},set:function(c){this.matrix[4]=c}},f:{get:function(){return this.matrix[5]},set:function(c){this.matrix[5]=c}},tx:{get:function(){return this.matrix[4]},set:function(c){this.matrix[4]=c}},ty:{get:function(){return this.matrix[5]},set:function(c){this.matrix[5]=c}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var c=this.matrix,l=c[0],f=c[1],m=c[2],h=c[3];return l||f?f>0?Math.acos(l/this.scaleX):-Math.acos(l/this.scaleX):m||h?v.TAU-(h>0?Math.acos(-m/this.scaleY):-Math.acos(m/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var c=this.matrix;return c[0]=1,c[1]=0,c[2]=0,c[3]=1,c[4]=0,c[5]=0,this},translate:function(c,l){var f=this.matrix;return f[4]=f[0]*c+f[2]*l+f[4],f[5]=f[1]*c+f[3]*l+f[5],this},scale:function(c,l){var f=this.matrix;return f[0]*=c,f[1]*=c,f[2]*=l,f[3]*=l,this},rotate:function(c){var l=Math.sin(c),f=Math.cos(c),m=this.matrix,h=m[0],p=m[1],y=m[2],x=m[3];return m[0]=h*f+y*l,m[1]=p*f+x*l,m[2]=h*-l+y*f,m[3]=p*-l+x*f,this},multiply:function(c,l){var f=this.matrix,m=c.matrix,h=f[0],p=f[1],y=f[2],x=f[3],T=f[4],C=f[5],E=m[0],A=m[1],w=m[2],b=m[3],I=m[4],R=m[5],N=l===void 0?f:l.matrix;return N[0]=E*h+A*y,N[1]=E*p+A*x,N[2]=w*h+b*y,N[3]=w*p+b*x,N[4]=I*h+R*y+T,N[5]=I*p+R*x+C,N},multiplyWithOffset:function(c,l,f){var m=this.matrix,h=c.matrix,p=m[0],y=m[1],x=m[2],T=m[3],C=m[4],E=m[5],A=l*p+f*x+C,w=l*y+f*T+E,b=h[0],I=h[1],R=h[2],N=h[3],F=h[4],P=h[5];return m[0]=b*p+I*x,m[1]=b*y+I*T,m[2]=R*p+N*x,m[3]=R*y+N*T,m[4]=F*p+P*x+A,m[5]=F*y+P*T+w,this},transform:function(c,l,f,m,h,p){var y=this.matrix,x=y[0],T=y[1],C=y[2],E=y[3],A=y[4],w=y[5];return y[0]=c*x+l*C,y[1]=c*T+l*E,y[2]=f*x+m*C,y[3]=f*T+m*E,y[4]=h*x+p*C+A,y[5]=h*T+p*E+w,this},transformPoint:function(c,l,f){f===void 0&&(f={x:0,y:0});var m=this.matrix,h=m[0],p=m[1],y=m[2],x=m[3],T=m[4],C=m[5];return f.x=c*h+l*y+T,f.y=c*p+l*x+C,f},invert:function(){var c=this.matrix,l=c[0],f=c[1],m=c[2],h=c[3],p=c[4],y=c[5],x=l*h-f*m;return c[0]=h/x,c[1]=-f/x,c[2]=-m/x,c[3]=l/x,c[4]=(m*y-h*p)/x,c[5]=-(l*y-f*p)/x,this},copyFrom:function(c){var l=this.matrix;return l[0]=c.a,l[1]=c.b,l[2]=c.c,l[3]=c.d,l[4]=c.e,l[5]=c.f,this},copyFromArray:function(c){var l=this.matrix;return l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],this},copyToContext:function(c){var l=this.matrix;return c.transform(l[0],l[1],l[2],l[3],l[4],l[5]),c},setToContext:function(c){var l=this.matrix;return c.setTransform(l[0],l[1],l[2],l[3],l[4],l[5]),c},copyToArray:function(c){var l=this.matrix;return c===void 0?c=[l[0],l[1],l[2],l[3],l[4],l[5]]:(c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5]),c},setTransform:function(c,l,f,m,h,p){var y=this.matrix;return y[0]=c,y[1]=l,y[2]=f,y[3]=m,y[4]=h,y[5]=p,this},decomposeMatrix:function(){var c=this.decomposedMatrix,l=this.matrix,f=l[0],m=l[1],h=l[2],p=l[3],y=f*p-m*h;if(c.translateX=l[4],c.translateY=l[5],f||m){var x=Math.sqrt(f*f+m*m);c.rotation=m>0?Math.acos(f/x):-Math.acos(f/x),c.scaleX=x,c.scaleY=y/x}else if(h||p){var T=Math.sqrt(h*h+p*p);c.rotation=Math.PI*.5-(p>0?Math.acos(-h/T):-Math.acos(h/T)),c.scaleX=y/T,c.scaleY=T}else c.rotation=0,c.scaleX=0,c.scaleY=0;return c},applyITRS:function(c,l,f,m,h){var p=this.matrix,y=Math.sin(f),x=Math.cos(f);return p[4]=c,p[5]=l,p[0]=x*m,p[1]=y*m,p[2]=-y*h,p[3]=x*h,this},applyInverse:function(c,l,f){f===void 0&&(f=new u);var m=this.matrix,h=m[0],p=m[1],y=m[2],x=m[3],T=m[4],C=m[5],E=1/(h*x+y*-p);return f.x=x*E*c+-y*E*l+(C*y-T*x)*E,f.y=h*E*l+-p*E*c+(-C*h+T*p)*E,f},setQuad:function(c,l,f,m,h,p){p===void 0&&(p=this.quad);var y=this.matrix,x=y[0],T=y[1],C=y[2],E=y[3],A=y[4],w=y[5];return p[0]=c*x+l*C+A,p[1]=c*T+l*E+w,p[2]=c*x+m*C+A,p[3]=c*T+m*E+w,p[4]=f*x+m*C+A,p[5]=f*T+m*E+w,p[6]=f*x+l*C+A,p[7]=f*T+l*E+w,h&&p.forEach(function(b,I){p[I]=Math.round(b)}),p},getX:function(c,l){return c*this.a+l*this.c+this.e},getY:function(c,l){return c*this.b+l*this.d+this.f},getXRound:function(c,l,f){var m=this.getX(c,l);return f&&(m=Math.round(m)),m},getYRound:function(c,l,f){var m=this.getY(c,l);return f&&(m=Math.round(m)),m},getCSSMatrix:function(){var c=this.matrix;return"matrix("+c[0]+","+c[1]+","+c[2]+","+c[3]+","+c[4]+","+c[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});i.exports=o},59694:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(a){a?(this._visible=!0,this.renderFlags|=g):(this._visible=!1,this.renderFlags&=~g)}},setVisible:function(a){return this.visible=a,this}};i.exports=e},64937:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Alpha:e(97123),AlphaSingle:e(15720),BlendMode:e(69732),ComputedSize:e(28284),Crop:e(85293),Depth:e(14975),Flip:e(92972),FX:e(88677),GetBounds:e(80693),Mask:e(39171),Origin:e(28072),PathFollower:e(54211),Pipeline:e(58210),PostPipeline:e(44086),ScrollFactor:e(45900),Size:e(31654),Texture:e(82081),TextureCrop:e(21850),Tint:e(58072),ToJSON:e(48129),Transform:e(56584),TransformMatrix:e(69360),Visible:e(59694)}},70339:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59959),v=e(95723),u=e(56694),o=e(64937),c=e(56631),l=e(89980),f=e(74118),m=e(98524),h=e(58795),p=e(93736),y=new u({Extends:l,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.PostPipeline,o.Transform,o.Visible,m],initialize:function(T,C,E,A){l.call(this,T,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=T.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(C,E),this.setBlendMode(v.SKIP_CHECK),A&&this.add(A)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(x){return x===void 0&&(x=!0),this.exclusive=x,this},getBounds:function(x){if(x===void 0&&(x=new f),x.setTo(this.x,this.y,0,0),this.parentContainer){var T=this.parentContainer.getBoundsTransformMatrix(),C=T.transformPoint(this.x,this.y);x.setTo(C.x,C.y,0,0)}if(this.list.length>0){var E=this.list,A=new f,w=!1;x.setEmpty();for(var b=0;b<E.length;b++){var I=E[b];I.getBounds&&(I.getBounds(A),w?h(A,x,x):(x.setTo(A.x,A.y,A.width,A.height),w=!0))}}return x},addHandler:function(x){x.once(c.DESTROY,this.remove,this),this.exclusive&&(x.parentContainer&&x.parentContainer.remove(x),x.parentContainer=this,x.removeFromDisplayList(),x.addedToScene())},removeHandler:function(x){x.off(c.DESTROY,this.remove,this),this.exclusive&&(x.parentContainer=null,x.removedFromScene(),x.addToDisplayList())},pointToContainer:function(x,T){T===void 0&&(T=new p),this.parentContainer?this.parentContainer.pointToContainer(x,T):(T.x=x.x,T.y=x.y);var C=this.tempTransformMatrix;return C.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),C.invert(),C.transformPoint(x.x,x.y,T),T},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(x){return a.Add(this.list,x,this.maxSize,this.addHandler,this),this},addAt:function(x,T){return a.AddAt(this.list,x,T,this.maxSize,this.addHandler,this),this},getAt:function(x){return this.list[x]},getIndex:function(x){return this.list.indexOf(x)},sort:function(x,T){return x?(T===void 0&&(T=function(C,E){return C[x]-E[x]}),a.StableSort(this.list,T),this):this},getByName:function(x){return a.GetFirst(this.list,"name",x)},getRandom:function(x,T){return a.GetRandom(this.list,x,T)},getFirst:function(x,T,C,E){return a.GetFirst(this.list,x,T,C,E)},getAll:function(x,T,C,E){return a.GetAll(this.list,x,T,C,E)},count:function(x,T,C,E){return a.CountAllMatching(this.list,x,T,C,E)},swap:function(x,T){return a.Swap(this.list,x,T),this},moveTo:function(x,T){return a.MoveTo(this.list,x,T),this},moveAbove:function(x,T){return a.MoveAbove(this.list,x,T),this},moveBelow:function(x,T){return a.MoveBelow(this.list,x,T),this},remove:function(x,T){var C=a.Remove(this.list,x,this.removeHandler,this);if(T&&C){Array.isArray(C)||(C=[C]);for(var E=0;E<C.length;E++)C[E].destroy()}return this},removeAt:function(x,T){var C=a.RemoveAt(this.list,x,this.removeHandler,this);return T&&C&&C.destroy(),this},removeBetween:function(x,T,C){var E=a.RemoveBetween(this.list,x,T,this.removeHandler,this);if(C)for(var A=0;A<E.length;A++)E[A].destroy();return this},removeAll:function(x){var T=this.list;if(x){for(var C=0;C<T.length;C++)T[C]&&T[C].scene&&(T[C].off(c.DESTROY,this.remove,this),T[C].destroy());this.list=[]}else a.RemoveBetween(T,0,T.length,this.removeHandler,this);return this},bringToTop:function(x){return a.BringToTop(this.list,x),this},sendToBack:function(x){return a.SendToBack(this.list,x),this},moveUp:function(x){return a.MoveUp(this.list,x),this},moveDown:function(x){return a.MoveDown(this.list,x),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(x,T,C){var E=a.Replace(this.list,x,T);return E&&(this.addHandler(T),this.removeHandler(x),C&&x.destroy()),this},exists:function(x){return this.list.indexOf(x)>-1},setAll:function(x,T,C,E){return a.SetAll(this.list,x,T,C,E),this},each:function(x,T){var C=[null],E,A=this.list.slice(),w=A.length;for(E=2;E<arguments.length;E++)C.push(arguments[E]);for(E=0;E<w;E++)C[0]=A[E],x.apply(T,C);return this},iterate:function(x,T){var C=[null],E;for(E=2;E<arguments.length;E++)C.push(arguments[E]);for(E=0;E<this.list.length;E++)C[0]=this.list[E],x.apply(T,C);return this},setScrollFactor:function(x,T,C){return T===void 0&&(T=x),C===void 0&&(C=!1),this.scrollFactorX=x,this.scrollFactorY=T,C&&(a.SetAll(this.list,"scrollFactorX",x),a.SetAll(this.list,"scrollFactorY",T)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});i.exports=y},13916:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){v.addToRenderList(a);var o=a.list;if(o.length!==0){var c=a.localTransform;u?(c.loadIdentity(),c.multiply(u),c.translate(a.x,a.y),c.rotate(a.rotation),c.scale(a.scaleX,a.scaleY)):c.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var l=a.blendMode!==-1;l||e.setBlendMode(0);var f=a._alpha,m=a.scrollFactorX,h=a.scrollFactorY;a.mask&&a.mask.preRenderCanvas(e,null,v);for(var p=0;p<o.length;p++){var y=o[p];if(y.willRender(v)){var x=y.alpha,T=y.scrollFactorX,C=y.scrollFactorY;!l&&y.blendMode!==e.currentBlendMode&&e.setBlendMode(y.blendMode),y.setScrollFactor(T*m,C*h),y.setAlpha(x*f),y.renderCanvas(e,y,v,c),y.setAlpha(x),y.setScrollFactor(T,C)}}a.mask&&a.mask.postRenderCanvas(e)}};i.exports=g},44516:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(70339),u=e(99325),o=e(20494);u.register("container",function(c,l){c===void 0&&(c={});var f=o(c,"x",0),m=o(c,"y",0),h=o(c,"children",null),p=new v(this.scene,f,m,h);return l!==void 0&&(c.add=l),a(this.scene,p,c),p})},23400:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70339),v=e(61286);v.register("container",function(u,o,c){return this.displayList.add(new a(this.scene,u,o,c))})},98524:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(36934),u=e(13916),i.exports={renderWebGL:v,renderCanvas:u}},36934:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){v.addToRenderList(a);var o=a.list,c=o.length;if(c!==0){var l=a.localTransform;u?(l.loadIdentity(),l.multiply(u),l.translate(a.x,a.y),l.rotate(a.rotation),l.scale(a.scaleX,a.scaleY)):l.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),e.pipelines.preBatch(a);var f=a.blendMode!==-1;f||e.setBlendMode(0);for(var m=a.alpha,h=a.scrollFactorX,p=a.scrollFactorY,y=0;y<c;y++){var x=o[y];if(x.willRender(v)){var T,C,E,A;if(x.alphaTopLeft!==void 0)T=x.alphaTopLeft,C=x.alphaTopRight,E=x.alphaBottomLeft,A=x.alphaBottomRight;else{var w=x.alpha;T=w,C=w,E=w,A=w}var b=x.scrollFactorX,I=x.scrollFactorY;!f&&x.blendMode!==e.currentBlendMode&&e.setBlendMode(x.blendMode);var R=x.mask;R&&R.preRenderWebGL(e,x,v);var N=x.type;N!==e.currentType&&(e.newType=!0,e.currentType=N),e.nextTypeMatch=y<c-1?o[y+1].type===e.currentType:!1,x.setScrollFactor(b*h,I*p),x.setAlpha(T*m,C*m,E*m,A*m),x.renderWebGL(e,x,v,l,a),x.setAlpha(T,C,E,A),x.setScrollFactor(b,I),R&&R.postRenderWebGL(e,v),e.newType=!1}}e.pipelines.postBatch(a)}};i.exports=g},2452:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},38943:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(11603),o=e(89980),c=e(42911),l=e(55638),f=e(7599),m=e(51729),h=new a({Extends:o,Mixins:[v.AlphaSingle,v.BlendMode,v.Depth,v.Origin,v.ScrollFactor,v.Transform,v.Visible,u],initialize:function(y,x,T,C,E,A){o.call(this,y,"DOMElement"),this.parent=y.sys.game.domContainer,this.cache=y.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new m,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(x,T),typeof C=="string"?C[0]==="#"?this.setElement(C.substr(1),E,A):this.createElement(C,E,A):C&&this.setElement(C,E,A),y.sys.events.on(f.SLEEP,this.handleSceneEvent,this),y.sys.events.on(f.WAKE,this.handleSceneEvent,this),y.sys.events.on(f.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(p){var y=this.node,x=y.style;y&&(x.display=p.settings.visible?"block":"none")},setSkew:function(p,y){return p===void 0&&(p=0),y===void 0&&(y=p),this.skewX=p,this.skewY=y,this},setPerspective:function(p){return this.parent.style.perspective=p+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(p){this.parent.style.perspective=p+"px"}},addListener:function(p){if(this.node){p=p.split(" ");for(var y=0;y<p.length;y++)this.node.addEventListener(p[y],this.handler,!1)}return this},removeListener:function(p){if(this.node){p=p.split(" ");for(var y=0;y<p.length;y++)this.node.removeEventListener(p[y],this.handler)}return this},dispatchNativeEvent:function(p){this.emit(p.type,p)},createElement:function(p,y,x){return this.setElement(document.createElement(p),y,x)},setElement:function(p,y,x){this.removeElement();var T;if(typeof p=="string"?(p[0]==="#"&&(p=p.substr(1)),T=document.getElementById(p)):typeof p=="object"&&p.nodeType===1&&(T=p),!T)return this;if(this.node=T,y&&c(y))for(var C in y)T.style[C]=y[C];else typeof y=="string"&&(T.style=y);return T.style.zIndex="0",T.style.display="inline",T.style.position="absolute",T.phaser=this,this.parent&&this.parent.appendChild(T),x&&(T.innerText=x),this.updateSize()},createFromCache:function(p,y){var x=this.cache.get(p);return x&&this.createFromHTML(x,y),this},createFromHTML:function(p,y){y===void 0&&(y="div"),this.removeElement();var x=document.createElement(y);return this.node=x,x.style.zIndex="0",x.style.display="inline",x.style.position="absolute",x.phaser=this,this.parent&&this.parent.appendChild(x),x.innerHTML=p,this.updateSize()},removeElement:function(){return this.node&&(l(this.node),this.node=null),this},updateSize:function(){var p=this.node,y=p.getBoundingClientRect();return this.width=p.clientWidth,this.height=p.clientHeight,this.displayWidth=y.width||0,this.displayHeight=y.height||0,this},getChildByProperty:function(p,y){if(this.node){for(var x=this.node.querySelectorAll("*"),T=0;T<x.length;T++)if(x[T][p]===y)return x[T]}return null},getChildByID:function(p){return this.getChildByProperty("id",p)},getChildByName:function(p){return this.getChildByProperty("name",p)},setClassName:function(p){return this.node&&(this.node.className=p,this.updateSize()),this},setText:function(p){return this.node&&(this.node.innerText=p,this.updateSize()),this},setHTML:function(p){return this.node&&(this.node.innerHTML=p,this.updateSize()),this},preRender:function(){var p=this.parentContainer,y=this.node;y&&p&&!p.willRender()&&(y.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(f.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(f.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(f.PRE_RENDER,this.preRender,this)}});i.exports=h},66070:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2452),v=e(89980),u=e(69360),o=new u,c=new u,l=new u,f=function(m,h,p,y){if(h.node){var x=h.node.style,T=h.scene.sys.settings;if(!x||!T.visible||v.RENDER_MASK!==h.renderFlags||h.cameraFilter!==0&&h.cameraFilter&p.id||h.parentContainer&&!h.parentContainer.willRender()){x.display="none";return}var C=h.parentContainer,E=p.alpha*h.alpha;C&&(E*=C.alpha);var A=o,w=c,b=l,I=0,R=0,N="0%",F="0%";y?(I=h.width*h.scaleX*h.originX,R=h.height*h.scaleY*h.originY,w.applyITRS(h.x-I,h.y-R,h.rotation,h.scaleX,h.scaleY),A.copyFrom(p.matrix),A.multiplyWithOffset(y,-p.scrollX*h.scrollFactorX,-p.scrollY*h.scrollFactorY),w.e=h.x-I,w.f=h.y-R,A.multiply(w,b)):(I=h.width*h.originX,R=h.height*h.originY,w.applyITRS(h.x-I,h.y-R,h.rotation,h.scaleX,h.scaleY),A.copyFrom(p.matrix),N=100*h.originX+"%",F=100*h.originY+"%",w.e-=p.scrollX*h.scrollFactorX,w.f-=p.scrollY*h.scrollFactorY,A.multiply(w,b)),h.transformOnly||(x.display="block",x.opacity=E,x.zIndex=h._depth,x.pointerEvents=h.pointerEvents,x.mixBlendMode=a[h._blendMode]),x.transform=b.getCSSMatrix()+" skew("+h.skewX+"rad, "+h.skewY+"rad) rotate3d("+h.rotate3d.x+","+h.rotate3d.y+","+h.rotate3d.z+","+h.rotate3d.w+h.rotate3dAngle+")",x.transformOrigin=N+" "+F}};i.exports=f},66788:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(38943),v=e(61286);v.register("dom",function(u,o,c,l,f){var m=new a(this.scene,u,o,c,l,f);return this.displayList.add(m),m})},11603:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(66070),u=e(66070),i.exports={renderWebGL:v,renderCanvas:u}},65492:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="addedtoscene"},98398:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},40239:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="removedfromscene"},17286:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="complete"},31496:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="created"},89587:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="error"},59792:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="locked"},96342:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="loop"},6017:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="playing"},49614:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="play"},24418:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="seeked"},87318:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="seeking"},50009:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="stalled"},61922:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="stop"},79501:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="textureready"},4052:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="unlocked"},54857:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="unsupported"},56631:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADDED_TO_SCENE:e(65492),DESTROY:e(98398),REMOVED_FROM_SCENE:e(40239),VIDEO_COMPLETE:e(17286),VIDEO_CREATED:e(31496),VIDEO_ERROR:e(89587),VIDEO_LOCKED:e(59792),VIDEO_LOOP:e(96342),VIDEO_PLAY:e(49614),VIDEO_PLAYING:e(6017),VIDEO_SEEKED:e(24418),VIDEO_SEEKING:e(87318),VIDEO_STALLED:e(50009),VIDEO_STOP:e(61922),VIDEO_TEXTURE:e(79501),VIDEO_UNLOCKED:e(4052),VIDEO_UNSUPPORTED:e(54857)}},39419:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(89980),o=e(79394),c=new a({Extends:u,Mixins:[v.Alpha,v.BlendMode,v.Depth,v.Flip,v.Origin,v.ScrollFactor,v.Size,v.Texture,v.Tint,v.Transform,v.Visible,o],initialize:function(f){u.call(this,f,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});i.exports=c},96699:()=>{},41155:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39419),v=e(61286);v.register("extern",function(){var u=new a(this.scene);return this.displayList.add(u),u})},79394:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(81410),u=e(96699),i.exports={renderWebGL:v,renderCanvas:u}},81410:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=function(u,o,c,l){u.pipelines.clear();var f=a(o,c,l).calc;o.render.call(o,u,c,f),u.pipelines.rebind()};i.exports=v},36266:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},33182:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(51052),v=e(56694),u=e(36266),o=e(64937),c=e(95669),l=e(89980),f=e(72632),m=e(10850),h=e(83392),p=e(60898),y=new v({Extends:l,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.PostPipeline,o.Transform,o.Visible,o.ScrollFactor,p],initialize:function(T,C){var E=m(C,"x",0),A=m(C,"y",0);l.call(this,T,"Graphics"),this.setPosition(E,A),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(C)},setDefaultStyles:function(x){return m(x,"lineStyle",null)&&(this.defaultStrokeWidth=m(x,"lineStyle.width",1),this.defaultStrokeColor=m(x,"lineStyle.color",16777215),this.defaultStrokeAlpha=m(x,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),m(x,"fillStyle",null)&&(this.defaultFillColor=m(x,"fillStyle.color",16777215),this.defaultFillAlpha=m(x,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(x,T,C){return C===void 0&&(C=1),this.commandBuffer.push(u.LINE_STYLE,x,T,C),this._lineWidth=x,this},fillStyle:function(x,T){return T===void 0&&(T=1),this.commandBuffer.push(u.FILL_STYLE,x,T),this},fillGradientStyle:function(x,T,C,E,A,w,b,I){return A===void 0&&(A=1),w===void 0&&(w=A),b===void 0&&(b=A),I===void 0&&(I=A),this.commandBuffer.push(u.GRADIENT_FILL_STYLE,A,w,b,I,x,T,C,E),this},lineGradientStyle:function(x,T,C,E,A,w){return w===void 0&&(w=1),this.commandBuffer.push(u.GRADIENT_LINE_STYLE,x,w,T,C,E,A),this},beginPath:function(){return this.commandBuffer.push(u.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(u.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(u.FILL_PATH),this},fill:function(){return this.commandBuffer.push(u.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(u.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(u.STROKE_PATH),this},fillCircleShape:function(x){return this.fillCircle(x.x,x.y,x.radius)},strokeCircleShape:function(x){return this.strokeCircle(x.x,x.y,x.radius)},fillCircle:function(x,T,C){return this.beginPath(),this.arc(x,T,C,0,h.PI2),this.fillPath(),this},strokeCircle:function(x,T,C){return this.beginPath(),this.arc(x,T,C,0,h.PI2),this.strokePath(),this},fillRectShape:function(x){return this.fillRect(x.x,x.y,x.width,x.height)},strokeRectShape:function(x){return this.strokeRect(x.x,x.y,x.width,x.height)},fillRect:function(x,T,C,E){return this.commandBuffer.push(u.FILL_RECT,x,T,C,E),this},strokeRect:function(x,T,C,E){var A=this._lineWidth/2,w=x-A,b=x+A;return this.beginPath(),this.moveTo(x,T),this.lineTo(x,T+E),this.strokePath(),this.beginPath(),this.moveTo(x+C,T),this.lineTo(x+C,T+E),this.strokePath(),this.beginPath(),this.moveTo(w,T),this.lineTo(b+C,T),this.strokePath(),this.beginPath(),this.moveTo(w,T+E),this.lineTo(b+C,T+E),this.strokePath(),this},fillRoundedRect:function(x,T,C,E,A){A===void 0&&(A=20);var w=A,b=A,I=A,R=A;typeof A!="number"&&(w=f(A,"tl",20),b=f(A,"tr",20),I=f(A,"bl",20),R=f(A,"br",20));var N=w>=0,F=b>=0,P=I>=0,O=R>=0;return w=Math.abs(w),b=Math.abs(b),I=Math.abs(I),R=Math.abs(R),this.beginPath(),this.moveTo(x+w,T),this.lineTo(x+C-b,T),F?this.arc(x+C-b,T+b,b,-h.TAU,0):this.arc(x+C,T,b,Math.PI,h.TAU,!0),this.lineTo(x+C,T+E-R),O?this.arc(x+C-R,T+E-R,R,0,h.TAU):this.arc(x+C,T+E,R,-h.TAU,Math.PI,!0),this.lineTo(x+I,T+E),P?this.arc(x+I,T+E-I,I,h.TAU,Math.PI):this.arc(x,T+E,I,0,-h.TAU,!0),this.lineTo(x,T+w),N?this.arc(x+w,T+w,w,-Math.PI,-h.TAU):this.arc(x,T,w,h.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(x,T,C,E,A){A===void 0&&(A=20);var w=A,b=A,I=A,R=A,N=Math.min(C,E)/2;typeof A!="number"&&(w=f(A,"tl",20),b=f(A,"tr",20),I=f(A,"bl",20),R=f(A,"br",20));var F=w>=0,P=b>=0,O=I>=0,M=R>=0;return w=Math.min(Math.abs(w),N),b=Math.min(Math.abs(b),N),I=Math.min(Math.abs(I),N),R=Math.min(Math.abs(R),N),this.beginPath(),this.moveTo(x+w,T),this.lineTo(x+C-b,T),this.moveTo(x+C-b,T),P?this.arc(x+C-b,T+b,b,-h.TAU,0):this.arc(x+C,T,b,Math.PI,h.TAU,!0),this.lineTo(x+C,T+E-R),this.moveTo(x+C,T+E-R),M?this.arc(x+C-R,T+E-R,R,0,h.TAU):this.arc(x+C,T+E,R,-h.TAU,Math.PI,!0),this.lineTo(x+I,T+E),this.moveTo(x+I,T+E),O?this.arc(x+I,T+E-I,I,h.TAU,Math.PI):this.arc(x,T+E,I,0,-h.TAU,!0),this.lineTo(x,T+w),this.moveTo(x,T+w),F?this.arc(x+w,T+w,w,-Math.PI,-h.TAU):this.arc(x,T,w,h.TAU,0,!0),this.strokePath(),this},fillPointShape:function(x,T){return this.fillPoint(x.x,x.y,T)},fillPoint:function(x,T,C){return!C||C<1?C=1:(x-=C/2,T-=C/2),this.commandBuffer.push(u.FILL_RECT,x,T,C,C),this},fillTriangleShape:function(x){return this.fillTriangle(x.x1,x.y1,x.x2,x.y2,x.x3,x.y3)},strokeTriangleShape:function(x){return this.strokeTriangle(x.x1,x.y1,x.x2,x.y2,x.x3,x.y3)},fillTriangle:function(x,T,C,E,A,w){return this.commandBuffer.push(u.FILL_TRIANGLE,x,T,C,E,A,w),this},strokeTriangle:function(x,T,C,E,A,w){return this.commandBuffer.push(u.STROKE_TRIANGLE,x,T,C,E,A,w),this},strokeLineShape:function(x){return this.lineBetween(x.x1,x.y1,x.x2,x.y2)},lineBetween:function(x,T,C,E){return this.beginPath(),this.moveTo(x,T),this.lineTo(C,E),this.strokePath(),this},lineTo:function(x,T){return this.commandBuffer.push(u.LINE_TO,x,T),this},moveTo:function(x,T){return this.commandBuffer.push(u.MOVE_TO,x,T),this},strokePoints:function(x,T,C,E){T===void 0&&(T=!1),C===void 0&&(C=!1),E===void 0&&(E=x.length),this.beginPath(),this.moveTo(x[0].x,x[0].y);for(var A=1;A<E;A++)this.lineTo(x[A].x,x[A].y);return T&&this.lineTo(x[0].x,x[0].y),C&&this.closePath(),this.strokePath(),this},fillPoints:function(x,T,C,E){T===void 0&&(T=!1),C===void 0&&(C=!1),E===void 0&&(E=x.length),this.beginPath(),this.moveTo(x[0].x,x[0].y);for(var A=1;A<E;A++)this.lineTo(x[A].x,x[A].y);return T&&this.lineTo(x[0].x,x[0].y),C&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(x,T){T===void 0&&(T=32);var C=x.getPoints(T);return this.strokePoints(C,!0)},strokeEllipse:function(x,T,C,E,A){A===void 0&&(A=32);var w=new c(x,T,C,E),b=w.getPoints(A);return this.strokePoints(b,!0)},fillEllipseShape:function(x,T){T===void 0&&(T=32);var C=x.getPoints(T);return this.fillPoints(C,!0)},fillEllipse:function(x,T,C,E,A){A===void 0&&(A=32);var w=new c(x,T,C,E),b=w.getPoints(A);return this.fillPoints(b,!0)},arc:function(x,T,C,E,A,w,b){return w===void 0&&(w=!1),b===void 0&&(b=0),this.commandBuffer.push(u.ARC,x,T,C,E,A,w,b),this},slice:function(x,T,C,E,A,w,b){return w===void 0&&(w=!1),b===void 0&&(b=0),this.commandBuffer.push(u.BEGIN_PATH),this.commandBuffer.push(u.MOVE_TO,x,T),this.commandBuffer.push(u.ARC,x,T,C,E,A,w,b),this.commandBuffer.push(u.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(u.SAVE),this},restore:function(){return this.commandBuffer.push(u.RESTORE),this},translateCanvas:function(x,T){return this.commandBuffer.push(u.TRANSLATE,x,T),this},scaleCanvas:function(x,T){return this.commandBuffer.push(u.SCALE,x,T),this},rotateCanvas:function(x){return this.commandBuffer.push(u.ROTATE,x),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(x,T,C){var E=this.scene.sys,A=E.game.renderer;T===void 0&&(T=E.scale.width),C===void 0&&(C=E.scale.height),y.TargetCamera.setScene(this.scene),y.TargetCamera.setViewport(0,0,T,C),y.TargetCamera.scrollX=this.x,y.TargetCamera.scrollY=this.y;var w,b,I={willReadFrequently:!0};if(typeof x=="string")if(E.textures.exists(x)){w=E.textures.get(x);var R=w.getSourceImage();R instanceof HTMLCanvasElement&&(b=R.getContext("2d",I))}else w=E.textures.createCanvas(x,T,C),b=w.getSourceImage().getContext("2d",I);else x instanceof HTMLCanvasElement&&(b=x.getContext("2d",I));return b&&(this.renderCanvas(A,this,y.TargetCamera,null,b,!1),w&&w.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});y.TargetCamera=new a,i.exports=y},91543:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36266),v=e(49584),u=function(o,c,l,f,m,h){var p=c.commandBuffer,y=p.length,x=m||o.currentContext;if(!(y===0||!v(o,x,c,l,f))){l.addToRenderList(c);var T=1,C=1,E=0,A=0,w=1,b=0,I=0,R=0;x.beginPath();for(var N=0;N<y;++N){var F=p[N];switch(F){case a.ARC:x.arc(p[N+1],p[N+2],p[N+3],p[N+4],p[N+5],p[N+6]),N+=7;break;case a.LINE_STYLE:w=p[N+1],E=p[N+2],T=p[N+3],b=(E&16711680)>>>16,I=(E&65280)>>>8,R=E&255,x.strokeStyle="rgba("+b+","+I+","+R+","+T+")",x.lineWidth=w,N+=3;break;case a.FILL_STYLE:A=p[N+1],C=p[N+2],b=(A&16711680)>>>16,I=(A&65280)>>>8,R=A&255,x.fillStyle="rgba("+b+","+I+","+R+","+C+")",N+=2;break;case a.BEGIN_PATH:x.beginPath();break;case a.CLOSE_PATH:x.closePath();break;case a.FILL_PATH:h||x.fill();break;case a.STROKE_PATH:h||x.stroke();break;case a.FILL_RECT:h?x.rect(p[N+1],p[N+2],p[N+3],p[N+4]):x.fillRect(p[N+1],p[N+2],p[N+3],p[N+4]),N+=4;break;case a.FILL_TRIANGLE:x.beginPath(),x.moveTo(p[N+1],p[N+2]),x.lineTo(p[N+3],p[N+4]),x.lineTo(p[N+5],p[N+6]),x.closePath(),h||x.fill(),N+=6;break;case a.STROKE_TRIANGLE:x.beginPath(),x.moveTo(p[N+1],p[N+2]),x.lineTo(p[N+3],p[N+4]),x.lineTo(p[N+5],p[N+6]),x.closePath(),h||x.stroke(),N+=6;break;case a.LINE_TO:x.lineTo(p[N+1],p[N+2]),N+=2;break;case a.MOVE_TO:x.moveTo(p[N+1],p[N+2]),N+=2;break;case a.LINE_FX_TO:x.lineTo(p[N+1],p[N+2]),N+=5;break;case a.MOVE_FX_TO:x.moveTo(p[N+1],p[N+2]),N+=5;break;case a.SAVE:x.save();break;case a.RESTORE:x.restore();break;case a.TRANSLATE:x.translate(p[N+1],p[N+2]),N+=2;break;case a.SCALE:x.scale(p[N+1],p[N+2]),N+=2;break;case a.ROTATE:x.rotate(p[N+1]),N+=1;break;case a.GRADIENT_FILL_STYLE:N+=5;break;case a.GRADIENT_LINE_STYLE:N+=6;break}}x.restore()}};i.exports=u},41286:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99325),v=e(33182);a.register("graphics",function(u,o){u===void 0&&(u={}),o!==void 0&&(u.add=o);var c=new v(this.scene,u);return u.add&&this.scene.sys.displayList.add(c),c})},13122:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33182),v=e(61286);v.register("graphics",function(u){return this.displayList.add(new a(this.scene,u))})},60898:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(34429),u=e(91543),u=e(91543),i.exports={renderWebGL:v,renderCanvas:u}},34429:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(36266),v=e(73329),u=e(69360),o=e(75512),c=function(p,y,x){this.x=p,this.y=y,this.width=x},l=function(p,y,x){this.points=[],this.pointsLength=1,this.points[0]=new c(p,y,x)},f=[],m=new u,h=function(p,y,x,T){if(y.commandBuffer.length!==0){x.addToRenderList(y);var C=p.pipelines.set(y.pipeline,y);p.pipelines.preBatch(y);for(var E=v(y,x,T).calc,A=m.loadIdentity(),w=y.commandBuffer,b=x.alpha*y.alpha,I=1,R=C.fillTint,N=C.strokeTint,F=0,P=0,O=0,M=.01,L=Math.PI*2,k,V=[],W=0,K=!0,B=null,G=o.getTintAppendFloatAlpha,D=0;D<w.length;D++)switch(k=w[D],k){case a.BEGIN_PATH:{V.length=0,B=null,K=!0;break}case a.CLOSE_PATH:{K=!1,B&&B.points.length&&B.points.push(B.points[0]);break}case a.FILL_PATH:{for(W=0;W<V.length;W++)C.batchFillPath(V[W].points,A,E);break}case a.STROKE_PATH:{for(W=0;W<V.length;W++)C.batchStrokePath(V[W].points,I,K,A,E);break}case a.LINE_STYLE:{I=w[++D];var $=w[++D],z=w[++D]*b,H=G($,z);N.TL=H,N.TR=H,N.BL=H,N.BR=H;break}case a.FILL_STYLE:{var Y=w[++D],Z=w[++D]*b,Q=G(Y,Z);R.TL=Q,R.TR=Q,R.BL=Q,R.BR=Q;break}case a.GRADIENT_FILL_STYLE:{var tt=w[++D]*b,et=w[++D]*b,lt=w[++D]*b,ut=w[++D]*b;R.TL=G(w[++D],tt),R.TR=G(w[++D],et),R.BL=G(w[++D],lt),R.BR=G(w[++D],ut);break}case a.GRADIENT_LINE_STYLE:{I=w[++D];var ct=w[++D]*b;N.TL=G(w[++D],ct),N.TR=G(w[++D],ct),N.BL=G(w[++D],ct),N.BR=G(w[++D],ct);break}case a.ARC:{var ht=0,gt=w[++D],yt=w[++D],Et=w[++D],bt=w[++D],pt=w[++D],wt=w[++D],Tt=w[++D];for(pt-=bt,wt?pt<-L?pt=-L:pt>0&&(pt=-L+pt%L):pt>L?pt=L:pt<0&&(pt=L+pt%L),B===null&&(B=new l(gt+Math.cos(bt)*Et,yt+Math.sin(bt)*Et,I),V.push(B),ht+=M);ht<1+Tt;)O=pt*ht+bt,F=gt+Math.cos(O)*Et,P=yt+Math.sin(O)*Et,B.points.push(new c(F,P,I)),ht+=M;O=pt+bt,F=gt+Math.cos(O)*Et,P=yt+Math.sin(O)*Et,B.points.push(new c(F,P,I));break}case a.FILL_RECT:{C.batchFillRect(w[++D],w[++D],w[++D],w[++D],A,E);break}case a.FILL_TRIANGLE:{C.batchFillTriangle(w[++D],w[++D],w[++D],w[++D],w[++D],w[++D],A,E);break}case a.STROKE_TRIANGLE:{C.batchStrokeTriangle(w[++D],w[++D],w[++D],w[++D],w[++D],w[++D],I,A,E);break}case a.LINE_TO:{B!==null?B.points.push(new c(w[++D],w[++D],I)):(B=new l(w[++D],w[++D],I),V.push(B));break}case a.MOVE_TO:{B=new l(w[++D],w[++D],I),V.push(B);break}case a.SAVE:{f.push(A.copyToArray());break}case a.RESTORE:{A.copyFromArray(f.pop());break}case a.TRANSLATE:{gt=w[++D],yt=w[++D],A.translate(gt,yt);break}case a.SCALE:{gt=w[++D],yt=w[++D],A.scale(gt,yt);break}case a.ROTATE:{A.rotate(w[++D]);break}}p.pipelines.postBatch(y)}};i.exports=h},59192:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83979),v=e(56694),u=e(56631),o=e(6659),c=e(71608),l=e(72632),f=e(10850),m=e(19256),h=e(42911),p=e(75757),y=e(58403),x=e(13747),T=new v({Extends:o,initialize:function(E,A,w){o.call(this),w?A&&!Array.isArray(A)&&(A=[A]):Array.isArray(A)?h(A[0])&&(w=A,A=null):h(A)&&(w=A,A=null),this.scene=E,this.children=new y,this.isParent=!0,this.type="Group",this.classType=l(w,"classType",x),this.name=l(w,"name",""),this.active=l(w,"active",!0),this.maxSize=l(w,"maxSize",-1),this.defaultKey=l(w,"defaultKey",null),this.defaultFrame=l(w,"defaultFrame",null),this.runChildUpdate=l(w,"runChildUpdate",!1),this.createCallback=l(w,"createCallback",null),this.removeCallback=l(w,"removeCallback",null),this.createMultipleCallback=l(w,"createMultipleCallback",null),this.internalCreateCallback=l(w,"internalCreateCallback",null),this.internalRemoveCallback=l(w,"internalRemoveCallback",null),A&&this.addMultiple(A),w&&this.createMultiple(w),this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(C,E,A,w,b,I){if(C===void 0&&(C=0),E===void 0&&(E=0),A===void 0&&(A=this.defaultKey),w===void 0&&(w=this.defaultFrame),b===void 0&&(b=!0),I===void 0&&(I=!0),this.isFull())return null;var R=new this.classType(this.scene,C,E,A,w);return R.addToDisplayList(this.scene.sys.displayList),R.addToUpdateList(),R.visible=b,R.setActive(I),this.add(R),R},createMultiple:function(C){if(this.isFull())return[];Array.isArray(C)||(C=[C]);var E=[];if(C[0].key)for(var A=0;A<C.length;A++){var w=this.createFromConfig(C[A]);E=E.concat(w)}return E},createFromConfig:function(C){if(this.isFull())return[];this.classType=l(C,"classType",this.classType);var E=l(C,"key",void 0),A=l(C,"frame",null),w=l(C,"visible",!0),b=l(C,"active",!0),I=[];if(E===void 0)return I;Array.isArray(E)||(E=[E]),Array.isArray(A)||(A=[A]);var R=l(C,"repeat",0),N=l(C,"randomKey",!1),F=l(C,"randomFrame",!1),P=l(C,"yoyo",!1),O=l(C,"quantity",!1),M=l(C,"frameQuantity",1),L=l(C,"max",0),k=p(E,A,{max:L,qty:O||M,random:N,randomB:F,repeat:R,yoyo:P});C.createCallback&&(this.createCallback=C.createCallback),C.removeCallback&&(this.removeCallback=C.removeCallback);for(var V=0;V<k.length;V++){var W=this.create(0,0,k[V].a,k[V].b,w,b);if(!W)break;I.push(W)}if(m(C,"setXY")){var K=f(C,"setXY.x",0),B=f(C,"setXY.y",0),G=f(C,"setXY.stepX",0),D=f(C,"setXY.stepY",0);a.SetXY(I,K,B,G,D)}if(m(C,"setRotation")){var $=f(C,"setRotation.value",0),z=f(C,"setRotation.step",0);a.SetRotation(I,$,z)}if(m(C,"setScale")){var H=f(C,"setScale.x",1),Y=f(C,"setScale.y",H),Z=f(C,"setScale.stepX",0),Q=f(C,"setScale.stepY",0);a.SetScale(I,H,Y,Z,Q)}if(m(C,"setOrigin")){var tt=f(C,"setOrigin.x",.5),et=f(C,"setOrigin.y",tt),lt=f(C,"setOrigin.stepX",0),ut=f(C,"setOrigin.stepY",0);a.SetOrigin(I,tt,et,lt,ut)}if(m(C,"setAlpha")){var ct=f(C,"setAlpha.value",1),ht=f(C,"setAlpha.step",0);a.SetAlpha(I,ct,ht)}if(m(C,"setDepth")){var gt=f(C,"setDepth.value",0),yt=f(C,"setDepth.step",0);a.SetDepth(I,gt,yt)}if(m(C,"setScrollFactor")){var Et=f(C,"setScrollFactor.x",1),bt=f(C,"setScrollFactor.y",Et),pt=f(C,"setScrollFactor.stepX",0),wt=f(C,"setScrollFactor.stepY",0);a.SetScrollFactor(I,Et,bt,pt,wt)}var Tt=l(C,"hitArea",null),Gt=l(C,"hitAreaCallback",null);Tt&&a.SetHitArea(I,Tt,Gt);var Bt=l(C,"gridAlign",!1);return Bt&&a.GridAlign(I,Bt),this.createMultipleCallback&&this.createMultipleCallback.call(this,I),I},preUpdate:function(C,E){if(!(!this.runChildUpdate||this.children.size===0))for(var A=this.children.entries.slice(),w=0;w<A.length;w++){var b=A[w];b.active&&b.update(C,E)}},add:function(C,E){return E===void 0&&(E=!1),this.isFull()?this:(this.children.set(C),this.internalCreateCallback&&this.internalCreateCallback.call(this,C),this.createCallback&&this.createCallback.call(this,C),E&&(C.addToDisplayList(this.scene.sys.displayList),C.addToUpdateList()),C.on(u.DESTROY,this.remove,this),this)},addMultiple:function(C,E){if(E===void 0&&(E=!1),Array.isArray(C))for(var A=0;A<C.length;A++)this.add(C[A],E);return this},remove:function(C,E,A){return E===void 0&&(E=!1),A===void 0&&(A=!1),this.children.contains(C)?(this.children.delete(C),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,C),this.removeCallback&&this.removeCallback.call(this,C),C.off(u.DESTROY,this.remove,this),A?C.destroy():E&&(C.removeFromDisplayList(),C.removeFromUpdateList()),this):this},clear:function(C,E){C===void 0&&(C=!1),E===void 0&&(E=!1);for(var A=this.children,w=0;w<A.size;w++){var b=A.entries[w];b.off(u.DESTROY,this.remove,this),E?b.destroy():C&&(b.removeFromDisplayList(),b.removeFromUpdateList())}return this.children.clear(),this},contains:function(C){return this.children.contains(C)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(C,E,A,w){return c(this.children.entries,C,E,A,w)},getFirst:function(C,E,A,w,b,I,R){return this.getHandler(!0,1,C,E,A,w,b,I,R)},getFirstNth:function(C,E,A,w,b,I,R,N){return this.getHandler(!0,C,E,A,w,b,I,R,N)},getLast:function(C,E,A,w,b,I,R){return this.getHandler(!1,1,C,E,A,w,b,I,R)},getLastNth:function(C,E,A,w,b,I,R,N){return this.getHandler(!1,C,E,A,w,b,I,R,N)},getHandler:function(C,E,A,w,b,I,R,N,F){A===void 0&&(A=!1),w===void 0&&(w=!1);var P,O,M=0,L=this.children.entries;if(C)for(O=0;O<L.length;O++)if(P=L[O],P.active===A){if(M++,M===E)break}else P=null;else for(O=L.length-1;O>=0;O--)if(P=L[O],P.active===A){if(M++,M===E)break}else P=null;return P?(typeof b=="number"&&(P.x=b),typeof I=="number"&&(P.y=I),P):w?this.create(b,I,R,N,F):null},get:function(C,E,A,w,b){return this.getFirst(!1,!0,C,E,A,w,b)},getFirstAlive:function(C,E,A,w,b,I){return this.getFirst(!0,C,E,A,w,b,I)},getFirstDead:function(C,E,A,w,b,I){return this.getFirst(!1,C,E,A,w,b,I)},playAnimation:function(C,E){return a.PlayAnimation(this.children.entries,C,E),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(C){C===void 0&&(C=!0);for(var E=0,A=0;A<this.children.size;A++)this.children.entries[A].active===C&&E++;return E},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var C=this.getTotalUsed(),E=this.maxSize===-1?999999999999:this.maxSize;return E-C},setActive:function(C){return this.active=C,this},setName:function(C){return this.name=C,this},propertyValueSet:function(C,E,A,w,b){return a.PropertyValueSet(this.children.entries,C,E,A,w,b),this},propertyValueInc:function(C,E,A,w,b){return a.PropertyValueInc(this.children.entries,C,E,A,w,b),this},setX:function(C,E){return a.SetX(this.children.entries,C,E),this},setY:function(C,E){return a.SetY(this.children.entries,C,E),this},setXY:function(C,E,A,w){return a.SetXY(this.children.entries,C,E,A,w),this},incX:function(C,E){return a.IncX(this.children.entries,C,E),this},incY:function(C,E){return a.IncY(this.children.entries,C,E),this},incXY:function(C,E,A,w){return a.IncXY(this.children.entries,C,E,A,w),this},shiftPosition:function(C,E,A){return a.ShiftPosition(this.children.entries,C,E,A),this},angle:function(C,E){return a.Angle(this.children.entries,C,E),this},rotate:function(C,E){return a.Rotate(this.children.entries,C,E),this},rotateAround:function(C,E){return a.RotateAround(this.children.entries,C,E),this},rotateAroundDistance:function(C,E,A){return a.RotateAroundDistance(this.children.entries,C,E,A),this},setAlpha:function(C,E){return a.SetAlpha(this.children.entries,C,E),this},setTint:function(C,E,A,w){return a.SetTint(this.children.entries,C,E,A,w),this},setOrigin:function(C,E,A,w){return a.SetOrigin(this.children.entries,C,E,A,w),this},scaleX:function(C,E){return a.ScaleX(this.children.entries,C,E),this},scaleY:function(C,E){return a.ScaleY(this.children.entries,C,E),this},scaleXY:function(C,E,A,w){return a.ScaleXY(this.children.entries,C,E,A,w),this},setDepth:function(C,E){return a.SetDepth(this.children.entries,C,E),this},setBlendMode:function(C){return a.SetBlendMode(this.children.entries,C),this},setHitArea:function(C,E){return a.SetHitArea(this.children.entries,C,E),this},shuffle:function(){return a.Shuffle(this.children.entries),this},kill:function(C){this.children.contains(C)&&C.setActive(!1)},killAndHide:function(C){this.children.contains(C)&&(C.setActive(!1),C.setVisible(!1))},setVisible:function(C,E,A){return a.SetVisible(this.children.entries,C,E,A),this},toggleVisible:function(){return a.ToggleVisible(this.children.entries),this},destroy:function(C,E){C===void 0&&(C=!1),E===void 0&&(E=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(u.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(E,C),this.scene=void 0,this.children=void 0)}});i.exports=T},61295:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99325),v=e(59192);a.register("group",function(u){return new v(this.scene,null,u)})},62598:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59192),v=e(61286);v.register("group",function(u,o){return this.updateList.add(new a(this.scene,u,o))})},1539:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(89980),o=e(57322),c=new a({Extends:u,Mixins:[v.Alpha,v.BlendMode,v.Depth,v.Flip,v.GetBounds,v.Mask,v.Origin,v.Pipeline,v.PostPipeline,v.ScrollFactor,v.Size,v.TextureCrop,v.Tint,v.Transform,v.Visible,o],initialize:function(f,m,h,p,y){u.call(this,f,"Image"),this._crop=this.resetCropObject(),this.setTexture(p,y),this.setPosition(m,h),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});i.exports=c},57786:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){v.addToRenderList(a),e.batchSprite(a,a.frame,v,u)};i.exports=g},83556:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(99325),u=e(20494),o=e(1539);v.register("image",function(c,l){c===void 0&&(c={});var f=u(c,"key",null),m=u(c,"frame",null),h=new o(this.scene,0,0,f,m);return l!==void 0&&(c.add=l),a(this.scene,h,c),h})},20927:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1539),v=e(61286);v.register("image",function(u,o,c,l){return this.displayList.add(new a(this.scene,u,o,c,l))})},57322:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(59390),u=e(57786),i.exports={renderWebGL:v,renderCanvas:u}},59390:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){v.addToRenderList(a),this.pipeline.batchSprite(a,v,u)};i.exports=g},48013:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Events:e(56631),DisplayList:e(91713),GameObjectCreator:e(99325),GameObjectFactory:e(61286),UpdateList:e(92034),Components:e(64937),GetCalcMatrix:e(73329),BuildGameObject:e(88933),BuildGameObjectAnimation:e(32291),GameObject:e(89980),BitmapText:e(44616),Blitter:e(52816),Bob:e(41664),Container:e(70339),DOMElement:e(38943),DynamicBitmapText:e(13468),Extern:e(39419),Graphics:e(33182),Group:e(59192),Image:e(1539),Layer:e(85305),Particles:e(27684),PathFollower:e(29598),RenderTexture:e(15996),RetroFont:e(55873),Rope:e(79968),Sprite:e(13747),Text:e(76555),GetTextSize:e(32979),MeasureText:e(27030),TextStyle:e(74744),TileSprite:e(35856),Zone:e(71030),Video:e(8630),Shape:e(91461),Arc:e(28593),Curve:e(15220),Ellipse:e(28591),Grid:e(39169),IsoBox:e(4415),IsoTriangle:e(65159),Line:e(579),Polygon:e(91249),Rectangle:e(517),Star:e(77843),Triangle:e(21873),Factories:{Blitter:e(38906),Container:e(23400),DOMElement:e(66788),DynamicBitmapText:e(94145),Extern:e(41155),Graphics:e(13122),Group:e(62598),Image:e(20927),Layer:e(17676),Particles:e(81212),PathFollower:e(19626),RenderTexture:e(29599),Rope:e(31982),Sprite:e(66135),StaticBitmapText:e(21797),Text:e(94627),TileSprite:e(20509),Zone:e(34546),Video:e(215),Arc:e(10369),Curve:e(10147),Ellipse:e(99869),Grid:e(9326),IsoBox:e(88154),IsoTriangle:e(67765),Line:e(85665),Polygon:e(88203),Rectangle:e(94355),Star:e(23962),Triangle:e(79296)},Creators:{Blitter:e(68452),Container:e(44516),DynamicBitmapText:e(67513),Graphics:e(41286),Group:e(61295),Image:e(83556),Layer:e(56378),Particles:e(765),RenderTexture:e(85692),Rope:e(96027),Sprite:e(89219),StaticBitmapText:e(95499),Text:e(75397),TileSprite:e(63950),Zone:e(24067),Video:e(65601)}};a.Shader=e(27902),a.Mesh=e(83321),a.NineSlice=e(44139),a.PointLight=e(13171),a.Plane=e(33412),a.Factories.Shader=e(51979),a.Factories.Mesh=e(8767),a.Factories.NineSlice=e(53778),a.Factories.PointLight=e(91201),a.Factories.Plane=e(58322),a.Creators.Shader=e(13908),a.Creators.Mesh=e(41839),a.Creators.NineSlice=e(40964),a.Creators.PointLight=e(162),a.Creators.Plane=e(10912),a.Light=e(14455),a.LightsManager=e(26193),a.LightsPlugin=e(50296),i.exports=a},85305:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95723),v=e(56694),u=e(64937),o=e(48129),c=e(81078),l=e(6659),f=e(56631),m=e(71207),h=e(58010),p=e(7599),y=e(17922),x=new v({Extends:m,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.PostPipeline,u.Visible,l,h],initialize:function(C,E){m.call(this,C),l.call(this),this.scene=C,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=C.sys,this.events=C.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),E&&this.add(E),C.sys.queueDepthSort()},setActive:function(T){return this.active=T,this},setName:function(T){return this.name=T,this},setState:function(T){return this.state=T,this},setDataEnabled:function(){return this.data||(this.data=new c(this)),this},setData:function(T,C){return this.data||(this.data=new c(this)),this.data.set(T,C),this},incData:function(T,C){return this.data||(this.data=new c(this)),this.data.inc(T,C),this},toggleData:function(T){return this.data||(this.data=new c(this)),this.data.toggle(T),this},getData:function(T){return this.data||(this.data=new c(this)),this.data.get(T)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(T){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&T.id)},getIndexList:function(){for(var T=this,C=this.parentContainer,E=[];C&&(E.unshift(C.getIndex(T)),T=C,C.parentContainer);)C=C.parentContainer;return E.unshift(this.displayList.getIndex(T)),E},addChildCallback:function(T){T.displayList&&T.displayList!==this&&T.removeFromDisplayList(),T.displayList||(this.queueDepthSort(),T.displayList=this,T.emit(f.ADDED_TO_SCENE,T,this.scene),this.events.emit(p.ADDED_TO_SCENE,T,this.scene))},removeChildCallback:function(T){this.queueDepthSort(),T.displayList=null,T.emit(f.REMOVED_FROM_SCENE,T,this.scene),this.events.emit(p.REMOVED_FROM_SCENE,T,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(y(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(T,C){return T._depth-C._depth},getChildren:function(){return this.list},addToDisplayList:function(T){return T===void 0&&(T=this.scene.sys.displayList),this.displayList&&this.displayList!==T&&this.removeFromDisplayList(),T.exists(this)||(this.displayList=T,T.add(this,!0),T.queueDepthSort(),this.emit(f.ADDED_TO_SCENE,this,this.scene),T.events.emit(p.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var T=this.displayList||this.scene.sys.displayList;return T.exists(this)&&(T.remove(this,!0),T.queueDepthSort(),this.displayList=null,this.emit(f.REMOVED_FROM_SCENE,this,this.scene),T.events.emit(p.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(T){if(!(!this.scene||this.ignoreDestroy)){this.emit(f.DESTROY,this);for(var C=this.list;C.length;)C[0].destroy(T);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});i.exports=x},834:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=a.list;if(u.length!==0){a.depthSort();var o=a.blendMode!==-1;o||e.setBlendMode(0);var c=a._alpha;a.mask&&a.mask.preRenderCanvas(e,null,v);for(var l=0;l<u.length;l++){var f=u[l];if(f.willRender(v)){var m=f.alpha;!o&&f.blendMode!==e.currentBlendMode&&e.setBlendMode(f.blendMode),f.setAlpha(m*c),f.renderCanvas(e,f,v),f.setAlpha(m)}}a.mask&&a.mask.postRenderCanvas(e)}};i.exports=g},56378:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(85305),u=e(99325),o=e(20494);u.register("layer",function(c,l){c===void 0&&(c={});var f=o(c,"children",null),m=new v(this.scene,f);return l!==void 0&&(c.add=l),a(this.scene,m,c),m})},17676:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85305),v=e(61286);v.register("layer",function(u){return this.displayList.add(new a(this.scene,u))})},58010:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(17576),u=e(834),i.exports={renderWebGL:v,renderCanvas:u}},17576:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=a.list,o=u.length;if(o!==0){a.depthSort(),e.pipelines.preBatch(a);var c=a.blendMode!==-1;c||e.setBlendMode(0);for(var l=a.alpha,f=0;f<o;f++){var m=u[f];if(m.willRender(v)){var h,p,y,x;if(m.alphaTopLeft!==void 0)h=m.alphaTopLeft,p=m.alphaTopRight,y=m.alphaBottomLeft,x=m.alphaBottomRight;else{var T=m.alpha;h=T,p=T,y=T,x=T}!c&&m.blendMode!==e.currentBlendMode&&e.setBlendMode(m.blendMode);var C=m.mask;C&&C.preRenderWebGL(e,m,v);var E=m.type;E!==e.currentType&&(e.newType=!0,e.currentType=E),e.nextTypeMatch=f<o-1?u[f+1].type===e.currentType:!1,m.setAlpha(h*l,p*l,y*l,x*l),m.renderWebGL(e,m,v),m.setAlpha(h,p,y,x),C&&C.postRenderWebGL(e,v),e.newType=!1}}e.pipelines.postBatch(a)}};i.exports=g},14455:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26673),v=e(56694),u=e(64937),o=e(39298),c=e(75512),l=new v({Extends:a,Mixins:[u.Origin,u.ScrollFactor,u.Transform,u.Visible],initialize:function(m,h,p,y,x,T,C){a.call(this,m,h,p),this.color=new o(y,x,T),this.intensity=C,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(p)},displayWidth:{get:function(){return this.diameter},set:function(f){this.diameter=f}},displayHeight:{get:function(){return this.diameter},set:function(f){this.diameter=f}},width:{get:function(){return this.diameter},set:function(f){this.diameter=f}},height:{get:function(){return this.diameter},set:function(f){this.diameter=f}},willRender:function(f){return!(l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},setColor:function(f){var m=c.getFloatsFromUintRGB(f);return this.color.set(m[0],m[1],m[2]),this},setIntensity:function(f){return this.intensity=f,this},setRadius:function(f){return this.radius=f,this}});l.RENDER_MASK=15,i.exports=l},26193:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26535),v=e(56694),u=e(53996),o=e(14455),c=e(13171),l=e(39298),f=e(72677),m=e(17922),h=e(75512),p=new v({initialize:function(){this.lights=[],this.ambientColor=new l(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(y,x,T,C,E,A){return this.systems.displayList.add(new c(this.scene,y,x,T,C,E,A))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(y){for(var x=this.lights,T=y.worldView,C=[],E=0;E<x.length;E++){var A=x[E];A.willRender(y)&&a(A,T)&&C.push({light:A,distance:u(A.x,A.y,T.centerX,T.centerY)})}return C.length>this.maxLights&&(m(C,this.sortByDistance),C=C.slice(0,this.maxLights)),this.visibleLights=C.length,C},sortByDistance:function(y,x){return y.distance>=x.distance},setAmbientColor:function(y){var x=h.getFloatsFromUintRGB(y);return this.ambientColor.set(x[0],x[1],x[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(y,x,T,C,E){y===void 0&&(y=0),x===void 0&&(x=0),T===void 0&&(T=128),C===void 0&&(C=16777215),E===void 0&&(E=1);var A=h.getFloatsFromUintRGB(C),w=new o(y,x,T,A[0],A[1],A[2],E);return this.lights.push(w),w},removeLight:function(y){var x=this.lights.indexOf(y);return x>=0&&f(this.lights,x),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});i.exports=p},50296:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(26193),u=e(91963),o=e(7599),c=new a({Extends:v,initialize:function(f){this.scene=f,this.systems=f.sys,f.sys.settings.isBooted||f.sys.events.once(o.BOOT,this.boot,this),v.call(this)},boot:function(){var l=this.systems.events;l.on(o.SHUTDOWN,this.shutdown,this),l.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});u.register("LightsPlugin",c,"lights"),i.exports=c},83321:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(75606),o=e(18693),c=e(89980),l=e(53267),f=e(67623),m=e(73329),h=e(16650),p=e(23464),y=e(23701),x=e(17922),T=e(70015),C=e(85769),E=new a({Extends:c,Mixins:[v.AlphaSingle,v.BlendMode,v.Depth,v.Mask,v.Pipeline,v.PostPipeline,v.ScrollFactor,v.Size,v.Texture,v.Transform,v.Visible,p],initialize:function(w,b,I,R,N,F,P,O,M,L,k,V){b===void 0&&(b=0),I===void 0&&(I=0),R===void 0&&(R="__WHITE"),c.call(this,w,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new T,this.modelScale=new T(1,1,1),this.modelRotation=new T,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new h,this.viewPosition=new T,this.viewMatrix=new h,this.projectionMatrix=new h,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var W=w.sys.renderer;this.setPosition(b,I),this.setTexture(R,N),this.setSize(W.width,W.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(W.width,W.height),F&&this.addVertices(F,P,O,M,L,k,V)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(A){return this.viewPosition.addScale(T.LEFT,A),this.dirtyCache[10]=1,this},panY:function(A){return this.viewPosition.y+=T.DOWN.y*A,this.dirtyCache[10]=1,this},panZ:function(A){return this.viewPosition.z+=A,this.dirtyCache[10]=1,this},setPerspective:function(A,w,b,I,R){return b===void 0&&(b=45),I===void 0&&(I=.01),R===void 0&&(R=1e3),this.fov=b,this.projectionMatrix.perspective(u(b),A/w,I,R),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(A,w,b,I){return A===void 0&&(A=this.scene.sys.renderer.getAspectRatio()),w===void 0&&(w=1),b===void 0&&(b=-1e3),I===void 0&&(I=1e3),this.fov=0,this.projectionMatrix.ortho(-A,A,-w,w,b,I),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(A){A.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(A,w,b,I,R,N,F,P,O){var M=this.scene.sys.cache.obj.get(A),L;return M&&(L=l(M,this,w,b,I,R,N,F,P,O)),(!L||L.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",A),this},sortByDepth:function(A,w){return A.depth-w.depth},depthSort:function(){return x(this.faces,this.sortByDepth),this},addVertex:function(A,w,b,I,R,N,F){var P=new C(A,w,b,I,R,N,F);return this.vertices.push(P),P},addFace:function(A,w,b){var I=new o(A,w,b);return this.faces.push(I),this.dirtyCache[9]=-1,I},addVertices:function(A,w,b,I,R,N,F){var P=f(A,w,b,I,R,N,F);return P?(this.faces=this.faces.concat(P.faces),this.vertices=this.vertices.concat(P.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(A){return this.faces[A]},hasFaceAt:function(A,w,b){b===void 0&&(b=this.scene.sys.cameras.main);for(var I=m(this,b).calc,R=this.faces,N=0;N<R.length;N++){var F=R[N];if(F.contains(A,w,I))return!0}return!1},getFaceAt:function(A,w,b){b===void 0&&(b=this.scene.sys.cameras.main);for(var I=m(this,b).calc,R=this.faces,N=[],F=0;F<R.length;F++){var P=R[F];P.contains(A,w,I)&&N.push(P)}return x(N,this.sortByDepth)},setDebug:function(A,w){return this.debugGraphic=A,!A&&!w?this.debugCallback=null:w?this.debugCallback=w:this.debugCallback=this.renderDebug,this},isDirty:function(){var A=this.modelPosition,w=this.modelRotation,b=this.modelScale,I=this.dirtyCache,R=A.x,N=A.y,F=A.z,P=w.x,O=w.y,M=w.z,L=b.x,k=b.y,V=b.z,W=this.getFaceCount(),K=I[0],B=I[1],G=I[2],D=I[3],$=I[4],z=I[5],H=I[6],Y=I[7],Z=I[8],Q=I[9];return I[0]=R,I[1]=N,I[2]=F,I[3]=P,I[4]=O,I[5]=M,I[6]=L,I[7]=k,I[8]=V,I[9]=W,K!==R||B!==N||G!==F||D!==P||$!==O||z!==M||H!==L||Y!==k||Z!==V||Q!==W},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var A=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!A[10]&&!this.isDirty())){var w=this.width,b=this.height,I=this.viewMatrix,R=this.viewPosition;A[10]&&(I.identity(),I.translate(R),I.invert(),A[10]=0);var N=this.transformMatrix;N.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var F=R.z,P=this.faces,O=0;O<P.length;O++)P[O].transformCoordinatesLocal(N,w,b,F);this.depthSort()}},renderDebug:function(A,w){for(var b=A.debugGraphic,I=0;I<w.length;I++){var R=w[I],N=R.vertex1.tx,F=R.vertex1.ty,P=R.vertex2.tx,O=R.vertex2.ty,M=R.vertex3.tx,L=R.vertex3.ty;b.strokeTriangle(N,F,P,O,M,L)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var A=this.faces,w=function(b,I,R){for(var N=0;N<A.length;N++){var F=A[N];if(F.contains(I,R))return!0}return!1};return this.scene.sys.input.enable(this,w),this},setTint:function(A){A===void 0&&(A=16777215);for(var w=this.vertices,b=0;b<w.length;b++)w[b].color=A;return this},uvScroll:function(A,w){for(var b=this.faces,I=0;I<b.length;I++)b[I].scrollUV(A,w);return this},uvScale:function(A,w){for(var b=this.faces,I=0;I<b.length;I++)b[I].scaleUV(A,w);return this},tint:{set:function(A){this.setTint(A)}},rotateX:{get:function(){return y(this.modelRotation.x)},set:function(A){this.modelRotation.x=u(A)}},rotateY:{get:function(){return y(this.modelRotation.y)},set:function(A){this.modelRotation.y=u(A)}},rotateZ:{get:function(){return y(this.modelRotation.z)},set:function(A){this.modelRotation.z=u(A)}}});i.exports=E},6317:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){};i.exports=g},41839:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(99325),u=e(20494),o=e(10850),c=e(83321);v.register("mesh",function(l,f){l===void 0&&(l={});var m=u(l,"key",null),h=u(l,"frame",null),p=o(l,"vertices",[]),y=o(l,"uvs",[]),x=o(l,"indicies",[]),T=o(l,"containsZ",!1),C=o(l,"normals",[]),E=o(l,"colors",16777215),A=o(l,"alphas",1),w=new c(this.scene,0,0,m,h,p,y,x,T,C,E,A);return f!==void 0&&(l.add=f),a(this.scene,w,l),w})},8767:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83321),v=e(61286);v.register("mesh",function(u,o,c,l,f,m,h,p,y,x,T){return this.displayList.add(new a(this.scene,u,o,c,l,f,m,h,p,y,x,T))})},23464:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(57410),u=e(6317),i.exports={renderWebGL:v,renderCanvas:u}},57410:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=function(u,o,c,l){var f=o.faces,m=f.length;if(m!==0){c.addToRenderList(o);var h=u.pipelines.set(o.pipeline,o),p=a(o,c,l).calc;u.pipelines.preBatch(o);for(var y=h.setGameObject(o),x=h.vertexViewF32,T=h.vertexViewU32,C=h.vertexCount*h.currentShader.vertexComponentCount-1,E=o.tintFill,A=[],w=o.debugCallback,b=p.a,I=p.b,R=p.c,N=p.d,F=p.e,P=p.f,O=o.viewPosition.z,M=o.hideCCW,L=c.roundPixels,k=c.alpha*o.alpha,V=0,W=0;W<m;W++){var K=f[W];K.isInView(c,M,O,k,b,I,R,N,F,P,L)&&(h.shouldFlush(3)&&(h.flush(),y=h.setGameObject(o),C=0),C=K.load(x,T,C,y,E),V++,h.vertexCount+=3,h.currentBatch.count=h.vertexCount-h.currentBatch.start,w&&A.push(K))}o.totalFrame+=V,w&&w.call(o,o,A),u.pipelines.postBatch(o)}};i.exports=v},44139:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(89980),o=e(94456),c=e(85769),l=new a({Extends:u,Mixins:[v.AlphaSingle,v.BlendMode,v.Depth,v.GetBounds,v.Mask,v.Origin,v.Pipeline,v.PostPipeline,v.ScrollFactor,v.Texture,v.Transform,v.Visible,o],initialize:function(m,h,p,y,x,T,C,E,A,w,b){T===void 0&&(T=256),C===void 0&&(C=256),E===void 0&&(E=10),A===void 0&&(A=10),w===void 0&&(w=0),b===void 0&&(b=0),u.call(this,m,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1,this.is3Slice=w===0&&b===0;for(var I=this.is3Slice?18:54,R=0;R<I;R++)this.vertices.push(new c);this.setPosition(h,p),this.setTexture(y,x),this.setSlices(T,C,E,A,w,b),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(f,m,h,p,y,x){f===void 0&&(f=256),m===void 0&&(m=256),h===void 0&&(h=10),p===void 0&&(p=10),y===void 0&&(y=0),x===void 0&&(x=0);var T=y===0&&x===0;return this.is3Slice!==T?console.warn("Cannot change 9 slice to 3 slice"):(this._width=f,this._height=m,this.leftWidth=h,this.rightWidth=p,this.topHeight=y,this.bottomHeight=x,this.is3Slice&&(m=this.frame.height,this._height=m,this.topHeight=m,this.bottomHeight=0),this.updateVertices(),this.updateUVs()),this},updateUVs:function(){var f=this.leftWidth,m=this.rightWidth,h=this.topHeight,p=this.bottomHeight,y=this.frame.width,x=this.frame.height;this.updateQuadUVs(0,0,0,f/y,h/x),this.updateQuadUVs(6,f/y,0,1-m/y,h/x),this.updateQuadUVs(12,1-m/y,0,1,h/x),this.is3Slice||(this.updateQuadUVs(18,0,h/x,f/y,1-p/x),this.updateQuadUVs(24,f/y,h/x,1-m/y,1-p/x),this.updateQuadUVs(30,1-m/y,h/x,1,1-p/x),this.updateQuadUVs(36,0,1-p/x,f/y,1),this.updateQuadUVs(42,f/y,1-p/x,1-m/y,1),this.updateQuadUVs(48,1-m/y,1-p/x,1,1))},updateVertices:function(){var f=this.leftWidth,m=this.rightWidth,h=this.topHeight,p=this.bottomHeight,y=this.width,x=this.height;this.updateQuad(0,-.5,.5,-.5+f/y,.5-h/x),this.updateQuad(6,-.5+f/y,.5,.5-m/y,.5-h/x),this.updateQuad(12,.5-m/y,.5,.5,.5-h/x),this.is3Slice||(this.updateQuad(18,-.5,.5-h/x,-.5+f/y,-.5+p/x),this.updateQuad(24,-.5+f/y,.5-h/x,.5-m/y,-.5+p/x),this.updateQuad(30,.5-m/y,.5-h/x,.5,-.5+p/x),this.updateQuad(36,-.5,-.5+p/x,-.5+f/y,-.5),this.updateQuad(42,-.5+f/y,-.5+p/x,.5-m/y,-.5),this.updateQuad(48,.5-m/y,-.5+p/x,.5,-.5))},updateQuad:function(f,m,h,p,y){var x=this.width,T=this.height,C=this.originX,E=this.originY,A=this.vertices;A[f+0].resize(m,h,x,T,C,E),A[f+1].resize(m,y,x,T,C,E),A[f+2].resize(p,h,x,T,C,E),A[f+3].resize(m,y,x,T,C,E),A[f+4].resize(p,y,x,T,C,E),A[f+5].resize(p,h,x,T,C,E)},updateQuadUVs:function(f,m,h,p,y){var x=this.vertices,T=this.frame,C=T.u0,E=T.v0,A=T.u1,w=T.v1;if(C!==0||A!==1){var b=A-C;m=C+m*b,p=C+p*b}if(E!==0||w!==1){var I=w-E;h=E+h*I,y=E+y*I}x[f+0].setUVs(m,h),x[f+1].setUVs(m,y),x[f+2].setUVs(p,h),x[f+3].setUVs(m,y),x[f+4].setUVs(p,y),x[f+5].setUVs(p,h)},clearTint:function(){return this.setTint(16777215),this},setTint:function(f){return f===void 0&&(f=16777215),this.tint=f,this.tintFill=!1,this},setTintFill:function(f){return this.setTint(f),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(f){this._width=Math.max(f,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(f){this.is3Slice||(this._height=Math.max(f,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(f){this.scaleX=f/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(f){this.scaleY=f/this.height}},setSize:function(f,m){this.width=f,this.height=m;var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=this.width,h.hitArea.height=this.height),this},setDisplaySize:function(f,m){return this.displayWidth=f,this.displayHeight=m,this},originX:{get:function(){return this._originX},set:function(f){this._originX=f,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(f){this._originY=f,this.updateVertices()}},setOrigin:function(f,m){return f===void 0&&(f=.5),m===void 0&&(m=f),this._originX=f,this._originY=m,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var f=this.frame.height;this._height=f,this.topHeight=f,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});i.exports=l},40964:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(99325),u=e(20494),o=e(10850),c=e(44139);v.register("nineslice",function(l,f){l===void 0&&(l={});var m=u(l,"key",null),h=u(l,"frame",null),p=o(l,"width",256),y=o(l,"height",256),x=o(l,"leftWidth",10),T=o(l,"rightWidth",10),C=o(l,"topHeight",0),E=o(l,"bottomHeight",0),A=new c(this.scene,0,0,m,h,p,y,x,T,C,E);return f!==void 0&&(l.add=f),a(this.scene,A,l),A})},53778:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44139),v=e(61286);v.register("nineslice",function(u,o,c,l,f,m,h,p,y,x){return this.displayList.add(new a(this.scene,u,o,c,l,f,m,h,p,y,x))})},94456:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(27420),i.exports={renderWebGL:v,renderCanvas:u}},27420:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=e(75512),u=function(o,c,l,f){var m=c.vertices,h=m.length;if(h!==0){l.addToRenderList(c);var p=o.pipelines.set(c.pipeline,c),y=a(c,l,f,!1).calc;o.pipelines.preBatch(c);var x=p.setGameObject(c),T=p.vertexViewF32,C=p.vertexViewU32,E=p.vertexCount*p.currentShader.vertexComponentCount-1,A=l.roundPixels,w=c.tintFill,b=l.alpha*c.alpha,I=v.getTintAppendFloatAlpha(c.tint,b),R=p.vertexAvailable(),N=-1;R<h&&(N=R);for(var F=0;F<h;F++){var P=m[F];F===N&&(p.flush(),x=p.setGameObject(c),E=0),T[++E]=y.getXRound(P.vx,P.vy,A),T[++E]=y.getYRound(P.vx,P.vy,A),T[++E]=P.u,T[++E]=P.v,T[++E]=x,T[++E]=w,C[++E]=I,p.vertexCount++,p.currentBatch.count=p.vertexCount-p.currentBatch.start}o.pipelines.postBatch(c)}};i.exports=u},19737:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(93025),u=e(22946),o=e(21902),c=e(4840),l=e(15978),f=new a({Extends:v,initialize:function(h){v.call(this,h,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var m=this.propertyValue,h=m,p=this.defaultEmit,y=this.defaultUpdate;if(this.method===9){this.start=m[0],this.ease=o("Linear"),this.interpolation=c("linear"),p=this.easedValueEmit,y=this.easeValueUpdate,h=m[0],this.active=!0;for(var x=0;x<m.length;x++){var T=l(m[x]);this.r.push(T.r),this.g.push(T.g),this.b.push(T.b)}}return this.onEmit=p,this.onUpdate=y,this.current=h,this},setEase:function(m){this.easeName=m,this.ease=o(m)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(m,h,p){var y=this.ease(p),x=this.interpolation(this.r,y),T=this.interpolation(this.g,y),C=this.interpolation(this.b,y),E=u(x,T,C);return this.current=E,E}});i.exports=f},93025:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(17489),v=e(82897),u=e(56694),o=e(61616),c=e(21902),l=e(72632),f=e(4840),m=e(88462),h=e(1071),p=new u({initialize:function(x,T,C){C===void 0&&(C=!1),this.propertyKey=x,this.propertyValue=T,this.defaultValue=T,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=C,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(y,x){y===void 0&&(y={}),x&&(this.propertyKey=x),this.propertyValue=l(y,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(y){var x;switch(this.method){case 1:case 3:case 8:x=y;break;case 2:this.propertyValue.indexOf(y)>=0&&(x=y);break;case 4:var T=(this.end-this.start)/this.steps;x=m(y,T),this.counter=x;break;case 5:case 6:case 7:x=v(y,this.start,this.end);break;case 9:x=this.start[0];break}return this.current=x,this},getMethod:function(){var y=this.propertyValue;if(y===null)return 0;var x=typeof y;if(x==="number")return 1;if(Array.isArray(y))return 2;if(x==="function")return 3;if(x==="object"){if(this.hasBoth(y,"start","end"))return this.has(y,"steps")?4:5;if(this.hasBoth(y,"min","max"))return 6;if(this.has(y,"random"))return 7;if(this.hasEither(y,"onEmit","onUpdate"))return 8;if(this.has(y,"interpolation"))return 9}return 0},setMethods:function(){var y=this.propertyValue,x=y,T=this.defaultEmit,C=this.defaultUpdate;switch(this.method){case 1:T=this.staticValueEmit;break;case 2:T=this.randomStaticValueEmit,x=y[0];break;case 3:this._onEmit=y,T=this.proxyEmit;break;case 4:this.start=y.start,this.end=y.end,this.steps=y.steps,this.counter=this.start,this.yoyo=this.has(y,"yoyo")?y.yoyo:!1,this.direction=0,T=this.steppedEmit,x=this.start;break;case 5:this.start=y.start,this.end=y.end;var E=this.has(y,"ease")?y.ease:"Linear";this.ease=c(E,y.easeParams),T=this.has(y,"random")&&y.random?this.randomRangedValueEmit:this.easedValueEmit,C=this.easeValueUpdate,x=this.start;break;case 6:this.start=y.min,this.end=y.max,T=this.has(y,"int")&&y.int?this.randomRangedIntEmit:this.randomRangedValueEmit,x=this.start;break;case 7:var A=y.random;Array.isArray(A)&&(this.start=A[0],this.end=A[1]),T=this.randomRangedIntEmit,x=this.start;break;case 8:this._onEmit=this.has(y,"onEmit")?y.onEmit:this.defaultEmit,this._onUpdate=this.has(y,"onUpdate")?y.onUpdate:this.defaultUpdate,T=this.proxyEmit,C=this.proxyUpdate;break;case 9:this.start=y.values;var w=this.has(y,"ease")?y.ease:"Linear";this.ease=c(w,y.easeParams),this.interpolation=f(y.interpolation),T=this.easedValueEmit,C=this.easeValueUpdate,x=this.start[0];break}return this.onEmit=T,this.onUpdate=C,this.current=x,this},has:function(y,x){return y.hasOwnProperty(x)},hasBoth:function(y,x,T){return y.hasOwnProperty(x)&&y.hasOwnProperty(T)},hasEither:function(y,x,T){return y.hasOwnProperty(x)||y.hasOwnProperty(T)},defaultEmit:function(y,x,T){return T},defaultUpdate:function(y,x,T,C){return C},proxyEmit:function(y,x,T){var C=this._onEmit(y,x,T);return this.current=C,C},proxyUpdate:function(y,x,T,C){var E=this._onUpdate(y,x,T,C);return this.current=E,E},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var y=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[y],this.current},randomRangedValueEmit:function(y,x){var T=o(this.start,this.end);return y&&y.data[x]&&(y.data[x].min=T,y.data[x].max=this.end),this.current=T,T},randomRangedIntEmit:function(y,x){var T=a(this.start,this.end);return y&&y.data[x]&&(y.data[x].min=T,y.data[x].max=this.end),this.current=T,T},steppedEmit:function(){var y=this.counter,x=y,T=(this.end-this.start)/this.steps;if(this.yoyo){var C;this.direction===0?(x+=T,x>=this.end&&(C=x-this.end,x=this.end-C,this.direction=1)):(x-=T,x<=this.start&&(C=this.start-x,x=this.start+C,this.direction=0)),this.counter=x}else this.counter=h(x+T,this.start,this.end);return this.current=y,y},easedValueEmit:function(y,x){if(y&&y.data[x]){var T=y.data[x];T.min=this.start,T.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(y,x,T){var C=y.data[x],E,A=this.ease(T);return this.interpolation?E=this.interpolation(this.start,A):E=(C.max-C.min)*A+C.min,this.current=E,E},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});i.exports=p},87811:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72632),u=e(30891),o=new a({Extends:u,initialize:function(l,f,m,h,p){if(typeof l=="object"){var y=l;l=v(y,"x",0),f=v(y,"y",0),m=v(y,"power",0),h=v(y,"epsilon",100),p=v(y,"gravity",50)}else l===void 0&&(l=0),f===void 0&&(f=0),m===void 0&&(m=0),h===void 0&&(h=100),p===void 0&&(p=50);u.call(this,l,f,!0),this._gravity=p,this._power=m*p,this._epsilon=h*h},update:function(c,l){var f=this.x-c.x,m=this.y-c.y,h=f*f+m*m;if(h!==0){var p=Math.sqrt(h);h<this._epsilon&&(h=this._epsilon);var y=this._power*l/(h*p)*100;c.velocityX+=f*y,c.velocityY+=m*y}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(c){this._epsilon=c*c}},power:{get:function(){return this._power/this._gravity},set:function(c){this._power=c*this._gravity}},gravity:{get:function(){return this._gravity},set:function(c){var l=this.power;this._gravity=c,this.power=l}}});i.exports=o},14909:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16569),v=e(82897),u=e(56694),o=e(75606),c=e(74118),l=e(2386),f=e(93736),m=new u({initialize:function(p){this.emitter=p,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new f,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=p.scene,this.anims=new a(this),this.bounds=new c},emit:function(h,p,y,x,T,C){return this.emitter.emit(h,p,y,x,T,C)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(h,p){h===void 0&&(h=0),p===void 0&&(p=0),this.x=h,this.y=p},fire:function(h,p){var y=this.emitter,x=y.ops,T=y.getAnim();if(T?this.anims.play(T):(this.frame=y.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(y.getEmitZone(this),h===void 0?this.x+=x.x.onEmit(this,"x"):x.x.steps>0?this.x+=h+x.x.onEmit(this,"x"):this.x+=h,p===void 0?this.y+=x.y.onEmit(this,"y"):x.y.steps>0?this.y+=p+x.y.onEmit(this,"y"):this.y+=p,this.life=x.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=x.delay.onEmit(this,"delay"),this.holdCurrent=x.hold.onEmit(this,"hold"),this.scaleX=x.scaleX.onEmit(this,"scaleX"),this.scaleY=x.scaleY.active?x.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=x.rotate.onEmit(this,"rotate"),this.rotation=o(this.angle),y.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&y.getDeathZone(this))return this.lifeCurrent=0,!1;var C=x.speedX.onEmit(this,"speedX"),E=x.speedY.active?x.speedY.onEmit(this,"speedY"):C;if(y.radial){var A=o(x.angle.onEmit(this,"angle"));this.velocityX=Math.cos(A)*Math.abs(C),this.velocityY=Math.sin(A)*Math.abs(E)}else if(y.moveTo){var w=x.moveToX.onEmit(this,"moveToX"),b=x.moveToY.onEmit(this,"moveToY"),I=this.life/1e3;this.velocityX=(w-this.x)/I,this.velocityY=(b-this.y)/I}else this.velocityX=C,this.velocityY=E;return y.acceleration&&(this.accelerationX=x.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=x.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=x.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=x.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=x.bounce.onEmit(this,"bounce"),this.alpha=x.alpha.onEmit(this,"alpha"),x.color.active?this.tint=x.color.onEmit(this,"tint"):this.tint=x.tint.onEmit(this,"tint"),!0},update:function(h,p,y){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=h,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=h,!1;this.anims.update(0,h);var x=this.emitter,T=x.ops,C=1-this.lifeCurrent/this.life;if(this.lifeT=C,this.x=T.x.onUpdate(this,"x",C,this.x),this.y=T.y.onUpdate(this,"y",C,this.y),x.moveTo){var E=T.moveToX.onUpdate(this,"moveToX",C,x.moveToX),A=T.moveToY.onUpdate(this,"moveToY",C,x.moveToY),w=this.lifeCurrent/1e3;this.velocityX=(E-this.x)/w,this.velocityY=(A-this.y)/w}return this.computeVelocity(x,h,p,y,C),this.scaleX=T.scaleX.onUpdate(this,"scaleX",C,this.scaleX),this.scaleY=this.scaleX,T.scaleY.active&&(this.scaleY=T.scaleY.onUpdate(this,"scaleY",C,this.scaleY)),this.angle=T.rotate.onUpdate(this,"rotate",C,this.angle),this.rotation=o(this.angle),x.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=T.alpha.onUpdate(this,"alpha",C,this.alpha),T.color.active?this.tint=T.color.onUpdate(this,"color",C,this.tint):this.tint=T.tint.onUpdate(this,"tint",C,this.tint),this.lifeCurrent-=h,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(h,p,y,x,T){var C=h.ops,E=this.velocityX,A=this.velocityY,w=C.accelerationX.onUpdate(this,"accelerationX",T,this.accelerationX),b=C.accelerationY.onUpdate(this,"accelerationY",T,this.accelerationY),I=C.maxVelocityX.onUpdate(this,"maxVelocityX",T,this.maxVelocityX),R=C.maxVelocityY.onUpdate(this,"maxVelocityY",T,this.maxVelocityY);this.bounce=C.bounce.onUpdate(this,"bounce",T,this.bounce),E+=h.gravityX*y+w*y,A+=h.gravityY*y+b*y,E=v(E,-I,I),A=v(A,-R,R),this.velocityX=E,this.velocityY=A,this.x+=E*y,this.y+=A*y,h.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var N=0;N<x.length;N++){var F=x[N];F.active&&F.update(this,p,y,T)}},setSizeToFrame:function(){},getBounds:function(h){h===void 0&&(h=this.emitter.getWorldTransformMatrix());var p=Math.abs(h.scaleX)*this.scaleX,y=Math.abs(h.scaleY)*this.scaleY,x=this.x,T=this.y,C=this.rotation,E=this.frame.width*p/2,A=this.frame.height*y/2,w=this.bounds,b=new f(x-E,T-A),I=new f(x+E,T-A),R=new f(x-E,T+A),N=new f(x+E,T+A);return C!==0&&(l(b,x,T,C),l(I,x,T,C),l(R,x,T,C),l(N,x,T,C)),h.transformPoint(b.x,b.y,b),h.transformPoint(I.x,I.y,I),h.transformPoint(R.x,R.y,R),h.transformPoint(N.x,N.y,N),w.x=Math.min(b.x,I.x,R.x,N.x),w.y=Math.min(b.y,I.y,R.y,N.y),w.width=Math.max(b.x,I.x,R.x,N.x)-w.x,w.height=Math.max(b.y,I.y,R.y,N.y)-w.y,w},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});i.exports=m},73106:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(30891),u=e(74118),o=new a({Extends:v,initialize:function(l,f,m,h,p,y,x,T){p===void 0&&(p=!0),y===void 0&&(y=!0),x===void 0&&(x=!0),T===void 0&&(T=!0),v.call(this,l,f,!0),this.bounds=new u(l,f,m,h),this.collideLeft=p,this.collideRight=y,this.collideTop=x,this.collideBottom=T},update:function(c){var l=this.bounds,f=-c.bounce,m=c.worldPosition;m.x<l.x&&this.collideLeft?(c.x+=l.x-m.x,c.velocityX*=f):m.x>l.right&&this.collideRight&&(c.x-=m.x-l.right,c.velocityX*=f),m.y<l.y&&this.collideTop?(c.y+=l.y-m.y,c.velocityY*=f):m.y>l.bottom&&this.collideBottom&&(c.y-=m.y-l.bottom,c.velocityY*=f)}});i.exports=o},9216:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(48129),o=e(29538),c=e(69361),l=e(54213),f=e(19737),m=e(93025),h=e(40629),p=e(89980),y=e(72632),x=e(72861),T=e(87811),C=e(53523),E=e(19256),A=e(7782),w=e(71207),b=e(14655),I=e(14909),R=e(68433),N=e(74118),F=e(90205),P=e(66458),O=e(69116),M=e(17922),L=e(69360),k=e(93736),V=e(1071),W=e(73106),K=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],B=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],G=new a({Extends:p,Mixins:[v.AlphaSingle,v.BlendMode,v.Depth,v.Mask,v.Pipeline,v.PostPipeline,v.ScrollFactor,v.Texture,v.Transform,v.Visible,O],initialize:function($,z,H,Y,Z){p.call(this,$,"ParticleEmitter"),this.particleClass=I,this.ops={accelerationX:new m("accelerationX",0),accelerationY:new m("accelerationY",0),alpha:new m("alpha",1),angle:new m("angle",{min:0,max:360},!0),bounce:new m("bounce",0),color:new f("color"),delay:new m("delay",0,!0),hold:new m("hold",0,!0),lifespan:new m("lifespan",1e3,!0),maxVelocityX:new m("maxVelocityX",1e4),maxVelocityY:new m("maxVelocityY",1e4),moveToX:new m("moveToX",0),moveToY:new m("moveToY",0),quantity:new m("quantity",1,!0),rotate:new m("rotate",0),scaleX:new m("scaleX",1),scaleY:new m("scaleY",1),speedX:new m("speedX",0,!0),speedY:new m("speedY",0,!0),tint:new m("tint",16777215),x:new m("x",0),y:new m("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new k,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new L,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new w(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(z,H),this.setTexture(Y),Z&&this.setConfig(Z)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(D){if(!D)return this;var $=0,z="",H=this.ops;for($=0;$<B.length;$++)z=B[$],H[z].loadConfig(D);for($=0;$<K.length;$++)z=K[$],E(D,z)&&(this[z]=y(D,z));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,E(D,"speed")&&(H.speedX.loadConfig(D,"speed"),H.speedY.active=!1),(C(D,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),E(D,"scale")&&(H.scaleX.loadConfig(D,"scale"),H.scaleY.active=!1),E(D,"callbackScope")){var Y=y(D,"callbackScope",null);this.emitCallbackScope=Y,this.deathCallbackScope=Y}if(E(D,"emitZone")&&this.addEmitZone(D.emitZone),E(D,"deathZone")&&this.addDeathZone(D.deathZone),E(D,"bounds")){var Z=this.addParticleBounds(D.bounds);Z.collideLeft=y(D,"collideLeft",!0),Z.collideRight=y(D,"collideRight",!0),Z.collideTop=y(D,"collideTop",!0),Z.collideBottom=y(D,"collideBottom",!0)}return E(D,"followOffset")&&this.followOffset.setFromObject(y(D,"followOffset",0)),E(D,"texture")&&this.setTexture(D.texture),E(D,"frame")?this.setEmitterFrame(D.frame):E(D,"anim")&&this.setAnim(D.anim),E(D,"reserve")&&this.reserve(D.reserve),E(D,"advance")&&this.fastForward(D.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(h.START,this),this},toJSON:function(){var D=u(this),$=0,z="";for($=0;$<K.length;$++)z=K[$],D[z]=this[z];var H=this.ops;for($=0;$<B.length;$++)z=B[$],H[z]&&(D[z]=H[z].toJSON());return H.speedY.active||(delete D.speedX,D.speed=H.speedX.toJSON()),this.scaleX===this.scaleY&&(delete D.scaleX,delete D.scaleY,D.scale=H.scaleX.toJSON()),D},resetCounters:function(D,$){var z=this.counters;z.fill(0),z[0]=D,$&&(z[5]=1)},startFollow:function(D,$,z,H){return $===void 0&&($=0),z===void 0&&(z=0),H===void 0&&(H=!1),this.follow=D,this.followOffset.set($,z),this.trackVisible=H,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var D=this.frames,$=D.length,z;return $===1?z=D[0]:this.randomFrame?z=x(D):(z=D[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===$&&(this.currentFrame=0))),this.texture.get(z)},setEmitterFrame:function(D,$,z){$===void 0&&($=!0),z===void 0&&(z=1),this.randomFrame=$,this.frameQuantity=z,this.currentFrame=0;var H=typeof D;if(this.frames.length=0,Array.isArray(D))this.frames=this.frames.concat(D);else if(H==="string"||H==="number")this.frames.push(D);else if(H==="object"){var Y=D;D=y(Y,"frames",null),D&&(this.frames=this.frames.concat(D));var Z=y(Y,"cycle",!1);this.randomFrame=!Z,this.frameQuantity=y(Y,"quantity",z)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var D=this.anims,$=D.length;if($===0)return null;if($===1)return D[0];if(this.randomAnim)return x(D);var z=D[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=V(this.currentAnim+1,0,$-1)),z},setAnim:function(D,$,z){$===void 0&&($=!0),z===void 0&&(z=1),this.randomAnim=$,this.animQuantity=z,this.currentAnim=0;var H=typeof D;if(this.anims.length=0,Array.isArray(D))this.anims=this.anims.concat(D);else if(H==="string")this.anims.push(D);else if(H==="object"){var Y=D;D=y(Y,"anims",null),D&&(this.anims=this.anims.concat(D));var Z=y(Y,"cycle",!1);this.randomAnim=!Z,this.animQuantity=y(Y,"quantity",z)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(D){return D===void 0&&(D=!0),this.radial=D,this},addParticleBounds:function(D,$,z,H,Y,Z,Q,tt){if(typeof D=="object"){var et=D;D=et.x,$=et.y,z=E(et,"w")?et.w:et.width,H=E(et,"h")?et.h:et.height}return this.addParticleProcessor(new W(D,$,z,H,Y,Z,Q,tt))},setParticleSpeed:function(D,$){return $===void 0&&($=D),this.ops.speedX.onChange(D),D===$?this.ops.speedY.active=!1:this.ops.speedY.onChange($),this.radial=!0,this},setParticleScale:function(D,$){return D===void 0&&(D=1),$===void 0&&($=D),this.ops.scaleX.onChange(D),this.ops.scaleY.onChange($),this},setParticleGravity:function(D,$){return this.gravityX=D,this.gravityY=$,this},setParticleAlpha:function(D){return this.ops.alpha.onChange(D),this},setParticleTint:function(D){return this.ops.tint.onChange(D),this},setEmitterAngle:function(D){return this.ops.angle.onChange(D),this},setParticleLifespan:function(D){return this.ops.lifespan.onChange(D),this},setQuantity:function(D){return this.quantity=D,this},setFrequency:function(D,$){return this.frequency=D,this.flowCounter=D>0?D:0,$&&(this.quantity=$),this},addDeathZone:function(D){Array.isArray(D)||(D=[D]);for(var $,z=this.deathZones,H=0;H<D.length;H++)if($=D[H],$ instanceof c)z.push($);else if(typeof $.contains=="function")$=new c($,!0),z.push($);else{var Y=y($,"type","onEnter"),Z=y($,"source",null);if(Z&&typeof Z.contains=="function"){var Q=Y==="onEnter";$=new c(Z,Q),z.push($)}}return $},removeDeathZone:function(D){return P(this.deathZones,D),this},addEmitZone:function(D){Array.isArray(D)||(D=[D]);for(var $,z=this.emitZones,H=[],Y=0;Y<D.length;Y++){if($=D[Y],$ instanceof R||$ instanceof l)z.push($);else{var Z=y($,"type","random"),Q=y($,"source",null);if(Z==="random")$=new R(Q);else if(Z==="edge"){var tt=y($,"quantity",1),et=y($,"stepRate",0),lt=y($,"yoyo",!1),ut=y($,"seamless",!0),ct=y($,"total",-1);$=new l(Q,tt,et,lt,ut,ct)}$&&z.push($)}H.push($)}return H},removeEmitZone:function(D){return P(this.emitZones,D),this.zoneIndex=0,this},getEmitZone:function(D){var $=this.emitZones,z=$.length;if(z!==0){var H=$[this.zoneIndex];H.getPoint(D),H.total>-1&&(this.zoneTotal++,this.zoneTotal===H.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===z&&(this.zoneIndex=0)))}},getDeathZone:function(D){for(var $=this.deathZones,z=0;z<$.length;z++){var H=$[z];if(H.willKill(D))return this.emit(h.DEATH_ZONE,this,D,H),!0}return!1},setEmitZone:function(D){var $;return isFinite(D)?$=D:$=this.emitZones.indexOf(D),$>=0&&(this.zoneIndex=$),this},addParticleProcessor:function(D){return this.processors.exists(D)||(D.emitter&&D.emitter.removeParticleProcessor(D),this.processors.add(D),D.emitter=this),D},removeParticleProcessor:function(D){return this.processors.exists(D)&&(this.processors.remove(D,!0),D.emitter=null),D},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(D){return this.addParticleProcessor(new T(D))},reserve:function(D){var $=this.dead;if(this.maxParticles>0){var z=this.getParticleCount();z+D>this.maxParticles&&(D=this.maxParticles-(z+D))}for(var H=0;H<D;H++)$.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(D,$){return D===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof D=="function"&&(this.emitCallback=D,$&&(this.emitCallbackScope=$)),this},onParticleDeath:function(D,$){return D===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof D=="function"&&(this.deathCallback=D,$&&(this.deathCallbackScope=$)),this},killAll:function(){for(var D=this.dead,$=this.alive;$.length>0;)D.push($.pop());return this},forEachAlive:function(D,$){for(var z=this.alive,H=z.length,Y=0;Y<H;Y++)D.call($,z[Y],this);return this},forEachDead:function(D,$){for(var z=this.dead,H=z.length,Y=0;Y<H;Y++)D.call($,z[Y],this);return this},start:function(D,$){return D===void 0&&(D=0),this.emitting||(D>0&&this.fastForward(D),this.emitting=!0,this.resetCounters(this.frequency,!0),$!==void 0&&(this.duration=Math.abs($)),this.emit(h.START,this)),this},stop:function(D){return D===void 0&&(D=!1),this.emitting&&(this.emitting=!1,D&&this.killAll(),this.emit(h.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(D,$){return D===void 0&&(D=""),$===void 0&&($=this.true),this.sortProperty=D,this.sortOrderAsc=$,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(D){return this.sortProperty!==""?D=this.depthSortCallback:D=null,this.sortCallback=D,this},depthSort:function(){return M(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(D,$){var z=this.sortProperty;return this.sortOrderAsc?D[z]-$[z]:$[z]-D[z]},flow:function(D,$,z){return $===void 0&&($=1),this.emitting=!1,this.frequency=D,this.quantity=$,z!==void 0&&(this.stopAfter=z),this.start()},explode:function(D,$,z){this.frequency=-1,this.resetCounters(-1,!0);var H=this.emitParticle(D,$,z);return this.emit(h.EXPLODE,this,H),H},emitParticleAt:function(D,$,z){return this.emitParticle(z,D,$)},emitParticle:function(D,$,z){if(!this.atLimit()){D===void 0&&(D=this.ops.quantity.onEmit());for(var H=this.dead,Y=this.stopAfter,Z=this.follow?this.follow.x+this.followOffset.x:$,Q=this.follow?this.follow.y+this.followOffset.y:z,tt=0;tt<D;tt++){var et=H.pop();if(et||(et=new this.particleClass(this)),et.fire(Z,Q)?(this.particleBringToTop?this.alive.push(et):this.alive.unshift(et),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,et,this)):this.dead.push(et),Y>0&&(this.stopCounter++,this.stopCounter>=Y)||this.atLimit())break}return et}},fastForward:function(D,$){$===void 0&&($=1e3/60);var z=0;for(this.skipping=!0;z<Math.abs(D);)this.preUpdate(0,$),z+=$;return this.skipping=!1,this},preUpdate:function(D,$){$*=this.timeScale;var z=$/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var H=this.getProcessors(),Y=this.alive,Z=this.dead,Q=0,tt=[],et=Y.length;for(Q=0;Q<et;Q++){var lt=Y[Q];lt.update($,z,H)&&tt.push({index:Q,particle:lt})}if(et=tt.length,et>0){var ut=this.deathCallback,ct=this.deathCallbackScope;for(Q=et-1;Q>=0;Q--){var ht=tt[Q];Y.splice(ht.index,1),Z.push(ht.particle),ut&&ut.call(ct,ht.particle),ht.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&Y.length===0&&(this.completeFlag=0,this.emit(h.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=$;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=$,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(D){for(var $=this.getWorldTransformMatrix(),z=this.alive,H=z.length,Y=[],Z=0;Z<H;Z++){var Q=z[Z];F(D,Q.getBounds($))&&Y.push(Q)}return Y},getBounds:function(D,$,z,H){D===void 0&&(D=0),$===void 0&&($=0),z===void 0&&(z=1e3/60),H===void 0&&(H=new N);var Y=this.getWorldTransformMatrix(),Z,Q,tt=this.alive,et=!1;if(H.setTo(0,0,0,0),$>0){var lt=0;for(this.skipping=!0;lt<Math.abs($);){for(this.preUpdate(0,z),Z=0;Z<tt.length;Z++)Q=tt[Z].getBounds(Y),et?b(H,Q):(et=!0,o(Q,H));lt+=z}this.skipping=!1}else for(Z=0;Z<tt.length;Z++)Q=tt[Z].getBounds(Y),et?b(H,Q):(et=!0,o(Q,H));return D>0&&A(H,D,D),H},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(D){this.ops.x.onChange(D)}},particleY:{get:function(){return this.ops.y.current},set:function(D){this.ops.y.onChange(D)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(D){this.ops.accelerationX.onChange(D)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(D){this.ops.accelerationY.onChange(D)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(D){this.ops.maxVelocityX.onChange(D)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(D){this.ops.maxVelocityY.onChange(D)}},speed:{get:function(){return this.ops.speedX.current},set:function(D){this.ops.speedX.onChange(D),this.ops.speedY.onChange(D)}},speedX:{get:function(){return this.ops.speedX.current},set:function(D){this.ops.speedX.onChange(D)}},speedY:{get:function(){return this.ops.speedY.current},set:function(D){this.ops.speedY.onChange(D)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(D){this.ops.moveToX.onChange(D)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(D){this.ops.moveToY.onChange(D)}},bounce:{get:function(){return this.ops.bounce.current},set:function(D){this.ops.bounce.onChange(D)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(D){this.ops.scaleX.onChange(D)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(D){this.ops.scaleY.onChange(D)}},particleColor:{get:function(){return this.ops.color.current},set:function(D){this.ops.color.onChange(D)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(D){this.ops.color.setEase(D)}},particleTint:{get:function(){return this.ops.tint.current},set:function(D){this.ops.tint.onChange(D)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(D){this.ops.alpha.onChange(D)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(D){this.ops.lifespan.onChange(D)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(D){this.ops.angle.onChange(D)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(D){this.ops.rotate.onChange(D)}},quantity:{get:function(){return this.ops.quantity.current},set:function(D){this.ops.quantity.onChange(D)}},delay:{get:function(){return this.ops.delay.current},set:function(D){this.ops.delay.onChange(D)}},hold:{get:function(){return this.ops.hold.current},set:function(D){this.ops.hold.onChange(D)}},flowCounter:{get:function(){return this.counters[0]},set:function(D){this.counters[0]=D}},frameCounter:{get:function(){return this.counters[1]},set:function(D){this.counters[1]=D}},animCounter:{get:function(){return this.counters[2]},set:function(D){this.counters[2]=D}},elapsed:{get:function(){return this.counters[3]},set:function(D){this.counters[3]=D}},stopCounter:{get:function(){return this.counters[4]},set:function(D){this.counters[4]=D}},completeFlag:{get:function(){return this.counters[5]},set:function(D){this.counters[5]=D}},zoneIndex:{get:function(){return this.counters[6]},set:function(D){this.counters[6]=D}},zoneTotal:{get:function(){return this.counters[7]},set:function(D){this.counters[7]=D}},currentFrame:{get:function(){return this.counters[8]},set:function(D){this.counters[8]=D}},currentAnim:{get:function(){return this.counters[9]},set:function(D){this.counters[9]=D}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var D,$=this.ops;for(D=0;D<B.length;D++){var z=B[D];$[z].destroy()}for(D=0;D<this.alive.length;D++)this.alive[D].destroy();for(D=0;D<this.dead.length;D++)this.dead[D].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});i.exports=G},10456:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90205),v=e(69360),u=new v,o=new v,c=new v,l=new v,f=function(m,h,p,y){var x=u,T=o,C=c,E=l;y?(E.loadIdentity(),E.multiply(y),E.translate(h.x,h.y),E.rotate(h.rotation),E.scale(h.scaleX,h.scaleY)):E.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var A=m.currentContext,w=p.roundPixels,b=p.alpha,I=h.alpha,R=h.alive,N=R.length,F=h.viewBounds;if(!(!h.visible||N===0||F&&!a(F,p.worldView))){h.sortCallback&&h.depthSort(),p.addToRenderList(h);var P=h.scrollFactorX,O=h.scrollFactorY;A.save(),A.globalCompositeOperation=m.blendModes[h.blendMode];for(var M=0;M<N;M++){var L=R[M],k=L.alpha*I*b;if(!(k<=0||L.scaleX===0||L.scaleY===0)){C.applyITRS(L.x,L.y,L.rotation,L.scaleX,L.scaleY),x.copyFrom(p.matrix),x.multiplyWithOffset(E,-p.scrollX*P,-p.scrollY*O),C.e=L.x,C.f=L.y,x.multiply(C,T);var V=L.frame,W=V.canvasData;if(W.width>0&&W.height>0){var K=-V.halfWidth,B=-V.halfHeight;A.globalAlpha=k,A.save(),T.setToContext(A),w&&(K=Math.round(K),B=Math.round(B)),A.imageSmoothingEnabled=!V.source.scaleMode,A.drawImage(V.source.image,W.x,W.y,W.width,W.height,K,B,W.width,W.height),A.restore()}}}A.restore()}};i.exports=f},765:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(99325),u=e(20494),o=e(72632),c=e(9216);v.register("particles",function(l,f){l===void 0&&(l={});var m=u(l,"key",null),h=o(l,"config",null),p=new c(this.scene,0,0,m);return f!==void 0&&(l.add=f),a(this.scene,p,l),h&&p.setConfig(h),p})},81212:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(9216);a.register("particles",function(u,o,c,l){return u!==void 0&&typeof u=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new v(this.scene,u,o,c,l))})},69116:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(10275),u=e(10456),i.exports={renderWebGL:v,renderCanvas:u}},10275:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90205),v=e(69360),u=e(75512),o=new v,c=new v,l=new v,f=new v,m=function(h,p,y,x){var T=h.pipelines.set(p.pipeline),C=o,E=c,A=l,w=f;x?(w.loadIdentity(),w.multiply(x),w.translate(p.x,p.y),w.rotate(p.rotation),w.scale(p.scaleX,p.scaleY)):w.applyITRS(p.x,p.y,p.rotation,p.scaleX,p.scaleY);var b=y.roundPixels,I=u.getTintAppendFloatAlpha,R=y.alpha,N=p.alpha,F=p.frame.glTexture;h.pipelines.preBatch(p);var P=p.alive,O=P.length,M=p.viewBounds;if(!(O===0||M&&!a(M,y.worldView))){p.sortCallback&&p.depthSort();var L=T.setGameObject(p,p.frame);y.addToRenderList(p),C.copyFrom(y.matrix),C.multiplyWithOffset(w,-y.scrollX*p.scrollFactorX,-y.scrollY*p.scrollFactorY),h.setBlendMode(p.blendMode),p.mask&&(p.mask.preRenderWebGL(h,p,y),h.pipelines.set(p.pipeline));for(var k=p.tintFill,V=0;V<O;V++){var W=P[V],K=W.alpha*N*R;if(!(K<=0||W.scaleX===0||W.scaleY===0)){A.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),A.e=W.x,A.f=W.y,C.multiply(A,E);var B=W.frame,G=-B.halfWidth,D=-B.halfHeight,$=E.setQuad(G,D,G+B.width,D+B.height,b),z=I(W.tint,K);T.shouldFlush(6)&&(T.flush(),L=T.setGameObject(p,p.frame)),T.batchQuad(p,$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],B.u0,B.v0,B.u1,B.v1,z,z,z,z,k,F,L)}}p.mask&&p.mask.postRenderWebGL(h,y),h.pipelines.postBatch(p)}};i.exports=m},30891:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c,l){o===void 0&&(o=0),c===void 0&&(c=0),l===void 0&&(l=!0),this.emitter,this.x=o,this.y=c,this.active=l},update:function(){},destroy:function(){this.emitter=null}});i.exports=v},76100:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="complete"},26677:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="deathzone"},62736:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="explode"},56490:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="start"},85715:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="stop"},40629:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={COMPLETE:e(76100),DEATH_ZONE:e(26677),EXPLODE:e(62736),START:e(56490),STOP:e(85715)}},27684:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={EmitterColorOp:e(19737),EmitterOp:e(93025),Events:e(40629),GravityWell:e(87811),Particle:e(14909),ParticleBounds:e(73106),ParticleEmitter:e(9216),ParticleProcessor:e(30891),Zones:e(25962)}},69361:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c){this.source=o,this.killOnEnter=c},willKill:function(u){var o=u.worldPosition,c=this.source.contains(o.x,o.y);return c&&this.killOnEnter||!c&&!this.killOnEnter}});i.exports=v},54213:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c,l,f,m,h){f===void 0&&(f=!1),m===void 0&&(m=!0),h===void 0&&(h=-1),this.source=o,this.points=[],this.quantity=c,this.stepRate=l,this.yoyo=f,this.counter=-1,this.seamless=m,this._length=0,this._direction=0,this.total=h,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var u=this.points[0],o=this.points[this.points.length-1];u.x===o.x&&u.y===o.y&&this.points.pop()}var c=this._length;return this._length=this.points.length,this._length<c&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(u){return this.source=u,this.updateSource()},getPoint:function(u){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var o=this.points[this.counter];o&&(u.x=o.x,u.y=o.y)}});i.exports=v},68433:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(93736),u=new a({initialize:function(c){this.source=c,this._tempVec=new v,this.total=-1},getPoint:function(o){var c=this._tempVec;this.source.getRandomPoint(c),o.x=c.x,o.y=c.y}});i.exports=u},25962:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={DeathZone:e(69361),EdgeZone:e(54213),RandomZone:e(68433)}},29598:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(13747),o=new a({Extends:u,Mixins:[v.PathFollower],initialize:function(l,f,m,h,p,y){u.call(this,l,m,h,p,y),this.path=f},preUpdate:function(c,l){this.anims.update(c,l),this.pathUpdate(c)}});i.exports=o},19626:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(29598);a.register("follower",function(u,o,c,l,f){var m=new v(this.scene,u,o,c,l,f);return this.displayList.add(m),this.updateList.add(m),m})},33412:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16569),v=e(56694),u=e(99425),o=e(15978),c=e(83321),l=e(76583),f=new v({Extends:c,initialize:function(h,p,y,x,T,C,E,A){x||(x="__DEFAULT"),c.call(this,h,p,y,x,T),this.type="Plane",this.anims=new a(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(C,E,A),this.setSizeToFrame(!1),this.setViewHeight()},setGridSize:function(m,h,p){m===void 0&&(m=8),h===void 0&&(h=8),p===void 0&&(p=!1);var y=!1;return p&&(y=!0),this.gridWidth=m,this.gridHeight=h,this.isTiled=p,this.clear(),u({mesh:this,widthSegments:m,heightSegments:h,isOrtho:!1,tile:p,flipY:y}),this},setSizeToFrame:function(m){m===void 0&&(m=!0);var h=this.frame;if(this.setPerspective(this.width/h.width,this.height/h.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!m)return this;var p=this.gridWidth,y=this.gridHeight,x=this.vertices,T=h.u0,C=h.u1,E=h.v0,A=h.v1,w,b,I=0;if(this.isTiled)for(E=h.v1,A=h.v0,b=0;b<y;b++)for(w=0;w<p;w++)x[I++].setUVs(T,A),x[I++].setUVs(T,E),x[I++].setUVs(C,A),x[I++].setUVs(T,E),x[I++].setUVs(C,E),x[I++].setUVs(C,A);else{var R=p+1,N=y+1,F=C-T,P=A-E,O=[];for(b=0;b<N;b++)for(w=0;w<R;w++){var M=T+F*(w/p),L=E+P*(b/y);O.push(M,L)}for(b=0;b<y;b++)for(w=0;w<p;w++){var k=(w+R*b)*2,V=(w+R*(b+1))*2,W=(w+1+R*(b+1))*2,K=(w+1+R*b)*2;x[I++].setUVs(O[k],O[k+1]),x[I++].setUVs(O[V],O[V+1]),x[I++].setUVs(O[K],O[K+1]),x[I++].setUVs(O[V],O[V+1]),x[I++].setUVs(O[W],O[W+1]),x[I++].setUVs(O[K],O[K+1])}}return this},setViewHeight:function(m){m===void 0&&(m=this.frame.height);var h=this.fov*(Math.PI/180);this.viewPosition.z=this.height/m/Math.tan(h/2),this.dirtyCache[10]=1},createCheckerboard:function(m,h,p,y,x){m===void 0&&(m=16777215),h===void 0&&(h=255),p===void 0&&(p=255),y===void 0&&(y=255),x===void 0&&(x=128);var T=this.scene.sys.renderer.gl,C=T.createTexture();T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,C),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.NEAREST),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.NEAREST);for(var E=o(m),A=o(h),w=[],b=0;b<16;b++)for(var I=0;I<16;I++)b<8&&I<8||b>7&&I>7?w.push(E.r,E.g,E.b,p):w.push(A.r,A.g,A.b,y);T.texImage2D(T.TEXTURE_2D,0,T.RGBA,16,16,0,T.RGBA,T.UNSIGNED_BYTE,new Uint8Array(w)),C.isAlphaPremultiplied=!0,C.isRenderTexture=!1,C.width=16,C.height=16;var R=this.scene.sys.textures.addGLTexture(l(),C,16,16);return this.removeCheckerboard(),this._checkerboard=R,T.bindTexture(T.TEXTURE_2D,null),this.setTexture(R),this.setSizeToFrame(),this.setViewHeight(x),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(m,h){return this.anims.play(m,h)},playReverse:function(m,h){return this.anims.playReverse(m,h)},playAfterDelay:function(m,h){return this.anims.playAfterDelay(m,h)},playAfterRepeat:function(m,h){return this.anims.playAfterRepeat(m,h)},stop:function(){return this.anims.stop()},stopAfterDelay:function(m){return this.anims.stopAfterDelay(m)},stopAfterRepeat:function(m){return this.anims.stopAfterRepeat(m)},stopOnFrame:function(m){return this.anims.stopOnFrame(m)},preUpdate:function(m,h){c.prototype.preUpdate.call(this,m,h),this.anims.update(m,h)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});i.exports=f},10912:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(32291),u=e(99325),o=e(20494),c=e(10850),l=e(33412);u.register("plane",function(f,m){f===void 0&&(f={});var h=o(f,"key",null),p=o(f,"frame",null),y=c(f,"width",8),x=c(f,"height",8),T=c(f,"tile",!1),C=new l(this.scene,0,0,h,p,y,x,T);m!==void 0&&(f.add=m);var E=c(f,"checkerboard",null);if(E){var A=c(E,"color1",16777215),w=c(E,"color2",255),b=c(E,"alpha1",255),I=c(E,"alpha2",255),R=c(E,"height",128);C.createCheckerboard(A,w,b,I,R)}return a(this.scene,C,f),v(C,f),C})},58322:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(33412),v=e(61286);v.register("plane",function(u,o,c,l,f,m,h){return this.displayList.add(new a(this.scene,u,o,c,l,f,m,h))})},13171:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(89980),o=e(74853),c=e(65641),l=e(71606),f=new a({Extends:u,Mixins:[v.AlphaSingle,v.BlendMode,v.Depth,v.Mask,v.Pipeline,v.PostPipeline,v.ScrollFactor,v.Transform,v.Visible,l],initialize:function(h,p,y,x,T,C,E){x===void 0&&(x=16777215),T===void 0&&(T=128),C===void 0&&(C=1),E===void 0&&(E=.1),u.call(this,h,"PointLight"),this.initPipeline(c.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(p,y),this.color=o(x),this.intensity=C,this.attenuation=E,this.width=T*2,this.height=T*2,this._radius=T},radius:{get:function(){return this._radius},set:function(m){this._radius=m,this.width=m*2,this.height=m*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});i.exports=f},162:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(99325),u=e(20494),o=e(13171);v.register("pointlight",function(c,l){c===void 0&&(c={});var f=u(c,"color",16777215),m=u(c,"radius",128),h=u(c,"intensity",1),p=u(c,"attenuation",.1),y=new o(this.scene,0,0,f,m,h,p);return l!==void 0&&(c.add=l),a(this.scene,y,c),y})},91201:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(13171);a.register("pointlight",function(u,o,c,l,f,m){return this.displayList.add(new v(this.scene,u,o,c,l,f,m))})},71606:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(80590),i.exports={renderWebGL:v,renderCanvas:u}},80590:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=function(u,o,c,l){c.addToRenderList(o);var f=u.pipelines.set(o.pipeline),m=a(o,c,l).calc,h=o.width,p=o.height,y=-o._radius,x=-o._radius,T=y+h,C=x+p,E=m.getX(0,0),A=m.getY(0,0),w=m.getX(y,x),b=m.getY(y,x),I=m.getX(y,C),R=m.getY(y,C),N=m.getX(T,C),F=m.getY(T,C),P=m.getX(T,x),O=m.getY(T,x);u.pipelines.preBatch(o),f.batchPointLight(o,c,w,b,I,R,N,F,P,O,E,A),u.pipelines.postBatch(o)};i.exports=v},15996:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(845),u=e(1539),o=new a({Extends:u,initialize:function(l,f,m,h,p){f===void 0&&(f=0),m===void 0&&(m=0),h===void 0&&(h=32),p===void 0&&(p=32);var y=new v(l.sys.textures,"",h,p);u.call(this,l,f,m,y),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(c,l){this.width=c,this.height=l,this.texture.setSize(c,l),this.updateDisplayOrigin();var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=c,f.hitArea.height=l),this},resize:function(c,l){return this.setSize(c,l),this},saveTexture:function(c){var l=this.texture;return l.key=c,l.manager.addDynamicTexture(l)&&(this._saved=!0),l},fill:function(c,l,f,m,h,p){return this.texture.fill(c,l,f,m,h,p),this},clear:function(){return this.texture.clear(),this},stamp:function(c,l,f,m,h){return this.texture.stamp(c,l,f,m,h),this},erase:function(c,l,f){return this.texture.erase(c,l,f),this},draw:function(c,l,f,m,h){return this.texture.draw(c,l,f,m,h),this},drawFrame:function(c,l,f,m,h,p){return this.texture.drawFrame(c,l,f,m,h,p),this},repeat:function(c,l,f,m,h,p,y,x,T){return this.texture.repeat(c,l,f,m,h,p,y,x,T),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(c,l,f,m,h){return this.texture.batchDraw(c,l,f,m,h),this},batchDrawFrame:function(c,l,f,m,h,p){return this.texture.batchDrawFrame(c,l,f,m,h,p),this},endDraw:function(c){return this.texture.endDraw(c),this},snapshotArea:function(c,l,f,m,h,p,y){return this.texture.snapshotArea(c,l,f,m,h,p,y),this},snapshot:function(c,l,f){return this.snapshotArea(0,0,this.width,this.height,c,l,f)},snapshotPixel:function(c,l,f){return this.snapshotArea(c,l,1,1,f,"pixel")},preDestroy:function(){this._saved||this.texture.destroy()}});i.exports=o},85692:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(99325),u=e(20494),o=e(15996);v.register("renderTexture",function(c,l){c===void 0&&(c={});var f=u(c,"x",0),m=u(c,"y",0),h=u(c,"width",32),p=u(c,"height",32),y=new o(this.scene,f,m,h,p);return l!==void 0&&(c.add=l),a(this.scene,y,c),y})},29599:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(15996);a.register("renderTexture",function(u,o,c,l){return this.displayList.add(new v(this.scene,u,o,c,l))})},79968:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16569),v=e(56694),u=e(64937),o=e(89980),c=e(65641),l=e(58912),f=e(93736),m=new v({Extends:o,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Flip,u.Mask,u.Pipeline,u.PostPipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,l],initialize:function(p,y,x,T,C,E,A,w,b){T===void 0&&(T="__DEFAULT"),E===void 0&&(E=2),A===void 0&&(A=!0),o.call(this,p,"Rope"),this.anims=new a(this),this.points=E,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=T==="__DEFAULT",this.dirty=!1,this.horizontal=A,this._flipX=!1,this._flipY=!1,this._perp=new f,this.debugCallback=null,this.debugGraphic=null,this.setTexture(T,C),this.setPosition(y,x),this.setSizeToFrame(),this.initPipeline(c.ROPE_PIPELINE),Array.isArray(E)&&this.resizeArrays(E.length),this.setPoints(E,w,b),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(h,p){var y=this.anims.currentFrame;this.anims.update(h,p),this.anims.currentFrame!==y&&(this.updateUVs(),this.updateVertices())},play:function(h,p,y){return this.anims.play(h,p,y),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(h,p,y){return h===void 0&&(h=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(h,p,y))},setVertical:function(h,p,y){return h===void 0&&(h=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(h,p,y)):this},setTintFill:function(h){return h===void 0&&(h=!1),this.tintFill=h,this},setAlphas:function(h,p){var y=this.points.length;if(y<1)return this;var x=this.alphas;h===void 0?h=[1]:!Array.isArray(h)&&p===void 0&&(h=[h]);var T,C=0;if(p!==void 0)for(T=0;T<y;T++)C=T*2,x[C]=h,x[C+1]=p;else if(h.length===y)for(T=0;T<y;T++)C=T*2,x[C]=h[T],x[C+1]=h[T];else{var E=h[0];for(T=0;T<y;T++)C=T*2,h.length>C&&(E=h[C]),x[C]=E,h.length>C+1&&(E=h[C+1]),x[C+1]=E}return this},setColors:function(h){var p=this.points.length;if(p<1)return this;var y=this.colors;h===void 0?h=[16777215]:Array.isArray(h)||(h=[h]);var x,T=0;if(h.length===p)for(x=0;x<p;x++)T=x*2,y[T]=h[x],y[T+1]=h[x];else{var C=h[0];for(x=0;x<p;x++)T=x*2,h.length>T&&(C=h[T]),y[T]=C,h.length>T+1&&(C=h[T+1]),y[T+1]=C}return this},setPoints:function(h,p,y){if(h===void 0&&(h=2),typeof h=="number"){var x=h;x<2&&(x=2),h=[];var T,C,E;if(this.horizontal)for(E=-this.frame.halfWidth,C=this.frame.width/(x-1),T=0;T<x;T++)h.push({x:E+T*C,y:0});else for(E=-this.frame.halfHeight,C=this.frame.height/(x-1),T=0;T<x;T++)h.push({x:0,y:E+T*C})}var A=h.length,w=this.points.length;return A<1?(console.warn("Rope: Not enough points given"),this):(A===1&&(h.unshift({x:0,y:0}),A++),w!==A&&this.resizeArrays(A),this.dirty=!0,this.points=h,this.updateUVs(),p!=null&&this.setColors(p),y!=null&&this.setAlphas(y),this)},updateUVs:function(){for(var h=this.uv,p=this.points.length,y=this.frame.u0,x=this.frame.v0,T=this.frame.u1,C=this.frame.v1,E=(T-y)/(p-1),A=(C-x)/(p-1),w=0;w<p;w++){var b=w*4,I,R,N,F;this.horizontal?(this._flipX?(I=T-w*E,N=T-w*E):(I=y+w*E,N=y+w*E),this._flipY?(R=C,F=x):(R=x,F=C)):(this._flipX?(I=y,N=T):(I=T,N=y),this._flipY?(R=C-w*A,F=C-w*A):(R=x+w*A,F=x+w*A)),h[b+0]=I,h[b+1]=R,h[b+2]=N,h[b+3]=F}return this},resizeArrays:function(h){var p=this.colors,y=this.alphas;this.vertices=new Float32Array(h*4),this.uv=new Float32Array(h*4),p=new Uint32Array(h*2),y=new Float32Array(h*2);for(var x=0;x<h*2;x++)p[x]=16777215,y[x]=1;return this.colors=p,this.alphas=y,this.dirty=!0,this},updateVertices:function(){var h=this._perp,p=this.points,y=this.vertices,x=p.length;if(this.dirty=!1,!(x<1)){for(var T,C=p[0],E=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,A=0;A<x;A++){var w=p[A],b=A*4;A<x-1?T=p[A+1]:T=w,h.x=T.y-C.y,h.y=-(T.x-C.x);var I=h.length();h.x/=I,h.y/=I,h.x*=E,h.y*=E,y[b]=w.x+h.x,y[b+1]=w.y+h.y,y[b+2]=w.x-h.x,y[b+3]=w.y-h.y,C=w}return this}},setDebug:function(h,p){return this.debugGraphic=h,!h&&!p?this.debugCallback=null:p?this.debugCallback=p:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(h,p,y){var x=h.debugGraphic,T=y[0],C=y[1],E=y[2],A=y[3];x.lineBetween(T,C,E,A);for(var w=4;w<p;w+=4){var b=y[w+0],I=y[w+1],R=y[w+2],N=y[w+3];x.lineBetween(T,C,b,I),x.lineBetween(E,A,R,N),x.lineBetween(E,A,b,I),x.lineBetween(b,I,R,N),T=b,C=I,E=R,A=N}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(h){return this._flipX=h,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(h){return this._flipY=h,this.updateUVs()}}});i.exports=m},44598:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){};i.exports=g},96027:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(99325),u=e(20494),o=e(10850),c=e(79968);v.register("rope",function(l,f){l===void 0&&(l={});var m=u(l,"key",null),h=u(l,"frame",null),p=u(l,"horizontal",!0),y=o(l,"points",void 0),x=o(l,"colors",void 0),T=o(l,"alphas",void 0),C=new c(this.scene,0,0,m,h,y,p,x,T);return f!==void 0&&(l.add=f),a(this.scene,C,l),C})},31982:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79968),v=e(61286);v.register("rope",function(u,o,c,l,f,m,h,p){return this.displayList.add(new a(this.scene,u,o,c,l,f,m,h,p))})},58912:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(49489),u=e(44598),i.exports={renderWebGL:v,renderCanvas:u}},49489:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=e(75512),u=function(o,c,l,f){l.addToRenderList(c);var m=o.pipelines.set(c.pipeline,c),h=a(c,l,f).calc,p=c.vertices,y=c.uv,x=c.colors,T=c.alphas,C=c.alpha,E=v.getTintAppendFloatAlpha,A=l.roundPixels,w=p.length,b=Math.floor(w*.5);m.flush(),o.pipelines.preBatch(c);var I=m.setGameObject(c),R=m.vertexViewF32,N=m.vertexViewU32,F=m.vertexCount*m.currentShader.vertexComponentCount-1,P=0,O=c.tintFill;c.dirty&&c.updateVertices();for(var M=c.debugCallback,L=[],k=0;k<w;k+=2){var V=p[k+0],W=p[k+1],K=V*h.a+W*h.c+h.e,B=V*h.b+W*h.d+h.f;A&&(K=Math.round(K),B=Math.round(B)),R[++F]=K,R[++F]=B,R[++F]=y[k+0],R[++F]=y[k+1],R[++F]=I,R[++F]=O,N[++F]=E(x[P],l.alpha*(T[P]*C)),P++,M&&(L[k+0]=K,L[k+1]=B)}M&&M.call(c,c,w,L),m.vertexCount+=b,m.currentBatch.count=m.vertexCount-m.currentBatch.start,o.pipelines.postBatch(c)};i.exports=u},27902:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(89980),o=e(72632),c=e(98611),l=e(22440),f=e(24252),m=e(69360),h=new a({Extends:u,Mixins:[v.ComputedSize,v.Depth,v.GetBounds,v.Mask,v.Origin,v.ScrollFactor,v.Transform,v.Visible,f],initialize:function(y,x,T,C,E,A,w,b){T===void 0&&(T=0),C===void 0&&(C=0),E===void 0&&(E=128),A===void 0&&(A=128),u.call(this,y,"Shader"),this.blendMode=-1,this.shader;var I=y.sys.renderer;this.renderer=I,this.gl=I.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=I.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new m,this._tempMatrix2=new m,this._tempMatrix3=new m,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=I.width,this._rendererHeight=I.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(T,C),this.setSize(E,A),this.setOrigin(.5,.5),this.setShader(x,w,b)},willRender:function(p){return this.renderToTexture?!0:!(u.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&p.id)},setRenderToTexture:function(p,y){if(y===void 0&&(y=!1),!this.renderToTexture){var x=this.width,T=this.height,C=this.renderer;this.glTexture=C.createTextureFromSource(null,x,T,0),this.glTexture.flipY=y,this.framebuffer=C.createFramebuffer(x,T,this.glTexture,!1),this._rendererWidth=x,this._rendererHeight=T,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),p&&(this.texture=this.scene.sys.textures.addGLTexture(p,this.glTexture,x,T))}return this.shader&&(C.pipelines.clear(),this.load(),this.flush(),C.pipelines.rebind()),this},setShader:function(p,y,x){if(y===void 0&&(y=[]),typeof p=="string"){var T=this.scene.sys.cache.shader;if(!T.has(p))return console.warn("Shader missing: "+p),this;this.shader=T.get(p)}else this.shader=p;var C=this.gl,E=this.renderer;this.program&&C.deleteProgram(this.program);var A=E.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);C.uniformMatrix4fv(C.getUniformLocation(A,"uViewMatrix"),!1,this.viewMatrix),C.uniformMatrix4fv(C.getUniformLocation(A,"uProjectionMatrix"),!1,this.projectionMatrix),C.uniform2f(C.getUniformLocation(A,"uResolution"),this.width,this.height),this.program=A;var w=new Date,b={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[w.getFullYear(),w.getMonth(),w.getDate(),w.getHours()*60*60+w.getMinutes()*60+w.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=c(!0,{},this.shader.uniforms,b):this.uniforms=b;for(var I=0;I<4;I++)y[I]&&this.setSampler2D("iChannel"+I,y[I],I,x);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(p){return this.pointer=p,this},projOrtho:function(p,y,x,T){var C=-1e3,E=1e3,A=1/(p-y),w=1/(x-T),b=1/(C-E),I=this.projectionMatrix;I[0]=-2*A,I[5]=-2*w,I[10]=2*b,I[12]=(p+y)*A,I[13]=(T+x)*w,I[14]=(E+C)*b;var R=this.program,N=this.gl,F=this.renderer;F.setProgram(R),N.uniformMatrix4fv(N.getUniformLocation(R,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=y,this._rendererHeight=x},initUniforms:function(){var p=this.gl,y=this.renderer.glFuncMap,x=this.program;this._textureCount=0;for(var T in this.uniforms){var C=this.uniforms[T],E=C.type,A=y[E];C.uniformLocation=p.getUniformLocation(x,T),E!=="sampler2D"&&(C.glMatrix=A.matrix,C.glValueLength=A.length,C.glFunc=A.func)}},setSampler2DBuffer:function(p,y,x,T,C,E){C===void 0&&(C=0),E===void 0&&(E={});var A=this.uniforms[p];return A.value=y,E.width=x,E.height=T,A.textureData=E,this._textureCount=C,this.initSampler2D(A),this},setSampler2D:function(p,y,x,T){x===void 0&&(x=0);var C=this.scene.sys.textures;if(C.exists(y)){var E=C.getFrame(y);if(E.glTexture&&E.glTexture.isRenderTexture)return this.setSampler2DBuffer(p,E.glTexture,E.width,E.height,x,T);var A=this.uniforms[p],w=E.source;A.textureKey=y,A.source=w.image,A.value=E.glTexture,w.isGLTexture&&(T||(T={}),T.width=w.width,T.height=w.height),T&&(A.textureData=T),this._textureCount=x,this.initSampler2D(A)}return this},setUniform:function(p,y){return l(this.uniforms,p,y),this},getUniform:function(p){return o(this.uniforms,p,null)},setChannel0:function(p,y){return this.setSampler2D("iChannel0",p,0,y)},setChannel1:function(p,y){return this.setSampler2D("iChannel1",p,1,y)},setChannel2:function(p,y){return this.setSampler2D("iChannel2",p,2,y)},setChannel3:function(p,y){return this.setSampler2D("iChannel3",p,3,y)},initSampler2D:function(p){if(p.value){var y=this.gl;y.activeTexture(y.TEXTURE0+this._textureCount),y.bindTexture(y.TEXTURE_2D,p.value);var x=p.textureData;if(x&&!p.value.isRenderTexture){var T=y[o(x,"magFilter","linear").toUpperCase()],C=y[o(x,"minFilter","linear").toUpperCase()],E=y[o(x,"wrapS","repeat").toUpperCase()],A=y[o(x,"wrapT","repeat").toUpperCase()],w=y[o(x,"format","rgba").toUpperCase()];if(x.repeat&&(E=y.REPEAT,A=y.REPEAT),y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,!!x.flipY),x.width){var b=o(x,"width",512),I=o(x,"height",2),R=o(x,"border",0);y.texImage2D(y.TEXTURE_2D,0,w,b,I,R,w,y.UNSIGNED_BYTE,null)}else y.texImage2D(y.TEXTURE_2D,0,w,y.RGBA,y.UNSIGNED_BYTE,p.source);y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,T),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,C),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,E),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,A)}this.renderer.setProgram(this.program),y.uniform1i(p.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var p=this.gl,y=this.uniforms,x,T,C,E,A,w=0;for(var b in y)x=y[b],C=x.glFunc,T=x.glValueLength,E=x.uniformLocation,A=x.value,A!==null&&(T===1?x.glMatrix?C.call(p,E,x.transpose,A):C.call(p,E,A):T===2?C.call(p,E,A.x,A.y):T===3?C.call(p,E,A.x,A.y,A.z):T===4?C.call(p,E,A.x,A.y,A.z,A.w):x.type==="sampler2D"&&(p.activeTexture(p.TEXTURE0+w),p.bindTexture(p.TEXTURE_2D,A),p.uniform1i(E,w),w++))},load:function(p){var y=this.gl,x=this.width,T=this.height,C=this.renderer,E=this.program,A=this.viewMatrix;if(!this.renderToTexture){var w=-this._displayOriginX,b=-this._displayOriginY;A[0]=p[0],A[1]=p[1],A[4]=p[2],A[5]=p[3],A[8]=p[4],A[9]=p[5],A[12]=A[0]*w+A[4]*b,A[13]=A[1]*w+A[5]*b}y.useProgram(E),y.uniformMatrix4fv(y.getUniformLocation(E,"uViewMatrix"),!1,A),y.uniform2f(y.getUniformLocation(E,"uResolution"),this.width,this.height);var I=this.uniforms,R=I.resolution;R.value.x=x,R.value.y=T,I.time.value=C.game.loop.getDuration();var N=this.pointer;if(N){var F=I.mouse,P=N.x/x,O=1-N.y/T;F.value.x=P.toFixed(2),F.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var p=this.width,y=this.height,x=this.program,T=this.gl,C=this.vertexBuffer,E=this.renderer,A=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(E.setFramebuffer(this.framebuffer),T.clearColor(0,0,0,0),T.clear(T.COLOR_BUFFER_BIT)),T.bindBuffer(T.ARRAY_BUFFER,C);var w=T.getAttribLocation(x,"inPosition");w!==-1&&(T.enableVertexAttribArray(w),T.vertexAttribPointer(w,2,T.FLOAT,!1,A,0));var b=this.vertexViewF32;b[3]=y,b[4]=p,b[5]=y,b[8]=p,b[9]=y,b[10]=p;var I=6;T.bufferSubData(T.ARRAY_BUFFER,0,this.bytes.subarray(0,I*A)),T.drawArrays(T.TRIANGLES,0,I),this.renderToTexture&&E.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var p=this.gl;p.deleteProgram(this.program),p.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});i.exports=h},10612:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){};i.exports=g},13908:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(99325),u=e(20494),o=e(27902);v.register("shader",function(c,l){c===void 0&&(c={});var f=u(c,"key",null),m=u(c,"x",0),h=u(c,"y",0),p=u(c,"width",128),y=u(c,"height",128),x=new o(this.scene,f,m,h,p,y);return l!==void 0&&(c.add=l),a(this.scene,x,c),x})},51979:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27902),v=e(61286);v.register("shader",function(u,o,c,l,f,m,h){return this.displayList.add(new a(this.scene,u,o,c,l,f,m,h))})},24252:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(19782),u=e(10612),i.exports={renderWebGL:v,renderCanvas:u}},19782:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=function(u,o,c,l){if(o.shader){if(c.addToRenderList(o),u.pipelines.clear(),o.renderToTexture)o.load(),o.flush();else{var f=a(o,c,l).calc;(u.width!==o._rendererWidth||u.height!==o._rendererHeight)&&o.projOrtho(0,u.width,u.height,0),o.load(f.matrix),o.flush()}u.pipelines.rebind()}};i.exports=v},19543:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75512),v=function(u,o,c,l,f,m){for(var h=a.getTintAppendFloatAlpha(c.fillColor,c.fillAlpha*l),p=c.pathData,y=c.pathIndexes,x=0;x<y.length;x+=3){var T=y[x]*2,C=y[x+1]*2,E=y[x+2]*2,A=p[T+0]-f,w=p[T+1]-m,b=p[C+0]-f,I=p[C+1]-m,R=p[E+0]-f,N=p[E+1]-m,F=o.getX(A,w),P=o.getY(A,w),O=o.getX(b,I),M=o.getY(b,I),L=o.getX(R,N),k=o.getY(R,N);u.batchTri(c,F,P,O,M,L,k,0,0,1,1,h,h,h,2)}};i.exports=v},15608:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=v||a.fillColor,c=u||a.fillAlpha,l=(o&16711680)>>>16,f=(o&65280)>>>8,m=o&255;e.fillStyle="rgba("+l+","+f+","+m+","+c+")"};i.exports=g},17876:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=v||a.strokeColor,c=u||a.strokeAlpha,l=(o&16711680)>>>16,f=(o&65280)>>>8,m=o&255;e.strokeStyle="rgba("+l+","+f+","+m+","+c+")",e.lineWidth=a.lineWidth};i.exports=g},91461:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(89980),o=e(88829),c=new a({Extends:u,Mixins:[v.AlphaSingle,v.BlendMode,v.Depth,v.GetBounds,v.Mask,v.Origin,v.Pipeline,v.PostPipeline,v.ScrollFactor,v.Transform,v.Visible],initialize:function(f,m,h){m===void 0&&(m="Shape"),u.call(this,f,m),this.geom=h,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(l,f){return f===void 0&&(f=1),l===void 0?this.isFilled=!1:(this.fillColor=l,this.fillAlpha=f,this.isFilled=!0),this},setStrokeStyle:function(l,f,m){return m===void 0&&(m=1),l===void 0?this.isStroked=!1:(this.lineWidth=l,this.strokeColor=f,this.strokeAlpha=m,this.isStroked=!0),this},setClosePath:function(l){return this.closePath=l,this},setSize:function(l,f){return this.width=l,this.height=f,this},setDisplaySize:function(l,f){return this.displayWidth=l,this.displayHeight=f,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}}});i.exports=c},50262:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75512),v=function(u,o,c,l,f){var m=u.strokeTint,h=a.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*c);m.TL=h,m.TR=h,m.BL=h,m.BR=h;var p=o.pathData,y=p.length-1,x=o.lineWidth,T=x/2,C=p[0]-l,E=p[1]-f;o.closePath||(y-=2);for(var A=2;A<y;A+=2){var w=p[A]-l,b=p[A+1]-f;u.batchLine(C,E,w,b,T,T,x,A-2,o.closePath?A===y-1:!1),C=w,E=b}};i.exports=v},28593:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2213),v=e(56694),u=e(75606),o=e(11117),c=e(26673),l=e(83392),f=e(91461),m=new v({Extends:f,Mixins:[a],initialize:function(p,y,x,T,C,E,A,w,b){y===void 0&&(y=0),x===void 0&&(x=0),T===void 0&&(T=128),C===void 0&&(C=0),E===void 0&&(E=360),A===void 0&&(A=!1),f.call(this,p,"Arc",new c(0,0,T)),this._startAngle=C,this._endAngle=E,this._anticlockwise=A,this._iterations=.01,this.setPosition(y,x);var I=this.geom.radius*2;this.setSize(I,I),w!==void 0&&this.setFillStyle(w,b),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(h){this._iterations=h,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(h){this.geom.radius=h;var p=h*2;this.setSize(p,p),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(h){this._startAngle=h,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(h){this._endAngle=h,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(h){this._anticlockwise=h,this.updateData()}},setRadius:function(h){return this.radius=h,this},setIterations:function(h){return h===void 0&&(h=.01),this.iterations=h,this},setStartAngle:function(h,p){return this._startAngle=h,p!==void 0&&(this._anticlockwise=p),this.updateData()},setEndAngle:function(h,p){return this._endAngle=h,p!==void 0&&(this._anticlockwise=p),this.updateData()},updateData:function(){var h=this._iterations,p=h,y=this.geom.radius,x=u(this._startAngle),T=u(this._endAngle),C=this._anticlockwise,E=y,A=y;T-=x,C?T<-l.PI2?T=-l.PI2:T>0&&(T=-l.PI2+T%l.PI2):T>l.PI2?T=l.PI2:T<0&&(T=l.PI2+T%l.PI2);for(var w=[E+Math.cos(x)*y,A+Math.sin(x)*y],b;p<1;)b=T*p+x,w.push(E+Math.cos(b)*y,A+Math.sin(b)*y),p+=h;return b=T+x,w.push(E+Math.cos(b)*y,A+Math.sin(b)*y),w.push(E+Math.cos(x)*y,A+Math.sin(x)*y),this.pathIndexes=o(w),this.pathData=w,this}});i.exports=m},23560:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75606),v=e(15608),u=e(17876),o=e(49584),c=function(l,f,m,h){m.addToRenderList(f);var p=l.currentContext;if(o(l,p,f,m,h)){var y=f.radius;p.beginPath(),p.arc(y-f.originX*(y*2),y-f.originY*(y*2),y,a(f._startAngle),a(f._endAngle),f.anticlockwise),f.closePath&&p.closePath(),f.isFilled&&(v(p,f),p.fill()),f.isStroked&&(u(p,f),p.stroke()),p.restore()}};i.exports=c},10369:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28593),v=e(61286);v.register("arc",function(u,o,c,l,f,m,h,p){return this.displayList.add(new a(this.scene,u,o,c,l,f,m,h,p))}),v.register("circle",function(u,o,c,l,f){return this.displayList.add(new a(this.scene,u,o,c,0,360,!1,l,f))})},2213:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(58356),u=e(23560),i.exports={renderWebGL:v,renderCanvas:u}},58356:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=e(19543),u=e(50262),o=function(c,l,f,m){f.addToRenderList(l);var h=c.pipelines.set(l.pipeline),p=a(l,f,m),y=h.calcMatrix.copyFrom(p.calc),x=l._displayOriginX,T=l._displayOriginY,C=f.alpha*l.alpha;c.pipelines.preBatch(l),l.isFilled&&v(h,y,l,C,x,T),l.isStroked&&u(h,l,C,x,T),c.pipelines.postBatch(l)};i.exports=o},15220:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(87203),u=e(11117),o=e(74118),c=e(91461),l=new a({Extends:c,Mixins:[v],initialize:function(m,h,p,y,x,T){h===void 0&&(h=0),p===void 0&&(p=0),c.call(this,m,"Curve",y),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(h,p),x!==void 0&&this.setFillStyle(x,T),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(f){this._smoothness=f,this.updateData()}},setSmoothness:function(f){return this._smoothness=f,this.updateData()},updateData:function(){var f=this._curveBounds,m=this._smoothness;this.geom.getBounds(f,m),this.setSize(f.width,f.height),this.updateDisplayOrigin();for(var h=[],p=this.geom.getPoints(m),y=0;y<p.length;y++)h.push(p[y].x,p[y].y);return h.push(p[0].x,p[0].y),this.pathIndexes=u(h),this.pathData=h,this}});i.exports=l},4024:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15608),v=e(17876),u=e(49584),o=function(c,l,f,m){f.addToRenderList(l);var h=c.currentContext;if(u(c,h,l,f,m)){var p=l._displayOriginX+l._curveBounds.x,y=l._displayOriginY+l._curveBounds.y,x=l.pathData,T=x.length-1,C=x[0]-p,E=x[1]-y;h.beginPath(),h.moveTo(C,E),l.closePath||(T-=2);for(var A=2;A<T;A+=2){var w=x[A]-p,b=x[A+1]-y;h.lineTo(w,b)}l.closePath&&h.closePath(),l.isFilled&&(a(h,l),h.fill()),l.isStroked&&(v(h,l),h.stroke()),h.restore()}};i.exports=o},10147:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(15220);a.register("curve",function(u,o,c,l,f){return this.displayList.add(new v(this.scene,u,o,c,l,f))})},87203:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(82958),u=e(4024),i.exports={renderWebGL:v,renderCanvas:u}},82958:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19543),v=e(73329),u=e(50262),o=function(c,l,f,m){f.addToRenderList(l);var h=c.pipelines.set(l.pipeline),p=v(l,f,m),y=h.calcMatrix.copyFrom(p.calc),x=l._displayOriginX+l._curveBounds.x,T=l._displayOriginY+l._curveBounds.y,C=f.alpha*l.alpha;c.pipelines.preBatch(l),l.isFilled&&a(h,y,l,C,x,T),l.isStroked&&u(h,l,C,x,T),c.pipelines.postBatch(l)};i.exports=o},28591:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(11117),u=e(84171),o=e(95669),c=e(91461),l=new a({Extends:c,Mixins:[u],initialize:function(m,h,p,y,x,T,C){h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=128),x===void 0&&(x=128),c.call(this,m,"Ellipse",new o(y/2,x/2,y,x)),this._smoothness=64,this.setPosition(h,p),this.width=y,this.height=x,T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(f){this._smoothness=f,this.updateData()}},setSize:function(f,m){return this.width=f,this.height=m,this.geom.setPosition(f/2,m/2),this.geom.setSize(f,m),this.updateData()},setSmoothness:function(f){return this._smoothness=f,this.updateData()},updateData:function(){for(var f=[],m=this.geom.getPoints(this._smoothness),h=0;h<m.length;h++)f.push(m[h].x,m[h].y);return f.push(m[0].x,m[0].y),this.pathIndexes=v(f),this.pathData=f,this}});i.exports=l},55881:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15608),v=e(17876),u=e(49584),o=function(c,l,f,m){f.addToRenderList(l);var h=c.currentContext;if(u(c,h,l,f,m)){var p=l._displayOriginX,y=l._displayOriginY,x=l.pathData,T=x.length-1,C=x[0]-p,E=x[1]-y;h.beginPath(),h.moveTo(C,E),l.closePath||(T-=2);for(var A=2;A<T;A+=2){var w=x[A]-p,b=x[A+1]-y;h.lineTo(w,b)}h.closePath(),l.isFilled&&(a(h,l),h.fill()),l.isStroked&&(v(h,l),h.stroke()),h.restore()}};i.exports=o},99869:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28591),v=e(61286);v.register("ellipse",function(u,o,c,l,f,m){return this.displayList.add(new a(this.scene,u,o,c,l,f,m))})},84171:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(17554),u=e(55881),i.exports={renderWebGL:v,renderCanvas:u}},17554:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19543),v=e(73329),u=e(50262),o=function(c,l,f,m){f.addToRenderList(l);var h=c.pipelines.set(l.pipeline),p=v(l,f,m),y=h.calcMatrix.copyFrom(p.calc),x=l._displayOriginX,T=l._displayOriginY,C=f.alpha*l.alpha;c.pipelines.preBatch(l),l.isFilled&&a(h,y,l,C,x,T),l.isStroked&&u(h,l,C,x,T),c.pipelines.postBatch(l)};i.exports=o},39169:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(91461),u=e(88059),o=new a({Extends:v,Mixins:[u],initialize:function(l,f,m,h,p,y,x,T,C,E,A){f===void 0&&(f=0),m===void 0&&(m=0),h===void 0&&(h=128),p===void 0&&(p=128),y===void 0&&(y=32),x===void 0&&(x=32),v.call(this,l,"Grid",null),this.cellWidth=y,this.cellHeight=x,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(f,m),this.setSize(h,p),this.setFillStyle(T,C),E!==void 0&&this.setOutlineStyle(E,A),this.updateDisplayOrigin()},setFillStyle:function(c,l){return l===void 0&&(l=1),c===void 0?this.showCells=!1:(this.fillColor=c,this.fillAlpha=l,this.showCells=!0),this},setAltFillStyle:function(c,l){return l===void 0&&(l=1),c===void 0?this.showAltCells=!1:(this.altFillColor=c,this.altFillAlpha=l,this.showAltCells=!0),this},setOutlineStyle:function(c,l){return l===void 0&&(l=1),c===void 0?this.showOutline=!1:(this.outlineFillColor=c,this.outlineFillAlpha=l,this.showOutline=!0),this}});i.exports=o},95525:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15608),v=e(17876),u=e(49584),o=function(c,l,f,m){f.addToRenderList(l);var h=c.currentContext;if(u(c,h,l,f,m)){var p=-l._displayOriginX,y=-l._displayOriginY,x=f.alpha*l.alpha,T=l.width,C=l.height,E=l.cellWidth,A=l.cellHeight,w=Math.ceil(T/E),b=Math.ceil(C/A),I=E,R=A,N=E-(w*E-T),F=A-(b*A-C),P=l.showCells,O=l.showAltCells,M=l.showOutline,L=0,k=0,V=0,W=0,K=0;if(M&&(I--,R--,N===E&&N--,F===A&&F--),P&&l.fillAlpha>0)for(a(h,l),k=0;k<b;k++)for(O&&(V=k%2),L=0;L<w;L++){if(O&&V){V=0;continue}V++,W=L<w-1?I:N,K=k<b-1?R:F,h.fillRect(p+L*E,y+k*A,W,K)}if(O&&l.altFillAlpha>0)for(a(h,l,l.altFillColor,l.altFillAlpha*x),k=0;k<b;k++)for(O&&(V=k%2),L=0;L<w;L++){if(O&&!V){V=1;continue}V=0,W=L<w-1?I:N,K=k<b-1?R:F,h.fillRect(p+L*E,y+k*A,W,K)}if(M&&l.outlineFillAlpha>0){for(v(h,l,l.outlineFillColor,l.outlineFillAlpha*x),L=1;L<w;L++){var B=L*E;h.beginPath(),h.moveTo(B+p,y),h.lineTo(B+p,C+y),h.stroke()}for(k=1;k<b;k++){var G=k*A;h.beginPath(),h.moveTo(p,G+y),h.lineTo(p+T,G+y),h.stroke()}}h.restore()}};i.exports=o},9326:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(39169);a.register("grid",function(u,o,c,l,f,m,h,p,y,x){return this.displayList.add(new v(this.scene,u,o,c,l,f,m,h,p,y,x))})},88059:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(50639),u=e(95525),i.exports={renderWebGL:v,renderCanvas:u}},50639:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=e(75512),u=function(o,c,l,f){l.addToRenderList(c);var m=o.pipelines.set(c.pipeline),h=a(c,l,f),p=m.calcMatrix.copyFrom(h.calc);p.translate(-c._displayOriginX,-c._displayOriginY);var y=l.alpha*c.alpha,x=c.width,T=c.height,C=c.cellWidth,E=c.cellHeight,A=Math.ceil(x/C),w=Math.ceil(T/E),b=C,I=E,R=C-(A*C-x),N=E-(w*E-T),F,P,O=c.showCells,M=c.showAltCells,L=c.showOutline,k=0,V=0,W=0,K=0,B=0;if(L&&(b--,I--,R===C&&R--,N===E&&N--),o.pipelines.preBatch(c),O&&c.fillAlpha>0)for(F=m.fillTint,P=v.getTintAppendFloatAlpha(c.fillColor,c.fillAlpha*y),F.TL=P,F.TR=P,F.BL=P,F.BR=P,V=0;V<w;V++)for(M&&(W=V%2),k=0;k<A;k++){if(M&&W){W=0;continue}W++,K=k<A-1?b:R,B=V<w-1?I:N,m.batchFillRect(k*C,V*E,K,B)}if(M&&c.altFillAlpha>0)for(F=m.fillTint,P=v.getTintAppendFloatAlpha(c.altFillColor,c.altFillAlpha*y),F.TL=P,F.TR=P,F.BL=P,F.BR=P,V=0;V<w;V++)for(M&&(W=V%2),k=0;k<A;k++){if(M&&!W){W=1;continue}W=0,K=k<A-1?b:R,B=V<w-1?I:N,m.batchFillRect(k*C,V*E,K,B)}if(L&&c.outlineFillAlpha>0){var G=m.strokeTint,D=v.getTintAppendFloatAlpha(c.outlineFillColor,c.outlineFillAlpha*y);for(G.TL=D,G.TR=D,G.BL=D,G.BR=D,k=1;k<A;k++){var $=k*C;m.batchLine($,0,$,T,1,1,1,0,!1)}for(V=1;V<w;V++){var z=V*E;m.batchLine(0,z,x,z,1,1,1,0,!1)}}o.pipelines.postBatch(c)};i.exports=u},4415:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72296),v=e(56694),u=e(91461),o=new v({Extends:u,Mixins:[a],initialize:function(l,f,m,h,p,y,x,T){f===void 0&&(f=0),m===void 0&&(m=0),h===void 0&&(h=48),p===void 0&&(p=32),y===void 0&&(y=15658734),x===void 0&&(x=10066329),T===void 0&&(T=13421772),u.call(this,l,"IsoBox",null),this.projection=4,this.fillTop=y,this.fillLeft=x,this.fillRight=T,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(f,m),this.setSize(h,p),this.updateDisplayOrigin()},setProjection:function(c){return this.projection=c,this},setFaces:function(c,l,f){return c===void 0&&(c=!0),l===void 0&&(l=!0),f===void 0&&(f=!0),this.showTop=c,this.showLeft=l,this.showRight=f,this},setFillStyle:function(c,l,f){return this.fillTop=c,this.fillLeft=l,this.fillRight=f,this.isFilled=!0,this}});i.exports=o},32884:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15608),v=e(49584),u=function(o,c,l,f){l.addToRenderList(c);var m=o.currentContext;if(v(o,m,c,l,f)&&c.isFilled){var h=c.width,p=c.height,y=h/2,x=h/c.projection;c.showTop&&(a(m,c,c.fillTop),m.beginPath(),m.moveTo(-y,-p),m.lineTo(0,-x-p),m.lineTo(y,-p),m.lineTo(y,-1),m.lineTo(0,x-1),m.lineTo(-y,-1),m.lineTo(-y,-p),m.fill()),c.showLeft&&(a(m,c,c.fillLeft),m.beginPath(),m.moveTo(-y,0),m.lineTo(0,x),m.lineTo(0,x-p),m.lineTo(-y,-p),m.lineTo(-y,0),m.fill()),c.showRight&&(a(m,c,c.fillRight),m.beginPath(),m.moveTo(y,0),m.lineTo(0,x),m.lineTo(0,x-p),m.lineTo(y,-p),m.lineTo(y,0),m.fill()),m.restore()}};i.exports=u},88154:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(4415);a.register("isobox",function(u,o,c,l,f,m,h){return this.displayList.add(new v(this.scene,u,o,c,l,f,m,h))})},72296:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(33101),u=e(32884),i.exports={renderWebGL:v,renderCanvas:u}},33101:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=e(75512),u=function(o,c,l,f){l.addToRenderList(c);var m=o.pipelines.set(c.pipeline),h=a(c,l,f),p=m.calcMatrix.copyFrom(h.calc),y=c.width,x=c.height,T=y/2,C=y/c.projection,E=l.alpha*c.alpha;if(c.isFilled){var A,w,b,I,R,N,F,P,O;o.pipelines.preBatch(c),c.showTop&&(A=v.getTintAppendFloatAlpha(c.fillTop,E),w=p.getX(-T,-x),b=p.getY(-T,-x),I=p.getX(0,-C-x),R=p.getY(0,-C-x),N=p.getX(T,-x),F=p.getY(T,-x),P=p.getX(0,C-x),O=p.getY(0,C-x),m.batchQuad(c,w,b,I,R,N,F,P,O,0,0,1,1,A,A,A,A,2)),c.showLeft&&(A=v.getTintAppendFloatAlpha(c.fillLeft,E),w=p.getX(-T,0),b=p.getY(-T,0),I=p.getX(0,C),R=p.getY(0,C),N=p.getX(0,C-x),F=p.getY(0,C-x),P=p.getX(-T,-x),O=p.getY(-T,-x),m.batchQuad(c,w,b,I,R,N,F,P,O,0,0,1,1,A,A,A,A,2)),c.showRight&&(A=v.getTintAppendFloatAlpha(c.fillRight,E),w=p.getX(T,0),b=p.getY(T,0),I=p.getX(0,C),R=p.getY(0,C),N=p.getX(0,C-x),F=p.getY(0,C-x),P=p.getX(T,-x),O=p.getY(T,-x),m.batchQuad(c,w,b,I,R,N,F,P,O,0,0,1,1,A,A,A,A,2)),o.pipelines.postBatch(c)}};i.exports=u},65159:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(93387),u=e(91461),o=new a({Extends:u,Mixins:[v],initialize:function(l,f,m,h,p,y,x,T,C){f===void 0&&(f=0),m===void 0&&(m=0),h===void 0&&(h=48),p===void 0&&(p=32),y===void 0&&(y=!1),x===void 0&&(x=15658734),T===void 0&&(T=10066329),C===void 0&&(C=13421772),u.call(this,l,"IsoTriangle",null),this.projection=4,this.fillTop=x,this.fillLeft=T,this.fillRight=C,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=y,this.isFilled=!0,this.setPosition(f,m),this.setSize(h,p),this.updateDisplayOrigin()},setProjection:function(c){return this.projection=c,this},setReversed:function(c){return this.isReversed=c,this},setFaces:function(c,l,f){return c===void 0&&(c=!0),l===void 0&&(l=!0),f===void 0&&(f=!0),this.showTop=c,this.showLeft=l,this.showRight=f,this},setFillStyle:function(c,l,f){return this.fillTop=c,this.fillLeft=l,this.fillRight=f,this.isFilled=!0,this}});i.exports=o},9923:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15608),v=e(49584),u=function(o,c,l,f){l.addToRenderList(c);var m=o.currentContext;if(v(o,m,c,l,f)&&c.isFilled){var h=c.width,p=c.height,y=h/2,x=h/c.projection,T=c.isReversed;c.showTop&&T&&(a(m,c,c.fillTop),m.beginPath(),m.moveTo(-y,-p),m.lineTo(0,-x-p),m.lineTo(y,-p),m.lineTo(0,x-p),m.fill()),c.showLeft&&(a(m,c,c.fillLeft),m.beginPath(),T?(m.moveTo(-y,-p),m.lineTo(0,x),m.lineTo(0,x-p)):(m.moveTo(-y,0),m.lineTo(0,x),m.lineTo(0,x-p)),m.fill()),c.showRight&&(a(m,c,c.fillRight),m.beginPath(),T?(m.moveTo(y,-p),m.lineTo(0,x),m.lineTo(0,x-p)):(m.moveTo(y,0),m.lineTo(0,x),m.lineTo(0,x-p)),m.fill()),m.restore()}};i.exports=u},67765:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(65159);a.register("isotriangle",function(u,o,c,l,f,m,h,p){return this.displayList.add(new v(this.scene,u,o,c,l,f,m,h,p))})},93387:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(54946),u=e(9923),i.exports={renderWebGL:v,renderCanvas:u}},54946:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=e(75512),u=function(o,c,l,f){l.addToRenderList(c);var m=o.pipelines.set(c.pipeline),h=a(c,l,f),p=m.calcMatrix.copyFrom(h.calc),y=c.width,x=c.height,T=y/2,C=y/c.projection,E=c.isReversed,A=l.alpha*c.alpha;if(c.isFilled){o.pipelines.preBatch(c);var w,b,I,R,N,F,P;if(c.showTop&&E){w=v.getTintAppendFloatAlpha(c.fillTop,A),b=p.getX(-T,-x),I=p.getY(-T,-x),R=p.getX(0,-C-x),N=p.getY(0,-C-x),F=p.getX(T,-x),P=p.getY(T,-x);var O=p.getX(0,C-x),M=p.getY(0,C-x);m.batchQuad(c,b,I,R,N,F,P,O,M,0,0,1,1,w,w,w,w,2)}c.showLeft&&(w=v.getTintAppendFloatAlpha(c.fillLeft,A),E?(b=p.getX(-T,-x),I=p.getY(-T,-x),R=p.getX(0,C),N=p.getY(0,C),F=p.getX(0,C-x),P=p.getY(0,C-x)):(b=p.getX(-T,0),I=p.getY(-T,0),R=p.getX(0,C),N=p.getY(0,C),F=p.getX(0,C-x),P=p.getY(0,C-x)),m.batchTri(c,b,I,R,N,F,P,0,0,1,1,w,w,w,2)),c.showRight&&(w=v.getTintAppendFloatAlpha(c.fillRight,A),E?(b=p.getX(T,-x),I=p.getY(T,-x),R=p.getX(0,C),N=p.getY(0,C),F=p.getX(0,C-x),P=p.getY(0,C-x)):(b=p.getX(T,0),I=p.getY(T,0),R=p.getX(0,C),N=p.getY(0,C),F=p.getX(0,C-x),P=p.getY(0,C-x)),m.batchTri(c,b,I,R,N,F,P,0,0,1,1,w,w,w,2)),o.pipelines.postBatch(c)}};i.exports=u},579:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(91461),u=e(88829),o=e(52660),c=new a({Extends:v,Mixins:[o],initialize:function(f,m,h,p,y,x,T,C,E){m===void 0&&(m=0),h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=0),x===void 0&&(x=128),T===void 0&&(T=0),v.call(this,f,"Line",new u(p,y,x,T));var A=Math.max(1,this.geom.right-this.geom.left),w=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(m,h),this.setSize(A,w),C!==void 0&&this.setStrokeStyle(1,C,E),this.updateDisplayOrigin()},setLineWidth:function(l,f){return f===void 0&&(f=l),this._startWidth=l,this._endWidth=f,this.lineWidth=l,this},setTo:function(l,f,m,h){return this.geom.setTo(l,f,m,h),this}});i.exports=c},52044:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(17876),v=e(49584),u=function(o,c,l,f){l.addToRenderList(c);var m=o.currentContext;if(v(o,m,c,l,f)){var h=c._displayOriginX,p=c._displayOriginY;c.isStroked&&(a(m,c),m.beginPath(),m.moveTo(c.geom.x1-h,c.geom.y1-p),m.lineTo(c.geom.x2-h,c.geom.y2-p),m.stroke()),m.restore()}};i.exports=u},85665:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(579);a.register("line",function(u,o,c,l,f,m,h,p){return this.displayList.add(new v(this.scene,u,o,c,l,f,m,h,p))})},52660:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(46952),u=e(52044),i.exports={renderWebGL:v,renderCanvas:u}},46952:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=e(75512),u=function(o,c,l,f){l.addToRenderList(c);var m=o.pipelines.set(c.pipeline),h=a(c,l,f);m.calcMatrix.copyFrom(h.calc);var p=c._displayOriginX,y=c._displayOriginY,x=l.alpha*c.alpha;if(o.pipelines.preBatch(c),c.isStroked){var T=m.strokeTint,C=v.getTintAppendFloatAlpha(c.strokeColor,c.strokeAlpha*x);T.TL=C,T.TR=C,T.BL=C,T.BR=C;var E=c._startWidth,A=c._endWidth;m.batchLine(c.geom.x1-p,c.geom.y1-y,c.geom.x2-p,c.geom.y2-y,E,A,1,0,!1,h.sprite,h.camera)}o.pipelines.postBatch(c)};i.exports=u},91249:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70573),v=e(56694),u=e(11117),o=e(14045),c=e(8580),l=e(91461),f=e(18974),m=new v({Extends:l,Mixins:[a],initialize:function(p,y,x,T,C,E){y===void 0&&(y=0),x===void 0&&(x=0),l.call(this,p,"Polygon",new c(T));var A=o(this.geom);this.setPosition(y,x),this.setSize(A.width,A.height),C!==void 0&&this.setFillStyle(C,E),this.updateDisplayOrigin(),this.updateData()},smooth:function(h){h===void 0&&(h=1);for(var p=0;p<h;p++)f(this.geom);return this.updateData()},setTo:function(h){this.geom.setTo(h);var p=o(this.geom);return this.setSize(p.width,p.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var h=[],p=this.geom.points,y=0;y<p.length;y++)h.push(p[y].x,p[y].y);return h.push(p[0].x,p[0].y),this.pathIndexes=u(h),this.pathData=h,this}});i.exports=m},40834:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15608),v=e(17876),u=e(49584),o=function(c,l,f,m){f.addToRenderList(l);var h=c.currentContext;if(u(c,h,l,f,m)){var p=l._displayOriginX,y=l._displayOriginY,x=l.pathData,T=x.length-1,C=x[0]-p,E=x[1]-y;h.beginPath(),h.moveTo(C,E),l.closePath||(T-=2);for(var A=2;A<T;A+=2){var w=x[A]-p,b=x[A+1]-y;h.lineTo(w,b)}l.closePath&&h.closePath(),l.isFilled&&(a(h,l),h.fill()),l.isStroked&&(v(h,l),h.stroke()),h.restore()}};i.exports=o},88203:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(91249);a.register("polygon",function(u,o,c,l,f){return this.displayList.add(new v(this.scene,u,o,c,l,f))})},70573:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(72841),u=e(40834),i.exports={renderWebGL:v,renderCanvas:u}},72841:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19543),v=e(73329),u=e(50262),o=function(c,l,f,m){f.addToRenderList(l);var h=c.pipelines.set(l.pipeline),p=v(l,f,m),y=h.calcMatrix.copyFrom(p.calc),x=l._displayOriginX,T=l._displayOriginY,C=f.alpha*l.alpha;c.pipelines.preBatch(l),l.isFilled&&a(h,y,l,C,x,T),l.isStroked&&u(h,l,C,x,T),c.pipelines.postBatch(l)};i.exports=o},517:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(74118),u=e(91461),o=e(37673),c=new a({Extends:u,Mixins:[o],initialize:function(f,m,h,p,y,x,T){m===void 0&&(m=0),h===void 0&&(h=0),p===void 0&&(p=128),y===void 0&&(y=128),u.call(this,f,"Rectangle",new v(0,0,p,y)),this.setPosition(m,h),this.setSize(p,y),x!==void 0&&this.setFillStyle(x,T),this.updateDisplayOrigin(),this.updateData()},setSize:function(l,f){this.width=l,this.height=f,this.geom.setSize(l,f),this.updateData(),this.updateDisplayOrigin();var m=this.input;return m&&!m.customHitArea&&(m.hitArea.width=l,m.hitArea.height=f),this},updateData:function(){var l=[],f=this.geom,m=this._tempLine;return f.getLineA(m),l.push(m.x1,m.y1,m.x2,m.y2),f.getLineB(m),l.push(m.x2,m.y2),f.getLineC(m),l.push(m.x2,m.y2),f.getLineD(m),l.push(m.x2,m.y2),this.pathData=l,this}});i.exports=c},4091:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15608),v=e(17876),u=e(49584),o=function(c,l,f,m){f.addToRenderList(l);var h=c.currentContext;if(u(c,h,l,f,m)){var p=l._displayOriginX,y=l._displayOriginY;l.isFilled&&(a(h,l),h.fillRect(-p,-y,l.width,l.height)),l.isStroked&&(v(h,l),h.beginPath(),h.rect(-p,-y,l.width,l.height),h.stroke()),h.restore()}};i.exports=o},94355:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(517);a.register("rectangle",function(u,o,c,l,f,m){return this.displayList.add(new v(this.scene,u,o,c,l,f,m))})},37673:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(43532),u=e(4091),i.exports={renderWebGL:v,renderCanvas:u}},43532:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=e(50262),u=e(75512),o=function(c,l,f,m){f.addToRenderList(l);var h=c.pipelines.set(l.pipeline),p=a(l,f,m);h.calcMatrix.copyFrom(p.calc);var y=l._displayOriginX,x=l._displayOriginY,T=f.alpha*l.alpha;if(c.pipelines.preBatch(l),l.isFilled){var C=h.fillTint,E=u.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*T);C.TL=E,C.TR=E,C.BL=E,C.BR=E,h.batchFillRect(-y,-x,l.width,l.height)}l.isStroked&&v(h,l,T,y,x),c.pipelines.postBatch(l)};i.exports=o},77843:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87956),v=e(56694),u=e(11117),o=e(91461),c=new v({Extends:o,Mixins:[a],initialize:function(f,m,h,p,y,x,T,C){m===void 0&&(m=0),h===void 0&&(h=0),p===void 0&&(p=5),y===void 0&&(y=32),x===void 0&&(x=64),o.call(this,f,"Star",null),this._points=p,this._innerRadius=y,this._outerRadius=x,this.setPosition(m,h),this.setSize(x*2,x*2),T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},setPoints:function(l){return this._points=l,this.updateData()},setInnerRadius:function(l){return this._innerRadius=l,this.updateData()},setOuterRadius:function(l){return this._outerRadius=l,this.updateData()},points:{get:function(){return this._points},set:function(l){this._points=l,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(l){this._innerRadius=l,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(l){this._outerRadius=l,this.updateData()}},updateData:function(){var l=[],f=this._points,m=this._innerRadius,h=this._outerRadius,p=Math.PI/2*3,y=Math.PI/f,x=h,T=h;l.push(x,T+-h);for(var C=0;C<f;C++)l.push(x+Math.cos(p)*h,T+Math.sin(p)*h),p+=y,l.push(x+Math.cos(p)*m,T+Math.sin(p)*m),p+=y;return l.push(x,T+-h),this.pathIndexes=u(l),this.pathData=l,this}});i.exports=c},11401:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15608),v=e(17876),u=e(49584),o=function(c,l,f,m){f.addToRenderList(l);var h=c.currentContext;if(u(c,h,l,f,m)){var p=l._displayOriginX,y=l._displayOriginY,x=l.pathData,T=x.length-1,C=x[0]-p,E=x[1]-y;h.beginPath(),h.moveTo(C,E),l.closePath||(T-=2);for(var A=2;A<T;A+=2){var w=x[A]-p,b=x[A+1]-y;h.lineTo(w,b)}h.closePath(),l.isFilled&&(a(h,l),h.fill()),l.isStroked&&(v(h,l),h.stroke()),h.restore()}};i.exports=o},23962:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(77843),v=e(61286);v.register("star",function(u,o,c,l,f,m,h){return this.displayList.add(new a(this.scene,u,o,c,l,f,m,h))})},87956:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(12037),u=e(11401),i.exports={renderWebGL:v,renderCanvas:u}},12037:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19543),v=e(73329),u=e(50262),o=function(c,l,f,m){f.addToRenderList(l);var h=c.pipelines.set(l.pipeline),p=v(l,f,m),y=h.calcMatrix.copyFrom(p.calc),x=l._displayOriginX,T=l._displayOriginY,C=f.alpha*l.alpha;c.pipelines.preBatch(l),l.isFilled&&a(h,y,l,C,x,T),l.isStroked&&u(h,l,C,x,T),c.pipelines.postBatch(l)};i.exports=o},21873:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(91461),u=e(66349),o=e(70498),c=new a({Extends:v,Mixins:[o],initialize:function(f,m,h,p,y,x,T,C,E,A,w){m===void 0&&(m=0),h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=128),x===void 0&&(x=64),T===void 0&&(T=0),C===void 0&&(C=128),E===void 0&&(E=128),v.call(this,f,"Triangle",new u(p,y,x,T,C,E));var b=this.geom.right-this.geom.left,I=this.geom.bottom-this.geom.top;this.setPosition(m,h),this.setSize(b,I),A!==void 0&&this.setFillStyle(A,w),this.updateDisplayOrigin(),this.updateData()},setTo:function(l,f,m,h,p,y){return this.geom.setTo(l,f,m,h,p,y),this.updateData()},updateData:function(){var l=[],f=this.geom,m=this._tempLine;return f.getLineA(m),l.push(m.x1,m.y1,m.x2,m.y2),f.getLineB(m),l.push(m.x2,m.y2),f.getLineC(m),l.push(m.x2,m.y2),this.pathData=l,this}});i.exports=c},60213:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15608),v=e(17876),u=e(49584),o=function(c,l,f,m){f.addToRenderList(l);var h=c.currentContext;if(u(c,h,l,f,m)){var p=l._displayOriginX,y=l._displayOriginY,x=l.geom.x1-p,T=l.geom.y1-y,C=l.geom.x2-p,E=l.geom.y2-y,A=l.geom.x3-p,w=l.geom.y3-y;h.beginPath(),h.moveTo(x,T),h.lineTo(C,E),h.lineTo(A,w),h.closePath(),l.isFilled&&(a(h,l),h.fill()),l.isStroked&&(v(h,l),h.stroke()),h.restore()}};i.exports=o},79296:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(21873);a.register("triangle",function(u,o,c,l,f,m,h,p,y,x){return this.displayList.add(new v(this.scene,u,o,c,l,f,m,h,p,y,x))})},70498:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(72291),u=e(60213),i.exports={renderWebGL:v,renderCanvas:u}},72291:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=e(50262),u=e(75512),o=function(c,l,f,m){f.addToRenderList(l);var h=c.pipelines.set(l.pipeline),p=a(l,f,m);h.calcMatrix.copyFrom(p.calc);var y=l._displayOriginX,x=l._displayOriginY,T=f.alpha*l.alpha;if(c.pipelines.preBatch(l),l.isFilled){var C=h.fillTint,E=u.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*T);C.TL=E,C.TR=E,C.BL=E,C.BR=E;var A=l.geom.x1-y,w=l.geom.y1-x,b=l.geom.x2-y,I=l.geom.y2-x,R=l.geom.x3-y,N=l.geom.y3-x;h.batchFillTriangle(A,w,b,I,R,N,p.sprite,p.camera)}l.isStroked&&v(h,l,T,y,x),c.pipelines.postBatch(l)};i.exports=o},13747:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16569),v=e(56694),u=e(64937),o=e(89980),c=e(20791),l=new v({Extends:o,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,c],initialize:function(m,h,p,y,x){o.call(this,m,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(y,x),this.setPosition(h,p),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(f,m){this.anims.update(f,m)},play:function(f,m){return this.anims.play(f,m)},playReverse:function(f,m){return this.anims.playReverse(f,m)},playAfterDelay:function(f,m){return this.anims.playAfterDelay(f,m)},playAfterRepeat:function(f,m){return this.anims.playAfterRepeat(f,m)},chain:function(f){return this.anims.chain(f)},stop:function(){return this.anims.stop()},stopAfterDelay:function(f){return this.anims.stopAfterDelay(f)},stopAfterRepeat:function(f){return this.anims.stopAfterRepeat(f)},stopOnFrame:function(f){return this.anims.stopOnFrame(f)},toJSON:function(){return u.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});i.exports=l},27573:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){v.addToRenderList(a),e.batchSprite(a,a.frame,v,u)};i.exports=g},89219:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(32291),u=e(99325),o=e(20494),c=e(13747);u.register("sprite",function(l,f){l===void 0&&(l={});var m=o(l,"key",null),h=o(l,"frame",null),p=new c(this.scene,0,0,m,h);return f!==void 0&&(l.add=f),a(this.scene,p,l),v(p,l),p})},66135:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(13747);a.register("sprite",function(u,o,c,l){return this.displayList.add(new v(this.scene,u,o,c,l))})},20791:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(21034),u=e(27573),i.exports={renderWebGL:v,renderCanvas:u}},21034:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){v.addToRenderList(a),a.pipeline.batchSprite(a,v,u)};i.exports=g},32979:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=e.canvas,o=e.context,c=e.style,l=[],f=0,m=v.length;c.maxLines>0&&c.maxLines<v.length&&(m=c.maxLines),c.syncFont(u,o);for(var h=0;h<m;h++){var p=c.strokeThickness;p+=o.measureText(v[h]).width,c.wordWrap&&(p-=o.measureText(" ").width),l[h]=Math.ceil(p),f=Math.max(f,l[h])}var y=a.fontSize+c.strokeThickness,x=y*m,T=e.lineSpacing;return m>1&&(x+=T*(m-1)),{width:f,height:x,lines:m,lineWidths:l,lineSpacing:T,lineHeight:y}};i.exports=g},27030:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61068),v=function(u){var o=a.create(this),c=o.getContext("2d",{willReadFrequently:!0});u.syncFont(o,c);var l=c.measureText(u.testString);if("actualBoundingBoxAscent"in l){var f=l.actualBoundingBoxAscent,m=l.actualBoundingBoxDescent;return a.remove(o),{ascent:f,descent:m,fontSize:f+m}}var h=Math.ceil(l.width*u.baselineX),p=h,y=2*p;p=p*u.baselineY|0,o.width=h,o.height=y,c.fillStyle="#f00",c.fillRect(0,0,h,y),c.font=u._font,c.textBaseline="alphabetic",c.fillStyle="#000",c.fillText(u.testString,0,p);var x={ascent:0,descent:0,fontSize:0},T=c.getImageData(0,0,h,y);if(!T)return x.ascent=p,x.descent=p+6,x.fontSize=x.ascent+x.descent,a.remove(o),x;var C=T.data,E=C.length,A=h*4,w,b,I=0,R=!1;for(w=0;w<p;w++){for(b=0;b<A;b+=4)if(C[I+b]!==255){R=!0;break}if(!R)I+=A;else break}for(x.ascent=p-w,I=E-A,R=!1,w=y;w>p;w--){for(b=0;b<A;b+=4)if(C[I+b]!==255){R=!0;break}if(!R)I-=A;else break}return x.descent=w-p,x.fontSize=x.ascent+x.descent,a.remove(o),x};i.exports=v},76555:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99584),v=e(61068),u=e(56694),o=e(64937),c=e(89980),l=e(32979),f=e(10850),m=e(55638),h=e(80032),p=e(74744),y=new u({Extends:c,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,h],initialize:function(T,C,E,A,w){C===void 0&&(C=0),E===void 0&&(E=0),c.call(this,T,"Text"),this.renderer=T.sys.renderer,this.setPosition(C,E),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=v.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.style=new p(this,w),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=T.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(A),w&&w.padding&&this.setPadding(w.padding),w&&w.lineSpacing&&this.setLineSpacing(w.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(x){var T=this.style;if(T.wordWrapCallback){var C=T.wordWrapCallback.call(T.wordWrapCallbackScope,x,this);return Array.isArray(C)&&(C=C.join(`
`)),C}else return T.wordWrapWidth?T.wordWrapUseAdvanced?this.advancedWordWrap(x,this.context,this.style.wordWrapWidth):this.basicWordWrap(x,this.context,this.style.wordWrapWidth):x},advancedWordWrap:function(x,T,C){for(var E="",A=x.replace(/ +/gi," ").split(this.splitRegExp),w=A.length,b=0;b<w;b++){var I=A[b],R="";I=I.replace(/^ *|\s*$/gi,"");var N=T.measureText(I).width;if(N<C){E+=I+`
`;continue}for(var F=C,P=I.split(" "),O=0;O<P.length;O++){var M=P[O],L=M+" ",k=T.measureText(L).width;if(k>F){if(O===0){for(var V=L;V.length&&(V=V.slice(0,-1),k=T.measureText(V).width,!(k<=F)););if(!V.length)throw new Error("wordWrapWidth < a single character");var W=M.substr(V.length);P[O]=W,R+=V}var K=P[O].length?O:O+1,B=P.slice(K).join(" ").replace(/[ \n]*$/gi,"");A.splice(b+1,0,B),w=A.length;break}else R+=L,F-=k}E+=R.replace(/[ \n]*$/gi,"")+`
`}return E=E.replace(/[\s|\n]*$/gi,""),E},basicWordWrap:function(x,T,C){for(var E="",A=x.split(this.splitRegExp),w=A.length-1,b=T.measureText(" ").width,I=0;I<=w;I++){for(var R=C,N=A[I].split(" "),F=N.length-1,P=0;P<=F;P++){var O=N[P],M=T.measureText(O).width,L=M;P<F&&(L+=b),L>R&&P>0&&(E+=`
`,R=C),E+=O,P<F?(E+=" ",R-=L):R-=M}I<w&&(E+=`
`)}return E},getWrappedText:function(x){x===void 0&&(x=this._text),this.style.syncFont(this.canvas,this.context);var T=this.runWordWrap(x);return T.split(this.splitRegExp)},setText:function(x){return!x&&x!==0&&(x=""),Array.isArray(x)&&(x=x.join(`
`)),x!==this._text&&(this._text=x.toString(),this.updateText()),this},appendText:function(x,T){T===void 0&&(T=!0),!x&&x!==0&&(x=""),Array.isArray(x)&&(x=x.join(`
`)),x=x.toString();var C=this._text.concat(T?`
`+x:x);return C!==this._text&&(this._text=C,this.updateText()),this},setStyle:function(x){return this.style.setStyle(x)},setFont:function(x){return this.style.setFont(x)},setFontFamily:function(x){return this.style.setFontFamily(x)},setFontSize:function(x){return this.style.setFontSize(x)},setFontStyle:function(x){return this.style.setFontStyle(x)},setFixedSize:function(x,T){return this.style.setFixedSize(x,T)},setBackgroundColor:function(x){return this.style.setBackgroundColor(x)},setFill:function(x){return this.style.setFill(x)},setColor:function(x){return this.style.setColor(x)},setStroke:function(x,T){return this.style.setStroke(x,T)},setShadow:function(x,T,C,E,A,w){return this.style.setShadow(x,T,C,E,A,w)},setShadowOffset:function(x,T){return this.style.setShadowOffset(x,T)},setShadowColor:function(x){return this.style.setShadowColor(x)},setShadowBlur:function(x){return this.style.setShadowBlur(x)},setShadowStroke:function(x){return this.style.setShadowStroke(x)},setShadowFill:function(x){return this.style.setShadowFill(x)},setWordWrapWidth:function(x,T){return this.style.setWordWrapWidth(x,T)},setWordWrapCallback:function(x,T){return this.style.setWordWrapCallback(x,T)},setAlign:function(x){return this.style.setAlign(x)},setResolution:function(x){return this.style.setResolution(x)},setLineSpacing:function(x){return this.lineSpacing=x,this.updateText()},setPadding:function(x,T,C,E){if(typeof x=="object"){var A=x,w=f(A,"x",null);w!==null?(x=w,C=w):(x=f(A,"left",0),C=f(A,"right",x));var b=f(A,"y",null);b!==null?(T=b,E=b):(T=f(A,"top",0),E=f(A,"bottom",T))}else x===void 0&&(x=0),T===void 0&&(T=x),C===void 0&&(C=x),E===void 0&&(E=T);return this.padding.left=x,this.padding.top=T,this.padding.right=C,this.padding.bottom=E,this.updateText()},setMaxLines:function(x){return this.style.setMaxLines(x)},updateText:function(){var x=this.canvas,T=this.context,C=this.style,E=C.resolution,A=C.metrics;C.syncFont(x,T);var w=this._text;(C.wordWrapWidth||C.wordWrapCallback)&&(w=this.runWordWrap(this._text));var b=w.split(this.splitRegExp),I=l(this,A,b),R=this.padding,N;C.fixedWidth===0?(this.width=I.width+R.left+R.right,N=I.width):(this.width=C.fixedWidth,N=this.width-R.left-R.right,N<I.width&&(N=I.width)),C.fixedHeight===0?this.height=I.height+R.top+R.bottom:this.height=C.fixedHeight;var F=this.width,P=this.height;this.updateDisplayOrigin(),F*=E,P*=E,F=Math.max(F,1),P=Math.max(P,1),x.width!==F||x.height!==P?(x.width=F,x.height=P,this.frame.setSize(F,P),C.syncFont(x,T),C.rtl&&(T.direction="rtl")):T.clearRect(0,0,F,P),T.save(),T.scale(E,E),C.backgroundColor&&(T.fillStyle=C.backgroundColor,T.fillRect(0,0,F,P)),C.syncStyle(x,T),T.translate(R.left,R.top);for(var O,M,L=0;L<I.lines;L++){if(O=C.strokeThickness/2,M=C.strokeThickness/2+L*I.lineHeight+A.ascent,L>0&&(M+=I.lineSpacing*L),C.rtl)O=F-O-R.left-R.right;else if(C.align==="right")O+=N-I.lineWidths[L];else if(C.align==="center")O+=(N-I.lineWidths[L])/2;else if(C.align==="justify"){var k=.85;if(I.lineWidths[L]/I.width>=k){var V=I.width-I.lineWidths[L],W=T.measureText(" ").width,K=b[L].trim(),B=K.split(" ");V+=(b[L].length-K.length)*W;for(var G=Math.floor(V/W),D=0;G>0;)B[D]+=" ",D=(D+1)%(B.length-1||1),--G;b[L]=B.join(" ")}}this.autoRound&&(O=Math.round(O),M=Math.round(M)),C.strokeThickness&&(C.syncShadow(T,C.shadowStroke),T.strokeText(b[L],O,M)),C.color&&(C.syncShadow(T,C.shadowFill),T.fillText(b[L],O,M))}T.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(x,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var $=this.input;return $&&!$.customHitArea&&($.hitArea.width=this.width,$.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(x){this.setText(x)}},toJSON:function(){var x=o.ToJSON(this),T={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return x.data=T,x},preDestroy:function(){this.style.rtl&&m(this.canvas),v.remove(this.canvas),this.texture.destroy()}});i.exports=y},71649:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){a.width===0||a.height===0||(v.addToRenderList(a),e.batchSprite(a,a.frame,v,u))};i.exports=g},75397:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(99325),u=e(20494),o=e(76555);v.register("text",function(c,l){c===void 0&&(c={});var f=u(c,"text",""),m=u(c,"style",null),h=u(c,"padding",null);h!==null&&(m.padding=h);var p=new o(this.scene,0,0,f,m);return l!==void 0&&(c.add=l),a(this.scene,p,c),p.autoRound=u(c,"autoRound",!0),p.resolution=u(c,"resolution",1),p})},94627:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(76555),v=e(61286);v.register("text",function(u,o,c,l){return this.displayList.add(new a(this.scene,u,o,c,l))})},80032:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(76128),u=e(71649),i.exports={renderWebGL:v,renderCanvas:u}},74744:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(20494),u=e(10850),o=e(27030),c={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},l=new a({initialize:function(m,h){this.parent=m,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(h,!1,!0)},setStyle:function(f,m,h){m===void 0&&(m=!0),h===void 0&&(h=!1),f&&f.hasOwnProperty("fontSize")&&typeof f.fontSize=="number"&&(f.fontSize=f.fontSize.toString()+"px");for(var p in c){var y=h?c[p][1]:this[p];p==="wordWrapCallback"||p==="wordWrapCallbackScope"?this[p]=u(f,c[p][0],y):this[p]=v(f,c[p][0],y)}var x=u(f,"font",null);x!==null&&this.setFont(x,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var T=u(f,"fill",null);T!==null&&(this.color=T);var C=u(f,"metrics",!1);return C?this.metrics={ascent:u(C,"ascent",0),descent:u(C,"descent",0),fontSize:u(C,"fontSize",0)}:(m||!this.metrics)&&(this.metrics=o(this)),m?this.parent.updateText():this.parent},syncFont:function(f,m){m.font=this._font},syncStyle:function(f,m){m.textBaseline="alphabetic",m.fillStyle=this.color,m.strokeStyle=this.stroke,m.lineWidth=this.strokeThickness,m.lineCap="round",m.lineJoin="round"},syncShadow:function(f,m){m?(f.shadowOffsetX=this.shadowOffsetX,f.shadowOffsetY=this.shadowOffsetY,f.shadowColor=this.shadowColor,f.shadowBlur=this.shadowBlur):(f.shadowOffsetX=0,f.shadowOffsetY=0,f.shadowColor=0,f.shadowBlur=0)},update:function(f){return f&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(f,m){m===void 0&&(m=!0);var h=f,p="",y="";if(typeof f!="string")h=u(f,"fontFamily","Courier"),p=u(f,"fontSize","16px"),y=u(f,"fontStyle","");else{var x=f.split(" "),T=0;y=x.length>2?x[T++]:"",p=x[T++]||"16px",h=x[T++]||"Courier"}return(h!==this.fontFamily||p!==this.fontSize||y!==this.fontStyle)&&(this.fontFamily=h,this.fontSize=p,this.fontStyle=y,m&&this.update(!0)),this.parent},setFontFamily:function(f){return this.fontFamily!==f&&(this.fontFamily=f,this.update(!0)),this.parent},setFontStyle:function(f){return this.fontStyle!==f&&(this.fontStyle=f,this.update(!0)),this.parent},setFontSize:function(f){return typeof f=="number"&&(f=f.toString()+"px"),this.fontSize!==f&&(this.fontSize=f,this.update(!0)),this.parent},setTestString:function(f){return this.testString=f,this.update(!0)},setFixedSize:function(f,m){return this.fixedWidth=f,this.fixedHeight=m,f&&(this.parent.width=f),m&&(this.parent.height=m),this.update(!1)},setBackgroundColor:function(f){return this.backgroundColor=f,this.update(!1)},setFill:function(f){return this.color=f,this.update(!1)},setColor:function(f){return this.color=f,this.update(!1)},setResolution:function(f){return this.resolution=f,this.update(!1)},setStroke:function(f,m){return m===void 0&&(m=this.strokeThickness),f===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==f||this.strokeThickness!==m)&&(this.stroke=f,this.strokeThickness=m,this.update(!0)),this.parent},setShadow:function(f,m,h,p,y,x){return f===void 0&&(f=0),m===void 0&&(m=0),h===void 0&&(h="#000"),p===void 0&&(p=0),y===void 0&&(y=!1),x===void 0&&(x=!0),this.shadowOffsetX=f,this.shadowOffsetY=m,this.shadowColor=h,this.shadowBlur=p,this.shadowStroke=y,this.shadowFill=x,this.update(!1)},setShadowOffset:function(f,m){return f===void 0&&(f=0),m===void 0&&(m=f),this.shadowOffsetX=f,this.shadowOffsetY=m,this.update(!1)},setShadowColor:function(f){return f===void 0&&(f="#000"),this.shadowColor=f,this.update(!1)},setShadowBlur:function(f){return f===void 0&&(f=0),this.shadowBlur=f,this.update(!1)},setShadowStroke:function(f){return this.shadowStroke=f,this.update(!1)},setShadowFill:function(f){return this.shadowFill=f,this.update(!1)},setWordWrapWidth:function(f,m){return m===void 0&&(m=!1),this.wordWrapWidth=f,this.wordWrapUseAdvanced=m,this.update(!1)},setWordWrapCallback:function(f,m){return m===void 0&&(m=null),this.wordWrapCallback=f,this.wordWrapCallbackScope=m,this.update(!1)},setAlign:function(f){return f===void 0&&(f="left"),this.align=f,this.update(!1)},setMaxLines:function(f){return f===void 0&&(f=0),this.maxLines=f,this.update(!1)},getTextMetrics:function(){var f=this.metrics;return{ascent:f.ascent,descent:f.descent,fontSize:f.fontSize}},toJSON:function(){var f={};for(var m in c)f[m]=this[m];return f.metrics=this.getTextMetrics(),f},destroy:function(){this.parent=void 0}});i.exports=l},76128:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75512),v=function(u,o,c,l){if(!(o.width===0||o.height===0)){c.addToRenderList(o);var f=o.frame,m=f.width,h=f.height,p=a.getTintAppendFloatAlpha,y=u.pipelines.set(o.pipeline,o),x=y.setTexture2D(f.glTexture,o);y.batchTexture(o,f.glTexture,m,h,o.x,o.y,m/o.style.resolution,h/o.style.resolution,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,m,h,p(o.tintTopLeft,c.alpha*o._alphaTL),p(o.tintTopRight,c.alpha*o._alphaTR),p(o.tintBottomLeft,c.alpha*o._alphaBL),p(o.tintBottomRight,c.alpha*o._alphaBR),o.tintFill,0,0,c,l,!1,x)}};i.exports=v},35856:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61068),v=e(56694),u=e(64937),o=e(89980),c=e(3504),l=e(8213),f=e(9271),m=e(93736),h=8,p=new v({Extends:o,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,f],initialize:function(x,T,C,E,A,w,b){var I=x.sys.renderer;o.call(this,x,"TileSprite");var R=x.sys.textures.get(w),N=R.get(b);N.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),R=x.sys.textures.get("__MISSING"),N=R.get()),R.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),R=x.sys.textures.get("__MISSING"),N=R.get()),!E||!A?(E=N.width,A=N.height):(E=Math.floor(E),A=Math.floor(A)),this._tilePosition=new m,this._tileScale=new m(1,1),this.dirty=!1,this.renderer=I,this.canvas=a.create(this,E,A),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=R,this.displayFrame=N,this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=c(N.width),this.potHeight=c(N.height),this.fillCanvas=a.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(T,C),this.setSize(E,A),this.setFrame(b),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(y,x){return this.displayTexture=this.scene.sys.textures.get(y),this.setFrame(x)},setFrame:function(y){var x=this.displayTexture.get(y);return this.potWidth=c(x.width),this.potHeight=c(x.height),this.canvas.width=0,!x.cutWidth||!x.cutHeight?this.renderFlags&=~h:this.renderFlags|=h,this.displayFrame=x,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(y,x){return y!==void 0&&(this.tilePositionX=y),x!==void 0&&(this.tilePositionY=x),this},setTileScale:function(y,x){return y===void 0&&(y=this.tileScaleX),x===void 0&&(x=y),this.tileScaleX=y,this.tileScaleY=x,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var y=this.displayFrame;if(y.source.isRenderTexture||y.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var x=this.fillContext,T=this.fillCanvas,C=this.potWidth,E=this.potHeight;(!this.renderer||!this.renderer.gl)&&(C=y.cutWidth,E=y.cutHeight),x.clearRect(0,0,C,E),T.width=C,T.height=E,x.drawImage(y.source.image,y.cutX,y.cutY,y.cutWidth,y.cutHeight,0,0,C,E),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(T,this.fillPattern):this.fillPattern=x.createPattern(T,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var y=this.canvas;if((y.width!==this.width||y.height!==this.height)&&(y.width=this.width,y.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var x=this.context;this.scene.sys.game.config.antialias||l.disable(x);var T=this._tileScale.x,C=this._tileScale.y,E=this._tilePosition.x,A=this._tilePosition.y;x.clearRect(0,0,this.width,this.height),x.save(),x.scale(T,C),x.translate(-E,-A),x.fillStyle=this.fillPattern,x.fillRect(E,A,this.width/T,this.height/C),x.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),a.remove(this.canvas),a.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(y){this._tilePosition.x=y,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(y){this._tilePosition.y=y,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(y){this._tileScale.x=y,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(y){this._tileScale.y=y,this.dirty=!0}}});i.exports=p},93305:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){a.updateCanvas(),v.addToRenderList(a),e.batchSprite(a,a.frame,v,u)};i.exports=g},63950:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(99325),u=e(20494),o=e(35856);v.register("tileSprite",function(c,l){c===void 0&&(c={});var f=u(c,"x",0),m=u(c,"y",0),h=u(c,"width",512),p=u(c,"height",512),y=u(c,"key",""),x=u(c,"frame",""),T=new o(this.scene,f,m,h,p,y,x);return l!==void 0&&(c.add=l),a(this.scene,T,c),T})},20509:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35856),v=e(61286);v.register("tileSprite",function(u,o,c,l,f,m){return this.displayList.add(new a(this.scene,u,o,c,l,f,m))})},9271:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(74287),u=e(93305),i.exports={renderWebGL:v,renderCanvas:u}},74287:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75512),v=function(u,o,c,l){o.updateCanvas();var f=o.width,m=o.height;if(!(f===0||m===0)){c.addToRenderList(o);var h=a.getTintAppendFloatAlpha,p=u.pipelines.set(o.pipeline,o),y=p.setTexture2D(o.fillPattern,o);p.batchTexture(o,o.fillPattern,o.displayFrame.width*o.tileScaleX,o.displayFrame.height*o.tileScaleY,o.x,o.y,f,m,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.originX*f,o.originY*m,0,0,f,m,h(o.tintTopLeft,c.alpha*o._alphaTL),h(o.tintTopRight,c.alpha*o._alphaTR),h(o.tintBottomLeft,c.alpha*o._alphaBL),h(o.tintBottomRight,c.alpha*o._alphaBR),o.tintFill,o.tilePositionX%o.displayFrame.width/o.displayFrame.width,o.tilePositionY%o.displayFrame.height/o.displayFrame.height,c,l,!1,y)}};i.exports=v},8630:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=e(56694),u=e(64937),o=e(56631),c=e(97081),l=e(89980),f=e(83392),m=e(76038),h=e(76583),p=e(77974),y=new v({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,p],initialize:function(T,C,E,A){l.call(this,T,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=h(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var w=T.sys.game;this._device=w.device.video,this.setPosition(C,E),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),w.events.on(c.PAUSE,this.globalPause,this),w.events.on(c.RESUME,this.globalResume,this);var b=T.sys.sound;b&&b.on(m.GLOBAL_MUTE,this.globalMute,this),A&&this.load(A)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(x){var T=this.scene.sys.cache.video.get(x);return T?(this.cacheKey=x,this.loadHandler(T.url,T.noAudio,T.crossOrigin)):console.warn("No video in cache for key: "+x),this},changeSource:function(x,T,C,E,A){T===void 0&&(T=!0),C===void 0&&(C=!1),this.cacheKey!==x&&(this.load(x),T&&this.play(C,E,A))},getVideoKey:function(){return this.cacheKey},loadURL:function(x,T,C){T===void 0&&(T=!1);var E=this._device.getVideoURL(x);return E?(this.cacheKey="",this.loadHandler(E.url,T,C)):console.warn("No supported video format found for "+x),this},loadMediaStream:function(x,T,C){return this.loadHandler(null,T,C,x)},loadHandler:function(x,T,C,E){T||(T=!1);var A=this.video;if(A?(this.removeLoadEventHandlers(),this.stop()):(A=document.createElement("video"),A.controls=!1,A.setAttribute("playsinline","playsinline"),A.setAttribute("preload","auto"),A.setAttribute("disablePictureInPicture","true")),T?(A.muted=!0,A.defaultMuted=!0,A.setAttribute("autoplay","autoplay")):(A.muted=!1,A.defaultMuted=!1,A.removeAttribute("autoplay")),C?A.setAttribute("crossorigin",C):A.removeAttribute("crossorigin"),E)if("srcObject"in A)try{A.srcObject=E}catch(w){if(w.name!=="TypeError")throw w;A.src=URL.createObjectURL(E)}else A.src=URL.createObjectURL(E);else A.src=x;return this.addLoadEventHandlers(),this.retry=0,this.video=A,this._playCalled=!1,A.load(),this},requestVideoFrame:function(x,T){var C=this.video;if(C){var E=T.width,A=T.height,w=this.videoTexture,b=this.videoTextureSource,I=!w||b.source!==C;I?(this._codePaused=C.paused,this._codeMuted=C.muted,w?(b.source=C,b.width=E,b.height=A,w.get().setSize(E,A)):(w=this.scene.sys.textures.create(this._key,C,E,A),w.add("__BASE",0,0,0,E,A),this.setTexture(w),this.videoTexture=w,this.videoTextureSource=w.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(o.VIDEO_TEXTURE,this,w)),this.setSizeToFrame(),this.updateDisplayOrigin()):b.update(),this.isStalled=!1,this.metadata=T;var R=T.mediaTime;I&&(this._lastUpdate=R,this.emit(o.VIDEO_CREATED,this,E,A),this.frameReady||(this.frameReady=!0,this.emit(o.VIDEO_PLAY,this))),this._playingMarker?R>=this._markerOut&&(C.loop?(C.currentTime=this._markerIn,this.emit(o.VIDEO_LOOP,this)):(this.stop(!1),this.emit(o.VIDEO_COMPLETE,this))):R<this._lastUpdate&&this.emit(o.VIDEO_LOOP,this),this._lastUpdate=R,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(x,T,C){T===void 0&&(T=-1),C===void 0&&(C=f.MAX_SAFE_INTEGER);var E=this.video;return!E||this.isPlaying()?(E||console.warn("Video not loaded"),this):(x===void 0&&(x=E.loop),E.loop=x,this._markerIn=T,this._markerOut=C,this._playingMarker=T>-1&&C>T&&C<f.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=E.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var x=this.video;x&&(x.addEventListener("error",this._loadCallbackHandler),x.addEventListener("abort",this._loadCallbackHandler))},removeLoadEventHandlers:function(){var x=this.video;x&&(x.removeEventListener("error",this._loadCallbackHandler),x.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var x=this.video;if(x){var T=this._callbacks;for(var C in T)x.addEventListener(C,T[C])}},removeEventHandlers:function(){var x=this.video;if(x){var T=this._callbacks;for(var C in T)x.removeEventListener(C,T[C])}},createPlayPromise:function(x){x===void 0&&(x=!0);var T=this.video,C=T.play();if(C!==void 0){var E=this.playSuccess.bind(this),A=this.playError.bind(this);if(!x){var w=this;A=function(){w.failedPlayAttempts++}}C.then(E).catch(A)}else T.addEventListener("playing",this._callbacks.legacy),x||this.failedPlayAttempts++},addMarker:function(x,T,C){return!isNaN(T)&&T>=0&&!isNaN(C)&&C>T&&(this.markers[x]=[T,C]),this},playMarker:function(x,T){var C=this.markers[x];return C&&this.play(T,C[0],C[1]),this},removeMarker:function(x){return delete this.markers[x],this},snapshot:function(x,T){return x===void 0&&(x=this.width),T===void 0&&(T=this.height),this.snapshotArea(0,0,this.width,this.height,x,T)},snapshotArea:function(x,T,C,E,A,w){x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=this.width),E===void 0&&(E=this.height),A===void 0&&(A=C),w===void 0&&(w=E);var b=this.video,I=this.snapshotTexture;return I?(I.setSize(A,w),b&&I.context.drawImage(b,x,T,C,E,0,0,A,w)):(I=this.scene.sys.textures.createCanvas(h(),A,w),this.snapshotTexture=I,b&&I.context.drawImage(b,x,T,C,E,0,0,A,w)),I.update()},saveSnapshotTexture:function(x){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,x):this.snapshotTexture=this.scene.sys.textures.createCanvas(x,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(o.VIDEO_UNLOCKED,this));var x=this.scene.sys.sound;x&&x.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(x){var T=x.name;T==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(o.VIDEO_LOCKED,this)):T==="NotSupportedError"?(this.stop(!1),this.emit(o.VIDEO_UNSUPPORTED,this,x)):(this.stop(!1),this.emit(o.VIDEO_ERROR,this,x))},legacyPlayHandler:function(){var x=this.video;x&&(this.playSuccess(),x.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(o.VIDEO_PLAYING,this)},loadErrorHandler:function(x){this.stop(!1),this.emit(o.VIDEO_ERROR,this,x)},stalledHandler:function(x){this.isStalled=!0,this.emit(o.VIDEO_STALLED,this,x)},completeHandler:function(){this._playCalled=!1,this.emit(o.VIDEO_COMPLETE,this)},preUpdate:function(x,T){var C=this.video;!C||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=T,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(x){var T=this.video;if(T){var C=T.duration;if(C!==1/0&&!isNaN(C)){var E=C*x;this.setCurrentTime(E)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(x){var T=this.video;if(T){if(typeof x=="string"){var C=x[0],E=parseFloat(x.substr(1));C==="+"?x=T.currentTime+E:C==="-"&&(x=T.currentTime-E)}T.currentTime=x}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(o.VIDEO_SEEKED,this)},getProgress:function(){var x=this.video;if(x){var T=x.duration;if(T!==1/0&&!isNaN(T))return x.currentTime/T}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(x){x===void 0&&(x=!0),this._codeMuted=x;var T=this.video;return T&&(T.muted=this._systemMuted?!0:x),this},isMuted:function(){return this._codeMuted},globalMute:function(x,T){this._systemMuted=T;var C=this.video;C&&(C.muted=this._codeMuted?!0:T)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(x){x===void 0&&(x=!0);var T=this.video;return this._codePaused=x,T&&!T.ended&&(x?T.paused||(this.removeEventHandlers(),T.pause()):x||(this._playCalled?T.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(x){return x===void 0&&(x=1),this.video&&(this.video.volume=a(x,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(x){return this.video&&(this.video.playbackRate=x),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(x){return x===void 0&&(x=!0),this.video&&(this.video.loop=x),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(x,T){return T===void 0&&(T=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,x),this.videoTextureSource.setFlipY(T)),this._key=x,this.flipY=T,!!this.videoTexture},stop:function(x){x===void 0&&(x=!0);var T=this.video;return T&&(this.removeEventHandlers(),T.cancelVideoFrameCallback(this._rfvCallbackId),T.pause()),this.retry=0,this._playCalled=!1,x&&this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var x=this.video;if(x){for(x.parentNode&&x.parentNode.removeChild(x);x.hasChildNodes();)x.removeChild(x.firstChild);x.removeAttribute("autoplay"),x.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var x=this.scene.sys.game.events;x.off(c.PAUSE,this.globalPause,this),x.off(c.RESUME,this.globalResume,this);var T=this.scene.sys.sound;T&&T.off(m.GLOBAL_MUTE,this.globalMute,this)}});i.exports=y},56933:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){a.videoTexture&&(v.addToRenderList(a),e.batchSprite(a,a.frame,v,u))};i.exports=g},65601:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88933),v=e(99325),u=e(20494),o=e(8630);v.register("video",function(c,l){c===void 0&&(c={});var f=u(c,"key",null),m=new o(this.scene,0,0,f);return l!==void 0&&(c.add=l),a(this.scene,m,c),m})},215:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8630),v=e(61286);v.register("video",function(u,o,c){return this.displayList.add(new a(this.scene,u,o,c))})},77974:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(83572),u=e(56933),i.exports={renderWebGL:v,renderCanvas:u}},83572:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){a.videoTexture&&(v.addToRenderList(a),a.pipeline.batchSprite(a,v,u))};i.exports=g},71030:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95723),v=e(26673),u=e(65650),o=e(56694),c=e(64937),l=e(89980),f=e(74118),m=e(94287),h=new o({Extends:l,Mixins:[c.Depth,c.GetBounds,c.Origin,c.Transform,c.ScrollFactor,c.Visible],initialize:function(y,x,T,C,E){C===void 0&&(C=1),E===void 0&&(E=C),l.call(this,y,"Zone"),this.setPosition(x,T),this.width=C,this.height=E,this.blendMode=a.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(p){this.scaleX=p/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(p){this.scaleY=p/this.height}},setSize:function(p,y,x){x===void 0&&(x=!0),this.width=p,this.height=y,this.updateDisplayOrigin();var T=this.input;return x&&T&&!T.customHitArea&&(T.hitArea.width=p,T.hitArea.height=y),this},setDisplaySize:function(p,y){return this.displayWidth=p,this.displayHeight=y,this},setCircleDropZone:function(p){return this.setDropZone(new v(0,0,p),u)},setRectangleDropZone:function(p,y){return this.setDropZone(new f(0,0,p,y),m)},setDropZone:function(p,y){return this.input||this.setInteractive(p,y,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(p,y,x){x.addToRenderList(y)},renderWebGL:function(p,y,x){x.addToRenderList(y)}});i.exports=h},24067:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99325),v=e(20494),u=e(71030);a.register("zone",function(o){var c=v(o,"x",0),l=v(o,"y",0),f=v(o,"width",1),m=v(o,"height",f);return new u(this.scene,c,l,f,m)})},34546:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71030),v=e(61286);v.register("zone",function(u,o,c,l){return this.displayList.add(new a(this.scene,u,o,c,l))})},95847:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};i.exports=g},26673:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(65650),u=e(94026),o=e(62941),c=e(52394),l=e(30977),f=new a({initialize:function(h,p,y){h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=0),this.type=c.CIRCLE,this.x=h,this.y=p,this._radius=y,this._diameter=y*2},contains:function(m,h){return v(this,m,h)},getPoint:function(m,h){return u(this,m,h)},getPoints:function(m,h,p){return o(this,m,h,p)},getRandomPoint:function(m){return l(this,m)},setTo:function(m,h,p){return this.x=m,this.y=h,this._radius=p,this._diameter=p*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(m,h){return h===void 0&&(h=m),this.x=m,this.y=h,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(m){this._radius=m,this._diameter=m*2}},diameter:{get:function(){return this._diameter},set:function(m){this._diameter=m,this._radius=m*.5}},left:{get:function(){return this.x-this._radius},set:function(m){this.x=m+this._radius}},right:{get:function(){return this.x+this._radius},set:function(m){this.x=m-this._radius}},top:{get:function(){return this.y-this._radius},set:function(m){this.y=m+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(m){this.y=m-this._radius}}});i.exports=f},37964:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return 2*(Math.PI*e.radius)};i.exports=g},72233:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o,c){return c===void 0&&(c=new a),c.x=u.x+u.radius*Math.cos(o),c.y=u.y+u.radius*Math.sin(o),c};i.exports=v},61761:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26673),v=function(u){return new a(u.x,u.y,u.radius)};i.exports=v},65650:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(e.radius>0&&a>=e.left&&a<=e.right&&v>=e.top&&v<=e.bottom){var u=(e.x-a)*(e.x-a),o=(e.y-v)*(e.y-v);return u+o<=e.radius*e.radius}else return!1};i.exports=g},39187:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65650),v=function(u,o){return a(u,o.x,o.y)};i.exports=v},58672:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65650),v=function(u,o){return a(u,o.x,o.y)&&a(u,o.right,o.y)&&a(u,o.x,o.bottom)&&a(u,o.right,o.bottom)};i.exports=v},42997:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a.setTo(e.x,e.y,e.radius)};i.exports=g},94894:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x===a.x&&e.y===a.y&&e.radius===a.radius};i.exports=g},48027:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=function(u,o){return o===void 0&&(o=new a),o.x=u.left,o.y=u.top,o.width=u.diameter,o.height=u.diameter,o};i.exports=v},94026:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72233),v=e(91806),u=e(83392),o=e(79967),c=function(l,f,m){m===void 0&&(m=new o);var h=v(f,0,u.PI2);return a(l,h,m)};i.exports=c},62941:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37964),v=e(72233),u=e(91806),o=e(83392),c=function(l,f,m,h){h===void 0&&(h=[]),!f&&m>0&&(f=a(l)/m);for(var p=0;p<f;p++){var y=u(p/f,0,o.PI2);h.push(v(l,y))}return h};i.exports=c},34585:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e.x+=a,e.y+=v,e};i.exports=g},88665:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x+=a.x,e.y+=a.y,e};i.exports=g},30977:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o){o===void 0&&(o=new a);var c=2*Math.PI*Math.random(),l=Math.random()+Math.random(),f=l>1?2-l:l,m=f*Math.cos(c),h=f*Math.sin(c);return o.x=u.x+m*u.radius,o.y=u.y+h*u.radius,o};i.exports=v},6112:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26673);a.Area=e(95847),a.Circumference=e(37964),a.CircumferencePoint=e(72233),a.Clone=e(61761),a.Contains=e(65650),a.ContainsPoint=e(39187),a.ContainsRect=e(58672),a.CopyFrom=e(42997),a.Equals=e(94894),a.GetBounds=e(48027),a.GetPoint=e(94026),a.GetPoints=e(62941),a.Offset=e(34585),a.OffsetPoint=e(88665),a.Random=e(30977),i.exports=a},52394:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};i.exports=g},58605:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};i.exports=g},39507:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a=e.width/2,v=e.height/2,u=Math.pow(a-v,2)/Math.pow(a+v,2);return Math.PI*(a+v)*(1+3*u/(10+Math.sqrt(4-3*u)))};i.exports=g},86998:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o,c){c===void 0&&(c=new a);var l=u.width/2,f=u.height/2;return c.x=u.x+l*Math.cos(o),c.y=u.y+f*Math.sin(o),c};i.exports=v},81773:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95669),v=function(u){return new a(u.x,u.y,u.width,u.height)};i.exports=v},72313:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(e.width<=0||e.height<=0)return!1;var u=(a-e.x)/e.width,o=(v-e.y)/e.height;return u*=u,o*=o,u+o<.25};i.exports=g},34368:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72313),v=function(u,o){return a(u,o.x,o.y)};i.exports=v},71431:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72313),v=function(u,o){return a(u,o.x,o.y)&&a(u,o.right,o.y)&&a(u,o.x,o.bottom)&&a(u,o.right,o.bottom)};i.exports=v},75459:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a.setTo(e.x,e.y,e.width,e.height)};i.exports=g},95669:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72313),u=e(95340),o=e(54978),c=e(52394),l=e(72006),f=new a({initialize:function(h,p,y,x){h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=0),x===void 0&&(x=0),this.type=c.ELLIPSE,this.x=h,this.y=p,this.width=y,this.height=x},contains:function(m,h){return v(this,m,h)},getPoint:function(m,h){return u(this,m,h)},getPoints:function(m,h,p){return o(this,m,h,p)},getRandomPoint:function(m){return l(this,m)},setTo:function(m,h,p,y){return this.x=m,this.y=h,this.width=p,this.height=y,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(m,h){return h===void 0&&(h=m),this.x=m,this.y=h,this},setSize:function(m,h){return h===void 0&&(h=m),this.width=m,this.height=h,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(m){this.x=m+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(m){this.x=m-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(m){this.y=m+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(m){this.y=m-this.height/2}}});i.exports=f},98068:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x===a.x&&e.y===a.y&&e.width===a.width&&e.height===a.height};i.exports=g},72897:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=function(u,o){return o===void 0&&(o=new a),o.x=u.left,o.y=u.top,o.width=u.width,o.height=u.height,o};i.exports=v},95340:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86998),v=e(91806),u=e(83392),o=e(79967),c=function(l,f,m){m===void 0&&(m=new o);var h=v(f,0,u.PI2);return a(l,h,m)};i.exports=c},54978:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(39507),v=e(86998),u=e(91806),o=e(83392),c=function(l,f,m,h){h===void 0&&(h=[]),!f&&m>0&&(f=a(l)/m);for(var p=0;p<f;p++){var y=u(p/f,0,o.PI2);h.push(v(l,y))}return h};i.exports=c},77951:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e.x+=a,e.y+=v,e};i.exports=g},36233:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x+=a.x,e.y+=a.y,e};i.exports=g},72006:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o){o===void 0&&(o=new a);var c=Math.random()*Math.PI*2,l=Math.sqrt(Math.random());return o.x=u.x+l*Math.cos(c)*u.width/2,o.y=u.y+l*Math.sin(c)*u.height/2,o};i.exports=v},40652:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95669);a.Area=e(58605),a.Circumference=e(39507),a.CircumferencePoint=e(86998),a.Clone=e(81773),a.Contains=e(72313),a.ContainsPoint=e(34368),a.ContainsRect=e(71431),a.CopyFrom=e(75459),a.Equals=e(98068),a.GetBounds=e(72897),a.GetPoint=e(95340),a.GetPoints=e(54978),a.Offset=e(77951),a.OffsetPoint=e(36233),a.Random=e(72006),i.exports=a},84068:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(52394),v=e(98611),u={Circle:e(6112),Ellipse:e(40652),Intersects:e(7563),Line:e(28482),Mesh:e(14293),Point:e(63472),Polygon:e(44359),Rectangle:e(66658),Triangle:e(87619)};u=v(!1,u,a),i.exports=u},22184:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(53996),v=function(u,o){return a(u.x,u.y,o.x,o.y)<=u.radius+o.radius};i.exports=v},26535:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=a.width/2,u=a.height/2,o=Math.abs(e.x-a.x-v),c=Math.abs(e.y-a.y-u),l=v+e.radius,f=u+e.radius;if(o>l||c>f)return!1;if(o<=v||c<=u)return!0;var m=o-v,h=c-u,p=m*m,y=h*h,x=e.radius*e.radius;return p+y<=x};i.exports=g},71145:(i,g,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=e(22184),u=function(o,c,l){if(l===void 0&&(l=[]),v(o,c)){var f=o.x,m=o.y,h=o.radius,p=c.x,y=c.y,x=c.radius,T,C,E,A,w;if(m===y)w=(x*x-h*h-p*p+f*f)/(2*(f-p)),T=1,C=-2*y,E=p*p+w*w-2*p*w+y*y-x*x,A=C*C-4*T*E,A===0?l.push(new a(w,-C/(2*T))):A>0&&(l.push(new a(w,(-C+Math.sqrt(A))/(2*T))),l.push(new a(w,(-C-Math.sqrt(A))/(2*T))));else{var b=(f-p)/(m-y),I=(x*x-h*h-p*p+f*f-y*y+m*m)/(2*(m-y));T=b*b+1,C=2*m*b-2*I*b-2*f,E=f*f+m*m+I*I-h*h-2*m*I,A=C*C-4*T*E,A===0?(w=-C/(2*T),l.push(new a(w,I-w*b))):A>0&&(w=(-C+Math.sqrt(A))/(2*T),l.push(new a(w,I-w*b)),w=(-C-Math.sqrt(A))/(2*T),l.push(new a(w,I-w*b)))}}return l};i.exports=u},62508:(i,g,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26111),v=e(26535),u=function(o,c,l){if(l===void 0&&(l=[]),v(o,c)){var f=c.getLineA(),m=c.getLineB(),h=c.getLineC(),p=c.getLineD();a(f,o,l),a(m,o,l),a(h,o,l),a(p,o,l)}return l};i.exports=u},26111:(i,g,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=e(61472),u=function(o,c,l){if(l===void 0&&(l=[]),v(o,c)){var f=o.x1,m=o.y1,h=o.x2,p=o.y2,y=c.x,x=c.y,T=c.radius,C=h-f,E=p-m,A=f-y,w=m-x,b=C*C+E*E,I=2*(C*A+E*w),R=A*A+w*w-T*T,N=I*I-4*b*R,F,P;if(N===0){var O=-I/(2*b);F=f+O*C,P=m+O*E,O>=0&&O<=1&&l.push(new a(F,P))}else if(N>0){var M=(-I-Math.sqrt(N))/(2*b);F=f+M*C,P=m+M*E,M>=0&&M<=1&&l.push(new a(F,P));var L=(-I+Math.sqrt(N))/(2*b);F=f+L*C,P=m+L*E,L>=0&&L<=1&&l.push(new a(F,P))}}return l};i.exports=u},96537:(i,g,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70015),v=function(u,o,c,l){c===void 0&&(c=!1);var f=u.x1,m=u.y1,h=u.x2,p=u.y2,y=o.x1,x=o.y1,T=o.x2,C=o.y2,E=h-f,A=p-m,w=T-y,b=C-x,I=E*b-A*w;if(I===0)return null;var R,N,F;if(c){if(R=(E*(x-m)+A*(f-y))/(w*A-b*E),N=(y+w*R-f)/E,N<0||R<0||R>1)return null;F=N}else{if(R=((y-f)*b-(x-m)*w)/I,N=((m-x)*E-(f-y)*A)/I,R<0||R>1||N<0||N>1)return null;F=R}return l===void 0&&(l=new a),l.set(f+E*F,m+A*F,F)};i.exports=v},17647:(i,g,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(96537),v=e(88829),u=e(70015),o=new v,c=new u,l=function(f,m,h,p){h===void 0&&(h=!1),p===void 0&&(p=new u);var y=!1;p.set(),c.set();for(var x=m[0],T=1;T<m.length;T++){var C=m[T];o.setTo(x.x,x.y,C.x,C.y),x=C,a(f,o,h,c)&&(!y||c.z<p.z)&&(p.copy(c),y=!0)}return y?p:null};i.exports=l},68439:(i,g,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70015),v=e(51729),u=e(17647),o=new a,c=function(l,f,m,h){h===void 0&&(h=new v),Array.isArray(f)||(f=[f]);var p=!1;h.set(),o.set();for(var y=0;y<f.length;y++)u(l,f[y].points,m,o)&&(!p||o.z<h.z)&&(h.set(o.x,o.y,o.z,y),p=!0);return p?h:null};i.exports=c},9569:(i,g,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=e(25227),u=e(47910),o=function(c,l,f){if(f===void 0&&(f=[]),u(c,l))for(var m=l.getLineA(),h=l.getLineB(),p=l.getLineC(),y=l.getLineD(),x=[new a,new a,new a,new a],T=[v(m,c,x[0]),v(h,c,x[1]),v(p,c,x[2]),v(y,c,x[3])],C=0;C<4;C++)T[C]&&f.push(x[C]);return f};i.exports=o},7449:(i,g,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(51729),v=e(68439),u=e(88829),o=new u;function c(m,h,p,y,x){var T=Math.cos(m),C=Math.sin(m);o.setTo(h,p,h+T,p+C);var E=v(o,y,!0);E&&x.push(new a(E.x,E.y,m,E.w))}function l(m,h){return m.z-h.z}var f=function(m,h,p){Array.isArray(p)||(p=[p]);for(var y=[],x=[],T=0;T<p.length;T++)for(var C=p[T].points,E=0;E<C.length;E++){var A=Math.atan2(C[E].y-h,C[E].x-m);x.indexOf(A)===-1&&(c(A,m,h,p,y),c(A-1e-5,m,h,p,y),c(A+1e-5,m,h,p,y),x.push(A))}return y.sort(l)};i.exports=f},82931:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=e(90205),u=function(o,c,l){return l===void 0&&(l=new a),v(o,c)&&(l.x=Math.max(o.x,c.x),l.y=Math.max(o.y,c.y),l.width=Math.min(o.right,c.right)-l.x,l.height=Math.min(o.bottom,c.bottom)-l.y),l};i.exports=u},1946:(i,g,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(9569),v=e(90205),u=function(o,c,l){if(l===void 0&&(l=[]),v(o,c)){var f=o.getLineA(),m=o.getLineB(),h=o.getLineC(),p=o.getLineD();a(f,c,l),a(m,c,l),a(h,c,l),a(p,c,l)}return l};i.exports=u},34211:(i,g,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(20370),v=e(9569),u=function(o,c,l){if(l===void 0&&(l=[]),a(o,c)){var f=c.getLineA(),m=c.getLineB(),h=c.getLineC();v(f,o,l),v(m,o,l),v(h,o,l)}return l};i.exports=u},80511:(i,g,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26111),v=e(48411),u=function(o,c,l){if(l===void 0&&(l=[]),v(o,c)){var f=o.getLineA(),m=o.getLineB(),h=o.getLineC();a(f,c,l),a(m,c,l),a(h,c,l)}return l};i.exports=u},31343:(i,g,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=e(86117),u=e(25227),o=function(c,l,f){if(f===void 0&&(f=[]),v(c,l))for(var m=c.getLineA(),h=c.getLineB(),p=c.getLineC(),y=[new a,new a,new a],x=[u(m,l,y[0]),u(h,l,y[1]),u(p,l,y[2])],T=0;T<3;T++)x[T]&&f.push(y[T]);return f};i.exports=o},70534:(i,g,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(23589),v=e(31343),u=function(o,c,l){if(l===void 0&&(l=[]),a(o,c)){var f=c.getLineA(),m=c.getLineB(),h=c.getLineC();v(o,f,l),v(o,m,l),v(o,h,l)}return l};i.exports=u},61472:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65650),v=e(79967),u=new v,o=function(c,l,f){if(f===void 0&&(f=u),a(l,c.x1,c.y1))return f.x=c.x1,f.y=c.y1,!0;if(a(l,c.x2,c.y2))return f.x=c.x2,f.y=c.y2,!0;var m=c.x2-c.x1,h=c.y2-c.y1,p=l.x-c.x1,y=l.y-c.y1,x=m*m+h*h,T=m,C=h;if(x>0){var E=(p*m+y*h)/x;T*=E,C*=E}f.x=c.x1+T,f.y=c.y1+C;var A=T*T+C*C;return A<=x&&T*m+C*h>=0&&a(l,f.x,f.y)};i.exports=o},25227:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=e.x1,o=e.y1,c=e.x2,l=e.y2,f=a.x1,m=a.y1,h=a.x2,p=a.y2;if(u===c&&o===l||f===h&&m===p)return!1;var y=(p-m)*(c-u)-(h-f)*(l-o);if(y===0)return!1;var x=((h-f)*(o-m)-(p-m)*(u-f))/y,T=((c-u)*(o-m)-(l-o)*(u-f))/y;return x<0||x>1||T<0||T>1?!1:(v&&(v.x=u+x*(c-u),v.y=o+x*(l-o)),!0)};i.exports=g},47910:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.x1,u=e.y1,o=e.x2,c=e.y2,l=a.x,f=a.y,m=a.right,h=a.bottom,p=0;if(v>=l&&v<=m&&u>=f&&u<=h||o>=l&&o<=m&&c>=f&&c<=h)return!0;if(v<l&&o>=l){if(p=u+(c-u)*(l-v)/(o-v),p>f&&p<=h)return!0}else if(v>m&&o<=m&&(p=u+(c-u)*(m-v)/(o-v),p>=f&&p<=h))return!0;if(u<f&&c>=f){if(p=v+(o-v)*(f-u)/(c-u),p>=l&&p<=m)return!0}else if(u>h&&c<=h&&(p=v+(o-v)*(h-u)/(c-u),p>=l&&p<=m))return!0;return!1};i.exports=g},34426:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){v===void 0&&(v=1);var u=a.x1,o=a.y1,c=a.x2,l=a.y2,f=e.x,m=e.y,h=(c-u)*(c-u)+(l-o)*(l-o);if(h===0)return!1;var p=((f-u)*(c-u)+(m-o)*(l-o))/h;if(p<0)return Math.sqrt((u-f)*(u-f)+(o-m)*(o-m))<=v;if(p>=0&&p<=1){var y=((o-m)*(c-u)-(u-f)*(l-o))/h;return Math.abs(y)*Math.sqrt(h)<=v}else return Math.sqrt((c-f)*(c-f)+(l-m)*(l-m))<=v};i.exports=g},81414:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(34426),v=function(u,o){if(!a(u,o))return!1;var c=Math.min(o.x1,o.x2),l=Math.max(o.x1,o.x2),f=Math.min(o.y1,o.y2),m=Math.max(o.y1,o.y2);return u.x>=c&&u.x<=l&&u.y>=f&&u.y<=m};i.exports=v},90205:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.width<=0||e.height<=0||a.width<=0||a.height<=0?!1:!(e.right<a.x||e.bottom<a.y||e.x>a.right||e.y>a.bottom)};i.exports=g},20370:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25227),v=e(94287),u=e(86875),o=e(87279),c=function(l,f){if(f.left>l.right||f.right<l.left||f.top>l.bottom||f.bottom<l.top)return!1;var m=f.getLineA(),h=f.getLineB(),p=f.getLineC();if(v(l,m.x1,m.y1)||v(l,m.x2,m.y2)||v(l,h.x1,h.y1)||v(l,h.x2,h.y2)||v(l,p.x1,p.y1)||v(l,p.x2,p.y2))return!0;var y=l.getLineA(),x=l.getLineB(),T=l.getLineC(),C=l.getLineD();if(a(m,y)||a(m,x)||a(m,T)||a(m,C)||a(h,y)||a(h,x)||a(h,T)||a(h,C)||a(p,y)||a(p,x)||a(p,T)||a(p,C))return!0;var E=o(l),A=u(f,E,!0);return A.length>0};i.exports=c},8786:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o,c){return c===void 0&&(c=0),!(a>e.right+c||v<e.left-c||u>e.bottom+c||o<e.top-c)};i.exports=g},48411:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61472),v=e(60689),u=function(o,c){return o.left>c.right||o.right<c.left||o.top>c.bottom||o.bottom<c.top?!1:!!(v(o,c.x,c.y)||a(o.getLineA(),c)||a(o.getLineB(),c)||a(o.getLineC(),c))};i.exports=u},86117:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25227),v=function(u,o){return!!(u.contains(o.x1,o.y1)||u.contains(o.x2,o.y2)||a(u.getLineA(),o)||a(u.getLineB(),o)||a(u.getLineC(),o))};i.exports=v},23589:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(86875),v=e(18680),u=e(25227),o=function(c,l){if(c.left>l.right||c.right<l.left||c.top>l.bottom||c.bottom<l.top)return!1;var f=c.getLineA(),m=c.getLineB(),h=c.getLineC(),p=l.getLineA(),y=l.getLineB(),x=l.getLineC();if(u(f,p)||u(f,y)||u(f,x)||u(m,p)||u(m,y)||u(m,x)||u(h,p)||u(h,y)||u(h,x))return!0;var T=v(c),C=a(l,T,!0);return C.length>0||(T=v(l),C=a(c,T,!0),C.length>0)};i.exports=o},7563:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CircleToCircle:e(22184),CircleToRectangle:e(26535),GetCircleToCircle:e(71145),GetCircleToRectangle:e(62508),GetLineToCircle:e(26111),GetLineToLine:e(96537),GetLineToPoints:e(17647),GetLineToPolygon:e(68439),GetLineToRectangle:e(9569),GetRaysFromPointToPolygon:e(7449),GetRectangleIntersection:e(82931),GetRectangleToRectangle:e(1946),GetRectangleToTriangle:e(34211),GetTriangleToCircle:e(80511),GetTriangleToLine:e(31343),GetTriangleToTriangle:e(70534),LineToCircle:e(61472),LineToLine:e(25227),LineToRectangle:e(47910),PointToLine:e(34426),PointToLineSegment:e(81414),RectangleToRectangle:e(90205),RectangleToTriangle:e(20370),RectangleToValues:e(8786),TriangleToCircle:e(48411),TriangleToLine:e(86117),TriangleToTriangle:e(23589)}},50599:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};i.exports=g},58813:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){a===void 0&&(a=1),v===void 0&&(v=[]);var u=Math.round(e.x1),o=Math.round(e.y1),c=Math.round(e.x2),l=Math.round(e.y2),f=Math.abs(c-u),m=Math.abs(l-o),h=u<c?1:-1,p=o<l?1:-1,y=f-m;v.push({x:u,y:o});for(var x=1;!(u===c&&o===l);){var T=y<<1;T>-m&&(y-=m,u+=h),T<f&&(y+=f,o+=p),x%a===0&&v.push({x:u,y:o}),x++}return v};i.exports=g},88513:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=a-(e.x1+e.x2)/2,o=v-(e.y1+e.y2)/2;return e.x1+=u,e.y1+=o,e.x2+=u,e.y2+=o,e};i.exports=g},26718:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88829),v=function(u){return new a(u.x1,u.y1,u.x2,u.y2)};i.exports=v},88930:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a.setTo(e.x1,e.y1,e.x2,e.y2)};i.exports=g},90656:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x1===a.x1&&e.y1===a.y1&&e.x2===a.x2&&e.y2===a.y2};i.exports=g},30897:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16028),v=function(u,o,c){c===void 0&&(c=o);var l=a(u),f=u.x2-u.x1,m=u.y2-u.y1;return o&&(u.x1=u.x1-f/l*o,u.y1=u.y1-m/l*o),c&&(u.x2=u.x2+f/l*c,u.y2=u.y2+m/l*c),u};i.exports=v},30684:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92951),v=e(21902),u=e(79967),o=function(c,l,f,m,h){m===void 0&&(m=0),h===void 0&&(h=[]);var p=[],y=c.x1,x=c.y1,T=c.x2-y,C=c.y2-x,E=v(l,h),A,w,b=f-1;for(A=0;A<b;A++)w=E(A/b),p.push(new u(y+T*w,x+C*w));if(w=E(1),p.push(new u(y+T*w,x+C*w)),m>0){var I=p[0],R=[I];for(A=1;A<p.length-1;A++){var N=p[A];a(I,N)>=m&&(R.push(N),I=N)}var F=p[p.length-1];return a(I,F)<m&&R.pop(),R.push(F),R}else return p};i.exports=o},20487:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o){return o===void 0&&(o=new a),o.x=(u.x1+u.x2)/2,o.y=(u.y1+u.y2)/2,o};i.exports=v},11222:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o,c){c===void 0&&(c=new a);var l=u.x1,f=u.y1,m=u.x2,h=u.y2,p=(m-l)*(m-l)+(h-f)*(h-f);if(p===0)return c;var y=((o.x-l)*(m-l)+(o.y-f)*(h-f))/p;return c.x=l+y*(m-l),c.y=f+y*(h-f),c};i.exports=v},7377:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83392),v=e(50599),u=e(79967),o=function(c,l){l===void 0&&(l=new u);var f=v(c)-a.TAU;return l.x=Math.cos(f),l.y=Math.sin(f),l};i.exports=o},66464:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o,c){return c===void 0&&(c=new a),c.x=u.x1+(u.x2-u.x1)*o,c.y=u.y1+(u.y2-u.y1)*o,c};i.exports=v},8570:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16028),v=e(79967),u=function(o,c,l,f){f===void 0&&(f=[]),!c&&l>0&&(c=a(o)/l);for(var m=o.x1,h=o.y1,p=o.x2,y=o.y2,x=0;x<c;x++){var T=x/c,C=m+(p-m)*T,E=h+(y-h)*T;f.push(new v(C,E))}return f};i.exports=u},65269:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.x1,u=e.y1,o=e.x2,c=e.y2,l=(o-v)*(o-v)+(c-u)*(c-u);if(l===0)return!1;var f=((u-a.y)*(o-v)-(v-a.x)*(c-u))/l;return Math.abs(f)*Math.sqrt(l)};i.exports=g},82996:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return Math.abs(e.y1-e.y2)};i.exports=g},16028:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};i.exports=g},88829:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(66464),u=e(8570),o=e(52394),c=e(74077),l=e(93736),f=new a({initialize:function(h,p,y,x){h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=0),x===void 0&&(x=0),this.type=o.LINE,this.x1=h,this.y1=p,this.x2=y,this.y2=x},getPoint:function(m,h){return v(this,m,h)},getPoints:function(m,h,p){return u(this,m,h,p)},getRandomPoint:function(m){return c(this,m)},setTo:function(m,h,p,y){return m===void 0&&(m=0),h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=0),this.x1=m,this.y1=h,this.x2=p,this.y2=y,this},getPointA:function(m){return m===void 0&&(m=new l),m.set(this.x1,this.y1),m},getPointB:function(m){return m===void 0&&(m=new l),m.set(this.x2,this.y2),m},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(m){this.x1<=this.x2?this.x1=m:this.x2=m}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(m){this.x1>this.x2?this.x1=m:this.x2=m}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(m){this.y1<=this.y2?this.y1=m:this.y2=m}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(m){this.y1>this.y2?this.y1=m:this.y2=m}}});i.exports=f},73273:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83392),v=e(1071),u=e(50599),o=function(c){var l=u(c)-a.TAU;return v(l,-Math.PI,Math.PI)};i.exports=o},96936:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83392),v=e(50599),u=function(o){return Math.cos(v(o)-a.TAU)};i.exports=u},43581:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83392),v=e(50599),u=function(o){return Math.sin(v(o)-a.TAU)};i.exports=u},13990:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e.x1+=a,e.y1+=v,e.x2+=a,e.y2+=v,e};i.exports=g},1298:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};i.exports=g},74077:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o){o===void 0&&(o=new a);var c=Math.random();return o.x=u.x1+c*(u.x2-u.x1),o.y=u.y1+c*(u.y2-u.y1),o};i.exports=v},30473:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50599),v=e(73273),u=function(o,c){return 2*v(c)-Math.PI-a(o)};i.exports=u},25968:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1809),v=function(u,o){var c=(u.x1+u.x2)/2,l=(u.y1+u.y2)/2;return a(u,c,l,o)};i.exports=v},24296:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1809),v=function(u,o,c){return a(u,o.x,o.y,c)};i.exports=v},1809:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=Math.cos(u),c=Math.sin(u),l=e.x1-a,f=e.y1-v;return e.x1=l*o-f*c+a,e.y1=l*c+f*o+v,l=e.x2-a,f=e.y2-v,e.x2=l*o-f*c+a,e.y2=l*c+f*o+v,e};i.exports=g},88171:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o){return e.x1=a,e.y1=v,e.x2=a+Math.cos(u)*o,e.y2=v+Math.sin(u)*o,e};i.exports=g},82797:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};i.exports=g},41067:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return Math.abs(e.x1-e.x2)};i.exports=g},28482:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(88829);a.Angle=e(50599),a.BresenhamPoints=e(58813),a.CenterOn=e(88513),a.Clone=e(26718),a.CopyFrom=e(88930),a.Equals=e(90656),a.Extend=e(30897),a.GetEasedPoints=e(30684),a.GetMidPoint=e(20487),a.GetNearestPoint=e(11222),a.GetNormal=e(7377),a.GetPoint=e(66464),a.GetPoints=e(8570),a.GetShortestDistance=e(65269),a.Height=e(82996),a.Length=e(16028),a.NormalAngle=e(73273),a.NormalX=e(96936),a.NormalY=e(43581),a.Offset=e(13990),a.PerpSlope=e(1298),a.Random=e(74077),a.ReflectAngle=e(30473),a.Rotate=e(25968),a.RotateAroundPoint=e(24296),a.RotateAroundXY=e(1809),a.SetToAngle=e(88171),a.Slope=e(82797),a.Width=e(41067),i.exports=a},18693:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(74118),u=e(93736);function o(l,f,m,h){var p=l-m,y=f-h,x=p*p+y*y;return Math.sqrt(x)}var c=new a({initialize:function(f,m,h){this.vertex1=f,this.vertex2=m,this.vertex3=h,this.bounds=new v,this._inCenter=new u},getInCenter:function(l){l===void 0&&(l=!0);var f=this.vertex1,m=this.vertex2,h=this.vertex3,p,y,x,T,C,E;l?(p=f.x,y=f.y,x=m.x,T=m.y,C=h.x,E=h.y):(p=f.vx,y=f.vy,x=m.vx,T=m.vy,C=h.vx,E=h.vy);var A=o(C,E,x,T),w=o(p,y,C,E),b=o(x,T,p,y),I=A+w+b;return this._inCenter.set((p*A+x*w+C*b)/I,(y*A+T*w+E*b)/I)},contains:function(l,f,m){var h=this.vertex1,p=this.vertex2,y=this.vertex3,x=h.vx,T=h.vy,C=p.vx,E=p.vy,A=y.vx,w=y.vy;if(m){var b=m.a,I=m.b,R=m.c,N=m.d,F=m.e,P=m.f;x=h.vx*b+h.vy*R+F,T=h.vx*I+h.vy*N+P,C=p.vx*b+p.vy*R+F,E=p.vx*I+p.vy*N+P,A=y.vx*b+y.vy*R+F,w=y.vx*I+y.vy*N+P}var O=A-x,M=w-T,L=C-x,k=E-T,V=l-x,W=f-T,K=O*O+M*M,B=O*L+M*k,G=O*V+M*W,D=L*L+k*k,$=L*V+k*W,z=K*D-B*B,H=z===0?0:1/z,Y=(D*G-B*$)*H,Z=(K*$-B*G)*H;return Y>=0&&Z>=0&&Y+Z<1},isCounterClockwise:function(l){var f=this.vertex1,m=this.vertex2,h=this.vertex3,p=(m.vx-f.vx)*(h.vy-f.vy)-(m.vy-f.vy)*(h.vx-f.vx);return l<=0?p>=0:p<0},load:function(l,f,m,h,p){return m=this.vertex1.load(l,f,m,h,p),m=this.vertex2.load(l,f,m,h,p),m=this.vertex3.load(l,f,m,h,p),m},transformCoordinatesLocal:function(l,f,m,h){return this.vertex1.transformCoordinatesLocal(l,f,m,h),this.vertex2.transformCoordinatesLocal(l,f,m,h),this.vertex3.transformCoordinatesLocal(l,f,m,h),this},updateBounds:function(){var l=this.vertex1,f=this.vertex2,m=this.vertex3,h=this.bounds;return h.x=Math.min(l.vx,f.vx,m.vx),h.y=Math.min(l.vy,f.vy,m.vy),h.width=Math.max(l.vx,f.vx,m.vx)-h.x,h.height=Math.max(l.vy,f.vy,m.vy)-h.y,this},isInView:function(l,f,m,h,p,y,x,T,C,E,A){this.update(h,p,y,x,T,C,E,A);var w=this.vertex1,b=this.vertex2,I=this.vertex3;if(w.ta<=0&&b.ta<=0&&I.ta<=0||f&&!this.isCounterClockwise(m))return!1;var R=this.bounds;R.x=Math.min(w.tx,b.tx,I.tx),R.y=Math.min(w.ty,b.ty,I.ty),R.width=Math.max(w.tx,b.tx,I.tx)-R.x,R.height=Math.max(w.ty,b.ty,I.ty)-R.y;var N=l.x+l.width,F=l.y+l.height;return R.width<=0||R.height<=0||l.width<=0||l.height<=0?!1:!(R.right<l.x||R.bottom<l.y||R.x>N||R.y>F)},scrollUV:function(l,f){return this.vertex1.scrollUV(l,f),this.vertex2.scrollUV(l,f),this.vertex3.scrollUV(l,f),this},scaleUV:function(l,f){return this.vertex1.scaleUV(l,f),this.vertex2.scaleUV(l,f),this.vertex3.scaleUV(l,f),this},setColor:function(l){return this.vertex1.color=l,this.vertex2.color=l,this.vertex3.color=l,this},update:function(l,f,m,h,p,y,x,T){return this.vertex1.update(f,m,h,p,y,x,T,l),this.vertex2.update(f,m,h,p,y,x,T,l),this.vertex3.update(f,m,h,p,y,x,T,l),this},translate:function(l,f){f===void 0&&(f=0);var m=this.vertex1,h=this.vertex2,p=this.vertex3;return m.x+=l,m.y+=f,h.x+=l,h.y+=f,p.x+=l,p.y+=f,this},x:{get:function(){return this.getInCenter().x},set:function(l){var f=this.getInCenter();this.translate(l-f.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(l){var f=this.getInCenter();this.translate(0,l-f.y)}},alpha:{get:function(){var l=this.vertex1,f=this.vertex2,m=this.vertex3;return(l.alpha+f.alpha+m.alpha)/3},set:function(l){this.vertex1.alpha=l,this.vertex2.alpha=l,this.vertex3.alpha=l}},depth:{get:function(){var l=this.vertex1,f=this.vertex2,m=this.vertex3;return(l.vz+f.vz+m.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});i.exports=c},99425:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18693),v=e(72632),u=e(16650),o=e(70015),c=e(85769),l=new o,f=new o,m=new u,h=function(p){var y=v(p,"mesh"),x=v(p,"texture",null),T=v(p,"frame"),C=v(p,"width",1),E=v(p,"height",C),A=v(p,"widthSegments",1),w=v(p,"heightSegments",A),b=v(p,"x",0),I=v(p,"y",0),R=v(p,"z",0),N=v(p,"rotateX",0),F=v(p,"rotateY",0),P=v(p,"rotateZ",0),O=v(p,"zIsUp",!0),M=v(p,"isOrtho",y?y.dirtyCache[11]:!1),L=v(p,"colors",[16777215]),k=v(p,"alphas",[1]),V=v(p,"tile",!1),W=v(p,"flipY",!1),K=v(p,"width",null),B={faces:[],verts:[]};l.set(b,I,R),f.set(N,F,P),m.fromRotationXYTranslation(f,l,O);var G;if(!x&&y)x=y.texture,T||(G=y.frame);else if(y&&typeof x=="string")x=y.scene.sys.textures.get(x);else if(!x)return B;G||(G=x.get(T)),!K&&M&&x&&y&&(C=G.width/y.height,E=G.height/y.height);var D=C/2,$=E/2,z=Math.floor(A),H=Math.floor(w),Y=z+1,Z=H+1,Q=C/z,tt=E/H,et=[],lt=[],ut,ct,ht=0,gt=1,yt=0,Et=1;G&&(ht=G.u0,gt=G.u1,W?(yt=G.v1,Et=G.v0):(yt=G.v0,Et=G.v1));var bt=gt-ht,pt=Et-yt;for(ct=0;ct<Z;ct++){var wt=ct*tt-$;for(ut=0;ut<Y;ut++){var Tt=ut*Q-D;lt.push(Tt,-wt);var Gt=ht+bt*(ut/z),Bt=yt+pt*(ct/H);et.push(Gt,Bt)}}Array.isArray(L)||(L=[L]),Array.isArray(k)||(k=[k]);var Xt=0,te=0;for(ct=0;ct<H;ct++)for(ut=0;ut<z;ut++){var Kt=(ut+Y*ct)*2,Wt=(ut+Y*(ct+1))*2,oe=(ut+1+Y*(ct+1))*2,Le=(ut+1+Y*ct)*2,ye=L[te],Ye=k[Xt],An=new c(lt[Kt],lt[Kt+1],0,et[Kt],et[Kt+1],ye,Ye).transformMat4(m),Yn=new c(lt[Wt],lt[Wt+1],0,et[Wt],et[Wt+1],ye,Ye).transformMat4(m),_i=new c(lt[Le],lt[Le+1],0,et[Le],et[Le+1],ye,Ye).transformMat4(m),tr=new c(lt[Wt],lt[Wt+1],0,et[Wt],et[Wt+1],ye,Ye).transformMat4(m),er=new c(lt[oe],lt[oe+1],0,et[oe],et[oe+1],ye,Ye).transformMat4(m),nr=new c(lt[Le],lt[Le+1],0,et[Le],et[Le+1],ye,Ye).transformMat4(m);V&&(An.setUVs(ht,Et),Yn.setUVs(ht,yt),_i.setUVs(gt,Et),tr.setUVs(ht,yt),er.setUVs(gt,yt),nr.setUVs(gt,Et)),te++,te===L.length&&(te=0),Xt++,Xt===k.length&&(Xt=0),B.verts.push(An,Yn,_i,tr,er,nr),B.faces.push(new a(An,Yn,_i),new a(tr,er,nr))}return y&&(y.faces=y.faces.concat(B.faces),y.vertices=y.vertices.concat(B.verts)),B};i.exports=h},53267:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18693),v=e(16650),u=e(70015),o=e(85769),c=new u,l=new u,f=new v,m=function(h,p,y,x,T,C,E,A,w,b){y===void 0&&(y=1),x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=0),E===void 0&&(E=0),A===void 0&&(A=0),w===void 0&&(w=0),b===void 0&&(b=!0);var I={faces:[],verts:[]},R=h.materials;c.set(x,T,C),l.set(E,A,w),f.fromRotationXYTranslation(l,c,b);for(var N=0;N<h.models.length;N++)for(var F=h.models[N],P=F.vertices,O=F.textureCoords,M=F.faces,L=0;L<M.length;L++){var k=M[L],V=k.vertices[0],W=k.vertices[1],K=k.vertices[2],B=P[V.vertexIndex],G=P[W.vertexIndex],D=P[K.vertexIndex],$=V.textureCoordsIndex,z=W.textureCoordsIndex,H=K.textureCoordsIndex,Y=$===-1?{u:0,v:1}:O[$],Z=z===-1?{u:0,v:0}:O[z],Q=H===-1?{u:1,v:1}:O[H],tt=16777215;k.material!==""&&R[k.material]&&(tt=R[k.material]);var et=new o(B.x*y,B.y*y,B.z*y,Y.u,Y.v,tt).transformMat4(f),lt=new o(G.x*y,G.y*y,G.z*y,Z.u,Z.v,tt).transformMat4(f),ut=new o(D.x*y,D.y*y,D.z*y,Q.u,Q.v,tt).transformMat4(f);I.verts.push(et,lt,ut),I.faces.push(new a(et,lt,ut))}return p&&(p.faces=p.faces.concat(I.faces),p.vertices=p.vertices.concat(I.verts)),I};i.exports=m},67623:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(18693),v=e(85769),u=function(o,c,l,f,m,h,p,y){if(f===void 0&&(f=!1),h===void 0&&(h=16777215),p===void 0&&(p=1),y===void 0&&(y=!1),o.length!==c.length&&!f){console.warn("GenerateVerts: vertices and uvs count not equal");return}var x={faces:[],vertices:[]},T,C,E,A,w,b,I,R,N,F,P,O=f?3:2,M=Array.isArray(h),L=Array.isArray(p);if(Array.isArray(l)&&l.length>0)for(T=0;T<l.length;T++){var k=l[T],V=l[T]*2,W=l[T]*O;C=o[W],E=o[W+1],A=f?o[W+2]:0,w=c[V],b=c[V+1],y&&(b=1-b),I=M?h[k]:h,R=L?p[k]:p,N=0,F=0,P=0,m&&(N=m[W],F=m[W+1],P=f?m[W+2]:0),x.vertices.push(new v(C,E,A,w,b,I,R,N,F,P))}else{var K=0,B=0;for(T=0;T<o.length;T+=O)C=o[T],E=o[T+1],A=f?o[T+2]:0,w=c[K],b=c[K+1],I=M?h[B]:h,R=L?p[B]:p,N=0,F=0,P=0,m&&(N=m[T],F=m[T+1],P=f?m[T+2]:0),x.vertices.push(new v(C,E,A,w,b,I,R,N,F,P)),K+=2,B++}for(T=0;T<x.vertices.length;T+=3){var G=x.vertices[T],D=x.vertices[T+1],$=x.vertices[T+2];x.faces.push(new a(G,D,$))}return x};i.exports=u},27291:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=!0,e="untitled",a="",v="";function u(C){var E=C.indexOf("#");return E>-1?C.substring(0,E):C}function o(C){return C.models.length===0&&C.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),a="",C.models[C.models.length-1]}function c(C,E){var A=C.length>=2?C[1]:e;E.models.push({faces:[],name:A,textureCoords:[],vertexNormals:[],vertices:[]}),a=""}function l(C){C.length===2&&(a=C[1])}function f(C,E){var A=C.length,w=A>=2?parseFloat(C[1]):0,b=A>=3?parseFloat(C[2]):0,I=A>=4?parseFloat(C[3]):0;o(E).vertices.push({x:w,y:b,z:I})}function m(C,E){var A=C.length,w=A>=2?parseFloat(C[1]):0,b=A>=3?parseFloat(C[2]):0,I=A>=4?parseFloat(C[3]):0;isNaN(w)&&(w=0),isNaN(b)&&(b=0),isNaN(I)&&(I=0),g&&(b=1-b),o(E).textureCoords.push({u:w,v:b,w:I})}function h(C,E){var A=C.length,w=A>=2?parseFloat(C[1]):0,b=A>=3?parseFloat(C[2]):0,I=A>=4?parseFloat(C[3]):0;o(E).vertexNormals.push({x:w,y:b,z:I})}function p(C,E){var A=C.length-1;if(!(A<3)){for(var w={group:a,material:v,vertices:[]},b=0;b<A;b++){var I=C[b+1],R=I.split("/"),N=R.length;if(!(N<1||N>3)){var F=0,P=0,O=0;F=parseInt(R[0],10),N>1&&R[1]!==""&&(P=parseInt(R[1],10)),N>2&&(O=parseInt(R[2],10)),F!==0&&(F<0&&(F=o(E).vertices.length+1+F),P-=1,F-=1,O-=1,w.vertices.push({textureCoordsIndex:P,vertexIndex:F,vertexNormalIndex:O}))}}o(E).faces.push(w)}}function y(C,E){C.length>=2&&E.materialLibraries.push(C[1])}function x(C){C.length>=2&&(v=C[1])}var T=function(C,E){E===void 0&&(E=!0),g=E;var A={materials:{},materialLibraries:[],models:[]};a="",v="";for(var w=C.split(`
`),b=0;b<w.length;b++){var I=u(w[b]),R=I.replace(/\s\s+/g," ").trim().split(" ");switch(R[0].toLowerCase()){case"o":c(R,A);break;case"g":l(R);break;case"v":f(R,A);break;case"vt":m(R,A);break;case"vn":h(R,A);break;case"f":p(R,A);break;case"mtllib":y(R,A);break;case"usemtl":x(R);break}}return A};i.exports=T},76799:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22946),v=function(u){for(var o={},c=u.split(`
`),l="",f=0;f<c.length;f++){var m=c[f].trim();if(!(m.indexOf("#")===0||m==="")){var h=m.replace(/\s\s+/g," ").trim().split(" ");switch(h[0].toLowerCase()){case"newmtl":{l=h[1];break}case"kd":{var p=Math.floor(h[1]*255),y=h.length>=2?Math.floor(h[2]*255):p,x=h.length>=3?Math.floor(h[3]*255):p;o[l]=a(p,y,x);break}}}}return o};i.exports=v},15313:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o,c;if(v===void 0&&u===void 0){var l=e.getInCenter();o=l.x,c=l.y}var f=Math.cos(a),m=Math.sin(a),h=e.vertex1,p=e.vertex2,y=e.vertex3,x=h.x-o,T=h.y-c;h.set(x*f-T*m+o,x*m+T*f+c),x=p.x-o,T=p.y-c,p.set(x*f-T*m+o,x*m+T*f+c),x=y.x-o,T=y.y-c,y.set(x*f-T*m+o,x*m+T*f+c)};i.exports=g},85769:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(75512),u=e(70015),o=new a({Extends:u,initialize:function(l,f,m,h,p,y,x,T,C,E){y===void 0&&(y=16777215),x===void 0&&(x=1),T===void 0&&(T=0),C===void 0&&(C=0),E===void 0&&(E=0),u.call(this,l,f,m),this.vx=0,this.vy=0,this.vz=0,this.nx=T,this.ny=C,this.nz=E,this.u=h,this.v=p,this.color=y,this.alpha=x,this.tx=0,this.ty=0,this.ta=0,this.tu=h,this.tv=p},setUVs:function(c,l){return this.u=c,this.v=l,this.tu=c,this.tv=l,this},scrollUV:function(c,l){return this.tu+=c,this.tv+=l,this},scaleUV:function(c,l){return this.tu=this.u*c,this.tv=this.v*l,this},transformCoordinatesLocal:function(c,l,f,m){var h=this.x,p=this.y,y=this.z,x=c.val,T=h*x[0]+p*x[4]+y*x[8]+x[12],C=h*x[1]+p*x[5]+y*x[9]+x[13],E=h*x[2]+p*x[6]+y*x[10]+x[14],A=h*x[3]+p*x[7]+y*x[11]+x[15];this.vx=T/A*l,this.vy=-(C/A)*f,m<=0?this.vz=E/A:this.vz=-(E/A)},resize:function(c,l,f,m,h,p){return this.x=c,this.y=l,this.vx=this.x*f,this.vy=-this.y*m,this.vz=0,h<.5?this.vx+=f*(.5-h):h>.5&&(this.vx-=f*(h-.5)),p<.5?this.vy+=m*(.5-p):p>.5&&(this.vy-=m*(p-.5)),this},update:function(c,l,f,m,h,p,y,x){var T=this.vx*c+this.vy*f+h,C=this.vx*l+this.vy*m+p;return y&&(T=Math.round(T),C=Math.round(C)),this.tx=T,this.ty=C,this.ta=this.alpha*x,this},load:function(c,l,f,m,h){return c[++f]=this.tx,c[++f]=this.ty,c[++f]=this.tu,c[++f]=this.tv,c[++f]=m,c[++f]=h,l[++f]=v.getTintAppendFloatAlpha(this.color,this.ta),f}});i.exports=o},14293:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Face:e(18693),GenerateGridVerts:e(99425),GenerateObjVerts:e(53267),GenerateVerts:e(67623),ParseObj:e(27291),ParseObjMaterial:e(76799),RotateFace:e(15313),Vertex:e(85769)};i.exports=a},77601:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};i.exports=g},38933:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u){return new a(u.x,u.y)};i.exports=v},47103:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a.setTo(e.x,e.y)};i.exports=g},13625:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x===a.x&&e.y===a.y};i.exports=g},12536:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};i.exports=g},54205:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o){if(o===void 0&&(o=new a),!Array.isArray(u))throw new Error("GetCentroid points argument must be an array");var c=u.length;if(c<1)throw new Error("GetCentroid points array must not be empty");if(c===1)o.x=u[0].x,o.y=u[0].y;else{for(var l=0;l<c;l++)o.x+=u[l].x,o.y+=u[l].y;o.x/=c,o.y/=c}return o};i.exports=v},50083:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};i.exports=g},82712:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.x*e.x+e.y*e.y};i.exports=g},20052:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=function(u,o){o===void 0&&(o=new a);for(var c=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,m=Number.POSITIVE_INFINITY,h=0;h<u.length;h++){var p=u[h];p.x>c&&(c=p.x),p.x<l&&(l=p.x),p.y>f&&(f=p.y),p.y<m&&(m=p.y)}return o.x=l,o.y=m,o.width=c-l,o.height=f-m,o};i.exports=v},77154:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o,c,l){return c===void 0&&(c=0),l===void 0&&(l=new a),l.x=u.x+(o.x-u.x)*c,l.y=u.y+(o.y-u.y)*c,l};i.exports=v},42397:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.setTo(e.y,e.x)};i.exports=g},59464:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o){return o===void 0&&(o=new a),o.setTo(-u.x,-u.y)};i.exports=v},79967:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(52394),u=new a({initialize:function(c,l){c===void 0&&(c=0),l===void 0&&(l=c),this.type=v.POINT,this.x=c,this.y=l},setTo:function(o,c){return o===void 0&&(o=0),c===void 0&&(c=o),this.x=o,this.y=c,this}});i.exports=u},53581:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=e(82712),u=function(o,c,l){l===void 0&&(l=new a);var f=o.x*c.x+o.y*c.y,m=f/v(c);return m!==0&&(l.x=m*c.x,l.y=m*c.y),l};i.exports=u},50817:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o,c){c===void 0&&(c=new a);var l=u.x*o.x+u.y*o.y;return l!==0&&(c.x=l*o.x,c.y=l*o.y),c};i.exports=v},40525:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50083),v=function(u,o){if(u.x!==0||u.y!==0){var c=a(u);u.x/=c,u.y/=c}return u.x*=o,u.y*=o,u};i.exports=v},63472:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967);a.Ceil=e(77601),a.Clone=e(38933),a.CopyFrom=e(47103),a.Equals=e(13625),a.Floor=e(12536),a.GetCentroid=e(54205),a.GetMagnitude=e(50083),a.GetMagnitudeSq=e(82712),a.GetRectangleFromPoints=e(20052),a.Interpolate=e(77154),a.Invert=e(42397),a.Negative=e(59464),a.Project=e(53581),a.ProjectUnit=e(50817),a.SetMagnitude=e(40525),i.exports=a},19631:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8580),v=function(u){return new a(u.points)};i.exports=v},45604:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){for(var u=!1,o=-1,c=e.points.length-1;++o<e.points.length;c=o){var l=e.points[o].x,f=e.points[o].y,m=e.points[c].x,h=e.points[c].y;(f<=v&&v<h||h<=v&&v<f)&&a<(m-l)*(v-f)/(h-f)+l&&(u=!u)}return u};i.exports=g},87289:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45604),v=function(u,o){return a(u,o.x,o.y)};i.exports=v},11117:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(B,G,D){D=D||2;var $=G&&G.length,z=$?G[0]*D:B.length,H=e(B,0,z,D,!0),Y=[];if(!H||H.next===H.prev)return Y;var Z,Q,tt,et,lt,ut,ct;if($&&(H=f(B,G,H,D)),B.length>80*D){Z=tt=B[0],Q=et=B[1];for(var ht=D;ht<z;ht+=D)lt=B[ht],ut=B[ht+1],lt<Z&&(Z=lt),ut<Q&&(Q=ut),lt>tt&&(tt=lt),ut>et&&(et=ut);ct=Math.max(tt-Z,et-Q),ct=ct!==0?32767/ct:0}return v(H,Y,D,Z,Q,ct,0),Y}function e(B,G,D,$,z){var H,Y;if(z===K(B,G,D,$)>0)for(H=G;H<D;H+=$)Y=k(H,B[H],B[H+1],Y);else for(H=D-$;H>=G;H-=$)Y=k(H,B[H],B[H+1],Y);return Y&&I(Y,Y.next)&&(V(Y),Y=Y.next),Y}function a(B,G){if(!B)return B;G||(G=B);var D=B,$;do if($=!1,!D.steiner&&(I(D,D.next)||b(D.prev,D,D.next)===0)){if(V(D),D=G=D.prev,D===D.next)break;$=!0}else D=D.next;while($||D!==G);return G}function v(B,G,D,$,z,H,Y){if(B){!Y&&H&&x(B,$,z,H);for(var Z=B,Q,tt;B.prev!==B.next;){if(Q=B.prev,tt=B.next,H?o(B,$,z,H):u(B)){G.push(Q.i/D|0),G.push(B.i/D|0),G.push(tt.i/D|0),V(B),B=tt.next,Z=tt.next;continue}if(B=tt,B===Z){Y?Y===1?(B=c(a(B),G,D),v(B,G,D,$,z,H,2)):Y===2&&l(B,G,D,$,z,H):v(a(B),G,D,$,z,H,1);break}}}}function u(B){var G=B.prev,D=B,$=B.next;if(b(G,D,$)>=0)return!1;for(var z=G.x,H=D.x,Y=$.x,Z=G.y,Q=D.y,tt=$.y,et=z<H?z<Y?z:Y:H<Y?H:Y,lt=Z<Q?Z<tt?Z:tt:Q<tt?Q:tt,ut=z>H?z>Y?z:Y:H>Y?H:Y,ct=Z>Q?Z>tt?Z:tt:Q>tt?Q:tt,ht=$.next;ht!==G;){if(ht.x>=et&&ht.x<=ut&&ht.y>=lt&&ht.y<=ct&&A(z,Z,H,Q,Y,tt,ht.x,ht.y)&&b(ht.prev,ht,ht.next)>=0)return!1;ht=ht.next}return!0}function o(B,G,D,$){var z=B.prev,H=B,Y=B.next;if(b(z,H,Y)>=0)return!1;for(var Z=z.x,Q=H.x,tt=Y.x,et=z.y,lt=H.y,ut=Y.y,ct=Z<Q?Z<tt?Z:tt:Q<tt?Q:tt,ht=et<lt?et<ut?et:ut:lt<ut?lt:ut,gt=Z>Q?Z>tt?Z:tt:Q>tt?Q:tt,yt=et>lt?et>ut?et:ut:lt>ut?lt:ut,Et=C(ct,ht,G,D,$),bt=C(gt,yt,G,D,$),pt=B.prevZ,wt=B.nextZ;pt&&pt.z>=Et&&wt&&wt.z<=bt;){if(pt.x>=ct&&pt.x<=gt&&pt.y>=ht&&pt.y<=yt&&pt!==z&&pt!==Y&&A(Z,et,Q,lt,tt,ut,pt.x,pt.y)&&b(pt.prev,pt,pt.next)>=0||(pt=pt.prevZ,wt.x>=ct&&wt.x<=gt&&wt.y>=ht&&wt.y<=yt&&wt!==z&&wt!==Y&&A(Z,et,Q,lt,tt,ut,wt.x,wt.y)&&b(wt.prev,wt,wt.next)>=0))return!1;wt=wt.nextZ}for(;pt&&pt.z>=Et;){if(pt.x>=ct&&pt.x<=gt&&pt.y>=ht&&pt.y<=yt&&pt!==z&&pt!==Y&&A(Z,et,Q,lt,tt,ut,pt.x,pt.y)&&b(pt.prev,pt,pt.next)>=0)return!1;pt=pt.prevZ}for(;wt&&wt.z<=bt;){if(wt.x>=ct&&wt.x<=gt&&wt.y>=ht&&wt.y<=yt&&wt!==z&&wt!==Y&&A(Z,et,Q,lt,tt,ut,wt.x,wt.y)&&b(wt.prev,wt,wt.next)>=0)return!1;wt=wt.nextZ}return!0}function c(B,G,D){var $=B;do{var z=$.prev,H=$.next.next;!I(z,H)&&R(z,$,$.next,H)&&O(z,H)&&O(H,z)&&(G.push(z.i/D|0),G.push($.i/D|0),G.push(H.i/D|0),V($),V($.next),$=B=H),$=$.next}while($!==B);return a($)}function l(B,G,D,$,z,H){var Y=B;do{for(var Z=Y.next.next;Z!==Y.prev;){if(Y.i!==Z.i&&w(Y,Z)){var Q=L(Y,Z);Y=a(Y,Y.next),Q=a(Q,Q.next),v(Y,G,D,$,z,H,0),v(Q,G,D,$,z,H,0);return}Z=Z.next}Y=Y.next}while(Y!==B)}function f(B,G,D,$){var z=[],H,Y,Z,Q,tt;for(H=0,Y=G.length;H<Y;H++)Z=G[H]*$,Q=H<Y-1?G[H+1]*$:B.length,tt=e(B,Z,Q,$,!1),tt===tt.next&&(tt.steiner=!0),z.push(E(tt));for(z.sort(m),H=0;H<z.length;H++)D=h(z[H],D);return D}function m(B,G){return B.x-G.x}function h(B,G){var D=p(B,G);if(!D)return G;var $=L(D,B);return a($,$.next),a(D,D.next)}function p(B,G){var D=G,$=B.x,z=B.y,H=-1/0,Y;do{if(z<=D.y&&z>=D.next.y&&D.next.y!==D.y){var Z=D.x+(z-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(Z<=$&&Z>H&&(H=Z,Y=D.x<D.next.x?D:D.next,Z===$))return Y}D=D.next}while(D!==G);if(!Y)return null;var Q=Y,tt=Y.x,et=Y.y,lt=1/0,ut;D=Y;do $>=D.x&&D.x>=tt&&$!==D.x&&A(z<et?$:H,z,tt,et,z<et?H:$,z,D.x,D.y)&&(ut=Math.abs(z-D.y)/($-D.x),O(D,B)&&(ut<lt||ut===lt&&(D.x>Y.x||D.x===Y.x&&y(Y,D)))&&(Y=D,lt=ut)),D=D.next;while(D!==Q);return Y}function y(B,G){return b(B.prev,B,G.prev)<0&&b(G.next,B,B.next)<0}function x(B,G,D,$){var z=B;do z.z===0&&(z.z=C(z.x,z.y,G,D,$)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==B);z.prevZ.nextZ=null,z.prevZ=null,T(z)}function T(B){var G,D,$,z,H,Y,Z,Q,tt=1;do{for(D=B,B=null,H=null,Y=0;D;){for(Y++,$=D,Z=0,G=0;G<tt&&(Z++,$=$.nextZ,!!$);G++);for(Q=tt;Z>0||Q>0&&$;)Z!==0&&(Q===0||!$||D.z<=$.z)?(z=D,D=D.nextZ,Z--):(z=$,$=$.nextZ,Q--),H?H.nextZ=z:B=z,z.prevZ=H,H=z;D=$}H.nextZ=null,tt*=2}while(Y>1);return B}function C(B,G,D,$,z){return B=(B-D)*z|0,G=(G-$)*z|0,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,B|G<<1}function E(B){var G=B,D=B;do(G.x<D.x||G.x===D.x&&G.y<D.y)&&(D=G),G=G.next;while(G!==B);return D}function A(B,G,D,$,z,H,Y,Z){return(z-Y)*(G-Z)>=(B-Y)*(H-Z)&&(B-Y)*($-Z)>=(D-Y)*(G-Z)&&(D-Y)*(H-Z)>=(z-Y)*($-Z)}function w(B,G){return B.next.i!==G.i&&B.prev.i!==G.i&&!P(B,G)&&(O(B,G)&&O(G,B)&&M(B,G)&&(b(B.prev,B,G.prev)||b(B,G.prev,G))||I(B,G)&&b(B.prev,B,B.next)>0&&b(G.prev,G,G.next)>0)}function b(B,G,D){return(G.y-B.y)*(D.x-G.x)-(G.x-B.x)*(D.y-G.y)}function I(B,G){return B.x===G.x&&B.y===G.y}function R(B,G,D,$){var z=F(b(B,G,D)),H=F(b(B,G,$)),Y=F(b(D,$,B)),Z=F(b(D,$,G));return!!(z!==H&&Y!==Z||z===0&&N(B,D,G)||H===0&&N(B,$,G)||Y===0&&N(D,B,$)||Z===0&&N(D,G,$))}function N(B,G,D){return G.x<=Math.max(B.x,D.x)&&G.x>=Math.min(B.x,D.x)&&G.y<=Math.max(B.y,D.y)&&G.y>=Math.min(B.y,D.y)}function F(B){return B>0?1:B<0?-1:0}function P(B,G){var D=B;do{if(D.i!==B.i&&D.next.i!==B.i&&D.i!==G.i&&D.next.i!==G.i&&R(D,D.next,B,G))return!0;D=D.next}while(D!==B);return!1}function O(B,G){return b(B.prev,B,B.next)<0?b(B,G,B.next)>=0&&b(B,B.prev,G)>=0:b(B,G,B.prev)<0||b(B,B.next,G)<0}function M(B,G){var D=B,$=!1,z=(B.x+G.x)/2,H=(B.y+G.y)/2;do D.y>H!=D.next.y>H&&D.next.y!==D.y&&z<(D.next.x-D.x)*(H-D.y)/(D.next.y-D.y)+D.x&&($=!$),D=D.next;while(D!==B);return $}function L(B,G){var D=new W(B.i,B.x,B.y),$=new W(G.i,G.x,G.y),z=B.next,H=G.prev;return B.next=G,G.prev=B,D.next=z,z.prev=D,$.next=D,D.prev=$,H.next=$,$.prev=H,$}function k(B,G,D,$){var z=new W(B,G,D);return $?(z.next=$.next,z.prev=$,$.next.prev=z,$.next=z):(z.prev=z,z.next=z),z}function V(B){B.next.prev=B.prev,B.prev.next=B.next,B.prevZ&&(B.prevZ.nextZ=B.nextZ),B.nextZ&&(B.nextZ.prevZ=B.prevZ)}function W(B,G,D){this.i=B,this.x=G,this.y=D,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}g.deviation=function(B,G,D,$){var z=G&&G.length,H=z?G[0]*D:B.length,Y=Math.abs(K(B,0,H,D));if(z)for(var Z=0,Q=G.length;Z<Q;Z++){var tt=G[Z]*D,et=Z<Q-1?G[Z+1]*D:B.length;Y-=Math.abs(K(B,tt,et,D))}var lt=0;for(Z=0;Z<$.length;Z+=3){var ut=$[Z]*D,ct=$[Z+1]*D,ht=$[Z+2]*D;lt+=Math.abs((B[ut]-B[ht])*(B[ct+1]-B[ut+1])-(B[ut]-B[ct])*(B[ht+1]-B[ut+1]))}return Y===0&&lt===0?0:Math.abs((lt-Y)/Y)};function K(B,G,D,$){for(var z=0,H=G,Y=D-$;H<D;H+=$)z+=(B[Y]-B[H])*(B[H+1]+B[Y+1]),Y=H;return z}g.flatten=function(B){for(var G=B[0][0].length,D={vertices:[],holes:[],dimensions:G},$=0,z=0;z<B.length;z++){for(var H=0;H<B[z].length;H++)for(var Y=0;Y<G;Y++)D.vertices.push(B[z][H][Y]);z>0&&($+=B[z-1].length,D.holes.push($))}return D},i.exports=g},14045:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=function(u,o){o===void 0&&(o=new a);for(var c=1/0,l=1/0,f=-c,m=-l,h,p=0;p<u.points.length;p++)h=u.points[p],c=Math.min(c,h.x),l=Math.min(l,h.y),f=Math.max(f,h.x),m=Math.max(m,h.y);return o.x=c,o.y=l,o.width=f-c,o.height=m-l,o};i.exports=v},98286:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a===void 0&&(a=[]);for(var v=0;v<e.points.length;v++)a.push(e.points[v].x),a.push(e.points[v].y);return a};i.exports=g},89294:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16028),v=e(88829),u=e(5159),o=function(c,l,f,m){m===void 0&&(m=[]);var h=c.points,p=u(c);!l&&f>0&&(l=p/f);for(var y=0;y<l;y++)for(var x=p*(y/l),T=0,C=0;C<h.length;C++){var E=h[C],A=h[(C+1)%h.length],w=new v(E.x,E.y,A.x,A.y),b=a(w);if(x<T||x>T+b){T+=b;continue}var I=w.getPoint((x-T)/b);m.push(I);break}return m};i.exports=o},5159:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16028),v=e(88829),u=function(o){for(var c=o.points,l=0,f=0;f<c.length;f++){var m=c[f],h=c[(f+1)%c.length],p=new v(m.x,m.y,h.x,h.y);l+=a(p)}return l};i.exports=u},8580:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(45604),u=e(89294),o=e(52394),c=new a({initialize:function(f){this.type=o.POLYGON,this.area=0,this.points=[],f&&this.setTo(f)},contains:function(l,f){return v(this,l,f)},setTo:function(l){if(this.area=0,this.points=[],typeof l=="string"&&(l=l.split(" ")),!Array.isArray(l))return this;for(var f,m=Number.MAX_VALUE,h=0;h<l.length;h++)f={x:0,y:0},typeof l[h]=="number"||typeof l[h]=="string"?(f.x=parseFloat(l[h]),f.y=parseFloat(l[h+1]),h++):Array.isArray(l[h])?(f.x=l[h][0],f.y=l[h][1]):(f.x=l[h].x,f.y=l[h].y),this.points.push(f),f.y<m&&(m=f.y);return this.calculateArea(m),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var l=0,f,m,h=0;h<this.points.length-1;h++)f=this.points[h],m=this.points[h+1],l+=(m.x-f.x)*(f.y+m.y);return f=this.points[0],m=this.points[this.points.length-1],l+=(f.x-m.x)*(m.y+f.y),this.area=-l*.5,this.area},getPoints:function(l,f,m){return u(this,l,f,m)}});i.exports=c},32244:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.points.reverse(),e};i.exports=g},95874:i=>{function g(c,l){var f=c.x-l.x,m=c.y-l.y;return f*f+m*m}function e(c,l,f){var m=l.x,h=l.y,p=f.x-m,y=f.y-h;if(p!==0||y!==0){var x=((c.x-m)*p+(c.y-h)*y)/(p*p+y*y);x>1?(m=f.x,h=f.y):x>0&&(m+=p*x,h+=y*x)}return p=c.x-m,y=c.y-h,p*p+y*y}function a(c,l){for(var f=c[0],m=[f],h,p=1,y=c.length;p<y;p++)h=c[p],g(h,f)>l&&(m.push(h),f=h);return f!==h&&m.push(h),m}function v(c,l,f,m,h){for(var p=m,y,x=l+1;x<f;x++){var T=e(c[x],c[l],c[f]);T>p&&(y=x,p=T)}p>m&&(y-l>1&&v(c,l,y,m,h),h.push(c[y]),f-y>1&&v(c,y,f,m,h))}function u(c,l){var f=c.length-1,m=[c[0]];return v(c,0,f,l,m),m.push(c[f]),m}var o=function(c,l,f){l===void 0&&(l=1),f===void 0&&(f=!1);var m=c.points;if(m.length>2){var h=l*l;f||(m=a(m,h)),c.setTo(u(m,h))}return c};i.exports=o},18974:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(a,v){return a[0]=v[0],a[1]=v[1],a},e=function(a){var v,u=[],o=a.points;for(v=0;v<o.length;v++)u.push([o[v].x,o[v].y]);var c=[];for(u.length>0&&c.push(g([0,0],u[0])),v=0;v<u.length-1;v++){var l=u[v],f=u[v+1],m=l[0],h=l[1],p=f[0],y=f[1];c.push([.85*m+.15*p,.85*h+.15*y]),c.push([.15*m+.85*p,.15*h+.85*y])}return u.length>1&&c.push(g([0,0],u[u.length-1])),a.setTo(c)};i.exports=e},23490:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){for(var u=e.points,o=0;o<u.length;o++)u[o].x+=a,u[o].y+=v;return e};i.exports=g},44359:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8580);a.Clone=e(19631),a.Contains=e(45604),a.ContainsPoint=e(87289),a.Earcut=e(11117),a.GetAABB=e(14045),a.GetNumberArray=e(98286),a.GetPoints=e(89294),a.Perimeter=e(5159),a.Reverse=e(32244),a.Simplify=e(95874),a.Smooth=e(18974),a.Translate=e(23490),i.exports=a},1653:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.width*e.height};i.exports=g},33943:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};i.exports=g},58662:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};i.exports=g},79993:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e.x=a-e.width/2,e.y=v-e.height/2,e};i.exports=g},81572:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=function(u){return new a(u.x,u.y,u.width,u.height)};i.exports=v},94287:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e.width<=0||e.height<=0?!1:e.x<=a&&e.x+e.width>=a&&e.y<=v&&e.y+e.height>=v};i.exports=g},28687:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(94287),v=function(u,o){return a(u,o.x,o.y)};i.exports=v},73222:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a.width*a.height>e.width*e.height?!1:a.x>e.x&&a.x<e.right&&a.right>e.x&&a.right<e.right&&a.y>e.y&&a.y<e.bottom&&a.bottom>e.y&&a.bottom<e.bottom};i.exports=g},29538:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a.setTo(e.x,e.y,e.width,e.height)};i.exports=g},87279:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a===void 0&&(a=[]),a.push({x:e.x,y:e.y}),a.push({x:e.right,y:e.y}),a.push({x:e.right,y:e.bottom}),a.push({x:e.x,y:e.bottom}),a};i.exports=g},19989:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x===a.x&&e.y===a.y&&e.width===a.width&&e.height===a.height};i.exports=g},92628:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6700),v=function(u,o){var c=a(u);return c<a(o)?u.setSize(o.height*c,o.height):u.setSize(o.width,o.width/c),u.setPosition(o.centerX-u.width/2,o.centerY-u.height/2)};i.exports=v},85028:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6700),v=function(u,o){var c=a(u);return c>a(o)?u.setSize(o.height*c,o.height):u.setSize(o.width,o.width/c),u.setPosition(o.centerX-u.width/2,o.centerY-u.height/2)};i.exports=v},71356:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};i.exports=g},21687:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};i.exports=g},80222:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=e(83392),u=function(o,c){if(c===void 0&&(c=new a),o.length===0)return c;for(var l=Number.MAX_VALUE,f=Number.MAX_VALUE,m=v.MIN_SAFE_INTEGER,h=v.MIN_SAFE_INTEGER,p,y,x,T=0;T<o.length;T++)p=o[T],Array.isArray(p)?(y=p[0],x=p[1]):(y=p.x,x=p.y),l=Math.min(l,y),f=Math.min(f,x),m=Math.max(m,y),h=Math.max(h,x);return c.x=l,c.y=f,c.width=m-l,c.height=h-f,c};i.exports=u},75785:(i,g,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=function(u,o,c,l,f){return f===void 0&&(f=new a),f.setTo(Math.min(u,c),Math.min(o,l),Math.abs(u-c),Math.abs(o-l))};i.exports=v},6700:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.height===0?NaN:e.width/e.height};i.exports=g},35242:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o){return o===void 0&&(o=new a),o.x=u.centerX,o.y=u.centerY,o};i.exports=v},47698:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85876),v=e(79967),u=function(o,c,l){if(l===void 0&&(l=new v),c<=0||c>=1)return l.x=o.x,l.y=o.y,l;var f=a(o)*c;return c>.5?(f-=o.width+o.height,f<=o.width?(l.x=o.right-f,l.y=o.bottom):(l.x=o.x,l.y=o.bottom-(f-o.width))):f<=o.width?(l.x=o.x+f,l.y=o.y):(l.x=o.right,l.y=o.y+(f-o.width)),l};i.exports=u},54932:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47698),v=e(85876),u=function(o,c,l,f){f===void 0&&(f=[]),!c&&l>0&&(c=v(o)/l);for(var m=0;m<c;m++){var h=m/c;f.push(a(o,h))}return f};i.exports=u},31591:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o){return o===void 0&&(o=new a),o.x=u.width,o.y=u.height,o};i.exports=v},7782:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79993),v=function(u,o,c){var l=u.centerX,f=u.centerY;return u.setSize(u.width+o*2,u.height+c*2),a(u,l,f)};i.exports=v},66217:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=e(90205),u=function(o,c,l){return l===void 0&&(l=new a),v(o,c)?(l.x=Math.max(o.x,c.x),l.y=Math.max(o.y,c.y),l.width=Math.min(o.right,c.right)-l.x,l.height=Math.min(o.bottom,c.bottom)-l.y):l.setEmpty(),l};i.exports=u},40053:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(85876),v=e(79967),u=function(o,c,l,f){if(f===void 0&&(f=[]),!c&&!l)return f;c?l=Math.round(a(o)/c):c=a(o)/l;for(var m=o.x,h=o.y,p=0,y=0;y<l;y++)switch(f.push(new v(m,h)),p){case 0:m+=c,m>=o.right&&(p=1,h+=m-o.right,m=o.right);break;case 1:h+=c,h>=o.bottom&&(p=2,m-=h-o.bottom,h=o.bottom);break;case 2:m-=c,m<=o.left&&(p=3,h-=o.left-m,m=o.left);break;case 3:h-=c,h<=o.top&&(p=0,h=o.top);break}return f};i.exports=u},86673:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){for(var v=e.x,u=e.right,o=e.y,c=e.bottom,l=0;l<a.length;l++)v=Math.min(v,a[l].x),u=Math.max(u,a[l].x),o=Math.min(o,a[l].y),c=Math.max(c,a[l].y);return e.x=v,e.y=o,e.width=u-v,e.height=c-o,e};i.exports=g},14655:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=Math.min(e.x,a.x),u=Math.max(e.right,a.right);e.x=v,e.width=u-v;var o=Math.min(e.y,a.y),c=Math.max(e.bottom,a.bottom);return e.y=o,e.height=c-o,e};i.exports=g},44755:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=Math.min(e.x,a),o=Math.max(e.right,a);e.x=u,e.width=o-u;var c=Math.min(e.y,v),l=Math.max(e.bottom,v);return e.y=c,e.height=l-c,e};i.exports=g},74466:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e.x+=a,e.y+=v,e};i.exports=g},55946:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x+=a.x,e.y+=a.y,e};i.exports=g},97474:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x<a.right&&e.right>a.x&&e.y<a.bottom&&e.bottom>a.y};i.exports=g},85876:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return 2*(e.width+e.height)};i.exports=g},20243:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=e(75606),u=function(o,c,l){l===void 0&&(l=new a),c=v(c);var f=Math.sin(c),m=Math.cos(c),h=m>0?o.width/2:o.width/-2,p=f>0?o.height/2:o.height/-2;return Math.abs(h*f)<Math.abs(p*m)?p=h*f/m:h=p*m/f,l.x=h+o.centerX,l.y=p+o.centerY,l};i.exports=u},30001:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o){return o===void 0&&(o=new a),o.x=u.x+Math.random()*u.width,o.y=u.y+Math.random()*u.height,o};i.exports=v},97691:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(17489),v=e(73222),u=e(79967),o=function(c,l,f){if(f===void 0&&(f=new u),v(c,l))switch(a(0,3)){case 0:f.x=c.x+Math.random()*(l.right-c.x),f.y=c.y+Math.random()*(l.top-c.y);break;case 1:f.x=l.x+Math.random()*(c.right-l.x),f.y=l.bottom+Math.random()*(c.bottom-l.bottom);break;case 2:f.x=c.x+Math.random()*(l.x-c.x),f.y=l.y+Math.random()*(c.bottom-l.y);break;case 3:f.x=l.right+Math.random()*(c.right-l.right),f.y=c.y+Math.random()*(l.bottom-c.y);break}return f};i.exports=o},74118:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(94287),u=e(47698),o=e(54932),c=e(52394),l=e(88829),f=e(30001),m=new a({initialize:function(p,y,x,T){p===void 0&&(p=0),y===void 0&&(y=0),x===void 0&&(x=0),T===void 0&&(T=0),this.type=c.RECTANGLE,this.x=p,this.y=y,this.width=x,this.height=T},contains:function(h,p){return v(this,h,p)},getPoint:function(h,p){return u(this,h,p)},getPoints:function(h,p,y){return o(this,h,p,y)},getRandomPoint:function(h){return f(this,h)},setTo:function(h,p,y,x){return this.x=h,this.y=p,this.width=y,this.height=x,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(h,p){return p===void 0&&(p=h),this.x=h,this.y=p,this},setSize:function(h,p){return p===void 0&&(p=h),this.width=h,this.height=p,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(h){return h===void 0&&(h=new l),h.setTo(this.x,this.y,this.right,this.y),h},getLineB:function(h){return h===void 0&&(h=new l),h.setTo(this.right,this.y,this.right,this.bottom),h},getLineC:function(h){return h===void 0&&(h=new l),h.setTo(this.right,this.bottom,this.x,this.bottom),h},getLineD:function(h){return h===void 0&&(h=new l),h.setTo(this.x,this.bottom,this.x,this.y),h},left:{get:function(){return this.x},set:function(h){h>=this.right?this.width=0:this.width=this.right-h,this.x=h}},right:{get:function(){return this.x+this.width},set:function(h){h<=this.x?this.width=0:this.width=h-this.x}},top:{get:function(){return this.y},set:function(h){h>=this.bottom?this.height=0:this.height=this.bottom-h,this.y=h}},bottom:{get:function(){return this.y+this.height},set:function(h){h<=this.y?this.height=0:this.height=h-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(h){this.x=h-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(h){this.y=h-this.height/2}}});i.exports=m},51828:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.width===a.width&&e.height===a.height};i.exports=g},5691:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return v===void 0&&(v=a),e.width*=a,e.height*=v,e};i.exports=g},58795:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=function(u,o,c){c===void 0&&(c=new a);var l=Math.min(u.x,o.x),f=Math.min(u.y,o.y),m=Math.max(u.right,o.right)-l,h=Math.max(u.bottom,o.bottom)-f;return c.setTo(l,f,m,h)};i.exports=v},66658:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118);a.Area=e(1653),a.Ceil=e(33943),a.CeilAll=e(58662),a.CenterOn=e(79993),a.Clone=e(81572),a.Contains=e(94287),a.ContainsPoint=e(28687),a.ContainsRect=e(73222),a.CopyFrom=e(29538),a.Decompose=e(87279),a.Equals=e(19989),a.FitInside=e(92628),a.FitOutside=e(85028),a.Floor=e(71356),a.FloorAll=e(21687),a.FromPoints=e(80222),a.FromXY=e(75785),a.GetAspectRatio=e(6700),a.GetCenter=e(35242),a.GetPoint=e(47698),a.GetPoints=e(54932),a.GetSize=e(31591),a.Inflate=e(7782),a.Intersection=e(66217),a.MarchingAnts=e(40053),a.MergePoints=e(86673),a.MergeRect=e(14655),a.MergeXY=e(44755),a.Offset=e(74466),a.OffsetPoint=e(55946),a.Overlaps=e(97474),a.Perimeter=e(85876),a.PerimeterPoint=e(20243),a.Random=e(30001),a.RandomOutside=e(97691),a.SameDimensions=e(51828),a.Scale=e(5691),a.Union=e(58795),i.exports=a},19108:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a=e.x1,v=e.y1,u=e.x2,o=e.y2,c=e.x3,l=e.y3;return Math.abs(((c-a)*(o-v)-(u-a)*(l-v))/2)};i.exports=g},41199:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66349),v=function(u,o,c){var l=c*(Math.sqrt(3)/2),f=u,m=o,h=u+c/2,p=o+l,y=u-c/2,x=o+l;return new a(f,m,h,p,y,x)};i.exports=v},88730:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(11117),v=e(66349),u=function(o,c,l,f,m){c===void 0&&(c=null),l===void 0&&(l=1),f===void 0&&(f=1),m===void 0&&(m=[]);for(var h=a(o,c),p,y,x,T,C,E,A,w,b,I=0;I<h.length;I+=3)p=h[I],y=h[I+1],x=h[I+2],T=o[p*2]*l,C=o[p*2+1]*f,E=o[y*2]*l,A=o[y*2+1]*f,w=o[x*2]*l,b=o[x*2+1]*f,m.push(new v(T,C,E,A,w,b));return m};i.exports=u},3635:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66349),v=function(u,o,c,l){l===void 0&&(l=c);var f=u,m=o,h=u,p=o-l,y=u+c,x=o;return new a(f,m,h,p,y,x)};i.exports=v},1882:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56595),v=e(9640),u=function(o,c,l,f){f===void 0&&(f=a);var m=f(o),h=c-m.x,p=l-m.y;return v(o,h,p)};i.exports=u},56595:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o){return o===void 0&&(o=new a),o.x=(u.x1+u.x2+u.x3)/3,o.y=(u.y1+u.y2+u.y3)/3,o};i.exports=v},91835:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736);function v(o,c,l,f){return o*f-c*l}var u=function(o,c){c===void 0&&(c=new a);var l=o.x3,f=o.y3,m=o.x1-l,h=o.y1-f,p=o.x2-l,y=o.y2-f,x=2*v(m,h,p,y),T=v(h,m*m+h*h,y,p*p+y*y),C=v(m,m*m+h*h,p,p*p+y*y);return c.x=l-T/x,c.y=f+C/x,c};i.exports=u},97073:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26673),v=function(u,o){o===void 0&&(o=new a);var c=u.x1,l=u.y1,f=u.x2,m=u.y2,h=u.x3,p=u.y3,y=f-c,x=m-l,T=h-c,C=p-l,E=y*(c+f)+x*(l+m),A=T*(c+h)+C*(l+p),w=2*(y*(p-m)-x*(h-f)),b,I;if(Math.abs(w)<1e-6){var R=Math.min(c,f,h),N=Math.min(l,m,p);b=(Math.max(c,f,h)-R)*.5,I=(Math.max(l,m,p)-N)*.5,o.x=R+b,o.y=N+I,o.radius=Math.sqrt(b*b+I*I)}else o.x=(C*E-x*A)/w,o.y=(y*A-T*E)/w,b=o.x-c,I=o.y-l,o.radius=Math.sqrt(b*b+I*I);return o};i.exports=v},75974:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66349),v=function(u){return new a(u.x1,u.y1,u.x2,u.y2,u.x3,u.y3)};i.exports=v},60689:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=e.x3-e.x1,o=e.y3-e.y1,c=e.x2-e.x1,l=e.y2-e.y1,f=a-e.x1,m=v-e.y1,h=u*u+o*o,p=u*c+o*l,y=u*f+o*m,x=c*c+l*l,T=c*f+l*m,C=h*x-p*p,E=C===0?0:1/C,A=(x*y-p*T)*E,w=(h*T-p*y)*E;return A>=0&&w>=0&&A+w<1};i.exports=g},86875:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){v===void 0&&(v=!1),u===void 0&&(u=[]);for(var o=e.x3-e.x1,c=e.y3-e.y1,l=e.x2-e.x1,f=e.y2-e.y1,m=o*o+c*c,h=o*l+c*f,p=l*l+f*f,y=m*p-h*h,x=y===0?0:1/y,T,C,E,A,w,b,I=e.x1,R=e.y1,N=0;N<a.length&&(E=a[N].x-I,A=a[N].y-R,w=o*E+c*A,b=l*E+f*A,T=(p*w-h*b)*x,C=(m*b-h*w)*x,!(T>=0&&C>=0&&T+C<1&&(u.push({x:a[N].x,y:a[N].y}),v)));N++);return u};i.exports=g},51532:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60689),v=function(u,o){return a(u,o.x,o.y)};i.exports=v},42538:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};i.exports=g},18680:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a===void 0&&(a=[]),a.push({x:e.x1,y:e.y1}),a.push({x:e.x2,y:e.y2}),a.push({x:e.x3,y:e.y3}),a};i.exports=g},29977:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.x1===a.x1&&e.y1===a.y1&&e.x2===a.x2&&e.y2===a.y2&&e.x3===a.x3&&e.y3===a.y3};i.exports=g},56088:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=e(16028),u=function(o,c,l){l===void 0&&(l=new a);var f=o.getLineA(),m=o.getLineB(),h=o.getLineC();if(c<=0||c>=1)return l.x=f.x1,l.y=f.y1,l;var p=v(f),y=v(m),x=v(h),T=p+y+x,C=T*c,E=0;return C<p?(E=C/p,l.x=f.x1+(f.x2-f.x1)*E,l.y=f.y1+(f.y2-f.y1)*E):C>p+y?(C-=p+y,E=C/x,l.x=h.x1+(h.x2-h.x1)*E,l.y=h.y1+(h.y2-h.y1)*E):(C-=p,E=C/y,l.x=m.x1+(m.x2-m.x1)*E,l.y=m.y1+(m.y2-m.y1)*E),l};i.exports=u},24402:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16028),v=e(79967),u=function(o,c,l,f){f===void 0&&(f=[]);var m=o.getLineA(),h=o.getLineB(),p=o.getLineC(),y=a(m),x=a(h),T=a(p),C=y+x+T;!c&&l>0&&(c=C/l);for(var E=0;E<c;E++){var A=C*(E/c),w=0,b=new v;A<y?(w=A/y,b.x=m.x1+(m.x2-m.x1)*w,b.y=m.y1+(m.y2-m.y1)*w):A>y+x?(A-=y+x,w=A/T,b.x=p.x1+(p.x2-p.x1)*w,b.y=p.y1+(p.y2-p.y1)*w):(A-=y,w=A/x,b.x=h.x1+(h.x2-h.x1)*w,b.y=h.y1+(h.y2-h.y1)*w),f.push(b)}return f};i.exports=u},83648:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967);function v(o,c,l,f){var m=o-l,h=c-f,p=m*m+h*h;return Math.sqrt(p)}var u=function(o,c){c===void 0&&(c=new a);var l=o.x1,f=o.y1,m=o.x2,h=o.y2,p=o.x3,y=o.y3,x=v(p,y,m,h),T=v(l,f,p,y),C=v(m,h,l,f),E=x+T+C;return c.x=(l*x+m*T+p*C)/E,c.y=(f*x+h*T+y*C)/E,c};i.exports=u},9640:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e.x1+=a,e.y1+=v,e.x2+=a,e.y2+=v,e.x3+=a,e.y3+=v,e};i.exports=g},95290:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16028),v=function(u){var o=u.getLineA(),c=u.getLineB(),l=u.getLineC();return a(o)+a(c)+a(l)};i.exports=v},99761:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(79967),v=function(u,o){o===void 0&&(o=new a);var c=u.x2-u.x1,l=u.y2-u.y1,f=u.x3-u.x1,m=u.y3-u.y1,h=Math.random(),p=Math.random();return h+p>=1&&(h=1-h,p=1-p),o.x=u.x1+(c*h+f*p),o.y=u.y1+(l*h+m*p),o};i.exports=v},21934:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19211),v=e(83648),u=function(o,c){var l=v(o);return a(o,l.x,l.y,c)};i.exports=u},68454:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19211),v=function(u,o,c){return a(u,o.x,o.y,c)};i.exports=v},19211:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=Math.cos(u),c=Math.sin(u),l=e.x1-a,f=e.y1-v;return e.x1=l*o-f*c+a,e.y1=l*c+f*o+v,l=e.x2-a,f=e.y2-v,e.x2=l*o-f*c+a,e.y2=l*c+f*o+v,l=e.x3-a,f=e.y3-v,e.x3=l*o-f*c+a,e.y3=l*c+f*o+v,e};i.exports=g},66349:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(60689),u=e(56088),o=e(24402),c=e(52394),l=e(88829),f=e(99761),m=new a({initialize:function(p,y,x,T,C,E){p===void 0&&(p=0),y===void 0&&(y=0),x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=0),E===void 0&&(E=0),this.type=c.TRIANGLE,this.x1=p,this.y1=y,this.x2=x,this.y2=T,this.x3=C,this.y3=E},contains:function(h,p){return v(this,h,p)},getPoint:function(h,p){return u(this,h,p)},getPoints:function(h,p,y){return o(this,h,p,y)},getRandomPoint:function(h){return f(this,h)},setTo:function(h,p,y,x,T,C){return h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=0),x===void 0&&(x=0),T===void 0&&(T=0),C===void 0&&(C=0),this.x1=h,this.y1=p,this.x2=y,this.y2=x,this.x3=T,this.y3=C,this},getLineA:function(h){return h===void 0&&(h=new l),h.setTo(this.x1,this.y1,this.x2,this.y2),h},getLineB:function(h){return h===void 0&&(h=new l),h.setTo(this.x2,this.y2,this.x3,this.y3),h},getLineC:function(h){return h===void 0&&(h=new l),h.setTo(this.x3,this.y3,this.x1,this.y1),h},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(h){var p=0;this.x1<=this.x2&&this.x1<=this.x3?p=this.x1-h:this.x2<=this.x1&&this.x2<=this.x3?p=this.x2-h:p=this.x3-h,this.x1-=p,this.x2-=p,this.x3-=p}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(h){var p=0;this.x1>=this.x2&&this.x1>=this.x3?p=this.x1-h:this.x2>=this.x1&&this.x2>=this.x3?p=this.x2-h:p=this.x3-h,this.x1-=p,this.x2-=p,this.x3-=p}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(h){var p=0;this.y1<=this.y2&&this.y1<=this.y3?p=this.y1-h:this.y2<=this.y1&&this.y2<=this.y3?p=this.y2-h:p=this.y3-h,this.y1-=p,this.y2-=p,this.y3-=p}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(h){var p=0;this.y1>=this.y2&&this.y1>=this.y3?p=this.y1-h:this.y2>=this.y1&&this.y2>=this.y3?p=this.y2-h:p=this.y3-h,this.y1-=p,this.y2-=p,this.y3-=p}}});i.exports=m},87619:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66349);a.Area=e(19108),a.BuildEquilateral=e(41199),a.BuildFromPolygon=e(88730),a.BuildRight=e(3635),a.CenterOn=e(1882),a.Centroid=e(56595),a.CircumCenter=e(91835),a.CircumCircle=e(97073),a.Clone=e(75974),a.Contains=e(60689),a.ContainsArray=e(86875),a.ContainsPoint=e(51532),a.CopyFrom=e(42538),a.Decompose=e(18680),a.Equals=e(29977),a.GetPoint=e(56088),a.GetPoints=e(24402),a.InCenter=e(83648),a.Perimeter=e(95290),a.Offset=e(9640),a.Random=e(99761),a.Rotate=e(21934),a.RotateAroundPoint=e(68454),a.RotateAroundXY=e(19211),i.exports=a},27395:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:a,hitAreaCallback:v,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};i.exports=g},18104:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return function(v,u,o,c){var l=e.getPixelAlpha(u,o,c.texture.key,c.frame.name);return l&&l>=a}};i.exports=g},69898:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72687),u=e(6659),o=e(33963),c=e(97081),l=e(71064),f=e(7905),m=e(40398),h=e(37579),p=e(69360),y=e(64462),x=new a({initialize:function(C,E){this.game=C,this.scaleManager,this.canvas,this.config=E,this.enabled=!0,this.events=new u,this.isOver=!0,this.defaultCursor="",this.keyboard=E.inputKeyboard?new l(this):null,this.mouse=E.inputMouse?new f(this):null,this.touch=E.inputTouch?new h(this):null,this.pointers=[],this.pointersTotal=E.inputActivePointers,E.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var A=0;A<=this.pointersTotal;A++){var w=new m(this,A);w.smoothFactor=E.inputSmoothFactor,this.pointers.push(w)}this.mousePointer=E.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new p,this._tempMatrix2=new p,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],C.events.once(c.BOOT,this.boot,this)},boot:function(){var T=this.game,C=T.events;this.canvas=T.canvas,this.scaleManager=T.scale,this.events.emit(o.MANAGER_BOOT),C.on(c.PRE_RENDER,this.preRender,this),C.once(c.DESTROY,this.destroy,this)},setCanvasOver:function(T){this.isOver=!0,this.events.emit(o.GAME_OVER,T)},setCanvasOut:function(T){this.isOver=!1,this.events.emit(o.GAME_OUT,T)},preRender:function(){var T=this.game.loop.now,C=this.game.loop.delta,E=this.game.scene.getScenes(!0,!0);this.time=T,this.events.emit(o.MANAGER_UPDATE);for(var A=0;A<E.length;A++){var w=E[A];if(w.sys.input&&w.sys.input.updatePoll(T,C)&&this.globalTopOnly)return}},setDefaultCursor:function(T){this.defaultCursor=T,this.canvas.style.cursor!==T&&(this.canvas.style.cursor=T)},setCursor:function(T){T.cursor&&(this.canvas.style.cursor=T.cursor)},resetCursor:function(T){T.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(T){T===void 0&&(T=1);var C=[];this.pointersTotal+T>10&&(T=10-this.pointersTotal);for(var E=0;E<T;E++){var A=this.pointers.length,w=new m(this,A);w.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(w),this.pointersTotal++,C.push(w)}return C},updateInputPlugins:function(T,C){var E=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var A=0;A<E.length;A++){var w=E[A];if(w.sys.input){var b=w.sys.input.update(T,C);if(b&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(T){for(var C=this.pointers,E=[],A=0;A<T.changedTouches.length;A++)for(var w=T.changedTouches[A],b=1;b<this.pointersTotal;b++){var I=C[b];if(!I.active){I.touchstart(w,T),this.activePointer=I,E.push(I);break}}this.updateInputPlugins(v.TOUCH_START,E)},onTouchMove:function(T){for(var C=this.pointers,E=[],A=0;A<T.changedTouches.length;A++)for(var w=T.changedTouches[A],b=1;b<this.pointersTotal;b++){var I=C[b];if(I.active&&I.identifier===w.identifier){var R=document.elementFromPoint(w.pageX,w.pageY),N=R===this.canvas;!this.isOver&&N?this.setCanvasOver(T):this.isOver&&!N&&this.setCanvasOut(T),this.isOver&&(I.touchmove(w,T),this.activePointer=I,E.push(I));break}}this.updateInputPlugins(v.TOUCH_MOVE,E)},onTouchEnd:function(T){for(var C=this.pointers,E=[],A=0;A<T.changedTouches.length;A++)for(var w=T.changedTouches[A],b=1;b<this.pointersTotal;b++){var I=C[b];if(I.active&&I.identifier===w.identifier){I.touchend(w,T),E.push(I);break}}this.updateInputPlugins(v.TOUCH_END,E)},onTouchCancel:function(T){for(var C=this.pointers,E=[],A=0;A<T.changedTouches.length;A++)for(var w=T.changedTouches[A],b=1;b<this.pointersTotal;b++){var I=C[b];if(I.active&&I.identifier===w.identifier){I.touchcancel(w,T),E.push(I);break}}this.updateInputPlugins(v.TOUCH_CANCEL,E)},onMouseDown:function(T){var C=this.mousePointer;C.down(T),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(v.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(T){var C=this.mousePointer;C.move(T),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(v.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(T){var C=this.mousePointer;C.up(T),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(v.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(T){var C=this.mousePointer;C.wheel(T),this.activePointer=C,this.updateInputPlugins(v.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(T){var C=this.mouse.locked;this.mousePointer.locked=C,this.events.emit(o.POINTERLOCK_CHANGE,T,C)},inputCandidate:function(T,C){var E=T.input;if(!E||!E.enabled||!T.willRender(C))return!1;var A=!0,w=T.parentContainer;if(w)do{if(!w.willRender(C)){A=!1;break}w=w.parentContainer}while(w);return A},hitTest:function(T,C,E,A){A===void 0&&(A=this._tempHitTest);var w=this._tempPoint,b=E.scrollX,I=E.scrollY;A.length=0;var R=T.x,N=T.y;E.getWorldPoint(R,N,w),T.worldX=w.x,T.worldY=w.y;for(var F={x:0,y:0},P=this._tempMatrix,O=this._tempMatrix2,M=0;M<C.length;M++){var L=C[M];if(this.inputCandidate(L,E)){var k=w.x+b*L.scrollFactorX-b,V=w.y+I*L.scrollFactorY-I;L.parentContainer?(L.getWorldTransformMatrix(P,O),P.applyInverse(k,V,F)):y(k,V,L.x,L.y,L.rotation,L.scaleX,L.scaleY,F),this.pointWithinHitArea(L,F.x,F.y)&&A.push(L)}}return A},pointWithinHitArea:function(T,C,E){C+=T.displayOriginX,E+=T.displayOriginY;var A=T.input;return A&&A.hitAreaCallback(A.hitArea,C,E,T)?(A.localX=C,A.localY=E,!0):!1},pointWithinInteractiveObject:function(T,C,E){return T.hitArea?(C+=T.gameObject.displayOriginX,E+=T.gameObject.displayOriginY,T.localX=C,T.localY=E,T.hitAreaCallback(T.hitArea,C,E,T)):!1},transformPointer:function(T,C,E,A){var w=T.position,b=T.prevPosition;b.x=w.x,b.y=w.y;var I=this.scaleManager.transformX(C),R=this.scaleManager.transformY(E),N=T.smoothFactor;!A||N===0?(w.x=I,w.y=R):(w.x=I*N+b.x*(1-N),w.y=R*N+b.y*(1-N))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(c.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var T=0;T<this.pointers.length;T++)this.pointers[T].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});i.exports=x},12499:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(26673),v=e(65650),u=e(56694),o=e(72687),c=e(27395),l=e(18104),f=e(53996),m=e(95669),h=e(72313),p=e(33963),y=e(6659),x=e(72632),T=e(52394),C=e(63399),E=e(42911),A=e(91963),w=e(74118),b=e(94287),I=e(7599),R=e(66349),N=e(60689),F=new u({Extends:y,initialize:function(O){y.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new y,this.enabled=!0,this.displayList,this.cameras,C.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var M={cancelled:!1};this._eventContainer={stopPropagation:function(){M.cancelled=!0}},this._eventData=M,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(I.BOOT,this.boot,this),O.sys.events.on(I.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(I.DESTROY,this.destroy,this),this.pluginEvents.emit(p.BOOT)},start:function(){var P=this.systems.events;P.on(I.TRANSITION_START,this.transitionIn,this),P.on(I.TRANSITION_OUT,this.transitionOut,this),P.on(I.TRANSITION_COMPLETE,this.transitionComplete,this),P.on(I.PRE_UPDATE,this.preUpdate,this),P.once(I.SHUTDOWN,this.shutdown,this),this.manager.events.on(p.GAME_OUT,this.onGameOut,this),this.manager.events.on(p.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(p.START)},onGameOver:function(P){this.isActive()&&this.emit(p.GAME_OVER,P.timeStamp,P)},onGameOut:function(P){this.isActive()&&this.emit(p.GAME_OUT,P.timeStamp,P)},preUpdate:function(){this.pluginEvents.emit(p.PRE_UPDATE);var P=this._pendingRemoval,O=this._pendingInsertion,M=P.length,L=O.length;if(!(M===0&&L===0)){for(var k=this._list,V=0;V<M;V++){var W=P[V],K=k.indexOf(W);K>-1&&(k.splice(K,1),this.clear(W,!0))}this._pendingRemoval.length=0,this._list=k.concat(O.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(P,O){if(!this.isActive())return!1;if(this.pluginEvents.emit(p.UPDATE,P,O),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var M,L=this.manager,k=L.pointers,V=L.pointersTotal;for(M=0;M<V;M++)k[M].updateMotion();if(this._list.length===0)return!1;var W=this.pollRate;if(W===-1)return!1;if(W>0)if(this._pollTimer-=O,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var K=!1;for(M=0;M<V;M++){var B=0,G=k[M];this._tempZones=[],this._temp=this.hitTestPointer(G),this.sortGameObjects(this._temp,G),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),B+=this.processOverOutEvents(G),this.getDragState(G)===2&&this.processDragThresholdEvent(G,P),B>0&&(K=!0)}return K},update:function(P,O){if(!this.isActive())return!1;for(var M=O.length,L=!1,k=0;k<M;k++){var V=0,W=O[k];switch(this._tempZones=[],this._temp=this.hitTestPointer(W),this.sortGameObjects(this._temp,W),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),P){case o.MOUSE_DOWN:V+=this.processDragDownEvent(W),V+=this.processDownEvents(W),V+=this.processOverOutEvents(W);break;case o.MOUSE_UP:V+=this.processDragUpEvent(W),V+=this.processUpEvents(W),V+=this.processOverOutEvents(W);break;case o.TOUCH_START:V+=this.processDragDownEvent(W),V+=this.processDownEvents(W),V+=this.processOverEvents(W);break;case o.TOUCH_END:case o.TOUCH_CANCEL:V+=this.processDragUpEvent(W),V+=this.processUpEvents(W),V+=this.processOutEvents(W);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:V+=this.processDragMoveEvent(W),V+=this.processMoveEvents(W),V+=this.processOverOutEvents(W);break;case o.MOUSE_WHEEL:V+=this.processWheelEvent(W);break}V>0&&(L=!0)}return this._updatedThisFrame=!0,L},clear:function(P,O){O===void 0&&(O=!1),this.disable(P);var M=P.input;M&&(this.removeDebug(P),M.gameObject=void 0,M.target=void 0,M.hitArea=void 0,M.hitAreaCallback=void 0,M.callbackContext=void 0,P.input=null),O||this.queueForRemoval(P);var L=this._draggable.indexOf(P);return L>-1&&this._draggable.splice(L,1),P},disable:function(P){var O=P.input;O&&(O.enabled=!1,O.dragState=0);var M=this._temp,L=this._drag,k=this._over,V=this.manager,W=M.indexOf(P);W>-1&&M.splice(W,1);for(var K=0;K<V.pointersTotal;K++)W=L[K].indexOf(P),W>-1&&L[K].splice(W,1),W=k[K].indexOf(P),W>-1&&(k[K].splice(W,1),V.resetCursor(O));return this},enable:function(P,O,M,L){return L===void 0&&(L=!1),P.input?P.input.enabled=!0:this.setHitArea(P,O,M),P.input&&L&&!P.input.dropZone&&(P.input.dropZone=L),this},hitTestPointer:function(P){for(var O=this.cameras.getCamerasBelowPointer(P),M=0;M<O.length;M++){for(var L=O[M],k=this.manager.hitTest(P,this._list,L),V=0;V<k.length;V++){var W=k[V];W.input.dropZone&&this._tempZones.push(W)}if(k.length>0)return P.camera=L,k}return P.camera=O[0],[]},processDownEvents:function(P){var O=0,M=this._temp,L=this._eventData,k=this._eventContainer;L.cancelled=!1;for(var V=!1,W=0;W<M.length;W++){var K=M[W];if(!(!K.input||!K.input.enabled)){if(O++,K.emit(p.GAMEOBJECT_POINTER_DOWN,P,K.input.localX,K.input.localY,k),L.cancelled||!K.input||!K.input.enabled){V=!0;break}if(this.emit(p.GAMEOBJECT_DOWN,P,K,k),L.cancelled||!K.input){V=!0;break}}}return!V&&this.manager&&(P.downElement===this.manager.game.canvas?this.emit(p.POINTER_DOWN,P,M):this.emit(p.POINTER_DOWN_OUTSIDE,P)),O},getDragState:function(P){return this._dragState[P.id]},setDragState:function(P,O){this._dragState[P.id]=O},processDragThresholdEvent:function(P,O){var M=!1,L=this.dragTimeThreshold,k=this.dragDistanceThreshold;if((k>0&&f(P.x,P.y,P.downX,P.downY)>=k||L>0&&O>=P.downTime+L)&&(M=!0),M)return this.setDragState(P,3),this.processDragStartList(P)},processDragStartList:function(P){if(this.getDragState(P)!==3)return 0;for(var O=this._drag[P.id],M=0;M<O.length;M++){var L=O[M],k=L.input;k.dragState=2,k.dragStartX=L.x,k.dragStartY=L.y,k.dragStartXGlobal=P.worldX,k.dragStartYGlobal=P.worldY,k.dragX=k.dragStartXGlobal-k.dragStartX,k.dragY=k.dragStartYGlobal-k.dragStartY,L.emit(p.GAMEOBJECT_DRAG_START,P,k.dragX,k.dragY),this.emit(p.DRAG_START,P,L)}return this.setDragState(P,4),O.length},processDragDownEvent:function(P){var O=this._temp;if(this._draggable.length===0||O.length===0||!P.primaryDown||this.getDragState(P)!==0)return 0;this.setDragState(P,1);for(var M=[],L=0;L<O.length;L++){var k=O[L];k.input.draggable&&k.input.dragState===0&&M.push(k)}return M.length===0?(this.setDragState(P,0),0):(M.length>1&&(this.sortGameObjects(M,P),this.topOnly&&M.splice(1)),this._drag[P.id]=M,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(P,3),this.processDragStartList(P)):(this.setDragState(P,2),0))},processDragMoveEvent:function(P){if(this.getDragState(P)===2&&this.processDragThresholdEvent(P,this.manager.game.loop.now),this.getDragState(P)!==4)return 0;for(var O=this._tempZones,M=this._drag[P.id],L=0;L<M.length;L++){var k=M[L],V=k.input,W=V.target;if(W){var K=O.indexOf(W);K===0?(k.emit(p.GAMEOBJECT_DRAG_OVER,P,W),this.emit(p.DRAG_OVER,P,k,W)):K>0?(k.emit(p.GAMEOBJECT_DRAG_LEAVE,P,W),this.emit(p.DRAG_LEAVE,P,k,W),V.target=O[0],W=V.target,k.emit(p.GAMEOBJECT_DRAG_ENTER,P,W),this.emit(p.DRAG_ENTER,P,k,W)):(k.emit(p.GAMEOBJECT_DRAG_LEAVE,P,W),this.emit(p.DRAG_LEAVE,P,k,W),O[0]?(V.target=O[0],W=V.target,k.emit(p.GAMEOBJECT_DRAG_ENTER,P,W),this.emit(p.DRAG_ENTER,P,k,W)):V.target=null)}else!W&&O[0]&&(V.target=O[0],W=V.target,k.emit(p.GAMEOBJECT_DRAG_ENTER,P,W),this.emit(p.DRAG_ENTER,P,k,W));var B,G;if(!k.parentContainer)B=P.worldX-V.dragX,G=P.worldY-V.dragY;else{var D=P.worldX-V.dragStartXGlobal,$=P.worldY-V.dragStartYGlobal,z=k.getParentRotation(),H=D*Math.cos(z)+$*Math.sin(z),Y=$*Math.cos(z)-D*Math.sin(z);H*=1/k.parentContainer.scaleX,Y*=1/k.parentContainer.scaleY,B=H+V.dragStartX,G=Y+V.dragStartY}k.emit(p.GAMEOBJECT_DRAG,P,B,G),this.emit(p.DRAG,P,k,B,G)}return M.length},processDragUpEvent:function(P){for(var O=this._drag[P.id],M=0;M<O.length;M++){var L=O[M],k=L.input;if(k&&k.dragState===2){k.dragState=0,k.dragX=k.localX-L.displayOriginX,k.dragY=k.localY-L.displayOriginY;var V=!1,W=k.target;W&&(L.emit(p.GAMEOBJECT_DROP,P,W),this.emit(p.DROP,P,L,W),k.target=null,V=!0),L.input&&L.input.enabled&&(L.emit(p.GAMEOBJECT_DRAG_END,P,k.dragX,k.dragY,V),this.emit(p.DRAG_END,P,L,V))}}return this.setDragState(P,0),O.splice(0),0},processMoveEvents:function(P){var O=0,M=this._temp,L=this._eventData,k=this._eventContainer;L.cancelled=!1;for(var V=!1,W=0;W<M.length;W++){var K=M[W];if(!(!K.input||!K.input.enabled)){if(O++,K.emit(p.GAMEOBJECT_POINTER_MOVE,P,K.input.localX,K.input.localY,k),L.cancelled||!K.input||!K.input.enabled){V=!0;break}if(this.emit(p.GAMEOBJECT_MOVE,P,K,k),L.cancelled||!K.input||!K.input.enabled){V=!0;break}if(this.topOnly)break}}return V||this.emit(p.POINTER_MOVE,P,M),O},processWheelEvent:function(P){var O=0,M=this._temp,L=this._eventData,k=this._eventContainer;L.cancelled=!1;for(var V=!1,W=P.deltaX,K=P.deltaY,B=P.deltaZ,G=0;G<M.length;G++){var D=M[G];if(!(!D.input||!D.input.enabled)){if(O++,D.emit(p.GAMEOBJECT_POINTER_WHEEL,P,W,K,B,k),L.cancelled||!D.input||!D.input.enabled){V=!0;break}if(this.emit(p.GAMEOBJECT_WHEEL,P,D,W,K,B,k),L.cancelled||!D.input||!D.input.enabled){V=!0;break}}}return V||this.emit(p.POINTER_WHEEL,P,M,W,K,B),O},processOverEvents:function(P){var O=this._temp,M=0,L=O.length,k=[];if(L>0){var V=this.manager,W=this._eventData,K=this._eventContainer;W.cancelled=!1;for(var B=!1,G=0;G<L;G++){var D=O[G];if(!(!D.input||!D.input.enabled)){if(k.push(D),V.setCursor(D.input),D.emit(p.GAMEOBJECT_POINTER_OVER,P,D.input.localX,D.input.localY,K),M++,W.cancelled||!D.input||!D.input.enabled){B=!0;break}if(this.emit(p.GAMEOBJECT_OVER,P,D,K),W.cancelled||!D.input||!D.input.enabled){B=!0;break}}}B||this.emit(p.POINTER_OVER,P,k)}return this._over[P.id]=k,M},processOutEvents:function(P){var O=this._over[P.id],M=0,L=O.length;if(L>0){var k=this.manager,V=this._eventData,W=this._eventContainer;V.cancelled=!1;var K=!1;this.sortGameObjects(O,P);for(var B=0;B<L;B++){var G=O[B];if(G=O[B],!(!G.input||!G.input.enabled)){if(k.resetCursor(G.input),G.emit(p.GAMEOBJECT_POINTER_OUT,P,W),M++,V.cancelled||!G.input||!G.input.enabled){K=!0;break}if(this.emit(p.GAMEOBJECT_OUT,P,G,W),V.cancelled||!G.input||!G.input.enabled){K=!0;break}K||this.emit(p.POINTER_OUT,P,O)}}this._over[P.id]=[]}return M},processOverOutEvents:function(P){var O=this._temp,M,L,k=[],V=[],W=[],K=this._over[P.id],B=this._drag[P.id],G=this.manager;for(M=0;M<K.length;M++)L=K[M],O.indexOf(L)===-1&&B.indexOf(L)===-1?k.push(L):W.push(L);for(M=0;M<O.length;M++)L=O[M],K.indexOf(L)===-1&&V.push(L);var D=k.length,$=0,z=this._eventData,H=this._eventContainer;z.cancelled=!1;var Y=!1;if(D>0){for(this.sortGameObjects(k,P),M=0;M<D;M++)if(L=k[M],!(!L.input||!L.input.enabled)){if(G.resetCursor(L.input),L.emit(p.GAMEOBJECT_POINTER_OUT,P,H),$++,z.cancelled||!L.input||!L.input.enabled){Y=!0;break}if(this.emit(p.GAMEOBJECT_OUT,P,L,H),z.cancelled||!L.input||!L.input.enabled){Y=!0;break}}Y||this.emit(p.POINTER_OUT,P,k)}if(D=V.length,z.cancelled=!1,Y=!1,D>0){for(this.sortGameObjects(V,P),M=0;M<D;M++)if(L=V[M],!(!L.input||!L.input.enabled)){if(G.setCursor(L.input),L.emit(p.GAMEOBJECT_POINTER_OVER,P,L.input.localX,L.input.localY,H),$++,z.cancelled||!L.input||!L.input.enabled){Y=!0;break}if(this.emit(p.GAMEOBJECT_OVER,P,L,H),z.cancelled||!L.input||!L.input.enabled){Y=!0;break}}Y||this.emit(p.POINTER_OVER,P,V)}return K=W.concat(V),this._over[P.id]=this.sortGameObjects(K,P),$},processUpEvents:function(P){var O=this._temp,M=this._eventData,L=this._eventContainer;M.cancelled=!1;for(var k=!1,V=0;V<O.length;V++){var W=O[V];if(!(!W.input||!W.input.enabled)){if(W.emit(p.GAMEOBJECT_POINTER_UP,P,W.input.localX,W.input.localY,L),M.cancelled||!W.input||!W.input.enabled){k=!0;break}if(this.emit(p.GAMEOBJECT_UP,P,W,L),M.cancelled||!W.input||!W.input.enabled){k=!0;break}}}return!k&&this.manager&&(P.upElement===this.manager.game.canvas?this.emit(p.POINTER_UP,P,O):this.emit(p.POINTER_UP_OUTSIDE,P)),O.length},queueForInsertion:function(P){return this._pendingInsertion.indexOf(P)===-1&&this._list.indexOf(P)===-1&&this._pendingInsertion.push(P),this},queueForRemoval:function(P){return this._pendingRemoval.push(P),this},setDraggable:function(P,O){O===void 0&&(O=!0),Array.isArray(P)||(P=[P]);for(var M=0;M<P.length;M++){var L=P[M];L.input.draggable=O;var k=this._draggable.indexOf(L);O&&k===-1?this._draggable.push(L):!O&&k>-1&&this._draggable.splice(k,1)}return this},makePixelPerfect:function(P){P===void 0&&(P=1);var O=this.systems.textures;return l(O,P)},setHitArea:function(P,O,M){if(O===void 0)return this.setHitAreaFromTexture(P);Array.isArray(P)||(P=[P]);var L=!1,k=!1,V=!1,W=!1,K=!1,B=!0;if(E(O)){var G=O;O=x(G,"hitArea",null),M=x(G,"hitAreaCallback",null),L=x(G,"draggable",!1),k=x(G,"dropZone",!1),V=x(G,"cursor",!1),W=x(G,"useHandCursor",!1),K=x(G,"pixelPerfect",!1);var D=x(G,"alphaTolerance",1);K&&(O={},M=this.makePixelPerfect(D)),(!O||!M)&&(this.setHitAreaFromTexture(P),B=!1)}else typeof O=="function"&&!M&&(M=O,O={});for(var $=0;$<P.length;$++){var z=P[$];if(K&&z.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var H=z.input?z.input:c(z,O,M);H.customHitArea=B,H.dropZone=k,H.cursor=W?"pointer":V,z.input=H,L&&this.setDraggable(z),this.queueForInsertion(z)}return this},setHitAreaCircle:function(P,O,M,L,k){k===void 0&&(k=v);var V=new a(O,M,L);return this.setHitArea(P,V,k)},setHitAreaEllipse:function(P,O,M,L,k,V){V===void 0&&(V=h);var W=new m(O,M,L,k);return this.setHitArea(P,W,V)},setHitAreaFromTexture:function(P,O){O===void 0&&(O=b),Array.isArray(P)||(P=[P]);for(var M=0;M<P.length;M++){var L=P[M],k=L.frame,V=0,W=0;if(L.width?(V=L.width,W=L.height):k&&(V=k.realWidth,W=k.realHeight),L.type==="Container"&&(V===0||W===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}V!==0&&W!==0&&(L.input=c(L,new w(0,0,V,W),O),this.queueForInsertion(L))}return this},setHitAreaRectangle:function(P,O,M,L,k,V){V===void 0&&(V=b);var W=new w(O,M,L,k);return this.setHitArea(P,W,V)},setHitAreaTriangle:function(P,O,M,L,k,V,W,K){K===void 0&&(K=N);var B=new R(O,M,L,k,V,W);return this.setHitArea(P,B,K)},enableDebug:function(P,O){O===void 0&&(O=65280);var M=P.input;if(!M||!M.hitArea)return this;var L=M.hitArea,k=L.type,V=M.hitAreaDebug,W=this.systems.add,K=this.systems.updateList;V&&(K.remove(V),V.destroy(),V=null);var B=0,G=0;switch(k){case T.CIRCLE:V=W.arc(0,0,L.radius),B=L.x-L.radius,G=L.y-L.radius;break;case T.ELLIPSE:V=W.ellipse(0,0,L.width,L.height),B=L.x-L.width/2,G=L.y-L.height/2;break;case T.LINE:V=W.line(0,0,L.x1,L.y1,L.x2,L.y2);break;case T.POLYGON:V=W.polygon(0,0,L.points);break;case T.RECTANGLE:V=W.rectangle(0,0,L.width,L.height),B=L.x,G=L.y;break;case T.TRIANGLE:V=W.triangle(0,0,L.x1,L.y1,L.x2,L.y2,L.x3,L.y3);break}return V&&(V.isFilled=!1,V.strokeColor=O,V.preUpdate=function(){V.setStrokeStyle(1/P.scale,V.strokeColor),V.setDisplayOrigin(P.displayOriginX,P.displayOriginY);var D=P.x,$=P.y,z=P.rotation,H=P.scaleX,Y=P.scaleY;if(P.parentContainer){var Z=P.getWorldTransformMatrix();D=Z.tx,$=Z.ty,z=Z.rotation,H=Z.scaleX,Y=Z.scaleY}V.setRotation(z),V.setScale(H,Y),V.setPosition(D+B*H,$+G*Y),V.setScrollFactor(P.scrollFactorX,P.scrollFactorY),V.setDepth(P.depth)},K.add(V),M.hitAreaDebug=V),this},removeDebug:function(P){var O=P.input;if(O&&O.hitAreaDebug){var M=O.hitAreaDebug;this.systems.updateList.remove(M),M.destroy(),O.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(P){return this.pollRate=P,this._pollTimer=0,this},setGlobalTopOnly:function(P){return this.manager.globalTopOnly=P,this},setTopOnly:function(P){return this.topOnly=P,this},sortGameObjects:function(P,O){if(P.length<2||!O.camera)return P;var M=O.camera.renderList;return P.sort(function(L,k){var V=Math.max(M.indexOf(L),0),W=Math.max(M.indexOf(k),0);return W-V})},sortDropZones:function(P){return P.length<2?P:(this.scene.sys.depthSort(),P.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(P,O){if(!P.parentContainer&&!O.parentContainer)return this.displayList.getIndex(O)-this.displayList.getIndex(P);if(P.parentContainer===O.parentContainer)return O.parentContainer.getIndex(O)-P.parentContainer.getIndex(P);if(P.parentContainer===O)return-1;if(O.parentContainer===P)return 1;for(var M=P.getIndexList(),L=O.getIndexList(),k=Math.min(M.length,L.length),V=0;V<k;V++){var W=M[V],K=L[V];if(W!==K)return K-W}return L.length-M.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(P){return this.manager.addPointer(P)},setDefaultCursor:function(P){return this.manager.setDefaultCursor(P),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(p.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var P=0;P<10;P++)this._drag[P]=[],this._over[P]=[];this.removeAllListeners();var O=this.manager;O.canvas.style.cursor=O.defaultCursor;var M=this.systems.events;M.off(I.TRANSITION_START,this.transitionIn,this),M.off(I.TRANSITION_OUT,this.transitionOut,this),M.off(I.TRANSITION_COMPLETE,this.transitionComplete,this),M.off(I.PRE_UPDATE,this.preUpdate,this),O.events.off(p.GAME_OUT,this.onGameOut,this),O.events.off(p.GAME_OVER,this.onGameOver,this),M.off(I.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var P=this.manager.pointers,O=0;O<P.length;O++)P[O].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(p.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(I.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});A.register("InputPlugin",F,"input"),i.exports=F},63399:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10850),v={},u={};u.register=function(o,c,l,f,m){v[o]={plugin:c,mapping:l,settingsKey:f,configKey:m}},u.getPlugin=function(o){return v[o]},u.install=function(o){var c=o.scene.sys,l=c.settings.input,f=c.game.config;for(var m in v){var h=v[m].plugin,p=v[m].mapping,y=v[m].settingsKey,x=v[m].configKey;a(l,y,f[x])&&(o[p]=new h(o))}},u.remove=function(o){v.hasOwnProperty(o)&&delete v[o]},i.exports=u},40398:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(90447),v=e(56694),u=e(53996),o=e(88456),c=e(44521),l=e(93736),f=e(36580),m=new v({initialize:function(p,y){this.manager=p,this.id=y,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new l,this.prevPosition=new l,this.midPoint=new l(-1,-1),this.velocity=new l,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=y===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(h){var p=h.getWorldPoint(this.x,this.y);return this.worldX=p.x,this.worldY=p.y,this},positionToCamera:function(h,p){return h.getWorldPoint(this.x,this.y,p)},updateMotion:function(){var h=this.position.x,p=this.position.y,y=this.midPoint.x,x=this.midPoint.y;if(!(h===y&&p===x)){var T=c(this.motionFactor,y,h),C=c(this.motionFactor,x,p);o(T,h,.1)&&(T=h),o(C,p,.1)&&(C=p),this.midPoint.set(T,C);var E=h-T,A=p-C;this.velocity.set(E,A),this.angle=a(T,C,h,p),this.distance=Math.sqrt(E*E+A*A)}},up:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=h.timeStamp,this.wasTouch=!1)},down:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.button=h.button,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),h.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),f.macOS&&h.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=h.timeStamp),this.wasTouch=!1},move:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.locked&&(this.movementX=h.movementX||h.mozMovementX||h.webkitMovementX||0,this.movementY=h.movementY||h.mozMovementY||h.webkitMovementY||0),this.moveTime=h.timeStamp,this.wasTouch=!1},wheel:function(h){"buttons"in h&&(this.buttons=h.buttons),this.event=h,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.deltaX=h.deltaX,this.deltaY=h.deltaY,this.deltaZ=h.deltaZ,this.wasTouch=!1},touchstart:function(h,p){h.pointerId&&(this.pointerId=h.pointerId),this.identifier=h.identifier,this.target=h.target,this.active=!0,this.buttons=1,this.event=p,this.downElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=p.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(h,p){this.event=p,this.manager.transformPointer(this,h.pageX,h.pageY,!0),this.moveTime=p.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(h,p){this.buttons=0,this.event=p,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(h,p){this.buttons=0,this.event=p,this.upElement=h.target,this.manager.transformPointer(this,h.pageX,h.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(h,p){h===void 0&&(h=10),p===void 0&&(p=[]);for(var y=this.prevPosition.x,x=this.prevPosition.y,T=this.position.x,C=this.position.y,E=0;E<h;E++){var A=1/h*E;p[E]={x:c(A,y,T),y:c(A,x,C)}}return p},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(h){this.position.x=h}},y:{get:function(){return this.position.y},set:function(h){this.position.y=h}},time:{get:function(){return this.event?this.event.timeStamp:0}}});i.exports=m},72687:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};i.exports=g},14874:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="boot"},54168:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},526:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragend"},81623:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragenter"},94472:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="drag"},9304:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragleave"},34265:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragover"},50151:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragstart"},98134:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="drop"},56773:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectdown"},45824:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragend"},39578:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragenter"},72072:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="drag"},82569:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragleave"},70833:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragover"},81442:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragstart"},32936:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="drop"},99658:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectmove"},60515:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectout"},55254:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectover"},34782:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerdown"},41769:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointermove"},65588:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerout"},61640:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerover"},49342:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerup"},82662:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="wheel"},13058:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectup"},52426:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameobjectwheel"},78072:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameout"},1545:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="gameover"},67137:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="boot"},27678:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="process"},22257:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="update"},90379:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerlockchange"},88909:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerdown"},36548:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerdownoutside"},18483:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointermove"},22355:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerout"},7997:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerover"},66318:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerup"},94812:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pointerupoutside"},37310:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="wheel"},24196:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="preupdate"},27053:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="shutdown"},29413:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="start"},25165:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="update"},33963:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BOOT:e(14874),DESTROY:e(54168),DRAG_END:e(526),DRAG_ENTER:e(81623),DRAG:e(94472),DRAG_LEAVE:e(9304),DRAG_OVER:e(34265),DRAG_START:e(50151),DROP:e(98134),GAME_OUT:e(78072),GAME_OVER:e(1545),GAMEOBJECT_DOWN:e(56773),GAMEOBJECT_DRAG_END:e(45824),GAMEOBJECT_DRAG_ENTER:e(39578),GAMEOBJECT_DRAG:e(72072),GAMEOBJECT_DRAG_LEAVE:e(82569),GAMEOBJECT_DRAG_OVER:e(70833),GAMEOBJECT_DRAG_START:e(81442),GAMEOBJECT_DROP:e(32936),GAMEOBJECT_MOVE:e(99658),GAMEOBJECT_OUT:e(60515),GAMEOBJECT_OVER:e(55254),GAMEOBJECT_POINTER_DOWN:e(34782),GAMEOBJECT_POINTER_MOVE:e(41769),GAMEOBJECT_POINTER_OUT:e(65588),GAMEOBJECT_POINTER_OVER:e(61640),GAMEOBJECT_POINTER_UP:e(49342),GAMEOBJECT_POINTER_WHEEL:e(82662),GAMEOBJECT_UP:e(13058),GAMEOBJECT_WHEEL:e(52426),MANAGER_BOOT:e(67137),MANAGER_PROCESS:e(27678),MANAGER_UPDATE:e(22257),POINTER_DOWN:e(88909),POINTER_DOWN_OUTSIDE:e(36548),POINTER_MOVE:e(18483),POINTER_OUT:e(22355),POINTER_OVER:e(7997),POINTER_UP:e(66318),POINTER_UP_OUTSIDE:e(94812),POINTER_WHEEL:e(37310),POINTERLOCK_CHANGE:e(90379),PRE_UPDATE:e(24196),SHUTDOWN:e(27053),START:e(29413),UPDATE:e(25165)}},70848:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c){this.pad=o,this.events=o.events,this.index=c,this.value=0,this.threshold=.1},update:function(u){this.value=u},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});i.exports=v},21274:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(43200),u=new a({initialize:function(c,l){this.pad=c,this.events=c.manager,this.index=l,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var c=this.pad,l=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(v.BUTTON_DOWN,c,this,o),this.pad.emit(v.GAMEPAD_BUTTON_DOWN,l,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(v.BUTTON_UP,c,this,o),this.pad.emit(v.GAMEPAD_BUTTON_UP,l,o,this))},destroy:function(){this.pad=null,this.events=null}});i.exports=u},75956:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70848),v=e(21274),u=e(56694),o=e(6659),c=e(93736),l=new u({Extends:o,initialize:function(m,h){o.call(this),this.manager=m,this.pad=h,this.id=h.id,this.index=h.index;for(var p=[],y=0;y<h.buttons.length;y++)p.push(new v(this,y));this.buttons=p;var x=[];for(y=0;y<h.axes.length;y++)x.push(new a(this,y));this.axes=x,this.vibration=h.vibrationActuator;var T={value:0,pressed:!1};this._LCLeft=p[14]?p[14]:T,this._LCRight=p[15]?p[15]:T,this._LCTop=p[12]?p[12]:T,this._LCBottom=p[13]?p[13]:T,this._RCLeft=p[2]?p[2]:T,this._RCRight=p[1]?p[1]:T,this._RCTop=p[3]?p[3]:T,this._RCBottom=p[0]?p[0]:T,this._FBLeftTop=p[4]?p[4]:T,this._FBLeftBottom=p[6]?p[6]:T,this._FBRightTop=p[5]?p[5]:T,this._FBRightBottom=p[7]?p[7]:T;var C={value:0};this._HAxisLeft=x[0]?x[0]:C,this._VAxisLeft=x[1]?x[1]:C,this._HAxisRight=x[2]?x[2]:C,this._VAxisRight=x[3]?x[3]:C,this.leftStick=new c,this.rightStick=new c,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(f){return this.axes[f].getValue()},setAxisThreshold:function(f){for(var m=0;m<this.axes.length;m++)this.axes[m].threshold=f},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(f){return this.buttons[f].value},isButtonDown:function(f){return this.buttons[f].pressed},update:function(f){if(!(f.timestamp<this._created)){var m,h=this.buttons,p=f.buttons,y=h.length;for(m=0;m<y;m++)h[m].update(p[m].value);var x=this.axes,T=f.axes;for(y=x.length,m=0;m<y;m++)x[m].update(T[m]);y>=2&&(this.leftStick.set(x[0].getValue(),x[1].getValue()),y>=4&&this.rightStick.set(x[2].getValue(),x[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var f;for(f=0;f<this.buttons.length;f++)this.buttons[f].destroy();for(f=0;f<this.axes.length;f++)this.axes[f].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});i.exports=l},1379:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(6659),u=e(43200),o=e(75956),c=e(10850),l=e(63399),f=e(33963),m=new a({Extends:v,initialize:function(p){v.call(this),this.scene=p.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=p,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,p.pluginEvents.once(f.BOOT,this.boot,this),p.pluginEvents.on(f.START,this.start,this)},boot:function(){var h=this.scene.sys.game,p=this.settings.input,y=h.config;this.enabled=c(p,"gamepad",y.inputGamepad)&&h.device.input.gamepads,this.target=c(p,"gamepad.target",y.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(f.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(f.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var h=this,p=this.target,y=function(x){x.defaultPrevented||!h.isActive()||(h.refreshPads(),h.queue.push(x))};this.onGamepadHandler=y,p.addEventListener("gamepadconnected",y,!1),p.addEventListener("gamepaddisconnected",y,!1),this.sceneInputPlugin.pluginEvents.on(f.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(f.UPDATE,this.update);for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].removeAllListeners()},disconnectAll:function(){for(var h=0;h<this.gamepads.length;h++)this.gamepads[h].pad.connected=!1},refreshPads:function(){var h=navigator.getGamepads();if(!h)this.disconnectAll();else for(var p=this.gamepads,y=0;y<h.length;y++){var x=h[y];if(x){var T=x.id,C=x.index,E=p[C];if(E)E.id!==T?(E.destroy(),p[C]=new o(this,x)):E.update(x);else{var A=new o(this,x);p[C]=A,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=A):this._pad3=A:this._pad2=A:this._pad1=A}}}},getAll:function(){for(var h=[],p=this.gamepads,y=0;y<p.length;y++)p[y]&&h.push(p[y]);return h},getPad:function(h){for(var p=this.gamepads,y=0;y<p.length;y++)if(p[y]&&p[y].index===h)return p[y]},update:function(){if(this.enabled){this.refreshPads();var h=this.queue.length;if(h!==0)for(var p=this.queue.splice(0,h),y=0;y<h;y++){var x=p[y],T=this.getPad(x.gamepad.index);x.type==="gamepadconnected"?this.emit(u.CONNECTED,T,x):x.type==="gamepaddisconnected"&&this.emit(u.DISCONNECTED,T,x)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var h=0;h<this.gamepads.length;h++)this.gamepads[h]&&this.gamepads[h].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});l.register("GamepadPlugin",m,"gamepad","gamepad","inputGamepad"),i.exports=m},33171:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},74982:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},43247:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},4898:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={DUALSHOCK_4:e(74982),SNES_USB:e(33171),XBOX_360:e(43247)}},17344:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="down"},36635:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="up"},85724:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="connected"},55832:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="disconnected"},772:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="down"},33608:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="up"},43200:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BUTTON_DOWN:e(17344),BUTTON_UP:e(36635),CONNECTED:e(85724),DISCONNECTED:e(55832),GAMEPAD_BUTTON_DOWN:e(772),GAMEPAD_BUTTON_UP:e(33608)}},92636:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Axis:e(70848),Button:e(21274),Events:e(43200),Gamepad:e(75956),GamepadPlugin:e(1379),Configs:e(4898)}},20873:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72687),v=e(98611),u={CreatePixelPerfectHandler:e(18104),CreateInteractiveObject:e(27395),Events:e(33963),Gamepad:e(92636),InputManager:e(69898),InputPlugin:e(12499),InputPluginCache:e(63399),Keyboard:e(28388),Mouse:e(11343),Pointer:e(40398),Touch:e(77423)};u=v(!1,u,a),i.exports=u},71064:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66458),v=e(56694),u=e(97081),o=e(33963),c=e(11873),l=e(72283),f=new v({initialize:function(h){this.manager=h,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=l,this.onKeyUp=l,h.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var m=this.manager.config;this.enabled=m.inputKeyboard,this.target=m.inputKeyboardEventTarget,this.addCapture(m.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(u.POST_STEP,this.postUpdate,this)},startListeners:function(){var m=this;this.onKeyDown=function(p){if(!(p.defaultPrevented||!m.enabled||!m.manager)){m.queue.push(p),m.manager.events.emit(o.MANAGER_PROCESS);var y=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;m.preventDefault&&!y&&m.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}},this.onKeyUp=function(p){if(!(p.defaultPrevented||!m.enabled||!m.manager)){m.queue.push(p),m.manager.events.emit(o.MANAGER_PROCESS);var y=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;m.preventDefault&&!y&&m.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}};var h=this.target;h&&(h.addEventListener("keydown",this.onKeyDown,!1),h.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var m=this.target;m.removeEventListener("keydown",this.onKeyDown,!1),m.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(m){typeof m=="string"&&(m=m.split(",")),Array.isArray(m)||(m=[m]);for(var h=this.captures,p=0;p<m.length;p++){var y=m[p];typeof y=="string"&&(y=c[y.trim().toUpperCase()]),h.indexOf(y)===-1&&h.push(y)}this.preventDefault=h.length>0},removeCapture:function(m){typeof m=="string"&&(m=m.split(",")),Array.isArray(m)||(m=[m]);for(var h=this.captures,p=0;p<m.length;p++){var y=m[p];typeof y=="string"&&(y=c[y.toUpperCase()]),a(h,y)}this.preventDefault=h.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(u.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});i.exports=f},89666:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(6659),u=e(94030),o=e(97081),c=e(10850),l=e(33963),f=e(63399),m=e(50165),h=e(11873),p=e(95625),y=e(48044),x=e(7599),T=e(84314),C=new a({Extends:v,initialize:function(A){v.call(this),this.game=A.systems.game,this.scene=A.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=A,this.manager=A.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,A.pluginEvents.once(l.BOOT,this.boot,this),A.pluginEvents.on(l.START,this.start,this)},boot:function(){var E=this.settings.input;this.enabled=c(E,"keyboard",!0);var A=c(E,"keyboard.capture",null);A&&this.addCaptures(A),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(l.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(x.PAUSE,this.resetKeys,this),this.scene.sys.events.on(x.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(E){return this.manager.addCapture(E),this},removeCapture:function(E){return this.manager.removeCapture(E),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:h.UP,down:h.DOWN,left:h.LEFT,right:h.RIGHT,space:h.SPACE,shift:h.SHIFT})},addKeys:function(E,A,w){A===void 0&&(A=!0),w===void 0&&(w=!1);var b={};if(typeof E=="string"){E=E.split(",");for(var I=0;I<E.length;I++){var R=E[I].trim();R&&(b[R]=this.addKey(R,A,w))}}else for(var N in E)b[N]=this.addKey(E[N],A,w);return b},addKey:function(E,A,w){A===void 0&&(A=!0),w===void 0&&(w=!1);var b=this.keys;if(E instanceof m){var I=b.indexOf(E);return I>-1?b[I]=E:b[E.keyCode]=E,A&&this.addCapture(E.keyCode),E.setEmitOnRepeat(w),E}return typeof E=="string"&&(E=h[E.toUpperCase()]),b[E]||(b[E]=new m(this,E),A&&this.addCapture(E),b[E].setEmitOnRepeat(w)),b[E]},removeKey:function(E,A,w){A===void 0&&(A=!1),w===void 0&&(w=!1);var b=this.keys,I;if(E instanceof m){var R=b.indexOf(E);R>-1&&(I=this.keys[R],this.keys[R]=void 0)}else typeof E=="string"&&(E=h[E.toUpperCase()]);return b[E]&&(I=b[E],b[E]=void 0),I&&(I.plugin=null,w&&this.removeCapture(I.keyCode),A&&I.destroy()),this},removeAllKeys:function(E,A){E===void 0&&(E=!1),A===void 0&&(A=!1);for(var w=this.keys,b=0;b<w.length;b++){var I=w[b];I&&(w[b]=void 0,A&&this.removeCapture(I.keyCode),E&&I.destroy())}return this},createCombo:function(E,A){return new p(this,E,A)},checkDown:function(E,A){if(A===void 0&&(A=0),this.enabled&&E.isDown){var w=T(this.time-E.timeDown,A);if(w>E._tick)return E._tick=w,!0}return!1},update:function(){var E=this.manager.queue,A=E.length;if(!(!this.isActive()||A===0))for(var w=this.keys,b=0;b<A;b++){var I=E[b],R=I.keyCode,N=w[R],F=!1;I.cancelled===void 0&&(I.cancelled=0,I.stopImmediatePropagation=function(){I.cancelled=1},I.stopPropagation=function(){I.cancelled=-1}),I.cancelled!==-1&&(R===this.prevCode&&I.timeStamp===this.prevTime&&I.type===this.prevType||(this.prevCode=R,this.prevTime=I.timeStamp,this.prevType=I.type,I.type==="keydown"?(N&&(F=N.isDown,N.onDown(I)),!I.cancelled&&(!N||!F)&&(y[R]&&this.emit(u.KEY_DOWN+y[R],I),I.cancelled||this.emit(u.ANY_KEY_DOWN,I))):(N&&N.onUp(I),I.cancelled||(y[R]&&this.emit(u.KEY_UP+y[R],I),I.cancelled||this.emit(u.ANY_KEY_UP,I))),I.cancelled===1&&(I.cancelled=0)))}},resetKeys:function(){for(var E=this.keys,A=0;A<E.length;A++)E[A]&&E[A].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(l.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(x.PAUSE,this.resetKeys,this),this.scene.sys.events.off(x.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var E=this.keys,A=0;A<E.length;A++)E[A]&&E[A].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});f.register("KeyboardPlugin",C,"keyboard","keyboard","inputKeyboard"),i.exports=C},60258:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a.timeLastMatched=e.timeStamp,a.index++,a.index===a.size?!0:(a.current=a.keyCodes[a.index],!1)};i.exports=g},95625:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(94030),u=e(72632),o=e(2544),c=e(88754),l=new a({initialize:function(m,h,p){if(p===void 0&&(p={}),h.length<2)return!1;this.manager=m,this.enabled=!0,this.keyCodes=[];for(var y=0;y<h.length;y++){var x=h[y];typeof x=="string"?this.keyCodes.push(x.toUpperCase().charCodeAt(0)):typeof x=="number"?this.keyCodes.push(x):x.hasOwnProperty("keyCode")&&this.keyCodes.push(x.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=u(p,"resetOnWrongKey",!0),this.maxKeyDelay=u(p,"maxKeyDelay",0),this.resetOnMatch=u(p,"resetOnMatch",!1),this.deleteOnMatch=u(p,"deleteOnMatch",!1);var T=this,C=function(E){if(!(T.matched||!T.enabled)){var A=o(E,T);A&&(T.manager.emit(v.COMBO_MATCH,T,E),T.resetOnMatch?c(T):T.deleteOnMatch&&T.destroy())}};this.onKeyDown=C,this.manager.on(v.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(v.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});i.exports=l},2544:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60258),v=function(u,o){if(o.matched)return!0;var c=!1,l=!1;if(u.keyCode===o.current)if(o.index>0&&o.maxKeyDelay>0){var f=o.timeLastMatched+o.maxKeyDelay;u.timeStamp<=f&&(l=!0,c=a(u,o))}else l=!0,c=a(u,o);return!l&&o.resetOnWrongKey&&(o.index=0,o.current=o.keyCodes[0]),c&&(o.timeLastMatched=u.timeStamp,o.matched=!0,o.timeMatched=u.timeStamp),c};i.exports=v},88754:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};i.exports=g},5044:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="keydown"},40813:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="keyup"},89319:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="keycombomatch"},43267:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="down"},78595:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="keydown-"},30056:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="keyup-"},81939:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="up"},94030:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ANY_KEY_DOWN:e(5044),ANY_KEY_UP:e(40813),COMBO_MATCH:e(89319),DOWN:e(43267),KEY_DOWN:e(78595),KEY_UP:e(30056),UP:e(81939)}},28388:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Events:e(94030),KeyboardManager:e(71064),KeyboardPlugin:e(89666),Key:e(50165),KeyCodes:e(11873),KeyCombo:e(95625),AdvanceKeyCombo:e(60258),ProcessKeyCombo:e(2544),ResetKeyCombo:e(88754),JustDown:e(42460),JustUp:e(53162),DownDuration:e(64964),UpDuration:e(70331)}},64964:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a===void 0&&(a=50);var v=e.plugin.game.loop.time-e.timeDown;return e.isDown&&v<a};i.exports=g},42460:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e._justDown?(e._justDown=!1,!0):!1};i.exports=g},53162:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e._justUp?(e._justUp=!1,!0):!1};i.exports=g},50165:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(6659),u=e(94030),o=new a({Extends:v,initialize:function(l,f){v.call(this),this.plugin=l,this.keyCode=f,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(c){return this.emitOnRepeat=c,this},onDown:function(c){this.originalEvent=c,this.enabled&&(this.altKey=c.altKey,this.ctrlKey=c.ctrlKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.location=c.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(u.DOWN,this,c):(this.isDown=!0,this.isUp=!1,this.timeDown=c.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(u.DOWN,this,c)))},onUp:function(c){this.originalEvent=c,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=c.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(u.UP,this,c))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});i.exports=o},11873:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};i.exports=g},48044:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(11873),v={};for(var u in a)v[a[u]]=u;i.exports=v},70331:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a===void 0&&(a=50);var v=e.plugin.game.loop.time-e.timeUp;return e.isUp&&v<a};i.exports=g},7905:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(90185),u=e(33963),o=e(72283),c=new a({initialize:function(f){this.manager=f,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,f.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputMouse,this.target=l.inputMouseEventTarget,this.passive=l.inputMousePassive,this.preventDefaultDown=l.inputMousePreventDefaultDown,this.preventDefaultUp=l.inputMousePreventDefaultUp,this.preventDefaultMove=l.inputMousePreventDefaultMove,this.preventDefaultWheel=l.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},requestPointerLock:function(){if(v.pointerLock){var l=this.target;l.requestPointerLock=l.requestPointerLock||l.mozRequestPointerLock||l.webkitRequestPointerLock,l.requestPointerLock()}},releasePointerLock:function(){v.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var l=this.target;if(l){var f=this,m=this.manager,h=m.canvas,p=window&&window.focus&&m.game.config.autoFocus;this.onMouseMove=function(x){!x.defaultPrevented&&f.enabled&&m&&m.enabled&&(m.onMouseMove(x),f.preventDefaultMove&&x.preventDefault())},this.onMouseDown=function(x){p&&window.focus(),!x.defaultPrevented&&f.enabled&&m&&m.enabled&&(m.onMouseDown(x),f.preventDefaultDown&&x.target===h&&x.preventDefault())},this.onMouseDownWindow=function(x){!x.defaultPrevented&&f.enabled&&m&&m.enabled&&x.target!==h&&m.onMouseDown(x)},this.onMouseUp=function(x){!x.defaultPrevented&&f.enabled&&m&&m.enabled&&(m.onMouseUp(x),f.preventDefaultUp&&x.target===h&&x.preventDefault())},this.onMouseUpWindow=function(x){!x.defaultPrevented&&f.enabled&&m&&m.enabled&&x.target!==h&&m.onMouseUp(x)},this.onMouseOver=function(x){!x.defaultPrevented&&f.enabled&&m&&m.enabled&&m.setCanvasOver(x)},this.onMouseOut=function(x){!x.defaultPrevented&&f.enabled&&m&&m.enabled&&m.setCanvasOut(x)},this.onMouseWheel=function(x){!x.defaultPrevented&&f.enabled&&m&&m.enabled&&m.onMouseWheel(x),f.preventDefaultWheel&&x.target===h&&x.preventDefault()};var y={passive:!0};if(l.addEventListener("mousemove",this.onMouseMove),l.addEventListener("mousedown",this.onMouseDown),l.addEventListener("mouseup",this.onMouseUp),l.addEventListener("mouseover",this.onMouseOver,y),l.addEventListener("mouseout",this.onMouseOut,y),this.preventDefaultWheel?l.addEventListener("wheel",this.onMouseWheel,{passive:!1}):l.addEventListener("wheel",this.onMouseWheel,y),window&&m.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,y),window.top.addEventListener("mouseup",this.onMouseUpWindow,y)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,y),window.addEventListener("mouseup",this.onMouseUpWindow,y),this.isTop=!1}v.pointerLock&&(this.pointerLockChange=function(x){var T=f.target;f.locked=document.pointerLockElement===T||document.mozPointerLockElement===T||document.webkitPointerLockElement===T,m.onPointerLockChange(x)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("mousemove",this.onMouseMove),l.removeEventListener("mousedown",this.onMouseDown),l.removeEventListener("mouseup",this.onMouseUp),l.removeEventListener("mouseover",this.onMouseOver),l.removeEventListener("mouseout",this.onMouseOut),window&&(l=this.isTop?window.top:window,l.removeEventListener("mousedown",this.onMouseDownWindow),l.removeEventListener("mouseup",this.onMouseUpWindow)),v.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});i.exports=c},11343:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={MouseManager:e(7905)}},37579:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(33963),u=e(72283),o=new a({initialize:function(l){this.manager=l,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=u,this.onTouchStartWindow=u,this.onTouchMove=u,this.onTouchEnd=u,this.onTouchEndWindow=u,this.onTouchCancel=u,this.onTouchCancelWindow=u,this.isTop=!0,l.events.once(v.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputTouch,this.target=c.inputTouchEventTarget,this.capture=c.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,c.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(c){return c.preventDefault(),!1}),this},startListeners:function(){var c=this.target;if(c){var l=this,f=this.manager,m=f.canvas,h=window&&window.focus&&f.game.config.autoFocus;this.onTouchMove=function(T){!T.defaultPrevented&&l.enabled&&f&&f.enabled&&(f.onTouchMove(T),l.capture&&T.cancelable&&T.preventDefault())},this.onTouchStart=function(T){h&&window.focus(),!T.defaultPrevented&&l.enabled&&f&&f.enabled&&(f.onTouchStart(T),l.capture&&T.cancelable&&T.target===m&&T.preventDefault())},this.onTouchStartWindow=function(T){!T.defaultPrevented&&l.enabled&&f&&f.enabled&&T.target!==m&&f.onTouchStart(T)},this.onTouchEnd=function(T){!T.defaultPrevented&&l.enabled&&f&&f.enabled&&(f.onTouchEnd(T),l.capture&&T.cancelable&&T.target===m&&T.preventDefault())},this.onTouchEndWindow=function(T){!T.defaultPrevented&&l.enabled&&f&&f.enabled&&T.target!==m&&f.onTouchEnd(T)},this.onTouchCancel=function(T){!T.defaultPrevented&&l.enabled&&f&&f.enabled&&(f.onTouchCancel(T),l.capture&&T.preventDefault())},this.onTouchCancelWindow=function(T){!T.defaultPrevented&&l.enabled&&f&&f.enabled&&f.onTouchCancel(T)};var p=this.capture,y={passive:!0},x={passive:!1};if(c.addEventListener("touchstart",this.onTouchStart,p?x:y),c.addEventListener("touchmove",this.onTouchMove,p?x:y),c.addEventListener("touchend",this.onTouchEnd,p?x:y),c.addEventListener("touchcancel",this.onTouchCancel,p?x:y),window&&f.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,x),window.top.addEventListener("touchend",this.onTouchEndWindow,x),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,x)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,x),window.addEventListener("touchend",this.onTouchEndWindow,x),window.addEventListener("touchcancel",this.onTouchCancelWindow,x),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var c=this.target;c.removeEventListener("touchstart",this.onTouchStart),c.removeEventListener("touchmove",this.onTouchMove),c.removeEventListener("touchend",this.onTouchEnd),c.removeEventListener("touchcancel",this.onTouchCancel),window&&(c=this.isTop?window.top:window,c.removeEventListener("touchstart",this.onTouchStartWindow),c.removeEventListener("touchend",this.onTouchEndWindow),c.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});i.exports=o},77423:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={TouchManager:e(37579)}},98035:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(683),o=e(72632),c=e(30750),l=e(43531),f=e(88490),m=e(33868),h=new a({initialize:function(y,x){if(this.loader=y,this.cache=o(x,"cache",!1),this.type=o(x,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=o(x,"key",!1);var T=this.key;if(y.prefix&&y.prefix!==""&&(this.key=y.prefix+T),!this.key)throw new Error("Invalid File key: "+this.key);var C=o(x,"url");C===void 0?C=y.path+T+"."+o(x,"extension",""):typeof C=="string"&&!C.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(C=y.path+C),this.url=C,this.src="",this.xhrSettings=m(o(x,"responseType",void 0)),o(x,"xhrSettings",!1)&&(this.xhrSettings=l(this.xhrSettings,o(x,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?v.FILE_POPULATED:v.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(x,"config",{}),this.multiFile,this.linkFile},setLink:function(p){this.linkFile=p,p.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===v.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=v.FILE_LOADING,this.src=c(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=f(this,this.loader.xhr))},onLoad:function(p,y){var x=p.responseURL&&this.loader.localSchemes.some(function(E){return p.responseURL.indexOf(E)===0}),T=x&&y.target.status===0,C=!(y.target&&y.target.status!==200)||T;p.readyState===4&&p.status>=400&&p.status<=599&&(C=!1),this.state=v.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,C)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(p){p.lengthComputable&&(this.bytesLoaded=p.loaded,this.bytesTotal=p.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=v.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=v.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=v.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(p){if(this.state!==v.FILE_PENDING_DESTROY){p===void 0&&(p=this.data);var y=this.key,x=this.type;this.loader.emit(u.FILE_COMPLETE,y,x,p),this.loader.emit(u.FILE_KEY_COMPLETE+x+"-"+y,y,x,p),this.loader.flagForRemoval(this),this.state=v.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});h.createObjectURL=function(p,y,x){if(typeof URL=="function")p.src=URL.createObjectURL(y);else{var T=new FileReader;T.onload=function(){p.removeAttribute("crossOrigin"),p.src="data:"+(y.type||x)+";base64,"+T.result.split(",")[1]},T.onerror=p.onerror,T.readAsDataURL(y)}},h.revokeObjectURL=function(p){typeof URL=="function"&&URL.revokeObjectURL(p.src)},i.exports=h},76846:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={},e={install:function(a){for(var v in g)a[v]=g[v]},register:function(a,v){g[a]=v},destroy:function(){g={}}};i.exports=e},30750:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:a+e.url:!1};i.exports=g},67285:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(58403),o=e(6659),c=e(683),l=e(76846),f=e(72632),m=e(10850),h=e(91963),p=e(7599),y=e(33868),x=new a({Extends:o,initialize:function(C){o.call(this);var E=C.sys.game.config,A=C.sys.settings.loader;this.scene=C,this.systems=C.sys,this.cacheManager=C.sys.cache,this.textureManager=C.sys.textures,this.sceneManager=C.sys.game.scene,l.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(f(A,"baseURL",E.loaderBaseURL)),this.setPath(f(A,"path",E.loaderPath)),this.setPrefix(f(A,"prefix",E.loaderPrefix)),this.maxParallelDownloads=f(A,"maxParallelDownloads",E.loaderMaxParallelDownloads),this.xhr=y(f(A,"responseType",E.loaderResponseType),f(A,"async",E.loaderAsync),f(A,"user",E.loaderUser),f(A,"password",E.loaderPassword),f(A,"timeout",E.loaderTimeout),f(A,"withCredentials",E.loaderWithCredentials)),this.crossOrigin=f(A,"crossOrigin",E.loaderCrossOrigin),this.imageLoadType=f(A,"imageLoadType",E.loaderImageLoadType),this.localSchemes=f(A,"localScheme",E.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new u,this.inflight=new u,this.queue=new u,this._deleteQueue=new u,this.totalFailed=0,this.totalComplete=0,this.state=v.LOADER_IDLE,this.multiKeyIndex=0,C.sys.events.once(p.BOOT,this.boot,this),C.sys.events.on(p.START,this.pluginStart,this)},boot:function(){this.systems.events.once(p.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(p.SHUTDOWN,this.shutdown,this)},setBaseURL:function(T){return T===void 0&&(T=""),T!==""&&T.substr(-1)!=="/"&&(T=T.concat("/")),this.baseURL=T,this},setPath:function(T){return T===void 0&&(T=""),T!==""&&T.substr(-1)!=="/"&&(T=T.concat("/")),this.path=T,this},setPrefix:function(T){return T===void 0&&(T=""),this.prefix=T,this},setCORS:function(T){return this.crossOrigin=T,this},addFile:function(T){Array.isArray(T)||(T=[T]);for(var C=0;C<T.length;C++){var E=T[C];this.keyExists(E)||(this.list.set(E),this.emit(c.ADD,E.key,E.type,this,E),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(T){var C=T.hasCacheConflict();return C||this.list.iterate(function(E){if(E.type===T.type&&E.key===T.key)return C=!0,!1}),!C&&this.isLoading()&&(this.inflight.iterate(function(E){if(E.type===T.type&&E.key===T.key)return C=!0,!1}),this.queue.iterate(function(E){if(E.type===T.type&&E.key===T.key)return C=!0,!1})),C},addPack:function(T,C){if(typeof C=="string"){var E=m(T,C);E&&(T={packKey:E})}var A=0,w=this.baseURL,b=this.path,I=this.prefix;for(var R in T)if(Object.prototype.hasOwnProperty.call(T,R)){var N=T[R],F=f(N,"baseURL",w),P=f(N,"path",b),O=f(N,"prefix",I),M=f(N,"files",null),L=f(N,"defaultType","void");if(Array.isArray(M)){this.setBaseURL(F),this.setPath(P),this.setPrefix(O);for(var k=0;k<M.length;k++){var V=M[k],W=V.hasOwnProperty("type")?V.type:L;this[W]&&(this[W](V),A++)}}}return this.setBaseURL(w),this.setPath(b),this.setPrefix(I),A>0},isLoading:function(){return this.state===v.LOADER_LOADING||this.state===v.LOADER_PROCESSING},isReady:function(){return this.state===v.LOADER_IDLE||this.state===v.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(c.START,this),this.list.size===0?this.loadComplete():(this.state=v.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(p.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(c.PROGRESS,this.progress)},update:function(){this.state===v.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(T){if((T.state===v.FILE_POPULATED||T.state===v.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(T),this.list.delete(T),T.crossOrigin||(T.crossOrigin=this.crossOrigin),T.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(T,C){this.inflight&&(this.inflight.delete(T),this.updateProgress(),C?(this.totalComplete++,this.queue.set(T),this.emit(c.FILE_LOAD,T),T.onProcess()):(this.totalFailed++,this._deleteQueue.set(T),this.emit(c.FILE_LOAD_ERROR,T),this.fileProcessComplete(T)))},fileProcessComplete:function(T){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(T.state===v.FILE_ERRORED?T.multiFile&&T.multiFile.onFileFailed(T):T.state===v.FILE_COMPLETE&&(T.multiFile?T.multiFile.isReadyToProcess()&&(T.multiFile.addToCache(),T.multiFile.pendingDestroy()):(T.addToCache(),T.pendingDestroy())),this.queue.delete(T),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(c.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=v.LOADER_COMPLETE,this.systems.events.off(p.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(c.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(T){this._deleteQueue.set(T)},saveJSON:function(T,C){return this.save(JSON.stringify(T),C)},save:function(T,C,E){C===void 0&&(C="file.json"),E===void 0&&(E="application/json");var A=new Blob([T],{type:E}),w=URL.createObjectURL(A),b=document.createElement("a");return b.download=C,b.textContent="Download "+C,b.href=w,b.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var T=this.systems.game.config,C=this.systems.settings.loader;this.setBaseURL(f(C,"baseURL",T.loaderBaseURL)),this.setPath(f(C,"path",T.loaderPath)),this.setPrefix(f(C,"prefix",T.loaderPrefix)),this.state=v.LOADER_IDLE},shutdown:function(){this.reset(),this.state=v.LOADER_SHUTDOWN,this.systems.events.off(p.UPDATE,this.update,this),this.systems.events.off(p.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=v.LOADER_DESTROYED,this.systems.events.off(p.UPDATE,this.update,this),this.systems.events.off(p.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});h.register("Loader",x,"load"),i.exports=x},43531:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(98611),v=e(33868),u=function(o,c){var l=o===void 0?v():a({},o);if(c)for(var f in c)c[f]!==void 0&&(l[f]=c[f]);return l};i.exports=u},45176:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(683),o=new a({initialize:function(l,f,m,h){var p=[];h.forEach(function(x){x&&p.push(x)}),this.loader=l,this.type=f,this.key=m,this.multiKeyIndex=l.multiKeyIndex++,this.files=p,this.state=v.FILE_PENDING,this.complete=!1,this.pending=p.length,this.failed=0,this.config={},this.baseURL=l.baseURL,this.path=l.path,this.prefix=l.prefix;for(var y=0;y<p.length;y++)p[y].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(c){return this.files.push(c),c.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(c){var l=this.files.indexOf(c);l!==-1&&this.pending--},onFileFailed:function(c){var l=this.files.indexOf(c);l!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,c.type,c.key))},pendingDestroy:function(){if(this.state!==v.FILE_PENDING_DESTROY){var c=this.key,l=this.type;this.loader.emit(u.FILE_COMPLETE,c,l),this.loader.emit(u.FILE_KEY_COMPLETE+l+"-"+c,c,l),this.loader.flagForRemoval(this);for(var f=0;f<this.files.length;f++)this.files[f].pendingDestroy();this.state=v.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});i.exports=o},88490:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43531),v=function(u,o){var c=a(o,u.xhrSettings),l=new XMLHttpRequest;if(l.open("GET",u.src,c.async,c.user,c.password),l.responseType=u.xhrSettings.responseType,l.timeout=c.timeout,c.headers)for(var f in c.headers)l.setRequestHeader(f,c.headers[f]);return c.header&&c.headerValue&&l.setRequestHeader(c.header,c.headerValue),c.requestedWith&&l.setRequestHeader("X-Requested-With",c.requestedWith),c.overrideMimeType&&l.overrideMimeType(c.overrideMimeType),c.withCredentials&&(l.withCredentials=!0),l.onload=u.onLoad.bind(u,l),l.onerror=u.onError.bind(u,l),l.onprogress=u.onProgress.bind(u),l.send(),l};i.exports=v},33868:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o,c){return e===void 0&&(e=""),a===void 0&&(a=!0),v===void 0&&(v=""),u===void 0&&(u=""),o===void 0&&(o=0),c===void 0&&(c=!1),{responseType:e,async:a,user:v,password:u,timeout:o,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:c}};i.exports=g},12117:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};i.exports=g},7398:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="addfile"},52187:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="complete"},36627:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="filecomplete"},81925:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="filecomplete-"},29774:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="loaderror"},20943:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="load"},74693:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="fileprogress"},71176:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="postprocess"},88984:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="progress"},72753:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="start"},683:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADD:e(7398),COMPLETE:e(52187),FILE_COMPLETE:e(36627),FILE_KEY_COMPLETE:e(81925),FILE_LOAD_ERROR:e(29774),FILE_LOAD:e(20943),FILE_PROGRESS:e(74693),POST_PROCESS:e(71176),PROGRESS:e(88984),START:e(72753)}},46468:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(76846),u=e(70806),o=e(683),c=new a({Extends:u,initialize:function(f,m,h,p,y){u.call(this,f,m,h,p,y),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),u.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});v.register("animation",function(l,f,m,h){if(Array.isArray(l))for(var p=0;p<l.length;p++)this.addFile(new c(this,l[p]));else this.addFile(new c(this,l,f,h,m));return this}),i.exports=c},31648:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(76846),u=e(72632),o=e(42927),c=e(42911),l=e(70806),f=e(45176),m=new a({Extends:f,initialize:function(p,y,x,T,C,E){var A,w;if(c(y)){var b=y;y=u(b,"key"),A=new o(p,{key:y,url:u(b,"textureURL"),extension:u(b,"textureExtension","png"),normalMap:u(b,"normalMap"),xhrSettings:u(b,"textureXhrSettings")}),w=new l(p,{key:y,url:u(b,"atlasURL"),extension:u(b,"atlasExtension","json"),xhrSettings:u(b,"atlasXhrSettings")})}else A=new o(p,y,x,C),w=new l(p,y,T,E);A.linkFile?f.call(this,p,"atlasjson",y,[A,w,A.linkFile]):f.call(this,p,"atlasjson",y,[A,w])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],p=this.files[1],y=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,p.data,y),p.addToCache(),this.complete=!0}}});v.register("aseprite",function(h,p,y,x,T){var C;if(Array.isArray(h))for(var E=0;E<h.length;E++)C=new m(this,h[E]),this.addFile(C.files);else C=new m(this,h,p,y,x,T),this.addFile(C.files);return this}),i.exports=m},73152:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(76846),u=e(72632),o=e(42927),c=e(42911),l=e(70806),f=e(45176),m=new a({Extends:f,initialize:function(p,y,x,T,C,E){var A,w;if(c(y)){var b=y;y=u(b,"key"),A=new o(p,{key:y,url:u(b,"textureURL"),extension:u(b,"textureExtension","png"),normalMap:u(b,"normalMap"),xhrSettings:u(b,"textureXhrSettings")}),w=new l(p,{key:y,url:u(b,"atlasURL"),extension:u(b,"atlasExtension","json"),xhrSettings:u(b,"atlasXhrSettings")})}else A=new o(p,y,x,C),w=new l(p,y,T,E);A.linkFile?f.call(this,p,"atlasjson",y,[A,w,A.linkFile]):f.call(this,p,"atlasjson",y,[A,w])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],p=this.files[1],y=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(h.key,h.data,p.data,y),this.complete=!0}}});v.register("atlas",function(h,p,y,x,T){var C;if(Array.isArray(h))for(var E=0;E<h.length;E++)C=new m(this,h[E]),this.addFile(C.files);else C=new m(this,h,p,y,x,T),this.addFile(C.files);return this}),i.exports=m},24616:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(76846),u=e(72632),o=e(42927),c=e(42911),l=e(45176),f=e(15297),m=new a({Extends:l,initialize:function(p,y,x,T,C,E){var A,w;if(c(y)){var b=y;y=u(b,"key"),A=new o(p,{key:y,url:u(b,"textureURL"),extension:u(b,"textureExtension","png"),normalMap:u(b,"normalMap"),xhrSettings:u(b,"textureXhrSettings")}),w=new f(p,{key:y,url:u(b,"atlasURL"),extension:u(b,"atlasExtension","xml"),xhrSettings:u(b,"atlasXhrSettings")})}else A=new o(p,y,x,C),w=new f(p,y,T,E);A.linkFile?l.call(this,p,"atlasxml",y,[A,w,A.linkFile]):l.call(this,p,"atlasxml",y,[A,w])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],p=this.files[1],y=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(h.key,h.data,p.data,y),this.complete=!0}}});v.register("atlasXML",function(h,p,y,x,T){var C;if(Array.isArray(h))for(var E=0;E<h.length;E++)C=new m(this,h[E]),this.addFile(C.files);else C=new m(this,h,p,y,x,T),this.addFile(C.files);return this}),i.exports=m},67448:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(30929),f=e(42911),m=new a({Extends:u,initialize:function(p,y,x,T,C){if(f(y)){var E=y;y=c(E,"key"),T=c(E,"xhrSettings"),C=c(E,"context",C)}var A={type:"audio",cache:p.cacheManager.audio,extension:x.type,responseType:"arraybuffer",key:y,url:x.url,xhrSettings:T,config:{context:C}};u.call(this,p,A)},onProcess:function(){this.state=v.FILE_PROCESSING;var h=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(p){h.data=p,h.onProcessComplete()},function(p){console.error("Error decoding audio: "+h.key+" - ",p?p.message:null),h.onProcessError()}),this.config.context=null}});m.create=function(h,p,y,x,T){var C=h.systems.game,E=C.config.audio,A=C.device.audio;f(p)&&(y=c(p,"url",[]),x=c(p,"config",{}));var w=m.getAudioURL(C,y);return w?A.webAudio&&!E.disableWebAudio?new m(h,p,w,T,C.sound.context):new l(h,p,w,x):(console.warn('No audio URLs for "%s" matched this device',p),null)},m.getAudioURL=function(h,p){Array.isArray(p)||(p=[p]);for(var y=0;y<p.length;y++){var x=c(p[y],"url",p[y]);if(x.indexOf("blob:")===0||x.indexOf("data:")===0)return{url:x,type:""};var T=x.match(/\.([a-zA-Z0-9]+)($|\?)/);if(T=c(p[y],"type",T?T[1]:"").toLowerCase(),h.device.audio[T])return{url:x,type:T}}return null},o.register("audio",function(h,p,y,x){var T=this.systems.game,C=T.config.audio,E=T.device.audio;if(C.noAudio||!E.webAudio&&!E.audioData)return this;var A;if(Array.isArray(h))for(var w=0;w<h.length;w++)A=m.create(this,h[w]),A&&this.addFile(A);else A=m.create(this,h,p,y,x),A&&this.addFile(A);return this}),i.exports=m},66109:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(67448),v=e(56694),u=e(76846),o=e(72632),c=e(42911),l=e(70806),f=e(45176),m=new v({Extends:f,initialize:function(p,y,x,T,C,E,A){if(c(y)){var w=y;y=o(w,"key"),x=o(w,"jsonURL"),T=o(w,"audioURL"),C=o(w,"audioConfig"),E=o(w,"audioXhrSettings"),A=o(w,"jsonXhrSettings")}var b;if(!T)b=new l(p,y,x,A),f.call(this,p,"audiosprite",y,[b]),this.config.resourceLoad=!0,this.config.audioConfig=C,this.config.audioXhrSettings=E;else{var I=a.create(p,y,T,C,E);I&&(b=new l(p,y,x,A),f.call(this,p,"audiosprite",y,[I,b]),this.config.resourceLoad=!1)}},onFileComplete:function(h){var p=this.files.indexOf(h);if(p!==-1&&(this.pending--,this.config.resourceLoad&&h.type==="json"&&h.data.hasOwnProperty("resources"))){var y=h.data.resources,x=o(this.config,"audioConfig"),T=o(this.config,"audioXhrSettings"),C=a.create(this.loader,h.key,y,x,T);C&&(this.addToMultiFile(C),this.loader.addFile(C))}},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],p=this.files[1];h.addToCache(),p.addToCache(),this.complete=!0}}});u.register("audioSprite",function(h,p,y,x,T,C){var E=this.systems.game,A=E.config.audio,w=E.device.audio;if(A&&A.noAudio||!w.webAudio&&!w.audioData)return this;var b;if(Array.isArray(h))for(var I=0;I<h.length;I++)b=new m(this,h[I]),b.files&&this.addFile(b.files);else b=new m(this,h,p,y,x,T,C),b.files&&this.addFile(b.files);return this})},40612:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=new a({Extends:u,initialize:function(h,p,y,x,T){var C="bin";if(l(p)){var E=p;p=c(E,"key"),y=c(E,"url"),x=c(E,"xhrSettings"),C=c(E,"extension",C),T=c(E,"dataType",T)}var A={type:"binary",cache:h.cacheManager.binary,extension:C,responseType:"arraybuffer",key:p,url:y,xhrSettings:x,config:{dataType:T}};u.call(this,h,A)},onProcess:function(){this.state=v.FILE_PROCESSING;var m=this.config.dataType;this.data=m?new m(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(m,h,p,y){if(Array.isArray(m))for(var x=0;x<m.length;x++)this.addFile(new f(this,m[x]));else this.addFile(new f(this,m,h,y,p));return this}),i.exports=f},54565:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(76846),u=e(72632),o=e(42927),c=e(42911),l=e(45176),f=e(31476),m=e(15297),h=new a({Extends:l,initialize:function(y,x,T,C,E,A){var w,b;if(c(x)){var I=x;x=u(I,"key"),w=new o(y,{key:x,url:u(I,"textureURL"),extension:u(I,"textureExtension","png"),normalMap:u(I,"normalMap"),xhrSettings:u(I,"textureXhrSettings")}),b=new m(y,{key:x,url:u(I,"fontDataURL"),extension:u(I,"fontDataExtension","xml"),xhrSettings:u(I,"fontDataXhrSettings")})}else w=new o(y,x,T,E),b=new m(y,x,C,A);w.linkFile?l.call(this,y,"bitmapfont",x,[w,b,w.linkFile]):l.call(this,y,"bitmapfont",x,[w,b])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],y=this.files[1];p.addToCache();var x=p.cache.get(p.key),T=f(y.data,p.cache.getFrame(p.key),0,0,x);this.loader.cacheManager.bitmapFont.add(p.key,{data:T,texture:p.key,frame:null}),this.complete=!0}}});v.register("bitmapFont",function(p,y,x,T,C){var E;if(Array.isArray(p))for(var A=0;A<p.length;A++)E=new h(this,p[A]),this.addFile(E.files);else E=new h(this,p,y,x,T,C),this.addFile(E.files);return this}),i.exports=h},99898:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=new a({Extends:u,initialize:function(h,p,y,x){var T="css";if(l(p)){var C=p;p=c(C,"key"),y=c(C,"url"),x=c(C,"xhrSettings"),T=c(C,"extension",T)}var E={type:"script",cache:!1,extension:T,responseType:"text",key:p,url:y,xhrSettings:x};u.call(this,h,E)},onProcess:function(){this.state=v.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(m,h,p){if(Array.isArray(m))for(var y=0;y<m.length;y++)this.addFile(new f(this,m[y]));else this.addFile(new f(this,m,h,p));return this}),i.exports=f},47375:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73152),v=e(40612),u=e(56694),o=e(76846),c=e(72632),l=e(42927),f=e(42911),m=e(70806),h=e(67409),p=e(30657),y=e(80802),x=e(45176),T=e(24904),C=new u({Extends:x,initialize:function(A,w,b,I){if(b.multiAtlasURL){var R=new m(A,{key:w,url:b.multiAtlasURL,xhrSettings:I,config:b});x.call(this,A,"texture",w,[R])}else{var N=b.textureURL.substr(b.textureURL.length-3);b.type||(b.type=N.toLowerCase()==="ktx"?"KTX":"PVR");var F=new v(A,{key:w,url:b.textureURL,extension:N,xhrSettings:I,config:b});if(b.atlasURL){var P=new m(A,{key:w,url:b.atlasURL,xhrSettings:I,config:b});x.call(this,A,"texture",w,[F,P])}else x.call(this,A,"texture",w,[F])}this.config=b},onFileComplete:function(E){var A=this.files.indexOf(E);if(A!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(E.type==="json"&&E.data.hasOwnProperty("textures")){var w=E.data.textures,b=this.config,I=this.loader,R=I.baseURL,N=I.path,F=I.prefix,P=c(b,"multiBaseURL",this.baseURL),O=c(b,"multiPath",this.path),M=c(b,"prefix",this.prefix),L=c(b,"textureXhrSettings");P&&I.setBaseURL(P),O&&I.setPath(O),M&&I.setPrefix(M);for(var k=0;k<w.length;k++){var V=w[k].image,W="CMA"+this.multiKeyIndex+"_"+V,K=new v(I,W,V,L);if(this.addToMultiFile(K),I.addFile(K),w[k].normalMap){var B=new v(I,W,w[k].normalMap,L);B.type="normalMap",K.setLink(B),this.addToMultiFile(B),I.addFile(B)}}I.setBaseURL(R),I.setPath(N),I.setPrefix(F)}}},addToCache:function(){if(this.isReadyToProcess()){var E=this.config;if(E.multiAtlasURL)this.addMultiToCache();else{var A=this.loader.systems.renderer,w=this.loader.textureManager,b,I=this.files[0],R=this.files[1];if(E.type==="PVR"?b=T(I.data):E.type==="KTX"&&(b=h(I.data)),b&&A.supportsCompressedTexture(E.format,b.internalFormat)){b.format=A.getCompressedTextureName(E.format,b.internalFormat);var N=R&&R.data?R.data:null;w.addCompressedTexture(I.key,b,N)}}this.complete=!0}},addMultiToCache:function(){for(var E=this.config,A=this.files[0],w=[],b=[],I=[],R=this.loader.systems.renderer,N=this.loader.textureManager,F,P=1;P<this.files.length;P++){var O=this.files[P];if(O.type!=="normalMap")for(var M=O.key.indexOf("_"),L=O.key.substr(M+1),k=O.data,V=0;V<A.data.textures.length;V++){var W=A.data.textures[V];if(W.image===L){E.type==="PVR"?F=T(k):E.type==="KTX"&&(F=h(k)),F&&R.supportsCompressedTexture(E.format,F.internalFormat)&&(F.format=R.getCompressedTextureName(E.format,F.internalFormat),b.push(F),w.push(W),O.linkFile&&I.push(O.linkFile.data));break}}}I.length===0&&(I=void 0),N.addAtlasJSONArray(this.key,b,w,I),this.complete=!0}});o.register("texture",function(E,A,w){var b=this.systems.renderer,I=function(N,F,P,O){var M={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(f(F)){var L=F;F=c(L,"key"),P=c(L,"url"),O=c(L,"xhrSettings")}var k=!1;for(var V in P)if(b.supportsCompressedTexture(V)){var W=P[V];typeof W=="string"?M.textureURL=W:M=p(W,M),M.format=V.toUpperCase(),k=!0;break}if(!k)console.warn("No supported compressed texture format or IMG fallback",F);else if(M.format==="IMG"){var K,B;M.multiAtlasURL?(B=new y(N,F,M.multiAtlasURL,M.multiPath,M.multiBaseURL,O),K=B.files):M.atlasURL?(B=new a(N,F,M.textureURL,M.atlasURL,O),K=B.files):K=new l(N,F,M.textureURL,O),N.addFile(K)}else{var G=new C(N,F,M,O);N.addFile(G.files)}};if(Array.isArray(E))for(var R=0;R<E.length;R++)I(this,E[R]);else I(this,E,A,w);return this}),i.exports=C},46568:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=e(31053),m=new a({Extends:u,initialize:function(p,y,x,T,C){var E="glsl";if(l(y)){var A=y;y=c(A,"key"),x=c(A,"url"),T=c(A,"shaderType","fragment"),C=c(A,"xhrSettings"),E=c(A,"extension",E)}else T===void 0&&(T="fragment");var w={type:"glsl",cache:p.cacheManager.shader,extension:E,responseType:"text",key:y,url:x,config:{shaderType:T},xhrSettings:C};u.call(this,p,w)},onProcess:function(){this.state=v.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h=this.data.split(`
`),p=this.extractBlock(h,0);if(p)for(;p;){var y=this.getShaderName(p.header),x=this.getShaderType(p.header),T=this.getShaderUniforms(p.header),C=p.shader;if(this.cache.has(y)){var E=this.cache.get(y);x==="fragment"?E.fragmentSrc=C:E.vertexSrc=C,E.uniforms||(E.uniforms=T)}else x==="fragment"?this.cache.add(y,new f(y,C,"",T)):this.cache.add(y,new f(y,"",C,T));p=this.extractBlock(h,p.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new f(this.key,this.data)):this.cache.add(this.key,new f(this.key,"",this.data))},getShaderName:function(h){for(var p=0;p<h.length;p++){var y=h[p].trim();if(y.substring(0,5)==="name:")return y.substring(5).trim()}return this.key},getShaderType:function(h){for(var p=0;p<h.length;p++){var y=h[p].trim();if(y.substring(0,5)==="type:")return y.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(h){for(var p={},y=0;y<h.length;y++){var x=h[y].trim();if(x.substring(0,8)==="uniform."){var T=x.indexOf(":");if(T){var C=x.substring(8,T);try{p[C]=JSON.parse(x.substring(T+1))}catch{console.warn("Invalid uniform JSON: "+C)}}}}return p},extractBlock:function(h,p){for(var y=-1,x=-1,T=-1,C=!1,E=!1,A=[],w=[],b=p;b<h.length;b++){var I=h[b].trim();if(I==="---")if(y===-1)y=b,C=!0;else if(C)x=b,C=!1,E=!0;else{E=!1;break}else C?A.push(I):E&&(w.push(I),T=b)}return!C&&x!==-1?{header:A,shader:w.join(`
`),offset:T}:null}});o.register("glsl",function(h,p,y,x){if(Array.isArray(h))for(var T=0;T<h.length;T++)this.addFile(new m(this,h[T]));else this.addFile(new m(this,h,p,y,x));return this}),i.exports=m},30929:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(683),u=e(98035),o=e(72632),c=e(30750),l=e(42911),f=new a({Extends:u,initialize:function(h,p,y,x){if(l(p)){var T=p;p=o(T,"key"),x=o(T,"config",x)}var C={type:"audio",cache:h.cacheManager.audio,extension:y.type,key:p,url:y.url,config:x};u.call(this,h,C),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var m=0;m<this.data.length;m++){var h=this.data[m];h.oncanplaythrough=null,h.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(m){var h=m.target;h.oncanplaythrough=null,h.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(v.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var m=this.config&&this.config.instances||1;this.filesTotal=m,this.filesLoaded=0,this.percentComplete=0;for(var h=0;h<m;h++){var p=new Audio;p.dataset||(p.dataset={}),p.dataset.name=this.key+("0"+h).slice(-2),p.dataset.used="false",this.locked?p.dataset.locked="true":(p.dataset.locked="false",p.preload="auto",p.oncanplaythrough=this.onProgress.bind(this),p.onerror=this.onError.bind(this)),this.data.push(p)}for(h=0;h<this.data.length;h++)p=this.data[h],p.src=c(this,this.loader.baseURL),this.locked||p.load();this.locked&&setTimeout(this.onLoad.bind(this))}});i.exports=f},77459:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=new a({Extends:u,initialize:function(h,p,y,x){var T="html";if(l(p)){var C=p;p=c(C,"key"),y=c(C,"url"),x=c(C,"xhrSettings"),T=c(C,"extension",T)}var E={type:"text",cache:h.cacheManager.html,extension:T,responseType:"text",key:p,url:y,xhrSettings:x};u.call(this,h,E)},onProcess:function(){this.state=v.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(m,h,p){if(Array.isArray(m))for(var y=0;y<m.length;y++)this.addFile(new f(this,m[y]));else this.addFile(new f(this,m,h,p));return this}),i.exports=f},9755:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=new a({Extends:u,initialize:function(h,p,y,x,T,C){x===void 0&&(x=512),T===void 0&&(T=512);var E="html";if(l(p)){var A=p;p=c(A,"key"),y=c(A,"url"),C=c(A,"xhrSettings"),E=c(A,"extension",E),x=c(A,"width",x),T=c(A,"height",T)}var w={type:"html",cache:h.textureManager,extension:E,responseType:"text",key:p,url:y,xhrSettings:C,config:{width:x,height:T}};u.call(this,h,w)},onProcess:function(){this.state=v.FILE_PROCESSING;var m=this.config.width,h=this.config.height,p=[];p.push('<svg width="'+m+'px" height="'+h+'px" viewBox="0 0 '+m+" "+h+'" xmlns="http://www.w3.org/2000/svg">'),p.push('<foreignObject width="100%" height="100%">'),p.push('<body xmlns="http://www.w3.org/1999/xhtml">'),p.push(this.xhrLoader.responseText),p.push("</body>"),p.push("</foreignObject>"),p.push("</svg>");var y=[p.join(`
`)],x=this;try{var T=new window.Blob(y,{type:"image/svg+xml;charset=utf-8"})}catch{x.state=v.FILE_ERRORED,x.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){u.revokeObjectURL(x.data),x.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(x.data),x.onProcessError()},u.createObjectURL(this.data,T,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});o.register("htmlTexture",function(m,h,p,y,x){if(Array.isArray(m))for(var T=0;T<m.length;T++)this.addFile(new f(this,m[T]));else this.addFile(new f(this,m,h,p,y,x));return this}),i.exports=f},42927:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=e(30750),m=new a({Extends:u,initialize:function h(p,y,x,T,C){var E="png",A;if(l(y)){var w=y;y=c(w,"key"),x=c(w,"url"),A=c(w,"normalMap"),T=c(w,"xhrSettings"),E=c(w,"extension",E),C=c(w,"frameConfig")}Array.isArray(x)&&(A=x[1],x=x[0]);var b={type:"image",cache:p.textureManager,extension:E,responseType:"blob",key:y,url:x,xhrSettings:T,config:C};if(u.call(this,p,b),A){var I=new h(p,this.key,A,T,C);I.type="normalMap",this.setLink(I),p.addFile(I)}this.useImageElementLoad=p.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=v.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var h=this;this.data.onload=function(){u.revokeObjectURL(h.data),h.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(h.data),h.onProcessError()},u.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var h=this.state;this.state=v.FILE_PROCESSING,h===v.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=v.FILE_LOADING,this.src=f(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var h=this;this.data.onload=function(){h.state=v.FILE_LOADED,h.loader.nextFile(h,!0)},this.data.onerror=function(){h.loader.nextFile(h,!1)},this.data.src=this.src}},addToCache:function(){var h=this.linkFile;h?h.state>=v.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addImage(this.key,h.data,this.data):this.cache.addImage(this.key,this.data,h.data)):this.cache.addImage(this.key,this.data)}});o.register("image",function(h,p,y){if(Array.isArray(h))for(var x=0;x<h.length;x++)this.addFile(new m(this,h[x]));else this.addFile(new m(this,h,p,y));return this}),i.exports=m},70806:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(10850),f=e(42911),m=new a({Extends:u,initialize:function(p,y,x,T,C){var E="json";if(f(y)){var A=y;y=c(A,"key"),x=c(A,"url"),T=c(A,"xhrSettings"),E=c(A,"extension",E),C=c(A,"dataKey",C)}var w={type:"json",cache:p.cacheManager.json,extension:E,responseType:"text",key:y,url:x,xhrSettings:T,config:C};u.call(this,p,w),f(x)&&(C?this.data=l(x,C):this.data=x,this.state=v.FILE_POPULATED)},onProcess:function(){if(this.state!==v.FILE_POPULATED){this.state=v.FILE_PROCESSING;try{var h=JSON.parse(this.xhrLoader.responseText)}catch(y){throw this.onProcessError(),y}var p=this.config;typeof p=="string"?this.data=l(h,p,h):this.data=h}this.onProcessComplete()}});o.register("json",function(h,p,y,x){if(Array.isArray(h))for(var T=0;T<h.length;T++)this.addFile(new m(this,h[T]));else this.addFile(new m(this,h,p,x,y));return this}),i.exports=m},80802:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(76846),u=e(72632),o=e(42927),c=e(42911),l=e(70806),f=e(45176),m=new a({Extends:f,initialize:function(p,y,x,T,C,E,A){if(c(y)){var w=y;y=u(w,"key"),u(w,"url",!1)?x=u(w,"url"):x=u(w,"atlasURL"),E=u(w,"xhrSettings"),T=u(w,"path"),C=u(w,"baseURL"),A=u(w,"textureXhrSettings")}var b=new l(p,y,x,E);f.call(this,p,"multiatlas",y,[b]),this.config.path=T,this.config.baseURL=C,this.config.textureXhrSettings=A},onFileComplete:function(h){var p=this.files.indexOf(h);if(p!==-1&&(this.pending--,h.type==="json"&&h.data.hasOwnProperty("textures"))){var y=h.data.textures,x=this.config,T=this.loader,C=T.baseURL,E=T.path,A=T.prefix,w=u(x,"baseURL",this.baseURL),b=u(x,"path",this.path),I=u(x,"prefix",this.prefix),R=u(x,"textureXhrSettings");T.setBaseURL(w),T.setPath(b),T.setPrefix(I);for(var N=0;N<y.length;N++){var F=y[N].image,P="MA"+this.multiKeyIndex+"_"+F,O=new o(T,P,F,R);if(this.addToMultiFile(O),T.addFile(O),y[N].normalMap){var M=new o(T,P,y[N].normalMap,R);M.type="normalMap",O.setLink(M),this.addToMultiFile(M),T.addFile(M)}}T.setBaseURL(C),T.setPath(E),T.setPrefix(A)}},addToCache:function(){if(this.isReadyToProcess()){for(var h=this.files[0],p=[],y=[],x=[],T=1;T<this.files.length;T++){var C=this.files[T];if(C.type!=="normalMap")for(var E=C.key.indexOf("_"),A=C.key.substr(E+1),w=C.data,b=0;b<h.data.textures.length;b++){var I=h.data.textures[b];if(I.image===A){y.push(w),p.push(I),C.linkFile&&x.push(C.linkFile.data);break}}}x.length===0&&(x=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,y,p,x),this.complete=!0}}});v.register("multiatlas",function(h,p,y,x,T){var C;if(Array.isArray(h))for(var E=0;E<h.length;E++)C=new m(this,h[E]),this.addFile(C.files);else C=new m(this,h,p,y,x,T),this.addFile(C.files);return this}),i.exports=m},39034:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(76846),u=e(72632),o=e(42911),c=e(45176),l=e(55188),f=new a({Extends:c,initialize:function(h,p,y,x){var T="js",C=[];if(o(p)){var E=p;p=u(E,"key"),y=u(E,"url"),x=u(E,"xhrSettings"),T=u(E,"extension",T)}Array.isArray(y)||(y=[y]);for(var A=0;A<y.length;A++){var w=new l(h,{key:p+"_"+A.toString(),url:y[A],extension:T,xhrSettings:x});w.onProcess=function(){this.onProcessComplete()},C.push(w)}c.call(this,h,"scripts",p,C)},addToCache:function(){if(this.isReadyToProcess()){for(var m=0;m<this.files.length;m++){var h=this.files[m];h.data=document.createElement("script"),h.data.language="javascript",h.data.type="text/javascript",h.data.defer=!1,h.data.text=h.xhrLoader.responseText,document.head.appendChild(h.data)}this.complete=!0}}});v.register("scripts",function(m,h,p){var y;if(Array.isArray(m))for(var x=0;x<m.length;x++)y=new f(this,m[x]),this.addFile(y.files);else y=new f(this,m,h,p),this.addFile(y.files);return this}),i.exports=f},85527:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(76846),u=e(72632),o=e(42911),c=e(45176),l=e(27291),f=e(76799),m=e(86897),h=new a({Extends:c,initialize:function(y,x,T,C,E,A){var w,b,I=y.cacheManager.obj;if(o(x)){var R=x;x=u(R,"key"),w=new m(y,{key:x,type:"obj",cache:I,url:u(R,"url"),extension:u(R,"extension","obj"),xhrSettings:u(R,"xhrSettings"),config:{flipUV:u(R,"flipUV",E)}}),C=u(R,"matURL"),C&&(b=new m(y,{key:x,type:"mat",cache:I,url:C,extension:u(R,"matExtension","mat"),xhrSettings:u(R,"xhrSettings")}))}else w=new m(y,{key:x,url:T,type:"obj",cache:I,extension:"obj",xhrSettings:A,config:{flipUV:E}}),C&&(b=new m(y,{key:x,url:C,type:"mat",cache:I,extension:"mat",xhrSettings:A}));c.call(this,y,"obj",x,[w,b])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],y=this.files[1],x=l(p.data,p.config.flipUV);y&&(x.materials=f(y.data)),p.cache.add(p.key,x),this.complete=!0}}});v.register("obj",function(p,y,x,T,C){var E;if(Array.isArray(p))for(var A=0;A<p.length;A++)E=new h(this,p[A]),this.addFile(E.files);else E=new h(this,p,y,x,T,C),this.addFile(E.files);return this}),i.exports=h},3616:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(76846),o=e(70806),c=new a({Extends:o,initialize:function(f,m,h,p,y){o.call(this,f,m,h,p,y),this.type="packfile"},onProcess:function(){if(this.state!==v.FILE_POPULATED&&(this.state=v.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var l={};l[this.config]=this.data,this.data=l}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});u.register("pack",function(l,f,m,h){if(Array.isArray(l))for(var p=0;p<l.length;p++)this.addFile(new c(this,l[p]));else this.addFile(new c(this,l,f,h,m));return this}),i.exports=c},12217:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=new a({Extends:u,initialize:function(h,p,y,x,T,C){var E="js";if(l(p)){var A=p;p=c(A,"key"),y=c(A,"url"),C=c(A,"xhrSettings"),E=c(A,"extension",E),x=c(A,"start"),T=c(A,"mapping")}var w={type:"plugin",cache:!1,extension:E,responseType:"text",key:p,url:y,xhrSettings:C,config:{start:x,mapping:T}};u.call(this,h,w),typeof y=="function"&&(this.data=y,this.state=v.FILE_POPULATED)},onProcess:function(){var m=this.loader.systems.plugins,h=this.config,p=c(h,"start",!1),y=c(h,"mapping",null);if(this.state===v.FILE_POPULATED)m.install(this.key,this.data,p,y);else{this.state=v.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var x=m.install(this.key,window[this.key],p,y);(p||y)&&(this.loader.systems[y]=x,this.loader.scene[y]=x)}this.onProcessComplete()}});o.register("plugin",function(m,h,p,y,x){if(Array.isArray(m))for(var T=0;T<m.length;T++)this.addFile(new f(this,m[T]));else this.addFile(new f(this,m,h,p,y,x));return this}),i.exports=f},4474:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=new a({Extends:u,initialize:function(h,p,y,x,T){var C="svg";if(l(p)){var E=p;p=c(E,"key"),y=c(E,"url"),x=c(E,"svgConfig",{}),T=c(E,"xhrSettings"),C=c(E,"extension",C)}var A={type:"svg",cache:h.textureManager,extension:C,responseType:"text",key:p,url:y,xhrSettings:T,config:{width:c(x,"width"),height:c(x,"height"),scale:c(x,"scale")}};u.call(this,h,A)},onProcess:function(){this.state=v.FILE_PROCESSING;var m=this.xhrLoader.responseText,h=[m],p=this.config.width,y=this.config.height,x=this.config.scale;t:if(p&&y||x){var T=null,C=new DOMParser;T=C.parseFromString(m,"text/xml");var E=T.getElementsByTagName("svg")[0],A=E.hasAttribute("viewBox"),w=parseFloat(E.getAttribute("width")),b=parseFloat(E.getAttribute("height"));if(!A&&w&&b)E.setAttribute("viewBox","0  0 "+w+" "+b);else if(A&&!w&&!b){var I=E.getAttribute("viewBox").split(/\s+|,/);w=I[2],b=I[3]}if(x)if(w&&b)p=w*x,y=b*x;else break t;E.setAttribute("width",p.toString()+"px"),E.setAttribute("height",y.toString()+"px"),h=[new XMLSerializer().serializeToString(E)]}try{var R=new window.Blob(h,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var N=this,F=!1;this.data.onload=function(){F||u.revokeObjectURL(N.data),N.onProcessComplete()},this.data.onerror=function(){F?N.onProcessError():(F=!0,u.revokeObjectURL(N.data),N.data.src="data:image/svg+xml,"+encodeURIComponent(h.join("")))},u.createObjectURL(this.data,R,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});o.register("svg",function(m,h,p,y){if(Array.isArray(m))for(var x=0;x<m.length;x++)this.addFile(new f(this,m[x]));else this.addFile(new f(this,m,h,p,y));return this}),i.exports=f},95171:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=new a({Extends:u,initialize:function(h,p,y,x){var T="js";if(l(p)){var C=p;p=c(C,"key"),y=c(C,"url"),x=c(C,"xhrSettings"),T=c(C,"extension",T)}var E={type:"text",extension:T,responseType:"text",key:p,url:y,xhrSettings:x};u.call(this,h,E)},onProcess:function(){this.state=v.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var m=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),h=eval;this.loader.sceneManager.add(this.key,h(m)),this.complete=!0}});o.register("sceneFile",function(m,h,p){if(Array.isArray(m))for(var y=0;y<m.length;y++)this.addFile(new f(this,m[y]));else this.addFile(new f(this,m,h,p));return this}),i.exports=f},82458:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=new a({Extends:u,initialize:function(h,p,y,x,T,C){var E="js";if(l(p)){var A=p;p=c(A,"key"),y=c(A,"url"),C=c(A,"xhrSettings"),E=c(A,"extension",E),x=c(A,"systemKey"),T=c(A,"sceneKey")}var w={type:"scenePlugin",cache:!1,extension:E,responseType:"text",key:p,url:y,xhrSettings:C,config:{systemKey:x,sceneKey:T}};u.call(this,h,w),typeof y=="function"&&(this.data=y,this.state=v.FILE_POPULATED)},onProcess:function(){var m=this.loader.systems.plugins,h=this.config,p=this.key,y=c(h,"systemKey",p),x=c(h,"sceneKey",p);this.state===v.FILE_POPULATED?m.installScenePlugin(y,this.data,x,this.loader.scene,!0):(this.state=v.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),m.installScenePlugin(y,window[this.key],x,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(m,h,p,y,x){if(Array.isArray(m))for(var T=0;T<m.length;T++)this.addFile(new f(this,m[T]));else this.addFile(new f(this,m,h,p,y,x));return this}),i.exports=f},55188:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=new a({Extends:u,initialize:function(h,p,y,x,T){var C="js";if(l(p)){var E=p;p=c(E,"key"),y=c(E,"url"),x=c(E,"type","script"),T=c(E,"xhrSettings"),C=c(E,"extension",C)}else x===void 0&&(x="script");var A={type:x,cache:!1,extension:C,responseType:"text",key:p,url:y,xhrSettings:T};u.call(this,h,A)},onProcess:function(){this.state=v.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(m,h,p,y){if(Array.isArray(m))for(var x=0;x<m.length;x++)this.addFile(new f(this,m[x]));else this.addFile(new f(this,m,h,p,y));return this}),i.exports=f},33536:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(76846),o=e(42927),c=new a({Extends:o,initialize:function(f,m,h,p,y){o.call(this,f,m,h,y,p),this.type="spritesheet"},addToCache:function(){var l=this.linkFile;l?l.state>=v.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,l.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,l.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});u.register("spritesheet",function(l,f,m,h){if(Array.isArray(l))for(var p=0;p<l.length;p++)this.addFile(new c(this,l[p]));else this.addFile(new c(this,l,f,m,h));return this}),i.exports=c},86897:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=new a({Extends:u,initialize:function(h,p,y,x){var T="text",C="txt",E=h.cacheManager.text;if(l(p)){var A=p;p=c(A,"key"),y=c(A,"url"),x=c(A,"xhrSettings"),C=c(A,"extension",C),T=c(A,"type",T),E=c(A,"cache",E)}var w={type:T,cache:E,extension:C,responseType:"text",key:p,url:y,xhrSettings:x};u.call(this,h,w)},onProcess:function(){this.state=v.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(m,h,p){if(Array.isArray(m))for(var y=0;y<m.length;y++)this.addFile(new f(this,m[y]));else this.addFile(new f(this,m,h,p));return this}),i.exports=f},58673:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=e(93560),m=new a({Extends:u,initialize:function(p,y,x,T){var C="csv";if(l(y)){var E=y;y=c(E,"key"),x=c(E,"url"),T=c(E,"xhrSettings"),C=c(E,"extension",C)}var A={type:"tilemapCSV",cache:p.cacheManager.tilemap,extension:C,responseType:"text",key:y,url:x,xhrSettings:T};u.call(this,p,A),this.tilemapFormat=f.CSV},onProcess:function(){this.state=v.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,h)}});o.register("tilemapCSV",function(h,p,y){if(Array.isArray(h))for(var x=0;x<h.length;x++)this.addFile(new m(this,h[x]));else this.addFile(new m(this,h,p,y));return this}),i.exports=m},98896:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(76846),u=e(70806),o=e(93560),c=new a({Extends:u,initialize:function(f,m,h,p){u.call(this,f,m,h,p),this.type="tilemapJSON",this.cache=f.cacheManager.tilemap},addToCache:function(){var l={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,l)}});v.register("tilemapImpact",function(l,f,m){if(Array.isArray(l))for(var h=0;h<l.length;h++)this.addFile(new c(this,l[h]));else this.addFile(new c(this,l,f,m));return this}),i.exports=c},50563:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(76846),u=e(70806),o=e(93560),c=new a({Extends:u,initialize:function(f,m,h,p){u.call(this,f,m,h,p),this.type="tilemapJSON",this.cache=f.cacheManager.tilemap},addToCache:function(){var l={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,l)}});v.register("tilemapTiledJSON",function(l,f,m){if(Array.isArray(l))for(var h=0;h<l.length;h++)this.addFile(new c(this,l[h]));else this.addFile(new c(this,l,f,m));return this}),i.exports=c},82857:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(76846),u=e(72632),o=e(42927),c=e(42911),l=e(45176),f=e(86897),m=new a({Extends:l,initialize:function(p,y,x,T,C,E){var A,w;if(c(y)){var b=y;y=u(b,"key"),A=new o(p,{key:y,url:u(b,"textureURL"),extension:u(b,"textureExtension","png"),normalMap:u(b,"normalMap"),xhrSettings:u(b,"textureXhrSettings")}),w=new f(p,{key:y,url:u(b,"atlasURL"),extension:u(b,"atlasExtension","txt"),xhrSettings:u(b,"atlasXhrSettings")})}else A=new o(p,y,x,C),w=new f(p,y,T,E);A.linkFile?l.call(this,p,"unityatlas",y,[A,w,A.linkFile]):l.call(this,p,"unityatlas",y,[A,w])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],p=this.files[1],y=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(h.key,h.data,p.data,y),this.complete=!0}}});v.register("unityAtlas",function(h,p,y,x,T){var C;if(Array.isArray(h))for(var E=0;E<h.length;E++)C=new m(this,h[E]),this.addFile(C.files);else C=new m(this,h,p,y,x,T),this.addFile(C.files);return this}),i.exports=m},22833:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(30750),l=e(72632),f=e(42911),m=new a({Extends:u,initialize:function(p,y,x,T){if(T===void 0&&(T=!1),f(y)){var C=y;y=l(C,"key"),x=l(C,"url",[]),T=l(C,"noAudio",!1)}var E=p.systems.game.device.video.getVideoURL(x);E||console.warn("VideoFile: No supported format for "+y);var A={type:"video",cache:p.cacheManager.video,extension:E.type,key:y,url:E.url,config:{noAudio:T}};u.call(this,p,A)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=c(this,this.loader.baseURL),this.state=v.FILE_LOADED,this.loader.nextFile(this,!0)}});o.register("video",function(h,p,y){if(Array.isArray(h))for(var x=0;x<h.length;x++)this.addFile(new m(this,h[x]));else this.addFile(new m(this,h,p,y));return this}),i.exports=m},15297:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12117),u=e(98035),o=e(76846),c=e(72632),l=e(42911),f=e(89200),m=new a({Extends:u,initialize:function(p,y,x,T){var C="xml";if(l(y)){var E=y;y=c(E,"key"),x=c(E,"url"),T=c(E,"xhrSettings"),C=c(E,"extension",C)}var A={type:"xml",cache:p.cacheManager.xml,extension:C,responseType:"text",key:y,url:x,xhrSettings:T};u.call(this,p,A)},onProcess:function(){this.state=v.FILE_PROCESSING,this.data=f(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});o.register("xml",function(h,p,y){if(Array.isArray(h))for(var x=0;x<h.length;x++)this.addFile(new m(this,h[x]));else this.addFile(new m(this,h,p,y));return this}),i.exports=m},34034:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AnimationJSONFile:e(46468),AsepriteFile:e(31648),AtlasJSONFile:e(73152),AtlasXMLFile:e(24616),AudioFile:e(67448),AudioSpriteFile:e(66109),BinaryFile:e(40612),BitmapFontFile:e(54565),CompressedTextureFile:e(47375),CSSFile:e(99898),GLSLFile:e(46568),HTML5AudioFile:e(30929),HTMLFile:e(77459),HTMLTextureFile:e(9755),ImageFile:e(42927),JSONFile:e(70806),MultiAtlasFile:e(80802),MultiScriptFile:e(39034),OBJFile:e(85527),PackFile:e(3616),PluginFile:e(12217),SceneFile:e(95171),ScenePluginFile:e(82458),ScriptFile:e(55188),SpriteSheetFile:e(33536),SVGFile:e(4474),TextFile:e(86897),TilemapCSVFile:e(58673),TilemapImpactFile:e(98896),TilemapJSONFile:e(50563),UnityAtlasFile:e(82857),VideoFile:e(22833),XMLFile:e(15297)}},95695:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12117),v=e(98611),u={Events:e(683),FileTypes:e(34034),File:e(98035),FileTypesManager:e(76846),GetURL:e(30750),LoaderPlugin:e(67285),MergeXHRSettings:e(43531),MultiFile:e(45176),XHRLoader:e(88490),XHRSettings:e(33868)};u=v(!1,u,a),i.exports=u},26042:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){for(var a=0,v=0;v<e.length;v++)a+=+e[v];return a/e.length};i.exports=g},22824:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(8034),v=function(u,o){return a(u)/a(o)/a(u-o)};i.exports=v},17489:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return Math.floor(Math.random()*(a-e+1)+e)};i.exports=g},14976:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o){var c=(u-a)*.5,l=(o-v)*.5,f=e*e,m=e*f;return(2*v-2*u+c+l)*m+(-3*v+3*u-2*c-l)*f+c*e+v};i.exports=g},89129:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){a===void 0&&(a=0),v===void 0&&(v=10);var u=Math.pow(v,-a);return Math.ceil(e*u)/u};i.exports=g},82897:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return Math.max(a,Math.min(v,e))};i.exports=g},75606:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83392),v=function(u){return u*a.DEG_TO_RAD};i.exports=v},767:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return Math.abs(e-a)};i.exports=g},9849:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=e(56694),u=e(16650),o=e(72283),c=new u,l=new v({initialize:function f(m,h,p,y){m===void 0&&(m=0),h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y=f.DefaultOrder),this._x=m,this._y=h,this._z=p,this._order=y,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(f){this._x=f,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(f){this._y=f,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(f){this._z=f,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(f){this._order=f,this.onChangeCallback(this)}},set:function(f,m,h,p){return p===void 0&&(p=this._order),this._x=f,this._y=m,this._z=h,this._order=p,this.onChangeCallback(this),this},copy:function(f){return this.set(f.x,f.y,f.z,f.order)},setFromQuaternion:function(f,m,h){return m===void 0&&(m=this._order),h===void 0&&(h=!1),c.fromQuat(f),this.setFromRotationMatrix(c,m,h)},setFromRotationMatrix:function(f,m,h){m===void 0&&(m=this._order),h===void 0&&(h=!1);var p=f.val,y=p[0],x=p[4],T=p[8],C=p[1],E=p[5],A=p[9],w=p[2],b=p[6],I=p[10],R=0,N=0,F=0,P=.99999;switch(m){case"XYZ":{N=Math.asin(a(T,-1,1)),Math.abs(T)<P?(R=Math.atan2(-A,I),F=Math.atan2(-x,y)):R=Math.atan2(b,E);break}case"YXZ":{R=Math.asin(-a(A,-1,1)),Math.abs(A)<P?(N=Math.atan2(T,I),F=Math.atan2(C,E)):N=Math.atan2(-w,y);break}case"ZXY":{R=Math.asin(a(b,-1,1)),Math.abs(b)<P?(N=Math.atan2(-w,I),F=Math.atan2(-x,E)):F=Math.atan2(C,y);break}case"ZYX":{N=Math.asin(-a(w,-1,1)),Math.abs(w)<P?(R=Math.atan2(b,I),F=Math.atan2(C,y)):F=Math.atan2(-x,E);break}case"YZX":{F=Math.asin(a(C,-1,1)),Math.abs(C)<P?(R=Math.atan2(-A,E),N=Math.atan2(-w,y)):N=Math.atan2(T,I);break}case"XZY":{F=Math.asin(-a(x,-1,1)),Math.abs(x)<P?(R=Math.atan2(b,E),N=Math.atan2(T,y)):R=Math.atan2(-A,I);break}}return this._x=R,this._y=N,this._z=F,this._order=m,h&&this.onChangeCallback(this),this}});l.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],l.DefaultOrder="XYZ",i.exports=l},8034:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){if(e===0)return 1;for(var a=e;--e;)a*=e;return a};i.exports=g},61616:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return Math.random()*(a-e)+e};i.exports=g},60679:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){a===void 0&&(a=0),v===void 0&&(v=10);var u=Math.pow(v,-a);return Math.floor(e*u)/u};i.exports=g},91806:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=function(u,o,c){return u=a(u,0,1),(c-o)*u+o};i.exports=v},79366:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e/a/1e3};i.exports=g},43776:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e==parseFloat(e)?!(e%2):void 0};i.exports=g},58442:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e===parseFloat(e)?!(e%2):void 0};i.exports=g},42798:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return(a-e)*v+e};i.exports=g},61072:i=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return v===void 0&&(v=0),e.clone().lerp(a,v)};i.exports=g},5341:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o){this.val=new Float32Array(9),o?this.copy(o):this.identity()},clone:function(){return new v(this)},set:function(u){return this.copy(u)},copy:function(u){var o=this.val,c=u.val;return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],this},fromMat4:function(u){var o=u.val,c=this.val;return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[4],c[4]=o[5],c[5]=o[6],c[6]=o[8],c[7]=o[9],c[8]=o[10],this},fromArray:function(u){var o=this.val;return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[4]=u[4],o[5]=u[5],o[6]=u[6],o[7]=u[7],o[8]=u[8],this},identity:function(){var u=this.val;return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=1,u[5]=0,u[6]=0,u[7]=0,u[8]=1,this},transpose:function(){var u=this.val,o=u[1],c=u[2],l=u[5];return u[1]=u[3],u[2]=u[6],u[3]=o,u[5]=u[7],u[6]=c,u[7]=l,this},invert:function(){var u=this.val,o=u[0],c=u[1],l=u[2],f=u[3],m=u[4],h=u[5],p=u[6],y=u[7],x=u[8],T=x*m-h*y,C=-x*f+h*p,E=y*f-m*p,A=o*T+c*C+l*E;return A?(A=1/A,u[0]=T*A,u[1]=(-x*c+l*y)*A,u[2]=(h*c-l*m)*A,u[3]=C*A,u[4]=(x*o-l*p)*A,u[5]=(-h*o+l*f)*A,u[6]=E*A,u[7]=(-y*o+c*p)*A,u[8]=(m*o-c*f)*A,this):null},adjoint:function(){var u=this.val,o=u[0],c=u[1],l=u[2],f=u[3],m=u[4],h=u[5],p=u[6],y=u[7],x=u[8];return u[0]=m*x-h*y,u[1]=l*y-c*x,u[2]=c*h-l*m,u[3]=h*p-f*x,u[4]=o*x-l*p,u[5]=l*f-o*h,u[6]=f*y-m*p,u[7]=c*p-o*y,u[8]=o*m-c*f,this},determinant:function(){var u=this.val,o=u[0],c=u[1],l=u[2],f=u[3],m=u[4],h=u[5],p=u[6],y=u[7],x=u[8];return o*(x*m-h*y)+c*(-x*f+h*p)+l*(y*f-m*p)},multiply:function(u){var o=this.val,c=o[0],l=o[1],f=o[2],m=o[3],h=o[4],p=o[5],y=o[6],x=o[7],T=o[8],C=u.val,E=C[0],A=C[1],w=C[2],b=C[3],I=C[4],R=C[5],N=C[6],F=C[7],P=C[8];return o[0]=E*c+A*m+w*y,o[1]=E*l+A*h+w*x,o[2]=E*f+A*p+w*T,o[3]=b*c+I*m+R*y,o[4]=b*l+I*h+R*x,o[5]=b*f+I*p+R*T,o[6]=N*c+F*m+P*y,o[7]=N*l+F*h+P*x,o[8]=N*f+F*p+P*T,this},translate:function(u){var o=this.val,c=u.x,l=u.y;return o[6]=c*o[0]+l*o[3]+o[6],o[7]=c*o[1]+l*o[4]+o[7],o[8]=c*o[2]+l*o[5]+o[8],this},rotate:function(u){var o=this.val,c=o[0],l=o[1],f=o[2],m=o[3],h=o[4],p=o[5],y=Math.sin(u),x=Math.cos(u);return o[0]=x*c+y*m,o[1]=x*l+y*h,o[2]=x*f+y*p,o[3]=x*m-y*c,o[4]=x*h-y*l,o[5]=x*p-y*f,this},scale:function(u){var o=this.val,c=u.x,l=u.y;return o[0]=c*o[0],o[1]=c*o[1],o[2]=c*o[2],o[3]=l*o[3],o[4]=l*o[4],o[5]=l*o[5],this},fromQuat:function(u){var o=u.x,c=u.y,l=u.z,f=u.w,m=o+o,h=c+c,p=l+l,y=o*m,x=o*h,T=o*p,C=c*h,E=c*p,A=l*p,w=f*m,b=f*h,I=f*p,R=this.val;return R[0]=1-(C+A),R[3]=x+I,R[6]=T-b,R[1]=x-I,R[4]=1-(y+A),R[7]=E+w,R[2]=T+b,R[5]=E-w,R[8]=1-(y+C),this},normalFromMat4:function(u){var o=u.val,c=this.val,l=o[0],f=o[1],m=o[2],h=o[3],p=o[4],y=o[5],x=o[6],T=o[7],C=o[8],E=o[9],A=o[10],w=o[11],b=o[12],I=o[13],R=o[14],N=o[15],F=l*y-f*p,P=l*x-m*p,O=l*T-h*p,M=f*x-m*y,L=f*T-h*y,k=m*T-h*x,V=C*I-E*b,W=C*R-A*b,K=C*N-w*b,B=E*R-A*I,G=E*N-w*I,D=A*N-w*R,$=F*D-P*G+O*B+M*K-L*W+k*V;return $?($=1/$,c[0]=(y*D-x*G+T*B)*$,c[1]=(x*K-p*D-T*W)*$,c[2]=(p*G-y*K+T*V)*$,c[3]=(m*G-f*D-h*B)*$,c[4]=(l*D-m*K+h*W)*$,c[5]=(f*K-l*G-h*V)*$,c[6]=(I*k-R*L+N*M)*$,c[7]=(R*O-b*k-N*P)*$,c[8]=(b*L-I*O+N*F)*$,this):null}});i.exports=v},16650:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(70015),u=1e-6,o=new a({initialize:function(y){this.val=new Float32Array(16),y?this.copy(y):this.identity()},clone:function(){return new o(this)},set:function(p){return this.copy(p)},setValues:function(p,y,x,T,C,E,A,w,b,I,R,N,F,P,O,M){var L=this.val;return L[0]=p,L[1]=y,L[2]=x,L[3]=T,L[4]=C,L[5]=E,L[6]=A,L[7]=w,L[8]=b,L[9]=I,L[10]=R,L[11]=N,L[12]=F,L[13]=P,L[14]=O,L[15]=M,this},copy:function(p){var y=p.val;return this.setValues(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15])},fromArray:function(p){return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(p,y,x){var T=c.fromQuat(x),C=T.val,E=y.x,A=y.y,w=y.z;return this.setValues(C[0]*E,C[1]*E,C[2]*E,0,C[4]*A,C[5]*A,C[6]*A,0,C[8]*w,C[9]*w,C[10]*w,0,p.x,p.y,p.z,1)},xyz:function(p,y,x){this.identity();var T=this.val;return T[12]=p,T[13]=y,T[14]=x,this},scaling:function(p,y,x){this.zero();var T=this.val;return T[0]=p,T[5]=y,T[10]=x,T[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var p=this.val,y=p[1],x=p[2],T=p[3],C=p[6],E=p[7],A=p[11];return p[1]=p[4],p[2]=p[8],p[3]=p[12],p[4]=y,p[6]=p[9],p[7]=p[13],p[8]=x,p[9]=C,p[11]=p[14],p[12]=T,p[13]=E,p[14]=A,this},getInverse:function(p){return this.copy(p),this.invert()},invert:function(){var p=this.val,y=p[0],x=p[1],T=p[2],C=p[3],E=p[4],A=p[5],w=p[6],b=p[7],I=p[8],R=p[9],N=p[10],F=p[11],P=p[12],O=p[13],M=p[14],L=p[15],k=y*A-x*E,V=y*w-T*E,W=y*b-C*E,K=x*w-T*A,B=x*b-C*A,G=T*b-C*w,D=I*O-R*P,$=I*M-N*P,z=I*L-F*P,H=R*M-N*O,Y=R*L-F*O,Z=N*L-F*M,Q=k*Z-V*Y+W*H+K*z-B*$+G*D;return Q?(Q=1/Q,this.setValues((A*Z-w*Y+b*H)*Q,(T*Y-x*Z-C*H)*Q,(O*G-M*B+L*K)*Q,(N*B-R*G-F*K)*Q,(w*z-E*Z-b*$)*Q,(y*Z-T*z+C*$)*Q,(M*W-P*G-L*V)*Q,(I*G-N*W+F*V)*Q,(E*Y-A*z+b*D)*Q,(x*z-y*Y-C*D)*Q,(P*B-O*W+L*k)*Q,(R*W-I*B-F*k)*Q,(A*$-E*H-w*D)*Q,(y*H-x*$+T*D)*Q,(O*V-P*K-M*k)*Q,(I*K-R*V+N*k)*Q)):this},adjoint:function(){var p=this.val,y=p[0],x=p[1],T=p[2],C=p[3],E=p[4],A=p[5],w=p[6],b=p[7],I=p[8],R=p[9],N=p[10],F=p[11],P=p[12],O=p[13],M=p[14],L=p[15];return this.setValues(A*(N*L-F*M)-R*(w*L-b*M)+O*(w*F-b*N),-(x*(N*L-F*M)-R*(T*L-C*M)+O*(T*F-C*N)),x*(w*L-b*M)-A*(T*L-C*M)+O*(T*b-C*w),-(x*(w*F-b*N)-A*(T*F-C*N)+R*(T*b-C*w)),-(E*(N*L-F*M)-I*(w*L-b*M)+P*(w*F-b*N)),y*(N*L-F*M)-I*(T*L-C*M)+P*(T*F-C*N),-(y*(w*L-b*M)-E*(T*L-C*M)+P*(T*b-C*w)),y*(w*F-b*N)-E*(T*F-C*N)+I*(T*b-C*w),E*(R*L-F*O)-I*(A*L-b*O)+P*(A*F-b*R),-(y*(R*L-F*O)-I*(x*L-C*O)+P*(x*F-C*R)),y*(A*L-b*O)-E*(x*L-C*O)+P*(x*b-C*A),-(y*(A*F-b*R)-E*(x*F-C*R)+I*(x*b-C*A)),-(E*(R*M-N*O)-I*(A*M-w*O)+P*(A*N-w*R)),y*(R*M-N*O)-I*(x*M-T*O)+P*(x*N-T*R),-(y*(A*M-w*O)-E*(x*M-T*O)+P*(x*w-T*A)),y*(A*N-w*R)-E*(x*N-T*R)+I*(x*w-T*A))},determinant:function(){var p=this.val,y=p[0],x=p[1],T=p[2],C=p[3],E=p[4],A=p[5],w=p[6],b=p[7],I=p[8],R=p[9],N=p[10],F=p[11],P=p[12],O=p[13],M=p[14],L=p[15],k=y*A-x*E,V=y*w-T*E,W=y*b-C*E,K=x*w-T*A,B=x*b-C*A,G=T*b-C*w,D=I*O-R*P,$=I*M-N*P,z=I*L-F*P,H=R*M-N*O,Y=R*L-F*O,Z=N*L-F*M;return k*Z-V*Y+W*H+K*z-B*$+G*D},multiply:function(p){var y=this.val,x=y[0],T=y[1],C=y[2],E=y[3],A=y[4],w=y[5],b=y[6],I=y[7],R=y[8],N=y[9],F=y[10],P=y[11],O=y[12],M=y[13],L=y[14],k=y[15],V=p.val,W=V[0],K=V[1],B=V[2],G=V[3];return y[0]=W*x+K*A+B*R+G*O,y[1]=W*T+K*w+B*N+G*M,y[2]=W*C+K*b+B*F+G*L,y[3]=W*E+K*I+B*P+G*k,W=V[4],K=V[5],B=V[6],G=V[7],y[4]=W*x+K*A+B*R+G*O,y[5]=W*T+K*w+B*N+G*M,y[6]=W*C+K*b+B*F+G*L,y[7]=W*E+K*I+B*P+G*k,W=V[8],K=V[9],B=V[10],G=V[11],y[8]=W*x+K*A+B*R+G*O,y[9]=W*T+K*w+B*N+G*M,y[10]=W*C+K*b+B*F+G*L,y[11]=W*E+K*I+B*P+G*k,W=V[12],K=V[13],B=V[14],G=V[15],y[12]=W*x+K*A+B*R+G*O,y[13]=W*T+K*w+B*N+G*M,y[14]=W*C+K*b+B*F+G*L,y[15]=W*E+K*I+B*P+G*k,this},multiplyLocal:function(p){var y=this.val,x=p.val;return this.setValues(y[0]*x[0]+y[1]*x[4]+y[2]*x[8]+y[3]*x[12],y[0]*x[1]+y[1]*x[5]+y[2]*x[9]+y[3]*x[13],y[0]*x[2]+y[1]*x[6]+y[2]*x[10]+y[3]*x[14],y[0]*x[3]+y[1]*x[7]+y[2]*x[11]+y[3]*x[15],y[4]*x[0]+y[5]*x[4]+y[6]*x[8]+y[7]*x[12],y[4]*x[1]+y[5]*x[5]+y[6]*x[9]+y[7]*x[13],y[4]*x[2]+y[5]*x[6]+y[6]*x[10]+y[7]*x[14],y[4]*x[3]+y[5]*x[7]+y[6]*x[11]+y[7]*x[15],y[8]*x[0]+y[9]*x[4]+y[10]*x[8]+y[11]*x[12],y[8]*x[1]+y[9]*x[5]+y[10]*x[9]+y[11]*x[13],y[8]*x[2]+y[9]*x[6]+y[10]*x[10]+y[11]*x[14],y[8]*x[3]+y[9]*x[7]+y[10]*x[11]+y[11]*x[15],y[12]*x[0]+y[13]*x[4]+y[14]*x[8]+y[15]*x[12],y[12]*x[1]+y[13]*x[5]+y[14]*x[9]+y[15]*x[13],y[12]*x[2]+y[13]*x[6]+y[14]*x[10]+y[15]*x[14],y[12]*x[3]+y[13]*x[7]+y[14]*x[11]+y[15]*x[15])},premultiply:function(p){return this.multiplyMatrices(p,this)},multiplyMatrices:function(p,y){var x=p.val,T=y.val,C=x[0],E=x[4],A=x[8],w=x[12],b=x[1],I=x[5],R=x[9],N=x[13],F=x[2],P=x[6],O=x[10],M=x[14],L=x[3],k=x[7],V=x[11],W=x[15],K=T[0],B=T[4],G=T[8],D=T[12],$=T[1],z=T[5],H=T[9],Y=T[13],Z=T[2],Q=T[6],tt=T[10],et=T[14],lt=T[3],ut=T[7],ct=T[11],ht=T[15];return this.setValues(C*K+E*$+A*Z+w*lt,b*K+I*$+R*Z+N*lt,F*K+P*$+O*Z+M*lt,L*K+k*$+V*Z+W*lt,C*B+E*z+A*Q+w*ut,b*B+I*z+R*Q+N*ut,F*B+P*z+O*Q+M*ut,L*B+k*z+V*Q+W*ut,C*G+E*H+A*tt+w*ct,b*G+I*H+R*tt+N*ct,F*G+P*H+O*tt+M*ct,L*G+k*H+V*tt+W*ct,C*D+E*Y+A*et+w*ht,b*D+I*Y+R*et+N*ht,F*D+P*Y+O*et+M*ht,L*D+k*Y+V*et+W*ht)},translate:function(p){return this.translateXYZ(p.x,p.y,p.z)},translateXYZ:function(p,y,x){var T=this.val;return T[12]=T[0]*p+T[4]*y+T[8]*x+T[12],T[13]=T[1]*p+T[5]*y+T[9]*x+T[13],T[14]=T[2]*p+T[6]*y+T[10]*x+T[14],T[15]=T[3]*p+T[7]*y+T[11]*x+T[15],this},scale:function(p){return this.scaleXYZ(p.x,p.y,p.z)},scaleXYZ:function(p,y,x){var T=this.val;return T[0]=T[0]*p,T[1]=T[1]*p,T[2]=T[2]*p,T[3]=T[3]*p,T[4]=T[4]*y,T[5]=T[5]*y,T[6]=T[6]*y,T[7]=T[7]*y,T[8]=T[8]*x,T[9]=T[9]*x,T[10]=T[10]*x,T[11]=T[11]*x,this},makeRotationAxis:function(p,y){var x=Math.cos(y),T=Math.sin(y),C=1-x,E=p.x,A=p.y,w=p.z,b=C*E,I=C*A;return this.setValues(b*E+x,b*A-T*w,b*w+T*A,0,b*A+T*w,I*A+x,I*w-T*E,0,b*w-T*A,I*w+T*E,C*w*w+x,0,0,0,0,1)},rotate:function(p,y){var x=this.val,T=y.x,C=y.y,E=y.z,A=Math.sqrt(T*T+C*C+E*E);if(Math.abs(A)<u)return this;A=1/A,T*=A,C*=A,E*=A;var w=Math.sin(p),b=Math.cos(p),I=1-b,R=x[0],N=x[1],F=x[2],P=x[3],O=x[4],M=x[5],L=x[6],k=x[7],V=x[8],W=x[9],K=x[10],B=x[11],G=x[12],D=x[13],$=x[14],z=x[15],H=T*T*I+b,Y=C*T*I+E*w,Z=E*T*I-C*w,Q=T*C*I-E*w,tt=C*C*I+b,et=E*C*I+T*w,lt=T*E*I+C*w,ut=C*E*I-T*w,ct=E*E*I+b;return this.setValues(R*H+O*Y+V*Z,N*H+M*Y+W*Z,F*H+L*Y+K*Z,P*H+k*Y+B*Z,R*Q+O*tt+V*et,N*Q+M*tt+W*et,F*Q+L*tt+K*et,P*Q+k*tt+B*et,R*lt+O*ut+V*ct,N*lt+M*ut+W*ct,F*lt+L*ut+K*ct,P*lt+k*ut+B*ct,G,D,$,z)},rotateX:function(p){var y=this.val,x=Math.sin(p),T=Math.cos(p),C=y[4],E=y[5],A=y[6],w=y[7],b=y[8],I=y[9],R=y[10],N=y[11];return y[4]=C*T+b*x,y[5]=E*T+I*x,y[6]=A*T+R*x,y[7]=w*T+N*x,y[8]=b*T-C*x,y[9]=I*T-E*x,y[10]=R*T-A*x,y[11]=N*T-w*x,this},rotateY:function(p){var y=this.val,x=Math.sin(p),T=Math.cos(p),C=y[0],E=y[1],A=y[2],w=y[3],b=y[8],I=y[9],R=y[10],N=y[11];return y[0]=C*T-b*x,y[1]=E*T-I*x,y[2]=A*T-R*x,y[3]=w*T-N*x,y[8]=C*x+b*T,y[9]=E*x+I*T,y[10]=A*x+R*T,y[11]=w*x+N*T,this},rotateZ:function(p){var y=this.val,x=Math.sin(p),T=Math.cos(p),C=y[0],E=y[1],A=y[2],w=y[3],b=y[4],I=y[5],R=y[6],N=y[7];return y[0]=C*T+b*x,y[1]=E*T+I*x,y[2]=A*T+R*x,y[3]=w*T+N*x,y[4]=b*T-C*x,y[5]=I*T-E*x,y[6]=R*T-A*x,y[7]=N*T-w*x,this},fromRotationTranslation:function(p,y){var x=p.x,T=p.y,C=p.z,E=p.w,A=x+x,w=T+T,b=C+C,I=x*A,R=x*w,N=x*b,F=T*w,P=T*b,O=C*b,M=E*A,L=E*w,k=E*b;return this.setValues(1-(F+O),R+k,N-L,0,R-k,1-(I+O),P+M,0,N+L,P-M,1-(I+F),0,y.x,y.y,y.z,1)},fromQuat:function(p){var y=p.x,x=p.y,T=p.z,C=p.w,E=y+y,A=x+x,w=T+T,b=y*E,I=y*A,R=y*w,N=x*A,F=x*w,P=T*w,O=C*E,M=C*A,L=C*w;return this.setValues(1-(N+P),I+L,R-M,0,I-L,1-(b+P),F+O,0,R+M,F-O,1-(b+N),0,0,0,0,1)},frustum:function(p,y,x,T,C,E){var A=1/(y-p),w=1/(T-x),b=1/(C-E);return this.setValues(C*2*A,0,0,0,0,C*2*w,0,0,(y+p)*A,(T+x)*w,(E+C)*b,-1,0,0,E*C*2*b,0)},perspective:function(p,y,x,T){var C=1/Math.tan(p/2),E=1/(x-T);return this.setValues(C/y,0,0,0,0,C,0,0,0,0,(T+x)*E,-1,0,0,2*T*x*E,0)},perspectiveLH:function(p,y,x,T){return this.setValues(2*x/p,0,0,0,0,2*x/y,0,0,0,0,-T/(x-T),1,0,0,x*T/(x-T),0)},ortho:function(p,y,x,T,C,E){var A=p-y,w=x-T,b=C-E;return A=A===0?A:1/A,w=w===0?w:1/w,b=b===0?b:1/b,this.setValues(-2*A,0,0,0,0,-2*w,0,0,0,0,2*b,0,(p+y)*A,(T+x)*w,(E+C)*b,1)},lookAtRH:function(p,y,x){var T=this.val;return h.subVectors(p,y),h.getLengthSquared()===0&&(h.z=1),h.normalize(),f.crossVectors(x,h),f.getLengthSquared()===0&&(Math.abs(x.z)===1?h.x+=1e-4:h.z+=1e-4,h.normalize(),f.crossVectors(x,h)),f.normalize(),m.crossVectors(h,f),T[0]=f.x,T[1]=f.y,T[2]=f.z,T[4]=m.x,T[5]=m.y,T[6]=m.z,T[8]=h.x,T[9]=h.y,T[10]=h.z,this},lookAt:function(p,y,x){var T=p.x,C=p.y,E=p.z,A=x.x,w=x.y,b=x.z,I=y.x,R=y.y,N=y.z;if(Math.abs(T-I)<u&&Math.abs(C-R)<u&&Math.abs(E-N)<u)return this.identity();var F=T-I,P=C-R,O=E-N,M=1/Math.sqrt(F*F+P*P+O*O);F*=M,P*=M,O*=M;var L=w*O-b*P,k=b*F-A*O,V=A*P-w*F;M=Math.sqrt(L*L+k*k+V*V),M?(M=1/M,L*=M,k*=M,V*=M):(L=0,k=0,V=0);var W=P*V-O*k,K=O*L-F*V,B=F*k-P*L;return M=Math.sqrt(W*W+K*K+B*B),M?(M=1/M,W*=M,K*=M,B*=M):(W=0,K=0,B=0),this.setValues(L,W,F,0,k,K,P,0,V,B,O,0,-(L*T+k*C+V*E),-(W*T+K*C+B*E),-(F*T+P*C+O*E),1)},yawPitchRoll:function(p,y,x){this.zero(),c.zero(),l.zero();var T=this.val,C=c.val,E=l.val,A=Math.sin(x),w=Math.cos(x);return T[10]=1,T[15]=1,T[0]=w,T[1]=A,T[4]=-A,T[5]=w,A=Math.sin(y),w=Math.cos(y),C[0]=1,C[15]=1,C[5]=w,C[10]=w,C[9]=-A,C[6]=A,A=Math.sin(p),w=Math.cos(p),E[5]=1,E[15]=1,E[0]=w,E[2]=-A,E[8]=A,E[10]=w,this.multiplyLocal(c),this.multiplyLocal(l),this},setWorldMatrix:function(p,y,x,T,C){return this.yawPitchRoll(p.y,p.x,p.z),c.scaling(x.x,x.y,x.z),l.xyz(y.x,y.y,y.z),this.multiplyLocal(c),this.multiplyLocal(l),T&&this.multiplyLocal(T),C&&this.multiplyLocal(C),this},multiplyToMat4:function(p,y){var x=this.val,T=p.val,C=x[0],E=x[1],A=x[2],w=x[3],b=x[4],I=x[5],R=x[6],N=x[7],F=x[8],P=x[9],O=x[10],M=x[11],L=x[12],k=x[13],V=x[14],W=x[15],K=T[0],B=T[1],G=T[2],D=T[3],$=T[4],z=T[5],H=T[6],Y=T[7],Z=T[8],Q=T[9],tt=T[10],et=T[11],lt=T[12],ut=T[13],ct=T[14],ht=T[15];return y.setValues(K*C+B*b+G*F+D*L,B*E+B*I+G*P+D*k,G*A+B*R+G*O+D*V,D*w+B*N+G*M+D*W,$*C+z*b+H*F+Y*L,$*E+z*I+H*P+Y*k,$*A+z*R+H*O+Y*V,$*w+z*N+H*M+Y*W,Z*C+Q*b+tt*F+et*L,Z*E+Q*I+tt*P+et*k,Z*A+Q*R+tt*O+et*V,Z*w+Q*N+tt*M+et*W,lt*C+ut*b+ct*F+ht*L,lt*E+ut*I+ct*P+ht*k,lt*A+ut*R+ct*O+ht*V,lt*w+ut*N+ct*M+ht*W)},fromRotationXYTranslation:function(p,y,x){var T=y.x,C=y.y,E=y.z,A=Math.sin(p.x),w=Math.cos(p.x),b=Math.sin(p.y),I=Math.cos(p.y),R=T,N=C,F=E,P=-A,O=0-P*b,M=0-w*b,L=P*I,k=w*I;return x||(R=I*T+b*E,N=O*T+w*C+L*E,F=M*T+A*C+k*E),this.setValues(I,O,M,0,0,w,A,0,b,L,k,0,R,N,F,1)},getMaxScaleOnAxis:function(){var p=this.val,y=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],x=p[4]*p[4]+p[5]*p[5]+p[6]*p[6],T=p[8]*p[8]+p[9]*p[9]+p[10]*p[10];return Math.sqrt(Math.max(y,x,T))}}),c=new o,l=new o,f=new v,m=new v,h=new v;i.exports=o},69635:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return Math.min(e+a,v)};i.exports=g},37394:i=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a=e.length;if(a===0)return 0;e.sort(function(u,o){return u-o});var v=Math.floor(a/2);return a%2===0?(e[v]+e[v-1])/2:e[v]};i.exports=g},17259:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return Math.max(e-a,v)};i.exports=g},61820:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){v===void 0&&(v=a+1);var o=(e-a)/(v-a);return o>1?u!==void 0?(o=(u-e)/(u-v),o<0&&(o=0)):o=1:o<0&&(o=0),o};i.exports=g},75003:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(5341),u=e(72283),o=e(70015),c=1e-6,l=new Int8Array([1,2,0]),f=new Float32Array([0,0,0]),m=new o(1,0,0),h=new o(0,1,0),p=new o,y=new v,x=new a({initialize:function(C,E,A,w){this.onChangeCallback=u,this.set(C,E,A,w)},x:{get:function(){return this._x},set:function(T){this._x=T,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(T){this._y=T,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(T){this._z=T,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(T){this._w=T,this.onChangeCallback(this)}},copy:function(T){return this.set(T)},set:function(T,C,E,A,w){return w===void 0&&(w=!0),typeof T=="object"?(this._x=T.x||0,this._y=T.y||0,this._z=T.z||0,this._w=T.w||0):(this._x=T||0,this._y=C||0,this._z=E||0,this._w=A||0),w&&this.onChangeCallback(this),this},add:function(T){return this._x+=T.x,this._y+=T.y,this._z+=T.z,this._w+=T.w,this.onChangeCallback(this),this},subtract:function(T){return this._x-=T.x,this._y-=T.y,this._z-=T.z,this._w-=T.w,this.onChangeCallback(this),this},scale:function(T){return this._x*=T,this._y*=T,this._z*=T,this._w*=T,this.onChangeCallback(this),this},length:function(){var T=this.x,C=this.y,E=this.z,A=this.w;return Math.sqrt(T*T+C*C+E*E+A*A)},lengthSq:function(){var T=this.x,C=this.y,E=this.z,A=this.w;return T*T+C*C+E*E+A*A},normalize:function(){var T=this.x,C=this.y,E=this.z,A=this.w,w=T*T+C*C+E*E+A*A;return w>0&&(w=1/Math.sqrt(w),this._x=T*w,this._y=C*w,this._z=E*w,this._w=A*w),this.onChangeCallback(this),this},dot:function(T){return this.x*T.x+this.y*T.y+this.z*T.z+this.w*T.w},lerp:function(T,C){C===void 0&&(C=0);var E=this.x,A=this.y,w=this.z,b=this.w;return this.set(E+C*(T.x-E),A+C*(T.y-A),w+C*(T.z-w),b+C*(T.w-b))},rotationTo:function(T,C){var E=T.x*C.x+T.y*C.y+T.z*C.z;return E<-.999999?(p.copy(m).cross(T).length()<c&&p.copy(h).cross(T),p.normalize(),this.setAxisAngle(p,Math.PI)):E>.999999?this.set(0,0,0,1):(p.copy(T).cross(C),this._x=p.x,this._y=p.y,this._z=p.z,this._w=1+E,this.normalize())},setAxes:function(T,C,E){var A=y.val;return A[0]=C.x,A[3]=C.y,A[6]=C.z,A[1]=E.x,A[4]=E.y,A[7]=E.z,A[2]=-T.x,A[5]=-T.y,A[8]=-T.z,this.fromMat3(y).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(T,C){C=C*.5;var E=Math.sin(C);return this.set(E*T.x,E*T.y,E*T.z,Math.cos(C))},multiply:function(T){var C=this.x,E=this.y,A=this.z,w=this.w,b=T.x,I=T.y,R=T.z,N=T.w;return this.set(C*N+w*b+E*R-A*I,E*N+w*I+A*b-C*R,A*N+w*R+C*I-E*b,w*N-C*b-E*I-A*R)},slerp:function(T,C){var E=this.x,A=this.y,w=this.z,b=this.w,I=T.x,R=T.y,N=T.z,F=T.w,P=E*I+A*R+w*N+b*F;P<0&&(P=-P,I=-I,R=-R,N=-N,F=-F);var O=1-C,M=C;if(1-P>c){var L=Math.acos(P),k=Math.sin(L);O=Math.sin((1-C)*L)/k,M=Math.sin(C*L)/k}return this.set(O*E+M*I,O*A+M*R,O*w+M*N,O*b+M*F)},invert:function(){var T=this.x,C=this.y,E=this.z,A=this.w,w=T*T+C*C+E*E+A*A,b=w?1/w:0;return this.set(-T*b,-C*b,-E*b,A*b)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(T){T*=.5;var C=this.x,E=this.y,A=this.z,w=this.w,b=Math.sin(T),I=Math.cos(T);return this.set(C*I+w*b,E*I+A*b,A*I-E*b,w*I-C*b)},rotateY:function(T){T*=.5;var C=this.x,E=this.y,A=this.z,w=this.w,b=Math.sin(T),I=Math.cos(T);return this.set(C*I-A*b,E*I+w*b,A*I+C*b,w*I-E*b)},rotateZ:function(T){T*=.5;var C=this.x,E=this.y,A=this.z,w=this.w,b=Math.sin(T),I=Math.cos(T);return this.set(C*I+E*b,E*I-C*b,A*I+w*b,w*I-A*b)},calculateW:function(){var T=this.x,C=this.y,E=this.z;return this.w=-Math.sqrt(1-T*T-C*C-E*E),this},setFromEuler:function(T,C){var E=T.x/2,A=T.y/2,w=T.z/2,b=Math.cos(E),I=Math.cos(A),R=Math.cos(w),N=Math.sin(E),F=Math.sin(A),P=Math.sin(w);switch(T.order){case"XYZ":{this.set(N*I*R+b*F*P,b*F*R-N*I*P,b*I*P+N*F*R,b*I*R-N*F*P,C);break}case"YXZ":{this.set(N*I*R+b*F*P,b*F*R-N*I*P,b*I*P-N*F*R,b*I*R+N*F*P,C);break}case"ZXY":{this.set(N*I*R-b*F*P,b*F*R+N*I*P,b*I*P+N*F*R,b*I*R-N*F*P,C);break}case"ZYX":{this.set(N*I*R-b*F*P,b*F*R+N*I*P,b*I*P-N*F*R,b*I*R+N*F*P,C);break}case"YZX":{this.set(N*I*R+b*F*P,b*F*R+N*I*P,b*I*P-N*F*R,b*I*R-N*F*P,C);break}case"XZY":{this.set(N*I*R-b*F*P,b*F*R-N*I*P,b*I*P+N*F*R,b*I*R+N*F*P,C);break}}return this},setFromRotationMatrix:function(T){var C=T.val,E=C[0],A=C[4],w=C[8],b=C[1],I=C[5],R=C[9],N=C[2],F=C[6],P=C[10],O=E+I+P,M;return O>0?(M=.5/Math.sqrt(O+1),this.set((F-R)*M,(w-N)*M,(b-A)*M,.25/M)):E>I&&E>P?(M=2*Math.sqrt(1+E-I-P),this.set(.25*M,(A+b)/M,(w+N)/M,(F-R)/M)):I>P?(M=2*Math.sqrt(1+I-E-P),this.set((A+b)/M,.25*M,(R+F)/M,(w-N)/M)):(M=2*Math.sqrt(1+P-E-I),this.set((w+N)/M,(R+F)/M,.25*M,(b-A)/M)),this},fromMat3:function(T){var C=T.val,E=C[0]+C[4]+C[8],A;if(E>0)A=Math.sqrt(E+1),this.w=.5*A,A=.5/A,this._x=(C[7]-C[5])*A,this._y=(C[2]-C[6])*A,this._z=(C[3]-C[1])*A;else{var w=0;C[4]>C[0]&&(w=1),C[8]>C[w*3+w]&&(w=2);var b=l[w],I=l[b];A=Math.sqrt(C[w*3+w]-C[b*3+b]-C[I*3+I]+1),f[w]=.5*A,A=.5/A,f[b]=(C[b*3+w]+C[w*3+b])*A,f[I]=(C[I*3+w]+C[w*3+I])*A,this._x=f[0],this._y=f[1],this._z=f[2],this._w=(C[I*3+b]-C[b*3+I])*A}return this.onChangeCallback(this),this}});i.exports=x},23701:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83392),v=function(u){return u*a.RAD_TO_DEG};i.exports=v},16906:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a===void 0&&(a=1);var v=Math.random()*2*Math.PI;return e.x=Math.cos(v)*a,e.y=Math.sin(v)*a,e};i.exports=g},52417:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a===void 0&&(a=1);var v=Math.random()*2*Math.PI,u=Math.random()*2-1,o=Math.sqrt(1-u*u)*a;return e.x=Math.cos(v)*o,e.y=Math.sin(v)*o,e.z=u*a,e};i.exports=g},17915:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a===void 0&&(a=1),e.x=(Math.random()*2-1)*a,e.y=(Math.random()*2-1)*a,e.z=(Math.random()*2-1)*a,e.w=(Math.random()*2-1)*a,e};i.exports=g},52257:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.x,u=e.y;return e.x=v*Math.cos(a)-u*Math.sin(a),e.y=v*Math.sin(a)+u*Math.cos(a),e};i.exports=g},2386:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=Math.cos(u),c=Math.sin(u),l=e.x-a,f=e.y-v;return e.x=l*o-f*c+a,e.y=l*c+f*o+v,e};i.exports=g},72395:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o){var c=u+Math.atan2(e.y-v,e.x-a);return e.x=a+o*Math.cos(c),e.y=v+o*Math.sin(c),e};i.exports=g},41061:i=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o){return e.x=a+o*Math.cos(u),e.y=v+o*Math.sin(u),e};i.exports=g},93709:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(70015),v=e(16650),u=e(75003),o=new v,c=new u,l=new a,f=function(m,h,p){return c.setAxisAngle(h,p),o.fromRotationTranslation(c,l.set(0,0,0)),m.transformMat4(o)};i.exports=f},67233:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e>0?Math.ceil(e):Math.floor(e)};i.exports=g},64333:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){a===void 0&&(a=0),v===void 0&&(v=10);var u=Math.pow(v,-a);return Math.round(e*u)/u};i.exports=g},59533:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){a===void 0&&(a=1),v===void 0&&(v=1),u===void 0&&(u=1),u*=Math.PI/e;for(var o=[],c=[],l=0;l<e;l++)v-=a*u,a+=v*u,o[l]=v,c[l]=a;return{sin:c,cos:o,length:e}};i.exports=g},5514:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e<=a?0:e>=v?1:(e=(e-a)/(v-a),e*e*(3-2*e))};i.exports=g},87736:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e=Math.max(0,Math.min(1,(e-a)/(v-a))),e*e*e*(e*(e*6-15)+10)};i.exports=g},55805:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=function(u,o,c,l){l===void 0&&(l=new a);var f=0,m=0,h=o*c;return u>0&&u<=h&&(u>o-1?(m=Math.floor(u/o),f=u-m*o):f=u),l.set(f,m)};i.exports=v},64462:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=function(u,o,c,l,f,m,h,p){p===void 0&&(p=new a);var y=Math.sin(f),x=Math.cos(f),T=x*m,C=y*m,E=-y*h,A=x*h,w=1/(T*A+E*-C);return p.x=A*w*u+-E*w*o+(l*E-c*A)*w,p.y=T*w*o+-C*w*u+(-l*T+c*C)*w,p};i.exports=v},93736:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(88456),u=new a({initialize:function(c,l){this.x=0,this.y=0,typeof c=="object"?(this.x=c.x||0,this.y=c.y||0):(l===void 0&&(l=c),this.x=c||0,this.y=l||0)},clone:function(){return new u(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,c){return c===void 0&&(c=o),this.x=o,this.y=c,this},setTo:function(o,c){return this.set(o,c)},setToPolar:function(o,c){return c==null&&(c=1),this.x=Math.cos(o)*c,this.y=Math.sin(o)*c,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,c){return v(this.x,o.x,c)&&v(this.y,o.y,c)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var c=o.x-this.x,l=o.y-this.y;return Math.sqrt(c*c+l*l)},distanceSq:function(o){var c=o.x-this.x,l=o.y-this.y;return c*c+l*l},length:function(){var o=this.x,c=this.y;return Math.sqrt(o*o+c*c)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,c=this.y;return o*o+c*c},normalize:function(){var o=this.x,c=this.y,l=o*o+c*c;return l>0&&(l=1/Math.sqrt(l),this.x=o*l,this.y=c*l),this},normalizeRightHand:function(){var o=this.x;return this.x=this.y*-1,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=o*-1,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,c){c===void 0&&(c=0);var l=this.x,f=this.y;return this.x=l+c*(o.x-l),this.y=f+c*(o.y-f),this},transformMat3:function(o){var c=this.x,l=this.y,f=o.val;return this.x=f[0]*c+f[3]*l+f[6],this.y=f[1]*c+f[4]*l+f[7],this},transformMat4:function(o){var c=this.x,l=this.y,f=o.val;return this.x=f[0]*c+f[4]*l+f[12],this.y=f[1]*c+f[5]*l+f[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var c=this.length();return c&&c>o&&this.scale(o/c),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var c=Math.cos(o),l=Math.sin(o);return this.set(c*this.x-l*this.y,l*this.x+c*this.y)},project:function(o){var c=this.dot(o)/o.dot(o);return this.copy(o).scale(c)}});u.ZERO=new u,u.RIGHT=new u(1,0),u.LEFT=new u(-1,0),u.UP=new u(0,-1),u.DOWN=new u(0,1),u.ONE=new u(1,1),i.exports=u},70015:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c,l){this.x=0,this.y=0,this.z=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=c||0,this.z=l||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(u){return this.x=Math.min(this.x,u.x),this.y=Math.min(this.y,u.y),this.z=Math.min(this.z,u.z),this},max:function(u){return this.x=Math.max(this.x,u.x),this.y=Math.max(this.y,u.y),this.z=Math.max(this.z,u.z),this},clone:function(){return new v(this.x,this.y,this.z)},addVectors:function(u,o){return this.x=u.x+o.x,this.y=u.y+o.y,this.z=u.z+o.z,this},crossVectors:function(u,o){var c=u.x,l=u.y,f=u.z,m=o.x,h=o.y,p=o.z;return this.x=l*p-f*h,this.y=f*m-c*p,this.z=c*h-l*m,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this},set:function(u,o,c){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=o||0,this.z=c||0),this},setFromMatrixPosition:function(u){return this.fromArray(u.val,12)},setFromMatrixColumn:function(u,o){return this.fromArray(u.val,o*4)},fromArray:function(u,o){return o===void 0&&(o=0),this.x=u[o],this.y=u[o+1],this.z=u[o+2],this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this},addScalar:function(u){return this.x+=u,this.y+=u,this.z+=u,this},addScale:function(u,o){return this.x+=u.x*o,this.y+=u.y*o,this.z+=u.z*o||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u,this.z*=u):(this.x=0,this.y=0,this.z=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(u){var o=u.x-this.x,c=u.y-this.y,l=u.z-this.z||0;return Math.sqrt(o*o+c*c+l*l)},distanceSq:function(u){var o=u.x-this.x,c=u.y-this.y,l=u.z-this.z||0;return o*o+c*c+l*l},length:function(){var u=this.x,o=this.y,c=this.z;return Math.sqrt(u*u+o*o+c*c)},lengthSq:function(){var u=this.x,o=this.y,c=this.z;return u*u+o*o+c*c},normalize:function(){var u=this.x,o=this.y,c=this.z,l=u*u+o*o+c*c;return l>0&&(l=1/Math.sqrt(l),this.x=u*l,this.y=o*l,this.z=c*l),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z},cross:function(u){var o=this.x,c=this.y,l=this.z,f=u.x,m=u.y,h=u.z;return this.x=c*h-l*m,this.y=l*f-o*h,this.z=o*m-c*f,this},lerp:function(u,o){o===void 0&&(o=0);var c=this.x,l=this.y,f=this.z;return this.x=c+o*(u.x-c),this.y=l+o*(u.y-l),this.z=f+o*(u.z-f),this},applyMatrix3:function(u){var o=this.x,c=this.y,l=this.z,f=u.val;return this.x=f[0]*o+f[3]*c+f[6]*l,this.y=f[1]*o+f[4]*c+f[7]*l,this.z=f[2]*o+f[5]*c+f[8]*l,this},applyMatrix4:function(u){var o=this.x,c=this.y,l=this.z,f=u.val,m=1/(f[3]*o+f[7]*c+f[11]*l+f[15]);return this.x=(f[0]*o+f[4]*c+f[8]*l+f[12])*m,this.y=(f[1]*o+f[5]*c+f[9]*l+f[13])*m,this.z=(f[2]*o+f[6]*c+f[10]*l+f[14])*m,this},transformMat3:function(u){var o=this.x,c=this.y,l=this.z,f=u.val;return this.x=o*f[0]+c*f[3]+l*f[6],this.y=o*f[1]+c*f[4]+l*f[7],this.z=o*f[2]+c*f[5]+l*f[8],this},transformMat4:function(u){var o=this.x,c=this.y,l=this.z,f=u.val;return this.x=f[0]*o+f[4]*c+f[8]*l+f[12],this.y=f[1]*o+f[5]*c+f[9]*l+f[13],this.z=f[2]*o+f[6]*c+f[10]*l+f[14],this},transformCoordinates:function(u){var o=this.x,c=this.y,l=this.z,f=u.val,m=o*f[0]+c*f[4]+l*f[8]+f[12],h=o*f[1]+c*f[5]+l*f[9]+f[13],p=o*f[2]+c*f[6]+l*f[10]+f[14],y=o*f[3]+c*f[7]+l*f[11]+f[15];return this.x=m/y,this.y=h/y,this.z=p/y,this},transformQuat:function(u){var o=this.x,c=this.y,l=this.z,f=u.x,m=u.y,h=u.z,p=u.w,y=p*o+m*l-h*c,x=p*c+h*o-f*l,T=p*l+f*c-m*o,C=-f*o-m*c-h*l;return this.x=y*p+C*-f+x*-h-T*-m,this.y=x*p+C*-m+T*-f-y*-h,this.z=T*p+C*-h+y*-m-x*-f,this},project:function(u){var o=this.x,c=this.y,l=this.z,f=u.val,m=f[0],h=f[1],p=f[2],y=f[3],x=f[4],T=f[5],C=f[6],E=f[7],A=f[8],w=f[9],b=f[10],I=f[11],R=f[12],N=f[13],F=f[14],P=f[15],O=1/(o*y+c*E+l*I+P);return this.x=(o*m+c*x+l*A+R)*O,this.y=(o*h+c*T+l*w+N)*O,this.z=(o*p+c*C+l*b+F)*O,this},projectViewMatrix:function(u,o){return this.applyMatrix4(u).applyMatrix4(o)},unprojectViewMatrix:function(u,o){return this.applyMatrix4(u).applyMatrix4(o)},unproject:function(u,o){var c=u.x,l=u.y,f=u.z,m=u.w,h=this.x-c,p=m-this.y-1-l,y=this.z;return this.x=2*h/f-1,this.y=2*p/m-1,this.z=2*y-1,this.project(o)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});v.ZERO=new v,v.RIGHT=new v(1,0,0),v.LEFT=new v(-1,0,0),v.UP=new v(0,-1,0),v.DOWN=new v(0,1,0),v.FORWARD=new v(0,0,1),v.BACK=new v(0,0,-1),v.ONE=new v(1,1,1),i.exports=v},51729:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c,l,f){this.x=0,this.y=0,this.z=0,this.w=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=c||0,this.z=l||0,this.w=f||0)},clone:function(){return new v(this.x,this.y,this.z,this.w)},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this.w=u.w||0,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z&&this.w===u.w},set:function(u,o,c,l){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=o||0,this.z=c||0,this.w=l||0),this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this.w+=u.w||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this.w-=u.w||0,this},scale:function(u){return this.x*=u,this.y*=u,this.z*=u,this.w*=u,this},length:function(){var u=this.x,o=this.y,c=this.z,l=this.w;return Math.sqrt(u*u+o*o+c*c+l*l)},lengthSq:function(){var u=this.x,o=this.y,c=this.z,l=this.w;return u*u+o*o+c*c+l*l},normalize:function(){var u=this.x,o=this.y,c=this.z,l=this.w,f=u*u+o*o+c*c+l*l;return f>0&&(f=1/Math.sqrt(f),this.x=u*f,this.y=o*f,this.z=c*f,this.w=l*f),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z+this.w*u.w},lerp:function(u,o){o===void 0&&(o=0);var c=this.x,l=this.y,f=this.z,m=this.w;return this.x=c+o*(u.x-c),this.y=l+o*(u.y-l),this.z=f+o*(u.z-f),this.w=m+o*(u.w-m),this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this.w*=u.w||1,this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this.w/=u.w||1,this},distance:function(u){var o=u.x-this.x,c=u.y-this.y,l=u.z-this.z||0,f=u.w-this.w||0;return Math.sqrt(o*o+c*c+l*l+f*f)},distanceSq:function(u){var o=u.x-this.x,c=u.y-this.y,l=u.z-this.z||0,f=u.w-this.w||0;return o*o+c*c+l*l+f*f},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(u){var o=this.x,c=this.y,l=this.z,f=this.w,m=u.val;return this.x=m[0]*o+m[4]*c+m[8]*l+m[12]*f,this.y=m[1]*o+m[5]*c+m[9]*l+m[13]*f,this.z=m[2]*o+m[6]*c+m[10]*l+m[14]*f,this.w=m[3]*o+m[7]*c+m[11]*l+m[15]*f,this},transformQuat:function(u){var o=this.x,c=this.y,l=this.z,f=u.x,m=u.y,h=u.z,p=u.w,y=p*o+m*l-h*c,x=p*c+h*o-f*l,T=p*l+f*c-m*o,C=-f*o-m*c-h*l;return this.x=y*p+C*-f+x*-h-T*-m,this.y=x*p+C*-m+T*-f-y*-h,this.z=T*p+C*-h+y*-m-x*-f,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});v.prototype.sub=v.prototype.subtract,v.prototype.mul=v.prototype.multiply,v.prototype.div=v.prototype.divide,v.prototype.dist=v.prototype.distance,v.prototype.distSq=v.prototype.distanceSq,v.prototype.len=v.prototype.length,v.prototype.lenSq=v.prototype.lengthSq,i.exports=v},9557:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return Math.abs(e-a)<=v};i.exports=g},1071:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(e>=a&&e<=v)return e;var u=v-a;return a+((e-a)%u+u)%u};i.exports=g},90447:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){return Math.atan2(u-a,v-e)};i.exports=g},94240:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return Math.atan2(a.y-e.y,a.x-e.x)};i.exports=g},84066:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return Math.atan2(a.x-e.x,a.y-e.y)};i.exports=g},9678:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){return Math.atan2(v-e,u-a)};i.exports=g},76861:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83392),v=function(u){return u>Math.PI&&(u-=a.PI2),Math.abs(((u+a.TAU)%a.PI2-a.PI2)%a.PI2)};i.exports=v},37570:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};i.exports=g},87597:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61616),v=function(){return a(-Math.PI,Math.PI)};i.exports=v},74493:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61616),v=function(){return a(-180,180)};i.exports=v},19049:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(37570),v=function(u){return a(u+Math.PI)};i.exports=v},90612:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83392),v=function(u,o,c){return c===void 0&&(c=.05),u===o||(Math.abs(o-u)<=c||Math.abs(o-u)>=a.PI2-c?u=o:(Math.abs(o-u)>Math.PI&&(o<u?o+=a.PI2:o-=a.PI2),o>u?u+=c:o<u&&(u-=c))),u};i.exports=v},93954:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=a-e;if(v===0)return 0;var u=Math.floor((v- -180)/360);return v-u*360};i.exports=g},35786:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1071),v=function(u){return a(u,-Math.PI,Math.PI)};i.exports=v},62138:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(1071),v=function(u){return a(u,-180,180)};i.exports=v},22153:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Between:e(90447),BetweenPoints:e(94240),BetweenPointsY:e(84066),BetweenY:e(9678),CounterClockwise:e(76861),Normalize:e(37570),Random:e(87597),RandomDegrees:e(74493),Reverse:e(19049),RotateTo:e(90612),ShortestBetween:e(93954),Wrap:e(35786),WrapDegrees:e(62138)}},83392:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};i.exports=g},53996:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=e-v,c=a-u;return Math.sqrt(o*o+c*c)};i.exports=g},92951:i=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.x-a.x,u=e.y-a.y;return Math.sqrt(v*v+u*u)};i.exports=g},12161:i=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.x-a.x,u=e.y-a.y;return v*v+u*u};i.exports=g},38057:i=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){return Math.max(Math.abs(e-v),Math.abs(a-u))};i.exports=g},33297:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o){return o===void 0&&(o=2),Math.sqrt(Math.pow(v-e,o)+Math.pow(u-a,o))};i.exports=g},90366:i=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){return Math.abs(e-v)+Math.abs(a-u)};i.exports=g},35032:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=e-v,c=a-u;return o*o+c*c};i.exports=g},10130:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Between:e(53996),BetweenPoints:e(92951),BetweenPointsSquared:e(12161),Chebyshev:e(38057),Power:e(33297),Snake:e(90366),Squared:e(35032)}},35060:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25265),v=e(57428),u=e(73214),o=e(71778),c=e(36468),l=e(88258),f=e(52910),m=e(67799),h=e(74083),p=e(92284),y=e(28035),x=e(8754);i.exports={Power0:f,Power1:m.Out,Power2:o.Out,Power3:h.Out,Power4:p.Out,Linear:f,Quad:m.Out,Cubic:o.Out,Quart:h.Out,Quint:p.Out,Sine:y.Out,Expo:l.Out,Circ:u.Out,Elastic:c.Out,Back:a.Out,Bounce:v.Out,Stepped:x,"Quad.easeIn":m.In,"Cubic.easeIn":o.In,"Quart.easeIn":h.In,"Quint.easeIn":p.In,"Sine.easeIn":y.In,"Expo.easeIn":l.In,"Circ.easeIn":u.In,"Elastic.easeIn":c.In,"Back.easeIn":a.In,"Bounce.easeIn":v.In,"Quad.easeOut":m.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":h.Out,"Quint.easeOut":p.Out,"Sine.easeOut":y.Out,"Expo.easeOut":l.Out,"Circ.easeOut":u.Out,"Elastic.easeOut":c.Out,"Back.easeOut":a.Out,"Bounce.easeOut":v.Out,"Quad.easeInOut":m.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":h.InOut,"Quint.easeInOut":p.InOut,"Sine.easeInOut":y.InOut,"Expo.easeInOut":l.InOut,"Circ.easeInOut":u.InOut,"Elastic.easeInOut":c.InOut,"Back.easeInOut":a.InOut,"Bounce.easeInOut":v.InOut}},25860:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a===void 0&&(a=1.70158),e*e*((a+1)*e-a)};i.exports=g},45264:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a===void 0&&(a=1.70158);var v=a*1.525;return(e*=2)<1?.5*(e*e*((v+1)*e-v)):.5*((e-=2)*e*((v+1)*e+v)+2)};i.exports=g},36699:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a===void 0&&(a=1.70158),--e*e*((a+1)*e+a)+1};i.exports=g},25265:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:e(25860),Out:e(36699),InOut:e(45264)}},62191:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};i.exports=g},24799:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a=!1;return e<.5?(e=1-e*2,a=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,a?(1-e)*.5:e*.5+.5};i.exports=g},60819:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};i.exports=g},57428:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:e(62191),Out:e(60819),InOut:e(24799)}},86855:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return 1-Math.sqrt(1-e*e)};i.exports=g},7280:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};i.exports=g},18058:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return Math.sqrt(1- --e*e)};i.exports=g},73214:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:e(86855),Out:e(18058),InOut:e(7280)}},91532:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e*e*e};i.exports=g},63180:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};i.exports=g},16518:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return--e*e*e+1};i.exports=g},71778:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:e(91532),Out:e(16518),InOut:e(63180)}},24729:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(a===void 0&&(a=.1),v===void 0&&(v=.1),e===0)return 0;if(e===1)return 1;var u=v/4;return a<1?a=1:u=v*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/v))};i.exports=g},50325:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(a===void 0&&(a=.1),v===void 0&&(v=.1),e===0)return 0;if(e===1)return 1;var u=v/4;return a<1?a=1:u=v*Math.asin(1/a)/(2*Math.PI),(e*=2)<1?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/v)):a*Math.pow(2,-10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/v)*.5+1};i.exports=g},84074:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(a===void 0&&(a=.1),v===void 0&&(v=.1),e===0)return 0;if(e===1)return 1;var u=v/4;return a<1?a=1:u=v*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*e)*Math.sin((e-u)*(2*Math.PI)/v)+1};i.exports=g},36468:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:e(24729),Out:e(84074),InOut:e(50325)}},95638:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return Math.pow(2,10*(e-1))-.001};i.exports=g},10357:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};i.exports=g},14894:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return 1-Math.pow(2,-10*e)};i.exports=g},88258:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:e(95638),Out:e(14894),InOut:e(10357)}},33063:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Back:e(25265),Bounce:e(57428),Circular:e(73214),Cubic:e(71778),Elastic:e(36468),Expo:e(88258),Linear:e(52910),Quadratic:e(67799),Quartic:e(74083),Quintic:e(92284),Sine:e(28035),Stepped:e(8754)}},43927:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e};i.exports=g},52910:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports=e(43927)},77471:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e*e};i.exports=g},83863:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};i.exports=g},44383:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e*(2-e)};i.exports=g},67799:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:e(77471),Out:e(44383),InOut:e(83863)}},48311:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e*e*e*e};i.exports=g},55248:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};i.exports=g},23135:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return 1- --e*e*e*e};i.exports=g},74083:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:e(48311),Out:e(23135),InOut:e(55248)}},7313:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e*e*e*e*e};i.exports=g},98759:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};i.exports=g},26670:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return--e*e*e*e*e+1};i.exports=g},92284:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:e(7313),Out:e(26670),InOut:e(98759)}},52929:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};i.exports=g},66333:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};i.exports=g},37255:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};i.exports=g},28035:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={In:e(52929),Out:e(37255),InOut:e(66333)}},52770:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a===void 0&&(a=1),e<=0?0:e>=1?1:((a*e|0)+1)*(1/a)};i.exports=g},8754:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports=e(52770)},17247:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a===void 0&&(a=1e-4),Math.ceil(e-a)};i.exports=g},88456:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return v===void 0&&(v=1e-4),Math.abs(e-a)<v};i.exports=g},61824:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a===void 0&&(a=1e-4),Math.floor(e+a)};i.exports=g},41935:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return v===void 0&&(v=1e-4),e>a-v};i.exports=g},54726:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return v===void 0&&(v=1e-4),e<a+v};i.exports=g},52778:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Ceil:e(17247),Equal:e(88456),Floor:e(61824),GreaterThan:e(41935),LessThan:e(54726)}},5923:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(83392),v=e(98611),u={Angle:e(22153),Distance:e(10130),Easing:e(33063),Fuzzy:e(52778),Interpolation:e(48528),Pow2:e(73773),Snap:e(23679),RandomDataGenerator:e(81429),Average:e(26042),Bernstein:e(22824),Between:e(17489),CatmullRom:e(14976),CeilTo:e(89129),Clamp:e(82897),DegToRad:e(75606),Difference:e(767),Euler:e(9849),Factorial:e(8034),FloatBetween:e(61616),FloorTo:e(60679),FromPercent:e(91806),GetSpeed:e(79366),IsEven:e(43776),IsEvenStrict:e(58442),Linear:e(42798),LinearXY:e(61072),MaxAdd:e(69635),Median:e(37394),MinSub:e(17259),Percent:e(61820),RadToDeg:e(23701),RandomXY:e(16906),RandomXYZ:e(52417),RandomXYZW:e(17915),Rotate:e(52257),RotateAround:e(2386),RotateAroundDistance:e(72395),RotateTo:e(41061),RoundAwayFromZero:e(67233),RoundTo:e(64333),SinCosTableGenerator:e(59533),SmootherStep:e(87736),SmoothStep:e(5514),ToXY:e(55805),TransformXY:e(64462),Within:e(9557),Wrap:e(1071),Vector2:e(93736),Vector3:e(70015),Vector4:e(51729),Matrix3:e(5341),Matrix4:e(16650),Quaternion:e(75003),RotateVec3:e(93709)};u=v(!1,u,a),i.exports=u},63210:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(22824),v=function(u,o){for(var c=0,l=u.length-1,f=0;f<=l;f++)c+=Math.pow(1-o,l-f)*Math.pow(o,f)*u[f]*a(l,f);return c};i.exports=v},88332:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14976),v=function(u,o){var c=u.length-1,l=c*o,f=Math.floor(l);return u[0]===u[c]?(o<0&&(f=Math.floor(l=c*(1+o))),a(l-f,u[(f-1+c)%c],u[f],u[(f+1)%c],u[(f+2)%c])):o<0?u[0]-(a(-l,u[0],u[0],u[1],u[1])-u[0]):o>1?u[c]-(a(l-c,u[c],u[c],u[c-1],u[c-1])-u[c]):a(l-f,u[f?f-1:0],u[f],u[c<f+1?c:f+1],u[c<f+2?c:f+2])};i.exports=v},34631:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(o,c){var l=1-o;return l*l*l*c}function e(o,c){var l=1-o;return 3*l*l*o*c}function a(o,c){return 3*(1-o)*o*o*c}function v(o,c){return o*o*o*c}var u=function(o,c,l,f,m){return g(o,c)+e(o,l)+a(o,f)+v(o,m)};i.exports=u},47614:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42798),v=function(u,o){var c=u.length-1,l=c*o,f=Math.floor(l);return o<0?a(u[0],u[1],l):o>1?a(u[c],u[c-1],c-l):a(u[f],u[f+1>c?c:f+1],l-f)};i.exports=v},16252:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(u,o){var c=1-u;return c*c*o}function e(u,o){return 2*(1-u)*u*o}function a(u,o){return u*u*o}var v=function(u,o,c,l){return g(u,o)+e(u,c)+a(u,l)};i.exports=v},44521:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(5514),v=function(u,o,c){return o+(c-o)*a(u,0,1)};i.exports=v},45507:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(87736),v=function(u,o,c){return o+(c-o)*a(u,0,1)};i.exports=v},48528:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Bezier:e(63210),CatmullRom:e(88332),CubicBezier:e(34631),Linear:e(47614),QuadraticBezier:e(16252),SmoothStep:e(44521),SmootherStep:e(45507)}},3504:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a=Math.log(e)/.6931471805599453;return 1<<Math.ceil(a)};i.exports=g},28621:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e>0&&(e&e-1)===0&&a>0&&(a&a-1)===0};i.exports=g},2018:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e>0&&(e&e-1)===0};i.exports=g},73773:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={GetNext:e(3504),IsSize:e(28621),IsValue:e(2018)}},81429:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o){o===void 0&&(o=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],o&&this.init(o)},rnd:function(){var u=2091639*this.s0+this.c*23283064365386963e-26;return this.c=u|0,this.s0=this.s1,this.s1=this.s2,this.s2=u-this.c,this.s2},hash:function(u){var o,c=this.n;u=u.toString();for(var l=0;l<u.length;l++)c+=u.charCodeAt(l),o=.02519603282416938*c,c=o>>>0,o-=c,o*=c,c=o>>>0,o-=c,c+=o*4294967296;return this.n=c,(c>>>0)*23283064365386963e-26},init:function(u){typeof u=="string"?this.state(u):this.sow(u)},sow:function(u){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!u)for(var o=0;o<u.length&&u[o]!=null;o++){var c=u[o];this.s0-=this.hash(c),this.s0+=~~(this.s0<0),this.s1-=this.hash(c),this.s1+=~~(this.s1<0),this.s2-=this.hash(c),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(u,o){return Math.floor(this.realInRange(0,o-u+1)+u)},between:function(u,o){return Math.floor(this.realInRange(0,o-u+1)+u)},realInRange:function(u,o){return this.frac()*(o-u)+u},normal:function(){return 1-2*this.frac()},uuid:function(){var u="",o="";for(o=u="";u++<36;o+=~u%5|u*3&4?(u^15?8^this.frac()*(u^20?16:4):4).toString(16):"-");return o},pick:function(u){return u[this.integerInRange(0,u.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(u){return u[~~(Math.pow(this.frac(),2)*(u.length-1)+.5)]},timestamp:function(u,o){return this.realInRange(u||9466848e5,o||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(u){return typeof u=="string"&&u.match(/^!rnd/)&&(u=u.split(","),this.c=parseFloat(u[1]),this.s0=parseFloat(u[2]),this.s1=parseFloat(u[3]),this.s2=parseFloat(u[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(u){for(var o=u.length-1,c=o;c>0;c--){var l=Math.floor(this.frac()*(c+1)),f=u[l];u[l]=u[c],u[c]=f}return u}});i.exports=v},82127:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){return v===void 0&&(v=0),a===0?e:(e-=v,e=a*Math.ceil(e/a),u?(v+e)/a:v+e)};i.exports=g},84314:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){return v===void 0&&(v=0),a===0?e:(e-=v,e=a*Math.floor(e/a),u?(v+e)/a:v+e)};i.exports=g},88462:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){return v===void 0&&(v=0),a===0?e:(e-=v,e=a*Math.round(e/a),u?(v+e)/a:v+e)};i.exports=g},23679:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Ceil:e(82127),Floor:e(84314),To:e(88462)}},92491:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e(75205);var a=e(86459),v=e(98611),u={Actions:e(83979),Animations:e(13517),BlendModes:e(95723),Cache:e(45820),Cameras:e(44143),Core:e(80293),Class:e(56694),Create:e(84106),Curves:e(73962),Data:e(1999),Display:e(24816),DOM:e(3590),Events:e(95146),FX:e(96910),Game:e(15213),GameObjects:e(48013),Geom:e(84068),Input:e(20873),Loader:e(95695),Math:e(5923),Physics:e(53954),Plugins:e(45615),Renderer:e(42069),Scale:e(86754),ScaleModes:e(27394),Scene:e(87157),Scenes:e(20436),Structs:e(20010),Textures:e(87499),Tilemaps:e(52678),Time:e(97121),Tweens:e(75193),Utils:e(22178)};u.Sound=e(56751),u=v(!1,u,a),i.exports=u,e.g.Phaser=u},62832:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(7864),u=e(1539),o=new a({Extends:u,Mixins:[v.Acceleration,v.Angular,v.Bounce,v.Debug,v.Drag,v.Enable,v.Friction,v.Gravity,v.Immovable,v.Mass,v.Pushable,v.Size,v.Velocity],initialize:function(l,f,m,h,p){u.call(this,l,f,m,h,p),this.body=null}});i.exports=o},66150:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(75606),u=e(53996),o=e(35032),c=e(99523),l=e(72632),f=e(30657),m=e(2732),h=e(15147),p=e(91963),y=e(7599),x=e(93736),T=e(85233),C=new a({initialize:function(A){this.scene=A,this.systems=A.sys,this.config=this.getConfig(),this.world,this.add,A.sys.events.once(y.BOOT,this.boot,this),A.sys.events.on(y.START,this.start,this)},boot:function(){this.world=new T(this.scene,this.config),this.add=new c(this.world),this.systems.events.once(y.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new T(this.scene,this.config),this.add=new c(this.world));var E=this.systems.events;l(this.config,"customUpdate",!1)||E.on(y.UPDATE,this.world.update,this.world),E.on(y.POST_UPDATE,this.world.postUpdate,this.world),E.once(y.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(y.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(y.UPDATE,this.world.update,this.world)},getConfig:function(){var E=this.systems.game.config.physics,A=this.systems.settings.physics,w=f(l(A,"arcade",{}),l(E,"arcade",{}));return w},overlap:function(E,A,w,b,I){return w===void 0&&(w=null),b===void 0&&(b=null),I===void 0&&(I=w),this.world.collideObjects(E,A,w,b,I,!0)},collide:function(E,A,w,b,I){return w===void 0&&(w=null),b===void 0&&(b=null),I===void 0&&(I=w),this.world.collideObjects(E,A,w,b,I,!1)},collideTiles:function(E,A,w,b,I){return this.world.collideTiles(E,A,w,b,I)},overlapTiles:function(E,A,w,b,I){return this.world.overlapTiles(E,A,w,b,I)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(E,A,w,b,I,R){b===void 0&&(b=60);var N=Math.atan2(w-E.y,A-E.x);return E.body.acceleration.setToPolar(N,b),I!==void 0&&R!==void 0&&E.body.maxVelocity.set(I,R),N},accelerateToObject:function(E,A,w,b,I){return this.accelerateTo(E,A.x,A.y,w,b,I)},closest:function(E,A){A||(A=this.world.bodies.entries);for(var w=Number.MAX_VALUE,b=null,I=E.x,R=E.y,N=A.length,F=0;F<N;F++){var P=A[F],O=P.body||P;if(!(E===P||E===O||E===O.gameObject||E===O.center)){var M=o(I,R,O.center.x,O.center.y);M<w&&(b=P,w=M)}}return b},furthest:function(E,A){A||(A=this.world.bodies.entries);for(var w=-1,b=null,I=E.x,R=E.y,N=A.length,F=0;F<N;F++){var P=A[F],O=P.body||P;if(!(E===P||E===O||E===O.gameObject||E===O.center)){var M=o(I,R,O.center.x,O.center.y);M>w&&(b=P,w=M)}}return b},moveTo:function(E,A,w,b,I){b===void 0&&(b=60),I===void 0&&(I=0);var R=Math.atan2(w-E.y,A-E.x);return I>0&&(b=u(E.x,E.y,A,w)/(I/1e3)),E.body.velocity.setToPolar(R,b),R},moveToObject:function(E,A,w,b){return this.moveTo(E,A.x,A.y,w,b)},velocityFromAngle:function(E,A,w){return A===void 0&&(A=60),w===void 0&&(w=new x),w.setToPolar(v(E),A)},velocityFromRotation:function(E,A,w){return A===void 0&&(A=60),w===void 0&&(w=new x),w.setToPolar(E,A)},overlapRect:function(E,A,w,b,I,R){return h(this.world,E,A,w,b,I,R)},overlapCirc:function(E,A,w,b,I){return m(this.world,E,A,w,b,I)},shutdown:function(){if(this.world){var E=this.systems.events;E.off(y.UPDATE,this.world.update,this.world),E.off(y.POST_UPDATE,this.world.postUpdate,this.world),E.off(y.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(y.START,this.start,this),this.scene=null,this.systems=null}});p.register("ArcadePhysics",C,"arcadePhysics"),i.exports=C},25084:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(7864),u=e(13747),o=new a({Extends:u,Mixins:[v.Acceleration,v.Angular,v.Bounce,v.Debug,v.Drag,v.Enable,v.Friction,v.Gravity,v.Immovable,v.Mass,v.Pushable,v.Size,v.Velocity],initialize:function(l,f,m,h,p){u.call(this,l,f,m,h,p),this.body=null}});i.exports=o},97602:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(47401),u=e(27037),o=e(23701),c=e(74118),l=e(94287),f=e(93736),m=new a({initialize:function(p,y){var x=64,T=64,C={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},E=y!==void 0;E&&y.displayWidth&&(x=y.displayWidth,T=y.displayHeight),E||(y=C),this.world=p,this.gameObject=E?y:void 0,this.isBody=!0,this.transform={x:y.x,y:y.y,rotation:y.angle,scaleX:y.scaleX,scaleY:y.scaleY,displayOriginX:y.displayOriginX,displayOriginY:y.displayOriginY},this.debugShowBody=p.defaults.debugShowBody,this.debugShowVelocity=p.defaults.debugShowVelocity,this.debugBodyColor=p.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new f,this.position=new f(y.x-y.scaleX*y.displayOriginX,y.y-y.scaleY*y.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=y.angle,this.preRotation=y.angle,this.width=x,this.height=T,this.sourceWidth=x,this.sourceHeight=T,y.frame&&(this.sourceWidth=y.frame.realWidth,this.sourceHeight=y.frame.realHeight),this.halfWidth=Math.abs(x/2),this.halfHeight=Math.abs(T/2),this.center=new f(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new f,this.newVelocity=new f,this.deltaMax=new f,this.acceleration=new f,this.allowDrag=!0,this.drag=new f,this.allowGravity=!0,this.gravity=new f,this.bounce=new f,this.worldBounce=null,this.customBoundsRectangle=p.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new f(1e4,1e4),this.maxSpeed=-1,this.friction=new f(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=v.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=v.DYNAMIC_BODY,this._sx=y.scaleX,this._sy=y.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new c},updateBounds:function(){var h=this.gameObject,p=this.transform;if(h.parentContainer){var y=h.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);p.x=y.tx,p.y=y.ty,p.rotation=o(y.rotation),p.scaleX=y.scaleX,p.scaleY=y.scaleY,p.displayOriginX=h.displayOriginX,p.displayOriginY=h.displayOriginY}else p.x=h.x,p.y=h.y,p.rotation=h.angle,p.scaleX=h.scaleX,p.scaleY=h.scaleY,p.displayOriginX=h.displayOriginX,p.displayOriginY=h.displayOriginY;var x=!1;if(this.syncBounds){var T=h.getBounds(this._bounds);this.width=T.width,this.height=T.height,x=!0}else{var C=Math.abs(p.scaleX),E=Math.abs(p.scaleY);(this._sx!==C||this._sy!==E)&&(this.width=this.sourceWidth*C,this.height=this.sourceHeight*E,this._sx=C,this._sy=E,x=!0)}x&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var h=this.transform;this.position.x=h.x+h.scaleX*(this.offset.x-h.displayOriginX),this.position.y=h.y+h.scaleY*(this.offset.y-h.displayOriginY),this.updateCenter()},resetFlags:function(h){h===void 0&&(h=!1);var p=this.wasTouching,y=this.touching,x=this.blocked;h?(p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1):(p.none=y.none,p.up=y.up,p.down=y.down,p.left=y.left,p.right=y.right),y.none=!0,y.up=!1,y.down=!1,y.left=!1,y.right=!1,x.none=!0,x.up=!1,x.down=!1,x.left=!1,x.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(h,p){h&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),h&&this.update(p)},update:function(h){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,h);var p=this.velocity.x,y=this.velocity.y;this.newVelocity.set(p*h,y*h),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(y,p),this.speed=Math.sqrt(p*p+y*y),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(u.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var h=this.position.x-this.prevFrame.x,p=this.position.y-this.prevFrame.y,y=this.gameObject;if(this.moves){var x=this.deltaMax.x,T=this.deltaMax.y;x!==0&&h!==0&&(h<0&&h<-x?h=-x:h>0&&h>x&&(h=x)),T!==0&&p!==0&&(p<0&&p<-T?p=-T:p>0&&p>T&&(p=T)),y&&(y.x+=h,y.y+=p)}h<0?this.facing=v.FACING_LEFT:h>0&&(this.facing=v.FACING_RIGHT),p<0?this.facing=v.FACING_UP:p>0&&(this.facing=v.FACING_DOWN),this.allowRotation&&y&&(y.angle+=this.deltaZ()),this._tx=h,this._ty=p},setBoundsRectangle:function(h){return this.customBoundsRectangle=h||this.world.bounds,this},checkWorldBounds:function(){var h=this.position,p=this.customBoundsRectangle,y=this.world.checkCollision,x=this.worldBounce?-this.worldBounce.x:-this.bounce.x,T=this.worldBounce?-this.worldBounce.y:-this.bounce.y,C=!1;return h.x<p.x&&y.left?(h.x=p.x,this.velocity.x*=x,this.blocked.left=!0,C=!0):this.right>p.right&&y.right&&(h.x=p.right-this.width,this.velocity.x*=x,this.blocked.right=!0,C=!0),h.y<p.y&&y.up?(h.y=p.y,this.velocity.y*=T,this.blocked.up=!0,C=!0):this.bottom>p.bottom&&y.down&&(h.y=p.bottom-this.height,this.velocity.y*=T,this.blocked.down=!0,C=!0),C&&(this.blocked.none=!1,this.updateCenter()),C},setOffset:function(h,p){return p===void 0&&(p=h),this.offset.set(h,p),this},setGameObject:function(h,p){return p===void 0&&(p=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=h,h.body&&(h.body=this),this.setSize(),this.world.add(this),this.enable=p,this},setSize:function(h,p,y){y===void 0&&(y=!0);var x=this.gameObject;if(x&&(!h&&x.frame&&(h=x.frame.realWidth),!p&&x.frame&&(p=x.frame.realHeight)),this.sourceWidth=h,this.sourceHeight=p,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),y&&x&&x.getCenter){var T=(x.width-h)/2,C=(x.height-p)/2;this.offset.set(T,C)}return this.isCircle=!1,this.radius=0,this},setCircle:function(h,p,y){return p===void 0&&(p=this.offset.x),y===void 0&&(y=this.offset.y),h>0?(this.isCircle=!0,this.radius=h,this.sourceWidth=h*2,this.sourceHeight=h*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(p,y),this.updateCenter()):this.isCircle=!1,this},reset:function(h,p){this.stop();var y=this.gameObject;y&&(y.setPosition(h,p),this.rotation=y.angle,this.preRotation=y.angle);var x=this.position;y&&y.getTopLeft?y.getTopLeft(x):x.set(h,p),this.prev.copy(x),this.prevFrame.copy(x),y&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(h){return h.x=this.x,h.y=this.y,h.right=this.right,h.bottom=this.bottom,h},hitTest:function(h,p){if(!this.isCircle)return l(this,h,p);if(this.radius>0&&h>=this.left&&h<=this.right&&p>=this.top&&p<=this.bottom){var y=(this.center.x-h)*(this.center.x-h),x=(this.center.y-p)*(this.center.y-p);return y+x<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(h){var p=this.position,y=p.x+this.halfWidth,x=p.y+this.halfHeight;this.debugShowBody&&(h.lineStyle(h.defaultStrokeWidth,this.debugBodyColor),this.isCircle?h.strokeCircle(y,x,this.width/2):(this.checkCollision.up&&h.lineBetween(p.x,p.y,p.x+this.width,p.y),this.checkCollision.right&&h.lineBetween(p.x+this.width,p.y,p.x+this.width,p.y+this.height),this.checkCollision.down&&h.lineBetween(p.x,p.y+this.height,p.x+this.width,p.y+this.height),this.checkCollision.left&&h.lineBetween(p.x,p.y,p.x,p.y+this.height))),this.debugShowVelocity&&(h.lineStyle(h.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),h.lineBetween(y,x,y+this.velocity.x/2,x+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(h,p,y,x){h===void 0&&(h=!0),this.collideWorldBounds=h;var T=p!==void 0,C=y!==void 0;return(T||C)&&(this.worldBounce||(this.worldBounce=new f),T&&(this.worldBounce.x=p),C&&(this.worldBounce.y=y)),x!==void 0&&(this.onWorldBounds=x),this},setVelocity:function(h,p){return this.velocity.set(h,p),h=this.velocity.x,p=this.velocity.y,this.speed=Math.sqrt(h*h+p*p),this},setVelocityX:function(h){return this.setVelocity(h,this.velocity.y)},setVelocityY:function(h){return this.setVelocity(this.velocity.x,h)},setMaxVelocity:function(h,p){return this.maxVelocity.set(h,p),this},setMaxVelocityX:function(h){return this.maxVelocity.x=h,this},setMaxVelocityY:function(h){return this.maxVelocity.y=h,this},setMaxSpeed:function(h){return this.maxSpeed=h,this},setBounce:function(h,p){return this.bounce.set(h,p),this},setBounceX:function(h){return this.bounce.x=h,this},setBounceY:function(h){return this.bounce.y=h,this},setAcceleration:function(h,p){return this.acceleration.set(h,p),this},setAccelerationX:function(h){return this.acceleration.x=h,this},setAccelerationY:function(h){return this.acceleration.y=h,this},setAllowDrag:function(h){return h===void 0&&(h=!0),this.allowDrag=h,this},setAllowGravity:function(h){return h===void 0&&(h=!0),this.allowGravity=h,this},setAllowRotation:function(h){return h===void 0&&(h=!0),this.allowRotation=h,this},setDrag:function(h,p){return this.drag.set(h,p),this},setDamping:function(h){return this.useDamping=h,this},setDragX:function(h){return this.drag.x=h,this},setDragY:function(h){return this.drag.y=h,this},setGravity:function(h,p){return this.gravity.set(h,p),this},setGravityX:function(h){return this.gravity.x=h,this},setGravityY:function(h){return this.gravity.y=h,this},setFriction:function(h,p){return this.friction.set(h,p),this},setFrictionX:function(h){return this.friction.x=h,this},setFrictionY:function(h){return this.friction.y=h,this},setAngularVelocity:function(h){return this.angularVelocity=h,this},setAngularAcceleration:function(h){return this.angularAcceleration=h,this},setAngularDrag:function(h){return this.angularDrag=h,this},setMass:function(h){return this.mass=h,this},setImmovable:function(h){return h===void 0&&(h=!0),this.immovable=h,this},setEnable:function(h){return h===void 0&&(h=!0),this.enable=h,this},processX:function(h,p,y,x){this.x+=h,this.updateCenter(),p!==null&&(this.velocity.x=p);var T=this.blocked;y&&(T.left=!0,T.none=!1),x&&(T.right=!0,T.none=!1)},processY:function(h,p,y,x){this.y+=h,this.updateCenter(),p!==null&&(this.velocity.y=p);var T=this.blocked;y&&(T.up=!0,T.none=!1),x&&(T.down=!0,T.none=!1)},x:{get:function(){return this.position.x},set:function(h){this.position.x=h}},y:{get:function(){return this.position.y},set:function(h){this.position.y=h}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});i.exports=m},3909:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c,l,f,m,h,p){this.world=o,this.name="",this.active=!0,this.overlapOnly=c,this.object1=l,this.object2=f,this.collideCallback=m,this.processCallback=h,this.callbackContext=p},setName:function(u){return this.name=u,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});i.exports=v},99523:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62832),v=e(25084),u=e(97602),o=e(56694),c=e(47401),l=e(10481),f=e(66634),m=e(46346),h=new o({initialize:function(y){this.world=y,this.scene=y.scene,this.sys=y.scene.sys},collider:function(p,y,x,T,C){return this.world.addCollider(p,y,x,T,C)},overlap:function(p,y,x,T,C){return this.world.addOverlap(p,y,x,T,C)},existing:function(p,y){var x=y?c.STATIC_BODY:c.DYNAMIC_BODY;return this.world.enableBody(p,x),p},staticImage:function(p,y,x,T){var C=new a(this.scene,p,y,x,T);return this.sys.displayList.add(C),this.world.enableBody(C,c.STATIC_BODY),C},image:function(p,y,x,T){var C=new a(this.scene,p,y,x,T);return this.sys.displayList.add(C),this.world.enableBody(C,c.DYNAMIC_BODY),C},staticSprite:function(p,y,x,T){var C=new v(this.scene,p,y,x,T);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,c.STATIC_BODY),C},sprite:function(p,y,x,T){var C=new v(this.scene,p,y,x,T);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,c.DYNAMIC_BODY),C},staticGroup:function(p,y){return this.sys.updateList.add(new m(this.world,this.world.scene,p,y))},group:function(p,y){return this.sys.updateList.add(new l(this.world,this.world.scene,p,y))},body:function(p,y,x,T){var C=new u(this.world);return C.position.set(p,y),x&&T&&C.setSize(x,T),this.world.add(C,c.DYNAMIC_BODY),C},staticBody:function(p,y,x,T){var C=new f(this.world);return C.position.set(p,y),x&&T&&C.setSize(x,T),this.world.add(C,c.STATIC_BODY),C},destroy:function(){this.world=null,this.scene=null,this.sys=null}});i.exports=h},75671:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47401),v=function(u,o,c,l){var f=0,m=u.deltaAbsX()+o.deltaAbsX()+l;return u._dx===0&&o._dx===0?(u.embedded=!0,o.embedded=!0):u._dx>o._dx?(f=u.right-o.x,f>m&&!c||u.checkCollision.right===!1||o.checkCollision.left===!1?f=0:(u.touching.none=!1,u.touching.right=!0,o.touching.none=!1,o.touching.left=!0,o.physicsType===a.STATIC_BODY&&!c&&(u.blocked.none=!1,u.blocked.right=!0),u.physicsType===a.STATIC_BODY&&!c&&(o.blocked.none=!1,o.blocked.left=!0))):u._dx<o._dx&&(f=u.x-o.width-o.x,-f>m&&!c||u.checkCollision.left===!1||o.checkCollision.right===!1?f=0:(u.touching.none=!1,u.touching.left=!0,o.touching.none=!1,o.touching.right=!0,o.physicsType===a.STATIC_BODY&&!c&&(u.blocked.none=!1,u.blocked.left=!0),u.physicsType===a.STATIC_BODY&&!c&&(o.blocked.none=!1,o.blocked.right=!0))),u.overlapX=f,o.overlapX=f,f};i.exports=v},66185:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47401),v=function(u,o,c,l){var f=0,m=u.deltaAbsY()+o.deltaAbsY()+l;return u._dy===0&&o._dy===0?(u.embedded=!0,o.embedded=!0):u._dy>o._dy?(f=u.bottom-o.y,f>m&&!c||u.checkCollision.down===!1||o.checkCollision.up===!1?f=0:(u.touching.none=!1,u.touching.down=!0,o.touching.none=!1,o.touching.up=!0,o.physicsType===a.STATIC_BODY&&!c&&(u.blocked.none=!1,u.blocked.down=!0),u.physicsType===a.STATIC_BODY&&!c&&(o.blocked.none=!1,o.blocked.up=!0))):u._dy<o._dy&&(f=u.y-o.bottom,-f>m&&!c||u.checkCollision.up===!1||o.checkCollision.down===!1?f=0:(u.touching.none=!1,u.touching.up=!0,o.touching.none=!1,o.touching.down=!0,o.physicsType===a.STATIC_BODY&&!c&&(u.blocked.none=!1,u.blocked.up=!0),u.physicsType===a.STATIC_BODY&&!c&&(o.blocked.none=!1,o.blocked.down=!0))),u.overlapY=f,o.overlapY=f,f};i.exports=v},10481:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25084),v=e(56694),u=e(47401),o=e(72632),c=e(59192),l=e(42911),f=new v({Extends:c,initialize:function(h,p,y,x){if(!y&&!x)x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(l(y))x=y,y=null,x.internalCreateCallback=this.createCallbackHandler,x.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(y)&&l(y[0])){x=y[0];var T=this;y.forEach(function(C){C.internalCreateCallback=T.createCallbackHandler,C.internalRemoveCallback=T.removeCallbackHandler}),y=null}else x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=h,x.classType=o(x,"classType",a),this.physicsType=u.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:o(x,"collideWorldBounds",!1),setBoundsRectangle:o(x,"customBoundsRectangle",null),setAccelerationX:o(x,"accelerationX",0),setAccelerationY:o(x,"accelerationY",0),setAllowDrag:o(x,"allowDrag",!0),setAllowGravity:o(x,"allowGravity",!0),setAllowRotation:o(x,"allowRotation",!0),setDamping:o(x,"useDamping",!1),setBounceX:o(x,"bounceX",0),setBounceY:o(x,"bounceY",0),setDragX:o(x,"dragX",0),setDragY:o(x,"dragY",0),setEnable:o(x,"enable",!0),setGravityX:o(x,"gravityX",0),setGravityY:o(x,"gravityY",0),setFrictionX:o(x,"frictionX",0),setFrictionY:o(x,"frictionY",0),setMaxSpeed:o(x,"maxSpeed",-1),setMaxVelocityX:o(x,"maxVelocityX",1e4),setMaxVelocityY:o(x,"maxVelocityY",1e4),setVelocityX:o(x,"velocityX",0),setVelocityY:o(x,"velocityY",0),setAngularVelocity:o(x,"angularVelocity",0),setAngularAcceleration:o(x,"angularAcceleration",0),setAngularDrag:o(x,"angularDrag",0),setMass:o(x,"mass",1),setImmovable:o(x,"immovable",!1)},c.call(this,p,y,x),this.type="PhysicsGroup"},createCallbackHandler:function(m){m.body||this.world.enableBody(m,u.DYNAMIC_BODY);var h=m.body;for(var p in this.defaults)h[p](this.defaults[p])},removeCallbackHandler:function(m){m.body&&this.world.disableBody(m)},setVelocity:function(m,h,p){p===void 0&&(p=0);for(var y=this.getChildren(),x=0;x<y.length;x++)y[x].body.velocity.set(m+x*p,h+x*p);return this},setVelocityX:function(m,h){h===void 0&&(h=0);for(var p=this.getChildren(),y=0;y<p.length;y++)p[y].body.velocity.x=m+y*h;return this},setVelocityY:function(m,h){h===void 0&&(h=0);for(var p=this.getChildren(),y=0;y<p.length;y++)p[y].body.velocity.y=m+y*h;return this}});i.exports=f},22916:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g,e,a,v,u,o,c,l,f,m,h,p,y,x,T,C,E,A=function(F,P,O){g=F,e=P;var M=g.velocity.x,L=e.velocity.x;return a=g.pushable,f=g._dx<0,m=g._dx>0,h=g._dx===0,T=Math.abs(g.right-e.x)<=Math.abs(e.right-g.x),c=L-M*g.bounce.x,v=e.pushable,p=e._dx<0,y=e._dx>0,x=e._dx===0,C=!T,l=M-L*e.bounce.x,E=Math.abs(O),w()},w=function(){return m&&T&&e.blocked.right?(g.processX(-E,c,!1,!0),1):f&&C&&e.blocked.left?(g.processX(E,c,!0),1):y&&C&&g.blocked.right?(e.processX(-E,l,!1,!0),2):p&&T&&g.blocked.left?(e.processX(E,l,!0),2):0},b=function(){var F=g.velocity.x,P=e.velocity.x,O=Math.sqrt(P*P*e.mass/g.mass)*(P>0?1:-1),M=Math.sqrt(F*F*g.mass/e.mass)*(F>0?1:-1),L=(O+M)*.5;return O-=L,M-=L,u=L+O*g.bounce.x,o=L+M*e.bounce.x,f&&C?I(0):p&&T?I(1):m&&T?I(2):y&&C?I(3):!1},I=function(F){if(a&&v)E*=.5,F===0||F===3?(g.processX(E,u),e.processX(-E,o)):(g.processX(-E,u),e.processX(E,o));else if(a&&!v)F===0||F===3?g.processX(E,c,!0):g.processX(-E,c,!1,!0);else if(!a&&v)F===0||F===3?e.processX(-E,l,!1,!0):e.processX(E,l,!0);else{var P=E*.5;F===0?x?(g.processX(E,0,!0),e.processX(0,null,!1,!0)):y?(g.processX(P,0,!0),e.processX(-P,0,!1,!0)):(g.processX(P,e.velocity.x,!0),e.processX(-P,null,!1,!0)):F===1?h?(g.processX(0,null,!1,!0),e.processX(E,0,!0)):m?(g.processX(-P,0,!1,!0),e.processX(P,0,!0)):(g.processX(-P,null,!1,!0),e.processX(P,g.velocity.x,!0)):F===2?x?(g.processX(-E,0,!1,!0),e.processX(0,null,!0)):p?(g.processX(-P,0,!1,!0),e.processX(P,0,!0)):(g.processX(-P,e.velocity.x,!1,!0),e.processX(P,null,!0)):F===3&&(h?(g.processX(0,null,!0),e.processX(-E,0,!1,!0)):f?(g.processX(P,0,!0),e.processX(-P,0,!1,!0)):(g.processX(P,e.velocity.y,!0),e.processX(-P,null,!1,!0)))}return!0},R=function(F){F===1?e.velocity.x=0:T?e.processX(E,l,!0):e.processX(-E,l,!1,!0),g.moves&&(e.y+=(g.y-g.prev.y)*g.friction.y,e._dy=e.y-e.prev.y)},N=function(F){F===2?g.velocity.x=0:C?g.processX(E,c,!0):g.processX(-E,c,!1,!0),e.moves&&(g.y+=(e.y-e.prev.y)*e.friction.y,g._dy=g.y-g.prev.y)};i.exports={BlockCheck:w,Check:b,Set:A,Run:I,RunImmovableBody1:R,RunImmovableBody2:N}},67050:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g,e,a,v,u,o,c,l,f,m,h,p,y,x,T,C,E,A=function(F,P,O){g=F,e=P;var M=g.velocity.y,L=e.velocity.y;return a=g.pushable,f=g._dy<0,m=g._dy>0,h=g._dy===0,T=Math.abs(g.bottom-e.y)<=Math.abs(e.bottom-g.y),c=L-M*g.bounce.y,v=e.pushable,p=e._dy<0,y=e._dy>0,x=e._dy===0,C=!T,l=M-L*e.bounce.y,E=Math.abs(O),w()},w=function(){return m&&T&&e.blocked.down?(g.processY(-E,c,!1,!0),1):f&&C&&e.blocked.up?(g.processY(E,c,!0),1):y&&C&&g.blocked.down?(e.processY(-E,l,!1,!0),2):p&&T&&g.blocked.up?(e.processY(E,l,!0),2):0},b=function(){var F=g.velocity.y,P=e.velocity.y,O=Math.sqrt(P*P*e.mass/g.mass)*(P>0?1:-1),M=Math.sqrt(F*F*g.mass/e.mass)*(F>0?1:-1),L=(O+M)*.5;return O-=L,M-=L,u=L+O*g.bounce.y,o=L+M*e.bounce.y,f&&C?I(0):p&&T?I(1):m&&T?I(2):y&&C?I(3):!1},I=function(F){if(a&&v)E*=.5,F===0||F===3?(g.processY(E,u),e.processY(-E,o)):(g.processY(-E,u),e.processY(E,o));else if(a&&!v)F===0||F===3?g.processY(E,c,!0):g.processY(-E,c,!1,!0);else if(!a&&v)F===0||F===3?e.processY(-E,l,!1,!0):e.processY(E,l,!0);else{var P=E*.5;F===0?x?(g.processY(E,0,!0),e.processY(0,null,!1,!0)):y?(g.processY(P,0,!0),e.processY(-P,0,!1,!0)):(g.processY(P,e.velocity.y,!0),e.processY(-P,null,!1,!0)):F===1?h?(g.processY(0,null,!1,!0),e.processY(E,0,!0)):m?(g.processY(-P,0,!1,!0),e.processY(P,0,!0)):(g.processY(-P,null,!1,!0),e.processY(P,g.velocity.y,!0)):F===2?x?(g.processY(-E,0,!1,!0),e.processY(0,null,!0)):p?(g.processY(-P,0,!1,!0),e.processY(P,0,!0)):(g.processY(-P,e.velocity.y,!1,!0),e.processY(P,null,!0)):F===3&&(h?(g.processY(0,null,!0),e.processY(-E,0,!1,!0)):f?(g.processY(P,0,!0),e.processY(-P,0,!1,!0)):(g.processY(P,e.velocity.y,!0),e.processY(-P,null,!1,!0)))}return!0},R=function(F){F===1?e.velocity.y=0:T?e.processY(E,l,!0):e.processY(-E,l,!1,!0),g.moves&&(e.x+=(g.x-g.prev.x)*g.friction.x,e._dx=e.x-e.prev.x)},N=function(F){F===2?g.velocity.y=0:C?g.processY(E,c,!0):g.processY(-E,c,!1,!0),e.moves&&(g.x+=(e.x-e.prev.x)*e.friction.x,g._dx=g.x-g.prev.x)};i.exports={BlockCheck:w,Check:b,Set:A,Run:I,RunImmovableBody1:R,RunImmovableBody2:N}},61777:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75671),v=e(22916),u=function(o,c,l,f,m){m===void 0&&(m=a(o,c,l,f));var h=o.immovable,p=c.immovable;if(l||m===0||h&&p||o.customSeparateX||c.customSeparateX)return m!==0||o.embedded&&c.embedded;var y=v.Set(o,c,m);return!h&&!p?y>0?!0:v.Check():(h?v.RunImmovableBody1(y):p&&v.RunImmovableBody2(y),!0)};i.exports=u},25299:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66185),v=e(67050),u=function(o,c,l,f,m){m===void 0&&(m=a(o,c,l,f));var h=o.immovable,p=c.immovable;if(l||m===0||h&&p||o.customSeparateY||c.customSeparateY)return m!==0||o.embedded&&c.embedded;var y=v.Set(o,c,m);return!h&&!p?y>0?!0:v.Check():(h?v.RunImmovableBody1(y):p&&v.RunImmovableBody2(y),!0)};i.exports=u},66634:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65650),v=e(56694),u=e(47401),o=e(94287),c=e(93736),l=new v({initialize:function(m,h){var p=64,y=64,x={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},T=h!==void 0;T&&h.displayWidth&&(p=h.displayWidth,y=h.displayHeight),T||(h=x),this.world=m,this.gameObject=T?h:void 0,this.isBody=!0,this.debugShowBody=m.defaults.debugShowStaticBody,this.debugBodyColor=m.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new c,this.position=new c(h.x-p*h.originX,h.y-y*h.originY),this.width=p,this.height=y,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new c(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=c.ZERO,this.allowGravity=!1,this.gravity=c.ZERO,this.bounce=c.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=u.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(f,m){return f&&f!==this.gameObject&&(this.gameObject.body=null,f.body=this,this.gameObject=f),m&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var f=this.gameObject;return f.getTopLeft(this.position),this.width=f.displayWidth,this.height=f.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(f,m){return m===void 0&&(m=f),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(f,m),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(f,m,h){h===void 0&&(h=!0);var p=this.gameObject;if(!f&&p.frame&&(f=p.frame.realWidth),!m&&p.frame&&(m=p.frame.realHeight),this.world.staticTree.remove(this),this.width=f,this.height=m,this.halfWidth=Math.floor(f/2),this.halfHeight=Math.floor(m/2),h&&p.getCenter){var y=p.displayWidth/2,x=p.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(y-this.halfWidth,x-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(f,m,h){return m===void 0&&(m=this.offset.x),h===void 0&&(h=this.offset.y),f>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=f,this.width=f*2,this.height=f*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(m,h),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(f,m){var h=this.gameObject;f===void 0&&(f=h.x),m===void 0&&(m=h.y),this.world.staticTree.remove(this),h.setPosition(f,m),h.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(f){return f.x=this.x,f.y=this.y,f.right=this.right,f.bottom=this.bottom,f},hitTest:function(f,m){return this.isCircle?a(this,f,m):o(this,f,m)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(f){var m=this.position,h=m.x+this.halfWidth,p=m.y+this.halfHeight;this.debugShowBody&&(f.lineStyle(f.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?f.strokeCircle(h,p,this.width/2):f.strokeRect(m.x,m.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(f){return f<=0&&(f=.1),this.mass=f,this},x:{get:function(){return this.position.x},set:function(f){this.world.staticTree.remove(this),this.position.x=f,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(f){this.world.staticTree.remove(this),this.position.y=f,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});i.exports=l},46346:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25084),v=e(56694),u=e(47401),o=e(72632),c=e(59192),l=e(42911),f=new v({Extends:c,initialize:function(h,p,y,x){!y&&!x?x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:a}:l(y)?(x=y,y=null,x.internalCreateCallback=this.createCallbackHandler,x.internalRemoveCallback=this.removeCallbackHandler,x.createMultipleCallback=this.createMultipleCallbackHandler,x.classType=o(x,"classType",a)):Array.isArray(y)&&l(y[0])?(x=y,y=null,x.forEach(function(T){T.internalCreateCallback=this.createCallbackHandler,T.internalRemoveCallback=this.removeCallbackHandler,T.createMultipleCallback=this.createMultipleCallbackHandler,T.classType=o(T,"classType",a)})):x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=h,this.physicsType=u.STATIC_BODY,c.call(this,p,y,x),this.type="StaticPhysicsGroup"},createCallbackHandler:function(m){m.body||this.world.enableBody(m,u.STATIC_BODY)},removeCallbackHandler:function(m){m.body&&this.world.disableBody(m)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var m=this.children.entries,h=0;h<m.length;h++)m[h].body.reset();return this}});i.exports=f},85233:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(94240),v=e(97602),u=e(82897),o=e(56694),c=e(3909),l=e(47401),f=e(53996),m=e(92951),h=e(6659),p=e(27037),y=e(88456),x=e(41935),T=e(54726),C=e(75671),E=e(66185),A=e(44662),w=e(10850),b=e(83392),I=e(74623),R=e(25163),N=e(74118),F=e(68687),P=e(27354),O=e(61777),M=e(25299),L=e(58403),k=e(66634),V=e(28808),W=e(69360),K=e(93736),B=e(1071),G=new o({Extends:h,initialize:function($,z){h.call(this),this.scene=$,this.bodies=new L,this.staticBodies=new L,this.pendingDestroy=new L,this.colliders=new I,this.gravity=new K(w(z,"gravity.x",0),w(z,"gravity.y",0)),this.bounds=new N(w(z,"x",0),w(z,"y",0),w(z,"width",$.sys.scale.width),w(z,"height",$.sys.scale.height)),this.checkCollision={up:w(z,"checkCollision.up",!0),down:w(z,"checkCollision.down",!0),left:w(z,"checkCollision.left",!0),right:w(z,"checkCollision.right",!0)},this.fps=w(z,"fps",60),this.fixedStep=w(z,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=w(z,"timeScale",1),this.OVERLAP_BIAS=w(z,"overlapBias",4),this.TILE_BIAS=w(z,"tileBias",16),this.forceX=w(z,"forceX",!1),this.isPaused=w(z,"isPaused",!1),this._total=0,this.drawDebug=w(z,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:w(z,"debugShowBody",!0),debugShowStaticBody:w(z,"debugShowStaticBody",!0),debugShowVelocity:w(z,"debugShowVelocity",!0),bodyDebugColor:w(z,"debugBodyColor",16711935),staticBodyDebugColor:w(z,"debugStaticBodyColor",255),velocityDebugColor:w(z,"debugVelocityColor",65280)},this.maxEntries=w(z,"maxEntries",16),this.useTree=w(z,"useTree",!0),this.tree=new F(this.maxEntries),this.staticTree=new F(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new W,this._tempMatrix2=new W,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(D,$){$===void 0&&($=l.DYNAMIC_BODY),Array.isArray(D)||(D=[D]);for(var z=0;z<D.length;z++){var H=D[z];if(H.isParent)for(var Y=H.getChildren(),Z=0;Z<Y.length;Z++){var Q=Y[Z];Q.isParent?this.enable(Q,$):this.enableBody(Q,$)}else this.enableBody(H,$)}},enableBody:function(D,$){return $===void 0&&($=l.DYNAMIC_BODY),D.hasTransformComponent&&(D.body||($===l.DYNAMIC_BODY?D.body=new v(this,D):$===l.STATIC_BODY&&(D.body=new k(this,D))),this.add(D.body)),D},add:function(D){return D.physicsType===l.DYNAMIC_BODY?this.bodies.set(D):D.physicsType===l.STATIC_BODY&&(this.staticBodies.set(D),this.staticTree.insert(D)),D.enable=!0,D},disable:function(D){Array.isArray(D)||(D=[D]);for(var $=0;$<D.length;$++){var z=D[$];if(z.isParent)for(var H=z.getChildren(),Y=0;Y<H.length;Y++){var Z=H[Y];Z.isParent?this.disable(Z):this.disableBody(Z.body)}else this.disableBody(z.body)}},disableBody:function(D){this.remove(D),D.enable=!1},remove:function(D){D.physicsType===l.DYNAMIC_BODY?(this.tree.remove(D),this.bodies.delete(D)):D.physicsType===l.STATIC_BODY&&(this.staticBodies.delete(D),this.staticTree.remove(D))},createDebugGraphic:function(){var D=this.scene.sys.add.graphics({x:0,y:0});return D.setDepth(Number.MAX_VALUE),this.debugGraphic=D,this.drawDebug=!0,D},setBounds:function(D,$,z,H,Y,Z,Q,tt){return this.bounds.setTo(D,$,z,H),Y!==void 0&&this.setBoundsCollision(Y,Z,Q,tt),this},setBoundsCollision:function(D,$,z,H){return D===void 0&&(D=!0),$===void 0&&($=!0),z===void 0&&(z=!0),H===void 0&&(H=!0),this.checkCollision.left=D,this.checkCollision.right=$,this.checkCollision.up=z,this.checkCollision.down=H,this},pause:function(){return this.isPaused=!0,this.emit(p.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(p.RESUME),this},addCollider:function(D,$,z,H,Y){z===void 0&&(z=null),H===void 0&&(H=null),Y===void 0&&(Y=z);var Z=new c(this,!1,D,$,z,H,Y);return this.colliders.add(Z),Z},addOverlap:function(D,$,z,H,Y){z===void 0&&(z=null),H===void 0&&(H=null),Y===void 0&&(Y=z);var Z=new c(this,!0,D,$,z,H,Y);return this.colliders.add(Z),Z},removeCollider:function(D){return this.colliders.remove(D),this},setFPS:function(D){return this.fps=D,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(D,$){if(!(this.isPaused||this.bodies.size===0)){var z,H=this._frameTime,Y=this._frameTimeMS*this.timeScale;this._elapsed+=$;var Z,Q=this.bodies.entries,tt=this._elapsed>=Y;for(this.fixedStep||(H=$*.001,tt=!0,this._elapsed=0),z=0;z<Q.length;z++)Z=Q[z],Z.enable&&Z.preUpdate(tt,H);if(tt){this._elapsed-=Y,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Q));var et=this.colliders.update();for(z=0;z<et.length;z++){var lt=et[z];lt.active&&lt.update()}this.emit(p.WORLD_STEP,H)}for(;this._elapsed>=Y;)this._elapsed-=Y,this.step(H)}},step:function(D){var $,z,H=this.bodies.entries,Y=H.length;for($=0;$<Y;$++)z=H[$],z.enable&&z.update(D);this.useTree&&(this.tree.clear(),this.tree.load(H));var Z=this.colliders.update();for($=0;$<Z.length;$++){var Q=Z[$];Q.active&&Q.update()}this.emit(p.WORLD_STEP,D),this.stepsLastFrame++},postUpdate:function(){var D,$,z=this.bodies.entries,H=z.length,Y=this.bodies,Z=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,D=0;D<H;D++)$=z[D],$.enable&&$.postUpdate();if(this.drawDebug){var Q=this.debugGraphic;for(Q.clear(),D=0;D<H;D++)$=z[D],$.willDrawDebug()&&$.drawDebug(Q);for(z=Z.entries,H=z.length,D=0;D<H;D++)$=z[D],$.willDrawDebug()&&$.drawDebug(Q)}var tt=this.pendingDestroy;if(tt.size>0){var et=this.tree,lt=this.staticTree;for(z=tt.entries,H=z.length,D=0;D<H;D++)$=z[D],$.physicsType===l.DYNAMIC_BODY?(et.remove($),Y.delete($)):$.physicsType===l.STATIC_BODY&&(lt.remove($),Z.delete($)),$.world=void 0,$.gameObject=void 0;tt.clear()}},updateMotion:function(D,$){D.allowRotation&&this.computeAngularVelocity(D,$),this.computeVelocity(D,$)},computeAngularVelocity:function(D,$){var z=D.angularVelocity,H=D.angularAcceleration,Y=D.angularDrag,Z=D.maxAngular;H?z+=H*$:D.allowDrag&&Y&&(Y*=$,x(z-Y,0,.1)?z-=Y:T(z+Y,0,.1)?z+=Y:z=0),z=u(z,-Z,Z);var Q=z-D.angularVelocity;D.angularVelocity+=Q,D.rotation+=D.angularVelocity*$},computeVelocity:function(D,$){var z=D.velocity.x,H=D.acceleration.x,Y=D.drag.x,Z=D.maxVelocity.x,Q=D.velocity.y,tt=D.acceleration.y,et=D.drag.y,lt=D.maxVelocity.y,ut=D.speed,ct=D.maxSpeed,ht=D.allowDrag,gt=D.useDamping;D.allowGravity&&(z+=(this.gravity.x+D.gravity.x)*$,Q+=(this.gravity.y+D.gravity.y)*$),H?z+=H*$:ht&&Y&&(gt?(Y=Math.pow(Y,$),z*=Y,ut=Math.sqrt(z*z+Q*Q),y(ut,0,.001)&&(z=0)):(Y*=$,x(z-Y,0,.01)?z-=Y:T(z+Y,0,.01)?z+=Y:z=0)),tt?Q+=tt*$:ht&&et&&(gt?(et=Math.pow(et,$),Q*=et,ut=Math.sqrt(z*z+Q*Q),y(ut,0,.001)&&(Q=0)):(et*=$,x(Q-et,0,.01)?Q-=et:T(Q+et,0,.01)?Q+=et:Q=0)),z=u(z,-Z,Z),Q=u(Q,-lt,lt),D.velocity.set(z,Q),ct>-1&&D.velocity.length()>ct&&(D.velocity.normalize().scale(ct),ut=ct),D.speed=ut},separate:function(D,$,z,H,Y){var Z,Q,tt=!1,et=!0;if(!D.enable||!$.enable||D.checkCollision.none||$.checkCollision.none||!this.intersects(D,$)||z&&z.call(H,D.gameObject,$.gameObject)===!1)return tt;if(D.isCircle||$.isCircle){var lt=this.separateCircle(D,$,Y);lt.result?(tt=!0,et=!1):(Z=lt.x,Q=lt.y,et=!0)}if(et){var ut=!1,ct=!1,ht=this.OVERLAP_BIAS;Y?(ut=O(D,$,Y,ht,Z),ct=M(D,$,Y,ht,Q)):this.forceX||Math.abs(this.gravity.y+D.gravity.y)<Math.abs(this.gravity.x+D.gravity.x)?(ut=O(D,$,Y,ht,Z),this.intersects(D,$)&&(ct=M(D,$,Y,ht,Q))):(ct=M(D,$,Y,ht,Q),this.intersects(D,$)&&(ut=O(D,$,Y,ht,Z))),tt=ut||ct}return tt&&(Y?(D.onOverlap||$.onOverlap)&&this.emit(p.OVERLAP,D.gameObject,$.gameObject,D,$):(D.onCollide||$.onCollide)&&this.emit(p.COLLIDE,D.gameObject,$.gameObject,D,$)),tt},separateCircle:function(D,$,z){C(D,$,!1,0),E(D,$,!1,0);var H=D.isCircle,Y=$.isCircle,Z=D.center,Q=$.center,tt=D.immovable,et=$.immovable,lt=D.velocity,ut=$.velocity,ct=0,ht=!0;if(H!==Y){ht=!1;var gt=Z.x,yt=Z.y,Et=D.halfWidth,bt=$.position.x,pt=$.position.y,wt=$.right,Tt=$.bottom;Y&&(gt=Q.x,yt=Q.y,Et=$.halfWidth,bt=D.position.x,pt=D.position.y,wt=D.right,Tt=D.bottom),yt<pt?gt<bt?ct=f(gt,yt,bt,pt)-Et:gt>wt&&(ct=f(gt,yt,wt,pt)-Et):yt>Tt&&(gt<bt?ct=f(gt,yt,bt,Tt)-Et:gt>wt&&(ct=f(gt,yt,wt,Tt)-Et)),ct*=-1}else ct=D.halfWidth+$.halfWidth-m(Z,Q);D.overlapR=ct,$.overlapR=ct;var Gt=a(Z,Q),Bt=(ct+b.EPSILON)*Math.cos(Gt),Xt=(ct+b.EPSILON)*Math.sin(Gt),te={overlap:ct,result:!1,x:Bt,y:Xt};if(z&&(!ht||ht&&ct!==0))return te.result=!0,te;if(!ht&&ct===0||tt&&et||D.customSeparateX||$.customSeparateX)return te.x=void 0,te.y=void 0,te;var Kt=!D.pushable&&!$.pushable;if(ht){var Wt=Z.x-Q.x,oe=Z.y-Q.y,Le=Math.sqrt(Math.pow(Wt,2)+Math.pow(oe,2)),ye=(Q.x-Z.x)/Le||0,Ye=(Q.y-Z.y)/Le||0,An=2*(lt.x*ye+lt.y*Ye-ut.x*ye-ut.y*Ye)/(D.mass+$.mass);(tt||et)&&(An*=2),tt||(lt.x=lt.x-An/D.mass*ye,lt.y=lt.y-An/D.mass*Ye,lt.multiply(D.bounce)),et||(ut.x=ut.x+An/$.mass*ye,ut.y=ut.y+An/$.mass*Ye,ut.multiply($.bounce)),!tt&&!et&&(Bt*=.5,Xt*=.5),tt||(D.x-=Bt,D.y-=Xt,D.updateCenter()),et||($.x+=Bt,$.y+=Xt,$.updateCenter()),te.result=!0}else!tt||D.pushable||Kt?(D.x-=Bt,D.y-=Xt,D.updateCenter()):(!et||$.pushable||Kt)&&($.x+=Bt,$.y+=Xt,$.updateCenter()),te.x=void 0,te.y=void 0;return te},intersects:function(D,$){return D===$?!1:!D.isCircle&&!$.isCircle?!(D.right<=$.left||D.bottom<=$.top||D.left>=$.right||D.top>=$.bottom):D.isCircle?$.isCircle?m(D.center,$.center)<=D.halfWidth+$.halfWidth:this.circleBodyIntersects(D,$):this.circleBodyIntersects($,D)},circleBodyIntersects:function(D,$){var z=u(D.center.x,$.left,$.right),H=u(D.center.y,$.top,$.bottom),Y=(D.center.x-z)*(D.center.x-z),Z=(D.center.y-H)*(D.center.y-H);return Y+Z<=D.halfWidth*D.halfWidth},overlap:function(D,$,z,H,Y){return z===void 0&&(z=null),H===void 0&&(H=null),Y===void 0&&(Y=z),this.collideObjects(D,$,z,H,Y,!0)},collide:function(D,$,z,H,Y){return z===void 0&&(z=null),H===void 0&&(H=null),Y===void 0&&(Y=z),this.collideObjects(D,$,z,H,Y,!1)},collideObjects:function(D,$,z,H,Y,Z){var Q,tt;D.isParent&&(D.physicsType===void 0||$===void 0||D===$)&&(D=D.children.entries),$&&$.isParent&&$.physicsType===void 0&&($=$.children.entries);var et=Array.isArray(D),lt=Array.isArray($);if(this._total=0,!et&&!lt)this.collideHandler(D,$,z,H,Y,Z);else if(!et&&lt)for(Q=0;Q<$.length;Q++)this.collideHandler(D,$[Q],z,H,Y,Z);else if(et&&!lt)if($)for(Q=0;Q<D.length;Q++)this.collideHandler(D[Q],$,z,H,Y,Z);else for(Q=0;Q<D.length;Q++){var ut=D[Q];for(tt=Q+1;tt<D.length;tt++)Q!==tt&&this.collideHandler(ut,D[tt],z,H,Y,Z)}else for(Q=0;Q<D.length;Q++)for(tt=0;tt<$.length;tt++)this.collideHandler(D[Q],$[tt],z,H,Y,Z);return this._total>0},collideHandler:function(D,$,z,H,Y,Z){if($===void 0&&D.isParent)return this.collideGroupVsGroup(D,D,z,H,Y,Z);if(!D||!$)return!1;if(D.body||D.isBody){if($.body||$.isBody)return this.collideSpriteVsSprite(D,$,z,H,Y,Z);if($.isParent)return this.collideSpriteVsGroup(D,$,z,H,Y,Z);if($.isTilemap)return this.collideSpriteVsTilemapLayer(D,$,z,H,Y,Z)}else if(D.isParent){if($.body||$.isBody)return this.collideSpriteVsGroup($,D,z,H,Y,Z);if($.isParent)return this.collideGroupVsGroup(D,$,z,H,Y,Z);if($.isTilemap)return this.collideGroupVsTilemapLayer(D,$,z,H,Y,Z)}else if(D.isTilemap){if($.body||$.isBody)return this.collideSpriteVsTilemapLayer($,D,z,H,Y,Z);if($.isParent)return this.collideGroupVsTilemapLayer($,D,z,H,Y,Z)}},collideSpriteVsSprite:function(D,$,z,H,Y,Z){var Q=D.isBody?D:D.body,tt=$.isBody?$:$.body;return!Q||!tt?!1:(this.separate(Q,tt,H,Y,Z)&&(z&&z.call(Y,D,$),this._total++),!0)},collideSpriteVsGroup:function(D,$,z,H,Y,Z){var Q=D.isBody?D:D.body;if(!($.length===0||!Q||!Q.enable||Q.checkCollision.none)){var tt,et,lt;if(this.useTree||$.physicsType===l.STATIC_BODY){var ut=this.treeMinMax;ut.minX=Q.left,ut.minY=Q.top,ut.maxX=Q.right,ut.maxY=Q.bottom;var ct=$.physicsType===l.DYNAMIC_BODY?this.tree.search(ut):this.staticTree.search(ut);for(et=ct.length,tt=0;tt<et;tt++)lt=ct[tt],!(Q===lt||!lt.enable||lt.checkCollision.none||!$.contains(lt.gameObject))&&this.separate(Q,lt,H,Y,Z)&&(z&&z.call(Y,Q.gameObject,lt.gameObject),this._total++)}else{var ht=$.getChildren(),gt=$.children.entries.indexOf(D);for(et=ht.length,tt=0;tt<et;tt++)lt=ht[tt].body,!(!lt||tt===gt||!lt.enable)&&this.separate(Q,lt,H,Y,Z)&&(z&&z.call(Y,Q.gameObject,lt.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(D,$,z,H,Y,Z){var Q=D.getChildren();if(Q.length===0)return!1;for(var tt=!1,et=0;et<Q.length;et++)(Q[et].body||Q[et].isBody)&&this.collideSpriteVsTilemapLayer(Q[et],$,z,H,Y,Z)&&(tt=!0);return tt},collideTiles:function(D,$,z,H,Y){return $.length===0||D.body&&!D.body.enable||D.isBody&&!D.enable?!1:this.collideSpriteVsTilesHandler(D,$,z,H,Y,!1,!1)},overlapTiles:function(D,$,z,H,Y){return $.length===0||D.body&&!D.body.enable||D.isBody&&!D.enable?!1:this.collideSpriteVsTilesHandler(D,$,z,H,Y,!0,!1)},collideSpriteVsTilemapLayer:function(D,$,z,H,Y,Z){var Q=D.isBody?D:D.body;if(!Q.enable||Q.checkCollision.none)return!1;var tt=Q.x,et=Q.y,lt=Q.width,ut=Q.height,ct=$.layer;if(ct.tileWidth>ct.baseTileWidth){var ht=(ct.tileWidth-ct.baseTileWidth)*$.scaleX;tt-=ht,lt+=ht}if(ct.tileHeight>ct.baseTileHeight){var gt=(ct.tileHeight-ct.baseTileHeight)*$.scaleY;ut+=gt}var yt=Z?null:this.tileFilterOptions,Et=A(tt,et,lt,ut,yt,$.scene.cameras.main,$.layer);return Et.length===0?!1:this.collideSpriteVsTilesHandler(D,Et,z,H,Y,Z,!0)},collideSpriteVsTilesHandler:function(D,$,z,H,Y,Z,Q){for(var tt=D.isBody?D:D.body,et,lt={left:0,right:0,top:0,bottom:0},ut,ct=!1,ht=0;ht<$.length;ht++){et=$[ht],ut=et.tilemapLayer;var gt=ut.tileToWorldXY(et.x,et.y);lt.left=gt.x,lt.top=gt.y,et.baseHeight!==et.height&&(lt.top-=(et.height-et.baseHeight)*ut.scaleY),lt.right=lt.left+et.width*ut.scaleX,lt.bottom=lt.top+et.height*ut.scaleY,V(lt,tt)&&(!H||H.call(Y,D,et))&&R(et,D)&&(Z||P(ht,tt,et,lt,ut,this.TILE_BIAS,Q))&&(this._total++,ct=!0,z&&z.call(Y,D,et),Z&&tt.onOverlap?this.emit(p.TILE_OVERLAP,D,et,tt):tt.onCollide&&this.emit(p.TILE_COLLIDE,D,et,tt))}return ct},collideGroupVsGroup:function(D,$,z,H,Y,Z){if(!(D.length===0||$.length===0))for(var Q=D.getChildren(),tt=0;tt<Q.length;tt++)this.collideSpriteVsGroup(Q[tt],$,z,H,Y,Z)},wrap:function(D,$){D.body?this.wrapObject(D,$):D.getChildren?this.wrapArray(D.getChildren(),$):Array.isArray(D)?this.wrapArray(D,$):this.wrapObject(D,$)},wrapArray:function(D,$){for(var z=0;z<D.length;z++)this.wrapObject(D[z],$)},wrapObject:function(D,$){$===void 0&&($=0),D.x=B(D.x,this.bounds.left-$,this.bounds.right+$),D.y=B(D.y,this.bounds.top-$,this.bounds.bottom+$)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});i.exports=G},5321:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setAcceleration:function(e,a){return this.body.acceleration.set(e,a),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};i.exports=g},29257:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};i.exports=g},62122:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setBounce:function(e,a){return this.body.bounce.set(e,a),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,a,v,u){return this.body.setCollideWorldBounds(e,a,v,u),this}};i.exports=g},99803:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setDebug:function(e,a,v){return this.debugShowBody=e,this.debugShowVelocity=a,this.debugBodyColor=v,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};i.exports=g},87145:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setDrag:function(e,a){return this.body.drag.set(e,a),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};i.exports=g},96174:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={enableBody:function(e,a,v,u,o){return e&&this.body.reset(a,v),u&&(this.body.gameObject.active=!0),o&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,a){return e===void 0&&(e=!1),a===void 0&&(a=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),a&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};i.exports=g},51702:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setFriction:function(e,a){return this.body.friction.set(e,a),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};i.exports=g},25578:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setGravity:function(e,a){return this.body.gravity.set(e,a),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};i.exports=g},72029:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};i.exports=g},34566:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setMass:function(e){return this.body.mass=e,this}};i.exports=g},2732:(i,g,e)=>{var a=e(15147),v=e(26673),u=e(22184),o=e(26535),c=function(l,f,m,h,p,y){var x=a(l,f-h,m-h,2*h,2*h,p,y);if(x.length===0)return x;for(var T=new v(f,m,h),C=new v,E=[],A=0;A<x.length;A++){var w=x[A];w.isCircle?(C.setTo(w.center.x,w.center.y,w.halfWidth),u(T,C)&&E.push(w)):o(T,w)&&E.push(w)}return E};i.exports=c},15147:i=>{var g=function(e,a,v,u,o,c,l){c===void 0&&(c=!0),l===void 0&&(l=!1);var f=[],m=[],h=e.treeMinMax;if(h.minX=a,h.minY=v,h.maxX=a+u,h.maxY=v+o,l&&(m=e.staticTree.search(h)),c&&e.useTree)f=e.tree.search(h);else if(c){var p=e.bodies,y={position:{x:a,y:v},left:a,top:v,right:a+u,bottom:v+o,isCircle:!1},x=e.intersects;p.iterate(function(T){x(T,y)&&f.push(T)})}return m.concat(f)};i.exports=g},57527:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};i.exports=g},77687:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setOffset:function(e,a){return this.body.setOffset(e,a),this},setSize:function(e,a,v){return this.body.setSize(e,a,v),this},setBodySize:function(e,a,v){return this.body.setSize(e,a,v),this},setCircle:function(e,a,v){return this.body.setCircle(e,a,v),this}};i.exports=g},66536:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setVelocity:function(e,a){return this.body.setVelocity(e,a),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,a){return this.body.maxVelocity.set(e,a),this}};i.exports=g},7864:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Acceleration:e(5321),Angular:e(29257),Bounce:e(62122),Debug:e(99803),Drag:e(87145),Enable:e(96174),Friction:e(51702),Gravity:e(25578),Immovable:e(72029),Mass:e(34566),OverlapCirc:e(2732),OverlapRect:e(15147),Pushable:e(57527),Size:e(77687),Velocity:e(66536)}},47401:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};i.exports=g},22346:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="collide"},95092:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="overlap"},15775:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},74142:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},22825:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="tilecollide"},10851:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="tileoverlap"},7543:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="worldbounds"},1487:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="worldstep"},27037:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={COLLIDE:e(22346),OVERLAP:e(95092),PAUSE:e(15775),RESUME:e(74142),TILE_COLLIDE:e(22825),TILE_OVERLAP:e(10851),WORLD_BOUNDS:e(7543),WORLD_STEP:e(1487)}},39977:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47401),v=e(98611),u={ArcadePhysics:e(66150),Body:e(97602),Collider:e(3909),Components:e(7864),Events:e(27037),Factory:e(99523),GetOverlapX:e(75671),GetOverlapY:e(66185),SeparateX:e(61777),SeparateY:e(25299),Group:e(10481),Image:e(62832),Sprite:e(25084),StaticBody:e(66634),StaticGroup:e(46346),Tilemap:e(8413),World:e(85233)};u=v(!1,u,a),i.exports=u},25163:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,a,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,a,e):!0};i.exports=g},98209:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a<0?(e.blocked.none=!1,e.blocked.left=!0):a>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=a,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};i.exports=g},72792:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a<0?(e.blocked.none=!1,e.blocked.up=!0):a>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=a,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};i.exports=g},27354:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14405),v=e(52926),u=e(28808),o=function(c,l,f,m,h,p,y){var x=m.left,T=m.top,C=m.right,E=m.bottom,A=f.faceLeft||f.faceRight,w=f.faceTop||f.faceBottom;if(y||(A=!0,w=!0),!A&&!w)return!1;var b=0,I=0,R=0,N=1;if(l.deltaAbsX()>l.deltaAbsY()?R=-1:l.deltaAbsX()<l.deltaAbsY()&&(N=-1),l.deltaX()!==0&&l.deltaY()!==0&&A&&w&&(R=Math.min(Math.abs(l.position.x-C),Math.abs(l.right-x)),N=Math.min(Math.abs(l.position.y-E),Math.abs(l.bottom-T))),R<N){if(A&&(b=a(l,f,x,C,p,y),b!==0&&!u(m,l)))return!0;w&&(I=v(l,f,T,E,p,y))}else{if(w&&(I=v(l,f,T,E,p,y),I!==0&&!u(m,l)))return!0;A&&(b=a(l,f,x,C,p,y))}return b!==0||I!==0};i.exports=o},14405:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(98209),v=function(u,o,c,l,f,m){var h=0,p=o.faceLeft,y=o.faceRight,x=o.collideLeft,T=o.collideRight;return m||(p=!0,y=!0,x=!0,T=!0),u.deltaX()<0&&T&&u.checkCollision.left?y&&u.x<l&&(h=u.x-l,h<-f&&(h=0)):u.deltaX()>0&&x&&u.checkCollision.right&&p&&u.right>c&&(h=u.right-c,h>f&&(h=0)),h!==0&&(u.customSeparateX?u.overlapX=h:a(u,h)),h};i.exports=v},52926:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72792),v=function(u,o,c,l,f,m){var h=0,p=o.faceTop,y=o.faceBottom,x=o.collideUp,T=o.collideDown;return m||(p=!0,y=!0,x=!0,T=!0),u.deltaY()<0&&T&&u.checkCollision.up?y&&u.y<l&&(h=u.y-l,h<-f&&(h=0)):u.deltaY()>0&&x&&u.checkCollision.down&&p&&u.bottom>c&&(h=u.bottom-c,h>f&&(h=0)),h!==0&&(u.customSeparateY?u.overlapY=h:a(u,h)),h};i.exports=v},28808:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return!(a.right<=e.left||a.bottom<=e.top||a.position.x>=e.right||a.position.y>=e.bottom)};i.exports=g},8413:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ProcessTileCallbacks:e(25163),ProcessTileSeparationX:e(98209),ProcessTileSeparationY:e(72792),SeparateTile:e(27354),TileCheckX:e(14405),TileCheckY:e(52926),TileIntersectsBody:e(28808)};i.exports=a},53954:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Arcade:e(39977),Matter:e(45949)}},63568:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(93736),u=new a({initialize:function(){this.boundsCenter=new v,this.centerDiff=new v},parseBody:function(o){if(o=o.hasOwnProperty("body")?o.body:o,!o.hasOwnProperty("bounds")||!o.hasOwnProperty("centerOfMass"))return!1;var c=this.boundsCenter,l=this.centerDiff,f=o.bounds.max.x-o.bounds.min.x,m=o.bounds.max.y-o.bounds.min.y,h=f*o.centerOfMass.x,p=m*o.centerOfMass.y;return c.set(f/2,m/2),l.set(h-c.x,p-c.y),!0},getTopLeft:function(o,c,l){if(c===void 0&&(c=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,m=this.centerDiff;return new v(c+f.x+m.x,l+f.y+m.y)}return!1},getTopCenter:function(o,c,l){if(c===void 0&&(c=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,m=this.centerDiff;return new v(c+m.x,l+f.y+m.y)}return!1},getTopRight:function(o,c,l){if(c===void 0&&(c=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,m=this.centerDiff;return new v(c-(f.x-m.x),l+f.y+m.y)}return!1},getLeftCenter:function(o,c,l){if(c===void 0&&(c=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,m=this.centerDiff;return new v(c+f.x+m.x,l+m.y)}return!1},getCenter:function(o,c,l){if(c===void 0&&(c=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.centerDiff;return new v(c+f.x,l+f.y)}return!1},getRightCenter:function(o,c,l){if(c===void 0&&(c=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,m=this.centerDiff;return new v(c-(f.x-m.x),l+m.y)}return!1},getBottomLeft:function(o,c,l){if(c===void 0&&(c=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,m=this.centerDiff;return new v(c+f.x+m.x,l-(f.y-m.y))}return!1},getBottomCenter:function(o,c,l){if(c===void 0&&(c=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,m=this.centerDiff;return new v(c+m.x,l-(f.y-m.y))}return!1},getBottomRight:function(o,c,l){if(c===void 0&&(c=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,m=this.centerDiff;return new v(c-(f.x-m.x),l-(f.y-m.y))}return!1}});i.exports=u},18171:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16929);a.Body=e(84125),a.Composite=e(11299),a.World=e(72005),a.Collision=e(63454),a.Detector=e(13657),a.Pairs=e(91327),a.Pair=e(70584),a.Query=e(13390),a.Resolver=e(44272),a.Constraint=e(52838),a.Common=e(68758),a.Engine=e(45775),a.Events=e(39073),a.Sleeping=e(22806),a.Plugin=e(84474),a.Bodies=e(68516),a.Composites=e(56643),a.Axes=e(50658),a.Bounds=e(84091),a.Svg=e(92765),a.Vector=e(10438),a.Vertices=e(39745),a.World.add=a.Composite.add,a.World.remove=a.Composite.remove,a.World.addComposite=a.Composite.addComposite,a.World.addBody=a.Composite.addBody,a.World.addConstraint=a.Composite.addConstraint,a.World.clear=a.Composite.clear,i.exports=a},72653:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(68516),v=e(56694),u=e(56643),o=e(52838),c=e(92765),l=e(3860),f=e(7030),m=e(73658),h=e(84720),p=e(10998),y=e(72829),x=e(88596),T=e(39745),C=new v({initialize:function(A){this.world=A,this.scene=A.scene,this.sys=A.scene.sys},rectangle:function(E,A,w,b,I){var R=a.rectangle(E,A,w,b,I);return this.world.add(R),R},trapezoid:function(E,A,w,b,I,R){var N=a.trapezoid(E,A,w,b,I,R);return this.world.add(N),N},circle:function(E,A,w,b,I){var R=a.circle(E,A,w,b,I);return this.world.add(R),R},polygon:function(E,A,w,b,I){var R=a.polygon(E,A,w,b,I);return this.world.add(R),R},fromVertices:function(E,A,w,b,I,R,N){typeof w=="string"&&(w=T.fromPath(w));var F=a.fromVertices(E,A,w,b,I,R,N);return this.world.add(F),F},fromPhysicsEditor:function(E,A,w,b,I){I===void 0&&(I=!0);var R=p.parseBody(E,A,w,b);return I&&!this.world.has(R)&&this.world.add(R),R},fromSVG:function(E,A,w,b,I,R){b===void 0&&(b=1),I===void 0&&(I={}),R===void 0&&(R=!0);for(var N=w.getElementsByTagName("path"),F=[],P=0;P<N.length;P++){var O=c.pathToVertices(N[P],30);b!==1&&T.scale(O,b,b),F.push(O)}var M=a.fromVertices(E,A,F,I);return R&&this.world.add(M),M},fromJSON:function(E,A,w,b,I){b===void 0&&(b={}),I===void 0&&(I=!0);var R=y.parseBody(E,A,w,b);return R&&I&&this.world.add(R),R},imageStack:function(E,A,w,b,I,R,N,F,P){N===void 0&&(N=0),F===void 0&&(F=0),P===void 0&&(P={});var O=this.world,M=this.sys.displayList;P.addToWorld=!1;var L=u.stack(w,b,I,R,N,F,function(k,V){var W=new f(O,k,V,E,A,P);return M.add(W),W.body});return O.add(L),L},stack:function(E,A,w,b,I,R,N){var F=u.stack(E,A,w,b,I,R,N);return this.world.add(F),F},pyramid:function(E,A,w,b,I,R,N){var F=u.pyramid(E,A,w,b,I,R,N);return this.world.add(F),F},chain:function(E,A,w,b,I,R){return u.chain(E,A,w,b,I,R)},mesh:function(E,A,w,b,I){return u.mesh(E,A,w,b,I)},newtonsCradle:function(E,A,w,b,I){var R=u.newtonsCradle(E,A,w,b,I);return this.world.add(R),R},car:function(E,A,w,b,I){var R=u.car(E,A,w,b,I);return this.world.add(R),R},softBody:function(E,A,w,b,I,R,N,F,P,O){var M=u.softBody(E,A,w,b,I,R,N,F,P,O);return this.world.add(M),M},joint:function(E,A,w,b,I){return this.constraint(E,A,w,b,I)},spring:function(E,A,w,b,I){return this.constraint(E,A,w,b,I)},constraint:function(E,A,w,b,I){b===void 0&&(b=1),I===void 0&&(I={}),I.bodyA=E.type==="body"?E:E.body,I.bodyB=A.type==="body"?A:A.body,isNaN(w)||(I.length=w),I.stiffness=b;var R=o.create(I);return this.world.add(R),R},worldConstraint:function(E,A,w,b){w===void 0&&(w=1),b===void 0&&(b={}),b.bodyB=E.type==="body"?E:E.body,isNaN(A)||(b.length=A),b.stiffness=w;var I=o.create(b);return this.world.add(I),I},mouseSpring:function(E){return this.pointerConstraint(E)},pointerConstraint:function(E){E===void 0&&(E={}),E.hasOwnProperty("render")||(E.render={visible:!1});var A=new x(this.scene,this.world,E);return this.world.add(A.constraint),A},image:function(E,A,w,b,I){var R=new f(this.world,E,A,w,b,I);return this.sys.displayList.add(R),R},tileBody:function(E,A){return new h(this.world,E,A)},sprite:function(E,A,w,b,I){var R=new m(this.world,E,A,w,b,I);return this.sys.displayList.add(R),this.sys.updateList.add(R),R},gameObject:function(E,A,w){return l(this.world,E,A,w)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});i.exports=C},3860:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74527),v=e(72632),u=e(93736);function o(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}var c=function(l,f,m,h){m===void 0&&(m={}),h===void 0&&(h=!0);var p=f.x,y=f.y;f.body={temp:!0,position:{x:p,y}};var x=[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity];if(x.forEach(function(C){for(var E in C)o(C[E])?Object.defineProperty(f,E,{get:C[E].get,set:C[E].set}):Object.defineProperty(f,E,{value:C[E]})}),f.world=l,f._tempVec2=new u(p,y),m.hasOwnProperty("type")&&m.type==="body")f.setExistingBody(m,h);else{var T=v(m,"shape",null);T||(T="rectangle"),m.addToWorld=h,f.setBody(T,m)}return f};i.exports=c},7030:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(74527),u=e(89980),o=e(72632),c=e(1539),l=e(58210),f=e(93736),m=new a({Extends:c,Mixins:[v.Bounce,v.Collision,v.Force,v.Friction,v.Gravity,v.Mass,v.Sensor,v.SetBody,v.Sleep,v.Static,v.Transform,v.Velocity,l],initialize:function(p,y,x,T,C,E){u.call(this,p.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(T,C),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new f(y,x);var A=o(E,"shape",null);A?this.setBody(A,E):this.setRectangle(this.width,this.height,E),this.setPosition(y,x),this.initPipeline(),this.initPostPipeline(!0)}});i.exports=m},50583:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84093),v=e(50658),u=e(68516),o=e(84125),c=e(63568),l=e(84091),f=e(56694),m=e(63454),h=e(68758),p=e(11299),y=e(56643),x=e(52838),T=e(13657),C=e(53996),E=e(72653),A=e(72632),w=e(10850),b=e(1675),I=e(80391),R=e(16929),N=e(44097),F=e(30657),P=e(70584),O=e(91327),M=e(84474),L=e(91963),k=e(13390),V=e(44272),W=e(7599),K=e(92765),B=e(10438),G=e(39745),D=e(31468);h.setDecomp(e(81084));var $=new f({initialize:function(H){this.scene=H,this.systems=H.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=p,this.collision=m,this.detector=T,this.pair=P,this.pairs=O,this.query=k,this.resolver=V,this.constraint=x,this.bodies=u,this.composites=y,this.axes=v,this.bounds=l,this.svg=K,this.vector=B,this.vertices=G,this.verts=G,this._tempVec2=B.create(),w(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),w(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),w(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),V._restingThresh=w(this.config,"restingThresh",4),V._restingThreshTangent=w(this.config,"restingThreshTangent",6),V._positionDampen=w(this.config,"positionDampen",.9),V._positionWarming=w(this.config,"positionWarming",.8),V._frictionNormalMultiplier=w(this.config,"frictionNormalMultiplier",5),H.sys.events.once(W.BOOT,this.boot,this),H.sys.events.on(W.START,this.start,this)},boot:function(){this.world=new D(this.scene,this.config),this.add=new E(this.world),this.bodyBounds=new c,this.systems.events.once(W.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new D(this.scene,this.config),this.add=new E(this.world));var z=this.systems.events;z.on(W.UPDATE,this.world.update,this.world),z.on(W.POST_UPDATE,this.world.postUpdate,this.world),z.once(W.SHUTDOWN,this.shutdown,this)},getConfig:function(){var z=this.systems.game.config.physics,H=this.systems.settings.physics,Y=F(A(H,"matter",{}),A(z,"matter",{}));return Y},enableAttractorPlugin:function(){return M.register(b),M.use(R,b),this},enableWrapPlugin:function(){return M.register(N),M.use(R,N),this},enableCollisionEventsPlugin:function(){return M.register(I),M.use(R,I),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(z,H){this.world.step(z,H)},containsPoint:function(z,H,Y){z=this.getMatterBodies(z);var Z=B.create(H,Y),Q=k.point(z,Z);return Q.length>0},intersectPoint:function(z,H,Y){Y=this.getMatterBodies(Y);var Z=B.create(z,H),Q=[],tt=k.point(Y,Z);return tt.forEach(function(et){Q.indexOf(et)===-1&&Q.push(et)}),Q},intersectRect:function(z,H,Y,Z,Q,tt){Q===void 0&&(Q=!1),tt=this.getMatterBodies(tt);var et={min:{x:z,y:H},max:{x:z+Y,y:H+Z}},lt=[],ut=k.region(tt,et,Q);return ut.forEach(function(ct){lt.indexOf(ct)===-1&&lt.push(ct)}),lt},intersectRay:function(z,H,Y,Z,Q,tt){Q===void 0&&(Q=1),tt=this.getMatterBodies(tt);for(var et=[],lt=k.ray(tt,B.create(z,H),B.create(Y,Z),Q),ut=0;ut<lt.length;ut++)et.push(lt[ut].body);return et},intersectBody:function(z,H){H=this.getMatterBodies(H);for(var Y=[],Z=k.collides(z,H),Q=0;Q<Z.length;Q++){var tt=Z[Q];tt.bodyA===z?Y.push(tt.bodyB):Y.push(tt.bodyA)}return Y},overlap:function(z,H,Y,Z,Q){Y===void 0&&(Y=null),Z===void 0&&(Z=null),Q===void 0&&(Q=Y),Array.isArray(z)||(z=[z]),z=this.getMatterBodies(z),H=this.getMatterBodies(H);for(var tt=!1,et=0;et<z.length;et++)for(var lt=z[et],ut=k.collides(lt,H),ct=0;ct<ut.length;ct++){var ht=ut[ct],gt=ht.bodyA.id===lt.id?ht.bodyB:ht.bodyA;if(!Z||Z.call(Q,lt,gt,ht)){if(tt=!0,Y)Y.call(Q,lt,gt,ht);else if(!Z)return!0}}return tt},setCollisionCategory:function(z,H){return z=this.getMatterBodies(z),z.forEach(function(Y){Y.collisionFilter.category=H}),this},setCollisionGroup:function(z,H){return z=this.getMatterBodies(z),z.forEach(function(Y){Y.collisionFilter.group=H}),this},setCollidesWith:function(z,H){z=this.getMatterBodies(z);var Y=0;if(!Array.isArray(H))Y=H;else for(var Z=0;Z<H.length;Z++)Y|=H[Z];return z.forEach(function(Q){Q.collisionFilter.mask=Y}),this},getMatterBodies:function(z){if(!z)return this.world.getAllBodies();Array.isArray(z)||(z=[z]);for(var H=[],Y=0;Y<z.length;Y++){var Z=z[Y].hasOwnProperty("body")?z[Y].body:z[Y];H.push(Z)}return H},setVelocity:function(z,H,Y){z=this.getMatterBodies(z);var Z=this._tempVec2;return Z.x=H,Z.y=Y,z.forEach(function(Q){o.setVelocity(Q,Z)}),this},setVelocityX:function(z,H){z=this.getMatterBodies(z);var Y=this._tempVec2;return Y.x=H,z.forEach(function(Z){Y.y=Z.velocity.y,o.setVelocity(Z,Y)}),this},setVelocityY:function(z,H){z=this.getMatterBodies(z);var Y=this._tempVec2;return Y.y=H,z.forEach(function(Z){Y.x=Z.velocity.x,o.setVelocity(Z,Y)}),this},setAngularVelocity:function(z,H){return z=this.getMatterBodies(z),z.forEach(function(Y){o.setAngularVelocity(Y,H)}),this},applyForce:function(z,H){z=this.getMatterBodies(z);var Y=this._tempVec2;return z.forEach(function(Z){Y.x=Z.position.x,Y.y=Z.position.y,o.applyForce(Z,Y,H)}),this},applyForceFromPosition:function(z,H,Y,Z){z=this.getMatterBodies(z);var Q=this._tempVec2;return z.forEach(function(tt){Z===void 0&&(Z=tt.angle),Q.x=Y*Math.cos(Z),Q.y=Y*Math.sin(Z),o.applyForce(tt,H,Q)}),this},applyForceFromAngle:function(z,H,Y){z=this.getMatterBodies(z);var Z=this._tempVec2;return z.forEach(function(Q){Y===void 0&&(Y=Q.angle),Z.x=H*Math.cos(Y),Z.y=H*Math.sin(Y),o.applyForce(Q,{x:Q.position.x,y:Q.position.y},Z)}),this},getConstraintLength:function(z){var H=z.pointA.x,Y=z.pointA.y,Z=z.pointB.x,Q=z.pointB.y;return z.bodyA&&(H+=z.bodyA.position.x,Y+=z.bodyA.position.y),z.bodyB&&(Z+=z.bodyB.position.x,Q+=z.bodyB.position.y),C(H,Y,Z,Q)},alignBody:function(z,H,Y,Z){z=z.hasOwnProperty("body")?z.body:z;var Q;switch(Z){case a.TOP_LEFT:case a.LEFT_TOP:Q=this.bodyBounds.getTopLeft(z,H,Y);break;case a.TOP_CENTER:Q=this.bodyBounds.getTopCenter(z,H,Y);break;case a.TOP_RIGHT:case a.RIGHT_TOP:Q=this.bodyBounds.getTopRight(z,H,Y);break;case a.LEFT_CENTER:Q=this.bodyBounds.getLeftCenter(z,H,Y);break;case a.CENTER:Q=this.bodyBounds.getCenter(z,H,Y);break;case a.RIGHT_CENTER:Q=this.bodyBounds.getRightCenter(z,H,Y);break;case a.LEFT_BOTTOM:case a.BOTTOM_LEFT:Q=this.bodyBounds.getBottomLeft(z,H,Y);break;case a.BOTTOM_CENTER:Q=this.bodyBounds.getBottomCenter(z,H,Y);break;case a.BOTTOM_RIGHT:case a.RIGHT_BOTTOM:Q=this.bodyBounds.getBottomRight(z,H,Y);break}return Q&&o.setPosition(z,Q),this},shutdown:function(){var z=this.systems.events;this.world&&(z.off(W.UPDATE,this.world.update,this.world),z.off(W.POST_UPDATE,this.world.postUpdate,this.world)),z.off(W.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(W.START,this.start,this),this.scene=null,this.systems=null}});L.register("MatterPhysics",$,"matterPhysics"),i.exports=$},73658:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(16569),v=e(56694),u=e(74527),o=e(89980),c=e(72632),l=e(58210),f=e(13747),m=e(93736),h=new v({Extends:f,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,l],initialize:function(y,x,T,C,E,A){o.call(this,y.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(C,E),this.setSizeToFrame(),this.setOrigin(),this.world=y,this._tempVec2=new m(x,T);var w=c(A,"shape",null);w?this.setBody(w,A):this.setRectangle(this.width,this.height,A),this.setPosition(x,T),this.initPipeline(),this.initPostPipeline(!0)}});i.exports=h},84720:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(68516),v=e(84125),u=e(56694),o=e(74527),c=e(28699),l=e(6659),f=e(72632),m=e(19256),h=e(39745),p=new u({Extends:l,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(x,T,C){l.call(this),this.tile=T,this.world=x,T.physics.matterBody&&T.physics.matterBody.destroy(),T.physics.matterBody=this;var E=f(C,"body",null),A=f(C,"addToWorld",!0);if(E)this.setBody(E,A);else{var w=T.getCollisionGroup(),b=f(w,"objects",[]);b.length>0?this.setFromTileCollision(C):this.setFromTileRectangle(C)}if(T.flipX||T.flipY){var I={x:T.getCenterX(),y:T.getCenterY()},R=T.flipX?-1:1,N=T.flipY?-1:1;v.scale(E,R,N,I)}},setFromTileRectangle:function(y){y===void 0&&(y={}),m(y,"isStatic")||(y.isStatic=!0),m(y,"addToWorld")||(y.addToWorld=!0);var x=this.tile.getBounds(),T=x.x+x.width/2,C=x.y+x.height/2,E=a.rectangle(T,C,x.width,x.height,y);return this.setBody(E,y.addToWorld),this},setFromTileCollision:function(y){y===void 0&&(y={}),m(y,"isStatic")||(y.isStatic=!0),m(y,"addToWorld")||(y.addToWorld=!0);for(var x=this.tile.tilemapLayer.scaleX,T=this.tile.tilemapLayer.scaleY,C=this.tile.getLeft(),E=this.tile.getTop(),A=this.tile.getCollisionGroup(),w=f(A,"objects",[]),b=[],I=0;I<w.length;I++){var R=w[I],N=C+R.x*x,F=E+R.y*T,P=R.width*x,O=R.height*T,M=null;if(R.rectangle)M=a.rectangle(N+P/2,F+O/2,P,O,y);else if(R.ellipse)M=a.circle(N+P/2,F+O/2,P/2,y);else if(R.polygon||R.polyline){var L=R.polygon?R.polygon:R.polyline,k=L.map(function(B){return{x:B.x*x,y:B.y*T}}),V=h.create(k),W=h.centre(V);N+=W.x,F+=W.y,M=a.fromVertices(N,F,V,y)}M&&b.push(M)}if(b.length===1)this.setBody(b[0],y.addToWorld);else if(b.length>1){var K=c(y);K.parts=b,this.setBody(v.create(K),K.addToWorld)}return this},setBody:function(y,x){return x===void 0&&(x=!0),this.body&&this.removeBody(),this.body=y,this.body.gameObject=this,x&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});i.exports=p},10998:(i,g,e)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(68516),v=e(84125),u=e(68758),o=e(72632),c=e(39745),l={parseBody:function(f,m,h,p){p===void 0&&(p={});for(var y=o(h,"fixtures",[]),x=[],T=0;T<y.length;T++)for(var C=this.parseFixture(y[T]),E=0;E<C.length;E++)x.push(C[E]);var A=u.clone(h,!0);u.extend(A,p,!0),delete A.fixtures,delete A.type;var w=v.create(A);return v.setParts(w,x),v.setPosition(w,{x:f,y:m}),w},parseFixture:function(f){var m=u.extend({},!1,f);delete m.circle,delete m.vertices;var h;if(f.circle){var p=o(f.circle,"x"),y=o(f.circle,"y"),x=o(f.circle,"radius");h=[a.circle(p,y,x,m)]}else f.vertices&&(h=this.parseVertices(f.vertices,m));return h},parseVertices:function(f,m){m===void 0&&(m={});for(var h=[],p=0;p<f.length;p++)c.clockwiseSort(f[p]),h.push(v.create(u.extend({position:c.centre(f[p]),vertices:f[p]},m)));return a.flagCoincidentParts(h)}};i.exports=l},72829:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(68516),v=e(84125),u={parseBody:function(o,c,l,f){f===void 0&&(f={});var m,h=l.vertices;if(h.length===1)f.vertices=h[0],m=v.create(f),a.flagCoincidentParts(m.parts);else{for(var p=[],y=0;y<h.length;y++){var x=v.create({vertices:h[y]});p.push(x)}a.flagCoincidentParts(p),f.parts=p,m=v.create(f)}return m.label=l.label,v.setPosition(m,{x:o,y:c}),m}};i.exports=u},88596:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84091),v=e(56694),u=e(11299),o=e(52838),c=e(13657),l=e(35416),f=e(33963),m=e(30657),h=e(22806),p=e(93736),y=e(39745),x=new v({initialize:function(C,E,A){A===void 0&&(A={});var w={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=C,this.world=E,this.camera=null,this.pointer=null,this.active=!0,this.position=new p,this.body=null,this.part=null,this.constraint=o.create(m(A,w)),this.world.on(l.BEFORE_UPDATE,this.update,this),C.sys.input.on(f.POINTER_DOWN,this.onDown,this),C.sys.input.on(f.POINTER_UP,this.onUp,this)},onDown:function(T){this.pointer||(this.pointer=T,this.camera=T.camera)},onUp:function(T){T===this.pointer&&(this.pointer=null)},getBody:function(T){var C=this.position,E=this.constraint;this.camera.getWorldPoint(T.x,T.y,C);for(var A=u.allBodies(this.world.localWorld),w=0;w<A.length;w++){var b=A[w];if(!b.ignorePointer&&a.contains(b.bounds,C)&&c.canCollide(b.collisionFilter,E.collisionFilter)&&this.hitTestBody(b,C))return this.world.emit(l.DRAG_START,b,this.part,this),!0}return!1},hitTestBody:function(T,C){for(var E=this.constraint,A=T.parts.length,w=A>1?1:0,b=w;b<A;b++){var I=T.parts[b];if(y.contains(I.vertices,C))return E.pointA=C,E.pointB={x:C.x-T.position.x,y:C.y-T.position.y},E.bodyB=T,E.angleB=T.angle,h.set(T,!1),this.part=I,this.body=T,!0}return!1},update:function(){var T=this.pointer,C=this.body;if(!this.active||!T){C&&this.stopDrag();return}if(!T.isDown&&C){this.stopDrag();return}else if(T.isDown){if(!C&&!this.getBody(T))return;C=this.body;var E=this.position,A=this.constraint;this.camera.getWorldPoint(T.x,T.y,E),A.pointA.x=E.x,A.pointA.y=E.y,h.set(C,!1),this.world.emit(l.DRAG,C,this)}},stopDrag:function(){var T=this.body,C=this.constraint;C.bodyB=null,C.pointB=null,this.pointer=null,this.body=null,this.part=null,T&&this.world.emit(l.DRAG_END,T,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(l.BEFORE_UPDATE,this.update),this.scene.sys.input.off(f.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(f.POINTER_UP,this.onUp,this)}});i.exports=x},31468:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(68516),v=e(84125),u=e(56694),o=e(68758),c=e(11299),l=e(45775),f=e(6659),m=e(35416),h=e(72632),p=e(10850),y=e(84125),x=e(39073),T=e(84720),C=e(72005),E=e(10438),A=new u({Extends:f,initialize:function(b,I){f.call(this),this.scene=b,this.engine=l.create(I),this.localWorld=this.engine.world;var R=p(I,"gravity",null);R?this.setGravity(R.x,R.y,R.scale):R===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=p(I,"enabled",!0),this.getDelta=p(I,"getDelta",this.update60Hz);var N=h(I,"runner",{}),F=h(N,"fps",!1),P=h(N,"fps",60),O=h(N,"delta",1e3/P),M=h(N,"deltaMin",1e3/P),L=h(N,"deltaMax",1e3/(P*.5));F||(P=1e3/O),this.runner={fps:P,deltaSampleSize:h(N,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:h(N,"isFixed",!1),delta:O,deltaMin:M,deltaMax:L},this.autoUpdate=p(I,"autoUpdate",!0);var k=p(I,"debug",!1);if(this.drawDebug=typeof k=="object"?!0:k,this.debugGraphic,this.debugConfig={showAxes:h(k,"showAxes",!1),showAngleIndicator:h(k,"showAngleIndicator",!1),angleColor:h(k,"angleColor",15208787),showBroadphase:h(k,"showBroadphase",!1),broadphaseColor:h(k,"broadphaseColor",16757760),showBounds:h(k,"showBounds",!1),boundsColor:h(k,"boundsColor",16777215),showVelocity:h(k,"showVelocity",!1),velocityColor:h(k,"velocityColor",44783),showCollisions:h(k,"showCollisions",!1),collisionColor:h(k,"collisionColor",16094476),showSeparations:h(k,"showSeparations",!1),separationColor:h(k,"separationColor",16753920),showBody:h(k,"showBody",!0),showStaticBody:h(k,"showStaticBody",!0),showInternalEdges:h(k,"showInternalEdges",!1),renderFill:h(k,"renderFill",!1),renderLine:h(k,"renderLine",!0),fillColor:h(k,"fillColor",1075465),fillOpacity:h(k,"fillOpacity",1),lineColor:h(k,"lineColor",2678297),lineOpacity:h(k,"lineOpacity",1),lineThickness:h(k,"lineThickness",1),staticFillColor:h(k,"staticFillColor",857979),staticLineColor:h(k,"staticLineColor",1255396),showSleeping:h(k,"showSleeping",!1),staticBodySleepOpacity:h(k,"staticBodySleepOpacity",.7),sleepFillColor:h(k,"sleepFillColor",4605510),sleepLineColor:h(k,"sleepLineColor",10066585),showSensors:h(k,"showSensors",!0),sensorFillColor:h(k,"sensorFillColor",857979),sensorLineColor:h(k,"sensorLineColor",1255396),showPositions:h(k,"showPositions",!0),positionSize:h(k,"positionSize",4),positionColor:h(k,"positionColor",14697178),showJoint:h(k,"showJoint",!0),jointColor:h(k,"jointColor",14737474),jointLineOpacity:h(k,"jointLineOpacity",1),jointLineThickness:h(k,"jointLineThickness",2),pinSize:h(k,"pinSize",4),pinColor:h(k,"pinColor",4382944),springColor:h(k,"springColor",14697184),anchorColor:h(k,"anchorColor",15724527),anchorSize:h(k,"anchorSize",4),showConvexHulls:h(k,"showConvexHulls",!1),hullColor:h(k,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),h(I,"setBounds",!1)){var V=I.setBounds;if(typeof V=="boolean")this.setBounds();else{var W=h(V,"x",0),K=h(V,"y",0),B=h(V,"width",b.sys.scale.width),G=h(V,"height",b.sys.scale.height),D=h(V,"thickness",64),$=h(V,"left",!0),z=h(V,"right",!0),H=h(V,"top",!0),Y=h(V,"bottom",!0);this.setBounds(W,K,B,G,D,$,z,H,Y)}}},setCompositeRenderStyle:function(w){var b=w.bodies,I=w.constraints,R=w.composites,N,F,P;for(N=0;N<b.length;N++)F=b[N],P=F.render,this.setBodyRenderStyle(F,P.lineColor,P.lineOpacity,P.lineThickness,P.fillColor,P.fillOpacity);for(N=0;N<I.length;N++)F=I[N],P=F.render,this.setConstraintRenderStyle(F,P.lineColor,P.lineOpacity,P.lineThickness,P.pinSize,P.anchorColor,P.anchorSize);for(N=0;N<R.length;N++)F=R[N],this.setCompositeRenderStyle(F);return this},setBodyRenderStyle:function(w,b,I,R,N,F){var P=w.render,O=this.debugConfig;return P?(b==null&&(b=w.isStatic?O.staticLineColor:O.lineColor),I==null&&(I=O.lineOpacity),R==null&&(R=O.lineThickness),N==null&&(N=w.isStatic?O.staticFillColor:O.fillColor),F==null&&(F=O.fillOpacity),b!==!1&&(P.lineColor=b),I!==!1&&(P.lineOpacity=I),R!==!1&&(P.lineThickness=R),N!==!1&&(P.fillColor=N),F!==!1&&(P.fillOpacity=F),this):this},setConstraintRenderStyle:function(w,b,I,R,N,F,P){var O=w.render,M=this.debugConfig;if(!O)return this;if(b==null){var L=O.type;L==="line"?b=M.jointColor:L==="pin"?b=M.pinColor:L==="spring"&&(b=M.springColor)}return I==null&&(I=M.jointLineOpacity),R==null&&(R=M.jointLineThickness),N==null&&(N=M.pinSize),F==null&&(F=M.anchorColor),P==null&&(P=M.anchorSize),b!==!1&&(O.lineColor=b),I!==!1&&(O.lineOpacity=I),R!==!1&&(O.lineThickness=R),N!==!1&&(O.pinSize=N),F!==!1&&(O.anchorColor=F),P!==!1&&(O.anchorSize=P),this},setEventsProxy:function(){var w=this,b=this.engine,I=this.localWorld;this.drawDebug&&(x.on(I,"compositeModified",function(R){w.setCompositeRenderStyle(R)}),x.on(I,"beforeAdd",function(R){for(var N=[].concat(R.object),F=0;F<N.length;F++){var P=N[F],O=P.render;P.type==="body"?w.setBodyRenderStyle(P,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity):P.type==="composite"?w.setCompositeRenderStyle(P):P.type==="constraint"&&w.setConstraintRenderStyle(P,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize)}})),x.on(I,"beforeAdd",function(R){w.emit(m.BEFORE_ADD,R)}),x.on(I,"afterAdd",function(R){w.emit(m.AFTER_ADD,R)}),x.on(I,"beforeRemove",function(R){w.emit(m.BEFORE_REMOVE,R)}),x.on(I,"afterRemove",function(R){w.emit(m.AFTER_REMOVE,R)}),x.on(b,"beforeUpdate",function(R){w.emit(m.BEFORE_UPDATE,R)}),x.on(b,"afterUpdate",function(R){w.emit(m.AFTER_UPDATE,R)}),x.on(b,"collisionStart",function(R){var N=R.pairs,F,P;N.length>0&&(F=N[0].bodyA,P=N[0].bodyB),w.emit(m.COLLISION_START,R,F,P)}),x.on(b,"collisionActive",function(R){var N=R.pairs,F,P;N.length>0&&(F=N[0].bodyA,P=N[0].bodyB),w.emit(m.COLLISION_ACTIVE,R,F,P)}),x.on(b,"collisionEnd",function(R){var N=R.pairs,F,P;N.length>0&&(F=N[0].bodyA,P=N[0].bodyB),w.emit(m.COLLISION_END,R,F,P)})},setBounds:function(w,b,I,R,N,F,P,O,M){return w===void 0&&(w=0),b===void 0&&(b=0),I===void 0&&(I=this.scene.sys.scale.width),R===void 0&&(R=this.scene.sys.scale.height),N===void 0&&(N=64),F===void 0&&(F=!0),P===void 0&&(P=!0),O===void 0&&(O=!0),M===void 0&&(M=!0),this.updateWall(F,"left",w-N,b-N,N,R+N*2),this.updateWall(P,"right",w+I,b-N,N,R+N*2),this.updateWall(O,"top",w,b-N,I,N),this.updateWall(M,"bottom",w,b+R,I,N),this},updateWall:function(w,b,I,R,N,F){var P=this.walls[b];w?(P&&C.remove(this.localWorld,P),I+=N/2,R+=F/2,this.walls[b]=this.create(I,R,N,F,{isStatic:!0,friction:0,frictionStatic:0})):(P&&C.remove(this.localWorld,P),this.walls[b]=null)},createDebugGraphic:function(){var w=this.scene.sys.add.graphics({x:0,y:0});return w.setDepth(Number.MAX_VALUE),this.debugGraphic=w,this.drawDebug=!0,w},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(w,b,I){return w===void 0&&(w=0),b===void 0&&(b=1),I===void 0&&(I=.001),this.localWorld.gravity.x=w,this.localWorld.gravity.y=b,this.localWorld.gravity.scale=I,this},create:function(w,b,I,R,N){var F=a.rectangle(w,b,I,R,N);return C.add(this.localWorld,F),F},add:function(w){return C.add(this.localWorld,w),this},remove:function(w,b){Array.isArray(w)||(w=[w]);for(var I=0;I<w.length;I++){var R=w[I],N=R.body?R.body:R;c.remove(this.localWorld,N,b)}return this},removeConstraint:function(w,b){return c.remove(this.localWorld,w,b),this},convertTilemapLayer:function(w,b){var I=w.layer,R=w.getTilesWithin(0,0,I.width,I.height,{isColliding:!0});return this.convertTiles(R,b),this},convertTiles:function(w,b){if(w.length===0)return this;for(var I=0;I<w.length;I++)new T(this,w[I],b);return this},nextGroup:function(w){return y.nextGroup(w)},nextCategory:function(){return y.nextCategory()},pause:function(){return this.enabled=!1,this.emit(m.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(m.RESUME),this},update:function(w,b){if(!(!this.enabled||!this.autoUpdate)){var I=this.engine,R=this.runner,N=I.timing;R.isFixed?b=this.getDelta(w,b):(b=w-R.timePrev||R.delta,R.timePrev=w,R.deltaHistory.push(b),R.deltaHistory=R.deltaHistory.slice(-R.deltaSampleSize),b=Math.min.apply(null,R.deltaHistory),b=b<R.deltaMin?R.deltaMin:b,b=b>R.deltaMax?R.deltaMax:b,R.delta=b),R.timeScalePrev=N.timeScale,R.frameCounter+=1,w-R.counterTimestamp>=1e3&&(R.fps=R.frameCounter*((w-R.counterTimestamp)/1e3),R.counterTimestamp=w,R.frameCounter=0),l.update(I,b)}},step:function(w){l.update(this.engine,w)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(w){var b=w.hasOwnProperty("body")?w.body:w;return c.get(this.localWorld,b.id,b.type)!==null},getAllBodies:function(){return c.allBodies(this.localWorld)},getAllConstraints:function(){return c.allConstraints(this.localWorld)},getAllComposites:function(){return c.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var w=this.debugConfig,b=this.engine,I=this.debugGraphic,R=c.allBodies(this.localWorld);this.debugGraphic.clear(),w.showBroadphase&&b.broadphase.controller&&this.renderGrid(b.broadphase,I,w.broadphaseColor,.5),w.showBounds&&this.renderBodyBounds(R,I,w.boundsColor,.5),(w.showBody||w.showStaticBody)&&this.renderBodies(R),w.showJoint&&this.renderJoints(),(w.showAxes||w.showAngleIndicator)&&this.renderBodyAxes(R,I,w.showAxes,w.angleColor,.5),w.showVelocity&&this.renderBodyVelocity(R,I,w.velocityColor,1,2),w.showSeparations&&this.renderSeparations(b.pairs.list,I,w.separationColor),w.showCollisions&&this.renderCollisions(b.pairs.list,I,w.collisionColor)}},renderGrid:function(w,b,I,R){b.lineStyle(1,I,R);for(var N=o.keys(w.buckets),F=0;F<N.length;F++){var P=N[F];if(!(w.buckets[P].length<2)){var O=P.split(/C|R/);b.strokeRect(parseInt(O[1],10)*w.bucketWidth,parseInt(O[2],10)*w.bucketHeight,w.bucketWidth,w.bucketHeight)}}return this},renderSeparations:function(w,b,I){b.lineStyle(1,I,1);for(var R=0;R<w.length;R++){var N=w[R];if(N.isActive){var F=N.collision,P=F.bodyA,O=F.bodyB,M=P.position,L=O.position,k=F.penetration,V=!P.isStatic&&!O.isStatic?4:1;O.isStatic&&(V=0),b.lineBetween(L.x,L.y,L.x-k.x*V,L.y-k.y*V),V=!P.isStatic&&!O.isStatic?4:1,P.isStatic&&(V=0),b.lineBetween(M.x,M.y,M.x-k.x*V,M.y-k.y*V)}}return this},renderCollisions:function(w,b,I){b.lineStyle(1,I,.5),b.fillStyle(I,1);var R,N;for(R=0;R<w.length;R++)if(N=w[R],!!N.isActive)for(var F=0;F<N.activeContacts.length;F++){var P=N.activeContacts[F],O=P.vertex;b.fillRect(O.x-2,O.y-2,5,5)}for(R=0;R<w.length;R++)if(N=w[R],!!N.isActive){var M=N.collision,L=N.activeContacts;if(L.length>0){var k=L[0].vertex.x,V=L[0].vertex.y;L.length===2&&(k=(L[0].vertex.x+L[1].vertex.x)/2,V=(L[0].vertex.y+L[1].vertex.y)/2),M.bodyB===M.supports[0].body||M.bodyA.isStatic?b.lineBetween(k-M.normal.x*8,V-M.normal.y*8,k,V):b.lineBetween(k+M.normal.x*8,V+M.normal.y*8,k,V)}}return this},renderBodyBounds:function(w,b,I,R){b.lineStyle(1,I,R);for(var N=0;N<w.length;N++){var F=w[N];if(F.render.visible){var P=F.bounds;if(P)b.strokeRect(P.min.x,P.min.y,P.max.x-P.min.x,P.max.y-P.min.y);else for(var O=F.parts,M=O.length>1?1:0;M<O.length;M++){var L=O[M];b.strokeRect(L.bounds.min.x,L.bounds.min.y,L.bounds.max.x-L.bounds.min.x,L.bounds.max.y-L.bounds.min.y)}}}return this},renderBodyAxes:function(w,b,I,R,N){b.lineStyle(1,R,N);for(var F=0;F<w.length;F++){var P=w[F],O=P.parts;if(P.render.visible){var M,L,k;if(I)for(L=O.length>1?1:0;L<O.length;L++)for(M=O[L],k=0;k<M.axes.length;k++){var V=M.axes[k];b.lineBetween(M.position.x,M.position.y,M.position.x+V.x*20,M.position.y+V.y*20)}else for(L=O.length>1?1:0;L<O.length;L++)for(M=O[L],k=0;k<M.axes.length;k++)b.lineBetween(M.position.x,M.position.y,(M.vertices[0].x+M.vertices[M.vertices.length-1].x)/2,(M.vertices[0].y+M.vertices[M.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(w,b,I,R,N){b.lineStyle(N,I,R);for(var F=0;F<w.length;F++){var P=w[F];P.render.visible&&b.lineBetween(P.position.x,P.position.y,P.position.x+(P.position.x-P.positionPrev.x)*2,P.position.y+(P.position.y-P.positionPrev.y)*2)}return this},renderBodies:function(w){for(var b=this.debugGraphic,I=this.debugConfig,R=I.showBody,N=I.showStaticBody,F=I.showSleeping,P=I.showInternalEdges,O=I.showConvexHulls,M=I.renderFill,L=I.renderLine,k=I.staticBodySleepOpacity,V=I.sleepFillColor,W=I.sleepLineColor,K=I.hullColor,B=0;B<w.length;B++){var G=w[B];if(G.render.visible&&!(!N&&G.isStatic||!R&&!G.isStatic)){var D=G.render.lineColor,$=G.render.lineOpacity,z=G.render.lineThickness,H=G.render.fillColor,Y=G.render.fillOpacity;F&&G.isSleeping&&(G.isStatic?($*=k,Y*=k):(D=W,H=V)),M||(H=null),L||(D=null),this.renderBody(G,b,P,D,$,z,H,Y);var Z=G.parts.length;O&&Z>1&&this.renderConvexHull(G,b,K,z)}}},renderBody:function(w,b,I,R,N,F,P,O){R===void 0&&(R=null),N===void 0&&(N=null),F===void 0&&(F=1),P===void 0&&(P=null),O===void 0&&(O=null);for(var M=this.debugConfig,L=M.sensorFillColor,k=M.sensorLineColor,V=w.parts,W=V.length,K=W>1?1:0;K<W;K++){var B=V[K],G=B.render,D=G.opacity;if(!(!G.visible||D===0||B.isSensor&&!M.showSensors)){var $=B.circleRadius;if(b.beginPath(),B.isSensor?(P!==null&&b.fillStyle(L,O*D),R!==null&&b.lineStyle(F,k,N*D)):(P!==null&&b.fillStyle(P,O*D),R!==null&&b.lineStyle(F,R,N*D)),$)b.arc(B.position.x,B.position.y,$,0,2*Math.PI);else{var z=B.vertices,H=z.length;b.moveTo(z[0].x,z[0].y);for(var Y=1;Y<H;Y++){var Z=z[Y];if(!z[Y-1].isInternal||I?b.lineTo(Z.x,Z.y):b.moveTo(Z.x,Z.y),Y<H&&Z.isInternal&&!I){var Q=(Y+1)%H;b.moveTo(z[Q].x,z[Q].y)}}b.closePath()}P!==null&&b.fillPath(),R!==null&&b.strokePath()}}if(M.showPositions&&!w.isStatic){var tt=w.position.x,et=w.position.y,lt=Math.ceil(M.positionSize/2);b.fillStyle(M.positionColor,1),b.fillRect(tt-lt,et-lt,M.positionSize,M.positionSize)}return this},renderConvexHull:function(w,b,I,R){R===void 0&&(R=1);var N=w.parts,F=N.length;if(F>1){var P=w.vertices;b.lineStyle(R,I),b.beginPath(),b.moveTo(P[0].x,P[0].y);for(var O=1;O<P.length;O++)b.lineTo(P[O].x,P[O].y);b.lineTo(P[0].x,P[0].y),b.strokePath()}return this},renderJoints:function(){for(var w=this.debugGraphic,b=c.allConstraints(this.localWorld),I=0;I<b.length;I++){var R=b[I].render,N=R.lineColor,F=R.lineOpacity,P=R.lineThickness,O=R.pinSize,M=R.anchorColor,L=R.anchorSize;this.renderConstraint(b[I],w,N,F,P,O,M,L)}},renderConstraint:function(w,b,I,R,N,F,P,O){var M=w.render;if(!M.visible||!w.pointA||!w.pointB)return this;b.lineStyle(N,I,R);var L=w.bodyA,k=w.bodyB,V,W;if(L?V=E.add(L.position,w.pointA):V=w.pointA,M.type==="pin")b.strokeCircle(V.x,V.y,F);else{if(k?W=E.add(k.position,w.pointB):W=w.pointB,b.beginPath(),b.moveTo(V.x,V.y),M.type==="spring")for(var K=E.sub(W,V),B=E.perp(E.normalise(K)),G=Math.ceil(o.clamp(w.length/5,12,20)),D,$=1;$<G;$+=1)D=$%2===0?1:-1,b.lineTo(V.x+K.x*($/G)+B.x*D*4,V.y+K.y*($/G)+B.y*D*4);b.lineTo(W.x,W.y)}return b.strokePath(),M.anchors&&O>0&&(b.fillStyle(P),b.fillCircle(V.x,V.y,O),b.fillCircle(W.x,W.y,O)),this},resetCollisionIDs:function(){return v._nextCollidingGroupId=1,v._nextNonCollidingGroupId=-1,v._nextCategory=1,this},shutdown:function(){x.off(this.engine),this.removeAllListeners(),C.clear(this.localWorld,!1),l.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});i.exports=A},95349:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setBounce:function(e){return this.body.restitution=e,this}};i.exports=g},70679:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var a=0;if(!Array.isArray(e))a=e;else for(var v=0;v<e.length;v++)a|=e[v];return this.body.collisionFilter.mask=a,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,a){Array.isArray(e)||(e=[e]);for(var v=0;v<e.length;v++){var u=e[v].hasOwnProperty("body")?e[v].body:e[v];this.body.setOnCollideWith(u,a)}return this}};i.exports=g},77178:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84125),v={applyForce:function(u){return this._tempVec2.set(this.body.position.x,this.body.position.y),a.applyForce(this.body,this._tempVec2,u),this},applyForceFrom:function(u,o){return a.applyForce(this.body,u,o),this},thrust:function(u){var o=this.body.angle;return this._tempVec2.set(u*Math.cos(o),u*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(u){var o=this.body.angle-Math.PI/2;return this._tempVec2.set(u*Math.cos(o),u*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(u){var o=this.body.angle+Math.PI/2;return this._tempVec2.set(u*Math.cos(o),u*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(u){var o=this.body.angle-Math.PI;return this._tempVec2.set(u*Math.cos(o),u*Math.sin(o)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};i.exports=v},74015:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setFriction:function(e,a,v){return this.body.friction=e,a!==void 0&&(this.body.frictionAir=a),v!==void 0&&(this.body.frictionStatic=v),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};i.exports=g},11535:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};i.exports=g},74497:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84125),v=e(93736),u={setMass:function(o){return a.setMass(this.body,o),this},setDensity:function(o){return a.setDensity(this.body,o),this},centerOfMass:{get:function(){return new v(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};i.exports=u},75529:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};i.exports=g},64024:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(68516),v=e(84125),u=e(88456),o=e(72632),c=e(10998),l=e(72829),f=e(39745),m={setRectangle:function(h,p,y){return this.setBody({type:"rectangle",width:h,height:p},y)},setCircle:function(h,p){return this.setBody({type:"circle",radius:h},p)},setPolygon:function(h,p,y){return this.setBody({type:"polygon",sides:p,radius:h},y)},setTrapezoid:function(h,p,y,x){return this.setBody({type:"trapezoid",width:h,height:p,slope:y},x)},setExistingBody:function(h,p){p===void 0&&(p=!0),this.body&&this.world.remove(this.body,!0),this.body=h;for(var y=0;y<h.parts.length;y++)h.parts[y].gameObject=this;var x=this;if(h.destroy=function(){x.world.remove(x.body,!0),x.body.gameObject=null},p&&(this.world.has(h)&&this.world.remove(h,!0),this.world.add(h)),this._originComponent){var T=h.render.sprite.xOffset,C=h.render.sprite.yOffset,E=h.centerOfMass.x,A=h.centerOfMass.y;if(u(E,.5)&&u(A,.5))this.setOrigin(T+.5,C+.5);else{var w=h.centerOffset.x,b=h.centerOffset.y;this.setOrigin(T+w/this.displayWidth,C+b/this.displayHeight)}}return this},setBody:function(h,p){if(!h)return this;var y;typeof h=="string"&&(h={type:h});var x=o(h,"type","rectangle"),T=o(h,"x",this._tempVec2.x),C=o(h,"y",this._tempVec2.y),E=o(h,"width",this.width),A=o(h,"height",this.height);switch(x){case"rectangle":y=a.rectangle(T,C,E,A,p);break;case"circle":var w=o(h,"radius",Math.max(E,A)/2),b=o(h,"maxSides",25);y=a.circle(T,C,w,p,b);break;case"trapezoid":var I=o(h,"slope",.5);y=a.trapezoid(T,C,E,A,I,p);break;case"polygon":var R=o(h,"sides",5),N=o(h,"radius",Math.max(E,A)/2);y=a.polygon(T,C,R,N,p);break;case"fromVertices":case"fromVerts":var F=o(h,"verts",null);if(F)if(typeof F=="string"&&(F=f.fromPath(F)),this.body&&!this.body.hasOwnProperty("temp"))v.setVertices(this.body,F),y=this.body;else{var P=o(h,"flagInternal",!1),O=o(h,"removeCollinear",.01),M=o(h,"minimumArea",10);y=a.fromVertices(T,C,F,p,P,O,M)}break;case"fromPhysicsEditor":y=c.parseBody(T,C,h,p);break;case"fromPhysicsTracer":y=l.parseBody(T,C,h,p);break}return y&&this.setExistingBody(y,h.addToWorld),this}};i.exports=m},25106:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35416),v=e(22806),u=e(39073),o={setToSleep:function(){return v.set(this.body,!0),this},setAwake:function(){return v.set(this.body,!1),this},setSleepThreshold:function(c){return c===void 0&&(c=60),this.body.sleepThreshold=c,this},setSleepEvents:function(c,l){return this.setSleepStartEvent(c),this.setSleepEndEvent(l),this},setSleepStartEvent:function(c){if(c){var l=this.world;u.on(this.body,"sleepStart",function(f){l.emit(a.SLEEP_START,f,this)})}else u.off(this.body,"sleepStart");return this},setSleepEndEvent:function(c){if(c){var l=this.world;u.on(this.body,"sleepEnd",function(f){l.emit(a.SLEEP_END,f,this)})}else u.off(this.body,"sleepEnd");return this}};i.exports=o},82884:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84125),v={setStatic:function(u){return a.setStatic(this.body,u),this},isStatic:function(){return this.body.isStatic}};i.exports=v},4753:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84125),v=e(83392),u=e(35786),o=e(62138),c=4,l={x:{get:function(){return this.body.position.x},set:function(f){this._tempVec2.set(f,this.y),a.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(f){this._tempVec2.set(this.x,f),a.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(f){var m=1/this._scaleX,h=1/this._scaleY;this._scaleX=f,this._scaleX===0?this.renderFlags&=~c:this.renderFlags|=c,a.scale(this.body,m,h),a.scale(this.body,f,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(f){var m=1/this._scaleX,h=1/this._scaleY;this._scaleY=f,this._scaleY===0?this.renderFlags&=~c:this.renderFlags|=c,a.scale(this.body,m,h),a.scale(this.body,this._scaleX,f)}},angle:{get:function(){return o(this.body.angle*v.RAD_TO_DEG)},set:function(f){this.rotation=o(f)*v.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(f){this._rotation=u(f),a.setAngle(this.body,this._rotation)}},setPosition:function(f,m){return f===void 0&&(f=0),m===void 0&&(m=f),this._tempVec2.set(f,m),a.setPosition(this.body,this._tempVec2),this},setRotation:function(f){return f===void 0&&(f=0),this._rotation=u(f),a.setAngle(this.body,f),this},setFixedRotation:function(){return a.setInertia(this.body,1/0),this},setAngle:function(f){return f===void 0&&(f=0),this.angle=f,a.setAngle(this.body,this.rotation),this},setScale:function(f,m,h){f===void 0&&(f=1),m===void 0&&(m=f);var p=1/this._scaleX,y=1/this._scaleY;return this._scaleX=f,this._scaleY=m,a.scale(this.body,p,y,h),a.scale(this.body,f,m,h),this}};i.exports=l},37268:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84125),v={setVelocityX:function(u){return this._tempVec2.set(u,this.body.velocity.y),a.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(u){return this._tempVec2.set(this.body.velocity.x,u),a.setVelocity(this.body,this._tempVec2),this},setVelocity:function(u,o){return this._tempVec2.set(u,o),a.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return a.getVelocity(this.body)},setAngularVelocity:function(u){return a.setAngularVelocity(this.body,u),this},getAngularVelocity:function(){return a.getAngularVelocity(this.body)},setAngularSpeed:function(u){return a.setAngularSpeed(this.body,u),this},getAngularSpeed:function(){return a.getAngularSpeed(this.body)}};i.exports=v},74527:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Bounce:e(95349),Collision:e(70679),Force:e(77178),Friction:e(74015),Gravity:e(11535),Mass:e(74497),Sensor:e(75529),SetBody:e(64024),Sleep:e(25106),Static:e(82884),Transform:e(4753),Velocity:e(37268)}},63201:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="afteradd"},30474:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="afterremove"},44822:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="afterupdate"},88820:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="beforeadd"},94849:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="beforeremove"},6391:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="beforeupdate"},96738:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="collisionactive"},7916:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="collisionend"},59529:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="collisionstart"},10219:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragend"},183:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="drag"},39143:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="dragstart"},16483:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},35806:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},22106:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="sleepend"},5803:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="sleepstart"},35416:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AFTER_ADD:e(63201),AFTER_REMOVE:e(30474),AFTER_UPDATE:e(44822),BEFORE_ADD:e(88820),BEFORE_REMOVE:e(94849),BEFORE_UPDATE:e(6391),COLLISION_ACTIVE:e(96738),COLLISION_END:e(7916),COLLISION_START:e(59529),DRAG_END:e(10219),DRAG:e(183),DRAG_START:e(39143),PAUSE:e(16483),RESUME:e(35806),SLEEP_END:e(22106),SLEEP_START:e(5803)}},45949:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BodyBounds:e(63568),Components:e(74527),Events:e(35416),Factory:e(72653),MatterGameObject:e(3860),Image:e(7030),Matter:e(18171),MatterPhysics:e(50583),PolyDecomp:e(81084),Sprite:e(73658),TileBody:e(84720),PhysicsEditorParser:e(10998),PhysicsJSONParser:e(72829),PointerConstraint:e(88596),World:e(31468)}},84125:(i,g,e)=>{var a={};i.exports=a;var v=e(39745),u=e(10438),o=e(22806),c=e(68758),l=e(84091),f=e(50658);(function(){a._timeCorrection=!0,a._inertiaScale=4,a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,a._baseDelta=16.666666666666668,a.create=function(h){var p={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!h.hasOwnProperty("position")&&h.hasOwnProperty("vertices")?h.position=v.centre(h.vertices):h.hasOwnProperty("vertices")||(p.vertices=v.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var y=c.extend(p,h);return m(y,h),y.setOnCollideWith=function(x,T){return T?this.onCollideWith[x.id]=T:delete this.onCollideWith[x.id],this},y},a.nextGroup=function(h){return h?a._nextNonCollidingGroupId--:a._nextCollidingGroupId++},a.nextCategory=function(){return a._nextCategory=a._nextCategory<<1,a._nextCategory};var m=function(h,p){if(p=p||{},a.set(h,{bounds:h.bounds||l.create(h.vertices),positionPrev:h.positionPrev||u.clone(h.position),anglePrev:h.anglePrev||h.angle,vertices:h.vertices,parts:h.parts||[h],isStatic:h.isStatic,isSleeping:h.isSleeping,parent:h.parent||h}),v.rotate(h.vertices,h.angle,h.position),f.rotate(h.axes,h.angle),l.update(h.bounds,h.vertices,h.velocity),a.set(h,{axes:p.axes||h.axes,area:p.area||h.area,mass:p.mass||h.mass,inertia:p.inertia||h.inertia}),h.parts.length===1){var y=h.bounds,x=h.centerOfMass,T=h.centerOffset,C=y.max.x-y.min.x,E=y.max.y-y.min.y;x.x=-(y.min.x-h.position.x)/C,x.y=-(y.min.y-h.position.y)/E,T.x=C*x.x,T.y=E*x.y}};a.set=function(h,p,y){var x;typeof p=="string"&&(x=p,p={},p[x]=y);for(x in p)if(Object.prototype.hasOwnProperty.call(p,x))switch(y=p[x],x){case"isStatic":a.setStatic(h,y);break;case"isSleeping":o.set(h,y);break;case"mass":a.setMass(h,y);break;case"density":a.setDensity(h,y);break;case"inertia":a.setInertia(h,y);break;case"vertices":a.setVertices(h,y);break;case"position":a.setPosition(h,y);break;case"angle":a.setAngle(h,y);break;case"velocity":a.setVelocity(h,y);break;case"angularVelocity":a.setAngularVelocity(h,y);break;case"speed":a.setSpeed(h,y);break;case"angularSpeed":a.setAngularSpeed(h,y);break;case"parts":a.setParts(h,y);break;case"centre":a.setCentre(h,y);break;default:h[x]=y}},a.setStatic=function(h,p){for(var y=0;y<h.parts.length;y++){var x=h.parts[y];p?(x.isStatic||(x._original={restitution:x.restitution,friction:x.friction,mass:x.mass,inertia:x.inertia,density:x.density,inverseMass:x.inverseMass,inverseInertia:x.inverseInertia}),x.restitution=0,x.friction=1,x.mass=x.inertia=x.density=1/0,x.inverseMass=x.inverseInertia=0,x.positionPrev.x=x.position.x,x.positionPrev.y=x.position.y,x.anglePrev=x.angle,x.angularVelocity=0,x.speed=0,x.angularSpeed=0,x.motion=0):x._original&&(x.restitution=x._original.restitution,x.friction=x._original.friction,x.mass=x._original.mass,x.inertia=x._original.inertia,x.density=x._original.density,x.inverseMass=x._original.inverseMass,x.inverseInertia=x._original.inverseInertia,x._original=null),x.isStatic=p}},a.setMass=function(h,p){var y=h.inertia/(h.mass/6);h.inertia=y*(p/6),h.inverseInertia=1/h.inertia,h.mass=p,h.inverseMass=1/h.mass,h.density=h.mass/h.area},a.setDensity=function(h,p){a.setMass(h,p*h.area),h.density=p},a.setInertia=function(h,p){h.inertia=p,h.inverseInertia=1/h.inertia},a.setVertices=function(h,p){p[0].body===h?h.vertices=p:h.vertices=v.create(p,h),h.axes=f.fromVertices(h.vertices),h.area=v.area(h.vertices),a.setMass(h,h.density*h.area);var y=v.centre(h.vertices);v.translate(h.vertices,y,-1),a.setInertia(h,a._inertiaScale*v.inertia(h.vertices,h.mass)),v.translate(h.vertices,h.position),l.update(h.bounds,h.vertices,h.velocity)},a.setParts=function(h,p,y){var x;for(p=p.slice(0),h.parts.length=0,h.parts.push(h),h.parent=h,x=0;x<p.length;x++){var T=p[x];T!==h&&(T.parent=h,h.parts.push(T))}if(h.parts.length!==1){if(y=typeof y<"u"?y:!0,y){var C=[];for(x=0;x<p.length;x++)C=C.concat(p[x].vertices);v.clockwiseSort(C);var E=v.hull(C),A=v.centre(E);a.setVertices(h,E),v.translate(h.vertices,A)}var w=a._totalProperties(h),b=w.centre.x,I=w.centre.y,R=h.bounds,N=h.centerOfMass,F=h.centerOffset;l.update(R,h.vertices,h.velocity),N.x=-(R.min.x-b)/(R.max.x-R.min.x),N.y=-(R.min.y-I)/(R.max.y-R.min.y),F.x=b,F.y=I,h.area=w.area,h.parent=h,h.position.x=b,h.position.y=I,h.positionPrev.x=b,h.positionPrev.y=I,a.setMass(h,w.mass),a.setInertia(h,w.inertia),a.setPosition(h,w.centre)}},a.setCentre=function(h,p,y){y?(h.positionPrev.x+=p.x,h.positionPrev.y+=p.y,h.position.x+=p.x,h.position.y+=p.y):(h.positionPrev.x=p.x-(h.position.x-h.positionPrev.x),h.positionPrev.y=p.y-(h.position.y-h.positionPrev.y),h.position.x=p.x,h.position.y=p.y)},a.setPosition=function(h,p,y){var x=u.sub(p,h.position);y?(h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.velocity.x=x.x,h.velocity.y=x.y,h.speed=u.magnitude(x)):(h.positionPrev.x+=x.x,h.positionPrev.y+=x.y);for(var T=0;T<h.parts.length;T++){var C=h.parts[T];C.position.x+=x.x,C.position.y+=x.y,v.translate(C.vertices,x),l.update(C.bounds,C.vertices,h.velocity)}},a.setAngle=function(h,p,y){var x=p-h.angle;y?(h.anglePrev=h.angle,h.angularVelocity=x,h.angularSpeed=Math.abs(x)):h.anglePrev+=x;for(var T=0;T<h.parts.length;T++){var C=h.parts[T];C.angle+=x,v.rotate(C.vertices,x,h.position),f.rotate(C.axes,x),l.update(C.bounds,C.vertices,h.velocity),T>0&&u.rotateAbout(C.position,x,h.position,C.position)}},a.setVelocity=function(h,p){var y=h.deltaTime/a._baseDelta;h.positionPrev.x=h.position.x-p.x*y,h.positionPrev.y=h.position.y-p.y*y,h.velocity.x=(h.position.x-h.positionPrev.x)/y,h.velocity.y=(h.position.y-h.positionPrev.y)/y,h.speed=u.magnitude(h.velocity)},a.getVelocity=function(h){var p=a._baseDelta/h.deltaTime;return{x:(h.position.x-h.positionPrev.x)*p,y:(h.position.y-h.positionPrev.y)*p}},a.getSpeed=function(h){return u.magnitude(a.getVelocity(h))},a.setSpeed=function(h,p){a.setVelocity(h,u.mult(u.normalise(a.getVelocity(h)),p))},a.setAngularVelocity=function(h,p){var y=h.deltaTime/a._baseDelta;h.anglePrev=h.angle-p*y,h.angularVelocity=(h.angle-h.anglePrev)/y,h.angularSpeed=Math.abs(h.angularVelocity)},a.getAngularVelocity=function(h){return(h.angle-h.anglePrev)*a._baseDelta/h.deltaTime},a.getAngularSpeed=function(h){return Math.abs(a.getAngularVelocity(h))},a.setAngularSpeed=function(h,p){a.setAngularVelocity(h,c.sign(a.getAngularVelocity(h))*p)},a.translate=function(h,p,y){a.setPosition(h,u.add(h.position,p),y)},a.rotate=function(h,p,y,x){if(!y)a.setAngle(h,h.angle+p,x);else{var T=Math.cos(p),C=Math.sin(p),E=h.position.x-y.x,A=h.position.y-y.y;a.setPosition(h,{x:y.x+(E*T-A*C),y:y.y+(E*C+A*T)},x),a.setAngle(h,h.angle+p,x)}},a.scale=function(h,p,y,x){var T=0,C=0;x=x||h.position;for(var E=0;E<h.parts.length;E++){var A=h.parts[E];A.scale.x=p,A.scale.y=y,v.scale(A.vertices,p,y,x),A.axes=f.fromVertices(A.vertices),A.area=v.area(A.vertices),a.setMass(A,h.density*A.area),v.translate(A.vertices,{x:-A.position.x,y:-A.position.y}),a.setInertia(A,a._inertiaScale*v.inertia(A.vertices,A.mass)),v.translate(A.vertices,{x:A.position.x,y:A.position.y}),E>0&&(T+=A.area,C+=A.inertia),A.position.x=x.x+(A.position.x-x.x)*p,A.position.y=x.y+(A.position.y-x.y)*y,l.update(A.bounds,A.vertices,h.velocity)}h.parts.length>1&&(h.area=T,h.isStatic||(a.setMass(h,h.density*T),a.setInertia(h,C))),h.circleRadius&&(p===y?h.circleRadius*=p:h.circleRadius=null)},a.update=function(h,p){p=(typeof p<"u"?p:16.666666666666668)*h.timeScale;var y=p*p,x=a._timeCorrection?p/(h.deltaTime||p):1,T=1-h.frictionAir*(p/c._baseDelta),C=(h.position.x-h.positionPrev.x)*x,E=(h.position.y-h.positionPrev.y)*x;h.velocity.x=C*T+h.force.x/h.mass*y,h.velocity.y=E*T+h.force.y/h.mass*y,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.position.x+=h.velocity.x,h.position.y+=h.velocity.y,h.deltaTime=p,h.angularVelocity=(h.angle-h.anglePrev)*T*x+h.torque/h.inertia*y,h.anglePrev=h.angle,h.angle+=h.angularVelocity,h.speed=u.magnitude(h.velocity),h.angularSpeed=Math.abs(h.angularVelocity);for(var A=0;A<h.parts.length;A++){var w=h.parts[A];v.translate(w.vertices,h.velocity),A>0&&(w.position.x+=h.velocity.x,w.position.y+=h.velocity.y),h.angularVelocity!==0&&(v.rotate(w.vertices,h.angularVelocity,h.position),f.rotate(w.axes,h.angularVelocity),A>0&&u.rotateAbout(w.position,h.angularVelocity,h.position,w.position)),l.update(w.bounds,w.vertices,h.velocity)}},a.updateVelocities=function(h){var p=a._baseDelta/h.deltaTime,y=h.velocity;y.x=(h.position.x-h.positionPrev.x)*p,y.y=(h.position.y-h.positionPrev.y)*p,h.speed=Math.sqrt(y.x*y.x+y.y*y.y),h.angularVelocity=(h.angle-h.anglePrev)*p,h.angularSpeed=Math.abs(h.angularVelocity)},a.applyForce=function(h,p,y){var x={x:p.x-h.position.x,y:p.y-h.position.y};h.force.x+=y.x,h.force.y+=y.y,h.torque+=x.x*y.y-x.y*y.x},a._totalProperties=function(h){for(var p={mass:0,area:0,inertia:0,centre:{x:0,y:0}},y=h.parts.length===1?0:1;y<h.parts.length;y++){var x=h.parts[y],T=x.mass!==1/0?x.mass:1;p.mass+=T,p.area+=x.area,p.inertia+=x.inertia,p.centre=u.add(p.centre,u.mult(x.position,T))}return p.centre=u.div(p.centre,p.mass),p}})()},11299:(i,g,e)=>{var a={};i.exports=a;var v=e(39073),u=e(68758),o=e(84091),c=e(84125);(function(){a.create=function(l){return u.extend({id:u.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},l)},a.setModified=function(l,f,m,h){if(v.trigger(l,"compositeModified",l),l.isModified=f,f&&l.cache&&(l.cache.allBodies=null,l.cache.allConstraints=null,l.cache.allComposites=null),m&&l.parent&&a.setModified(l.parent,f,m,h),h)for(var p=0;p<l.composites.length;p++){var y=l.composites[p];a.setModified(y,f,m,h)}},a.add=function(l,f){var m=[].concat(f);v.trigger(l,"beforeAdd",{object:f});for(var h=0;h<m.length;h++){var p=m[h];switch(p.type){case"body":if(p.parent!==p){u.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(l,p);break;case"constraint":a.addConstraint(l,p);break;case"composite":a.addComposite(l,p);break;case"mouseConstraint":a.addConstraint(l,p.constraint);break}}return v.trigger(l,"afterAdd",{object:f}),l},a.remove=function(l,f,m){var h=[].concat(f);v.trigger(l,"beforeRemove",{object:f});for(var p=0;p<h.length;p++){var y=h[p];switch(y.type){case"body":a.removeBody(l,y,m);break;case"constraint":a.removeConstraint(l,y,m);break;case"composite":a.removeComposite(l,y,m);break;case"mouseConstraint":a.removeConstraint(l,y.constraint);break}}return v.trigger(l,"afterRemove",{object:f}),l},a.addComposite=function(l,f){return l.composites.push(f),f.parent=l,a.setModified(l,!0,!0,!1),l},a.removeComposite=function(l,f,m){var h=u.indexOf(l.composites,f);if(h!==-1&&a.removeCompositeAt(l,h),m)for(var p=0;p<l.composites.length;p++)a.removeComposite(l.composites[p],f,!0);return l},a.removeCompositeAt=function(l,f){return l.composites.splice(f,1),a.setModified(l,!0,!0,!1),l},a.addBody=function(l,f){return l.bodies.push(f),a.setModified(l,!0,!0,!1),l},a.removeBody=function(l,f,m){var h=u.indexOf(l.bodies,f);if(h!==-1&&a.removeBodyAt(l,h),m)for(var p=0;p<l.composites.length;p++)a.removeBody(l.composites[p],f,!0);return l},a.removeBodyAt=function(l,f){return l.bodies.splice(f,1),a.setModified(l,!0,!0,!1),l},a.addConstraint=function(l,f){return l.constraints.push(f),a.setModified(l,!0,!0,!1),l},a.removeConstraint=function(l,f,m){var h=u.indexOf(l.constraints,f);if(h!==-1&&a.removeConstraintAt(l,h),m)for(var p=0;p<l.composites.length;p++)a.removeConstraint(l.composites[p],f,!0);return l},a.removeConstraintAt=function(l,f){return l.constraints.splice(f,1),a.setModified(l,!0,!0,!1),l},a.clear=function(l,f,m){if(m)for(var h=0;h<l.composites.length;h++)a.clear(l.composites[h],f,!0);return f?l.bodies=l.bodies.filter(function(p){return p.isStatic}):l.bodies.length=0,l.constraints.length=0,l.composites.length=0,a.setModified(l,!0,!0,!1),l},a.allBodies=function(l){if(l.cache&&l.cache.allBodies)return l.cache.allBodies;for(var f=[].concat(l.bodies),m=0;m<l.composites.length;m++)f=f.concat(a.allBodies(l.composites[m]));return l.cache&&(l.cache.allBodies=f),f},a.allConstraints=function(l){if(l.cache&&l.cache.allConstraints)return l.cache.allConstraints;for(var f=[].concat(l.constraints),m=0;m<l.composites.length;m++)f=f.concat(a.allConstraints(l.composites[m]));return l.cache&&(l.cache.allConstraints=f),f},a.allComposites=function(l){if(l.cache&&l.cache.allComposites)return l.cache.allComposites;for(var f=[].concat(l.composites),m=0;m<l.composites.length;m++)f=f.concat(a.allComposites(l.composites[m]));return l.cache&&(l.cache.allComposites=f),f},a.get=function(l,f,m){var h,p;switch(m){case"body":h=a.allBodies(l);break;case"constraint":h=a.allConstraints(l);break;case"composite":h=a.allComposites(l).concat(l);break}return h?(p=h.filter(function(y){return y.id.toString()===f.toString()}),p.length===0?null:p[0]):null},a.move=function(l,f,m){return a.remove(l,f),a.add(m,f),l},a.rebase=function(l){for(var f=a.allBodies(l).concat(a.allConstraints(l)).concat(a.allComposites(l)),m=0;m<f.length;m++)f[m].id=u.nextId();return l},a.translate=function(l,f,m){for(var h=m?a.allBodies(l):l.bodies,p=0;p<h.length;p++)c.translate(h[p],f);return l},a.rotate=function(l,f,m,h){for(var p=Math.cos(f),y=Math.sin(f),x=h?a.allBodies(l):l.bodies,T=0;T<x.length;T++){var C=x[T],E=C.position.x-m.x,A=C.position.y-m.y;c.setPosition(C,{x:m.x+(E*p-A*y),y:m.y+(E*y+A*p)}),c.rotate(C,f)}return l},a.scale=function(l,f,m,h,p){for(var y=p?a.allBodies(l):l.bodies,x=0;x<y.length;x++){var T=y[x],C=T.position.x-h.x,E=T.position.y-h.y;c.setPosition(T,{x:h.x+C*f,y:h.y+E*m}),c.scale(T,f,m)}return l},a.bounds=function(l){for(var f=a.allBodies(l),m=[],h=0;h<f.length;h+=1){var p=f[h];m.push(p.bounds.min,p.bounds.max)}return o.create(m)}})()},72005:(i,g,e)=>{var a={};i.exports=a;var v=e(11299);(function(){a.create=v.create,a.add=v.add,a.remove=v.remove,a.clear=v.clear,a.addComposite=v.addComposite,a.addBody=v.addBody,a.addConstraint=v.addConstraint})()},63454:(i,g,e)=>{var a={};i.exports=a;var v=e(39745),u=e(70584);(function(){var o=[],c={overlap:0,axis:null},l={overlap:0,axis:null};a.create=function(f,m){return{pair:null,collided:!1,bodyA:f,bodyB:m,parentA:f.parent,parentB:m.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},a.collides=function(f,m,h){if(a._overlapAxes(c,f.vertices,m.vertices,f.axes),c.overlap<=0||(a._overlapAxes(l,m.vertices,f.vertices,m.axes),l.overlap<=0))return null;var p=h&&h.table[u.id(f,m)],y;p?y=p.collision:(y=a.create(f,m),y.collided=!0,y.bodyA=f.id<m.id?f:m,y.bodyB=f.id<m.id?m:f,y.parentA=y.bodyA.parent,y.parentB=y.bodyB.parent),f=y.bodyA,m=y.bodyB;var x;c.overlap<l.overlap?x=c:x=l;var T=y.normal,C=y.supports,E=x.axis,A=E.x,w=E.y;A*(m.position.x-f.position.x)+w*(m.position.y-f.position.y)<0?(T.x=A,T.y=w):(T.x=-A,T.y=-w),y.tangent.x=-T.y,y.tangent.y=T.x,y.depth=x.overlap,y.penetration.x=T.x*y.depth,y.penetration.y=T.y*y.depth;var b=a._findSupports(f,m,T,1),I=0;if(v.contains(f.vertices,b[0])&&(C[I++]=b[0]),v.contains(f.vertices,b[1])&&(C[I++]=b[1]),I<2){var R=a._findSupports(m,f,T,-1);v.contains(m.vertices,R[0])&&(C[I++]=R[0]),I<2&&v.contains(m.vertices,R[1])&&(C[I++]=R[1])}return I===0&&(C[I++]=b[0]),C.length=I,y},a._overlapAxes=function(f,m,h,p){var y=m.length,x=h.length,T=m[0].x,C=m[0].y,E=h[0].x,A=h[0].y,w=p.length,b=Number.MAX_VALUE,I=0,R,N,F,P,O,M;for(O=0;O<w;O++){var L=p[O],k=L.x,V=L.y,W=T*k+C*V,K=E*k+A*V,B=W,G=K;for(M=1;M<y;M+=1)P=m[M].x*k+m[M].y*V,P>B?B=P:P<W&&(W=P);for(M=1;M<x;M+=1)P=h[M].x*k+h[M].y*V,P>G?G=P:P<K&&(K=P);if(N=B-K,F=G-W,R=N<F?N:F,R<b&&(b=R,I=O,R<=0))break}f.axis=p[I],f.overlap=b},a._projectToAxis=function(f,m,h){for(var p=m[0].x*h.x+m[0].y*h.y,y=p,x=1;x<m.length;x+=1){var T=m[x].x*h.x+m[x].y*h.y;T>y?y=T:T<p&&(p=T)}f.min=p,f.max=y},a._findSupports=function(f,m,h,p){var y=m.vertices,x=y.length,T=f.position.x,C=f.position.y,E=h.x*p,A=h.y*p,w=Number.MAX_VALUE,b,I,R,N,F;for(F=0;F<x;F+=1)I=y[F],N=E*(T-I.x)+A*(C-I.y),N<w&&(w=N,b=I);return R=y[(x+b.index-1)%x],w=E*(T-R.x)+A*(C-R.y),I=y[(b.index+1)%x],E*(T-I.x)+A*(C-I.y)<w?(o[0]=b,o[1]=I,o):(o[0]=b,o[1]=R,o)}})()},17319:i=>{var g={};i.exports=g,function(){g.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},13657:(i,g,e)=>{var a={};i.exports=a;var v=e(68758),u=e(63454);(function(){a.create=function(o){var c={bodies:[],pairs:null};return v.extend(c,o)},a.setBodies=function(o,c){o.bodies=c.slice(0)},a.clear=function(o){o.bodies=[]},a.collisions=function(o){var c=[],l=o.pairs,f=o.bodies,m=f.length,h=a.canCollide,p=u.collides,y,x;for(f.sort(a._compareBoundsX),y=0;y<m;y++){var T=f[y],C=T.bounds,E=T.bounds.max.x,A=T.bounds.max.y,w=T.bounds.min.y,b=T.isStatic||T.isSleeping,I=T.parts.length,R=I===1;for(x=y+1;x<m;x++){var N=f[x],F=N.bounds;if(F.min.x>E)break;if(!(A<F.min.y||w>F.max.y)&&!(b&&(N.isStatic||N.isSleeping))&&h(T.collisionFilter,N.collisionFilter)){var P=N.parts.length;if(R&&P===1){var O=p(T,N,l);O&&c.push(O)}else for(var M=I>1?1:0,L=P>1?1:0,k=M;k<I;k++)for(var V=T.parts[k],C=V.bounds,W=L;W<P;W++){var K=N.parts[W],F=K.bounds;if(!(C.min.x>F.max.x||C.max.x<F.min.x||C.max.y<F.min.y||C.min.y>F.max.y)){var O=p(V,K,l);O&&c.push(O)}}}}}return c},a.canCollide=function(o,c){return o.group===c.group&&o.group!==0?o.group>0:(o.mask&c.category)!==0&&(c.mask&o.category)!==0},a._compareBoundsX=function(o,c){return o.bounds.min.x-c.bounds.min.x}})()},70584:(i,g,e)=>{var a={};i.exports=a;var v=e(17319);(function(){a.create=function(u,o){var c=u.bodyA,l=u.bodyB,f={id:a.id(c,l),bodyA:c,bodyB:l,collision:u,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||l.isSensor,timeCreated:o,timeUpdated:o,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return a.update(f,u,o),f},a.update=function(u,o,c){var l=u.contacts,f=o.supports,m=u.activeContacts,h=o.parentA,p=o.parentB,y=h.vertices.length;u.isActive=!0,u.timeUpdated=c,u.collision=o,u.separation=o.depth,u.inverseMass=h.inverseMass+p.inverseMass,u.friction=h.friction<p.friction?h.friction:p.friction,u.frictionStatic=h.frictionStatic>p.frictionStatic?h.frictionStatic:p.frictionStatic,u.restitution=h.restitution>p.restitution?h.restitution:p.restitution,u.slop=h.slop>p.slop?h.slop:p.slop,o.pair=u,m.length=0;for(var x=0;x<f.length;x++){var T=f[x],C=T.body===h?T.index:y+T.index,E=l[C];E?m.push(E):m.push(l[C]=v.create(T))}},a.setActive=function(u,o,c){o?(u.isActive=!0,u.timeUpdated=c):(u.isActive=!1,u.activeContacts.length=0)},a.id=function(u,o){return u.id<o.id?"A"+u.id+"B"+o.id:"A"+o.id+"B"+u.id}})()},91327:(i,g,e)=>{var a={};i.exports=a;var v=e(70584),u=e(68758);(function(){a.create=function(o){return u.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},a.update=function(o,c,l){var f=o.list,m=f.length,h=o.table,p=c.length,y=o.collisionStart,x=o.collisionEnd,T=o.collisionActive,C,E,A,w;for(y.length=0,x.length=0,T.length=0,w=0;w<m;w++)f[w].confirmedActive=!1;for(w=0;w<p;w++)C=c[w],A=C.pair,A?(A.isActive?T.push(A):y.push(A),v.update(A,C,l),A.confirmedActive=!0):(A=v.create(C,l),h[A.id]=A,y.push(A),f.push(A));var b=[];for(m=f.length,w=0;w<m;w++)A=f[w],A.confirmedActive||(v.setActive(A,!1,l),x.push(A),!A.collision.bodyA.isSleeping&&!A.collision.bodyB.isSleeping&&b.push(w));for(w=0;w<b.length;w++)E=b[w]-w,A=f[E],f.splice(E,1),delete h[A.id]},a.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()},13390:(i,g,e)=>{var a={};i.exports=a;var v=e(10438),u=e(63454),o=e(84091),c=e(68516),l=e(39745);(function(){a.collides=function(f,m){for(var h=[],p=m.length,y=f.bounds,x=u.collides,T=o.overlaps,C=0;C<p;C++){var E=m[C],A=E.parts.length,w=A===1?0:1;if(f!==E&&T(E.bounds,y))for(var b=w;b<A;b++){var I=E.parts[b];if(T(I.bounds,y)){var R=x(I,f);if(R){h.push(R);break}}}}return h},a.ray=function(f,m,h,p){p=p||1e-100;for(var y=v.angle(m,h),x=v.magnitude(v.sub(m,h)),T=(h.x+m.x)*.5,C=(h.y+m.y)*.5,E=c.rectangle(T,C,x,p,{angle:y}),A=a.collides(E,f),w=0;w<A.length;w+=1){var b=A[w];b.body=b.bodyB=b.bodyA}return A},a.region=function(f,m,h){for(var p=[],y=0;y<f.length;y++){var x=f[y],T=o.overlaps(x.bounds,m);(T&&!h||!T&&h)&&p.push(x)}return p},a.point=function(f,m){for(var h=[],p=0;p<f.length;p++){var y=f[p];if(o.contains(y.bounds,m))for(var x=y.parts.length===1?0:1;x<y.parts.length;x++){var T=y.parts[x];if(o.contains(T.bounds,m)&&l.contains(T.vertices,m)){h.push(y);break}}}return h}})()},44272:(i,g,e)=>{var a={};i.exports=a;var v=e(39745),u=e(68758),o=e(84091);(function(){a._restingThresh=2,a._restingThreshTangent=Math.sqrt(6),a._positionDampen=.9,a._positionWarming=.8,a._frictionNormalMultiplier=5,a._frictionMaxStatic=Number.MAX_VALUE,a.preSolvePosition=function(c){var l,f,m,h=c.length;for(l=0;l<h;l++)f=c[l],f.isActive&&(m=f.activeContacts.length,f.collision.parentA.totalContacts+=m,f.collision.parentB.totalContacts+=m)},a.solvePosition=function(c,l,f){var m,h,p,y,x,T,C,E,A=a._positionDampen*(f||1),w=u.clamp(l/u._baseDelta,0,1),b=c.length;for(m=0;m<b;m++)h=c[m],!(!h.isActive||h.isSensor)&&(p=h.collision,y=p.parentA,x=p.parentB,T=p.normal,h.separation=T.x*(x.positionImpulse.x+p.penetration.x-y.positionImpulse.x)+T.y*(x.positionImpulse.y+p.penetration.y-y.positionImpulse.y));for(m=0;m<b;m++)h=c[m],!(!h.isActive||h.isSensor)&&(p=h.collision,y=p.parentA,x=p.parentB,T=p.normal,E=h.separation-h.slop*w,(y.isStatic||x.isStatic)&&(E*=2),y.isStatic||y.isSleeping||(C=A/y.totalContacts,y.positionImpulse.x+=T.x*E*C,y.positionImpulse.y+=T.y*E*C),x.isStatic||x.isSleeping||(C=A/x.totalContacts,x.positionImpulse.x-=T.x*E*C,x.positionImpulse.y-=T.y*E*C))},a.postSolvePosition=function(c){for(var l=a._positionWarming,f=c.length,m=v.translate,h=o.update,p=0;p<f;p++){var y=c[p],x=y.positionImpulse,T=x.x,C=x.y,E=y.velocity;if(y.totalContacts=0,T!==0||C!==0){for(var A=0;A<y.parts.length;A++){var w=y.parts[A];m(w.vertices,x),h(w.bounds,w.vertices,E),w.position.x+=T,w.position.y+=C}y.positionPrev.x+=T,y.positionPrev.y+=C,T*E.x+C*E.y<0?(x.x=0,x.y=0):(x.x*=l,x.y*=l)}}},a.preSolveVelocity=function(c){var l=c.length,f,m;for(f=0;f<l;f++){var h=c[f];if(!(!h.isActive||h.isSensor)){var p=h.activeContacts,y=p.length,x=h.collision,T=x.parentA,C=x.parentB,E=x.normal,A=x.tangent;for(m=0;m<y;m++){var w=p[m],b=w.vertex,I=w.normalImpulse,R=w.tangentImpulse;if(I!==0||R!==0){var N=E.x*I+A.x*R,F=E.y*I+A.y*R;T.isStatic||T.isSleeping||(T.positionPrev.x+=N*T.inverseMass,T.positionPrev.y+=F*T.inverseMass,T.anglePrev+=T.inverseInertia*((b.x-T.position.x)*F-(b.y-T.position.y)*N)),C.isStatic||C.isSleeping||(C.positionPrev.x-=N*C.inverseMass,C.positionPrev.y-=F*C.inverseMass,C.anglePrev-=C.inverseInertia*((b.x-C.position.x)*F-(b.y-C.position.y)*N))}}}}},a.solveVelocity=function(c,l){var f=l/u._baseDelta,m=f*f,h=m*f,p=-a._restingThresh*f,y=a._restingThreshTangent,x=a._frictionNormalMultiplier*f,T=a._frictionMaxStatic,C=c.length,E,A,w,b;for(w=0;w<C;w++){var I=c[w];if(!(!I.isActive||I.isSensor)){var R=I.collision,N=R.parentA,F=R.parentB,P=N.velocity,O=F.velocity,M=R.normal.x,L=R.normal.y,k=R.tangent.x,V=R.tangent.y,W=I.activeContacts,K=W.length,B=1/K,G=N.inverseMass+F.inverseMass,D=I.friction*I.frictionStatic*x;for(P.x=N.position.x-N.positionPrev.x,P.y=N.position.y-N.positionPrev.y,O.x=F.position.x-F.positionPrev.x,O.y=F.position.y-F.positionPrev.y,N.angularVelocity=N.angle-N.anglePrev,F.angularVelocity=F.angle-F.anglePrev,b=0;b<K;b++){var $=W[b],z=$.vertex,H=z.x-N.position.x,Y=z.y-N.position.y,Z=z.x-F.position.x,Q=z.y-F.position.y,tt=P.x-Y*N.angularVelocity,et=P.y+H*N.angularVelocity,lt=O.x-Q*F.angularVelocity,ut=O.y+Z*F.angularVelocity,ct=tt-lt,ht=et-ut,gt=M*ct+L*ht,yt=k*ct+V*ht,Et=I.separation+gt,bt=Math.min(Et,1);bt=Et<0?0:bt;var pt=bt*D;yt<-pt||yt>pt?(A=yt>0?yt:-yt,E=I.friction*(yt>0?1:-1)*h,E<-A?E=-A:E>A&&(E=A)):(E=yt,A=T);var wt=H*L-Y*M,Tt=Z*L-Q*M,Gt=B/(G+N.inverseInertia*wt*wt+F.inverseInertia*Tt*Tt),Bt=(1+I.restitution)*gt*Gt;if(E*=Gt,gt<p)$.normalImpulse=0;else{var Xt=$.normalImpulse;$.normalImpulse+=Bt,$.normalImpulse>0&&($.normalImpulse=0),Bt=$.normalImpulse-Xt}if(yt<-y||yt>y)$.tangentImpulse=0;else{var te=$.tangentImpulse;$.tangentImpulse+=E,$.tangentImpulse<-A&&($.tangentImpulse=-A),$.tangentImpulse>A&&($.tangentImpulse=A),E=$.tangentImpulse-te}var Kt=M*Bt+k*E,Wt=L*Bt+V*E;N.isStatic||N.isSleeping||(N.positionPrev.x+=Kt*N.inverseMass,N.positionPrev.y+=Wt*N.inverseMass,N.anglePrev+=(H*Wt-Y*Kt)*N.inverseInertia),F.isStatic||F.isSleeping||(F.positionPrev.x-=Kt*F.inverseMass,F.positionPrev.y-=Wt*F.inverseMass,F.anglePrev-=(Z*Wt-Q*Kt)*F.inverseInertia)}}}}})()},52838:(i,g,e)=>{var a={};i.exports=a;var v=e(39745),u=e(10438),o=e(22806),c=e(84091),l=e(50658),f=e(68758);(function(){a._warming=.4,a._torqueDampen=1,a._minLength=1e-6,a.create=function(m){var h=m;h.bodyA&&!h.pointA&&(h.pointA={x:0,y:0}),h.bodyB&&!h.pointB&&(h.pointB={x:0,y:0});var p=h.bodyA?u.add(h.bodyA.position,h.pointA):h.pointA,y=h.bodyB?u.add(h.bodyB.position,h.pointB):h.pointB,x=u.magnitude(u.sub(p,y));h.length=typeof h.length<"u"?h.length:x,h.id=h.id||f.nextId(),h.label=h.label||"Constraint",h.type="constraint",h.stiffness=h.stiffness||(h.length>0?1:.7),h.damping=h.damping||0,h.angularStiffness=h.angularStiffness||0,h.angleA=h.bodyA?h.bodyA.angle:h.angleA,h.angleB=h.bodyB?h.bodyB.angle:h.angleB,h.plugin={};var T={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return h.length===0&&h.stiffness>.1?(T.type="pin",T.anchors=!1):h.stiffness<.9&&(T.type="spring"),h.render=f.extend(T,h.render),h},a.preSolveAll=function(m){for(var h=0;h<m.length;h+=1){var p=m[h],y=p.constraintImpulse;p.isStatic||y.x===0&&y.y===0&&y.angle===0||(p.position.x+=y.x,p.position.y+=y.y,p.angle+=y.angle)}},a.solveAll=function(m,h){for(var p=f.clamp(h/f._baseDelta,0,1),y=0;y<m.length;y+=1){var x=m[y],T=!x.bodyA||x.bodyA&&x.bodyA.isStatic,C=!x.bodyB||x.bodyB&&x.bodyB.isStatic;(T||C)&&a.solve(m[y],p)}for(y=0;y<m.length;y+=1)x=m[y],T=!x.bodyA||x.bodyA&&x.bodyA.isStatic,C=!x.bodyB||x.bodyB&&x.bodyB.isStatic,!T&&!C&&a.solve(m[y],p)},a.solve=function(m,h){var p=m.bodyA,y=m.bodyB,x=m.pointA,T=m.pointB;if(!(!p&&!y)){p&&!p.isStatic&&(u.rotate(x,p.angle-m.angleA,x),m.angleA=p.angle),y&&!y.isStatic&&(u.rotate(T,y.angle-m.angleB,T),m.angleB=y.angle);var C=x,E=T;if(p&&(C=u.add(p.position,x)),y&&(E=u.add(y.position,T)),!(!C||!E)){var A=u.sub(C,E),w=u.magnitude(A);w<a._minLength&&(w=a._minLength);var b=(w-m.length)/w,I=m.stiffness>=1||m.length===0,R=I?m.stiffness*h:m.stiffness*h*h,N=m.damping*h,F=u.mult(A,b*R),P=(p?p.inverseMass:0)+(y?y.inverseMass:0),O=(p?p.inverseInertia:0)+(y?y.inverseInertia:0),M=P+O,L,k,V,W,K;if(N>0){var B=u.create();V=u.div(A,w),K=u.sub(y&&u.sub(y.position,y.positionPrev)||B,p&&u.sub(p.position,p.positionPrev)||B),W=u.dot(V,K)}p&&!p.isStatic&&(k=p.inverseMass/P,p.constraintImpulse.x-=F.x*k,p.constraintImpulse.y-=F.y*k,p.position.x-=F.x*k,p.position.y-=F.y*k,N>0&&(p.positionPrev.x-=N*V.x*W*k,p.positionPrev.y-=N*V.y*W*k),L=u.cross(x,F)/M*a._torqueDampen*p.inverseInertia*(1-m.angularStiffness),p.constraintImpulse.angle-=L,p.angle-=L),y&&!y.isStatic&&(k=y.inverseMass/P,y.constraintImpulse.x+=F.x*k,y.constraintImpulse.y+=F.y*k,y.position.x+=F.x*k,y.position.y+=F.y*k,N>0&&(y.positionPrev.x+=N*V.x*W*k,y.positionPrev.y+=N*V.y*W*k),L=u.cross(T,F)/M*a._torqueDampen*y.inverseInertia*(1-m.angularStiffness),y.constraintImpulse.angle+=L,y.angle+=L)}}},a.postSolveAll=function(m){for(var h=0;h<m.length;h++){var p=m[h],y=p.constraintImpulse;if(!(p.isStatic||y.x===0&&y.y===0&&y.angle===0)){o.set(p,!1);for(var x=0;x<p.parts.length;x++){var T=p.parts[x];v.translate(T.vertices,y),x>0&&(T.position.x+=y.x,T.position.y+=y.y),y.angle!==0&&(v.rotate(T.vertices,y.angle,p.position),l.rotate(T.axes,y.angle),x>0&&u.rotateAbout(T.position,y.angle,p.position,T.position)),c.update(T.bounds,T.vertices,p.velocity)}y.angle*=a._warming,y.x*=a._warming,y.y*=a._warming}}},a.pointAWorld=function(m){return{x:(m.bodyA?m.bodyA.position.x:0)+(m.pointA?m.pointA.x:0),y:(m.bodyA?m.bodyA.position.y:0)+(m.pointA?m.pointA.y:0)}},a.pointBWorld=function(m){return{x:(m.bodyB?m.bodyB.position.x:0)+(m.pointB?m.pointB.x:0),y:(m.bodyB?m.bodyB.position.y:0)+(m.pointB?m.pointB.y:0)}},a.currentLength=function(m){var h=(m.bodyA?m.bodyA.position.x:0)+(m.pointA?m.pointA.x:0),p=(m.bodyA?m.bodyA.position.y:0)+(m.pointA?m.pointA.y:0),y=(m.bodyB?m.bodyB.position.x:0)+(m.pointB?m.pointB.x:0),x=(m.bodyB?m.bodyB.position.y:0)+(m.pointB?m.pointB.y:0),T=h-y,C=p-x;return Math.sqrt(T*T+C*C)}})()},68758:(i,g,e)=>{var a={};i.exports=a,function(){a._baseDelta=16.666666666666668,a._nextId=0,a._seed=0,a._nowStartTime=+new Date,a._warnedOnce={},a._decomp=null,a.extend=function(u,o){var c,l;typeof o=="boolean"?(c=2,l=o):(c=1,l=!0);for(var f=c;f<arguments.length;f++){var m=arguments[f];if(m)for(var h in m)l&&m[h]&&m[h].constructor===Object&&(!u[h]||u[h].constructor===Object)?(u[h]=u[h]||{},a.extend(u[h],l,m[h])):u[h]=m[h]}return u},a.clone=function(u,o){return a.extend({},o,u)},a.keys=function(u){if(Object.keys)return Object.keys(u);var o=[];for(var c in u)o.push(c);return o},a.values=function(u){var o=[];if(Object.keys){for(var c=Object.keys(u),l=0;l<c.length;l++)o.push(u[c[l]]);return o}for(var f in u)o.push(u[f]);return o},a.get=function(u,o,c,l){o=o.split(".").slice(c,l);for(var f=0;f<o.length;f+=1)u=u[o[f]];return u},a.set=function(u,o,c,l,f){var m=o.split(".").slice(l,f);return a.get(u,o,0,-1)[m[m.length-1]]=c,c},a.shuffle=function(u){for(var o=u.length-1;o>0;o--){var c=Math.floor(a.random()*(o+1)),l=u[o];u[o]=u[c],u[c]=l}return u},a.choose=function(u){return u[Math.floor(a.random()*u.length)]},a.isElement=function(u){return typeof HTMLElement<"u"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},a.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},a.isFunction=function(u){return typeof u=="function"},a.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},a.isString=function(u){return toString.call(u)==="[object String]"},a.clamp=function(u,o,c){return u<o?o:u>c?c:u},a.sign=function(u){return u<0?-1:1},a.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-a._nowStartTime},a.random=function(u,o){return u=typeof u<"u"?u:0,o=typeof o<"u"?o:1,u+v()*(o-u)};var v=function(){return a._seed=(a._seed*9301+49297)%233280,a._seed/233280};a.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},a.logLevel=1,a.log=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.info=function(){console&&a.logLevel>0&&a.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warn=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warnOnce=function(){var u=Array.prototype.slice.call(arguments).join(" ");a._warnedOnce[u]||(a.warn(u),a._warnedOnce[u]=!0)},a.deprecated=function(u,o,c){u[o]=a.chain(function(){a.warnOnce(" deprecated ",c)},u[o])},a.nextId=function(){return a._nextId++},a.indexOf=function(u,o){if(u.indexOf)return u.indexOf(o);for(var c=0;c<u.length;c++)if(u[c]===o)return c;return-1},a.map=function(u,o){if(u.map)return u.map(o);for(var c=[],l=0;l<u.length;l+=1)c.push(o(u[l]));return c},a.topologicalSort=function(u){var o=[],c=[],l=[];for(var f in u)!c[f]&&!l[f]&&a._topologicalSort(f,c,l,u,o);return o},a._topologicalSort=function(u,o,c,l,f){var m=l[u]||[];c[u]=!0;for(var h=0;h<m.length;h+=1){var p=m[h];c[p]||o[p]||a._topologicalSort(p,o,c,l,f)}c[u]=!1,o[u]=!0,f.push(u)},a.chain=function(){for(var u=[],o=0;o<arguments.length;o+=1){var c=arguments[o];c._chained?u.push.apply(u,c._chained):u.push(c)}var l=function(){for(var f,m=new Array(arguments.length),h=0,p=arguments.length;h<p;h++)m[h]=arguments[h];for(h=0;h<u.length;h+=1){var y=u[h].apply(f,m);typeof y<"u"&&(f=y)}return f};return l._chained=u,l},a.chainPathBefore=function(u,o,c){return a.set(u,o,a.chain(c,a.get(u,o)))},a.chainPathAfter=function(u,o,c){return a.set(u,o,a.chain(a.get(u,o),c))},a.setDecomp=function(u){a._decomp=u},a.getDecomp=function(){var u=a._decomp;try{!u&&typeof window<"u"&&(u=window.decomp),!u&&typeof e.g<"u"&&(u=e.g.decomp)}catch{u=null}return u}}()},45775:(i,g,e)=>{var a={};i.exports=a;var v=e(22806),u=e(44272),o=e(13657),c=e(91327),l=e(39073),f=e(11299),m=e(52838),h=e(68758),p=e(84125);(function(){a.create=function(y){y=y||{};var x={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},T=h.extend(x,y);return T.world=y.world||f.create({label:"World"}),T.pairs=y.pairs||c.create(),T.detector=y.detector||o.create(),T.grid={buckets:[]},T.world.gravity=T.gravity,T.broadphase=T.grid,T.metrics={},T},a.update=function(y,x){var T=h.now(),C=y.world,E=y.detector,A=y.pairs,w=y.timing,b=w.timestamp,I;x=typeof x<"u"?x:h._baseDelta,x*=w.timeScale,w.timestamp+=x,w.lastDelta=x;var R={timestamp:w.timestamp,delta:x};l.trigger(y,"beforeUpdate",R);var N=f.allBodies(C),F=f.allConstraints(C);for(C.isModified&&(o.setBodies(E,N),f.setModified(C,!1,!1,!0)),y.enableSleeping&&v.update(N,x),a._bodiesApplyGravity(N,y.gravity),x>0&&a._bodiesUpdate(N,x),l.trigger(y,"beforeSolve",R),m.preSolveAll(N),I=0;I<y.constraintIterations;I++)m.solveAll(F,x);m.postSolveAll(N),E.pairs=y.pairs;var P=o.collisions(E);c.update(A,P,b),y.enableSleeping&&v.afterCollisions(A.list),A.collisionStart.length>0&&l.trigger(y,"collisionStart",{pairs:A.collisionStart,timestamp:w.timestamp,delta:x});var O=h.clamp(20/y.positionIterations,0,1);for(u.preSolvePosition(A.list),I=0;I<y.positionIterations;I++)u.solvePosition(A.list,x,O);for(u.postSolvePosition(N),m.preSolveAll(N),I=0;I<y.constraintIterations;I++)m.solveAll(F,x);for(m.postSolveAll(N),u.preSolveVelocity(A.list),I=0;I<y.velocityIterations;I++)u.solveVelocity(A.list,x);return a._bodiesUpdateVelocities(N),A.collisionActive.length>0&&l.trigger(y,"collisionActive",{pairs:A.collisionActive,timestamp:w.timestamp,delta:x}),A.collisionEnd.length>0&&l.trigger(y,"collisionEnd",{pairs:A.collisionEnd,timestamp:w.timestamp,delta:x}),a._bodiesClearForces(N),l.trigger(y,"afterUpdate",R),y.timing.lastElapsed=h.now()-T,y},a.merge=function(y,x){if(h.extend(y,x),x.world){y.world=x.world,a.clear(y);for(var T=f.allBodies(y.world),C=0;C<T.length;C++){var E=T[C];v.set(E,!1),E.id=h.nextId()}}},a.clear=function(y){c.clear(y.pairs),o.clear(y.detector)},a._bodiesClearForces=function(y){for(var x=y.length,T=0;T<x;T++){var C=y[T];C.force.x=0,C.force.y=0,C.torque=0}},a._bodiesApplyGravity=function(y,x){var T=typeof x.scale<"u"?x.scale:.001,C=y.length;if(!(x.x===0&&x.y===0||T===0))for(var E=0;E<C;E++){var A=y[E];A.isStatic||A.isSleeping||(A.force.y+=A.mass*x.y*T,A.force.x+=A.mass*x.x*T)}},a._bodiesUpdate=function(y,x){for(var T=y.length,C=0;C<T;C++){var E=y[C];E.isStatic||E.isSleeping||p.update(E,x)}},a._bodiesUpdateVelocities=function(y){for(var x=y.length,T=0;T<x;T++)p.updateVelocities(y[T])}})()},39073:(i,g,e)=>{var a={};i.exports=a;var v=e(68758);(function(){a.on=function(u,o,c){for(var l=o.split(" "),f,m=0;m<l.length;m++)f=l[m],u.events=u.events||{},u.events[f]=u.events[f]||[],u.events[f].push(c);return c},a.off=function(u,o,c){if(!o){u.events={};return}typeof o=="function"&&(c=o,o=v.keys(u.events).join(" "));for(var l=o.split(" "),f=0;f<l.length;f++){var m=u.events[l[f]],h=[];if(c&&m)for(var p=0;p<m.length;p++)m[p]!==c&&h.push(m[p]);u.events[l[f]]=h}},a.trigger=function(u,o,c){var l,f,m,h,p=u.events;if(p&&v.keys(p).length>0){c||(c={}),l=o.split(" ");for(var y=0;y<l.length;y++)if(f=l[y],m=p[f],m){h=v.clone(c,!1),h.name=f,h.source=u;for(var x=0;x<m.length;x++)m[x].apply(u,[h])}}}})()},16929:(i,g,e)=>{var a={};i.exports=a;var v=e(84474),u=e(68758);(function(){a.name="matter-js",a.version="0.19.0",a.uses=[],a.used=[],a.use=function(){v.use(a,Array.prototype.slice.call(arguments))},a.before=function(o,c){return o=o.replace(/^Matter./,""),u.chainPathBefore(a,o,c)},a.after=function(o,c){return o=o.replace(/^Matter./,""),u.chainPathAfter(a,o,c)}})()},84474:(i,g,e)=>{var a={};i.exports=a;var v=e(68758);(function(){a._registry={},a.register=function(u){if(a.isPlugin(u)||v.warn("Plugin.register:",a.toString(u),"does not implement all required fields."),u.name in a._registry){var o=a._registry[u.name],c=a.versionParse(u.version).number,l=a.versionParse(o.version).number;c>l?(v.warn("Plugin.register:",a.toString(o),"was upgraded to",a.toString(u)),a._registry[u.name]=u):c<l?v.warn("Plugin.register:",a.toString(o),"can not be downgraded to",a.toString(u)):u!==o&&v.warn("Plugin.register:",a.toString(u),"is already registered to different plugin object")}else a._registry[u.name]=u;return u},a.resolve=function(u){return a._registry[a.dependencyParse(u).name]},a.toString=function(u){return typeof u=="string"?u:(u.name||"anonymous")+"@"+(u.version||u.range||"0.0.0")},a.isPlugin=function(u){return u&&u.name&&u.version&&u.install},a.isUsed=function(u,o){return u.used.indexOf(o)>-1},a.isFor=function(u,o){var c=u.for&&a.dependencyParse(u.for);return!u.for||o.name===c.name&&a.versionSatisfies(o.version,c.range)},a.use=function(u,o){if(u.uses=(u.uses||[]).concat(o||[]),u.uses.length===0){v.warn("Plugin.use:",a.toString(u),"does not specify any dependencies to install.");return}for(var c=a.dependencies(u),l=v.topologicalSort(c),f=[],m=0;m<l.length;m+=1)if(l[m]!==u.name){var h=a.resolve(l[m]);if(!h){f.push(" "+l[m]);continue}a.isUsed(u,h.name)||(a.isFor(h,u)||(v.warn("Plugin.use:",a.toString(h),"is for",h.for,"but installed on",a.toString(u)+"."),h._warned=!0),h.install?h.install(u):(v.warn("Plugin.use:",a.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(f.push(" "+a.toString(h)),delete h._warned):f.push(" "+a.toString(h)),u.used.push(h.name))}f.length>0&&!h.silent&&v.info(f.join("  "))},a.dependencies=function(u,o){var c=a.dependencyParse(u),l=c.name;if(o=o||{},!(l in o)){u=a.resolve(u)||u,o[l]=v.map(u.uses||[],function(m){a.isPlugin(m)&&a.register(m);var h=a.dependencyParse(m),p=a.resolve(m);return p&&!a.versionSatisfies(p.version,h.range)?(v.warn("Plugin.dependencies:",a.toString(p),"does not satisfy",a.toString(h),"used by",a.toString(c)+"."),p._warned=!0,u._warned=!0):p||(v.warn("Plugin.dependencies:",a.toString(m),"used by",a.toString(c),"could not be resolved."),u._warned=!0),h.name});for(var f=0;f<o[l].length;f+=1)a.dependencies(o[l][f],o);return o}},a.dependencyParse=function(u){if(v.isString(u)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return o.test(u)||v.warn("Plugin.dependencyParse:",u,"is not a valid dependency string."),{name:u.split("@")[0],range:u.split("@")[1]||"*"}}return{name:u.name,range:u.range||u.version}},a.versionParse=function(u){var o=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;o.test(u)||v.warn("Plugin.versionParse:",u,"is not a valid version or range.");var c=o.exec(u),l=Number(c[4]),f=Number(c[5]),m=Number(c[6]);return{isRange:!!(c[1]||c[2]),version:c[3],range:u,operator:c[1]||c[2]||"",major:l,minor:f,patch:m,parts:[l,f,m],prerelease:c[7],number:l*1e8+f*1e4+m}},a.versionSatisfies=function(u,o){o=o||"*";var c=a.versionParse(o),l=a.versionParse(u);if(c.isRange){if(c.operator==="*"||u==="*")return!0;if(c.operator===">")return l.number>c.number;if(c.operator===">=")return l.number>=c.number;if(c.operator==="~")return l.major===c.major&&l.minor===c.minor&&l.patch>=c.patch;if(c.operator==="^")return c.major>0?l.major===c.major&&l.number>=c.number:c.minor>0?l.minor===c.minor&&l.patch>=c.patch:l.patch===c.patch}return u===o||u==="*"}})()},22806:(i,g,e)=>{var a={};i.exports=a;var v=e(84125),u=e(39073),o=e(68758);(function(){a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(c,l){for(var f=l/o._baseDelta,m=a._motionSleepThreshold,h=0;h<c.length;h++){var p=c[h],y=v.getSpeed(p),x=v.getAngularSpeed(p),T=y*y+x*x;if(p.force.x!==0||p.force.y!==0){a.set(p,!1);continue}var C=Math.min(p.motion,T),E=Math.max(p.motion,T);p.motion=a._minBias*C+(1-a._minBias)*E,p.sleepThreshold>0&&p.motion<m?(p.sleepCounter+=1,p.sleepCounter>=p.sleepThreshold/f&&a.set(p,!0)):p.sleepCounter>0&&(p.sleepCounter-=1)}},a.afterCollisions=function(c){for(var l=a._motionSleepThreshold,f=0;f<c.length;f++){var m=c[f];if(m.isActive){var h=m.collision,p=h.bodyA.parent,y=h.bodyB.parent;if(!(p.isSleeping&&y.isSleeping||p.isStatic||y.isStatic)&&(p.isSleeping||y.isSleeping)){var x=p.isSleeping&&!p.isStatic?p:y,T=x===p?y:p;!x.isStatic&&T.motion>l&&a.set(x,!1)}}}},a.set=function(c,l){var f=c.isSleeping;l?(c.isSleeping=!0,c.sleepCounter=c.sleepThreshold,c.positionImpulse.x=0,c.positionImpulse.y=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.speed=0,c.angularSpeed=0,c.motion=0,f||u.trigger(c,"sleepStart")):(c.isSleeping=!1,c.sleepCounter=0,f&&u.trigger(c,"sleepEnd"))}})()},68516:(i,g,e)=>{var a={};i.exports=a;var v=e(39745),u=e(68758),o=e(84125),c=e(84091),l=e(10438);(function(){a.rectangle=function(f,m,h,p,y){y=y||{};var x={label:"Rectangle Body",position:{x:f,y:m},vertices:v.fromPath("L 0 0 L "+h+" 0 L "+h+" "+p+" L 0 "+p)};if(y.chamfer){var T=y.chamfer;x.vertices=v.chamfer(x.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete y.chamfer}return o.create(u.extend({},x,y))},a.trapezoid=function(f,m,h,p,y,x){x=x||{},y*=.5;var T=(1-y*2)*h,C=h*y,E=C+T,A=E+C,w;y<.5?w="L 0 0 L "+C+" "+-p+" L "+E+" "+-p+" L "+A+" 0":w="L 0 0 L "+E+" "+-p+" L "+A+" 0";var b={label:"Trapezoid Body",position:{x:f,y:m},vertices:v.fromPath(w)};if(x.chamfer){var I=x.chamfer;b.vertices=v.chamfer(b.vertices,I.radius,I.quality,I.qualityMin,I.qualityMax),delete x.chamfer}return o.create(u.extend({},b,x))},a.circle=function(f,m,h,p,y){p=p||{};var x={label:"Circle Body",circleRadius:h};y=y||25;var T=Math.ceil(Math.max(10,Math.min(y,h)));return T%2===1&&(T+=1),a.polygon(f,m,T,h,u.extend({},x,p))},a.polygon=function(f,m,h,p,y){if(y=y||{},h<3)return a.circle(f,m,p,y);for(var x=2*Math.PI/h,T="",C=x*.5,E=0;E<h;E+=1){var A=C+E*x,w=Math.cos(A)*p,b=Math.sin(A)*p;T+="L "+w.toFixed(3)+" "+b.toFixed(3)+" "}var I={label:"Polygon Body",position:{x:f,y:m},vertices:v.fromPath(T)};if(y.chamfer){var R=y.chamfer;I.vertices=v.chamfer(I.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete y.chamfer}return o.create(u.extend({},I,y))},a.fromVertices=function(f,m,h,p,y,x,T,C){var E=u.getDecomp(),A,w,b,I,R,N,F,P,O,M,L;for(A=!!(E&&E.quickDecomp),p=p||{},b=[],y=typeof y<"u"?y:!1,x=typeof x<"u"?x:.01,T=typeof T<"u"?T:10,C=typeof C<"u"?C:.01,u.isArray(h[0])||(h=[h]),M=0;M<h.length;M+=1)if(N=h[M],I=v.isConvex(N),R=!I,R&&!A&&u.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),I||!A)I?N=v.clockwiseSort(N):N=v.hull(N),b.push({position:{x:f,y:m},vertices:N});else{var k=N.map(function(Z){return[Z.x,Z.y]});E.makeCCW(k),x!==!1&&E.removeCollinearPoints(k,x),C!==!1&&E.removeDuplicatePoints&&E.removeDuplicatePoints(k,C);var V=E.quickDecomp(k);for(F=0;F<V.length;F++){var W=V[F],K=W.map(function(Z){return{x:Z[0],y:Z[1]}});T>0&&v.area(K)<T||b.push({position:v.centre(K),vertices:K})}}for(F=0;F<b.length;F++)b[F]=o.create(u.extend(b[F],p));if(y){var B=5;for(F=0;F<b.length;F++){var G=b[F];for(P=F+1;P<b.length;P++){var D=b[P];if(c.overlaps(G.bounds,D.bounds)){var $=G.vertices,z=D.vertices;for(O=0;O<G.vertices.length;O++)for(L=0;L<D.vertices.length;L++){var H=l.magnitudeSquared(l.sub($[(O+1)%$.length],z[L])),Y=l.magnitudeSquared(l.sub($[O],z[(L+1)%z.length]));H<B&&Y<B&&($[O].isInternal=!0,z[L].isInternal=!0)}}}}}return b.length>1?(w=o.create(u.extend({parts:b.slice(0)},p)),o.setPosition(w,{x:f,y:m}),w):b[0]},a.flagCoincidentParts=function(f,m){m===void 0&&(m=5);for(var h=0;h<f.length;h++)for(var p=f[h],y=h+1;y<f.length;y++){var x=f[y];if(c.overlaps(p.bounds,x.bounds))for(var T=p.vertices,C=x.vertices,E=0;E<p.vertices.length;E++)for(var A=0;A<x.vertices.length;A++){var w=l.magnitudeSquared(l.sub(T[(E+1)%T.length],C[A])),b=l.magnitudeSquared(l.sub(T[E],C[(A+1)%C.length]));w<m&&b<m&&(T[E].isInternal=!0,C[A].isInternal=!0)}}return f}})()},56643:(i,g,e)=>{var a={};i.exports=a;var v=e(11299),u=e(52838),o=e(68758),c=e(84125),l=e(68516);(function(){a.stack=function(f,m,h,p,y,x,T){for(var C=v.create({label:"Stack"}),E=f,A=m,w,b=0,I=0;I<p;I++){for(var R=0,N=0;N<h;N++){var F=T(E,A,N,I,w,b);if(F){var P=F.bounds.max.y-F.bounds.min.y,O=F.bounds.max.x-F.bounds.min.x;P>R&&(R=P),c.translate(F,{x:O*.5,y:P*.5}),E=F.bounds.max.x+y,v.addBody(C,F),w=F,b+=1}else E+=y}A+=R+x,E=f}return C},a.chain=function(f,m,h,p,y,x){for(var T=f.bodies,C=1;C<T.length;C++){var E=T[C-1],A=T[C],w=E.bounds.max.y-E.bounds.min.y,b=E.bounds.max.x-E.bounds.min.x,I=A.bounds.max.y-A.bounds.min.y,R=A.bounds.max.x-A.bounds.min.x,N={bodyA:E,pointA:{x:b*m,y:w*h},bodyB:A,pointB:{x:R*p,y:I*y}},F=o.extend(N,x);v.addConstraint(f,u.create(F))}return f.label+=" Chain",f},a.mesh=function(f,m,h,p,y){var x=f.bodies,T,C,E,A,w;for(T=0;T<h;T++){for(C=1;C<m;C++)E=x[C-1+T*m],A=x[C+T*m],v.addConstraint(f,u.create(o.extend({bodyA:E,bodyB:A},y)));if(T>0)for(C=0;C<m;C++)E=x[C+(T-1)*m],A=x[C+T*m],v.addConstraint(f,u.create(o.extend({bodyA:E,bodyB:A},y))),p&&C>0&&(w=x[C-1+(T-1)*m],v.addConstraint(f,u.create(o.extend({bodyA:w,bodyB:A},y)))),p&&C<m-1&&(w=x[C+1+(T-1)*m],v.addConstraint(f,u.create(o.extend({bodyA:w,bodyB:A},y))))}return f.label+=" Mesh",f},a.pyramid=function(f,m,h,p,y,x,T){return a.stack(f,m,h,p,y,x,function(C,E,A,w,b,I){var R=Math.min(p,Math.ceil(h/2)),N=b?b.bounds.max.x-b.bounds.min.x:0;if(!(w>R)){w=R-w;var F=w,P=h-1-w;if(!(A<F||A>P)){I===1&&c.translate(b,{x:(A+(h%2===1?1:-1))*N,y:0});var O=b?A*N:0;return T(f+O+A*y,E,A,w,b,I)}}})},a.newtonsCradle=function(f,m,h,p,y){for(var x=v.create({label:"Newtons Cradle"}),T=0;T<h;T++){var C=1.9,E=l.circle(f+T*(p*C),m+y,p,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),A=u.create({pointA:{x:f+T*(p*C),y:m},bodyB:E});v.addBody(x,E),v.addConstraint(x,A)}return x},a.car=function(f,m,h,p,y){var x=c.nextGroup(!0),T=20,C=-h*.5+T,E=h*.5-T,A=0,w=v.create({label:"Car"}),b=l.rectangle(f,m,h,p,{collisionFilter:{group:x},chamfer:{radius:p*.5},density:2e-4}),I=l.circle(f+C,m+A,y,{collisionFilter:{group:x},friction:.8}),R=l.circle(f+E,m+A,y,{collisionFilter:{group:x},friction:.8}),N=u.create({bodyB:b,pointB:{x:C,y:A},bodyA:I,stiffness:1,length:0}),F=u.create({bodyB:b,pointB:{x:E,y:A},bodyA:R,stiffness:1,length:0});return v.addBody(w,b),v.addBody(w,I),v.addBody(w,R),v.addConstraint(w,N),v.addConstraint(w,F),w},a.softBody=function(f,m,h,p,y,x,T,C,E,A){E=o.extend({inertia:1/0},E),A=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},A);var w=a.stack(f,m,h,p,y,x,function(b,I){return l.circle(b,I,C,E)});return a.mesh(w,h,p,T,A),w.label="Soft Body",w}})()},50658:(i,g,e)=>{var a={};i.exports=a;var v=e(10438),u=e(68758);(function(){a.fromVertices=function(o){for(var c={},l=0;l<o.length;l++){var f=(l+1)%o.length,m=v.normalise({x:o[f].y-o[l].y,y:o[l].x-o[f].x}),h=m.y===0?1/0:m.x/m.y;h=h.toFixed(3).toString(),c[h]=m}return u.values(c)},a.rotate=function(o,c){if(c!==0)for(var l=Math.cos(c),f=Math.sin(c),m=0;m<o.length;m++){var h=o[m],p;p=h.x*l-h.y*f,h.y=h.x*f+h.y*l,h.x=p}}})()},84091:i=>{var g={};i.exports=g,function(){g.create=function(e){var a={min:{x:0,y:0},max:{x:0,y:0}};return e&&g.update(a,e),a},g.update=function(e,a,v){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var u=0;u<a.length;u++){var o=a[u];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}v&&(v.x>0?e.max.x+=v.x:e.min.x+=v.x,v.y>0?e.max.y+=v.y:e.min.y+=v.y)},g.contains=function(e,a){return a.x>=e.min.x&&a.x<=e.max.x&&a.y>=e.min.y&&a.y<=e.max.y},g.overlaps=function(e,a){return e.min.x<=a.max.x&&e.max.x>=a.min.x&&e.max.y>=a.min.y&&e.min.y<=a.max.y},g.translate=function(e,a){e.min.x+=a.x,e.max.x+=a.x,e.min.y+=a.y,e.max.y+=a.y},g.shift=function(e,a){var v=e.max.x-e.min.x,u=e.max.y-e.min.y;e.min.x=a.x,e.max.x=a.x+v,e.min.y=a.y,e.max.y=a.y+u}}()},92765:(i,g,e)=>{var a={};i.exports=a,e(84091);var v=e(68758);(function(){a.pathToVertices=function(u,o){typeof window<"u"&&!("SVGPathSeg"in window)&&v.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,l,f,m,h,p,y,x,T,C,E=[],A,w,b=0,I=0,R=0;o=o||15;var N=function(P,O,M){var L=M%2===1&&M>1;if(!T||P!=T.x||O!=T.y){T&&L?(A=T.x,w=T.y):(A=0,w=0);var k={x:A+P,y:w+O};(L||!T)&&(T=k),E.push(k),I=A+P,R=w+O}},F=function(P){var O=P.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":I=P.x,R=P.y;break;case"H":I=P.x;break;case"V":R=P.y;break}N(I,R,P.pathSegType)}};for(a._svgPathToAbsolute(u),f=u.getTotalLength(),p=[],c=0;c<u.pathSegList.numberOfItems;c+=1)p.push(u.pathSegList.getItem(c));for(y=p.concat();b<f;){if(C=u.getPathSegAtLength(b),h=p[C],h!=x){for(;y.length&&y[0]!=h;)F(y.shift());x=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":m=u.getPointAtLength(b),N(m.x,m.y,0);break}b+=o}for(c=0,l=y.length;c<l;++c)F(y[c]);return E},a._svgPathToAbsolute=function(u){for(var o,c,l,f,m,h,p=u.pathSegList,y=0,x=0,T=p.numberOfItems,C=0;C<T;++C){var E=p.getItem(C),A=E.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(A))"x"in E&&(y=E.x),"y"in E&&(x=E.y);else switch("x1"in E&&(l=y+E.x1),"x2"in E&&(m=y+E.x2),"y1"in E&&(f=x+E.y1),"y2"in E&&(h=x+E.y2),"x"in E&&(y+=E.x),"y"in E&&(x+=E.y),A){case"m":p.replaceItem(u.createSVGPathSegMovetoAbs(y,x),C);break;case"l":p.replaceItem(u.createSVGPathSegLinetoAbs(y,x),C);break;case"h":p.replaceItem(u.createSVGPathSegLinetoHorizontalAbs(y),C);break;case"v":p.replaceItem(u.createSVGPathSegLinetoVerticalAbs(x),C);break;case"c":p.replaceItem(u.createSVGPathSegCurvetoCubicAbs(y,x,l,f,m,h),C);break;case"s":p.replaceItem(u.createSVGPathSegCurvetoCubicSmoothAbs(y,x,m,h),C);break;case"q":p.replaceItem(u.createSVGPathSegCurvetoQuadraticAbs(y,x,l,f),C);break;case"t":p.replaceItem(u.createSVGPathSegCurvetoQuadraticSmoothAbs(y,x),C);break;case"a":p.replaceItem(u.createSVGPathSegArcAbs(y,x,E.r1,E.r2,E.angle,E.largeArcFlag,E.sweepFlag),C);break;case"z":case"Z":y=o,x=c;break}(A=="M"||A=="m")&&(o=y,c=x)}}})()},10438:i=>{var g={};i.exports=g,function(){g.create=function(e,a){return{x:e||0,y:a||0}},g.clone=function(e){return{x:e.x,y:e.y}},g.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},g.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},g.rotate=function(e,a,v){var u=Math.cos(a),o=Math.sin(a);v||(v={});var c=e.x*u-e.y*o;return v.y=e.x*o+e.y*u,v.x=c,v},g.rotateAbout=function(e,a,v,u){var o=Math.cos(a),c=Math.sin(a);u||(u={});var l=v.x+((e.x-v.x)*o-(e.y-v.y)*c);return u.y=v.y+((e.x-v.x)*c+(e.y-v.y)*o),u.x=l,u},g.normalise=function(e){var a=g.magnitude(e);return a===0?{x:0,y:0}:{x:e.x/a,y:e.y/a}},g.dot=function(e,a){return e.x*a.x+e.y*a.y},g.cross=function(e,a){return e.x*a.y-e.y*a.x},g.cross3=function(e,a,v){return(a.x-e.x)*(v.y-e.y)-(a.y-e.y)*(v.x-e.x)},g.add=function(e,a,v){return v||(v={}),v.x=e.x+a.x,v.y=e.y+a.y,v},g.sub=function(e,a,v){return v||(v={}),v.x=e.x-a.x,v.y=e.y-a.y,v},g.mult=function(e,a){return{x:e.x*a,y:e.y*a}},g.div=function(e,a){return{x:e.x/a,y:e.y/a}},g.perp=function(e,a){return a=a===!0?-1:1,{x:a*-e.y,y:a*e.x}},g.neg=function(e){return{x:-e.x,y:-e.y}},g.angle=function(e,a){return Math.atan2(a.y-e.y,a.x-e.x)},g._temp=[g.create(),g.create(),g.create(),g.create(),g.create(),g.create()]}()},39745:(i,g,e)=>{var a={};i.exports=a;var v=e(10438),u=e(68758);(function(){a.create=function(o,c){for(var l=[],f=0;f<o.length;f++){var m=o[f],h={x:m.x,y:m.y,index:f,body:c,isInternal:!1};l.push(h)}return l},a.fromPath=function(o,c){var l=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return o.replace(l,function(m,h,p){f.push({x:parseFloat(h),y:parseFloat(p)})}),a.create(f,c)},a.centre=function(o){for(var c=a.area(o,!0),l={x:0,y:0},f,m,h,p=0;p<o.length;p++)h=(p+1)%o.length,f=v.cross(o[p],o[h]),m=v.mult(v.add(o[p],o[h]),f),l=v.add(l,m);return v.div(l,6*c)},a.mean=function(o){for(var c={x:0,y:0},l=0;l<o.length;l++)c.x+=o[l].x,c.y+=o[l].y;return v.div(c,o.length)},a.area=function(o,c){for(var l=0,f=o.length-1,m=0;m<o.length;m++)l+=(o[f].x-o[m].x)*(o[f].y+o[m].y),f=m;return c?l/2:Math.abs(l)/2},a.inertia=function(o,c){for(var l=0,f=0,m=o,h,p,y=0;y<m.length;y++)p=(y+1)%m.length,h=Math.abs(v.cross(m[p],m[y])),l+=h*(v.dot(m[p],m[p])+v.dot(m[p],m[y])+v.dot(m[y],m[y])),f+=h;return c/6*(l/f)},a.translate=function(o,c,l){l=typeof l<"u"?l:1;var f=o.length,m=c.x*l,h=c.y*l,p;for(p=0;p<f;p++)o[p].x+=m,o[p].y+=h;return o},a.rotate=function(o,c,l){if(c!==0){var f=Math.cos(c),m=Math.sin(c),h=l.x,p=l.y,y=o.length,x,T,C,E;for(E=0;E<y;E++)x=o[E],T=x.x-h,C=x.y-p,x.x=h+(T*f-C*m),x.y=p+(T*m+C*f);return o}},a.contains=function(o,c){for(var l=c.x,f=c.y,m=o.length,h=o[m-1],p,y=0;y<m;y++){if(p=o[y],(l-h.x)*(p.y-h.y)+(f-h.y)*(h.x-p.x)>0)return!1;h=p}return!0},a.scale=function(o,c,l,f){if(c===1&&l===1)return o;f=f||a.centre(o);for(var m,h,p=0;p<o.length;p++)m=o[p],h=v.sub(m,f),o[p].x=f.x+h.x*c,o[p].y=f.y+h.y*l;return o},a.chamfer=function(o,c,l,f,m){typeof c=="number"?c=[c]:c=c||[8],l=typeof l<"u"?l:-1,f=f||2,m=m||14;for(var h=[],p=0;p<o.length;p++){var y=o[p-1>=0?p-1:o.length-1],x=o[p],T=o[(p+1)%o.length],C=c[p<c.length?p:c.length-1];if(C===0){h.push(x);continue}var E=v.normalise({x:x.y-y.y,y:y.x-x.x}),A=v.normalise({x:T.y-x.y,y:x.x-T.x}),w=Math.sqrt(2*Math.pow(C,2)),b=v.mult(u.clone(E),C),I=v.normalise(v.mult(v.add(E,A),.5)),R=v.sub(x,v.mult(I,w)),N=l;l===-1&&(N=Math.pow(C,.32)*1.75),N=u.clamp(N,f,m),N%2===1&&(N+=1);for(var F=Math.acos(v.dot(E,A)),P=F/N,O=0;O<N;O++)h.push(v.add(v.rotate(b,P*O),R))}return h},a.clockwiseSort=function(o){var c=a.mean(o);return o.sort(function(l,f){return v.angle(c,l)-v.angle(c,f)}),o},a.isConvex=function(o){var c=0,l=o.length,f,m,h,p;if(l<3)return null;for(f=0;f<l;f++)if(m=(f+1)%l,h=(f+2)%l,p=(o[m].x-o[f].x)*(o[h].y-o[m].y),p-=(o[m].y-o[f].y)*(o[h].x-o[m].x),p<0?c|=1:p>0&&(c|=2),c===3)return!1;return c!==0?!0:null},a.hull=function(o){var c=[],l=[],f,m;for(o=o.slice(0),o.sort(function(h,p){var y=h.x-p.x;return y!==0?y:h.y-p.y}),m=0;m<o.length;m+=1){for(f=o[m];l.length>=2&&v.cross3(l[l.length-2],l[l.length-1],f)<=0;)l.pop();l.push(f)}for(m=o.length-1;m>=0;m-=1){for(f=o[m];c.length>=2&&v.cross3(c[c.length-2],c[c.length-1],f)<=0;)c.pop();c.push(f)}return c.pop(),l.pop(),c.concat(l)}})()},1675:(i,g,e)=>{var a=e(18171),v={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(u){u.after("Body.create",function(){v.Body.init(this)}),u.before("Engine.update",function(o){v.Engine.update(o)})},Body:{init:function(u){u.plugin.attractors=u.plugin.attractors||[]}},Engine:{update:function(u){for(var o=a.Composite.allBodies(u.world),c=0;c<o.length;c++){var l=o[c],f=l.plugin.attractors;if(f&&f.length>0)for(var m=0;m<o.length;m++){var h=o[m];if(c!==m)for(var p=0;p<f.length;p++){var y=f[p],x=y;a.Common.isFunction(y)&&(x=y(l,h)),x&&a.Body.applyForce(h,h.position,x)}}}}},Attractors:{gravityConstant:.001,gravity:function(u,o){var c=a.Vector.sub(o.position,u.position),l=a.Vector.magnitudeSquared(c)||1e-4,f=a.Vector.normalise(c),m=-v.Attractors.gravityConstant*(u.mass*o.mass/l),h=a.Vector.mult(f,m);a.Body.applyForce(u,u.position,a.Vector.neg(h)),a.Body.applyForce(o,o.position,h)}}};i.exports=v},80391:i=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(a){a.pairs.map(function(v){var u=v.bodyA,o=v.bodyB;u.gameObject&&u.gameObject.emit("collide",u,o,v),o.gameObject&&o.gameObject.emit("collide",o,u,v),e.Events.trigger(u,"onCollide",{pair:v}),e.Events.trigger(o,"onCollide",{pair:v}),u.onCollideCallback&&u.onCollideCallback(v),o.onCollideCallback&&o.onCollideCallback(v),u.onCollideWith[o.id]&&u.onCollideWith[o.id](o,v),o.onCollideWith[u.id]&&o.onCollideWith[u.id](u,v)})}),e.Events.on(this,"collisionActive",function(a){a.pairs.map(function(v){var u=v.bodyA,o=v.bodyB;u.gameObject&&u.gameObject.emit("collideActive",u,o,v),o.gameObject&&o.gameObject.emit("collideActive",o,u,v),e.Events.trigger(u,"onCollideActive",{pair:v}),e.Events.trigger(o,"onCollideActive",{pair:v}),u.onCollideActiveCallback&&u.onCollideActiveCallback(v),o.onCollideActiveCallback&&o.onCollideActiveCallback(v)})}),e.Events.on(this,"collisionEnd",function(a){a.pairs.map(function(v){var u=v.bodyA,o=v.bodyB;u.gameObject&&u.gameObject.emit("collideEnd",u,o,v),o.gameObject&&o.gameObject.emit("collideEnd",o,u,v),e.Events.trigger(u,"onCollideEnd",{pair:v}),e.Events.trigger(o,"onCollideEnd",{pair:v}),u.onCollideEndCallback&&u.onCollideEndCallback(v),o.onCollideEndCallback&&o.onCollideEndCallback(v)})})})}};i.exports=g},44097:(i,g,e)=>{var a=e(18171),v={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(u){u.after("Engine.update",function(){v.Engine.update(this)})},Engine:{update:function(u){for(var o=u.world,c=a.Composite.allBodies(o),l=a.Composite.allComposites(o),f=0;f<c.length;f+=1){var m=c[f];m.plugin.wrap&&v.Body.wrap(m,m.plugin.wrap)}for(f=0;f<l.length;f+=1){var h=l[f];h.plugin.wrap&&v.Composite.wrap(h,h.plugin.wrap)}}},Bounds:{wrap:function(u,o){var c=null,l=null;if(typeof o.min.x<"u"&&typeof o.max.x<"u"&&(u.min.x>o.max.x?c=o.min.x-u.max.x:u.max.x<o.min.x&&(c=o.max.x-u.min.x)),typeof o.min.y<"u"&&typeof o.max.y<"u"&&(u.min.y>o.max.y?l=o.min.y-u.max.y:u.max.y<o.min.y&&(l=o.max.y-u.min.y)),c!==null||l!==null)return{x:c||0,y:l||0}}},Body:{wrap:function(u,o){var c=v.Bounds.wrap(u.bounds,o);return c&&a.Body.translate(u,c),c}},Composite:{bounds:function(u){for(var o=a.Composite.allBodies(u),c=[],l=0;l<o.length;l+=1){var f=o[l];c.push(f.bounds.min,f.bounds.max)}return a.Bounds.create(c)},wrap:function(u,o){var c=v.Bounds.wrap(v.Composite.bounds(u),o);return c&&a.Composite.translate(u,c),c}}};i.exports=v},81084:i=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={decomp:F,quickDecomp:L,isSimple:O,removeCollinearPoints:k,removeDuplicatePoints:V,makeCCW:T};function g(B,G,D){D=D||0;var $=[0,0],z,H,Y,Z,Q,tt,et;return z=B[1][1]-B[0][1],H=B[0][0]-B[1][0],Y=z*B[0][0]+H*B[0][1],Z=G[1][1]-G[0][1],Q=G[0][0]-G[1][0],tt=Z*G[0][0]+Q*G[0][1],et=z*Q-Z*H,W(et,0,D)||($[0]=(Q*Y-H*tt)/et,$[1]=(z*tt-Z*Y)/et),$}function e(B,G,D,$){var z=G[0]-B[0],H=G[1]-B[1],Y=$[0]-D[0],Z=$[1]-D[1];if(Y*H-Z*z===0)return!1;var Q=(z*(D[1]-B[1])+H*(B[0]-D[0]))/(Y*H-Z*z),tt=(Y*(B[1]-D[1])+Z*(D[0]-B[0]))/(Z*z-Y*H);return Q>=0&&Q<=1&&tt>=0&&tt<=1}function a(B,G,D){return(G[0]-B[0])*(D[1]-B[1])-(D[0]-B[0])*(G[1]-B[1])}function v(B,G,D){return a(B,G,D)>0}function u(B,G,D){return a(B,G,D)>=0}function o(B,G,D){return a(B,G,D)<0}function c(B,G,D){return a(B,G,D)<=0}var l=[],f=[];function m(B,G,D,$){if($){var z=l,H=f;z[0]=G[0]-B[0],z[1]=G[1]-B[1],H[0]=D[0]-G[0],H[1]=D[1]-G[1];var Y=z[0]*H[0]+z[1]*H[1],Z=Math.sqrt(z[0]*z[0]+z[1]*z[1]),Q=Math.sqrt(H[0]*H[0]+H[1]*H[1]),tt=Math.acos(Y/(Z*Q));return tt<$}else return a(B,G,D)===0}function h(B,G){var D=G[0]-B[0],$=G[1]-B[1];return D*D+$*$}function p(B,G){var D=B.length;return B[G<0?G%D+D:G%D]}function y(B){B.length=0}function x(B,G,D,$){for(var z=D;z<$;z++)B.push(G[z])}function T(B){for(var G=0,D=B,$=1;$<B.length;++$)(D[$][1]<D[G][1]||D[$][1]===D[G][1]&&D[$][0]>D[G][0])&&(G=$);return v(p(B,G-1),p(B,G),p(B,G+1))?!1:(C(B),!0)}function C(B){for(var G=[],D=B.length,$=0;$!==D;$++)G.push(B.pop());for(var $=0;$!==D;$++)B[$]=G[$]}function E(B,G){return o(p(B,G-1),p(B,G),p(B,G+1))}var A=[],w=[];function b(B,G,D){var $,z,H=A,Y=w;if(u(p(B,G+1),p(B,G),p(B,D))&&c(p(B,G-1),p(B,G),p(B,D)))return!1;z=h(p(B,G),p(B,D));for(var Z=0;Z!==B.length;++Z)if(!((Z+1)%B.length===G||Z===G)&&u(p(B,G),p(B,D),p(B,Z+1))&&c(p(B,G),p(B,D),p(B,Z))&&(H[0]=p(B,G),H[1]=p(B,D),Y[0]=p(B,Z),Y[1]=p(B,Z+1),$=g(H,Y),h(p(B,G),$)<z))return!1;return!0}function I(B,G,D){for(var $=0;$!==B.length;++$)if(!($===G||$===D||($+1)%B.length===G||($+1)%B.length===D)&&e(p(B,G),p(B,D),p(B,$),p(B,$+1)))return!1;return!0}function R(B,G,D,$){var z=$||[];if(y(z),G<D)for(var H=G;H<=D;H++)z.push(B[H]);else{for(var H=0;H<=D;H++)z.push(B[H]);for(var H=G;H<B.length;H++)z.push(B[H])}return z}function N(B){for(var G=[],D=[],$=[],z=[],H=Number.MAX_VALUE,Y=0;Y<B.length;++Y)if(E(B,Y)){for(var Z=0;Z<B.length;++Z)if(b(B,Y,Z)){D=N(R(B,Y,Z,z)),$=N(R(B,Z,Y,z));for(var Q=0;Q<$.length;Q++)D.push($[Q]);D.length<H&&(G=D,H=D.length,G.push([p(B,Y),p(B,Z)]))}}return G}function F(B){var G=N(B);return G.length>0?P(B,G):[B]}function P(B,G){if(G.length===0)return[B];if(G instanceof Array&&G.length&&G[0]instanceof Array&&G[0].length===2&&G[0][0]instanceof Array){for(var D=[B],$=0;$<G.length;$++)for(var z=G[$],H=0;H<D.length;H++){var Y=D[H],Z=P(Y,z);if(Z){D.splice(H,1),D.push(Z[0],Z[1]);break}}return D}else{var z=G,$=B.indexOf(z[0]),H=B.indexOf(z[1]);return $!==-1&&H!==-1?[R(B,$,H),R(B,H,$)]:!1}}function O(B){var G=B,D;for(D=0;D<G.length-1;D++)for(var $=0;$<D-1;$++)if(e(G[D],G[D+1],G[$],G[$+1]))return!1;for(D=1;D<G.length-2;D++)if(e(G[0],G[G.length-1],G[D],G[D+1]))return!1;return!0}function M(B,G,D,$,z){z=z||0;var H=G[1]-B[1],Y=B[0]-G[0],Z=H*B[0]+Y*B[1],Q=$[1]-D[1],tt=D[0]-$[0],et=Q*D[0]+tt*D[1],lt=H*tt-Q*Y;return W(lt,0,z)?[0,0]:[(tt*Z-Y*et)/lt,(H*et-Q*Z)/lt]}function L(B,G,D,$,z,H,Y){H=H||100,Y=Y||0,z=z||25,G=typeof G<"u"?G:[],D=D||[],$=$||[];var Z=[0,0],Q=[0,0],tt=[0,0],et=0,lt=0,ut=0,ct=0,ht=0,gt=0,yt=0,Et=[],bt=[],pt=B,wt=B;if(wt.length<3)return G;if(Y++,Y>H)return console.warn("quickDecomp: max level ("+H+") reached."),G;for(var Tt=0;Tt<B.length;++Tt)if(E(pt,Tt)){D.push(pt[Tt]),et=lt=Number.MAX_VALUE;for(var Gt=0;Gt<B.length;++Gt)v(p(pt,Tt-1),p(pt,Tt),p(pt,Gt))&&c(p(pt,Tt-1),p(pt,Tt),p(pt,Gt-1))&&(tt=M(p(pt,Tt-1),p(pt,Tt),p(pt,Gt),p(pt,Gt-1)),o(p(pt,Tt+1),p(pt,Tt),tt)&&(ut=h(pt[Tt],tt),ut<lt&&(lt=ut,Q=tt,gt=Gt))),v(p(pt,Tt+1),p(pt,Tt),p(pt,Gt+1))&&c(p(pt,Tt+1),p(pt,Tt),p(pt,Gt))&&(tt=M(p(pt,Tt+1),p(pt,Tt),p(pt,Gt),p(pt,Gt+1)),v(p(pt,Tt-1),p(pt,Tt),tt)&&(ut=h(pt[Tt],tt),ut<et&&(et=ut,Z=tt,ht=Gt)));if(gt===(ht+1)%B.length)tt[0]=(Q[0]+Z[0])/2,tt[1]=(Q[1]+Z[1])/2,$.push(tt),Tt<ht?(x(Et,pt,Tt,ht+1),Et.push(tt),bt.push(tt),gt!==0&&x(bt,pt,gt,pt.length),x(bt,pt,0,Tt+1)):(Tt!==0&&x(Et,pt,Tt,pt.length),x(Et,pt,0,ht+1),Et.push(tt),bt.push(tt),x(bt,pt,gt,Tt+1));else{if(gt>ht&&(ht+=B.length),ct=Number.MAX_VALUE,ht<gt)return G;for(var Gt=gt;Gt<=ht;++Gt)u(p(pt,Tt-1),p(pt,Tt),p(pt,Gt))&&c(p(pt,Tt+1),p(pt,Tt),p(pt,Gt))&&(ut=h(p(pt,Tt),p(pt,Gt)),ut<ct&&I(pt,Tt,Gt)&&(ct=ut,yt=Gt%B.length));Tt<yt?(x(Et,pt,Tt,yt+1),yt!==0&&x(bt,pt,yt,wt.length),x(bt,pt,0,Tt+1)):(Tt!==0&&x(Et,pt,Tt,wt.length),x(Et,pt,0,yt+1),x(bt,pt,yt,Tt+1))}return Et.length<bt.length?(L(Et,G,D,$,z,H,Y),L(bt,G,D,$,z,H,Y)):(L(bt,G,D,$,z,H,Y),L(Et,G,D,$,z,H,Y)),G}return G.push(B),G}function k(B,G){for(var D=0,$=B.length-1;B.length>3&&$>=0;--$)m(p(B,$-1),p(B,$),p(B,$+1),G)&&(B.splice($%B.length,1),D++);return D}function V(B,G){for(var D=B.length-1;D>=1;--D)for(var $=B[D],z=D-1;z>=0;--z)if(K($,B[z],G)){B.splice(D,1);continue}}function W(B,G,D){return D=D||0,Math.abs(B-G)<=D}function K(B,G,D){return W(B[0],G[0],D)&&W(B[1],G[1],D)}},88257:(i,g,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=e(56694),v=new a({initialize:function(o){this.pluginManager=o,this.game=o.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});i.exports=v},18360:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};i.exports=g},91963:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={},e={},a={};a.register=function(v,u,o,c){c===void 0&&(c=!1),g[v]={plugin:u,mapping:o,custom:c}},a.registerCustom=function(v,u,o,c){e[v]={plugin:u,mapping:o,data:c}},a.hasCore=function(v){return g.hasOwnProperty(v)},a.hasCustom=function(v){return e.hasOwnProperty(v)},a.getCore=function(v){return g[v]},a.getCustom=function(v){return e[v]},a.getCustomClass=function(v){return e.hasOwnProperty(v)?e[v].plugin:null},a.remove=function(v){g.hasOwnProperty(v)&&delete g[v]},a.removeCustom=function(v){e.hasOwnProperty(v)&&delete e[v]},a.destroyCorePlugins=function(){for(var v in g)g.hasOwnProperty(v)&&delete g[v]},a.destroyCustomPlugins=function(){for(var v in e)e.hasOwnProperty(v)&&delete e[v]},i.exports=a},49274:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(97081),u=e(6659),o=e(76846),c=e(99325),l=e(61286),f=e(72632),m=e(91963),h=e(66458),p=new a({Extends:u,initialize:function(x){u.call(this),this.game=x,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],x.isBooted?this.boot():x.events.once(v.BOOT,this.boot,this)},boot:function(){var y,x,T,C,E,A,w,b=this.game.config,I=b.installGlobalPlugins;for(I=I.concat(this._pendingGlobal),y=0;y<I.length;y++)x=I[y],T=f(x,"key",null),C=f(x,"plugin",null),E=f(x,"start",!1),A=f(x,"mapping",null),w=f(x,"data",null),T&&(C?this.install(T,C,E,A,w):console.warn("Missing `plugin` for key: "+T));for(I=b.installScenePlugins,I=I.concat(this._pendingScene),y=0;y<I.length;y++)x=I[y],T=f(x,"key",null),C=f(x,"plugin",null),A=f(x,"mapping",null),T&&(C?this.installScenePlugin(T,C,A):console.warn("Missing `plugin` for key: "+T));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(v.DESTROY,this.destroy,this)},addToScene:function(y,x,T){var C,E,A,w=this.game,b=y.scene,I=y.settings.map,R=y.settings.isBooted;for(C=0;C<x.length;C++)E=x[C],w[E]?(y[E]=w[E],I.hasOwnProperty(E)&&(b[I[E]]=y[E])):E==="game"&&I.hasOwnProperty(E)&&(b[I[E]]=w);for(var N=0;N<T.length;N++)for(A=T[N],C=0;C<A.length;C++)if(E=A[C],!!m.hasCore(E)){var F=m.getCore(E),P=F.mapping,O=new F.plugin(b,this,P);y[P]=O,F.custom?b[P]=O:I.hasOwnProperty(P)&&(b[I[P]]=O),R&&O.boot()}for(A=this.plugins,C=0;C<A.length;C++){var M=A[C];M.mapping&&(b[M.mapping]=M.plugin)}},getDefaultScenePlugins:function(){var y=this.game.config.defaultPlugins;return y=y.concat(this.scenePlugins),y},installScenePlugin:function(y,x,T,C,E){if(E===void 0&&(E=!1),typeof x!="function"){console.warn("Invalid Scene Plugin: "+y);return}if(m.hasCore(y)||m.register(y,x,T,!0),this.scenePlugins.indexOf(y)===-1)this.scenePlugins.push(y);else if(!E&&m.hasCore(y)){console.warn("Scene Plugin key in use: "+y);return}if(C){var A=new x(C,this,y);C.sys[y]=A,T&&T!==""&&(C[T]=A),A.boot()}},install:function(y,x,T,C,E){if(T===void 0&&(T=!1),C===void 0&&(C=null),E===void 0&&(E=null),typeof x!="function")return console.warn("Invalid Plugin: "+y),null;if(m.hasCustom(y))return console.warn("Plugin key in use: "+y),null;if(C!==null&&(T=!0),!this.game.isBooted)this._pendingGlobal.push({key:y,plugin:x,start:T,mapping:C,data:E});else if(m.registerCustom(y,x,C,E),T)return this.start(y);return null},getIndex:function(y){for(var x=this.plugins,T=0;T<x.length;T++){var C=x[T];if(C.key===y)return T}return-1},getEntry:function(y){var x=this.getIndex(y);if(x!==-1)return this.plugins[x]},isActive:function(y){var x=this.getEntry(y);return x&&x.active},start:function(y,x){x===void 0&&(x=y);var T=this.getEntry(x);return T&&!T.active?(T.active=!0,T.plugin.start()):T||(T=this.createEntry(y,x)),T?T.plugin:null},createEntry:function(y,x){var T=m.getCustom(y);if(T){var C=new T.plugin(this);T={key:x,plugin:C,active:!0,mapping:T.mapping,data:T.data},this.plugins.push(T),C.init(T.data),C.start()}return T},stop:function(y){var x=this.getEntry(y);return x&&x.active&&(x.active=!1,x.plugin.stop()),this},get:function(y,x){x===void 0&&(x=!0);var T=this.getEntry(y);if(T)return T.plugin;var C=this.getClass(y);return C&&x?(T=this.createEntry(y,y),T?T.plugin:null):C||null},getClass:function(y){return m.getCustomClass(y)},removeGlobalPlugin:function(y){var x=this.getEntry(y);x&&h(this.plugins,x),m.removeCustom(y)},removeScenePlugin:function(y){h(this.scenePlugins,y),m.remove(y)},registerGameObject:function(y,x,T){return x&&l.register(y,x),T&&c.register(y,T),this},removeGameObject:function(y,x,T){return x===void 0&&(x=!0),T===void 0&&(T=!0),x&&l.remove(y),T&&c.remove(y),this},registerFileType:function(y,x,T){o.register(y,x),T&&T.sys.load&&(T.sys.load[y]=x)},destroy:function(){for(var y=0;y<this.plugins.length;y++)this.plugins[y].plugin.destroy();m.destroyCustomPlugins(),this.game.noReturn&&m.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});i.exports=p},39283:(i,g,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var a=e(88257),v=e(56694),u=e(7599),o=new v({Extends:a,initialize:function(l,f,m){a.call(this,f),this.scene=l,this.systems=l.sys,this.pluginKey=m,l.sys.events.once(u.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});i.exports=o},45615:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={BasePlugin:e(88257),DefaultPlugins:e(18360),PluginCache:e(91963),PluginManager:e(49274),ScenePlugin:e(39283)}},75205:()=>{!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(i){const g=performance.now(),e=this.getVideoPlaybackQuality(),a=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,v=(u,o)=>{const c=this.getVideoPlaybackQuality(),l=this.mozPresentedFrames||this.mozPaintedFrames||c.totalVideoFrames-c.droppedVideoFrames;if(l>a){const f=this.mozFrameDelay||c.totalFrameDelay-e.totalFrameDelay||0,m=o-u;i(o,{presentationTime:o+f*1e3,expectedDisplayTime:o+m,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+m/1e3,presentedFrames:l,processingDuration:f}),delete this._rvfcpolyfillmap[g]}else this._rvfcpolyfillmap[g]=requestAnimationFrame(f=>v(o,f))};return this._rvfcpolyfillmap[g]=requestAnimationFrame(u=>v(g,u)),g},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(i){cancelAnimationFrame(this._rvfcpolyfillmap[i]),delete this._rvfcpolyfillmap[i]})},95723:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},27394:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={DEFAULT:0,LINEAR:0,NEAREST:1};i.exports=g},91135:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(89787),v=e(61840),u=e(56694),o=e(86459),c=e(6659),l=e(81044),f=e(32834),m=e(40444),h=e(38203),p=e(69360),y=new u({Extends:c,initialize:function(T){c.call(this);var C=T.config;this.config={clearBeforeRender:C.clearBeforeRender,backgroundColor:C.backgroundColor,antialias:C.antialias,roundPixels:C.roundPixels},this.game=T,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=T.canvas;var E={alpha:T.config.transparent,desynchronized:T.config.desynchronized,willReadFrequently:!1};this.gameContext=C.context?C.context:this.gameCanvas.getContext("2d",E),this.currentContext=this.gameContext,this.antialias=T.config.antialias,this.blendModes=f(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(h.READY,this.boot,this)},boot:function(){var x=this.game,T=x.scale.baseSize;this.width=T.width,this.height=T.height,this.isBooted=!0,x.scale.on(m.RESIZE,this.onResize,this),this.resize(T.width,T.height)},onResize:function(x,T){(T.width!==this.width||T.height!==this.height)&&this.resize(T.width,T.height)},resize:function(x,T){this.width=x,this.height=T,this.emit(l.RESIZE,x,T)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(x){return this.currentContext.globalCompositeOperation=x,this},setContext:function(x){return this.currentContext=x||this.gameContext,this},setAlpha:function(x){return this.currentContext.globalAlpha=x,this},preRender:function(){var x=this.gameContext,T=this.config,C=this.width,E=this.height;x.globalAlpha=1,x.globalCompositeOperation="source-over",x.setTransform(1,0,0,1,0,0),T.clearBeforeRender&&(x.clearRect(0,0,C,E),T.transparent||(x.fillStyle=T.backgroundColor.rgba,x.fillRect(0,0,C,E))),x.save(),this.drawCount=0,this.emit(l.PRE_RENDER)},render:function(x,T,C){var E=T.length;this.emit(l.RENDER,x,C);var A=C.x,w=C.y,b=C.width,I=C.height,R=C.renderToTexture?C.context:x.sys.context;R.save(),this.game.scene.customViewports&&(R.beginPath(),R.rect(A,w,b,I),R.clip()),C.emit(a.PRE_RENDER,C),this.currentContext=R;var N=C.mask;N&&N.preRenderCanvas(this,null,C._maskCamera),C.transparent||(R.fillStyle=C.backgroundColor.rgba,R.fillRect(A,w,b,I)),R.globalAlpha=C.alpha,R.globalCompositeOperation="source-over",this.drawCount+=E,C.renderToTexture&&C.emit(a.PRE_RENDER,C),C.matrix.copyToContext(R);for(var F=0;F<E;F++){var P=T[F];P.mask&&P.mask.preRenderCanvas(this,P,C),P.renderCanvas(this,P,C),P.mask&&P.mask.postRenderCanvas(this,P,C)}R.setTransform(1,0,0,1,0,0),R.globalCompositeOperation="source-over",R.globalAlpha=1,C.flashEffect.postRenderCanvas(R),C.fadeEffect.postRenderCanvas(R),C.dirty=!1,N&&N.postRenderCanvas(this),R.restore(),C.renderToTexture&&(C.emit(a.POST_RENDER,C),C.renderToGame&&x.sys.context.drawImage(C.canvas,A,w)),C.emit(a.POST_RENDER,C)},postRender:function(){var x=this.gameContext;x.restore(),this.emit(l.POST_RENDER);var T=this.snapshotState;T.callback&&(v(this.gameCanvas,T),T.callback=null)},snapshotCanvas:function(x,T,C,E,A,w,b,I,R){C===void 0&&(C=!1),this.snapshotArea(E,A,w,b,T,I,R);var N=this.snapshotState;return N.getPixel=C,v(x,N),N.callback=null,this},snapshot:function(x,T,C){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,x,T,C)},snapshotArea:function(x,T,C,E,A,w,b){var I=this.snapshotState;return I.callback=A,I.type=w,I.encoder=b,I.getPixel=!1,I.x=x,I.y=T,I.width=Math.min(C,this.gameCanvas.width),I.height=Math.min(E,this.gameCanvas.height),this},snapshotPixel:function(x,T,C){return this.snapshotArea(x,T,1,1,C),this.snapshotState.getPixel=!0,this},batchSprite:function(x,T,C,E){var A=C.alpha*x.alpha;if(A!==0){var w=this.currentContext,b=this._tempMatrix1,I=this._tempMatrix2,R=T.canvasData,N=R.x,F=R.y,P=T.cutWidth,O=T.cutHeight,M=T.customPivot,L=T.source.resolution,k=x.displayOriginX,V=x.displayOriginY,W=-k+T.x,K=-V+T.y;if(x.isCropped){var B=x._crop;(B.flipX!==x.flipX||B.flipY!==x.flipY)&&T.updateCropUVs(B,x.flipX,x.flipY),P=B.cw,O=B.ch,N=B.cx,F=B.cy,W=-k+B.x,K=-V+B.y,x.flipX&&(W>=0?W=-(W+P):W<0&&(W=Math.abs(W)-P)),x.flipY&&(K>=0?K=-(K+O):K<0&&(K=Math.abs(K)-O))}var G=1,D=1;x.flipX&&(M||(W+=-T.realWidth+k*2),G=-1),x.flipY&&(M||(K+=-T.realHeight+V*2),D=-1);var $=x.x,z=x.y;C.roundPixels&&($=Math.floor($),z=Math.floor(z)),I.applyITRS($,z,x.rotation,x.scaleX*G,x.scaleY*D),b.copyFrom(C.matrix),E?(b.multiplyWithOffset(E,-C.scrollX*x.scrollFactorX,-C.scrollY*x.scrollFactorY),I.e=$,I.f=z):(I.e-=C.scrollX*x.scrollFactorX,I.f-=C.scrollY*x.scrollFactorY),b.multiply(I),C.roundPixels&&(b.e=Math.round(b.e),b.f=Math.round(b.f)),w.save(),b.setToContext(w),w.globalCompositeOperation=this.blendModes[x.blendMode],w.globalAlpha=A,w.imageSmoothingEnabled=!T.source.scaleMode,x.mask&&x.mask.preRenderCanvas(this,x,C),P>0&&O>0&&w.drawImage(T.source.image,N,F,P,O,W,K,P/L,O/L),x.mask&&x.mask.postRenderCanvas(this,x,C),w.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});i.exports=y},6046:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CanvasRenderer:e(91135),GetBlendModes:e(32834),SetTransform:e(49584)}},32834:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95723),v=e(98581),u=function(){var o=[],c=v.supportNewBlendModes,l="source-over";return o[a.NORMAL]=l,o[a.ADD]="lighter",o[a.MULTIPLY]=c?"multiply":l,o[a.SCREEN]=c?"screen":l,o[a.OVERLAY]=c?"overlay":l,o[a.DARKEN]=c?"darken":l,o[a.LIGHTEN]=c?"lighten":l,o[a.COLOR_DODGE]=c?"color-dodge":l,o[a.COLOR_BURN]=c?"color-burn":l,o[a.HARD_LIGHT]=c?"hard-light":l,o[a.SOFT_LIGHT]=c?"soft-light":l,o[a.DIFFERENCE]=c?"difference":l,o[a.EXCLUSION]=c?"exclusion":l,o[a.HUE]=c?"hue":l,o[a.SATURATION]=c?"saturation":l,o[a.COLOR]=c?"color":l,o[a.LUMINOSITY]=c?"luminosity":l,o[a.ERASE]="destination-out",o[a.SOURCE_IN]="source-in",o[a.SOURCE_OUT]="source-out",o[a.SOURCE_ATOP]="source-atop",o[a.DESTINATION_OVER]="destination-over",o[a.DESTINATION_IN]="destination-in",o[a.DESTINATION_OUT]="destination-out",o[a.DESTINATION_ATOP]="destination-atop",o[a.LIGHTER]="lighter",o[a.COPY]="copy",o[a.XOR]="xor",o};i.exports=u},49584:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(73329),v=function(u,o,c,l,f){var m=l.alpha*c.alpha;if(m<=0)return!1;var h=a(c,l,f).calc;return o.globalCompositeOperation=u.blendModes[c.blendMode],o.globalAlpha=m,o.save(),h.setToContext(o),o.imageSmoothingEnabled=c.frame?!c.frame.source.scaleMode:u.antialias,!0};i.exports=v},70936:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="postrender"},99298:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="prerender"},7743:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="render"},99519:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resize"},81044:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={POST_RENDER:e(70936),PRE_RENDER:e(99298),RENDER:e(7743),RESIZE:e(99519)}},42069:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Canvas:e(6046),Events:e(81044),Snapshot:e(95528),WebGL:e(55478)}},61840:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61068),v=e(27119),u=e(72632),o=function(c,l){var f=u(l,"callback"),m=u(l,"type","image/png"),h=u(l,"encoder",.92),p=Math.abs(Math.round(u(l,"x",0))),y=Math.abs(Math.round(u(l,"y",0))),x=Math.floor(u(l,"width",c.width)),T=Math.floor(u(l,"height",c.height)),C=u(l,"getPixel",!1);if(C){var E=c.getContext("2d",{willReadFrequently:!1}),A=E.getImageData(p,y,1,1),w=A.data;f.call(null,new v(w[0],w[1],w[2],w[3]))}else if(p!==0||y!==0||x!==c.width||T!==c.height){var b=a.createWebGL(this,x,T),I=b.getContext("2d",{willReadFrequently:!0});x>0&&T>0&&I.drawImage(c,p,y,x,T,0,0,x,T);var R=new Image;R.onerror=function(){f.call(null),a.remove(b)},R.onload=function(){f.call(null,R),a.remove(b)},R.src=b.toDataURL(m,h)}else{var N=new Image;N.onerror=function(){f.call(null)},N.onload=function(){f.call(null,N)},N.src=c.toDataURL(m,h)}};i.exports=o},1217:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61068),v=e(27119),u=e(72632),o=function(c,l){var f=c,m=u(l,"callback"),h=u(l,"type","image/png"),p=u(l,"encoder",.92),y=Math.abs(Math.round(u(l,"x",0))),x=Math.abs(Math.round(u(l,"y",0))),T=u(l,"getPixel",!1),C=u(l,"isFramebuffer",!1),E=C?u(l,"bufferWidth",1):f.drawingBufferWidth,A=C?u(l,"bufferHeight",1):f.drawingBufferHeight;if(T){var w=new Uint8Array(4),b=C?x:A-x;f.readPixels(y,b,1,1,f.RGBA,f.UNSIGNED_BYTE,w),m.call(null,new v(w[0],w[1],w[2],w[3]))}else{var I=Math.floor(u(l,"width",E)),R=Math.floor(u(l,"height",A)),N=I*R*4,F=new Uint8Array(N);f.readPixels(y,A-x-R,I,R,f.RGBA,f.UNSIGNED_BYTE,F);for(var P=a.createWebGL(this,I,R),O=P.getContext("2d",{willReadFrequently:!0}),M=O.getImageData(0,0,I,R),L=M.data,k=0;k<R;k++)for(var V=0;V<I;V++){var W=((R-k-1)*I+V)*4,K=C?N-(k*I+(I-V))*4:(k*I+V)*4;L[K+0]=F[W+0],L[K+1]=F[W+1],L[K+2]=F[W+2],L[K+3]=F[W+3]}O.putImageData(M,0,0);var B=new Image;B.onerror=function(){m.call(null),a.remove(P)},B.onload=function(){m.call(null,B),a.remove(P)},B.src=P.toDataURL(h,p)}};i.exports=o},95528:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Canvas:e(61840),WebGL:e(1217)}},35217:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(65641),u=e(33885),o=e(77290),c=e(72632),l=e(37410),f=e(82127),m=e(5583),h=e(58136),p=e(47406),y=e(81828),x=e(66901),T=e(71264),C=e(77310),E=e(10919),A=e(21213),w=e(51212),b=e(60848),I=new a({initialize:function(N){this.game=N.game,this.renderer=N,this.classes=new u([[v.UTILITY_PIPELINE,b],[v.MULTI_PIPELINE,C],[v.BITMAPMASK_PIPELINE,m],[v.SINGLE_PIPELINE,w],[v.ROPE_PIPELINE,A],[v.LIGHT_PIPELINE,x],[v.POINTLIGHT_PIPELINE,E],[v.MOBILE_PIPELINE,T],[v.FX_PIPELINE,y]]),this.postPipelineClasses=new u([[String(p.BARREL),h.Barrel],[String(p.BLOOM),h.Bloom],[String(p.BLUR),h.Blur],[String(p.BOKEH),h.Bokeh],[String(p.CIRCLE),h.Circle],[String(p.COLOR_MATRIX),h.ColorMatrix],[String(p.DISPLACEMENT),h.Displacement],[String(p.GLOW),h.Glow],[String(p.GRADIENT),h.Gradient],[String(p.PIXELATE),h.Pixelate],[String(p.SHADOW),h.Shadow],[String(p.SHINE),h.Shine],[String(p.VIGNETTE),h.Vignette],[String(p.WIPE),h.Wipe]]),this.pipelines=new u,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(R,N,F){var P=this.renderer,O=this.renderTargets;this.frameInc=Math.floor(c(R,"frameInc",32));for(var M=P.width,L=P.height,k=Math.min(M,L),V=Math.ceil(k/this.frameInc),W=1;W<V;W++){var K=W*this.frameInc;O.push(new l(P,K,K)),O.push(new l(P,K,K)),O.push(new l(P,K,K)),this.maxDimension=K}O.push(new l(P,M,L,1,0,!0,!0)),O.push(new l(P,M,L,1,0,!0,!0)),O.push(new l(P,M,L,1,0,!0,!0));var B,G,D=this,$=this.game;if(this.classes.each(function(H,Y){B=D.add(H,new Y({game:$})),H===v.UTILITY_PIPELINE&&(D.UTILITY_PIPELINE=B,D.fullFrame1=B.fullFrame1,D.fullFrame2=B.fullFrame2,D.halfFrame1=B.halfFrame1,D.halfFrame2=B.halfFrame2)}),this.MULTI_PIPELINE=this.get(v.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(v.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(v.MOBILE_PIPELINE),this.FX_PIPELINE=this.get(v.FX_PIPELINE),R)for(G in R){var z=R[G];B=new z($),B.name=G,B.isPostFX?this.postPipelineClasses.set(G,z):this.has(G)||(this.classes.set(G,z),this.add(G,B))}this.default=this.get(N),F&&!o.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(R){var N=this.get(R);return N&&(this.default=N),N},add:function(R,N){if(N.isPostFX){console.warn(R+" is a Post Pipeline. Use `addPostPipeline` instead");return}var F=this.pipelines,P=this.renderer;return F.has(R)?console.warn("Pipeline exists: "+R):(N.name=R,N.manager=this,F.set(R,N)),N.hasBooted||N.boot(),P.width!==0&&P.height!==0&&!N.isPreFX&&N.resize(P.width,P.height),N},addPostPipeline:function(R,N){this.postPipelineClasses.has(R)||this.postPipelineClasses.set(R,N)},flush:function(){this.current&&this.current.flush()},has:function(R){var N=this.pipelines;return typeof R=="string"?N.has(R):!!N.contains(R)},get:function(R){var N=this.pipelines;if(typeof R=="string")return N.get(R);if(N.contains(R))return R},getPostPipeline:function(R,N,F){var P=this.postPipelineClasses,O,M="",L=typeof R;if(L==="string"||L==="number"?(O=P.get(R),M=R):L==="function"?(P.contains(R)&&(O=R),M=R.name):L==="object"&&(O=P.get(R.name),M=R.name),O){var k=new O(this.game,F);return k.name=M,N&&(k.gameObject=N),k}},remove:function(R,N,F){N===void 0&&(N=!0),F===void 0&&(F=!0),this.pipelines.delete(R),N&&this.classes.delete(R),F&&this.postPipelineClasses.delete(R)},set:function(R,N,F){if(!R.isPostFX)return this.isCurrent(R,F)||(this.flush(),this.current&&this.current.unbind(),this.current=R,R.bind(F)),R.updateProjectionMatrix(),R.onBind(N),R},preBatch:function(R){if(R.hasPostPipeline){this.flush();for(var N=R.postPipelines,F=N.length-1;F>=0;F--){var P=N[F];P.active&&P.preBatch(R)}}},postBatch:function(R){if(R.hasPostPipeline){this.flush();for(var N=R.postPipelines,F=0;F<N.length;F++){var P=N[F];P.active&&P.postBatch(R)}}},preBatchCamera:function(R){if(R.hasPostPipeline){this.flush();for(var N=R.postPipelines,F=N.length-1;F>=0;F--){var P=N[F];P.active&&P.preBatch(R)}}},postBatchCamera:function(R){if(R.hasPostPipeline){this.flush();for(var N=R.postPipelines,F=0;F<N.length;F++){var P=N[F];P.active&&P.postBatch(R)}}},isCurrent:function(R,N){var F=this.renderer,P=this.current;return P&&!N&&(N=P.currentShader),!(P!==R||N.program!==F.currentProgram)},copyFrame:function(R,N,F,P,O){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(R,N,F,P,O),this},copyToGame:function(R){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(R),this},drawFrame:function(R,N,F,P){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(R,N,F,P),this},blendFrames:function(R,N,F,P,O){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(R,N,F,P,O),this},blendFramesAdditive:function(R,N,F,P,O){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(R,N,F,P,O),this},clearFrame:function(R,N){return this.UTILITY_PIPELINE.clearFrame(R,N),this},blitFrame:function(R,N,F,P,O,M){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(R,N,F,P,O,M),this},copyFrameRect:function(R,N,F,P,O,M,L,k){return this.UTILITY_PIPELINE.copyFrameRect(R,N,F,P,O,M,L,k),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(R){return this.UTILITY_PIPELINE.bind(R)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(R){R===void 0&&this.previous&&(R=this.previous);var N=this.renderer,F=N.gl;F.disable(F.DEPTH_TEST),F.disable(F.CULL_FACE),N.hasActiveStencilMask()?F.clear(F.DEPTH_BUFFER_BIT):(F.disable(F.STENCIL_TEST),F.clear(F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT)),F.viewport(0,0,N.width,N.height),N.currentProgram=null,N.setBlendMode(0,!0);var P=N.vaoExtension;P&&P.bindVertexArrayOES(null);var O=this.pipelines.entries;for(var M in O)O[M].glReset=!0;R&&(this.current=R,R.rebind())},clear:function(){var R=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,R.currentProgram=null,R.setBlendMode(0,!0);var N=R.vaoExtension;N&&N.bindVertexArrayOES(null)},getRenderTarget:function(R){var N=this.renderTargets,F=3;if(R>this.maxDimension)return this.targetIndex=N.length-F,N[this.targetIndex];var P=(f(R,this.frameInc,0,!0)-1)*F;return this.targetIndex=P,N[P]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});i.exports=I},37410:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(81044),u=new a({initialize:function(c,l,f,m,h,p,y,x,T){m===void 0&&(m=1),h===void 0&&(h=0),p===void 0&&(p=!0),y===void 0&&(y=!1),x===void 0&&(x=!0),T===void 0&&(T=!0),this.renderer=c,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=m,this.minFilter=h,this.autoClear=p,this.autoResize=!0,this.hasDepthBuffer=x,this.forceClamp=T,this.resize(l,f),y?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(v.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(v.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,c){var l=o*this.scale,f=c*this.scale;if(this.autoResize&&(l!==this.width||f!==this.height)){var m=this.renderer;m.deleteFramebuffer(this.framebuffer),m.deleteTexture(this.texture),o*=this.scale,c*=this.scale,o=Math.round(o),c=Math.round(c),o<=0&&(o=1),c<=0&&(c=1),this.texture=m.createTextureFromSource(null,o,c,this.minFilter,this.forceClamp),this.framebuffer=m.createFramebuffer(o,c,this.texture,this.hasDepthBuffer),this.width=o,this.height=c}return this},bind:function(o,c,l){o===void 0&&(o=!1);var f=this.renderer;if(o&&f.flush(),c&&l&&this.resize(c,l),f.pushFramebuffer(this.framebuffer,!1,!1),o&&this.adjustViewport(),this.autoClear){var m=this.renderer.gl;m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)}f.clearStencilMask()},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(){var o=this.renderer,c=o.gl;o.pushFramebuffer(this.framebuffer),c.disable(c.SCISSOR_TEST),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),o.popFramebuffer(),o.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var c=this.renderer;return o&&c.flush(),c.popFramebuffer()},destroy:function(){var o=this.renderer;o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),o.off(v.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});i.exports=u},75512:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={getTintFromFloats:function(g,e,a,v){var u=(g*255|0)&255,o=(e*255|0)&255,c=(a*255|0)&255,l=(v*255|0)&255;return(l<<24|u<<16|o<<8|c)>>>0},getTintAppendFloatAlpha:function(g,e){var a=(e*255|0)&255;return(a<<24|g)>>>0},getTintAppendFloatAlphaAndSwap:function(g,e){var a=(g>>16|0)&255,v=(g>>8|0)&255,u=(g|0)&255,o=(e*255|0)&255;return(o<<24|u<<16|v<<8|a)>>>0},getFloatsFromUintRGB:function(g){var e=(g>>16|0)&255,a=(g>>8|0)&255,v=(g|0)&255;return[e/255,a/255,v/255]},checkShaderMax:function(g,e){var a=Math.min(16,g.getParameter(g.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?a:Math.min(a,e)},parseFragmentShaderMaxTextures:function(g,e){if(!g)return"";for(var a="",v=0;v<e;v++)v>0&&(a+=`
	else `),v<e-1&&(a+="if (outTexId < "+v+".5)"),a+=`
	{`,a+=`
		texture = texture2D(uMainSampler[`+v+"], outTexCoord);",a+=`
	}`;return g=g.replace(/%count%/gi,e.toString()),g.replace(/%forloop%/gi,a)},setGlowQuality:function(g,e,a,v){return a===void 0&&(a=e.config.glowFXQuality),v===void 0&&(v=e.config.glowFXDistance),g=g.replace(/__SIZE__/gi,(1/a/v).toFixed(7)),g=g.replace(/__DIST__/gi,v.toFixed(0)+".0"),g}}},44775:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(28699),u=e(6659),o=e(18970),c=e(72632),l=e(16650),f=e(81044),m=e(37410),h=e(75512),p=e(71305),y=new a({Extends:u,initialize:function(T){u.call(this);var C=T.game,E=C.renderer,A=E.gl;this.name=c(T,"name","WebGLPipeline"),this.game=C,this.renderer=E,this.manager,this.gl=A,this.view=C.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=c(T,"topology",A.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=c(T,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=T,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var x,T=this.gl,C=this.config,E=this.renderer;this.isPostFX||(this.projectionMatrix=new l().identity());var A=this.renderTargets,w=c(C,"renderTarget",!1);typeof w=="boolean"&&w&&(w=1);var b=E.width,I=E.height;if(typeof w=="number")for(x=0;x<w;x++)A.push(new m(E,b,I,1,0,!0));else if(Array.isArray(w))for(x=0;x<w.length;x++){var R=c(w[x],"scale",1),N=c(w[x],"minFilter",0),F=c(w[x],"autoClear",1),P=c(w[x],"width",null),O=c(w[x],"height",P);P?A.push(new m(E,P,O,1,N,F)):A.push(new m(E,b,I,R,N,F))}A.length&&(this.currentRenderTarget=A[0]),this.setShadersFromConfig(C);var M=this.shaders,L=0;for(x=0;x<M.length;x++)M[x].vertexSize>L&&(L=M[x].vertexSize);var k=c(C,"batchSize",E.config.batchSize);this.vertexCapacity=k*6;var V=new ArrayBuffer(this.vertexCapacity*L);this.vertexData=V,this.bytes=new Uint8Array(V),this.vertexViewF32=new Float32Array(V),this.vertexViewU32=new Uint32Array(V);var W=c(C,"vertices",null);for(W?(this.vertexViewF32.set(W),this.vertexBuffer=E.createVertexBuffer(V,T.STATIC_DRAW)):this.vertexBuffer=E.createVertexBuffer(V.byteLength,T.DYNAMIC_DRAW),this.setVertexBuffer(),x=M.length-1;x>=0;x--)M[x].rebind();this.hasBooted=!0,E.on(f.RESIZE,this.resize,this),E.on(f.PRE_RENDER,this.onPreRender,this),E.on(f.RENDER,this.onRender,this),E.on(f.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(x,T,C){var E=this.renderer;if(x!==this.currentShader||E.currentProgram!==this.currentShader.program){this.flush();var A=this.setVertexBuffer(C);A&&!T&&(T=!0),x.bind(T,!1),this.currentShader=x}return this},getShaderByName:function(x){for(var T=this.shaders,C=0;C<T.length;C++)if(T[C].name===x)return T[C]},setShadersFromConfig:function(x){var T,C=this.shaders,E=this.renderer;for(T=0;T<C.length;T++)C[T].destroy();var A="vertShader",w="fragShader",b="attributes",I=c(x,A,null),R=h.parseFragmentShaderMaxTextures(c(x,w,null),E.maxTextures),N=c(x,b,null),F=c(x,"shaders",[]),P=F.length;if(P===0)I&&R&&(this.shaders=[new p(this,"default",I,R,v(N))]);else{var O=[];for(T=0;T<P;T++){var M=F[T],L,k,V,W;if(typeof M=="string"?(L="default",k=I,V=h.parseFragmentShaderMaxTextures(M,E.maxTextures),W=N):(L=c(M,"name","default"),k=c(M,A,I),V=h.parseFragmentShaderMaxTextures(c(M,w,R),E.maxTextures),W=c(M,b,N)),L==="default"){var K=V.split(`
`),B=K[0].trim();B.indexOf("#define SHADER_NAME")>-1&&(L=B.substring(20))}k&&V&&O.push(new p(this,L,k,V,v(W)))}this.shaders=O}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(x){return this.currentBatch={start:this.vertexCount,count:0,texture:[x],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=x,this.batch.push(this.currentBatch),0},addTextureToBatch:function(x){var T=this.currentBatch;T&&(T.texture.push(x),T.unit++,T.maxUnit++)},pushBatch:function(x){if(!this.currentBatch||this.forceZero&&x!==this.currentTexture)return this.createBatch(x);if(x===this.currentTexture)return this.currentUnit;var T=this.currentBatch,C=T.texture.indexOf(x);return C===-1?T.texture.length===this.renderer.maxTextures?this.createBatch(x):(T.unit++,T.maxUnit++,T.texture.push(x),this.currentUnit=T.unit,this.currentTexture=x,T.unit):(this.currentUnit=C,this.currentTexture=x,C)},setGameObject:function(x,T){return T===void 0&&(T=x.frame),this.pushBatch(T.source.glTexture)},shouldFlush:function(x){return x===void 0&&(x=0),this.vertexCount+x>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(x,T){(x!==this.width||T!==this.height)&&this.flush(),this.width=x,this.height=T;for(var C=this.renderTargets,E=0;E<C.length;E++)C[E].resize(x,T);return this.setProjectionMatrix(x,T),this.emit(o.RESIZE,x,T,this),this.onResize(x,T),this},setProjectionMatrix:function(x,T){var C=this.projectionMatrix;if(!C)return this;this.projectionWidth=x,this.projectionHeight=T,C.ortho(0,x,T,0,-1e3,1e3);for(var E=this.shaders,A="uProjectionMatrix",w=0;w<E.length;w++){var b=E[w];b.hasUniform(A)&&(b.resetUniform(A),b.setMatrix4fv(A,!1,C.val,b))}return this},flipProjectionMatrix:function(x){x===void 0&&(x=!0);var T=this.projectionMatrix;if(!T)return this;var C=this.projectionWidth,E=this.projectionHeight;x?T.ortho(0,C,0,E,-1e3,1e3):T.ortho(0,C,E,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,T.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var x=this.renderer.projectionWidth,T=this.renderer.projectionHeight;(this.projectionWidth!==x||this.projectionHeight!==T)&&this.setProjectionMatrix(x,T)}},bind:function(x){if(x===void 0&&(x=this.currentShader),this.glReset)return this.rebind(x);var T=!1,C=this.gl;return C.getParameter(C.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(C.bindBuffer(C.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,T=!0),x.bind(T),this.currentShader=x,this.activeTextures.length=0,this.emit(o.BIND,this,x),this.onActive(x),this},rebind:function(x){this.activeBuffer=null,this.setVertexBuffer();for(var T=this.shaders,C=T.length-1;C>=0;C--){var E=T[C].rebind();(!x||E===x)&&(this.currentShader=E)}return this.activeTextures.length=0,this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(x){if(x===void 0&&(x=this.vertexBuffer),x!==this.activeBuffer){var T=this.gl;return this.gl.bindBuffer(T.ARRAY_BUFFER,x),this.activeBuffer=x,!0}return!1},preBatch:function(x){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(x),this},postBatch:function(x){return this.onDraw(this.currentRenderTarget),this.onPostBatch(x),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(x){if(x===void 0&&(x=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,x),this.onBeforeFlush(x);var T=this.gl,C=this.vertexCount,E=this.currentShader.vertexSize,A=this.topology;if(this.active){this.setVertexBuffer(),C===this.vertexCapacity?T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.DYNAMIC_DRAW):T.bufferSubData(T.ARRAY_BUFFER,0,this.bytes.subarray(0,C*E));var w,b,I,R=this.batch,N=this.activeTextures;if(this.forceZero)for(N[0]||T.activeTexture(T.TEXTURE0),w=0;w<R.length;w++)b=R[w],I=b.texture[0],N[0]!==I&&(T.bindTexture(T.TEXTURE_2D,I),N[0]=I),T.drawArrays(A,b.start,b.count);else for(w=0;w<R.length;w++){b=R[w];for(var F=0;F<=b.maxUnit;F++)I=b.texture[F],N[F]!==I&&(T.activeTexture(T.TEXTURE0+F),T.bindTexture(T.TEXTURE_2D,I),N[F]=I);T.drawArrays(A,b.start,b.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(o.AFTER_FLUSH,this,x),this.onAfterFlush(x)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(x,T,C,E,A,w,b){var I=this.vertexViewF32,R=this.vertexViewU32,N=this.vertexCount*this.currentShader.vertexComponentCount-1;I[++N]=x,I[++N]=T,I[++N]=C,I[++N]=E,I[++N]=A,I[++N]=w,R[++N]=b,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(x,T,C,E,A,w,b,I,R,N,F,P,O,M,L,k,V,W,K,B){B===void 0&&(B=this.currentUnit);var G=!1;this.shouldFlush(6)&&(this.flush(),G=!0),this.currentBatch||(B=this.setTexture2D(K));var D=this.vertexViewF32,$=this.vertexViewU32,z=this.vertexCount*this.currentShader.vertexComponentCount-1;return D[++z]=T,D[++z]=C,D[++z]=N,D[++z]=F,D[++z]=B,D[++z]=W,$[++z]=M,D[++z]=E,D[++z]=A,D[++z]=N,D[++z]=O,D[++z]=B,D[++z]=W,$[++z]=k,D[++z]=w,D[++z]=b,D[++z]=P,D[++z]=O,D[++z]=B,D[++z]=W,$[++z]=V,D[++z]=T,D[++z]=C,D[++z]=N,D[++z]=F,D[++z]=B,D[++z]=W,$[++z]=M,D[++z]=w,D[++z]=b,D[++z]=P,D[++z]=O,D[++z]=B,D[++z]=W,$[++z]=V,D[++z]=I,D[++z]=R,D[++z]=P,D[++z]=F,D[++z]=B,D[++z]=W,$[++z]=L,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(x),G},batchTri:function(x,T,C,E,A,w,b,I,R,N,F,P,O,M,L,k,V){V===void 0&&(V=this.currentUnit);var W=!1;this.shouldFlush(3)&&(this.flush(),W=!0),this.currentBatch||(V=this.setTexture2D(k));var K=this.vertexViewF32,B=this.vertexViewU32,G=this.vertexCount*this.currentShader.vertexComponentCount-1;return K[++G]=T,K[++G]=C,K[++G]=I,K[++G]=R,K[++G]=V,K[++G]=L,B[++G]=P,K[++G]=E,K[++G]=A,K[++G]=I,K[++G]=F,K[++G]=V,K[++G]=L,B[++G]=O,K[++G]=w,K[++G]=b,K[++G]=N,K[++G]=F,K[++G]=V,K[++G]=L,B[++G]=M,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(x),W},drawFillRect:function(x,T,C,E,A,w,b,I){b===void 0&&(b=this.renderer.whiteTexture),I===void 0&&(I=!0),x=Math.floor(x),T=Math.floor(T);var R=Math.floor(x+C),N=Math.floor(T+E),F=this.setTexture2D(b),P=h.getTintAppendFloatAlphaAndSwap(A,w),O=0,M=0,L=1,k=1;I&&(M=1,k=0),this.batchQuad(null,x,T,x,N,R,N,R,T,O,M,L,k,P,P,P,P,0,b,F)},setTexture2D:function(x){return x===void 0&&(x=this.renderer.whiteTexture),this.pushBatch(x)},bindTexture:function(x,T){T===void 0&&(T=0);var C=this.gl;return C.activeTexture(C.TEXTURE0+T),C.bindTexture(C.TEXTURE_2D,x),this},bindRenderTarget:function(x,T){return this.bindTexture(x.texture,T)},setTime:function(x,T){return this.set1f(x,this.game.loop.getDuration(),T),this},setBoolean:function(x,T,C){return C===void 0&&(C=this.currentShader),C.setBoolean(x,T),this},set1f:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set1f(x,T),this},set2f:function(x,T,C,E){return E===void 0&&(E=this.currentShader),E.set2f(x,T,C),this},set3f:function(x,T,C,E,A){return A===void 0&&(A=this.currentShader),A.set3f(x,T,C,E),this},set4f:function(x,T,C,E,A,w){return w===void 0&&(w=this.currentShader),w.set4f(x,T,C,E,A),this},set1fv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set1fv(x,T),this},set2fv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set2fv(x,T),this},set3fv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set3fv(x,T),this},set4fv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set4fv(x,T),this},set1iv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set1iv(x,T),this},set2iv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set2iv(x,T),this},set3iv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set3iv(x,T),this},set4iv:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set4iv(x,T),this},set1i:function(x,T,C){return C===void 0&&(C=this.currentShader),C.set1i(x,T),this},set2i:function(x,T,C,E){return E===void 0&&(E=this.currentShader),E.set2i(x,T,C),this},set3i:function(x,T,C,E,A){return A===void 0&&(A=this.currentShader),A.set3i(x,T,C,E),this},set4i:function(x,T,C,E,A,w){return w===void 0&&(w=this.currentShader),w.set4i(x,T,C,E,A),this},setMatrix2fv:function(x,T,C,E){return E===void 0&&(E=this.currentShader),E.setMatrix2fv(x,T,C),this},setMatrix3fv:function(x,T,C,E){return E===void 0&&(E=this.currentShader),E.setMatrix3fv(x,T,C),this},setMatrix4fv:function(x,T,C,E){return E===void 0&&(E=this.currentShader),E.setMatrix4fv(x,T,C),this},destroy:function(){this.emit(o.DESTROY,this);var x,T=this.shaders;for(x=0;x<T.length;x++)T[x].destroy();var C=this.renderTargets;for(x=0;x<C.length;x++)C[x].destroy();this.gl.deleteBuffer(this.vertexBuffer);var E=this.renderer;return E.off(f.RESIZE,this.resize,this),E.off(f.PRE_RENDER,this.onPreRender,this),E.off(f.RENDER,this.onRender,this),E.off(f.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});i.exports=y},11857:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66458),v=e(89787),u=e(56694),o=e(86459),c=e(6659),l=e(81044),f=e(28621),m=e(16650),h=e(72283),p=e(35217),y=e(37410),x=e(40444),T=e(38203),C=e(75512),E=e(1217),A=new u({Extends:c,initialize:function(b){c.call(this);var I=b.config,R={alpha:I.transparent,desynchronized:I.desynchronized,depth:!0,antialias:I.antialiasGL,premultipliedAlpha:I.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:I.failIfMajorPerformanceCaveat,powerPreference:I.powerPreference,preserveDrawingBuffer:I.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:I.clearBeforeRender,antialias:I.antialias,backgroundColor:I.backgroundColor,contextCreation:R,roundPixels:I.roundPixels,maxTextures:I.maxTextures,maxTextureSize:I.maxTextureSize,batchSize:I.batchSize,maxLights:I.maxLights,mipmapFilter:I.mipmapFilter},this.game=b,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=b.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=h,this.contextRestoredHandler=h,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(w){var b,I=this.game,R=this.canvas,N=w.backgroundColor;if(I.config.context?b=I.config.context:b=R.getContext("webgl",w.contextCreation)||R.getContext("experimental-webgl",w.contextCreation),!b||b.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=b;var F=this;this.contextLostHandler=function(W){F.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),W.preventDefault()},R.addEventListener("webglcontextlost",this.contextLostHandler,!1),I.context=b;for(var P=0;P<=27;P++)this.blendModes.push({func:[b.ONE,b.ONE_MINUS_SRC_ALPHA],equation:b.FUNC_ADD});this.blendModes[1].func=[b.ONE,b.DST_ALPHA],this.blendModes[2].func=[b.DST_COLOR,b.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[b.ONE,b.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[b.ZERO,b.ONE_MINUS_SRC_ALPHA],equation:b.FUNC_REVERSE_SUBTRACT},this.glFormats=[b.BYTE,b.SHORT,b.UNSIGNED_BYTE,b.UNSIGNED_SHORT,b.FLOAT],this.glFuncMap={mat2:{func:b.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:b.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:b.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:b.uniform1f,length:1},"1fv":{func:b.uniform1fv,length:1},"1i":{func:b.uniform1i,length:1},"1iv":{func:b.uniform1iv,length:1},"2f":{func:b.uniform2f,length:2},"2fv":{func:b.uniform2fv,length:1},"2i":{func:b.uniform2i,length:2},"2iv":{func:b.uniform2iv,length:1},"3f":{func:b.uniform3f,length:3},"3fv":{func:b.uniform3fv,length:1},"3i":{func:b.uniform3i,length:3},"3iv":{func:b.uniform3iv,length:1},"4f":{func:b.uniform4f,length:4},"4fv":{func:b.uniform4fv,length:1},"4i":{func:b.uniform4i,length:4},"4iv":{func:b.uniform4iv,length:1}};var O=b.getSupportedExtensions();(!w.maxTextures||w.maxTextures===-1)&&(w.maxTextures=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS)),w.maxTextureSize||(w.maxTextureSize=b.getParameter(b.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=O;var M="ANGLE_instanced_arrays";this.instancedArraysExtension=O.indexOf(M)>-1?b.getExtension(M):null;var L="OES_vertex_array_object";this.vaoExtension=O.indexOf(L)>-1?b.getExtension(L):null,b.disable(b.DEPTH_TEST),b.disable(b.CULL_FACE),b.enable(b.BLEND),b.clearColor(N.redGL,N.greenGL,N.blueGL,N.alphaGL),w.mipmapFilter!==""&&(this.mipmapFilter=b[w.mipmapFilter]),this.maxTextures=C.checkShaderMax(b,w.maxTextures),this.textureIndexes=[];for(var k=0;k<this.maxTextures;k++){var V=b.createTexture();b.activeTexture(b.TEXTURE0+k),b.bindTexture(b.TEXTURE_2D,V),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(k)}return this.pipelines=new p(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=new m().identity(),I.textures.once(T.READY,this.boot,this),this},boot:function(){var w=this.game,b=this.pipelines,I=w.scale.baseSize,R=I.width,N=I.height;this.width=R,this.height=N,this.isBooted=!0,this.renderTarget=new y(this,R,N,1,0,!0,!0),this.maskTarget=new y(this,R,N,1,0,!0,!0),this.maskSource=new y(this,R,N,1,0,!0,!0);var F=w.config;b.boot(F.pipeline,F.defaultPipeline,F.autoMobilePipeline),this.blankTexture=w.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=w.textures.getFrame("__WHITE").glTexture;var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,null),P.enable(P.SCISSOR_TEST),w.scale.on(x.RESIZE,this.onResize,this),this.resize(R,N)},captureFrame:function(w,b){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(w,b,I){},stopCapture:function(){},onCapture:function(w){},onResize:function(w,b){(b.width!==this.width||b.height!==this.height)&&this.resize(b.width,b.height)},beginCapture:function(w,b){w===void 0&&(w=this.width),b===void 0&&(b=this.height),this.renderTarget.bind(!0,w,b),this.setProjectionMatrix(w,b)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(w,b){var I=this.gl;return this.width=w,this.height=b,this.setProjectionMatrix(w,b),I.viewport(0,0,w,b),this.drawingBufferHeight=I.drawingBufferHeight,I.scissor(0,I.drawingBufferHeight-b,w,b),this.defaultScissor[2]=w,this.defaultScissor[3]=b,this.emit(l.RESIZE,w,b),this},getCompressedTextures:function(){var w="WEBGL_compressed_texture_",b="WEBKIT_"+w,I=function(N,F){var P=N.getExtension(w+F)||N.getExtension(b+F);if(P){var O={};for(var M in P)O[P[M]]=M;return O}},R=this.gl;return{ETC:I(R,"etc"),ETC1:I(R,"etc1"),ATC:I(R,"atc"),ASTC:I(R,"astc"),BPTC:I(R,"bptc"),RGTC:I(R,"rgtc"),PVRTC:I(R,"pvrtc"),S3TC:I(R,"s3tc"),S3TCSRGB:I(R,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(w,b){var I=this.compression[w.toUpperCase()];if(b in I)return I[b]},supportsCompressedTexture:function(w,b){var I=this.compression[w.toUpperCase()];return I?b?b in I:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(w,b){return(w!==this.projectionWidth||b!==this.projectionHeight)&&(this.projectionWidth=w,this.projectionHeight=b,this.projectionMatrix.ortho(0,w,b,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(w){return this.supportedExtensions?this.supportedExtensions.indexOf(w):!1},getExtension:function(w){return this.hasExtension(w)?(w in this.extensions||(this.extensions[w]=this.gl.getExtension(w)),this.extensions[w]):null},flush:function(){this.pipelines.flush()},pushScissor:function(w,b,I,R,N){N===void 0&&(N=this.drawingBufferHeight);var F=this.scissorStack,P=[w,b,I,R];return F.push(P),this.setScissor(w,b,I,R,N),this.currentScissor=P,P},setScissor:function(w,b,I,R,N){N===void 0&&(N=this.drawingBufferHeight);var F=this.gl,P=this.currentScissor,O=I>0&&R>0;if(P&&O){var M=P[0],L=P[1],k=P[2],V=P[3];O=M!==w||L!==b||k!==I||V!==R}O&&(this.flush(),F.scissor(w,N-b-R,I,R))},resetScissor:function(){var w=this.gl;w.enable(w.SCISSOR_TEST);var b=this.currentScissor;if(b){var I=b[0],R=b[1],N=b[2],F=b[3];N>0&&F>0&&w.scissor(I,this.drawingBufferHeight-R-F,N,F)}},popScissor:function(){var w=this.scissorStack;w.pop();var b=w[w.length-1];b&&this.setScissor(b[0],b[1],b[2],b[3]),this.currentScissor=b},hasActiveStencilMask:function(){var w=this.currentMask.mask,b=this.currentCameraMask.mask;return w&&w.isStencil||b&&b.isStencil},resetViewport:function(){var w=this.gl;w.viewport(0,0,this.width,this.height),this.drawingBufferHeight=w.drawingBufferHeight},setBlendMode:function(w,b){b===void 0&&(b=!1);var I=this.gl,R=this.blendModes[w];return b||w!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==w?(this.flush(),I.enable(I.BLEND),I.blendEquation(R.equation),R.func.length>2?I.blendFuncSeparate(R.func[0],R.func[1],R.func[2],R.func[3]):I.blendFunc(R.func[0],R.func[1]),this.currentBlendMode=w,!0):!1},addBlendMode:function(w,b){var I=this.blendModes.push({func:w,equation:b});return I-1},updateBlendMode:function(w,b,I){return this.blendModes[w]&&(this.blendModes[w].func=b,I&&(this.blendModes[w].equation=I)),this},removeBlendMode:function(w){return w>17&&this.blendModes[w]&&this.blendModes.splice(w,1),this},pushFramebuffer:function(w,b,I,R,N){return w===this.currentFramebuffer?this:(this.fboStack.push(w),this.setFramebuffer(w,b,I,R,N))},setFramebuffer:function(w,b,I,R,N){if(b===void 0&&(b=!1),I===void 0&&(I=!0),R===void 0&&(R=null),N===void 0&&(N=!1),w===this.currentFramebuffer)return this;var F=this.gl,P=this.width,O=this.height;return w&&w.renderTexture&&I?(P=w.renderTexture.width,O=w.renderTexture.height):this.flush(),F.bindFramebuffer(F.FRAMEBUFFER,w),I&&F.viewport(0,0,P,O),R&&F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,R,0),N&&(F.clearColor(0,0,0,0),F.clear(F.COLOR_BUFFER_BIT)),b&&(w?(this.drawingBufferHeight=O,this.pushScissor(0,0,P,O)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=w,this},popFramebuffer:function(w,b){w===void 0&&(w=!1),b===void 0&&(b=!0);var I=this.fboStack;I.pop();var R=I[I.length-1];return R||(R=null),this.setFramebuffer(R,w,b),R},restoreFramebuffer:function(w,b){w===void 0&&(w=!1),b===void 0&&(b=!0);var I=this.fboStack,R=I[I.length-1];R||(R=null),this.currentFramebuffer=null,this.setFramebuffer(R,w,b)},setProgram:function(w){return w!==this.currentProgram?(this.flush(),this.gl.useProgram(w),this.currentProgram=w,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(w,b,I,R,N){N===void 0&&(N=!1);var F=this.gl,P=F.NEAREST,O=F.NEAREST,M=F.CLAMP_TO_EDGE,L=null;b=w?w.width:b,I=w?w.height:I;var k=f(b,I);return k&&!N&&(M=F.REPEAT),R===o.ScaleModes.LINEAR&&this.config.antialias&&(P=k&&this.mipmapFilter?this.mipmapFilter:F.LINEAR,O=F.LINEAR),w&&w.compressed&&(P=F.LINEAR,O=F.LINEAR),!w&&typeof b=="number"&&typeof I=="number"?L=this.createTexture2D(0,P,O,M,M,F.RGBA,null,b,I):L=this.createTexture2D(0,P,O,M,M,F.RGBA,w),L},createTexture2D:function(w,b,I,R,N,F,P,O,M,L,k,V){L=L??!0,k===void 0&&(k=!1),V===void 0&&(V=!1);var W=this.gl,K=W.createTexture();W.activeTexture(W.TEXTURE0);var B=W.getParameter(W.TEXTURE_BINDING_2D);W.bindTexture(W.TEXTURE_2D,K),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,b),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,I),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,N),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,R),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L),V&&W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,!0);var G=!1;if(P==null)W.texImage2D(W.TEXTURE_2D,w,F,O,M,0,F,W.UNSIGNED_BYTE,null),G=f(O,M);else if(P.compressed){O=P.width,M=P.height,G=P.generateMipmap;for(var D=0;D<P.mipmaps.length;D++)W.compressedTexImage2D(W.TEXTURE_2D,D,P.internalFormat,P.mipmaps[D].width,P.mipmaps[D].height,0,P.mipmaps[D].data)}else k||(O=P.width,M=P.height),W.texImage2D(W.TEXTURE_2D,w,F,F,W.UNSIGNED_BYTE,P),G=f(O,M);return G&&W.generateMipmap(W.TEXTURE_2D),B&&W.bindTexture(W.TEXTURE_2D,B),K.isAlphaPremultiplied=L,K.isRenderTexture=!1,K.width=O,K.height=M,K},createFramebuffer:function(w,b,I,R){R===void 0&&(R=!0);var N=this.gl,F=N.createFramebuffer(),P=0;if(this.setFramebuffer(F),I.isRenderTexture=!0,I.isAlphaPremultiplied=!1,N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,I,0),P=N.checkFramebufferStatus(N.FRAMEBUFFER),P!==N.FRAMEBUFFER_COMPLETE){var O={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(O[P]||P))}if(F.renderTexture=I,R){var M=N.createRenderbuffer();N.bindRenderbuffer(N.RENDERBUFFER,M),N.renderbufferStorage(N.RENDERBUFFER,N.DEPTH_STENCIL,w,b),N.framebufferRenderbuffer(N.FRAMEBUFFER,N.DEPTH_STENCIL_ATTACHMENT,N.RENDERBUFFER,M)}return this.setFramebuffer(null),F},beginBitmapMask:function(w,b){var I=this.gl;I&&(this.flush(),this.maskTarget.bind(),this.currentCameraMask.mask!==w&&(this.currentMask.mask=w,this.currentMask.camera=b))},drawBitmapMask:function(w,b,I){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),w.renderWebGL(this,w,b),this.maskSource.unbind(!0),this.maskTarget.unbind();var R=this.gl,N=this.getCurrentStencilMask();N?(R.enable(R.STENCIL_TEST),N.mask.applyStencil(this,N.camera,!0)):this.currentMask.mask=null,this.pipelines.set(I),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,this.maskTarget.texture),R.activeTexture(R.TEXTURE1),R.bindTexture(R.TEXTURE_2D,this.maskSource.texture)},createProgram:function(w,b){var I=this.gl,R=I.createProgram(),N=I.createShader(I.VERTEX_SHADER),F=I.createShader(I.FRAGMENT_SHADER);I.shaderSource(N,w),I.shaderSource(F,b),I.compileShader(N),I.compileShader(F);var P=`Shader failed:
`;if(!I.getShaderParameter(N,I.COMPILE_STATUS))throw new Error("Vertex "+P+I.getShaderInfoLog(N));if(!I.getShaderParameter(F,I.COMPILE_STATUS))throw new Error("Fragment "+P+I.getShaderInfoLog(F));if(I.attachShader(R,N),I.attachShader(R,F),I.linkProgram(R),!I.getProgramParameter(R,I.LINK_STATUS))throw new Error("Link "+P+I.getProgramInfoLog(R));return I.useProgram(R),R},createVertexBuffer:function(w,b){var I=this.gl,R=I.createBuffer();return I.bindBuffer(I.ARRAY_BUFFER,R),I.bufferData(I.ARRAY_BUFFER,w,b),I.bindBuffer(I.ARRAY_BUFFER,null),R},createIndexBuffer:function(w,b){var I=this.gl,R=I.createBuffer();return I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,R),I.bufferData(I.ELEMENT_ARRAY_BUFFER,w,b),I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,null),R},deleteTexture:function(w){return w&&this.gl.deleteTexture(w),this},deleteFramebuffer:function(w){if(w){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,w);var I=b.getParameter(b.RENDERBUFFER_BINDING);I&&b.deleteRenderbuffer(I),b.bindFramebuffer(b.FRAMEBUFFER,null),b.deleteFramebuffer(w),a(this.fboStack,w),this.currentFramebuffer===w&&(this.currentFramebuffer=null)}return this},deleteProgram:function(w){return w&&this.gl.deleteProgram(w),this},deleteBuffer:function(w){return this.gl.deleteBuffer(w),this},preRenderCamera:function(w){var b=w.x,I=w.y,R=w.width,N=w.height,F=w.backgroundColor;if(w.emit(v.PRE_RENDER,w),this.pipelines.preBatchCamera(w),this.pushScissor(b,I,R,N),w.mask&&(this.currentCameraMask.mask=w.mask,this.currentCameraMask.camera=w._maskCamera,w.mask.preRenderWebGL(this,w,w._maskCamera)),F.alphaGL>0){var P=this.pipelines.setMulti();P.drawFillRect(b,I,R,N,C.getTintFromFloats(F.blueGL,F.greenGL,F.redGL,1),F.alphaGL)}},getCurrentStencilMask:function(){var w=null,b=this.maskStack,I=this.currentCameraMask;return b.length>0?w=b[b.length-1]:I.mask&&I.mask.isStencil&&(w=I),w},postRenderCamera:function(w){var b=w.flashEffect,I=w.fadeEffect;if(b.isRunning||I.isRunning||I.isComplete){var R=this.pipelines.setMulti();b.postRenderWebGL(R,C.getTintFromFloats),I.postRenderWebGL(R,C.getTintFromFloats)}w.dirty=!1,this.popScissor(),w.mask&&(this.currentCameraMask.mask=null,w.mask.postRenderWebGL(this,w._maskCamera)),this.pipelines.postBatchCamera(w),w.emit(v.POST_RENDER,w)},preRender:function(){if(!this.contextLost){var w=this.gl;if(w.bindFramebuffer(w.FRAMEBUFFER,null),this.config.clearBeforeRender){var b=this.config.backgroundColor;w.clearColor(b.redGL,b.greenGL,b.blueGL,b.alphaGL),w.clear(w.COLOR_BUFFER_BIT|w.DEPTH_BUFFER_BIT|w.STENCIL_BUFFER_BIT)}w.enable(w.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&w.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(l.PRE_RENDER)}},render:function(w,b,I){if(!this.contextLost){var R=b.length;if(this.emit(l.RENDER,w,I),this.preRenderCamera(I),R===0){this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(I);return}this.currentType="";for(var N=this.currentMask,F=0;F<R;F++){this.finalType=F===R-1;var P=b[F],O=P.mask;N=this.currentMask,N.mask&&N.mask!==O&&N.mask.postRenderWebGL(this,N.camera),O&&N.mask!==O&&O.preRenderWebGL(this,P,I),P.blendMode!==this.currentBlendMode&&this.setBlendMode(P.blendMode);var M=P.type;M!==this.currentType&&(this.newType=!0,this.currentType=M),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=b[F+1].type===this.currentType,P.renderWebGL(this,P,I),this.newType=!1}N=this.currentMask,N.mask&&N.mask.postRenderWebGL(this,N.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(I)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(l.POST_RENDER);var w=this.snapshotState;w.callback&&(E(this.gl,w),w.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var w=this.gl,b=this.getCurrentStencilMask();if(b){var I=b.mask;w.enable(w.STENCIL_TEST),I.invertAlpha?w.stencilFunc(w.NOTEQUAL,I.level,255):w.stencilFunc(w.EQUAL,I.level,255)}},snapshot:function(w,b,I){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,w,b,I)},snapshotArea:function(w,b,I,R,N,F,P){var O=this.snapshotState;return O.callback=N,O.type=F,O.encoder=P,O.getPixel=!1,O.x=w,O.y=b,O.width=I,O.height=R,this},snapshotPixel:function(w,b,I){return this.snapshotArea(w,b,1,1,I),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(w,b,I,R,N,F,P,O,M,L,k){N===void 0&&(N=!1),F===void 0&&(F=0),P===void 0&&(P=0),O===void 0&&(O=b),M===void 0&&(M=I),L==="pixel"&&(N=!0,L="image/png");var V=this.currentFramebuffer;this.snapshotArea(F,P,O,M,R,L,k);var W=this.snapshotState;return W.getPixel=N,W.isFramebuffer=!0,W.bufferWidth=b,W.bufferHeight=I,W.width=Math.min(W.width,b),W.height=Math.min(W.height,I),this.setFramebuffer(w),E(this.gl,W),this.setFramebuffer(V),W.callback=null,W.isFramebuffer=!1,this},canvasToTexture:function(w,b,I,R){return I===void 0&&(I=!1),R===void 0&&(R=!1),b?this.updateCanvasTexture(w,b,R):this.createCanvasTexture(w,I,R)},createCanvasTexture:function(w,b,I){b===void 0&&(b=!1),I===void 0&&(I=!1);var R=this.gl,N=R.NEAREST,F=R.NEAREST,P=w.width,O=w.height,M=R.CLAMP_TO_EDGE,L=f(P,O);return!b&&L&&(M=R.REPEAT),this.config.antialias&&(N=L&&this.mipmapFilter?this.mipmapFilter:R.LINEAR,F=R.LINEAR),this.createTexture2D(0,N,F,M,M,R.RGBA,w,P,O,!0,!1,I)},updateCanvasTexture:function(w,b,I){I===void 0&&(I=!1);var R=this.gl,N=w.width,F=w.height;if(N>0&&F>0){R.activeTexture(R.TEXTURE0);var P=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,b),I&&R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,!0),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,w),b.width=N,b.height=F,P&&R.bindTexture(R.TEXTURE_2D,P)}return b},createVideoTexture:function(w,b,I){b===void 0&&(b=!1),I===void 0&&(I=!1);var R=this.gl,N=R.NEAREST,F=R.NEAREST,P=w.videoWidth,O=w.videoHeight,M=R.CLAMP_TO_EDGE,L=f(P,O);return!b&&L&&(M=R.REPEAT),this.config.antialias&&(N=L&&this.mipmapFilter?this.mipmapFilter:R.LINEAR,F=R.LINEAR),this.createTexture2D(0,N,F,M,M,R.RGBA,w,P,O,!0,!0,I)},updateVideoTexture:function(w,b,I){I===void 0&&(I=!1);var R=this.gl,N=w.videoWidth,F=w.videoHeight;if(N>0&&F>0){R.activeTexture(R.TEXTURE0);var P=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,b),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,I),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,w),b.width=N,b.height=F,P&&R.bindTexture(R.TEXTURE_2D,P)}return b},setTextureFilter:function(w,b){var I=this.gl,R=[I.LINEAR,I.NEAREST][b];I.activeTexture(I.TEXTURE0);var N=I.getParameter(I.TEXTURE_BINDING_2D);return I.bindTexture(I.TEXTURE_2D,w),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,R),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,R),N&&I.bindTexture(I.TEXTURE_2D,N),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});i.exports=A},71305:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72632),u=e(71402),o=new a({initialize:function(l,f,m,h,p){this.pipeline=l,this.name=f,this.renderer=l.renderer,this.gl=this.renderer.gl,this.fragSrc=h,this.vertSrc=m,this.program=this.renderer.createProgram(m,h),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(p),this.createUniforms()},createAttributes:function(c){var l=0,f=0,m=[];this.vertexComponentCount=0;for(var h=0;h<c.length;h++){var p=c[h],y=p.name,x=v(p,"size",1),T=v(p,"type",u.FLOAT),C=T.enum,E=T.size,A=!!p.normalized;m.push({name:y,size:x,type:C,normalized:A,offset:f,enabled:!1,location:-1}),E===4?l+=x:l++,f+=x*E}this.vertexSize=f,this.vertexComponentCount=l,this.attributes=m},bind:function(c,l){return c===void 0&&(c=!1),l===void 0&&(l=!1),l&&this.pipeline.flush(),this.renderer.setProgram(this.program),c&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(c){c===void 0&&(c=!1);for(var l=this.gl,f=this.vertexSize,m=this.attributes,h=this.program,p=0;p<m.length;p++){var y=m[p],x=y.size,T=y.type,C=y.offset,E=y.enabled,A=y.location,w=!!y.normalized;if(c){var b=l.getAttribLocation(h,y.name);b>=0?(l.enableVertexAttribArray(b),l.vertexAttribPointer(b,x,T,w,f,C),y.enabled=!0,y.location=b):b!==-1&&l.disableVertexAttribArray(b)}else E?l.vertexAttribPointer(A,x,T,w,f,C):!E&&A>-1&&(l.disableVertexAttribArray(A),y.location=-1)}return this},createUniforms:function(){var c=this.gl,l=this.program,f=this.uniforms,m,h,p,y=c.getProgramParameter(l,c.ACTIVE_UNIFORMS);for(m=0;m<y;m++){var x=c.getActiveUniform(l,m);if(x){h=x.name,p=c.getUniformLocation(l,h),p!==null&&(f[h]={name:h,location:p,value1:null,value2:null,value3:null,value4:null});var T=h.indexOf("[");T>0&&(h=h.substr(0,T),f.hasOwnProperty(h)||(p=c.getUniformLocation(l,h),p!==null&&(f[h]={name:h,location:p,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(c){return this.uniforms.hasOwnProperty(c)},resetUniform:function(c){var l=this.uniforms[c];return l&&(l.value1=null,l.value2=null,l.value3=null,l.value4=null),this},setUniform1:function(c,l,f,m){var h=this.uniforms[l];return h?((m||h.value1!==f)&&(h.value1=f,this.renderer.setProgram(this.program),c.call(this.gl,h.location,f),this.pipeline.currentShader=this),this):this},setUniform2:function(c,l,f,m,h){var p=this.uniforms[l];return p?((h||p.value1!==f||p.value2!==m)&&(p.value1=f,p.value2=m,this.renderer.setProgram(this.program),c.call(this.gl,p.location,f,m),this.pipeline.currentShader=this),this):this},setUniform3:function(c,l,f,m,h,p){var y=this.uniforms[l];return y?((p||y.value1!==f||y.value2!==m||y.value3!==h)&&(y.value1=f,y.value2=m,y.value3=h,this.renderer.setProgram(this.program),c.call(this.gl,y.location,f,m,h),this.pipeline.currentShader=this),this):this},setUniform4:function(c,l,f,m,h,p,y){var x=this.uniforms[l];return x?((y||x.value1!==f||x.value2!==m||x.value3!==h||x.value4!==p)&&(x.value1=f,x.value2=m,x.value3=h,x.value4=p,this.renderer.setProgram(this.program),c.call(this.gl,x.location,f,m,h,p),this.pipeline.currentShader=this),this):this},setBoolean:function(c,l){return this.setUniform1(this.gl.uniform1i,c,Number(l))},set1f:function(c,l){return this.setUniform1(this.gl.uniform1f,c,l)},set2f:function(c,l,f){return this.setUniform2(this.gl.uniform2f,c,l,f)},set3f:function(c,l,f,m){return this.setUniform3(this.gl.uniform3f,c,l,f,m)},set4f:function(c,l,f,m,h){return this.setUniform4(this.gl.uniform4f,c,l,f,m,h)},set1fv:function(c,l){return this.setUniform1(this.gl.uniform1fv,c,l,!0)},set2fv:function(c,l){return this.setUniform1(this.gl.uniform2fv,c,l,!0)},set3fv:function(c,l){return this.setUniform1(this.gl.uniform3fv,c,l,!0)},set4fv:function(c,l){return this.setUniform1(this.gl.uniform4fv,c,l,!0)},set1iv:function(c,l){return this.setUniform1(this.gl.uniform1iv,c,l,!0)},set2iv:function(c,l){return this.setUniform1(this.gl.uniform2iv,c,l,!0)},set3iv:function(c,l){return this.setUniform1(this.gl.uniform3iv,c,l,!0)},set4iv:function(c,l){return this.setUniform1(this.gl.uniform4iv,c,l,!0)},set1i:function(c,l){return this.setUniform1(this.gl.uniform1i,c,l)},set2i:function(c,l,f){return this.setUniform2(this.gl.uniform2i,c,l,f)},set3i:function(c,l,f,m){return this.setUniform3(this.gl.uniform3i,c,l,f,m)},set4i:function(c,l,f,m,h){return this.setUniform4(this.gl.uniform4i,c,l,f,m,h)},setMatrix2fv:function(c,l,f){return this.setUniform2(this.gl.uniformMatrix2fv,c,l,f,!0)},setMatrix3fv:function(c,l,f){return this.setUniform2(this.gl.uniformMatrix3fv,c,l,f,!0)},setMatrix4fv:function(c,l,f){return this.setUniform2(this.gl.uniformMatrix4fv,c,l,f,!0)},createProgram:function(c,l){c===void 0&&(c=this.vertSrc),l===void 0&&(l=this.fragSrc);var f=this.gl;return this.program&&f.deleteProgram(this.program),this.vertSrc=c,this.fragSrc=l,this.program=this.renderer.createProgram(c,l),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});i.exports=o},71402:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};i.exports=g},55478:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71402),v=e(98611),u={PipelineManager:e(35217),Pipelines:e(62253),RenderTarget:e(37410),Utils:e(75512),WebGLPipeline:e(44775),WebGLRenderer:e(11857),WebGLShader:e(71305)};u=v(!1,u,a),i.exports=u},5583:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72632),u=e(91679),o=e(89053),c=e(71402),l=e(44775),f=new a({Extends:l,initialize:function(h){h.fragShader=v(h,"fragShader",u),h.vertShader=v(h,"vertShader",o),h.batchSize=v(h,"batchSize",1),h.vertices=v(h,"vertices",[-1,1,-1,-7,7,1]),h.attributes=v(h,"attributes",[{name:"inPosition",size:2,type:c.FLOAT}]),l.call(this,h)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(m,h){l.prototype.resize.call(this,m,h),this.set2f("uResolution",m,h)},beginMask:function(m,h,p){this.renderer.beginBitmapMask(m,p)},endMask:function(m,h,p){var y=this.gl,x=this.renderer,T=m.bitmapMask;T&&y&&(x.drawBitmapMask(T,h,this),p&&this.set2f("uResolution",p.width,p.height),this.set1i("uInvertMaskAlpha",m.invertAlpha),y.drawArrays(this.topology,0,3),p&&this.set2f("uResolution",this.width,this.height),y.bindTexture(y.TEXTURE_2D,null))}});i.exports=f},81828:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(58136),u=e(47406),o=e(72632),c=e(87228),l=e(92462),f=e(75512),m=new a({Extends:c,initialize:function(p){p.shaders=[f.setGlowQuality(l.FXGlowFrag,p.game),l.FXShadowFrag,l.FXPixelateFrag,l.FXVignetteFrag,l.FXShineFrag,l.FXBlurLowFrag,l.FXBlurMedFrag,l.FXBlurHighFrag,l.FXGradientFrag,l.FXBloomFrag,l.ColorMatrixFrag,l.FXCircleFrag,l.FXBarrelFrag,l.FXDisplacementFrag,l.FXWipeFrag,l.FXBokehFrag],c.call(this,p);var y=this.game;this.glow=new v.Glow(y),this.shadow=new v.Shadow(y),this.pixelate=new v.Pixelate(y),this.vignette=new v.Vignette(y),this.shine=new v.Shine(y),this.gradient=new v.Gradient(y),this.circle=new v.Circle(y),this.barrel=new v.Barrel(y),this.wipe=new v.Wipe(y),this.bokeh=new v.Bokeh(y);var x=[];x[u.GLOW]=this.onGlow,x[u.SHADOW]=this.onShadow,x[u.PIXELATE]=this.onPixelate,x[u.VIGNETTE]=this.onVignette,x[u.SHINE]=this.onShine,x[u.BLUR]=this.onBlur,x[u.GRADIENT]=this.onGradient,x[u.BLOOM]=this.onBloom,x[u.COLOR_MATRIX]=this.onColorMatrix,x[u.CIRCLE]=this.onCircle,x[u.BARREL]=this.onBarrel,x[u.DISPLACEMENT]=this.onDisplacement,x[u.WIPE]=this.onWipe,x[u.BOKEH]=this.onBokeh,this.fxHandlers=x,this.source,this.target,this.swap},onDraw:function(h,p,y){this.source=h,this.target=p,this.swap=y;var x=h.width,T=h.height,C=this.tempSprite,E=this.fxHandlers;if(C&&C.preFX)for(var A=C.preFX.list,w=0;w<A.length;w++){var b=A[w];b.active&&E[b.type].call(this,b,x,T)}this.drawToGame(this.source)},runDraw:function(){var h=this.source,p=this.target;this.copy(h,p),this.source=p,this.target=h},onGlow:function(h,p,y){var x=this.shaders[u.GLOW];this.setShader(x),this.glow.onPreRender(h,x,p,y),this.runDraw()},onShadow:function(h){var p=this.shaders[u.SHADOW];this.setShader(p),this.shadow.onPreRender(h,p),this.runDraw()},onPixelate:function(h,p,y){var x=this.shaders[u.PIXELATE];this.setShader(x),this.pixelate.onPreRender(h,x,p,y),this.runDraw()},onVignette:function(h){var p=this.shaders[u.VIGNETTE];this.setShader(p),this.vignette.onPreRender(h,p),this.runDraw()},onShine:function(h,p,y){var x=this.shaders[u.SHINE];this.setShader(x),this.shine.onPreRender(h,x,p,y),this.runDraw()},onBlur:function(h,p,y){var x=o(h,"quality"),T=this.shaders[u.BLUR+x];this.setShader(T),this.set1i("uMainSampler",0),this.set2f("resolution",p,y),this.set1f("strength",o(h,"strength")),this.set3fv("color",o(h,"glcolor"));for(var C=o(h,"x"),E=o(h,"y"),A=o(h,"steps"),w=0;w<A;w++)this.set2f("offset",C,0),this.runDraw(),this.set2f("offset",0,E),this.runDraw()},onGradient:function(h){var p=this.shaders[u.GRADIENT];this.setShader(p),this.gradient.onPreRender(h,p),this.runDraw()},onBloom:function(h,p,y){var x=this.shaders[u.BLOOM];this.copySprite(this.source,this.swap),this.setShader(x),this.set1i("uMainSampler",0),this.set1f("strength",o(h,"blurStrength")),this.set3fv("color",o(h,"glcolor"));for(var T=2/p*o(h,"offsetX"),C=2/y*o(h,"offsetY"),E=o(h,"steps"),A=0;A<E;A++)this.set2f("offset",T,0),this.runDraw(),this.set2f("offset",0,C),this.runDraw();this.blendFrames(this.swap,this.source,this.target,o(h,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(h){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",h.getData()),this.set1f("uAlpha",h.alpha),this.runDraw()},onCircle:function(h,p,y){var x=this.shaders[u.CIRCLE];this.setShader(x),this.circle.onPreRender(h,x,p,y),this.runDraw()},onBarrel:function(h){var p=this.shaders[u.BARREL];this.setShader(p),this.barrel.onPreRender(h,p),this.runDraw()},onDisplacement:function(h){this.setShader(this.shaders[u.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",h.x,h.y),this.bindTexture(h.glTexture,1),this.runDraw()},onWipe:function(h){var p=this.shaders[u.WIPE];this.setShader(p),this.wipe.onPreRender(h,p),this.runDraw()},onBokeh:function(h,p,y){var x=this.shaders[u.BOKEH];this.setShader(x),this.bokeh.onPreRender(h,x,p,y),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,c.prototype.destroy.call(this),this}});i.exports=m},66901:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72632),u=e(65045),o=e(77310),c=e(69360),l=e(93736),f=e(44775),m=new a({Extends:o,initialize:function(p){var y=v(p,"fragShader",u);p.fragShader=y.replace("%LIGHT_COUNT%",p.game.renderer.config.maxLights),o.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new l,this._tempMatrix=new c,this._tempMatrix2=new c},boot:function(){f.prototype.boot.call(this);var h=this.gl,p=h.createTexture();h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,p),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p}},onRender:function(h,p){var y=h.sys.lights;if(this.lightsActive=!1,!(!y||!y.active)){var x=y.getLights(p),T=x.length;this.lightsActive=!0;var C,E=this.renderer,A=E.height,w=p.matrix,b=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",y.ambientColor.r,y.ambientColor.g,y.ambientColor.b),this.set1i("uLightCount",T),C=0;C<T;C++){var I=x[C].light,R=I.color,N="uLights["+C+"].";w.transformPoint(I.x,I.y,b),this.set2f(N+"position",b.x-p.scrollX*I.scrollFactorX*p.zoom,A-(b.y-p.scrollY*I.scrollFactorY*p.zoom)),this.set3f(N+"color",R.r,R.g,R.b),this.set1f(N+"intensity",I.intensity),this.set1f(N+"radius",I.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(h){if(h!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(h){var y=-h,x=Math.cos(y),T=Math.sin(y);p[1]=T,p[3]=-T,p[0]=p[4]=x}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=h}},setTexture2D:function(h,p){var y=this.renderer;h===void 0&&(h=y.whiteTexture);var x=this.getNormalMap(p);this.isNewNormalMap(h,x)&&(this.flush(),this.createBatch(h),this.addTextureToBatch(x),this.currentNormalMap=x);var T=0;if(p&&p.parentContainer){var C=p.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);T=C.rotationNormalized}else p&&(T=p.rotation);return this.setNormalMapRotation(T),0},setGameObject:function(h,p){p===void 0&&(p=h.frame);var y=p.glTexture,x=this.getNormalMap(h);if(this.isNewNormalMap(y,x)&&(this.flush(),this.createBatch(y),this.addTextureToBatch(x),this.currentNormalMap=x),h.parentContainer){var T=h.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(T.rotationNormalized)}else this.setNormalMapRotation(h.rotation);return 0},isNewNormalMap:function(h,p){return this.currentTexture!==h||this.currentNormalMap!==p},getNormalMap:function(h){var p;return h?h.displayTexture?p=h.displayTexture.dataSource[h.displayFrame.sourceIndex]:h.texture?p=h.texture.dataSource[h.frame.sourceIndex]:h.tileset&&(Array.isArray(h.tileset)?p=h.tileset[0].image.dataSource[0]:p=h.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(h,p,y){this.lightsActive&&o.prototype.batchSprite.call(this,h,p,y)},batchTexture:function(h,p,y,x,T,C,E,A,w,b,I,R,N,F,P,O,M,L,k,V,W,K,B,G,D,$,z,H,Y,Z,Q,tt){this.lightsActive&&o.prototype.batchTexture.call(this,h,p,y,x,T,C,E,A,w,b,I,R,N,F,P,O,M,L,k,V,W,K,B,G,D,$,z,H,Y,Z,Q,tt)},batchTextureFrame:function(h,p,y,x,T,C,E){this.lightsActive&&o.prototype.batchTextureFrame.call(this,h,p,y,x,T,C,E)}});i.exports=m},71264:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72632),u=e(77310),o=e(85060),c=e(18166),l=e(71402),f=e(44775),m=new a({Extends:u,initialize:function(p){p.fragShader=v(p,"fragShader",o),p.vertShader=v(p,"vertShader",c),p.attributes=v(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:l.UNSIGNED_BYTE,normalized:!0}]),p.forceZero=!0,u.call(this,p)},boot:function(){f.prototype.boot.call(this),this.set1i("uMainSampler",0)}});i.exports=m},77310:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(11117),u=e(72632),o=e(53787),c=e(15968),l=e(69360),f=e(75512),m=e(71402),h=e(44775),p=new a({Extends:h,initialize:function(x){var T=x.game.renderer,C=u(x,"fragShader",o);x.fragShader=f.parseFragmentShaderMaxTextures(C,T.maxTextures),x.vertShader=u(x,"vertShader",c),x.attributes=u(x,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:m.UNSIGNED_BYTE,normalized:!0}]),h.call(this,x),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.calcMatrix=new l,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){h.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(y,x,T){this.manager.set(this,y);var C=this._tempMatrix1,E=this._tempMatrix2,A=this._tempMatrix3,w=y.frame,b=w.glTexture,I=w.u0,R=w.v0,N=w.u1,F=w.v1,P=w.x,O=w.y,M=w.cutWidth,L=w.cutHeight,k=w.customPivot,V=y.displayOriginX,W=y.displayOriginY,K=-V+P,B=-W+O;if(y.isCropped){var G=y._crop;(G.flipX!==y.flipX||G.flipY!==y.flipY)&&w.updateCropUVs(G,y.flipX,y.flipY),I=G.u0,R=G.v0,N=G.u1,F=G.v1,M=G.width,L=G.height,P=G.x,O=G.y,K=-V+P,B=-W+O}var D=1,$=1;y.flipX&&(k||(K+=-w.realWidth+V*2),D=-1),(y.flipY||w.source.isGLTexture&&!b.flipY)&&(k||(B+=-w.realHeight+W*2),$=-1);var z=y.x,H=y.y;E.applyITRS(z,H,y.rotation,y.scaleX*D,y.scaleY*$),C.copyFrom(x.matrix),T?(C.multiplyWithOffset(T,-x.scrollX*y.scrollFactorX,-x.scrollY*y.scrollFactorY),E.e=z,E.f=H):(E.e-=x.scrollX*y.scrollFactorX,E.f-=x.scrollY*y.scrollFactorY),C.multiply(E,A);var Y=A.setQuad(K,B,K+M,B+L,x.roundPixels),Z=f.getTintAppendFloatAlpha,Q=x.alpha,tt=Z(y.tintTopLeft,Q*y._alphaTL),et=Z(y.tintTopRight,Q*y._alphaTR),lt=Z(y.tintBottomLeft,Q*y._alphaBL),ut=Z(y.tintBottomRight,Q*y._alphaBR);this.shouldFlush(6)&&this.flush();var ct=this.setGameObject(y,w);this.manager.preBatch(y),this.batchQuad(y,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],I,R,N,F,tt,et,lt,ut,y.tintFill,b,ct),this.manager.postBatch(y)},batchTexture:function(y,x,T,C,E,A,w,b,I,R,N,F,P,O,M,L,k,V,W,K,B,G,D,$,z,H,Y,Z,Q,tt,et,lt){this.manager.set(this,y);var ut=this._tempMatrix1,ct=this._tempMatrix2,ht=this._tempMatrix3,gt=V/T+Y,yt=W/C+Z,Et=(V+K)/T+Y,bt=(W+B)/C+Z,pt=w,wt=b,Tt=-L,Gt=-k;if(y.isCropped){var Bt=y._crop,Xt=Bt.width,te=Bt.height;pt=Xt,wt=te,w=Xt,b=te,V=Bt.x,W=Bt.y;var Kt=V,Wt=W;F&&(Kt=K-Bt.x-Xt),P&&(Wt=B-Bt.y-te),gt=Kt/T+Y,yt=Wt/C+Z,Et=(Kt+Xt)/T+Y,bt=(Wt+te)/C+Z,Tt=-L+V,Gt=-k+W}P=P^(!et&&x.isRenderTexture?1:0),F&&(pt*=-1,Tt+=w),P&&(wt*=-1,Gt+=b),ct.applyITRS(E,A,N,I,R),ut.copyFrom(Q.matrix),tt?(ut.multiplyWithOffset(tt,-Q.scrollX*O,-Q.scrollY*M),ct.e=E,ct.f=A):(ct.e-=Q.scrollX*O,ct.f-=Q.scrollY*M),ut.multiply(ct,ht);var oe=ht.setQuad(Tt,Gt,Tt+pt,Gt+wt,Q.roundPixels);lt===void 0&&(lt=this.setTexture2D(x)),y&&this.manager.preBatch(y),this.batchQuad(y,oe[0],oe[1],oe[2],oe[3],oe[4],oe[5],oe[6],oe[7],gt,yt,Et,bt,G,D,$,z,H,x,lt),y&&this.manager.postBatch(y)},batchTextureFrame:function(y,x,T,C,E,A,w){this.manager.set(this);var b=this._tempMatrix1.copyFrom(A),I=this._tempMatrix2;w?b.multiply(w,I):I=b;var R=I.setQuad(x,T,x+y.width,T+y.height,!1),N=this.setTexture2D(y.source.glTexture);C=f.getTintAppendFloatAlpha(C,E),this.batchQuad(null,R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],y.u0,y.v0,y.u1,y.v1,C,C,C,C,0,y.glTexture,N)},batchFillRect:function(y,x,T,C,E,A){this.renderer.pipelines.set(this);var w=this.calcMatrix;A&&A.multiply(E,w);var b=w.setQuad(y,x,y+T,x+C,!1),I=this.fillTint;this.batchQuad(null,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],0,0,1,1,I.TL,I.TR,I.BL,I.BR,2)},batchFillTriangle:function(y,x,T,C,E,A,w,b){this.renderer.pipelines.set(this);var I=this.calcMatrix;b&&b.multiply(w,I);var R=I.getX(y,x),N=I.getY(y,x),F=I.getX(T,C),P=I.getY(T,C),O=I.getX(E,A),M=I.getY(E,A),L=this.fillTint;this.batchTri(null,R,N,F,P,O,M,0,0,1,1,L.TL,L.TR,L.BL,2)},batchStrokeTriangle:function(y,x,T,C,E,A,w,b,I){var R=this.tempTriangle;R[0].x=y,R[0].y=x,R[0].width=w,R[1].x=T,R[1].y=C,R[1].width=w,R[2].x=E,R[2].y=A,R[2].width=w,R[3].x=y,R[3].y=x,R[3].width=w,this.batchStrokePath(R,w,!1,b,I)},batchFillPath:function(y,x,T){this.renderer.pipelines.set(this);var C=this.calcMatrix;T&&T.multiply(x,C);for(var E=y.length,A=this.polygonCache,w,b,I=this.fillTint.TL,R=this.fillTint.TR,N=this.fillTint.BL,F=0;F<E;++F)b=y[F],A.push(b.x,b.y);w=v(A),E=w.length;for(var P=0;P<E;P+=3){var O=w[P+0]*2,M=w[P+1]*2,L=w[P+2]*2,k=A[O+0],V=A[O+1],W=A[M+0],K=A[M+1],B=A[L+0],G=A[L+1],D=C.getX(k,V),$=C.getY(k,V),z=C.getX(W,K),H=C.getY(W,K),Y=C.getX(B,G),Z=C.getY(B,G);this.batchTri(null,D,$,z,H,Y,Z,0,0,1,1,I,R,N,2)}A.length=0},batchStrokePath:function(y,x,T,C,E){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var A=y.length-1,w=0;w<A;w++){var b=y[w],I=y[w+1];this.batchLine(b.x,b.y,I.x,I.y,b.width/2,I.width/2,x,w,!T&&w===A-1,C,E)}},batchLine:function(y,x,T,C,E,A,w,b,I,R,N){this.renderer.pipelines.set(this);var F=this.calcMatrix;N&&N.multiply(R,F);var P=T-y,O=C-x,M=Math.sqrt(P*P+O*O);if(M!==0){var L=E*(C-x)/M,k=E*(y-T)/M,V=A*(C-x)/M,W=A*(y-T)/M,K=T-V,B=C-W,G=y-L,D=x-k,$=T+V,z=C+W,H=y+L,Y=x+k,Z=F.getX(K,B),Q=F.getY(K,B),tt=F.getX(G,D),et=F.getY(G,D),lt=F.getX($,z),ut=F.getY($,z),ct=F.getX(H,Y),ht=F.getY(H,Y),gt=this.strokeTint,yt=gt.TL,Et=gt.TR,bt=gt.BL,pt=gt.BR;if(this.batchQuad(null,ct,ht,tt,et,Z,Q,lt,ut,0,0,1,1,yt,Et,bt,pt,2),!(w<=2)){var wt=this.prevQuad,Tt=this.firstQuad;b>0&&wt[4]?this.batchQuad(null,ct,ht,tt,et,wt[0],wt[1],wt[2],wt[3],0,0,1,1,yt,Et,bt,pt,2):(Tt[0]=ct,Tt[1]=ht,Tt[2]=tt,Tt[3]=et,Tt[4]=1),I&&Tt[4]?this.batchQuad(null,Z,Q,lt,ut,Tt[0],Tt[1],Tt[2],Tt[3],0,0,1,1,yt,Et,bt,pt,2):(wt[0]=Z,wt[1]=Q,wt[2]=lt,wt[3]=ut,wt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,h.prototype.destroy.call(this),this}});i.exports=p},10919:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72632),u=e(83327),o=e(54677),c=e(44775),l=new a({Extends:c,initialize:function(m){m.vertShader=v(m,"vertShader",o),m.fragShader=v(m,"fragShader",u),m.attributes=v(m,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),c.call(this,m)},onRender:function(f,m){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",m.zoom)},batchPointLight:function(f,m,h,p,y,x,T,C,E,A,w,b){var I=f.color,R=f.intensity,N=f.radius,F=f.attenuation,P=I.r*R,O=I.g*R,M=I.b*R,L=m.alpha*f.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(h,p,w,b,N,F,P,O,M,L),this.batchLightVert(y,x,w,b,N,F,P,O,M,L),this.batchLightVert(T,C,w,b,N,F,P,O,M,L),this.batchLightVert(h,p,w,b,N,F,P,O,M,L),this.batchLightVert(T,C,w,b,N,F,P,O,M,L),this.batchLightVert(E,A,w,b,N,F,P,O,M,L),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(f,m,h,p,y,x,T,C,E,A){var w=this.vertexViewF32,b=this.vertexCount*this.currentShader.vertexComponentCount-1;w[++b]=f,w[++b]=m,w[++b]=h,w[++b]=p,w[++b]=y,w[++b]=x,w[++b]=T,w[++b]=C,w[++b]=E,w[++b]=A,this.vertexCount++}});i.exports=l},80486:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(65246),u=e(72632),o=e(12569),c=e(99365),l=e(44775),f=new a({Extends:l,initialize:function(h){h.renderTarget=u(h,"renderTarget",1),h.fragShader=u(h,"fragShader",o),h.vertShader=u(h,"vertShader",c),h.attributes=u(h,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),h.batchSize=1,h.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],l.call(this,h),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new v,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){l.prototype.boot.call(this);var m=this.manager.UTILITY_PIPELINE;this.fullFrame1=m.fullFrame1,this.fullFrame2=m.fullFrame2,this.halfFrame1=m.halfFrame1,this.halfFrame2=m.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(m){this.bindAndDraw(m)},getController:function(m){return m!==void 0?m:this.controller?this.controller:this},copySprite:function(m,h,p){p===void 0&&(p=!1);var y=this.gl;y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,m.texture);var x=y.getParameter(y.FRAMEBUFFER_BINDING);y.bindFramebuffer(y.FRAMEBUFFER,h.framebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,h.texture,0),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),p&&(y.bindTexture(y.TEXTURE_2D,null),y.bindFramebuffer(y.FRAMEBUFFER,x))},copyFrame:function(m,h,p,y,x){this.manager.copyFrame(m,h,p,y,x)},copyToGame:function(m){this.manager.copyToGame(m)},drawFrame:function(m,h,p){this.manager.drawFrame(m,h,p,this.colorMatrix)},blendFrames:function(m,h,p,y,x){this.manager.blendFrames(m,h,p,y,x)},blendFramesAdditive:function(m,h,p,y,x){this.manager.blendFramesAdditive(m,h,p,y,x)},clearFrame:function(m,h){this.manager.clearFrame(m,h)},blitFrame:function(m,h,p,y,x,T){this.manager.blitFrame(m,h,p,y,x,T)},copyFrameRect:function(m,h,p,y,x,T,C,E){this.manager.copyFrameRect(m,h,p,y,x,T,C,E)},bindAndDraw:function(m,h,p,y,x){p===void 0&&(p=!0),y===void 0&&(y=!0);var T=this.gl,C=this.renderer;this.bind(x),this.set1i("uMainSampler",0),h?(T.viewport(0,0,h.width,h.height),T.bindFramebuffer(T.FRAMEBUFFER,h.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,h.texture,0),p&&(y?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT))):(C.popFramebuffer(!1,!1),C.currentFramebuffer||T.viewport(0,0,C.width,C.height)),C.restoreStencilMask(),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,m.texture),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),h&&(T.bindTexture(T.TEXTURE_2D,null),T.bindFramebuffer(T.FRAMEBUFFER,C.currentFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,l.prototype.destroy.call(this),this}});i.exports=f},87228:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95723),v=e(79993),u=e(56694),o=e(37486),c=e(72632),l=e(77310),f=e(12569),m=e(74118),h=e(37410),p=e(85060),y=e(18166),x=e(44775),T=new u({Extends:l,initialize:function(E){var A=c(E,"fragShader",f),w=c(E,"vertShader",y),b=c(E,"drawShader",f),I=[{name:"DrawSprite",fragShader:p,vertShader:y},{name:"CopySprite",fragShader:A,vertShader:w},{name:"DrawGame",fragShader:b,vertShader:y},{name:"ColorMatrix",fragShader:o}],R=c(E,"shaders",[]);E.shaders=I.concat(R),E.vertShader||(E.vertShader=w),E.batchSize=1,l.call(this,E),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new m,this.targetBounds=new m,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){x.prototype.boot.call(this);var C=this.shaders,E=this.renderer;this.drawSpriteShader=C[0],this.copyShader=C[1],this.gameShader=C[2],this.colorMatrixShader=C[3],this.fsTarget=new h(E,E.width,E.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var A=new ArrayBuffer(168);this.quadVertexData=A,this.quadVertexViewF32=new Float32Array(A),this.quadVertexBuffer=E.createVertexBuffer(A,this.gl.STATIC_DRAW),this.onResize(E.width,E.height),this.currentShader=this.copyShader},onResize:function(C,E){var A=this.quadVertexViewF32;A[1]=E,A[22]=E,A[14]=C,A[28]=C,A[35]=C,A[36]=E},batchQuad:function(C,E,A,w,b,I,R,N,F,P,O,M,L,k,V,W,K,B,G){var D=Math.min(E,w,I,N),$=Math.min(A,b,R,F),z=Math.max(E,w,I,N),H=Math.max(A,b,R,F),Y=z-D,Z=H-$,Q=this.spriteBounds.setTo(D,$,Y,Z),tt=C?C.preFX.padding:0,et=Y+tt*2,lt=Z+tt*2,ut=Math.abs(Math.max(et,lt)),ct=this.manager.getRenderTarget(ut),ht=this.targetBounds.setTo(0,0,ct.width,ct.height);v(ht,Q.centerX,Q.centerY),this.tempSprite=C;var gt=this.gl,yt=this.renderer;yt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.flipProjectionMatrix(!0),C&&(this.onDrawSprite(C,ct),C.preFX.onFX(this));var Et=this.fsTarget;return this.flush(),gt.viewport(0,0,yt.width,yt.height),gt.bindFramebuffer(gt.FRAMEBUFFER,Et.framebuffer),gt.framebufferTexture2D(gt.FRAMEBUFFER,gt.COLOR_ATTACHMENT0,gt.TEXTURE_2D,Et.texture,0),gt.clearColor(0,0,0,0),gt.clear(gt.COLOR_BUFFER_BIT),this.setTexture2D(G),this.batchVert(E,A,P,O,0,B,k),this.batchVert(w,b,P,L,0,B,W),this.batchVert(I,R,M,L,0,B,K),this.batchVert(E,A,P,O,0,B,k),this.batchVert(I,R,M,L,0,B,K),this.batchVert(N,F,M,O,0,B,V),this.flush(),this.flipProjectionMatrix(!1),gt.activeTexture(gt.TEXTURE0),gt.bindTexture(gt.TEXTURE_2D,ct.texture),gt.copyTexSubImage2D(gt.TEXTURE_2D,0,0,0,ht.x,ht.y,ht.width,ht.height),gt.bindFramebuffer(gt.FRAMEBUFFER,null),gt.bindTexture(gt.TEXTURE_2D,null),this.onBatch(C),this.currentShader=this.copyShader,this.onDraw(ct,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(C,E,A,w,b,I,R){A===void 0&&(A=!0),w===void 0&&(w=!0),b===void 0&&(b=!1),R===void 0&&(R=this.copyShader);var N=this.gl,F=this.tempSprite;I&&(R=this.colorMatrixShader),this.currentShader=R;var P=this.setVertexBuffer(this.quadVertexBuffer);if(R.bind(P,!1),this.set1i("uMainSampler",0),F.preFX.onFXCopy(this),this.onCopySprite(C,E,F),I&&(this.set1fv("uColorMatrix",I.getData()),this.set1f("uAlpha",I.alpha)),N.activeTexture(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,C.texture),C.height>E.height)N.viewport(0,0,C.width,C.height),this.setTargetUVs(C,E);else{var O=E.height-C.height;N.viewport(0,O,C.width,C.height),this.resetUVs()}if(N.bindFramebuffer(N.FRAMEBUFFER,E.framebuffer),N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,E.texture,0),A&&(N.clearColor(0,0,0,+!w),N.clear(N.COLOR_BUFFER_BIT)),b){var M=this.renderer.currentBlendMode;this.renderer.setBlendMode(a.ERASE)}N.bufferData(N.ARRAY_BUFFER,this.quadVertexData,N.STATIC_DRAW),N.drawArrays(N.TRIANGLES,0,6),b&&this.renderer.setBlendMode(M),N.bindFramebuffer(N.FRAMEBUFFER,null)},copy:function(C,E){var A=this.gl;this.set1i("uMainSampler",0),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,C.texture),A.viewport(0,0,C.width,C.height),this.setUVs(0,0,0,1,1,1,1,0),A.bindFramebuffer(A.FRAMEBUFFER,E.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,E.texture,0),A.clearColor(0,0,0,0),A.clear(A.COLOR_BUFFER_BIT),A.bufferData(A.ARRAY_BUFFER,this.quadVertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null)},blendFrames:function(C,E,A,w,b){this.manager.blendFrames(C,E,A,w,b)},blendFramesAdditive:function(C,E,A,w,b){this.manager.blendFramesAdditive(C,E,A,w,b)},drawToGame:function(C){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(C)},copyToGame:function(C){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(C)},bindAndDraw:function(C){var E=this.gl,A=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(C.texture);var w=this._tempMatrix1.loadIdentity(),b=this.targetBounds.x,I=this.targetBounds.y,R=b+C.width,N=I+C.height,F=w.getX(b,I),P=w.getX(b,N),O=w.getX(R,N),M=w.getX(R,I),L=w.getY(b,I),k=w.getY(b,N),V=w.getY(R,N),W=w.getY(R,I),K=16777215;this.batchVert(F,L,0,0,0,0,K),this.batchVert(P,k,0,1,0,0,K),this.batchVert(O,V,1,1,0,0,K),this.batchVert(F,L,0,0,0,0,K),this.batchVert(O,V,1,1,0,0,K),this.batchVert(M,W,1,0,0,0,K),A.restoreFramebuffer(!1,!0),A.currentFramebuffer||E.viewport(0,0,A.width,A.height),A.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(C){this.drawToGame(C)},setUVs:function(C,E,A,w,b,I,R,N){var F=this.quadVertexViewF32;F[2]=C,F[3]=E,F[9]=A,F[10]=w,F[16]=b,F[17]=I,F[23]=C,F[24]=E,F[30]=b,F[31]=I,F[37]=R,F[38]=N},setTargetUVs:function(C,E){var A=E.height/C.height;A>.5?A=.5-(A-.5):A=.5+(.5-A),this.setUVs(0,A,0,1+A,1,1+A,1,A)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,l.prototype.destroy.call(this),this}});i.exports=T},21213:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72632),u=e(77310),o=new a({Extends:u,initialize:function(l){l.topology=5,l.batchSize=v(l,"batchSize",256),u.call(this,l)}});i.exports=o},51212:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72632),u=e(77310),o=e(85060),c=e(18166),l=e(44775),f=new a({Extends:u,initialize:function(h){h.fragShader=v(h,"fragShader",o),h.vertShader=v(h,"vertShader",c),h.forceZero=!0,u.call(this,h)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0)}});i.exports=f},60848:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(2529),v=e(95723),u=e(56694),o=e(65246),c=e(37486),l=e(79060),f=e(72632),m=e(98921),h=e(99365),p=e(44775),y=new u({Extends:p,initialize:function(T){T.renderTarget=f(T,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),T.vertShader=f(T,"vertShader",h),T.shaders=f(T,"shaders",[{name:"Copy",fragShader:l},{name:"AddBlend",fragShader:a},{name:"LinearBlend",fragShader:m},{name:"ColorMatrix",fragShader:c}]),T.attributes=f(T,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),T.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],T.batchSize=1,p.call(this,T),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){p.prototype.boot.call(this);var x=this.shaders,T=this.renderTargets;this.copyShader=x[0],this.addShader=x[1],this.linearShader=x[2],this.colorMatrixShader=x[3],this.fullFrame1=T[0],this.fullFrame2=T[1],this.halfFrame1=T[2],this.halfFrame2=T[3]},copyFrame:function(x,T,C,E,A){C===void 0&&(C=1),E===void 0&&(E=!0),A===void 0&&(A=!0);var w=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,x.texture),T?(w.viewport(0,0,T.width,T.height),w.bindFramebuffer(w.FRAMEBUFFER,T.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,T.texture,0)):w.viewport(0,0,x.width,x.height),E&&(A?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT)),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},blitFrame:function(x,T,C,E,A,w,b){C===void 0&&(C=1),E===void 0&&(E=!0),A===void 0&&(A=!0),w===void 0&&(w=!1),b===void 0&&(b=!1);var I=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,x.texture),x.height>T.height)I.viewport(0,0,x.width,x.height),this.setTargetUVs(x,T);else{var R=T.height-x.height;I.viewport(0,R,x.width,x.height)}if(I.bindFramebuffer(I.FRAMEBUFFER,T.framebuffer),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,T.texture,0),E&&(A?I.clearColor(0,0,0,0):I.clearColor(0,0,0,1),I.clear(I.COLOR_BUFFER_BIT)),w){var N=this.renderer.currentBlendMode;this.renderer.setBlendMode(v.ERASE)}b&&this.flipY(),I.bufferData(I.ARRAY_BUFFER,this.vertexData,I.STATIC_DRAW),I.drawArrays(I.TRIANGLES,0,6),w&&this.renderer.setBlendMode(N),I.bindFramebuffer(I.FRAMEBUFFER,null),I.bindTexture(I.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(x,T,C,E,A,w,b,I){b===void 0&&(b=!0),I===void 0&&(I=!0);var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,x.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,x.texture,0),b&&(I?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,T.texture),R.copyTexSubImage2D(R.TEXTURE_2D,0,0,0,C,E,A,w),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null)},copyToGame:function(x){var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,x.texture),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6)},drawFrame:function(x,T,C,E){C===void 0&&(C=!0),E===void 0&&(E=this.colorMatrix);var A=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",E.getData()),this.set1f("uAlpha",E.alpha),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,x.texture),T?(A.viewport(0,0,T.width,T.height),A.bindFramebuffer(A.FRAMEBUFFER,T.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,T.texture,0)):A.viewport(0,0,x.width,x.height),C?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blendFrames:function(x,T,C,E,A,w){E===void 0&&(E=1),A===void 0&&(A=!0),w===void 0&&(w=this.linearShader);var b=this.gl;this.setShader(w),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",E),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,x.texture),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,T.texture),C?(b.bindFramebuffer(b.FRAMEBUFFER,C.framebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,C.texture,0),b.viewport(0,0,C.width,C.height)):b.viewport(0,0,x.width,x.height),A?b.clearColor(0,0,0,0):b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT),b.bufferData(b.ARRAY_BUFFER,this.vertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindTexture(b.TEXTURE_2D,null)},blendFramesAdditive:function(x,T,C,E,A){this.blendFrames(x,T,C,E,A,this.addShader)},clearFrame:function(x,T){T===void 0&&(T=!0);var C=this.gl;C.viewport(0,0,x.width,x.height),C.bindFramebuffer(C.FRAMEBUFFER,x.framebuffer),T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT);var E=this.renderer.currentFramebuffer;C.bindFramebuffer(C.FRAMEBUFFER,E)},setUVs:function(x,T,C,E,A,w,b,I){var R=this.vertexViewF32;R[2]=x,R[3]=T,R[6]=C,R[7]=E,R[10]=A,R[11]=w,R[14]=x,R[15]=T,R[18]=A,R[19]=w,R[22]=b,R[23]=I},setTargetUVs:function(x,T){var C=T.height/x.height;C>.5?C=.5-(C-.5):C=.5+(.5-C),this.setUVs(0,C,0,1+C,1,1+C,1,C)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});i.exports=y},65641:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};i.exports=g},68726:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelineafterflush"},67186:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelinebeforeflush"},22709:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelinebind"},74469:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelineboot"},93953:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelinedestroy"},51687:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelinerebind"},25034:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pipelineresize"},18970:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AFTER_FLUSH:e(68726),BEFORE_FLUSH:e(67186),BIND:e(22709),BOOT:e(74469),DESTROY:e(93953),REBIND:e(51687),RESIZE:e(25034)}},32469:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(87751),u=e(80486),o=new a({Extends:u,initialize:function(l){u.call(this,{game:l,fragShader:v}),this.amount=1},onPreRender:function(c,l){c=this.getController(c),this.set1f("amount",c.amount,l)}});i.exports=o},2134:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(88222),u=e(80486),o=new a({Extends:u,initialize:function(l){u.call(this,{game:l,fragShader:v}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(c){c=this.getController(c),this.set1f("strength",c.blurStrength),this.set3fv("color",c.glcolor)},onDraw:function(c){var l=this.getController(),f=this.fullFrame1,m=this.fullFrame2;this.copyFrame(c,m);for(var h=2/c.width*l.offsetX,p=2/c.height*l.offsetY,y=0;y<l.steps;y++)this.set2f("offset",h,0),this.copySprite(c,f),this.set2f("offset",0,p),this.copySprite(f,c);this.blendFrames(m,c,f,l.strength),this.copyToGame(f)}});i.exports=o},63377:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(35491),u=e(75568),o=e(44481),c=e(80486),l=new a({Extends:c,initialize:function(m){c.call(this,{game:m,shaders:[{name:"Gaussian5",fragShader:v},{name:"Gaussian9",fragShader:u},{name:"Gaussian13",fragShader:o}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(f){var m=this.getController(),h=this.gl,p=this.fullFrame1,y=h.getParameter(h.FRAMEBUFFER_BINDING);this.bind(this.activeShader),h.activeTexture(h.TEXTURE0),h.viewport(0,0,f.width,f.height),this.set1i("uMainSampler",0),this.set2f("resolution",f.width,f.height),this.set1f("strength",m.strength),this.set3fv("color",m.glcolor);for(var x=0;x<m.steps;x++)this.set2f("offset",m.x,0),this.copySprite(f,p),this.set2f("offset",0,m.y),this.copySprite(p,f);h.bindFramebuffer(h.FRAMEBUFFER,y),h.bindTexture(h.TEXTURE_2D,null),this.copyToGame(f)}});i.exports=l},49745:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(69960),u=e(80486),o=new a({Extends:u,initialize:function(l){u.call(this,{game:l,fragShader:v}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(c,l,f,m){c=this.getController(c),this.set1f("radius",c.radius,l),this.set1f("amount",c.amount,l),this.set1f("contrast",c.contrast,l),this.set1f("strength",c.strength,l),this.set2f("blur",c.blurX,c.blurY,l),this.setBoolean("isTiltShift",c.isTiltShift,l),f&&m&&this.set2f("resolution",f,m,l)},onDraw:function(c){this.set2f("resolution",c.width,c.height),this.bindAndDraw(c)}});i.exports=o},4323:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(33754),u=e(80486),o=new a({Extends:u,initialize:function(l){u.call(this,{game:l,fragShader:v}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(c,l,f,m){c=this.getController(c),this.set1f("scale",c.scale,l),this.set1f("feather",c.feather,l),this.set1f("thickness",c.thickness,l),this.set3fv("color",c.glcolor,l),this.set4fv("backgroundColor",c.glcolor2,l),f&&m&&this.set2f("resolution",f,m,l)},onDraw:function(c){this.set2f("resolution",c.width,c.height),this.bindAndDraw(c)}});i.exports=o},92066:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(80486),u=new a({Extends:v,initialize:function(c){v.call(this,{game:c})},onDraw:function(o){var c=this.fullFrame1;this.controller?this.manager.drawFrame(o,c,!0,this.controller):this.drawFrame(o,c),this.copyToGame(c)}});i.exports=u},89581:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(35668),u=e(80486),o=new a({Extends:u,initialize:function(l){u.call(this,{game:l,fragShader:v}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(c){var l=this.game.textures.getFrame(c);l&&(this.glTexture=l.glTexture)},onDraw:function(c){var l=this.getController(),f=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",l.x,l.y),this.bindTexture(l.glTexture,1),this.copySprite(c,f),this.copyToGame(f)}});i.exports=o},55084:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72632),u=e(69675),o=e(80486),c=e(75512),l=new a({Extends:o,initialize:function(m,h){var p=v(h,"quality",.1),y=v(h,"distance",10);o.call(this,{game:m,fragShader:c.setGlowQuality(u,m,p,y)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(f,m,h,p){f=this.getController(f),this.set1f("outerStrength",f.outerStrength,m),this.set1f("innerStrength",f.innerStrength,m),this.set4fv("glowColor",f.glcolor,m),this.setBoolean("knockout",f.knockout,m),h&&p&&this.set2f("resolution",h,p,m)},onDraw:function(f){this.set2f("resolution",f.width,f.height),this.bindAndDraw(f)}});i.exports=l},41653:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(90993),u=e(80486),o=new a({Extends:u,initialize:function(l){u.call(this,{game:l,fragShader:v}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(c,l){c=this.getController(c),this.set1f("alpha",c.alpha,l),this.set1i("size",c.size,l),this.set3fv("color1",c.glcolor1,l),this.set3fv("color2",c.glcolor2,l),this.set2f("positionFrom",c.fromX,c.fromY,l),this.set2f("positionTo",c.toX,c.toY,l)}});i.exports=o},73416:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(37945),u=e(80486),o=new a({Extends:u,initialize:function(l){u.call(this,{game:l,fragShader:v}),this.amount=1},onPreRender:function(c,l,f,m){c=this.getController(c),this.set1f("amount",c.amount,l),f&&m&&this.set2f("resolution",f,m,l)},onDraw:function(c){this.set2f("resolution",c.width,c.height),this.bindAndDraw(c)}});i.exports=o},58049:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(85718),u=e(80486),o=new a({Extends:u,initialize:function(l){u.call(this,{game:l,fragShader:v}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(c,l){c=this.getController(c);var f=c.samples;this.set1i("samples",f,l),this.set1f("intensity",c.intensity,l),this.set1f("decay",c.decay,l),this.set1f("power",c.power/f,l),this.set2f("lightPosition",c.x,c.y,l),this.set4fv("color",c.glcolor,l)}});i.exports=o},18026:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(13740),u=e(80486),o=new a({Extends:u,initialize:function(l){u.call(this,{game:l,fragShader:v}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(c,l,f,m){c=this.getController(c),this.setTime("time",l),this.set1f("speed",c.speed,l),this.set1f("lineWidth",c.lineWidth,l),this.set1f("gradient",c.gradient,l),this.setBoolean("reveal",c.reveal,l),f&&m&&this.set2f("resolution",f,m,l)},onDraw:function(c){this.set2f("resolution",c.width,c.height),this.bindAndDraw(c)}});i.exports=o},72381:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(80617),u=e(80486),o=new a({Extends:u,initialize:function(l){u.call(this,{game:l,fragShader:v}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(c,l){c=this.getController(c),this.set1f("radius",c.radius,l),this.set1f("strength",c.strength,l),this.set2f("position",c.x,c.y,l)}});i.exports=o},80542:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(62879),u=e(80486),o=new a({Extends:u,initialize:function(l){u.call(this,{game:l,fragShader:v}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(c,l){c=this.getController(c);var f=c.progress,m=c.wipeWidth,h=c.direction,p=c.axis;this.set4f("config",f,m,h,p,l),this.setBoolean("reveal",c.reveal,l)}});i.exports=o},58136:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={Barrel:e(32469),Bloom:e(2134),Blur:e(63377),Bokeh:e(49745),Circle:e(4323),ColorMatrix:e(92066),Displacement:e(89581),Glow:e(55084),Gradient:e(41653),Pixelate:e(73416),Shadow:e(58049),Shine:e(18026),Vignette:e(72381),Wipe:e(80542)};i.exports=a},62253:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65641),v=e(98611),u={FX:e(58136),BitmapMaskPipeline:e(5583),Events:e(18970),FXPipeline:e(81828),LightPipeline:e(66901),MobilePipeline:e(71264),MultiPipeline:e(77310),PointLightPipeline:e(10919),PostFXPipeline:e(80486),PreFXPipeline:e(87228),RopePipeline:e(21213),SinglePipeline:e(51212),UtilityPipeline:e(60848)};u=v(!1,u,a),i.exports=u},2529:i=>{i.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},91679:i=>{i.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},89053:i=>{i.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},37486:i=>{i.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},79060:i=>{i.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},87751:i=>{i.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},88222:i=>{i.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},44481:i=>{i.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},35491:i=>{i.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},75568:i=>{i.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},69960:i=>{i.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},33754:i=>{i.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},35668:i=>{i.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},69675:i=>{i.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},90993:i=>{i.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},37945:i=>{i.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},85718:i=>{i.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},13740:i=>{i.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},80617:i=>{i.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},62879:i=>{i.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},65045:i=>{i.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},98921:i=>{i.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},25005:i=>{i.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},94914:i=>{i.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},11263:i=>{i.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},51852:i=>{i.exports=["#define SHADER_NAME PHASER_MOBILE_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},53787:i=>{i.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},15968:i=>{i.exports=["#define SHADER_NAME PHASER_MULTI_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},83327:i=>{i.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},54677:i=>{i.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},12569:i=>{i.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},99365:i=>{i.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},85060:i=>{i.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},18166:i=>{i.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},92462:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AddBlendFrag:e(2529),BitmapMaskFrag:e(91679),BitmapMaskVert:e(89053),ColorMatrixFrag:e(37486),CopyFrag:e(79060),FXBarrelFrag:e(87751),FXBloomFrag:e(88222),FXBlurHighFrag:e(44481),FXBlurLowFrag:e(35491),FXBlurMedFrag:e(75568),FXBokehFrag:e(69960),FXCircleFrag:e(33754),FXDisplacementFrag:e(35668),FXGlowFrag:e(69675),FXGradientFrag:e(90993),FXPixelateFrag:e(37945),FXShadowFrag:e(85718),FXShineFrag:e(13740),FXVignetteFrag:e(80617),FXWipeFrag:e(62879),LightFrag:e(65045),LinearBlendFrag:e(98921),MeshFrag:e(25005),MeshVert:e(94914),MobileFrag:e(11263),MobileVert:e(51852),MultiFrag:e(53787),MultiVert:e(15968),PointLightFrag:e(83327),PointLightVert:e(54677),PostFXFrag:e(12569),QuadVert:e(99365),SingleFrag:e(85060),SingleVert:e(18166)}},756:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(55301),v=e(56694),u=e(6659),o=e(40444),c=e(97081),l=e(74181),f=e(2893),m=e(9229),h=e(72283),p=e(74118),y=e(90881),x=e(84314),T=e(93736),C=e(47751),E=new v({Extends:u,initialize:function(w){u.call(this),this.game=w,this.canvas,this.canvasBounds=new p,this.parent=null,this.parentIsWindow=!1,this.parentSize=new y,this.gameSize=new y,this.baseSize=new y,this.displaySize=new y,this.scaleMode=a.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new T(1,1),this.autoRound=!1,this.autoCenter=a.CENTER.NO_CENTER,this.orientation=a.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:h,windowResize:h,fullScreenChange:h,fullScreenError:h}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(c.BOOT,this.boot,this)},boot:function(){var A=this.game;this.canvas=A.canvas,this.fullscreen=A.device.fullscreen,this.scaleMode!==a.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===a.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),A.events.on(c.PRE_STEP,this.step,this),A.events.once(c.READY,this.refresh,this),A.events.once(c.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(A){this.getParent(A),this.getParentBounds();var w=A.width,b=A.height,I=A.scaleMode,R=A.zoom,N=A.autoRound;if(typeof w=="string"){var F=this.parentSize.width;F===0&&(F=window.innerWidth);var P=parseInt(w,10)/100;w=Math.floor(F*P)}if(typeof b=="string"){var O=this.parentSize.height;O===0&&(O=window.innerHeight);var M=parseInt(b,10)/100;b=Math.floor(O*M)}this.scaleMode=I,this.autoRound=N,this.autoCenter=A.autoCenter,this.resizeInterval=A.resizeInterval,N&&(w=Math.floor(w),b=Math.floor(b)),this.gameSize.setSize(w,b),R===a.ZOOM.MAX_ZOOM&&(R=this.getMaxZoom()),this.zoom=R,R!==1&&(this._resetZoom=!0),this.baseSize.setSize(w,b),N&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),A.minWidth>0&&this.displaySize.setMin(A.minWidth*R,A.minHeight*R),A.maxWidth>0&&this.displaySize.setMax(A.maxWidth*R,A.maxHeight*R),this.displaySize.setSize(w,b),this.orientation=m(w,b)},getParent:function(A){var w=A.parent;if(w!==null){if(this.parent=f(w),this.parentIsWindow=this.parent===document.body,A.expandParent&&A.scaleMode!==a.SCALE_MODE.NONE){var b=this.parent.getBoundingClientRect();(this.parentIsWindow||b.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",b=this.parent.getBoundingClientRect(),!this.parentIsWindow&&b.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}A.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=f(A.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var A=this.parentSize,w=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(w.height=l(!0));var b=w.width,I=w.height;if(A.width!==b||A.height!==I)return A.setSize(b,I),!0;if(this.canvas){var R=this.canvasBounds,N=this.canvas.getBoundingClientRect();if(N.x!==R.x||N.y!==R.y)return!0}return!1},lockOrientation:function(A){var w=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return w?w.call(screen,A):!1},setParentSize:function(A,w){return this.parentSize.setSize(A,w),this.refresh()},setGameSize:function(A,w){var b=this.autoRound;b&&(A=Math.floor(A),w=Math.floor(w));var I=this.width,R=this.height;return this.gameSize.resize(A,w),this.baseSize.resize(A,w),b&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(A/w),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(I,R)},resize:function(A,w){var b=this.zoom,I=this.autoRound;I&&(A=Math.floor(A),w=Math.floor(w));var R=this.width,N=this.height;this.gameSize.resize(A,w),this.baseSize.resize(A,w),I&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(A*b,w*b),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var F=this.canvas.style,P=A*b,O=w*b;return I&&(P=Math.floor(P),O=Math.floor(O)),(P!==A||O!==w)&&(F.width=P+"px",F.height=O+"px"),this.refresh(R,N)},setZoom:function(A){return this.zoom=A,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(A,w){A===void 0&&(A=this.width),w===void 0&&(w=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var b=this.game.domContainer;if(b){this.baseSize.setCSS(b);var I=this.canvas.style,R=b.style;R.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",R.marginLeft=I.marginLeft,R.marginTop=I.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,A,w),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var A=m(this.width,this.height);A!==this.orientation&&(this.orientation=A,this.emit(o.ORIENTATION_CHANGE,A))}},updateScale:function(){var A=this.canvas.style,w=this.gameSize.width,b=this.gameSize.height,I,R,N=this.zoom,F=this.autoRound;this.scaleMode===a.SCALE_MODE.NONE?(this.displaySize.setSize(w*N,b*N),I=this.displaySize.width,R=this.displaySize.height,F&&(I=Math.floor(I),R=Math.floor(R)),this._resetZoom&&(A.width=I+"px",A.height=R+"px",this._resetZoom=!1)):this.scaleMode===a.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),I=this.displaySize.width,R=this.displaySize.height,F&&(I=Math.floor(I),R=Math.floor(R)),this.canvas.width=I,this.canvas.height=R):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),I=this.displaySize.width,R=this.displaySize.height,F&&(I=Math.floor(I),R=Math.floor(R)),A.width=I+"px",A.height=R+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var A=x(this.parentSize.width,this.gameSize.width,0,!0),w=x(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(A,w),1)},updateCenter:function(){var A=this.autoCenter;if(A!==a.CENTER.NO_CENTER){var w=this.canvas,b=w.style,I=w.getBoundingClientRect(),R=I.width,N=I.height,F=Math.floor((this.parentSize.width-R)/2),P=Math.floor((this.parentSize.height-N)/2);A===a.CENTER.CENTER_HORIZONTALLY?P=0:A===a.CENTER.CENTER_VERTICALLY&&(F=0),b.marginLeft=F+"px",b.marginTop=P+"px"}},updateBounds:function(){var A=this.canvasBounds,w=this.canvas.getBoundingClientRect();A.x=w.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),A.y=w.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),A.width=w.width,A.height=w.height},transformX:function(A){return(A-this.canvasBounds.left)*this.displayScale.x},transformY:function(A){return(A-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(A){A===void 0&&(A={navigationUI:"hide"});var w=this.fullscreen;if(!w.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return}if(!w.active){var b=this.getFullscreenTarget();w.keyboard?b[w.request](Element.ALLOW_KEYBOARD_INPUT):b[w.request](A)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(A){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,A)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var A=document.createElement("div");A.style.margin="0",A.style.padding="0",A.style.width="100%",A.style.height="100%",this.fullscreenTarget=A,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var w=this.canvas.parentNode;w.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var A=this.fullscreenTarget;if(A&&A.parentNode){var w=A.parentNode;w.insertBefore(this.canvas,A),w.removeChild(A)}}},stopFullscreen:function(){var A=this.fullscreen;if(!A.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;A.active&&document[A.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(A){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(A)},startListeners:function(){var A=this,w=this.domlisteners;if(w.orientationChange=function(){A.updateBounds(),A._checkOrientation=!0,A.dirty=!0},w.windowResize=function(){A.updateBounds(),A.dirty=!0},window.addEventListener("orientationchange",w.orientationChange,!1),window.addEventListener("resize",w.windowResize,!1),this.fullscreen.available){w.fullScreenChange=function(I){return A.onFullScreenChange(I)},w.fullScreenError=function(I){return A.onFullScreenError(I)};var b=["webkit","moz",""];b.forEach(function(I){document.addEventListener(I+"fullscreenchange",w.fullScreenChange,!1),document.addEventListener(I+"fullscreenerror",w.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",w.fullScreenChange,!1),document.addEventListener("MSFullscreenError",w.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(A,w){A instanceof C||(w=A,A=void 0),w===void 0&&(w=new p);var b=this.baseSize,I=this.parentSize,R=this.canvasBounds,N=this.displayScale,F=R.x>=0?0:-(R.x*N.x),P=R.y>=0?0:-(R.y*N.y),O;I.width>=R.width?O=b.width:O=b.width-(R.width-I.width)*N.x;var M;return I.height>=R.height?M=b.height:M=b.height-(R.height-I.height)*N.y,w.setTo(F,P,O,M),A&&(w.width/=A.zoomX,w.height/=A.zoomY,w.centerX=A.centerX+A.scrollX,w.centerY=A.centerY+A.scrollY),w},step:function(A,w){this.parent&&(this._lastCheck+=w,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var A=this.domlisteners;window.removeEventListener("orientationchange",A.orientationChange,!1),window.removeEventListener("resize",A.windowResize,!1);var w=["webkit","moz",""];w.forEach(function(b){document.removeEventListener(b+"fullscreenchange",A.fullScreenChange,!1),document.removeEventListener(b+"fullscreenerror",A.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",A.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",A.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===a.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===a.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});i.exports=E},35098:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},53539:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},12637:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},10217:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},55301:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={CENTER:e(35098),ORIENTATION:e(53539),SCALE_MODE:e(12637),ZOOM:e(10217)};i.exports=a},82085:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="enterfullscreen"},11826:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="fullscreenfailed"},56691:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="fullscreenunsupported"},34739:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="leavefullscreen"},26681:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="orientationchange"},11428:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resize"},40444:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ENTER_FULLSCREEN:e(82085),FULLSCREEN_FAILED:e(11826),FULLSCREEN_UNSUPPORTED:e(56691),LEAVE_FULLSCREEN:e(34739),ORIENTATION_CHANGE:e(26681),RESIZE:e(11428)}},86754:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(98611),v=e(55301),u={Center:e(35098),Events:e(40444),Orientation:e(53539),ScaleManager:e(756),ScaleModes:e(12637),Zoom:e(10217)};u=a(!1,u,v.CENTER),u=a(!1,u,v.ORIENTATION),u=a(!1,u,v.SCALE_MODE),u=a(!1,u,v.ZOOM),i.exports=u},47736:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72632),v=e(40587),u=function(o){var c=o.game.config.defaultPhysicsSystem,l=a(o.settings,"physics",!1);if(!(!c&&!l)){var f=[];if(c&&f.push(v(c+"Physics")),l)for(var m in l)m=v(m.concat("Physics")),f.indexOf(m)===-1&&f.push(m);return f}};i.exports=u},91088:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72632),v=function(u){var o=u.plugins.getDefaultScenePlugins(),c=a(u.settings,"plugins",!1);return Array.isArray(c)?c:o||[]};i.exports=v},90415:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};i.exports=g},87157:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(63946),u=new a({initialize:function(c){this.sys=new v(this,c),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});i.exports=u},13553:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(92980),u=e(7599),o=e(97081),c=e(10850),l=e(683),f=e(72283),m=e(87157),h=e(63946),p=new a({initialize:function(x,T){if(this.game=x,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,T){Array.isArray(T)||(T=[T]);for(var C=0;C<T.length;C++)this._pending.push({key:"default",scene:T[C],autoStart:C===0,data:{}})}x.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new m);var y,x,T,C;for(y=0;y<this._pending.length;y++){x=this._pending[y],T=x.key,C=x.scene;var E;C instanceof m?E=this.createSceneFromInstance(T,C):typeof C=="object"?E=this.createSceneFromObject(T,C):typeof C=="function"&&(E=this.createSceneFromFunction(T,C)),T=E.sys.settings.key,this.keys[T]=E,this.scenes.push(E),this._data[T]&&(E.sys.settings.data=this._data[T].data,this._data[T].autoStart&&(x.autoStart=!0)),(x.autoStart||E.sys.settings.active)&&this._start.push(T)}for(this._pending.length=0,this._data={},this.isBooted=!0,y=0;y<this._start.length;y++)x=this._start[y],this.start(x);this._start.length=0}},processQueue:function(){var y=this._pending.length,x=this._queue.length;if(!(y===0&&x===0)){var T,C;if(y){for(T=0;T<y;T++)C=this._pending[T],this.add(C.key,C.scene,C.autoStart,C.data);for(T=0;T<this._start.length;T++)C=this._start[T],this.start(C);this._start.length=0,this._pending.length=0}for(T=0;T<this._queue.length;T++)C=this._queue[T],this[C.op](C.keyA,C.keyB);this._queue.length=0}},add:function(y,x,T,C){if(T===void 0&&(T=!1),C===void 0&&(C={}),this.isProcessing||!this.isBooted)return this._pending.push({key:y,scene:x,autoStart:T,data:C}),this.isBooted||(this._data[y]={data:C}),null;y=this.getKey(y,x);var E;return x instanceof m?E=this.createSceneFromInstance(y,x):typeof x=="object"?(x.key=y,E=this.createSceneFromObject(y,x)):typeof x=="function"&&(E=this.createSceneFromFunction(y,x)),E.sys.settings.data=C,y=E.sys.settings.key,this.keys[y]=E,this.scenes.push(E),(T||E.sys.settings.active)&&(this._pending.length?this._start.push(y):this.start(y)),E},remove:function(y){if(this.isProcessing)this._queue.push({op:"remove",keyA:y,keyB:null});else{var x=this.getScene(y);if(!x||x.sys.isTransitioning())return this;var T=this.scenes.indexOf(x),C=x.sys.settings.key;T>-1&&(delete this.keys[C],this.scenes.splice(T,1),this._start.indexOf(C)>-1&&(T=this._start.indexOf(C),this._start.splice(T,1)),x.sys.destroy())}return this},bootScene:function(y){var x=y.sys,T=x.settings;x.sceneUpdate=f,y.init&&(y.init.call(y,T.data),T.status=v.INIT,T.isTransition&&x.events.emit(u.TRANSITION_INIT,T.transitionFrom,T.transitionDuration));var C;x.load&&(C=x.load,C.reset()),C&&y.preload?(y.preload.call(y),T.status=v.LOADING,C.once(l.COMPLETE,this.loadComplete,this),C.start()):this.create(y)},loadComplete:function(y){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(y.scene)},payloadComplete:function(y){this.bootScene(y.scene)},update:function(y,x){this.processQueue(),this.isProcessing=!0;for(var T=this.scenes.length-1;T>=0;T--){var C=this.scenes[T].sys;C.settings.status>v.START&&C.settings.status<=v.RUNNING&&C.step(y,x),C.scenePlugin._target&&C.scenePlugin.step(y,x)}},render:function(y){for(var x=0;x<this.scenes.length;x++){var T=this.scenes[x].sys;T.settings.visible&&T.settings.status>=v.LOADING&&T.settings.status<v.SLEEPING&&T.render(y)}this.isProcessing=!1},create:function(y){var x=y.sys,T=x.settings;y.create&&(T.status=v.CREATING,y.create.call(y,T.data),T.status===v.DESTROYED)||(T.isTransition&&x.events.emit(u.TRANSITION_START,T.transitionFrom,T.transitionDuration),y.update&&(x.sceneUpdate=y.update),T.status=v.RUNNING,x.events.emit(u.CREATE,y))},createSceneFromFunction:function(y,x){var T=new x;if(T instanceof m){var C=T.sys.settings.key;if(C!==""&&(y=C),this.keys.hasOwnProperty(y))throw new Error("Cannot add a Scene with duplicate key: "+y);return this.createSceneFromInstance(y,T)}else return T.sys=new h(T),T.sys.settings.key=y,T.sys.init(this.game),T},createSceneFromInstance:function(y,x){var T=x.sys.settings.key;return T===""&&(x.sys.settings.key=y),x.sys.init(this.game),x},createSceneFromObject:function(y,x){var T=new m(x),C=T.sys.settings.key;C!==""?y=C:T.sys.settings.key=y,T.sys.init(this.game);for(var E=["init","preload","create","update","render"],A=0;A<E.length;A++){var w=c(x,E[A],null);w&&(T[E[A]]=w)}if(x.hasOwnProperty("extend")){for(var b in x.extend)if(x.extend.hasOwnProperty(b)){var I=x.extend[b];b==="data"&&T.hasOwnProperty("data")&&typeof I=="object"?T.data.merge(I):b!=="sys"&&(T[b]=I)}}return T},getKey:function(y,x){if(y||(y="default"),typeof x=="function")return y;if(x instanceof m?y=x.sys.settings.key:typeof x=="object"&&x.hasOwnProperty("key")&&(y=x.key),this.keys.hasOwnProperty(y))throw new Error("Cannot add a Scene with duplicate key: "+y);return y},getScenes:function(y,x){y===void 0&&(y=!0),x===void 0&&(x=!1);for(var T=[],C=this.scenes,E=0;E<C.length;E++){var A=C[E];A&&(!y||y&&A.sys.isActive())&&T.push(A)}return x?T.reverse():T},getScene:function(y){if(typeof y=="string"){if(this.keys[y])return this.keys[y]}else for(var x=0;x<this.scenes.length;x++)if(y===this.scenes[x])return y;return null},isActive:function(y){var x=this.getScene(y);return x?x.sys.isActive():null},isPaused:function(y){var x=this.getScene(y);return x?x.sys.isPaused():null},isVisible:function(y){var x=this.getScene(y);return x?x.sys.isVisible():null},isSleeping:function(y){var x=this.getScene(y);return x?x.sys.isSleeping():null},pause:function(y,x){var T=this.getScene(y);return T&&T.sys.pause(x),this},resume:function(y,x){var T=this.getScene(y);return T&&T.sys.resume(x),this},sleep:function(y,x){var T=this.getScene(y);return T&&!T.sys.isTransitioning()&&T.sys.sleep(x),this},wake:function(y,x){var T=this.getScene(y);return T&&T.sys.wake(x),this},run:function(y,x){var T=this.getScene(y);if(!T){for(var C=0;C<this._pending.length;C++)if(this._pending[C].key===y){this.queueOp("start",y,x);break}return this}T.sys.isSleeping()?T.sys.wake(x):T.sys.isPaused()?T.sys.resume(x):this.start(y,x)},start:function(y,x){if(!this.isBooted)return this._data[y]={autoStart:!0,data:x},this;var T=this.getScene(y);if(!T)return console.warn("Scene not found for key: "+y),this;var C=T.sys,E=C.settings.status;if(E>=v.START&&E<=v.CREATING)return this;if(E>=v.RUNNING&&E<=v.SLEEPING)C.shutdown(),C.sceneUpdate=f,C.start(x);else{C.sceneUpdate=f,C.start(x);var A;if(C.load&&(A=C.load),A&&C.settings.hasOwnProperty("pack")&&(A.reset(),A.addPack({payload:C.settings.pack})))return C.settings.status=v.LOADING,A.once(l.COMPLETE,this.payloadComplete,this),A.start(),this}return this.bootScene(T),this},stop:function(y,x){var T=this.getScene(y);if(T&&!T.sys.isTransitioning()&&T.sys.settings.status!==v.SHUTDOWN){var C=T.sys.load;C&&(C.off(l.COMPLETE,this.loadComplete,this),C.off(l.COMPLETE,this.payloadComplete,this)),T.sys.shutdown(x)}return this},switch:function(y,x){var T=this.getScene(y),C=this.getScene(x);return T&&C&&T!==C&&(this.sleep(y),this.isSleeping(x)?this.wake(x):this.start(x)),this},getAt:function(y){return this.scenes[y]},getIndex:function(y){var x=this.getScene(y);return this.scenes.indexOf(x)},bringToTop:function(y){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:y,keyB:null});else{var x=this.getIndex(y);if(x!==-1&&x<this.scenes.length){var T=this.getScene(y);this.scenes.splice(x,1),this.scenes.push(T)}}return this},sendToBack:function(y){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:y,keyB:null});else{var x=this.getIndex(y);if(x!==-1&&x>0){var T=this.getScene(y);this.scenes.splice(x,1),this.scenes.unshift(T)}}return this},moveDown:function(y){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:y,keyB:null});else{var x=this.getIndex(y);if(x>0){var T=x-1,C=this.getScene(y),E=this.getAt(T);this.scenes[x]=E,this.scenes[T]=C}}return this},moveUp:function(y){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:y,keyB:null});else{var x=this.getIndex(y);if(x<this.scenes.length-1){var T=x+1,C=this.getScene(y),E=this.getAt(T);this.scenes[x]=E,this.scenes[T]=C}}return this},moveAbove:function(y,x){if(y===x)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:y,keyB:x});else{var T=this.getIndex(y),C=this.getIndex(x);if(T!==-1&&C!==-1&&C<T){var E=this.getAt(C);this.scenes.splice(C,1),this.scenes.splice(T+(C>T),0,E)}}return this},moveBelow:function(y,x){if(y===x)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:y,keyB:x});else{var T=this.getIndex(y),C=this.getIndex(x);if(T!==-1&&C!==-1&&C>T){var E=this.getAt(C);this.scenes.splice(C,1),T===0?this.scenes.unshift(E):this.scenes.splice(T-(C<T),0,E)}}return this},queueOp:function(y,x,T){return this._queue.push({op:y,keyA:x,keyB:T}),this},swapPosition:function(y,x){if(y===x)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:y,keyB:x});else{var T=this.getIndex(y),C=this.getIndex(x);if(T!==C&&T!==-1&&C!==-1){var E=this.getAt(T);this.scenes[T]=this.scenes[C],this.scenes[C]=E}}return this},dump:function(){for(var y=[],x=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],T=0;T<this.scenes.length;T++){var C=this.scenes[T].sys,E=C.settings.visible&&(C.settings.status===v.RUNNING||C.settings.status===v.PAUSED)?"[*] ":"[-] ";E+=C.settings.key+" ("+x[C.settings.status]+")",y.push(E)}console.log(y.join(`
`))},destroy:function(){for(var y=0;y<this.scenes.length;y++){var x=this.scenes[y].sys;x.destroy()}this.systemScene.sys.destroy(),this.update=f,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});i.exports=p},64051:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=e(56694),u=e(7599),o=e(72632),c=e(91963),l=new v({initialize:function(m){this.scene=m,this.systems=m.sys,this.settings=m.sys.settings,this.key=m.sys.settings.key,this.manager=m.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,m.sys.events.once(u.BOOT,this.boot,this),m.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},start:function(f,m){return f===void 0&&(f=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",f,m),this},restart:function(f){var m=this.key;return this.manager.queueOp("stop",m),this.manager.queueOp("start",m,f),this},transition:function(f){f===void 0&&(f={});var m=o(f,"target",!1),h=this.manager.getScene(m);if(!m||!this.checkValidTransition(h))return!1;var p=o(f,"duration",1e3);this._elapsed=0,this._target=h,this._duration=p,this._willSleep=o(f,"sleep",!1),this._willRemove=o(f,"remove",!1);var y=o(f,"onUpdate",null);y&&(this._onUpdate=y,this._onUpdateScope=o(f,"onUpdateScope",this.scene));var x=o(f,"allowInput",!1);this.settings.transitionAllowInput=x;var T=h.sys.settings;T.isTransition=!0,T.transitionFrom=this.scene,T.transitionDuration=p,T.transitionAllowInput=x,o(f,"moveAbove",!1)?this.manager.moveAbove(this.key,m):o(f,"moveBelow",!1)&&this.manager.moveBelow(this.key,m),h.sys.isSleeping()?h.sys.wake(o(f,"data")):this.manager.start(m,o(f,"data"));var C=o(f,"onStart",null),E=o(f,"onStartScope",this.scene);return C&&C.call(E,this.scene,h,p),this.systems.events.emit(u.TRANSITION_OUT,h,p),!0},checkValidTransition:function(f){return!(!f||f.sys.isActive()||f.sys.isTransitioning()||f===this.scene||this.systems.isTransitioning())},step:function(f,m){this._elapsed+=m,this.transitionProgress=a(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var f=this._target.sys,m=this._target.sys.settings;f.events.emit(u.TRANSITION_COMPLETE,this.scene),m.isTransition=!1,m.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(f,m,h,p){return this.manager.add(f,m,h,p)},launch:function(f,m){return f&&f!==this.key&&this.manager.queueOp("start",f,m),this},run:function(f,m){return f&&f!==this.key&&this.manager.queueOp("run",f,m),this},pause:function(f,m){return f===void 0&&(f=this.key),this.manager.queueOp("pause",f,m),this},resume:function(f,m){return f===void 0&&(f=this.key),this.manager.queueOp("resume",f,m),this},sleep:function(f,m){return f===void 0&&(f=this.key),this.manager.queueOp("sleep",f,m),this},wake:function(f,m){return f===void 0&&(f=this.key),this.manager.queueOp("wake",f,m),this},switch:function(f){return f!==this.key&&this.manager.queueOp("switch",this.key,f),this},stop:function(f,m){return f===void 0&&(f=this.key),this.manager.queueOp("stop",f,m),this},setActive:function(f,m,h){m===void 0&&(m=this.key);var p=this.manager.getScene(m);return p&&p.sys.setActive(f,h),this},setVisible:function(f,m){m===void 0&&(m=this.key);var h=this.manager.getScene(m);return h&&h.sys.setVisible(f),this},isSleeping:function(f){return f===void 0&&(f=this.key),this.manager.isSleeping(f)},isActive:function(f){return f===void 0&&(f=this.key),this.manager.isActive(f)},isPaused:function(f){return f===void 0&&(f=this.key),this.manager.isPaused(f)},isVisible:function(f){return f===void 0&&(f=this.key),this.manager.isVisible(f)},swapPosition:function(f,m){return m===void 0&&(m=this.key),f!==m&&this.manager.swapPosition(f,m),this},moveAbove:function(f,m){return m===void 0&&(m=this.key),f!==m&&this.manager.moveAbove(f,m),this},moveBelow:function(f,m){return m===void 0&&(m=this.key),f!==m&&this.manager.moveBelow(f,m),this},remove:function(f){return f===void 0&&(f=this.key),this.manager.remove(f),this},moveUp:function(f){return f===void 0&&(f=this.key),this.manager.moveUp(f),this},moveDown:function(f){return f===void 0&&(f=this.key),this.manager.moveDown(f),this},bringToTop:function(f){return f===void 0&&(f=this.key),this.manager.bringToTop(f),this},sendToBack:function(f){return f===void 0&&(f=this.key),this.manager.sendToBack(f),this},get:function(f){return this.manager.getScene(f)},getStatus:function(f){var m=this.manager.getScene(f);if(m)return m.sys.getStatus()},getIndex:function(f){return f===void 0&&(f=this.key),this.manager.getIndex(f)},shutdown:function(){var f=this.systems.events;f.off(u.SHUTDOWN,this.shutdown,this),f.off(u.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});c.register("ScenePlugin",l,"scenePlugin"),i.exports=l},36765:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92980),v=e(10850),u=e(30657),o=e(90415),c={create:function(l){return typeof l=="string"?l={key:l}:l===void 0&&(l={}),{status:a.PENDING,key:v(l,"key",""),active:v(l,"active",!1),visible:v(l,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:v(l,"pack",!1),cameras:v(l,"cameras",null),map:v(l,"map",u(o,v(l,"mapAdd",{}))),physics:v(l,"physics",{}),loader:v(l,"loader",{}),plugins:v(l,"plugins",!1),input:v(l,"input",{})}}};i.exports=c},63946:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(92980),u=e(18360),o=e(7599),c=e(47736),l=e(91088),f=e(72283),m=e(36765),h=new a({initialize:function(y,x){this.scene=y,this.game,this.renderer,this.config=x,this.settings=m.create(x),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=f},init:function(p){this.settings.status=v.INIT,this.sceneUpdate=f,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var y=p.plugins;this.plugins=y,y.addToScene(this,u.Global,[u.CoreScene,l(this),c(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(p,y){var x=this.events;x.emit(o.PRE_UPDATE,p,y),x.emit(o.UPDATE,p,y),this.sceneUpdate.call(this.scene,p,y),x.emit(o.POST_UPDATE,p,y)},render:function(p){var y=this.displayList;y.depthSort(),this.events.emit(o.PRE_RENDER,p),this.cameras.render(p,y),this.events.emit(o.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var y=this.settings,x=this.getStatus();return x!==v.CREATING&&x!==v.RUNNING?console.warn("Cannot pause non-running Scene",y.key):this.settings.active&&(y.status=v.PAUSED,y.active=!1,this.events.emit(o.PAUSE,this,p)),this},resume:function(p){var y=this.events,x=this.settings;return this.settings.active||(x.status=v.RUNNING,x.active=!0,y.emit(o.RESUME,this,p)),this},sleep:function(p){var y=this.settings,x=this.getStatus();return x!==v.CREATING&&x!==v.RUNNING?console.warn("Cannot sleep non-running Scene",y.key):(y.status=v.SLEEPING,y.active=!1,y.visible=!1,this.events.emit(o.SLEEP,this,p)),this},wake:function(p){var y=this.events,x=this.settings;return x.status=v.RUNNING,x.active=!0,x.visible=!0,y.emit(o.WAKE,this,p),x.isTransition&&y.emit(o.TRANSITION_WAKE,x.transitionFrom,x.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var p=this.settings.status;return p>v.PENDING&&p<=v.RUNNING},isSleeping:function(){return this.settings.status===v.SLEEPING},isActive:function(){return this.settings.status===v.RUNNING},isPaused:function(){return this.settings.status===v.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,y){return p?this.resume(y):this.pause(y)},start:function(p){var y=this.events,x=this.settings;p&&(x.data=p),x.status=v.START,x.active=!0,x.visible=!0,y.emit(o.START,this),y.emit(o.READY,this,p)},shutdown:function(p){var y=this.events,x=this.settings;y.off(o.TRANSITION_INIT),y.off(o.TRANSITION_START),y.off(o.TRANSITION_COMPLETE),y.off(o.TRANSITION_OUT),x.status=v.SHUTDOWN,x.active=!1,x.visible=!1,y.emit(o.SHUTDOWN,this,p)},destroy:function(){var p=this.events,y=this.settings;y.status=v.DESTROYED,y.active=!1,y.visible=!1,p.emit(o.DESTROY,this),p.removeAllListeners();for(var x=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],T=0;T<x.length;T++)this[x[T]]=null}});i.exports=h},92980:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};i.exports=g},31803:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="addedtoscene"},94817:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="boot"},28977:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="create"},91959:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},363:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},15643:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="postupdate"},17058:i=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="prerender"},77125:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="preupdate"},76018:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="ready"},28620:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="removedfromscene"},41538:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="render"},34268:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},2342:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="shutdown"},96541:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="sleep"},74244:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="start"},17046:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="transitioncomplete"},13637:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="transitioninit"},14733:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="transitionout"},33899:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="transitionstart"},52418:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="transitionwake"},31735:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="update"},8470:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="wake"},7599:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADDED_TO_SCENE:e(31803),BOOT:e(94817),CREATE:e(28977),DESTROY:e(91959),PAUSE:e(363),POST_UPDATE:e(15643),PRE_RENDER:e(17058),PRE_UPDATE:e(77125),READY:e(76018),REMOVED_FROM_SCENE:e(28620),RENDER:e(41538),RESUME:e(34268),SHUTDOWN:e(2342),SLEEP:e(96541),START:e(74244),TRANSITION_COMPLETE:e(17046),TRANSITION_INIT:e(13637),TRANSITION_OUT:e(14733),TRANSITION_START:e(33899),TRANSITION_WAKE:e(52418),UPDATE:e(31735),WAKE:e(8470)}},20436:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(92980),v=e(98611),u={Events:e(7599),GetPhysicsPlugins:e(47736),GetScenePlugins:e(91088),SceneManager:e(13553),ScenePlugin:e(64051),Settings:e(36765),Systems:e(63946)};u=v(!1,u,a),i.exports=u},25798:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(6659),u=e(76038),o=e(98611),c=e(72283),l=new a({Extends:v,initialize:function(m,h,p){v.call(this),this.manager=m,this.key=h,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,p),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(f){return!f||!f.name||typeof f.name!="string"?!1:this.markers[f.name]?(console.error("addMarker "+f.name+" already exists in Sound"),!1):(f=o(!0,{name:"",start:0,duration:this.totalDuration-(f.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},f),this.markers[f.name]=f,!0)},updateMarker:function(f){return!f||!f.name||typeof f.name!="string"?!1:this.markers[f.name]?(this.markers[f.name]=o(!0,this.markers[f.name],f),!0):(console.warn("Audio Marker: "+f.name+" missing in Sound: "+this.key),!1)},removeMarker:function(f){var m=this.markers[f];return m?(this.markers[f]=null,m):null},play:function(f,m){if(f===void 0&&(f=""),typeof f=="object"&&(m=f,f=""),typeof f!="string")return!1;if(!f)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[f])return console.warn("Marker: "+f+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[f],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=o(this.currentConfig,m),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:c,calculateRate:function(){var f=1.0005777895065548,m=this.currentConfig.detune+this.manager.detune,h=Math.pow(f,m);this.totalRate=this.currentConfig.rate*this.manager.rate*h},destroy:function(){this.pendingRemove||(this.emit(u.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});i.exports=l},12486:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(32742),u=e(6659),o=e(76038),c=e(97081),l=e(71608),f=e(51463),m=e(72283),h=e(93736),p=new a({Extends:u,initialize:function(x){u.call(this),this.game=x,this.jsonCache=x.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new h,x.events.on(c.BLUR,this.onGameBlur,this),x.events.on(c.FOCUS,this.onGameFocus,this),x.events.on(c.PRE_STEP,this.update,this),x.events.once(c.DESTROY,this.destroy,this)},add:m,addAudioSprite:function(y,x){x===void 0&&(x={});var T=this.add(y,x);T.spritemap=this.jsonCache.get(y).spritemap;for(var C in T.spritemap)if(T.spritemap.hasOwnProperty(C)){var E=v(x),A=T.spritemap[C];E.loop=A.hasOwnProperty("loop")?A.loop:!1,T.addMarker({name:C,start:A.start,duration:A.end-A.start,config:E})}return T},get:function(y){return f(this.sounds,"key",y)},getAll:function(y){return y?l(this.sounds,"key",y):l(this.sounds)},getAllPlaying:function(){return l(this.sounds,"isPlaying",!0)},play:function(y,x){var T=this.add(y);return T.once(o.COMPLETE,T.destroy,T),x?x.name?(T.addMarker(x),T.play(x.name)):T.play(x):T.play()},playAudioSprite:function(y,x,T){var C=this.addAudioSprite(y);return C.once(o.COMPLETE,C.destroy,C),C.play(x,T)},remove:function(y){var x=this.sounds.indexOf(y);return x!==-1?(y.destroy(),this.sounds.splice(x,1),!0):!1},removeAll:function(){this.sounds.forEach(function(y){y.destroy()}),this.sounds.length=0},removeByKey:function(y){for(var x=0,T=this.sounds.length-1;T>=0;T--){var C=this.sounds[T];C.key===y&&(C.destroy(),this.sounds.splice(T,1),x++)}return x},pauseAll:function(){this.forEachActiveSound(function(y){y.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(y){y.resume()}),this.emit(o.RESUME_ALL,this)},setListenerPosition:m,stopAll:function(){this.forEachActiveSound(function(y){y.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(y){var x=0;return this.getAll(y).forEach(function(T){T.stop()&&x++}),x},unlock:m,onBlur:m,onFocus:m,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(y,x){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var T=this.sounds.length-1;T>=0;T--)this.sounds[T].pendingRemove&&this.sounds.splice(T,1);this.sounds.forEach(function(C){C.update(y,x)})},destroy:function(){this.game.events.off(c.BLUR,this.onGameBlur,this),this.game.events.off(c.FOCUS,this.onGameFocus,this),this.game.events.off(c.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(y,x){var T=this;this.sounds.forEach(function(C,E){C&&!C.pendingRemove&&y.call(x||T,C,E,T.sounds)})},setRate:function(y){return this.rate=y,this},rate:{get:function(){return this._rate},set:function(y){this._rate=y,this.forEachActiveSound(function(x){x.calculateRate()}),this.emit(o.GLOBAL_RATE,this,y)}},setDetune:function(y){return this.detune=y,this},detune:{get:function(){return this._detune},set:function(y){this._detune=y,this.forEachActiveSound(function(x){x.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,y)}}});i.exports=p},84191:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(27622),v=e(17546),u=e(55491),o={create:function(c){var l=c.config.audio,f=c.device.audio;return l.noAudio||!f.webAudio&&!f.audioData?new v(c):f.webAudio&&!l.disableWebAudio?new u(c):new a(c)}};i.exports=o},77578:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="complete"},19679:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="decodedall"},56951:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="decoded"},16436:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="destroy"},55154:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="detune"},57818:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="detune"},57890:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="mute"},83022:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="rate"},99170:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="volume"},64289:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="looped"},67214:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="loop"},53128:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="mute"},73078:i=>{/**
 * @author       pi-kei
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pan"},76763:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pauseall"},88426:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},13765:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="play"},80291:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="rate"},11124:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resumeall"},55382:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},71157:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="seek"},31776:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="stopall"},39450:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="stop"},21939:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="unlocked"},33019:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="volume"},76038:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={COMPLETE:e(77578),DECODED:e(56951),DECODED_ALL:e(19679),DESTROY:e(16436),DETUNE:e(55154),GLOBAL_DETUNE:e(57818),GLOBAL_MUTE:e(57890),GLOBAL_RATE:e(83022),GLOBAL_VOLUME:e(99170),LOOP:e(67214),LOOPED:e(64289),MUTE:e(53128),PAN:e(73078),PAUSE_ALL:e(76763),PAUSE:e(88426),PLAY:e(13765),RATE:e(80291),RESUME_ALL:e(11124),RESUME:e(55382),SEEK:e(71157),STOP_ALL:e(31776),STOP:e(39450),UNLOCKED:e(21939),VOLUME:e(33019)}},34350:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25798),v=e(56694),u=e(76038),o=e(82897),c=new v({Extends:a,initialize:function(f,m,h){if(h===void 0&&(h={}),this.tags=f.game.cache.audio.get(m),!this.tags)throw new Error('No cached audio asset with key "'+m);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,a.call(this,f,m,h)},play:function(l,f){return this.manager.isLocked(this,"play",[l,f])||!a.prototype.play.call(this,l,f)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!a.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!a.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(u.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var l=this.currentConfig.seek,f=this.currentConfig.delay,m=(this.currentMarker?this.currentMarker.start:0)+l;return this.previousTime=m,this.audio.currentTime=m,this.applyConfig(),f===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+f*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var l=0;l<this.tags.length;l++){var f=this.tags[l];if(f.dataset.used==="false")return f.dataset.used="true",this.audio=f,!0}if(!this.manager.override)return!1;var m=[];this.manager.forEachActiveSound(function(p){p.key===this.key&&p.audio&&m.push(p)},this),m.sort(function(p,y){return p.loop===y.loop?y.seek/y.duration-p.seek/p.duration:p.loop?1:-1});var h=m[0];return this.audio=h.audio,h.reset(),h.audio=null,h.startTime=0,h.previousTime=0,!0},playCatchPromise:function(){var l=this.audio.play();l&&l.catch(function(f){console.warn(f)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){a.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(l){if(this.isPlaying){if(this.startTime>0){this.startTime<l-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,l-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var f=this.currentMarker?this.currentMarker.start:0,m=f+this.duration,h=this.audio.currentTime;if(this.currentConfig.loop)h>=m-this.manager.loopEndOffset?(this.audio.currentTime=f+Math.max(0,h-m),h=this.audio.currentTime):h<f&&(this.audio.currentTime+=f,h=this.audio.currentTime),h<this.previousTime&&this.emit(u.LOOPED,this);else if(h>=m){this.reset(),this.stopAndReleaseAudioTag(),this.emit(u.COMPLETE,this);return}this.previousTime=h}},destroy:function(){a.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){a.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(l){this.currentConfig.mute=l,!this.manager.isLocked(this,"mute",l)&&(this.updateMute(),this.emit(u.MUTE,this,l))}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.currentConfig.volume},set:function(l){this.currentConfig.volume=l,!this.manager.isLocked(this,"volume",l)&&(this.updateVolume(),this.emit(u.VOLUME,this,l))}},setVolume:function(l){return this.volume=l,this},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,!this.manager.isLocked(this,u.RATE,l)&&(this.calculateRate(),this.emit(u.RATE,this,l))}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,!this.manager.isLocked(this,u.DETUNE,l)&&(this.calculateRate(),this.emit(u.DETUNE,this,l))}},setDetune:function(l){return this.detune=l,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.isLocked(this,"seek",l)||this.startTime>0||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.isPlaying?(this.previousTime=l,this.audio.currentTime=l):this.isPaused&&(this.currentConfig.seek=l),this.emit(u.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,!this.manager.isLocked(this,"loop",l)&&(this.audio&&(this.audio.loop=l),this.emit(u.LOOP,this,l))}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.currentConfig.pan},set:function(l){this.currentConfig.pan=l,this.emit(u.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});i.exports=c},27622:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12486),v=e(56694),u=e(76038),o=e(34350),c=new v({Extends:a,initialize:function(f){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,a.call(this,f)},add:function(l,f){var m=new o(this,l,f);return this.sounds.push(m),m},unlock:function(){this.locked=!1;var l=this;if(this.game.cache.audio.entries.each(function(p,y){for(var x=0;x<y.length;x++)if(y[x].dataset.locked==="true")return l.locked=!0,!1;return!0}),!!this.locked){var f=!1,m=function(){f=!0},h=function(){if(f){f=!1;return}document.body.removeEventListener("touchmove",m),document.body.removeEventListener("touchend",h);var p=[];if(l.game.cache.audio.entries.each(function(x,T){for(var C=0;C<T.length;C++){var E=T[C];E.dataset.locked==="true"&&p.push(E)}return!0}),p.length!==0){var y=p[p.length-1];y.oncanplaythrough=function(){y.oncanplaythrough=null,p.forEach(function(x){x.dataset.locked="false"}),l.unlocked=!0},p.forEach(function(x){x.load()})}};this.once(u.UNLOCKED,function(){for(this.forEachActiveSound(function(y){y.currentMarker===null&&y.duration===0&&(y.duration=y.tags[0].duration),y.totalDuration=y.tags[0].duration});this.lockedActionsQueue.length;){var p=this.lockedActionsQueue.shift();p.sound[p.prop].apply?p.sound[p.prop].apply(p.sound,p.value||[]):p.sound[p.prop]=p.value}},this),document.body.addEventListener("touchmove",m,!1),document.body.addEventListener("touchend",h,!1)}},onBlur:function(){this.forEachActiveSound(function(l){l.isPlaying&&(this.onBlurPausedSounds.push(l),l.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(l){l.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){a.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(l,f,m){return l.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:l,prop:f,value:m}),!0):!1},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this._mute},set:function(l){this._mute=l,this.forEachActiveSound(function(f){f.updateMute()}),this.emit(u.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this._volume},set:function(l){this._volume=l,this.forEachActiveSound(function(f){f.updateVolume()}),this.emit(u.GLOBAL_VOLUME,this,l)}}});i.exports=c},56751:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={SoundManagerCreator:e(84191),Events:e(76038),BaseSound:e(25798),BaseSoundManager:e(12486),WebAudioSound:e(96008),WebAudioSoundManager:e(55491),HTML5AudioSound:e(34350),HTML5AudioSoundManager:e(27622),NoAudioSound:e(38662),NoAudioSoundManager:e(17546)}},38662:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25798),v=e(56694),u=e(6659),o=e(98611),c=e(72283),l=function(){return!1},f=function(){return null},m=function(){return this},h=new v({Extends:u,initialize:function(y,x,T){T===void 0&&(T={}),u.call(this),this.manager=y,this.key=x,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},T),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:l,updateMarker:l,removeMarker:f,play:l,pause:l,resume:l,stop:l,setMute:m,setVolume:m,setRate:m,setDetune:m,setSeek:m,setLoop:m,setPan:m,applyConfig:f,resetConfig:f,update:c,calculateRate:f,destroy:function(){a.prototype.destroy.call(this)}});i.exports=h},17546:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12486),v=e(56694),u=e(6659),o=e(38662),c=e(72283),l=new v({Extends:u,initialize:function(m){u.call(this),this.game=m,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(f,m){var h=new o(this,f,m);return this.sounds.push(h),h},addAudioSprite:function(f,m){var h=this.add(f,m);return h.spritemap={},h},get:function(f){return a.prototype.get.call(this,f)},getAll:function(f){return a.prototype.getAll.call(this,f)},play:function(f,m){return!1},playAudioSprite:function(f,m,h){return!1},remove:function(f){return a.prototype.remove.call(this,f)},removeAll:function(){return a.prototype.removeAll.call(this)},removeByKey:function(f){return a.prototype.removeByKey.call(this,f)},stopByKey:function(f){return a.prototype.stopByKey.call(this,f)},onBlur:c,onFocus:c,onGameBlur:c,onGameFocus:c,pauseAll:c,resumeAll:c,stopAll:c,update:c,setRate:c,setDetune:c,setMute:c,setVolume:c,unlock:c,forEachActiveSound:function(f,m){a.prototype.forEachActiveSound.call(this,f,m)},destroy:function(){a.prototype.destroy.call(this)}});i.exports=l},96008:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(25798),v=e(56694),u=e(76038),o=e(72632),c=new v({Extends:a,initialize:function(f,m,h){if(h===void 0&&(h={}),this.audioBuffer=f.game.cache.audio.get(m),!this.audioBuffer)throw new Error('Audio key "'+m+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=f.context.createGain(),this.volumeNode=f.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),f.context.createPanner&&(this.spatialNode=f.context.createPanner(),this.volumeNode.connect(this.spatialNode)),f.context.createStereoPanner?(this.pannerNode=f.context.createStereoPanner(),f.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(f.destination)):f.context.createPanner?this.spatialNode.connect(f.destination):this.volumeNode.connect(f.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,a.call(this,f,m,h)},play:function(l,f){return a.prototype.play.call(this,l,f)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(u.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(u.RESUME,this),!0)},stop:function(){return a.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(u.STOP,this),!0):!1},createAndStartBufferSource:function(){var l=this.currentConfig.seek,f=this.currentConfig.delay,m=this.manager.context.currentTime+f,h=(this.currentMarker?this.currentMarker.start:0)+l,p=this.duration-l;this.playTime=m-l,this.startTime=m,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,m),Math.max(0,h),Math.max(0,p)),this.resetConfig()},createAndStartLoopBufferSource:function(){var l=this.getLoopTime(),f=this.currentMarker?this.currentMarker.start:0,m=this.duration;this.loopTime=l,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,l),Math.max(0,f),Math.max(0,m))},createBufferSource:function(){var l=this,f=this.manager.context.createBufferSource();return f.buffer=this.audioBuffer,f.connect(this.muteNode),f.onended=function(m){m.target===l.source&&(l.currentConfig.loop?l.hasLooped=!0:l.hasEnded=!0)},f},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var l=this.currentConfig.source;if(l&&this.manager.context.createPanner){var f=this.spatialNode;f.panningModel=o(l,"panningModel","equalpower"),f.distanceModel=o(l,"distanceModel","inverse"),f.orientationX.value=o(l,"orientationX",0),f.orientationY.value=o(l,"orientationY",0),f.orientationZ.value=o(l,"orientationZ",-1),f.refDistance=o(l,"refDistance",1),f.maxDistance=o(l,"maxDistance",1e4),f.rolloffFactor=o(l,"rolloffFactor",1),f.coneInnerAngle=o(l,"coneInnerAngle",360),f.coneOuterAngle=o(l,"coneOuterAngle",0),f.coneOuterGain=o(l,"coneOuterGain",0),this.spatialSource=o(l,"follow",null),this.spatialSource||(f.positionX.value=o(l,"x",0),f.positionY.value=o(l,"y",0),f.positionZ.value=o(l,"z",0))}a.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(l){this.spatialNode&&(this.spatialNode.positionX.value=l)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(l){this.spatialNode&&(this.spatialNode.positionY.value=l)}},update:function(){if(this.isPlaying&&this.spatialSource){var l=o(this.spatialSource,"x",null),f=o(this.spatialSource,"y",null);l&&l!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=l),f&&f!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=f)}this.hasEnded?(this.hasEnded=!1,a.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(u.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(u.LOOPED,this))},destroy:function(){this.pendingRemove||(a.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){a.prototype.calculateRate.call(this);var l=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,l),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,l)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var l=0,f=0;f<this.rateUpdates.length;f++){var m=0;f<this.rateUpdates.length-1?m=this.rateUpdates[f+1].time:m=this.manager.context.currentTime-this.playTime,l+=(m-this.rateUpdates[f].time)*this.rateUpdates[f].rate}return l},getLoopTime:function(){for(var l=0,f=0;f<this.rateUpdates.length-1;f++)l+=(this.rateUpdates[f+1].time-this.rateUpdates[f].time)*this.rateUpdates[f].rate;var m=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+m.time+(this.duration-l)/m.rate},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,this.calculateRate(),this.emit(u.RATE,this,l)}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,this.calculateRate(),this.emit(u.DETUNE,this,l)}},setDetune:function(l){return this.detune=l,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(l){this.currentConfig.mute=l,this.muteNode.gain.setValueAtTime(l?0:1,0),this.emit(u.MUTE,this,l)}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(l){this.currentConfig.volume=l,this.volumeNode.gain.setValueAtTime(l,0),this.emit(u.VOLUME,this,l)}},setVolume:function(l){return this.volume=l,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.currentConfig.seek=l,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(u.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),l&&this.createAndStartLoopBufferSource()),this.emit(u.LOOP,this,l)}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(l){this.currentConfig.pan=l,this.pannerNode&&this.pannerNode.pan.setValueAtTime(l,this.manager.context.currentTime),this.emit(u.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});i.exports=c},55491:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82329),v=e(12486),u=e(56694),o=e(76038),c=e(97081),l=e(96008),f=e(72632),m=new u({Extends:v,initialize:function(p){this.context=this.createAudioContext(p),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),v.call(this,p),this.locked&&p.isBooted?this.unlock():p.events.once(c.BOOT,this.unlock,this)},createAudioContext:function(h){var p=h.config.audio;if(p.context)return p.context.resume(),p.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(h){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=h,this.masterMuteNode=h.createGain(),this.masterVolumeNode=h.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(h.destination),this.destination=this.masterMuteNode,this},add:function(h,p){var y=new l(this,h,p);return this.sounds.push(y),y},decodeAudio:function(h,p){var y;Array.isArray(h)?y=h:y=[{key:h,data:p}];for(var x=this.game.cache.audio,T=y.length,C=0;C<y.length;C++){var E=y[C],A=E.key,w=E.data;typeof w=="string"&&(w=a(w));var b=(function(R,N){x.add(R,N),this.emit(o.DECODED,R),T--,T===0&&this.emit(o.DECODED_ALL)}).bind(this,A),I=(function(R,N){console.error("Error decoding audio: "+R+" - ",N?N.message:""),T--,T===0&&this.emit(o.DECODED_ALL)}).bind(this,A);this.context.decodeAudioData(w,b,I)}},setListenerPosition:function(h,p){return h===void 0&&(h=this.game.scale.width/2),p===void 0&&(p=this.game.scale.height/2),this.listenerPosition.set(h,p),this},unlock:function(){var h=this,p=document.body,y=function x(){if(h.context&&p){var T=p.removeEventListener;h.context.resume().then(function(){T("touchstart",x),T("touchend",x),T("click",x),T("keydown",x),h.unlocked=!0},function(){T("touchstart",x),T("touchend",x),T("click",x),T("keydown",x)})}};p&&(p.addEventListener("touchstart",y,!1),p.addEventListener("touchend",y,!1),p.addEventListener("click",y,!1),p.addEventListener("keydown",y,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var h=this.context;h&&!this.locked&&(h.state==="suspended"||h.state==="interrupted")&&h.resume()},update:function(h,p){var y=this.context.listener;if(y&&y.positionX!==void 0){var x=f(this.listenerPosition,"x",null),T=f(this.listenerPosition,"y",null);x&&x!==this._spatialx&&(this._spatialx=y.positionX.value=x),T&&T!==this._spatialy&&(this._spatialy=y.positionY.value=T)}v.prototype.update.call(this,h,p),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var h=this;this.context.close().then(function(){h.context=null})}v.prototype.destroy.call(this)},setMute:function(h){return this.mute=h,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(h){this.masterMuteNode.gain.setValueAtTime(h?0:1,0),this.emit(o.GLOBAL_MUTE,this,h)}},setVolume:function(h){return this.volume=h,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(h){this.masterVolumeNode.gain.setValueAtTime(h,0),this.emit(o.GLOBAL_VOLUME,this,h)}}});i.exports=m},71207:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(59959),v=e(56694),u=e(72283),o=e(17922),c=new v({initialize:function(f){this.parent=f,this.list=[],this.position=0,this.addCallback=u,this.removeCallback=u,this._sortKey=""},add:function(l,f){return f?a.Add(this.list,l):a.Add(this.list,l,0,this.addCallback,this)},addAt:function(l,f,m){return m?a.AddAt(this.list,l,f):a.AddAt(this.list,l,f,0,this.addCallback,this)},getAt:function(l){return this.list[l]},getIndex:function(l){return this.list.indexOf(l)},sort:function(l,f){return l?(f===void 0&&(f=function(m,h){return m[l]-h[l]}),o(this.list,f),this):this},getByName:function(l){return a.GetFirst(this.list,"name",l)},getRandom:function(l,f){return a.GetRandom(this.list,l,f)},getFirst:function(l,f,m,h){return a.GetFirst(this.list,l,f,m,h)},getAll:function(l,f,m,h){return a.GetAll(this.list,l,f,m,h)},count:function(l,f){return a.CountAllMatching(this.list,l,f)},swap:function(l,f){a.Swap(this.list,l,f)},moveTo:function(l,f){return a.MoveTo(this.list,l,f)},moveAbove:function(l,f){return a.MoveAbove(this.list,l,f)},moveBelow:function(l,f){return a.MoveBelow(this.list,l,f)},remove:function(l,f){return f?a.Remove(this.list,l):a.Remove(this.list,l,this.removeCallback,this)},removeAt:function(l,f){return f?a.RemoveAt(this.list,l):a.RemoveAt(this.list,l,this.removeCallback,this)},removeBetween:function(l,f,m){return m?a.RemoveBetween(this.list,l,f):a.RemoveBetween(this.list,l,f,this.removeCallback,this)},removeAll:function(l){for(var f=this.list.length;f--;)this.remove(this.list[f],l);return this},bringToTop:function(l){return a.BringToTop(this.list,l)},sendToBack:function(l){return a.SendToBack(this.list,l)},moveUp:function(l){return a.MoveUp(this.list,l),l},moveDown:function(l){return a.MoveDown(this.list,l),l},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(l,f){return a.Replace(this.list,l,f)},exists:function(l){return this.list.indexOf(l)>-1},setAll:function(l,f,m,h){return a.SetAll(this.list,l,f,m,h),this},each:function(l,f){for(var m=[null],h=2;h<arguments.length;h++)m.push(arguments[h]);for(h=0;h<this.list.length;h++)m[0]=this.list[h],l.apply(f,m)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});i.exports=c},33885:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o){if(this.entries={},this.size=0,Array.isArray(o))for(var c=0;c<o.length;c++)this.set(o[c][0],o[c][1])},set:function(u,o){return this.has(u)||this.size++,this.entries[u]=o,this},get:function(u){if(this.has(u))return this.entries[u]},getArray:function(){var u=[],o=this.entries;for(var c in o)u.push(o[c]);return u},has:function(u){return this.entries.hasOwnProperty(u)},delete:function(u){return this.has(u)&&(delete this.entries[u],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(u){delete this.entries[u]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var u=[],o=this.entries;for(var c in o)u.push(o[c]);return u},dump:function(){var u=this.entries;console.group("Map");for(var o in u)console.log(o,u[o]);console.groupEnd()},each:function(u){var o=this.entries;for(var c in o)if(u(c,o[c])===!1)break;return this},contains:function(u){var o=this.entries;for(var c in o)if(o[c]===u)return!0;return!1},merge:function(u,o){o===void 0&&(o=!1);var c=this.entries,l=u.entries;for(var f in l)c.hasOwnProperty(f)&&o?c[f]=l[f]:this.set(f,l[f]);return this}});i.exports=v},74623:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(6659),u=e(36716),o=new a({Extends:v,initialize:function(){v.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(c){return this._active.indexOf(c)>-1},isPending:function(c){return this._toProcess>0&&this._pending.indexOf(c)>-1},isDestroying:function(c){return this._destroy.indexOf(c)>-1},add:function(c){return this.checkQueue&&this.isActive()&&!this.isDestroying()||this.isPending()||(this._pending.push(c),this._toProcess++),c},remove:function(c){if(this.isPending(c)){var l=this._pending,f=l.indexOf(c);f!==-1&&l.splice(f,1)}else this.isActive(c)&&(this._destroy.push(c),this._toProcess++);return c},removeAll:function(){for(var c=this._active,l=this._destroy,f=c.length;f--;)l.push(c[f]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var c=this._destroy,l=this._active,f,m;for(f=0;f<c.length;f++){m=c[f];var h=l.indexOf(m);h!==-1&&(l.splice(h,1),this.emit(u.PROCESS_QUEUE_REMOVE,m))}for(c.length=0,c=this._pending,f=0;f<c.length;f++)m=c[f],(!this.checkQueue||this.checkQueue&&l.indexOf(m)===-1)&&(l.push(m),this.emit(u.PROCESS_QUEUE_ADD,m));return c.length=0,this._toProcess=0,l},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});i.exports=o},68687:(i,g,e)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(53466);function v(w){if(!(this instanceof v))return new v(w);this._maxEntries=Math.max(4,w||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}v.prototype={all:function(){return this._all(this.data,[])},search:function(w){var b=this.data,I=[],R=this.toBBox;if(!C(w,b))return I;for(var N=[],F,P,O,M;b;){for(F=0,P=b.children.length;F<P;F++)O=b.children[F],M=b.leaf?R(O):O,C(w,M)&&(b.leaf?I.push(O):T(w,M)?this._all(O,I):N.push(O));b=N.pop()}return I},collides:function(w){var b=this.data,I=this.toBBox;if(!C(w,b))return!1;for(var R=[],N,F,P,O;b;){for(N=0,F=b.children.length;N<F;N++)if(P=b.children[N],O=b.leaf?I(P):P,C(w,O)){if(b.leaf||T(w,O))return!0;R.push(P)}b=R.pop()}return!1},load:function(w){if(!(w&&w.length))return this;if(w.length<this._minEntries){for(var b=0,I=w.length;b<I;b++)this.insert(w[b]);return this}var R=this._build(w.slice(),0,w.length-1,0);if(!this.data.children.length)this.data=R;else if(this.data.height===R.height)this._splitRoot(this.data,R);else{if(this.data.height<R.height){var N=this.data;this.data=R,R=N}this._insert(R,this.data.height-R.height-1,!0)}return this},insert:function(w){return w&&this._insert(w,this.data.height-1),this},clear:function(){return this.data=E([]),this},remove:function(w,b){if(!w)return this;for(var I=this.data,R=this.toBBox(w),N=[],F=[],P,O,M,L;I||N.length;){if(I||(I=N.pop(),O=N[N.length-1],P=F.pop(),L=!0),I.leaf&&(M=u(w,I.children,b),M!==-1))return I.children.splice(M,1),N.push(I),this._condense(N),this;!L&&!I.leaf&&T(I,R)?(N.push(I),F.push(P),P=0,O=I,I=I.children[0]):O?(P++,I=O.children[P],L=!1):I=null}return this},toBBox:function(w){return w},compareMinX:f,compareMinY:m,toJSON:function(){return this.data},fromJSON:function(w){return this.data=w,this},_all:function(w,b){for(var I=[];w;)w.leaf?b.push.apply(b,w.children):I.push.apply(I,w.children),w=I.pop();return b},_build:function(w,b,I,R){var N=I-b+1,F=this._maxEntries,P;if(N<=F)return P=E(w.slice(b,I+1)),o(P,this.toBBox),P;R||(R=Math.ceil(Math.log(N)/Math.log(F)),F=Math.ceil(N/Math.pow(F,R-1))),P=E([]),P.leaf=!1,P.height=R;var O=Math.ceil(N/F),M=O*Math.ceil(Math.sqrt(F)),L,k,V,W;for(A(w,b,I,M,this.compareMinX),L=b;L<=I;L+=M)for(V=Math.min(L+M-1,I),A(w,L,V,O,this.compareMinY),k=L;k<=V;k+=O)W=Math.min(k+O-1,V),P.children.push(this._build(w,k,W,R-1));return o(P,this.toBBox),P},_chooseSubtree:function(w,b,I,R){for(var N,F,P,O,M,L,k,V;R.push(b),!(b.leaf||R.length-1===I);){for(k=V=1/0,N=0,F=b.children.length;N<F;N++)P=b.children[N],M=h(P),L=y(w,P)-M,L<V?(V=L,k=M<k?M:k,O=P):L===V&&M<k&&(k=M,O=P);b=O||b.children[0]}return b},_insert:function(w,b,I){var R=this.toBBox,N=I?w:R(w),F=[],P=this._chooseSubtree(N,this.data,b,F);for(P.children.push(w),l(P,N);b>=0&&F[b].children.length>this._maxEntries;)this._split(F,b),b--;this._adjustParentBBoxes(N,F,b)},_split:function(w,b){var I=w[b],R=I.children.length,N=this._minEntries;this._chooseSplitAxis(I,N,R);var F=this._chooseSplitIndex(I,N,R),P=E(I.children.splice(F,I.children.length-F));P.height=I.height,P.leaf=I.leaf,o(I,this.toBBox),o(P,this.toBBox),b?w[b-1].children.push(P):this._splitRoot(I,P)},_splitRoot:function(w,b){this.data=E([w,b]),this.data.height=w.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(w,b,I){var R,N,F,P,O,M,L,k;for(M=L=1/0,R=b;R<=I-b;R++)N=c(w,0,R,this.toBBox),F=c(w,R,I,this.toBBox),P=x(N,F),O=h(N)+h(F),P<M?(M=P,k=R,L=O<L?O:L):P===M&&O<L&&(L=O,k=R);return k},_chooseSplitAxis:function(w,b,I){var R=w.leaf?this.compareMinX:f,N=w.leaf?this.compareMinY:m,F=this._allDistMargin(w,b,I,R),P=this._allDistMargin(w,b,I,N);F<P&&w.children.sort(R)},_allDistMargin:function(w,b,I,R){w.children.sort(R);var N=this.toBBox,F=c(w,0,b,N),P=c(w,I-b,I,N),O=p(F)+p(P),M,L;for(M=b;M<I-b;M++)L=w.children[M],l(F,w.leaf?N(L):L),O+=p(F);for(M=I-b-1;M>=b;M--)L=w.children[M],l(P,w.leaf?N(L):L),O+=p(P);return O},_adjustParentBBoxes:function(w,b,I){for(var R=I;R>=0;R--)l(b[R],w)},_condense:function(w){for(var b=w.length-1,I;b>=0;b--)w[b].children.length===0?b>0?(I=w[b-1].children,I.splice(I.indexOf(w[b]),1)):this.clear():o(w[b],this.toBBox)},compareMinX:function(w,b){return w.left-b.left},compareMinY:function(w,b){return w.top-b.top},toBBox:function(w){return{minX:w.left,minY:w.top,maxX:w.right,maxY:w.bottom}}};function u(w,b,I){if(!I)return b.indexOf(w);for(var R=0;R<b.length;R++)if(I(w,b[R]))return R;return-1}function o(w,b){c(w,0,w.children.length,b,w)}function c(w,b,I,R,N){N||(N=E(null)),N.minX=1/0,N.minY=1/0,N.maxX=-1/0,N.maxY=-1/0;for(var F=b,P;F<I;F++)P=w.children[F],l(N,w.leaf?R(P):P);return N}function l(w,b){return w.minX=Math.min(w.minX,b.minX),w.minY=Math.min(w.minY,b.minY),w.maxX=Math.max(w.maxX,b.maxX),w.maxY=Math.max(w.maxY,b.maxY),w}function f(w,b){return w.minX-b.minX}function m(w,b){return w.minY-b.minY}function h(w){return(w.maxX-w.minX)*(w.maxY-w.minY)}function p(w){return w.maxX-w.minX+(w.maxY-w.minY)}function y(w,b){return(Math.max(b.maxX,w.maxX)-Math.min(b.minX,w.minX))*(Math.max(b.maxY,w.maxY)-Math.min(b.minY,w.minY))}function x(w,b){var I=Math.max(w.minX,b.minX),R=Math.max(w.minY,b.minY),N=Math.min(w.maxX,b.maxX),F=Math.min(w.maxY,b.maxY);return Math.max(0,N-I)*Math.max(0,F-R)}function T(w,b){return w.minX<=b.minX&&w.minY<=b.minY&&b.maxX<=w.maxX&&b.maxY<=w.maxY}function C(w,b){return b.minX<=w.maxX&&b.minY<=w.maxY&&b.maxX>=w.minX&&b.maxY>=w.minY}function E(w){return{children:w,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function A(w,b,I,R,N){for(var F=[b,I],P;F.length;)I=F.pop(),b=F.pop(),!(I-b<=R)&&(P=b+Math.ceil((I-b)/R/2)*R,a(w,P,b,I,N),F.push(b,P,P,I))}i.exports=v},58403:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o){if(this.entries=[],Array.isArray(o))for(var c=0;c<o.length;c++)this.set(o[c])},set:function(u){return this.entries.indexOf(u)===-1&&this.entries.push(u),this},get:function(u,o){for(var c=0;c<this.entries.length;c++){var l=this.entries[c];if(l[u]===o)return l}},getArray:function(){return this.entries.slice(0)},delete:function(u){var o=this.entries.indexOf(u);return o>-1&&this.entries.splice(o,1),this},dump:function(){console.group("Set");for(var u=0;u<this.entries.length;u++){var o=this.entries[u];console.log(o)}console.groupEnd()},each:function(u,o){var c,l=this.entries.slice(),f=l.length;if(o)for(c=0;c<f&&u.call(o,l[c],c)!==!1;c++);else for(c=0;c<f&&u(l[c],c)!==!1;c++);return this},iterate:function(u,o){var c,l=this.entries.length;if(o)for(c=0;c<l&&u.call(o,this.entries[c],c)!==!1;c++);else for(c=0;c<l&&u(this.entries[c],c)!==!1;c++);return this},iterateLocal:function(u){var o,c=[];for(o=1;o<arguments.length;o++)c.push(arguments[o]);var l=this.entries.length;for(o=0;o<l;o++){var f=this.entries[o];f[u].apply(f,c)}return this},clear:function(){return this.entries.length=0,this},contains:function(u){return this.entries.indexOf(u)>-1},union:function(u){var o=new v;return u.entries.forEach(function(c){o.set(c)}),this.entries.forEach(function(c){o.set(c)}),o},intersect:function(u){var o=new v;return this.entries.forEach(function(c){u.contains(c)&&o.set(c)}),o},difference:function(u){var o=new v;return this.entries.forEach(function(c){u.contains(c)||o.set(c)}),o},size:{get:function(){return this.entries.length},set:function(u){return u<this.entries.length?this.entries.length=u:this.entries.length}}});i.exports=v},90881:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82897),v=e(56694),u=e(84314),o=e(93736),c=new v({initialize:function(f,m,h,p){f===void 0&&(f=0),m===void 0&&(m=f),h===void 0&&(h=0),p===void 0&&(p=null),this._width=f,this._height=m,this._parent=p,this.aspectMode=h,this.aspectRatio=m===0?1:f/m,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(l){return l===void 0&&(l=0),this.aspectMode=l,this.setSize(this._width,this._height)},setSnap:function(l,f){return l===void 0&&(l=0),f===void 0&&(f=l),this.snapTo.set(l,f),this.setSize(this._width,this._height)},setParent:function(l){return this._parent=l,this.setSize(this._width,this._height)},setMin:function(l,f){return l===void 0&&(l=0),f===void 0&&(f=l),this.minWidth=a(l,0,this.maxWidth),this.minHeight=a(f,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(l,f){return l===void 0&&(l=Number.MAX_VALUE),f===void 0&&(f=l),this.maxWidth=a(l,this.minWidth,Number.MAX_VALUE),this.maxHeight=a(f,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(l,f){switch(l===void 0&&(l=0),f===void 0&&(f=l),this.aspectMode){case c.NONE:this._width=this.getNewWidth(u(l,this.snapTo.x)),this._height=this.getNewHeight(u(f,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case c.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(u(l,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case c.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(u(f,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case c.FIT:this.constrain(l,f,!0);break;case c.ENVELOP:this.constrain(l,f,!1);break}return this},setAspectRatio:function(l){return this.aspectRatio=l,this.setSize(this._width,this._height)},resize:function(l,f){return this._width=this.getNewWidth(u(l,this.snapTo.x)),this._height=this.getNewHeight(u(f,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(l,f){return f===void 0&&(f=!0),l=a(l,this.minWidth,this.maxWidth),f&&this._parent&&l>this._parent.width&&(l=Math.max(this.minWidth,this._parent.width)),l},getNewHeight:function(l,f){return f===void 0&&(f=!0),l=a(l,this.minHeight,this.maxHeight),f&&this._parent&&l>this._parent.height&&(l=Math.max(this.minHeight,this._parent.height)),l},constrain:function(l,f,m){l===void 0&&(l=0),f===void 0&&(f=l),m===void 0&&(m=!0),l=this.getNewWidth(l),f=this.getNewHeight(f);var h=this.snapTo,p=f===0?1:l/f;return m&&this.aspectRatio>p||!m&&this.aspectRatio<p?(l=u(l,h.x),f=l/this.aspectRatio,h.y>0&&(f=u(f,h.y),l=f*this.aspectRatio)):(m&&this.aspectRatio<p||!m&&this.aspectRatio>p)&&(f=u(f,h.y),l=f*this.aspectRatio,h.x>0&&(l=u(l,h.x),f=l*(1/this.aspectRatio))),this._width=l,this._height=f,this},fitTo:function(l,f){return this.constrain(l,f,!0)},envelop:function(l,f){return this.constrain(l,f,!1)},setWidth:function(l){return this.setSize(l,this._height)},setHeight:function(l){return this.setSize(this._width,l)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(l){l&&l.style&&(l.style.width=this._width+"px",l.style.height=this._height+"px")},copy:function(l){return l.setAspectMode(this.aspectMode),l.aspectRatio=this.aspectRatio,l.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(l){this.setSize(l,this._height)}},height:{get:function(){return this._height},set:function(l){this.setSize(this._width,l)}}});c.NONE=0,c.WIDTH_CONTROLS_HEIGHT=1,c.HEIGHT_CONTROLS_WIDTH=2,c.FIT=3,c.ENVELOP=4,i.exports=c},94160:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="add"},95393:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="remove"},36716:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={PROCESS_QUEUE_ADD:e(94160),PROCESS_QUEUE_REMOVE:e(95393)}},20010:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Events:e(36716),List:e(71207),Map:e(33885),ProcessQueue:e(74623),RTree:e(68687),Set:e(58403),Size:e(90881)}},17487:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(82897),u=e(27119),o=e(86459),c=e(28621),l=e(31673),f=new a({Extends:l,initialize:function(h,p,y,x,T){l.call(this,h,p,y,x,T),this.add("__BASE",0,0,0,x,T),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=x,this.height=T,this.imageData=this.context.getImageData(0,0,x,T),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(m,h,p,y){return y===void 0&&(y=!0),this.context.drawImage(p,m,h),y&&this.update(),this},drawFrame:function(m,h,p,y,x){p===void 0&&(p=0),y===void 0&&(y=0),x===void 0&&(x=!0);var T=this.manager.getFrame(m,h);if(T){var C=T.canvasData,E=T.cutWidth,A=T.cutHeight,w=T.source.resolution;this.context.drawImage(T.source.image,C.x,C.y,E,A,p,y,E/w,A/w),x&&this.update()}return this},setPixel:function(m,h,p,y,x,T){T===void 0&&(T=255),m=Math.abs(Math.floor(m)),h=Math.abs(Math.floor(h));var C=this.getIndex(m,h);if(C>-1){var E=this.context.getImageData(m,h,1,1);E.data[0]=p,E.data[1]=y,E.data[2]=x,E.data[3]=T,this.context.putImageData(E,m,h)}return this},putData:function(m,h,p,y,x,T,C){return y===void 0&&(y=0),x===void 0&&(x=0),T===void 0&&(T=m.width),C===void 0&&(C=m.height),this.context.putImageData(m,h,p,y,x,T,C),this},getData:function(m,h,p,y){m=v(Math.floor(m),0,this.width-1),h=v(Math.floor(h),0,this.height-1),p=v(p,1,this.width-m),y=v(y,1,this.height-h);var x=this.context.getImageData(m,h,p,y);return x},getPixel:function(m,h,p){p||(p=new u);var y=this.getIndex(m,h);if(y>-1){var x=this.data,T=x[y+0],C=x[y+1],E=x[y+2],A=x[y+3];p.setTo(T,C,E,A)}return p},getPixels:function(m,h,p,y){m===void 0&&(m=0),h===void 0&&(h=0),p===void 0&&(p=this.width),y===void 0&&(y=p),m=Math.abs(Math.round(m)),h=Math.abs(Math.round(h));for(var x=v(m,0,this.width),T=v(m+p,0,this.width),C=v(h,0,this.height),E=v(h+y,0,this.height),A=new u,w=[],b=C;b<E;b++){for(var I=[],R=x;R<T;R++)A=this.getPixel(R,b,A),I.push({x:R,y:b,color:A.color,alpha:A.alphaGL});w.push(I)}return w},getIndex:function(m,h){return m=Math.abs(Math.round(m)),h=Math.abs(Math.round(h)),m<this.width&&h<this.height?(m+h*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(m,h,p,y,x){return m===void 0&&(m=0),h===void 0&&(h=0),p===void 0&&(p=this.width),y===void 0&&(y=this.height),x===void 0&&(x=!0),this.context.clearRect(m,h,p,y),x&&this.update(),this},setSize:function(m,h){return h===void 0&&(h=m),(m!==this.width||h!==this.height)&&(this.canvas.width=m,this.canvas.height=h,this._source.width=m,this._source.height=h,this._source.isPowerOf2=c(m,h),this.frames.__BASE.setSize(m,h,0,0),this.width=m,this.height=h,this.refresh()),this},destroy:function(){l.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});i.exports=f},845:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(95723),v=e(51052),u=e(61068),o=e(56694),c=e(86459),l=e(82047),f=e(72632),m=e(65641),h=e(37410),p=e(31673),y=e(75512),x=new o({Extends:p,initialize:function(C,E,A,w){A===void 0&&(A=256),w===void 0&&(w=256),this.type="DynamicTexture";var b=C.game.renderer,I=b&&b.type===c.CANVAS,R=I?u.create2D(this,A,w):[this];p.call(this,C,E,R,A,w),this.add("__BASE",0,0,0,A,w),this.renderer=b,this.isDrawing=!1,this.canvas=I?R:null,this.context=I?R.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new v(0,0,A,w).setScene(C.game.scene.systemScene,!1),this.renderTarget=I?null:new h(b,A,w,1,0,!1,!0,!0,!1),this.pipeline=I?null:b.pipelines.get(m.SINGLE_PIPELINE),this.setSize(A,w)},setSize:function(T,C){C===void 0&&(C=T);var E=this.get(),A=E.source;if(T!==this.width||C!==this.height){this.canvas&&(this.canvas.width=T,this.canvas.height=C);var w=this.renderTarget;w&&(w.resize(T,C),E.glTexture=w.texture,A.isRenderTexture=!0,A.isGLTexture=!0,A.glTexture=w.texture,A.glTexture.flipY=!0),this.camera.setSize(T,C),A.width=T,A.height=C,E.setSize(T,C),this.width=T,this.height=C}else{var b=this.getSourceImage();E.cutX+T>b.width&&(T=b.width-E.cutX),E.cutY+C>b.height&&(C=b.height-E.cutY),E.setSize(T,C,E.cutX,E.cutY)}return this},setIsSpriteTexture:function(T){return this.isSpriteTexture=T,this},fill:function(T,C,E,A,w,b){var I=this.camera,R=this.renderer;C===void 0&&(C=1),E===void 0&&(E=0),A===void 0&&(A=0),w===void 0&&(w=this.width),b===void 0&&(b=this.height);var N=T>>16&255,F=T>>8&255,P=T&255,O=this.renderTarget;if(I.preRender(),O){O.bind(!0);var M=this.pipeline.manager.set(this.pipeline),L=R.width/O.width,k=R.height/O.height;M.drawFillRect(E*L,A*k,w*L,b*k,y.getTintFromFloats(P/255,F/255,N/255,1),C),O.unbind(!0)}else{var V=this.context;R.setContext(V),V.globalCompositeOperation="source-over",V.fillStyle="rgba("+N+","+F+","+P+","+C+")",V.fillRect(E,A,w,b),R.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.context,C=this.renderTarget;C?C.clear():T&&(T.save(),T.setTransform(1,0,0,1,0,0),T.clearRect(0,0,this.width,this.height),T.restore()),this.dirty=!1}return this},stamp:function(T,C,E,A,w){E===void 0&&(E=0),A===void 0&&(A=0);var b=f(w,"alpha",1),I=f(w,"tint",16777215),R=f(w,"angle",0),N=f(w,"rotation",0),F=f(w,"scale",1),P=f(w,"scaleX",F),O=f(w,"scaleY",F),M=f(w,"originX",.5),L=f(w,"originY",.5),k=f(w,"blendMode",0),V=f(w,"erase",!1),W=f(w,"skipBatch",!1),K=this.manager.resetStamp(b,I);return K.setAngle(0),R!==0?K.setAngle(R):N!==0&&K.setRotation(N),K.setScale(P,O),K.setTexture(T,C),K.setOrigin(M,L),K.setBlendMode(k),V&&(this._eraseMode=!0),W?this.batchGameObject(K,E,A):this.draw(K,E,A),V&&(this._eraseMode=!1),this},erase:function(T,C,E){return this._eraseMode=!0,this.draw(T,C,E),this._eraseMode=!1,this},draw:function(T,C,E,A,w){return this.beginDraw(),this.batchDraw(T,C,E,A,w),this.endDraw(),this},drawFrame:function(T,C,E,A,w,b){return this.beginDraw(),this.batchDrawFrame(T,C,E,A,w,b),this.endDraw(),this},repeat:function(T,C,E,A,w,b,I,R,N){if(E===void 0&&(E=0),A===void 0&&(A=0),w===void 0&&(w=this.width),b===void 0&&(b=this.height),I===void 0&&(I=1),R===void 0&&(R=16777215),N===void 0&&(N=!1),T instanceof l?C=T:C=this.manager.getFrame(T,C),!C)return this;var F=this.manager.resetStamp(I,R);F.setFrame(C),F.setOrigin(0);var P=C.width,O=C.height;w=Math.floor(w),b=Math.floor(b);var M=Math.ceil(w/P),L=Math.ceil(b/O),k=M*P-w,V=L*O-b;k>0&&(k=P-k),V>0&&(V=O-V),E<0&&(M+=Math.ceil(Math.abs(E)/P)),A<0&&(L+=Math.ceil(Math.abs(A)/O));var W=E,K=A,B=!1,G=this.manager.stampCrop.setTo(0,0,P,O);N||this.beginDraw();for(var D=0;D<L;D++){if(K+O<0){K+=O;continue}for(var $=0;$<M;$++){if(B=!1,W+P<0){W+=P;continue}else W<0&&(B=!0,G.width=P+W,G.x=P-G.width);K<0&&(B=!0,G.height=O+K,G.y=O-G.height),k>0&&$===M-1&&(B=!0,G.width=k),V>0&&D===L-1&&(B=!0,G.height=V),B&&F.setCrop(G),this.batchGameObject(F,W,K),F.isCropped=!1,G.setTo(0,0,P,O),W+=P}W=E,K+=O}return N||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var T=this.camera,C=this.renderer,E=this.renderTarget;T.preRender(),E?C.beginCapture(E.width,E.height):C.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(T,C,E,A,w){return Array.isArray(T)||(T=[T]),this.batchList(T,C,E,A,w),this},batchDrawFrame:function(T,C,E,A,w,b){E===void 0&&(E=0),A===void 0&&(A=0),w===void 0&&(w=1),b===void 0&&(b=16777215);var I=this.manager.getFrame(T,C);return I&&(this.renderTarget?this.pipeline.batchTextureFrame(I,E,A,b,w,this.camera.matrix,null):this.batchTextureFrame(I,E,A,w,b)),this},endDraw:function(T){if(T===void 0&&(T=this._eraseMode),this.isDrawing){var C=this.renderer,E=this.renderTarget;if(E){var A=C.endCapture(),w=C.pipelines.setUtility();w.blitFrame(A,E,1,!1,!1,T,this.isSpriteTexture),C.resetScissor(),C.resetViewport()}else C.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(T,C,E,A,w){var b=T.length;if(b!==0)for(var I=0;I<b;I++){var R=T[I];!R||R===this||(R.renderWebGL||R.renderCanvas?this.batchGameObject(R,C,E):R.isParent||R.list?this.batchGroup(R.getChildren(),C,E):typeof R=="string"?this.batchTextureFrameKey(R,null,C,E,A,w):R instanceof l?this.batchTextureFrame(R,C,E,A,w):Array.isArray(R)&&this.batchList(R,C,E,A,w))}},batchGroup:function(T,C,E){C===void 0&&(C=0),E===void 0&&(E=0);for(var A=0;A<T.length;A++){var w=T[A];w.willRender(this.camera)&&this.batchGameObject(w,w.x+C,w.y+E)}},batchGameObject:function(T,C,E){C===void 0&&(C=T.x),E===void 0&&(E=T.y);var A=T.x,w=T.y,b=this.camera,I=this.renderer,R=this._eraseMode,N=T.mask;if(T.setPosition(C,E),this.canvas){if(R){var F=T.blendMode;T.blendMode=a.ERASE}N&&N.preRenderCanvas(I,T,b),T.renderCanvas(I,T,b,null),N&&N.postRenderCanvas(I,T,b),R&&(T.blendMode=F)}else I&&(N&&N.preRenderWebGL(I,T,b),R||I.setBlendMode(T.blendMode),T.renderWebGL(I,T,b),N&&N.postRenderWebGL(I,b,this.renderTarget));T.setPosition(A,w)},batchTextureFrameKey:function(T,C,E,A,w,b){var I=this.manager.getFrame(T,C);I&&this.batchTextureFrame(I,E,A,w,b)},batchTextureFrame:function(T,C,E,A,w){C===void 0&&(C=0),E===void 0&&(E=0),A===void 0&&(A=1),w===void 0&&(w=16777215);var b=this.camera.matrix,I=this.renderTarget;if(I)this.pipeline.batchTextureFrame(T,C,E,w,A,b,null);else{var R=this.context,N=T.canvasData,F=T.source.image;R.save(),R.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",R.globalAlpha=A,b.setToContext(R),N.width>0&&N.height>0&&R.drawImage(F,N.x,N.y,N.width,N.height,C,E,N.width,N.height),R.restore()}},snapshotArea:function(T,C,E,A,w,b,I){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,w,!1,T,C,E,A,b,I):this.renderer.snapshotCanvas(this.canvas,w,!1,T,C,E,A,b,I),this},snapshot:function(T,C,E){return this.snapshotArea(0,0,this.width,this.height,T,C,E)},snapshotPixel:function(T,C,E){return this.snapshotArea(T,C,1,1,E,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(T,C,E,A){var w=this.manager.resetStamp();w.setTexture(this),w.setOrigin(0),w.renderWebGL(T,w,E,A)},renderCanvas:function(){},preDestroy:function(){u.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.stamp.destroy(),this.canvas=null,this.context=null,this.renderer=null,this.scene=null}});i.exports=x},82047:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(82897),u=e(98611),o=new a({initialize:function(l,f,m,h,p,y,x){this.texture=l,this.name=f,this.source=l.source[m],this.sourceIndex=m,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(y,x,h,p)},setSize:function(c,l,f,m){f===void 0&&(f=0),m===void 0&&(m=0),this.cutX=f,this.cutY=m,this.cutWidth=c,this.cutHeight=l,this.width=c,this.height=l,this.halfWidth=Math.floor(c*.5),this.halfHeight=Math.floor(l*.5),this.centerX=Math.floor(c/2),this.centerY=Math.floor(l/2);var h=this.data,p=h.cut;p.x=f,p.y=m,p.w=c,p.h=l,p.r=f+c,p.b=m+l,h.sourceSize.w=c,h.sourceSize.h=l,h.spriteSourceSize.w=c,h.spriteSourceSize.h=l,h.radius=.5*Math.sqrt(c*c+l*l);var y=h.drawImage;return y.x=f,y.y=m,y.width=c,y.height=l,this.updateUVs()},setTrim:function(c,l,f,m,h,p){var y=this.data,x=y.spriteSourceSize;return y.trim=!0,y.sourceSize.w=c,y.sourceSize.h=l,x.x=f,x.y=m,x.w=h,x.h=p,x.r=f+h,x.b=m+p,this.x=f,this.y=m,this.width=h,this.height=p,this.halfWidth=h*.5,this.halfHeight=p*.5,this.centerX=Math.floor(h/2),this.centerY=Math.floor(p/2),this.updateUVs()},setCropUVs:function(c,l,f,m,h,p,y){var x=this.cutX,T=this.cutY,C=this.cutWidth,E=this.cutHeight,A=this.realWidth,w=this.realHeight;l=v(l,0,A),f=v(f,0,w),m=v(m,0,A-l),h=v(h,0,w-f);var b=x+l,I=T+f,R=m,N=h,F=this.data;if(F.trim){var P=F.spriteSourceSize;m=v(m,0,C-l),h=v(h,0,E-f);var O=l+m,M=f+h,L=!(P.r<l||P.b<f||P.x>O||P.y>M);if(L){var k=Math.max(P.x,l),V=Math.max(P.y,f),W=Math.min(P.r,O)-k,K=Math.min(P.b,M)-V;R=W,N=K,p?b=x+(C-(k-P.x)-W):b=x+(k-P.x),y?I=T+(E-(V-P.y)-K):I=T+(V-P.y),l=k,f=V,m=W,h=K}else b=0,I=0,R=0,N=0}else p&&(b=x+(C-l-m)),y&&(I=T+(E-f-h));var B=this.source.width,G=this.source.height;return c.u0=Math.max(0,b/B),c.v0=Math.max(0,I/G),c.u1=Math.min(1,(b+R)/B),c.v1=Math.min(1,(I+N)/G),c.x=l,c.y=f,c.cx=b,c.cy=I,c.cw=R,c.ch=N,c.width=m,c.height=h,c.flipX=p,c.flipY=y,c},updateCropUVs:function(c,l,f){return this.setCropUVs(c,c.x,c.y,c.width,c.height,l,f)},setUVs:function(c,l,f,m,h,p){var y=this.data.drawImage;return y.width=c,y.height=l,this.u0=f,this.v0=m,this.u1=h,this.v1=p,this},updateUVs:function(){var c=this.cutX,l=this.cutY,f=this.cutWidth,m=this.cutHeight,h=this.data.drawImage;h.width=f,h.height=m;var p=this.source.width,y=this.source.height;return this.u0=c/p,this.v0=l/y,this.u1=(c+f)/p,this.v1=(l+m)/y,this},updateUVsInverted:function(){var c=this.source.width,l=this.source.height;return this.u0=(this.cutX+this.cutHeight)/c,this.v0=this.cutY/l,this.u1=this.cutX/c,this.v1=(this.cutY+this.cutWidth)/l,this},clone:function(){var c=new o(this.texture,this.name,this.sourceIndex);return c.cutX=this.cutX,c.cutY=this.cutY,c.cutWidth=this.cutWidth,c.cutHeight=this.cutHeight,c.x=this.x,c.y=this.y,c.width=this.width,c.height=this.height,c.halfWidth=this.halfWidth,c.halfHeight=this.halfHeight,c.centerX=this.centerX,c.centerY=this.centerY,c.rotated=this.rotated,c.data=u(!0,c.data,this.data),c.updateUVs(),c},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});i.exports=o},31673:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(82047),u=e(32547),o='Texture "%s" has no frame "%s"',c=new a({initialize:function(f,m,h,p,y){Array.isArray(h)||(h=[h]),this.manager=f,this.key=m,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var x=0;x<h.length;x++)this.source.push(new u(this,h[x],p,y))},add:function(l,f,m,h,p,y){if(this.has(l))return null;var x=new v(this,l,f,m,h,p,y);return this.frames[l]=x,this.firstFrame==="__BASE"&&(this.firstFrame=l),this.frameTotal++,x},remove:function(l){if(this.has(l)){var f=this.get(l);return f.destroy(),delete this.frames[l],!0}return!1},has:function(l){return this.frames.hasOwnProperty(l)},get:function(l){l||(l=this.firstFrame);var f=this.frames[l];return f||(console.warn(o,this.key,l),f=this.frames[this.firstFrame]),f},getTextureSourceIndex:function(l){for(var f=0;f<this.source.length;f++)if(this.source[f]===l)return f;return-1},getFramesFromTextureSource:function(l,f){f===void 0&&(f=!1);var m=[];for(var h in this.frames)if(!(h==="__BASE"&&!f)){var p=this.frames[h];p.sourceIndex===l&&m.push(p)}return m},getFrameNames:function(l){l===void 0&&(l=!1);var f=Object.keys(this.frames);if(!l){var m=f.indexOf("__BASE");m!==-1&&f.splice(m,1)}return f},getSourceImage:function(l){(l==null||this.frameTotal===1)&&(l="__BASE");var f=this.frames[l];return f?f.source.image:(console.warn(o,this.key,l),this.frames.__BASE.source.image)},getDataSourceImage:function(l){(l==null||this.frameTotal===1)&&(l="__BASE");var f=this.frames[l],m;return f?m=f.sourceIndex:(console.warn(o,this.key,l),m=this.frames.__BASE.sourceIndex),this.dataSource[m].image},setDataSource:function(l){Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++){var m=this.source[f];this.dataSource.push(new u(this,l[f],m.width,m.height))}},setFilter:function(l){var f;for(f=0;f<this.source.length;f++)this.source[f].setFilter(l);for(f=0;f<this.dataSource.length;f++)this.dataSource[f].setFilter(l)},destroy:function(){var l,f=this.source,m=this.dataSource;for(l=0;l<f.length;l++)f[l]&&f[l].destroy();for(l=0;l<m.length;l++)m[l]&&m[l].destroy();for(var h in this.frames){var p=this.frames[h];p&&p.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});i.exports=c},6237:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61068),v=e(17487),u=e(56694),o=e(27119),c=e(86459),l=e(845),f=e(6659),m=e(38203),h=e(82047),p=e(97081),y=e(52780),x=e(10850),T=e(1539),C=e(42911),E=e(69150),A=e(74118),w=e(31673),b=new u({Extends:f,initialize:function(R){f.call(this),this.game=R,this.name="TextureManager",this.list={},this._tempCanvas=a.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new A,this.silentWarnings=!1,R.events.once(p.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(m.LOAD,this.updatePending,this),this.on(m.ERROR,this.updatePending,this);var I=this.game.config;this.addBase64("__DEFAULT",I.defaultImage),this.addBase64("__MISSING",I.missingImage),this.addBase64("__WHITE",I.whiteImage),this.game.events.once(p.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(m.LOAD),this.off(m.ERROR),this.emit(m.READY),this.stamp=new T(this.game.scene.systemScene).setOrigin(0))},checkKey:function(I){return this.exists(I)?(this.silentWarnings||console.error("Texture key already in use: "+I),!1):!0},remove:function(I){if(typeof I=="string")if(this.exists(I))I=this.get(I);else return this.silentWarnings||console.warn("No texture found matching key: "+I),this;return this.list.hasOwnProperty(I.key)&&(I.destroy(),this.emit(m.REMOVE,I.key),this.emit(m.REMOVE_KEY+I.key)),this},removeKey:function(I){return this.list.hasOwnProperty(I)&&delete this.list[I],this},addBase64:function(I,R){if(this.checkKey(I)){var N=this,F=new Image;F.onerror=function(){N.emit(m.ERROR,I)},F.onload=function(){var P=N.create(I,F);E.Image(P,0),N.emit(m.ADD,I,P),N.emit(m.ADD_KEY+I,P),N.emit(m.LOAD,I,P)},F.src=R}return this},getBase64:function(I,R,N,F){N===void 0&&(N="image/png"),F===void 0&&(F=.92);var P="",O=this.getFrame(I,R);if(O&&(O.source.isRenderTexture||O.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(O){var M=O.canvasData,L=a.create2D(this,M.width,M.height),k=L.getContext("2d",{willReadFrequently:!0});M.width>0&&M.height>0&&k.drawImage(O.source.image,M.x,M.y,M.width,M.height,0,0,M.width,M.height),P=L.toDataURL(N,F),a.remove(L)}return P},addImage:function(I,R,N){var F=null;return this.checkKey(I)&&(F=this.create(I,R),E.Image(F,0),N&&F.setDataSource(N),this.emit(m.ADD,I,F),this.emit(m.ADD_KEY+I,F)),F},addGLTexture:function(I,R,N,F){var P=null;return this.checkKey(I)&&(N===void 0&&(N=R.width),F===void 0&&(F=R.height),P=this.create(I,R,N,F),P.add("__BASE",0,0,0,N,F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)),P},addCompressedTexture:function(I,R,N){var F=null;if(this.checkKey(I)){if(F=this.create(I,R),F.add("__BASE",0,0,0,R.width,R.height),N)if(Array.isArray(N))for(var P=0;P<N.length;P++)E.JSONHash(F,P,N[P]);else E.JSONHash(F,0,N);this.emit(m.ADD,I,F),this.emit(m.ADD_KEY+I,F)}return F},addRenderTexture:function(I,R){var N=null;return this.checkKey(I)&&(N=this.create(I,R),N.add("__BASE",0,0,0,R.width,R.height),this.emit(m.ADD,I,N),this.emit(m.ADD_KEY+I,N)),N},generate:function(I,R){if(this.checkKey(I)){var N=a.create(this,1,1);return R.canvas=N,y(R),this.addCanvas(I,N)}else return null},createCanvas:function(I,R,N){if(R===void 0&&(R=256),N===void 0&&(N=256),this.checkKey(I)){var F=a.create(this,R,N,c.CANVAS,!0);return this.addCanvas(I,F)}return null},addCanvas:function(I,R,N){N===void 0&&(N=!1);var F=null;return N?F=new v(this,I,R,R.width,R.height):this.checkKey(I)&&(F=new v(this,I,R,R.width,R.height),this.list[I]=F,this.emit(m.ADD,I,F),this.emit(m.ADD_KEY+I,F)),F},addDynamicTexture:function(I,R,N){var F=null;return typeof I=="string"&&!this.exists(I)?F=new l(this,I,R,N):(F=I,I=F.key),this.checkKey(I)?(this.list[I]=F,this.emit(m.ADD,I,F),this.emit(m.ADD_KEY+I,F)):F=null,F},addAtlas:function(I,R,N,F){return Array.isArray(N.textures)||Array.isArray(N.frames)?this.addAtlasJSONArray(I,R,N,F):this.addAtlasJSONHash(I,R,N,F)},addAtlasJSONArray:function(I,R,N,F){var P=null;if(R instanceof w?(I=P.key,P=R):this.checkKey(I)&&(P=this.create(I,R)),P){if(Array.isArray(N))for(var O=N.length===1,M=0;M<P.source.length;M++){var L=O?N[0]:N[M];E.JSONArray(P,M,L)}else E.JSONArray(P,0,N);F&&P.setDataSource(F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)}return P},addAtlasJSONHash:function(I,R,N,F){var P=null;if(R instanceof w?(I=P.key,P=R):this.checkKey(I)&&(P=this.create(I,R)),P){if(Array.isArray(N))for(var O=0;O<N.length;O++)E.JSONHash(P,O,N[O]);else E.JSONHash(P,0,N);F&&P.setDataSource(F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)}return P},addAtlasXML:function(I,R,N,F){var P=null;return R instanceof w?(I=P.key,P=R):this.checkKey(I)&&(P=this.create(I,R)),P&&(E.AtlasXML(P,0,N),F&&P.setDataSource(F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)),P},addUnityAtlas:function(I,R,N,F){var P=null;return R instanceof w?(I=P.key,P=R):this.checkKey(I)&&(P=this.create(I,R)),P&&(E.UnityYAML(P,0,N),F&&P.setDataSource(F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)),P},addSpriteSheet:function(I,R,N,F){var P=null;if(R instanceof w?(I=P.key,P=R):this.checkKey(I)&&(P=this.create(I,R)),P){var O=P.source[0].width,M=P.source[0].height;E.SpriteSheet(P,0,0,0,O,M,N),F&&P.setDataSource(F),this.emit(m.ADD,I,P),this.emit(m.ADD_KEY+I,P)}return P},addSpriteSheetFromAtlas:function(I,R){if(!this.checkKey(I))return null;var N=x(R,"atlas",null),F=x(R,"frame",null);if(!(!N||!F)){var P=this.get(N),O=P.get(F);if(O){var M=this.create(I,O.source.image);return O.trimmed?E.SpriteSheetFromAtlas(M,O,R):E.SpriteSheet(M,0,O.cutX,O.cutY,O.cutWidth,O.cutHeight,R),this.emit(m.ADD,I,M),this.emit(m.ADD_KEY+I,M),M}}},create:function(I,R,N,F){var P=null;return this.checkKey(I)&&(P=new w(this,I,R,N,F),this.list[I]=P),P},exists:function(I){return this.list.hasOwnProperty(I)},get:function(I){return I===void 0&&(I="__DEFAULT"),this.list[I]?this.list[I]:I instanceof w?I:I instanceof h?I.texture:this.list.__MISSING},cloneFrame:function(I,R){if(this.list[I])return this.list[I].get(R).clone()},getFrame:function(I,R){if(this.list[I])return this.list[I].get(R)},parseFrame:function(I){if(I){if(typeof I=="string")return this.getFrame(I);if(Array.isArray(I)&&I.length===2)return this.getFrame(I[0],I[1]);if(C(I))return this.getFrame(I.key,I.frame);if(I instanceof w)return I.get();if(I instanceof h)return I}else return},getTextureKeys:function(){var I=[];for(var R in this.list)R!=="__DEFAULT"&&R!=="__MISSING"&&R!=="__WHITE"&&I.push(R);return I},getPixel:function(I,R,N,F){var P=this.getFrame(N,F);if(P){I-=P.x,R-=P.y;var O=P.data.cut;if(I+=O.x,R+=O.y,I>=O.x&&I<O.r&&R>=O.y&&R<O.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(P.source.image,I,R,1,1,0,0,1,1);var L=M.getImageData(0,0,1,1);return new o(L.data[0],L.data[1],L.data[2],L.data[3])}}return null},getPixelAlpha:function(I,R,N,F){var P=this.getFrame(N,F);if(P){I-=P.x,R-=P.y;var O=P.data.cut;if(I+=O.x,R+=O.y,I>=O.x&&I<O.r&&R>=O.y&&R<O.b){var M=this._tempContext;M.clearRect(0,0,1,1),M.drawImage(P.source.image,I,R,1,1,0,0,1,1);var L=M.getImageData(0,0,1,1);return L.data[3]}}return null},setTexture:function(I,R,N){return this.list[R]&&(I.texture=this.list[R],I.frame=I.texture.get(N)),I},renameTexture:function(I,R){var N=this.get(I);return N&&I!==R?(N.key=R,this.list[R]=N,delete this.list[I],!0):!1},each:function(I,R){for(var N=[null],F=1;F<arguments.length;F++)N.push(arguments[F]);for(var P in this.list)N[0]=this.list[P],I.apply(R,N)},resetStamp:function(I,R){I===void 0&&(I=1),R===void 0&&(R=16777215);var N=this.stamp;return N.setCrop(),N.setPosition(0),N.setAngle(0),N.setScale(1),N.setAlpha(I),N.setTint(R),N},destroy:function(){for(var I in this.list)this.list[I].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,a.remove(this._tempCanvas)}});i.exports=b},32547:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61068),v=e(56694),u=e(28621),o=e(27394),c=new v({initialize:function(f,m,h,p,y){y===void 0&&(y=!1);var x=f.manager.game;this.renderer=x.renderer,this.texture=f,this.source=m,this.image=m.compressed?null:m,this.compressionAlgorithm=m.compressed?m.format:null,this.resolution=1,this.width=h||m.naturalWidth||m.videoWidth||m.width||0,this.height=p||m.naturalHeight||m.videoHeight||m.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=m instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&m instanceof HTMLVideoElement,this.isRenderTexture=m.type==="RenderTexture"||m.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&m instanceof WebGLTexture,this.isPowerOf2=u(this.width,this.height),this.glTexture=null,this.flipY=y,this.init(x)},init:function(l){var f=this.renderer;if(f){var m=this.source;if(f.gl){var h=this.image,p=this.flipY,y=this.width,x=this.height,T=this.scaleMode;this.isCanvas?this.glTexture=f.createCanvasTexture(h,!1,p):this.isVideo?this.glTexture=f.createVideoTexture(h,!1,p):this.isRenderTexture?this.glTexture=f.createTextureFromSource(null,y,x,T):this.isGLTexture?this.glTexture=m:this.compressionAlgorithm?this.glTexture=f.createTextureFromSource(m):this.glTexture=f.createTextureFromSource(h,y,x,T)}else this.isRenderTexture&&(this.image=m.canvas)}l.config.antialias||this.setFilter(1)},setFilter:function(l){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,l),this.scaleMode=l},setFlipY:function(l){return l===void 0&&(l=!0),this.flipY=l,this},update:function(){var l=this.renderer,f=this.image,m=this.flipY,h=l.gl;h&&this.isCanvas?this.glTexture=l.updateCanvasTexture(f,this.glTexture,m):h&&this.isVideo&&(this.glTexture=l.updateVideoTexture(f,this.glTexture,m))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&a.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});i.exports=c},65154:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={LINEAR:0,NEAREST:1};i.exports=g},49644:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="addtexture"},29569:i=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="addtexture-"},60079:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="onerror"},72665:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="onload"},93006:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="ready"},69018:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="removetexture"},85549:i=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="removetexture-"},38203:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ADD:e(49644),ADD_KEY:e(29569),ERROR:e(60079),LOAD:e(72665),READY:e(93006),REMOVE:e(69018),REMOVE_KEY:e(85549)}},87499:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(98611),v=e(65154),u={CanvasTexture:e(17487),DynamicTexture:e(845),Events:e(38203),FilterMode:v,Frame:e(82047),Parsers:e(69150),Texture:e(31673),TextureManager:e(6237),TextureSource:e(32547)};u=a(!1,u,v),i.exports=u},35082:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(!v.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var u=e.source[a];e.add("__BASE",a,0,0,u.width,u.height);for(var o=v.getElementsByTagName("SubTexture"),c,l=0;l<o.length;l++){var f=o[l].attributes,m=f.name.value,h=parseInt(f.x.value,10),p=parseInt(f.y.value,10),y=parseInt(f.width.value,10),x=parseInt(f.height.value,10);if(c=e.add(m,a,h,p,y,x),f.frameX){var T=Math.abs(parseInt(f.frameX.value,10)),C=Math.abs(parseInt(f.frameY.value,10)),E=parseInt(f.frameWidth.value,10),A=parseInt(f.frameHeight.value,10);c.setTrim(y,x,T,C,E,A)}}return e};i.exports=g},83332:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.source[a];return e.add("__BASE",a,0,0,v.width,v.height),e};i.exports=g},21560:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.source[a];return e.add("__BASE",a,0,0,v.width,v.height),e};i.exports=g},64423:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(32742),v=function(u,o,c){if(!c.frames&&!c.textures){console.warn("Invalid Texture Atlas JSON Array");return}var l=u.source[o];u.add("__BASE",o,0,0,l.width,l.height);for(var f=Array.isArray(c.textures)?c.textures[o].frames:c.frames,m,h=0;h<f.length;h++){var p=f[h];if(m=u.add(p.filename,o,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!m){console.warn("Invalid atlas json, frame already exists: "+p.filename);continue}p.trimmed&&m.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(m.rotated=!0,m.updateUVsInverted());var y=p.anchor||p.pivot;y&&(m.customPivot=!0,m.pivotX=y.x,m.pivotY=y.y),m.customData=a(p)}for(var x in c)x!=="frames"&&(Array.isArray(c[x])?u.customData[x]=c[x].slice(0):u.customData[x]=c[x]);return u};i.exports=v},17264:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(32742),v=function(u,o,c){if(!c.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var l=u.source[o];u.add("__BASE",o,0,0,l.width,l.height);var f=c.frames,m;for(var h in f)if(f.hasOwnProperty(h)){var p=f[h];if(m=u.add(h,o,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!m){console.warn("Invalid atlas json, frame already exists: "+h);continue}p.trimmed&&m.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(m.rotated=!0,m.updateUVsInverted());var y=p.anchor||p.pivot;y&&(m.customPivot=!0,m.pivotX=y.x,m.pivotY=y.y),m.customData=a(p)}for(var x in c)x!=="frames"&&(Array.isArray(c[x])?u.customData[x]=c[x].slice(0):u.customData[x]=c[x]);return u};i.exports=v},67409:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a=[171,75,84,88,32,49,49,187,13,10,26,10],v,u=new Uint8Array(e,0,12);for(v=0;v<u.length;v++)if(u[v]!==a[v]){console.warn("KTXParser - Invalid file format");return}var o=Uint32Array.BYTES_PER_ELEMENT,c=new DataView(e,12,13*o),l=c.getUint32(0,!0)===67305985,f=c.getUint32(1*o,l);if(f!==0){console.warn("KTXParser - Only compressed formats supported");return}var m=c.getUint32(4*o,l),h=c.getUint32(6*o,l),p=c.getUint32(7*o,l),y=Math.max(1,c.getUint32(11*o,l)),x=c.getUint32(12*o,l),T=new Array(y),C=12+13*4+x,E=h,A=p;for(v=0;v<y;v++){var w=new Int32Array(e,C,1)[0];C+=4,T[v]={data:new Uint8Array(e,C,w),width:E,height:A},E=Math.max(1,E>>1),A=Math.max(1,A>>1),C+=w}return{mipmaps:T,width:h,height:p,internalFormat:m,compressed:!0,generateMipmap:!1}};i.exports=g},24904:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(I,R,N,F,P,O,M){return M===void 0&&(M=16),Math.floor((I+N)/P)*Math.floor((R+F)/O)*M}function e(I,R){return I=Math.max(I,16),R=Math.max(R,8),I*R/4}function a(I,R){return I=Math.max(I,8),R=Math.max(R,8),I*R/2}function v(I,R){return g(I,R,3,3,4,4,8)}function u(I,R){return g(I,R,3,3,4,4)}function o(I,R){return g(I,R,4,3,5,4)}function c(I,R){return g(I,R,4,4,5,5)}function l(I,R){return g(I,R,5,4,6,5)}function f(I,R){return g(I,R,5,5,6,6)}function m(I,R){return g(I,R,7,4,8,5)}function h(I,R){return g(I,R,7,5,8,6)}function p(I,R){return g(I,R,7,7,8,8)}function y(I,R){return g(I,R,9,4,10,5)}function x(I,R){return g(I,R,9,5,10,6)}function T(I,R){return g(I,R,9,7,10,8)}function C(I,R){return g(I,R,9,9,10,10)}function E(I,R){return g(I,R,11,9,12,10)}function A(I,R){return g(I,R,11,11,12,12)}var w={0:{sizeFunc:e,glFormat:35841},1:{sizeFunc:e,glFormat:35843},2:{sizeFunc:a,glFormat:35840},3:{sizeFunc:a,glFormat:35842},6:{sizeFunc:v,glFormat:36196},7:{sizeFunc:v,glFormat:33776},8:{sizeFunc:u,glFormat:33777},9:{sizeFunc:u,glFormat:33778},11:{sizeFunc:u,glFormat:33779},22:{sizeFunc:v,glFormat:37492},23:{sizeFunc:u,glFormat:37496},24:{sizeFunc:v,glFormat:37494},25:{sizeFunc:v,glFormat:37488},26:{sizeFunc:u,glFormat:37490},27:{sizeFunc:u,glFormat:37808},28:{sizeFunc:o,glFormat:37809},29:{sizeFunc:c,glFormat:37810},30:{sizeFunc:l,glFormat:37811},31:{sizeFunc:f,glFormat:37812},32:{sizeFunc:m,glFormat:37813},33:{sizeFunc:h,glFormat:37814},34:{sizeFunc:p,glFormat:37815},35:{sizeFunc:y,glFormat:37816},36:{sizeFunc:x,glFormat:37817},37:{sizeFunc:T,glFormat:37818},38:{sizeFunc:C,glFormat:37819},39:{sizeFunc:E,glFormat:37820},40:{sizeFunc:A,glFormat:37821}},b=function(I){for(var R=new Uint32Array(I,0,13),N=R[2],F=w[N].glFormat,P=w[N].sizeFunc,O=R[11],M=R[7],L=R[6],k=52+R[12],V=new Uint8Array(I,k),W=new Array(O),K=0,B=M,G=L,D=0;D<O;D++){var $=P(B,G);W[D]={data:new Uint8Array(V.buffer,V.byteOffset+K,$),width:B,height:G},B=Math.max(1,B>>1),G=Math.max(1,G>>1),K+=$}return{mipmaps:W,width:M,height:L,internalFormat:F,compressed:!0,generateMipmap:!1}};i.exports=b},6143:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72632),v=function(u,o,c,l,f,m,h){var p=a(h,"frameWidth",null),y=a(h,"frameHeight",p);if(p===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var x=u.source[o];u.add("__BASE",o,0,0,x.width,x.height);var T=a(h,"startFrame",0),C=a(h,"endFrame",-1),E=a(h,"margin",0),A=a(h,"spacing",0),w=Math.floor((f-E+A)/(p+A)),b=Math.floor((m-E+A)/(y+A)),I=w*b;I===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",u.key),(T>I||T<-I)&&(T=0),T<0&&(T=I+T),(C===-1||C>I||C<T)&&(C=I);for(var R=E,N=E,F=0,P=0,O=0,M=0;M<I;M++){F=0,P=0;var L=R+p,k=N+y;L>f&&(F=L-f),k>m&&(P=k-m),M>=T&&M<=C&&(u.add(O,o,c+R,l+N,p-F,y-P),O++),R+=p+A,R+p>f&&(R=E,N+=y+A)}return u};i.exports=v},20030:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72632),v=function(u,o,c){var l=a(c,"frameWidth",null),f=a(c,"frameHeight",l);if(!l)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var m=u.source[0];u.add("__BASE",0,0,0,m.width,m.height),a(c,"startFrame",0),a(c,"endFrame",-1);for(var h=a(c,"margin",0),p=a(c,"spacing",0),y=o.cutX,x=o.cutY,T=o.cutWidth,C=o.cutHeight,E=o.realWidth,A=o.realHeight,w=Math.floor((E-h+p)/(l+p)),b=Math.floor((A-h+p)/(f+p)),I=o.x,R=l-I,N=l-(E-T-I),F=o.y,P=f-F,O=f-(A-C-F),M,L=h,k=h,V=0,W=0,K=0;K<b;K++){for(var B=K===0,G=K===b-1,D=0;D<w;D++){var $=D===0,z=D===w-1;if(M=u.add(V,W,y+L,x+k,l,f),$||B||z||G){var H=$?I:0,Y=B?F:0,Z=0,Q=0;$&&(Z+=l-R),z&&(Z+=l-N),B&&(Q+=f-P),G&&(Q+=f-O);var tt=l-Z,et=f-Q;M.cutWidth=tt,M.cutHeight=et,M.setTrim(l,f,H,Y,tt,et)}L+=p,$?L+=R:z?L+=N:L+=l,V++}L=h,k+=p,B?k+=P:G?k+=O:k+=f}return u};i.exports=v},89187:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=0,e=function(v,u,o,c){var l=g-c.y-c.height;v.add(o,u,c.x,l,c.width,c.height)},a=function(v,u,o){var c=v.source[u];v.add("__BASE",u,0,0,c.width,c.height),g=c.height;for(var l=o.split(`
`),f=/^[ ]*(- )*(\w+)+[: ]+(.*)/,m="",h="",p={x:0,y:0,width:0,height:0},y=0;y<l.length;y++){var x=l[y].match(f);if(x){var T=x[1]==="- ",C=x[2],E=x[3];if(T&&(h!==m&&(e(v,u,h,p),m=h),p={x:0,y:0,width:0,height:0}),C==="name"){h=E;continue}switch(C){case"x":case"y":case"width":case"height":p[C]=parseInt(E,10);break}}}return h!==m&&e(v,u,h,p),v};i.exports=a},69150:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AtlasXML:e(35082),Canvas:e(83332),Image:e(21560),JSONArray:e(64423),JSONHash:e(17264),KTXParser:e(67409),PVRParser:e(24904),SpriteSheet:e(6143),SpriteSheetFromAtlas:e(20030),UnityYAML:e(89187)}},93560:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},97042:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o,c,l,f,m,h,p){(l===void 0||l<=0)&&(l=32),(f===void 0||f<=0)&&(f=32),m===void 0&&(m=0),h===void 0&&(h=0),this.name=o,this.firstgid=c|0,this.imageWidth=l|0,this.imageHeight=f|0,this.imageMargin=m|0,this.imageSpacing=h|0,this.properties=p||{},this.images=[],this.total=0},containsImageIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},addImage:function(u,o){return this.images.push({gid:u,image:o}),this.total++,this}});i.exports=v},46422:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=new a({initialize:function(o){if(this.gids=[],o!==void 0)for(var c=0;c<o.length;++c)for(var l=o[c],f=0;f<l.total;++f)this.gids[l.firstgid+f]=l;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(u){this.gids=u?this._gids:void 0}},getTypeIncludingTile:function(u){if(u.type!==void 0&&u.type!=="")return u.type;if(!(!this.gids||u.gid===void 0)){var o=this.gids[u.gid];if(o){var c=o.getTileData(u.gid);if(c)return c.type}}},setTextureAndFrame:function(u,o,c,l){if(o===null&&this.gids&&l.gid!==void 0){var f=this.gids[l.gid];f&&(o===null&&f.image!==void 0&&(o=f.image.key),c===null&&(c=l.gid-f.firstgid),u.scene.textures.getFrame(o,c)||(o=null,c=null))}u.setTexture(o,c)},setPropertiesFromTiledObject:function(u,o){if(this.gids!==void 0&&o.gid!==void 0){var c=this.gids[o.gid];c!==void 0&&this.setFromJSON(u,c.getTileProperties(o.gid))}this.setFromJSON(u,o.properties)},setFromJSON:function(u,o){if(o){if(Array.isArray(o)){o.forEach(function(l){u.setData(l.name,l.value)});return}for(var c in o)u[c]!==void 0?u[c]=o[c]:u.setData(c,o[c])}}});i.exports=v},15043:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93560),v=e(16586),u=e(90715),o=e(89797),c=function(l,f,m,h,p,y,x,T){m===void 0&&(m=32),h===void 0&&(h=32),p===void 0&&(p=10),y===void 0&&(y=10),T===void 0&&(T=!1);var C=null;if(Array.isArray(x)){var E=f!==void 0?f:"map";C=u(E,a.ARRAY_2D,x,m,h,T)}else if(f!==void 0){var A=l.cache.tilemap.get(f);A?C=u(f,A.format,A.data,m,h,T):console.warn("No map data found for key "+f)}return C===null&&(C=new v({tileWidth:m,tileHeight:h,width:p,height:y})),new o(l,C)};i.exports=c},29633:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(12920),o=e(28699),c=e(66658),l=new a({Mixins:[v.Alpha,v.Flip,v.Visible],initialize:function(m,h,p,y,x,T,C,E){this.layer=m,this.index=h,this.x=p,this.y=y,this.width=x,this.height=T,this.right,this.bottom,this.baseWidth=C!==void 0?C:x,this.baseHeight=E!==void 0?E:T,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(f,m){return!(f<this.pixelX||m<this.pixelY||f>this.right||m>this.bottom)},copy:function(f){return this.index=f.index,this.alpha=f.alpha,this.properties=o(f.properties),this.visible=f.visible,this.setFlip(f.flipX,f.flipY),this.tint=f.tint,this.rotation=f.rotation,this.collideUp=f.collideUp,this.collideDown=f.collideDown,this.collideLeft=f.collideLeft,this.collideRight=f.collideRight,this.collisionCallback=f.collisionCallback,this.collisionCallbackContext=f.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(f){var m=this.tilemapLayer;if(m){var h=m.tileToWorldXY(this.x,this.y,void 0,f);return h.x}return this.x*this.baseWidth},getRight:function(f){var m=this.tilemapLayer;return m?this.getLeft(f)+this.width*m.scaleX:this.getLeft(f)+this.width},getTop:function(f){var m=this.tilemapLayer;if(m){var h=m.tileToWorldXY(this.x,this.y,void 0,f);return h.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(f){var m=this.tilemapLayer;return m?this.getTop(f)+this.height*m.scaleY:this.getTop(f)+this.height},getBounds:function(f,m){return m===void 0&&(m=new c),m.x=this.getLeft(f),m.y=this.getTop(f),m.width=this.getRight(f)-m.x,m.height=this.getBottom(f)-m.y,m},getCenterX:function(f){return(this.getLeft(f)+this.getRight(f))/2},getCenterY:function(f){return(this.getTop(f)+this.getBottom(f))/2},intersects:function(f,m,h,p){return!(h<=this.pixelX||p<=this.pixelY||f>=this.right||m>=this.bottom)},isInteresting:function(f,m){return f&&m?this.canCollide||this.hasInterestingFace:f?this.collides:m?this.hasInterestingFace:!1},resetCollision:function(f){if(f===void 0&&(f=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,f){var m=this.tilemapLayer;m&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(f,m,h,p,y){if(m===void 0&&(m=f),h===void 0&&(h=f),p===void 0&&(p=f),y===void 0&&(y=!0),this.collideLeft=f,this.collideRight=m,this.collideUp=h,this.collideDown=p,this.faceLeft=f,this.faceRight=m,this.faceTop=h,this.faceBottom=p,y){var x=this.tilemapLayer;x&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(f,m){return f===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=f,this.collisionCallbackContext=m),this},setSize:function(f,m,h,p){return f!==void 0&&(this.width=f),m!==void 0&&(this.height=m),h!==void 0&&(this.baseWidth=h),p!==void 0&&(this.baseHeight=p),this.updatePixelXY(),this},updatePixelXY:function(){var f=this.layer.orientation;if(f===u.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(f===u.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(f===u.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(f===u.HEXAGONAL){var m=this.layer.staggerAxis,h=this.layer.staggerIndex,p=this.layer.hexSideLength,y,x;m==="y"?(x=(this.baseHeight-p)/2+p,h==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*x):m==="x"&&(y=(this.baseWidth-p)/2+p,this.pixelX=this.x*y,h==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var f=this.layer.tilemapLayer;if(f){var m=f.gidMap[this.index];if(m)return m}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var f=this.tilemapLayer;return f?f.tilemap:null}}});i.exports=l},89797:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(14556),v=e(56694),u=e(75606),o=e(93560),c=e(72632),l=e(94990),f=e(46422),m=e(12920),h=e(52257),p=e(72677),y=e(13747),x=e(29633),T=e(5047),C=e(87177),E=e(47975),A=new v({initialize:function(b,I){this.scene=b,this.tileWidth=I.tileWidth,this.tileHeight=I.tileHeight,this.width=I.width,this.height=I.height,this.orientation=I.orientation,this.renderOrder=I.renderOrder,this.format=I.format,this.version=I.version,this.properties=I.properties,this.widthInPixels=I.widthInPixels,this.heightInPixels=I.heightInPixels,this.imageCollections=I.imageCollections,this.images=I.images,this.layers=I.layers,this.tiles=I.tiles,this.tilesets=I.tilesets,this.objects=I.objects,this.currentLayerIndex=0,this.hexSideLength=I.hexSideLength;var R=this.orientation;this._convert={WorldToTileXY:T.GetWorldToTileXYFunction(R),WorldToTileX:T.GetWorldToTileXFunction(R),WorldToTileY:T.GetWorldToTileYFunction(R),TileToWorldXY:T.GetTileToWorldXYFunction(R),TileToWorldX:T.GetTileToWorldXFunction(R),TileToWorldY:T.GetTileToWorldYFunction(R),GetTileCorners:T.GetTileCornersFunction(R)}},setRenderOrder:function(w){var b=["right-down","left-down","right-up","left-up"];return typeof w=="number"&&(w=b[w]),b.indexOf(w)>-1&&(this.renderOrder=w),this},addTilesetImage:function(w,b,I,R,N,F,P,O){if(w===void 0)return null;if(b==null&&(b=w),!this.scene.sys.textures.exists(b))return console.warn("Invalid Tileset Image: "+b),null;var M=this.scene.sys.textures.get(b),L=this.getTilesetIndex(w);if(L===null&&this.format===o.TILED_JSON)return console.warn("No data found for Tileset: "+w),null;var k=this.tilesets[L];return k?(k.setTileSize(I,R),k.setSpacing(N,F),k.setImage(M),k):(I===void 0&&(I=this.tileWidth),R===void 0&&(R=this.tileHeight),N===void 0&&(N=0),F===void 0&&(F=0),P===void 0&&(P=0),O===void 0&&(O={x:0,y:0}),k=new E(w,P,I,R,N,F,void 0,void 0,O),k.setImage(M),this.tilesets.push(k),this.tiles=a(this),k)},copy:function(w,b,I,R,N,F,P,O){return O=this.getLayer(O),O!==null?(T.Copy(w,b,I,R,N,F,P,O),this):null},createBlankLayer:function(w,b,I,R,N,F,P,O){I===void 0&&(I=0),R===void 0&&(R=0),N===void 0&&(N=this.width),F===void 0&&(F=this.height),P===void 0&&(P=this.tileWidth),O===void 0&&(O=this.tileHeight);var M=this.getLayerIndex(w);if(M!==null)return console.warn("Invalid Tilemap Layer ID: "+w),null;for(var L=new l({name:w,tileWidth:P,tileHeight:O,width:N,height:F,orientation:this.orientation}),k,V=0;V<F;V++){k=[];for(var W=0;W<N;W++)k.push(new x(L,-1,W,V,P,O,this.tileWidth,this.tileHeight));L.data.push(k)}this.layers.push(L),this.currentLayerIndex=this.layers.length-1;var K=new C(this.scene,this,this.currentLayerIndex,b,I,R);return K.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(K),K},createLayer:function(w,b,I,R){var N=this.getLayerIndex(w);if(N===null)return console.warn("Invalid Tilemap Layer ID: "+w),typeof w=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var F=this.layers[N];if(F.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+w),null;this.currentLayerIndex=N,I===void 0&&(I=F.x),R===void 0&&(R=F.y);var P=new C(this.scene,this,N,b,I,R);return P.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(P),P},createFromObjects:function(w,b,I){I===void 0&&(I=!0);var R=[],N=this.getObjectLayer(w);if(!N)return console.warn("createFromObjects: Invalid objectLayerName given: "+w),R;var F=new f(I?this.tilesets:void 0);Array.isArray(b)||(b=[b]);for(var P=N.objects,O=0;O<b.length;O++){var M=b[O],L=c(M,"id",null),k=c(M,"gid",null),V=c(M,"name",null),W=c(M,"type",null);F.enabled=!c(M,"ignoreTileset",null);for(var K,B=[],G=0;G<P.length;G++)K=P[G],(L===null&&k===null&&V===null&&W===null||L!==null&&K.id===L||k!==null&&K.gid===k||V!==null&&K.name===V||W!==null&&F.getTypeIncludingTile(K)===W)&&B.push(K);for(var D=c(M,"classType",y),$=c(M,"scene",this.scene),z=c(M,"container",null),H=c(M,"key",null),Y=c(M,"frame",null),Z=0;Z<B.length;Z++){K=B[Z];var Q=new D($);if(Q.setName(K.name),Q.setPosition(K.x,K.y),F.setTextureAndFrame(Q,H,Y,K),K.width&&(Q.displayWidth=K.width),K.height&&(Q.displayHeight=K.height),this.orientation===m.ISOMETRIC){var tt=this.tileWidth/this.tileHeight,et={x:Q.x-Q.y,y:(Q.x+Q.y)/tt};Q.x=et.x,Q.y=et.y}var lt={x:Q.originX*K.width,y:(Q.originY-(K.gid?1:0))*K.height};if(K.rotation){var ut=u(K.rotation);h(lt,ut),Q.rotation=ut}Q.x+=lt.x,Q.y+=lt.y,(K.flippedHorizontal!==void 0||K.flippedVertical!==void 0)&&Q.setFlip(K.flippedHorizontal,K.flippedVertical),K.visible||(Q.visible=!1),F.setPropertiesFromTiledObject(Q,K),z?z.add(Q):$.add.existing(Q),R.push(Q)}}return R},createFromTiles:function(w,b,I,R,N,F){return F=this.getLayer(F),F===null?null:T.CreateFromTiles(w,b,I,R,N,F)},fill:function(w,b,I,R,N,F,P){return F===void 0&&(F=!0),P=this.getLayer(P),P===null?null:(T.Fill(w,b,I,R,N,F,P),this)},filterObjects:function(w,b,I){if(typeof w=="string"){var R=w;if(w=this.getObjectLayer(w),!w)return console.warn("No object layer found with the name: "+R),null}return w.objects.filter(b,I)},filterTiles:function(w,b,I,R,N,F,P,O){return O=this.getLayer(O),O===null?null:T.FilterTiles(w,b,I,R,N,F,P,O)},findByIndex:function(w,b,I,R){return R=this.getLayer(R),R===null?null:T.FindByIndex(w,b,I,R)},findObject:function(w,b,I){if(typeof w=="string"){var R=w;if(w=this.getObjectLayer(w),!w)return console.warn("No object layer found with the name: "+R),null}return w.objects.find(b,I)||null},findTile:function(w,b,I,R,N,F,P,O){return O=this.getLayer(O),O===null?null:T.FindTile(w,b,I,R,N,F,P,O)},forEachTile:function(w,b,I,R,N,F,P,O){return O=this.getLayer(O),O===null?null:(T.ForEachTile(w,b,I,R,N,F,P,O),this)},getImageIndex:function(w){return this.getIndex(this.images,w)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(w){return w.name})},getIndex:function(w,b){for(var I=0;I<w.length;I++)if(w[I].name===b)return I;return null},getLayer:function(w){var b=this.getLayerIndex(w);return b!==null?this.layers[b]:null},getObjectLayer:function(w){var b=this.getIndex(this.objects,w);return b!==null?this.objects[b]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(w){return w.name})},getLayerIndex:function(w){return w===void 0?this.currentLayerIndex:typeof w=="string"?this.getLayerIndexByName(w):typeof w=="number"&&w<this.layers.length?w:w instanceof C&&w.tilemap===this?w.layerIndex:null},getLayerIndexByName:function(w){return this.getIndex(this.layers,w)},getTileAt:function(w,b,I,R){return R=this.getLayer(R),R===null?null:T.GetTileAt(w,b,I,R)},getTileAtWorldXY:function(w,b,I,R,N){return N=this.getLayer(N),N===null?null:T.GetTileAtWorldXY(w,b,I,R,N)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(w){return w.name})},getTilesWithin:function(w,b,I,R,N,F){return F=this.getLayer(F),F===null?null:T.GetTilesWithin(w,b,I,R,N,F)},getTilesWithinShape:function(w,b,I,R){return R=this.getLayer(R),R===null?null:T.GetTilesWithinShape(w,b,I,R)},getTilesWithinWorldXY:function(w,b,I,R,N,F,P){return P=this.getLayer(P),P===null?null:T.GetTilesWithinWorldXY(w,b,I,R,N,F,P)},getTileset:function(w){var b=this.getIndex(this.tilesets,w);return b!==null?this.tilesets[b]:null},getTilesetIndex:function(w){return this.getIndex(this.tilesets,w)},hasTileAt:function(w,b,I){return I=this.getLayer(I),I===null?null:T.HasTileAt(w,b,I)},hasTileAtWorldXY:function(w,b,I,R){return R=this.getLayer(R),R===null?null:T.HasTileAtWorldXY(w,b,I,R)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(w){this.setLayer(w)}},putTileAt:function(w,b,I,R,N){return R===void 0&&(R=!0),N=this.getLayer(N),N===null?null:T.PutTileAt(w,b,I,R,N)},putTileAtWorldXY:function(w,b,I,R,N,F){return R===void 0&&(R=!0),F=this.getLayer(F),F===null?null:T.PutTileAtWorldXY(w,b,I,R,N,F)},putTilesAt:function(w,b,I,R,N){return R===void 0&&(R=!0),N=this.getLayer(N),N===null?null:(T.PutTilesAt(w,b,I,R,N),this)},randomize:function(w,b,I,R,N,F){return F=this.getLayer(F),F===null?null:(T.Randomize(w,b,I,R,N,F),this)},calculateFacesAt:function(w,b,I){return I=this.getLayer(I),I===null?null:(T.CalculateFacesAt(w,b,I),this)},calculateFacesWithin:function(w,b,I,R,N){return N=this.getLayer(N),N===null?null:(T.CalculateFacesWithin(w,b,I,R,N),this)},removeLayer:function(w){var b=this.getLayerIndex(w);if(b!==null){p(this.layers,b);for(var I=b;I<this.layers.length;I++)this.layers[I].tilemapLayer&&this.layers[I].tilemapLayer.layerIndex--;return this.currentLayerIndex===b&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(w){var b=this.getLayerIndex(w);return b!==null?(w=this.layers[b],w.tilemapLayer.destroy(),p(this.layers,b),this.currentLayerIndex===b&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var w=this.layers,b=0;b<w.length;b++)w[b].tilemapLayer&&w[b].tilemapLayer.destroy(!1);return w.length=0,this.currentLayerIndex=0,this},removeTile:function(w,b,I){b===void 0&&(b=-1),I===void 0&&(I=!0);var R=[];Array.isArray(w)||(w=[w]);for(var N=0;N<w.length;N++){var F=w[N];R.push(this.removeTileAt(F.x,F.y,!0,I,F.tilemapLayer)),b>-1&&this.putTileAt(b,F.x,F.y,I,F.tilemapLayer)}return R},removeTileAt:function(w,b,I,R,N){return I===void 0&&(I=!0),R===void 0&&(R=!0),N=this.getLayer(N),N===null?null:T.RemoveTileAt(w,b,I,R,N)},removeTileAtWorldXY:function(w,b,I,R,N,F){return I===void 0&&(I=!0),R===void 0&&(R=!0),F=this.getLayer(F),F===null?null:T.RemoveTileAtWorldXY(w,b,I,R,N,F)},renderDebug:function(w,b,I){return I=this.getLayer(I),I===null?null:(this.orientation===m.ORTHOGONAL&&T.RenderDebug(w,b,I),this)},renderDebugFull:function(w,b){for(var I=this.layers,R=0;R<I.length;R++)T.RenderDebug(w,b,I[R]);return this},replaceByIndex:function(w,b,I,R,N,F,P){return P=this.getLayer(P),P===null?null:(T.ReplaceByIndex(w,b,I,R,N,F,P),this)},setCollision:function(w,b,I,R,N){return b===void 0&&(b=!0),I===void 0&&(I=!0),N===void 0&&(N=!0),R=this.getLayer(R),R===null?null:(T.SetCollision(w,b,I,R,N),this)},setCollisionBetween:function(w,b,I,R,N){return I===void 0&&(I=!0),R===void 0&&(R=!0),N=this.getLayer(N),N===null?null:(T.SetCollisionBetween(w,b,I,R,N),this)},setCollisionByProperty:function(w,b,I,R){return b===void 0&&(b=!0),I===void 0&&(I=!0),R=this.getLayer(R),R===null?null:(T.SetCollisionByProperty(w,b,I,R),this)},setCollisionByExclusion:function(w,b,I,R){return b===void 0&&(b=!0),I===void 0&&(I=!0),R=this.getLayer(R),R===null?null:(T.SetCollisionByExclusion(w,b,I,R),this)},setCollisionFromCollisionGroup:function(w,b,I){return w===void 0&&(w=!0),b===void 0&&(b=!0),I=this.getLayer(I),I===null?null:(T.SetCollisionFromCollisionGroup(w,b,I),this)},setTileIndexCallback:function(w,b,I,R){return R=this.getLayer(R),R===null?null:(T.SetTileIndexCallback(w,b,I,R),this)},setTileLocationCallback:function(w,b,I,R,N,F,P){return P=this.getLayer(P),P===null?null:(T.SetTileLocationCallback(w,b,I,R,N,F,P),this)},setLayer:function(w){var b=this.getLayerIndex(w);return b!==null&&(this.currentLayerIndex=b),this},setBaseTileSize:function(w,b){this.tileWidth=w,this.tileHeight=b,this.widthInPixels=this.width*w,this.heightInPixels=this.height*b;for(var I=0;I<this.layers.length;I++){this.layers[I].baseTileWidth=w,this.layers[I].baseTileHeight=b;for(var R=this.layers[I].data,N=this.layers[I].width,F=this.layers[I].height,P=0;P<F;P++)for(var O=0;O<N;O++){var M=R[P][O];M!==null&&M.setSize(void 0,void 0,w,b)}}return this},setLayerTileSize:function(w,b,I){if(I=this.getLayer(I),I===null)return this;I.tileWidth=w,I.tileHeight=b;for(var R=I.data,N=I.width,F=I.height,P=0;P<F;P++)for(var O=0;O<N;O++){var M=R[P][O];M!==null&&M.setSize(w,b)}return this},shuffle:function(w,b,I,R,N){return N=this.getLayer(N),N===null?null:(T.Shuffle(w,b,I,R,N),this)},swapByIndex:function(w,b,I,R,N,F,P){return P=this.getLayer(P),P===null?null:(T.SwapByIndex(w,b,I,R,N,F,P),this)},tileToWorldX:function(w,b,I){return I=this.getLayer(I),I===null?null:this._convert.TileToWorldX(w,b,I)},tileToWorldY:function(w,b,I){return I=this.getLayer(I),I===null?null:this._convert.TileToWorldY(w,b,I)},tileToWorldXY:function(w,b,I,R,N){return N=this.getLayer(N),N===null?null:this._convert.TileToWorldXY(w,b,I,R,N)},getTileCorners:function(w,b,I,R){return R=this.getLayer(R),R===null?null:this._convert.GetTileCorners(w,b,I,R)},weightedRandomize:function(w,b,I,R,N,F){return F=this.getLayer(F),F===null?null:(T.WeightedRandomize(b,I,R,N,w,F),this)},worldToTileX:function(w,b,I,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileX(w,b,I,R)},worldToTileY:function(w,b,I,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileY(w,b,I,R)},worldToTileXY:function(w,b,I,R,N,F){return F=this.getLayer(F),F===null?null:this._convert.WorldToTileXY(w,b,I,R,N,F)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});i.exports=A},4843:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(99325),v=e(15043);a.register("tilemap",function(u){var o=u!==void 0?u:{};return v(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})},37940:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(61286),v=e(15043);a.register("tilemap",function(u,o,c,l,f,m,h){return u===null&&(u=void 0),o===null&&(o=void 0),c===null&&(c=void 0),l===null&&(l=void 0),f===null&&(f=void 0),v(this.scene,u,o,c,l,f,m,h)})},87177:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(64937),u=e(89980),o=e(5047),c=e(96193),l=e(93736),f=new a({Extends:u,Mixins:[v.Alpha,v.BlendMode,v.ComputedSize,v.Depth,v.Flip,v.GetBounds,v.Mask,v.Origin,v.Pipeline,v.PostPipeline,v.Transform,v.Visible,v.ScrollFactor,c],initialize:function(h,p,y,x,T,C){u.call(this,h,"TilemapLayer"),this.isTilemap=!0,this.tilemap=p,this.layerIndex=y,this.layer=p.layers[y],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new l,this.setTilesets(x),this.setAlpha(this.layer.alpha),this.setPosition(T,C),this.setOrigin(0,0),this.setSize(p.tileWidth*this.layer.width,p.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(m){var h=[],p=[],y=this.tilemap;Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++){var T=m[x];if(typeof T=="string"&&(T=y.getTileset(T)),T){p.push(T);for(var C=T.firstgid,E=0;E<T.total;E++)h[C+E]=T}}this.gidMap=h,this.tileset=p},setRenderOrder:function(m){var h=["right-down","left-down","right-up","left-up"];return typeof m=="string"&&(m=h.indexOf(m)),m>=0&&m<4&&(this._renderOrder=m),this},calculateFacesAt:function(m,h){return o.CalculateFacesAt(m,h,this.layer),this},calculateFacesWithin:function(m,h,p,y){return o.CalculateFacesWithin(m,h,p,y,this.layer),this},createFromTiles:function(m,h,p,y,x){return o.CreateFromTiles(m,h,p,y,x,this.layer)},cull:function(m){return this.cullCallback(this.layer,m,this.culledTiles,this._renderOrder)},copy:function(m,h,p,y,x,T,C){return o.Copy(m,h,p,y,x,T,C,this.layer),this},fill:function(m,h,p,y,x,T){return o.Fill(m,h,p,y,x,T,this.layer),this},filterTiles:function(m,h,p,y,x,T,C){return o.FilterTiles(m,h,p,y,x,T,C,this.layer)},findByIndex:function(m,h,p){return o.FindByIndex(m,h,p,this.layer)},findTile:function(m,h,p,y,x,T,C){return o.FindTile(m,h,p,y,x,T,C,this.layer)},forEachTile:function(m,h,p,y,x,T,C){return o.ForEachTile(m,h,p,y,x,T,C,this.layer),this},setTint:function(m,h,p,y,x,T){m===void 0&&(m=16777215);var C=function(E){E.tint=m};return this.forEachTile(C,this,h,p,y,x,T)},getTileAt:function(m,h,p){return o.GetTileAt(m,h,p,this.layer)},getTileAtWorldXY:function(m,h,p,y){return o.GetTileAtWorldXY(m,h,p,y,this.layer)},getIsoTileAtWorldXY:function(m,h,p,y,x){p===void 0&&(p=!0);var T=this.tempVec;return o.IsometricWorldToTileXY(m,h,!0,T,x,this.layer,p),this.getTileAt(T.x,T.y,y)},getTilesWithin:function(m,h,p,y,x){return o.GetTilesWithin(m,h,p,y,x,this.layer)},getTilesWithinShape:function(m,h,p){return o.GetTilesWithinShape(m,h,p,this.layer)},getTilesWithinWorldXY:function(m,h,p,y,x,T){return o.GetTilesWithinWorldXY(m,h,p,y,x,T,this.layer)},hasTileAt:function(m,h){return o.HasTileAt(m,h,this.layer)},hasTileAtWorldXY:function(m,h,p){return o.HasTileAtWorldXY(m,h,p,this.layer)},putTileAt:function(m,h,p,y){return o.PutTileAt(m,h,p,y,this.layer)},putTileAtWorldXY:function(m,h,p,y,x){return o.PutTileAtWorldXY(m,h,p,y,x,this.layer)},putTilesAt:function(m,h,p,y){return o.PutTilesAt(m,h,p,y,this.layer),this},randomize:function(m,h,p,y,x){return o.Randomize(m,h,p,y,x,this.layer),this},removeTileAt:function(m,h,p,y){return o.RemoveTileAt(m,h,p,y,this.layer)},removeTileAtWorldXY:function(m,h,p,y,x){return o.RemoveTileAtWorldXY(m,h,p,y,x,this.layer)},renderDebug:function(m,h){return o.RenderDebug(m,h,this.layer),this},replaceByIndex:function(m,h,p,y,x,T){return o.ReplaceByIndex(m,h,p,y,x,T,this.layer),this},setSkipCull:function(m){return m===void 0&&(m=!0),this.skipCull=m,this},setCullPadding:function(m,h){return m===void 0&&(m=1),h===void 0&&(h=1),this.cullPaddingX=m,this.cullPaddingY=h,this},setCollision:function(m,h,p,y){return o.SetCollision(m,h,p,this.layer,y),this},setCollisionBetween:function(m,h,p,y){return o.SetCollisionBetween(m,h,p,y,this.layer),this},setCollisionByProperty:function(m,h,p){return o.SetCollisionByProperty(m,h,p,this.layer),this},setCollisionByExclusion:function(m,h,p){return o.SetCollisionByExclusion(m,h,p,this.layer),this},setCollisionFromCollisionGroup:function(m,h){return o.SetCollisionFromCollisionGroup(m,h,this.layer),this},setTileIndexCallback:function(m,h,p){return o.SetTileIndexCallback(m,h,p,this.layer),this},setTileLocationCallback:function(m,h,p,y,x,T){return o.SetTileLocationCallback(m,h,p,y,x,T,this.layer),this},shuffle:function(m,h,p,y){return o.Shuffle(m,h,p,y,this.layer),this},swapByIndex:function(m,h,p,y,x,T){return o.SwapByIndex(m,h,p,y,x,T,this.layer),this},tileToWorldX:function(m,h){return this.tilemap.tileToWorldX(m,h,this)},tileToWorldY:function(m,h){return this.tilemap.tileToWorldY(m,h,this)},tileToWorldXY:function(m,h,p,y){return this.tilemap.tileToWorldXY(m,h,p,y,this)},getTileCorners:function(m,h,p){return this.tilemap.getTileCorners(m,h,p,this)},weightedRandomize:function(m,h,p,y,x){return o.WeightedRandomize(h,p,y,x,m,this.layer),this},worldToTileX:function(m,h,p){return this.tilemap.worldToTileX(m,h,p,this)},worldToTileY:function(m,h,p){return this.tilemap.worldToTileY(m,h,p,this)},worldToTileXY:function(m,h,p,y,x){return this.tilemap.worldToTileXY(m,h,p,y,x,this)},destroy:function(m){m===void 0&&(m=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),m&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],u.prototype.destroy.call(this))}});i.exports=f},17394:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(69360),v=new a,u=new a,o=new a,c=function(l,f,m,h){var p=f.cull(m),y=p.length,x=m.alpha*f.alpha;if(!(y===0||x<=0)){var T=v,C=u,E=o;C.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY),T.copyFrom(m.matrix);var A=l.currentContext,w=f.gidMap;A.save(),h?(T.multiplyWithOffset(h,-m.scrollX*f.scrollFactorX,-m.scrollY*f.scrollFactorY),C.e=f.x,C.f=f.y,T.multiply(C,E),E.copyToContext(A)):(C.e-=m.scrollX*f.scrollFactorX,C.f-=m.scrollY*f.scrollFactorY,C.copyToContext(A)),(!l.antialias||f.scaleX>1||f.scaleY>1)&&(A.imageSmoothingEnabled=!1);for(var b=0;b<y;b++){var I=p[b],R=w[I.index];if(R){var N=R.image.getSourceImage(),F=R.getTileTextureCoordinates(I.index),P=R.tileWidth,O=R.tileHeight;if(!(F===null||P===0||O===0)){var M=P*.5,L=O*.5;F.x+=R.tileOffset.x,F.y+=R.tileOffset.y,A.save(),A.translate(I.pixelX+M,I.pixelY+L),I.rotation!==0&&A.rotate(I.rotation),(I.flipX||I.flipY)&&A.scale(I.flipX?-1:1,I.flipY?-1:1),A.globalAlpha=x*I.alpha,A.drawImage(N,F.x,F.y,P,O,-M,-L,P,O),A.restore()}}}A.restore()}};i.exports=c},96193:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72283),v=a,u=a;v=e(51395),u=e(17394),i.exports={renderWebGL:v,renderCanvas:u}},51395:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(75512),v=function(u,o,c){var l=o.cull(c),f=l.length,m=c.alpha*o.alpha;if(!(f===0||m<=0)){var h=o.gidMap,p=u.pipelines.set(o.pipeline,o),y=a.getTintAppendFloatAlpha,x=o.scrollFactorX,T=o.scrollFactorY,C=o.x,E=o.y,A=o.scaleX,w=o.scaleY;u.pipelines.preBatch(o);for(var b=0;b<f;b++){var I=l[b],R=h[I.index];if(R){var N=R.getTileTextureCoordinates(I.index);if(N!==null){var F=R.glTexture,P=p.setTexture2D(F,o),O=R.tileWidth,M=R.tileHeight,L=N.x,k=N.y,V=R.tileWidth*.5,W=R.tileHeight*.5,K=R.tileOffset.x,B=R.tileOffset.y,G=y(I.tint,m*I.alpha);p.batchTexture(o,F,F.width,F.height,C+I.pixelX*A+(V*A-K),E+I.pixelY*w+(W*w-B),I.width,I.height,A,w,I.rotation,I.flipX,I.flipY,x,T,V,W,L,k,O,M,G,G,G,G,!1,0,0,c,null,!0,P)}}}u.pipelines.postBatch(o)}};i.exports=v},47975:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(93736),u=new a({initialize:function(c,l,f,m,h,p,y,x,T){(f===void 0||f<=0)&&(f=32),(m===void 0||m<=0)&&(m=32),h===void 0&&(h=0),p===void 0&&(p=0),y===void 0&&(y={}),x===void 0&&(x={}),this.name=c,this.firstgid=l,this.tileWidth=f,this.tileHeight=m,this.tileMargin=h,this.tileSpacing=p,this.tileProperties=y,this.tileData=x,this.tileOffset=new v,T!==void 0&&this.tileOffset.set(T.x,T.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(o){return this.containsTileIndex(o)?this.tileProperties[o-this.firstgid]:null},getTileData:function(o){return this.containsTileIndex(o)?this.tileData[o-this.firstgid]:null},getTileCollisionGroup:function(o){var c=this.getTileData(o);return c&&c.objectgroup?c.objectgroup:null},containsTileIndex:function(o){return o>=this.firstgid&&o<this.firstgid+this.total},getTileTextureCoordinates:function(o){return this.containsTileIndex(o)?this.texCoordinates[o-this.firstgid]:null},setImage:function(o){return this.image=o,this.glTexture=o.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(o,c){return o!==void 0&&(this.tileWidth=o),c!==void 0&&(this.tileHeight=c),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(o,c){return o!==void 0&&(this.tileMargin=o),c!==void 0&&(this.tileSpacing=c),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(o,c){var l=(c-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),f=(o-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(l%1!==0||f%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),l=Math.floor(l),f=Math.floor(f),this.rows=l,this.columns=f,this.total=l*f,this.texCoordinates.length=0;for(var m=this.tileMargin,h=this.tileMargin,p=0;p<this.rows;p++){for(var y=0;y<this.columns;y++)this.texCoordinates.push({x:m,y:h}),m+=this.tileWidth+this.tileSpacing;m=this.tileMargin,h+=this.tileHeight+this.tileSpacing}return this}});i.exports=u},92839:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15494),v=function(u,o,c){var l=a(u,o,!0,c),f=a(u,o-1,!0,c),m=a(u,o+1,!0,c),h=a(u-1,o,!0,c),p=a(u+1,o,!0,c),y=l&&l.collides;return y&&(l.faceTop=!0,l.faceBottom=!0,l.faceLeft=!0,l.faceRight=!0),f&&f.collides&&(y&&(l.faceTop=!1),f.faceBottom=!y),m&&m.collides&&(y&&(l.faceBottom=!1),m.faceTop=!y),h&&h.collides&&(y&&(l.faceLeft=!1),h.faceRight=!y),p&&p.collides&&(y&&(l.faceRight=!1),p.faceLeft=!y),l&&!l.collides&&l.resetFaces(),l};i.exports=v},60386:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15494),v=e(50811),u=function(o,c,l,f,m){for(var h=null,p=null,y=null,x=null,T=v(o,c,l,f,null,m),C=0;C<T.length;C++){var E=T[C];E&&(E.collides?(h=a(E.x,E.y-1,!0,m),p=a(E.x,E.y+1,!0,m),y=a(E.x-1,E.y,!0,m),x=a(E.x+1,E.y,!0,m),E.faceTop=!(h&&h.collides),E.faceBottom=!(p&&p.collides),E.faceLeft=!(y&&y.collides),E.faceRight=!(x&&x.collides)):E.resetFaces())}};i.exports=u},13125:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=new a,u=function(o,c,l,f){var m=l.tilemapLayer,h=m.cullPaddingX,p=m.cullPaddingY,y=m.tilemap.tileToWorldXY(o,c,v,f,m);return y.x>f.worldView.x+m.scaleX*l.tileWidth*(-h-.5)&&y.x<f.worldView.right+m.scaleX*l.tileWidth*(h-.5)&&y.y>f.worldView.y+m.scaleY*l.tileHeight*(-p-1)&&y.y<f.worldView.bottom+m.scaleY*l.tileHeight*(p-.5)};i.exports=u},17347:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60386),v=e(50811),u=e(62839),o=e(29633),c=function(l,f,m,h,p,y,x,T){x===void 0&&(x=!0);var C=v(l,f,m,h,null,T),E=[];C.forEach(function(F){var P=new o(F.layer,F.index,F.x,F.y,F.width,F.height,F.baseWidth,F.baseHeight);P.copy(F),E.push(P)});for(var A=p-l,w=y-f,b=0;b<E.length;b++){var I=E[b],R=I.x+A,N=I.y+w;u(R,N,T)&&T.data[N][R]&&(I.x=R,I.y=N,I.updatePixelXY(),T.data[N][R]=I)}x&&a(p-1,y-1,m+2,h+2,T),C.length=0,E.length=0};i.exports=c},93604:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=e(51202),u=function(o,c,l,f,m,h){l||(l={}),Array.isArray(o)||(o=[o]);var p=h.tilemapLayer;f||(f=p.scene),m||(m=f.cameras.main);var y=a(0,0,h.width,h.height,null,h),x=[],T;for(T=0;T<y.length;T++){var C=y[T];if(o.indexOf(C.index)!==-1){var E=p.tileToWorldXY(C.x,C.y,void 0,m,h);l.x=E.x,l.y=E.y,x.push(f.make.sprite(l))}}if(typeof c=="number")for(T=0;T<o.length;T++)v(o[T],c,0,0,h.width,h.height,h);else if(Array.isArray(c))for(T=0;T<o.length;T++)v(o[T],c[T],0,0,h.width,h.height,h);return x};i.exports=u},71586:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(74118),v=e(82127),u=e(84314),o=new a,c=function(l,f){var m=l.tilemapLayer.tilemap,h=l.tilemapLayer,p=Math.floor(m.tileWidth*h.scaleX),y=Math.floor(m.tileHeight*h.scaleY),x=u(f.worldView.x-h.x,p,0,!0)-h.cullPaddingX,T=v(f.worldView.right-h.x,p,0,!0)+h.cullPaddingX,C=u(f.worldView.y-h.y,y,0,!0)-h.cullPaddingY,E=v(f.worldView.bottom-h.y,y,0,!0)+h.cullPaddingY;return o.setTo(x,C,T-x,E-C)};i.exports=c},381:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(71586),v=e(6987),u=function(o,c,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var m=o.tilemapLayer,h=a(o,c);return(m.skipCull||m.scrollFactorX!==1||m.scrollFactorY!==1)&&(h.left=0,h.right=o.width,h.top=0,h.bottom=o.height),v(o,h,f,l),l};i.exports=u},97734:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=e(60386),u=e(68234),o=function(c,l,f,m,h,p,y){for(var x=y.collideIndexes.indexOf(c)!==-1,T=a(l,f,m,h,null,y),C=0;C<T.length;C++)T[C].index=c,u(T[C],x);p&&v(l-1,f-1,m+2,h+2,y)};i.exports=o},63555:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=function(u,o,c,l,f,m,h,p){var y=a(c,l,f,m,h,p);return y.filter(u,o)};i.exports=v},37982:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){a===void 0&&(a=0),v===void 0&&(v=!1);var o=0,c,l,f;if(v){for(l=u.height-1;l>=0;l--)for(c=u.width-1;c>=0;c--)if(f=u.data[l][c],f&&f.index===e){if(o===a)return f;o+=1}}else for(l=0;l<u.height;l++)for(c=0;c<u.width;c++)if(f=u.data[l][c],f&&f.index===e){if(o===a)return f;o+=1}return null};i.exports=g},48297:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=function(u,o,c,l,f,m,h,p){var y=a(c,l,f,m,h,p);return y.find(u,o)||null};i.exports=v},80916:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=function(u,o,c,l,f,m,h,p){var y=a(c,l,f,m,h,p);y.forEach(u,o)};i.exports=v},31493:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12920),v=e(381),u=e(37524),o=e(20887),c=e(72283),l=e(19242),f=function(m){return m===a.ORTHOGONAL?v:m===a.HEXAGONAL?u:m===a.STAGGERED?l:m===a.ISOMETRIC?o:c};i.exports=f},15494:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62839),v=function(u,o,c,l){if(c===void 0&&(c=!1),a(u,o,l)){var f=l.data[o][u]||null;return f?f.index===-1?c?f:null:f:null}else return null};i.exports=v},24640:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(15494),v=e(93736),u=new v,o=function(c,l,f,m,h){return h.tilemapLayer.worldToTileXY(c,l,!0,u,m),a(u.x,u.y,f,h)};i.exports=o},48495:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=function(u,o,c,l){var f=l.baseTileWidth,m=l.baseTileHeight,h=l.tilemapLayer,p=0,y=0;h&&(c||(c=h.scene.cameras.main),p=h.x+c.scrollX*(1-h.scrollFactorX),y=h.y+c.scrollY*(1-h.scrollFactorY),f*=h.scaleX,m*=h.scaleY);var x=p+u*f,T=y+o*m;return[new a(x,T),new a(x+f,T),new a(x+f,T+m),new a(x,T+m)]};i.exports=v},7160:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12920),v=e(63634),u=e(72283),o=e(48495),c=function(l){return l===a.ORTHOGONAL?o:l===a.ISOMETRIC?u:l===a.HEXAGONAL?v:(l===a.STAGGERED,u)};i.exports=c},16884:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12920),v=e(72283),u=e(44150),o=function(c){return c===a.ORTHOGONAL?u:v};i.exports=o},68182:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12920),v=e(21715),u=e(21808),o=e(72283),c=e(33388),l=e(46836),f=function(m){return m===a.ORTHOGONAL?l:m===a.ISOMETRIC?u:m===a.HEXAGONAL?v:m===a.STAGGERED?c:o};i.exports=f},3752:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12920),v=e(72283),u=e(84132),o=e(42477),c=function(l){return l===a.ORTHOGONAL?o:l===a.STAGGERED?u:v};i.exports=c},50811:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72632),v=function(u,o,c,l,f,m){u===void 0&&(u=0),o===void 0&&(o=0),c===void 0&&(c=m.width),l===void 0&&(l=m.height),f||(f={});var h=a(f,"isNotEmpty",!1),p=a(f,"isColliding",!1),y=a(f,"hasInterestingFace",!1);u<0&&(c+=u,u=0),o<0&&(l+=o,o=0),u+c>m.width&&(c=Math.max(m.width-u,0)),o+l>m.height&&(l=Math.max(m.height-o,0));for(var x=[],T=o;T<o+l;T++)for(var C=u;C<u+c;C++){var E=m.data[T][C];if(E!==null){if(h&&E.index===-1||p&&!E.collides||y&&!E.hasInterestingFace)continue;x.push(E)}}return x};i.exports=v},31674:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(84068),v=e(50811),u=e(7563),o=e(72283),c=e(93736),l=function(y,x){return u.RectangleToTriangle(x,y)},f=new c,m=new c,h=new c,p=function(y,x,T,C){if(y===void 0)return[];var E=o;y instanceof a.Circle?E=u.CircleToRectangle:y instanceof a.Rectangle?E=u.RectangleToRectangle:y instanceof a.Triangle?E=l:y instanceof a.Line&&(E=u.LineToRectangle),C.tilemapLayer.worldToTileXY(y.left,y.top,!0,m,T);var A=m.x,w=m.y;C.tilemapLayer.worldToTileXY(y.right,y.bottom,!1,h,T);var b=Math.ceil(h.x),I=Math.ceil(h.y),R=Math.max(b-A,1),N=Math.max(I-w,1),F=v(A,w,R,N,x,C),P=C.tileWidth,O=C.tileHeight;C.tilemapLayer&&(P*=C.tilemapLayer.scaleX,O*=C.tilemapLayer.scaleY);for(var M=[],L=new a.Rectangle(0,0,P,O),k=0;k<F.length;k++){var V=F[k];C.tilemapLayer.tileToWorldXY(V.x,V.y,f,T),L.x=f.x,L.y=f.y,E(y,L)&&M.push(V)}return M};i.exports=p},44662:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=e(93736),u=new v,o=new v,c=function(l,f,m,h,p,y,x){var T=x.tilemapLayer.tilemap._convert.WorldToTileXY;T(l,f,!0,u,y,x);var C=u.x,E=u.y;T(l+m,f+h,!1,o,y,x);var A=Math.ceil(o.x),w=Math.ceil(o.y);return a(C,E,A-C,w-E,p,x)};i.exports=c},29296:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12920),v=e(10618),u=e(806),o=function(c){return c===a.ORTHOGONAL?u:v};i.exports=o},32688:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12920),v=e(11516),u=e(18750),o=e(72283),c=e(90562),l=e(45676),f=function(m){return m===a.ORTHOGONAL?l:m===a.ISOMETRIC?u:m===a.HEXAGONAL?v:m===a.STAGGERED?c:o};i.exports=f},74326:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12920),v=e(10618),u=e(3689),o=e(70520),c=function(l){return l===a.ORTHOGONAL?o:l===a.STAGGERED?u:v};i.exports=c},46598:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(62839),v=function(u,o,c){if(a(u,o,c)){var l=c.data[o][u];return l!==null&&l.index>-1}else return!1};i.exports=v},28654:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(46598),v=e(93736),u=new v,o=function(c,l,f,m){m.tilemapLayer.worldToTileXY(c,l,!0,u,f);var h=u.x,p=u.y;return a(h,p,m)};i.exports=o},6358:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82127),v=e(84314),u=function(o,c){var l=o.tilemapLayer.tilemap,f=o.tilemapLayer,m=Math.floor(l.tileWidth*f.scaleX),h=Math.floor(l.tileHeight*f.scaleY),p=o.hexSideLength,y,x,T,C;if(this.staggerAxis==="y"){var E=(h-p)/2+p;y=v(c.worldView.x-f.x,m,0,!0)-f.cullPaddingX,x=a(c.worldView.right-f.x,m,0,!0)+f.cullPaddingX,T=v(c.worldView.y-f.y,E,0,!0)-f.cullPaddingY,C=a(c.worldView.bottom-f.y,E,0,!0)+f.cullPaddingY}else{var A=(m-p)/2+p;y=v(c.worldView.x-f.x,A,0,!0)-f.cullPaddingX,x=a(c.worldView.right-f.x,A,0,!0)+f.cullPaddingX,T=v(c.worldView.y-f.y,h,0,!0)-f.cullPaddingY,C=a(c.worldView.bottom-f.y,h,0,!0)+f.cullPaddingY}return{left:y,right:x,top:T,bottom:C}};i.exports=u},37524:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(6358),v=e(6987),u=function(o,c,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var m=o.tilemapLayer,h=a(o,c);return m.skipCull&&m.scrollFactorX===1&&m.scrollFactorY===1&&(h.left=0,h.right=o.width,h.top=0,h.bottom=o.height),v(o,h,f,l),l};i.exports=u},63634:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21715),v=e(93736),u=new v,o=function(c,l,f,m){var h=m.baseTileWidth,p=m.baseTileHeight,y=m.tilemapLayer;y&&(h*=y.scaleX,p*=y.scaleY);var x=a(c,l,u,f,m),T=[],C=.5773502691896257,E,A;this.staggerAxis==="y"?(E=C*h,A=p/2):(E=h/2,A=C*p);for(var w=0;w<6;w++){var b=2*Math.PI*(.5-w)/6;T.push(new v(x.x+E*Math.cos(b),x.y+A*Math.sin(b)))}return T};i.exports=o},21715:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=function(u,o,c,l,f){c||(c=new a);var m=f.baseTileWidth,h=f.baseTileHeight,p=f.tilemapLayer,y=0,x=0;p&&(l||(l=p.scene.cameras.main),y=p.x+l.scrollX*(1-p.scrollFactorX),x=p.y+l.scrollY*(1-p.scrollFactorY),m*=p.scaleX,h*=p.scaleY);var T=m/2,C=h/2,E,A;return this.staggerAxis==="y"?(E=y+m*u+m,A=x+1.5*o*C+C,o%2===0&&(this.staggerIndex==="odd"?E-=T:E+=T)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(E=y+1.5*u*T+T,A=x+h*u+h,u%2===0&&(this.staggerIndex==="odd"?A-=C:A+=C)),c.set(E,A)};i.exports=v},11516:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=function(u,o,c,l,f,m){l||(l=new a);var h=m.baseTileWidth,p=m.baseTileHeight,y=m.tilemapLayer;y&&(f||(f=y.scene.cameras.main),u=u-(y.x+f.scrollX*(1-y.scrollFactorX)),o=o-(y.y+f.scrollY*(1-y.scrollFactorY)),h*=y.scaleX,p*=y.scaleY);var x=.5773502691896257,T=-.3333333333333333,C=0,E=.6666666666666666,A=h/2,w=p/2,b,I,R,N,F;m.staggerAxis==="y"?(b=(u-A)/(x*h),I=(o-w)/w,R=x*b+T*I,N=C*b+E*I):(b=(u-A)/A,I=(o-w)/(x*p),R=T*b+x*I,N=E*b+C*I),F=-R-N;var P=Math.round(R),O=Math.round(N),M=Math.round(F),L=Math.abs(P-R),k=Math.abs(O-N),V=Math.abs(M-F);L>k&&L>V?P=-O-M:k>V&&(O=-P-M);var W,K=O;return m.staggerIndex==="odd"?W=K%2===0?O/2+P:O/2+P-.5:W=K%2===0?O/2+P:O/2+P+.5,l.set(W,K)};i.exports=v},62839:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e>=0&&e<v.width&&a>=0&&a<v.height};i.exports=g},20887:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(13125),v=function(u,o,c,l){c===void 0&&(c=[]),l===void 0&&(l=0),c.length=0;var f=u.tilemapLayer,m=u.data,h=u.width,p=u.height,y=f.skipCull,x=0,T=h,C=0,E=p,A,w,b;if(l===0){for(w=C;w<E;w++)for(A=x;A<T;A++)if(y||a(A,w,u,o)){if(b=m[w][A],!b||b.index===-1||!b.visible||b.alpha===0)continue;c.push(b)}}else if(l===1){for(w=C;w<E;w++)for(A=T;A>=x;A--)if(y||a(A,w,u,o)){if(b=m[w][A],!b||b.index===-1||!b.visible||b.alpha===0)continue;c.push(b)}}else if(l===2){for(w=E;w>=C;w--)for(A=x;A<T;A++)if(y||a(A,w,u,o)){if(b=m[w][A],!b||b.index===-1||!b.visible||b.alpha===0)continue;c.push(b)}}else if(l===3){for(w=E;w>=C;w--)for(A=T;A>=x;A--)if(y||a(A,w,u,o)){if(b=m[w][A],!b||b.index===-1||!b.visible||b.alpha===0)continue;c.push(b)}}return f.tilesDrawn=c.length,f.tilesTotal=h*p,c};i.exports=v},21808:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=function(u,o,c,l,f){c||(c=new a);var m=f.baseTileWidth,h=f.baseTileHeight,p=f.tilemapLayer,y=0,x=0;p&&(l||(l=p.scene.cameras.main),y=p.x+l.scrollX*(1-p.scrollFactorX),m*=p.scaleX,x=p.y+l.scrollY*(1-p.scrollFactorY),h*=p.scaleY);var T=y+(u-o)*(m/2),C=x+(u+o)*(h/2);return c.set(T,C)};i.exports=v},18750:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=function(u,o,c,l,f,m,h){l||(l=new a);var p=m.baseTileWidth,y=m.baseTileHeight,x=m.tilemapLayer;x&&(f||(f=x.scene.cameras.main),o=o-(x.y+f.scrollY*(1-x.scrollFactorY)),y*=x.scaleY,u=u-(x.x+f.scrollX*(1-x.scrollFactorX)),p*=x.scaleX);var T=p/2,C=y/2;u=u-T,h||(o=o-y);var E=.5*(u/T+o/C),A=.5*(-u/T+o/C);return c&&(E=Math.floor(E),A=Math.floor(A)),l.set(E,A)};i.exports=v},29003:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29633),v=e(62839),u=e(92839),o=e(68234),c=function(l,f,m,h,p){if(h===void 0&&(h=!0),!v(f,m,p))return null;var y,x=p.data[m][f],T=x&&x.collides;l instanceof a?(p.data[m][f]===null&&(p.data[m][f]=new a(p,l.index,f,m,p.tileWidth,p.tileHeight)),p.data[m][f].copy(l)):(y=l,p.data[m][f]===null?p.data[m][f]=new a(p,y,f,m,p.tileWidth,p.tileHeight):p.data[m][f].index=y);var C=p.data[m][f],E=p.collideIndexes.indexOf(C.index)!==-1;if(y=l instanceof a?l.index:l,y===-1)C.width=p.tileWidth,C.height=p.tileHeight;else{var A=p.tilemapLayer.tilemap.tiles,w=A[y][2],b=p.tilemapLayer.tileset[w];C.width=b.tileWidth,C.height=b.tileHeight}return o(C,E),h&&T!==C.collides&&u(f,m,p),C};i.exports=c},48565:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29003),v=e(93736),u=new v,o=function(c,l,f,m,h,p){return p.tilemapLayer.worldToTileXY(l,f,!0,u,h,p),a(c,u.x,u.y,m,p)};i.exports=o},56547:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(60386),v=e(29003),u=function(o,c,l,f,m){if(f===void 0&&(f=!0),!Array.isArray(o))return null;Array.isArray(o[0])||(o=[o]);for(var h=o.length,p=o[0].length,y=0;y<h;y++)for(var x=0;x<p;x++){var T=o[y][x];v(T,c+x,l+y,!1,m)}f&&a(c-1,l-1,p+2,h+2,m)};i.exports=u},91180:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=e(72861),u=function(o,c,l,f,m,h){var p,y=a(o,c,l,f,{},h);if(!m)for(m=[],p=0;p<y.length;p++)m.indexOf(y[p].index)===-1&&m.push(y[p].index);for(p=0;p<y.length;p++)y[p].index=v(m)};i.exports=u},929:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(29633),v=e(62839),u=e(92839),o=function(c,l,f,m,h){if(f===void 0&&(f=!0),m===void 0&&(m=!0),!v(c,l,h))return null;var p=h.data[l][c];if(p)h.data[l][c]=f?null:new a(h,-1,c,l,h.tileWidth,h.tileHeight);else return null;return m&&p&&p.collides&&u(c,l,h),p};i.exports=o},17384:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(929),v=e(93736),u=new v,o=function(c,l,f,m,h,p){return p.tilemapLayer.worldToTileXY(c,l,!0,u,h,p),a(u.x,u.y,f,m,p)};i.exports=o},93763:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=e(95509),u=new v(105,210,231,150),o=new v(243,134,48,200),c=new v(40,39,37,150),l=function(f,m,h){m===void 0&&(m={});var p=m.tileColor!==void 0?m.tileColor:u,y=m.collidingTileColor!==void 0?m.collidingTileColor:o,x=m.faceColor!==void 0?m.faceColor:c,T=a(0,0,h.width,h.height,null,h);f.translateCanvas(h.tilemapLayer.x,h.tilemapLayer.y),f.scaleCanvas(h.tilemapLayer.scaleX,h.tilemapLayer.scaleY);for(var C=0;C<T.length;C++){var E=T[C],A=E.width,w=E.height,b=E.pixelX,I=E.pixelY,R=E.collides?y:p;R!==null&&(f.fillStyle(R.color,R.alpha/255),f.fillRect(b,I,A,w)),b+=1,I+=1,A-=2,w-=2,x!==null&&(f.lineStyle(1,x.color,x.alpha/255),E.faceTop&&f.lineBetween(b,I,b+A,I),E.faceRight&&f.lineBetween(b+A,I,b+A,I+w),E.faceBottom&&f.lineBetween(b,I+w,b+A,I+w),E.faceLeft&&f.lineBetween(b,I,b,I+w))}};i.exports=l},51202:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=function(u,o,c,l,f,m,h){for(var p=a(c,l,f,m,null,h),y=0;y<p.length;y++)p[y]&&p[y].index===u&&(p[y].index=o)};i.exports=v},6987:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=e.data,c=e.width,l=e.height,f=e.tilemapLayer,m=Math.max(0,a.left),h=Math.min(c,a.right),p=Math.max(0,a.top),y=Math.min(l,a.bottom),x,T,C;if(v===0)for(T=p;T<y;T++)for(x=m;o[T]&&x<h;x++)C=o[T][x],!(!C||C.index===-1||!C.visible||C.alpha===0)&&u.push(C);else if(v===1)for(T=p;T<y;T++)for(x=h;o[T]&&x>=m;x--)C=o[T][x],!(!C||C.index===-1||!C.visible||C.alpha===0)&&u.push(C);else if(v===2)for(T=y;T>=p;T--)for(x=m;o[T]&&x<h;x++)C=o[T][x],!(!C||C.index===-1||!C.visible||C.alpha===0)&&u.push(C);else if(v===3)for(T=y;T>=p;T--)for(x=h;o[T]&&x>=m;x--)C=o[T][x],!(!C||C.index===-1||!C.visible||C.alpha===0)&&u.push(C);return f.tilesDrawn=u.length,f.tilesTotal=c*l,u};i.exports=g},51710:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(68234),v=e(60386),u=e(91181),o=function(c,l,f,m,h){l===void 0&&(l=!0),f===void 0&&(f=!0),h===void 0&&(h=!0),Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++)u(c[p],l,m);if(h)for(var y=0;y<m.height;y++)for(var x=0;x<m.width;x++){var T=m.data[y][x];T&&c.indexOf(T.index)!==-1&&a(T,l)}f&&v(0,0,m.width,m.height,m)};i.exports=o},15216:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(68234),v=e(60386),u=e(91181),o=function(c,l,f,m,h,p){if(f===void 0&&(f=!0),m===void 0&&(m=!0),p===void 0&&(p=!0),!(c>l)){for(var y=c;y<=l;y++)u(y,f,h);if(p)for(var x=0;x<h.height;x++)for(var T=0;T<h.width;T++){var C=h.data[x][T];C&&C.index>=c&&C.index<=l&&a(C,f)}m&&v(0,0,h.width,h.height,h)}};i.exports=o},33158:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(68234),v=e(60386),u=e(91181),o=function(c,l,f,m){l===void 0&&(l=!0),f===void 0&&(f=!0),Array.isArray(c)||(c=[c]);for(var h=0;h<m.height;h++)for(var p=0;p<m.width;p++){var y=m.data[h][p];y&&c.indexOf(y.index)===-1&&(a(y,l),u(y.index,l,m))}f&&v(0,0,m.width,m.height,m)};i.exports=o},4180:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(68234),v=e(60386),u=e(19256),o=function(c,l,f,m){l===void 0&&(l=!0),f===void 0&&(f=!0);for(var h=0;h<m.height;h++)for(var p=0;p<m.width;p++){var y=m.data[h][p];if(y){for(var x in c)if(u(y.properties,x)){var T=c[x];Array.isArray(T)||(T=[T]);for(var C=0;C<T.length;C++)y.properties[x]===T[C]&&a(y,l)}}}f&&v(0,0,m.width,m.height,m)};i.exports=o},18625:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(68234),v=e(60386),u=function(o,c,l){o===void 0&&(o=!0),c===void 0&&(c=!0);for(var f=0;f<l.height;f++)for(var m=0;m<l.width;m++){var h=l.data[f][m];if(h){var p=h.getCollisionGroup();p&&p.objects&&p.objects.length>0&&a(h,o)}}c&&v(0,0,l.width,l.height,l)};i.exports=u},91181:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=v.collideIndexes.indexOf(e);a&&u===-1?v.collideIndexes.push(e):!a&&u!==-1&&v.collideIndexes.splice(u,1)};i.exports=g},68234:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};i.exports=g},11628:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){if(typeof e=="number")u.callbacks[e]=a!==null?{callback:a,callbackContext:v}:void 0;else for(var o=0,c=e.length;o<c;o++)u.callbacks[e[o]]=a!==null?{callback:a,callbackContext:v}:void 0};i.exports=g},72732:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=function(u,o,c,l,f,m,h){for(var p=a(u,o,c,l,null,h),y=0;y<p.length;y++)p[y].setCollisionCallback(f,m)};i.exports=v},34397:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=e(18592),u=function(o,c,l,f,m){var h=a(o,c,l,f,null,m),p=h.map(function(x){return x.index});v(p);for(var y=0;y<h.length;y++)h[y].index=p[y]};i.exports=u},53945:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(82127),v=e(84314),u=function(o,c){var l=o.tilemapLayer.tilemap,f=o.tilemapLayer,m=Math.floor(l.tileWidth*f.scaleX),h=Math.floor(l.tileHeight*f.scaleY),p=v(c.worldView.x-f.x,m,0,!0)-f.cullPaddingX,y=a(c.worldView.right-f.x,m,0,!0)+f.cullPaddingX,x=v(c.worldView.y-f.y,h/2,0,!0)-f.cullPaddingY,T=a(c.worldView.bottom-f.y,h/2,0,!0)+f.cullPaddingY;return{left:p,right:y,top:x,bottom:T}};i.exports=u},19242:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(53945),v=e(6987),u=function(o,c,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var m=o.tilemapLayer,h=a(o,c);return m.skipCull&&m.scrollFactorX===1&&m.scrollFactorY===1&&(h.left=0,h.right=o.width,h.top=0,h.bottom=o.height),v(o,h,f,l),l};i.exports=u},33388:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=function(u,o,c,l,f){c||(c=new a);var m=f.baseTileWidth,h=f.baseTileHeight,p=f.tilemapLayer,y=0,x=0;p&&(l||(l=p.scene.cameras.main),y=p.x+l.scrollX*(1-p.scrollFactorX),m*=p.scaleX,x=p.y+l.scrollY*(1-p.scrollFactorY),h*=p.scaleY);var T=y+u*m+o%2*(m/2),C=x+o*(h/2);return c.set(T,C)};i.exports=v},84132:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=v.baseTileHeight,o=v.tilemapLayer,c=0;return o&&(a===void 0&&(a=o.scene.cameras.main),c=o.y+a.scrollY*(1-o.scrollFactorY),u*=o.scaleY),c+e*(u/2)+u};i.exports=g},90562:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=function(u,o,c,l,f,m){l||(l=new a);var h=m.baseTileWidth,p=m.baseTileHeight,y=m.tilemapLayer;y&&(f||(f=y.scene.cameras.main),o=o-(y.y+f.scrollY*(1-y.scrollFactorY)),p*=y.scaleY,u=u-(y.x+f.scrollX*(1-y.scrollFactorX)),h*=y.scaleX);var x=c?Math.floor(o/(p/2)):o/(p/2),T=c?Math.floor((u+x%2*.5*h)/h):(u+x%2*.5*h)/h;return l.set(T,x)};i.exports=v},3689:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=u.baseTileHeight,c=u.tilemapLayer;return c&&(v||(v=c.scene.cameras.main),e=e-(c.y+v.scrollY*(1-c.scrollFactorY)),o*=c.scaleY),a?Math.floor(e/(o/2)):e/(o/2)};i.exports=g},55217:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=function(u,o,c,l,f,m,h){for(var p=a(c,l,f,m,null,h),y=0;y<p.length;y++)p[y]&&(p[y].index===u?p[y].index=o:p[y].index===o&&(p[y].index=u))};i.exports=v},44150:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=v.baseTileWidth,o=v.tilemapLayer,c=0;return o&&(a||(a=o.scene.cameras.main),c=o.x+a.scrollX*(1-o.scrollFactorX),u*=o.scaleX),c+e*u};i.exports=g},46836:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(44150),v=e(42477),u=e(93736),o=function(c,l,f,m,h){return f||(f=new u(0,0)),f.x=a(c,m,h),f.y=v(l,m,h),f};i.exports=o},42477:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=v.baseTileHeight,o=v.tilemapLayer,c=0;return o&&(a||(a=o.scene.cameras.main),c=o.y+a.scrollY*(1-o.scrollFactorY),u*=o.scaleY),c+e*u};i.exports=g},39677:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(50811),v=function(u,o,c,l,f,m){if(f){var h,p=a(u,o,c,l,null,m),y=0;for(h=0;h<f.length;h++)y+=f[h].weight;if(!(y<=0))for(h=0;h<p.length;h++){for(var x=Math.random()*y,T=0,C=-1,E=0;E<f.length;E++)if(T+=f[E].weight,x<=T){var A=f[E].index;C=Array.isArray(A)?A[Math.floor(Math.random()*A.length)]:A;break}p[h].index=C}}};i.exports=v},806:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45676),v=e(93736),u=new v,o=function(c,l,f,m){return a(c,0,l,u,f,m),u.x};i.exports=o},45676:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93736),v=function(u,o,c,l,f,m){c===void 0&&(c=!0),l||(l=new a);var h=m.baseTileWidth,p=m.baseTileHeight,y=m.tilemapLayer;y&&(f||(f=y.scene.cameras.main),u=u-(y.x+f.scrollX*(1-y.scrollFactorX)),o=o-(y.y+f.scrollY*(1-y.scrollFactorY)),h*=y.scaleX,p*=y.scaleY);var x=u/h,T=o/p;return c&&(x=Math.floor(x),T=Math.floor(T)),l.set(x,T)};i.exports=v},70520:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45676),v=e(93736),u=new v,o=function(c,l,f,m){return a(0,c,l,u,f,m),u.y};i.exports=o},5047:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CalculateFacesAt:e(92839),CalculateFacesWithin:e(60386),CheckIsoBounds:e(13125),Copy:e(17347),CreateFromTiles:e(93604),CullBounds:e(71586),CullTiles:e(381),Fill:e(97734),FilterTiles:e(63555),FindByIndex:e(37982),FindTile:e(48297),ForEachTile:e(80916),GetCullTilesFunction:e(31493),GetTileAt:e(15494),GetTileAtWorldXY:e(24640),GetTileCorners:e(48495),GetTileCornersFunction:e(7160),GetTilesWithin:e(50811),GetTilesWithinShape:e(31674),GetTilesWithinWorldXY:e(44662),GetTileToWorldXFunction:e(16884),GetTileToWorldXYFunction:e(68182),GetTileToWorldYFunction:e(3752),GetWorldToTileXFunction:e(29296),GetWorldToTileXYFunction:e(32688),GetWorldToTileYFunction:e(74326),HasTileAt:e(46598),HasTileAtWorldXY:e(28654),HexagonalCullBounds:e(6358),HexagonalCullTiles:e(37524),HexagonalGetTileCorners:e(63634),HexagonalTileToWorldXY:e(21715),HexagonalWorldToTileXY:e(11516),IsInLayerBounds:e(62839),IsometricCullTiles:e(20887),IsometricTileToWorldXY:e(21808),IsometricWorldToTileXY:e(18750),PutTileAt:e(29003),PutTileAtWorldXY:e(48565),PutTilesAt:e(56547),Randomize:e(91180),RemoveTileAt:e(929),RemoveTileAtWorldXY:e(17384),RenderDebug:e(93763),ReplaceByIndex:e(51202),RunCull:e(6987),SetCollision:e(51710),SetCollisionBetween:e(15216),SetCollisionByExclusion:e(33158),SetCollisionByProperty:e(4180),SetCollisionFromCollisionGroup:e(18625),SetLayerCollisionIndex:e(91181),SetTileCollision:e(68234),SetTileIndexCallback:e(11628),SetTileLocationCallback:e(72732),Shuffle:e(34397),StaggeredCullBounds:e(53945),StaggeredCullTiles:e(19242),StaggeredTileToWorldXY:e(33388),StaggeredTileToWorldY:e(84132),StaggeredWorldToTileXY:e(90562),StaggeredWorldToTileY:e(3689),SwapByIndex:e(55217),TileToWorldX:e(44150),TileToWorldXY:e(46836),TileToWorldY:e(42477),WeightedRandomize:e(39677),WorldToTileX:e(806),WorldToTileXY:e(45676),WorldToTileY:e(70520)}},12920:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},84758:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={ORIENTATION:e(12920)};i.exports=a},52678:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(98611),v=e(84758),u={Components:e(5047),Parsers:e(34124),Formats:e(93560),ImageCollection:e(97042),ParseToTilemap:e(15043),Tile:e(29633),Tilemap:e(89797),TilemapCreator:e(4843),TilemapFactory:e(37940),Tileset:e(47975),TilemapLayer:e(87177),Orientation:e(12920),LayerData:e(94990),MapData:e(16586),ObjectLayer:e(15256)};u=a(!1,u,v.ORIENTATION),i.exports=u},94990:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12920),u=e(72632),o=new a({initialize:function(l){l===void 0&&(l={}),this.name=u(l,"name","layer"),this.x=u(l,"x",0),this.y=u(l,"y",0),this.width=u(l,"width",0),this.height=u(l,"height",0),this.tileWidth=u(l,"tileWidth",0),this.tileHeight=u(l,"tileHeight",0),this.baseTileWidth=u(l,"baseTileWidth",this.tileWidth),this.baseTileHeight=u(l,"baseTileHeight",this.tileHeight),this.orientation=u(l,"orientation",v.ORTHOGONAL),this.widthInPixels=u(l,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=u(l,"heightInPixels",this.height*this.baseTileHeight),this.alpha=u(l,"alpha",1),this.visible=u(l,"visible",!0),this.properties=u(l,"properties",[]),this.indexes=u(l,"indexes",[]),this.collideIndexes=u(l,"collideIndexes",[]),this.callbacks=u(l,"callbacks",[]),this.bodies=u(l,"bodies",[]),this.data=u(l,"data",[]),this.tilemapLayer=u(l,"tilemapLayer",null),this.hexSideLength=u(l,"hexSideLength",0),this.staggerAxis=u(l,"staggerAxis","y"),this.staggerIndex=u(l,"staggerIndex","odd")}});i.exports=o},16586:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(12920),u=e(72632),o=new a({initialize:function(l){l===void 0&&(l={}),this.name=u(l,"name","map"),this.width=u(l,"width",0),this.height=u(l,"height",0),this.infinite=u(l,"infinite",!1),this.tileWidth=u(l,"tileWidth",0),this.tileHeight=u(l,"tileHeight",0),this.widthInPixels=u(l,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=u(l,"heightInPixels",this.height*this.tileHeight),this.format=u(l,"format",null),this.orientation=u(l,"orientation",v.ORTHOGONAL),this.renderOrder=u(l,"renderOrder","right-down"),this.version=u(l,"version","1"),this.properties=u(l,"properties",{}),this.layers=u(l,"layers",[]),this.images=u(l,"images",[]),this.objects=u(l,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=u(l,"collision",{}),this.tilesets=u(l,"tilesets",[]),this.imageCollections=u(l,"imageCollections",[]),this.tiles=u(l,"tiles",[]),this.hexSideLength=u(l,"hexSideLength",0),this.staggerAxis=u(l,"staggerAxis","y"),this.staggerIndex=u(l,"staggerIndex","odd")}});i.exports=o},15256:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72632),u=new a({initialize:function(c){c===void 0&&(c={}),this.name=v(c,"name","object layer"),this.opacity=v(c,"opacity",1),this.properties=v(c,"properties",{}),this.propertyTypes=v(c,"propertytypes",{}),this.type=v(c,"type","objectgroup"),this.visible=v(c,"visible",!0),this.objects=v(c,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});i.exports=u},21394:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(12920),v=function(u){return u=u.toLowerCase(),u==="isometric"?a.ISOMETRIC:u==="staggered"?a.STAGGERED:u==="hexagonal"?a.HEXAGONAL:a.ORTHOGONAL};i.exports=v},90715:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93560),v=e(84346),u=e(96097),o=e(2378),c=e(44909),l=function(f,m,h,p,y,x){var T;switch(m){case a.ARRAY_2D:T=v(f,h,p,y,x);break;case a.CSV:T=u(f,h,p,y,x);break;case a.TILED_JSON:T=o(f,h,x);break;case a.WELTMEISTER:T=c(f,h,x);break;default:console.warn("Unrecognized tilemap data format: "+m),T=null}return T};i.exports=l},84346:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93560),v=e(94990),u=e(16586),o=e(29633),c=function(l,f,m,h,p){for(var y=new v({tileWidth:m,tileHeight:h}),x=new u({name:l,tileWidth:m,tileHeight:h,format:a.ARRAY_2D,layers:[y]}),T=[],C=f.length,E=0,A=0;A<f.length;A++){T[A]=[];for(var w=f[A],b=0;b<w.length;b++){var I=parseInt(w[b],10);isNaN(I)||I===-1?T[A][b]=p?null:new o(y,-1,b,A,m,h):T[A][b]=new o(y,I,b,A,m,h)}E===0&&(E=w.length)}return x.width=y.width=E,x.height=y.height=C,x.widthInPixels=y.widthInPixels=E*m,x.heightInPixels=y.heightInPixels=C*h,y.data=T,x};i.exports=c},96097:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93560),v=e(84346),u=function(o,c,l,f,m){var h=c.trim().split(`
`).map(function(y){return y.split(",")}),p=v(o,h,l,f,m);return p.format=a.CSV,p};i.exports=u},30951:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(94990),v=e(29633),u=function(o,c){for(var l=[],f=0;f<o.layer.length;f++){for(var m=o.layer[f],h=new a({name:m.name,width:m.width,height:m.height,tileWidth:m.tilesize,tileHeight:m.tilesize,visible:m.visible===1}),p=[],y=[],x=0;x<m.data.length;x++){for(var T=0;T<m.data[x].length;T++){var C=m.data[x][T]-1,E;C>-1?E=new v(h,C,T,x,m.tilesize,m.tilesize):E=c?null:new v(h,-1,T,x,m.tilesize,m.tilesize),p.push(E)}y.push(p),p=[]}h.data=y,l.push(h)}return l};i.exports=u},47488:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47975),v=function(u){for(var o=[],c=[],l=0;l<u.layer.length;l++){var f=u.layer[l],m=f.tilesetName;m!==""&&c.indexOf(m)===-1&&(c.push(m),o.push(new a(m,0,f.tilesize,f.tilesize,0,0)))}return o};i.exports=v},44909:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(93560),v=e(16586),u=e(30951),o=e(47488),c=function(l,f,m){if(f.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+l),null;for(var h=0,p=0,y=0;y<f.layer.length;y++)f.layer[y].width>h&&(h=f.layer[y].width),f.layer[y].height>p&&(p=f.layer[y].height);var x=new v({width:h,height:p,name:l,tileWidth:f.layer[0].tilesize,tileHeight:f.layer[0].tilesize,format:a.WELTMEISTER});return x.layers=u(f,m),x.tilesets=o(f),x};i.exports=c},24507:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ParseTileLayers:e(30951),ParseTilesets:e(47488),ParseWeltmeister:e(44909)}},34124:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={FromOrientationString:e(21394),Parse:e(90715),Parse2DArray:e(84346),ParseCSV:e(96097),Impact:e(24507),Tiled:e(50044)}},48646:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(98611),v=function(u){for(var o,c,l,f,m,h=0;h<u.layers.length;h++){o=u.layers[h],f=null;for(var p=0;p<o.data.length;p++){m=o.data[p];for(var y=0;y<m.length;y++)c=m[y],!(c===null||c.index<0)&&(l=u.tiles[c.index][2],f=u.tilesets[l],c.width=f.tileWidth,c.height=f.tileHeight,f.tileProperties&&f.tileProperties[c.index-f.firstgid]&&(c.properties=a(c.properties,f.tileProperties[c.index-f.firstgid])))}}};i.exports=v},43908:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){for(var a=window.atob(e),v=a.length,u=new Array(v/4),o=0;o<v;o+=4)u[o/4]=(a.charCodeAt(o)|a.charCodeAt(o+1)<<8|a.charCodeAt(o+2)<<16|a.charCodeAt(o+3)<<24)>>>0;return u};i.exports=g},14556:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47975),v=function(u){var o,c,l=[];for(o=0;o<u.imageCollections.length;o++)for(var f=u.imageCollections[o],m=f.images,h=0;h<m.length;h++){var p=m[h];c=new a(p.image,p.gid,f.imageWidth,f.imageHeight,0,0),c.updateTileData(f.imageWidth,f.imageHeight),u.tilesets.push(c)}for(o=0;o<u.tilesets.length;o++){c=u.tilesets[o];for(var y=c.tileMargin,x=c.tileMargin,T=0,C=0,E=0,A=c.firstgid;A<c.firstgid+c.total&&(l[A]=[y,x,o],y+=c.tileWidth+c.tileSpacing,T++,!(T===c.total||(C++,C===c.columns&&(y=c.tileMargin,x+=c.tileHeight+c.tileSpacing,C=0,E++,E===c.rows))));A++);}return l};i.exports=v},92044:(i,g,e)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72632),v=function(u,o,c){if(!o)return{i:0,layers:u.layers,name:"",opacity:1,visible:!0,x:0,y:0};var l=o.x+a(o,"startx",0)*u.tilewidth+a(o,"offsetx",0),f=o.y+a(o,"starty",0)*u.tileheight+a(o,"offsety",0);return{i:0,layers:o.layers,name:c.name+o.name+"/",opacity:c.opacity*o.opacity,visible:c.visible&&o.visible,x:c.x+l,y:c.y+f}};i.exports=v},8847:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=2147483648,e=1073741824,a=536870912,v=function(u){var o=!!(u&g),c=!!(u&e),l=!!(u&a);u=u&~(g|e|a);var f=0,m=!1;return o&&c&&l?(f=Math.PI/2,m=!0):o&&c&&!l?(f=Math.PI,m=!1):o&&!c&&l?(f=Math.PI/2,m=!1):o&&!c&&!l?(f=0,m=!0):!o&&c&&l?(f=3*Math.PI/2,m=!1):!o&&c&&!l?(f=Math.PI,m=!0):!o&&!c&&l?(f=3*Math.PI/2,m=!0):!o&&!c&&!l&&(f=0,m=!1),{gid:u,flippedHorizontal:o,flippedVertical:c,flippedAntiDiagonal:l,rotation:f,flipped:m}};i.exports=v},78339:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72632),v=e(92044),u=function(o){for(var c=[],l=[],f=v(o);f.i<f.layers.length||l.length>0;){if(f.i>=f.layers.length){if(l.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=l.pop();continue}var m=f.layers[f.i];if(f.i++,m.type!=="imagelayer"){if(m.type==="group"){var h=v(o,m,f);l.push(f),f=h}continue}var p=a(m,"offsetx",0)+a(m,"startx",0),y=a(m,"offsety",0)+a(m,"starty",0);c.push({name:f.name+m.name,image:m.image,x:f.x+p+m.x,y:f.y+y+m.y,alpha:f.opacity*m.opacity,visible:f.visible&&m.visible,properties:a(m,"properties",{})})}return c};i.exports=u},2378:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(48646),v=e(14556),u=e(12920),o=e(28699),c=e(93560),l=e(21394),f=e(16586),m=e(78339),h=e(61136),p=e(95925),y=e(93392),x=function(T,C,E){var A=o(C),w=new f({width:A.width,height:A.height,name:T,tileWidth:A.tilewidth,tileHeight:A.tileheight,orientation:l(A.orientation),format:c.TILED_JSON,version:A.version,properties:A.properties,renderOrder:A.renderorder,infinite:A.infinite});w.orientation===u.HEXAGONAL&&(w.hexSideLength=A.hexsidelength,w.staggerAxis=A.staggeraxis,w.staggerIndex=A.staggerindex),w.layers=p(A,E),w.images=m(A);var b=y(A);return w.tilesets=b.tilesets,w.imageCollections=b.imageCollections,w.objects=h(A),w.tiles=v(w),a(w),w};i.exports=x},4281:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(28820),v=e(8847),u=function(l){return{x:l.x,y:l.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"],c=function(l,f,m){f===void 0&&(f=0),m===void 0&&(m=0);var h=a(l,o);if(h.x+=f,h.y+=m,l.gid){var p=v(l.gid);h.gid=p.gid,h.flippedHorizontal=p.flippedHorizontal,h.flippedVertical=p.flippedVertical,h.flippedAntiDiagonal=p.flippedAntiDiagonal}else l.polyline?h.polyline=l.polyline.map(u):l.polygon?h.polygon=l.polygon.map(u):l.ellipse?h.ellipse=l.ellipse:l.text?h.text=l.text:l.point?h.point=!0:h.rectangle=!0;return h};i.exports=c},61136:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72632),v=e(4281),u=e(15256),o=e(92044),c=function(l){for(var f=[],m=[],h=o(l);h.i<h.layers.length||m.length>0;){if(h.i>=h.layers.length){if(m.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=m.pop();continue}var p=h.layers[h.i];if(h.i++,p.opacity*=h.opacity,p.visible=h.visible&&p.visible,p.type!=="objectgroup"){if(p.type==="group"){var y=o(l,p,h);m.push(h),h=y}continue}p.name=h.name+p.name;for(var x=h.x+a(p,"startx",0)+a(p,"offsetx",0),T=h.y+a(p,"starty",0)+a(p,"offsety",0),C=[],E=0;E<p.objects.length;E++){var A=v(p.objects[E],x,T);C.push(A)}var w=new u(p);w.objects=C,f.push(w)}return f};i.exports=c},95925:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(43908),v=e(12920),u=e(92044),o=e(21394),c=e(72632),l=e(94990),f=e(8847),m=e(29633),h=function(p,y){for(var x=c(p,"infinite",!1),T=[],C=[],E=u(p);E.i<E.layers.length||C.length>0;){if(E.i>=E.layers.length){if(C.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}E=C.pop();continue}var A=E.layers[E.i];if(E.i++,A.type!=="tilelayer"){if(A.type==="group"){var w=u(p,A,E);C.push(E),E=w}continue}if(A.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+A.name+"'");continue}else if(A.encoding&&A.encoding==="base64"){if(A.chunks)for(var b=0;b<A.chunks.length;b++)A.chunks[b].data=a(A.chunks[b].data);A.data&&(A.data=a(A.data)),delete A.encoding}var I,R,N,F,P=[],O=0;if(x){var M=c(A,"startx",0)+A.x,L=c(A,"starty",0)+A.y;I=new l({name:E.name+A.name,x:E.x+c(A,"offsetx",0)+M*p.tilewidth,y:E.y+c(A,"offsety",0)+L*p.tileheight,width:A.width,height:A.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:E.opacity*A.opacity,visible:E.visible&&A.visible,properties:c(A,"properties",[]),orientation:o(p.orientation)}),I.orientation===v.HEXAGONAL&&(I.hexSideLength=p.hexsidelength,I.staggerAxis=p.staggeraxis,I.staggerIndex=p.staggerindex);for(var k=0;k<A.height;k++){P[k]=[null];for(var V=0;V<A.width;V++)P[k][V]=null}for(k=0,Q=A.chunks.length;k<Q;k++)for(var W=A.chunks[k],K=W.x-M,B=W.y-L,G=0,D=0,$=W.data.length;D<$;D++){var z=O+K,H=G+B;R=f(W.data[D]),R.gid>0?(N=new m(I,R.gid,z,H,p.tilewidth,p.tileheight),N.rotation=R.rotation,N.flipX=R.flipped,P[H][z]=N):(F=y?null:new m(I,-1,z,H,p.tilewidth,p.tileheight),P[H][z]=F),O++,O===W.width&&(G++,O=0)}}else{I=new l({name:E.name+A.name,x:E.x+c(A,"offsetx",0)+A.x,y:E.y+c(A,"offsety",0)+A.y,width:A.width,height:A.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:E.opacity*A.opacity,visible:E.visible&&A.visible,properties:c(A,"properties",[]),orientation:o(p.orientation)}),I.orientation===v.HEXAGONAL&&(I.hexSideLength=p.hexsidelength,I.staggerAxis=p.staggeraxis,I.staggerIndex=p.staggerindex);for(var Y=[],Z=0,Q=A.data.length;Z<Q;Z++)R=f(A.data[Z]),R.gid>0?(N=new m(I,R.gid,O,P.length,p.tilewidth,p.tileheight),N.rotation=R.rotation,N.flipX=R.flipped,Y.push(N)):(F=y?null:new m(I,-1,O,P.length,p.tilewidth,p.tileheight),Y.push(F)),O++,O===A.width&&(P.push(Y),O=0,Y=[])}I.data=P,T.push(I)}return T};i.exports=h},93392:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(47975),v=e(97042),u=e(4281),o=e(39642),c=function(l){for(var f=[],m=[],h=null,p,y=0;y<l.tilesets.length;y++){var x=l.tilesets[y];if(x.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(x.image){var T=new a(x.name,x.firstgid,x.tilewidth,x.tileheight,x.margin,x.spacing,void 0,void 0,x.tileoffset);if(l.version>1){var C=void 0,E=void 0;if(Array.isArray(x.tiles)){C=C||{},E=E||{};for(var A=0;A<x.tiles.length;A++){var w=x.tiles[A];if(w.properties){var b={};w.properties.forEach(function(k){b[k.name]=k.value}),E[w.id]=b}if(w.objectgroup&&((C[w.id]||(C[w.id]={})).objectgroup=w.objectgroup,w.objectgroup.objects)){var I=w.objectgroup.objects.map(function(k){return u(k)});C[w.id].objectgroup.objects=I}w.animation&&((C[w.id]||(C[w.id]={})).animation=w.animation),w.type&&((C[w.id]||(C[w.id]={})).type=w.type)}}Array.isArray(x.wangsets)&&(C=C||{},E=E||{},o(x.wangsets,C)),C&&(T.tileData=C,T.tileProperties=E)}else if(x.tileproperties&&(T.tileProperties=x.tileproperties),x.tiles){T.tileData=x.tiles;for(p in T.tileData){var R=T.tileData[p].objectgroup;if(R&&R.objects){var N=R.objects.map(function(k){return u(k)});T.tileData[p].objectgroup.objects=N}}}T.updateTileData(x.imagewidth,x.imageheight),f.push(T)}else{var F=new v(x.name,x.firstgid,x.tilewidth,x.tileheight,x.margin,x.spacing,x.properties),P=0;for(A=0;A<x.tiles.length;A++){w=x.tiles[A];var O=w.image,M=parseInt(w.id,10),L=x.firstgid+M;F.addImage(L,O),P=Math.max(M,P)}F.maxId=P,m.push(F)}h&&(h.lastgid=x.firstgid-1),h=x}return{tilesets:f,imageCollections:m}};i.exports=c},39642:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){for(var v=0;v<e.length;v++){var u=e[v],o=v;if(u.name&&u.name!==""&&(o=u.name),Array.isArray(u.wangtiles)&&u.wangtiles.length>0){var c={},l={},f,m,h;if(Array.isArray(u.edgecolors))for(f=0;f<u.edgecolors.length;f++)h=1+f,m=u.edgecolors[f],m.name!==""&&(c[h]=m.name);if(Array.isArray(u.cornercolors))for(f=0;f<u.cornercolors.length;f++)h=1+f,m=u.cornercolors[f],m.name!==""&&(l[h]=m.name);if(Array.isArray(u.colors))for(f=0;f<u.colors.length;f++)m=u.colors[f],h=1+f,m.name!==""&&(c[h]=l[h]=m.name);for(var p=[c,l,c,l,c,l,c,l],y=0;y<u.wangtiles.length;y++){var x=u.wangtiles[y],T=a[x.tileid]||(a[x.tileid]={});T=T.wangid||(T.wangid={});for(var C=[],E=0;E<Math.min(p.length,x.wangid.length);E++){if(m=x.wangid[E],m===0){C.push(void 0);continue}var A=p[E][m];if(A!==void 0){C.push(A);continue}C.push(m)}T[o]=C}}}};i.exports=g},50044:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={AssignTileProperties:e(48646),Base64Decode:e(43908),BuildTilesetIndex:e(14556),CreateGroupLayer:e(92044),ParseGID:e(8847),ParseImageLayers:e(78339),ParseJSONTiled:e(2378),ParseObject:e(4281),ParseObjectLayers:e(61136),ParseTileLayers:e(95925),ParseTilesets:e(93392)}},73779:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(91963),u=e(7599),o=e(57911),c=e(66458),l=new a({initialize:function(m){this.scene=m,this.systems=m.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],m.sys.events.once(u.BOOT,this.boot,this),m.sys.events.on(u.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var f=this.systems.events;f.on(u.PRE_UPDATE,this.preUpdate,this),f.on(u.UPDATE,this.update,this),f.once(u.SHUTDOWN,this.shutdown,this)},addEvent:function(f){var m;return f instanceof o?(m=f,this.removeEvent(m),m.elapsed=m.startAt,m.hasDispatched=!1,m.repeatCount=m.repeat===-1||m.loop?999999999999:m.repeat):m=new o(f),this._pendingInsertion.push(m),m},delayedCall:function(f,m,h,p){return this.addEvent({delay:f,callback:m,args:h,callbackScope:p})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(f){Array.isArray(f)||(f=[f]);for(var m=0;m<f.length;m++){var h=f[m];c(this._pendingRemoval,h),c(this._pendingInsertion,h),c(this._active,h)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var f=this._pendingRemoval.length,m=this._pendingInsertion.length;if(!(f===0&&m===0)){var h,p;for(h=0;h<f;h++){p=this._pendingRemoval[h];var y=this._active.indexOf(p);y>-1&&this._active.splice(y,1),p.destroy()}for(h=0;h<m;h++)p=this._pendingInsertion[h],this._active.push(p);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(f,m){if(this.now=f,!this.paused){m*=this.timeScale;for(var h=0;h<this._active.length;h++){var p=this._active[h];if(!p.paused&&(p.elapsed+=m*p.timeScale,p.elapsed>=p.delay)){var y=p.elapsed-p.delay;if(p.elapsed=p.delay,!p.hasDispatched&&p.callback&&(p.hasDispatched=!0,p.callback.apply(p.callbackScope,p.args)),p.repeatCount>0){if(p.repeatCount--,y>=p.delay)for(;y>=p.delay&&p.repeatCount>0;)p.callback&&p.callback.apply(p.callbackScope,p.args),y-=p.delay,p.repeatCount--;p.elapsed=y,p.hasDispatched=!1}else p.hasDispatched&&this._pendingRemoval.push(p)}}}},shutdown:function(){var f;for(f=0;f<this._pendingInsertion.length;f++)this._pendingInsertion[f].destroy();for(f=0;f<this._active.length;f++)this._active[f].destroy();for(f=0;f<this._pendingRemoval.length;f++)this._pendingRemoval[f].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var m=this.systems.events;m.off(u.PRE_UPDATE,this.preUpdate,this),m.off(u.UPDATE,this.update,this),m.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});v.register("Clock",l,"time"),i.exports=l},20517:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(6659),u=e(61286),o=e(72632),c=e(7599),l=new a({Extends:v,initialize:function(m,h){v.call(this),this.scene=m,this.systems=m.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.events=[];var p=this.systems.events;p.on(c.PRE_UPDATE,this.preUpdate,this),p.on(c.UPDATE,this.update,this),p.once(c.SHUTDOWN,this.destroy,this),h&&this.add(h)},preUpdate:function(f,m){this.paused||(this.elapsed+=m)},update:function(){if(!this.paused){var f,m=this.events,h=!1,p=this.systems,y;for(f=0;f<m.length;f++){var x=m[f];if(!x.complete&&x.time<=this.elapsed){if(x.complete=!0,this.totalComplete++,x.once&&(h=!0),x.set&&x.target)for(var T in x.set)x.target[T]=x.set[T];x.tween&&p.tweens.add(x.tween),x.sound&&(typeof x.sound=="string"?p.sound.play(x.sound):p.sound.play(x.sound.key,x.sound.config)),y=x.target?x.target:this,x.event&&this.emit(x.event,y),x.run&&x.run.call(y),x.stop&&this.stop()}}if(h)for(f=0;f<m.length;f++)m[f].complete&&m[f].once&&(m.splice(f,1),f--);this.totalComplete>=m.length&&(this.complete=!0)}},play:function(f){return f===void 0&&(f=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,f&&this.reset(),this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(){this.elapsed=0;for(var f=0;f<this.events.length;f++)this.events[f].complete=!1;return this.play(!1)},add:function(f){Array.isArray(f)||(f=[f]);var m=this.events,h=0;m.length>0&&(h=m[m.length-1].time);for(var p=0;p<f.length;p++){var y=f[p],x=o(y,"at",0),T=o(y,"in",null);T!==null&&(x=this.elapsed+T);var C=o(y,"from",null);C!==null&&(x=h+C),m.push({complete:!1,time:x,run:o(y,"run",null),event:o(y,"event",null),target:o(y,"target",null),set:o(y,"set",null),tween:o(y,"tween",null),sound:o(y,"sound",null),once:o(y,"once",!1),stop:o(y,"stop",!1)}),h=x}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var f=Math.min(this.totalComplete,this.events.length);return f/this.events.length},destroy:function(){var f=this.systems.events;f.off(c.PRE_UPDATE,this.preUpdate,this),f.off(c.UPDATE,this.update,this),f.off(c.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});u.register("timeline",function(f){return new l(this.scene,f)}),i.exports=l},57911:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(72632),u=new a({initialize:function(c){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(c)},reset:function(o){if(this.delay=v(o,"delay",0),this.repeat=v(o,"repeat",0),this.loop=v(o,"loop",!1),this.callback=v(o,"callback",void 0),this.callbackScope=v(o,"callbackScope",this),this.args=v(o,"args",[]),this.timeScale=v(o,"timeScale",1),this.startAt=v(o,"startAt",0),this.paused=v(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat,c=this.elapsed+this.delay*(this.repeat-this.repeatCount);return c/o}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});i.exports=u},97121:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Clock:e(73779),Timeline:e(20517),TimerEvent:e(57911)}},64532:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66458),v=e(56694),u=e(5454),o=e(68710),c=e(91963),l=e(7599),f=e(91944),m=e(39366),h=e(68061),p=e(45641),y=e(56034),x=new v({initialize:function(C){this.scene=C,this.events=C.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(l.UPDATE,this.update,this),this.events.once(l.SHUTDOWN,this.shutdown,this)},create:function(T){Array.isArray(T)||(T=[T]);for(var C=[],E=0;E<T.length;E++){var A=T[E];A instanceof m||A instanceof p?C.push(A):Array.isArray(A.tweens)?C.push(y(this,A)):C.push(h(this,A))}return C.length===1?C[0]:C},add:function(T){var C=T,E=this.tweens;return C instanceof m||C instanceof p||(Array.isArray(C.tweens)?C=y(this,C):C=h(this,C)),E.push(C.reset()),C},addMultiple:function(T){for(var C,E=[],A=this.tweens,w=0;w<T.length;w++)C=T[w],C instanceof m||C instanceof p||(Array.isArray(C.tweens)?C=y(this,C):C=h(this,C)),A.push(C.reset()),E.push(C);return E},chain:function(T){var C=y(this,T);return this.tweens.push(C.init()),C},getChainedTweens:function(T){return T.getChainedTweens()},has:function(T){return this.tweens.indexOf(T)>-1},existing:function(T){return this.has(T)||this.tweens.push(T.reset()),this},addCounter:function(T){var C=o(this,T);return this.tweens.push(C.reset()),C},stagger:function(T,C){return f(T,C)},setLagSmooth:function(T,C){return T===void 0&&(T=1/1e-8),C===void 0&&(C=0),this.maxLag=T,this.lagSkip=Math.min(C,this.maxLag),this},setFps:function(T){return T===void 0&&(T=240),this.gap=1e3/T,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(T){var C=Date.now()-this.prevTime;C>this.maxLag&&(this.startTime+=C-this.lagSkip),this.prevTime+=C;var E=this.prevTime-this.startTime,A=E-this.nextTime,w=E-this.time*1e3;return A>0||T?(E/=1e3,this.time=E,this.nextTime+=A+(A>=this.gap?4:this.gap-A)):w=0,w},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(T){T===void 0&&(T=!1);var C=this.getDelta(T);if(!(C<=0)){this.processing=!0;var E,A,w=[],b=this.tweens;for(E=0;E<b.length;E++)A=b[E],A.update(C)&&w.push(A);var I=w.length;if(I&&b.length>0){for(E=0;E<I;E++){A=w[E];var R=b.indexOf(A);R>-1&&(A.isPendingRemove()||A.isDestroyed())&&(b.splice(R,1),A.destroy())}w.length=0}this.processing=!1}},remove:function(T){return this.processing?T.setPendingRemoveState():(a(this.tweens,T),T.setRemovedState()),this},reset:function(T){return this.existing(T),T.seek(),T.setActiveState(),this},makeActive:function(T){return this.existing(T),T.setActiveState(),this},each:function(T,C){var E,A=[null];for(E=1;E<arguments.length;E++)A.push(arguments[E]);return this.tweens.forEach(function(w){A[0]=w,T.apply(C,A)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(T){var C=[],E=this.tweens;Array.isArray(T)?T=u(T):T=[T];for(var A=T.length,w=0;w<E.length;w++)for(var b=E[w],I=0;I<A;I++)!b.isDestroyed()&&b.hasTarget(T[I])&&C.push(b);return C},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(T){return this.timeScale=T,this},isTweening:function(T){for(var C=this.tweens,E,A=0;A<C.length;A++)if(E=C[A],E.isPlaying()&&E.hasTarget(T))return!0;return!1},killAll:function(){for(var T=this.processing?this.getTweens():this.tweens,C=0;C<T.length;C++)T[C].destroy();return this.processing||(T.length=0),this},killTweensOf:function(T){for(var C=this.getTweensOf(T),E=0;E<C.length;E++)C[E].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(l.UPDATE,this.update,this),this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.events=null}});c.register("TweenManager",x,"tweens"),i.exports=x},63130:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){return e&&e.hasOwnProperty(a)?e[a]:v};i.exports=g},21902:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(35060),v=e(40587),u=function(o,c){var l=a.Power0;if(typeof o=="string")if(a.hasOwnProperty(o))l=a[o];else{var f="";if(o.indexOf(".")){f=o.substring(o.indexOf(".")+1);var m=f.toLowerCase();m==="in"?f="easeIn":m==="out"?f="easeOut":m==="inout"&&(f="easeInOut")}o=v(o.substring(0,o.indexOf(".")+1)+f),a.hasOwnProperty(o)&&(l=a[o])}else typeof o=="function"&&(l=o);if(!c)return l;var h=c.slice(0);return h.unshift(0),function(p){return h[0]=p,l.apply(this,h)}};i.exports=u},4840:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63210),v=e(88332),u=e(47614),o={bezier:a,catmull:v,catmullrom:v,linear:u},c=function(l){if(l===null)return null;var f=o.linear;return typeof l=="string"?o.hasOwnProperty(l)&&(f=o[l]):typeof l=="function"&&(f=l),f};i.exports=c},28348:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u;if(e.hasOwnProperty(a)){var o=typeof e[a];o==="function"?u=function(c,l,f,m,h,p){return e[a](c,l,f,m,h,p)}:u=function(){return e[a]}}else typeof v=="function"?u=v:u=function(){return v};return u};i.exports=g},92407:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(53709),v=function(u){var o,c=[];if(u.hasOwnProperty("props"))for(o in u.props)o.substring(0,1)!=="_"&&c.push({key:o,value:u.props[o]});else for(o in u)a.indexOf(o)===-1&&o.substring(0,1)!=="_"&&c.push({key:o,value:u[o]});return c};i.exports=v},65868:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10850),v=function(u){var o=a(u,"targets",null);return o===null||(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o])),o};i.exports=v},9744:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(17489),v=e(61616);function u(m){return!!m.getActive&&typeof m.getActive=="function"}function o(m){return!!m.getStart&&typeof m.getStart=="function"}function c(m){return!!m.getEnd&&typeof m.getEnd=="function"}function l(m){return o(m)||c(m)||u(m)}var f=function(m,h){var p,y=function(W,K,B){return B},x=function(W,K,B){return B},T=null,C=typeof h;if(C==="number")y=function(){return h};else if(Array.isArray(h))x=function(){return h[0]},y=function(){return h[h.length-1]};else if(C==="string"){var E=h.toLowerCase(),A=E.substring(0,6)==="random",w=E.substring(0,3)==="int";if(A||w){var b=E.indexOf("("),I=E.indexOf(")"),R=E.indexOf(",");if(b&&I&&R){var N=parseFloat(E.substring(b+1,R)),F=parseFloat(E.substring(R+1,I));A?y=function(){return v(N,F)}:y=function(){return a(N,F)}}else throw new Error("invalid random() format")}else{E=E[0];var P=parseFloat(h.substr(2));switch(E){case"+":y=function(W,K,B){return B+P};break;case"-":y=function(W,K,B){return B-P};break;case"*":y=function(W,K,B){return B*P};break;case"/":y=function(W,K,B){return B/P};break;default:y=function(){return parseFloat(h)}}}}else if(C==="function")y=h;else if(C==="object")if(l(h))u(h)&&(T=h.getActive),c(h)&&(y=h.getEnd),o(h)&&(x=h.getStart);else if(h.hasOwnProperty("value"))p=f(m,h.value);else{var O=h.hasOwnProperty("to"),M=h.hasOwnProperty("from"),L=h.hasOwnProperty("start");if(O&&(M||L)){if(p=f(m,h.to),L){var k=f(m,h.start);p.getActive=k.getEnd}if(M){var V=f(m,h.from);p.getStart=V.getEnd}}}return p||(p={getActive:T,getEnd:y,getStart:x}),p};i.exports=f},68710:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(502),v=e(99730),u=e(20494),o=e(63130),c=e(21902),l=e(28348),f=e(10850),m=e(9744),h=e(72066),p=e(39366),y=function(x,T,C){if(T instanceof p)return T.parent=x,T;C===void 0?C=v:C=h(v,C);var E=f(T,"from",0),A=f(T,"to",1),w=[{value:E}],b=f(T,"delay",C.delay),I=f(T,"easeParams",C.easeParams),R=f(T,"ease",C.ease),N=m("value",A),F=new p(x,w),P=F.add(0,"value",N.getEnd,N.getStart,N.getActive,c(f(T,"ease",R),f(T,"easeParams",I)),l(T,"delay",b),f(T,"duration",C.duration),o(T,"yoyo",C.yoyo),f(T,"hold",C.hold),f(T,"repeat",C.repeat),f(T,"repeatDelay",C.repeatDelay),!1,!1);P.start=E,P.current=E,F.completeDelay=u(T,"completeDelay",0),F.loop=Math.round(u(T,"loop",0)),F.loopDelay=Math.round(u(T,"loopDelay",0)),F.paused=o(T,"paused",!1),F.persist=o(T,"persist",!1),F.callbackScope=f(T,"callbackScope",F);for(var O=a.TYPES,M=0;M<O.length;M++){var L=O[M],k=f(T,L,!1);if(k){var V=f(T,L+"Params",[]);F.setCallback(L,k,V)}}return F};i.exports=y},91944:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(21902),v=e(10850),u=e(83392),o=function(c,l){l===void 0&&(l={});var f,m=v(l,"start",0),h=v(l,"ease",null),p=v(l,"grid",null),y=v(l,"from",0),x=y==="first",T=y==="center",C=y==="last",E=typeof y=="number",A=Array.isArray(c),w=parseFloat(A?c[0]:c),b=A?parseFloat(c[1]):0,I=Math.max(w,b);if(A&&(m+=w),p){var R=p[0],N=p[1],F=0,P=0,O=0,M=0,L=[];C?(F=R-1,P=N-1):E?(F=y%R,P=Math.floor(y/R)):T&&(F=(R-1)/2,P=(N-1)/2);for(var k=u.MIN_SAFE_INTEGER,V=0;V<N;V++){L[V]=[];for(var W=0;W<R;W++){O=F-W,M=P-V;var K=Math.sqrt(O*O+M*M);K>k&&(k=K),L[V][W]=K}}}var B=h?a(h):null;return p?f=function(G,D,$,z){var H=0,Y=z%R,Z=Math.floor(z/R);Y>=0&&Y<R&&Z>=0&&Z<N&&(H=L[Z][Y]);var Q;if(A){var tt=b-w;B?Q=H/k*tt*B(H/k):Q=H/k*tt}else B?Q=H*w*B(H/k):Q=H*w;return Q+m}:f=function(G,D,$,z,H){H--;var Y;x?Y=z:T?Y=Math.abs(H/2-z):C?Y=H-z:E&&(Y=Math.abs(y-z));var Z;if(A){var Q;T?Q=(b-w)/H*(Y*2):Q=(b-w)/H*Y,B?Z=Q*B(Y/H):Z=Q}else B?Z=H*I*B(Y/H):Z=Y*w;return Z+m},f};i.exports=o},68061:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(502),v=e(99730),u=e(20494),o=e(63130),c=e(21902),l=e(4840),f=e(28348),m=e(92407),h=e(65868),p=e(10850),y=e(9744),x=e(72066),T=e(39366),C=function(E,A,w){if(A instanceof T)return A.parent=E,A;w===void 0?w=v:w=x(v,w);var b=h(A);!b&&w.targets&&(b=w.targets);for(var I=m(A),R=p(A,"delay",w.delay),N=p(A,"duration",w.duration),F=p(A,"easeParams",w.easeParams),P=p(A,"ease",w.ease),O=p(A,"hold",w.hold),M=p(A,"repeat",w.repeat),L=p(A,"repeatDelay",w.repeatDelay),k=o(A,"yoyo",w.yoyo),V=o(A,"flipX",w.flipX),W=o(A,"flipY",w.flipY),K=p(A,"interpolation",w.interpolation),B=function(lt,ut,ct,ht){if(ct==="texture"){var gt=ht,yt=void 0;Array.isArray(ht)?(gt=ht[0],yt=ht[1]):ht.hasOwnProperty("value")?(gt=ht.value,Array.isArray(ht.value)?(gt=ht.value[0],yt=ht.value[1]):typeof ht.value=="string"&&(gt=ht.value)):typeof ht=="string"&&(gt=ht),lt.addFrame(ut,gt,yt,f(ht,"delay",R),p(ht,"duration",N),p(ht,"hold",O),p(ht,"repeat",M),p(ht,"repeatDelay",L),o(ht,"flipX",V),o(ht,"flipY",W))}else{var Et=y(ct,ht),bt=l(p(ht,"interpolation",K));lt.add(ut,ct,Et.getEnd,Et.getStart,Et.getActive,c(p(ht,"ease",P),p(ht,"easeParams",F)),f(ht,"delay",R),p(ht,"duration",N),o(ht,"yoyo",k),p(ht,"hold",O),p(ht,"repeat",M),p(ht,"repeatDelay",L),o(ht,"flipX",V),o(ht,"flipY",W),bt,bt?ht:null)}},G=new T(E,b),D=0;D<I.length;D++)for(var $=I[D].key,z=I[D].value,H=0;H<b.length;H++)$==="scale"&&!b[H].hasOwnProperty("scale")?(B(G,H,"scaleX",z),B(G,H,"scaleY",z)):B(G,H,$,z);G.completeDelay=u(A,"completeDelay",0),G.loop=Math.round(u(A,"loop",0)),G.loopDelay=Math.round(u(A,"loopDelay",0)),G.paused=o(A,"paused",!1),G.persist=o(A,"persist",!1),G.callbackScope=p(A,"callbackScope",G);for(var Y=a.TYPES,Z=0;Z<Y.length;Z++){var Q=Y[Z],tt=p(A,Q,!1);if(tt){var et=p(A,Q+"Params",[]);G.setCallback(Q,tt,et)}}return G};i.exports=C},56034:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(502),v=e(20494),u=e(63130),o=e(65868),c=e(10850),l=e(68061),f=e(45641),m=function(h,p){if(p instanceof f)return p.parent=h,p;var y=new f(h);y.startDelay=c(p,"delay",0),y.completeDelay=v(p,"completeDelay",0),y.loop=Math.round(v(p,"loop",c(p,"repeat",0))),y.loopDelay=Math.round(v(p,"loopDelay",c(p,"repeatDelay",0))),y.paused=u(p,"paused",!1),y.persist=u(p,"persist",!0),y.callbackScope=c(p,"callbackScope",y);var x,T=a.TYPES;for(x=0;x<T.length;x++){var C=T[x],E=c(p,C,!1);if(E){var A=c(p,C+"Params",[]);y.setCallback(C,E,A)}}var w=c(p,"tweens",null);if(Array.isArray(w)){var b=[],I=o(p),R=void 0;for(I&&(R={targets:I}),x=0;x<w.length;x++)b.push(l(y,w[x],R));y.add(b)}return y};i.exports=m},79619:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={GetBoolean:e(63130),GetEaseFunction:e(21902),GetInterpolationFunction:e(4840),GetNewValue:e(28348),GetProps:e(92407),GetTargets:e(65868),GetValueOp:e(9744),NumberTweenBuilder:e(68710),StaggerBuilder:e(91944),TweenBuilder:e(68061)}},5570:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="active"},6383:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="complete"},72582:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="loop"},90281:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="pause"},80803:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="repeat"},13640:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="resume"},10472:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="start"},5379:i=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="stop"},43449:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="update"},61541:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports="yoyo"},54272:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={TWEEN_ACTIVE:e(5570),TWEEN_COMPLETE:e(6383),TWEEN_LOOP:e(72582),TWEEN_PAUSE:e(90281),TWEEN_RESUME:e(13640),TWEEN_REPEAT:e(80803),TWEEN_START:e(10472),TWEEN_STOP:e(5379),TWEEN_UPDATE:e(43449),TWEEN_YOYO:e(61541)}},75193:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a={States:e(55303),Builders:e(79619),Events:e(54272),TweenManager:e(64532),Tween:e(39366),TweenData:e(15718),TweenFrameData:e(96490),BaseTween:e(502),TweenChain:e(45641)};i.exports=a},502:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(6659),u=e(54272),o=e(55303),c=new a({Extends:v,initialize:function(f){v.call(this),this.parent=f,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=o.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(l){return this.timeScale=l,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(u.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(u.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(u.TWEEN_COMPLETE,"onComplete")},complete:function(l){return l===void 0&&(l=0),l?(this.setCompleteDelayState(),this.countdown=l):this.onCompleteHandler(),this},completeAfterLoop:function(l){return l===void 0&&(l=0),this.loopCounter>l&&(this.loopCounter=l),this},remove:function(){return this.parent.remove(this),this},stop:function(){return!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(u.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(l){this.countdown-=l,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(l){return this.countdown-=l,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(u.TWEEN_START,"onStart"),l=0),l},updateCompleteDelay:function(l){this.countdown-=l,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(l,f,m){return m===void 0&&(m=[]),this.callbacks.hasOwnProperty(l)&&(this.callbacks[l]={func:f,params:m}),this},setPendingState:function(){this.state=o.PENDING},setActiveState:function(){this.state=o.ACTIVE},setLoopDelayState:function(){this.state=o.LOOP_DELAY},setCompleteDelayState:function(){this.state=o.COMPLETE_DELAY},setStartDelayState:function(){this.state=o.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=o.PENDING_REMOVE},setRemovedState:function(){this.state=o.REMOVED},setFinishedState:function(){this.state=o.FINISHED},setDestroyedState:function(){this.state=o.DESTROYED},isPending:function(){return this.state===o.PENDING},isActive:function(){return this.state===o.ACTIVE},isLoopDelayed:function(){return this.state===o.LOOP_DELAY},isCompleteDelayed:function(){return this.state===o.COMPLETE_DELAY},isStartDelayed:function(){return this.state===o.START_DELAY},isPendingRemove:function(){return this.state===o.PENDING_REMOVE},isRemoved:function(){return this.state===o.REMOVED},isFinished:function(){return this.state===o.FINISHED},isDestroyed:function(){return this.state===o.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(l){l.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});c.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],i.exports=c},65521:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(56694),v=e(54272),u=e(55303),o=new a({initialize:function(l,f,m,h,p,y,x,T,C,E){this.tween=l,this.targetIndex=f,this.duration=h,this.totalDuration=0,this.delay=0,this.getDelay=m,this.yoyo=p,this.hold=y,this.repeat=x,this.repeatDelay=T,this.repeatCounter=0,this.flipX=C,this.flipY=E,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(c){c===void 0&&(c=this.current),this.tween.targets[this.targetIndex][this.key]=c},setCreatedState:function(){this.state=u.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=u.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=u.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=u.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=u.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=u.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=u.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=u.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===u.CREATED},isDelayed:function(){return this.state===u.DELAY},isPendingRender:function(){return this.state===u.PENDING_RENDER},isPlayingForward:function(){return this.state===u.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===u.PLAYING_BACKWARD},isHolding:function(){return this.state===u.HOLD_DELAY},isRepeating:function(){return this.state===u.REPEAT_DELAY},isComplete:function(){return this.state===u.COMPLETE},setStateFromEnd:function(c){this.yoyo?this.onRepeat(c,!0,!0):this.repeatCounter>0?this.onRepeat(c,!0,!1):this.setCompleteState()},setStateFromStart:function(c){this.repeatCounter>0?this.onRepeat(c,!1):this.setCompleteState()},reset:function(){var c=this.tween,l=c.totalTargets,f=this.targetIndex,m=c.targets[f],h=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(m,h,0,f,l,c),this.repeatCounter=this.repeat===-1?u.MAX:this.repeat,this.setPendingRenderState();var p=this.duration+this.hold;this.yoyo&&(p+=this.duration);var y=p+this.repeatDelay;this.totalDuration=this.delay+p,this.repeat===-1?(this.totalDuration+=y*u.MAX,c.isInfinite=!0):this.repeat>0&&(this.totalDuration+=y*this.repeat),this.totalDuration>c.duration&&(c.duration=this.totalDuration),this.delay<c.startDelay&&(c.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(c,l,f){var m=this.tween,h=m.totalTargets,p=this.targetIndex,y=m.targets[p],x=this.key,T=x!=="texture";if(this.elapsed=c,this.progress=c/this.duration,this.flipX&&y.toggleFlipX(),this.flipY&&y.toggleFlipY(),T&&(l||f)&&(this.start=this.getStartValue(y,x,this.start,p,h,m)),f){this.setPlayingBackwardState(),this.dispatchEvent(v.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,T&&(this.end=this.getEndValue(y,x,this.start,p,h,m)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-c,T&&(this.current=this.start,y[x]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(v.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});i.exports=o},99730:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};i.exports=g},53709:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},39366:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(502),v=e(56694),u=e(54272),o=e(99325),c=e(61286),l=e(83392),f=e(55303),m=e(15718),h=e(96490),p=new v({Extends:a,initialize:function(x,T){a.call(this,x),this.targets=T,this.totalTargets=T.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(y,x,T,C,E,A,w,b,I,R,N,F,P,O,M,L){var k=new m(this,y,x,T,C,E,A,w,b,I,R,N,F,P,O,M,L);return this.totalData=this.data.push(k),k},addFrame:function(y,x,T,C,E,A,w,b,I,R){var N=new h(this,y,x,T,C,E,A,w,b,I,R);return this.totalData=this.data.push(N),N},getValue:function(y){y===void 0&&(y=0);var x=null;return this.data&&(x=this.data[y].current),x},hasTarget:function(y){return this.targets&&this.targets.indexOf(y)!==-1},updateTo:function(y,x,T){if(T===void 0&&(T=!1),y!=="texture")for(var C=0;C<this.totalData;C++){var E=this.data[C];E.key===y&&(E.isPlayingForward()||E.isPlayingBackward())&&(E.end=x,T&&(E.start=E.current))}return this},restart:function(){switch(this.state){case f.REMOVED:case f.FINISHED:this.seek(),this.parent.makeActive(this);break;case f.PENDING:case f.PENDING_REMOVE:this.parent.reset(this);break;case f.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,a.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(y,x,T){if(y===void 0&&(y=0),x===void 0&&(x=16.6),T===void 0&&(T=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;T||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive");var C=this.paused;if(this.paused=!1,y>0){for(var E=Math.floor(y/x),A=y-E*x,w=0;w<E;w++)this.update(x);A>0&&this.update(A)}return this.paused=C,this.isSeeking=!1,this},initTweenData:function(y){y===void 0&&(y=!1),this.duration=0,this.startDelay=l.MAX_SAFE_INTEGER;for(var x=this.data,T=0;T<this.totalData;T++)x[T].reset(y);this.duration=Math.max(this.duration,.01);var C=this.duration,E=this.completeDelay,A=this.loopCounter,w=this.loopDelay;A>0?this.totalDuration=C+E+(C+w)*A:this.totalDuration=C+E},reset:function(y){return y===void 0&&(y=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=f.MAX),y||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")),this},update:function(y){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(y*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(y),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(y),!1;this.hasStarted||(this.startDelay-=y,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(u.TWEEN_START,"onStart"),y=0));var x=!1;if(this.isActive())for(var T=this.data,C=0;C<this.totalData;C++)T[C].update(y)&&(x=!0);this.elapsed+=y,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=y,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),x||this.nextState();var E=this.isPendingRemove();return E&&this.persist&&(this.setFinishedState(),E=!1),E},forward:function(y){return this.update(y),this},rewind:function(y){return this.update(-y),this},dispatchEvent:function(y,x){if(!this.isSeeking){this.emit(y,this,this.targets);var T=this.callbacks[x];T&&T.func.apply(this.callbackScope,[this,this.targets].concat(T.params))}},destroy:function(){a.prototype.destroy.call(this),this.targets=null}});c.register("tween",function(y){return this.scene.sys.tweens.add(y)}),o.register("tween",function(y){return this.scene.sys.tweens.create(y)}),i.exports=p},45641:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(66458),v=e(502),u=e(56694),o=e(54272),c=e(99325),l=e(61286),f=e(55303),m=new u({Extends:v,initialize:function(p){v.call(this,p),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?f.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive"),this},add:function(h){var p=this.parent.create(h);Array.isArray(p)||(p=[p]);for(var y=this.data,x=0;x<p.length;x++){var T=p[x];T.parent=this,y.push(T.reset())}return this.totalData=y.length,this},remove:function(h){return a(this.data,h),h.setRemovedState(),h===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(h){for(var p=this.data,y=0;y<this.totalData;y++)if(p[y].hasTarget(h))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(h){return h.seek(),h.setActiveState(),this},makeActive:function(h){return h.reset(),h.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var h=this.data,p=this.totalData,y=0;y<p;y++)h[y].reset(!1);this.currentIndex=0,this.currentTween=h[0]},update:function(h){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;h*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(h):this.isCompleteDelayed()?this.updateCompleteDelay(h):this.isStartDelayed()&&(h=this.updateStartCountdown(h));var p=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(h)&&this.nextTween()&&this.nextState(),p=this.isPendingRemove(),p&&this.persist&&(this.setFinishedState(),p=!1)),p},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(h){this.currentIndex=h,this.currentTween=this.data[h],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(o.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(h,p){this.emit(h,this);var y=this.callbacks[p];y&&y.func.apply(this.callbackScope,[this].concat(y.params))},destroy:function(){v.prototype.destroy.call(this),this.currentTween=null}});l.register("tweenchain",function(h){return this.scene.sys.tweens.chain(h)}),c.register("tweenchain",function(h){return this.scene.sys.tweens.create(h)}),i.exports=m},15718:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65521),v=e(82897),u=e(56694),o=e(54272),c=new u({Extends:a,initialize:function(f,m,h,p,y,x,T,C,E,A,w,b,I,R,N,F,P){a.call(this,f,m,C,E,A,w,b,I,R,N),this.key=h,this.getActiveValue=x,this.getEndValue=p,this.getStartValue=y,this.ease=T,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=F,this.interpolationData=P},reset:function(l){a.prototype.reset.call(this);var f=this.tween.targets[this.targetIndex],m=this.key;l&&(f[m]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(f[m]=this.getActiveValue(f,m,0))},update:function(l){var f=this.tween,m=f.totalTargets,h=this.targetIndex,p=f.targets[h],y=this.key;if(!p)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=l,this.elapsed<=0&&(this.elapsed=0,l=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(o.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(p,y,p[y],h,m,f),this.end=this.getEndValue(p,y,this.start,h,m,f),this.current=this.start,p[y]=this.start,this.setPlayingForwardState(),!0;var x=this.isPlayingForward(),T=this.isPlayingBackward();if(x||T){var C=this.elapsed,E=this.duration,A=0,w=!1;C+=l,C>=E?(A=C-E,C=E,w=!0):C<0&&(C=0);var b=v(C/E,0,1);if(this.elapsed=C,this.progress=b,this.previous=this.current,w)x?(this.current=this.end,p[y]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(A)):(this.current=this.start,p[y]=this.start,this.setStateFromStart(A));else{x||(b=1-b);var I=this.ease(b);this.interpolation?this.current=this.interpolation(this.interpolationData,I):this.current=this.start+(this.end-this.start)*I,p[y]=this.current}this.dispatchEvent(o.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(l,f){var m=this.tween;if(!m.isSeeking){var h=m.targets[this.targetIndex],p=this.key,y=this.current,x=this.previous;m.emit(l,m,p,h,y,x);var T=m.callbacks[f];T&&T.func.apply(m.callbackScope,[m,h,p,y,x].concat(T.params))}},destroy:function(){a.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});i.exports=c},96490:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(65521),v=e(82897),u=e(56694),o=e(54272),c=new u({Extends:a,initialize:function(f,m,h,p,y,x,T,C,E,A,w){a.call(this,f,m,y,x,!1,T,C,E,A,w),this.key="texture",this.startTexture=null,this.endTexture=h,this.startFrame=null,this.endFrame=p,this.yoyo=C!==0},reset:function(l){a.prototype.reset.call(this);var f=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=f.texture.key,this.startFrame=f.frame.name),l&&f.setTexture(this.startTexture,this.startFrame)},update:function(l){var f=this.tween,m=this.targetIndex,h=f.targets[m];if(!h)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=l,this.elapsed<=0&&(this.elapsed=0,l=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(o.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&h.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var p=this.isPlayingForward(),y=this.isPlayingBackward();if(p||y){var x=this.elapsed,T=this.duration,C=0,E=!1;x+=l,x>=T?(C=x-T,x=T,E=!0):x<0&&(x=0);var A=v(x/T,0,1);this.elapsed=x,this.progress=A,E&&(p?(h.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(C)):(h.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(C))),this.dispatchEvent(o.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(l,f){var m=this.tween;if(!m.isSeeking){var h=m.targets[this.targetIndex],p=this.key;m.emit(l,m,p,h);var y=m.callbacks[f];y&&y.func.apply(m.callbackScope,[m,h,p].concat(y.params))}},destroy:function(){a.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});i.exports=c},55303:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};i.exports=g},56694:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(c){return!!c.get&&typeof c.get=="function"||!!c.set&&typeof c.set=="function"}function e(c,l,f){var m=f?c[l]:Object.getOwnPropertyDescriptor(c,l);return!f&&m.value&&typeof m.value=="object"&&(m=m.value),m&&g(m)?(typeof m.enumerable>"u"&&(m.enumerable=!0),typeof m.configurable>"u"&&(m.configurable=!0),m):!1}function a(c,l){var f=Object.getOwnPropertyDescriptor(c,l);return f?(f.value&&typeof f.value=="object"&&(f=f.value),f.configurable===!1):!1}function v(c,l,f,m){for(var h in l)if(l.hasOwnProperty(h)){var p=e(l,h,f);if(p!==!1){var y=m||c;if(a(y.prototype,h)){if(o.ignoreFinals)continue;throw new Error("cannot override final property '"+h+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(c.prototype,h,p)}else c.prototype[h]=l[h]}}function u(c,l){if(l){Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++)v(c,l[f].prototype||l[f])}}function o(c){c||(c={});var l,f;if(c.initialize){if(typeof c.initialize!="function")throw new Error("initialize must be a function");l=c.initialize,delete c.initialize}else if(c.Extends){var m=c.Extends;l=function(){m.apply(this,arguments)}}else l=function(){};c.Extends?(l.prototype=Object.create(c.Extends.prototype),l.prototype.constructor=l,f=c.Extends,delete c.Extends):l.prototype.constructor=l;var h=null;return c.Mixins&&(h=c.Mixins,delete c.Mixins),u(l,h),v(l,c,!0,f),l}o.extend=v,o.mixin=u,o.ignoreFinals=!1,i.exports=o},72283:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){};i.exports=g},10618:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){return null};i.exports=g},78991:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o){if(o===void 0&&(o=e),v>0){var c=v-e.length;if(c<=0)return null}if(!Array.isArray(a))return e.indexOf(a)===-1?(e.push(a),u&&u.call(o,a),a):null;for(var l=a.length-1;l>=0;)e.indexOf(a[l])!==-1&&a.splice(l,1),l--;if(l=a.length,l===0)return null;v>0&&l>c&&(a.splice(c),l=c);for(var f=0;f<l;f++){var m=a[f];e.push(m),u&&u.call(o,m)}return a};i.exports=g},48522:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u,o,c){if(v===void 0&&(v=0),c===void 0&&(c=e),u>0){var l=u-e.length;if(l<=0)return null}if(!Array.isArray(a))return e.indexOf(a)===-1?(e.splice(v,0,a),o&&o.call(c,a),a):null;for(var f=a.length-1;f>=0;)e.indexOf(a[f])!==-1&&a.pop(),f--;if(f=a.length,f===0)return null;u>0&&f>l&&(a.splice(l),f=l);for(var m=f-1;m>=0;m--){var h=a[m];e.splice(v,0,h),o&&o.call(c,h)}return a};i.exports=g},58742:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.indexOf(a);return v!==-1&&v<e.length&&(e.splice(v,1),e.push(a)),a};i.exports=g},30164:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45838),v=function(u,o,c,l,f){l===void 0&&(l=0),f===void 0&&(f=u.length);var m=0;if(a(u,l,f))for(var h=l;h<f;h++){var p=u[h];p[o]===c&&m++}return m};i.exports=v},36337:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u,o=[null];for(u=3;u<arguments.length;u++)o.push(arguments[u]);for(u=0;u<e.length;u++)o[0]=e[u],a.apply(v,o);return e};i.exports=g},46208:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45838),v=function(u,o,c,l,f){if(l===void 0&&(l=0),f===void 0&&(f=u.length),a(u,l,f)){var m,h=[null];for(m=5;m<arguments.length;m++)h.push(arguments[m]);for(m=l;m<f;m++)h[0]=u[m],o.apply(c,h)}return u};i.exports=v},2406:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(a.length){if(a.length===1)return a[0]}else return NaN;var u=1,o,c;if(v){if(e<a[0][v])return a[0];for(;a[u][v]<e;)u++}else for(;a[u]<e;)u++;return u>a.length&&(u=a.length),v?(o=a[u-1][v],c=a[u][v],c-e<=e-o?a[u]:a[u-1]):(o=a[u-1],c=a[u],c-e<=e-o?c:o)};i.exports=g},5454:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a===void 0&&(a=[]);for(var v=0;v<e.length;v++)Array.isArray(e[v])?g(e[v],a):a.push(e[v]);return a};i.exports=g},71608:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45838),v=function(u,o,c,l,f){l===void 0&&(l=0),f===void 0&&(f=u.length);var m=[];if(a(u,l,f))for(var h=l;h<f;h++){var p=u[h];(!o||o&&c===void 0&&p.hasOwnProperty(o)||o&&c!==void 0&&p[o]===c)&&m.push(p)}return m};i.exports=v},51463:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45838),v=function(u,o,c,l,f){if(l===void 0&&(l=0),f===void 0&&(f=u.length),a(u,l,f))for(var m=l;m<f;m++){var h=u[m];if(!o||o&&c===void 0&&h.hasOwnProperty(o)||o&&c!==void 0&&h[o]===c)return h}return null};i.exports=v},72861:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){a===void 0&&(a=0),v===void 0&&(v=e.length);var u=a+Math.floor(Math.random()*v);return e[u]===void 0?null:e[u]};i.exports=g},24218:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(a===v)return e;var u=e.indexOf(a),o=e.indexOf(v);if(u<0||o<0)throw new Error("Supplied items must be elements of the same array");return u>o||(e.splice(u,1),o===e.length-1?e.push(a):e.splice(o,0,a)),e};i.exports=g},58258:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(a===v)return e;var u=e.indexOf(a),o=e.indexOf(v);if(u<0||o<0)throw new Error("Supplied items must be elements of the same array");return u<o||(e.splice(u,1),o===0?e.unshift(a):e.splice(o,0,a)),e};i.exports=g},51172:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.indexOf(a);if(v>0){var u=e[v-1],o=e.indexOf(u);e[v]=u,e[o]=a}return e};i.exports=g},68396:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=e.indexOf(a);if(u===-1||v<0||v>=e.length)throw new Error("Supplied index out of bounds");return u!==v&&(e.splice(u,1),e.splice(v,0,a)),a};i.exports=g},27555:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.indexOf(a);if(v!==-1&&v<e.length-1){var u=e[v+1],o=e.indexOf(u);e[v]=u,e[o]=a}return e};i.exports=g},13401:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=[],c,l=!1;if((v||u)&&(l=!0,v||(v=""),u||(u="")),a<e)for(c=e;c>=a;c--)l?o.push(v+c.toString()+u):o.push(c);else for(c=e;c<=a;c++)l?o.push(v+c.toString()+u):o.push(c);return o};i.exports=g},89955:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(67233),v=function(u,o,c){u===void 0&&(u=0),o===void 0&&(o=null),c===void 0&&(c=1),o===null&&(o=u,u=0);for(var l=[],f=Math.max(a((o-u)/(c||1)),0),m=0;m<f;m++)l.push(u),u+=c;return l};i.exports=v},53466:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function g(v,u,o){var c=v[u];v[u]=v[o],v[o]=c}function e(v,u){return v<u?-1:v>u?1:0}var a=function(v,u,o,c,l){for(o===void 0&&(o=0),c===void 0&&(c=v.length-1),l===void 0&&(l=e);c>o;){if(c-o>600){var f=c-o+1,m=u-o+1,h=Math.log(f),p=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*p*(f-p)/f)*(m-f/2<0?-1:1),x=Math.max(o,Math.floor(u-m*p/f+y)),T=Math.min(c,Math.floor(u+(f-m)*p/f+y));a(v,u,x,T,l)}var C=v[u],E=o,A=c;for(g(v,o,u),l(v[c],C)>0&&g(v,o,c);E<A;){for(g(v,E,A),E++,A--;l(v[E],C)<0;)E++;for(;l(v[A],C)>0;)A--}l(v[o],C)===0?g(v,o,A):(A++,g(v,A,c)),A<=u&&(o=A+1),u<=A&&(c=A-1)}};i.exports=a},75757:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10850),v=e(18592),u=function(c,l,f){for(var m=[],h=0;h<c.length;h++)for(var p=0;p<l.length;p++)for(var y=0;y<f;y++)m.push({a:c[h],b:l[p]});return m},o=function(c,l,f){var m=a(f,"max",0),h=a(f,"qty",1),p=a(f,"random",!1),y=a(f,"randomB",!1),x=a(f,"repeat",0),T=a(f,"yoyo",!1),C=[];if(y&&v(l),x===-1)if(m===0)x=0;else{var E=c.length*l.length*h;T&&(E*=2),x=Math.ceil(m/E)}for(var A=0;A<=x;A++){var w=u(c,l,h);p&&v(w),C=C.concat(w),T&&(w.reverse(),C=C.concat(w))}return m&&C.splice(m),C};i.exports=o},66458:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72677),v=function(u,o,c,l){l===void 0&&(l=u);var f;if(!Array.isArray(o))return f=u.indexOf(o),f!==-1?(a(u,f),c&&c.call(l,o),o):null;for(var m=o.length-1,h=[];m>=0;){var p=o[m];f=u.indexOf(p),f!==-1&&(a(u,f),h.push(p),c&&c.call(l,p)),m--}return h};i.exports=v},8324:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72677),v=function(u,o,c,l){if(l===void 0&&(l=u),o<0||o>u.length-1)throw new Error("Index out of bounds");var f=a(u,o);return c&&c.call(l,f),f};i.exports=v},47427:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45838),v=function(u,o,c,l,f){if(o===void 0&&(o=0),c===void 0&&(c=u.length),f===void 0&&(f=u),a(u,o,c)){var m=c-o,h=u.splice(o,m);if(l)for(var p=0;p<h.length;p++){var y=h[p];l.call(f,y)}return h}else return[]};i.exports=v},50147:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(72677),v=function(u,o,c){o===void 0&&(o=0),c===void 0&&(c=u.length);var l=o+Math.floor(Math.random()*c);return a(u,l)};i.exports=v},80402:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=e.indexOf(a),o=e.indexOf(v);return u!==-1&&o===-1?(e[u]=v,!0):!1};i.exports=g},77640:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a===void 0&&(a=1);for(var v=null,u=0;u<a;u++)v=e.shift(),e.push(v);return v};i.exports=g},38487:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){a===void 0&&(a=1);for(var v=null,u=0;u<a;u++)v=e.pop(),e.unshift(v);return v};i.exports=g},45838:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){var o=e.length;if(a<0||a>o||a>=v||v>o){if(u)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};i.exports=g},27847:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){var v=e.indexOf(a);return v!==-1&&v>0&&(e.splice(v,1),e.unshift(a)),a};i.exports=g},6034:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(45838),v=function(u,o,c,l,f){if(l===void 0&&(l=0),f===void 0&&(f=u.length),a(u,l,f))for(var m=l;m<f;m++){var h=u[m];h.hasOwnProperty(o)&&(h[o]=c)}return u};i.exports=v},18592:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){for(var a=e.length-1;a>0;a--){var v=Math.floor(Math.random()*(a+1)),u=e[a];e[a]=e[v],e[v]=u}return e};i.exports=g},28834:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a=/\D/g;return e.sort(function(v,u){return parseInt(v.replace(a,""),10)-parseInt(u.replace(a,""),10)}),e};i.exports=g},72677:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){if(!(a>=e.length)){for(var v=e.length-1,u=e[a],o=a;o<v;o++)e[o]=e[o+1];return e.length=v,u}};i.exports=g},17922:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(77290);function v(l,f){return String(l).localeCompare(f)}function u(l,f){var m=l.length;if(m<=1)return l;for(var h=new Array(m),p=1;p<m;p*=2){o(l,f,p,h);var y=l;l=h,h=y}return l}function o(l,f,m,h){var p=l.length,y=0,x=m*2,T,C,E,A,w;for(T=0;T<p;T+=x)for(C=T+m,E=C+m,C>p&&(C=p),E>p&&(E=p),A=T,w=C;;)if(A<C&&w<E)f(l[A],l[w])<=0?h[y++]=l[A++]:h[y++]=l[w++];else if(A<C)h[y++]=l[A++];else if(w<E)h[y++]=l[w++];else break}var c=function(l,f){if(f===void 0&&(f=v),!l||l.length<2)return l;if(a.features.stableSort)return l.sort(f);var m=u(l,f);return m!==l&&o(m,null,l.length,l),l};i.exports=c},96928:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(a===v)return e;var u=e.indexOf(a),o=e.indexOf(v);if(u<0||o<0)throw new Error("Supplied items must be elements of the same array");return e[u]=v,e[o]=a,e};i.exports=g},59959:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Matrix:e(13515),Add:e(78991),AddAt:e(48522),BringToTop:e(58742),CountAllMatching:e(30164),Each:e(36337),EachInRange:e(46208),FindClosestInSorted:e(2406),Flatten:e(5454),GetAll:e(71608),GetFirst:e(51463),GetRandom:e(72861),MoveDown:e(51172),MoveTo:e(68396),MoveUp:e(27555),MoveAbove:e(24218),MoveBelow:e(58258),NumberArray:e(13401),NumberArrayStep:e(89955),QuickSelect:e(53466),Range:e(75757),Remove:e(66458),RemoveAt:e(8324),RemoveBetween:e(47427),RemoveRandomElement:e(50147),Replace:e(80402),RotateLeft:e(77640),RotateRight:e(38487),SafeRange:e(45838),SendToBack:e(27847),SetAll:e(6034),Shuffle:e(18592),SortByDigits:e(28834),SpliceOne:e(72677),StableSort:e(17922),Swap:e(96928)}},97494:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var a=e[0].length,v=1;v<e.length;v++)if(e[v].length!==a)return!1;return!0};i.exports=g},68428:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(76400),v=e(97494),u=function(o){var c="";if(!v(o))return c;for(var l=0;l<o.length;l++){for(var f=0;f<o[l].length;f++){var m=o[l][f].toString();m!=="undefined"?c+=a(m,2):c+="?",f<o[l].length-1&&(c+=" |")}if(l<o.length-1){c+=`
`;for(var h=0;h<o[l].length;h++)c+="---",h<o[l].length-1&&(c+="+");c+=`
`}}return c};i.exports=u},59521:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.reverse()};i.exports=g},51995:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){for(var a=0;a<e.length;a++)e[a].reverse();return e};i.exports=g},89011:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63515),v=function(u){return a(u,180)};i.exports=v},42549:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63515),v=function(u){return a(u,90)};i.exports=v},63515:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(97494),v=e(78581),u=function(o,c){if(c===void 0&&(c=90),!a(o))return null;if(typeof c!="string"&&(c=(c%360+360)%360),c===90||c===-270||c==="rotateLeft")o=v(o),o.reverse();else if(c===-90||c===270||c==="rotateRight")o.reverse(),o=v(o);else if(Math.abs(c)===180||c==="rotate180"){for(var l=0;l<o.length;l++)o[l].reverse();o.reverse()}return o};i.exports=u},14305:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(63515),v=function(u){return a(u,-90)};i.exports=v},27365:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(77640),v=e(38487),u=function(o,c,l){if(c===void 0&&(c=0),l===void 0&&(l=0),l!==0&&(l<0?a(o,Math.abs(l)):v(o,l)),c!==0)for(var f=0;f<o.length;f++){var m=o[f];c<0?a(m,Math.abs(c)):v(m,c)}return o};i.exports=u},78581:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){for(var a=e.length,v=e[0].length,u=new Array(v),o=0;o<v;o++){u[o]=new Array(a);for(var c=a-1;c>-1;c--)u[o][c]=e[c][o]}return u};i.exports=g},13515:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={CheckMatrix:e(97494),MatrixToString:e(68428),ReverseColumns:e(59521),ReverseRows:e(51995),Rotate180:e(89011),RotateLeft:e(42549),RotateMatrix:e(63515),RotateRight:e(14305),Translate:e(27365),TransposeMatrix:e(78581)}},40581:i=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(a,v){for(var u=new Uint8Array(a),o=u.length,c=v?"data:"+v+";base64,":"",l=0;l<o;l+=3)c+=g[u[l]>>2],c+=g[(u[l]&3)<<4|u[l+1]>>4],c+=g[(u[l+1]&15)<<2|u[l+2]>>6],c+=g[u[l+2]&63];return o%3===2?c=c.substring(0,c.length-1)+"=":o%3===1&&(c=c.substring(0,c.length-2)+"=="),c};i.exports=e},82329:i=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),a=0;a<g.length;a++)e[g.charCodeAt(a)]=a;var v=function(u){u=u.substr(u.indexOf(",")+1);var o=u.length,c=o*.75,l=0,f,m,h,p;u[o-1]==="="&&(c--,u[o-2]==="="&&c--);for(var y=new ArrayBuffer(c),x=new Uint8Array(y),T=0;T<o;T+=4)f=e[u.charCodeAt(T)],m=e[u.charCodeAt(T+1)],h=e[u.charCodeAt(T+2)],p=e[u.charCodeAt(T+3)],x[l++]=f<<2|m>>4,x[l++]=(m&15)<<4|h>>2,x[l++]=(h&3)<<6|p&63;return y};i.exports=v},78417:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={ArrayBufferToBase64:e(40581),Base64ToArrayBuffer:e(82329)}},22178:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Array:e(59959),Base64:e(78417),Objects:e(64615),String:e(50379),NOOP:e(72283),NULL:e(10618)}},32742:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a={};for(var v in e)Array.isArray(e[v])?a[v]=e[v].slice(0):a[v]=e[v];return a};i.exports=g},28699:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){var a,v,u;if(typeof e!="object"||e===null)return e;a=Array.isArray(e)?[]:{};for(u in e)v=e[u],a[u]=g(v);return a};i.exports=g},98611:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(42911),v=function(){var u,o,c,l,f,m,h=arguments[0]||{},p=1,y=arguments.length,x=!1;for(typeof h=="boolean"&&(x=h,h=arguments[1]||{},p=2),y===p&&(h=this,--p);p<y;p++)if((u=arguments[p])!=null)for(o in u)c=h[o],l=u[o],h!==l&&(x&&l&&(a(l)||(f=Array.isArray(l)))?(f?(f=!1,m=c&&Array.isArray(c)?c:[]):m=c&&a(c)?c:{},h[o]=v(x,m,l)):l!==void 0&&(h[o]=l));return h};i.exports=v},20494:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(5923),v=e(10850),u=function(o,c,l){var f=v(o,c,null);if(f===null)return l;if(Array.isArray(f))return a.RND.pick(f);if(typeof f=="object"){if(f.hasOwnProperty("randInt"))return a.RND.integerInRange(f.randInt[0],f.randInt[1]);if(f.hasOwnProperty("randFloat"))return a.RND.realInRange(f.randFloat[0],f.randFloat[1])}else if(typeof f=="function")return f(c);return f};i.exports=u},72632:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){var u=typeof e;return!e||u==="number"||u==="string"?v:e.hasOwnProperty(a)&&e[a]!==void 0?e[a]:v};i.exports=g},94324:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(10850),v=e(82897),u=function(o,c,l,f,m){m===void 0&&(m=l);var h=a(o,c,m);return v(h,l,f)};i.exports=u},10850:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){if(!e&&!u||typeof e=="number")return v;if(e&&e.hasOwnProperty(a))return e[a];if(u&&u.hasOwnProperty(a))return u[a];if(a.indexOf(".")!==-1){for(var o=a.split("."),c=e,l=u,f=v,m=v,h=!0,p=!0,y=0;y<o.length;y++)c&&c.hasOwnProperty(o[y])?(f=c[o[y]],c=c[o[y]]):h=!1,l&&l.hasOwnProperty(o[y])?(m=l[o[y]],l=l[o[y]]):p=!1;return h?f:p?m:v}else return v};i.exports=g},87701:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){for(var v=0;v<a.length;v++)if(!e.hasOwnProperty(a[v]))return!1;return!0};i.exports=g},53523:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){for(var v=0;v<a.length;v++)if(e.hasOwnProperty(a[v]))return!0;return!1};i.exports=g},19256:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.hasOwnProperty(a)};i.exports=g},42911:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};i.exports=g},30657:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(32742),v=function(u,o){var c=a(u);for(var l in o)c.hasOwnProperty(l)||(c[l]=o[l]);return c};i.exports=v},72066:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(32742),v=function(u,o){var c=a(u);for(var l in o)c.hasOwnProperty(l)&&(c[l]=o[l]);return c};i.exports=v},28820:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var a=e(19256),v=function(u,o){for(var c={},l=0;l<o.length;l++){var f=o[l];a(u,f)&&(c[f]=u[f])}return c};i.exports=v},22440:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(a))return e[a]=v,!0;if(a.indexOf(".")!==-1){for(var u=a.split("."),o=e,c=e,l=0;l<u.length;l++)if(o.hasOwnProperty(u[l]))c=o,o=o[u[l]];else return!1;return c[u[u.length-1]]=v,!0}return!1};i.exports=g},64615:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Clone:e(32742),DeepCopy:e(28699),Extend:e(98611),GetAdvancedValue:e(20494),GetFastValue:e(72632),GetMinMaxValue:e(94324),GetValue:e(10850),HasAll:e(87701),HasAny:e(53523),HasValue:e(19256),IsPlainObject:e(42911),Merge:e(30657),MergeRight:e(72066),Pick:e(28820),SetValue:e(22440)}},69429:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return e.replace(/%([0-9]+)/g,function(v,u){return a[Number(u)-1]})};i.exports=g},76400:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a,v,u){a===void 0&&(a=0),v===void 0&&(v=" "),u===void 0&&(u=3),e=e.toString();var o=0;if(a+1>=e.length)switch(u){case 1:e=new Array(a+1-e.length).join(v)+e;break;case 3:var c=Math.ceil((o=a-e.length)/2),l=o-c;e=new Array(l+1).join(v)+e+new Array(c+1).join(v);break;default:e=e+new Array(a+1-e.length).join(v);break}return e};i.exports=g},76872:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e,a){return a===0?e.slice(1):e.slice(0,a-1)+e.slice(a)};i.exports=g},8051:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e.split("").reverse().join("")};i.exports=g},76583:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a=Math.random()*16|0,v=e==="x"?a:a&3|8;return v.toString(16)})};i.exports=g},40587:i=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var g=function(e){return e&&e[0].toUpperCase()+e.slice(1)};i.exports=g},50379:(i,g,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i.exports={Format:e(69429),Pad:e(76400),RemoveAt:e(76872),Reverse:e(8051),UppercaseFirst:e(40587),UUID:e(76583)}}},r={};function d(i){var g=r[i];if(g!==void 0)return g.exports;var e=r[i]={exports:{}};return s[i](e,e.exports,d),e.exports}d.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var S=d(92491);return S})())})(mb);var v5=mb.exports;const ap=tx(v5),g5=n=>n.charCodeAt(0).toString(2),x5=n=>String.fromCharCode(parseInt(n,2)),Zx=(n,t)=>("0".repeat(n)+t).slice(-n),Zg=(n,t=new Array(0),s="")=>{if(n[0]!==null)return t.push([n[0],s]),t;if(!n[2])throw new Error("You assigned wrong tree as argument");const r=Zg(n[2][0],t,s+"0");return Zg(n[2][1],r,s+"1")},Qg=(n,t=new Array(0),s="")=>{if(n[0]!==null)return t.push([n[0],s]),t;if(!n[1])throw new Error("You assigned wrong tree as argument");const r=Qg(n[1][0],t,s+"0");return Qg(n[1][1],r,s+"1")},Jg=(n,t)=>{if(n==="")return n;const s=n.slice(0,1);if(n=n.slice(1),s==="1"){const d=n.slice(0,8);n=n.slice(8);const S=x5(d);return t[0]=S,n}if(t.push([[null],[null]]),!t[1])throw new Error("resultArray has no index 1");const r=Jg(n,t[1][0]);return Jg(r,t[1][1])},y5=(n,t)=>{t.sort((S,i)=>S[1].length-i[1].length);let s="",r="",d=n;for(;d!=="";){r+=d[0],d=d.slice(1);for(let S=0;S<t.length&&!(r.length<t[S][1].length);S++)if(!(r.length>t[S][1].length)&&r===t[S][1]){s+=t[S][0],r="";break}}return s},cC=(n,t)=>{const s=n.slice(0,t),r=n.slice(t);return{spliced:s,remaining:r}},T5=n=>{const t=cC(n,16),s=parseInt(t.spliced,2),r=cC(t.remaining,s),d=[null];Jg(r.spliced,d);const S=Qg(d);return y5(r.remaining,S)},S5=n=>n.replace(/[-\/\\^$*+?.()|\[\]{}]/g,"\\$&"),C5=n=>{let t=n;const s=new Array(0);for(;t.length>0;){const r=S5(t[0]),d=new RegExp(r,"g"),S=(t.match(d)||[]).length,i=[t[0],S];s.push(i),t=t.replace(d,"")}return s},w5=(n,t,s)=>{const r=n[s][1];let d=t;for(let S=t;S<s;S++)n[S][1]>r||([n[S],n[d]]=[n[d],n[S]],d++);return[n[d],n[s]]=[n[s],n[d]],d},qg=(n,t=0,s=n.length-1)=>{if(t>=s)return;const r=w5(n,t,s);qg(n,t,r-1),qg(n,r+1,s)},vb=n=>{if(n.length<=1)return n;qg(n);const t=[null,n[0][1]+n[1][1],[n[0],n[1]]];return n.splice(0,2),n.unshift(t),vb(n)},E5=(n,t)=>{let s=[],r=[];for(let S=0;S<t.length;S++)[s[S],r[S]]=[t[S][0],t[S][1]];let d="";for(let S=0;S<n.length;S++){const i=s.indexOf(n[S]);d+=r[i]}return d},_g=(n,t="")=>{if(n[0]!==null){const r=g5(n[0]);return t+=`1${Zx(8,r)}`}if(t+="0",!n[2])throw new Error("You assigned wrong array...");const s=_g(n[2][0],t);return _g(n[2][1],s)},A5=n=>{const t=n.length;return Zx(16,t.toString(2))},b5=n=>{const t=C5(n),s=vb(t)[0],r=Zg(s),d=_g(s),S=A5(d),i=E5(n,r);return S+d+i};function gb(n){return n.reduce((t,s)=>t+s)}function xb(n){return n.reduce((t,s,r,d)=>d[t]>s?t:r,0)}function I5(n,t){const s=[...n];return s.reduce((r,d,S)=>S%t?r:[...r,s.slice(S,S+t).join("")],new Array)}function R5(n,t){return n.reduce((s,r,d)=>d%t?s:[...s,n.slice(d,d+t)],new Array)}function N5(n){if(n.length==0)return"1";if(n.length==1)return"1"+n;if([...n].reduce((r,d)=>r&&d==n[0],!0))return"1"+n[0]+n.length.toString();const t=b5(n);return"0"+xl.encodeFromString(t)}function P5(n){const[t,s]=[n.slice(0,1),n.slice(1)];if(t=="1")return s.length==0?"":s.length==1?s:s.slice(0,1).repeat(parseInt(s.slice(1)));const r=xl.decodeToString(s);return T5(r)}const Li=class Li{static singleEncode(t){let s="";try{const r=typeof t=="string"?parseInt(t,2):t;s=Li.TABLE[r]}catch(r){r instanceof Error&&console.log(r.message)}finally{return s}}static singleDecode(t){let s=-1;try{s=Li.TABLE.search(new RegExp(t)),Li.TABLE[s]==t}catch(r){r instanceof Error&&console.log(r.message)}finally{return s}}static encodeFromString(t){const s=I5(t,6),r=s.map(d=>Li.singleEncode(d));return s[s.length-1].length+r.join("")}static decodeToString(t){const[s,r]=[t.slice(0,1),t.slice(1)],d=parseInt(s,10);return[...r].map((i,g,e)=>Zx(g==e.length-1?d:6,Li.singleDecode(i).toString(2))).join("")}static encodeFromArray(t){return t.map(s=>Li.singleEncode(s)).join("")}static decodeToArray(t){return[...t].map(r=>Li.singleDecode(r))}};_t(Li,"TABLE","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_");let xl=Li;const Qx="mof";var yb={exports:{}};/*!
* sweetalert2 v11.7.19
* Released under the MIT License.
*/(function(n,t){(function(s,r){n.exports=r()})(Mn,function(){const r={},d=()=>{r.previousActiveElement instanceof HTMLElement?(r.previousActiveElement.focus(),r.previousActiveElement=null):document.body&&document.body.focus()},S=U=>new Promise(X=>{if(!U)return X();const J=window.scrollX,nt=window.scrollY;r.restoreFocusTimeout=setTimeout(()=>{d(),X()},100),window.scrollTo(J,nt)});var i={promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const g="swal2-",a=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((U,X)=>(U[X]=g+X,U),{}),u=["success","warning","info","question","error"].reduce((U,X)=>(U[X]=g+X,U),{}),o="SweetAlert2:",c=U=>U.charAt(0).toUpperCase()+U.slice(1),l=U=>{console.warn(`${o} ${typeof U=="object"?U.join(" "):U}`)},f=U=>{console.error(`${o} ${U}`)},m=[],h=U=>{m.includes(U)||(m.push(U),l(U))},p=(U,X)=>{h(`"${U}" is deprecated and will be removed in the next major release. Please use "${X}" instead.`)},y=U=>typeof U=="function"?U():U,x=U=>U&&typeof U.toPromise=="function",T=U=>x(U)?U.toPromise():Promise.resolve(U),C=U=>U&&Promise.resolve(U)===U,E=()=>document.body.querySelector(`.${a.container}`),A=U=>{const X=E();return X?X.querySelector(U):null},w=U=>A(`.${U}`),b=()=>w(a.popup),I=()=>w(a.icon),R=()=>w(a["icon-content"]),N=()=>w(a.title),F=()=>w(a["html-container"]),P=()=>w(a.image),O=()=>w(a["progress-steps"]),M=()=>w(a["validation-message"]),L=()=>A(`.${a.actions} .${a.confirm}`),k=()=>A(`.${a.actions} .${a.cancel}`),V=()=>A(`.${a.actions} .${a.deny}`),W=()=>w(a["input-label"]),K=()=>A(`.${a.loader}`),B=()=>w(a.actions),G=()=>w(a.footer),D=()=>w(a["timer-progress-bar"]),$=()=>w(a.close),z=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,H=()=>{const U=b();if(!U)return[];const X=U.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),J=Array.from(X).sort((zt,fe)=>{const ln=parseInt(zt.getAttribute("tabindex")||"0"),Qe=parseInt(fe.getAttribute("tabindex")||"0");return ln>Qe?1:ln<Qe?-1:0}),nt=U.querySelectorAll(z),xt=Array.from(nt).filter(zt=>zt.getAttribute("tabindex")!=="-1");return[...new Set(J.concat(xt))].filter(zt=>Xt(zt))},Y=()=>et(document.body,a.shown)&&!et(document.body,a["toast-shown"])&&!et(document.body,a["no-backdrop"]),Z=()=>{const U=b();return U?et(U,a.toast):!1},Q=()=>{const U=b();return U?U.hasAttribute("data-loading"):!1},tt=(U,X)=>{if(U.textContent="",X){const nt=new DOMParser().parseFromString(X,"text/html");Array.from(nt.querySelector("head").childNodes).forEach(xt=>{U.appendChild(xt)}),Array.from(nt.querySelector("body").childNodes).forEach(xt=>{xt instanceof HTMLVideoElement||xt instanceof HTMLAudioElement?U.appendChild(xt.cloneNode(!0)):U.appendChild(xt)})}},et=(U,X)=>{if(!X)return!1;const J=X.split(/\s+/);for(let nt=0;nt<J.length;nt++)if(!U.classList.contains(J[nt]))return!1;return!0},lt=(U,X)=>{Array.from(U.classList).forEach(J=>{!Object.values(a).includes(J)&&!Object.values(u).includes(J)&&!Object.values(X.showClass).includes(J)&&U.classList.remove(J)})},ut=(U,X,J)=>{if(lt(U,X),X.customClass&&X.customClass[J]){if(typeof X.customClass[J]!="string"&&!X.customClass[J].forEach){l(`Invalid type of customClass.${J}! Expected string or iterable object, got "${typeof X.customClass[J]}"`);return}yt(U,X.customClass[J])}},ct=(U,X)=>{if(!X)return null;switch(X){case"select":case"textarea":case"file":return U.querySelector(`.${a.popup} > .${a[X]}`);case"checkbox":return U.querySelector(`.${a.popup} > .${a.checkbox} input`);case"radio":return U.querySelector(`.${a.popup} > .${a.radio} input:checked`)||U.querySelector(`.${a.popup} > .${a.radio} input:first-child`);case"range":return U.querySelector(`.${a.popup} > .${a.range} input`);default:return U.querySelector(`.${a.popup} > .${a.input}`)}},ht=U=>{if(U.focus(),U.type!=="file"){const X=U.value;U.value="",U.value=X}},gt=(U,X,J)=>{!U||!X||(typeof X=="string"&&(X=X.split(/\s+/).filter(Boolean)),X.forEach(nt=>{Array.isArray(U)?U.forEach(xt=>{J?xt.classList.add(nt):xt.classList.remove(nt)}):J?U.classList.add(nt):U.classList.remove(nt)}))},yt=(U,X)=>{gt(U,X,!0)},Et=(U,X)=>{gt(U,X,!1)},bt=(U,X)=>{const J=Array.from(U.children);for(let nt=0;nt<J.length;nt++){const xt=J[nt];if(xt instanceof HTMLElement&&et(xt,X))return xt}},pt=(U,X,J)=>{J===`${parseInt(J)}`&&(J=parseInt(J)),J||parseInt(J)===0?U.style[X]=typeof J=="number"?`${J}px`:J:U.style.removeProperty(X)},wt=function(U){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";U&&(U.style.display=X)},Tt=U=>{U&&(U.style.display="none")},Gt=(U,X,J,nt)=>{const xt=U.querySelector(X);xt&&(xt.style[J]=nt)},Bt=function(U,X){let J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";X?wt(U,J):Tt(U)},Xt=U=>!!(U&&(U.offsetWidth||U.offsetHeight||U.getClientRects().length)),te=()=>!Xt(L())&&!Xt(V())&&!Xt(k()),Kt=U=>U.scrollHeight>U.clientHeight,Wt=U=>{const X=window.getComputedStyle(U),J=parseFloat(X.getPropertyValue("animation-duration")||"0"),nt=parseFloat(X.getPropertyValue("transition-duration")||"0");return J>0||nt>0},oe=function(U){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const J=D();Xt(J)&&(X&&(J.style.transition="none",J.style.width="100%"),setTimeout(()=>{J.style.transition=`width ${U/1e3}s linear`,J.style.width="0%"},10))},Le=()=>{const U=D(),X=parseInt(window.getComputedStyle(U).width);U.style.removeProperty("transition"),U.style.width="100%";const J=parseInt(window.getComputedStyle(U).width),nt=X/J*100;U.style.width=`${nt}%`},ye=()=>typeof window>"u"||typeof document>"u",Ye=`
 <div aria-labelledby="${a.title}" aria-describedby="${a["html-container"]}" class="${a.popup}" tabindex="-1">
   <button type="button" class="${a.close}"></button>
   <ul class="${a["progress-steps"]}"></ul>
   <div class="${a.icon}"></div>
   <img class="${a.image}" />
   <h2 class="${a.title}" id="${a.title}"></h2>
   <div class="${a["html-container"]}" id="${a["html-container"]}"></div>
   <input class="${a.input}" id="${a.input}" />
   <input type="file" class="${a.file}" />
   <div class="${a.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${a.select}" id="${a.select}"></select>
   <div class="${a.radio}"></div>
   <label class="${a.checkbox}">
     <input type="checkbox" id="${a.checkbox}" />
     <span class="${a.label}"></span>
   </label>
   <textarea class="${a.textarea}" id="${a.textarea}"></textarea>
   <div class="${a["validation-message"]}" id="${a["validation-message"]}"></div>
   <div class="${a.actions}">
     <div class="${a.loader}"></div>
     <button type="button" class="${a.confirm}"></button>
     <button type="button" class="${a.deny}"></button>
     <button type="button" class="${a.cancel}"></button>
   </div>
   <div class="${a.footer}"></div>
   <div class="${a["timer-progress-bar-container"]}">
     <div class="${a["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),An=()=>{const U=E();return U?(U.remove(),Et([document.documentElement,document.body],[a["no-backdrop"],a["toast-shown"],a["has-column"]]),!0):!1},Yn=()=>{r.currentInstance.resetValidationMessage()},_i=()=>{const U=b(),X=bt(U,a.input),J=bt(U,a.file),nt=U.querySelector(`.${a.range} input`),xt=U.querySelector(`.${a.range} output`),zt=bt(U,a.select),fe=U.querySelector(`.${a.checkbox} input`),ln=bt(U,a.textarea);X.oninput=Yn,J.onchange=Yn,zt.onchange=Yn,fe.onchange=Yn,ln.oninput=Yn,nt.oninput=()=>{Yn(),xt.value=nt.value},nt.onchange=()=>{Yn(),xt.value=nt.value}},tr=U=>typeof U=="string"?document.querySelector(U):U,er=U=>{const X=b();X.setAttribute("role",U.toast?"alert":"dialog"),X.setAttribute("aria-live",U.toast?"polite":"assertive"),U.toast||X.setAttribute("aria-modal","true")},nr=U=>{window.getComputedStyle(U).direction==="rtl"&&yt(E(),a.rtl)},RD=U=>{const X=An();if(ye()){f("SweetAlert2 requires document to initialize");return}const J=document.createElement("div");J.className=a.container,X&&yt(J,a["no-transition"]),tt(J,Ye);const nt=tr(U.target);nt.appendChild(J),er(U),nr(nt),_i()},tv=(U,X)=>{U instanceof HTMLElement?X.appendChild(U):typeof U=="object"?ND(U,X):U&&tt(X,U)},ND=(U,X)=>{U.jquery?PD(X,U):tt(X,U.toString())},PD=(U,X)=>{if(U.textContent="",0 in X)for(let J=0;J in X;J++)U.appendChild(X[J].cloneNode(!0));else U.appendChild(X.cloneNode(!0))},tu=(()=>{if(ye())return!1;const U=document.createElement("div"),X={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const J in X)if(Object.prototype.hasOwnProperty.call(X,J)&&typeof U.style[J]<"u")return X[J];return!1})(),FD=(U,X)=>{const J=B(),nt=K();!J||!nt||(!X.showConfirmButton&&!X.showDenyButton&&!X.showCancelButton?Tt(J):wt(J),ut(J,X,"actions"),DD(J,nt,X),tt(nt,X.loaderHtml||""),ut(nt,X,"loader"))};function DD(U,X,J){const nt=L(),xt=V(),zt=k();!nt||!xt||!zt||(ev(nt,"confirm",J),ev(xt,"deny",J),ev(zt,"cancel",J),OD(nt,xt,zt,J),J.reverseButtons&&(J.toast?(U.insertBefore(zt,nt),U.insertBefore(xt,nt)):(U.insertBefore(zt,X),U.insertBefore(xt,X),U.insertBefore(nt,X))))}function OD(U,X,J,nt){if(!nt.buttonsStyling){Et([U,X,J],a.styled);return}yt([U,X,J],a.styled),nt.confirmButtonColor&&(U.style.backgroundColor=nt.confirmButtonColor,yt(U,a["default-outline"])),nt.denyButtonColor&&(X.style.backgroundColor=nt.denyButtonColor,yt(X,a["default-outline"])),nt.cancelButtonColor&&(J.style.backgroundColor=nt.cancelButtonColor,yt(J,a["default-outline"]))}function ev(U,X,J){const nt=c(X);Bt(U,J[`show${nt}Button`],"inline-block"),tt(U,J[`${X}ButtonText`]||""),U.setAttribute("aria-label",J[`${X}ButtonAriaLabel`]||""),U.className=a[X],ut(U,J,`${X}Button`)}const LD=(U,X)=>{const J=$();J&&(tt(J,X.closeButtonHtml||""),ut(J,X,"closeButton"),Bt(J,X.showCloseButton),J.setAttribute("aria-label",X.closeButtonAriaLabel||""))},MD=(U,X)=>{const J=E();J&&($D(J,X.backdrop),BD(J,X.position),kD(J,X.grow),ut(J,X,"container"))};function $D(U,X){typeof X=="string"?U.style.background=X:X||yt([document.documentElement,document.body],a["no-backdrop"])}function BD(U,X){X&&(X in a?yt(U,a[X]):(l('The "position" parameter is not valid, defaulting to "center"'),yt(U,a.center)))}function kD(U,X){X&&yt(U,a[`grow-${X}`])}const zD=["input","file","range","select","radio","checkbox","textarea"],VD=(U,X)=>{const J=b(),nt=i.innerParams.get(U),xt=!nt||X.input!==nt.input;zD.forEach(zt=>{const fe=bt(J,a[zt]);WD(zt,X.inputAttributes),fe.className=a[zt],xt&&Tt(fe)}),X.input&&(xt&&GD(X),XD(X))},GD=U=>{if(!ss[U.input]){f(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${U.input}"`);return}const X=vT(U.input),J=ss[U.input](X,U);wt(X),U.inputAutoFocus&&setTimeout(()=>{ht(J)})},UD=U=>{for(let X=0;X<U.attributes.length;X++){const J=U.attributes[X].name;["id","type","value","style"].includes(J)||U.removeAttribute(J)}},WD=(U,X)=>{const J=ct(b(),U);if(J){UD(J);for(const nt in X)J.setAttribute(nt,X[nt])}},XD=U=>{const X=vT(U.input);typeof U.customClass=="object"&&yt(X,U.customClass.input)},nv=(U,X)=>{(!U.placeholder||X.inputPlaceholder)&&(U.placeholder=X.inputPlaceholder)},eu=(U,X,J)=>{if(J.inputLabel){const nt=document.createElement("label"),xt=a["input-label"];nt.setAttribute("for",U.id),nt.className=xt,typeof J.customClass=="object"&&yt(nt,J.customClass.inputLabel),nt.innerText=J.inputLabel,X.insertAdjacentElement("beforebegin",nt)}},vT=U=>bt(b(),a[U]||a.input),Uc=(U,X)=>{["string","number"].includes(typeof X)?U.value=`${X}`:C(X)||l(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof X}"`)},ss={};ss.text=ss.email=ss.password=ss.number=ss.tel=ss.url=(U,X)=>(Uc(U,X.inputValue),eu(U,U,X),nv(U,X),U.type=X.input,U),ss.file=(U,X)=>(eu(U,U,X),nv(U,X),U),ss.range=(U,X)=>{const J=U.querySelector("input"),nt=U.querySelector("output");return Uc(J,X.inputValue),J.type=X.input,Uc(nt,X.inputValue),eu(J,U,X),U},ss.select=(U,X)=>{if(U.textContent="",X.inputPlaceholder){const J=document.createElement("option");tt(J,X.inputPlaceholder),J.value="",J.disabled=!0,J.selected=!0,U.appendChild(J)}return eu(U,U,X),U},ss.radio=U=>(U.textContent="",U),ss.checkbox=(U,X)=>{const J=ct(b(),"checkbox");J.value="1",J.checked=!!X.inputValue;const nt=U.querySelector("span");return tt(nt,X.inputPlaceholder),J},ss.textarea=(U,X)=>{Uc(U,X.inputValue),nv(U,X),eu(U,U,X);const J=nt=>parseInt(window.getComputedStyle(nt).marginLeft)+parseInt(window.getComputedStyle(nt).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const nt=parseInt(window.getComputedStyle(b()).width),xt=()=>{if(!document.body.contains(U))return;const zt=U.offsetWidth+J(U);zt>nt?b().style.width=`${zt}px`:pt(b(),"width",X.width)};new MutationObserver(xt).observe(U,{attributes:!0,attributeFilter:["style"]})}}),U};const HD=(U,X)=>{const J=F();J&&(ut(J,X,"htmlContainer"),X.html?(tv(X.html,J),wt(J,"block")):X.text?(J.textContent=X.text,wt(J,"block")):Tt(J),VD(U,X))},YD=(U,X)=>{const J=G();J&&(Bt(J,X.footer),X.footer&&tv(X.footer,J),ut(J,X,"footer"))},KD=(U,X)=>{const J=i.innerParams.get(U),nt=I();if(nt){if(J&&X.icon===J.icon){xT(nt,X),gT(nt,X);return}if(!X.icon&&!X.iconHtml){Tt(nt);return}if(X.icon&&Object.keys(u).indexOf(X.icon)===-1){f(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${X.icon}"`),Tt(nt);return}wt(nt),xT(nt,X),gT(nt,X),yt(nt,X.showClass&&X.showClass.icon)}},gT=(U,X)=>{for(const[J,nt]of Object.entries(u))X.icon!==J&&Et(U,nt);yt(U,X.icon&&u[X.icon]),JD(U,X),jD(),ut(U,X,"icon")},jD=()=>{const U=b();if(!U)return;const X=window.getComputedStyle(U).getPropertyValue("background-color"),J=U.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let nt=0;nt<J.length;nt++)J[nt].style.backgroundColor=X},ZD=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,QD=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,xT=(U,X)=>{if(!X.icon&&!X.iconHtml)return;let J=U.innerHTML,nt="";X.iconHtml?nt=yT(X.iconHtml):X.icon==="success"?(nt=ZD,J=J.replace(/ style=".*?"/g,"")):X.icon==="error"?nt=QD:X.icon&&(nt=yT({question:"?",warning:"!",info:"i"}[X.icon])),J.trim()!==nt.trim()&&tt(U,nt)},JD=(U,X)=>{if(X.iconColor){U.style.color=X.iconColor,U.style.borderColor=X.iconColor;for(const J of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Gt(U,J,"backgroundColor",X.iconColor);Gt(U,".swal2-success-ring","borderColor",X.iconColor)}},yT=U=>`<div class="${a["icon-content"]}">${U}</div>`,qD=(U,X)=>{const J=P();if(J){if(!X.imageUrl){Tt(J);return}wt(J,""),J.setAttribute("src",X.imageUrl),J.setAttribute("alt",X.imageAlt||""),pt(J,"width",X.imageWidth),pt(J,"height",X.imageHeight),J.className=a.image,ut(J,X,"image")}},_D=(U,X)=>{const J=E(),nt=b();if(!(!J||!nt)){if(X.toast){pt(J,"width",X.width),nt.style.width="100%";const xt=K();xt&&nt.insertBefore(xt,I())}else pt(nt,"width",X.width);pt(nt,"padding",X.padding),X.color&&(nt.style.color=X.color),X.background&&(nt.style.background=X.background),Tt(M()),tO(nt,X)}},tO=(U,X)=>{const J=X.showClass||{};U.className=`${a.popup} ${Xt(U)?J.popup:""}`,X.toast?(yt([document.documentElement,document.body],a["toast-shown"]),yt(U,a.toast)):yt(U,a.modal),ut(U,X,"popup"),typeof X.customClass=="string"&&yt(U,X.customClass),X.icon&&yt(U,a[`icon-${X.icon}`])},eO=(U,X)=>{const J=O();if(!J)return;const{progressSteps:nt,currentProgressStep:xt}=X;if(!nt||nt.length===0||xt===void 0){Tt(J);return}wt(J),J.textContent="",xt>=nt.length&&l("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),nt.forEach((zt,fe)=>{const ln=nO(zt);if(J.appendChild(ln),fe===xt&&yt(ln,a["active-progress-step"]),fe!==nt.length-1){const Qe=sO(X);J.appendChild(Qe)}})},nO=U=>{const X=document.createElement("li");return yt(X,a["progress-step"]),tt(X,U),X},sO=U=>{const X=document.createElement("li");return yt(X,a["progress-step-line"]),U.progressStepsDistance&&pt(X,"width",U.progressStepsDistance),X},iO=(U,X)=>{const J=N();J&&(Bt(J,X.title||X.titleText,"block"),X.title&&tv(X.title,J),X.titleText&&(J.innerText=X.titleText),ut(J,X,"title"))},TT=(U,X)=>{_D(U,X),MD(U,X),eO(U,X),KD(U,X),qD(U,X),iO(U,X),LD(U,X),HD(U,X),FD(U,X),YD(U,X);const J=b();typeof X.didRender=="function"&&J&&X.didRender(J)},rO=()=>Xt(b()),ST=()=>L()&&L().click(),aO=()=>V()&&V().click(),oO=()=>k()&&k().click(),Ao=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),CT=U=>{U.keydownTarget&&U.keydownHandlerAdded&&(U.keydownTarget.removeEventListener("keydown",U.keydownHandler,{capture:U.keydownListenerCapture}),U.keydownHandlerAdded=!1)},lO=(U,X,J,nt)=>{CT(X),J.toast||(X.keydownHandler=xt=>hO(U,xt,nt),X.keydownTarget=J.keydownListenerCapture?window:b(),X.keydownListenerCapture=J.keydownListenerCapture,X.keydownTarget.addEventListener("keydown",X.keydownHandler,{capture:X.keydownListenerCapture}),X.keydownHandlerAdded=!0)},sv=(U,X)=>{const J=H();if(J.length){U=U+X,U===J.length?U=0:U===-1&&(U=J.length-1),J[U].focus();return}b().focus()},wT=["ArrowRight","ArrowDown"],uO=["ArrowLeft","ArrowUp"],hO=(U,X,J)=>{const nt=i.innerParams.get(U);nt&&(X.isComposing||X.keyCode===229||(nt.stopKeydownPropagation&&X.stopPropagation(),X.key==="Enter"?cO(U,X,nt):X.key==="Tab"?fO(X):[...wT,...uO].includes(X.key)?dO(X.key):X.key==="Escape"&&pO(X,nt,J)))},cO=(U,X,J)=>{if(y(J.allowEnterKey)&&X.target&&U.getInput()&&X.target instanceof HTMLElement&&X.target.outerHTML===U.getInput().outerHTML){if(["textarea","file"].includes(J.input))return;ST(),X.preventDefault()}},fO=U=>{const X=U.target,J=H();let nt=-1;for(let xt=0;xt<J.length;xt++)if(X===J[xt]){nt=xt;break}U.shiftKey?sv(nt,-1):sv(nt,1),U.stopPropagation(),U.preventDefault()},dO=U=>{const X=L(),J=V(),nt=k(),xt=[X,J,nt];if(document.activeElement instanceof HTMLElement&&!xt.includes(document.activeElement))return;const zt=wT.includes(U)?"nextElementSibling":"previousElementSibling";let fe=document.activeElement;for(let ln=0;ln<B().children.length;ln++){if(fe=fe[zt],!fe)return;if(fe instanceof HTMLButtonElement&&Xt(fe))break}fe instanceof HTMLButtonElement&&fe.focus()},pO=(U,X,J)=>{y(X.allowEscapeKey)&&(U.preventDefault(),J(Ao.esc))};var nu={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const mO=()=>{Array.from(document.body.children).forEach(X=>{X===E()||X.contains(E())||(X.hasAttribute("aria-hidden")&&X.setAttribute("data-previous-aria-hidden",X.getAttribute("aria-hidden")||""),X.setAttribute("aria-hidden","true"))})},ET=()=>{Array.from(document.body.children).forEach(X=>{X.hasAttribute("data-previous-aria-hidden")?(X.setAttribute("aria-hidden",X.getAttribute("data-previous-aria-hidden")||""),X.removeAttribute("data-previous-aria-hidden")):X.removeAttribute("aria-hidden")})},AT=typeof window<"u"&&!!window.GestureEvent,vO=()=>{if(AT&&!et(document.body,a.iosfix)){const U=document.body.scrollTop;document.body.style.top=`${U*-1}px`,yt(document.body,a.iosfix),gO()}},gO=()=>{const U=E();let X;U.ontouchstart=J=>{X=xO(J)},U.ontouchmove=J=>{X&&(J.preventDefault(),J.stopPropagation())}},xO=U=>{const X=U.target,J=E();return yO(U)||TO(U)?!1:X===J||!Kt(J)&&X instanceof HTMLElement&&X.tagName!=="INPUT"&&X.tagName!=="TEXTAREA"&&!(Kt(F())&&F().contains(X))},yO=U=>U.touches&&U.touches.length&&U.touches[0].touchType==="stylus",TO=U=>U.touches&&U.touches.length>1,SO=()=>{if(et(document.body,a.iosfix)){const U=parseInt(document.body.style.top,10);Et(document.body,a.iosfix),document.body.style.top="",document.body.scrollTop=U*-1}},CO=()=>{const U=document.createElement("div");U.className=a["scrollbar-measure"],document.body.appendChild(U);const X=U.getBoundingClientRect().width-U.clientWidth;return document.body.removeChild(U),X};let bo=null;const wO=()=>{bo===null&&document.body.scrollHeight>window.innerHeight&&(bo=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${bo+CO()}px`)},EO=()=>{bo!==null&&(document.body.style.paddingRight=`${bo}px`,bo=null)};function bT(U,X,J,nt){Z()?RT(U,nt):(S(J).then(()=>RT(U,nt)),CT(r)),AT?(X.setAttribute("style","display:none !important"),X.removeAttribute("class"),X.innerHTML=""):X.remove(),Y()&&(EO(),SO(),ET()),AO()}function AO(){Et([document.documentElement,document.body],[a.shown,a["height-auto"],a["no-backdrop"],a["toast-shown"]])}function Rr(U){U=IO(U);const X=nu.swalPromiseResolve.get(this),J=bO(this);this.isAwaitingPromise?U.isDismissed||(su(this),X(U)):J&&X(U)}const bO=U=>{const X=b();if(!X)return!1;const J=i.innerParams.get(U);if(!J||et(X,J.hideClass.popup))return!1;Et(X,J.showClass.popup),yt(X,J.hideClass.popup);const nt=E();return Et(nt,J.showClass.backdrop),yt(nt,J.hideClass.backdrop),RO(U,X,J),!0};function IT(U){const X=nu.swalPromiseReject.get(this);su(this),X&&X(U)}const su=U=>{U.isAwaitingPromise&&(delete U.isAwaitingPromise,i.innerParams.get(U)||U._destroy())},IO=U=>typeof U>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},U),RO=(U,X,J)=>{const nt=E(),xt=tu&&Wt(X);typeof J.willClose=="function"&&J.willClose(X),xt?NO(U,X,nt,J.returnFocus,J.didClose):bT(U,nt,J.returnFocus,J.didClose)},NO=(U,X,J,nt,xt)=>{r.swalCloseEventFinishedCallback=bT.bind(null,U,J,nt,xt),X.addEventListener(tu,function(zt){zt.target===X&&(r.swalCloseEventFinishedCallback(),delete r.swalCloseEventFinishedCallback)})},RT=(U,X)=>{setTimeout(()=>{typeof X=="function"&&X.bind(U.params)(),U._destroy&&U._destroy()})},Io=U=>{let X=b();X||new Hc,X=b();const J=K();Z()?Tt(I()):PO(X,U),wt(J),X.setAttribute("data-loading","true"),X.setAttribute("aria-busy","true"),X.focus()},PO=(U,X)=>{const J=B(),nt=K();!X&&Xt(L())&&(X=L()),wt(J),X&&(Tt(X),nt.setAttribute("data-button-to-replace",X.className)),nt.parentNode.insertBefore(nt,X),yt([U,J],a.loading)},FO=(U,X)=>{X.input==="select"||X.input==="radio"?$O(U,X):["text","email","number","tel","textarea"].includes(X.input)&&(x(X.inputValue)||C(X.inputValue))&&(Io(L()),BO(U,X))},DO=(U,X)=>{const J=U.getInput();if(!J)return null;switch(X.input){case"checkbox":return OO(J);case"radio":return LO(J);case"file":return MO(J);default:return X.inputAutoTrim?J.value.trim():J.value}},OO=U=>U.checked?1:0,LO=U=>U.checked?U.value:null,MO=U=>U.files.length?U.getAttribute("multiple")!==null?U.files:U.files[0]:null,$O=(U,X)=>{const J=b(),nt=xt=>{kO[X.input](J,iv(xt),X)};x(X.inputOptions)||C(X.inputOptions)?(Io(L()),T(X.inputOptions).then(xt=>{U.hideLoading(),nt(xt)})):typeof X.inputOptions=="object"?nt(X.inputOptions):f(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof X.inputOptions}`)},BO=(U,X)=>{const J=U.getInput();Tt(J),T(X.inputValue).then(nt=>{J.value=X.input==="number"?`${parseFloat(nt)||0}`:`${nt}`,wt(J),J.focus(),U.hideLoading()}).catch(nt=>{f(`Error in inputValue promise: ${nt}`),J.value="",wt(J),J.focus(),U.hideLoading()})},kO={select:(U,X,J)=>{const nt=bt(U,a.select),xt=(zt,fe,ln)=>{const Qe=document.createElement("option");Qe.value=ln,tt(Qe,fe),Qe.selected=NT(ln,J.inputValue),zt.appendChild(Qe)};X.forEach(zt=>{const fe=zt[0],ln=zt[1];if(Array.isArray(ln)){const Qe=document.createElement("optgroup");Qe.label=fe,Qe.disabled=!1,nt.appendChild(Qe),ln.forEach(No=>xt(Qe,No[1],No[0]))}else xt(nt,ln,fe)}),nt.focus()},radio:(U,X,J)=>{const nt=bt(U,a.radio);X.forEach(zt=>{const fe=zt[0],ln=zt[1],Qe=document.createElement("input"),No=document.createElement("label");Qe.type="radio",Qe.name=a.radio,Qe.value=fe,NT(fe,J.inputValue)&&(Qe.checked=!0);const uv=document.createElement("span");tt(uv,ln),uv.className=a.label,No.appendChild(Qe),No.appendChild(uv),nt.appendChild(No)});const xt=nt.querySelectorAll("input");xt.length&&xt[0].focus()}},iv=U=>{const X=[];return typeof Map<"u"&&U instanceof Map?U.forEach((J,nt)=>{let xt=J;typeof xt=="object"&&(xt=iv(xt)),X.push([nt,xt])}):Object.keys(U).forEach(J=>{let nt=U[J];typeof nt=="object"&&(nt=iv(nt)),X.push([J,nt])}),X},NT=(U,X)=>X&&X.toString()===U.toString(),zO=U=>{const X=i.innerParams.get(U);U.disableButtons(),X.input?PT(U,"confirm"):av(U,!0)},VO=U=>{const X=i.innerParams.get(U);U.disableButtons(),X.returnInputValueOnDeny?PT(U,"deny"):rv(U,!1)},GO=(U,X)=>{U.disableButtons(),X(Ao.cancel)},PT=(U,X)=>{const J=i.innerParams.get(U);if(!J.input){f(`The "input" parameter is needed to be set when using returnInputValueOn${c(X)}`);return}const nt=DO(U,J);J.inputValidator?UO(U,nt,X):U.getInput().checkValidity()?X==="deny"?rv(U,nt):av(U,nt):(U.enableButtons(),U.showValidationMessage(J.validationMessage))},UO=(U,X,J)=>{const nt=i.innerParams.get(U);U.disableInput(),Promise.resolve().then(()=>T(nt.inputValidator(X,nt.validationMessage))).then(zt=>{U.enableButtons(),U.enableInput(),zt?U.showValidationMessage(zt):J==="deny"?rv(U,X):av(U,X)})},rv=(U,X)=>{const J=i.innerParams.get(U||void 0);J.showLoaderOnDeny&&Io(V()),J.preDeny?(U.isAwaitingPromise=!0,Promise.resolve().then(()=>T(J.preDeny(X,J.validationMessage))).then(xt=>{xt===!1?(U.hideLoading(),su(U)):U.close({isDenied:!0,value:typeof xt>"u"?X:xt})}).catch(xt=>DT(U||void 0,xt))):U.close({isDenied:!0,value:X})},FT=(U,X)=>{U.close({isConfirmed:!0,value:X})},DT=(U,X)=>{U.rejectPromise(X)},av=(U,X)=>{const J=i.innerParams.get(U||void 0);J.showLoaderOnConfirm&&Io(),J.preConfirm?(U.resetValidationMessage(),U.isAwaitingPromise=!0,Promise.resolve().then(()=>T(J.preConfirm(X,J.validationMessage))).then(xt=>{Xt(M())||xt===!1?(U.hideLoading(),su(U)):FT(U,typeof xt>"u"?X:xt)}).catch(xt=>DT(U||void 0,xt))):FT(U,X)};function Wc(){const U=i.innerParams.get(this);if(!U)return;const X=i.domCache.get(this);Tt(X.loader),Z()?U.icon&&wt(I()):WO(X),Et([X.popup,X.actions],a.loading),X.popup.removeAttribute("aria-busy"),X.popup.removeAttribute("data-loading"),X.confirmButton.disabled=!1,X.denyButton.disabled=!1,X.cancelButton.disabled=!1}const WO=U=>{const X=U.popup.getElementsByClassName(U.loader.getAttribute("data-button-to-replace"));X.length?wt(X[0],"inline-block"):te()&&Tt(U.actions)};function OT(){const U=i.innerParams.get(this),X=i.domCache.get(this);return X?ct(X.popup,U.input):null}function LT(U,X,J){const nt=i.domCache.get(U);X.forEach(xt=>{nt[xt].disabled=J})}function MT(U,X){if(U)if(U.type==="radio"){const nt=U.parentNode.parentNode.querySelectorAll("input");for(let xt=0;xt<nt.length;xt++)nt[xt].disabled=X}else U.disabled=X}function $T(){LT(this,["confirmButton","denyButton","cancelButton"],!1)}function BT(){LT(this,["confirmButton","denyButton","cancelButton"],!0)}function kT(){MT(this.getInput(),!1)}function zT(){MT(this.getInput(),!0)}function VT(U){const X=i.domCache.get(this),J=i.innerParams.get(this);tt(X.validationMessage,U),X.validationMessage.className=a["validation-message"],J.customClass&&J.customClass.validationMessage&&yt(X.validationMessage,J.customClass.validationMessage),wt(X.validationMessage);const nt=this.getInput();nt&&(nt.setAttribute("aria-invalid",!0),nt.setAttribute("aria-describedby",a["validation-message"]),ht(nt),yt(nt,a.inputerror))}function GT(){const U=i.domCache.get(this);U.validationMessage&&Tt(U.validationMessage);const X=this.getInput();X&&(X.removeAttribute("aria-invalid"),X.removeAttribute("aria-describedby"),Et(X,a.inputerror))}const Ro={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},XO=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],HO={},YO=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],UT=U=>Object.prototype.hasOwnProperty.call(Ro,U),WT=U=>XO.indexOf(U)!==-1,XT=U=>HO[U],KO=U=>{UT(U)||l(`Unknown parameter "${U}"`)},jO=U=>{YO.includes(U)&&l(`The parameter "${U}" is incompatible with toasts`)},ZO=U=>{const X=XT(U);X&&p(U,X)},QO=U=>{U.backdrop===!1&&U.allowOutsideClick&&l('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const X in U)KO(X),U.toast&&jO(X),ZO(X)};function HT(U){const X=b(),J=i.innerParams.get(this);if(!X||et(X,J.hideClass.popup)){l("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const nt=JO(U),xt=Object.assign({},J,nt);TT(this,xt),i.innerParams.set(this,xt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,U),writable:!1,enumerable:!0}})}const JO=U=>{const X={};return Object.keys(U).forEach(J=>{WT(J)?X[J]=U[J]:l(`Invalid parameter to update: ${J}`)}),X};function YT(){const U=i.domCache.get(this),X=i.innerParams.get(this);if(!X){KT(this);return}U.popup&&r.swalCloseEventFinishedCallback&&(r.swalCloseEventFinishedCallback(),delete r.swalCloseEventFinishedCallback),typeof X.didDestroy=="function"&&X.didDestroy(),qO(this)}const qO=U=>{KT(U),delete U.params,delete r.keydownHandler,delete r.keydownTarget,delete r.currentInstance},KT=U=>{U.isAwaitingPromise?(ov(i,U),U.isAwaitingPromise=!0):(ov(nu,U),ov(i,U),delete U.isAwaitingPromise,delete U.disableButtons,delete U.enableButtons,delete U.getInput,delete U.disableInput,delete U.enableInput,delete U.hideLoading,delete U.disableLoading,delete U.showValidationMessage,delete U.resetValidationMessage,delete U.close,delete U.closePopup,delete U.closeModal,delete U.closeToast,delete U.rejectPromise,delete U.update,delete U._destroy)},ov=(U,X)=>{for(const J in U)U[J].delete(X)};var _O=Object.freeze({__proto__:null,_destroy:YT,close:Rr,closeModal:Rr,closePopup:Rr,closeToast:Rr,disableButtons:BT,disableInput:zT,disableLoading:Wc,enableButtons:$T,enableInput:kT,getInput:OT,handleAwaitingPromise:su,hideLoading:Wc,rejectPromise:IT,resetValidationMessage:GT,showValidationMessage:VT,update:HT});const tL=(U,X,J)=>{i.innerParams.get(U).toast?eL(U,X,J):(sL(X),iL(X),rL(U,X,J))},eL=(U,X,J)=>{X.popup.onclick=()=>{const nt=i.innerParams.get(U);nt&&(nL(nt)||nt.timer||nt.input)||J(Ao.close)}},nL=U=>U.showConfirmButton||U.showDenyButton||U.showCancelButton||U.showCloseButton;let Xc=!1;const sL=U=>{U.popup.onmousedown=()=>{U.container.onmouseup=function(X){U.container.onmouseup=void 0,X.target===U.container&&(Xc=!0)}}},iL=U=>{U.container.onmousedown=()=>{U.popup.onmouseup=function(X){U.popup.onmouseup=void 0,(X.target===U.popup||U.popup.contains(X.target))&&(Xc=!0)}}},rL=(U,X,J)=>{X.container.onclick=nt=>{const xt=i.innerParams.get(U);if(Xc){Xc=!1;return}nt.target===X.container&&y(xt.allowOutsideClick)&&J(Ao.backdrop)}},aL=U=>typeof U=="object"&&U.jquery,jT=U=>U instanceof Element||aL(U),oL=U=>{const X={};return typeof U[0]=="object"&&!jT(U[0])?Object.assign(X,U[0]):["title","html","icon"].forEach((J,nt)=>{const xt=U[nt];typeof xt=="string"||jT(xt)?X[J]=xt:xt!==void 0&&f(`Unexpected type of ${J}! Expected "string" or "Element", got ${typeof xt}`)}),X};function lL(){const U=this;for(var X=arguments.length,J=new Array(X),nt=0;nt<X;nt++)J[nt]=arguments[nt];return new U(...J)}function uL(U){class X extends this{_main(nt,xt){return super._main(nt,Object.assign({},U,xt))}}return X}const hL=()=>r.timeout&&r.timeout.getTimerLeft(),ZT=()=>{if(r.timeout)return Le(),r.timeout.stop()},QT=()=>{if(r.timeout){const U=r.timeout.start();return oe(U),U}},cL=()=>{const U=r.timeout;return U&&(U.running?ZT():QT())},fL=U=>{if(r.timeout){const X=r.timeout.increase(U);return oe(X,!0),X}},dL=()=>!!(r.timeout&&r.timeout.isRunning());let JT=!1;const lv={};function pL(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";lv[U]=this,JT||(document.body.addEventListener("click",mL),JT=!0)}const mL=U=>{for(let X=U.target;X&&X!==document;X=X.parentNode)for(const J in lv){const nt=X.getAttribute(J);if(nt){lv[J].fire({template:nt});return}}};var vL=Object.freeze({__proto__:null,argsToParams:oL,bindClickHandler:pL,clickCancel:oO,clickConfirm:ST,clickDeny:aO,enableLoading:Io,fire:lL,getActions:B,getCancelButton:k,getCloseButton:$,getConfirmButton:L,getContainer:E,getDenyButton:V,getFocusableElements:H,getFooter:G,getHtmlContainer:F,getIcon:I,getIconContent:R,getImage:P,getInputLabel:W,getLoader:K,getPopup:b,getProgressSteps:O,getTimerLeft:hL,getTimerProgressBar:D,getTitle:N,getValidationMessage:M,increaseTimer:fL,isDeprecatedParameter:XT,isLoading:Q,isTimerRunning:dL,isUpdatableParameter:WT,isValidParameter:UT,isVisible:rO,mixin:uL,resumeTimer:QT,showLoading:Io,stopTimer:ZT,toggleTimer:cL});class gL{constructor(X,J){this.callback=X,this.remaining=J,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(X){const J=this.running;return J&&this.stop(),this.remaining+=X,J&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const qT=["swal-title","swal-html","swal-footer"],xL=U=>{const X=typeof U.template=="string"?document.querySelector(U.template):U.template;if(!X)return{};const J=X.content;return bL(J),Object.assign(yL(J),TL(J),SL(J),CL(J),wL(J),EL(J),AL(J,qT))},yL=U=>{const X={};return Array.from(U.querySelectorAll("swal-param")).forEach(nt=>{Aa(nt,["name","value"]);const xt=nt.getAttribute("name"),zt=nt.getAttribute("value");typeof Ro[xt]=="boolean"?X[xt]=zt!=="false":typeof Ro[xt]=="object"?X[xt]=JSON.parse(zt):X[xt]=zt}),X},TL=U=>{const X={};return Array.from(U.querySelectorAll("swal-function-param")).forEach(nt=>{const xt=nt.getAttribute("name"),zt=nt.getAttribute("value");X[xt]=new Function(`return ${zt}`)()}),X},SL=U=>{const X={};return Array.from(U.querySelectorAll("swal-button")).forEach(nt=>{Aa(nt,["type","color","aria-label"]);const xt=nt.getAttribute("type");X[`${xt}ButtonText`]=nt.innerHTML,X[`show${c(xt)}Button`]=!0,nt.hasAttribute("color")&&(X[`${xt}ButtonColor`]=nt.getAttribute("color")),nt.hasAttribute("aria-label")&&(X[`${xt}ButtonAriaLabel`]=nt.getAttribute("aria-label"))}),X},CL=U=>{const X={},J=U.querySelector("swal-image");return J&&(Aa(J,["src","width","height","alt"]),J.hasAttribute("src")&&(X.imageUrl=J.getAttribute("src")),J.hasAttribute("width")&&(X.imageWidth=J.getAttribute("width")),J.hasAttribute("height")&&(X.imageHeight=J.getAttribute("height")),J.hasAttribute("alt")&&(X.imageAlt=J.getAttribute("alt"))),X},wL=U=>{const X={},J=U.querySelector("swal-icon");return J&&(Aa(J,["type","color"]),J.hasAttribute("type")&&(X.icon=J.getAttribute("type")),J.hasAttribute("color")&&(X.iconColor=J.getAttribute("color")),X.iconHtml=J.innerHTML),X},EL=U=>{const X={},J=U.querySelector("swal-input");J&&(Aa(J,["type","label","placeholder","value"]),X.input=J.getAttribute("type")||"text",J.hasAttribute("label")&&(X.inputLabel=J.getAttribute("label")),J.hasAttribute("placeholder")&&(X.inputPlaceholder=J.getAttribute("placeholder")),J.hasAttribute("value")&&(X.inputValue=J.getAttribute("value")));const nt=Array.from(U.querySelectorAll("swal-input-option"));return nt.length&&(X.inputOptions={},nt.forEach(xt=>{Aa(xt,["value"]);const zt=xt.getAttribute("value"),fe=xt.innerHTML;X.inputOptions[zt]=fe})),X},AL=(U,X)=>{const J={};for(const nt in X){const xt=X[nt],zt=U.querySelector(xt);zt&&(Aa(zt,[]),J[xt.replace(/^swal-/,"")]=zt.innerHTML.trim())}return J},bL=U=>{const X=qT.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(U.children).forEach(J=>{const nt=J.tagName.toLowerCase();X.includes(nt)||l(`Unrecognized element <${nt}>`)})},Aa=(U,X)=>{Array.from(U.attributes).forEach(J=>{X.indexOf(J.name)===-1&&l([`Unrecognized attribute "${J.name}" on <${U.tagName.toLowerCase()}>.`,`${X.length?`Allowed attributes are: ${X.join(", ")}`:"To set the value, use HTML within the element."}`])})},_T=10,IL=U=>{const X=E(),J=b();typeof U.willOpen=="function"&&U.willOpen(J);const xt=window.getComputedStyle(document.body).overflowY;PL(X,J,U),setTimeout(()=>{RL(X,J)},_T),Y()&&(NL(X,U.scrollbarPadding,xt),mO()),!Z()&&!r.previousActiveElement&&(r.previousActiveElement=document.activeElement),typeof U.didOpen=="function"&&setTimeout(()=>U.didOpen(J)),Et(X,a["no-transition"])},tS=U=>{const X=b();if(U.target!==X)return;const J=E();X.removeEventListener(tu,tS),J.style.overflowY="auto"},RL=(U,X)=>{tu&&Wt(X)?(U.style.overflowY="hidden",X.addEventListener(tu,tS)):U.style.overflowY="auto"},NL=(U,X,J)=>{vO(),X&&J!=="hidden"&&wO(),setTimeout(()=>{U.scrollTop=0})},PL=(U,X,J)=>{yt(U,J.showClass.backdrop),X.style.setProperty("opacity","0","important"),wt(X,"grid"),setTimeout(()=>{yt(X,J.showClass.popup),X.style.removeProperty("opacity")},_T),yt([document.documentElement,document.body],a.shown),J.heightAuto&&J.backdrop&&!J.toast&&yt([document.documentElement,document.body],a["height-auto"])};var eS={email:(U,X)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(U)?Promise.resolve():Promise.resolve(X||"Invalid email address"),url:(U,X)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(U)?Promise.resolve():Promise.resolve(X||"Invalid URL")};function FL(U){U.inputValidator||Object.keys(eS).forEach(X=>{U.input===X&&(U.inputValidator=eS[X])})}function DL(U){(!U.target||typeof U.target=="string"&&!document.querySelector(U.target)||typeof U.target!="string"&&!U.target.appendChild)&&(l('Target parameter is not valid, defaulting to "body"'),U.target="body")}function OL(U){FL(U),U.showLoaderOnConfirm&&!U.preConfirm&&l(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),DL(U),typeof U.title=="string"&&(U.title=U.title.split(`
`).join("<br />")),RD(U)}let hi;class Ke{constructor(){if(typeof window>"u")return;hi=this;for(var X=arguments.length,J=new Array(X),nt=0;nt<X;nt++)J[nt]=arguments[nt];const xt=Object.freeze(this.constructor.argsToParams(J));this.params=xt,this.isAwaitingPromise=!1;const zt=hi._main(hi.params);i.promise.set(this,zt)}_main(X){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};QO(Object.assign({},J,X)),r.currentInstance&&(r.currentInstance._destroy(),Y()&&ET()),r.currentInstance=hi;const nt=ML(X,J);OL(nt),Object.freeze(nt),r.timeout&&(r.timeout.stop(),delete r.timeout),clearTimeout(r.restoreFocusTimeout);const xt=$L(hi);return TT(hi,nt),i.innerParams.set(hi,nt),LL(hi,xt,nt)}then(X){return i.promise.get(this).then(X)}finally(X){return i.promise.get(this).finally(X)}}const LL=(U,X,J)=>new Promise((nt,xt)=>{const zt=fe=>{U.close({isDismissed:!0,dismiss:fe})};nu.swalPromiseResolve.set(U,nt),nu.swalPromiseReject.set(U,xt),X.confirmButton.onclick=()=>{zO(U)},X.denyButton.onclick=()=>{VO(U)},X.cancelButton.onclick=()=>{GO(U,zt)},X.closeButton.onclick=()=>{zt(Ao.close)},tL(U,X,zt),lO(U,r,J,zt),FO(U,J),IL(J),BL(r,J,zt),kL(X,J),setTimeout(()=>{X.container.scrollTop=0})}),ML=(U,X)=>{const J=xL(U),nt=Object.assign({},Ro,X,J,U);return nt.showClass=Object.assign({},Ro.showClass,nt.showClass),nt.hideClass=Object.assign({},Ro.hideClass,nt.hideClass),nt},$L=U=>{const X={popup:b(),container:E(),actions:B(),confirmButton:L(),denyButton:V(),cancelButton:k(),loader:K(),closeButton:$(),validationMessage:M(),progressSteps:O()};return i.domCache.set(U,X),X},BL=(U,X,J)=>{const nt=D();Tt(nt),X.timer&&(U.timeout=new gL(()=>{J("timer"),delete U.timeout},X.timer),X.timerProgressBar&&(wt(nt),ut(nt,X,"timerProgressBar"),setTimeout(()=>{U.timeout&&U.timeout.running&&oe(X.timer)})))},kL=(U,X)=>{if(!X.toast){if(!y(X.allowEnterKey)){VL();return}zL(U,X)||sv(-1,1)}},zL=(U,X)=>X.focusDeny&&Xt(U.denyButton)?(U.denyButton.focus(),!0):X.focusCancel&&Xt(U.cancelButton)?(U.cancelButton.focus(),!0):X.focusConfirm&&Xt(U.confirmButton)?(U.confirmButton.focus(),!0):!1,VL=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const U=new Date,X=localStorage.getItem("swal-initiation");X?(U.getTime()-Date.parse(X))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const J=document.createElement("audio");J.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",J.loop=!0,document.body.appendChild(J),setTimeout(()=>{J.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${U}`)}Ke.prototype.disableButtons=BT,Ke.prototype.enableButtons=$T,Ke.prototype.getInput=OT,Ke.prototype.disableInput=zT,Ke.prototype.enableInput=kT,Ke.prototype.hideLoading=Wc,Ke.prototype.disableLoading=Wc,Ke.prototype.showValidationMessage=VT,Ke.prototype.resetValidationMessage=GT,Ke.prototype.close=Rr,Ke.prototype.closePopup=Rr,Ke.prototype.closeModal=Rr,Ke.prototype.closeToast=Rr,Ke.prototype.rejectPromise=IT,Ke.prototype.update=HT,Ke.prototype._destroy=YT,Object.assign(Ke,vL),Object.keys(_O).forEach(U=>{Ke[U]=function(){return hi&&hi[U]?hi[U](...arguments):null}}),Ke.DismissReason=Ao,Ke.version="11.7.19";const Hc=Ke;return Hc.default=Hc,Hc}),typeof Mn<"u"&&Mn.Sweetalert2&&(Mn.swal=Mn.sweetAlert=Mn.Swal=Mn.SweetAlert=Mn.Sweetalert2),typeof document<"u"&&function(s,r){var d=s.createElement("style");if(s.getElementsByTagName("head")[0].appendChild(d),d.styleSheet)d.styleSheet.disabled||(d.styleSheet.cssText=r);else try{d.innerHTML=r}catch{d.innerText=r}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')})(yb);var F5=yb.exports;const op=tx(F5),cd=op.mixin({toast:!0,position:"top-right",iconColor:"white",customClass:{popup:"colored-toast"},showConfirmButton:!1,timer:1500,timerProgressBar:!0});function Tb(){const n=op.getPopup();return n==null||n.classList.remove("swal2-show"),setTimeout(()=>{n==null||n.classList.add("animate__animated","animate__headShake")}),setTimeout(()=>{n==null||n.classList.remove("animate__animated","animate__headShake")},500),!1}function D5(n,t,s){op.fire({title:"Input Game Record Name",input:"text",inputAttributes:{autocapitalize:"off"},showCloseButton:!0,showCancelButton:!0,confirmButtonText:n,showLoaderOnConfirm:!0,preConfirm:t,allowOutsideClick:Tb}).then(r=>{(s||(()=>{}))(),r.isConfirmed&&cd.fire({icon:"success",title:"Saved"})}).catch(()=>{(s||(()=>{}))(),cd.fire({icon:"error",title:"Error"})})}function Sb(n,t,s,r){op.fire({title:"Select Game Record Name",input:"select",inputOptions:t,showCloseButton:!0,showCancelButton:!0,confirmButtonText:n,showLoaderOnConfirm:!0,preConfirm:s,allowOutsideClick:Tb}).then(d=>{r(),d.isConfirmed&&cd.fire({icon:"success",title:"Load"})}).catch(()=>{r(),cd.fire({icon:"error",title:"Error"})})}const O5=n=>new Promise(t=>setTimeout(t,n));class L5 extends ap.Scene{constructor(s){super({key:"mosaicScene",active:!0});_t(this,"mosaicGame");_t(this,"prevPlace",[]);_t(this,"indicator");_t(this,"stoneBoard");_t(this,"pointText");_t(this,"size",qx);_t(this,"stoneSize",Fo/this.size);_t(this,"board");_t(this,"isRendering",!1);this.mosaicGame=s,this.size=s.size,this.stoneSize=Fo/this.size,this.board=this.mosaicGame.board}preload(){}create(){this.add.rectangle(t0/2,e0/2,Fo,Fo,Hs.frame).setDepth(-1),this.indicator=this.add.rectangle(t0/2,e0/2,Fo+dC,Fo+dC,Hs.bg).setDepth(-2),this.stoneBoard=this.mosaicGame.board.mapPiece(({position:s})=>({stone:new M5(this,s),hole:new $5(this,s)})),this.pointText=this.add.text(0,0,"0:0",{fontSize:"48px",fontFamily:"Arial"}),this.allRerender(),this.mosaicGame.turn()}async render(s){console.log("render"),this.board=this.mosaicGame.board;for(const{position:d}of this.prevPlace){const{stone:S,hole:i}=this.stoneBoard.get(d);S.render(),i.render()}this.prevPlace=s||[];for(const{position:d}of this.prevPlace){const{stone:S,hole:i}=this.stoneBoard.get(d);S.render(!0),i.render(),await O5(V5)}const r=this.mosaicGame.player;this.indicator.fillColor=Hs[`stone${r}`],this.pointText.setText(`${this.mosaicGame.getPoint(he.first)}:${this.mosaicGame.getPoint(he.second)}`)}allRerender(){this.board=this.mosaicGame.board,this.prevPlace=[],this.stoneBoard.forEachPiece(({value:{stone:r,hole:d}})=>{r.render(),d.render()});const s=this.mosaicGame.player;this.indicator.fillColor=Hs[`stone${s}`],this.pointText.setText(`${this.mosaicGame.getPoint(he.first)}:${this.mosaicGame.getPoint(he.second)}`)}stonePosition(s){const{i:r,j:d,k:S}=s;return{x:(d+(this.size-r)/2)*this.stoneSize+fC.x,y:(S+(this.size-r)/2)*this.stoneSize+fC.y}}setInteractive(s){this.stoneBoard.forEachPiece(({value:{hole:r}})=>{r.setInteractive(s)})}}class M5 extends ap.GameObjects.Container{constructor(s,r){const{x:d,y:S}=s.stonePosition(r);super(s,d,S);_t(this,"pos");_t(this,"mosaicScene");_t(this,"defaultDepth");_t(this,"rim");_t(this,"mid");this.mosaicScene=s,this.pos=r,s.add.existing(this),this.defaultDepth=s.size-r.i,this.setDepth(this.defaultDepth),this.rim=s.add.circle(0,0,s.stoneSize/2,Hs.rim),this.mid=s.add.circle(0,0,s.stoneSize/2*k5,Hs.rim),this.add([this.rim,this.mid])}render(s){const r=this.mosaicScene.board.get(this.pos);r==0?this.setVisible(!1):(this.setVisible(!0),s?(this.setDepth(this.depth+1),this.rim.setStrokeStyle(3,Hs[`stone${r}`],1)):(this.setDepth(this.defaultDepth),this.rim.setStrokeStyle()),this.mid.fillColor=Hs[`stone${r}`])}}class $5{constructor(t,s){_t(this,"pos");_t(this,"mosaicScene");_t(this,"hole");const{x:r,y:d}=t.stonePosition(s);this.mosaicScene=t,this.pos=s,this.hole=t.add.circle(r,d,t.stoneSize/2*z5,Hs.innactive),this.hole.on("pointerdown",async()=>{console.log("click",this.hole.x,this.hole.y,s),await t.mosaicGame.move(s)}),this.hole.setDepth(t.size*2)}render(){const t=this.mosaicScene.board.legalPieces().get(this.pos);this.hole.setVisible(t)}setInteractive(t){t&&this.mosaicScene.board.legalPieces().get(this.pos)?(this.hole.setInteractive(),this.hole.fillColor=Hs.hole):(this.hole.disableInteractive(),this.hole.fillColor=Hs.innactive)}}class fd extends Array{constructor(...s){super(...s);_t(this,"maxStones",0);const r=this.maxStones=this.length*(this.length+1)*(2*this.length+1)/6;this.maxStones=this.length%4==1?(r-1)/2:this.length%4==2?(r+1)/2:r/2}isWin(s){return this.count(r=>r.value==s)>=this.maxStones}isDone(){return this.isWin(he.first)||this.isWin(he.second)}reverse(){return new fd(...[...this].reverse())}mapPiece(s){return new fd(...this.map((r,d)=>r.map((S,i)=>S.map((g,e)=>s({position:{i:d,j:i,k:e},value:g})))))}forEachPiece(s){this.forEach((r,d)=>r.forEach((S,i)=>S.forEach((g,e)=>s({position:{i:d,j:i,k:e},value:g}))))}count(s){return this.where(s).length}countBelow(s){return this.mapPiece(r=>{const{position:{i:d,j:S,k:i}}=r;return d==this.length-1?0:Number(s(this[d+1][S][i]))+Number(s(this[d+1][S+1][i]))+Number(s(this[d+1][S][i+1]))+Number(s(this[d+1][S+1][i+1]))})}where(s){const r=[];return this.forEachPiece(d=>{s(d)&&r.push(d)}),r}get(s){const{i:r,j:d,k:S}=s;return this[r][d][S]}set(s){const{position:{i:r,j:d,k:S},value:i}=s;this[r][d][S]=i}copy(){return this.mapPiece(({value:s})=>s)}merge(s,r){return this.mapPiece(({position:d,value:S})=>r(S,s.get(d)))}legalPieces(){const s=this.isDone(),r=this.countBelow(d=>d!=0);return this.mapPiece(d=>{const{position:S,value:i}=d;return!s&&i==0&&(S.i==this.length-1||r.get(S)==4)})}legalActions(){return this.legalPieces().where(({value:s})=>s).map(({position:s})=>s)}next(s){const r=this.copy();r.set(s);const d=[s];let S=[];do{const i=r.countBelow(e=>e==he.first).mapPiece(e=>e.value>=3),g=r.countBelow(e=>e==he.second).mapPiece(e=>e.value>=3);S=i.merge(g,(e,a)=>e?he.first:a?he.second:0).merge(r.legalPieces(),(e,a)=>a?e:0).where(({value:e})=>e!=0).map(e=>(r.set(e),d.push(e),e))}while(S.length>0);return[r,d]}nextAll(s){return this.legalPieces().where(({value:r})=>r).map(({position:r})=>this.next({position:r,value:s})[0])}flip(){return this.mapPiece(({value:s})=>s==he.first?he.second:s==he.second?he.first:s)}}class Jx{constructor(t=qx,s=[]){_t(this,"size");_t(this,"moves");_t(this,"record",[]);_t(this,"length",0);this.size=t,this.record.push(this.initialBoard()),this.moves=s,this.moves.forEach((r,d)=>{this.record.push(this.record[d].next(r)[0])}),this.length=this.record.length}initialBoard(){const t=new fd(...new Array(this.size).fill(0).map((s,r)=>new Array(r+1).fill([0]).map(()=>new Array(r+1).fill(0))));return this.size%2==1&&t.set({position:{i:this.size-1,j:(this.size-1)/2,k:(this.size-1)/2},value:he.neutral}),t}get(t){return this.record[t]}move(t,s){this.moves.push(s),this.record.splice(t);const[r,d]=this.record[t-1].next(s);return this.record[t]=r,this.length=this.record.length,[r,d]}exportData(){const t=[this.size,...this.moves.map(({position:{i:s,j:r,k:d}})=>[s,r,d])].flat();return xl.encodeFromArray(t)}importData(t){const s=xl.decodeToArray(t),r=s.shift(),d=R5(s,3).map((S,i)=>({position:{i:S[0],j:S[1],k:S[2]},value:i%2==0?he.first:he.second}));return new Jx(r,d)}}class B5{constructor([t,s]=[!1,!1],r=qx){_t(this,"isAI");_t(this,"size");_t(this,"scene");_t(this,"gameRecord");_t(this,"movesNum",0);_t(this,"player",he.first);_t(this,"board");_t(this,"action");_t(this,"turn",async()=>{});this.isAI={first:t,second:s},this.size=r,this.gameRecord=new Jx(this.size),this.board=this.gameRecord.get(this.movesNum);const d=async()=>{console.log("=== Player turn ==="),this.scene.setInteractive(!0)},S=async()=>{this.action=this.action||await uht(this.size),console.log("=== AI turn ===");const i=Date.now();this.scene.setInteractive(!1);const g=this.action(this.movesNum%2==0?this.board:this.board.flip()),e=Date.now();console.log("predict:",e-i,"ms"),console.log("position",g),await this.move(g)};this.turn=async()=>{((this.movesNum%2==0?t:s)?S:d)()},this.scene=new L5(this)}getPoint(t){return this.board.count(s=>s.value==t)}async move(t){if(this.scene.setInteractive(!1),this.board.isDone())return;const s={position:t,value:this.player};this.movesNum+=1,this.player=this.movesNum%2==0?he.first:he.second;const[r,d]=this.gameRecord.move(this.movesNum,s);this.board=r,this.scene.render(d).then(()=>{this.turn()})}prev(){this.movesNum!=0&&(console.log("prev"),this.movesNum-=1,this.player=this.movesNum%2==0?he.first:he.second,this.isAI[this.movesNum%2==0?"first":"second"]?this.prev():(this.board=this.gameRecord.get(this.movesNum),this.scene.allRerender(),this.turn()))}next(){this.movesNum!=this.gameRecord.length-1&&(console.log("next"),this.movesNum+=1,this.player=this.movesNum%2==0?he.first:he.second,this.isAI[this.movesNum%2==0?"first":"second"]?this.next():(this.board=this.gameRecord.get(this.movesNum),this.scene.allRerender(),this.turn()))}exportData(){return console.log("save"),N5(this.gameRecord.exportData())}importData(t){console.log("load"),this.movesNum=0,this.gameRecord=this.gameRecord.importData(P5(t)),this.board=this.gameRecord.get(this.movesNum)}}const qx=7,fC={x:50,y:50},t0=800,e0=800,Fo=700,dC=20,k5=.9,z5=.36,V5=300,he={first:1,second:2,neutral:3},Hs={bg:1153348,frame:14596231,hole:3355443,innactive:5592405,rim:16777215,place:2250001,[`stone${he.neutral}`]:12303291,[`stone${he.first}`]:12264123,[`stone${he.second}`]:2276283};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G5=1e-7,U5=1e-4;class Cb{constructor(t,s){this.backend=t,this.dataMover=s,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,s){this.dataIdsCount++,this.data.set(t,s)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class _x{refCount(t){return is("refCount")}incRef(t){return is("incRef")}timerAvailable(){return!0}time(t){return is("time")}read(t){return is("read")}readSync(t){return is("readSync")}readToGPU(t,s){return is("readToGPU")}numDataIds(){return is("numDataIds")}disposeData(t,s){return is("disposeData")}write(t,s,r){return is("write")}move(t,s,r,d,S){return is("move")}createTensorFromGPUData(t,s,r){return is("createTensorFromGPUData")}memory(){return is("memory")}floatPrecision(){return is("floatPrecision")}epsilon(){return this.floatPrecision()===32?G5:U5}dispose(){return is("dispose")}}function is(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W5(n){let t=n.length,s=0;for(;t>0;)s=Math.random()*t|0,t--,Mo(n,t,s)}function Qa(n,t,s){return Math.max(n,Math.min(t,s))}function ty(n){return n%2===0?n:n+1}function Mo(n,t,s){const r=n[t];n[t]=n[s],n[s]=r}function X5(n){let t=0;for(let s=0;s<n.length;s++)t+=n[s];return t}function q(n,t){if(!n)throw new Error(typeof t=="string"?t:t())}function xs(n,t,s=""){q(ee(n,t),()=>s+` Shapes ${n} and ${t} must match`)}function $l(n){q(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function mt(n){if(n.length===0)return 1;let t=n[0];for(let s=1;s<n.length;s++)t*=n[s];return t}function H5(n,t){if(n===t)return!0;if(n==null||t==null||n.length!==t.length)return!1;for(let s=0;s<n.length;s++)if(n[s]!==null&&t[s]!==null&&n[s]!==t[s])return!1;return!0}function ee(n,t){if(n===t)return!0;if(n==null||t==null||n.length!==t.length)return!1;for(let s=0;s<n.length;s++)if(n[s]!==t[s])return!1;return!0}function yl(n){return n%1===0}function n0(n){const t=Math.ceil(Math.sqrt(n));return[t,Math.ceil(n/t)]}function il(n,t){return t<=n.length?n:n+" ".repeat(t-n.length)}function pC(n,t=d=>0,s,r){return new Promise((d,S)=>{let i=0;const g=()=>{if(n()){d();return}i++;const e=t(i);if(s!=null&&i>=s){S();return}r!=null?r(g,e):setTimeout(g,e)};g()})}function wb(n,t){let s=1,r=-1;for(let S=0;S<n.length;++S)if(n[S]>=0)s*=n[S];else if(n[S]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${S}`);r=S}else if(n[S]<0)throw Error(`Shapes can not be < 0. Found ${n[S]} at dim ${S}`);if(r===-1){if(t>0&&t!==s)throw Error(`Size(${t}) must match the product of shape ${n}`);return n}if(s===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(t%s!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${s}`);const d=n.slice();return d[r]=t/s,d}function Qt(n,t){const s=t.length;return n=n==null?t.map((r,d)=>d):[].concat(n),q(n.every(r=>r>=-s&&r<s),()=>`All values in axis param must be in range [-${s}, ${s}) but got axis ${n}`),q(n.every(r=>yl(r)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(r=>r<0?s+r:r)}function da(n,t){const s=[],r=[],d=t!=null&&Array.isArray(t)&&t.length===0,S=t==null||d?null:Qt(t,n).sort();let i=0;for(let g=0;g<n.length;++g){if(S!=null){if(S[i]===g&&n[g]!==1)throw new Error(`Can't squeeze axis ${g} since its dim '${n[g]}' is not 1`);(S[i]==null||S[i]>g)&&n[g]===1&&(s.push(n[g]),r.push(g)),S[i]<=g&&i++}n[g]!==1&&(s.push(n[g]),r.push(g))}return{newShape:s,keptDims:r}}function Tn(n,t){return Ge(n,t)}function Ge(n,t){let s=null;if(n==null||n==="float32")s=new Float32Array(t);else if(n==="int32")s=new Int32Array(t);else if(n==="bool")s=new Uint8Array(t);else if(n==="string")s=new Array(t);else throw new Error(`Unknown data type ${n}`);return s}function Y5(n,t){for(let s=0;s<n.length;s++){const r=n[s];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function K5(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function Eb(n,t){return!(t==="complex64"||t==="float32"&&n!=="complex64"||t==="int32"&&n!=="float32"&&n!=="complex64"||t==="bool"&&n==="bool")}function dd(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function j5(n){if(n==null)return 0;let t=0;return n.forEach(s=>t+=s.length),t}function Sh(n){return typeof n=="string"||n instanceof String}function Z5(n){return typeof n=="boolean"}function s0(n){return typeof n=="number"}function Bl(n){return Array.isArray(n)?Bl(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":s0(n)?"float32":Sh(n)?"string":Z5(n)?"bool":"float32"}function i0(n){return!!(n&&n.constructor&&n.call&&n.apply)}function r0(n,t){for(let s=t;s<n;++s)if(n%s===0)return s;return n}function kt(n){const t=n.length;if(t<2)return[];const s=new Array(t-1);s[t-2]=n[t-1];for(let r=t-3;r>=0;--r)s[r]=s[r+1]*n[r+1];return s}function Ab(n,t,s,r=!1){const d=new Array;if(t.length===1){const S=t[0]*(r?2:1);for(let i=0;i<S;i++)d[i]=s[n+i]}else{const S=t[0],i=t.slice(1),g=i.reduce((e,a)=>e*a)*(r?2:1);for(let e=0;e<S;e++)d[e]=Ab(n+e*g,i,s,r)}return d}function _s(n,t,s=!1){if(n.length===0)return t[0];const r=n.reduce((d,S)=>d*S)*(s?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${n}] does not match the input size ${t.length}${s?" for a complex tensor":""}.`);return Ab(0,n,t,s)}function Q5(n,t){if(Array.isArray(n))return n;if(t==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(t==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${t}`)}function ey(n,t){const s=Pn(n,t);for(let r=0;r<s.length;r++)s[r]=1;return s}function Pn(n,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${t}`)}function bb(n,t){const s=n.reduce((r,d)=>r*d,1);if(t==null||t==="float32")return _s(n,new Float32Array(s));if(t==="int32")return _s(n,new Int32Array(s));if(t==="bool")return _s(n,new Uint8Array(s));throw new Error(`Unknown data type ${t}`)}function Ls(n){n.forEach(t=>{q(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function Xi(n,t,s){if(t===0)return 0;if(t===1)return n[0];let r=n[n.length-1];for(let d=0;d<n.length-1;++d)r+=s[d]*n[d];return r}function kl(n,t,s){if(t===0)return[];if(t===1)return[n];const r=new Array(t);for(let d=0;d<r.length-1;++d)r[d]=Math.floor(n/s[d]),n-=r[d]*s[d];return r[r.length-1]=n,r}function Ja(n){return n&&n.then&&typeof n.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mC="tfjsflags";class J5{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=q5,this.populateURLFlags()}setPlatform(t,s){this.platform!=null&&(dt().getBool("IS_TEST")||dt().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=s}registerFlag(t,s,r){if(this.flagRegistry[t]={evaluationFn:s,setHook:r},this.urlFlags[t]!=null){const d=this.urlFlags[t];dt().getBool("IS_TEST")||dt().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${d}.`),this.set(t,d)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const s=this.evaluateFlag(t);if(Ja(s))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=s,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,s){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=s,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(s)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const t=this.getQueryParams(this.global.location.search);mC in t&&t[mC].split(",").forEach(r=>{const[d,S]=r.split(":");this.urlFlags[d]=t6(d,S)})}}function q5(n){const t={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(s,...r)=>(_5(t,r[0],r[1]),r.join("="))),t}function _5(n,t,s){n[decodeURIComponent(t)]=decodeURIComponent(s||"")}function t6(n,t){const s=t.toLowerCase();return s==="true"||s==="false"?s==="true":`${+s}`===s?+s:t}function dt(){return Ib}let Ib=null;function e6(n){Ib=n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let $v;function Rb(){if($v==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");$v=n}return $v}function n6(){const n=Rb();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function ny(n,t){const s=n6();if(s.has(n))return s.get(n);{const r=t();return s.set(n,r),s.get(n)}}const lp="Abs",Ch="Acos",wh="Acosh",zl="Add",up="AddN",sy="All",iy="Any",hp="ArgMax",cp="ArgMin",Eh="Asin",Ah="Asinh",bh="Atan",Ih="Atanh",Rh="Atan2",fp="AvgPool",ry="AvgPoolGrad",dp="AvgPool3D",ay="AvgPool3DGrad",pp="BatchMatMul",mp="BatchToSpaceND",oy="Bincount",vp="BitwiseAnd",s6="BroadcastTo",ly="BroadcastArgs",Nh="Cast",Ph="Ceil",Fh="ClipByValue",uy="Complex",gp="ComplexAbs",xp="Concat",yp="Conv2D",hy="Conv2DBackpropFilter",Tp="Conv2DBackpropInput",Sp="Conv3D",cy="Conv3DBackpropFilterV2",fy="Conv3DBackpropInputV2",Dh="Cos",Oh="Cosh",dy="Cumprod",Cp="Cumsum",py="CropAndResize",my="DenseBincount",vy="DepthToSpace",wp="DepthwiseConv2dNative",gy="DepthwiseConv2dNativeBackpropFilter",xy="DepthwiseConv2dNativeBackpropInput",yy="Diag",Ep="Dilation2D",a0="Dilation2DBackpropInput",o0="Dilation2DBackpropFilter",i6="Draw",Lh="RealDiv",Ty="Einsum",Mh="Elu",Sy="EluGrad",$h="Erf",Ap="Equal",Bh="Exp",bp="ExpandDims",kh="Expm1",Cy="FFT",wy="Fill",Ey="FlipLeftRight",zh="Floor",Vh="FloorDiv",Ip="FusedBatchNorm",Rp="GatherV2",Ay="GatherNd",Np="Greater",Gh="GreaterEqual",Uh="Identity",by="IFFT",Iy="Imag",Wh="IsFinite",Xh="IsInf",Hh="IsNan",Pp="LeakyRelu",Fp="Less",Dp="LessEqual",Ry="LinSpace",Yh="Log",Kh="Log1p",Op="LogicalAnd",Lp="LogicalNot",Mp="LogicalOr",r6="LogSoftmax",$p="LRN",Ny="LRNGrad",Bp="Max",jh="Maximum",kp="MaxPool",Py="MaxPoolGrad",zp="MaxPool3D",Fy="MaxPool3DGrad",Dy="MaxPoolWithArgmax",Vp="Mean",Gp="Min",Zh="Minimum",Up="MirrorPad",Qh="Mod",Oy="Multinomial",Jh="Multiply",Wp="Neg",Xp="NotEqual",Ly="NonMaxSuppressionV3",My="NonMaxSuppressionV4",$y="NonMaxSuppressionV5",Hp="OnesLike",Yp="OneHot",Kp="Pack",jp="PadV2",qh="Pow",Zp="Prelu",Qp="Prod",By="RaggedGather",ky="RaggedRange",zy="RaggedTensorToTensor",Vy="Range",Gy="Real",_h="Reciprocal",tc="Relu",Jp="Reshape",qp="ResizeNearestNeighbor",Uy="ResizeNearestNeighborGrad",_p="ResizeBilinear",Wy="ResizeBilinearGrad",ec="Relu6",tm="Reverse",nc="Round",sc="Rsqrt",Xy="ScatterNd",Hy="TensorScatterUpdate",Yy="SearchSorted",em="Select",ic="Selu",nm="Slice",rc="Sin",ac="Sinh",oc="Sign",lc="Sigmoid",uc="Softplus",hc="Sqrt",sm="Sum",im="SpaceToBatchND",rm="SplitV",am="Softmax",Ky="SparseFillEmptyRows",jy="SparseReshape",Zy="SparseSegmentMean",Qy="SparseSegmentSum",Jy="SparseToDense",cc="SquaredDifference",qy="Square",om="StaticRegexReplace",_y="StridedSlice",t1="StringNGrams",e1="StringSplit",n1="StringToHashBucketFast",fc="Sub",dc="Tan",pc="Tanh",mc="Tile",s1="TopK",i1="Transform",rl="Transpose",r1="Unique",lm="Unpack",um="UnsortedSegmentSum",hm="ZerosLike",vc="Step",a6="FromPixels",a1="RotateWithOffset",pd="_FusedMatMul",md="FusedConv2D",vd="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cs(...n){dt().getBool("IS_TEST")||dt().getBool("PROD")||console.warn(...n)}function o6(...n){dt().getBool("IS_TEST")||dt().getBool("PROD")||console.log(...n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gd=ny("kernelRegistry",()=>new Map),l0=ny("gradRegistry",()=>new Map);function vC(n,t){const s=Pb(n,t);return gd.get(s)}function gC(n){return l0.get(n)}function xC(n){const t=gd.entries(),s=[];for(;;){const{done:r,value:d}=t.next();if(r)break;const[S,i]=d,[g]=S.split("_");g===n&&s.push(i)}return s}function Nb(n){const{kernelName:t,backendName:s}=n,r=Pb(t,s);gd.has(r)&&Cs(`The kernel '${t}' for backend '${s}' is already registered`),gd.set(r,n)}function l6(n){const{kernelName:t}=n;l0.has(t)&&dt().getBool("DEBUG")&&Cs(`Overriding the gradient for '${t}'`),l0.set(t,n)}function Pb(n,t){return`${t}_${n}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fb(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}var Db=Ce,Ys=null;try{Ys=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ce(n,t,s){this.low=n|0,this.high=t|0,this.unsigned=!!s}Ce.prototype.__isLong__;Object.defineProperty(Ce.prototype,"__isLong__",{value:!0});function ys(n){return(n&&n.__isLong__)===!0}Ce.isLong=ys;var yC={},TC={};function co(n,t){var s,r,d;return t?(n>>>=0,(d=0<=n&&n<256)&&(r=TC[n],r)?r:(s=we(n,(n|0)<0?-1:0,!0),d&&(TC[n]=s),s)):(n|=0,(d=-128<=n&&n<128)&&(r=yC[n],r)?r:(s=we(n,n<0?-1:0,!1),d&&(yC[n]=s),s))}Ce.fromInt=co;function Ks(n,t){if(isNaN(n))return t?ka:js;if(t){if(n<0)return ka;if(n>=Ob)return $b}else{if(n<=-CC)return us;if(n+1>=CC)return Mb}return n<0?Ks(-n,t).neg():we(n%Tl|0,n/Tl|0,t)}Ce.fromNumber=Ks;function we(n,t,s){return new Ce(n,t,s)}Ce.fromBits=we;var xd=Math.pow;function o1(n,t,s){if(n.length===0)throw Error("empty string");if(n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return js;if(typeof t=="number"?(s=t,t=!1):t=!!t,s=s||10,s<2||36<s)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return o1(n.substring(1),t,s).neg();for(var d=Ks(xd(s,8)),S=js,i=0;i<n.length;i+=8){var g=Math.min(8,n.length-i),e=parseInt(n.substring(i,i+g),s);if(g<8){var a=Ks(xd(s,g));S=S.mul(a).add(Ks(e))}else S=S.mul(d),S=S.add(Ks(e))}return S.unsigned=t,S}Ce.fromString=o1;function Ri(n,t){return typeof n=="number"?Ks(n,t):typeof n=="string"?o1(n,t):we(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}Ce.fromValue=Ri;var SC=65536,u6=1<<24,Tl=SC*SC,Ob=Tl*Tl,CC=Ob/2,wC=co(u6),js=co(0);Ce.ZERO=js;var ka=co(0,!0);Ce.UZERO=ka;var Jo=co(1);Ce.ONE=Jo;var Lb=co(1,!0);Ce.UONE=Lb;var u0=co(-1);Ce.NEG_ONE=u0;var Mb=we(-1,2147483647,!1);Ce.MAX_VALUE=Mb;var $b=we(-1,-1,!0);Ce.MAX_UNSIGNED_VALUE=$b;var us=we(0,-2147483648,!1);Ce.MIN_VALUE=us;var Rt=Ce.prototype;Rt.toInt=function(){return this.unsigned?this.low>>>0:this.low};Rt.toNumber=function(){return this.unsigned?(this.high>>>0)*Tl+(this.low>>>0):this.high*Tl+(this.low>>>0)};Rt.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(us)){var s=Ks(t),r=this.div(s),d=r.mul(s).sub(this);return r.toString(t)+d.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var S=Ks(xd(t,6),this.unsigned),i=this,g="";;){var e=i.div(S),a=i.sub(e.mul(S)).toInt()>>>0,v=a.toString(t);if(i=e,i.isZero())return v+g;for(;v.length<6;)v="0"+v;g=""+v+g}};Rt.getHighBits=function(){return this.high};Rt.getHighBitsUnsigned=function(){return this.high>>>0};Rt.getLowBits=function(){return this.low};Rt.getLowBitsUnsigned=function(){return this.low>>>0};Rt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(us)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,s=31;s>0&&!(t&1<<s);s--);return this.high!=0?s+33:s+1};Rt.isZero=function(){return this.high===0&&this.low===0};Rt.eqz=Rt.isZero;Rt.isNegative=function(){return!this.unsigned&&this.high<0};Rt.isPositive=function(){return this.unsigned||this.high>=0};Rt.isOdd=function(){return(this.low&1)===1};Rt.isEven=function(){return(this.low&1)===0};Rt.equals=function(t){return ys(t)||(t=Ri(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};Rt.eq=Rt.equals;Rt.notEquals=function(t){return!this.eq(t)};Rt.neq=Rt.notEquals;Rt.ne=Rt.notEquals;Rt.lessThan=function(t){return this.comp(t)<0};Rt.lt=Rt.lessThan;Rt.lessThanOrEqual=function(t){return this.comp(t)<=0};Rt.lte=Rt.lessThanOrEqual;Rt.le=Rt.lessThanOrEqual;Rt.greaterThan=function(t){return this.comp(t)>0};Rt.gt=Rt.greaterThan;Rt.greaterThanOrEqual=function(t){return this.comp(t)>=0};Rt.gte=Rt.greaterThanOrEqual;Rt.ge=Rt.greaterThanOrEqual;Rt.compare=function(t){if(ys(t)||(t=Ri(t)),this.eq(t))return 0;var s=this.isNegative(),r=t.isNegative();return s&&!r?-1:!s&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};Rt.comp=Rt.compare;Rt.negate=function(){return!this.unsigned&&this.eq(us)?us:this.not().add(Jo)};Rt.neg=Rt.negate;Rt.add=function(t){ys(t)||(t=Ri(t));var s=this.high>>>16,r=this.high&65535,d=this.low>>>16,S=this.low&65535,i=t.high>>>16,g=t.high&65535,e=t.low>>>16,a=t.low&65535,v=0,u=0,o=0,c=0;return c+=S+a,o+=c>>>16,c&=65535,o+=d+e,u+=o>>>16,o&=65535,u+=r+g,v+=u>>>16,u&=65535,v+=s+i,v&=65535,we(o<<16|c,v<<16|u,this.unsigned)};Rt.subtract=function(t){return ys(t)||(t=Ri(t)),this.add(t.neg())};Rt.sub=Rt.subtract;Rt.multiply=function(t){if(this.isZero())return js;if(ys(t)||(t=Ri(t)),Ys){var s=Ys.mul(this.low,this.high,t.low,t.high);return we(s,Ys.get_high(),this.unsigned)}if(t.isZero())return js;if(this.eq(us))return t.isOdd()?us:js;if(t.eq(us))return this.isOdd()?us:js;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(wC)&&t.lt(wC))return Ks(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,d=this.high&65535,S=this.low>>>16,i=this.low&65535,g=t.high>>>16,e=t.high&65535,a=t.low>>>16,v=t.low&65535,u=0,o=0,c=0,l=0;return l+=i*v,c+=l>>>16,l&=65535,c+=S*v,o+=c>>>16,c&=65535,c+=i*a,o+=c>>>16,c&=65535,o+=d*v,u+=o>>>16,o&=65535,o+=S*a,u+=o>>>16,o&=65535,o+=i*e,u+=o>>>16,o&=65535,u+=r*v+d*a+S*e+i*g,u&=65535,we(c<<16|l,u<<16|o,this.unsigned)};Rt.mul=Rt.multiply;Rt.divide=function(t){if(ys(t)||(t=Ri(t)),t.isZero())throw Error("division by zero");if(Ys){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var s=(this.unsigned?Ys.div_u:Ys.div_s)(this.low,this.high,t.low,t.high);return we(s,Ys.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ka:js;var r,d,S;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return ka;if(t.gt(this.shru(1)))return Lb;S=ka}else{if(this.eq(us)){if(t.eq(Jo)||t.eq(u0))return us;if(t.eq(us))return Jo;var i=this.shr(1);return r=i.div(t).shl(1),r.eq(js)?t.isNegative()?Jo:u0:(d=this.sub(t.mul(r)),S=r.add(d.div(t)),S)}else if(t.eq(us))return this.unsigned?ka:js;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();S=js}for(d=this;d.gte(t);){r=Math.max(1,Math.floor(d.toNumber()/t.toNumber()));for(var g=Math.ceil(Math.log(r)/Math.LN2),e=g<=48?1:xd(2,g-48),a=Ks(r),v=a.mul(t);v.isNegative()||v.gt(d);)r-=e,a=Ks(r,this.unsigned),v=a.mul(t);a.isZero()&&(a=Jo),S=S.add(a),d=d.sub(v)}return S};Rt.div=Rt.divide;Rt.modulo=function(t){if(ys(t)||(t=Ri(t)),Ys){var s=(this.unsigned?Ys.rem_u:Ys.rem_s)(this.low,this.high,t.low,t.high);return we(s,Ys.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};Rt.mod=Rt.modulo;Rt.rem=Rt.modulo;Rt.not=function(){return we(~this.low,~this.high,this.unsigned)};Rt.and=function(t){return ys(t)||(t=Ri(t)),we(this.low&t.low,this.high&t.high,this.unsigned)};Rt.or=function(t){return ys(t)||(t=Ri(t)),we(this.low|t.low,this.high|t.high,this.unsigned)};Rt.xor=function(t){return ys(t)||(t=Ri(t)),we(this.low^t.low,this.high^t.high,this.unsigned)};Rt.shiftLeft=function(t){return ys(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?we(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):we(0,this.low<<t-32,this.unsigned)};Rt.shl=Rt.shiftLeft;Rt.shiftRight=function(t){return ys(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?we(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):we(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};Rt.shr=Rt.shiftRight;Rt.shiftRightUnsigned=function(t){if(ys(t)&&(t=t.toInt()),t&=63,t===0)return this;var s=this.high;if(t<32){var r=this.low;return we(r>>>t|s<<32-t,s>>>t,this.unsigned)}else return t===32?we(s,0,this.unsigned):we(s>>>t-32,0,this.unsigned)};Rt.shru=Rt.shiftRightUnsigned;Rt.shr_u=Rt.shiftRightUnsigned;Rt.toSigned=function(){return this.unsigned?we(this.low,this.high,!1):this};Rt.toUnsigned=function(){return this.unsigned?this:we(this.low,this.high,!0)};Rt.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};Rt.toBytesLE=function(){var t=this.high,s=this.low;return[s&255,s>>>8&255,s>>>16&255,s>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};Rt.toBytesBE=function(){var t=this.high,s=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,s>>>24,s>>>16&255,s>>>8&255,s&255]};Ce.fromBytes=function(t,s,r){return r?Ce.fromBytesLE(t,s):Ce.fromBytesBE(t,s)};Ce.fromBytesLE=function(t,s){return new Ce(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,s)};Ce.fromBytesBE=function(t,s){return new Ce(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],s)};const Bb=tx(Db),h6=WL({__proto__:null,default:Bb},[Db]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fa=Bb||h6;function cm(n){return Fa.fromString(n,!0,16)}const kb=cm("c3a5c85c97cb3127"),Pa=cm("b492b66fbe98f273"),kn=cm("9ae16a3b2f90404f");function h0(n){return n.xor(n.shru(47))}function zb(n,t,s){const r=n.slice(t,t+s);return Fa.fromBytes(Array.from(r),!0,!0)}function ge(n,t){return zb(n,t,8)}function EC(n,t){return zb(n,t,4)}function hn(n,t){return t===0?n:n.shru(t).or(n.shl(64-t))}function jr(n,t,s=cm("9ddfea08eb382d69")){let r=n.xor(t).mul(s);r=r.xor(r.shru(47));let d=t.xor(r).mul(s);return d=d.xor(d.shru(47)),d=d.mul(s),d}function c6(n,t,s,r,d,S){d=d.add(n),S=hn(S.add(d).add(r),21);const i=d;return d=d.add(t),d=d.add(s),S=S.add(hn(d,44)),[d.add(r),S.add(i)]}function hf(n,t,s,r){return c6(ge(n,t),ge(n,t+8),ge(n,t+16),ge(n,t+24),s,r)}function f6(n,t=n.length){if(t>=8){const s=kn.add(t*2),r=ge(n,0).add(kn),d=ge(n,t-8),S=hn(d,37).mul(s).add(r),i=hn(r,25).add(d).mul(s);return jr(S,i,s)}if(t>=4){const s=kn.add(t*2),r=EC(n,0);return jr(r.shl(3).add(t),EC(n,t-4),s)}if(t>0){const s=n[0],r=n[t>>1],d=n[t-1],S=s+(r<<8),i=t+(d<<2);return h0(kn.mul(S).xor(kb.mul(i))).mul(kn)}return kn}function d6(n,t=n.length){const s=kn.add(t*2),r=ge(n,0).mul(Pa),d=ge(n,8),S=ge(n,t-8).mul(s),i=ge(n,t-16).mul(kn);return jr(hn(r.add(d),43).add(hn(S,30)).add(i),r.add(hn(d.add(kn),18)).add(S),s)}function p6(n,t=n.length){const s=kn.add(t*2),r=ge(n,0).mul(kn),d=ge(n,8),S=ge(n,t-8).mul(s),i=ge(n,t-16).mul(kn),g=hn(r.add(d),43).add(hn(S,30)).add(i),e=jr(g,r.add(hn(d.add(kn),18)).add(S),s),a=ge(n,16).mul(s),v=ge(n,24),u=g.add(ge(n,t-32)).mul(s),o=e.add(ge(n,t-24)).mul(s);return jr(hn(a.add(v),43).add(hn(u,30)).add(o),a.add(hn(v.add(r),18)).add(u),s)}function m6(n,t=n.length){const s=Fa.fromNumber(81,!0);if(t<=32)return t<=16?f6(n,t):d6(n,t);if(t<=64)return p6(n,t);let r=s,d=s.mul(Pa).add(113),S=h0(d.mul(kn).add(113)).mul(kn),i=[Fa.UZERO,Fa.UZERO],g=[Fa.UZERO,Fa.UZERO];r=r.mul(kn).add(ge(n,0));let e=0;const a=(t-1>>6)*64,v=a+(t-1&63)-63;do r=hn(r.add(d).add(i[0]).add(ge(n,e+8)),37).mul(Pa),d=hn(d.add(i[1]).add(ge(n,e+48)),42).mul(Pa),r=r.xor(g[1]),d=d.add(i[0]).add(ge(n,e+40)),S=hn(S.add(g[0]),33).mul(Pa),i=hf(n,e,i[1].mul(Pa),r.add(g[0])),g=hf(n,e+32,S.add(g[1]),d.add(ge(n,e+16))),[S,r]=[r,S],e+=64;while(e!==a);const u=Pa.add(S.and(255).shl(1));return e=v,g[0]=g[0].add(t-1&63),i[0]=i[0].add(g[0]),g[0]=g[0].add(i[0]),r=hn(r.add(d).add(i[0]).add(ge(n,e+8)),37).mul(u),d=hn(d.add(i[1]).add(ge(n,e+48)),42).mul(u),r=r.xor(g[1].mul(9)),d=d.add(i[0].mul(9).add(ge(n,e+40))),S=hn(S.add(g[0]),33).mul(u),i=hf(n,e,i[1].mul(u),r.add(g[0])),g=hf(n,e+32,S.add(g[1]),d.add(ge(n,e+16))),[S,r]=[r,S],jr(jr(i[0],g[0],u).add(h0(d).mul(kb)).add(S),jr(i[1],g[1],u).add(r),u)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pa(n,t){return t==="string"?Zr(n):fo([n],t)}function v6(n,t){return n instanceof Float32Array&&t==="float32"||n instanceof Int32Array&&t==="int32"||n instanceof Uint8Array&&t==="bool"}function fo(n,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=qa(n)),dt().getBool("DEBUG")&&Y5(n,t),v6(n,t))return n;if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool"){const s=new Uint8Array(n.length);for(let r=0;r<s.length;++r)Math.round(n[r])!==0&&(s[r]=1);return s}else throw new Error(`Unknown data type ${t}`)}function jn(){return dt().platform.now()}function Zr(n,t="utf-8"){return t=t||"utf-8",dt().platform.encode(n,t)}function ta(n,t="utf-8"){return t=t||"utf-8",dt().platform.decode(n,t)}function ii(n){return dt().platform.isTypedArray!=null?dt().platform.isTypedArray(n):Fb(n)}function qa(n,t=[],s=!1){if(t==null&&(t=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||Ja(n)||n==null||ii(n)&&s)t.push(n);else if(Array.isArray(n)||ii(n))for(let r=0;r<n.length;++r)qa(n[r],t,s);else{let r=-1;for(const d of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(d)&&(r=Math.max(r,Number(d)));for(let d=0;d<=r;d++)qa(n[d],t,s)}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g6{constructor(t,s){this.backendTimer=t,this.logger=s,s==null&&(this.logger=new y6)}profileKernel(t,s,r){let d;const S=()=>{d=r()};let i;const g=jn();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(S);else{S();for(const a of d)a.dataSync();i=Promise.resolve({kernelMs:jn()-g})}if(dt().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let a=0;a<d.length;a++){const v=d[a];v.data().then(u=>{x6(u,v.dtype,t)})}return{kernelName:t,outputs:d,inputs:s,timeMs:i.then(a=>a.kernelMs),extraInfo:i.then(a=>a.getExtraProfileInfo!=null?a.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:s,outputs:r,timeMs:d,inputs:S,extraInfo:i}=t;r.forEach(g=>{Promise.all([g.data(),d,i]).then(e=>{this.logger.logKernelProfile(s,g,e[0],e[1],S,e[2])})})}}function x6(n,t,s){if(t!=="float32")return!1;for(let r=0;r<n.length;r++){const d=n[r];if(isNaN(d)||!isFinite(d))return console.warn(`Found ${d} in the result of '${s}'`),!0}return!1}class y6{logKernelProfile(t,s,r,d,S,i){const g=typeof d=="number"?il(`${d}ms`,9):d.error,e=il(t,25),a=s.rank,v=s.size,u=il(s.shape.toString(),14);let o="";for(const c in S){const l=S[c];if(l!=null){const f=l.shape||s.shape,m=f.length;o+=`${c}: ${m}D ${m>0?f:""} `}}console.log(`%c${e}	%c${g}	%c${a}D ${u}	%c${v}	%c${o}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T6(n,t,s){const r={},d={};for(let e=0;e<t.length;e++)r[t[e].id]=!0;for(let e=0;e<n.length;e++){const a=n[e],v=a.inputs;for(const u in v){const o=v[u];let c=!1;for(let l=0;l<t.length;l++)if(r[o.id]){a.outputs.forEach(f=>r[f.id]=!0),c=!0,d[a.id]=!0;break}if(c)break}}const S={};S[s.id]=!0;const i={};for(let e=n.length-1;e>=0;e--){const a=n[e],v=a.inputs;for(let u=0;u<a.outputs.length;u++)if(S[a.outputs[u].id]){for(const o in v)S[v[o].id]=!0,i[a.id]=!0;break}}const g=[];for(let e=0;e<n.length;e++){const a=n[e];if(d[a.id]&&i[a.id]){const v={};for(const o in a.inputs){const c=a.inputs[o];r[c.id]&&(v[o]=c)}const u=Object.assign({},a);u.inputs=v,u.outputs=a.outputs,g.push(u)}}return g}function S6(n,t,s,r){for(let d=t.length-1;d>=0;d--){const S=t[d],i=[];if(S.outputs.forEach(e=>{const a=n[e.id];a!=null?i.push(a):i.push(null)}),S.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${S.kernelName}.`);const g=S.gradient(i);for(const e in S.inputs){if(!(e in g))throw new Error(`Cannot backprop through input ${e}. Available gradients found: ${Object.keys(g)}.`);const a=s(()=>g[e]());if(a.dtype!=="float32")throw new Error(`Error in gradient for op ${S.kernelName}. The gradient of input ${e} must have 'float32' dtype, but has '${a.dtype}'`);const v=S.inputs[e];if(!ee(a.shape,v.shape))throw new Error(`Error in gradient for op ${S.kernelName}. The gradient of input '${e}' has shape '${a.shape}', which does not match the shape of the input '${v.shape}'`);if(n[v.id]==null)n[v.id]=a;else{const u=n[v.id];n[v.id]=r(u,a),u.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AC=20,fu=3,Bv=7;function C6(n,t,s,r){const d=kt(t),S=w6(n,t,s,d),i=t.length,g=Bf(n,t,s,d,S),e=["Tensor"];return r&&(e.push(`  dtype: ${s}`),e.push(`  rank: ${i}`),e.push(`  shape: [${t}]`),e.push("  values:")),e.push(g.map(a=>"    "+a).join(`
`)),e.join(`
`)}function w6(n,t,s,r){const d=mt(t),S=r[r.length-1],i=new Array(S).fill(0),g=t.length,e=s==="complex64"?Su(n):n;if(g>1)for(let a=0;a<d/S;a++){const v=a*S;for(let u=0;u<S;u++)i[u]=Math.max(i[u],Tu(e[v+u],0,s).length)}return i}function Tu(n,t,s){let r;return Array.isArray(n)?r=`${parseFloat(n[0].toFixed(Bv))} + ${parseFloat(n[1].toFixed(Bv))}j`:Sh(n)?r=`'${n}'`:s==="bool"?r=Vb(n):r=parseFloat(n.toFixed(Bv)).toString(),il(r,t)}function Vb(n){return n===0?"false":"true"}function Bf(n,t,s,r,d,S=!0){const i=s==="complex64"?2:1,g=t[0],e=t.length;if(e===0){if(s==="complex64"){const f=Su(n);return[Tu(f[0],0,s)]}return s==="bool"?[Vb(n[0])]:[n[0].toString()]}if(e===1){if(g>AC){const m=fu*i;let h=Array.from(n.slice(0,m)),p=Array.from(n.slice((g-fu)*i,g*i));return s==="complex64"&&(h=Su(h),p=Su(p)),["["+h.map((y,x)=>Tu(y,d[x],s)).join(", ")+", ..., "+p.map((y,x)=>Tu(y,d[g-fu+x],s)).join(", ")+"]"]}return["["+(s==="complex64"?Su(n):Array.from(n)).map((m,h)=>Tu(m,d[h],s)).join(", ")+"]"]}const a=t.slice(1),v=r.slice(1),u=r[0]*i,o=[];if(g>AC){for(let f=0;f<fu;f++){const m=f*u,h=m+u;o.push(...Bf(n.slice(m,h),a,s,v,d,!1))}o.push("...");for(let f=g-fu;f<g;f++){const m=f*u,h=m+u;o.push(...Bf(n.slice(m,h),a,s,v,d,f===g-1))}}else for(let f=0;f<g;f++){const m=f*u,h=m+u;o.push(...Bf(n.slice(m,h),a,s,v,d,f===g-1))}const c=e===2?",":"";o[0]="["+(g>0?o[0]+c:"");for(let f=1;f<o.length-1;f++)o[f]=" "+o[f]+c;let l=`,
`;for(let f=2;f<e;f++)l+=`
`;return o[o.length-1]=" "+o[o.length-1]+"]"+(S?"":l),o}function Su(n){const t=[];for(let s=0;s<n.length;s+=2)t.push([n[s],n[s+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nn{constructor(t,s,r){if(this.dtype=s,this.shape=t.slice(),this.size=mt(t),r!=null){const d=r.length;q(d===this.size,()=>`Length of values '${d}' does not match the size inferred by the shape '${this.size}'.`)}if(s==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Ge(s,this.size),this.strides=kt(t)}set(t,...s){s.length===0&&(s=[0]),q(s.length===this.rank,()=>`The number of provided coordinates (${s.length}) must match the rank (${this.rank})`);const r=this.locToIndex(s);this.values[r]=t}get(...t){t.length===0&&(t=[0]);let s=0;for(const d of t){if(d<0||d>=this.shape[s]){const S=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(S)}s++}let r=t[t.length-1];for(let d=0;d<t.length-1;++d)r+=this.strides[d]*t[d];return this.values[r]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let s=t[t.length-1];for(let r=0;r<t.length-1;++r)s+=this.strides[r]*t[r];return s}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const s=new Array(this.shape.length);for(let r=0;r<s.length-1;++r)s[r]=Math.floor(t/this.strides[r]),t-=s[r]*this.strides[r];return s[s.length-1]=t,s}get rank(){return this.shape.length}toTensor(){return gi().makeTensor(this.values,this.shape,this.dtype)}}let gi=null,$o=null;function E6(n){gi=n}function A6(n){$o=n}class be{constructor(t,s,r,d){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=s||"float32",this.size=mt(t),this.strides=kt(t),this.dataId=r,this.id=d,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return $o.buffer(this.shape,this.dtype,t)}bufferSync(){return $o.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return _s(this.shape,t,this.dtype==="complex64")}arraySync(){return _s(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=gi().read(this.dataId);if(this.dtype==="string"){const s=await t;try{return s.map(r=>ta(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),gi().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=gi().readSync(this.dataId);if(this.dtype==="string")try{return t.map(s=>ta(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await gi().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(gi().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return $o.print(this,t)}clone(){return this.throwIfDisposed(),$o.clone(this)}toString(t=!1){const s=this.dataSync();return C6(s,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),$o.cast(this,t)}variable(t=!0,s,r){return this.throwIfDisposed(),gi().makeVariable(this,t,s,r)}}Object.defineProperty(be,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function vt(){return ny("Tensor",()=>be)}vt();class yd extends be{constructor(t,s,r,d){super(t.shape,t.dtype,t.dataId,d),this.trainable=s,this.name=r}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!ee(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);gi().disposeTensor(this),this.dataId=t.dataId,gi().incRef(this,null)}dispose(){gi().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(yd,Symbol.hasInstance,{value:n=>n instanceof be&&n.assign!=null&&n.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var bC;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(bC||(bC={}));var c0;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(c0||(c0={}));var f0;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(f0||(f0={}));var d0;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(d0||(d0={}));var p0;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(p0||(p0={}));const b6={float32:d0,int32:c0,bool:f0,complex64:p0};function ps(n,t){if(n==="string"||t==="string"){if(n==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${n} with ${t}`)}return b6[n][t]}function l1(n){return ps(n,"int32")}function Gb(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function Ub(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ze(n,t){if(n.dtype===t.dtype)return[n,t];const s=ps(n.dtype,t.dtype);return[n.cast(s),t.cast(s)]}function I6(n,t){q(n.dtype===t.dtype,()=>`The dtypes of the first(${n.dtype}) and second(${t.dtype}) input must match`)}function Wb(n){const t=[];return Xb(n,t,new Set),t}function Xb(n,t,s){if(n==null)return;if(n instanceof be){t.push(n);return}if(!R6(n))return;const r=n;for(const d in r){const S=r[d];s.has(S)||(s.add(S),Xb(S,t,s))}}function R6(n){return Array.isArray(n)||typeof n=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kv(n){return n.kernelName!=null}class IC{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class Sl{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new IC}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let s=0;s<t.length;s++){const r=t[s];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:s}=this.initializeBackendsAndReturnBest();if(s)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:s}=this.initializeBackend(t);if(s)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,s,r=1){return t in this.registryFactory?(Cs(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:s,priority:r},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:s,asyncInit:r}=this.initializeBackend(t);if(!(r?await s:s))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new g6(this.backendInstance),!0}setupRegisteredKernels(){xC(this.backendName).forEach(s=>{s.setupFunc!=null&&s.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){xC(t).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[t])})}initializeBackend(t){const s=this.registryFactory[t];if(s==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=s.factory();if(r&&!(r instanceof _x)&&typeof r.then=="function"){const d=++this.pendingBackendInitId,S=r.then(i=>d<this.pendingBackendInitId?!1:(this.registry[t]=i,this.pendingBackendInit=null,!0)).catch(i=>(d<this.pendingBackendInitId||(this.pendingBackendInit=null,Cs(`Initialization of backend ${t} failed`),Cs(i.stack||i.message)),!1));return this.pendingBackendInit=S,{success:S,asyncInit:!0}}else return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(r){return Cs(`Initialization of backend ${t} failed`),Cs(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,s)=>this.registryFactory[s].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let s=0;s<t.length;s++){const r=t[s],{success:d,asyncInit:S}=this.initializeBackend(r);if(S||d)return{name:r,asyncInit:S}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,s){const r=this.state.tensorInfo.get(s),d=r.backend,S=this.readSync(s),i=d.refCount(s);d.disposeData(s,!0),r.backend=t,t.move(s,S,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,s){let r=null;if(s==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");s=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof s!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}let d;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(d),()=>(d=s(),d instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),d))}scopedRun(t,s,r){t();try{const d=r();return s(),d}catch(d){throw s(),d}}nextTensorId(){return Sl.nextTensorId++}nextVariableId(){return Sl.nextVariableId++}clone(t){const s=it.runKernel(Uh,{x:t}),r={x:t},d=i=>({x:()=>{const g="float32",e={x:i},a={dtype:g};return it.runKernel(Nh,e,a)}}),S=[];return this.addTapeNode(this.state.activeScope.name,r,[s],d,S,{}),s}runKernel(t,s,r){if(this.backendName==null&&this.backend,!(vC(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:s,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,s,r){const d=this.backend.numDataIds();let S=0;r.forEach(e=>{S+=e.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],g=d-s-S-i;if(g>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${g} data ids) after running '${t}'`)}runKernelFunc(t){let s,r=[];const d=this.isTapeOn(),S=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let g;this.backendName==null&&this.backend;let e;const a=kv(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(kv(t)){const{kernelName:l,inputs:f,attrs:m}=t;this.backendName==null&&this.backend;const h=vC(l,this.backendName);q(h!=null,()=>`Cannot find registered kernel '${l}' for backend '${this.backendName}'`),g=()=>{const p=this.backend.numDataIds();e=h.kernelFunc({inputs:f,attrs:m,backend:this.backend});const y=Array.isArray(e)?e:[e];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,p,y);const x=y.map(T=>T.rank!=null?T:this.makeTensorFromTensorInfo(T));if(d){const T=this.getTensorsForGradient(l,f,x);r=this.saveTensorsForBackwardMode(T)}return x}}else{const{forwardFunc:l}=t,f=m=>{d&&(r=m.map(h=>this.keep(this.clone(h))))};g=()=>{const m=this.backend.numDataIds();e=this.tidy(()=>l(this.backend,f));const h=Array.isArray(e)?e:[e];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(a,m,h),h}}const{inputs:v,attrs:u}=t,o=kv(t)?null:t.backwardsFunc;let c;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?s=g():(c=this.profiler.profileKernel(a,v,()=>g()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(c),s=c.outputs)}),d&&this.addTapeNode(a,v,s,o,r,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-S,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(v).map(l=>v[l]!=null?v[l].shape:null),outputShapes:s.map(l=>l.shape),kernelTimeMs:c.timeMs,extraInfo:c.extraInfo}),Array.isArray(e)?s:s[0]}saveTensorsForBackwardMode(t){return t.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(t,s,r){const d=gC(t);if(d!=null){const S=d.inputsToSave||[],i=d.outputsToSave||[];let g;d.saveAllInputs?(q(Array.isArray(s),()=>"saveAllInputs is true, expected inputs to be an array."),g=Object.keys(s).map(a=>s[a])):g=S.map(a=>s[a]);const e=r.filter((a,v)=>i[v]);return g.concat(e)}return[]}makeTensor(t,s,r,d){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",d=d||this.backend;let S=t;r==="string"&&Sh(t[0])&&(S=t.map(e=>Zr(e)));const i=d.write(S,s,r),g=new be(s,r,i,this.nextTensorId());if(this.trackTensor(g,d),r==="string"){const e=this.state.tensorInfo.get(i),a=j5(S);this.state.numBytes+=a-e.bytes,e.bytes=a}return g}makeTensorFromDataId(t,s,r,d){r=r||"float32";const S={dataId:t,shape:s,dtype:r};return this.makeTensorFromTensorInfo(S,d)}makeTensorFromTensorInfo(t,s){const{dataId:r,shape:d,dtype:S}=t,i=new be(d,S,r,this.nextTensorId());return this.trackTensor(i,s),i}makeVariable(t,s=!0,r,d){r=r||this.nextVariableId().toString(),d!=null&&d!==t.dtype&&(t=t.cast(d));const S=new yd(t,s,r,this.nextTensorId());if(this.state.registeredVariables[S.name]!=null)throw new Error(`Variable with name ${S.name} was already registered`);return this.state.registeredVariables[S.name]=S,this.incRef(S,this.backend),S}trackTensor(t,s){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let r=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(r=t.size*dd(t.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:s||this.backend,dtype:t.dtype,shape:t.shape,bytes:r})),t instanceof yd||this.track(t)}incRef(t,s){this.trackTensor(t,s),this.backend.incRef(t.dataId)}removeDataId(t,s){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===s&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const s=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=s.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const r=t.size*dd(t.dtype);this.state.numBytes-=r}s.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,s.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const s=this.state.registeredVariables[t];this.disposeVariable(s)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const s=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(d=>d.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-s,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const d of this.state.activeProfile.kernels)d.kernelTimeMs=await d.kernelTimeMs,d.extraInfo=await d.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,s,r,d,S,i){const g={id:this.state.nextTapeNodeId++,kernelName:t,inputs:s,outputs:r,saved:S},e=gC(t);e!=null&&(d=e.gradFunc),d!=null&&(g.gradient=a=>(a=a.map((v,u)=>{if(v==null){const o=r[u],c=Pn(o.size,o.dtype);return this.makeTensor(c,o.shape,o.dtype)}return v}),d(a.length>1?a:a[0],S,i))),this.state.activeTape.push(g)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const s={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(s.name=t),this.state.scopeStack.push(s),this.state.activeScope=s}endScope(t){const s=Wb(t),r=new Set(s.map(S=>S.id));for(let S=0;S<this.state.activeScope.track.length;S++){const i=this.state.activeScope.track[S];!i.kept&&!r.has(i.id)&&i.dispose()}const d=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],s.forEach(S=>{!S.kept&&S.scopeId===d.id&&this.track(S)})}gradients(t,s,r,d=!1){if(q(s.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const S=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));q(S instanceof be,()=>"The result y returned by f() must be a tensor.");const i=T6(this.state.activeTape,s,S);if(!d&&i.length===0&&s.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const g={};g[S.id]=r??N6(S.shape),S6(g,i,a=>this.tidy(a),P6);const e=s.map(a=>g[a.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(a=>{for(const v of a.saved)v.dispose()}),this.state.activeTape=null),{value:S,grads:e}})}customGrad(t){return q(i0(t),()=>"The f passed in customGrad(f) must be a function."),(...s)=>{q(s.every(g=>g instanceof be),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const d={};s.forEach((g,e)=>{d[e]=g});const S=(g,e)=>(r=t(...s,e),q(r.value instanceof be,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),q(i0(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(g,e)=>{const a=r.gradFunc(g,e),v=Array.isArray(a)?a:[a];q(v.length===s.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),q(v.every(o=>o instanceof be),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const u={};return v.forEach((o,c)=>{u[c]=()=>o}),u};return this.runKernelFunc({forwardFunc:S,backwardsFunc:i,inputs:d})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,s){return this.state.tensorInfo.get(t).backend.readToGPU(t,s)}async time(t){const s=jn(),r=await this.backend.time(t);return r.wallMs=jn()-s,r}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new IC;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Sl.nextTensorId=0;Sl.nextVariableId=0;function N6(n){const t=ey(mt(n),"float32");return it.makeTensor(t,n,"float32")}function Hb(){const n=Rb();if(n._tfengine==null){const t=new J5(n);n._tfengine=new Sl(t)}return e6(n._tfengine.ENV),E6(()=>n._tfengine),n._tfengine}const it=Hb();function P6(n,t){const s={a:n,b:t};return it.runKernel(zl,s)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6(){return typeof navigator<"u"&&navigator!=null}function Yb(n){if(n||F6()){if(n||(n=navigator),n.product==="ReactNative")return!0;const t=n.userAgent||n.vendor||(typeof window<"u"?window.opera:"");if(!t){const s=n;return s.userAgentData&&s.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Kb(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qn=dt();qn.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});qn.registerFlag("IS_BROWSER",()=>Kb());qn.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");qn.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));qn.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));qn.registerFlag("PROD",()=>!1);qn.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>qn.getBool("DEBUG"));qn.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);qn.registerFlag("IS_TEST",()=>!1);qn.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>qn.getBool("DEBUG"));qn.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);qn.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);qn.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ma(n,t){let s=n;if(ii(n))return t==="string"?[]:[n.length];if(Gb(n)){const d=n.channels||"RGBA";return[n.height,n.width*d.length]}else if(Ub(n))return[n.buffer.size/(t==null?4:dd(t))];if(!Array.isArray(n))return[];const r=[];for(;Array.isArray(s)||ii(s)&&t!=="string";)r.push(s.length),s=s[0];return Array.isArray(n)&&dt().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&jb(n,r,[]),r}function jb(n,t,s){if(s=s||[],!Array.isArray(n)&&!ii(n)){q(t.length===0,()=>`Element arr[${s.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}q(t.length>0,()=>`Element arr[${s.join("][")}] should be a primitive, but is an array of ${n.length} elements`),q(n.length===t[0],()=>`Element arr[${s.join("][")}] should have ${t[0]} elements, but has ${n.length} elements`);const r=t.slice(1);for(let d=0;d<n.length;++d)jb(n[d],r,s.concat(d))}function RC(n,t,s,r){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==t||n==="numeric"&&t==="string")throw new Error(`Argument '${s}' passed to '${r}' must be ${n} tensor, but got ${t} tensor`)}}function _(n,t,s,r="numeric"){if(n instanceof be)return RC(r,n.dtype,t,s),n;let d=Bl(n);if(d!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(d=r),RC(r,d,t,s),n==null||!ii(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const e=n==null?"null":n.constructor.name;throw new Error(`Argument '${t}' passed to '${s}' must be a Tensor or TensorLike, but got '${e}'`)}const S=ma(n,d);!ii(n)&&!Array.isArray(n)&&(n=[n]);const g=d!=="string"?fo(n,d):qa(n,[],!0);return it.makeTensor(g,S,d)}function Td(n,t,s,r="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${t} passed to ${s} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((S,i)=>_(S,`${t}[${i}]`,s,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zb="__op";function st(n){const t=Object.keys(n);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let s=t[0];const r=n[s];s.endsWith("_")&&(s=s.substring(0,s.length-1)),s=s+Zb;const d=(...S)=>{it.startScope(s);try{const i=r(...S);return Ja(i)&&console.error("Cannot return a Promise inside of tidy."),it.endScope(i),i}catch(i){throw it.endScope(null),i}};return Object.defineProperty(d,"name",{value:s,configurable:!0}),d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D6(n,t){const s=_(n,"real","complex"),r=_(t,"imag","complex");xs(s.shape,r.shape,`real and imag shapes, ${s.shape} and ${r.shape}, must match in call to tf.complex().`);const d={real:s,imag:r};return it.runKernel(uy,d)}const ea=st({complex_:D6});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function va(n,t,s,r){if(r==null)r=Bl(n);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Ub(n)||Gb(n)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return it.backend.createTensorFromGPUData(n,t||s,r)}if(!ii(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){Ls(t);const d=mt(t),S=mt(s);q(d===S,()=>`Based on the provided shape, [${t}], the tensor should have ${d} values but has ${S}`);for(let i=0;i<s.length;++i){const g=s[i],e=i===s.length-1?g!==mt(t.slice(i)):!0;q(s[i]===t[i]||!e,()=>`Error creating a new Tensor. Inferred shape (${s}) does not match the provided shape (${t}). `)}}return!ii(n)&&!Array.isArray(n)&&(n=[n]),t=t||s,n=r!=="string"?fo(n,r):qa(n,[],!0),it.makeTensor(n,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ti(n,t,s){const r=ma(n,s);return va(n,t,r,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m0={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Ni{static join(t){return new Ni(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>ii(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let s=0;for(let r=0;r<t.length;r++){const d=t[r];r!==t.length-1&&d.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const S=s+d.byteLength;this.shards.push({buffer:d,start:s,end:S}),s=S}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,s=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,s=isNaN(Number(s))?0:s,t=Math.max(0,t),s=Math.min(this.byteLength,s),s<=t)return new ArrayBuffer(0);const r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);const d=s-t,S=new ArrayBuffer(d),i=new Uint8Array(S);let g=0;for(let e=r;e<this.shards.length;e++){const a=this.shards[e],u=t+g-a.start,o=g,l=Math.min(s,a.end)-a.start,f=new Uint8Array(a.buffer,u,l-u);if(i.set(f,o),g+=f.length,s<a.end)break}return S}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function s(d){return t<d.start?-1:t>=d.end?1:0}if(s(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=O6(this.shards,s);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function O6(n,t){let s=0,r=n.length;for(;s<=r;){const d=Math.floor((r-s)/2)+s,S=t(n[d]);if(S===0)return d;S<0?r=d:s=d+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sd=4;async function v0(n,t){const s=[],r=[],d=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);for(let i=0;i<d.length;++i){const g=d[i],e=Array.isArray(n)?n[i].tensor:n[g];if(e.dtype!=="float32"&&e.dtype!=="int32"&&e.dtype!=="bool"&&e.dtype!=="string"&&e.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${g}': ${e.dtype}`);const a={name:g,shape:e.shape,dtype:e.dtype};if(e.dtype==="string"){const v=new Promise(async u=>{const o=await e.bytes(),c=o.reduce((m,h)=>m+h.length,0)+Sd*o.length,l=new Uint8Array(c);let f=0;for(let m=0;m<o.length;m++){const h=o[m],p=new Uint8Array(new Uint32Array([h.length]).buffer);l.set(p,f),f+=Sd,l.set(h,f),f+=h.length}u(l)});r.push(v)}else r.push(e.data());t!=null&&(a.group=t),s.push(a)}const S=await Promise.all(r);return{data:L6(S),specs:s}}function Qb(n,t){const s=new Ni(n),r={};let d,S=0;for(const i of t){const g=i.name,e=i.dtype,a=i.shape,v=mt(a);let u;if("quantization"in i){const o=i.quantization;if(o.dtype==="uint8"||o.dtype==="uint16"){if(!("min"in o&&"scale"in o))throw new Error(`Weight ${i.name} with quantization ${o.dtype} doesn't have corresponding metadata min and scale.`)}else if(o.dtype==="float16"){if(e!=="float32")throw new Error(`Weight ${i.name} is quantized with ${o.dtype} which only supports weights of type float32 not ${e}.`)}else throw new Error(`Weight ${i.name} has unknown quantization dtype ${o.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=m0[o.dtype],l=s.slice(S,S+v*c),f=o.dtype==="uint8"?new Uint8Array(l):new Uint16Array(l);if(e==="float32")if(o.dtype==="uint8"||o.dtype==="uint16"){u=new Float32Array(f.length);for(let m=0;m<f.length;m++){const h=f[m];u[m]=h*o.scale+o.min}}else if(o.dtype==="float16")d===void 0&&(d=V6()),u=d(f);else throw new Error(`Unsupported quantization type ${o.dtype} for weight type float32.`);else if(e==="int32"){if(o.dtype!=="uint8"&&o.dtype!=="uint16")throw new Error(`Unsupported quantization type ${o.dtype} for weight type int32.`);u=new Int32Array(f.length);for(let m=0;m<f.length;m++){const h=f[m];u[m]=Math.round(h*o.scale+o.min)}}else throw new Error(`Unsupported dtype in weight '${g}': ${e}`);S+=v*c}else if(e==="string"){const o=mt(i.shape);u=[];for(let c=0;c<o;c++){const l=new Uint32Array(s.slice(S,S+Sd))[0];S+=Sd;const f=new Uint8Array(s.slice(S,S+l));u.push(f),S+=l}}else{const o=m0[e],c=s.slice(S,S+v*o);if(e==="float32")u=new Float32Array(c);else if(e==="int32")u=new Int32Array(c);else if(e==="bool")u=new Uint8Array(c);else if(e==="complex64"){u=new Float32Array(c);const l=new Float32Array(u.length/2),f=new Float32Array(u.length/2);for(let p=0;p<l.length;p++)l[p]=u[p*2],f[p]=u[p*2+1];const m=ti(l,a,"float32"),h=ti(f,a,"float32");r[g]=ea(m,h),m.dispose(),h.dispose()}else throw new Error(`Unsupported dtype in weight '${g}': ${e}`);S+=v*o}e!=="complex64"&&(r[g]=ti(u,a,e))}return r}function L6(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let t=0;const s=[];n.forEach(S=>{if(t+=S.byteLength,s.push(S.byteLength===S.buffer.byteLength?S:new S.constructor(S)),!(S instanceof Float32Array||S instanceof Int32Array||S instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${S.constructor.name}`)});const r=new Uint8Array(t);let d=0;return s.forEach(S=>{r.set(new Uint8Array(S.buffer),d),d+=S.byteLength}),r.buffer}const u1=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function NC(n){return u1?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function M6(n){if(u1)return Buffer.from(n).toString("base64");const t=new Uint8Array(n);let s="";for(let r=0,d=t.length;r<d;r++)s+=String.fromCharCode(t[r]);return btoa(s)}function $6(n){if(u1){const r=Buffer.from(n,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const t=atob(n),s=new Uint8Array(t.length);for(let r=0;r<t.length;++r)s.set([t.charCodeAt(r)],r);return s.buffer}function Jb(n){return Ni.join(n)}function PC(n){const t="/";for(n=n.trim();n.endsWith(t);)n=n.slice(0,n.length-1);const s=n.split(t);return s[s.length-1]}function qb(n,t){const s={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:t};return n.signature!=null&&(s.signature=n.signature),n.userDefinedMetadata!=null&&(s.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(s.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(s.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(s.trainingConfig=n.trainingConfig),s}function _b(n,t,s){const r={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy};if(n.trainingConfig!=null&&(r.trainingConfig=n.trainingConfig),n.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!s)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=s}return n.signature!=null&&(r.signature=n.signature),n.userDefinedMetadata!=null&&(r.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(r.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(r.initializerSignature=n.initializerSignature),r}async function h1(n,t){let s,r;return n.weightsManifest!=null&&([s,r]=await t(n.weightsManifest)),_b(n,s,r)}function gc(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:NC(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:NC(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new Ni(n.weightData).byteLength}}function tI(n){const t=[];for(const s of n)t.push(...s.weights);return t}function B6(){const n=s=>{let r=s<<13,d=0;for(;!(r&8388608);)d-=8388608,r<<=1;return r&=-8388609,d+=947912704,r|d},t=new Uint32Array(2048);t[0]=0;for(let s=1;s<1024;s++)t[s]=n(s);for(let s=1024;s<2048;s++)t[s]=939524096+(s-1024<<13);return t}function k6(){const n=new Uint32Array(64);n[0]=0,n[31]=1199570944,n[32]=2147483648,n[63]=3347054592;for(let t=1;t<31;t++)n[t]=t<<23;for(let t=33;t<63;t++)n[t]=2147483648+(t-32<<23);return n}function z6(){const n=new Uint32Array(64);for(let t=0;t<64;t++)n[t]=1024;return n[0]=n[32]=0,n}function V6(){const n=B6(),t=k6(),s=z6();return r=>{const d=new ArrayBuffer(4*r.length),S=new Uint32Array(d);for(let i=0;i<r.length;i++){const g=r[i],e=n[s[g>>10]+(g&1023)]+t[g>>10];S[i]=e}return new Float32Array(d)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pe{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Pe.instance==null&&(Pe.instance=new Pe),Pe.instance}static registerSaveRouter(t){Pe.getInstance().saveRouters.push(t)}static registerLoadRouter(t){Pe.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return Pe.getHandlers(t,"save")}static getLoadHandlers(t,s){return Pe.getHandlers(t,"load",s)}static getHandlers(t,s,r){const d=[];return(s==="load"?Pe.getInstance().loadRouters:Pe.getInstance().saveRouters).forEach(i=>{const g=i(t,r);g!==null&&d.push(g)}),d}}const G6=n=>Pe.registerSaveRouter(n),U6=n=>Pe.registerLoadRouter(n),eI=n=>Pe.getSaveHandlers(n),W6=(n,t)=>Pe.getLoadHandlers(n,t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g0="tensorflowjs",x0=1,za="models_store",Br="model_info_store";function nI(){if(!dt().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,t=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function y0(n){const t=n.result;t.createObjectStore(za,{keyPath:"modelPath"}),t.createObjectStore(Br,{keyPath:"modelPath"})}class _a{constructor(t){if(this.indexedDB=nI(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,s){return new Promise((r,d)=>{const S=this.indexedDB.open(g0,x0);S.onupgradeneeded=()=>y0(S),S.onsuccess=()=>{const i=S.result;if(s==null){const g=i.transaction(za,"readonly"),a=g.objectStore(za).get(this.modelPath);a.onsuccess=()=>{if(a.result==null)return i.close(),d(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(a.result.modelArtifacts)},a.onerror=v=>(i.close(),d(a.error)),g.oncomplete=()=>i.close()}else{s.weightData=Ni.join(s.weightData);const g=gc(s),e=i.transaction(Br,"readwrite");let a=e.objectStore(Br),v;try{v=a.put({modelPath:this.modelPath,modelArtifactsInfo:g})}catch(o){return d(o)}let u;v.onsuccess=()=>{u=i.transaction(za,"readwrite");const o=u.objectStore(za);let c;try{c=o.put({modelPath:this.modelPath,modelArtifacts:s,modelArtifactsInfo:g})}catch(l){return d(l)}c.onsuccess=()=>r({modelArtifactsInfo:g}),c.onerror=l=>{a=e.objectStore(Br);const f=a.delete(this.modelPath);f.onsuccess=()=>(i.close(),d(c.error)),f.onerror=m=>(i.close(),d(c.error))}},v.onerror=o=>(i.close(),d(v.error)),e.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}}},S.onerror=i=>d(S.error)})}}_a.URL_SCHEME="indexeddb://";const sI=n=>dt().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(_a.URL_SCHEME)?X6(n.slice(_a.URL_SCHEME.length)):null;Pe.registerSaveRouter(sI);Pe.registerLoadRouter(sI);function X6(n){return new _a(n)}function H6(n){return n.startsWith(_a.URL_SCHEME)?n.slice(_a.URL_SCHEME.length):n}class Y6{constructor(){this.indexedDB=nI()}async listModels(){return new Promise((t,s)=>{const r=this.indexedDB.open(g0,x0);r.onupgradeneeded=()=>y0(r),r.onsuccess=()=>{const d=r.result,S=d.transaction(Br,"readonly"),g=S.objectStore(Br).getAll();g.onsuccess=()=>{const e={};for(const a of g.result)e[a.modelPath]=a.modelArtifactsInfo;t(e)},g.onerror=e=>(d.close(),s(g.error)),S.oncomplete=()=>d.close()},r.onerror=d=>s(r.error)})}async removeModel(t){return t=H6(t),new Promise((s,r)=>{const d=this.indexedDB.open(g0,x0);d.onupgradeneeded=()=>y0(d),d.onsuccess=()=>{const S=d.result,i=S.transaction(Br,"readwrite"),g=i.objectStore(Br),e=g.get(t);let a;e.onsuccess=()=>{if(e.result==null)return S.close(),r(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const v=g.delete(t),u=()=>{a=S.transaction(za,"readwrite");const c=a.objectStore(za).delete(t);c.onsuccess=()=>s(e.result.modelArtifactsInfo),c.onerror=l=>r(e.error)};v.onsuccess=u,v.onerror=o=>(u(),S.close(),r(e.error))}},e.onerror=v=>(S.close(),r(e.error)),i.oncomplete=()=>{a==null?S.close():a.oncomplete=()=>S.close()}},d.onerror=S=>r(d.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ur="/",Bo="tensorflowjs_models",iI="info",K6="model_topology",j6="weight_specs",Z6="weight_data",Q6="model_metadata";function rI(n){return{info:[Bo,n,iI].join(ur),topology:[Bo,n,K6].join(ur),weightSpecs:[Bo,n,j6].join(ur),weightData:[Bo,n,Z6].join(ur),modelMetadata:[Bo,n,Q6].join(ur)}}function aI(n){for(const t of Object.values(n))window.localStorage.removeItem(t)}function J6(n){const t=n.split(ur);if(t.length<3)throw new Error(`Invalid key format: ${n}`);return t.slice(1,t.length-1).join(ur)}function q6(n){return n.startsWith(to.URL_SCHEME)?n.slice(to.URL_SCHEME.length):n}class to{constructor(t){if(!dt().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=rI(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const s=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),d=gc(t),S=Ni.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(d)),this.LS.setItem(this.keys.topology,s),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,M6(S));const i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:d}}catch{throw aI(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${d.modelTopologyBytes}, weightSpecsBytes=${d.weightSpecsBytes}, weightDataBytes=${d.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const s={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);s.modelTopology=r;const d=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(d==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);s.weightSpecs=d;const S=this.LS.getItem(this.keys.modelMetadata);if(S!=null){const g=JSON.parse(S);s.format=g.format,s.generatedBy=g.generatedBy,s.convertedBy=g.convertedBy,g.signature!=null&&(s.signature=g.signature),g.userDefinedMetadata!=null&&(s.userDefinedMetadata=g.userDefinedMetadata),g.modelInitializer!=null&&(s.modelInitializer=g.modelInitializer),g.initializerSignature!=null&&(s.initializerSignature=g.initializerSignature),g.trainingConfig!=null&&(s.trainingConfig=g.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return s.weightData=$6(i),s}}to.URL_SCHEME="localstorage://";const oI=n=>dt().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(to.URL_SCHEME)?_6(n.slice(to.URL_SCHEME.length)):null;Pe.registerSaveRouter(oI);Pe.registerLoadRouter(oI);function _6(n){return new to(n)}class t${constructor(){q(dt().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),q(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},s=Bo+ur,r=ur+iI;for(let d=0;d<this.LS.length;++d){const S=this.LS.key(d);if(S.startsWith(s)&&S.endsWith(r)){const i=J6(S);t[i]=JSON.parse(this.LS.getItem(S))}}return t}async removeModel(t){t=q6(t);const s=rI(t);if(this.LS.getItem(s.info)==null)throw new Error(`Cannot find model at path '${t}'`);const r=JSON.parse(this.LS.getItem(s.info));return aI(s),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const al="://";class $n{constructor(){this.managers={}}static getInstance(){return $n.instance==null&&($n.instance=new $n),$n.instance}static registerManager(t,s){q(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(al)&&(t=t.slice(0,t.indexOf(al))),q(t.length>0,()=>"scheme must not be an empty string.");const r=$n.getInstance();q(r.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),r.managers[t]=s}static getManager(t){const s=$n.getInstance().managers[t];if(s==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return s}static getSchemes(){return Object.keys($n.getInstance().managers)}}function kf(n){if(n.indexOf(al)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${$n.getSchemes().join(",")}`);return{scheme:n.split(al)[0],path:n.split(al)[1]}}async function lI(n,t,s=!1){q(n!==t,()=>`Old path and new path are the same: '${n}'`);const r=Pe.getLoadHandlers(n);q(r.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),q(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${n}.`);const d=r[0],S=Pe.getSaveHandlers(t);q(S.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),q(S.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);const i=S[0],g=kf(n).scheme,e=kf(n).path,a=g===kf(n).scheme,v=await d.load();s&&a&&await $n.getManager(g).removeModel(e);const u=await i.save(v);return s&&!a&&await $n.getManager(g).removeModel(e),u.modelArtifactsInfo}async function e$(){const n=$n.getSchemes(),t={};for(const s of n){const r=await $n.getManager(s).listModels();for(const d in r){const S=s+al+d;t[S]=r[d]}}return t}async function n$(n){const t=kf(n);return $n.getManager(t.scheme).removeModel(t.path)}async function s$(n,t){return lI(n,t,!1)}async function i$(n,t){return lI(n,t,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r${constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,s){return fetch(t,s)}now(){return performance.now()}encode(t,s){if(s!=="utf-8"&&s!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${s}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,s){return new TextDecoder(s).decode(t)}setTimeoutCustom(t,s){if(typeof window>"u"||!dt().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,s);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},s),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const d=this.functionRefs[r.data.index];d(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return Fb(t)}}if(dt().get("IS_BROWSER")){dt().setPlatform("browser",new r$);try{$n.registerManager(to.URL_SCHEME,new t$)}catch{}try{$n.registerManager(_a.URL_SCHEME,new Y6)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a$={importFetch:()=>require("node-fetch")};let zv;class o${constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,s){return dt().global.fetch!=null?dt().global.fetch(t,s):(zv==null&&(zv=a$.importFetch()),zv(t,s))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,s){if(s!=="utf-8"&&s!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${s}`);return this.textEncoder.encode(t)}decode(t,s){return t.length===0?"":new this.util.TextDecoder(s).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}dt().get("IS_NODE")&&!dt().get("IS_BROWSER")&&dt().setPlatform("node",new o$);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jt(n,t="float32",s){return t=t||"float32",Ls(n),new nn(n,t,s)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$(n,t){const s=_(n,"x","cast");if(!K5(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&s.dtype!=="string"||t!=="string"&&s.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:s},d={dtype:t};return it.runKernel(Nh,r,d)}const Nt=st({cast_:l$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u$(n){const s={x:_(n,"x","clone","string_or_numeric")};return it.runKernel(Uh,s)}const dr=st({clone_:u$});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uI(n,t=!1){console.log(n.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Hb();const h$={buffer:jt,cast:Nt,clone:dr,print:uI};A6(h$);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oi(){return it}function T0(){return it.memory()}function ft(n,t){return it.tidy(n,t)}function Zt(n){Wb(n).forEach(s=>s.dispose())}function fn(n){return it.keep(n)}function hI(n,t,s=1){return it.registerBackend(n,t,s)}function c$(){return it.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f$(n,t){let s=_(n,"a","add"),r=_(t,"b","add");[s,r]=ze(s,r);const d={a:s,b:r};return it.runKernel(zl,d)}const St=st({add_:f$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d$(n,t){let s=_(n,"a","floorDiv"),r=_(t,"b","floorDiv");[s,r]=ze(s,r);const d={a:s,b:r};return it.runKernel(Vh,d)}const c1=st({floorDiv_:d$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p$(n,t){let s=_(n,"a","div"),r=_(t,"b","div");if([s,r]=ze(s,r),s.dtype==="int32"&&r.dtype==="int32")return c1(s,r);const d={a:s,b:r},S={};return it.runKernel(Lh,d,S)}const $t=st({div_:p$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m$(n,t){let s=_(n,"a","mul"),r=_(t,"b","mul");[s,r]=ze(s,r);const d={a:s,b:r};return it.runKernel(Jh,d)}const rt=st({mul_:m$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v$(n){const t=_(n,"x","abs");if(t.dtype==="complex64"){const s={x:t};return it.runKernel(gp,s)}else{const s={x:t};return it.runKernel(lp,s)}}const Je=st({abs_:v$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g$(n){const s={x:_(n,"x","acos")};return it.runKernel(Ch,s)}const cI=st({acos_:g$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x$(n){const s={x:_(n,"x","acosh")};return it.runKernel(wh,s)}const fI=st({acosh_:x$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y$(n){q(Array.isArray(n),()=>"The argument passed to tf.addN() must be a list of tensors"),q(n.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${n.length}`);const t=n.map((d,S)=>_(d,`tensors${S}`,"addN")),s=t[0];t.forEach(d=>{if(d.dtype!==s.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(d=>{if(!ee(d.shape,s.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=t;return it.runKernel(up,r)}const T$=st({addN_:y$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S$(n,t=null,s=!1){const d={x:_(n,"x","all","bool")},S={axis:t,keepDims:s};return it.runKernel(sy,d,S)}const f1=st({all_:S$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C$(n,t=null,s=!1){const d={x:_(n,"x","any","bool")},S={axis:t,keepDims:s};return it.runKernel(iy,d,S)}const Cd=st({any_:C$});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$(n,t=0){const r={x:_(n,"x","argMax")},d={axis:t};return it.runKernel(hp,r,d)}const Cl=st({argMax_:w$});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E$(n,t=0){const r={x:_(n,"x","argMin")},d={axis:t};return it.runKernel(cp,r,d)}const dI=st({argMin_:E$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A$(n){const s={x:_(n,"x","asin")};return it.runKernel(Eh,s)}const pI=st({asin_:A$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$(n){const s={x:_(n,"x","asinh")};return it.runKernel(Ah,s)}const mI=st({asinh_:b$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I$(n){const s={x:_(n,"x","atan")};return it.runKernel(bh,s)}const vI=st({atan_:I$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R$(n,t){let s=_(n,"a","atan2"),r=_(t,"b","atan2");[s,r]=ze(s,r);const d={a:s,b:r};return it.runKernel(Rh,d)}const gI=st({atan2_:R$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N$(n){const s={x:_(n,"x","atanh")};return it.runKernel(Ih,s)}const xI=st({atanh_:N$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xc(n,t,s,r,d="NHWC",S){const i=n[3],g=[...t,i],e=Er(d);return pn(n,g,s,S,r,null,null,e)}function oi(n,t,s,r,d,S,i="channelsLast"){const[g,e]=th(t);let a;if(i==="channelsLast")a=[g,e,n[3],n[3]];else if(i==="channelsFirst")a=[g,e,n[1],n[1]];else throw new Error(`Unknown dataFormat ${i}`);return pn(n,a,s,r,d,S,!1,i)}function wr(n,t,s,r,d,S,i="NDHWC"){const[g,e,a]=S0(t);let v,u;if(i==="NDHWC")u="channelsLast",v=[g,e,a,n[4],n[4]];else if(i==="NCDHW")u="channelsFirst",v=[g,e,a,n[1],n[1]];else throw new Error(`Unknown dataFormat ${i}`);return ga(n,v,s,r,d,!1,u,S)}function pn(n,t,s,r,d,S,i=!1,g="channelsLast"){let[e,a,v,u]=[-1,-1,-1,-1];if(g==="channelsLast")[e,a,v,u]=n;else if(g==="channelsFirst")[e,u,a,v]=n;else throw new Error(`Unknown dataFormat ${g}`);const[o,c,,l]=t,[f,m]=th(s),[h,p]=th(r),y=ol(o,h),x=ol(c,p),{padInfo:T,outHeight:C,outWidth:E}=D$(d,a,v,f,m,y,x,S,g),A=i?l*u:l;let w;return g==="channelsFirst"?w=[e,A,C,E]:g==="channelsLast"&&(w=[e,C,E,A]),{batchSize:e,dataFormat:g,inHeight:a,inWidth:v,inChannels:u,outHeight:C,outWidth:E,outChannels:A,padInfo:T,strideHeight:f,strideWidth:m,filterHeight:o,filterWidth:c,effectiveFilterHeight:y,effectiveFilterWidth:x,dilationHeight:h,dilationWidth:p,inShape:n,outShape:w,filterShape:t}}function ga(n,t,s,r,d,S=!1,i="channelsLast",g){let[e,a,v,u,o]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[e,a,v,u,o]=n;else if(i==="channelsFirst")[e,o,a,v,u]=n;else throw new Error(`Unknown dataFormat ${i}`);const[c,l,f,,m]=t,[h,p,y]=S0(s),[x,T,C]=S0(r),E=ol(c,x),A=ol(l,T),w=ol(f,C),{padInfo:b,outDepth:I,outHeight:R,outWidth:N}=O$(d,a,v,u,h,p,y,E,A,w,g),F=S?m*o:m;let P;return i==="channelsFirst"?P=[e,F,I,R,N]:i==="channelsLast"&&(P=[e,I,R,N,F]),{batchSize:e,dataFormat:i,inDepth:a,inHeight:v,inWidth:u,inChannels:o,outDepth:I,outHeight:R,outWidth:N,outChannels:F,padInfo:b,strideDepth:h,strideHeight:p,strideWidth:y,filterDepth:c,filterHeight:l,filterWidth:f,effectiveFilterDepth:E,effectiveFilterHeight:A,effectiveFilterWidth:w,dilationDepth:x,dilationHeight:T,dilationWidth:C,inShape:n,outShape:P,filterShape:t}}function P$(n,t,s,r,d){r==null&&(r=d1(n,t,s));const S=n[0],i=n[1],g=eh((S-t+2*r)/s+1,d),e=eh((i-t+2*r)/s+1,d);return[g,e]}function F$(n,t,s,r,d,S){d==null&&(d=d1(n,t[0],r[0]));const i=[0,0,0,s];for(let g=0;g<3;g++)n[g]+2*d>=t[g]&&(i[g]=eh((n[g]-t[g]+2*d)/r[g]+1,S));return i}function d1(n,t,s,r=1){const d=ol(t,r);return Math.floor((n[0]*(s-1)-s+d)/2)}function th(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function S0(n){return typeof n=="number"?[n,n,n]:n}function ol(n,t){return t<=1?n:n+(n-1)*(t-1)}function D$(n,t,s,r,d,S,i,g,e){let a,v,u;if(typeof n=="number"){a={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const c=P$([t,s],S,r,n,g);v=c[0],u=c[1]}else if(n==="same"){v=Math.ceil(t/r),u=Math.ceil(s/d);const o=Math.max(0,(v-1)*r+S-t),c=Math.max(0,(u-1)*d+i-s),l=Math.floor(o/2),f=o-l,m=Math.floor(c/2),h=c-m;a={top:l,bottom:f,left:m,right:h,type:"SAME"}}else if(n==="valid")a={top:0,bottom:0,left:0,right:0,type:"VALID"},v=Math.ceil((t-S+1)/r),u=Math.ceil((s-i+1)/d);else if(typeof n=="object"){const o=e==="channelsLast"?n[1][0]:n[2][0],c=e==="channelsLast"?n[1][1]:n[2][1],l=e==="channelsLast"?n[2][0]:n[3][0],f=e==="channelsLast"?n[2][1]:n[3][1];a={top:o,bottom:c,left:l,right:f,type:o===0&&c===0&&l===0&&f===0?"VALID":"EXPLICIT"},v=eh((t-S+o+c)/r+1,g),u=eh((s-i+l+f)/d+1,g)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:a,outHeight:v,outWidth:u}}function O$(n,t,s,r,d,S,i,g,e,a,v){let u,o,c,l;if(n==="valid"&&(n=0),typeof n=="number"){u={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};const m=F$([t,s,r,1],[g,e,a],1,[d,S,i],n,v);o=m[0],c=m[1],l=m[2]}else if(n==="same"){o=Math.ceil(t/d),c=Math.ceil(s/S),l=Math.ceil(r/i);const f=(o-1)*d+g-t,m=(c-1)*S+e-s,h=(l-1)*i+a-r,p=Math.floor(f/2),y=f-p,x=Math.floor(m/2),T=m-x,C=Math.floor(h/2),E=h-C;u={top:x,bottom:T,left:C,right:E,front:p,back:y,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:u,outDepth:o,outHeight:c,outWidth:l}}function eh(n,t){if(!t)return Math.trunc(n);switch(t){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${t}`)}}function na(n){const[t,s,r]=th(n);return t===1&&s===1&&r===1}function Sn(n,t){return na(n)||na(t)}function eo(n){return th(n).every(t=>t>0)}function Er(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function Xn(n,t,s){if(s!=null){if(typeof t=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${s} but got pad ${t}.`);if(typeof t=="number")q(yl(t),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${s} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(d=>{q(yl(d),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${s} but got pad ${d}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L$(n,t){const r={x:_(n,"x","reshape","string_or_numeric")},d={shape:t};return it.runKernel(Jp,r,d)}const at=st({reshape_:L$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$(n,t,s,r,d){const S=_(n,"x","avgPool","float32"),i=1;q(Sn(s,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);let g=S,e=!1;S.rank===3&&(e=!0,g=at(S,[1,S.shape[0],S.shape[1],S.shape[2]])),q(g.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${g.rank}.`),Xn("avgPool",r,d);const a={x:g},v={filterSize:t,strides:s,pad:r,dimRoundingMode:d};let u=it.runKernel(fp,a,v);return u=Nt(u,S.dtype),e?at(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const fm=st({avgPool_:M$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $$(n,t,s,r,d,S="NDHWC"){const i=_(n,"x","avgPool3d","float32");let g=i,e=!1;i.rank===4&&(e=!0,g=at(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),q(g.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${g.rank}.`),q(S==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${S}`),q(typeof s=="number"&&s>0||Array.isArray(s)&&s[0]>0&&s[1]>0&&s[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${s}'`),Xn("avgPool3d",r,d);const a={x:g},v={filterSize:t,strides:s,pad:r,dimRoundingMode:d,dataFormat:S};let u=it.runKernel(dp,a,v);return u=Nt(u,g.dtype),e?at(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}const yI=st({avgPool3d_:$$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$(n,t=0){q(n.length>=1,()=>"Pass at least one tensor to concat");const s=Td(n,"tensors","concat","string_or_numeric");if(s[0].dtype==="complex64"&&s.forEach(S=>{if(S.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${S.dtype}. `)}),s.length===1)return dr(s[0]);const r=s,d={axis:t};return it.runKernel(xp,r,d)}const Ze=st({concat_:B$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k$(n,t,s=!1,r=!1){let d=_(n,"a","matMul"),S=_(t,"b","matMul");[d,S]=ze(d,S);const i={a:d,b:S},g={transposeA:s,transposeB:r};return it.runKernel(pp,i,g)}const qt=st({matMul_:k$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$(n){const s={x:_(n,"x","sigmoid","float32")};return it.runKernel(lc,s)}const Hi=st({sigmoid_:z$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$(n,t,s){const r=_(n,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const d={x:r},S={begin:t,size:s};return it.runKernel(nm,d,S)}const ne=st({slice_:V$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G$(n){const s={x:_(n,"x","tanh","float32")};return it.runKernel(pc,s)}const wl=st({tanh_:G$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U$(n,t,s,r,d,S){const i=_(n,"forgetBias","basicLSTMCell"),g=_(t,"lstmKernel","basicLSTMCell"),e=_(s,"lstmBias","basicLSTMCell"),a=_(r,"data","basicLSTMCell"),v=_(d,"c","basicLSTMCell"),u=_(S,"h","basicLSTMCell"),o=Ze([a,u],1),c=qt(o,g),l=St(c,e),f=l.shape[0],m=l.shape[1]/4,h=[f,m],p=ne(l,[0,0],h),y=ne(l,[0,m],h),x=ne(l,[0,m*2],h),T=ne(l,[0,m*3],h),C=St(rt(Hi(p),wl(y)),rt(v,Hi(St(i,x)))),E=rt(wl(C),Hi(T));return[C,E]}const W$=st({basicLSTMCell_:U$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$(n,t,s){const r=_(n,"x","batchToSpaceND"),d=t.reduce((g,e)=>g*e);q(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),q(s.length===t.length,()=>`crops.length is ${s.length} but should be equal to blockShape.length  ${t.length}`),q(r.shape[0]%d===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${d}`);const S={x:r},i={blockShape:t,crops:s};return it.runKernel(mp,S,i)}const dm=st({batchToSpaceND_:X$});function H$(n){let t;return n.rank===0||n.rank===1?t=at(n,[1,1,1,n.size]):n.rank===2?t=at(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?t=at(n,[1,n.shape[0],n.shape[1],n.shape[2]]):t=n,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y$(n,t,s,r,d,S){S==null&&(S=.001);const i=_(n,"x","batchNorm"),g=_(t,"mean","batchNorm"),e=_(s,"variance","batchNorm");let a;d!=null&&(a=_(d,"scale","batchNorm"));let v;r!=null&&(v=_(r,"offset","batchNorm")),q(g.rank===e.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(v==null||g.rank===v.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(a==null||g.rank===a.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const o={x:H$(i),scale:a,offset:v,mean:g,variance:e},c={varianceEpsilon:S},l=it.runKernel(Ip,o,c);return at(l,i.shape)}const yc=st({batchNorm_:Y$});function K$(n,t,s,r,d,S){const i=_(n,"x","batchNorm"),g=_(t,"mean","batchNorm"),e=_(s,"variance","batchNorm");let a;d!=null&&(a=_(d,"scale","batchNorm"));let v;return r!=null&&(v=_(r,"offset","batchNorm")),q(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),q(g.rank===2||g.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${g.rank}.`),q(e.rank===2||e.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${e.rank}.`),a!=null&&q(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${a.rank}.`),v!=null&&q(v.rank===2||v.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${v.rank}.`),yc(i,g,e,v,a,S)}const TI=st({batchNorm2d_:K$});function j$(n,t,s,r,d,S){const i=_(n,"x","batchNorm"),g=_(t,"mean","batchNorm"),e=_(s,"variance","batchNorm");let a;d!=null&&(a=_(d,"scale","batchNorm"));let v;return r!=null&&(v=_(r,"offset","batchNorm")),q(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),q(g.rank===3||g.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${g.rank}.`),q(e.rank===3||e.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${e.rank}.`),a!=null&&q(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${a.rank}.`),v!=null&&q(v.rank===3||v.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${v.rank}.`),yc(i,g,e,v,a,S)}const SI=st({batchNorm3d_:j$});function Z$(n,t,s,r,d,S){const i=_(n,"x","batchNorm"),g=_(t,"mean","batchNorm"),e=_(s,"variance","batchNorm");let a;d!=null&&(a=_(d,"scale","batchNorm"));let v;return r!=null&&(v=_(r,"offset","batchNorm")),q(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),q(g.rank===4||g.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${g.rank}.`),q(e.rank===4||e.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${e.rank}.`),a!=null&&q(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${a.rank}.`),v!=null&&q(v.rank===4||v.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${v.rank}.`),yc(i,g,e,v,a,S)}const CI=st({batchNorm4d_:Z$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q$(n,t,s){const r=_(n,"x","bincount"),d=_(t,"weights","bincount");q(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),q(s>=0,()=>`size must be non-negative, but got ${s}.`),q(d.size===r.size||d.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${d.shape}.`);const S={x:r,weights:d},i={size:s};return it.runKernel(oy,S,i)}const wI=st({bincount_:Q$});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J$(n,t){const s=_(n,"x","bitwiseAnd"),r=_(t,"y","bitwiseAnd");if(!ee(s.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${s.shape}, y: ${r.shape}`);if(s.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${s.dtype} and type of y: ${r.dtype}`);const d={a:s,b:r};return it.runKernel(vp,d)}const q$=st({bitwiseAnd_:J$});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$(n,t){const s=_(n,"s0","broadcastArgs","int32"),r=_(t,"s1","broadcastArgs","int32");if(s.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${s.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const d={s0:s,s1:r};return it.runKernel(ly,d)}const tB=st({broadcastArgs_:_$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eB(n,t){let s=_(n,"broadcastTo","x");const r=s.shape;if(Ls(t),t.length<s.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${s.rank}.`);if(t.length>s.rank){const a=s.shape.slice();for(;a.length<t.length;)a.unshift(1);s=at(s,a)}const d=s.shape,S=Array.from(t);for(let a=t.length-1;a>=0;a--)if(d[a]===t[a])S[a]=1;else if(s.shape[a]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(S.map((a,v)=>a>1?v:-1).filter(a=>a>=0).length===0)return dr(s);const g={x:s},e={reps:S};return it.runKernel(mc,g,e)}const ll=st({broadcastTo_:eB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nB(n){const s={x:_(n,"x","ceil","float32")};return it.runKernel(Ph,s)}const EI=st({ceil_:nB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vl(n,t,s){Ls(n),s=s||Bl(t);const r={shape:n,value:t,dtype:s};return it.runKernel(wy,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sB(n,t,s){const r=_(n,"x","clipByValue");if(q(t<=s,()=>`Error in clip: min (${t}) must be less than or equal to max (${s}).`),t===s)return Vl(r.shape,t,r.dtype);const d={x:r},S={clipValueMin:t,clipValueMax:s};return it.runKernel(Fh,d,S)}const ms=st({clipByValue_:sB});function iB(n){return Ze(n,0)}const AI=st({concat1d_:iB});function rB(n,t){return Ze(n,t)}const bI=st({concat2d_:rB});function aB(n,t){return Ze(n,t)}const II=st({concat3d_:aB});function oB(n,t){return Ze(n,t)}const RI=st({concat4d_:oB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lB(n,t,s,r,d="NHWC",S=[1,1],i){const g=_(n,"x","conv2d","float32"),e=_(t,"filter","conv2d","float32");let a=g,v=!1;g.rank===3&&(v=!0,a=at(g,[1,g.shape[0],g.shape[1],g.shape[2]])),q(a.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${a.rank}.`),q(e.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${e.rank}.`),Xn("conv2d",r,i);const u=d==="NHWC"?a.shape[3]:a.shape[1];q(u===e.shape[2],()=>`Error in conv2d: depth of input (${u}) must match input depth for filter ${e.shape[2]}.`),q(Sn(s,S),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${s} and dilations '${S}'`),q(eo(S),()=>"Error in conv2D: Dilated rates should be larger than 0."),q(eo(s),()=>"Error in conv2D: Strides should be larger than 0.");const o={x:a,filter:e},c={strides:s,pad:r,dataFormat:d,dilations:S,dimRoundingMode:i},l=it.runKernel(yp,o,c);return v?at(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const sa=st({conv2d_:lB});function uB(n,t,s,r,d="NWC",S=1,i){const g=_(n,"x","conv1d"),e=_(t,"filter","conv1d");let a=g,v=!1;g.rank===2&&(v=!0,a=at(g,[1,g.shape[0],g.shape[1]])),q(a.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${a.rank}.`),q(e.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${e.rank}.`),Xn("conv1d",r,i),q(a.shape[2]===e.shape[1],()=>`Error in conv1d: depth of input (${a.shape[2]}) must match input depth for filter ${e.shape[1]}.`),q(Sn(s,S),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${s} and dilation '${S}'`),q(eo(S),()=>"Error in conv1D: Dilated rates should be larger than 0."),q(eo(s),()=>"Error in conv1D: Stride should be larger than 0."),q(d==="NWC",()=>`Error in conv1d: got dataFormat of ${d} but only NWC is currently supported.`);const u=at(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=at(a,[a.shape[0],1,a.shape[1],a.shape[2]]),m=sa(o,u,[1,s],r,"NHWC",[1,S],i);return v?at(m,[m.shape[2],m.shape[3]]):at(m,[m.shape[0],m.shape[2],m.shape[3]])}const p1=st({conv1d_:uB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hB(n,t,s,r,d,S="NHWC",i){q(n.length===t.rank,()=>`Length of inShape (${n.length}) and rank of dy (${t.rank}) must match`);let g=n,e=t,a=!1;t.rank===3&&(a=!0,e=at(t,[1,t.shape[0],t.shape[1],t.shape[2]]),g=[1,n[0],n[1],n[2]]),q(g.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${g.length}.`),q(e.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${e.rank}`),q(s.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${s.rank}`);const v=S==="NHWC"?g[3]:g[1],u=S==="NHWC"?e.shape[3]:e.shape[1];q(v===s.shape[2],()=>`Error in conv2dDerInput: depth of input (${v}) must match input depth for filter ${s.shape[2]}.`),q(u===s.shape[3],()=>`Error in conv2dDerInput: depth of output (${u}) must match output depth for filter ${s.shape[3]}.`),Xn("conv2dDerInput",d,i);const o={dy:e,filter:s},c={strides:r,pad:d,dataFormat:S,dimRoundingMode:i,inputShape:g},l=it.runKernel(Tp,o,c);return a?at(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const m1=st({conv2DBackpropInput_:hB});function cB(n,t,s,r,d,S){const i=_(n,"x","conv2dTranspose"),g=_(t,"filter","conv2dTranspose");return m1(s,i,g,r,d,"NHWC",S)}const v1=st({conv2dTranspose_:cB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fB(n,t,s,r,d="NDHWC",S=[1,1,1]){const i=_(n,"x","conv3d"),g=_(t,"filter","conv3d");let e=i,a=!1;i.rank===4&&(a=!0,e=at(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),q(e.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${e.rank}.`),q(g.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${g.rank}.`),q(e.shape[4]===g.shape[3],()=>`Error in conv3d: depth of input (${e.shape[4]}) must match input depth for filter ${g.shape[3]}.`),q(Sn(s,S),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${s} and dilations '${S}'`),q(d==="NDHWC",()=>`Error in conv3d: got dataFormat of ${d} but only NDHWC is currently supported.`),q(eo(S),()=>"Error in conv3D: Dilated rates should be larger than 0."),q(eo(s),()=>"Error in conv3D: Strides should be larger than 0.");const v={x:e,filter:g},u={strides:s,pad:r,dataFormat:d,dilations:S},o=it.runKernel(Sp,v,u);return a?at(o,[o.shape[1],o.shape[2],o.shape[3],o.shape[4]]):o}const NI=st({conv3d_:fB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dB(n,t,s,r,d){q(n.length===t.rank,()=>`Length of inShape (${n.length}) and rank of dy (${t.rank}) must match`);let S=n,i=t,g=!1;t.rank===4&&(g=!0,i=at(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),S=[1,n[0],n[1],n[2],n[3]]);const e=S[4],a=i.shape[4];q(S.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${S.length}.`),q(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),q(s.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${s.rank}`),q(e===s.shape[3],()=>`Error in conv3dDerInput: depth of input (${e}) must match input depth for filter ${s.shape[3]}.`),q(a===s.shape[4],()=>`Error in conv3dDerInput: depth of output (${a}) must match output depth for filter ${s.shape[4]}.`);const v={dy:i,filter:s},u={pad:d,strides:r,inputShape:S},o=it.runKernel(fy,v,u);return g?at(o,[o.shape[1],o.shape[2],o.shape[3],o.shape[4]]):o}const PI=st({conv3DBackpropInput_:dB});function pB(n,t,s,r,d){const S=_(n,"x","conv3dTranspose"),i=_(t,"filter","conv3dTranspose");return PI(s,S,i,r,d)}const FI=st({conv3dTranspose_:pB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mB(n){const s={x:_(n,"x","cos","float32")};return it.runKernel(Dh,s)}const pm=st({cos_:mB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vB(n){const s={x:_(n,"x","cosh","float32")};return it.runKernel(Oh,s)}const g1=st({cosh_:vB});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gB(n,t=0,s=!1,r=!1){const S={x:_(n,"x","cumprod")},i={axis:t,exclusive:s,reverse:r};return it.runKernel(dy,S,i)}const wd=st({cumprod_:gB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xB(n,t=0,s=!1,r=!1){const S={x:_(n,"x","cumsum")},i={axis:t,exclusive:s,reverse:r};return it.runKernel(Cp,S,i)}const x1=st({cumsum_:xB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yB(n,t,s,r=!1){const d=_(n,"x","denseBincount"),S=_(t,"weights","denseBincount");q(d.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${d.dtype}`),q(d.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${d.rank}.`),q(s>=0,()=>`size must be non-negative, but got ${s}.`),q(S.size===d.size||S.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${d.shape}, weights shape: ${S.shape}.`);const i={x:d,weights:S},g={size:s,binaryOutput:r};return it.runKernel(my,i,g)}const C0=st({denseBincount_:yB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TB(n,t,s="NHWC"){const r=_(n,"x","depthToSpace","float32"),d=s==="NHWC"?r.shape[1]:r.shape[2],S=s==="NHWC"?r.shape[2]:r.shape[3],i=s==="NHWC"?r.shape[3]:r.shape[1];q(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),q(d*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${d} and ${t}  for depthToSpace with input shape
    ${r.shape}`),q(S*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${S} and ${t} for depthToSpace with input shape
        ${r.shape}`),q(i%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${r.shape}`);const g={x:r},e={blockSize:t,dataFormat:s};return it.runKernel(vy,g,e)}const DI=st({depthToSpace_:TB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SB(n,t,s,r,d="NHWC",S=[1,1],i){const g=_(n,"x","depthwiseConv2d","float32"),e=_(t,"filter","depthwiseConv2d","float32");let a=g,v=!1;g.rank===3&&(v=!0,a=at(g,[1,g.shape[0],g.shape[1],g.shape[2]])),q(a.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${a.rank}.`),q(e.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${e.rank}.`);const u=d==="NHWC"?a.shape[3]:a.shape[1];q(u===e.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u}) must match the inChannels dimension in filter ${e.shape[2]}.`),Xn("depthwiseConv2d",r,i);const o={x:a,filter:e},c={strides:s,pad:r,dataFormat:d,dilations:S,dimRoundingMode:i},l=it.runKernel(wp,o,c);return v?at(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const Tc=st({depthwiseConv2d_:SB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CB(n){const s={x:_(n,"x","diag")};return it.runKernel(yy,s)}const wB=st({diag_:CB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EB(n,t,s,r,d=[1,1],S="NHWC"){const i=_(n,"x","dilation2d"),g=_(t,"filter","dilation2d");q(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),q(g.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${g.rank}.`),q(S==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${S}`);let e=i,a=!1;i.rank===3&&(e=at(i,[1,i.shape[0],i.shape[1],i.shape[2]]),a=!0),q(e.shape[3]===g.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${e.shape[3]} vs ${g.shape[2]}`);const v={x:e,filter:g},u={strides:s,pad:r,dilations:d},o=it.runKernel(Ep,v,u);return a?at(o,[o.shape[1],o.shape[2],o.shape[3]]):o}const OI=st({dilation2d_:EB});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function El(n,t){const s=n.length,r=[];for(let d=0;d<s;d++){const S=s-1-d,i=n[S]||1;(t[t.length-1-d]||1)>1&&i===1&&r.unshift(S)}return r}function an(n,t){const s=[];for(let r=0;r<t.length;r++){const d=n[n.length-r-1],S=t.length-r-1,i=t[S];(d==null||d===1&&i>1)&&s.unshift(S)}return s}function Ht(n,t){const s=Math.max(n.length,t.length),r=new Array(s);for(let d=0;d<s;d++){let S=n[n.length-d-1];S==null&&(S=1);let i=t[t.length-d-1];if(i==null&&(i=1),S===1)r[s-d-1]=i;else if(i===1)r[s-d-1]=S;else if(S!==i){const g=`Operands could not be broadcast together with shapes ${n} and ${t}.`;throw Error(g)}else r[s-d-1]=S}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AB(n,t){let s=_(n,"a","equal","string_or_numeric"),r=_(t,"b","equal","string_or_numeric");[s,r]=ze(s,r),Ht(s.shape,r.shape);const d={a:s,b:r};return it.runKernel(Ap,d)}const Ei=st({equal_:AB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bB(n,t,s){const r=_(t,"a","where"),d=_(s,"b","where"),S=_(n,"condition","where","bool"),i=Ht(Ht(S.shape,r.shape),d.shape),g=ll(S,i),e=ll(r,i),a=ll(d,i),v={condition:g,t:e,e:a};return it.runKernel(em,v)}const Rn=st({where_:bB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IB(n){const s={x:_(n,"x","zerosLike")};return it.runKernel(hm,s)}const ie=st({zerosLike_:IB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RB(n,t){let s=_(n,"a","div"),r=_(t,"b","div");[s,r]=ze(s,r);const d=$t(s,r),S=ie(d),i=Ei(r,S);return Rn(i,S,d)}const LI=st({divNoNan_:RB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NB(n,t){const s=_(n,"t1","dot"),r=_(t,"t2","dot");q((s.rank===1||s.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${s.rank} and ${r.rank}.`);const d=s.rank===1?s.size:s.shape[1],S=r.rank===1?r.size:r.shape[0];if(q(d===S,()=>`Error in dot: inner dimensions of inputs must match, but got ${d} and ${S}.`),s.rank===1&&r.rank===1){const i=at(s,[1,-1]),g=at(r,[-1,1]),e=qt(i,g);return at(e,[])}else if(s.rank===1&&r.rank===2){const i=at(s,[1,-1]),g=at(r,[r.shape[0],r.shape[1]]),e=qt(i,g);return at(e,[e.size])}else if(s.rank===2&&r.rank===1){const i=at(r,[-1,1]),g=qt(s,i);return at(g,[g.size])}else{const i=at(r,[r.shape[0],r.shape[1]]);return qt(s,i)}}const MI=st({dot_:NB});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PB(n,...t){const s=t.map((d,S)=>_(d,`tensors${S}`,"einsum")),r={equation:n};return it.runKernel(Ty,s,r)}const ko=st({einsum_:PB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FB(n){const s={x:_(n,"x","elu","float32")};return it.runKernel(Mh,s)}const Sc=st({elu_:FB});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DB(n,t){const s=_(n,"x","ensureShape","string_or_numeric");if(!H5(s.shape,t))throw new Error(`EnsureShape: Shape of tensor ${s.shape} is not compatible with expected shape ${t}`);return n}const OB=st({ensureShape_:DB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LB(n){let t=_(n,"x","erf");q(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=Nt(t,"float32"));const s={x:t};return it.runKernel($h,s)}const $I=st({erf_:LB});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y1(n,t){for(let s=0;s<n.length;++s)if(n[n.length-s-1]!==t-1-s)return!1;return!0}function BI(n,t,s){const r=n.length+t.length,d=[];let S=0,i=0;for(let g=0;g<r;g++)s.indexOf(g)===-1?d.push(n[S++]):d.push(t[i++]);return d}function mn(n,t){const s=[],r=n.length;for(let S=0;S<r;S++)t.indexOf(S)===-1&&s.push(n[S]);const d=t.map(S=>n[S]);return[s,d]}function Ue(n,t){const s=t.map(r=>1);return BI(n,s,t)}function Cn(n,t,s){q(y1(t,s),()=>`${n} supports only inner-most axes for now. Got axes ${t} and rank-${s} input.`)}function Oe(n,t){if(y1(n,t))return null;const s=[];for(let r=0;r<t;++r)n.indexOf(r)===-1&&s.push(r);return n.forEach(r=>s.push(r)),s}function xa(n){return n.map((t,s)=>[s,t]).sort((t,s)=>t[1]-s[1]).map(t=>t[0])}function We(n,t){const s=[];for(let r=t-n;r<t;++r)s.push(r);return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MB(n,t=null,s=!1){const d={x:_(n,"x","max")},S={reductionIndices:t,keepDims:s};return it.runKernel(Bp,d,S)}const ei=st({max_:MB});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $B(n,t=null,s=!1){const d={x:_(n,"x","min")},S={axis:t,keepDims:s};return it.runKernel(Gp,d,S)}const nh=st({min_:$B});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BB(n,t){let s=_(n,"base","pow"),r=_(t,"exp","pow");[s,r]=ze(s,r);const d={a:s,b:r};return it.runKernel(qh,d)}const ia=st({pow_:BB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vt(n,t){if((ii(n)&&t!=="string"||Array.isArray(n))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&ii(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return va(n,[],[],t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kB(n){const s={x:_(n,"x","sqrt","float32")};return it.runKernel(hc,s)}const Fn=st({sqrt_:kB});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zB(n){const t=_(n,"x","square"),s={};return it.runKernel("Square",{x:t},s)}const me=st({square_:zB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VB(n,t=null,s=!1){let r=_(n,"x","sum");r.dtype==="bool"&&(r=Nt(r,"int32"));const d={x:r},S={axis:t,keepDims:s};return it.runKernel(sm,d,S)}const Ot=st({sum_:VB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GB(n,t="euclidean",s=null,r=!1){n=_(n,"x","norm");const d=kI(n,t,s);let S=d.shape;if(r){const i=Qt(s,n.shape);S=Ue(d.shape,i)}return at(d,S)}function kI(n,t,s=null){if(n.rank===0)return Je(n);if(n.rank!==1&&s===null)return kI(at(n,[-1]),t,s);if(n.rank===1||typeof s=="number"||Array.isArray(s)&&s.length===1){if(t===1)return Ot(Je(n),s);if(t===1/0)return ei(Je(n),s);if(t===-1/0)return nh(Je(n),s);if(t==="euclidean"||t===2)return Fn(Ot(ia(Je(n),Vt(2,"int32")),s));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(s)&&s.length===2){if(t===1)return ei(Ot(Je(n),s[0]),s[1]-1);if(t===1/0)return ei(Ot(Je(n),s[1]),s[0]);if(t===-1/0)return nh(Ot(Je(n),s[1]),s[0]);if(t==="fro"||t==="euclidean")return Fn(Ot(me(n),s));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${s}`)}const Cc=st({norm_:GB});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UB(n,t=null,s=!1){return Cc(n,"euclidean",t,s)}const zI=st({euclideanNorm_:UB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WB(n){const s={x:_(n,"x","exp")};return it.runKernel(Bh,s)}const Rs=st({exp_:WB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XB(n,t=0){const s=_(n,"x","expandDims","string_or_numeric");q(t<=s.rank,()=>"Axis must be <= rank of the tensor");const r={input:s},d={dim:t};return it.runKernel(bp,r,d)}const zn=st({expandDims_:XB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HB(n){const s={x:_(n,"x","expm1")};return it.runKernel(kh,s)}const VI=st({expm1_:HB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YB(n,t){const s=_(n,"x","tile","string_or_numeric");q(s.rank===t.length,()=>`Error in transpose: rank of input ${s.rank} must match length of reps ${t}.`);const r={x:s},d={reps:t};return it.runKernel(mc,r,d)}const Zs=st({tile_:YB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KB(n,t,s,r="float32"){t==null&&(t=n);const d=jt([n,t],r),S=n<=t?n:t;for(let g=0;g<S;++g)d.set(1,g,g);const i=at(d.toTensor(),[n,t]);if(s==null)return i;if(s.length===1)return Zs(zn(i,0),[s[0],1,1]);if(s.length===2)return Zs(zn(zn(i,0),0),[s[0],s[1],1,1]);if(s.length===3)return Zs(zn(zn(zn(i,0),0),0),[s[0],s[1],s[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${s.length}D.`)}const T1=st({eye_:KB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jB(n){const s={x:_(n,"x","floor","float32")};return it.runKernel(zh,s)}const wc=st({floor_:jB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZB(n,t,s=0,r=0){const d=_(n,"x","gather"),S=_(t,"indices","gather","int32"),i={x:d,indices:S},g={axis:s,batchDims:r};return it.runKernel(Rp,i,g)}const Ec=st({gather_:ZB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QB(n,t){let s=_(n,"a","greater","string_or_numeric"),r=_(t,"b","greater","string_or_numeric");[s,r]=ze(s,r),Ht(s.shape,r.shape);const d={a:s,b:r};return it.runKernel(Np,d)}const Ts=st({greater_:QB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JB(n,t){let s=_(n,"a","greaterEqual","string_or_numeric"),r=_(t,"b","greaterEqual","string_or_numeric");[s,r]=ze(s,r),Ht(s.shape,r.shape);const d={a:s,b:r};return it.runKernel(Gh,d)}const ya=st({greaterEqual_:JB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qB(n){const s={input:_(n,"input","imag")};return it.runKernel(Iy,s)}const mm=st({imag_:qB});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _B(n){const s={x:_(n,"x","isFinite")};return it.runKernel(Wh,s)}const GI=st({isFinite_:_B});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t9(n){const s={x:_(n,"x","isInf")};return it.runKernel(Xh,s)}const UI=st({isInf_:t9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e9(n){const s={x:_(n,"x","isNaN")};return it.runKernel(Hh,s)}const WI=st({isNaN_:e9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n9(n,t=.2){const r={x:_(n,"x","leakyRelu")},d={alpha:t};return it.runKernel(Pp,r,d)}const vm=st({leakyRelu_:n9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s9(n,t){let s=_(n,"a","less","string_or_numeric"),r=_(t,"b","less","string_or_numeric");[s,r]=ze(s,r),Ht(s.shape,r.shape);const d={a:s,b:r};return it.runKernel(Fp,d)}const sh=st({less_:s9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i9(n,t){let s=_(n,"a","lessEqual","string_or_numeric"),r=_(t,"b","lessEqual","string_or_numeric");[s,r]=ze(s,r),Ht(s.shape,r.shape);const d={a:s,b:r};return it.runKernel(Dp,d)}const po=st({lessEqual_:i9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r9(n,t,s){if(s<=0)throw new Error("The number of values should be positive.");const r={start:n,stop:t,num:s};return it.runKernel(Ry,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a9(n,t=5,s=1,r=1,d=.5){const S=_(n,"x","localResponseNormalization");q(S.rank===4||S.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${S.rank}.`),q(yl(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let i=S,g=!1;S.rank===3&&(g=!0,i=at(S,[1,S.shape[0],S.shape[1],S.shape[2]]));const e={x:i},a={depthRadius:t,bias:s,alpha:r,beta:d},v=it.runKernel($p,e,a);return g?at(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const XI=st({localResponseNormalization_:a9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o9(n){const s={x:_(n,"x","log","float32")};return it.runKernel(Yh,s)}const Ns=st({log_:o9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l9(n){const s={x:_(n,"x","log1p")};return it.runKernel(Kh,s)}const gm=st({log1p_:l9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u9(n,t){q(i0(n),()=>"The f passed in variableGrads(f) must be a function"),q(t==null||Array.isArray(t)&&t.every(a=>a instanceof yd),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const s=t!=null;if(!s){t=[];for(const a in it.registeredVariables)t.push(it.registeredVariables[a])}const r=s?t.filter(a=>!a.trainable):null,d=t.length;t=t.filter(a=>a.trainable),q(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${d} variables is trainable.`);const S=!0,{value:i,grads:g}=it.gradients(n,t,null,S);q(g.some(a=>a!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),q(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const e={};return t.forEach((a,v)=>{g[v]!=null&&(e[a.name]=g[v])}),r!=null&&r.forEach(a=>e[a.name]=null),{value:i,grads:e}}function yr(n){return it.customGrad(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h9(n){const s={x:_(n,"x","neg")};return it.runKernel(Wp,s)}const Ee=st({neg_:h9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c9(n){const s={x:_(n,"x","softplus")};return it.runKernel(uc,s)}const Gl=st({softplus_:c9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f9(n){const t=_(n,"x","logSigmoid");return yr(r=>({value:Ee(Gl(Ee(r))),gradFunc:i=>rt(i,Hi(Ee(r)))}))(t)}const HI=st({logSigmoid_:f9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d9(n,t){let s=_(n,"a","sub"),r=_(t,"b","sub");[s,r]=ze(s,r);const d={a:s,b:r};return it.runKernel(fc,d)}const Ft=st({sub_:d9});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p9(n,t=-1){const s=_(n,"logits","logSoftmax");if(t===-1&&(t=s.rank-1),t!==s.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${s.rank} and axis was ${t}`);return yr((d,S)=>{const g=ei(d,t,!0),e=Ft(d,g),a=Ft(Nt(e,"float32"),Ns(Ot(Rs(e),t,!0)));return S([a]),{value:a,gradFunc:(u,o)=>{const[c]=o,l=!0,f=Rs(c);return Ft(u,rt(Ot(u,t,l),f))}}})(s)}const S1=st({logSoftmax_:p9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m9(n,t=null,s=!1){const r=_(n,"x","logSumExp"),d=Qt(t,r.shape),S=ei(r,d,!0),i=Ft(r,S),g=Rs(i),e=Ot(g,d),a=Ns(e),v=St(at(S,a.shape),a);if(s){const u=Ue(v.shape,d);return at(v,u)}return v}const C1=st({logSumExp_:m9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v9(n,t){const s=_(n,"a","logicalAnd","bool"),r=_(t,"b","logicalAnd","bool");Ht(s.shape,r.shape);const d={a:s,b:r};return it.runKernel(Op,d)}const Zi=st({logicalAnd_:v9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g9(n){const s={x:_(n,"x","logicalNot","bool")};return it.runKernel(Lp,s)}const xm=st({logicalNot_:g9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x9(n,t){const s=_(n,"a","logicalOr","bool"),r=_(t,"b","logicalOr","bool");Ht(s.shape,r.shape);const d={a:s,b:r};return it.runKernel(Mp,d)}const w1=st({logicalOr_:x9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y9(n,t){const s=_(n,"a","logicalXor","bool"),r=_(t,"b","logicalXor","bool");return Ht(s.shape,r.shape),Zi(w1(n,t),xm(Zi(n,t)))}const YI=st({logicalXor_:y9});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cf=2147483648;function T9(n,t,s="left"){const r=_(n,"sortedSequence","searchSorted"),d=_(t,"values","searchSorted"),S=r.shape[r.shape.length-1],i=d.shape[d.shape.length-1],g=at(r,[-1,S]),e=at(d,[-1,i]);if(g.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(g.shape[0]!==e.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(mt(e.shape)>=cf)throw new Error(`values tensor size must less than ${cf}`);if(g.shape[1]>=cf)throw new Error(`trailing dim_size must less than ${cf} for int32 output type, was ${g.shape[1]}`);const a={sortedSequence:g,values:e},v={side:s};return it.runKernel(Yy,a,v)}const E1=st({searchSorted_:T9});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S9(n,t){return E1(n,t,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C9(n,t,s,r,d){const S=_(n,"x","maxPool"),i=1;let g=S,e=!1;S.rank===3&&(e=!0,g=at(S,[1,S.shape[0],S.shape[1],S.shape[2]])),q(g.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${g.rank}.`),q(Sn(s,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`),Xn("maxPool",r,d);const a={x:g},v={filterSize:t,strides:s,pad:r,dimRoundingMode:d},u=it.runKernel(kp,a,v);return e?at(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const ym=st({maxPool_:C9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w9(n,t=[1,1,1],s,r,d,S="NDHWC"){const i=_(n,"x","maxPool3d");let g=i,e=!1;i.rank===4&&(e=!0,g=at(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),q(g.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${g.rank}.`),q(S==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${S}`),Xn("maxPool3d",r,d);const a={x:g},v={filterSize:t,strides:s,pad:r,dimRoundingMode:d,dataFormat:S},u=it.runKernel(zp,a,v);return e?at(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}const KI=st({maxPool3d_:w9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9(n,t,s,r,d=!1){const i={x:_(n,"x","maxPoolWithArgmax")},g={filterSize:t,strides:s,pad:r,includeBatchInIndex:d},e=it.runKernel(Dy,i,g);return{result:e[0],indexes:e[1]}}const A9=st({maxPoolWithArgmax_:E9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b9(n,t){let s=_(n,"a","maximum"),r=_(t,"b","maximum");[s,r]=ze(s,r),s.dtype==="bool"&&(s=Nt(s,"int32"),r=Nt(r,"int32")),Ht(s.shape,r.shape);const d={a:s,b:r};return it.runKernel(jh,d)}const Ar=st({maximum_:b9});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I9(n,t=null,s=!1){const d={x:_(n,"x","mean")},S={axis:t,keepDims:s};return it.runKernel(Vp,d,S)}const $e=st({mean_:I9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _e(n,t="float32"){if(Ls(n),t==="complex64"){const r=_e(n,"float32"),d=_e(n,"float32");return ea(r,d)}const s=Pn(mt(n),t);return it.makeTensor(s,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Es(n,t="float32"){if(Ls(n),t==="complex64"){const r=Es(n,"float32"),d=_e(n,"float32");return ea(r,d)}const s=ey(mt(n),t);return it.makeTensor(s,n,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R9(n,t,{indexing:s="xy"}={}){if(s!=="xy"&&s!=="ij")throw new TypeError(`${s} is not a valid third argument to meshgrid`);if(n===void 0)return[];let r=_(n,"x","meshgrid",n instanceof be?n.dtype:"float32");if(t===void 0)return[r];let d=_(t,"y","meshgrid",t instanceof be?t.dtype:"float32");const S=mt(r.shape),i=mt(d.shape);return s==="xy"?(r=at(r,[1,-1]),d=at(d,[-1,1]),[qt(Es([i,1],r.dtype),r),qt(d,Es([1,S],d.dtype))]):(r=at(r,[-1,1]),d=at(d,[1,-1]),[qt(r,Es([1,i],r.dtype)),qt(Es([S,1],d.dtype),d)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N9(n,t){let s=_(n,"a","minimum"),r=_(t,"b","minimum");[s,r]=ze(s,r),s.dtype==="bool"&&(s=Nt(s,"int32"),r=Nt(r,"int32")),Ht(s.shape,r.shape);const d={a:s,b:r};return it.runKernel(Zh,d)}const no=st({minimum_:N9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P9(n,t,s){q(s==="reflect"||s==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${s}.`);const r=_(n,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");q(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);const d=s==="reflect"?1:0;for(let g=0;g<r.rank;g++)q(t[g].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),q(t[g][0]>=0&&t[g][0]<=r.shape[g]-d&&t[g][1]>=0&&t[g][1]<=r.shape[g]-d,()=>`Padding in dimension ${g} cannot be greater than or equal to ${r.shape[g]-d} or less than 0 for input of shape ${r.shape}`);const S={paddings:t,mode:s},i={x:r};return it.runKernel(Up,i,S)}const jI=st({mirrorPad_:P9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F9(n,t){let s=_(n,"a","mod"),r=_(t,"b","mod");[s,r]=ze(s,r);const d={a:s,b:r};return it.runKernel(Qh,d)}const ZI=st({mod_:F9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D9(n,t=null,s=!1){n=_(n,"x","moments");const r=Qt(t,n.shape),d=$e(n,r,s);let S=d.shape;s||(S=Ue(d.shape,r));const i=me(Ft(Nt(n,"float32"),at(d,S))),g=$e(i,r,s);return{mean:d,variance:g}}const Tm=st({moments_:D9});function O9(n,t,s,r){const d=_(t,"data","multiRNNCell"),S=Td(s,"c","multiRNNCell"),i=Td(r,"h","multiRNNCell");let g=d;const e=[];for(let u=0;u<n.length;u++){const o=n[u](g,S[u],i[u]);e.push(o[0]),e.push(o[1]),g=o[1]}const a=[],v=[];for(let u=0;u<e.length;u+=2)a.push(e[u]),v.push(e[u+1]);return[a,v]}const L9=st({multiRNNCell_:O9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M9(n,t,s,r=!1){const d=_(n,"logits","multinomial"),S=d.size,i=d.rank;if(S<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${S}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);s=s||Math.random();const e={logits:i===1?at(d,[1,-1]):d},a={numSamples:t,seed:s,normalized:r},v=it.runKernel(Oy,e,a);return i===1?at(v,[v.size]):v}const $9=st({multinomial_:M9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B9(n,t){let s=_(n,"a","notEqual","string_or_numeric"),r=_(t,"b","notEqual","string_or_numeric");[s,r]=ze(s,r),Ht(s.shape,r.shape);const d={a:s,b:r};return it.runKernel(Xp,d)}const Al=st({notEqual_:B9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k9(n,t,s=1,r=0,d="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const i={indices:_(n,"indices","oneHot","int32")},g={dtype:d,depth:t,onValue:s,offValue:r};return it.runKernel(Yp,i,g)}const A1=st({oneHot_:k9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z9(n){const s={x:_(n,"x","onesLike")};return it.runKernel(Hp,s)}const Ps=st({onesLike_:z9});function V9(n,t){const s=_(n,"v1","outerProduct"),r=_(t,"v2","outerProduct");q(s.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${s.rank} and ${r.rank}.`);const d=at(s,[-1,1]),S=at(r,[1,-1]);return qt(d,S)}const G9=st({outerProduct_:V9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U9(n,t,s=0){const r=_(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const d={paddings:t,constantValue:s},S={x:r};return it.runKernel(jp,S,d)}const Ta=st({pad_:U9});function W9(n,t,s=0){return q(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),Ta(n,[t],s)}const X9=st({pad1d_:W9});function H9(n,t,s=0){return q(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ta(n,t,s)}const Y9=st({pad2d_:H9});function K9(n,t,s=0){return q(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ta(n,t,s)}const j9=st({pad3d_:K9});function Z9(n,t,s=0){return q(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ta(n,t,s)}const Q9=st({pad4d_:Z9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9(n,t,s){const r=_(n,"x","spaceToBatchND");q(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),q(s.length===t.length,()=>`paddings.shape[0] ${s.length} must be equal to [blockShape] ${t.length}`),q(r.shape.reduce((i,g,e)=>e>0&&e<=t.length?i&&(g+s[e-1][0]+s[e-1][1])%t[e-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${s.toString()} must be divisible by blockShapes ${t.toString()}`);const d={x:r},S={blockShape:t,paddings:s};return it.runKernel(im,d,S)}const Sm=st({spaceToBatchND_:J9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q9(n,t,s,r,d,S,i){d==null&&(d=[1,1]),S==null&&(S=1),r===0&&(r="valid");const g=_(n,"x","maxPool");let e=g,a=!1;g.rank===3&&(a=!0,e=at(g,[1,g.shape[0],g.shape[1],g.shape[2]])),q(Sn(S,d),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${S} and dilations '${d}'`);const v=oi(e.shape,t,S,d,r),u=[v.dilationHeight,v.dilationWidth];let o;r==="same"?o=tk([v.filterHeight,v.filterWidth],u):o=[[0,0],[0,0]];const c=u[0]===1&&u[1]===1,[l,f]=_9([v.inHeight,v.inWidth],u,o),m=c?r:"valid",h=c?e:Sm(e,u,l),y=(s==="avg"?()=>fm(h,t,S,m,i):()=>ym(h,t,S,m,i))(),x=c?y:dm(y,u,f);return a?at(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function _9(n,t,s){const r=s.map(v=>v[0]),d=s.map(v=>v[1]),S=n.concat(r,d),i=t.map((v,u)=>(v-S[u]%v)%v),g=d.map((v,u)=>v+i[u]),e=t.map((v,u)=>[r[u],g[u]]),a=t.map((v,u)=>[0,i[u]]);return[e,a]}function tk(n,t){const r=n.map((i,g)=>i+(i-1)*(t[g]-1)).map(i=>i-1),d=r.map(i=>Math.floor(i/2)),S=r.map((i,g)=>i-d[g]);return r.map((i,g)=>[d[g],S[g]])}const QI=st({pool_:q9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ek(n,t){const s=_(n,"x","prelu"),r=_(t,"alpha","prelu"),d={x:s,alpha:r};return it.runKernel(Zp,d)}const Cm=st({prelu_:ek});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nk(n,t=null,s=!1){let r=_(n,"x","prod");r.dtype==="bool"&&(r=Nt(r,"int32"));const d={x:r},S={axis:t,keepDims:s};return it.runKernel(Qp,d,S)}const JI=st({prod_:nk});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sk(n,t,s,r){const d=n.map((v,u)=>_(v,`tensors${u}`,"raggedGather","int32")),S=_(t,"paramsDenseValues","raggedGather"),i=_(s,"indices","raggedGather","int32"),g={paramsNestedSplits:d,paramsDenseValues:S,indices:i},e={outputRaggedRank:r},a=it.runKernel(By,g,e);return{outputNestedSplits:a.slice(0,a.length-1),outputDenseValues:a[a.length-1]}}const ik=st({raggedGather_:sk});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rk(n,t,s){const r=_(n,"starts","raggedRange"),d=_(t,"limits","raggedRange",r.dtype),S=_(s,"deltas","raggedRange",r.dtype),i={starts:r,limits:d,deltas:S},g=it.runKernel(ky,i);return{rtNestedSplits:g[0],rtDenseValues:g[1]}}const ak=st({raggedRange_:rk});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ok(n,t,s,r,d){const S=_(n,"shape","raggedTensorToTensor","int32"),i=_(t,"values","raggedTensorToTensor"),g=_(s,"defaultValue","raggedTensorToTensor",i.dtype),e=r.map((u,o)=>_(u,`tensors${o}`,"raggedTensorToTensor","int32")),a={shape:S,values:i,defaultValue:g,rowPartitionTensors:e},v={rowPartitionTypes:d};return it.runKernel(zy,a,v)}const lk=st({raggedTensorToTensor_:ok});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uk(n,t,s){Ls(n);const r=mt(n);let d=null;if(s==null||s==="float32")d=new Float32Array(r);else if(s==="int32")d=new Int32Array(r);else if(s==="bool")d=new Uint8Array(r);else throw new Error(`Unknown data type ${s}`);for(let S=0;S<r;S++)d[S]=t();return it.makeTensor(d,n,s)}const hk=st({rand_:uk});var b1={exports:{}};b1.exports;(function(n){(function(t,s,r){function d(e){var a=this,v=g();a.next=function(){var u=2091639*a.s0+a.c*23283064365386963e-26;return a.s0=a.s1,a.s1=a.s2,a.s2=u-(a.c=u|0)},a.c=1,a.s0=v(" "),a.s1=v(" "),a.s2=v(" "),a.s0-=v(e),a.s0<0&&(a.s0+=1),a.s1-=v(e),a.s1<0&&(a.s1+=1),a.s2-=v(e),a.s2<0&&(a.s2+=1),v=null}function S(e,a){return a.c=e.c,a.s0=e.s0,a.s1=e.s1,a.s2=e.s2,a}function i(e,a){var v=new d(e),u=a&&a.state,o=v.next;return o.int32=function(){return v.next()*4294967296|0},o.double=function(){return o()+(o()*2097152|0)*11102230246251565e-32},o.quick=o,u&&(typeof u=="object"&&S(u,v),o.state=function(){return S(v,{})}),o}function g(){var e=4022871197,a=function(v){v=String(v);for(var u=0;u<v.length;u++){e+=v.charCodeAt(u);var o=.02519603282416938*e;e=o>>>0,o-=e,o*=e,e=o>>>0,o-=e,e+=o*4294967296}return(e>>>0)*23283064365386963e-26};return a}s&&s.exports?s.exports=i:r&&r.amd?r(function(){return i}):this.alea=i})(Mn,n,!1)})(b1);var ck=b1.exports,I1={exports:{}};I1.exports;(function(n){(function(t,s,r){function d(g){var e=this,a="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var u=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^u^u>>>8},g===(g|0)?e.x=g:a+=g;for(var v=0;v<a.length+64;v++)e.x^=a.charCodeAt(v)|0,e.next()}function S(g,e){return e.x=g.x,e.y=g.y,e.z=g.z,e.w=g.w,e}function i(g,e){var a=new d(g),v=e&&e.state,u=function(){return(a.next()>>>0)/4294967296};return u.double=function(){do var o=a.next()>>>11,c=(a.next()>>>0)/4294967296,l=(o+c)/(1<<21);while(l===0);return l},u.int32=a.next,u.quick=u,v&&(typeof v=="object"&&S(v,a),u.state=function(){return S(a,{})}),u}s&&s.exports?s.exports=i:r&&r.amd?r(function(){return i}):this.xor128=i})(Mn,n,!1)})(I1);var fk=I1.exports,R1={exports:{}};R1.exports;(function(n){(function(t,s,r){function d(g){var e=this,a="";e.next=function(){var u=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^(u^u<<1))|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,g===(g|0)?e.x=g:a+=g;for(var v=0;v<a.length+64;v++)e.x^=a.charCodeAt(v)|0,v==a.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function S(g,e){return e.x=g.x,e.y=g.y,e.z=g.z,e.w=g.w,e.v=g.v,e.d=g.d,e}function i(g,e){var a=new d(g),v=e&&e.state,u=function(){return(a.next()>>>0)/4294967296};return u.double=function(){do var o=a.next()>>>11,c=(a.next()>>>0)/4294967296,l=(o+c)/(1<<21);while(l===0);return l},u.int32=a.next,u.quick=u,v&&(typeof v=="object"&&S(v,a),u.state=function(){return S(a,{})}),u}s&&s.exports?s.exports=i:r&&r.amd?r(function(){return i}):this.xorwow=i})(Mn,n,!1)})(R1);var dk=R1.exports,N1={exports:{}};N1.exports;(function(n){(function(t,s,r){function d(g){var e=this;e.next=function(){var v=e.x,u=e.i,o,c;return o=v[u],o^=o>>>7,c=o^o<<24,o=v[u+1&7],c^=o^o>>>10,o=v[u+3&7],c^=o^o>>>3,o=v[u+4&7],c^=o^o<<7,o=v[u+7&7],o=o^o<<13,c^=o^o<<9,v[u]=c,e.i=u+1&7,c};function a(v,u){var o,c=[];if(u===(u|0))c[0]=u;else for(u=""+u,o=0;o<u.length;++o)c[o&7]=c[o&7]<<15^u.charCodeAt(o)+c[o+1&7]<<13;for(;c.length<8;)c.push(0);for(o=0;o<8&&c[o]===0;++o);for(o==8?c[7]=-1:c[o],v.x=c,v.i=0,o=256;o>0;--o)v.next()}a(e,g)}function S(g,e){return e.x=g.x.slice(),e.i=g.i,e}function i(g,e){g==null&&(g=+new Date);var a=new d(g),v=e&&e.state,u=function(){return(a.next()>>>0)/4294967296};return u.double=function(){do var o=a.next()>>>11,c=(a.next()>>>0)/4294967296,l=(o+c)/(1<<21);while(l===0);return l},u.int32=a.next,u.quick=u,v&&(v.x&&S(v,a),u.state=function(){return S(a,{})}),u}s&&s.exports?s.exports=i:r&&r.amd?r(function(){return i}):this.xorshift7=i})(Mn,n,!1)})(N1);var pk=N1.exports,P1={exports:{}};P1.exports;(function(n){(function(t,s,r){function d(g){var e=this;e.next=function(){var v=e.w,u=e.X,o=e.i,c,l;return e.w=v=v+1640531527|0,l=u[o+34&127],c=u[o=o+1&127],l^=l<<13,c^=c<<17,l^=l>>>15,c^=c>>>12,l=u[o]=l^c,e.i=o,l+(v^v>>>16)|0};function a(v,u){var o,c,l,f,m,h=[],p=128;for(u===(u|0)?(c=u,u=null):(u=u+"\0",c=0,p=Math.max(p,u.length)),l=0,f=-32;f<p;++f)u&&(c^=u.charCodeAt((f+32)%u.length)),f===0&&(m=c),c^=c<<10,c^=c>>>15,c^=c<<4,c^=c>>>13,f>=0&&(m=m+1640531527|0,o=h[f&127]^=c+m,l=o==0?l+1:0);for(l>=128&&(h[(u&&u.length||0)&127]=-1),l=127,f=4*128;f>0;--f)c=h[l+34&127],o=h[l=l+1&127],c^=c<<13,o^=o<<17,c^=c>>>15,o^=o>>>12,h[l]=c^o;v.w=m,v.X=h,v.i=l}a(e,g)}function S(g,e){return e.i=g.i,e.w=g.w,e.X=g.X.slice(),e}function i(g,e){g==null&&(g=+new Date);var a=new d(g),v=e&&e.state,u=function(){return(a.next()>>>0)/4294967296};return u.double=function(){do var o=a.next()>>>11,c=(a.next()>>>0)/4294967296,l=(o+c)/(1<<21);while(l===0);return l},u.int32=a.next,u.quick=u,v&&(v.X&&S(v,a),u.state=function(){return S(a,{})}),u}s&&s.exports?s.exports=i:r&&r.amd?r(function(){return i}):this.xor4096=i})(Mn,n,!1)})(P1);var mk=P1.exports,F1={exports:{}};F1.exports;(function(n){(function(t,s,r){function d(g){var e=this,a="";e.next=function(){var u=e.b,o=e.c,c=e.d,l=e.a;return u=u<<25^u>>>7^o,o=o-c|0,c=c<<24^c>>>8^l,l=l-u|0,e.b=u=u<<20^u>>>12^o,e.c=o=o-c|0,e.d=c<<16^o>>>16^l,e.a=l-u|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,g===Math.floor(g)?(e.a=g/4294967296|0,e.b=g|0):a+=g;for(var v=0;v<a.length+20;v++)e.b^=a.charCodeAt(v)|0,e.next()}function S(g,e){return e.a=g.a,e.b=g.b,e.c=g.c,e.d=g.d,e}function i(g,e){var a=new d(g),v=e&&e.state,u=function(){return(a.next()>>>0)/4294967296};return u.double=function(){do var o=a.next()>>>11,c=(a.next()>>>0)/4294967296,l=(o+c)/(1<<21);while(l===0);return l},u.int32=a.next,u.quick=u,v&&(typeof v=="object"&&S(v,a),u.state=function(){return S(a,{})}),u}s&&s.exports?s.exports=i:r&&r.amd?r(function(){return i}):this.tychei=i})(Mn,n,!1)})(F1);var vk=F1.exports,qI={exports:{}};const gk={},xk=Object.freeze(Object.defineProperty({__proto__:null,default:gk},Symbol.toStringTag,{value:"Module"})),yk=XL(xk);(function(n){(function(t,s,r){var d=256,S=6,i=52,g="random",e=r.pow(d,S),a=r.pow(2,i),v=a*2,u=d-1,o;function c(x,T,C){var E=[];T=T==!0?{entropy:!0}:T||{};var A=h(m(T.entropy?[x,y(s)]:x??p(),3),E),w=new l(E),b=function(){for(var I=w.g(S),R=e,N=0;I<a;)I=(I+N)*d,R*=d,N=w.g(1);for(;I>=v;)I/=2,R/=2,N>>>=1;return(I+N)/R};return b.int32=function(){return w.g(4)|0},b.quick=function(){return w.g(4)/4294967296},b.double=b,h(y(w.S),s),(T.pass||C||function(I,R,N,F){return F&&(F.S&&f(F,w),I.state=function(){return f(w,{})}),N?(r[g]=I,R):I})(b,A,"global"in T?T.global:this==r,T.state)}function l(x){var T,C=x.length,E=this,A=0,w=E.i=E.j=0,b=E.S=[];for(C||(x=[C++]);A<d;)b[A]=A++;for(A=0;A<d;A++)b[A]=b[w=u&w+x[A%C]+(T=b[A])],b[w]=T;(E.g=function(I){for(var R,N=0,F=E.i,P=E.j,O=E.S;I--;)R=O[F=u&F+1],N=N*d+O[u&(O[F]=O[P=u&P+R])+(O[P]=R)];return E.i=F,E.j=P,N})(d)}function f(x,T){return T.i=x.i,T.j=x.j,T.S=x.S.slice(),T}function m(x,T){var C=[],E=typeof x,A;if(T&&E=="object")for(A in x)try{C.push(m(x[A],T-1))}catch{}return C.length?C:E=="string"?x:x+"\0"}function h(x,T){for(var C=x+"",E,A=0;A<C.length;)T[u&A]=u&(E^=T[u&A]*19)+C.charCodeAt(A++);return y(T)}function p(){try{var x;return o&&(x=o.randomBytes)?x=x(d):(x=new Uint8Array(d),(t.crypto||t.msCrypto).getRandomValues(x)),y(x)}catch{var T=t.navigator,C=T&&T.plugins;return[+new Date,t,C,t.screen,y(s)]}}function y(x){return String.fromCharCode.apply(0,x)}if(h(r.random(),s),n.exports){n.exports=c;try{o=yk}catch{}}else r["seed"+g]=c})(typeof self<"u"?self:Mn,[],Math)})(qI);var Tk=qI.exports,Sk=ck,Ck=fk,wk=dk,Ek=pk,Ak=mk,bk=vk,mo=Tk;mo.alea=Sk;mo.xor128=Ck;mo.xorwow=wk;mo.xorshift7=Ek;mo.xor4096=Ak;mo.tychei=bk;var wm=mo;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D1{constructor(t,s,r,d,S){this.mean=t,this.stdDev=s,this.dtype=r,this.nextVal=NaN,this.truncated=d,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=S||Math.random();this.random=wm.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const d=this.nextVal;return this.nextVal=NaN,d}let t,s,r=!1;for(;!r;){let d,S,i;do d=2*this.random()-1,S=2*this.random()-1,i=d*d+S*S;while(i>=1||i===0);const g=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*d*g,s=this.mean+this.stdDev*S*g,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(s))&&(this.nextVal=this.convertValue(s)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class Ik{constructor(t,s,r,d){this.alpha=t,this.beta=1/s,this.dtype=r;const S=d||Math.random();this.randu=wm.alea(S.toString()),this.randn=new D1(0,1,r,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,s,r,d,S,i;for(;;){do d=this.randn.nextValue(),i=1+this.c*d;while(i<=0);if(i*=i*i,t=d*d,s=1-.331*t*t,r=.5*t+this.d*(1-i+Math.log(i)),S=this.randu(),S<s||Math.log(S)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(t){return this.dtype==="float32"?t:Math.round(t)}}class Rk{constructor(t=0,s=1,r,d){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=s-t,this.dtype=r,d==null&&(d=Math.random()),typeof d=="number"&&(d=d.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${s} <= 1 and dtype is not float`);this.random=wm.alea(d)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nk(n,t,s=1,r="float32",d){if(Ls(n),s==null&&(s=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const S=new Ik(t,s,r,d),i=jt(n,r);for(let g=0;g<i.values.length;g++)i.values[g]=S.nextValue();return i.toTensor()}const Pk=st({randomGamma_:Nk});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fk(n,t=0,s=1,r,d){if(Ls(n),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const S=new D1(t,s,r,!1,d),i=jt(n,r);for(let g=0;g<i.values.length;g++)i.values[g]=S.nextValue();return i.toTensor()}const O1=st({randomNormal_:Fk});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dk(n,t,s){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return O1(n,0,1,t,s)}const Ok=st({randomStandardNormal_:Dk});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lk(n,t=0,s=1,r="float32",d){Ls(n);const S=jt(n,r),i=new Rk(t,s,null,d);for(let g=0;g<S.values.length;g++)S.values[g]=i.nextValue();return S.toTensor()}const vo=st({randomUniform_:Lk});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mk(n,t,s,r){return vo(n,t,s,"int32",r)}const $k=st({randomUniformInt_:Mk});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bl(n,t,s=1,r="float32"){if(s===0)throw new Error("Cannot have a step of zero");const d={start:n,stop:t,step:s,dtype:r};return it.runKernel(Vy,{},d)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bk(n){const s={input:_(n,"input","real")};return it.runKernel(Gy,s)}const ih=st({real_:Bk});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kk(n){const s={x:_(n,"x","reciprocal")};return it.runKernel(_h,s)}const _I=st({reciprocal_:kk});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zk(n){const s={x:_(n,"x","relu")};return it.runKernel(tc,s)}const Ji=st({relu_:zk});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vk(n){const s={x:_(n,"x","relu6")};return it.runKernel(ec,s)}const L1=st({relu6_:Vk});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gk(n,t){const r={x:_(n,"x","reverse")},d={dims:t};return it.runKernel(tm,r,d)}const ri=st({reverse_:Gk});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uk(n){const t=_(n,"x","reverse");return q(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),ri(t,0)}const Wk=st({reverse1d_:Uk});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xk(n,t){const s=_(n,"x","reverse");return q(s.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${s.rank}.`),ri(s,t)}const Hk=st({reverse2d_:Xk});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yk(n,t){const s=_(n,"x","reverse");return q(s.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${s.rank}.`),ri(s,t)}const Kk=st({reverse3d_:Yk});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jk(n,t){const s=_(n,"x","reverse");return q(s.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${s.rank}.`),ri(s,t)}const Zk=st({reverse4d_:jk});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qk(n){const s={x:_(n,"x","round")};return it.runKernel(nc,s)}const M1=st({round_:Qk});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jk(n){const s={x:_(n,"x","rsqrt","float32")};return it.runKernel(sc,s)}const $1=st({rsqrt_:Jk});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qk(n){const s={x:_(n,"x","selu")};return it.runKernel(ic,s)}const B1=st({selu_:qk});function _k(n,t,s,r,d,S=[1,1],i="NHWC"){const g=_(n,"x","separableConv2d"),e=_(t,"depthwiseFilter","separableConv2d"),a=_(s,"pointwiseFilter","separableConv2d");let v=g,u=!1;if(g.rank===3&&(u=!0,v=at(g,[1,g.shape[0],g.shape[1],g.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");q(v.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${v.rank}.`),q(e.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${e.rank}.`),q(a.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${e.rank}.`),q(a.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${a.shape[0]}.`),q(a.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${a.shape[1]}.`);const o=e.shape[2],c=e.shape[3];q(a.shape[2]===o*c,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${o*c}, but got ${a.shape[2]}.`);const l=Tc(v,e,r,d,i,S),m=sa(l,a,1,"valid",i);return u?at(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const k1=st({separableConv2d_:_k});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function t8(n,t){const s=_(n,"x","setdiff1d"),r=_(t,"y","setdiff1d");q(s.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${s.dtype}) and y (${r.dtype}).`),q(s.rank===1,()=>`x should be 1D tensor, but got x (${s.shape}).`),q(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const d=await s.data(),S=await r.data(),i=new Set(S);let g=0;for(let v=0;v<d.length;v++)i.has(d[v])||g++;const e=new nn([g],s.dtype),a=new nn([g],"int32");for(let v=0,u=0;v<d.length;v++)i.has(d[v])||(e.values[u]=d[v],a.values[u]=v,u++);return[e.toTensor(),a.toTensor()]}const e8=t8;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8(n){const s={x:_(n,"x","sign")};return it.runKernel(oc,s)}const tR=st({sign_:n8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8(n){const s={x:_(n,"x","sin","float32")};return it.runKernel(rc,s)}const z1=st({sin_:s8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i8(n){const s={x:_(n,"x","sinh")};return it.runKernel(ac,s)}const V1=st({sinh_:i8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r8(n,t,s){const r=_(n,"x","slice1d");return q(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),ne(r,[t],[s])}const Em=st({slice1d_:r8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a8(n,t,s){const r=_(n,"x","slice2d");return q(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),ne(r,t,s)}const G1=st({slice2d_:a8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o8(n,t,s){const r=_(n,"x","slice3d");return q(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),ne(r,t,s)}const Am=st({slice3d_:o8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l8(n,t,s){const r=_(n,"x","slice4d");return q(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),ne(r,t,s)}const rh=st({slice4d_:l8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8(n,t=-1){const s=_(n,"logits","softmax","float32");if(t===-1&&(t=s.rank-1),t!==s.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s.rank} and dim was ${t}`);const r={logits:s},d={dim:t};return it.runKernel(am,r,d)}const bm=st({softmax_:u8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h8(n){q(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);const t={input:n};return it.runKernel(Cy,t)}const Im=st({fft_:h8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c8(n){q(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);const t={input:n};return it.runKernel(by,t)}const ah=st({ifft_:c8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8(n){const t=n.shape[n.shape.length-1],s=n.size/t;let r;if(t<=2){const d=at(n,[s,t]);r=ah(d)}else{const d=[s,2*(t-1)],S=at(ih(n),[s,t]),i=at(mm(n),[s,t]),g=ri(ne(S,[0,1],[s,t-2]),1),e=rt(ri(ne(i,[0,1],[s,t-2]),1),Vt(-1)),a=Ze([S,g],1),v=Ze([i,e],1),u=at(ea(a,v),[d[0],d[1]]);r=ah(u)}if(r=ih(r),n.rank===3&&n.shape[0]!==0){const d=r,S=n.shape[0];r=at(r,[S,r.shape[0]/S,r.shape[1]]),d.dispose()}return r}const U1=st({irfft_:f8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d8(n,t,s=0){const d={x:_(n,"x","split")},S={numOrSizeSplits:t,axis:s};return it.runKernel(rm,d,S)}const ds=st({split_:d8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8(n,t){q(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let s=n.shape[n.shape.length-1];const r=n.size/s;let d;if(t!=null&&t<s){const l=n.shape.map(m=>0),f=n.shape.map(m=>m);f[n.shape.length-1]=t,d=ne(n,l,f),s=t}else if(t!=null&&t>s){const l=n.shape.map(f=>f);l[n.shape.length-1]=t-s,d=Ze([n,_e(l)],n.shape.length-1),s=t}else d=n;const S=ie(d),i=at(ea(d,S),[r,s]),g=Im(i),e=Math.floor(s/2)+1,a=ih(g),v=mm(g),u=ds(a,[e,s-e],a.shape.length-1),o=ds(v,[e,s-e],v.shape.length-1),c=d.shape.slice();return c[d.shape.length-1]=e,at(ea(u[0],o[0]),c)}const Rm=st({rfft_:p8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m8(n,t){let s=_(n,"a","squaredDifference"),r=_(t,"b","squaredDifference");[s,r]=ze(s,r),Ht(s.shape,r.shape);const d={a:s,b:r},S={};return it.runKernel(cc,d,S)}const W1=st({squaredDifference_:m8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v8(n,t){const s=_(n,"x","squeeze","string_or_numeric");return at(s,da(s.shape,t).newShape)}const go=st({squeeze_:v8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8(n,t=0){const s=Td(n,"tensors","stack","string_or_numeric");q(s.length>=1,()=>"Pass at least one tensor to tf.stack"),s.length>0&&q(t<=s[0].rank,()=>"Axis must be <= rank of the tensor");const r=s,d={axis:t};return it.runKernel(Kp,r,d)}const Fs=st({stack_:g8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x8(n,t=0){const r={x:_(n,"x","step")},d={alpha:t};return it.runKernel(vc,r,d)}const Ul=st({step_:x8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y8(n,t,s,r,d=0,S=0,i=0,g=0,e=0){const v={x:_(n,"x","stridedSlice","string_or_numeric")},u={begin:t,end:s,strides:r,beginMask:d,endMask:S,ellipsisMask:i,newAxisMask:g,shrinkAxisMask:e};return it.runKernel(_y,v,u)}const eR=st({stridedSlice_:y8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8(n){const s={x:_(n,"x","tan","float32")};return it.runKernel(dc,s)}const nR=st({tan_:T8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gn(n,t){$l(n);const s=ma(n,t);if(s.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return va(n,null,s,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mu(n,t,s){if($l(n),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=ma(n,s);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return va(n,t,r,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8(n,t,s){if($l(n),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=ma(n,s);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return va(n,t,r,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8(n,t,s){if($l(n),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=ma(n,s);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return va(n,t,r,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w8(n,t,s){if($l(n),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=ma(n,s);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return va(n,t,r,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8(n,t,s){if($l(n),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=ma(n,s);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,va(n,t,r,s)}function sR(n,t,s){const r=t.rank>1?t.shape[t.rank-1]:1,d=t.rank>1?t.rank-1:1,S=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${s.shape}, indices.shape: ${t.shape}, shape: ${n}, sliceDim: ${r}, and batchDim: ${d}.`;if(s.rank<d)throw new Error(S+` update.rank < ${d}. `);if(n.length<r+(s.rank-d))throw new Error(S+` Output shape length < ${r+(s.rank-d)}`);if(s.rank!==d+n.length-r)throw new Error(S+` update.rank != ${d+n.length-r}`);for(let i=0;i<d;++i)if(s.shape[i]!==t.shape[i])throw new Error(S+` updates.shape[${i}] (${s.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<s.rank-d;++i)if(s.shape[i+d]!==n[i+r])throw new Error(S+` updates.shape[${i+d}] (${s.shape[i+d]}) != shape[${i+d}] (${n[i+d]})`)}function X1(n,t,s){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(n.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${n.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(s.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${s}`);if(s.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(n.size===0)throw new Error(`Updates specified for empty output. updates shape: ${n.shape}`)}sR(s,t,n)}function xo(n,t,s){const r=t.shape.length,d=r>1?t.shape[r-1]:1,S=s.length;let i=1;for(let u=d;u<S;++u)i*=s[u];const g=d<1?1:d,e=mt(t.shape)/g,a=[...kt(s.slice(0,d)),1],v=mt(s);return{sliceRank:d,numUpdates:e,sliceSize:i,strides:a,outputSize:v}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A8(n,t,s){const r=_(n,"tensor","tensorScatterupdate"),d=_(t,"indices","tensorScatterupdate","int32"),S=_(s,"updates","tensorScatterupdate");if(X1(S,d,r.shape),r.dtype!==S.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${S.dtype}.`);const i={tensor:r,indices:d,updates:S},g={};return it.runKernel(Hy,i,g)}const b8=st({tensorScatterUpdate_:A8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I8(n,t=1,s=!0){const r=_(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const d=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>d)throw new Error(`'k' passed to topk() must be <= the last dimension (${d}) but got ${t}`);const S={x:r},i={k:t,sorted:s},[g,e]=it.runKernel(s1,S,i);return{values:g,indices:e}}const iR=st({topk_:I8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8(n,t=0,s=1,r,d){if(Ls(n),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const S=new D1(t,s,r,!0,d),i=jt(n,r);for(let g=0;g<i.values.length;g++)i.values[g]=S.nextValue();return i.toTensor()}const H1=st({truncatedNormal_:R8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8(n,t=0){const s=_(n,"x","unique","string_or_numeric");q(s.rank>0,()=>"The input tensor must be at least 1D");const r={x:s},d={axis:t},[S,i]=it.runKernel(r1,r,d);return{values:S,indices:i}}const rR=st({unique_:N8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8(n,t,s){const r=_(n,"x","unsortedSegmentSum"),d=_(t,"segmentIds","unsortedSegmentSum","int32");q(yl(s),()=>"numSegments must be of dtype int");const S={x:r,segmentIds:d},i={numSegments:s};return it.runKernel(um,S,i)}const Y1=st({unsortedSegmentSum_:P8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8(n,t=0){const s=_(n,"x","unstack","string_or_numeric");q(t>=-s.shape.length&&t<s.shape.length,()=>`Axis = ${t} is not in [-${s.shape.length}, ${s.shape.length})`);const r={value:s},d={axis:t};return it.runKernel(lm,r,d)}const ai=st({unstack_:F8});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8(n,t){return E1(n,t,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aR(n,t=!0,s,r){return it.makeVariable(n,t,s,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K1(n,t){const s=[];for(let S=0;S<t.length;S++)t[S]&&s.push(S);const r=jt(n,"int32"),d=jt([s.length,n.length],"int32");for(let S=0;S<s.length;S++){const i=r.indexToLoc(s[S]),g=S*n.length;d.values.set(i,g)}return d.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function O8(n){const t=_(n,"condition","whereAsync","bool"),s=await t.data(),r=K1(t.shape,s);return n!==t&&t.dispose(),r}const oR=O8;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function L8(n,t,s){const r=_(n,"tensor","boolMask"),d=_(t,"mask","boolMask","bool"),S=s??0,i=d.rank,g=r.shape;q(i>0,()=>"mask cannot be scalar"),xs(g.slice(S,S+i),d.shape,"mask's shape must match the first K dimensions of tensor's shape,");let e=1;for(let f=S;f<S+i;f++)e*=g[f];const a=g.slice(0,S).concat([e],g.slice(S+i)),v=at(r,a),u=at(d,[-1]),o=await oR(u),c=go(o,[1]),l=Ec(v,c,S);return n!==r&&r.dispose(),t!==d&&d.dispose(),c.dispose(),v.dispose(),u.dispose(),o.dispose(),l}const M8=L8;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $8(n,t,s){const r=_(n,"x","transpose");if(t==null&&(t=r.shape.map((i,g)=>g).reverse()),q(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(i=>{q(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();const d={x:r},S={perm:t};return r.dtype==="complex64"?ft(()=>{let i=ih(r),g=mm(r);return i=it.runKernel(rl,{x:i},S),g=it.runKernel(rl,{x:g},S),s&&(g=Ee(g)),ea(i,g)}):it.runKernel(rl,d,S)}const se=st({transpose_:$8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B8(n,t,s,r,d=!0){const S=_(n,"v","movingAverage"),i=_(t,"x","movingAverage"),g=_(s,"decay","movingAverage");I6(S,i),q(ee(S.shape,i.shape),()=>"Shape mismatch in v and x");const e=Vt(1),a=Ft(e,g);let v=rt(Ft(i,S),a);if(d){q(r!=null,()=>"When using zeroDebias: true, step is required.");const u=_(r,"step","movingAverage");v=$t(v,Ft(e,ia(g,u)))}return St(S,v)}const k8=st({movingAverage_:B8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8(n,t,s){Ls(s);const r=_(n,"indices","scatterND","int32"),d=_(t,"updates","scatterND");X1(d,r,s);const S={indices:r,updates:d},i={shape:s};return it.runKernel(Xy,S,i)}const V8=st({scatterND_:z8});function G8(n,t,s,r){if(n.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${n.shape}.`);const d=n.rank>0?n.shape[0]:1,S=n.rank>1?n.shape[1]:1;if(s.length!==S)throw new Error(`outputShape has incorrect number of elements:, ${s.length}, should be: ${S}.`);const i=t.size;if(!(t.rank===0||t.rank===1&&i===d))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${d}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U8(n,t,s,r=0){Ls(s);const d=_(n,"sparseIndices","sparseToDense","int32"),S=_(t,"sparseValues","sparseToDense","string_or_numeric"),i=_(r,"defaultValue","sparseToDense",S.dtype);G8(d,S,s,i);const g={sparseIndices:d,sparseValues:S,defaultValue:i},e={outputShape:s};return it.runKernel(Jy,g,e)}const W8=st({sparseToDense_:U8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X8(n,t){const s=_(t,"indices","gatherND","int32"),d={params:_(n,"x","gatherND","string_or_numeric"),indices:s};return it.runKernel(Ay,d)}const H8=st({gatherND_:X8});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y8(n,t){if(t==null)return n.shape.slice();if(ee(n.shape,t))return t;if(n.shape.length===t.length){const s=[];for(let r=0;r<n.shape.length;r++)t[r]==null&&n.shape[r]!=null?s.push(n.shape[r]):s.push(t[r]);return s}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8(n,t,s,r){const d=_(n,"x","dropout");if(q(d.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${d.dtype} tensor instead.`),q(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return n instanceof be?d.clone():d;const S=Y8(d,s),i=1-t,g=$t(wc(St(vo(S,0,1,"float32",r),i)),i);return rt(d,g)}const lR=st({dropout_:K8});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uR(n){return Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2))))}function j1(n,t,s){const r=1-n%2,d=new Float32Array(n);for(let S=0;S<n;++S){const i=2*Math.PI*S/(n+r-1);d[S]=t-s*Math.cos(i)}return Gn(d,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function j8(n,t,s=1){const r=_(n,"predictions","inTopK"),d=_(t,"targets","inTopK");q(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),q(r.rank-1===d.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${d.rank}`),xs(r.shape.slice(0,r.shape.length-1),d.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const S=r.shape[r.shape.length-1];q(s>0&&s<=S,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${S}), but got ${s}`);const i=await r.data(),g=await d.data(),[e,a]=[i.length/S,S],v=Tn("bool",e);for(let u=0;u<e;u++){const o=u*a,c=i.subarray(o,o+a),l=[];for(let f=0;f<c.length;f++)l.push({value:c[f],index:f});l.sort((f,m)=>m.value-f.value),v[u]=0;for(let f=0;f<s;f++)if(l[f].index===g[u]){v[u]=1;break}}return n!==r&&r.dispose(),t!==d&&d.dispose(),ti(v,d.shape,"bool")}const Z8=j8;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q8(n,t,s,r,d,S="NHWC",i){let g=n;n.rank===3&&(g=at(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let e=t;e.rank===3&&(e=at(t,[1,t.shape[0],t.shape[1],t.shape[2]])),q(g.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${g.shape}.`),q(e.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${e.shape}.`),q(s.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${s}.`);const a=S==="NHWC"?g.shape[3]:g.shape[1],v=S==="NHWC"?e.shape[3]:e.shape[1];q(a===s[2],()=>`Error in conv2dDerFilter: depth of input ${a}) must match input depth in filter (${s[2]}.`),q(v===s[3],()=>`Error in conv2dDerFilter: depth of dy (${v}) must match output depth for filter (${s[3]}).`),Xn("conv2dDerFilter",d,i);const u={x:g,dy:e},o={strides:r,pad:d,dataFormat:S,dimRoundingMode:i,filterShape:s};return it.runKernel(hy,u,o)}const Z1=st({conv2DBackpropFilter_:Q8});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nm(n,t,s){if(s==null||s==="linear")return n;if(s==="relu")return rt(n,Ul(t));throw new Error(`Cannot compute gradient for fused activation ${s}.`)}function Pm(n,t){let s=t;const r=an(n.shape,t.shape);return r.length>0&&(s=Ot(s,r)),at(s,n.shape)}function Fm(n,t,s,r){if(t==="linear")return n;if(t==="relu")return Ji(n);if(t==="elu")return Sc(n);if(t==="relu6")return L1(n);if(t==="prelu")return Cm(n,s);if(t==="leakyrelu")return vm(n,r);if(t==="sigmoid")return Hi(n);throw new Error(`Unknown fused activation ${t}.`)}const Dm=(n,t)=>!(n>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J8({x:n,filter:t,strides:s,pad:r,dataFormat:d="NHWC",dilations:S=[1,1],dimRoundingMode:i,bias:g,activation:e="linear",preluActivationWeights:a,leakyreluAlpha:v}){if(e=e||"linear",Dm(it.state.gradientDepth,e)===!1){q(d==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${d} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=sa(n,t,s,r,d,S,i);return g!=null&&(C=St(C,g)),Fm(C,e,a,v)}const u=_(n,"x","conv2d","float32"),o=_(t,"filter","conv2d","float32");let c=u,l=!1;u.rank===3&&(l=!0,c=at(u,[1,u.shape[0],u.shape[1],u.shape[2]])),q(c.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${c.rank}.`),q(o.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${o.rank}.`),Xn("fused conv2d",r,i);const f=d==="NHWC"?c.shape[3]:c.shape[1];q(o.shape[2]===f,()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${o.shape[2]}.`),q(Sn(s,S),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${s} and dilations '${S}'`);const m=pn(c.shape,o.shape,s,S,r,i);let h;g!=null&&(h=_(g,"bias","fused conv2d"),[h]=ze(h,u),d==="NHWC"?Ht(m.outShape,h.shape):(q(h.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${h.shape.length}.`),q(h.shape.length===0||h.shape[0]===m.outChannels||h.shape[0]===1,()=>`Error in fused conv2d: bias shape (${h.shape}) is not compatible with the number of output channels (${m.outChannels})`)));let p;if(a!=null){const C=a.shape;if(q(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)q(C[0]===1||C[0]===m.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${m.outChannels}).`);else if(C.length===3)try{Ht(C,m.outShape)}catch{const A=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${m.outShape}).`;throw Error(A)}p=_(a,"prelu weights","fused conv2d")}const y=(C,E)=>{q(d==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${d} but only NHWC is currently supported.`);const[A,w,b,I]=E,R=Nm(C,b,e);q(na(S),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${S}'`);const N=m1(w.shape,R,A,s,r),F=Z1(w,R,A.shape,s,r),P=[N,F];if(I!=null){const O=Pm(I,R);P.push(O)}return P},x={x:c,filter:o,bias:h,preluActivationWeights:p},T={strides:s,pad:r,dataFormat:d,dilations:S,dimRoundingMode:i,activation:e,leakyreluAlpha:v};return g==null?yr((E,A,w)=>{let b=it.runKernel(md,x,T);return w([A,E,b]),l&&(b=at(b,[b.shape[1],b.shape[2],b.shape[3]])),{value:b,gradFunc:y}})(c,o):yr((E,A,w,b)=>{let I=it.runKernel(md,x,T);return b([A,E,I,w]),l&&(I=at(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:y}})(c,o,h)}const hR=st({fusedConv2d_:J8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q8(n,t,s,r,d,S=[1,1],i){let g=n;n.rank===3&&(g=at(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let e=t;e.rank===3&&(e=at(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const a={x:g,dy:e},v={strides:r,pad:d,dimRoundingMode:i,dilations:S,filterShape:s};return it.runKernel(gy,a,v)}const cR=st({depthwiseConv2dNativeBackpropFilter_:q8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8(n,t,s,r,d,S=[1,1],i){let g=t,e=!1;t.rank===3&&(e=!0,g=at(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const a={dy:g,filter:s},v={strides:r,pad:d,dimRoundingMode:i,dilations:S,inputShape:n},u=it.runKernel(xy,a,v);return e?at(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const fR=st({depthwiseConv2dNativeBackpropInput_:_8});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t7({x:n,filter:t,strides:s,pad:r,dataFormat:d="NHWC",dilations:S=[1,1],dimRoundingMode:i,bias:g,activation:e="linear",preluActivationWeights:a,leakyreluAlpha:v}){if(Dm(it.state.gradientDepth,e)===!1){let T=Tc(n,t,s,r,d,S,i);return g!=null&&(T=St(T,g)),Fm(T,e,a,v)}const u=_(n,"x","depthwiseConv2d","float32"),o=_(t,"filter","depthwiseConv2d","float32");let c=u,l=!1;u.rank===3&&(l=!0,c=at(u,[1,u.shape[0],u.shape[1],u.shape[2]])),q(c.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),q(o.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${o.rank}.`),q(c.shape[3]===o.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${c.shape[3]}) must match the inChannels dimension in filter ${o.shape[2]}.`),S==null&&(S=[1,1]),q(Sn(s,S),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${S}'`),Xn("fused depthwiseConv2d",r,i);const f=pn(c.shape,o.shape,s,S,r,i,!0);let m;g!=null&&(m=_(g,"bias","fused conv2d"),[m]=ze(m,u),Ht(f.outShape,m.shape));let h;a!=null&&(h=_(a,"prelu weights","fused depthwiseConv2d"));const p=(T,C)=>{q(na(S),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${S}'`);const[E,A,w,b]=C,I=Nm(T,w,e),R=fR(A.shape,I,E,s,r,S,i),N=cR(A,I,E.shape,s,r,S,i);if(b!=null){const F=Pm(m,I);return[R,N,F]}return[R,N]},y={x:c,filter:o,bias:m,preluActivationWeights:h},x={strides:s,pad:r,dataFormat:d,dilations:S,dimRoundingMode:i,activation:e,leakyreluAlpha:v};return g==null?yr((C,E,A)=>{let w=it.runKernel(vd,y,x);return A([E,C,w]),l&&(w=at(w,[w.shape[1],w.shape[2],w.shape[3]])),{value:w,gradFunc:p}})(c,o):yr((C,E,A,w)=>{let b=it.runKernel(vd,y,x);return w([E,C,b,A]),l&&(b=at(b,[b.shape[1],b.shape[2],b.shape[3]])),{value:b,gradFunc:p}})(c,o,m)}const e7=st({fusedDepthwiseConv2d_:t7});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7({a:n,b:t,transposeA:s=!1,transposeB:r=!1,bias:d,activation:S="linear",preluActivationWeights:i,leakyreluAlpha:g=.2}){if(Dm(it.state.gradientDepth,S)===!1){let I=qt(n,t,s,r);return d!=null&&(I=St(I,d)),Fm(I,S,i,g)}let e=_(n,"a","fused matMul"),a=_(t,"b","fused matMul");[e,a]=ze(e,a);const v=s?e.shape[e.rank-2]:e.shape[e.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],o=s?e.shape[e.rank-1]:e.shape[e.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],l=e.shape.slice(0,-2),f=a.shape.slice(0,-2),m=mt(l),h=mt(f);q(v===u,()=>`Error in fused matMul: inner shapes (${v}) and (${u}) of Tensors with shapes ${e.shape} and ${a.shape} and transposeA=${s} and transposeB=${r} must match.`);const y=Ht(e.shape.slice(0,-2),a.shape.slice(0,-2)).concat([o,c]),x=s?at(e,[m,v,o]):at(e,[m,o,v]),T=r?at(a,[h,c,u]):at(a,[h,u,c]);let C;d!=null&&(C=_(d,"bias","fused matMul"),[C]=ze(C,e),Ht(y,C.shape));let E;i!=null&&(E=_(i,"prelu weights","fused matMul"));const A=(I,R)=>{const[N,F,P,O]=R,M=Nm(at(I,P.shape),P,S);let L,k;if(!s&&!r?(L=qt(M,F,!1,!0),k=qt(N,M,!0,!1)):!s&&r?(L=qt(M,F,!1,!1),k=qt(M,N,!0,!1)):s&&!r?(L=qt(F,M,!1,!0),k=qt(N,M,!1,!1)):(L=qt(F,M,!0,!0),k=qt(M,N,!0,!0)),d!=null){const V=Pm(O,M);return[L,k,V]}else return[L,k]},w={a:x,b:T,bias:C,preluActivationWeights:E},b={transposeA:s,transposeB:r,activation:S,leakyreluAlpha:g};return d==null?yr((R,N,F)=>{const P=it.runKernel(pd,w,b);return F([R,N,P]),{value:at(P,y),gradFunc:A}})(x,T):yr((R,N,F,P)=>{const O=it.runKernel(pd,w,b);return P([R,N,O,F]),{value:at(O,y),gradFunc:A}})(x,T,C)}const w0=st({fusedMatMul_:n7});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s7=Object.freeze(Object.defineProperty({__proto__:null,conv2d:hR,depthwiseConv2d:e7,matMul:w0},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i7(n){return j1(n,.54,.46)}const r7=st({hammingWindow_:i7});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a7(n){return j1(n,.5,.5)}const dR=st({hannWindow_:a7});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7(n,t,s,r=!1,d=0){let S=0;const i=[];for(;S+t<=n.size;)i.push(ne(n,S,t)),S+=s;if(r)for(;S<n.size;){const g=S+t-n.size,e=Ze([ne(n,S,t-g),Vl([g],d)]);i.push(e),S+=s}return i.length===0?Mu([],[0,t]):at(Ze(i),[i.length,t])}const pR=st({frame_:o7});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l7(n,t,s,r,d=dR){r==null&&(r=uR(t));const S=pR(n,t,s),i=rt(S,d(t));return Rm(i,r)}const u7=st({stft_:l7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h7(n,t,s,r,d="bilinear",S=0){const i=_(n,"image","cropAndResize"),g=_(t,"boxes","cropAndResize","float32"),e=_(s,"boxInd","cropAndResize","int32"),a=g.shape[0];q(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),q(g.rank===2&&g.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${a},4] but had shape ${g.shape}.`),q(e.rank===1&&e.shape[0]===a,()=>`Error in cropAndResize: boxInd must be have size [${a}] but had shape ${g.shape}.`),q(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),q(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),q(d==="bilinear"||d==="nearest",()=>`method must be bilinear or nearest, but was ${d}`);const v={image:i,boxes:g,boxInd:e},u={method:d,extrapolationValue:S,cropSize:r};return it.runKernel(py,v,u)}const c7=st({cropAndResize_:h7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f7(n){const t=_(n,"image","flipLeftRight","float32");q(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const s={image:t};return it.runKernel(Ey,s,{})}const d7=st({flipLeftRight_:f7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p7(n){const t=_(n,"image","grayscaleToRGB"),s=t.rank-1,r=t.shape[s];q(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),q(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const d=new Array(t.rank);return d.fill(1,0,s),d[s]=3,Zs(t,d)}const m7=st({grayscaleToRGB_:p7});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v7(n){const t=_(n,"image","RGBToGrayscale"),s=t.rank-1,r=t.shape[s];q(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),q(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const d=t.dtype,S=Nt(t,"float32"),i=Gn([.2989,.587,.114]);let g;switch(t.rank){case 2:g=ko("ij,j->i",S,i);break;case 3:g=ko("ijk,k->ij",S,i);break;case 4:g=ko("ijkl,l->ijk",S,i);break;case 5:g=ko("ijklm,m->ijkl",S,i);break;case 6:g=ko("ijklmn,n->ijklm",S,i);break;default:throw new Error("Not a valid tensor rank.")}return g=zn(g,-1),Nt(g,d)}const g7=st({rgbToGrayscale_:v7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x7(n,t,s=0,r=.5){const d=_(n,"image","rotateWithOffset","float32");q(d.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${d.rank}.`);const S={image:d},i={radians:t,fillValue:s,center:r};return it.runKernel(a1,S,i)}const y7=st({rotateWithOffset_:x7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wl(n,t,s,r,d,S){r==null&&(r=.5),d==null&&(d=Number.NEGATIVE_INFINITY),S==null&&(S=0);const i=n.shape[0];return s=Math.min(s,i),q(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),q(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),q(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),q(t.rank===1,()=>"scores must be a 1D tensor"),q(t.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`),q(0<=S&&S<=1,()=>`softNmsSigma must be in [0, 1], but was '${S}'`),{maxOutputSize:s,iouThreshold:r,scoreThreshold:d,softNmsSigma:S}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T7(n,t,s,r=.5,d=Number.NEGATIVE_INFINITY){const S=_(n,"boxes","nonMaxSuppression","float32"),i=_(t,"scores","nonMaxSuppression","float32"),g=Wl(S,i,s,r,d);s=g.maxOutputSize,r=g.iouThreshold,d=g.scoreThreshold;const e={maxOutputSize:s,iouThreshold:r,scoreThreshold:d};return it.runKernel(Ly,{boxes:S,scores:i},e)}const S7=st({nonMaxSuppression_:T7});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C7(n,t,s){const r=w7(n,t,s),d=r<0?-(r+1):r;n.splice(d,0,t)}function w7(n,t,s){return A7(n,t,s||E7)}function E7(n,t){return n>t?1:n<t?-1:0}function A7(n,t,s){let r=0,d=n.length,S=0,i=!1;for(;r<d;){S=r+(d-r>>>1);const g=s(t,n[S]);g>0?r=S+1:(d=S,i=!g)}return i?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q1(n,t,s,r,d){return _1(n,t,s,r,d,0)}function J1(n,t,s,r,d,S){return _1(n,t,s,r,d,0,!1,S,!0)}function q1(n,t,s,r,d,S){return _1(n,t,s,r,d,S,!0)}function _1(n,t,s,r,d,S,i=!1,g=!1,e=!1){const a=[];for(let m=0;m<t.length;m++)t[m]>d&&a.push({score:t[m],boxIndex:m,suppressBeginIndex:0});a.sort(FC);const v=S>0?-.5/S:0,u=[],o=[];for(;u.length<s&&a.length>0;){const m=a.pop(),{score:h,boxIndex:p,suppressBeginIndex:y}=m;if(h<d)break;let x=!1;for(let T=u.length-1;T>=y;--T){const C=b7(n,p,u[T]);if(C>=r){x=!0;break}if(m.score=m.score*I7(r,v,C),m.score<=d)break}m.suppressBeginIndex=u.length,x||(m.score===h?(u.push(p),o.push(m.score)):m.score>d&&C7(a,m,FC))}const c=u.length,l=s-c;g&&l>0&&(u.push(...new Array(l).fill(0)),o.push(...new Array(l).fill(0)));const f={selectedIndices:u};return i&&(f.selectedScores=o),e&&(f.validOutputs=c),f}function b7(n,t,s){const r=n.subarray(t*4,t*4+4),d=n.subarray(s*4,s*4+4),S=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),g=Math.max(r[0],r[2]),e=Math.max(r[1],r[3]),a=Math.min(d[0],d[2]),v=Math.min(d[1],d[3]),u=Math.max(d[0],d[2]),o=Math.max(d[1],d[3]),c=(g-S)*(e-i),l=(u-a)*(o-v);if(c<=0||l<=0)return 0;const f=Math.max(S,a),m=Math.max(i,v),h=Math.min(g,u),p=Math.min(e,o),y=Math.max(h-f,0)*Math.max(p-m,0);return y/(c+l-y)}function I7(n,t,s){const r=Math.exp(t*s*s);return s<=n?r:0}function FC(n,t){return n.score-t.score||n.score===t.score&&t.boxIndex-n.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function R7(n,t,s,r=.5,d=Number.NEGATIVE_INFINITY){const S=_(n,"boxes","nonMaxSuppressionAsync"),i=_(t,"scores","nonMaxSuppressionAsync"),g=Wl(S,i,s,r,d);s=g.maxOutputSize,r=g.iouThreshold,d=g.scoreThreshold;const e=await Promise.all([S.data(),i.data()]),a=e[0],v=e[1],{selectedIndices:u}=Q1(a,v,s,r,d);return S!==n&&S.dispose(),i!==t&&i.dispose(),Gn(u,"int32")}const N7=R7;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P7(n,t,s,r=.5,d=Number.NEGATIVE_INFINITY,S=0){const i=_(n,"boxes","nonMaxSuppression"),g=_(t,"scores","nonMaxSuppression"),e=Wl(i,g,s,r,d,S);s=e.maxOutputSize,r=e.iouThreshold,d=e.scoreThreshold,S=e.softNmsSigma;const a={boxes:i,scores:g},v={maxOutputSize:s,iouThreshold:r,scoreThreshold:d,softNmsSigma:S},u=it.runKernel($y,a,v);return{selectedIndices:u[0],selectedScores:u[1]}}const F7=st({nonMaxSuppressionWithScore_:P7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function D7(n,t,s,r=.5,d=Number.NEGATIVE_INFINITY,S=0){const i=_(n,"boxes","nonMaxSuppressionAsync"),g=_(t,"scores","nonMaxSuppressionAsync"),e=Wl(i,g,s,r,d,S);s=e.maxOutputSize,r=e.iouThreshold,d=e.scoreThreshold,S=e.softNmsSigma;const a=await Promise.all([i.data(),g.data()]),v=a[0],u=a[1],{selectedIndices:o,selectedScores:c}=q1(v,u,s,r,d,S);return i!==n&&i.dispose(),g!==t&&g.dispose(),{selectedIndices:Gn(o,"int32"),selectedScores:Gn(c)}}const O7=D7;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L7(n,t,s,r=.5,d=Number.NEGATIVE_INFINITY,S=!1){const i=_(n,"boxes","nonMaxSuppression"),g=_(t,"scores","nonMaxSuppression"),e=Wl(i,g,s,r,d,null),a=e.maxOutputSize,v=e.iouThreshold,u=e.scoreThreshold,o={boxes:i,scores:g},c={maxOutputSize:a,iouThreshold:v,scoreThreshold:u,padToMaxOutputSize:S},l=it.runKernel(My,o,c);return{selectedIndices:l[0],validOutputs:l[1]}}const M7=st({nonMaxSuppressionPadded_:L7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function $7(n,t,s,r=.5,d=Number.NEGATIVE_INFINITY,S=!1){const i=_(n,"boxes","nonMaxSuppressionAsync"),g=_(t,"scores","nonMaxSuppressionAsync"),e=Wl(i,g,s,r,d,null),a=e.maxOutputSize,v=e.iouThreshold,u=e.scoreThreshold,[o,c]=await Promise.all([i.data(),g.data()]),{selectedIndices:l,validOutputs:f}=J1(o,c,a,v,u,S);return i!==n&&i.dispose(),g!==t&&g.dispose(),{selectedIndices:Gn(l,"int32"),validOutputs:Vt(f,"int32")}}const B7=$7;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k7(n,t,s=!1,r=!1){const d=_(n,"images","resizeBilinear");q(d.rank===3||d.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${d.rank}.`),q(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),q(r===!1||s===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let S=d,i=!1;d.rank===3&&(i=!0,S=at(d,[1,d.shape[0],d.shape[1],d.shape[2]]));const g={images:S},e={alignCorners:s,halfPixelCenters:r,size:t},a=it.runKernel(_p,g,e);return i?at(a,[a.shape[1],a.shape[2],a.shape[3]]):a}const mR=st({resizeBilinear_:k7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z7(n,t,s=!1,r=!1){const d=_(n,"images","resizeNearestNeighbor");q(d.rank===3||d.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${d.rank}.`),q(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),q(d.dtype==="float32"||d.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),q(r===!1||s===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let S=d,i=!1;d.rank===3&&(i=!0,S=at(d,[1,d.shape[0],d.shape[1],d.shape[2]]));const g={images:S},e={alignCorners:s,halfPixelCenters:r,size:t},a=it.runKernel(qp,g,e);return i?at(a,[a.shape[1],a.shape[2],a.shape[3]]):a}const vR=st({resizeNearestNeighbor_:z7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V7(n,t="binary",s=!1,r=.5){const d=_(n,"image","threshold"),S=.2989,i=.587,g=.114,e=d.shape[0]*d.shape[1];let a=rt(Gn([r]),255),v,u,o,c;if(q(d.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${d.rank}.`),q(d.shape[2]===3||d.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${d.shape[2]}.`),q(d.dtype==="int32"||d.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${d.dtype}.`),q(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),d.shape[2]===3){[v,u,o]=ds(d,[1,1,1],-1);const m=rt(v,S),h=rt(u,i),p=rt(o,g);c=St(St(m,h),p)}else c=n;if(t==="otsu"){const m=wI(Nt(M1(c),"int32"),ti([]),256);a=G7(m,e)}const l=s?po(c,a):Ts(c,a);return Nt(rt(l,255),"int32")}function G7(n,t){let s=Gn([-1]),r=Gn([0]),d=Gn([0]),S,i,g,e,a,v;for(let u=0;u<n.size-1;u++){S=ne(n,0,u+1),i=ne(n,u+1),a=$t(Ot(S),t),v=$t(Ot(i),t);const o=Ot(rt(S,bl(0,S.size)));g=$t(o,Ot(S));const c=Vl(i.shape,S.size),l=St(bl(0,i.size),c),f=rt(i,l);e=$t(Ot(f),Ot(i));const m=Ft(g,e),h=Ft(g,e),p=rt(a,v);d=rt(rt(p,m),h);const y=Ts(d,r);r=Rn(y,d,r),s=Rn(y,Gn([u]),s)}return s}const U7=st({threshold_:V7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W7(n,t,s="nearest",r="constant",d=0,S){const i=_(n,"image","transform","float32"),g=_(t,"transforms","transform","float32");q(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),q(g.rank===2&&(g.shape[0]===i.shape[0]||g.shape[0]===1)&&g.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),q(S==null||S.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${S}.`);const e={image:i,transforms:g},a={interpolation:s,fillMode:r,fillValue:d,outputShape:S};return it.runKernel(i1,e,a)}const X7=st({transform_:W7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H7(n,t,s){const r=_(n,"a","bandPart");q(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const d=r.shape,[S,i]=r.shape.slice(-2);let g,e;typeof t=="number"?(q(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),q(t<=S,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${S}).`),g=_(t<0?S:t,"numLower","bandPart")):(q(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),g=Rn(sh(t,0),S,no(t,S))),typeof s=="number"?(q(s%1===0,()=>`bandPart(): numUpper must be an integer, got ${s}.`),q(s<=i,()=>`bandPart(): numUpper (${s}) must not be greater than the number of columns (${i}).`),e=_(s<0?i:s,"numUpper","bandPart")):(q(s.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),e=Rn(sh(s,0),i,no(s,i)));const a=at(bl(0,S,1,"int32"),[-1,1]),v=bl(0,i,1,"int32"),u=Ft(a,v),o=Zi(po(u,g),ya(u,Ee(e))),c=_e([S,i],r.dtype);return at(Fs(ai(at(r,[-1,S,i])).map(l=>Rn(o,l,c))),d)}const Y7=st({bandPart_:H7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K7(n){let t;if(Array.isArray(n)){t=!1,q(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const d=n[0].shape[0];for(let S=1;S<n.length;++S)q(n[S].shape[0]===d,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[S].shape[0]} vs. ${d})`)}else t=!0,n=ds(n,n.shape[0],0).map(d=>go(d,[0]));q(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);const s=[],r=n;for(let d=0;d<n.length;++d)s.push(it.tidy(()=>{let S=r[d];if(d>0)for(let i=0;i<d;++i){const g=rt(Ot(rt(s[i],S)),s[i]);S=Ft(S,g)}return $t(S,Cc(S,"euclidean"))}));return t?Fs(s,0):s}const j7=st({gramSchmidt_:K7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z7(n,t=!1){if(q(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return DC(n,t);{const s=n.shape.slice(0,n.shape.length-2).reduce((e,a)=>e*a),r=ai(at(n,[s,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),d=[],S=[];r.forEach(e=>{const[a,v]=DC(e,t);d.push(a),S.push(v)});const i=at(Fs(d,0),n.shape),g=at(Fs(S,0),n.shape);return[i,g]}}function DC(n,t=!1){return it.tidy(()=>{q(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);const s=n.shape[0],r=n.shape[1];let d=T1(s),S=dr(n);const i=Mu([[1]],[1,1]);let g=dr(i);const e=s>=r?r:s;for(let a=0;a<e;++a){const v=S,u=g,o=d;[g,S,d]=it.tidy(()=>{const c=ne(S,[a,a],[s-a,1]),l=Cc(c),f=ne(S,[a,a],[1,1]),m=Rn(Ts(f,0),Mu([[-1]]),Mu([[1]])),h=Ft(f,rt(m,l)),p=$t(c,h);p.shape[0]===1?g=dr(i):g=Ze([i,ne(p,[1,0],[p.shape[0]-1,p.shape[1]])],0);const y=Ee($t(qt(m,h),l)),x=ne(S,[a,0],[s-a,r]),T=rt(y,g),C=se(g);if(a===0)S=Ft(x,qt(T,qt(C,x)));else{const w=Ft(x,qt(T,qt(C,x)));S=Ze([ne(S,[0,0],[a,r]),w],0)}const E=se(T),A=ne(d,[0,a],[s,d.shape[1]-a]);if(a===0)d=Ft(A,qt(qt(A,g),E));else{const w=Ft(A,qt(qt(A,g),E));d=Ze([ne(d,[0,0],[s,a]),w],1)}return[g,S,d]}),Zt([v,u,o])}return!t&&s>r&&(d=ne(d,[0,0],[s,r]),S=ne(S,[0,0],[r,r])),[d,S]})}const Q7=st({qr_:Z7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Qn;(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Qn||(Qn={}));function J7(n,t,s=Qn.SUM_BY_NONZERO_WEIGHTS){const r=_(n,"losses","computeWeightedLoss");let d=null;t!=null&&(d=_(t,"weights","computeWeightedLoss"));const S=d==null?r:rt(r,d);if(s===Qn.NONE)return S;if(s===Qn.SUM)return Ot(S);if(s===Qn.MEAN){if(d==null)return $e(S);{const i=r.size/d.size,g=$t(Ot(S),Ot(d));return i>1?$t(g,Vt(i)):g}}if(s===Qn.SUM_BY_NONZERO_WEIGHTS){if(d==null)return $t(Ot(S),Vt(r.size));{const i=rt(d,Es(r.shape)),g=Nt(Ot(Al(i,Vt(0))),"float32");return $t(Ot(S),g)}}throw Error(`Unknown reduction: ${s}`)}const br=st({computeWeightedLoss_:J7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q7(n,t,s,r=Qn.SUM_BY_NONZERO_WEIGHTS){const d=_(n,"labels","absoluteDifference"),S=_(t,"predictions","absoluteDifference");let i=null;s!=null&&(i=_(s,"weights","absoluteDifference")),xs(d.shape,S.shape,"Error in absoluteDifference: ");const g=Je(Ft(d,S));return br(g,i,r)}const _7=st({absoluteDifference_:q7});function tz(n,t,s,r,d=Qn.SUM_BY_NONZERO_WEIGHTS){const S=_(n,"labels","cosineDistance"),i=_(t,"predictions","cosineDistance");let g=null;r!=null&&(g=_(r,"weights","cosineDistance")),xs(S.shape,i.shape,"Error in cosineDistance: ");const e=Vt(1),a=Ft(e,Ot(rt(S,i),s,!0));return br(a,g,d)}const ez=st({cosineDistance_:tz});function nz(n,t,s,r=Qn.SUM_BY_NONZERO_WEIGHTS){let d=_(n,"labels","hingeLoss");const S=_(t,"predictions","hingeLoss");let i=null;s!=null&&(i=_(s,"weights","hingeLoss")),xs(d.shape,S.shape,"Error in hingeLoss: ");const g=Vt(1);d=Ft(rt(Vt(2),d),g);const e=Ji(Ft(g,rt(d,S)));return br(e,i,r)}const sz=st({hingeLoss_:nz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iz(n,t,s,r=1,d=Qn.SUM_BY_NONZERO_WEIGHTS){const S=_(n,"labels","huberLoss"),i=_(t,"predictions","huberLoss");let g=null;s!=null&&(g=_(s,"weights","huberLoss")),xs(S.shape,i.shape,"Error in huberLoss: ");const e=Vt(r),a=Je(Ft(i,S)),v=no(a,e),u=Ft(a,v),o=St(rt(Vt(.5),me(v)),rt(e,u));return br(o,g,d)}const rz=st({huberLoss_:iz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function az(n,t,s,r=1e-7,d=Qn.SUM_BY_NONZERO_WEIGHTS){const S=_(n,"labels","logLoss"),i=_(t,"predictions","logLoss");let g=null;s!=null&&(g=_(s,"weights","logLoss")),xs(S.shape,i.shape,"Error in logLoss: ");const e=Vt(1),a=Vt(r),v=Ee(rt(S,Ns(St(i,a)))),u=rt(Ft(e,S),Ns(St(Ft(e,i),a))),o=Ft(v,u);return br(o,g,d)}const oz=st({logLoss_:az});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lz(n,t,s,r=Qn.SUM_BY_NONZERO_WEIGHTS){const d=_(n,"labels","meanSquaredError"),S=_(t,"predictions","meanSquaredError");let i=null;s!=null&&(i=_(s,"weights","meanSquaredError")),xs(d.shape,S.shape,"Error in meanSquaredError: ");const g=W1(d,S);return br(g,i,r)}const uz=st({meanSquaredError_:lz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hz(n,t){const s=_(n,"labels","sigmoidCrossEntropyWithLogits"),r=_(t,"logits","sigmoidCrossEntropyWithLogits");xs(s.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const d=Ji(r),S=rt(r,s),i=gm(Rs(Ee(Je(r))));return St(Ft(d,S),i)}function cz(n,t,s,r=0,d=Qn.SUM_BY_NONZERO_WEIGHTS){let S=_(n,"multiClassLabels","sigmoidCrossEntropy");const i=_(t,"logits","sigmoidCrossEntropy");let g=null;if(s!=null&&(g=_(s,"weights","sigmoidCrossEntropy")),xs(S.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const a=Vt(r),v=Vt(1),u=Vt(.5);S=St(rt(S,Ft(v,a)),rt(u,a))}const e=hz(S,i);return br(e,g,d)}const fz=st({sigmoidCrossEntropy_:cz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dz(n,t,s=-1){if(s===-1&&(s=t.rank-1),s!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${s}`);return yr((d,S,i)=>{const e=C1(S,[s],!0),a=Ft(Nt(S,"float32"),e);i([d,a]);const v=Ee(rt(a,d));return{value:Ot(v,[s]),gradFunc:(c,l)=>{const[f,m]=l,h=Ue(c.shape,[s]);return[rt(at(c,h),Ft(Nt(f,"float32"),Rs(m))),rt(at(c,h),Ft(Rs(m),Nt(f,"float32")))]}}})(n,t)}function pz(n,t,s,r=0,d=Qn.SUM_BY_NONZERO_WEIGHTS){let S=_(n,"onehotLabels","softmaxCrossEntropy");const i=_(t,"logits","softmaxCrossEntropy");let g=null;if(s!=null&&(g=_(s,"weights","softmaxCrossEntropy")),xs(S.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const a=Vt(r),v=Vt(1),u=Vt(S.shape[1]);S=St(rt(S,Ft(v,a)),$t(a,u))}const e=dz(S,i);return br(e,g,d)}const mz=st({softmaxCrossEntropy_:pz});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vz(n,t,s,r){const d=_(n,"indices","sparseFillEmptyRows","int32"),S=_(t,"values","sparseFillEmptyRows"),i=_(s,"denseShape","sparseFillEmptyRows","int32"),g=_(r,"defaultValue","sparseFillEmptyRows",S.dtype);if(d.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${d.shape}`);if(S.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${S.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(g.rank!==0)throw new Error(`Default value should be a scalar but received shape ${g.shape}`);const e={indices:d,values:S,denseShape:i,defaultValue:g},a=it.runKernel(Ky,e);return{outputIndices:a[0],outputValues:a[1],emptyRowIndicator:a[2],reverseIndexMap:a[3]}}const gz=st({sparseFillEmptyRows_:vz});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xz(n,t,s){const r=_(n,"inputIndices","sparseReshape","int32"),d=_(t,"inputShape","sparseReshape","int32"),S=_(s,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(d.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${d.shape}`);if(S.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${S.shape}`);const i={inputIndices:r,inputShape:d,newShape:S},g=it.runKernel(jy,i);return{outputIndices:g[0],outputShape:g[1]}}const yz=st({sparseReshape_:xz});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tz(n,t,s){const r=_(n,"data","sparseSegmentMean"),d=_(t,"indices","sparseSegmentMean","int32"),S=_(s,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(d.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${d.shape}`);if(S.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${S.shape}`);const i={data:r,indices:d,segmentIds:S};return it.runKernel(Zy,i)}const Sz=st({sparseSegmentMean_:Tz});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cz(n,t,s){const r=_(n,"data","sparseSegmentSum"),d=_(t,"indices","sparseSegmentSum","int32"),S=_(s,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(d.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${d.shape}`);if(S.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${S.shape}`);const i={data:r,indices:d,segmentIds:S};return it.runKernel(Qy,i)}const wz=st({sparseSegmentSum_:Cz});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ez(n,t,s,r,d,S,i,g){const e=_(n,"data","stringNGrams","string");if(e.dtype!=="string")throw new Error("Data must be of datatype string");if(e.shape.length!==1)throw new Error(`Data must be a vector, saw: ${e.shape}`);const a=_(t,"dataSplits","stringNGrams");if(a.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const v={separator:s,nGramWidths:r,leftPad:d,rightPad:S,padWidth:i,preserveShortSequences:g},u={data:e,dataSplits:a},o=it.runKernel(t1,u,v);return{nGrams:o[0],nGramsSplits:o[1]}}const Az=st({stringNGrams_:Ez});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bz(n,t,s=!0){const r=_(n,"input","stringSplit","string"),d=_(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(d.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${d.shape}`);const S={skipEmpty:s},i={input:r,delimiter:d},g=it.runKernel(e1,i,S);return{indices:g[0],values:g[1],shape:g[2]}}const Iz=st({stringSplit_:bz});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rz(n,t){const s=_(n,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const d={input:s};return it.runKernel(n1,d,r)}const Nz=st({stringToHashBucketFast_:Rz});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pz(n,t,s,r=!0){const d=_(n,"input","staticRegexReplace","string"),S={pattern:t,rewrite:s,replaceGlobal:r};return it.runKernel(om,{x:d},S)}const Fz=st({staticRegexReplace_:Pz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dz={fft:Im,ifft:ah,rfft:Rm,irfft:U1},Oz={hammingWindow:r7,hannWindow:dR,frame:pR,stft:u7},zi={flipLeftRight:d7,grayscaleToRGB:m7,resizeNearestNeighbor:vR,resizeBilinear:mR,rgbToGrayscale:g7,rotateWithOffset:y7,cropAndResize:c7,nonMaxSuppression:S7,nonMaxSuppressionAsync:N7,nonMaxSuppressionWithScore:F7,nonMaxSuppressionWithScoreAsync:O7,nonMaxSuppressionPadded:M7,nonMaxSuppressionPaddedAsync:B7,threshold:U7,transform:X7},gR={bandPart:Y7,gramSchmidt:j7,qr:Q7},Lz={absoluteDifference:_7,computeWeightedLoss:br,cosineDistance:ez,hingeLoss:sz,huberLoss:rz,logLoss:oz,meanSquaredError:uz,sigmoidCrossEntropy:fz,softmaxCrossEntropy:mz},Mz={sparseFillEmptyRows:gz,sparseReshape:yz,sparseSegmentMean:Sz,sparseSegmentSum:wz},$z={stringNGrams:Az,stringSplit:Iz,stringToHashBucketFast:Nz,staticRegexReplace:Fz};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bz=new Map,kz=new Map;class Xl{getClassName(){return this.constructor.className}static fromConfig(t,s){return new t(s)}}class Ws{constructor(){this.classNameMap={}}static getMap(){return Ws.instance==null&&(Ws.instance=new Ws),Ws.instance}static register(t){Ws.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function Ct(n,t,s){q(n.className!=null,()=>"Class being registered does not have the static className property defined."),q(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),q(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof s>"u"&&(s=n.className);const r=s,d=t+">"+r;return Ws.register(n),Bz.set(d,n),kz.set(n,d),n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sa extends Xl{minimize(t,s=!1,r){const{value:d,grads:S}=this.computeGradients(t,r);if(r!=null){const i=r.map(g=>({name:g.name,tensor:S[g.name]}));this.applyGradients(i)}else this.applyGradients(S);return Zt(S),s?d:(d.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,s){return u9(t,s)}dispose(){this.iterations_!=null&&Zt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Vt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(Sa,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xR extends Sa{static get className(){return"Adadelta"}constructor(t,s,r=null){super(),this.learningRate=t,this.rho=s,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=it.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,d)=>{const S=it.registeredVariables[r],i=!1;this.accumulatedGrads[d]==null&&(this.accumulatedGrads[d]={originalName:`${r}/accum_grad`,variable:ft(()=>ie(S).variable(i))}),this.accumulatedUpdates[d]==null&&(this.accumulatedUpdates[d]={originalName:`${r}/accum_var`,variable:ft(()=>ie(S).variable(i))});const g=Array.isArray(t)?t[d].tensor:t[r];if(g==null)return;const e=this.accumulatedGrads[d].variable,a=this.accumulatedUpdates[d].variable;ft(()=>{const v=St(rt(e,this.rho),rt(me(g),1-this.rho)),u=rt($t(Fn(St(a,this.epsilon)),Fn(St(e,this.epsilon))),g),o=St(rt(a,this.rho),rt(me(u),1-this.rho));e.assign(v),a.assign(o);const c=St(rt(u,-this.learningRate),S);S.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Zt(this.accumulatedGrads.map(t=>t.variable)),Zt(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(s=>({name:s.originalName,tensor:s.variable})))}async setWeights(t){t=await this.extractIterations(t);const s=t.length/2,r=!1;this.accumulatedGrads=t.slice(0,s).map(d=>({originalName:d.name,variable:d.tensor.variable(r)})),this.accumulatedUpdates=t.slice(s,s*2).map(d=>({originalName:d.name,variable:d.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,s){return new t(s.learningRate,s.rho,s.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yR extends Sa{static get className(){return"Adagrad"}constructor(t,s=.1){super(),this.learningRate=t,this.initialAccumulatorValue=s,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,d)=>{const S=it.registeredVariables[r];this.accumulatedGrads[d]==null&&(this.accumulatedGrads[d]={originalName:`${r}/accumulator`,variable:ft(()=>Vl(S.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(t)?t[d].tensor:t[r];if(i==null)return;const g=this.accumulatedGrads[d].variable;ft(()=>{const e=St(g,me(i));g.assign(e);const a=St(rt($t(i,Fn(St(e,it.backend.epsilon()))),-this.learningRate),S);S.assign(a)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Zt(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const s=!1;this.accumulatedGrads=t.map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,s){return new t(s.learningRate,s.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TR extends Sa{static get className(){return"Adam"}constructor(t,s,r,d=null){super(),this.learningRate=t,this.beta1=s,this.beta2=r,this.epsilon=d,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ft(()=>{this.accBeta1=Vt(s).variable(),this.accBeta2=Vt(r).variable()}),d==null&&(this.epsilon=it.backend.epsilon())}applyGradients(t){const s=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);ft(()=>{const r=Ft(1,this.accBeta1),d=Ft(1,this.accBeta2);s.forEach((S,i)=>{const g=it.registeredVariables[S],e=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${S}/m`,variable:ft(()=>ie(g).variable(e))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${S}/v`,variable:ft(()=>ie(g).variable(e))});const a=Array.isArray(t)?t[i].tensor:t[S];if(a==null)return;const v=this.accumulatedFirstMoment[i].variable,u=this.accumulatedSecondMoment[i].variable,o=St(rt(v,this.beta1),rt(a,1-this.beta1)),c=St(rt(u,this.beta2),rt(me(a),1-this.beta2)),l=$t(o,r),f=$t(c,d);v.assign(o),u.assign(c);const m=St(rt($t(l,St(Fn(f),this.epsilon)),-this.learningRate),g);g.assign(m)}),this.accBeta1.assign(rt(this.accBeta1,this.beta1)),this.accBeta2.assign(rt(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Zt(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&Zt(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(s=>({name:s.originalName,tensor:s.variable})))}async setWeights(t){t=await this.extractIterations(t),ft(()=>{this.accBeta1.assign(ia(this.beta1,this.iterations_+1)),this.accBeta2.assign(ia(this.beta2,this.iterations_+1))});const s=t.length/2,r=!1;this.accumulatedFirstMoment=t.slice(0,s).map(d=>({originalName:d.name,variable:d.tensor.variable(r)})),this.accumulatedSecondMoment=t.slice(s,s*2).map(d=>({originalName:d.name,variable:d.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,s){return new t(s.learningRate,s.beta1,s.beta2,s.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SR extends Sa{static get className(){return"Adamax"}constructor(t,s,r,d=null,S=0){super(),this.learningRate=t,this.beta1=s,this.beta2=r,this.epsilon=d,this.decay=S,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ft(()=>{this.iteration=Vt(0).variable(),this.accBeta1=Vt(s).variable()}),d==null&&(this.epsilon=it.backend.epsilon())}applyGradients(t){const s=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);ft(()=>{const r=Ft(1,this.accBeta1),d=$t(-this.learningRate,St(rt(this.iteration,this.decay),1));s.forEach((S,i)=>{const g=it.registeredVariables[S],e=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${S}/m`,variable:ie(g).variable(e)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${S}/v`,variable:ie(g).variable(e)});const a=Array.isArray(t)?t[i].tensor:t[S];if(a==null)return;const v=this.accumulatedFirstMoment[i].variable,u=this.accumulatedWeightedInfNorm[i].variable,o=St(rt(v,this.beta1),rt(a,1-this.beta1)),c=rt(u,this.beta2),l=Je(a),f=Ar(c,l);v.assign(o),u.assign(f);const m=St(rt($t(d,r),$t(o,St(f,this.epsilon))),g);g.assign(m)}),this.iteration.assign(St(this.iteration,1)),this.accBeta1.assign(rt(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Zt(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&Zt(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,s){return new t(s.learningRate,s.beta1,s.beta2,s.epsilon,s.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t2 extends Sa{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,d)=>{const S=Array.isArray(t)?t[d].tensor:t[r];if(S==null)return;const i=it.registeredVariables[r];ft(()=>{const g=St(rt(this.c,S),i);i.assign(g)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=fn(Vt(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,s){return new t(s.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CR extends t2{static get className(){return"Momentum"}constructor(t,s,r=!1){super(t),this.learningRate=t,this.momentum=s,this.useNesterov=r,this.accumulations=[],this.m=Vt(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,d)=>{const S=it.registeredVariables[r];this.accumulations[d]==null&&(this.accumulations[d]={originalName:`${r}/momentum`,variable:ft(()=>ie(S).variable(!1))});const i=this.accumulations[d].variable,g=Array.isArray(t)?t[d].tensor:t[r];g!=null&&ft(()=>{let e;const a=St(rt(this.m,i),g);this.useNesterov?e=St(rt(this.c,St(g,rt(a,this.m))),S):e=St(rt(this.c,a),S),i.assign(a),S.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Zt(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const s=!1;this.accumulations=t.map(r=>({originalName:r.name,variable:r.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,s){return new t(s.learningRate,s.momentum,s.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wR extends Sa{static get className(){return"RMSProp"}constructor(t,s=.9,r=0,d=null,S=!1){if(super(),this.learningRate=t,this.decay=s,this.momentum=r,this.epsilon=d,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=S,d==null&&(this.epsilon=it.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,d)=>{const S=it.registeredVariables[r],i=!1;this.accumulatedMeanSquares[d]==null&&(this.accumulatedMeanSquares[d]={originalName:`${r}/rms`,variable:ft(()=>ie(S).variable(i))}),this.accumulatedMoments[d]==null&&(this.accumulatedMoments[d]={originalName:`${r}/momentum`,variable:ft(()=>ie(S).variable(i))}),this.accumulatedMeanGrads[d]==null&&this.centered&&(this.accumulatedMeanGrads[d]={originalName:`${r}/mg`,variable:ft(()=>ie(S).variable(i))});const g=Array.isArray(t)?t[d].tensor:t[r];if(g==null)return;const e=this.accumulatedMeanSquares[d].variable,a=this.accumulatedMoments[d].variable;ft(()=>{const v=St(rt(e,this.decay),rt(me(g),1-this.decay));if(this.centered){const u=this.accumulatedMeanGrads[d].variable,o=St(rt(u,this.decay),rt(g,1-this.decay)),c=$t(rt(g,this.learningRate),Fn(Ft(v,St(me(o),this.epsilon)))),l=St(rt(a,this.momentum),c);e.assign(v),u.assign(o),a.assign(l);const f=Ft(S,l);S.assign(f)}else{const u=St(rt(e,this.decay),rt(me(g),1-this.decay)),o=St(rt(a,this.momentum),$t(rt(g,this.learningRate),Fn(St(u,this.epsilon))));e.assign(u),a.assign(o);const c=Ft(S,o);S.assign(c)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Zt(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Zt(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&Zt(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(s=>({name:s.originalName,tensor:s.variable})))}async setWeights(t){t=await this.extractIterations(t);const s=this.centered?t.length/3:t.length/2,r=!1;this.accumulatedMeanSquares=t.slice(0,s).map(d=>({originalName:d.name,variable:d.tensor.variable(r)})),this.accumulatedMoments=t.slice(s,s*2).map(d=>({originalName:d.name,variable:d.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=t.slice(s*2,s*3).map(d=>({originalName:d.name,variable:d.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,s){return new t(s.learningRate,s.decay,s.momentum,s.epsilon,s.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zz=[xR,yR,TR,SR,CR,wR,t2];function Vz(){for(const n of zz)Ct(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gz="model",Uz=".json",Wz=".weights.bin";function OC(n){return new Promise(t=>setTimeout(t)).then(n)}class so{constructor(t){if(!dt().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(so.URL_SCHEME)&&(t=t.slice(so.URL_SCHEME.length)),(t==null||t.length===0)&&(t=Gz),this.modelJsonFileName=t+Uz,this.weightDataFileName=t+Wz}async save(t){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const s=Ni.join(t.weightData),r=window.URL.createObjectURL(new Blob([s],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const d=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],S=qb(t,d),i=window.URL.createObjectURL(new Blob([JSON.stringify(S)],{type:"application/json"})),g=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(g.download=this.modelJsonFileName,g.href=i,await OC(()=>g.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){const e=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=r,await OC(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:gc(t)}}}}so.URL_SCHEME="downloads://";class Xz{constructor(t){if(t==null||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}async load(){return new Promise((t,s)=>{const r=new FileReader;r.onload=d=>{const S=JSON.parse(d.target.result),i=S.modelTopology;if(i==null){s(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(S.weightsManifest==null){s(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){t({modelTopology:i});return}const e=h1(S,a=>this.loadWeights(a));t(e)},r.onerror=d=>s(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(t){const s=[],r=[];for(const i of t)s.push(...i.weights),r.push(...i.paths);const d=this.checkManifestAndWeightFiles(t),S=r.map(i=>this.loadWeightsFile(i,d[i]));return Promise.all(S).then(i=>[s,i])}loadWeightsFile(t,s){return new Promise((r,d)=>{const S=new FileReader;S.onload=i=>{const g=i.target.result;r(g)},S.onerror=i=>d(`Failed to weights data from file of path '${t}'.`),S.readAsArrayBuffer(s)})}checkManifestAndWeightFiles(t){const s=[],r=this.weightsFiles.map(S=>PC(S.name)),d={};for(const S of t)S.paths.forEach(i=>{const g=PC(i);if(s.indexOf(g)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${g}'`);if(s.push(g),r.indexOf(g)===-1)throw new Error(`Weight file with basename '${g}' is not provided.`);d[i]=this.weightsFiles[r.indexOf(g)]});if(s.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${s.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return d}}const Hz=n=>dt().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(so.URL_SCHEME)?Yz(n.slice(so.URL_SCHEME.length)):null;Pe.registerSaveRouter(Hz);function Yz(n="model"){return new so(n)}function Kz(n){return new Xz(n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LC(n,t,s,r){i(n),s=s??0,r=r??1,g(s,r);let d=0;const S=e=>(e.then(a=>{const v=s+ ++d/n.length*(r-s);return t(v),a}),e);function i(e){q(e!=null&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array")}function g(e,a){q(e>=0&&e<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`),q(a>=0&&a<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${a}`),q(a>=e,()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${a}`)}return Promise.all(n.map(S))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ER(n,t){t==null&&(t={});const s=t.fetchFunc==null?dt().platform.fetch:t.fetchFunc,r=n.map(u=>s(u,t.requestInit,{isBinary:!0})),d=0,S=.5,g=(t.onProgress==null?await Promise.all(r):await LC(r,t.onProgress,d,S)).map(u=>u.arrayBuffer()),e=.5,a=1;return t.onProgress==null?await Promise.all(g):await LC(g,t.onProgress,e,a)}async function jz(n,t="",s,r){return AR(i=>ER(i,{requestInit:r}))(n,t,s)}function AR(n){return async(t,s="",r)=>{const d=t.map(()=>!1),S={},i=r!=null?r.map(()=>!1):[],g=[];if(t.forEach((c,l)=>{let f=0;c.weights.forEach(m=>{const h="quantization"in m?m.quantization.dtype:m.dtype,p=m0[h]*mt(m.shape),y=()=>{d[l]=!0,S[l]==null&&(S[l]=[]),S[l].push({manifestEntry:m,groupOffset:f,sizeBytes:p})};r!=null?r.forEach((x,T)=>{x===m.name&&(y(),i[T]=!0)}):y(),g.push(m.name),f+=p})}),!i.every(c=>c)){const c=r.filter((l,f)=>!i[f]);throw new Error(`Could not find weights in manifest with names: ${c.join(", ")}. 
Manifest JSON has weights with names: ${g.join(", ")}.`)}const e=d.reduce((c,l,f)=>(l&&c.push(f),c),[]),a=[];e.forEach(c=>{t[c].paths.forEach(l=>{const f=s+(s.endsWith("/")?"":"/")+l;a.push(f)})});const v=await n(a),u={};let o=0;return e.forEach(c=>{const l=t[c].paths.length,f=new Ni(v.slice(o,o+l));S[c].forEach(h=>{const p=f.slice(h.groupOffset,h.groupOffset+h.sizeBytes),y=Qb(p,[h.manifestEntry]);for(const x in y)u[x]=y[x]}),o+=l}),u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zz="application/octet-stream",Qz="application/json";class e2{constructor(t,s){if(this.DEFAULT_METHOD="POST",s==null&&(s={}),this.weightPathPrefix=s.weightPathPrefix,this.onProgress=s.onProgress,this.weightUrlConverter=s.weightUrlConverter,s.fetchFunc!=null?(q(typeof s.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=s.fetchFunc):this.fetch=dt().platform.fetch,q(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&q(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,s.requestInit!=null&&s.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=s.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const s=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);s.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],d=qb(t,r);if(s.body.append("model.json",new Blob([JSON.stringify(d)],{type:Qz}),"model.json"),t.weightData!=null){const i=Ni.join(t.weightData);s.body.append("model.weights.bin",new Blob([i],{type:Zz}),"model.weights.bin")}const S=await this.fetch(this.path,s);if(S.ok)return{modelArtifactsInfo:gc(t),responses:[S]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${S.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let s;try{s=await t.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=s.modelTopology,d=s.weightsManifest;if(r==null&&d==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return h1(s,S=>this.loadWeights(S))}async loadWeights(t){const s=Array.isArray(this.path)?this.path[1]:this.path,[r,d]=Jz(s),S=this.weightPathPrefix||r,i=tI(t),g=[],e=[];for(const v of t)for(const u of v.paths)this.weightUrlConverter!=null?e.push(this.weightUrlConverter(u)):g.push(S+u+d);this.weightUrlConverter&&g.push(...await Promise.all(e));const a=await ER(g,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,a]}}e2.URL_SCHEME_REGEX=/^https?:\/\//;function Jz(n){const t=n.lastIndexOf("/"),s=n.lastIndexOf("?"),r=n.substring(0,t),d=s>t?n.substring(s):"";return[r+"/",d]}function E0(n){return n.match(e2.URL_SCHEME_REGEX)!=null}const bR=(n,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let s=!0;if(Array.isArray(n)?s=n.every(r=>E0(r)):s=E0(n),s)return n2(n,t)}return null};Pe.registerSaveRouter(bR);Pe.registerLoadRouter(bR);function n2(n,t){return new e2(n,t)}function qz(n,t){return n2(n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vv{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}}class IR{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}}class _z{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=s=>Promise.resolve(t.save(s)))}}function tV(n,t,s,r){const d=arguments;return new _z(RR(...d))}function RR(n,t,s,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new Vv(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Vv({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Vv({modelTopology:n,weightSpecs:t,weightData:s,trainingConfig:r}))}function eV(n){return new IR(n)}function nV(n){return new IR(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NR=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Ni,browserFiles:Kz,browserHTTPRequest:qz,concatenateArrayBuffers:Jb,copyModel:s$,decodeWeights:Qb,encodeWeights:v0,fromMemory:tV,fromMemorySync:RR,getLoadHandlers:W6,getModelArtifactsForJSON:h1,getModelArtifactsForJSONSync:_b,getModelArtifactsInfoForJSON:gc,getSaveHandlers:eI,getWeightSpecs:tI,http:n2,isHTTPScheme:E0,listModels:e$,loadWeights:jz,moveModel:i$,registerLoadRouter:U6,registerSaveRouter:G6,removeModel:n$,weightsLoaderFactory:AR,withSaveHandler:eV,withSaveHandlerSync:nV},Symbol.toStringTag,{value:"Module"}));function s2(n,t){const s=n.shape.length,r=t.shape.length;if(s<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${s}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>s)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${s}`);if(mt(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const d=t.shape,S=d[d.length-1];let i=1;for(let u=0;u<d.length-1;++u)i*=d[u];const g=n.shape,e=d.slice();e.pop();let a=1;for(let u=S;u<s;++u)a*=g[u],e.push(g[u]);const v=[...kt(n.shape).map(u=>u/a),1].slice(0,S);return[e,i,a,v]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A0=-2,sV=-1;function i2(n,t,s){const r=n.shape.length;q(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),q(r===s.length,()=>`Error in slice${r}D: Length of size ${s} must match the rank of the array (${r}).`);for(let d=0;d<r;++d)q(t[d]+s[d]<=n.shape[d],()=>`Error in slice${r}D: begin[${d}] + size[${d}] (${t[d]+s[d]}) would overflow input.shape[${d}] (${n.shape[d]})`)}function iV(n){const t=[];let s=0;for(;n>0;)n&1&&t.push(s),n/=2,s++;return t}function r2(n,t,s){const r=[];for(let d=0;d<n.length;d++)r[d]=Math.ceil((t[d]-n[d])/s[d]);return r}function PR(n,t,s,r){const d=[...n];for(let S=d.length;S<r.length;S++)d.push(1);for(let S=0;S<s;S++)S===0?d[t]=1:(d.splice(t,0,1),d.pop());return d}function FR(n,t,s){return s<=n?s:s-(t-1)}function DR(n,t){const s=[];for(let r=0;r<n;r++)s.push(t+r);return s}function rV(n,t,s,r,d,S,i,g,e){const a=n.length;let v=new Array(a),u=new Array(a),o=new Array(a);if(t.length&&s>0){const c=t[0],l=s+1;v=OR(i,c,l,r,n),u=LR(g,c,l,d,n),o=PR(S,c,l,n)}else for(let c=0;c<a;c++)v[c]=$R(i,r,S,n,c,e),u[c]=BR(g,d,S,n,c,e),o[c]=MR(S,c,e);return{begin:v,end:u,strides:o}}function OR(n,t,s,r,d){const S=[...d],i=DR(s,t);for(let g=0;g<S.length;g++)if(i.indexOf(g)>-1)S[g]=0;else{const e=FR(t,s,g);let a=r[e];n&1<<e&&(a=0),S[g]=a}return S}function LR(n,t,s,r,d){const S=[...d],i=DR(s,t);for(let g=0;g<S.length;g++)if(i.indexOf(g)>-1)S[g]=Number.MAX_SAFE_INTEGER;else{const e=FR(t,s,g);let a=r[e];n&1<<e&&(a=Number.MAX_SAFE_INTEGER),S[g]=a}for(let g=0;g<S.length;g++){const e=d[g];S[g]<0&&(S[g]+=e),S[g]=Qa(0,S[g],d[g])}return S}function MR(n,t,s){let r=n[t];return(s&1<<t||r==null)&&(r=1),r}function $R(n,t,s,r,d,S){let i=t[d];const g=s[d]||1;(n&1<<d||S&1<<d||i==null)&&(g>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const e=r[d];return i<0&&(i+=e),i=Qa(0,i,e-1),i}function BR(n,t,s,r,d,S){let i=t[d];const g=s[d]||1;(n&1<<d||S&1<<d||i==null)&&(g>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const e=r[d];return i<0&&(i+=e),g>0?i=Qa(0,i,e):i=Qa(-1,i,e-1),i}function a2(n,t,s){let r=s.length;for(let d=0;d<s.length;d++)if(s[d]>1){r=d;break}for(let d=r+1;d<s.length;d++)if(t[d]>0||s[d]!==n[d])return!1;return!0}function o2(n,t){let s=n.length>0?n[n.length-1]:1;for(let r=0;r<n.length-1;r++)s+=n[r]*t[r];return s}function Om(n,t,s){let r;const d=n.shape.length;typeof t=="number"?r=[t,...new Array(d-1).fill(0)]:t.length<d?r=t.concat(new Array(d-t.length).fill(0)):r=t.slice(),r.forEach(i=>{q(i!==-1,()=>"slice() does not support negative begin indexing.")});let S;return s==null?S=new Array(d).fill(-1):typeof s=="number"?S=[s,...new Array(d-1).fill(-1)]:s.length<d?S=s.concat(new Array(d-s.length).fill(-1)):S=s,S=S.map((i,g)=>i>=0?i:(q(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${g}.`),n.shape[g]-r[g])),[r,S]}function l2(n,t,s,r,d,S,i,g,e){let a;if(r==null?(a=new Array(t.length),a.fill(1)):a=r,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let v=!1;const u={dims:a.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:s.slice(),strides:a.slice(),beginMask:d,endMask:S,ellipsisMask:i,newAxisMask:g,shrinkAxisMask:e};for(let y=0;y<u.dims;y++)v&&1<<y&g&&u.numAddAxisAfterEllipsis++,1<<y&i&&(v=!0);v||(u.ellipsisMask|=1<<u.dims,u.dims++);const o={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};aV(u,o);let c=!0,l=!0,f=!0;const m=[],h=[];for(let y=0;y<n.length;++y){if(o.strides[y]===0)throw Error(`strides[${y}] must be non-zero`);const x=!!(o.shrinkAxisMask&1<<y),T=n[y];if(T===-1){m.push(x?1:-1);continue}const C=[o.beginMask&1<<y,o.endMask&1<<y],E=[o.strides[y]>0?0:-1,o.strides[y]>0?T:T-1];if(x&&o.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");f=f&&o.strides[y]===1;const A=!!(o.beginMask&1<<y&&o.endMask&1<<y);if(o.beginValid&&o.endValid){if(x){const R=o.begin[y]<0?T+o.begin[y]:o.begin[y];if(o.begin[y]=R,o.end[y]=o.begin[y]+1,R<0||R>=T)throw Error(`slice index ${o.begin[y]} of dimension ${y} out of bounds.`)}else o.begin[y]=MC(o.begin[y],0,o.strides[y],T,C,E),o.end[y]=MC(o.end[y],1,o.strides[y],T,C,E);const I=o.strides[y]===1&&o.begin[y]===0&&o.end[y]===T;c=c&&I,l=l&&(y===0&&o.strides[y]===1||I)}else c=c&&o.strides[y]===1&&A,l=l&&(y===0&&o.strides[y]===1||A);let w,b=!1;if(o.beginValid&&o.endValid?(w=o.end[y]-o.begin[y],b=!0):x?(w=1,b=!0):A&&T>=0&&(o.strides[y]<0?w=-T:w=T,b=!0),b){let I;w===0||w<0!=o.strides[y]<0?I=0:I=Math.trunc(w/o.strides[y])+(w%o.strides[y]!==0?1:0),m.push(I)}else m.push(-1)}for(let y=0;y<o.finalShapeGatherIndices.length;++y){const x=o.finalShapeGatherIndices[y];x>=0?h.push(m[x]):x===A0&&h.push(1)}return{finalShapeSparse:h.filter((y,x)=>o.finalShapeGatherIndices[x]!==A0),finalShape:h,isIdentity:c,sliceDim0:l,isSimpleSlice:f,begin:o.begin,end:o.end,strides:o.strides}}function aV(n,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let s=0;t.beginValid=n.begin!=null,t.endValid=n.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<n.dims;r++)if(1<<r&n.ellipsisMask){const d=Math.min(t.dims-(n.dims-r)+1+n.numAddAxisAfterEllipsis,t.dims);for(;s<d;s++)t.begin[s]=0,t.end[s]=0,t.strides[s]=1,t.beginMask|=1<<s,t.endMask|=1<<s,t.finalShapeGatherIndices.push(s),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[s]=r}else if(1<<r&n.newAxisMask)t.finalShapeGatherIndices.push(A0),t.finalShapeGatherIndicesSparse.push(-1);else{if(s===t.begin.length)throw Error(`Index out of range using input dim ${s}; input has only ${t.dims} dims, ${t.begin.length}.`);n.begin!=null&&(t.begin[s]=n.begin[r]),n.end!=null&&(t.end[s]=n.end[r]),t.strides[s]=n.strides[r],n.beginMask&1<<r&&(t.beginMask|=1<<s),n.endMask&1<<r&&(t.endMask|=1<<s),n.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(sV),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<s):(t.finalShapeGatherIndices.push(s),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[s]=r,s++}}function MC(n,t,s,r,d,S){if(d[t])return s>0?S[t]:S[t+1&1];{const i=n<0?r+n:n;return i<S[0]?S[0]:i>S[1]?S[1]:i}}const oV=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:i2,computeFlatOffset:o2,computeOutShape:r2,getNormalizedAxes:rV,isSliceContinous:a2,maskToAxes:iV,parseSliceParams:Om,sliceInfo:l2,startForAxis:$R,startIndicesWithElidedDims:OR,stopForAxis:BR,stopIndicesWithElidedDims:LR,stridesForAxis:MR,stridesWithElidedDims:PR},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lV{static sgd(t){return new t2(t)}static momentum(t,s,r=!1){return new CR(t,s,r)}static rmsprop(t,s=.9,r=0,d=null,S=!1){return new wR(t,s,r,d,S)}static adam(t=.001,s=.9,r=.999,d=null){return new TR(t,s,r,d)}static adadelta(t=.001,s=.95,r=null){return new xR(t,s,r)}static adamax(t=.002,s=.9,r=.999,d=null,S=0){return new SR(t,s,r,d,S)}static adagrad(t,s=.1){return new yR(t,s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Do=lV;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uV=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:n=>n())();function kR(){return new Promise(n=>uV(()=>n()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2(n,t){const s=n[0].length;n.forEach((d,S)=>{q(d.length===s,()=>`Error in concat${s}D: rank of tensors[${S}] must be the same as the rank of the rest (${s})`)}),q(t>=0&&t<s,()=>`Error in concat${s}D: axis must be between 0 and ${s-1}.`);const r=n[0];n.forEach((d,S)=>{for(let i=0;i<s;i++)q(i===t||d[i]===r[i],()=>`Error in concat${s}D: Shape of tensors[${S}] (${d}) does not match the shape of the rest (${r}) along the non-concatenated axis ${S}.`)})}function Yi(n,t){const s=n[0].slice();for(let r=1;r<n.length;r++)s[t]+=n[r][t];return s}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var xi;(function(n){n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS"})(xi||(xi={}));function zR(n,t,s){let r=new Array;if(s==null&&t==null)return r;if(t==null)for(;r.length<n+s.length;)r.push(-1);else r=t.slice();if(s==null)return r;if(n+s.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${n+s.length}, but shape.rank = ${r.length}`);for(let d=1;d<s.length;++d){const S=s[d],i=r[r.length-s.length+d],g=r[i];if(S>=0)if(g>=0){if(g!==S)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${d+n}] = ${S} but shape[${d+n}] = ${g}`)}else r[i]=S}return r}function VR(n){const t={FIRST_DIM_SIZE:xi.FIRST_DIM_SIZE,VALUE_ROWIDS:xi.VALUE_ROWIDS,ROW_LENGTHS:xi.ROW_LENGTHS,ROW_SPLITS:xi.ROW_SPLITS,ROW_LIMITS:xi.ROW_LIMITS,ROW_STARTS:xi.ROW_STARTS},s=[];for(const r of n)if(r in t)s.push(t[r]);else break;return s}function GR(n){return n.length===0?0:n[0]===xi.FIRST_DIM_SIZE?n.length-1:n.length}function UR(n,t){if(n==null||t==null)return;const s=n.length,r=t.length;if(s>=r)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${s} must be less than ragged tensor input flatValues.rank = ${r})`);for(let d=0;d<Math.min(s,r-1);++d){const S=n[d],i=t[d+1];if(S>=0&&i>=0&&S!==1&&S!==i)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${d-n.length}] = ${S} but ragged tensor input.flatValues.shape[${d-n.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2=30;function Lm(n){return n<=h2?n:r0(n,Math.floor(Math.sqrt(n)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c2(n,t,s){const r=s*(typeof n=="number"?n:n[0]),d=t*(typeof n=="number"?n:n[1]);return[r,d]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ac(n,t,s,r=!0){let d=[];if(r)d=d.concat(t.slice(0)),d.push(n[0]/s),d=d.concat(n.slice(1));else{d=d.concat(n[0]);const S=t.length;for(let i=0;i<S;++i)d=d.concat([n[i+1]/t[i],t[i]]);d=d.concat(n.slice(S+1))}return d}function bc(n,t,s=!0){const r=[];if(s){r.push(t);for(let d=t+1;d<n;++d)d<=2*t?(r.push(d),r.push(d-(t+1))):r.push(d)}else{const d=[],S=[];for(let i=1;i<n;++i)i>=t*2+1||i%2===1?S.push(i):d.push(i);r.push(...d),r.push(0),r.push(...S)}return r}function Ic(n,t,s,r=!0){const d=[];r?d.push(n[0]/s):d.push(n[0]*s);for(let S=1;S<n.length;++S)S<=t.length?r?d.push(t[S-1]*n[S]):d.push(n[S]/t[S-1]):d.push(n[S]);return d}function f2(n,t){const s=[0];for(let r=0;r<t;++r)s.push(n[r][0]);return s}function d2(n,t,s){const r=n.slice(0,1);for(let d=0;d<s;++d)r.push(n[d+1]-t[d][0]-t[d][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mm=1.7580993408473768,$m=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p2=.3275911,m2=.254829592,v2=-.284496736,g2=1.421413741,x2=-1.453152027,y2=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tr(n,t){if(n.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${t.length}.`);const s=new Float32Array(n.length*2);for(let r=0;r<s.length;r+=2)s[r]=n[r/2],s[r+1]=t[r/2];return s}function WR(n){const t=new Float32Array(n.length/2),s=new Float32Array(n.length/2);for(let r=0;r<n.length;r+=2)t[r/2]=n[r],s[r/2]=n[r+1];return{real:t,imag:s}}function XR(n){const t=Math.ceil(n.length/4),s=new Float32Array(t),r=new Float32Array(t);for(let d=0;d<n.length;d+=4)s[Math.floor(d/4)]=n[d],r[Math.floor(d/4)]=n[d+1];return{real:s,imag:r}}function HR(n){const t=Math.floor(n.length/4),s=new Float32Array(t),r=new Float32Array(t);for(let d=2;d<n.length;d+=4)s[Math.floor(d/4)]=n[d],r[Math.floor(d/4)]=n[d+1];return{real:s,imag:r}}function T2(n,t){const s=n[t*2],r=n[t*2+1];return{real:s,imag:r}}function YR(n,t,s,r){n[r*2]=t,n[r*2+1]=s}function KR(n,t){const s=new Float32Array(n/2),r=new Float32Array(n/2);for(let d=0;d<Math.ceil(n/2);d++){const S=(t?2:-2)*Math.PI*(d/n);s[d]=Math.cos(S),r[d]=Math.sin(S)}return{real:s,imag:r}}function jR(n,t,s){const r=(s?2:-2)*Math.PI*(n/t),d=Math.cos(r),S=Math.sin(r);return{real:d,imag:S}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gv="->",hV=/->/g,$C=",",BC="...";function S2(n,t){n=n.replace(/\s/g,"");const s=(n.length-n.replace(hV,"").length)/Gv.length;if(s<1)throw new Error("Equations without an arrow are not supported.");if(s>1)throw new Error(`Equation must contain exactly one arrow ("${Gv}").`);const[r,d]=n.split(Gv);q(r.indexOf(BC)===-1,()=>`The ellipsis notation ("${BC}") is not supported yet.`);const S=r.split($C),i=S.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const g=[];for(let o=0;o<d.length;++o){const c=d[o];if(!S.some(l=>l.indexOf(c)!==-1))throw new Error(`Output subscripts contain the label ${c} not present in the input subscripts.`);g.indexOf(c)===-1&&g.push(c)}for(let o=0;o<r.length;++o){const c=r[o];g.indexOf(c)===-1&&c!==$C&&g.push(c)}const e=new Array(S.length);for(let o=0;o<i;++o){if(new Set(S[o].split("")).size!==S[o].length)throw new Error(`Found duplicate axes in input component ${S[o]}. Support for duplicate axes in input is not implemented yet.`);e[o]=[];for(let c=0;c<S[o].length;++c)e[o].push(g.indexOf(S[o][c]))}const a=g.length,v=d.length,u=[];for(let o=v;o<a;++o)u.push(o);return{allDims:g,summedDims:u,idDims:e}}function C2(n,t){let s=new Array(n);s.fill(-1);for(let d=0;d<t.length;++d)s[t[d]]=d;const r=[];for(let d=0;d<n;++d)s[d]===-1&&r.push(d);return s=s.filter(d=>d!==-1),{permutationIndices:s,expandDims:r}}function w2(n,t,s){const r=new Array(n);for(let d=0;d<s.length;++d){const S=s[d].shape;for(let i=0;i<t[d].length;++i)r[t[d][i]]===void 0?r[t[d][i]]=S[i]:q(r[t[d][i]]===S[i],()=>`Expected dimension ${r[t[d][i]]} at axis ${i} of input shaped ${JSON.stringify(S)}, but got dimension ${S[i]}`)}}function E2(n,t){const s=n,r=[];let d=0;n.length===0&&s.push(-1),d=n.length+1;for(let i=0;i<d;++i)r.push([]);const S=[];for(let i=0;i<s.length;++i){const g=s[i],e=cV(t,g);for(const a of e)S.indexOf(a)===-1&&(r[i].push(a),S.push(a))}return{path:s,steps:r}}function A2(n){return n.every((t,s)=>t===s)}function cV(n,t){const s=[];for(let r=0;r<n.length;++r)(n[r].length===0||n[r].indexOf(t)!==-1||t===-1)&&s.push(r);return s}function b2(n,t,s=0){let r=[];if(typeof t=="number")q(n.shape[s]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(n.shape[s]/t);else{const d=t.reduce((i,g)=>(g===-1&&(i+=1),i),0);q(d<=1,()=>"There should be only one negative value in split array.");const S=t.indexOf(-1);if(S!==-1){const i=t.reduce((g,e)=>e>0?g+e:g);t[S]=n.shape[s]-i}q(n.shape[s]===t.reduce((i,g)=>i+g),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZR(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function QR(n,t){return`indices(${n}, 0) is invalid: ${t} < 0`}function JR(n,t,s){return`indices(${n}, 0) is invalid: ${t} >= ${s}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qR(n,t){return`only one output dimension may be -1, not both ${n} and ${t}`}function _R(n,t){return`size ${n} must be non-negative, not ${t}`}function tN(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function eN(n,t){const s=mt(n),r=mt(t);return`Input to reshape is a SparseTensor with ${s}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${n} outputShape= ${t}`}function nN(n,t){const s=mt(n),r=mt(t);return`Input to reshape is a tensor with ${s} dense values, but the requested shape has ${r}. inputShape=${n} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b0(){return"segment ids must be >= 0"}function sN(){return"segment ids are not increasing"}function iN(n,t){return`Segment id ${n} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function rN(n,t,s){return`Bad: indices[${n}] == ${t} out of range [0, ${s})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aN(n,t){let s=!1,r;for(n<=h2?(r=n,s=!0):r=r0(n,Math.floor(Math.sqrt(n)));!s;)r>t||r===n?s=!0:r=r0(n,r+1);return r}function oN(n,t,s){const r=[],d=n.length;for(let S=0;S<d;S++)S!==t?r.push(n[S]):r.push(s);return r}function I2(n,t,s,r){const d=t.shape.length,S=n.shape.length;if(r!==0&&(r<-d||r>d))throw new Error(`Expect batchDims in the range of [-${d}, ${d}], but got ${r}`);if(r<0&&(r+=d),r>S)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${S}).`);if(s<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${s}).`);for(let u=0;u<r;++u)if(n.shape[u]!==t.shape[u])throw new Error(`x.shape[${u}]: ${n.shape[u]} should be equal to indices.shape[${u}]: ${t.shape[u]}.`);const i=n.shape[s],g=[];let e=1,a=1,v=1;for(let u=0;u<r;++u)g.push(n.shape[u]),e*=n.shape[u];for(let u=r;u<s;u++)g.push(n.shape[u]),a*=n.shape[u];for(let u=r;u<d;u++)g.push(t.shape[u]);for(let u=s+1;u<S;u++)g.push(n.shape[u]),v*=n.shape[u];return{batchSize:e,sliceSize:v,outerSize:a,dimSize:i,outputShape:g}}const fV=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:I2,computeOutShape:oN,segOpComputeOptimalWindowSize:aN},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sr(n){try{return n.map(t=>ta(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function lN(n){return n.map(t=>Zr(t))}const dV=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:m2,ERF_A2:v2,ERF_A3:g2,ERF_A4:x2,ERF_A5:y2,ERF_P:p2,PARALLELIZE_THRESHOLD:h2,get RowPartitionType(){return xi},SELU_SCALE:$m,SELU_SCALEALPHA:Mm,applyActivation:Fm,assertAndGetBroadcastShape:Ht,assertAxesAreInnerMostDims:Cn,assertParamsConsistent:u2,assignToTypedArray:YR,axesAreInnerMostDims:y1,calculateShapes:xo,checkEinsumDimSizes:w2,checkPadOnDimRoundingMode:Xn,combineLocations:BI,combineRaggedTensorToTensorShapes:zR,complexWithEvenIndex:XR,complexWithOddIndex:HR,computeConv2DInfo:pn,computeConv3DInfo:ga,computeDefaultPad:d1,computeDilation2DInfo:xc,computeOptimalWindowSize:Lm,computeOutAndReduceShapes:mn,computeOutShape:Yi,computePool2DInfo:oi,computePool3DInfo:wr,convertConv2DDataFormat:Er,decodeEinsumEquation:S2,eitherStridesOrDilationsAreOne:Sn,expandShapeToKeepDim:Ue,exponent:jR,exponents:KR,fromStringArrayToUint8:lN,fromUint8ToStringArray:Sr,getAxesPermutation:Oe,getBroadcastDims:El,getComplexWithIndex:T2,getEinsumComputePath:E2,getEinsumPermutation:C2,getFusedBiasGradient:Pm,getFusedDyActivation:Nm,getImageCenter:c2,getInnerMostAxes:We,getPermuted:bc,getRaggedRank:GR,getReductionAxes:an,getReshaped:Ac,getReshapedPermuted:Ic,getRowPartitionTypesHelper:VR,getSliceBeginCoords:f2,getSliceSize:d2,getSparseFillEmptyRowsIndicesDenseShapeMismatch:ZR,getSparseFillEmptyRowsNegativeIndexErrorMessage:QR,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:JR,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:tN,getSparseReshapeInputOutputMismatchErrorMessage:nN,getSparseReshapeInputOutputMultipleErrorMessage:eN,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:qR,getSparseReshapeNegativeOutputDimErrorMessage:_R,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:rN,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:b0,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:sN,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:iN,getUndoAxesPermutation:xa,isIdentityPermutation:A2,log:o6,mergeRealAndImagArrays:Tr,prepareAndValidate:s2,prepareSplitSize:b2,segment_util:fV,shouldFuse:Dm,slice_util:oV,splitRealAndImagArrays:WR,stridesOrDilationsArePositive:eo,tupleValuesAreOne:na,upcastType:ps,validateDefaultValueShape:UR,validateInput:X1,validateUpdateShape:sR,warn:Cs},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Vz();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uN={kernelName:lp,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(n,Ul(Nt(s,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pV={kernelName:Ch,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>{const r=me(Nt(s,"float32")),d=Fn(Ft(Vt(1),r));return Ee($t(n,d))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mV={kernelName:wh,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>{const r=Fn(Ft(me(Nt(s,"float32")),1));return $t(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vV={kernelName:zl,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[s,r]=t,d=Ht(s.shape,r.shape);return{a:()=>{let g=n;const e=an(s.shape,d);return e.length>0&&(g=Ot(g,e)),at(g,s.shape)},b:()=>{let g=n;const e=an(r.shape,d);return e.length>0&&(g=Ot(g,e)),at(g,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gV={kernelName:up,saveAllInputs:!0,gradFunc:(n,t)=>{const s={};return t.forEach((r,d)=>{s[d]=()=>n.clone()}),s}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xV={kernelName:hp,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>ie(s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yV={kernelName:cp,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>ie(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TV={kernelName:Eh,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>$t(n,Fn(Ft(Vt(1),me(Nt(s,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SV={kernelName:Ah,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>{const r=Fn(St(Vt(1),me(Nt(s,"float32"))));return $t(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CV={kernelName:Rh,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[s,r]=t,d=Ht(s.shape,r.shape);return{a:()=>{const g=St(me(s),me(r));let e=rt(n,$t(r,g));const a=an(s.shape,d);return a.length>0&&(e=Ot(e,a)),at(e,s.shape)},b:()=>{const g=St(me(s),me(r));let e=Ee(rt(n,$t(s,g)));const a=an(r.shape,d);return a.length>0&&(e=Ot(e,a)),at(e,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wV={kernelName:bh,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>$t(n,St(me(Nt(s,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EV={kernelName:Ih,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>$t(n,Ft(Vt(1),me(Nt(s,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AV(n,t,s,r,d,S){const i=_(n,"dy","avgPool3dGrad"),g=_(t,"input","avgPool3dGrad");let e=i,a=g,v=!1;g.rank===4&&(v=!0,e=at(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),a=at(g,[1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]])),q(e.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${e.rank}.`),q(a.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${a.rank}.`),Xn("avgPool3dGrad",d,S);const u={dy:e,input:a},o={filterSize:s,strides:r,pad:d,dimRoundingMode:S},c=it.runKernel(ay,u,o);return v?at(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}const bV=st({avgPool3dGrad_:AV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IV={kernelName:dp,inputsToSave:["x"],gradFunc:(n,t,s)=>{const[r]=t,{filterSize:d,strides:S,pad:i,dimRoundingMode:g}=s;return{x:()=>bV(n,r,d,S,i,g)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RV(n,t,s,r,d){const S=_(n,"dy","avgPoolGrad"),i=_(t,"input","avgPoolGrad");q(i.rank===S.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${S.rank})`);let g=i,e=S,a=!1;i.rank===3&&(a=!0,g=at(i,[1,i.shape[0],i.shape[1],i.shape[2]]),e=at(S,[1,S.shape[0],S.shape[1],S.shape[2]])),q(e.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${e.rank}.`),q(g.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${g.rank}.`);const v={dy:e,input:g},u={filterSize:s,strides:r,pad:d},o=it.runKernel(ry,v,u);return a?at(o,[o.shape[1],o.shape[2],o.shape[3]]):o}const NV=st({avgPoolGrad_:RV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PV={kernelName:fp,inputsToSave:["x"],gradFunc:(n,t,s)=>{const[r]=t,{filterSize:d,strides:S,pad:i}=s;return{x:()=>NV(n,r,d,S,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FV={kernelName:pp,inputsToSave:["a","b"],gradFunc:(n,t,s)=>{const[r,d]=t,{transposeA:S,transposeB:i}=s;return!S&&!i?{a:()=>qt(n,d,!1,!0),b:()=>qt(r,n,!0,!1)}:!S&&i?{a:()=>qt(n,d,!1,!1),b:()=>qt(n,r,!0,!1)}:S&&!i?{a:()=>qt(d,n,!1,!0),b:()=>qt(r,n,!1,!1)}:{a:()=>qt(d,n,!0,!0),b:()=>qt(n,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DV={kernelName:mp,gradFunc:(n,t,s)=>{const{blockShape:r,crops:d}=s;return{x:()=>Sm(n,r,d)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OV={kernelName:s6,gradFunc:(n,t,s)=>{const r=s,d=r.inputShape,S=r.shape,i=Array.from(S);for(let e=d.length-1;e>=0;e--)if(d[e]===S[e])i[e]=1;else if(d[e]!==1)throw new Error(`broadcastTo(): [${d}] cannot be broadcast to [${S}].`);const g=[];for(let e=0;e<i.length;e++)i[e]>1&&g.push(e);return{x:()=>Ot(n,g,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LV={kernelName:Nh,gradFunc:n=>({x:()=>n.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MV={kernelName:Ph,gradFunc:n=>({x:()=>ie(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $V={kernelName:Fh,inputsToSave:["x"],gradFunc:(n,t,s)=>{const[r]=t,{clipValueMin:d,clipValueMax:S}=s;return{x:()=>Rn(Zi(ya(r,d),po(r,S)),n,ie(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BV={kernelName:gp,inputsToSave:["x"],gradFunc:uN.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kV={kernelName:xp,saveAllInputs:!0,gradFunc:(n,t,s)=>{const r=t.map(e=>e.shape),{axis:d}=s,S=Qt(d,t[0].shape)[0],i=r.map(e=>e[S]);return ds(n,i,S).map(e=>()=>e)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zV={kernelName:yp,inputsToSave:["x","filter"],gradFunc:(n,t,s)=>{const[r,d]=t,{dilations:S,strides:i,pad:g,dataFormat:e}=s;return q(na(S),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${S}'`),{x:()=>m1(r.shape,n,d,i,g,e),filter:()=>Z1(r,n,d.shape,i,g,e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VV={kernelName:Tp,inputsToSave:["dy","filter"],gradFunc:(n,t,s)=>{const[r,d]=t,{strides:S,pad:i,dataFormat:g,dimRoundingMode:e}=s;return{dy:()=>sa(n,d,S,i,g,1,e),filter:()=>Z1(n,r,d.shape,S,i,g,e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GV(n,t,s,r,d){let S=n;n.rank===4&&(S=at(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));let i=t;i.rank===4&&(i=at(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),q(S.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${S.shape}.`),q(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),q(s.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${s}.`),q(S.shape[4]===s[3],()=>`Error in conv3dDerFilter: depth of input ${S.shape[4]}) must match input depth in filter (${s[3]}.`),q(i.shape[4]===s[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${s[4]}).`);const g={x:S,dy:i},e={strides:r,pad:d,filterShape:s};return it.runKernel(cy,g,e)}const UV=st({conv3DBackpropFilter_:GV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WV={kernelName:Sp,inputsToSave:["x","filter"],gradFunc:(n,t,s)=>{const{dilations:r,strides:d,pad:S}=s;q(na(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,g]=t;return{x:()=>PI(i.shape,n,g,d,S),filter:()=>UV(i,n,g.shape,d,S)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XV={kernelName:Dh,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(Ee(z1(Nt(s,"float32"))),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HV={kernelName:Oh,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(V1(Nt(s,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YV={kernelName:Cp,inputsToSave:["x"],gradFunc:(n,t,s)=>{const[r]=t,{axis:d,exclusive:S,reverse:i}=s;return{x:()=>{const g=Oe([d],r.rank);let e=x1(n,d,S,!i);return g!=null&&(e=se(e,g)),e}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KV={kernelName:wp,inputsToSave:["x","filter"],gradFunc:(n,t,s)=>{const{dilations:r,strides:d,pad:S,dimRoundingMode:i}=s,g=r??[1,1];q(na(g),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${g}'`);const[e,a]=t;return q(e.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${e.rank}.`),q(a.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${a.rank}.`),q(e.shape[3]===a.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${e.shape[3]}) must match the inChannels dimension in filter ${a.shape[2]}.`),q(Sn(d,g),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${d} and dilations '${g}'.`),Xn("depthwiseConv2d",S,i),{x:()=>fR(e.shape,n,a,d,S,g,i),filter:()=>cR(e,n,a.shape,d,S,g,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jV={kernelName:Ep,inputsToSave:["x","filter"],gradFunc:(n,t,s)=>{const[r,d]=t,S={x:r,filter:d,dy:n},i={x:r,filter:d,dy:n};return{x:()=>it.runKernel(a0,S,s),filter:()=>it.runKernel(o0,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZV={kernelName:Mh,outputsToSave:[!0],gradFunc:(n,t)=>{const[s]=t,r={dy:n,y:s};return{x:()=>it.runKernel(Sy,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QV={kernelName:$h,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t,r=rt(Rs(Ee(me(s))),2/Math.sqrt(Math.PI));return{x:()=>rt(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JV={kernelName:Bh,outputsToSave:[!0],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(n,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qV={kernelName:bp,inputsToSave:["input"],gradFunc:(n,t)=>{const[s]=t;return{input:()=>at(n,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _V={kernelName:kh,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(n,Rs(s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tG={kernelName:zh,gradFunc:n=>({x:()=>ie(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eG={kernelName:Vh,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[s,r]=t,d=Ht(s.shape,r.shape);return{a:()=>{const g=$t(n,Nt(r,"float32")),e=an(s.shape,d);return e.length>0?at(Ot(g,e),s.shape):g},b:()=>{let g=rt(n,Nt(s,"float32"));const e=an(r.shape,d);e.length>0&&(g=at(Ot(g,e),r.shape));const a=me(r);return Ee($t(g,Nt(a,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nG={kernelName:Ip,inputsToSave:["x","mean","variance","scale"],gradFunc:(n,t,s)=>{const{varianceEpsilon:r}=s,[d,S,i,g]=t,e=g??Vt(1),a=an(S.shape,d.shape),v=[];if(S.rank===1){for(let x=0;x<d.shape.length-1;++x)v.push(d.shape[x]);v.push(1)}const u=Ft(d,S),o=rt(n,e),c=$1(St(i,Vt(r))),l=rt(rt(rt(c,c),c),Vt(-.5));return{x:()=>S.rank===1?at(rt(rt(n,Zs(at(c,[1,1,1,S.shape[0]]),v)),e),d.shape):at(rt(rt(n,c),e),d.shape),mean:()=>{let x=rt(rt(c,Vt(-1)),o);return S.rank===1&&(x=Ot(x,a)),at(x,S.shape)},variance:()=>{let x=rt(rt(l,u),o);return S.rank===1&&(x=Ot(x,a)),at(x,S.shape)},scale:()=>{const x=rt(u,c);let T=rt(n,x);return S.rank===1&&(T=Ot(T,a)),at(T,S.shape)},offset:()=>{let x=n;return S.rank===1&&(x=Ot(x,a)),at(x,S.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sG={kernelName:Rp,inputsToSave:["x","indices"],gradFunc:(n,t,s)=>{const[r,d]=t,{axis:S}=s,i=Qt(S,r.shape)[0];return{x:()=>{const e=r.shape,a=d.size,v=e.slice(0,i),u=v.length,o=e.slice(S,e.length).slice(1),c=o.length,l=kC(0,u),f=kC(u+1,u+1+c),m=zC([v,[a],o]),h=at(n,m),p=at(d,[a]),y=zC([[u],l,f]),x=se(h,y);let T=Y1(x,p,r.shape[i]);const C=xa(y);return T=se(T,C),T},indices:()=>d}}};function kC(n,t){const s=[];for(let r=n;r<t;++r)s.push(r);return s}function zC(n){const t=[];for(let s=0;s<n.length;++s)for(let r=0;r<n[s].length;++r)t.push(n[s][r]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iG={kernelName:Gh,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[s,r]=t;return{a:()=>ie(s),b:()=>ie(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rG={kernelName:Uh,gradFunc:n=>({x:()=>Nt(n,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aG={kernelName:Wh,gradFunc:n=>({x:()=>ie(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oG={kernelName:Xh,gradFunc:n=>({x:()=>ie(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lG={kernelName:Hh,gradFunc:n=>({x:()=>ie(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uG={kernelName:Pp,inputsToSave:["x"],gradFunc:(n,t,s)=>{const[r]=t,{alpha:d}=s,S=Ts(r,0);return{x:()=>Rn(S,n,rt(n,d))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hG={kernelName:Kh,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>$t(n,St(s,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cG={kernelName:Yh,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>$t(n,Nt(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fG={kernelName:r6,inputsToSave:[],outputsToSave:[!0],gradFunc:(n,t,s)=>{const[r]=t,{axis:d}=s;return{logits:()=>{const i=Rs(r);return Ft(n,rt(Ot(n,d,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dG(n,t,s,r=5,d=1,S=1,i=.5){const g={x:n,y:t,dy:s},e={depthRadius:r,bias:d,alpha:S,beta:i};return it.runKernel(Ny,g,e)}const pG=st({localResponseNormalizationBackprop_:dG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mG={kernelName:$p,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,s)=>{const[r,d]=t,{depthRadius:S,bias:i,alpha:g,beta:e}=s;return{x:()=>pG(r,d,n,S,i,g,e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hN(n,t,s,r){return t.rank<s.rank&&(t=at(t,Ue(t.shape,r))),n.rank<s.rank&&(n=at(n,Ue(n.shape,r))),{x:()=>rt(n,Nt(Ei(s,t),n.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VC={kernelName:Bp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,s)=>{const r=s,{reductionIndices:d}=r,S=t[0],i=t[1],g=Qt(d,S.shape),e=hN(n,i,S,g);return{x:()=>e.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vG={kernelName:jh,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[s,r]=t;return{a:()=>rt(n,Nt(ya(s,r),"float32")),b:()=>rt(n,Nt(sh(s,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gG(n,t,s,r,d,S,i){const g=_(n,"dy","maxPool3dGrad"),e=_(t,"input","maxPool3dGrad"),a=_(s,"output","maxPool3dGrad");let v=g,u=e,o=a,c=!1;e.rank===4&&(c=!0,v=at(g,[1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]]),u=at(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),o=at(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),q(v.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${v.rank}.`),q(u.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),q(o.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${o.rank}.`),Xn("maxPool3dGrad",S,i);const l={dy:v,input:u,output:o},f={filterSize:r,strides:d,pad:S,dimRoundingMode:i},m=it.runKernel(Fy,l,f);return c?at(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const xG=st({maxPool3dGrad_:gG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yG={kernelName:zp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,s)=>{const[r,d]=t,{filterSize:S,strides:i,pad:g,dimRoundingMode:e}=s;return{x:()=>xG(n,r,d,S,i,g,e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TG(n,t,s,r,d,S,i){const g=_(n,"dy","maxPoolGrad"),e=_(t,"input","maxPoolGrad"),a=_(s,"output","maxPoolGrad");q(e.rank===g.rank,()=>`Rank of input (${e.rank}) does not match rank of dy (${g.rank})`),q(g.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${g.rank}.`),q(e.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${e.rank}.`),Xn("maxPoolGrad",S,i);const v={dy:g,input:e,output:a},u={filterSize:r,strides:d,pad:S,dimRoundingMode:i};return it.runKernel(Py,v,u)}const SG=st({maxPoolGrad_:TG});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CG={kernelName:kp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,s)=>{const[r,d]=t,{filterSize:S,strides:i,pad:g}=s;return{x:()=>SG(n,r,d,S,i,g)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wG={kernelName:Vp,inputsToSave:["x"],gradFunc:(n,t,s)=>{const[r]=t,{axis:d}=s,S=Qt(d,r.shape),g=mn(r.shape,S)[1],e=mt(g);return{x:()=>{const v=r.shape.slice();S.forEach(c=>{v[c]=1});const u=at(n,v);return $t(rt(u,Es(r.shape,"float32")),e)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EG={kernelName:Gp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,s)=>{const r=s,{axis:d}=r,[S,i]=t,g=Qt(d,S.shape),e=hN(n,i,S,g);return{x:()=>e.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AG={kernelName:Zh,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[s,r]=t;return{a:()=>rt(n,Nt(po(s,r),"float32")),b:()=>rt(n,Nt(Ts(s,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bG={kernelName:Up,inputsToSave:["x"],gradFunc:(n,t,s)=>{const r=t[0],{paddings:d}=s,S=d.map(i=>i[0]);return{x:()=>ne(n,S,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IG={kernelName:Qh,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[s,r]=t,d=Ht(s.shape,r.shape);return{a:()=>{const g=an(s.shape,d);return g.length>0?at(Ot(n,g),s.shape):n},b:()=>{const g=rt(n,Ee(wc($t(s,r)))),e=an(r.shape,d);return e.length>0?at(Ot(g,e),r.shape):g}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RG={kernelName:Jh,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[s,r]=t,d=Ht(s.shape,r.shape);return{a:()=>{const g=rt(n,Nt(r,"float32")),e=an(s.shape,d);return e.length>0?at(Ot(g,e),s.shape):g},b:()=>{const g=rt(n,Nt(s,"float32")),e=an(r.shape,d);return e.length>0?at(Ot(g,e),r.shape):g}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NG={kernelName:Wp,gradFunc:n=>({x:()=>Ee(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PG={kernelName:Yp,inputsToSave:["indices"],gradFunc:(n,t)=>{const s=t[0];return{indices:()=>_e(s.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FG={kernelName:Hp,gradFunc:n=>({x:()=>ie(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DG={kernelName:Kp,saveAllInputs:!0,gradFunc:(n,t,s)=>{const{axis:r}=s;return ai(n,r).map(S=>()=>S)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GC={kernelName:jp,inputsToSave:["x"],gradFunc:(n,t,s)=>{const r=t[0],{paddings:d}=s,S=d.map(i=>i[0]);return{x:()=>ne(n,S,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OG={kernelName:qh,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(n,t)=>{const[s,r,d]=t,S=s,i=r,g=Ht(S.shape,i.shape);return{a:()=>{const v=Nt(i,"float32");let u=rt(n,rt(v,ia(S,Ft(v,Vt(1)))));const o=an(S.shape,g);return o.length>0&&(u=Ot(u,o)),at(u,S.shape)},b:()=>{const v=Ts(S,0),u=Rn(v,Ns(S),ie(S));let o=rt(n,rt(d,u));const c=an(i.shape,g);return c.length>0&&(o=Ot(o,c)),at(o,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LG={kernelName:Zp,inputsToSave:["x","alpha"],gradFunc:(n,t)=>{const[s,r]=t,d=Ts(s,0);return{x:()=>Rn(d,n,rt(n,r)),alpha:()=>{let S=Rn(d,ie(n),rt(n,s));const i=an(r.shape,n.shape);return i.length>0&&(S=Ot(S,i)),at(S,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MG(n,t,s){const r=n.shape.slice();r[s]=1;const d=at(t,r),S=wd(n,s,!0,!1),i=wd(n,s,!0,!0),g=rt(S,i);return rt(d,g)}function $G(n,t,s){const r=n.shape.length,d=r-s.length,S=Oe(s,r);let i=n;S!=null&&(i=se(n,S));const g=i.shape.slice(),a=g.splice(r-s.length,s.length).reduce((o,c)=>o*c,1);g.push(a);const v=i.reshape(g);let u=MG(v,t,d);if(u=u.reshape(i.shape),S!=null){const o=xa(S);u=se(u,o)}return u}const BG={kernelName:Qp,inputsToSave:["x"],gradFunc:(n,t,s)=>{const[r]=t,{axis:d}=s;let S=[];return d==null?S=r.shape.map((i,g)=>g):typeof d=="number"?S=[d]:S=d,{x:()=>$G(r,n,S)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kG={kernelName:Lh,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[s,r]=t,d=Ht(s.shape,r.shape);return{a:()=>{const g=$t(n,Nt(r,"float32")),e=an(s.shape,d);return e.length>0?at(Ot(g,e),s.shape):g},b:()=>{let g=rt(n,Nt(s,"float32"));const e=an(r.shape,d);e.length>0&&(g=at(Ot(g,e),r.shape));const a=me(r);return Ee($t(g,Nt(a,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zG={kernelName:_h,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>$t(n,Ee(me(s)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VG={kernelName:ec,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t,r=rt(po(s,6),Ul(s));return{x:()=>rt(n,Nt(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GG={kernelName:tc,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(n,Nt(Ul(s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UG={kernelName:Jp,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>at(n,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WG={kernelName:_p,inputsToSave:["images"],gradFunc:(n,t,s)=>{const[r]=t,d={dy:n,images:r};return{images:()=>it.runKernel(Wy,d,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XG={kernelName:qp,inputsToSave:["images"],gradFunc:(n,t,s)=>{const[r]=t,d={dy:n,images:r};return{images:()=>it.runKernel(Uy,d,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HG={kernelName:tm,gradFunc:(n,t,s)=>{const{dims:r}=s,d=Qt(r,n.shape);return{x:()=>ri(n,d)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YG={kernelName:nc,gradFunc:n=>({x:()=>ie(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KG={kernelName:sc,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>Ee($t(n,rt(ia(s,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jG={kernelName:em,inputsToSave:["condition"],gradFunc:(n,t)=>{const[s]=t;return{condition:()=>Nt(ie(s),"float32"),t:()=>rt(n,Nt(s,n.dtype)),e:()=>rt(n,Nt(xm(s),n.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZG={kernelName:ic,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>{const r=Ts(s,Vt(0)),d=Vt(Mm),S=Vt($m),i=rt(n,S),g=rt(rt(n,d),Rs(Nt(s,"float32")));return Rn(r,i,g)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QG={kernelName:lc,outputsToSave:[!0],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(n,rt(s,Ft(Vt(1),s)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JG={kernelName:oc,gradFunc:n=>({x:()=>ie(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qG={kernelName:rc,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(pm(Nt(s,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _G={kernelName:ac,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(g1(Nt(s,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tU={kernelName:nm,inputsToSave:["x"],gradFunc:(n,t,s)=>{const[r]=t,{begin:d,size:S}=s,i=r.shape,[g,e]=Om(r,d,S),a=[];for(let v=0;v<n.rank;v++)a.push([g[v],i[v]-g[v]-e[v]]);return{x:()=>Ta(n,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eU={kernelName:am,outputsToSave:[!0],gradFunc:(n,t,s)=>{const[r]=t,{dim:d}=s,S=!0,i=rt(n,r);return{logits:()=>Ft(i,rt(Ot(i,[d],S),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nU={kernelName:uc,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(n,Hi(s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UC={kernelName:im,gradFunc:(n,t,s)=>{const{blockShape:r,paddings:d}=s;return{x:()=>dm(n,r,d)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WC={kernelName:rm,gradFunc:(n,t,s)=>{const{axis:r}=s;return{x:()=>Ze(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sU={kernelName:hc,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>$t(n,rt(Fn(Nt(s,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iU={kernelName:qy,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(n,rt(Nt(s,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rU={kernelName:cc,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[s,r]=t,d=Vt(2);return{a:()=>rt(n,rt(d,Ft(s,r))),b:()=>rt(n,rt(d,Ft(r,s)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aU={kernelName:vc,gradFunc:n=>({x:()=>ie(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oU={kernelName:fc,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[s,r]=t,d=Ht(s.shape,r.shape);return{a:()=>{let g=n;const e=an(s.shape,d);return e.length>0&&(g=Ot(g,e)),at(g,s.shape)},b:()=>{let g=n;const e=an(r.shape,d);return e.length>0&&(g=Ot(g,e)),at(Ee(g),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lU={kernelName:sm,inputsToSave:["x"],gradFunc:(n,t,s)=>{const[r]=t,d=r.shape.slice(),{axis:S}=s;Qt(S,r.shape).forEach(a=>{d[a]=1});const g=at(n,d),e=rt(g,Es(r.shape,"float32"));return{x:()=>e}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uU={kernelName:dc,inputsToSave:["x"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>$t(n,me(pm(s)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hU={kernelName:pc,outputsToSave:[!0],gradFunc:(n,t)=>{const[s]=t;return{x:()=>rt(Ft(Vt(1),me(s)),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cU={kernelName:mc,inputsToSave:["x"],gradFunc:(n,t,s)=>{const[r]=t,{reps:d}=s;return{x:()=>{let i=ie(r);if(r.rank===1)for(let g=0;g<d[0];++g)i=St(i,ne(n,[g*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let g=0;g<d[0];++g)for(let e=0;e<d[1];++e)i=St(i,ne(n,[g*r.shape[0],e*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let g=0;g<d[0];++g)for(let e=0;e<d[1];++e)for(let a=0;a<d[2];++a)i=St(i,ne(n,[g*r.shape[0],e*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let g=0;g<d[0];++g)for(let e=0;e<d[1];++e)for(let a=0;a<d[2];++a)for(let v=0;v<d[3];++v)i=St(i,ne(n,[g*r.shape[0],e*r.shape[1],a*r.shape[2],v*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fU={kernelName:rl,gradFunc:(n,t,s)=>{const r=s,{perm:d}=r,S=xa(d);return{x:()=>se(n,S)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dU={kernelName:lm,gradFunc:(n,t,s)=>{const r=s,{axis:d}=r;return{value:()=>Fs(n,d)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pU={kernelName:um,inputsToSave:["segmentIds"],gradFunc:(n,t)=>{const[s]=t;return{x:()=>mU(n,s)}}};function mU(n,t){const s=Ar(t,ie(t)),r=Ec(n,s);let d=ya(t,Vt(0,"int32"));const S=r.rank-d.rank;for(let g=0;g<S;++g)d=zn(d,g+1);d=Zi(d,Es(r.shape,"bool"));const i=ie(r);return Rn(d,r,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vU={kernelName:hm,gradFunc:n=>({x:()=>ie(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gU=[uN,pV,mV,vV,gV,xV,yV,TV,SV,CV,wV,EV,IV,PV,FV,DV,OV,LV,MV,$V,BV,kV,VV,zV,WV,XV,HV,YV,KV,jV,kG,ZV,QV,JV,qV,_V,eG,tG,nG,sG,iG,rG,aG,oG,lG,uG,hG,cG,fG,mG,VC,VC,vG,yG,CG,wG,EG,AG,bG,IG,RG,NG,PG,FG,DG,GC,GC,OG,LG,BG,zG,VG,GG,UG,WG,XG,HG,YG,KG,jG,ZG,QG,JG,qG,_G,tU,eU,nU,UC,UC,WC,WC,sU,rU,iU,aU,oU,lU,uU,hU,cU,fU,dU,pU,vU];for(const n of gU)l6(n);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.abs=function(){return this.throwIfDisposed(),Je(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.acos=function(){return this.throwIfDisposed(),cI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.acosh=function(){return this.throwIfDisposed(),fI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.add=function(n){return this.throwIfDisposed(),St(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.all=function(n,t){return this.throwIfDisposed(),f1(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.any=function(n,t){return this.throwIfDisposed(),Cd(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.argMax=function(n){return this.throwIfDisposed(),Cl(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.argMin=function(n){return this.throwIfDisposed(),dI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.asScalar=function(){return this.throwIfDisposed(),q(this.size===1,()=>"The array must have only 1 element."),at(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.asType=function(n){return this.throwIfDisposed(),Nt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.as1D=function(){return this.throwIfDisposed(),at(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.as2D=function(n,t){return this.throwIfDisposed(),at(this,[n,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.as3D=function(n,t,s){return this.throwIfDisposed(),at(this,[n,t,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.as4D=function(n,t,s,r){return this.throwIfDisposed(),at(this,[n,t,s,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.as5D=function(n,t,s,r,d){return this.throwIfDisposed(),at(this,[n,t,s,r,d])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.asin=function(){return this.throwIfDisposed(),pI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.asinh=function(){return this.throwIfDisposed(),mI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.atan=function(){return this.throwIfDisposed(),vI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.atan2=function(n){return this.throwIfDisposed(),gI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.atanh=function(){return this.throwIfDisposed(),xI(this)};vt().prototype.avgPool=function(n,t,s,r){return this.throwIfDisposed(),fm(this,n,t,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.batchToSpaceND=function(n,t){return this.throwIfDisposed(),dm(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.batchNorm=function(n,t,s,r,d){return this.throwIfDisposed(),yc(this,n,t,s,r,d)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.broadcastTo=function(n){return this.throwIfDisposed(),ll(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.cast=function(n){return this.throwIfDisposed(),Nt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.ceil=function(){return this.throwIfDisposed(),EI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.clipByValue=function(n,t){return this.throwIfDisposed(),ms(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.concat=function(n,t){return this.throwIfDisposed(),n instanceof be&&(n=[n]),Ze([this,...n],t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.conv1d=function(n,t,s,r,d,S){return this.throwIfDisposed(),p1(this,n,t,s,r,d,S)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.conv2dTranspose=function(n,t,s,r,d){return this.throwIfDisposed(),v1(this,n,t,s,r,d)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.conv2d=function(n,t,s,r,d,S){return this.throwIfDisposed(),sa(this,n,t,s,r,d,S)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.cos=function(){return this.throwIfDisposed(),pm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.cosh=function(){return this.throwIfDisposed(),g1(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.cumprod=function(n,t,s){return this.throwIfDisposed(),wd(this,n,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.cumsum=function(n,t,s){return this.throwIfDisposed(),x1(this,n,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.depthToSpace=function(n,t){return this.throwIfDisposed(),DI(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.depthwiseConv2d=function(n,t,s,r,d,S){return this.throwIfDisposed(),Tc(this,n,t,s,r,d,S)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.dilation2d=function(n,t,s,r,d){return this.throwIfDisposed(),OI(this,n,t,s,r,d)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.divNoNan=function(n){return this.throwIfDisposed(),LI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.div=function(n){return this.throwIfDisposed(),$t(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.dot=function(n){return this.throwIfDisposed(),MI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.elu=function(){return this.throwIfDisposed(),Sc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.equal=function(n){return this.throwIfDisposed(),Ei(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.erf=function(){return this.throwIfDisposed(),$I(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.euclideanNorm=function(n,t){return this.throwIfDisposed(),zI(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.exp=function(){return this.throwIfDisposed(),Rs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.expandDims=function(n){return this.throwIfDisposed(),zn(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.expm1=function(){return this.throwIfDisposed(),VI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.fft=function(){return this.throwIfDisposed(),Im(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.flatten=function(){return this.throwIfDisposed(),at(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.floor=function(){return this.throwIfDisposed(),wc(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.floorDiv=function(n){return this.throwIfDisposed(),c1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.gather=function(n,t,s){return this.throwIfDisposed(),Ec(this,n,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.greaterEqual=function(n){return this.throwIfDisposed(),ya(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.greater=function(n){return this.throwIfDisposed(),Ts(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.ifft=function(){return this.throwIfDisposed(),ah(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.irfft=function(){return this.throwIfDisposed(),U1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.isFinite=function(){return this.throwIfDisposed(),GI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.isInf=function(){return this.throwIfDisposed(),UI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.isNaN=function(){return this.throwIfDisposed(),WI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.leakyRelu=function(n){return this.throwIfDisposed(),vm(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.lessEqual=function(n){return this.throwIfDisposed(),po(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.less=function(n){return this.throwIfDisposed(),sh(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.localResponseNormalization=function(n,t,s,r){return this.throwIfDisposed(),XI(this,n,t,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.logSigmoid=function(){return this.throwIfDisposed(),HI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.logSoftmax=function(n){return this.throwIfDisposed(),S1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.logSumExp=function(n,t){return this.throwIfDisposed(),C1(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.log=function(){return this.throwIfDisposed(),Ns(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.log1p=function(){return this.throwIfDisposed(),gm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.logicalAnd=function(n){return this.throwIfDisposed(),Zi(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.logicalNot=function(){return this.throwIfDisposed(),xm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.logicalOr=function(n){return this.throwIfDisposed(),w1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.logicalXor=function(n){return this.throwIfDisposed(),YI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.matMul=function(n,t,s){return this.throwIfDisposed(),qt(this,n,t,s)};vt().prototype.maxPool=function(n,t,s,r){return this.throwIfDisposed(),ym(this,n,t,s,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.max=function(n,t){return this.throwIfDisposed(),ei(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.maximum=function(n){return this.throwIfDisposed(),Ar(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.mean=function(n,t){return this.throwIfDisposed(),$e(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.min=function(n,t){return this.throwIfDisposed(),nh(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.minimum=function(n){return this.throwIfDisposed(),no(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.mirrorPad=function(n,t){return this.throwIfDisposed(),jI(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.mod=function(n){return this.throwIfDisposed(),ZI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.mul=function(n){return this.throwIfDisposed(),rt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.neg=function(){return this.throwIfDisposed(),Ee(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.norm=function(n,t,s){return this.throwIfDisposed(),Cc(this,n,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.notEqual=function(n){return this.throwIfDisposed(),Al(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.oneHot=function(n,t=1,s=0){return this.throwIfDisposed(),A1(this,n,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.onesLike=function(){return this.throwIfDisposed(),Ps(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.pad=function(n,t){return this.throwIfDisposed(),Ta(this,n,t)};vt().prototype.pool=function(n,t,s,r,d,S){return this.throwIfDisposed(),QI(this,n,t,s,r,d,S)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.pow=function(n){return this.throwIfDisposed(),ia(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.prelu=function(n){return this.throwIfDisposed(),Cm(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.prod=function(n,t){return this.throwIfDisposed(),JI(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.reciprocal=function(){return this.throwIfDisposed(),_I(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.relu=function(){return this.throwIfDisposed(),Ji(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.relu6=function(){return this.throwIfDisposed(),L1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.reshapeAs=function(n){return this.throwIfDisposed(),at(this,n.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.reshape=function(n){return this.throwIfDisposed(),at(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.resizeBilinear=function(n,t,s){return this.throwIfDisposed(),mR(this,n,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.resizeNearestNeighbor=function(n,t,s){return this.throwIfDisposed(),vR(this,n,t,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.reverse=function(n){return this.throwIfDisposed(),ri(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.rfft=function(){return this.throwIfDisposed(),Rm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.round=function(){return this.throwIfDisposed(),M1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.rsqrt=function(){return this.throwIfDisposed(),$1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.selu=function(){return this.throwIfDisposed(),B1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.separableConv2d=function(n,t,s,r,d,S){return this.throwIfDisposed(),k1(this,n,t,s,r,d,S)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.sigmoid=function(){return this.throwIfDisposed(),Hi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.sign=function(){return this.throwIfDisposed(),tR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.sin=function(){return this.throwIfDisposed(),z1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.sinh=function(){return this.throwIfDisposed(),V1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.slice=function(n,t){return this.throwIfDisposed(),ne(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.softmax=function(n){return this.throwIfDisposed(),bm(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.softplus=function(){return this.throwIfDisposed(),Gl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.spaceToBatchND=function(n,t){return this.throwIfDisposed(),Sm(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.split=function(n,t){return this.throwIfDisposed(),ds(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.sqrt=function(){return this.throwIfDisposed(),Fn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.square=function(){return this.throwIfDisposed(),me(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.squaredDifference=function(n){return this.throwIfDisposed(),W1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.squeeze=function(n){return this.throwIfDisposed(),go(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.stack=function(n,t){this.throwIfDisposed();const s=n instanceof be?[this,n]:[this,...n];return Fs(s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.step=function(n){return this.throwIfDisposed(),Ul(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.stridedSlice=function(n,t,s,r,d,S,i,g){return this.throwIfDisposed(),eR(this,n,t,s,r,d,S,i,g)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.sub=function(n){return this.throwIfDisposed(),Ft(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.sum=function(n,t){return this.throwIfDisposed(),Ot(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.tan=function(){return this.throwIfDisposed(),nR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.tanh=function(){return this.throwIfDisposed(),wl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.tile=function(n){return this.throwIfDisposed(),Zs(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.toBool=function(){return this.throwIfDisposed(),Nt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.toFloat=function(){return this.throwIfDisposed(),Nt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.toInt=function(){return this.throwIfDisposed(),Nt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.topk=function(n,t){return this.throwIfDisposed(),iR(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.transpose=function(n){return this.throwIfDisposed(),se(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.unique=function(n){return this.throwIfDisposed(),rR(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.unsortedSegmentSum=function(n,t){return this.throwIfDisposed(),Y1(this,n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.unstack=function(n){return this.throwIfDisposed(),ai(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.where=function(n,t){return this.throwIfDisposed(),Rn(n,this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */vt().prototype.zerosLike=function(){return this.throwIfDisposed(),ie(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Mi extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Mi.prototype)}}class Qs extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Qs.prototype)}}class ot extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ot.prototype)}}class Yt extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Yt.prototype)}}class R2 extends Error{constructor(t){super(t),Object.setPrototypeOf(this,R2.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class cN{constructor(t){this.maxEntries=t||100,this.cache=new Map}get(t){let s;return this.cache.has(t)&&(s=this.cache.get(t),this.cache.delete(t),this.cache.set(t,s)),s}put(t,s){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,s)}getMaxEntries(){return this.maxEntries}setMaxEntries(t){if(t<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${t}.`);if(this.maxEntries>t)for(let s=0;s<this.maxEntries-t;s++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function io(n,t){if(Array.isArray(n)){let s=[];for(let r=0;r<t;r++)s=s.concat(n);return s}else{const s=new Array(t);return s.fill(n),s}}function $i(n,t){if(!n)throw new R2(t)}function XC(n,t){let s=0;for(const r of n)r===t&&s++;return s}function Zn(n){return n.length===1?n[0]:n}function Te(n){return Array.isArray(n)?n:[n]}function rr(n){const s=n.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return s[0]!=="_"?s:"private"+s}function Da(n){return n.length<=1||n.indexOf("_")===-1?n:n.replace(/[_]+(\w|$)/g,(t,s)=>s.toUpperCase())}let $s={};function N2(n){if(n==null)return null;const t={};return t.className=n.getClassName(),t.config=n.getConfig(),t}function I0(n){if(!(n==null||typeof n!="object"))if(Array.isArray(n))n.forEach(t=>I0(t));else{const t=Object.keys(n);for(const s of t){const r=n[s];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?n[s]=r.value:I0(r))}}}function Rc(n,t={},s={},r="object",d=!1){if(typeof n=="string"){const S=n;let i;if(S in s)i=s[S];else if(S in $s)i=$s[S];else if(i=t[S],i==null)throw new ot(`Unknown ${r}: ${n}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const S=n;if(S.className==null||S.config==null)throw new ot(`${r}: Improper config format: ${JSON.stringify(S)}.
'className' and 'config' must set.`);const i=S.className;let g,e;if(i in s?[g,e]=s[i]:i in $s?[g,e]=$s.className:i in t&&([g,e]=t[i]),g==null)throw new ot(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(e!=null){const a={};for(const c of Object.keys($s))a[c]=$s[c];for(const c of Object.keys(s))a[c]=s[c];const v=S.config;v.customObjects=a;const u=Object.assign({},$s);for(const c of Object.keys(s))$s[c]=s[c];I0(S.config);const o=e(g,S.config,s,d);return $s=Object.assign({},u),o}else{const a=Object.assign({},$s);for(const u of Object.keys(s))$s[u]=s[u];const v=new g(S.config);return $s=Object.assign({},a),v}}}function xU(n,t){return n<t?-1:n>t?1:0}function ff(n,t){return-1*xU(n,t)}function Qr(n){if(n==null)return n;const t=[];for(const s of n)t.indexOf(s)===-1&&t.push(s);return t}function yU(n){if(n==null)throw new ot(`Invalid value in obj: ${JSON.stringify(n)}`);for(const t in n)if(n.hasOwnProperty(t))return!1;return!0}function yo(n,t,s){if(s!=null&&n.indexOf(s)<0)throw new ot(`${s} is not a valid ${t}.  Valid values are ${n} or null/undefined.`)}function P2(n,t,s=0,r=1/0){return $i(s>=0),$i(r>=s),Array.isArray(n)&&n.length>=s&&n.length<=r&&n.every(d=>typeof d===t)}function dn(n,t){Array.isArray(n)?(q(n.length>0,()=>`${t} is unexpectedly an empty array.`),n.forEach((s,r)=>dn(s,`element ${r+1} of ${t}`))):q(Number.isInteger(n)&&n>0,()=>`Expected ${t} to be a positive integer, but got ${fN(n)}.`)}function fN(n){return n===null?"null":Array.isArray(n)?"["+n.map(t=>fN(t)).join(",")+"]":typeof n=="string"?`"${n}"`:`${n}`}function TU(n,t,s){let r=s!=null?s():jn(),d;return(...i)=>{const g=s!=null?s():jn();return g-r<t||(r=g,d=n(...i)),d}}function dN(n){return n==="relu"?"relu":n==="linear"?"linear":n==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let SU=0;function pN(){return SU++}const df={};function Bm(n=""){return n in df||(df[n]=0),df[n]+=1,n+df[n].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const CU=["channelsFirst","channelsLast"],wU=["nearest","bilinear"],EU=["valid","same","causal"],AU=["max","avg"],bU=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Oo=new Map;function Xe(n){yo(CU,"DataFormat",n)}function IU(n){yo(wU,"InterpolationFormat",n)}function Ms(n){yo(EU,"PaddingMode",n)}function mN(n){yo(AU,"PoolMode",n)}const $u=[],HC="/";function Wa(n,t){$u.push(n);try{const s=t();return $u.pop(),s}catch(s){throw $u.pop(),s}}function RU(){return $u.length===0?"":$u.join(HC)+HC}function vN(n){if(!xN(n))throw new Error("Not a valid tensor name: '"+n+"'");return RU()+n}function gN(n){if(!xN(n))throw new Error("Not a valid tensor name: '"+n+"'");Oo.has(n)||Oo.set(n,0);const t=Oo.get(n);if(Oo.set(n,Oo.get(n)+1),t>0){const s=`${n}_${t}`;return Oo.set(s,1),s}else return n}const NU=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function xN(n){return!!n.match(NU)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function PU(n){return n===parseInt(n.toString(),10)}function Jr(n,t,s){t==null&&(t=0),s==null&&(s=n.length);let r=1;for(let d=t;d<s;++d)r*=n[d];return r}function Il(n){if(n.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let s=0;s<n.length;s++){const r=n[s];r<t&&(t=r)}return t}function ra(n){if(n.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let s=0;s<n.length;s++){const r=n[s];r>t&&(t=r)}return t}function Ai(n,t){if(t<n)throw new ot(`end (${t}) < begin (${n}) is forbidden.`);const s=[];for(let r=n;r<t;++r)s.push(r);return s}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Uv;function tn(){return Uv==null&&(Uv=c$().epsilon()),Uv}function bi(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ki(n,t){return Nt(n,t)}function Nc(n,t=-1){const s=n.shape.slice();return t<0&&(t=s.length+t+1),s.splice(t,0,1),at(n,s)}function FU(n,t){return ft(()=>{if(n.shape.length!==2)throw new ot(`repeat() expects a rank-2 tensor, but received a rank-${n.shape.length} tensor.`);const s=Nc(n,1);return R0(s,[1,t,1])})}function DU(n){const t=[Jr(n.shape)];return at(n,t)}function OU(n){if(n.rank<=1)throw new ot(`batchFlatten requires a minimum rank of 2. Got rank: ${n.rank}.`);const t=[n.shape[0],Jr(n.shape,1)];return at(n,t)}function Xa(n,t,s){return ft(()=>{switch(n.rank){case 1:return Em(n,t,s);case 2:return G1(n,[t,0],[s,n.shape[1]]);case 3:return Am(n,[t,0,0],[s,n.shape[1],n.shape[2]]);case 4:return rh(n,[t,0,0,0],[s,n.shape[1],n.shape[2],n.shape[3]]);case 5:return ne(n,[t,0,0,0,0],[s,n.shape[1],n.shape[2],n.shape[3],n.shape[4]]);case 6:return ne(n,[t,0,0,0,0,0],[s,n.shape[1],n.shape[2],n.shape[3],n.shape[4],n.shape[5]]);default:throw new ot(`sliceAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}})}function Wv(n,t,s){return ft(()=>{switch(n.rank){case 1:return Em(n,t,s);case 2:return G1(n,[0,t],[n.shape[0],s]);case 3:return Am(n,[0,0,t],[n.shape[0],n.shape[1],s]);case 4:return rh(n,[0,0,0,t],[n.shape[0],n.shape[1],n.shape[2],s]);default:throw new ot(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function pf(n,t,s,r){return ft(()=>{switch(n.rank){case 1:return Em(n,t,s);case 2:switch(r){case 1:return Xa(n,t,s);case 2:return Wv(n,t,s);default:throw new ot(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Xa(n,t,s);case 2:return Am(n,[0,t,0],[n.shape[0],s,n.shape[2]]);case 3:return Wv(n,t,s);default:throw new ot(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Xa(n,t,s);case 2:return rh(n,[0,t,0,0],[n.shape[0],s,n.shape[2],n.shape[3]]);case 3:return rh(n,[0,0,t,0],[n.shape[0],n.shape[1],s,n.shape[3]]);case 4:return Wv(n,t,s);default:throw new ot(`The axis is not within the rank of the tensor ${r}`)}default:throw new ot(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function F2(n,t=-1){let s;return t<0&&(s=n[0].rank,s!==0?t=s:t=0),t===n[0].rank&&(t=-1),Ze(n,t)}function YC(n,t){switch(n.rank){case 1:return AI([n,t]);case 2:return bI([n,t],0);case 3:return II([n,t],0);case 4:return RI([n,t],0);default:throw new ot(`concatAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}}function R0(n,t){if(Array.isArray(t)||(t=[t]),n.rank!==t.length)throw new ot(`The length of input n (${t.length}) does not match the number of dimensions in input x (${n.rank})`);return Zs(n,t)}function km(n,t=0,s=1,r,d){return O1(n,t,s,r,d)}function ji(n,t,s,r){if(n.rank<2||t.rank<2)throw new Yt(`dot requires both inputs to be rank >= 2 but got x shape = ${n.shape} and y shape = ${t.shape}`);if(t.rank>=3){const d=n.shape.slice(-1)[0],S=t.shape.slice(-2)[0];if(d!==S)throw new Yt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${n.shape} and  y shape = ${t.shape}`)}if(n.rank===2&&t.rank===2)return w0({a:n,b:t,transposeA:!1,transposeB:!1,bias:r?N0(n.rank,r,bi()):null,activation:s});{const d=n.shape.slice(),S=d.pop();n=at(n,[-1,S]);const i=t.shape.slice(),g=i.pop(),e=i.pop(),a=[...i,g],v=Array.from({length:t.rank},(l,f)=>f===0?t.rank-2:f<=t.rank-2?f-1:f);t=at(se(t,v),[e,-1]);const u=[...d,...a];return at(w0({a:n,b:t,transposeA:!1,transposeB:!1,bias:r?N0(n.rank,r,bi()):null,activation:s}),u)}}function yN(n,t,s){return ft(()=>(Array.isArray(t)?t=Gn(t,"int32"):t=Nt(t,"int32"),Ec(n,t,s)))}function Pc(n){return rt(n,n)}function N0(n,t,s){const r=t.shape;if(t.rank!==1&&t.rank!==n)throw new ot(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${n}`);if(n===5){if(s==="channelsFirst")return r.length===1?at(t,[1,r[0],1,1,1]):at(t,[1,r[3],r[0],r[1],r[2]]);if(s==="channelsLast")return r.length===1?at(t,[1,1,1,1,r[0]]):at(t,[1].concat(r))}else if(n===4){if(s==="channelsFirst")return r.length===1?at(t,[1,r[0],1,1]):at(t,[1,r[2],r[0],r[1]]);if(s==="channelsLast")return r.length===1?at(t,[1,1,1,r[0]]):at(t,[1].concat(r))}else if(n===3){if(s==="channelsFirst")return r.length===1?at(t,[1,r[0],1]):at(t,[1,r[1],r[0]]);if(s==="channelsLast")return r.length===1?at(t,[1,1,r[0]]):at(t,[1].concat(r))}else if(n<3)return t;throw new ot(`Unsupported input rank by biasAdd: ${t.rank}`)}function Pi(n,t,s){return ft(()=>(s==null&&(s=bi()),Xe(s),St(n,N0(n.rank,t,s))))}function LU(n,t=1){if(t!==1)throw new Yt(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return Sc(n)}function MU(n){return ft(()=>$t(n,St(Je(n),1)))}function TN(n,t,s,r){return ft(()=>lR(n,t,s,r))}function $U(n){return ft(()=>{const t=St(.5,rt(.2,n));return ms(t,0,1)})}function Fc(n,t,s=!1){return s?n():t()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const BU=["fanIn","fanOut","fanAvg"],kU=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zU(n){yo(BU,"FanMode",n)}function VU(n){yo(kU,"Distribution",n)}class li extends Xl{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class SN extends li{apply(t,s){return _e(t,s)}}SN.className="Zeros";Ct(SN);class D2 extends li{apply(t,s){return Es(t,s)}}D2.className="Ones";Ct(D2);class CN extends li{constructor(t){if(super(),typeof t!="object")throw new ot(`Expected argument of type ConstantConfig but got ${t}`);if(t.value===void 0)throw new ot(`config must have value set but got ${t}`);this.value=t.value}apply(t,s){return ft(()=>rt(Vt(this.value),Es(t,s)))}getConfig(){return{value:this.value}}}CN.className="Constant";Ct(CN);class wN extends li{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,s){return vo(t,this.minval,this.maxval,s,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}wN.className="RandomUniform";Ct(wN);class EN extends li{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,s){if(s=s||"float32",s!=="float32"&&s!=="int32")throw new Yt(`randomNormal does not support dType ${s}.`);return km(t,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}EN.className="RandomNormal";Ct(EN);class AN extends li{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,s){if(s=s||"float32",s!=="float32"&&s!=="int32")throw new Yt(`truncatedNormal does not support dType ${s}.`);return H1(t,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}AN.className="TruncatedNormal";Ct(AN);class bN extends li{constructor(t){super(),this.gain=t.gain!=null?t.gain:1}apply(t,s){return ft(()=>{if(t.length!==2||t[0]!==t[1])throw new ot("Identity matrix initializer can only be used for 2D square matrices.");return rt(this.gain,T1(t[0]))})}getConfig(){return{gain:this.gain}}}bN.className="Identity";Ct(bN);function GU(n,t="channelsLast"){let s,r;if(Xe(t),n.length===2)s=n[0],r=n[1];else if([3,4,5].indexOf(n.length)!==-1){if(t==="channelsFirst"){const d=Jr(n,2);s=n[1]*d,r=n[0]*d}else if(t==="channelsLast"){const d=Jr(n,0,n.length-2);s=n[n.length-2]*d,r=n[n.length-1]*d}}else{const d=Jr(n);s=Math.sqrt(d),r=Math.sqrt(d)}return[s,r]}class vs extends li{constructor(t){if(super(),t.scale<0)throw new ot(`scale must be a positive float. Got: ${t.scale}`);this.scale=t.scale==null?1:t.scale,this.mode=t.mode==null?"fanIn":t.mode,zU(this.mode),this.distribution=t.distribution==null?"normal":t.distribution,VU(this.distribution),this.seed=t.seed}apply(t,s){const r=GU(t),d=r[0],S=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,d):this.mode==="fanOut"?i/=Math.max(1,S):i/=Math.max(1,(d+S)/2),this.distribution==="normal"){const g=Math.sqrt(i);if(s=s||"float32",s!=="float32"&&s!=="int32")throw new Yt(`${this.getClassName()} does not support dType ${s}.`);return H1(t,0,g,s,this.seed)}else{const g=Math.sqrt(3*i);return vo(t,-g,g,s,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}vs.className="VarianceScaling";Ct(vs);class O2 extends vs{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return vs.className}}O2.className="GlorotUniform";Ct(O2);class L2 extends vs{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return vs.className}}L2.className="GlorotNormal";Ct(L2);class M2 extends vs{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return vs.className}}M2.className="HeNormal";Ct(M2);class $2 extends vs{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return vs.className}}$2.className="HeUniform";Ct($2);class B2 extends vs{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return vs.className}}B2.className="LeCunNormal";Ct(B2);class k2 extends vs{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return vs.className}}k2.className="LeCunUniform";Ct(k2);class IN extends li{constructor(t){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=t.gain==null?this.DEFAULT_GAIN:t.gain,this.seed=t.seed}apply(t,s){return ft(()=>{if(t.length<2)throw new Yt("Shape must be at least 2D.");if(s!=="int32"&&s!=="float32"&&s!==void 0)throw new TypeError(`Unsupported data type ${s}.`);s=s;const r=mt(t.slice(0,-1)),d=t[t.length-1],S=r*d;S>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${S}) elements: Slowness may result.`);const i=[Math.max(d,r),Math.min(d,r)],g=km(i,0,1,s,this.seed),e=gR.qr(g,!1);let a=e[0];const u=e[1].flatten().stridedSlice([0],[Math.min(d,r)*Math.min(d,r)],[Math.min(d,r)+1]);return a=rt(a,u.sign()),r<d&&(a=a.transpose()),rt(Vt(this.gain),a.reshape(t))})}getConfig(){return{gain:this.gain,seed:this.seed}}}IN.className="Orthogonal";Ct(IN);const KC={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function jC(n,t={}){return Rc(n,Ws.getMap().classNameMap,t,"initializer")}function De(n){return N2(n)}function Re(n){if(typeof n=="string"){const t=n in KC?KC[n]:n;if(t==="GlorotNormal")return new L2;if(t==="GlorotUniform")return new O2;if(t==="HeNormal")return new M2;if(t==="HeUniform")return new $2;if(t==="LeCunNormal")return new B2;if(t==="LeCunUniform")return new k2;{const s={};return s.className=t,s.config={},jC(s)}}else return n instanceof li?n:jC(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function P0(n){return Array.isArray(n)&&Array.isArray(n[0])}function Ed(n){return n.length===0?[]:Array.isArray(n[0])?n:[n]}function Ut(n){let t;if(Array.isArray(n)){if(n.length!==1)throw new ot(`Expected Tensor length to be 1; got ${n.length}`);t=n[0]}else t=n;return t}function le(n){if(Array.isArray(n)&&Array.isArray(n[0])){if(n.length===1)return n=n,n[0];throw new ot(`Expected exactly 1 Shape; got ${n.length}`)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ad(n){let t=0;for(const s of n)s.shape.length===0?t+=1:t+=s.shape.reduce((r,d)=>r*d);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ZC="Variable";class UU{constructor(t,s="float32",r=ZC,d=!0,S=null){this.dtype=s??"float32",this.shape=t.shape,this.id=pN(),r=r??ZC,this.originalName=vN(r),this.name=gN(this.originalName),this.trainable_=d,this.constraint=S,this.val=aR(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),WU(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function WU(n,t){if(n.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(n.shape)+" vs. "+JSON.stringify(t.shape))}function F0(n){return n.map(t=>t.read())}function z2(n){n.forEach(t=>{t[0].write(t[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class en{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class Vi{constructor(t,s,r,d,S,i,g){this.dtype=t,this.shape=s,this.sourceLayer=r,this.inputs=d,this.callArgs=S,this.outputTensorIndex=g,this.id=pN(),i!=null&&(this.originalName=vN(i),this.name=gN(this.originalName)),this.rank=s.length}}let XU=0;class zm{constructor(t,s){this.callArgs=s,this.id=XU++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const r of t.inboundLayers)r!=null&&r.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const s of this.inboundLayers)s!=null?t.push(s.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let HU=0;class Jt extends Xl{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=HU++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let s=t.name;if(!s){const r=this.getClassName();s=rr(r)+"_"+Bm(r)}if(this.name=s,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let r;if(t.batchInputShape!=null)r=t.batchInputShape;else if(t.inputShape!=null){let S=null;t.batchSize!=null&&(S=t.batchSize),r=[S].concat(t.inputShape)}this.batchInputShape=r;let d=t.dtype;d==null&&(d=t.inputDType),d==null&&(d="float32"),this.dtype=d}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,s){return t.name+"_ib-"+s.toString()}getNodeAtIndex(t,s){if(this.inboundNodes.length===0)throw new Qs(`The layer has never been called and thus has no defined ${s}.`);if(this.inboundNodes.length<=t)throw new ot(`Asked to get ${s} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return Zn(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return Zn(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Mi(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Mi(`Layer ${this.name} is not connected, no input to return.`);return Zn(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Mi(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Mi(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Zn(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(s=>s.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=Te(t),this.inputSpec==null||this.inputSpec.length===0)return;const s=Te(this.inputSpec);if(t.length!==s.length)throw new ot(`Layer ${this.name} expects ${s.length} inputs, but it received ${t.length} input tensors. Input received: ${t}`);for(let r=0;r<t.length;r++){const d=t[r],S=s[r];if(S==null)continue;const i=d.rank;if(S.ndim!=null&&i!==S.ndim)throw new ot(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${S.ndim}, found ndim=${i}`);if(S.maxNDim!=null&&i>S.maxNDim)throw new ot(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${S.maxNDim}, found ndim=${i}`);if(S.minNDim!=null&&i<S.minNDim)throw new ot(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${S.minNDim}, found ndim=${i}.`);if(S.dtype!=null&&d.dtype!==S.dtype)throw new ot(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${S.dtype}, found dtype=${d.dtype}.`);if(S.axes){const g=d.shape;for(const e in S.axes){const a=Number(e),v=S.axes[e],u=a>=0?g[a]:g[g.length+a];if(v!=null&&[v,null].indexOf(u)===-1)throw new ot(`Input ${r} is incompatible with layer ${this.name}: expected axis ${a} of input shape to have value ${v} but got shape ${g}.`)}}if(S.shape!=null)for(let g=0;g<S.shape.length;++g){const e=S.shape[g],a=d.shape[g];if(e!=null&&a!=null&&e!==a)throw new ot(`Input ${r} is incompatible with layer ${this.name}: expected shape=${S.shape}, found shape=${d.shape}.`)}}}call(t,s){return t}invokeCallHook(t,s){this._callHook!=null&&this._callHook(t,s)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,s){s=s||{},this.assertNotDisposed();const r=Te(t);let d=!0;for(const i of r)if(!(i instanceof Vi)){d=!1;break}let S=!0;for(const i of r)if(i instanceof Vi){S=!1;break}if(d===S)throw new ot("Arguments to apply() must be all SymbolicTensors or all Tensors");return Wa(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const i=[];for(const g of Te(t))i.push(g.shape);this.build(Zn(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&S&&(this._refCount=1)}if(this.assertInputCompatibility(t),S){let i=this.call(t,s);const g=Te(i),e=[];for(let a of g)r.indexOf(a)!==-1&&(a=a.clone()),e.push(a);if(i=Zn(e),this.activityRegularizer!=null)throw new Yt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=YU(t),g=this.computeOutputShape(i);let e;const a=KU(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?i[0]:i),g!=null&&g.length>0&&Array.isArray(g[0])?e=g.map((v,u)=>new Vi(a,v,this,Te(t),s,this.name,u)):e=new Vi(a,g,this,Te(t),s,this.name),this.addInboundNode(t,e,null,null,i,g,s),this._refCount++,this.activityRegularizer!=null)throw new Yt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return e}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let s=!1;this.batchInputShape.forEach((r,d)=>{r!=null&&t[d]!=null&&t[d]!==r&&(s=!0)}),s&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Mi(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const s of this.inboundNodes){const r=JSON.stringify(s.outputShapes);t.indexOf(r)===-1&&t.push(r)}if(t.length===1){const s=this.inboundNodes[0].outputShapes;return Array.isArray(s)&&Array.isArray(s[0])&&s.length===1?s[0]:s}else throw new Mi(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Qs(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Ad(this.weights)}build(t){this.built=!0}getWeights(t=!1){return F0(t?this.trainableWeights:this.weights)}setWeights(t){ft(()=>{const s=this.weights;if(s.length!==t.length)throw new ot(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${s.length} weights. Provided weights: ${t}...`);if(s.length===0)return;const r=[],d=F0(s);for(let S=0;S<d.length;++S){const i=d[S],g=s[S],e=t[S];if(!ee(i.shape,e.shape))throw new ot(`Layer weight shape ${i.shape} not compatible with provided weight shape ${e.shape}`);r.push([g,e])}z2(r)})}addWeight(t,s,r,d,S,i,g,e){if(this._addedWeightNames.indexOf(t)!==-1)throw new ot(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(d=e!=null?e():Re("zeros"));const a=d.apply(s,r),v=new UU(a,r,t,i,g);return a.dispose(),S!=null&&this.addLoss(()=>S.apply(v.read())),i==null&&(i=!0),i?this._trainableWeights.push(v):this._nonTrainableWeights.push(v),v}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=Te(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,s){if(!this.supportsMasking){if(s!=null)if(Array.isArray(s))s.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return s}addInboundNode(t,s,r,d,S,i,g=null){const e=Te(t);s=Te(s),r=Te(r),d=Te(d),S=Ed(S),i=Ed(i);const a=[],v=[],u=[];for(const o of e)a.push(o.sourceLayer),v.push(o.nodeIndex),u.push(o.tensorIndex);new zm({outboundLayer:this,inboundLayers:a,nodeIndices:v,tensorIndices:u,inputTensors:e,outputTensors:s,inputMasks:r,outputMasks:d,inputShapes:S,outputShapes:i},g);for(let o=0;o<s.length;o++)s[o].sourceLayer=this,s[o].nodeIndex=this.inboundNodes.length-1,s[o].tensorIndex=o}getConfig(){const t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function YU(n){n=Te(n);const t=[];for(const s of n)t.push(s.shape);return Zn(t)}function KU(n){return"float32"}function RN(n,t,s){if((t==null||s!=null&&s>0)&&(t=n.sourceLayer,s=n.nodeIndex),t.inboundNodes.length===0)return[n];{const r=t.inboundNodes[s];if(r.inboundLayers.length===0)return r.inputTensors;{const d=[];for(let S=0;S<r.inboundLayers.length;S++){const i=r.inputTensors[S],g=r.inboundLayers[S],e=r.nodeIndices[S],a=RN(i,g,e);for(const v of a)d.indexOf(v)===-1&&d.push(v)}return d}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dc extends Jt{constructor(t){if(super({dtype:t.dtype,name:t.name!=null?t.name:Bm("input").toString()}),t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new ot("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let s=t.batchInputShape;if(s==null){if(t.inputShape==null)throw new ot("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");s=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new ot("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=t.dtype||"float32";this.batchInputShape=s,this.dtype=r,this.inputSpec=[{shape:s}];const d=new Vi(this.dtype,this.batchInputShape,this,[],{},this.name);d.nodeIndex=0,d.tensorIndex=0,new zm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[d],outputTensors:[d],inputMasks:[null],outputMasks:[null],inputShapes:[s],outputShapes:[s]})}apply(t,s){throw new ot(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Dc.className="InputLayer";Ct(Dc);function jU(n){if(n.batchShape==null&&n.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(n.batchShape!=null&&n.shape!=null)throw new ot("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=n.batchShape;n.shape!=null&&t==null&&(t=[null].concat(n.shape));let s=n.dtype;return s==null&&(s="float32"),new Dc({batchInputShape:t,name:n.name,dtype:s,sparse:n.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZU(n,t){if(n.dtype==null||n.dtype===t.dtype)return t;try{return Nt(t,n.dtype)}catch{throw new ot(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${n.name}' (${n.dtype}).`)}}class kr{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof kr)for(const s in t.id2Value)this.id2Value[s]=t.id2Value[s],s in t.id2Mask&&(this.id2Mask[s]=t.id2Mask[s]);else{if(t==null)return;for(const s of t)this.add(s.key,s.value)}}add(t,s,r){if(this.id2Value[t.id]==null)this.id2Value[t.id]=ZU(t,s),this.name2Id[t.name]=t.id,r!=null&&(this.id2Mask[t.id]=r);else throw new ot(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof Vi){if(this.id2Value[t.id]==null)throw new ot(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{const s=this.name2Id[t];if(s==null)throw new ot(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[s]}}getMask(t){if(t instanceof Vi){if(this.id2Value[t.id]==null)throw new ot(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{const s=this.name2Id[t];if(s==null)throw new ot(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[s]}}disposeMasks(){this.id2Mask!=null&&Zt(this.id2Mask)}}const bd=new cN,Id=new cN;function QU(n){bd!=null&&bd.setMaxEntries(n),Id!=null&&Id.setMaxEntries(n)}function Cu(n,t,s,r){const d=s==null?!1:s.training,S=Array.isArray(n),i=S?n:[n],g=i.map(l=>l.name),e=[],a=t.names();for(const l of g)a.indexOf(l)!==-1?e.push(t.getValue(l)):e.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const v=g.join(",")+"|"+t.names().sort().join(",");let u=bd.get(v),o;if(u==null){const l=JU(i,t);u=l.sorted,o=l.recipientCounts,bd.put(v,u),Id.put(v,o)}o={},d||Object.assign(o,Id.get(v));const c=new kr(t);for(let l=0;l<u.length;++l){if(r!=null){const w=T0().numTensors;w>r.maxNumTensors&&(r.maxNumTensors=w),w<r.minNumTensors&&(r.minNumTensors=w)}const f=u[l],m=f.sourceLayer;if(m instanceof Dc)continue;const h=[],p=[],y=[];let x=!1;for(const w of f.inputs){const b=c.getValue(w),I=c.getMask(w);h.push(b),p.push(I),I!=null&&(x=!0),d||(o[w.name]--,o[w.name]===0&&!t.hasKey(w)&&g.indexOf(w.name)===-1&&!b.isDisposed&&w.sourceLayer.stateful!==!0&&y.push(b))}x&&(s=s||{},s.mask=p[0]);const T=Te(m.apply(h,s));let C=null;m.supportsMasking&&(C=m.computeMask(h,p));const E=_U(f),A=Array.isArray(E)?E:[E];for(let w=0;w<A.length;++w){c.hasKey(A[w])||c.add(A[w],T[w],Array.isArray(C)?C[0]:C);const b=g.indexOf(A[w].name);b!==-1&&(e[b]=T[w])}d||Zt(y)}return c.disposeMasks(),S?e:e[0]}function JU(n,t){q(n!=null&&n.length>0,()=>"Expected at least one fetch, got none");let s=[],r={};if(n.length===1){const d=QC(n[0],t);s=d.sorted,r=d.recipientMap}else{const d=new Set;for(const S of n){const{sorted:i,recipientMap:g}=QC(S,t);for(const e of i)d.has(e.name)||(s.push(e),d.add(e.name));for(const e in g)r[e]==null&&(r[e]=new Set),g[e].forEach(a=>r[e].add(a))}}return{sorted:s,recipientCounts:qU(r)}}function qU(n){const t={};for(const s in n)t[s]=n[s].size;return t}function QC(n,t){const s=new Set,r=[],d={};for(const g of t.names())s.add(g);const S=[],i=[];for(S.push(n);S.length>0;){const g=S[S.length-1];if(s.has(g.name)){S.pop();continue}const e=i[i.length-1]===S.length-1;if(g.inputs.length===0||e)S.pop(),r.push(g),s.add(g.name),e&&i.pop();else{i.push(S.length-1);for(const a of g.inputs)d[a.name]==null&&(d[a.name]=new Set),d[a.name].add(g.name),!s.has(a.name)&&S.push(a)}}return{sorted:r,recipientMap:d}}function _U(n){let t;if(n.sourceLayer.inboundNodes.length===1)t=n.sourceLayer.output;else{let s=null;for(let r=0;r<n.sourceLayer.inboundNodes.length;++r)for(const d of n.sourceLayer.inboundNodes[r].outputTensors)if(d.id===n.id){s=r;break}t=n.sourceLayer.getOutputAt(s)}return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tW=dt();tW.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,QU);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function V2(n,t){return ft(()=>Fn(Ot(rt(n,n),t,!0)))}class Oc extends Xl{getConfig(){return{}}}class NN extends Oc{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return ft(()=>{const s=V2(t,this.axis),r=ms(s,0,this.maxValue);return rt(t,$t(r,St(tn(),s)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}NN.className="MaxNorm";Ct(NN);class PN extends Oc{constructor(t){super(),this.defaultAxis=0,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return ft(()=>$t(t,St(tn(),V2(t,this.axis))))}getConfig(){return{axis:this.axis}}}PN.className="UnitNorm";Ct(PN);class FN extends Oc{apply(t){return Ji(t)}}FN.className="NonNeg";Ct(FN);class DN extends Oc{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=t.minValue!=null?t.minValue:this.defaultMinValue,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.rate=t.rate!=null?t.rate:this.defaultRate,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return ft(()=>{const s=V2(t,this.axis),r=St(rt(this.rate,ms(s,this.minValue,this.maxValue)),rt(1-this.rate,s));return rt(t,$t(r,St(tn(),s)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}DN.className="MinMaxNorm";Ct(DN);const JC={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function sn(n){return N2(n)}function qC(n,t={}){return Rc(n,Ws.getMap().classNameMap,t,"constraint")}function rn(n){if(n==null)return null;if(typeof n=="string"){const s={className:n in JC?JC[n]:n,config:{}};return qC(s)}else return n instanceof Oc?n:qC(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function ba(n){if(n==null)return;const t=[],s=[],r=[];for(const d in n){const S=n[d];if(typeof S!="number"){const i=S;t.push(i.data()),s.push(d),r.push(i)}}if(t.length>0){const d=await Promise.all(t);for(let S=0;S<d.length;++S)n[s[S]]=d[S][0];Zt(r)}}function ON(n){if(n!=null)for(const t in n){const s=n[t];typeof s!="number"&&s.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var _C;(function(n){n[n.SILENT=0]="SILENT",n[n.VERBOSE=1]="VERBOSE"})(_C||(_C={}));const eW=125;class oh{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,s){}async onEpochEnd(t,s){}async onBatchBegin(t,s){}async onBatchEnd(t,s){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class nW{constructor(t,s=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=s}append(t){this.callbacks.push(t)}setParams(t){for(const s of this.callbacks)s.setParams(t)}setModel(t){for(const s of this.callbacks)s.setModel(t)}async onEpochBegin(t,s){s==null&&(s={});for(const r of this.callbacks)await r.onEpochBegin(t,s)}async onEpochEnd(t,s){s==null&&(s={});for(const r of this.callbacks)await r.onEpochEnd(t,s)}async onBatchBegin(t,s){s==null&&(s={});for(const r of this.callbacks)await r.onBatchBegin(t,s)}async onBatchEnd(t,s){s==null&&(s={});for(const r of this.callbacks)await r.onBatchEnd(t,s)}async onTrainBegin(t){t==null&&(t={});for(const s of this.callbacks)await s.onTrainBegin(t)}async onTrainEnd(t){t==null&&(t={});for(const s of this.callbacks)await s.onTrainEnd(t)}}class sW extends oh{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,s){s==null&&(s={});const r=s.size==null?0:s.size;this.seen+=r;for(const d in s){const S=s[d];if(typeof S=="number")this.totals.hasOwnProperty(d)||(this.totals[d]=0),this.totals[d]=this.totals[d]+S*r;else{let i;d in this.totals?i=this.totals[d]:this.totals[d]=0;const g=ft(()=>St(this.totals[d],rt(S,r)));this.totals[d]=g,i!=null&&i.dispose()}}}async onEpochEnd(t,s){if(s!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?s[r]=this.totals[r]/this.seen:ft(()=>{const d=rt($t(1,this.seen),this.totals[r]);s[r]=d,this.totals[r].dispose(),fn(s[r])}))}}class iW extends oh{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,s){s==null&&(s={}),this.epoch.push(t);for(const r in s)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(s[r])}async syncData(){const t=[],s=[],r=[];for(const S in this.history){const i=this.history[S];for(let g=0;g<i.length;++g)if(typeof i[g]!="number"){const e=i[g];t.push(e.data()),s.push(S),r.push(g)}}const d=await Promise.all(t);for(let S=0;S<d.length;++S)this.history[s[S]][r[S]].dispose(),this.history[s[S]][r[S]]=d[S][0]}}class rW extends oh{constructor(t,s){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||kR,this.yieldEvery=s||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=eW),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");s0(this.yieldEvery)&&(this.maybeWait=TU(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,s,r){const d=[];this.yield!=null&&(await ba(r),d.push(this.yield(t,s,r))),d.push(this.nextFrameFunc()),await Promise.all(d)}async onEpochBegin(t,s){this.currentEpoch=t,this.epochBegin!=null&&(await ba(s),await this.epochBegin(t,s))}async onEpochEnd(t,s){const r=[];this.epochEnd!=null&&(await ba(s),r.push(this.epochEnd(t,s))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(t,s){this.batchBegin!=null&&(await ba(s),await this.batchBegin(t,s))}async onBatchEnd(t,s){const r=[];this.batchEnd!=null&&(await ba(s),r.push(this.batchEnd(t,s))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):s0(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,s)),await Promise.all(r)}async onTrainBegin(t){this.trainBegin!=null&&(await ba(t),await this.trainBegin(t))}async onTrainEnd(t){this.trainEnd!=null&&(await ba(t),await this.trainEnd(t))}}function LN(n,t){return n==null&&(n={}),n instanceof oh?[n]:Array.isArray(n)&&n[0]instanceof oh?n:Te(n).map(r=>new rW(r,t))}class zs{constructor(){}static registerCallbackConstructor(t,s){q(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),zs.checkForDuplicate(s),zs.constructors[t]==null&&(zs.constructors[t]=[]),zs.constructors[t].push(s)}static checkForDuplicate(t){for(const s in zs.constructors)zs.constructors[+s].forEach(d=>{if(d===t)throw new ot("Duplicate callback constructor.")})}static clear(){zs.constructors={}}static createCallbacks(t){const s=[];for(const r in zs.constructors){const d=+r;t>=d&&s.push(...zs.constructors[d])}return s.map(r=>new r)}}zs.constructors={};function MN(n,t,s,r,d,S,i,g,e){const a=new iW,v=[new sW,...zs.createCallbacks(t)];n!=null&&v.push(...n),v.push(a);const u=new nW(v);return u.setParams({epochs:s,initialEpoch:r,samples:d,steps:S,batchSize:i,verbose:t,doValidation:g,metrics:e}),{callbackList:u,history:a}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pr(n,t={},s=!1){return Rc(n,Ws.getMap().classNameMap,t,"layer",s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Rd(n,t){return ft(()=>{n.dtype!=="float32"&&(n=Nt(n,"float32"));const s=Ot(Pc(n),t,!0),r=Vl(s.shape,tn()),d=Fn(Ar(s,r));return $t(n,d)})}function Vm(n,t){return ft(()=>$e(Pc(Ft(t,n)),-1))}function G2(n,t){return ft(()=>$e(Je(Ft(t,n)),-1))}function U2(n,t){return ft(()=>{const s=Ft(n,t),r=ms(Je(n),tn(),Number.MAX_VALUE),d=Je($t(s,r));return rt(100,$e(d,-1))})}function aW(n,t){return ft(()=>{const s=ms(t,tn(),Number.MAX_VALUE),r=Ns(St(1,s)),d=ms(n,tn(),Number.MAX_VALUE),S=Ns(St(1,d));return $e(Pc(Ft(r,S)),-1)})}function oW(n,t){return ft(()=>{const s=Ar(0,Ft(1,rt(n,t)));return $e(Pc(s),-1)})}function lW(n,t){return ft(()=>{const s=Ar(0,Ft(1,rt(n,t)));return $e(s,-1)})}function uW(n,t){return ft(()=>{const s=Ot(rt(n,t),-1),r=ei(rt(Ft(1,n),t),-1);return Ar(0,St(1,Ft(r,s)))})}function hW(n,t){return ft(()=>{const s=Math.log(2),r=Ft(t,n),d=Ft(St(r,Gl(rt(-2,r))),s);return $e(d,-1)})}function lh(n,t,s=!1){return ft(()=>{if(s)t=bm(t);else{const r=Ot(t,t.shape.length-1,!0);t=$t(t,r)}return t=ms(t,tn(),1-tn()),Ee(Ot(rt(Nt(n,"float32"),Ns(t)),t.shape.length-1))})}function Nd(n,t,s=!1){return ft(()=>{const r=Nt(wc(DU(n)),"int32");t=ms(t,tn(),1-tn());const d=t.shape,S=at(A1(r,d[d.length-1]),d);return lh(S,t,s)})}function cW(n,t){if(!ee(n.shape,t.shape))throw new ot(`logits and labels must have the same shape, but got shapes ${JSON.stringify(n.shape)} and ${JSON.stringify(t.shape)}`);return ft(()=>{const s=Ji(t),r=Ee(Je(t));return St(Ft(s,rt(t,n)),gm(Rs(r)))})}function Gm(n,t){return ft(()=>{let s;return s=ms(t,tn(),1-tn()),s=Ns($t(s,Ft(1,s))),$e(cW(n,s),-1)})}function fW(n,t){return ft(()=>{const s=ms(n,tn(),1),r=ms(t,tn(),1);return Ot(rt(n,Ns($t(s,r))),-1)})}function dW(n,t){return ft(()=>{const s=Ns(St(tn(),t));return $e(Ft(t,rt(n,s)),-1)})}function $N(n,t){return ft(()=>{const s=Rd(n,-1),r=Rd(t,-1),d=rt(s,r);return Ee(Ot(d,-1))})}const Pd={meanSquaredError:Vm,meanAbsoluteError:G2,meanAbsolutePercentageError:U2,meanSquaredLogarithmicError:aW,squaredHinge:oW,hinge:lW,categoricalHinge:uW,logcosh:hW,categoricalCrossentropy:lh,sparseCategoricalCrossentropy:Nd,binaryCrossentropy:Gm,kullbackLeiblerDivergence:fW,poisson:dW,cosineProximity:$N};function Xv(n){if(typeof n=="string"){if(n in Pd)return Pd[n];let t=`Unknown loss ${n}`;throw n.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${n}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ot(t)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BN(n,t){return ft(()=>{const s=rt(.5,Ps(t)),r=Ki(Ts(t,s),n.dtype);return $e(Ei(n,r),-1)})}function kN(n,t){return ft(()=>Ki(Ei(Cl(n,-1),Cl(t,-1)),"float32"))}function pW(n,t){return ft(()=>Nt(Ot(Zi(Ei(n,1),Ei(t,1))),"float32"))}function mW(n,t){return ft(()=>Nt(Ot(Zi(Ei(n,0),Ei(t,1))),"float32"))}function vW(n,t){return ft(()=>{const s=pW(n,t),r=mW(n,t),d=St(s,r);return Nt(Rn(Ts(d,0),$t(s,d),0),"float32")})}function gW(n,t){return Gm(n,t)}function xW(n,t){return n.rank===t.rank&&(n=go(n,[n.rank-1])),t=Cl(t,-1),t.dtype!==n.dtype&&(t=Nt(t,n.dtype)),Nt(Ei(n,t),"float32")}const yW=Vm,TW=Vm,SW=G2,CW=G2,wW=U2,EW=U2,zN=lh,AW=$N,VN=Nd,Fd={binaryAccuracy:BN,categoricalAccuracy:kN,precision:vW,categoricalCrossentropy:zN,sparseCategoricalCrossentropy:VN,mse:yW,MSE:TW,mae:SW,MAE:CW,mape:wW,MAPE:EW,cosine:AW};function bW(n){if(typeof n=="string"&&n in Fd)return Fd[n];if(typeof n!="string"&&n!=null)return n;throw new ot(`Unknown metric ${n}`)}function mf(n){if($i(n!==null,`Unknown LossOrMetricFn ${n}`),typeof n=="string")return n;{let t;for(const s of Object.keys(Pd))if(Pd[s]===n){t=s;break}if(t!==void 0)return t;for(const s of Object.keys(Fd))if(Fd[s]===n){t=s;break}return t!==void 0?t:n.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function IW(n){const t={Adagrad:()=>Do.adagrad(.01),Adadelta:()=>Do.adadelta(1,.95,tn()),Adam:()=>Do.adam(.001,.9,.999,tn()),Adamax:()=>Do.adamax(.002,.9,.999,tn(),0),RMSProp:()=>Do.rmsprop(.001,.9,0,tn()),SGD:()=>Do.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,n in t)return t[n]();throw new ot(`Unknown Optimizer ${n}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const tw=1*1024*1024;function ew(n,t,s=!1){if(n==null||typeof n!="object"||Object.getPrototypeOf(n)!==Object.prototype||!D0(n))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(s){const r=JSON.stringify(n);r.length>tw&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${tw}.`)}}function D0(n){if(n===null)return!0;if(typeof n=="object")if(Object.getPrototypeOf(n)===Object.prototype){const t=Object.keys(n);for(const s of t)if(typeof s!="string"||!D0(n[s]))return!1;return!0}else if(Array.isArray(n)){for(const t of n)if(!D0(t))return!1;return!0}else return!1;else{const t=typeof n;return t==="string"||t==="number"||t==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RW(n,t,s,r=console.log){const d=PW(n),S=["Layer (type)","Input Shape","Output shape","Param #"];d?(t=t||90,s=s||[.32,.61,.89,1]):(t=t||115,s=s||[.24,.48,.7,.8,1]),s[s.length-1]<=1&&(s=s.map(v=>Math.floor(t*v)));let i;if(!d){S.push("Receives inputs"),i=[];for(const v in n.nodesByDepth)i.push(...n.nodesByDepth[v])}r("_".repeat(t)),Dd(S,s,r),r("=".repeat(t));const g=n.layers;for(let v=0;v<g.length;++v)d?FW(g[v],s,r):DW(g[v],s,i,r),r((v===g.length-1?"=":"_").repeat(t));n.checkTrainableWeightsConsistency();const e=NW(n),a=Ad(n.nonTrainableWeights);r(`Total params: ${e+a}`),r(`Trainable params: ${e}`),r(`Non-trainable params: ${a}`),r("_".repeat(t))}function NW(n){let t;return n.collectedTrainableWeights!=null?t=Ad(n.collectedTrainableWeights):t=Ad(n.trainableWeights),t}function PW(n){let t=!0;const s=[],r=[];for(const d in n.nodesByDepth)s.push(n.nodesByDepth[d]);for(const d of s){if(d.length>1||d.length===1&&d[0].inboundLayers.length>1){t=!1;break}r.push(...d)}if(t)for(const d of n.layers){let S=!1;for(const i of d.inboundNodes)if(r.indexOf(i)!==-1)if(S){t=!1;break}else S=!0;if(!t)break}return t}function Dd(n,t,s=console.log){let r="";for(let d=0;d<n.length;++d)d>0&&(r=r.slice(0,r.length-1)+" "),r+=n[d],r=r.slice(0,t[d]),r+=" ".repeat(t[d]-r.length);s(r)}function FW(n,t,s){let r,d;try{d=n.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch{d="multiple"}try{r=JSON.stringify(n.outputShape)}catch{r="multiple"}const S=n.name,i=n.getClassName(),g=[`${S} (${i})`,d,r,n.countParams().toString()];Dd(g,t,s)}function DW(n,t,s,r){let d,S;try{S=n.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{S="multiple"}try{d=JSON.stringify(n.outputShape)}catch{d="multiple"}const i=[];for(const u of n.inboundNodes)if(!(s!=null&&s.length>0&&s.indexOf(u)===-1))for(let o=0;o<u.inboundLayers.length;++o){const c=u.inboundLayers[o].name,l=u.nodeIndices[o],f=u.tensorIndices[o];i.push(`${c}[${l}][${f}]`)}const g=n.name,e=n.getClassName(),a=i.length===0?"":i[0],v=[`${g} (${e})`,S,d,n.countParams().toString(),a];Dd(v,t,r);for(let u=1;u<i.length;++u)Dd(["","","","",i[u]],t,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function GN(n,t,s){return(n==="inboundNodes"||n==="outputLayers"||n==="inputLayers")&&t===0&&typeof s=="string"}function O0(n,t){if(n===null)return null;if(typeof n=="string")return Da(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const s=[],r=n.length;for(let d=0;d<r;++d){const S=n[d];GN(t,d,S)?s.push(S):s.push(O0(S,t))}return s}else{const s={};for(const r of Object.keys(n)){const d=n[r];if(r==="name"&&typeof d=="string")s[r]=d;else{const S=Da(r);s[S]=O0(d,S)}}return s}}function L0(n,t){if(n==null)return null;if(typeof n=="string")return rr(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const s=[],r=n.length;for(let d=0;d<r;++d){const S=n[d];GN(t,d,S)?s.push(S):s.push(L0(S,t))}return s}else{const s={};for(const r of Object.keys(n)){const d=n[r],S=rr(r);(r==="name"||r==="className")&&typeof d=="string"?s[S]=d:s[S]=L0(d,r)}return s}}/** @license See the LICENSE file. */const UN="4.9.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class di extends Jt{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,this.name==null){const p=this.getClassName().toLowerCase();this.name=Bm(p)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],Qr(this.inputs).length!==this.inputs.length)throw new ot(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(p=>p.name)}`);Qr(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(p=>p.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const p of this.outputs){const y=p.sourceLayer,x=p.nodeIndex,T=p.tensorIndex;this.outputLayers.push(y),this.outputLayersNodeIndices.push(x),this.outputLayersTensorIndices.push(T)}for(const p of this.inputs){const y=p.sourceLayer,x=p.nodeIndex,T=p.tensorIndex;$i(x===0,"input layer has >1 nodes"),$i(T===0,"input layer has >1 tensors"),this.inputLayers.push(y),this.inputLayersNodeIndices.push(x),this.inputLayersTensorIndices.push(T)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let p=0;p<this.inputLayers.length;p++){const y=this.inputLayers[p];if(!(y instanceof Dc))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${p} (0-based) originates from layer type ${y.getClassName()}.`);this.inputNames.push(y.name),this.feedInputShapes.push(y.batchInputShape),this.feedInputNames.push(y.name)}for(const p of this.outputLayers)this.outputNames.push(p.name);this.internalInputShapes=this.inputs.map(p=>p.shape),this.internalOutputShapes=this.outputs.map(p=>p.shape);const s={},r={},d={},S={},i={},g=[],e=(p,y,x,T,C,E)=>{(T==null||C==null||E==null)&&(T=p.sourceLayer,C=p.nodeIndex,E=p.tensorIndex);const A=T.inboundNodes[C];if(x.indexOf(A)!==-1)throw new Qs(`The tensor ${p.name} at layer "${T.name}" is part of a cycle.`);if(y.indexOf(A)!==-1)return;this.containerNodes.add(di.nodeKey(T,C)),T.id in i||(i[T.id]=Object.keys(i).length),x.indexOf(A)===-1&&x.push(A);const w=A.inboundLayers.length;for(let b=0;b<w;b++){const I=A.inputTensors[b],R=A.inboundLayers[b],N=A.nodeIndices[b],F=A.tensorIndices[b];e(I,y,x,R,N,F)}for(y.push(A);x.indexOf(A)>=0;)x.splice(x.indexOf(A),1);g.push(A)},a=[],v=[];for(const p of this.outputs)e(p,a,v);const u=g.slice().reverse();for(const p of u){r[p.id]=p,p.id in s||(s[p.id]=0);let y=s[p.id];const x=d[p.outboundLayer.id]==null?0:d[p.outboundLayer.id];y=Math.max(y,x),d[p.outboundLayer.id]=y,S[p.outboundLayer.id]=p.outboundLayer,s[p.id]=y;for(let T=0;T<p.inboundLayers.length;T++){const C=p.inboundLayers[T],E=p.nodeIndices[T],A=C.inboundNodes[E],w=s[A.id]==null?0:s[A.id];s[A.id]=Math.max(y+1,w),r[A.id]=A}}const o={};for(const p in s){const y=s[p];y in o||(o[y]=[]),o[y].push(r[p])}const c={};for(const p in d){const y=d[p];y in c||(c[y]=[]),c[y].push(S[p])}let l=Object.keys(c).map(p=>parseInt(p,10)).sort(ff);this.layers=[];for(const p of l){const y=c[p];y.sort((x,T)=>{const C=i[x.id],E=i[T.id];return C<E?-1:C>E?1:0});for(const x of y)x instanceof di&&this.internalContainerRefs.push(x),this.layers.push(x)}this.layersByDepth=c,l=Object.keys(o).map(p=>parseInt(p,10)).sort(ff);const f=this.inputs.slice(),m=[];for(const p of l)for(const y of o[p]){const x=y.outboundLayer;if(x!=null){for(const T of y.inputTensors)if(f.indexOf(T)===-1)throw new Qs(`Graph disconnected: cannot obtain value for tensor ${T} at layer "${x.name}". The following previous layers were accessed without issue: ${m}`);for(const T of y.outputTensors)f.push(T);m.push(x.name)}}this.nodesByDepth=o;const h=this.layers.map(p=>p.name);for(const p of h){const y=h.filter(x=>x===p).length;if(y!==1)throw new Qs(`The name "${p}" is used ${y} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(h))}this.outboundNodes=[],this.inboundNodes=[],new zm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(p=>null),outputMasks:this.outputs.map(p=>null),inputShapes:this.inputs.map(p=>p.shape),outputShapes:this.outputs.map(p=>p.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const s of this.layers)t.numDisposedVariables+=s.dispose().numDisposedVariables;for(const s of this.internalContainerRefs)t.numDisposedVariables+=s.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(s=>{s._trainableWeights.forEach(r=>r.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new ot("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const s of this.layers)t=t.concat(s.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const s of this.layers)t.push(...s.nonTrainableWeights);if(!this.trainable){const s=[];for(const r of this.layers)s.push(...r.trainableWeights);return s.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,s=!0){const r={};let d=0;const S=Object.keys(t)[0].split("/"),i=!isNaN(parseInt(S[S.length-1],10));for(const e of this.layers)for(const[a,v]of e.weights.entries()){const u=i?`${v.name.split("/").slice(0,-1).join("/")+"/"}${a}`:v.originalName;if(r[u]!=null)throw new ot(`Duplicate weight name: ${u}`);r[u]=v,d++}const g=[];for(const e in t){let a=e;if(r[e]==null){const v=e.split("/");a=v.slice(0,-2).concat([v[v.length-1]]).join("/")}if(r[a]!=null)g.push([r[a],t[e]]);else if(s)throw new ot(`Provided weight data has no target variable: ${e}`);delete r[a]}if(s){const e=[];for(const a in r)e.push(a);if(e.length>0)throw new ot(`${e.length} of ${d} weights are not set: ${e}`)}z2(g)}updatedConfig(){const t=this.getConfig(),s={};return s.className=this.getClassName(),s.config=t,s.kerasVersion=`tfjs-layers ${UN}`,s.backend="TensorFlow.js",s}toJSON(t,s=!0){const r=L0(this.updatedConfig());return s?JSON.stringify(r):r}call(t,s){return ft(()=>{t=Te(t);const r=new kr;for(let d=0;d<this.inputs.length;++d)r.add(this.inputs[d],t[d]);return Cu(this.outputs,r,s)})}computeMask(t,s){return ft(()=>{t=Te(t);let r;return s==null?r=io(null,t.length):r=Te(s),this.runInternalGraph(t,r)[1]})}computeOutputShape(t){const s=Ed(t);if(s.length!==this.inputLayers.length)throw new ot(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let g=0;g<s.length;g++){const e=this.inputLayers[g],a=s[g],v=e.name+"_0_0";r[v]=a}const d=Object.keys(this.nodesByDepth).map(g=>parseInt(g,10)).sort(ff);if(d.length>1)for(const g of d){const e=this.nodesByDepth[g];for(const a of e){const v=a.outboundLayer;if(this.inputLayers.map(f=>f.id).indexOf(v.id)!==-1)continue;const u=[];for(let f=0;f<a.inboundLayers.length;f++){const m=a.inboundLayers[f],h=a.nodeIndices[f],p=a.tensorIndices[f],y=`${m.name}_${h}_${p}`,x=r[y];u.push(x)}const o=v.computeOutputShape(Zn(u)),c=Ed(o),l=v.inboundNodes.indexOf(a);for(let f=0;f<c.length;f++){const m=`${v.name}_${l}_${f}`;r[m]=c[f]}}}const S=[],i=[];for(let g=0;g<this.outputLayers.length;g++){const e=this.outputLayers[g],a=this.outputLayersNodeIndices[g],v=this.outputLayersTensorIndices[g],u=`${e.name}_${a}_${v}`;i.push(u)}for(let g=0;g<i.length;g++){const e=i[g];$i(e in r),S.push(r[e])}return Zn(S)}runInternalGraph(t,s){s==null&&(s=io(null,t.length));const r={};for(let e=0;e<this.inputs.length;++e){const a=this.inputs[e],v=t[e],u=s[e];r[a.id]=[v,u]}const d=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(ff);for(const e of d){const a=this.nodesByDepth[e];for(const v of a){const u=v.outboundLayer,o=v.inputTensors,c=v.outputTensors,l=new Array;for(const f of o)f.id in r&&l.push(r[f.id]);if(l.length===o.length){let f={},m,h,p,y;if(v.callArgs!=null&&(f=v.callArgs),l.length===1){const[x,T]=l[0];f.mask==null&&(f.mask=T),p=Te(u.call(x,f)),y=Te(u.computeMask(x,T)),m=[x],h=[T]}else m=l.map(x=>x[0]),h=l.map(x=>x[1]),f.mask==null&&(f.mask=h),p=Te(u.call(m,f)),y=Te(u.computeMask(m,h));if(u.activityRegularizer)throw new Yt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let x=0;x<c.length;++x){const T=c[x],C=p[x],E=y[x];r[T.id]=[C,E]}}}}const S=[],i=[],g=[];for(const e of this.outputs){$i(e.id in r,`Could not compute output ${e.name} : ${e.id}`);const[a,v]=r[e.id];g.push(a.shape),S.push(a),i.push(v)}return[S,i,g]}buildNodeConversionMap(t){const s={};let r;for(const d of this.layers){r=d instanceof di?1:0;for(let S=0;S<d.inboundNodes.length;S++){const i=di.nodeKey(d,S);this.containerNodes.has(i)&&(s[i]=r,r+=1)}}return s}getLayer(t,s){if(s!=null)return this.findLayer(s);if(t==null)throw new ot("Provide either a layer name or layer index");if(typeof t=="number")return this.findLayer(t);for(const r of this.layers)if(r.name===t)return r;throw new ot(`No such layer: ${t}`)}findLayer(t){if(this.layers.length<=t)throw new ot(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}calculateLosses(){return ft(()=>{const t=[];for(const s of this.layers)for(let r=0;r<s.inboundNodes.length;++r){const d=di.nodeKey(s,r);this.containerNodes.has(d)&&t.push(...s.calculateLosses())}return t})}getConfig(){const t={name:this.name},s=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const g=i.getClassName(),e=i.getConfig(),a=[];for(let u=0;u<i.inboundNodes.length;u++){const o=i.inboundNodes[u],c=di.nodeKey(i,u);let l={};if(this.containerNodes.has(c)){if(o.callArgs)try{JSON.stringify(o.callArgs),l=o.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${o.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),l={}}if(o.inboundLayers.length>0){const f=[];for(let m=0;m<o.inboundLayers.length;m++){const h=o.inboundLayers[m],p=o.nodeIndices[m],y=o.tensorIndices[m],x=di.nodeKey(h,p);let T=s[x];T==null&&(T=0),f.push([h.name,T,y,l])}a.push(f)}}}const v={};v.name=i.name,v.className=g,v.config=e,v.inboundNodes=a,r.push(v)}t.layers=r;const d=[];for(let i=0;i<this.inputLayers.length;i++){const g=this.inputLayers[i],e=this.inputLayersNodeIndices[i],a=di.nodeKey(g,e);if(!this.containerNodes.has(a))continue;let v=s[a];v==null&&(v=0);const u=this.inputLayersTensorIndices[i];d.push([g.name,v,u])}t.inputLayers=d;const S=[];for(let i=0;i<this.outputLayers.length;i++){const g=this.outputLayers[i],e=this.outputLayersNodeIndices[i],a=di.nodeKey(g,e);if(!this.containerNodes.has(a))continue;let v=s[a];v==null&&(v=0);const u=this.outputLayersTensorIndices[i];S.push([g.name,v,u])}return t.outputLayers=S,t}static fromConfig(t,s,r={},d=!1){const S={},i={};function g(m,h){m.name in i?i[m.name].push(h):i[m.name]=[h]}function e(m,h){const p=[];let y;for(const x of h){const T=x[0],C=x[1],E=x[2];if(y=x[3]==null?{}:x[3],!(T in S)){g(m,h);return}const A=S[T];if(A.inboundNodes.length<=C){g(m,h);return}const w=A.inboundNodes[C];p.push(w.outputTensors[E])}p.length>0&&m.apply(Zn(p),y)}function a(m){const h=m.name,p=pr(m,s.customObjects!=null?s.customObjects:{});p.setFastWeightInitDuringBuild(d),S[h]=p,m.inboundNodes.forEach(x=>{if(!(x instanceof Array))throw new ot(`Corrupted configuration, expected array for nodeData: ${x}`);g(p,x)})}const v=s.name,u=s.layers;for(const m of u)a(m);for(;!yU(i);)for(const m of u){const h=S[m.name];if(h.name in i){const p=i[h.name];delete i[h.name];for(const y of p)e(h,y)}}const o=[],c=[],l=s.inputLayers;for(const m of l){const h=m[0],p=m[1],y=m[2];$i(h in S);const T=S[h].inboundNodes[p].outputTensors;o.push(T[y])}const f=s.outputLayers;for(const m of f){const h=m[0],p=m[1],y=m[2];$i(h in S);const T=S[h].inboundNodes[p].outputTensors;c.push(T[y])}return new t({inputs:o,outputs:c,name:v})}get stateful(){if(this._stateful)throw new ot("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){ft(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function OW(n,t,s){const r=t.length;if(n==null||Array.isArray(n)&&n.length===0)return t.map(d=>null);if(r===1)return Array.isArray(n)&&n.length===1?n:typeof n=="object"&&t[0]in n?[n[t[0]]]:[n];if(Array.isArray(n)){if(n.length!==r)throw new Error(`Provided ${s} is an array of ${n.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return n}else if(typeof n=="object"&&Object.keys(n).length>0&&typeof n[Object.keys(n)[0]]=="object"){const d=[];return t.forEach(S=>{S in n?d.push(n[S]):d.push(null)}),d}else throw new Error(`The model has multiple (${r}) outputs, so ${s} must be either an array with ${r} elements or an object with ${t} keys. Provided ${s} not understood: ${JSON.stringify(n)}`)}function WN(n,t){return OW(n,t,"classWeight")}async function XN(n,t,s,r){if(t!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(s!=null){const d=ft(()=>{if(n.shape.length===1)return dr(n);if(n.shape.length===2){if(n.shape[1]>1)return Cl(n,1);if(n.shape[1]===1)return at(n,[n.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${n.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${n.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),S=Array.from(await d.data());Zt(d);const i=[];return S.forEach(g=>{if(s[g]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${g} exists in the data but not in classWeight`);i.push(s[g])}),Gn(i,"float32")}else return null}function LW(n,t){return rt(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const MW=32;function HN(n,t){let s,r;const d=t;s=d.xs,r=d.ys,q(s!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);const S=nw("input",n.inputNames,s),i=nw("output",n.outputNames,r),g=S[0].shape[0];q(S.length===n.inputs.length,()=>`LayersModel has ${n.inputs.length} inputs, but the dataset provides ${S.length} inputs.  (Expected input keys: ${JSON.stringify(n.inputNames)})`),q(i.length===n.outputs.length,()=>`LayersModel has ${n.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(n.outputNames)})`);for(let e=0;e<S.length;e++)q(S[e].shape[0]===g,()=>`Batch size mismatch: input ${n.inputNames[e]} has ${S[e].shape[0]}; expected  ${g} based on input ${n.inputNames[0]}.`);for(let e=0;e<i.length;e++)q(i[e].shape[0]===g,()=>`Batch size mismatch: output ${n.outputNames[e]} has ${i[e].shape[0]}; expected  ${g} based on input ${n.inputNames[0]}.`);return{xs:S,ys:i}}function nw(n,t,s){if(s instanceof be)return[s];if(Array.isArray(s))return q(s.length===t.length,()=>`Received an array of ${s.length} Tensors, but expected ${t.length} to match the ${n} keys ${t}.`),s;{const r=[];for(const d of t){if(s[d]==null)throw new ot(`The feature data generated by the dataset lacks the required ${n} key '${d}'.`);r.push(s[d])}return r}}function $W(n){if(n.length===3)throw new Yt("Validation with sample weights is not implemented yet.");return{xs:n[0],ys:n[1]}}async function BW(n,t,s){const r=s.batchesPerEpoch!=null;if(q(n.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),q(s!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),q(s.epochs!=null&&s.epochs>0&&Number.isInteger(s.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${s.epochs}`),q(!r||s.batchesPerEpoch>0&&Number.isInteger(s.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${s.batchesPerEpoch}`),q(s.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0;try{const d=s.validationData!=null;let S,i;if(d)if(sw(s.validationData))q(s.validationBatches==null||s.validationBatches>0&&Number.isInteger(s.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${s.validationBatches}`);else{const m=$W(s.validationData);S=m.xs,i=m.ys}const g=n.makeTrainFunction(),e=n.getDedupedMetricsNames();let a;d?a=e.slice().concat(e.map(m=>"val_"+m)):a=e.slice();const v=LN(s.callbacks,s.yieldEvery),u=s.verbose==null?1:s.verbose,{callbackList:o,history:c}=MN(v,u,s.epochs,null,null,kW(t,s),null,d,a);o.setModel(n),n.history=c,await o.onTrainBegin(),n.stopTraining_=!1;let l=s.initialEpoch==null?0:s.initialEpoch,f=await t.iterator();for(;l<s.epochs;){const m={};await o.onEpochBegin(l);let h=0,p=0;for(r||(f=await t.iterator());!r||h<s.batchesPerEpoch;){const y=await f.next();if(r&&y.done){console.warn(`You provided \`batchesPerEpoch\` as ${s.batchesPerEpoch}, but your dataset iterator ran out of data after ${h} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${s.batchesPerEpoch*s.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(y.value!=null){const{xs:x,ys:T}=HN(n,y.value),C={};C.batch=p,C.size=x[0].shape[0],await o.onBatchBegin(p,C);const E=[];if(s.classWeight!=null){const b=WN(s.classWeight,n.outputNames);for(let I=0;I<b.length;++I)E.push(await XN(T[I],null,b[I]))}const A=x.concat(T).concat(E),w=g(A);Zt(A);for(let b=0;b<e.length;++b){const I=e[b],R=w[b];C[I]=R,fn(R)}await o.onBatchEnd(p,C),ON(C),p++,h++}if(r?h>=s.batchesPerEpoch:y.done){if(d){let x;sw(s.validationData)?x=Te(await n.evaluateDataset(s.validationData,{batches:s.validationBatches})):x=Te(n.evaluate(S,i,{batchSize:s.validationBatchSize==null?MW:s.validationBatchSize,verbose:0}));for(let T=0;T<n.metricsNames.length;++T)m[`val_${n.metricsNames[T]}`]=x[T]}break}if(n.stopTraining_)break}if(await o.onEpochEnd(l,m),l++,n.stopTraining_)break}return await o.onTrainEnd(),await n.history.syncData(),n.history}finally{n.isTraining=!1}}function kW(n,t){let s=null;return t.batchesPerEpoch!=null?s=t.batchesPerEpoch:Number.isFinite(n.size)&&(s=n.size),s}function sw(n){return typeof n.iterator=="function"}function zW(n){return typeof n.next=="function"}async function VW(n,t,s){s=s||{};const r=s.batches!=null,d=n.testFunction;let S=[];if(s.verbose>0)throw new Yt("Verbose mode is not implemented yet.");q(!r||s.batches>0&&Number.isInteger(s.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(s.batches)}`);const i=zW(t)?t:await t.iterator();let g=0,e=0;for(;!r||e<s.batches;){const a=await i.next();if(S=ft(()=>{if(a.value){const{xs:v,ys:u}=HN(n,a.value),o=v.concat(u),c=ft(()=>d(o));if(Zt(o),e===0)for(let f=0;f<c.length;++f)S.push(Vt(0));const l=o[0].shape[0];for(let f=0;f<c.length;++f){const m=c[f],h=S[f];S[f]=ft(()=>St(S[f],rt(l,m))),e>0&&Zt(h)}Zt(c),g+=l,++e}return S}),a.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${s.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let a=0;a<S.length;++a){const v=S[a];S[a]=$t(S[a],g),Zt(v)}return Zn(S)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hv(n){q(n>0&&Number.isInteger(n),()=>`batchSize is required to be a positive integer, but got ${n}`)}function du(n,t,s){return n==null?[null]:Array.isArray(n)?n.map(r=>Xa(r,t,s-t)):Xa(n,t,s-t)}function M0(n,t){return ft(()=>n==null?null:Array.isArray(n)?n.map(s=>M0(s,t)):yN(n,t.dtype==="int32"?t:Nt(t,"int32")))}function Yv(n,t){const s=[];let r=0,d=null;for(;r<n;)d=r+t,d>=n&&(d=n),s.push([r,d]),r=d;return s}function YN(n){const t=[];n instanceof be&&(n=[n]);for(let s=0;s<n.length;++s){const r=n[s];if(r.rank===1)t.push(Nc(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function fi(n,t){if(n==null)return;const s=[];if(t instanceof be)s.push(t.id);else if(Array.isArray(t))t.forEach(d=>s.push(d.id));else if(t!=null)for(const d in t){const S=t[d];s.push(S.id)}const r=[];if(n instanceof be)s.indexOf(n.id)===-1&&r.push(n);else if(Array.isArray(n))n.forEach(d=>{s.indexOf(d.id)===-1&&r.push(d)});else if(n!=null)for(const d in n){const S=n[d];s.indexOf(S.id)===-1&&r.push(S)}r.forEach(d=>{d.isDisposed||d.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function GW(n){return n instanceof be}function $0(n){return Array.isArray(n)}function iw(n){return!GW(n)&&!$0(n)}function rw(n,t,s,r=!0,d=""){if(t==null||t.length===0){if(n!=null){let i=!1;if($0(n)&&n.length>0)i=!0;else if(iw(n)){for(const g in n)if(n.hasOwnProperty(g)){i=!0;break}}else i=!0;if(i)throw new ot(`Error when checking model ${d} expected no data, but got ${n}`)}return[]}if(n==null)return t.map(i=>null);let S;if(iw(n)){n=n,S=[];for(const i of t){if(n[i]==null)throw new ot(`No data provided for "${i}". Need data for each key in: ${t}`);S.push(n[i])}}else if($0(n)){if(n=n,n.length!==t.length)throw new ot(`Error when checking model ${d}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${n}`);S=n}else{if(n=n,t.length>1)throw new ot(`The model ${d} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${n.shape}`);S=[n]}if(S=YN(S),s!=null)for(let i=0;i<t.length;++i){if(s[i]==null)continue;const g=S[i];if(g.shape.length!==s[i].length)throw new ot(`Error when checking ${d}: expected ${t[i]} to have ${s[i].length} dimension(s). but got array with shape ${g.shape}`);for(let e=0;e<s[i].length;++e){if(e===0&&!r)continue;const a=g.shape[e],v=s[i][e];if(v!=null&&v>=0&&a!==v)throw new ot(`${d} expected a batch of elements where each example has shape [${s[i].slice(1,s[i].length)}] (i.e.,tensor shape [*,${s[i].slice(1,s[i].length)}]) but the ${d} received an input with ${g.shape[0]} examples, each with shape [${g.shape.slice(1,g.shape.length)}] (tensor shape [${g.shape}])`)}}return S}function UW(n,t,s){const r=Qr(n.map(S=>S.shape[0]));r.sort();const d=Qr(t.map(S=>S.shape[0]));if(d.sort(),r.length>1)throw new ot(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(S=>S.shape))}`);if(d.length>1)throw new ot(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(S=>S.shape))}`);if(r.length>0&&d.length>0&&!ee(r,d))throw new ot(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${d[0]} target sample(s).`)}function WW(n,t,s){const r=[Vm,Gm,lh];for(let d=0;d<n.length;++d){const S=n[d],i=t[d],g=s[d];if(i!=null){if(i===lh&&S.shape[S.shape.length-1]===1)throw new ot(`You are passing a target array of shape ${S.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const e=S.shape.slice(1),a=g.slice(1);for(let v=0;v<e.length;++v){const u=e[v],o=a[v];if(o!=null&&u!==o)throw new ot(`A target Tensor with shape ${S.shape} was passed for an output of shape ${g}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function aw(n,t,s,r=!0,d=""){let S;if(Array.isArray(n)){if(n.length!==t.length)throw new ot(`Error when checking model ${d}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${n.length} Tensors(s).`);S=n}else{if(t.length>1)throw new ot(`The model expects ${t.length} ${d} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(n.shape)}.`);S=[n]}if(s!=null)for(let i=0;i<t.length;++i){if(s[i]==null)continue;const g=S[i];if(g.shape.length!==s[i].length)throw new ot(`Error when checking ${d}: expected ${t[i]} to have ${s[i].length} dimension(s), but got array with shape ${JSON.stringify(g.shape)}`);for(let e=0;e<s[i].length;++e){if(e===0&&!r)continue;const a=g.shape[e],v=s[i][e];if(v!=null&&v!==a)throw new ot(`Error when checking ${d}: expected ${t[i]} to have shape ${JSON.stringify(s[i])} but got array with shape ${JSON.stringify(g.shape)}.`)}}}function XW(n,t){if(n==null||Array.isArray(n)&&n.length===0)return t.map(r=>[]);let s;if(typeof n=="string"||typeof n=="function")s=[n];else if(Array.isArray(n)||typeof n=="object")s=n;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${n}`);if(Array.isArray(s))return t.map(r=>s);{const r=[];for(const d of t){let S=s.hasOwnProperty(d)?s[d]:[];Array.isArray(S)||(S=[S]),r.push(S)}return r}}const HW="layers-model";class ul extends di{constructor(t){super(t),this.isTraining=!1}summary(t,s,r=console.log){if(!this.built)throw new ot("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");RW(this,t,s,r)}compile(t){if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=IW(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof Sa))throw new ot("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let s=[];if(!Array.isArray(t.loss)&&typeof t.loss!="string"&&typeof t.loss!="function"){t.loss=t.loss;for(const i in t.loss)if(this.outputNames.indexOf(i)===-1)throw new ot(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)t.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),s.push(Xv(t.loss[i]))}else if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new ot(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);s=t.loss.map(g=>Xv(g))}else{const i=Xv(t.loss);this.outputs.forEach(g=>{s.push(i)})}this.lossFunctions=s,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const g=this.internalOutputShapes[i],e=this.outputNames[i];this.feedOutputNames.push(e),this.feedOutputShapes.push(g),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Wa("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const g=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([g,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const d=XW(t.metrics,this.outputNames),S=(i,g,e)=>{this.outputNames.length>1&&(g=this.outputNames[i]+"_"+g),this.metricsNames.push(g),this.metricsTensors.push([e,i])};Wa("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const g=d[i];(a=>{const v="";let u,o,c;for(const l of a){if(typeof l=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(l)!==-1){const m=this.internalOutputShapes[i];m[m.length-1]===1||this.lossFunctions[i]===Gm?["accuracy","acc"].indexOf(l)!==-1?o=BN:["crossentropy","ce"].indexOf(l)!==-1&&(o=gW):this.lossFunctions[i]===Nd?["accuracy","acc"].indexOf(l)!==-1?o=xW:["crossentropy","ce"].indexOf(l)!==-1&&(o=VN):["accuracy","acc"].indexOf(l)!==-1?o=kN:["crossentropy","ce"].indexOf(l)!==-1&&(o=zN);let h;["accuracy","acc"].indexOf(l)!==-1?h="acc":["crossentropy","ce"].indexOf(l)!==-1&&(h="ce"),c=o,u=v+h}else c=bW(l),u=v+mf(l);let f;Wa(u,()=>{f=c}),S(i,u,f)}})(g)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,s,r={}){const d=r.batchSize==null?32:r.batchSize;Hv(d);const S=!0,i=this.standardizeUserDataXY(t,s,S,d);try{const g=i[0].concat(i[1]);this.makeTestFunction();const e=this.testFunction,a=this.testLoop(e,g,d,r.verbose,r.steps);return Zn(a)}finally{fi(i[0],t),fi(i[1],s)}}async evaluateDataset(t,s){return this.makeTestFunction(),VW(this,t,s)}checkNumSamples(t,s,r,d="steps"){let S;if(r!=null){if(S=null,s!=null)throw new ot(`If ${d} is set, batchSize must be null or undefined.Got batchSize = ${s}`)}else if(t!=null)Array.isArray(t)?S=t[0].shape[0]:S=t.shape[0];else throw new ot(`Either the input data should have a defined shape, or ${d} shoud be specified.`);return S}execute(t,s){if(Array.isArray(s)&&s.length===0)throw new ot("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(s),d=r?s:[s],S=this.retrieveSymbolicTensors(d),i=new kr;if(t instanceof be&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new ot(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let e=0;e<this.inputs.length;++e)i.add(this.inputs[e],t[e])}else for(const e of this.inputs){const a=t[e.name];if(a==null)throw new ot(`No value is provided for the model's input ${e.name}`);i.add(e,a)}const g=Cu(S,i);return r?g:g[0]}retrieveSymbolicTensors(t){const s=io(null,t.length);let r=t.length;for(const d of this.layers){const S=Array.isArray(d.output)?d.output:[d.output],i=S.map(g=>g.name);for(let g=0;g<t.length;++g){const e=i.indexOf(t[g]);if(e!==-1&&(s[g]=S[e],r--),r===0)break}if(r===0)break}if(r>0){const d=[];throw s.forEach((S,i)=>{S==null&&d.push(t[i])}),new ot(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(d)}`)}return s}predictLoop(t,s=32,r=!1){return ft(()=>{const d=this.checkNumSamples(t);if(r)throw new Yt("Verbose predictLoop() is not implemented yet.");const S=Yv(d,s),i=this.outputs.map(g=>[]);for(let g=0;g<S.length;++g)ft(()=>{const a=S[g][0],v=S[g][1],u=du(t,a,v),o=[];if(Array.isArray(u))for(let l=0;l<u.length;++l)o.push({key:this.inputs[l],value:u[l]});else o.push({key:this.inputs[0],value:u});const c=new kr(o);return Cu(this.outputs,c)}).forEach((a,v)=>i[v].push(a));return Zn(i.map(g=>Ze(g,0)))})}predict(t,s={}){const r=YN(t);aw(r,this.inputNames,this.feedInputShapes,!1);try{const d=s.batchSize==null?32:s.batchSize;return Hv(d),this.predictLoop(r,d)}finally{fi(r,t)}}predictOnBatch(t){aw(t,this.inputNames,this.feedInputShapes,!0);const s=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,s)}standardizeUserDataXY(t,s,r=!0,d){if(this.optimizer_==null)throw new Qs("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const S=[];for(let i=0;i<this.feedOutputShapes.length;++i){const g=this.feedOutputShapes[i];this.feedLossFns[i]===Nd?S.push(g.slice(0,g.length-1).concat([1])):S.push(g)}if(t=rw(t,this.feedInputNames,this.feedInputShapes,!1,"input"),s=rw(s,this.feedOutputNames,S,!1,"target"),UW(t,s),WW(s,this.feedLossFns,this.feedOutputShapes),this.stateful&&d!=null&&d>0&&t[0].shape[0]%d!==0)throw new ot(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${d}. Found: ${t[0].shape[0]} sample(s).`);return[t,s]}async standardizeUserData(t,s,r,d,S=!0,i){const[g,e]=this.standardizeUserDataXY(t,s,S,i);if(r!=null)throw new Error("sample weight is not supported yet.");let a=null;if(d!=null){const v=WN(d,this.outputNames);a=[];for(let u=0;u<v.length;++u)a.push(await XN(e[u],null,v[u]))}return[g,e,a]}testLoop(t,s,r,d=0,S){return ft(()=>{const i=this.checkNumSamples(s,r,S,"steps"),g=[];if(d>0)throw new Yt("Verbose mode is not implemented yet.");if(S!=null)throw new Yt("steps mode in testLoop() is not implemented yet");{const e=Yv(i,r),a=Gn(Ai(0,i));for(let v=0;v<e.length;++v){const u=e[v][0],o=e[v][1],c=Xa(a,u,o-u),l=M0(s,c),f=t(l);if(v===0)for(let m=0;m<f.length;++m)g.push(Vt(0));for(let m=0;m<f.length;++m){const h=f[m];g[m]=St(g[m],rt(o-u,h))}}for(let v=0;v<g.length;++v)g[v]=$t(g[v],i)}return g})}getDedupedMetricsNames(){const t=this.metricsNames,s=[];for(let r=0;r<t.length;++r){const d=t[r];let S=d;if(XC(t,d)>1){const i=XC(t.slice(0,r),d);S+=`_${i}`}s.push(S)}return s}makeTrainFunction(){return t=>{const s=[],r=t.slice(0,this.inputs.length),d=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),S=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],g=()=>{const u=[];for(let f=0;f<this.inputs.length;++f)u.push({key:this.inputs[f],value:r[f]});const o=new kr(u),c=Cu(this.outputs,o,{training:!0});let l;for(let f=0;f<this.lossFunctions.length;++f){const m=this.lossFunctions[f];let h=m(d[f],c[f]);S[f]!=null&&(h=LW(h,S[f]));const p=$e(h);s.push(p),f===0?l=h:l=St(l,h)}for(let f=0;f<this.metricsTensors.length;++f){let m;if(this.outputs.length>1&&f<this.outputs.length)m=s[f];else{const h=this.metricsTensors[f][0],p=this.metricsTensors[f][1];m=$e(h(d[p],c[p]))}fn(m),i.push(m)}return l=$e(l),this.calculateLosses().forEach(f=>{l=St(l,f)}),l},e=this.collectedTrainableWeights.map(u=>u.read()),a=!0;return[this.optimizer_.minimize(g,a,e)].concat(i)}}makeTestFunction(){this.testFunction=t=>ft(()=>{const s=[];let r;const d=t.slice(0,this.inputs.length),S=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let a=0;a<this.inputs.length;++a)i.push({key:this.inputs[a],value:d[a]});const g=new kr(i),e=Cu(this.outputs,g);for(let a=0;a<this.lossFunctions.length;++a){const v=this.lossFunctions[a],u=$e(v(S[a],e[a]));a===0?r=u:r=St(r,u),s.push(r)}for(let a=0;a<this.metricsTensors.length;++a){const v=this.metricsTensors[a][0],u=this.metricsTensors[a][1],o=$e(v(S[u],e[u]));s.push(o)}return s})}async fit(t,s,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let d,S,i,g,e,a,v,u,o;try{const c=r.batchSize==null?32:r.batchSize;Hv(c);const l=!1,f=await this.standardizeUserData(t,s,r.sampleWeight,r.classWeight,l,c);d=f[0],S=f[1],o=f[2];let m=!1,h;if(r.validationData!=null&&r.validationData.length>0){if(m=!0,r.validationData.length===2)e=r.validationData[0],a=r.validationData[1];else throw r.validationData.length===3?new Yt("validationData including sample weights is not supported yet."):new ot(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const w=!0,b=await this.standardizeUserData(e,a,null,null,w,c);v=b[0],u=b[1],h=v.concat(u)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){m=!0;const w=Math.floor(d[0].shape[0]*(1-r.validationSplit)),b=d[0].shape[0];v=du(d,w,b),i=d,d=du(d,0,w),u=du(S,w,b),g=S,S=du(S,0,w),h=v.concat(u)}else r.validationSteps!=null&&(m=!0);const p=d.concat(S).concat(o);this.checkTrainableWeightsConsistency();const y=this.makeTrainFunction(),x=this.getDedupedMetricsNames();let T,C;m?(this.makeTestFunction(),T=this.testFunction,C=x.slice().concat(x.map(w=>"val_"+w))):(T=null,h=[],C=x.slice());const E=LN(r.callbacks,r.yieldEvery);return await this.fitLoop(y,p,x,c,r.epochs,r.verbose,E,T,h,r.shuffle,C,r.initialEpoch,null,null)}finally{this.isTraining=!1,fi(d,t),fi(S,s),fi(i,t),fi(g,s),fi(v,e),fi(u,a),o!=null&&Zt(o)}}async fitLoop(t,s,r,d,S,i,g,e,a,v,u,o,c,l){d==null&&(d=32),S==null&&(S=1),v==null&&(v=!0),o==null&&(o=0);let f=!1;if(e!=null&&a!=null&&(f=!0),l!=null&&(f=!0,c==null))throw new ot("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(s,d,c,"steps_per_epoch");let h;m!=null&&(h=Ai(0,m)),i==null&&(i=1);const{callbackList:p,history:y}=MN(g,i,S,o,m,c,d,f,u);p.setModel(this),this.history=y,await p.onTrainBegin(),this.stopTraining_=!1;for(let x=o;x<S;++x){await p.onEpochBegin(x);const T={};if(c!=null)throw new Yt("stepsPerEpoch mode is not implemented yet.");{if(v==="batch")throw new Yt("batch shuffling is not implemneted yet");v&&W5(h);const C=Gn(h),E=Yv(m,d);for(let A=0;A<E.length;++A){const w={};if(await p.onBatchBegin(A,w),ft(()=>{const b=E[A][0],I=E[A][1],R=Xa(C,b,I-b);w.batch=A,w.size=I-b;const N=M0(s,R),F=t(N);for(let P=0;P<r.length;++P){const O=r[P],M=F[P];w[O]=M,fn(M)}if(A===E.length-1&&f){const P=this.testLoop(e,a,d);for(let O=0;O<r.length;++O){const M=r[O],L=P[O];fn(L),T["val_"+M]=L}}}),await p.onBatchEnd(A,w),ON(w),this.stopTraining_)break}C.dispose()}if(await p.onEpochEnd(x,T),this.stopTraining_)break}return await p.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(t,s){return BW(this,t,s)}async trainOnBatch(t,s){const r=await this.standardizeUserData(t,s),d=r[0],S=r[1],g=this.makeTrainFunction()(d.concat(S)),e=[];for(const a of g){const v=await a.data();e.push(v[0])}return Zt(g),fi(r[0],t),fi(r[1],s),Zn(e)}getNamedWeights(t){const s=[],r=t!=null&&t.trainableOnly,d=r?this.trainableWeights:this.weights,S=this.getWeights(r);for(let i=0;i<d.length;++i)r&&!d[i].trainable||s.push({name:d[i].originalName,tensor:S[i]});return s}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const s=T0().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=s-T0().numTensors}return t}getLossIdentifiers(){let t;if(typeof this.loss=="string")t=rr(this.loss);else if(Array.isArray(this.loss)){for(const s of this.loss)if(typeof s!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(s=>rr(s))}else{const s=Object.keys(this.loss);t={};const r=this.loss;for(const d of s)if(typeof r[d]=="string")t[d]=rr(r[d]);else throw new Error("Serialization of non-string loss is not supported.")}return t}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[rr(mf(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>rr(mf(t)));{const t={};for(const s in this.metrics)t[s]=rr(mf(this.metrics[s]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const s=O0(t.optimizer_config),r=pr(s);let d;if(typeof t.loss=="string")d=Da(t.loss);else if(Array.isArray(t.loss))d=t.loss.map(i=>Da(i));else if(t.loss!=null){d={};for(const i in t.loss)d[i]=Da(t.loss[i])}let S;if(Array.isArray(t.metrics))S=t.metrics.map(i=>Da(i));else if(t.metrics!=null){S={};for(const i in t.metrics)S[i]=Da(t.metrics[i])}this.compile({loss:d,metrics:S,optimizer:r})}async save(t,s){if(typeof t=="string"){const a=eI(t);if(a.length===0)throw new ot(`Cannot find any save handlers for URL '${t}'`);if(a.length>1)throw new ot(`Found more than one (${a.length}) save handlers for URL '${t}'`);t=a[0]}if(t.save==null)throw new ot("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await v0(this.getNamedWeights(s)),d=!1,S=null,g={modelTopology:this.toJSON(S,d),format:HW,generatedBy:`TensorFlow.js tfjs-layers v${UN}`,convertedBy:null};if((s==null?!1:s.includeOptimizer)&&this.optimizer!=null){g.trainingConfig=this.getTrainingConfig();const a="optimizer",{data:v,specs:u}=await v0(await this.optimizer.getWeights(),a);r.specs.push(...u),r.data=Jb([r.data,v])}return this.userDefinedMetadata!=null&&(ew(this.userDefinedMetadata,this.name,!0),g.userDefinedMetadata=this.userDefinedMetadata),g.weightData=r.data,g.weightSpecs=r.specs,t.save(g)}setUserDefinedMetadata(t){ew(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}ul.className="Model";Ct(ul);class KN extends ul{}KN.className="Functional";Ct(KN);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class uh extends ul{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:Bm("sequential_"),t.layers!=null)for(const s of t.layers)this.add(s)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ot(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const s=t instanceof uh||t instanceof ul;let r;if(s){if(r=t,r.outputs.length!==1)throw new ot("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ot("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new ot("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const d=jU({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(d)}if(s)this.outputs=r.outputs,this.inputs=r.inputs;else{if(t.inboundNodes.length!==1)throw new ot(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new ot("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=RN(this.outputs[0])}this.inboundNodes=[],new zm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:io(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(d=>d.shape),outputShapes:this.outputs[0].shape})}else{const d=t.apply(this.outputs[0]);if(Array.isArray(d))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[d],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,s){return this.model==null&&this.build(),this.model.call(t,s)}build(t){if(le(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ul({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,s,r=console.log){this.built||this.build(),super.summary(t,s,r)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,s,r={}){if(!this.built)throw new Qs("The model needs to be compiled before being used.");return this.model.evaluate(t,s,r)}async evaluateDataset(t,s){if(!this.built)throw new Qs("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,s)}predict(t,s={}){return this.model==null&&this.build(),this.model.predict(t,s)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,s,r={}){if(!this.built)throw new Qs("The model needs to be compiled before being used.");return this.model.fit(t,s,r)}async fitDataset(t,s){if(!this.built)throw new Qs("The model needs to be compiled before being used.");return this.model.fitDataset(t,s)}async trainOnBatch(t,s){return this.model.trainOnBatch(t,s)}static fromConfig(t,s,r={},d=!1){let S,i={};if(s instanceof Array){if(s[0].className==null||s[0].className==="Merge")throw new ot("Legacy serialization format not supported yet.");S=s}else q(s.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),S=s.layers,delete s.layers,i=s;const g=new t(i);if(!(g instanceof uh))throw new Yt(`Sequential.fromConfig called on non-Sequential input: ${g}`);for(const e of S){const v=pr(e,void 0,d);d&&v.setFastWeightInitDuringBuild(!0),g.add(v)}return g}set stopTraining(t){if(this.model==null)throw new ot("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new ot("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const s of this.layers){const r={};r.className=s.getClassName(),r.config=s.getConfig(),t.push(r)}return{name:this.name,layers:t}}}uh.className="Sequential";Ct(uh);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ns=class extends Xl{getConfig(){return{}}};class jN extends ns{apply(t,s=1){return LU(t,s)}}jN.className="elu";Ct(jN);class ZN extends ns{apply(t){return B1(t)}}ZN.className="selu";Ct(ZN);class QN extends ns{apply(t){return Ji(t)}}QN.className="relu";Ct(QN);class JN extends ns{apply(t){return ft(()=>no(6,Ji(t)))}}JN.className="relu6";Ct(JN);class qN extends ns{apply(t){return t}}qN.className="linear";Ct(qN);class _N extends ns{apply(t){return Hi(t)}}_N.className="sigmoid";Ct(_N);class t3 extends ns{apply(t){return $U(t)}}t3.className="hardSigmoid";Ct(t3);class e3 extends ns{apply(t){return Gl(t)}}e3.className="softplus";Ct(e3);class n3 extends ns{apply(t){return MU(t)}}n3.className="softsign";Ct(n3);class s3 extends ns{apply(t){return wl(t)}}s3.className="tanh";Ct(s3);let W2=class extends ns{apply(t,s=-1){return bm(t,s)}};W2.className="softmax";Ct(W2);class i3 extends ns{apply(t,s=-1){return S1(t,s)}}i3.className="logSoftmax";Ct(i3);class r3 extends ns{apply(t,s=1){return ft(()=>rt(Hi(rt(t,s)),t))}}r3.className="swish";Ct(r3);class a3 extends ns{apply(t){return ft(()=>rt(t,wl(Gl(t))))}}a3.className="mish";Ct(a3);function aa(n){return n.getClassName()}function Kv(n,t={}){return Rc(n,Ws.getMap().classNameMap,t,"activation")}function oa(n){if(n==null){const t={};return t.className="linear",t.config={},Kv(t)}if(typeof n=="string"){const t={};return t.className=n,t.config={},Kv(t)}else return n instanceof ns?n:Kv(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YW(n){if(n!=null&&typeof n!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${n}`)}class o3 extends Xl{}class l3 extends o3{constructor(t){super(),YW(t),this.l1=t==null||t.l1==null?.01:t.l1,this.l2=t==null||t.l2==null?.01:t.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(t){return ft(()=>{let s=_e([1]);return this.hasL1&&(s=St(s,Ot(rt(this.l1,Je(t))))),this.hasL2&&(s=St(s,Ot(rt(this.l2,Pc(t))))),at(s,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,s){return new t({l1:s.l1,l2:s.l2})}}l3.className="L1L2";Ct(l3);const ow={l1l2:"L1L2"};function ve(n){return N2(n)}function lw(n,t={}){return Rc(n,Ws.getMap().classNameMap,t,"regularizer")}function Ne(n){if(n==null)return null;if(typeof n=="string"){const s={className:n in ow?ow[n]:n,config:{}};return lw(s)}else return n instanceof o3?n:lw(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class u3 extends Jt{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null&&(this.maxValue=t.maxValue)}call(t,s){t=Ut(t);let r=Ji(t);return this.maxValue!=null&&(r=ms(r,0,this.maxValue)),r}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},s=super.getConfig();return Object.assign(t,s),t}}u3.className="ReLU";Ct(u3);class h3 extends Jt{constructor(t){super(t??{}),this.DEFAULT_ALPHA=.3,t==null&&(t={}),this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,s){const r=Ut(t);return vm(r,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},s=super.getConfig();return Object.assign(t,s),t}}h3.className="LeakyReLU";Ct(h3);class c3 extends Jt{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),this.supportsMasking=!0,this.alphaInitializer=Re(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Ne(t.alphaRegularizer),this.alphaConstraint=rn(t.alphaConstraint),t.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else if(typeof t.sharedAxes=="number")this.sharedAxes=[t.sharedAxes];else throw new ot(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`)}build(t){t=le(t);const s=t.slice(1);if(this.sharedAxes!=null)for(const d of this.sharedAxes)s[d-1]=1;this.alpha=this.addWeight("alpha",s,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let d=1;d<t.length;++d)r[d]=t[d];this.inputSpec=[new en({ndim:t.length,axes:r})],this.built=!0}call(t,s){return t=Ut(t),Cm(t,this.alpha.read())}getConfig(){const t={alphaInitializer:De(this.alphaInitializer),alphaRegularizer:ve(this.alphaRegularizer),alphaConstraint:sn(this.alphaConstraint),sharedAxes:this.sharedAxes},s=super.getConfig();return Object.assign(t,s),t}}c3.className="PReLU";Ct(c3);let f3=class extends Jt{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==this.DEFAULT_ALPHA)throw new Yt(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,s){const r=Ut(t);return Sc(r)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},s=super.getConfig();return Object.assign(t,s),t}};f3.className="ELU";Ct(f3);class d3 extends Jt{constructor(t){super(t??{}),this.DEFAULT_THETA=1,t==null&&(t={}),this.theta=t.theta==null?this.DEFAULT_THETA:t.theta}call(t,s){const r=Ut(t);return rt(r,Nt(Ts(r,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},s=super.getConfig();return Object.assign(t,s),t}}d3.className="ThresholdedReLU";Ct(d3);class p3 extends Jt{constructor(t){super(t??{}),this.DEFAULT_AXIS=1,t==null&&(t={}),this.softmax=new W2().apply,this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis}call(t,s){const r=Ut(t);return this.softmax(r,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},s=super.getConfig();return Object.assign(t,s),t}}p3.className="Softmax";Ct(p3);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hl(n,t,s){if(typeof n=="number")return io(n,t);if(n.length!==t)throw new ot(`The ${s} argument must be an integer or tuple of ${t} integers. Received: ${n.length} elements.`);for(let r=0;r<t;++r){const d=n[r];if(!PU(d))throw new ot(`The ${s} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(n)} including a non-integer number ${d}`)}return n}function Si(n,t,s,r,d=1){if(n==null)return n;const S=t+(t-1)*(d-1);let i;return s==="same"?i=n:i=n-S+1,Math.floor((i+r-1)/r)}function Bi(n,t,s,r){if(n==null)return null;if(r==="valid")n=n*t+ra([s-t,0]);else if(r==="same")n=n*t;else throw new ot(`Unsupport padding mode: ${r}.`);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function X2(n,t){return ft(()=>(Xe(t),t==="channelsFirst"?se(n,[0,2,3,1]):n))}function m3(n,t){return ft(()=>(Xe(t),t==="channelsFirst"?se(n,[0,2,3,4,1]):n))}function KW(n,t,s,r=1,d="valid",S,i=1){return ft(()=>{if(S==null&&(S=bi()),Xe(S),n.shape.length!==3)throw new ot(`The input of a conv1dWithBias operation should be 3, but is ${n.shape.length} instead.`);if(t.shape.length!==3)throw new ot(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(s!=null&&s.shape.length!==1)throw new ot(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(S==="channelsFirst"&&(n=se(n,[0,2,1])),d==="causal")throw new Yt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let g=p1(n,t,r,d==="same"?"same":"valid","NWC",i);return s!=null&&(g=Pi(g,s)),g})}function uw(n,t,s,r=[1,1],d="valid",S,i,g=null){return ft(()=>{if(S==null&&(S=bi()),Xe(S),n.rank!==3&&n.rank!==4)throw new ot(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${n.rank}.`);if(t.rank!==3&&t.rank!==4)throw new ot(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${n.rank}.`);let e=X2(n,S);if(d==="causal")throw new Yt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return e=hR({x:e,filter:t,strides:r,pad:d==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:s,activation:g}),S==="channelsFirst"&&(e=se(e,[0,3,1,2])),e})}function jW(n,t,s,r=[1,1,1],d="valid",S,i){return ft(()=>{if(S==null&&(S=bi()),Xe(S),n.rank!==4&&n.rank!==5)throw new ot(`conv3dWithBias expects input to be of rank 4 or 5, but received ${n.rank}.`);if(t.rank!==4&&t.rank!==5)throw new ot(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${n.rank}.`);let g=m3(n,S);if(d==="causal")throw new Yt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return g=NI(g,t,r,d==="same"?"same":"valid","NDHWC",i),s!=null&&(g=Pi(g,s)),S==="channelsFirst"&&(g=se(g,[0,4,1,2,3])),g})}class Um extends Jt{constructor(t,s){if(super(s),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Um.verifyArgs(s),this.rank=t,dn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Yt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=hl(s.kernelSize,t,"kernelSize"),this.strides=hl(s.strides==null?1:s.strides,t,"strides"),this.padding=s.padding==null?"valid":s.padding,Ms(this.padding),this.dataFormat=s.dataFormat==null?"channelsLast":s.dataFormat,Xe(this.dataFormat),this.activation=oa(s.activation),this.useBias=s.useBias==null?!0:s.useBias,this.biasInitializer=Re(s.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=rn(s.biasConstraint),this.biasRegularizer=Ne(s.biasRegularizer),this.activityRegularizer=Ne(s.activityRegularizer),this.dilationRate=hl(s.dilationRate==null?1:s.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ot(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ot(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ot(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if($i("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!P2(t.kernelSize,"number",1,3))throw new ot(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:aa(this.activation),useBias:this.useBias,biasInitializer:De(this.biasInitializer),biasRegularizer:ve(this.biasRegularizer),activityRegularizer:ve(this.activityRegularizer),biasConstraint:sn(this.biasConstraint)},s=super.getConfig();return Object.assign(t,s),t}}class Hl extends Um{constructor(t,s){super(t,s),this.kernel=null,Hl.verifyArgs(s),this.filters=s.filters,dn(this.filters,"filters"),this.kernelInitializer=Re(s.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=rn(s.kernelConstraint),this.kernelRegularizer=Ne(s.kernelRegularizer)}build(t){t=le(t);const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null)throw new ot(`The channel dimension of the input should be defined. Found ${t[s]}`);const r=t[s],d=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",d,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[s]:r}}],this.built=!0}call(t,s){return ft(()=>{t=Ut(t);let r;const d=this.bias==null?null:this.bias.read(),S=dN(this.activation.getClassName());if(S!=null&&this.rank===2)r=uw(t,this.kernel.read(),d,this.strides,this.padding,this.dataFormat,this.dilationRate,S);else{if(this.rank===1)r=KW(t,this.kernel.read(),d,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=uw(t,this.kernel.read(),d,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=jW(t,this.kernel.read(),d,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Yt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(t){t=le(t);const s=[],r=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let S=0;S<r.length;++S){const i=Si(r[S],this.kernelSize[S],this.padding,this.strides[S],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[S]);s.push(i)}let d=[t[0]];return this.dataFormat==="channelsLast"?(d=d.concat(s),d.push(this.filters)):(d.push(this.filters),d=d.concat(s)),d}getConfig(){const t={filters:this.filters,kernelInitializer:De(this.kernelInitializer),kernelRegularizer:ve(this.kernelRegularizer),kernelConstraint:sn(this.kernelConstraint)},s=super.getConfig();return Object.assign(t,s),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new ot(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class Lc extends Hl{constructor(t){super(2,t),Lc.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!P2(t.kernelSize,"number",1,2))throw new ot(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}Lc.className="Conv2D";Ct(Lc);class Mc extends Hl{constructor(t){super(3,t),Mc.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new ot(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}Mc.className="Conv3D";Ct(Mc);class v3 extends Lc{constructor(t){if(super(t),this.inputSpec=[new en({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ot(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=le(t),t.length!==4)throw new ot("Input should have rank 4; Received input shape: "+JSON.stringify(t));const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null)throw new ot("The channel dimension of the inputs should be defined. Found `None`.");const r=t[s],d=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",d,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new en({ndim:4,axes:{[s]:r}})],this.built=!0}call(t,s){return ft(()=>{let r=Ut(t);if(r.shape.length!==4)throw new ot(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const d=r.shape,S=d[0];let i,g;this.dataFormat==="channelsFirst"?(i=2,g=3):(i=1,g=2);const e=d[i],a=d[g],v=this.kernelSize[0],u=this.kernelSize[1],o=this.strides[0],c=this.strides[1],l=Bi(e,o,v,this.padding),f=Bi(a,c,u,this.padding),m=[S,l,f,this.filters];this.dataFormat!=="channelsLast"&&(r=se(r,[0,2,3,1]));let h=v1(r,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(h=se(h,[0,3,1,2])),this.bias!=null&&(h=Pi(h,this.bias.read(),this.dataFormat)),this.activation!=null&&(h=this.activation.apply(h)),h})}computeOutputShape(t){t=le(t);const s=t.slice();let r,d,S;this.dataFormat==="channelsFirst"?(r=1,d=2,S=3):(r=3,d=1,S=2);const i=this.kernelSize[0],g=this.kernelSize[1],e=this.strides[0],a=this.strides[1];return s[r]=this.filters,s[d]=Bi(s[d],e,i,this.padding),s[S]=Bi(s[S],a,g,this.padding),s}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}v3.className="Conv2DTranspose";Ct(v3);class g3 extends Mc{constructor(t){if(super(t),this.inputSpec=[new en({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ot(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=le(t),t.length!==5)throw new ot("Input should have rank 5; Received input shape: "+JSON.stringify(t));const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null)throw new ot("The channel dimension of the inputs should be defined. Found `None`.");const r=t[s],d=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",d,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new en({ndim:5,axes:{[s]:r}})],this.built=!0}call(t,s){return ft(()=>{let r=Ut(t);if(r.shape.length!==5)throw new ot(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const d=r.shape,S=d[0];let i,g,e;this.dataFormat==="channelsFirst"?(e=2,i=3,g=4):(e=1,i=2,g=3);const a=d[e],v=d[i],u=d[g],o=this.kernelSize[0],c=this.kernelSize[1],l=this.kernelSize[2],f=this.strides[0],m=this.strides[1],h=this.strides[2],p=Bi(a,f,o,this.padding),y=Bi(v,m,c,this.padding),x=Bi(u,h,l,this.padding),T=[S,p,y,x,this.filters];this.dataFormat!=="channelsLast"&&(r=se(r,[0,2,3,4,1]));let C=FI(r,this.kernel.read(),T,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=se(C,[0,4,1,2,3])),this.bias!==null&&(C=Pi(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(t){t=le(t);const s=t.slice();let r,d,S,i;this.dataFormat==="channelsFirst"?(r=1,d=2,S=3,i=4):(r=4,d=1,S=2,i=3);const g=this.kernelSize[0],e=this.kernelSize[1],a=this.kernelSize[2],v=this.strides[0],u=this.strides[1],o=this.strides[2];return s[r]=this.filters,s[d]=Bi(s[d],v,g,this.padding),s[S]=Bi(s[S],u,e,this.padding),s[i]=Bi(s[i],o,a,this.padding),s}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}g3.className="Conv3DTranspose";Ct(g3);class x3 extends Hl{constructor(t,s){if(super(t,s),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,s.filters==null)throw new ot("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(s.kernelInitializer!=null||s.kernelRegularizer!=null||s.kernelConstraint!=null)throw new ot("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(s.padding!=null&&s.padding!=="same"&&s.padding!=="valid")throw new ot(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(s.padding)}`);this.depthMultiplier=s.depthMultiplier==null?1:s.depthMultiplier,this.depthwiseInitializer=Re(s.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Ne(s.depthwiseRegularizer),this.depthwiseConstraint=rn(s.depthwiseConstraint),this.pointwiseInitializer=Re(s.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Ne(s.pointwiseRegularizer),this.pointwiseConstraint=rn(s.pointwiseConstraint)}build(t){if(t=le(t),t.length<this.rank+2)throw new ot(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null||t[s]<0)throw new ot(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[s])}`);const r=t[s],d=this.kernelSize.concat([r,this.depthMultiplier]),S=[];for(let g=0;g<this.rank;++g)S.push(1);S.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",d,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",S,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new en({ndim:this.rank+2,axes:{[s]:r}})],this.built=!0}call(t,s){return ft(()=>{t=Ut(t);let r;if(this.rank===1)throw new Yt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(t=se(t,[0,2,3,1])),r=k1(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Pi(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=se(r,[0,3,1,2])),r})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=De(this.depthwiseInitializer),t.pointwiseInitializer=De(this.pointwiseInitializer),t.depthwiseRegularizer=ve(this.depthwiseRegularizer),t.pointwiseRegularizer=ve(this.pointwiseRegularizer),t.depthwiseConstraint=sn(this.depthwiseConstraint),t.pointwiseConstraint=sn(this.pointwiseConstraint),t}}x3.className="SeparableConv";class y3 extends x3{constructor(t){super(2,t)}}y3.className="SeparableConv2D";Ct(y3);class Wm extends Hl{constructor(t){super(1,t),Wm.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!P2(t.kernelSize,"number",1,1))throw new ot(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}Wm.className="Conv1D";Ct(Wm);class T3 extends Jt{constructor(t){super(t),typeof t.cropping=="number"?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,s){return ft(()=>{if(t=Ut(t),this.dataFormat==="channelsLast"){const r=pf(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return pf(r,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=pf(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return pf(r,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},s=super.getConfig();return Object.assign(t,s),t}}T3.className="Cropping2D";Ct(T3);class S3 extends Jt{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=t.size==null?this.DEFAULT_SIZE:t.size,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Xe(this.dataFormat),this.interpolation=t.interpolation==null?"nearest":t.interpolation,IU(this.interpolation)}computeOutputShape(t){if(this.dataFormat==="channelsFirst"){const s=t[2]==null?null:this.size[0]*t[2],r=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],s,r]}else{const s=t[1]==null?null:this.size[0]*t[1],r=t[2]==null?null:this.size[1]*t[2];return[t[0],s,r,t[3]]}}call(t,s){return ft(()=>{let r=Ut(t);const d=r.shape;if(this.dataFormat==="channelsFirst"){r=se(r,[0,2,3,1]);const S=this.size[0]*d[2],i=this.size[1]*d[3],g=this.interpolation==="nearest"?zi.resizeNearestNeighbor(r,[S,i]):zi.resizeBilinear(r,[S,i]);return se(g,[0,3,1,2])}else{const S=this.size[0]*d[1],i=this.size[1]*d[2];return this.interpolation==="nearest"?zi.resizeNearestNeighbor(r,[S,i]):zi.resizeBilinear(r,[S,i])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},s=super.getConfig();return Object.assign(t,s),t}}S3.className="UpSampling2D";Ct(S3);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZW(n,t,s=[1,1],r="valid",d,S){return ft(()=>{d==null&&(d=bi()),Xe(d);let i=X2(n,d);if(n.rank!==4)throw new ot(`Input for depthwiseConv2d is required to be 4-D, but is instead ${n.rank}-D`);if(t.rank!==4)throw new ot(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return i=Tc(i,t,s,r==="same"?"same":"valid","NHWC",S),d==="channelsFirst"&&(i=se(i,[0,3,1,2])),i})}class C3 extends Um{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=Re(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=rn(t.depthwiseConstraint),this.depthwiseRegularizer=Ne(t.depthwiseRegularizer)}build(t){if(t=le(t),t.length<4)throw new ot(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const s=this.dataFormat==="channelsFirst"?1:3;if(t[s]==null||t[s]<0)throw new ot(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[s]}).`);const r=t[s],d=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",d,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,s){return ft(()=>{t=Ut(t);let r=ZW(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Pi(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(t){t=le(t);const s=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2],d=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,S=Si(s,this.kernelSize[0],this.padding,this.strides[0]),i=Si(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],d,S,i]:[t[0],S,i,d]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=De(this.depthwiseInitializer),t.depthwiseRegularizer=ve(this.depthwiseRegularizer),t.depthwiseConstraint=sn(this.depthwiseRegularizer),t}}C3.className="DepthwiseConv2D";Ct(C3);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function w3(n,t,s,r){if(Array.isArray(n)){if(t!=null||s!=null)throw new ot("When inputs is an array, neither initialState or constants should be provided");r!=null&&(s=n.slice(n.length-r,n.length),n=n.slice(0,n.length-r)),n.length>1&&(t=n.slice(1,n.length)),n=n[0]}function d(S){return S==null||Array.isArray(S)?S:[S]}return t=d(t),s=d(s),{inputs:n,initialState:t,constants:s}}function E3(n,t,s,r=!1,d,S,i=!1,g=!1){return ft(()=>{const e=t.shape.length;if(e<3)throw new ot(`Input should be at least 3D, but is ${e}D.`);const a=[1,0].concat(Ai(2,e));if(t=se(t,a),S!=null)throw new Yt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),d!=null&&(d=Nt(Nt(d,"bool"),"float32"),d.rank===e-1&&(d=zn(d,-1)),d=se(d,a)),r&&(t=ri(t,0),d!=null&&(d=ri(d,0)));const v=[];let u,o=s;const c=t.shape[0],l=ai(t);let f;d!=null&&(f=ai(d));for(let h=0;h<c;++h){const p=l[h],y=ft(()=>n(p,o));if(d==null)u=y[0],o=y[1];else{const x=ft(()=>{const T=f[h],C=Ft(Ps(T),T),E=St(rt(y[0],T),rt(o[0],C)),A=o.map((w,b)=>St(rt(y[1][b],T),rt(w,C)));return{output:E,newStates:A}});u=x.output,o=x.newStates}g&&v.push(u)}let m;return g&&(m=Fs(v,1)),[u,m,o]})}class Ca extends Jt{constructor(t){super(t);let s;if(t.cell==null)throw new ot("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?s=new K2({cells:t.cell}):s=t.cell,s.stateSize==null)throw new ot("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=s,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new en({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ai(0,t).map(s=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){P0(t)&&(t=t[0]),t=t;let s=this.cell.stateSize;Array.isArray(s)||(s=[s]);const r=s[0];let d;if(this.returnSequences?d=[t[0],t[1],r]:d=[t[0],r],this.returnState){const S=[];for(const i of s)S.push([t[0],i]);return[d].concat(S)}else return d}computeMask(t,s){return ft(()=>{Array.isArray(s)&&(s=s[0]);const r=this.returnSequences?s:null;if(this.returnState){const d=this.states.map(S=>null);return[r].concat(d)}else return r})}get states(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,s=[];for(let r=0;r<t;++r)s.push(null);return s}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new Yt("Constants support is not implemented in RNN yet.");P0(t)&&(t=t[0]),t=t;const s=this.stateful?t[0]:null,r=t.slice(2);this.inputSpec[0]=new en({shape:[s,null,...r]});const d=[t[0]].concat(t.slice(2));this.cell.build(d);let S;if(Array.isArray(this.cell.stateSize)?S=this.cell.stateSize:S=[this.cell.stateSize],this.stateSpec!=null){if(!ee(this.stateSpec.map(i=>i.shape[i.shape.length-1]),S))throw new ot(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=S.map(i=>new en({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(t,s=!1){ft(()=>{if(!this.stateful)throw new Mi("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ot("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(d=>_e([r,d])):this.states_=[_e([r,this.cell.stateSize])];else if(t==null)Zt(this.states_),this.keptStates!=null&&(Zt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(d=>_e([r,d])):this.states_[0]=_e([r,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new ot(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);s===!0?this.keptStates.push(this.states_.slice()):Zt(this.states_);for(let d=0;d<this.states_.length;++d){const S=t[d],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[d]:this.cell.stateSize,g=[r,i];if(!ee(S.shape,g))throw new ot(`State ${d} is incompatible with layer ${this.name}: expected shape=${g}, received shape=${S.shape}`);this.states_[d]=S}}this.states_=this.states_.map(d=>fn(d.clone()))})}apply(t,s){let r=s==null?null:s.initialState,d=s==null?null:s.constants;s==null&&(s={});const S=w3(t,r,d,this.numConstants);t=S.inputs,r=S.initialState,d=S.constants;let i=[],g=[];if(r!=null){s.initialState=r,i=i.concat(r),this.stateSpec=[];for(const a of r)this.stateSpec.push(new en({shape:a.shape}));g=g.concat(this.stateSpec)}if(d!=null&&(s.constants=d,i=i.concat(d),this.numConstants=d.length),i[0]instanceof Vi){const a=[t].concat(i),v=this.inputSpec.concat(g),u=this.inputSpec;this.inputSpec=v;const o=super.apply(a,s);return this.inputSpec=u,o}else return super.apply(t,s)}call(t,s){return ft(()=>{const r=s==null?null:s.mask,d=s==null?null:s.training;let S=s==null?null:s.initialState;t=Ut(t),S==null&&(this.stateful?S=this.states_:S=this.getInitialState(t));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(S.length!==i)throw new ot(`RNN Layer has ${i} state(s) but was passed ${S.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const g={training:d},a=E3((l,f)=>{const m=this.cell.call([l].concat(f),g);return[m[0],m.slice(1)]},t,S,this.goBackwards,r,null,this.unroll,this.returnSequences),v=a[0],u=a[1],o=a[2];this.stateful&&this.resetStates(o,d);const c=this.returnSequences?u:v;return this.returnState?[c].concat(o):c})}getInitialState(t){return ft(()=>{let s=_e(t.shape);return s=Ot(s,[1,2]),s=Nc(s),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?R0(s,[1,r]):s):this.cell.stateSize>1?[R0(s,[1,this.cell.stateSize])]:[s]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),s={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(s.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Ca.className&&(s.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),t),s)}static fromConfig(t,s,r={}){const d=s.cell,S=pr(d,r);return new t(Object.assign(s,{cell:S}))}}Ca.className="RNN";Ct(Ca);class Xm extends Jt{}class H2 extends Xm{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,dn(this.units,"units"),this.activation=oa(t.activation==null?this.DEFAULT_ACTIVATION:t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Re(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Re(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Re(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Ne(t.kernelRegularizer),this.recurrentRegularizer=Ne(t.recurrentRegularizer),this.biasRegularizer=Ne(t.biasRegularizer),this.kernelConstraint=rn(t.kernelConstraint),this.recurrentConstraint=rn(t.recurrentConstraint),this.biasConstraint=rn(t.biasConstraint),this.dropout=Il([1,ra([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Il([1,ra([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=le(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,s){return ft(()=>{if(t=t,t.length!==2)throw new ot(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let r=t[1];t=t[0];const d=s.training==null?!1:s.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=la({ones:()=>Ps(t),rate:this.dropout,training:d,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=la({ones:()=>Ps(r),rate:this.recurrentDropout,training:d,dropoutFunc:this.dropoutFunc}));let S;const i=this.dropoutMask,g=this.recurrentDropoutMask;i!=null?S=ji(rt(t,i),this.kernel.read()):S=ji(t,this.kernel.read()),this.bias!=null&&(S=Pi(S,this.bias.read())),g!=null&&(r=rt(r,g));let e=St(S,ji(r,this.recurrentKernel.read()));return this.activation!=null&&(e=this.activation.apply(e)),[e,e]})}getConfig(){const t=super.getConfig(),s={units:this.units,activation:aa(this.activation),useBias:this.useBias,kernelInitializer:De(this.kernelInitializer),recurrentInitializer:De(this.recurrentInitializer),biasInitializer:De(this.biasInitializer),kernelRegularizer:ve(this.kernelRegularizer),recurrentRegularizer:ve(this.recurrentRegularizer),biasRegularizer:ve(this.biasRegularizer),activityRegularizer:ve(this.activityRegularizer),kernelConstraint:sn(this.kernelConstraint),recurrentConstraint:sn(this.recurrentConstraint),biasConstraint:sn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},t),s)}}H2.className="SimpleRNNCell";Ct(H2);class A3 extends Ca{constructor(t){t.cell=new H2(t),super(t)}call(t,s){return ft(()=>{this.cell.dropoutMask!=null&&(Zt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Zt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=s==null?null:s.mask,d=s==null?null:s.training,S=s==null?null:s.initialState;return super.call(t,{mask:r,training:d,initialState:S})})}static fromConfig(t,s){return new t(s)}}A3.className="SimpleRNN";Ct(A3);class Y2 extends Xm{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new ot("GRUCell does not support reset_after parameter set to true.");this.units=t.units,dn(this.units,"units"),this.activation=oa(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=oa(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Re(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Re(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Re(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Ne(t.kernelRegularizer),this.recurrentRegularizer=Ne(t.recurrentRegularizer),this.biasRegularizer=Ne(t.biasRegularizer),this.kernelConstraint=rn(t.kernelConstraint),this.recurrentConstraint=rn(t.recurrentConstraint),this.biasConstraint=rn(t.biasConstraint),this.dropout=Il([1,ra([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Il([1,ra([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=le(t);const s=t[t.length-1];this.kernel=this.addWeight("kernel",[s,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,s){return ft(()=>{if(t=t,t.length!==2)throw new ot(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const r=s.training==null?!1:s.training;let d=t[1];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=la({ones:()=>Ps(t),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=la({ones:()=>Ps(d),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const S=this.dropoutMask,i=this.recurrentDropoutMask;let g,e,a;0<this.dropout&&this.dropout<1&&(t=rt(t,S[0]));let v=ji(t,this.kernel.read());this.useBias&&(v=Pi(v,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(d=rt(d,i[0]));const u=this.recurrentKernel.read(),[o,c]=ds(u,[2*this.units,this.units],u.rank-1),l=ji(d,o),[f,m,h]=ds(v,3,v.rank-1),[p,y]=ds(l,2,l.rank-1);g=this.recurrentActivation.apply(St(f,p)),e=this.recurrentActivation.apply(St(m,y));const x=ji(rt(e,d),c);a=this.activation.apply(St(h,x));const T=St(rt(g,d),rt(St(1,Ee(g)),a));return[T,T]})}getConfig(){const t=super.getConfig(),s={units:this.units,activation:aa(this.activation),recurrentActivation:aa(this.recurrentActivation),useBias:this.useBias,kernelInitializer:De(this.kernelInitializer),recurrentInitializer:De(this.recurrentInitializer),biasInitializer:De(this.biasInitializer),kernelRegularizer:ve(this.kernelRegularizer),recurrentRegularizer:ve(this.recurrentRegularizer),biasRegularizer:ve(this.biasRegularizer),activityRegularizer:ve(this.activityRegularizer),kernelConstraint:sn(this.kernelConstraint),recurrentConstraint:sn(this.recurrentConstraint),biasConstraint:sn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},t),s)}}Y2.className="GRUCell";Ct(Y2);class b3 extends Ca{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new Y2(t),super(t)}call(t,s){return ft(()=>{this.cell.dropoutMask!=null&&(Zt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Zt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=s==null?null:s.mask,d=s==null?null:s.training,S=s==null?null:s.initialState;return super.call(t,{mask:r,training:d,initialState:S})})}static fromConfig(t,s){return s.implmentation===0&&(s.implementation=1),new t(s)}}b3.className="GRU";Ct(b3);class Hm extends Xm{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,dn(this.units,"units"),this.activation=oa(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=oa(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=Re(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Re(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Re(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=Ne(t.kernelRegularizer),this.recurrentRegularizer=Ne(t.recurrentRegularizer),this.biasRegularizer=Ne(t.biasRegularizer),this.kernelConstraint=rn(t.kernelConstraint),this.recurrentConstraint=rn(t.recurrentConstraint),this.biasConstraint=rn(t.biasConstraint),this.dropout=Il([1,ra([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Il([1,ra([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var s;t=le(t);const r=t[t.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let d;if(this.useBias){if(this.unitForgetBias){const S=this.biasInitializer,i=this.units;d=new(s=class extends li{apply(e,a){const v=S.apply([i]),u=new D2().apply([i]),o=S.apply([i*2]);return YC(YC(v,u),o)}},s.className="CustomInit",s)}else d=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,d,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,s){return ft(()=>{const r=s.training==null?!1:s.training;if(t=t,t.length!==3)throw new ot(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let d=t[1];const S=t[2];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=la({ones:()=>Ps(t),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=la({ones:()=>Ps(d),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,g=this.recurrentDropoutMask;let e,a,v,u;0<this.dropout&&this.dropout<1&&(t=rt(t,i[0]));let o=ji(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(d=rt(d,g[0])),o=St(o,ji(d,this.recurrentKernel.read())),this.useBias&&(o=Pi(o,this.bias.read()));const[c,l,f,m]=ds(o,4,o.rank-1);e=this.recurrentActivation.apply(c),a=this.recurrentActivation.apply(l),v=St(rt(a,S),rt(e,this.activation.apply(f))),u=this.recurrentActivation.apply(m);const h=rt(u,this.activation.apply(v));return[h,h,v]})}getConfig(){const t=super.getConfig(),s={units:this.units,activation:aa(this.activation),recurrentActivation:aa(this.recurrentActivation),useBias:this.useBias,kernelInitializer:De(this.kernelInitializer),recurrentInitializer:De(this.recurrentInitializer),biasInitializer:De(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:ve(this.kernelRegularizer),recurrentRegularizer:ve(this.recurrentRegularizer),biasRegularizer:ve(this.biasRegularizer),activityRegularizer:ve(this.activityRegularizer),kernelConstraint:sn(this.kernelConstraint),recurrentConstraint:sn(this.recurrentConstraint),biasConstraint:sn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},t),s)}}Hm.className="LSTMCell";Ct(Hm);class I3 extends Ca{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new Hm(t),super(t)}call(t,s){return ft(()=>{this.cell.dropoutMask!=null&&(Zt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Zt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=s==null?null:s.mask,d=s==null?null:s.training,S=s==null?null:s.initialState;return super.call(t,{mask:r,training:d,initialState:S})})}static fromConfig(t,s){return s.implmentation===0&&(s.implementation=1),new t(s)}}I3.className="LSTM";Ct(I3);class K2 extends Xm{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const s of this.cells.slice().reverse())Array.isArray(s.stateSize)?t.push(...s.stateSize):t.push(s.stateSize);return t}call(t,s){return ft(()=>{t=t;let r=t.slice(1);const d=[];for(const g of this.cells.slice().reverse())Array.isArray(g.stateSize)?d.push(r.splice(0,g.stateSize.length)):d.push(r.splice(0,1));d.reverse();const S=[];let i;for(let g=0;g<this.cells.length;++g){const e=this.cells[g];r=d[g],g===0?i=[t[0]].concat(r):i=[i[0]].concat(r),i=e.call(i,s),S.push(i.slice(1))}r=[];for(const g of S.slice().reverse())r.push(...g);return[i[0]].concat(r)})}build(t){P0(t)&&(t=t[0]),t=t;let s;this.cells.forEach((r,d)=>{Wa(`RNNCell_${d}`,()=>{r.build(t),Array.isArray(r.stateSize)?s=r.stateSize[0]:s=r.stateSize,t=[t[0],s]})}),this.built=!0}getConfig(){const t=super.getConfig(),s=S=>({className:S.getClassName(),config:S.getConfig()}),d={cells:this.cells.map(s)};return Object.assign(Object.assign({},t),d)}static fromConfig(t,s,r={}){const d=[];for(const S of s.cells)d.push(pr(S,r));return new t({cells:d})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const s of this.cells)t.push(...s.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const s of this.cells)t.push(...s.nonTrainableWeights);if(!this.trainable){const s=[];for(const r of this.cells)s.push(...r.trainableWeights);return s.concat(t)}return t}getWeights(){const t=[];for(const s of this.cells)t.push(...s.weights);return F0(t)}setWeights(t){const s=[];for(const r of this.cells){const d=r.weights.length,S=t.splice(d);for(let i=0;i<r.weights.length;++i)s.push([r.weights[i],S[i]])}z2(s)}}K2.className="StackedRNNCells";Ct(K2);function la(n){const{ones:t,rate:s,training:r=!1,count:d=1,dropoutFunc:S}=n,i=()=>S!=null?S(t(),s):TN(t(),s),g=()=>Fc(i,t,r);return!d||d<=1?fn(g().clone()):Array(d).fill(void 0).map(g).map(a=>fn(a.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var QW=globalThis&&globalThis.__rest||function(n,t){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,r=Object.getOwnPropertySymbols(n);d<r.length;d++)t.indexOf(r[d])<0&&Object.prototype.propertyIsEnumerable.call(n,r[d])&&(s[r[d]]=n[r[d]]);return s};class R3 extends Ca{constructor(t){if(t.unroll)throw new Yt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new Yt("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new en({ndim:5})]}call(t,s){return ft(()=>{if(this.cell.dropoutMask!=null&&(Zt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Zt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),s&&s.constants)throw new ot("ConvRNN2D cell does not support constants");const r=s==null?null:s.mask,d=s==null?null:s.training,S=s==null?null:s.initialState;return super.call(t,{mask:r,training:d,initialState:S})})}computeOutputShape(t){let s=this.computeSingleOutputShape(t);return this.returnSequences||(s=[s[0],...s.slice(2)]),this.returnState&&(s=[s,...Array(2).fill([t[0],...s.slice(-3)])]),s}getInitialState(t){return ft(()=>{const{stateSize:s}=this.cell,r=t.shape,d=this.computeSingleOutputShape(r),S=[d[0],...d.slice(2)],i=_e(S);return Array.isArray(s)?Array(s.length).fill(i):[i]})}resetStates(t,s=!1){ft(()=>{if(!this.stateful)throw new Mi("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,d=this.computeSingleOutputShape(r),S=[d[0],...d.slice(2)];if(r[0]==null)throw new ot("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>_e(S)):this.states_=[_e(S)];else if(t==null)Zt(this.states_),this.keptStates!=null&&(Zt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>_e(S)):this.states_[0]=_e(S);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new ot(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);s?this.keptStates.push(this.states_.slice()):Zt(this.states_);for(let g=0;g<this.states_.length;++g){const e=t[g],a=S;if(!ee(e.shape,a))throw new ot(`State ${g} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${e.shape}`);this.states_[g]=e}}this.states_=this.states_.map(g=>fn(g.clone()))})}computeSingleOutputShape(t){const{dataFormat:s,filters:r,kernelSize:d,padding:S,strides:i,dilationRate:g}=this.cell,e=s==="channelsFirst",a=t[e?3:2],v=t[e?4:3],u=Si(a,d[0],S,i[0],g[0]),o=Si(v,d[1],S,i[1],g[1]);return[...t.slice(0,2),...e?[r,u,o]:[u,o,r]]}}R3.className="ConvRNN2D";class j2 extends Hm{constructor(t){const{filters:s,kernelSize:r,strides:d,padding:S,dataFormat:i,dilationRate:g}=t;super(Object.assign(Object.assign({},t),{units:s})),this.filters=s,dn(this.filters,"filters"),this.kernelSize=hl(r,2,"kernelSize"),this.kernelSize.forEach(e=>dn(e,"kernelSize")),this.strides=hl(d||1,2,"strides"),this.strides.forEach(e=>dn(e,"strides")),this.padding=S||"valid",Ms(this.padding),this.dataFormat=i||"channelsLast",Xe(this.dataFormat),this.dilationRate=hl(g||1,2,"dilationRate"),this.dilationRate.forEach(e=>dn(e,"dilationRate"))}build(t){var s;t=le(t);const r=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[r]==null)throw new ot(`The channel dimension of the input should be defined. Found ${t[r]}`);const d=t[r],S=4,i=this.kernelSize.concat([d,this.filters*S]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const g=this.kernelSize.concat([this.filters,this.filters*S]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",g,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const a=this.biasInitializer,v=this.filters;e=new(s=class extends li{apply(o,c){const l=a.apply([v]),f=Es([v]),m=a.apply([v*2]);return F2([l,f,m])}},s.className="CustomInit",s)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*S],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,s){return ft(()=>{if(t.length!==3)throw new ot(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const r=s.training||!1,d=t[0],S=t[1],i=t[2],g=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=la({ones:()=>Ps(d),rate:this.dropout,training:r,count:g,dropoutFunc:this.dropoutFunc}));const e=this.dropoutMask,a=(V,W,K)=>!W||!W[K]?V:rt(W[K],V);let v=a(d,e,0),u=a(d,e,1),o=a(d,e,2),c=a(d,e,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=la({ones:()=>Ps(S),rate:this.recurrentDropout,training:r,count:g,dropoutFunc:this.dropoutFunc}));const l=this.recurrentDropoutMask;let f=a(S,l,0),m=a(S,l,1),h=a(S,l,2),p=a(S,l,3);const y=3,[x,T,C,E]=ds(this.kernel.read(),g,y),[A,w,b,I]=this.useBias?ds(this.bias.read(),g):[null,null,null,null];v=this.inputConv(v,x,A,this.padding),u=this.inputConv(u,T,w,this.padding),o=this.inputConv(o,C,b,this.padding),c=this.inputConv(c,E,I,this.padding);const[R,N,F,P]=ds(this.recurrentKernel.read(),g,y);f=this.recurrentConv(f,R),m=this.recurrentConv(m,N),h=this.recurrentConv(h,F),p=this.recurrentConv(p,P);const O=this.recurrentActivation.apply(St(v,f)),M=this.recurrentActivation.apply(St(u,m)),L=St(rt(M,i),rt(O,this.activation.apply(St(o,h)))),k=rt(this.recurrentActivation.apply(St(c,p)),this.activation.apply(L));return[k,k,L]})}getConfig(){const t=super.getConfig(),s=QW(t,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},s),r)}inputConv(t,s,r,d){const S=sa(t,s,this.strides,d||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Pi(S,r,this.dataFormat):S}recurrentConv(t,s){return sa(t,s,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}j2.className="ConvLSTM2DCell";Ct(j2);class N3 extends R3{constructor(t){const s=new j2(t);super(Object.assign(Object.assign({},t),{cell:s}))}static fromConfig(t,s){return new t(s)}}N3.className="ConvLSTM2D";Ct(N3);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Z2 extends Jt{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(this.noiseShape==null)return this.noiseShape;const s=t.shape,r=[];for(let d=0;d<this.noiseShape.length;++d)r.push(this.noiseShape[d]==null?s[d]:this.noiseShape[d]);return r}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const r=Ut(t);if(0<this.rate&&this.rate<1){const d=s.training==null?!1:s.training,S=this.getNoiseShape(r);return Fc(()=>TN(r,this.rate,S,this.seed),()=>r,d)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},s=super.getConfig();return Object.assign(t,s),t}dispose(){return super.dispose()}}Z2.className="Dropout";Ct(Z2);class P3 extends Z2{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const s=t.shape;return[s[0],1,s[2]]}}P3.className="SpatialDropout1D";Ct(P3);class F3 extends Jt{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){let s=null;t.batchSize!=null&&(s=t.batchSize),this.batchInputShape=[s,t.inputDim]}this.units=t.units,dn(this.units,"units"),this.activation=oa(t.activation),t.useBias!=null&&(this.useBias=t.useBias),this.kernelInitializer=Re(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Re(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=rn(t.kernelConstraint),this.biasConstraint=rn(t.biasConstraint),this.kernelRegularizer=Ne(t.kernelRegularizer),this.biasRegularizer=Ne(t.biasRegularizer),this.activityRegularizer=Ne(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=le(t);const s=t[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[s,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:s}}],this.built=!0}computeOutputShape(t){t=le(t);const s=t.slice();return s[s.length-1]=this.units,s}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const r=Ut(t),d=dN(this.activation.getClassName());let S;return d!=null?S=ji(r,this.kernel.read(),d,this.bias?this.bias.read():null):(S=ji(r,this.kernel.read()),this.bias!=null&&(S=Pi(S,this.bias.read())),this.activation!=null&&(S=this.activation.apply(S))),S})}getConfig(){const t={units:this.units,activation:aa(this.activation),useBias:this.useBias,kernelInitializer:De(this.kernelInitializer),biasInitializer:De(this.biasInitializer),kernelRegularizer:ve(this.kernelRegularizer),biasRegularizer:ve(this.biasRegularizer),activityRegularizer:ve(this.activityRegularizer),kernelConstraint:sn(this.kernelConstraint),biasConstraint:sn(this.biasConstraint)},s=super.getConfig();return Object.assign(t,s),t}}F3.className="Dense";Ct(F3);class D3 extends Jt{constructor(t){t=t||{},super(t),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=le(t);for(const s of t.slice(1))if(s==null)throw new ot(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],Jr(t,1)]}call(t,s){return ft(()=>{this.invokeCallHook(t,s);let r=Ut(t);if(this.dataFormat==="channelsFirst"&&r.rank>1){const d=[0];for(let S=2;S<r.rank;++S)d.push(S);d.push(1),r=se(r,d)}return OU(r)})}getConfig(){const t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);const s=super.getConfig();return Object.assign(t,s),t}}D3.className="Flatten";Ct(D3);class O3 extends Jt{constructor(t){super(t),this.supportsMasking=!0,this.activation=oa(t.activation)}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const r=Ut(t);return this.activation.apply(r)})}getConfig(){const t={activation:aa(this.activation)},s=super.getConfig();return Object.assign(t,s),t}}O3.className="Activation";Ct(O3);class L3 extends Jt{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,s){return ft(()=>(t=Ut(t),FU(t,this.n)))}getConfig(){const t={n:this.n},s=super.getConfig();return Object.assign(t,s),t}}L3.className="RepeatVector";Ct(L3);class M3 extends Jt{constructor(t){super(t),this.targetShape=t.targetShape;for(let s=0;s<this.targetShape.length;++s)this.isUnknown(this.targetShape[s])&&(this.targetShape[s]=null)}isUnknown(t){return t<0||t==null}fixUnknownDimension(t,s){const r="Total size of new array must be unchanged.",d=s.slice();let S=1,i=null;for(let e=0;e<d.length;++e){const a=d[e];if(this.isUnknown(a))if(i===null)i=e;else throw new ot("Can only specifiy one unknown dimension.");else S*=a}const g=Jr(t);if(i!==null){if(S===0||g%S!==0)throw new ot(r);d[i]=g/S}else if(g!==S)throw new ot(r);return d}computeOutputShape(t){let s=!1;for(let r=0;r<t.length;++r)if(this.isUnknown(t[r])){s=!0;break}return s?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const r=Ut(t),d=r.shape,S=d.slice(0,1).concat(this.fixUnknownDimension(d.slice(1),this.targetShape));return at(r,S)})}getConfig(){const t={targetShape:this.targetShape},s=super.getConfig();return Object.assign(t,s),t}}M3.className="Reshape";Ct(M3);class $3 extends Jt{constructor(t){if(super(t),t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const s=Ai(1,t.dims.length+1);if(!ee(t.dims.slice().sort(),s))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new en({ndim:this.dims.length+1})]}computeOutputShape(t){t=le(t);const s=t.slice();return this.dims.forEach((r,d)=>{s[d+1]=t[r]}),s}call(t,s){return se(Ut(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},s=super.getConfig();return Object.assign(t,s),t}}$3.className="Permute";Ct($3);class B3 extends Jt{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null?this.maskValue=t.maskValue==null?0:t.maskValue:this.maskValue=0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),s={maskValue:this.maskValue};return Object.assign(s,t),s}computeMask(t,s){const r=Ut(t),d=-1;return Cd(Al(r,this.maskValue),d)}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const r=Ut(t),d=-1,S=!0,i=Cd(Al(r,this.maskValue),d,S);return rt(r,Nt(i,r.dtype))})}}B3.className="Masking";Ct(B3);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class k3 extends Jt{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){let s=null;t.batchSize!=null&&(s=t.batchSize),t.inputLength==null?this.batchInputShape=[s,null]:this.batchInputShape=[s].concat(Te(t.inputLength))}this.inputDim=t.inputDim,dn(this.inputDim,"inputDim"),this.outputDim=t.outputDim,dn(this.outputDim,"outputDim"),this.embeddingsInitializer=Re(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Ne(t.embeddingsRegularizer),this.activityRegularizer=Ne(t.activityRegularizer),this.embeddingsConstraint=rn(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,s){return ft(()=>this.maskZero?(t=Ut(t),Al(t,ie(t))):null)}computeOutputShape(t){if(t=le(t),this.inputLength==null)return[...t,this.outputDim];const s=Te(this.inputLength);if(s.length!==t.length-1)throw new ot(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let r=0;for(let d=0;d<s.length;++d){const S=s[d],i=t[d+1];if(S!=null&&i!=null&&S!==i)throw new ot(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);S==null&&(s[r]=i),r++}}return[t[0],...s,this.outputDim]}call(t,s){return ft(()=>{this.invokeCallHook(t,s);let r=Ut(t);r.dtype!=="int32"&&(r=Ki(r,"int32"));const d=yN(this.embeddings.read(),at(r,[r.size]));return at(d,le(this.computeOutputShape(r.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:De(this.embeddingsInitializer),embeddingsRegularizer:ve(this.embeddingsRegularizer),activityRegularizer:ve(this.activityRegularizer),embeddingsConstraint:sn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},s=super.getConfig();return Object.assign(t,s),t}}k3.className="Embedding";Ct(k3);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class To extends Jt{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new Yt}computeElementwiseOpOutputShape(t,s){if(t==null||s==null)return null;if(t.length<s.length)return this.computeElementwiseOpOutputShape(s,t);if(s.length===0)return t;const r=t.slice(0,t.length-s.length);for(let d=0;d<s.length;++d){const S=t[t.length-s.length+d],i=s[d];if(S==null||i==null||S<0||i<0)r.push(null);else if(S===1)r.push(i);else if(i===1)r.push(S);else{if(S!==i)throw new ot("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(s));r.push(S)}}return r}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[le(t)]),t=t,t.length<2)throw new ot(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let s=[];for(const S of t)S!=null&&S[0]!==null&&s.push(S[0]);if(s=Qr(s),s.length>1)throw new ot(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let r=t[0]==null?null:t[0].slice(1);for(let S=1;S<t.length;++S){const i=t[S]==null?null:t[S].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const d=t.map(S=>S.length);t.indexOf(null)===-1&&Qr(d).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,s){return ft(()=>{if(t=t,this.reshapeRequired){const r=[],d=t.map(S=>S.rank);if(d.indexOf(null)===-1){const S=ra(d);for(let i of t){const g=i.rank;for(let e=0;e<S-g;++e)i=Nc(i,1);r.push(i)}return this.mergeFunction(r)}else{let S=!1;for(const e of t){const a=e.rank;if(a==null){const v=e.shape,u=v[0],o=v.slice(1).concat([u]);let c=at(e,[u].concat(Jr(v.slice(1))));c=se(c,[1,0]),c=at(c,o),r.push(c),S=!0}else if(a>1){const v=Ai(1,a).concat([0]);r.push(se(e,v)),S=!0}else r.push(e)}let i=this.mergeFunction(r);const g=i.rank;if(S){if(g==null){const e=i.shape,a=e.length,v=e[a-1],u=[v].concat(e.slice(0,e.length-1));i=at(se(at(i,[-1,v]),[1,0]),u)}else if(g>1){const e=[g-1].concat(Ai(0,g-1));i=se(i,e)}}return i}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let s;t[0]==null?s=null:s=t[0].slice(1);for(let d=1;d<t.length;++d){const S=t[d]==null?null:t[d].slice(1);s=this.computeElementwiseOpOutputShape(s,S)}let r=[];for(const d of t)d!=null&&d[0]!==null&&r.push(d[0]);return r=Qr(r),r.length===1?s=r.concat(s):s=[null].concat(s),s}computeMask(t,s){return ft(()=>{if(s==null)return null;if(!Array.isArray(s))throw new ot("`mask` should be an Array");if(!Array.isArray(t))throw new ot("`inputs` should be an Array");if(s.length!==t.length)throw new ot(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${s.length})`);if(s.every(d=>d==null))return null;s=s.map(d=>d==null?d:zn(d,0));let r=s[0];for(let d=1;d<s.length-1;++d)r=Zi(r,s[d]);return r})}}class z3 extends To{constructor(t){super(t)}mergeFunction(t){return ft(()=>{let s=t[0].clone();for(let r=1;r<t.length;++r)s=St(s,t[r]);return s})}}z3.className="Add";Ct(z3);class V3 extends To{constructor(t){super(t)}mergeFunction(t){return ft(()=>{let s=t[0].clone();for(let r=1;r<t.length;++r)s=rt(s,t[r]);return s})}}V3.className="Multiply";Ct(V3);class G3 extends To{constructor(t){super(t)}mergeFunction(t){return ft(()=>{let s=t[0].clone();for(let r=1;r<t.length;++r)s=St(s,t[r]);return rt(1/t.length,s)})}}G3.className="Average";Ct(G3);class U3 extends To{constructor(t){super(t)}mergeFunction(t){return ft(()=>{let s=t[0];for(let r=1;r<t.length;++r)s=Ar(s,t[r]);return s})}}U3.className="Maximum";Ct(U3);class W3 extends To{constructor(t){super(t)}mergeFunction(t){return ft(()=>{let s=t[0];for(let r=1;r<t.length;++r)s=no(s,t[r]);return s})}}W3.className="Minimum";Ct(W3);class X3 extends To{constructor(t){super(t),this.DEFAULT_AXIS=-1,t==null&&(t={}),this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!(Array.isArray(t)&&Array.isArray(t[0]))||t.length===1)throw new ot("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let s=!0;for(const d of t)if(d!=null){s=!1;break}if(s)return;const r=[];for(let d=0;d<t.length;++d){const S=t[d].slice();S.splice(this.axis,1);let i=!1;for(const g of r)if(ee(g,S)){i=!0;break}i||r.push(S)}if(r.length>1)throw new ot("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return ft(()=>F2(t,this.axis))}computeOutputShape(t){if(!(Array.isArray(t)&&Array.isArray(t[0])))throw new ot("A `Concatenate` layer should be called on a list of inputs.");const s=t,r=s[0].slice(),d=this.axis<0?r.length+this.axis:this.axis;for(const S of s.slice(1)){if(r[d]==null||S[d]==null){r[d]=null;break}r[d]+=S[d]}return r}computeMask(t,s){if(s==null)return null;if(!Array.isArray(s))throw new ot("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new ot("`inputs` should be an array for Concatenate");if(s.length!==t.length)throw new ot(`Mismatch in the length of mask (${s.length}) and the legnth of inputs (${t.length})`);return ft(()=>{let r=!0;if(s.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const d=[];for(let i=0;i<t.length;++i)s[i]==null?d.push(Nt(Ps(t[i]),"bool")):s[i].rank<t[i].rank?d.push(zn(s[i],-1)):d.push(s[i]);const S=Ze(d,this.axis);return f1(S,-1,!1)})}getConfig(){const t={axis:this.axis},s=super.getConfig();return Object.assign(t,s),t}}X3.className="Concatenate";Ct(X3);function pu(n,t){for(;n<0;)n+=t;return n}function JW(n,t,s){if(n.shape.length>3||t.shape.length>3)throw new Yt("batchDot is not implemented for tensors of 4D or higher rank yet");if(q(n.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${n.shape.length}`),q(n.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof s=="number"&&(s=[s,s]),n.dtype==="complex64"||t.dtype==="complex64")throw new Yt("batchDot is not implemented for complex64-type Tensors yet.");const r=n.shape.length,d=t.shape.length;s==null&&(s=[r-1,d-2]);const S=s;return ft(()=>{let i;if(r>d){i=r-d;const e=[];for(let a=0;a<i;++a)e.push(1);t=at(t,t.shape.concat(e))}else if(d>r){i=d-r;const e=[];for(let a=0;a<i;++a)e.push(1);n=at(n,n.shape.concat(e))}else i=0;let g;if(n.shape.length===2&&t.shape.length===2)S[0]===S[1]?g=Ot(rt(n,t),S[0]):g=Ot(rt(se(n,[1,0]),t),S[1]);else{const e=S[0]!==n.shape.length-1,a=S[1]===t.shape.length-1;g=qt(n,t,e,a)}if(i>0){let e;r>d?e=r+d-3:e=r-1;const a=[];for(let v=e;v<e+i;++v)a.push(v);g=go(g,a)}return g.shape.length===1&&(g=zn(g,1)),g})}class H3 extends To{constructor(t){super(t),this.axes=t.axes,this.normalize=t.normalize==null?!1:t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){q(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const s=t[0],r=t[1];if(s.length>3||r.length>3)throw new Yt("Dot layer does not support tensors of 4D or higher rank yet.");const d=this.interpretAxes(s,r);if(s[d[0]]!==r[d[1]])throw new ot(`Dimension incompatibility: ${s[d[0]]} !== ${r[d[1]]}`)}mergeFunction(t){if(t.length!==2)throw new ot(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let s=t[0],r=t[1],d;return Array.isArray(this.axes)?d=this.axes.map((S,i)=>pu(S,t[i].shape.length)):d=[pu(this.axes,s.shape.length),pu(this.axes,r.shape.length)],this.normalize&&(s=Rd(s,d[0]),r=Rd(r,d[1])),JW(s,r,d)}interpretAxes(t,s){let r;return Array.isArray(this.axes)?r=this.axes:r=[pu(this.axes,t.length),pu(this.axes,s.length)],r}computeOutputShape(t){q(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const s=t[0].slice(),r=t[1].slice();if(s.length>3||r.length>3)throw new Yt("Dot layer does not support tensors of 4D or higher rank yet.");const d=this.interpretAxes(s,r);s.splice(d[0],1),r.splice(d[1],1),r.splice(0,1);const S=s.concat(r);return S.length===1&&S.push(1),S}computeMask(t,s){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},s=super.getConfig();return Object.assign(t,s),t}}H3.className="Dot";Ct(H3);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Y3 extends Jt{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),s={stddev:this.stddev};return Object.assign(s,t),s}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const r=Ut(t);return Fc(()=>St(km(r.shape,0,this.stddev),r),()=>r,s.training||!1)})}}Y3.className="GaussianNoise";Ct(Y3);class K3 extends Jt{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),s={rate:this.rate};return Object.assign(s,t),s}call(t,s){return ft(()=>{this.invokeCallHook(t,s);const r=Ut(t);return this.rate>0&&this.rate<1?Fc(()=>{const S=Math.sqrt(this.rate/(1-this.rate));return rt(r,km(r.shape,1,S))},()=>r,s.training||!1):r})}}K3.className="GaussianDropout";Ct(K3);class j3 extends Jt{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||Ut(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),s={rate:this.rate};return Object.assign(s,t),s}call(t,s){return ft(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(t);return Fc(()=>{const S=Ut(t),i=1.6732632423543772,g=1.0507009873554805,e=-i*g;let a=ya(vo(r),this.rate);a=Ki(a,"float32");const v=((1-this.rate)*(1+this.rate*e**2))**-.5,u=-v*e*this.rate,o=St(rt(S,a),rt(St(a,-1),e));return St(rt(o,v),u)},()=>Ut(t),s.training||!1)}return t})}}j3.className="AlphaDropout";Ct(j3);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hh(n,t,s,r,d,S=.001){let i;if(n.rank===2)i=TI(n,t,s,r,d,S);else if(n.rank===3)i=SI(n,t,s,r,d,S);else if(n.rank===4)i=CI(n,t,s,r,d,S);else throw new Yt(`batchNormalization is not implemented for array of rank ${n.rank} yet`);return i}function qW(n,t,s,r,d=.001){return ft(()=>{const S=Tm(n,r),i=S.mean,g=S.variance;return[hh(n,i,g,s,t,d),i,g]})}function _W(n,t,s,r,d=.001){return ft(()=>{const S=Tm(n,r),i=S.mean,g=S.variance,e=[];for(const l of Ai(0,n.rank))r.indexOf(l)!==-1?e.push(1):e.push(n.shape[l]);const a=at(i,e),v=at(g,e),u=t==null?null:at(t,e),o=s==null?null:at(s,e);return[hh(n,a,v,o,u,d),i,g]})}function tX(n,t,s,r,d=.001){return ee(r.slice().sort(),Ai(0,n.rank-1))?qW(n,t,s,r,d):_W(n,t,s,r,d)}class Z3 extends Jt{constructor(t){t==null&&(t={}),super(t),this.supportsMasking=!0,this.axis=t.axis==null?-1:t.axis,this.momentum=t.momentum==null?.99:t.momentum,this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=Re(t.betaInitializer||"zeros"),this.gammaInitializer=Re(t.gammaInitializer||"ones"),this.movingMeanInitializer=Re(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Re(t.movingVarianceInitializer||"ones"),this.betaConstraint=rn(t.betaConstraint),this.gammaConstraint=rn(t.gammaConstraint),this.betaRegularizer=Ne(t.betaRegularizer),this.gammaRegularizer=Ne(t.gammaRegularizer)}build(t){t=le(t);const s=this.axis>=0?this.axis:this.axis+t.length,r=t[s];if(r==null)throw new ot(`Axis ${s} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new en({ndim:t.length,axes:{[s]:r}})];const d=[r];this.scale&&(this.gamma=this.addWeight("gamma",d,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",d,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",d,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",d,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,s){return ft(()=>{const r=s.training==null?!1:s.training,d=Ut(t),S=d.shape,i=S.length,g=Ai(0,i),e=this.axis>=0?this.axis:this.axis+i;g.splice(e,1);const a=io(1,i);a[e]=S[e];const v=g.slice();v.sort();const u=!ee(v,Ai(0,i).slice(0,i-1)),o=()=>{if(u){const p=at(this.movingMean.read(),a),y=at(this.movingVariance.read(),a),x=this.center?at(this.beta.read(),a):null,T=this.scale?at(this.gamma.read(),a):null;return hh(d,p,y,x,T,this.epsilon)}else return hh(d,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return o();const[c,l,f]=tX(d,this.gamma.read(),this.beta.read(),g,this.epsilon),m=(p,y,x)=>{ft(()=>{const T=1-x,C=p.read(),E=rt(Ft(C,y),T);p.write(Ft(C,E))})};return(()=>{m(this.movingMean,l,this.momentum),m(this.movingVariance,f,this.momentum)})(),c})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:De(this.betaInitializer),gammaInitializer:De(this.gammaInitializer),movingMeanInitializer:De(this.movingMeanInitializer),movingVarianceInitializer:De(this.movingVarianceInitializer),betaRegularizer:ve(this.betaRegularizer),gammaRegularizer:ve(this.gammaRegularizer),betaConstraint:sn(this.betaConstraint),gammaConstraint:sn(this.gammaConstraint)},s=super.getConfig();return Object.assign(t,s),t}}Z3.className="BatchNormalization";Ct(Z3);class Q3 extends Jt{constructor(t){if(t==null&&(t={}),super(t),this.axis=t.axis==null?-1:t.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const s of this.axis)if(!Number.isInteger(s))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=Re(t.betaInitializer||"zeros"),this.gammaInitializer=Re(t.gammaInitializer||"ones"),this.betaRegularizer=Ne(t.betaRegularizer),this.gammaRegularizer=Ne(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=le(t);const s=t.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let S=0;S<this.axis.length;++S)this.axis[S]<0&&(this.axis[S]+=s);for(const S of this.axis)if(S<0||S>=s)throw new Error(`Invalid axis: ${S}`);if(this.axis.length!==Qr(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(S=>t[S]),d=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,d):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,d):this.beta=null,this.built=!0}call(t,s){const r=Ut(t),d=r.shape,S=d.length;return ft(()=>{let{mean:g,variance:e}=Tm(r,this.axis,!0);const a=io(1,S);for(const f of this.axis)a[f]=d[f];const v=f=>f!=null&&f.shape.length!==S?at(f,a):f;let u=this.scale?v(this.gamma.read()):null,o=this.center?v(this.beta.read()):null;const c=[],l=[];for(let f=0;f<S;++f)this.axis.indexOf(f)!==-1?(c.push(d[f]),l.push(1)):(c.push(1),l.push(d[f]));return g=Zs(g,c),e=Zs(e,c),u!=null&&(u=Zs(u,l)),o!=null&&(o=Zs(o,l)),hh(r,g,e,o,u,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:De(this.betaInitializer),gammaInitializer:De(this.gammaInitializer),betaRegularizer:ve(this.betaRegularizer),gammaRegularizer:ve(this.gammaRegularizer)},s=super.getConfig();return Object.assign(t,s),t}}Q3.className="LayerNormalization";Ct(Q3);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eX(n,t,s){return ft(()=>{if(n.rank!==4)throw new ot(`temporalPadding expects input tensor to be 4-D, but received a ${n.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new ot("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(s==null&&(s=bi()),s!=="channelsLast"&&s!=="channelsFirst")throw new ot(`Unknown data format: ${s}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return s==="channelsFirst"?r=[[0,0],[0,0],t[0],t[1]]:r=[[0,0],t[0],t[1],[0,0]],Ta(n,r)})}class J3 extends Jt{constructor(t){if(t==null&&(t={}),super(t),this.dataFormat=t.dataFormat==null?bi():t.dataFormat,t.padding==null)this.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new ot(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let s,r;if(typeof t.padding[0]=="number")s=[t.padding[0],t.padding[0]],r=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new ot(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(s=t.padding[0],t.padding[1].length!==2)throw new ot(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);r=t.padding[1]}this.padding=[s,r]}this.inputSpec=[new en({ndim:4})]}computeOutputShape(t){t=le(t);let s,r;return this.dataFormat==="channelsFirst"?(t[2]!=null&&t[2]>=0?s=t[2]+this.padding[0][0]+this.padding[0][1]:s=null,t[3]!=null&&t[3]>=0?r=t[3]+this.padding[1][0]+this.padding[1][1]:r=null,[t[0],t[1],s,r]):(t[1]!=null&&t[1]>=0?s=t[1]+this.padding[0][0]+this.padding[0][1]:s=null,t[2]!=null&&t[2]>=0?r=t[2]+this.padding[1][0]+this.padding[1][1]:r=null,[t[0],s,r,t[3]])}call(t,s){return ft(()=>eX(Ut(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},s=super.getConfig();return Object.assign(t,s),t}}J3.className="ZeroPadding2D";Ct(J3);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ym(n,t,s,r,d,S){return ft(()=>{Xe(d),mN(S),Ms(r),s==null&&(s=[1,1]),r==null&&(r="valid"),d==null&&(d=bi()),S==null&&(S="max"),n=X2(n,d);let i;const g=r==="same"?"same":"valid";return S==="max"?i=ym(n,t,s,g):i=fm(n,t,s,g),d==="channelsFirst"&&(i=se(i,[0,3,1,2])),i})}function q3(n,t,s,r,d,S){return ft(()=>{Xe(d),mN(S),Ms(r),s==null&&(s=[1,1,1]),r==null&&(r="valid"),d==null&&(d=bi()),S==null&&(S="max"),n=m3(n,d);let i;const g=r==="same"?"same":"valid";return S==="max"?i=KI(n,t,s,g):i=yI(n,t,s,g),d==="channelsFirst"&&(i=se(i,[0,4,1,2,3])),i})}class _3 extends Jt{constructor(t){if(t.poolSize==null&&(t.poolSize=2),super(t),typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new ot(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(dn(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new ot(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);dn(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,Ms(this.padding),this.inputSpec=[new en({ndim:3})]}computeOutputShape(t){t=le(t);const s=Si(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],s,t[2]]}call(t,s){return ft(()=>{this.invokeCallHook(t,s),t=Nc(Ut(t),2);const r=this.poolingFunction(Ut(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return go(r,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},s=super.getConfig();return Object.assign(t,s),t}}class tP extends _3{constructor(t){super(t)}poolingFunction(t,s,r,d,S){return Xe(S),Ms(d),Ym(t,s,r,d,S,"max")}}tP.className="MaxPooling1D";Ct(tP);class eP extends _3{constructor(t){super(t)}poolingFunction(t,s,r,d,S){return Xe(S),Ms(d),Ym(t,s,r,d,S,"avg")}}eP.className="AveragePooling1D";Ct(eP);class nP extends Jt{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new ot(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];dn(this.poolSize,"poolSize"),dn(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Xe(this.dataFormat),Ms(this.padding),this.inputSpec=[new en({ndim:4})]}computeOutputShape(t){t=le(t);let s=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2];return s=Si(s,this.poolSize[0],this.padding,this.strides[0]),r=Si(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],s,r]:[t[0],s,r,t[3]]}call(t,s){return ft(()=>(this.invokeCallHook(t,s),this.poolingFunction(Ut(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},s=super.getConfig();return Object.assign(t,s),t}}class sP extends nP{constructor(t){super(t)}poolingFunction(t,s,r,d,S){return Xe(S),Ms(d),Ym(t,s,r,d,S,"max")}}sP.className="MaxPooling2D";Ct(sP);class iP extends nP{constructor(t){super(t)}poolingFunction(t,s,r,d,S){return Xe(S),Ms(d),Ym(t,s,r,d,S,"avg")}}iP.className="AveragePooling2D";Ct(iP);class rP extends Jt{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new ot(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];dn(this.poolSize,"poolSize"),dn(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Xe(this.dataFormat),Ms(this.padding),this.inputSpec=[new en({ndim:5})]}computeOutputShape(t){t=le(t);let s=this.dataFormat==="channelsFirst"?t[2]:t[1],r=this.dataFormat==="channelsFirst"?t[3]:t[2],d=this.dataFormat==="channelsFirst"?t[4]:t[3];return s=Si(s,this.poolSize[0],this.padding,this.strides[0]),r=Si(r,this.poolSize[1],this.padding,this.strides[1]),d=Si(d,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],s,r,d]:[t[0],s,r,d,t[4]]}call(t,s){return ft(()=>(this.invokeCallHook(t,s),this.poolingFunction(Ut(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},s=super.getConfig();return Object.assign(t,s),t}}class aP extends rP{constructor(t){super(t)}poolingFunction(t,s,r,d,S){return Xe(S),Ms(d),q3(t,s,r,d,S,"max")}}aP.className="MaxPooling3D";Ct(aP);class oP extends rP{constructor(t){super(t)}poolingFunction(t,s,r,d,S){return Xe(S),Ms(d),q3(t,s,r,d,S,"avg")}}oP.className="AveragePooling3D";Ct(oP);class lP extends Jt{constructor(t){super(t),this.inputSpec=[new en({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,s){throw new Yt}}class uP extends lP{constructor(t){super(t||{})}call(t,s){return ft(()=>{const r=Ut(t);return $e(r,1)})}}uP.className="GlobalAveragePooling1D";Ct(uP);class hP extends lP{constructor(t){super(t||{})}call(t,s){return ft(()=>{const r=Ut(t);return ei(r,1)})}}hP.className="GlobalMaxPooling1D";Ct(hP);class cP extends Jt{constructor(t){super(t),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Xe(this.dataFormat),this.inputSpec=[new en({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,s){throw new Yt}getConfig(){const t={dataFormat:this.dataFormat},s=super.getConfig();return Object.assign(t,s),t}}class fP extends cP{call(t,s){return ft(()=>{const r=Ut(t);return this.dataFormat==="channelsLast"?$e(r,[1,2]):$e(r,[2,3])})}}fP.className="GlobalAveragePooling2D";Ct(fP);class dP extends cP{call(t,s){return ft(()=>{const r=Ut(t);return this.dataFormat==="channelsLast"?ei(r,[1,2]):ei(r,[2,3])})}}dP.className="GlobalMaxPooling2D";Ct(dP);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class pP extends Jt{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},s=super.getConfig();return Object.assign(t,s),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,s,r={}){const d=s.layer,S=pr(d,r);delete s.layer;const i={layer:S};return Object.assign(i,s),new t(i)}}class mP extends pP{constructor(t){super(t),this.supportsMasking=!0}build(t){if(t=le(t),t.length<3)throw new ot(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const s=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(s),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=le(t);const s=[t[0]].concat(t.slice(2)),r=this.layer.computeOutputShape(s),d=t[1];return[r[0],d].concat(r.slice(1))}call(t,s){return ft(()=>(t=Ut(t),E3((i,g)=>[Ut(this.layer.call(i,s)),[]],t,[],!1,null,null,!1,!0)[1]))}}mP.className="TimeDistributed";Ct(mP);function nX(n){yo(bU,"BidirectionalMergeMode",n)}const sX="concat";class vP extends pP{constructor(t){super(t);const s=t.layer.getConfig(),r={};r.className=t.layer.getClassName(),r.config=s,this.forwardLayer=pr(r),s.goBackwards=s.goBackwards!==!0;const d={};if(d.className=t.layer.getClassName(),d.config=s,this.backwardLayer=pr(d),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=t.mergeMode===void 0?sX:t.mergeMode,nX(this.mergeMode),t.weights)throw new Yt("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const s=t.length,r=Math.floor(s/2);this.forwardLayer.setWeights(t.slice(0,r)),this.backwardLayer.setWeights(t.slice(r))}computeOutputShape(t){let s=this.forwardLayer.computeOutputShape(t);Array.isArray(s)&&Array.isArray(s[0])||(s=[s]),s=s;let r,d,S;return this.returnState&&(S=s.slice(1)),r=s[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,d=[r]):this.mergeMode==null?d=[r,r.slice()]:d=[r],this.returnState?this.mergeMode==null?d.concat(S).concat(S.slice()):[r].concat(S).concat(S.slice()):Zn(d)}apply(t,s){let r=s==null?null:s.initialState,d=s==null?null:s.constants;s==null&&(s={});const S=w3(t,r,d,this.numConstants);if(t=S.inputs,r=S.initialState,d=S.constants,Array.isArray(t)&&(r=t.slice(1),t=t[0]),(r==null||r.length===0)&&d==null)return super.apply(t,s);const i=[],g=[];if(r!=null){const a=r.length;if(a%2>0)throw new ot("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");s.initialState=r,i.push(...r);const v=r.map(u=>new en({shape:u.shape}));this.forwardLayer.stateSpec=v.slice(0,a/2),this.backwardLayer.stateSpec=v.slice(a/2),g.push(...v)}if(d!=null)throw new Yt("Support for constants in Bidirectional layers is not implemented yet.");const e=i[0]instanceof Vi;for(const a of i)if(a instanceof Vi!==e)throw new ot("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(e){const a=[t].concat(i),v=this.inputSpec.concat(g),u=this.inputSpec;this.inputSpec=v;const o=super.apply(a,s);return this.inputSpec=u,o}else return super.apply(t,s)}call(t,s){return ft(()=>{const r=s.initialState;let d,S;if(r==null)d=this.forwardLayer.call(t,s),S=this.backwardLayer.call(t,s);else{const e=r.slice(0,r.length/2),a=r.slice(r.length/2);d=this.forwardLayer.call(t,Object.assign(s,{initialState:e})),S=this.backwardLayer.call(t,Object.assign(s,{initialState:a}))}let i;this.returnState&&(Array.isArray(d)&&(i=d.slice(1).concat(S.slice(1))),d=d[0],S=S[0]),this.returnSequences&&(S=ri(S,1));let g;return this.mergeMode==="concat"?g=F2([d,S]):this.mergeMode==="sum"?g=St(d,S):this.mergeMode==="ave"?g=rt(.5,St(d,S)):this.mergeMode==="mul"?g=rt(d,S):this.mergeMode==null&&(g=[d,S]),this.returnState?this.mergeMode==null?g.concat(i):[g].concat(i):g})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){Wa(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),Wa(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,s){Array.isArray(s)&&(s=s[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[s,s]:r=s:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const S=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(S).concat(S):[r].concat(S).concat(S)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},s=super.getConfig();return Object.assign(t,s),t}static fromConfig(t,s){const r=pr(s.layer);if(delete s.layer,s.numConstants!=null)throw new Yt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const d=s;return d.layer=r,new t(d)}}vP.className="Bidirectional";Ct(vP);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gP extends Jt{constructor(t){super(t),this.scale=t.scale,t.offset?this.offset=t.offset:this.offset=0}getConfig(){const t={scale:this.scale,offset:this.offset},s=super.getConfig();return Object.assign(t,s),t}call(t,s){return ft(()=>(t=Ut(t),t.dtype!=="float32"&&(t=Ki(t,"float32")),St(rt(t,this.scale),this.offset)))}}gP.className="Rescaling";Ct(gP);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:iX,cropAndResize:rX}=zi;class xP extends Jt{constructor(t){super(t),this.height=t.height,this.width=t.width}centerCrop(t,s,r,d,S,i,g,e){return ft(()=>{let a,v=!1;const u=s/i,o=r/g,c=(d+s)/i,l=(S+r)/g,f=[u,o,c,l],m=[];t.rank===3?(v=!0,a=Fs([t])):a=t;for(let T=0;T<a.shape[0];T++)m.push(f);const h=ti(m,[m.length,4]),p=bl(0,m.length,1,"int32"),x=rX(a,h,p,[d,S],"nearest");return Ki(v?Ut(ai(x)):x,e)})}upsize(t,s,r,d){return ft(()=>{const S=iX(t,[s,r]);return Ki(S,d)})}call(t,s){return ft(()=>{const r=Ut(t),d=r.dtype,S=r.shape,i=S[S.length-3],g=S[S.length-2];let e=0;i!==this.height&&(e=Math.floor((i-this.height)/2));let a=0;return g!==this.width&&(a=Math.floor((g-this.width)/2),a===0&&(a=1)),e>=0&&a>=0?this.centerCrop(r,e,a,this.height,this.width,i,g,d):this.upsize(t,this.height,this.width,d)})}getConfig(){const t={height:this.height,width:this.width},s=super.getConfig();return Object.assign(t,s),t}computeOutputShape(t){t=le(t);const s=t.length-3,r=t.length-2;return t[s]=this.height,t[r]=this.width,t}}xP.className="CenterCrop";Ct(xP);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aX(n,t,s,r){let d=Ut(n);if(d.dtype!=="int32"&&(d=Ki(d,"int32")),t==="int")return d;const S=d.shape;if(d.rank===0&&(d=zn(d,-1)),t==="oneHot"&&d.shape[d.shape.length-1]!==1&&(d=zn(d,-1)),d.rank>2)throw new ot(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${S} which would result in output rank ${d.rank}.`);const i=["multiHot","oneHot"].includes(t),g=d;let e;if(typeof r<"u"&&t==="count"?e=C0(g,r,s,i):e=C0(g,[],s,i),t!=="tfIdf")return e;if(r)return rt(e,r);throw new ot("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class yP extends Jt{constructor(t){super(t),this.numTokens=t.numTokens,t.outputMode?this.outputMode=t.outputMode:this.outputMode="multiHot"}getConfig(){const t={numTokens:this.numTokens,outputMode:this.outputMode},s=super.getConfig();return Object.assign(t,s),t}computeOutputShape(t){return t=le(t),t==null?[this.numTokens]:this.outputMode==="oneHot"&&t[t.length-1]!==1?(t.push(this.numTokens),t):(t[t.length-1]=this.numTokens,t)}call(t,s){return ft(()=>{t=Ut(t),t.dtype!=="int32"&&(t=Ki(t,"int32"));let r;if(typeof s.countWeights<"u"){if(this.outputMode!=="count")throw new ot(`countWeights is not used when outputMode !== count.
              Received countWeights=${s.countWeights}`);r=Ut(s.countWeights)}const d=ei(t),S=nh(t),i=Ts(this.numTokens,d).bufferSync().get(0),g=ya(S,0).bufferSync().get(0);if(!(i&&g))throw new ot(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return aX(t,this.outputMode,this.numTokens,r)})}}yP.className="CategoryEncoding";Ct(yP);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const oX=["bilinear","nearest"],hw=new Set(oX);class TP extends Jt{constructor(t){if(super(t),this.height=t.height,this.width=t.width,t.interpolation)if(hw.has(t.interpolation))this.interpolation=t.interpolation;else throw new ot(`Invalid interpolation parameter: ${t.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!t.cropToAspectRatio}computeOutputShape(t){t=le(t);const s=t[2];return[this.height,this.width,s]}getConfig(){const t={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},s=super.getConfig();return Object.assign(t,s),t}call(t,s){return ft(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return zi.resizeBilinear(t,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return zi.resizeNearestNeighbor(t,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...hw]} are supported`)})}}TP.className="Resizing";Ct(TP);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class SP{constructor(t){this.seed=t}next(){if(this.seed!==void 0)return this.seed++}}SP.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class CP extends Jt{constructor(t){super(t),this.randomGenerator=new SP(t.seed)}getConfig(){const t={seed:this.randomGenerator.seed},s=super.getConfig();return Object.assign(t,s),t}}CP.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lX=["bilinear","nearest"],cw=new Set(lX);class wP extends CP{constructor(t){super(t);const{factor:s,interpolation:r="bilinear"}=t;if(this.factor=s,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ot(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ot(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ot(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(cw.has(r))this.interpolation=r;else throw new ot(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const t={factor:this.factor,interpolation:this.interpolation},s=super.getConfig();return Object.assign(t,s),t}computeOutputShape(t){t=le(t);const s=t[2];return[this.imgHeight,-1,s]}call(t,s){return ft(()=>{const r=Ut(t);this.imgHeight=r.shape[r.shape.length-3];const d=r.shape[r.shape.length-2];this.widthFactor=vo([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let S=this.widthFactor.dataSync()[0]*d;S=Math.round(S);const i=[this.imgHeight,S];switch(this.interpolation){case"bilinear":return zi.resizeBilinear(t,i);case"nearest":return zi.resizeNearestNeighbor(t,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...cw]} are supported`)}})}}wP.className="RandomWidth";Ct(wP);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uX=dt();uX.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ks;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(ks||(ks={}));var fw;(function(n){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(fw||(fw={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hX={};function EP(n){return hX[n]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j(n,t,s,r,d){const S=t.inputParams[n];if(S&&S.inputIndexStart!==void 0){const g=S.inputIndexStart,e=S.inputIndexEnd===0?void 0:S.inputIndexEnd===void 0?g+1:S.inputIndexEnd,a=g<0?t.inputNames.length+g:g;if(S.type==="tensor")return gn(t.inputNames[a],s,r,d);if(S.type==="tensors"){const o=t.inputs.slice(g,e);return t.inputNames.slice(g,e).filter((l,f)=>{var m;return((m=o[f])===null||m===void 0?void 0:m.op)!=="NoOp"}).map(l=>gn(l,s,r,d))}const v=gn(t.inputNames[a],s,r,d),u=v.dataSync();return S.type==="number"?u[0]:_s(v.shape,u)}const i=t.attrParams[n];return i&&i.value}function gn(n,t,s,r){const[d,S]=rs(n,s);if(r!=null){const g=r.getHashTableHandleByName(d);if(g!=null)return g}const i=s.currentContextIds.find(g=>!!t[Od(d,g)]);return i!==void 0?t[Od(d,i)][S]:void 0}function dw(n,t,s){return t[Od(n,s.currentContextId)]}function ar(n,t){const[s,r,d]=rs(n,t);return[Od(s,t&&t.currentContextId),r,d]}function Od(n,t){return t?`${n}-${t}`:n}function rs(n,t){if(n==="")return["",0,void 0];const s=t!=null&&t.parseNodeNameCache!=null;if(s){const S=t.parseNodeNameCache.get(n);if(S!=null)return S}const r=n.split(":");let d;if(r.length===1)d=[n,0,void 0];else{const S=r[0],i=r.length===3?r[1]:void 0,g=Number(r[r.length-1]);d=[S,g,i]}return s&&t.parseNodeNameCache.set(n,d),d}function zf(n,t,s){let r=j("pad",n,t,s);if(r==="explicit"){r=j("explicitPaddings",n,t,s);const d=[[0,0],[0,0],[0,0],[0,0]];for(let S=0;S<4;S++)d[S][0]=r[S*2],d[S][1]=r[S*2+1];return d}return r}function or(n){return n.kept?n:dr(n)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cX=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],fX=Object.freeze(Object.defineProperty({__proto__:null,json:cX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dX=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],pX=Object.freeze(Object.defineProperty({__proto__:null,json:dX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mX=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],vX=Object.freeze(Object.defineProperty({__proto__:null,json:mX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gX=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],xX=Object.freeze(Object.defineProperty({__proto__:null,json:gX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yX=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],TX=Object.freeze(Object.defineProperty({__proto__:null,json:yX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SX=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],CX=Object.freeze(Object.defineProperty({__proto__:null,json:SX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wX=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],EX=Object.freeze(Object.defineProperty({__proto__:null,json:wX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AX=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],bX=Object.freeze(Object.defineProperty({__proto__:null,json:AX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IX=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],RX=Object.freeze(Object.defineProperty({__proto__:null,json:IX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NX=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],PX=Object.freeze(Object.defineProperty({__proto__:null,json:NX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FX=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],DX=Object.freeze(Object.defineProperty({__proto__:null,json:FX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OX=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],LX=Object.freeze(Object.defineProperty({__proto__:null,json:OX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MX=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],$X=Object.freeze(Object.defineProperty({__proto__:null,json:MX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BX=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],kX=Object.freeze(Object.defineProperty({__proto__:null,json:BX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zX=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],VX=Object.freeze(Object.defineProperty({__proto__:null,json:zX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GX=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],UX=Object.freeze(Object.defineProperty({__proto__:null,json:GX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WX=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],XX=Object.freeze(Object.defineProperty({__proto__:null,json:WX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HX=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],YX=Object.freeze(Object.defineProperty({__proto__:null,json:HX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KX=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],jX=Object.freeze(Object.defineProperty({__proto__:null,json:KX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pw{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[fX,pX,vX,xX,TX,CX,EX,bX,RX,PX,DX,LX,$X,kX,VX,UX,XX,YX,jX],s=[].concat(...t.map(r=>r.json));this.opMappers=s.reduce((r,d)=>(r[d.tfOpName]=d,r),{})}transformGraph(t,s={}){const r=t.node,d=[],S=[],i=[],g=r.reduce((f,m)=>(f[m.name]=this.mapNode(m),m.op.startsWith("Placeholder")?d.push(f[m.name]):m.op==="Const"?S.push(f[m.name]):(m.input==null||m.input.length===0)&&i.push(f[m.name]),f),{});let e=[];const a=[];let v={},u={};s!=null&&(v=this.mapSignatureEntries(s.inputs),u=this.mapSignatureEntries(s.outputs));const o=Object.keys(g);o.forEach(f=>{const m=g[f];m.inputNames.forEach((h,p)=>{const[y,,x]=ar(h),T=g[y];if(T.outputs!=null){const C=T.outputs.indexOf(x);if(C!==-1){const E=`${y}:${C}`;m.inputNames[p]=E}}m.inputs.push(T),T.children.push(m)})}),Object.keys(u).length===0?o.forEach(f=>{const m=g[f];m.children.length===0&&a.push(m)}):Object.keys(u).forEach(f=>{const[m]=ar(f),h=g[m];h!=null&&(h.signatureKey=u[f],a.push(h))}),Object.keys(v).length>0?Object.keys(v).forEach(f=>{const[m]=ar(f),h=g[m];h&&(h.signatureKey=v[f],e.push(h))}):e=d;let c={};t.library!=null&&t.library.function!=null&&(c=t.library.function.reduce((f,m)=>(f[m.signature.name]=this.mapFunction(m),f),{}));const l={nodes:g,inputs:e,outputs:a,weights:S,placeholders:d,signature:s,functions:c};return i.length>0&&(l.initNodes=i),l}mapSignatureEntries(t){return Object.keys(t||{}).reduce((s,r)=>(s[t[r].name]=r,s),{})}mapNode(t){const s=EP(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});const r={name:t.name,op:t.op,category:s.category,inputNames:(t.input||[]).map(d=>d.startsWith("^")?d.slice(1):d),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:s.outputs};return s.inputs!=null&&(r.inputParams=s.inputs.reduce((d,S)=>(d[S.name]={type:S.type,inputIndexStart:S.start,inputIndexEnd:S.end},d),{})),s.attrs!=null&&(r.attrParams=s.attrs.reduce((d,S)=>{const i=S.type;let g;switch(S.type){case"string":g=B0(t.attr,S.tfName,S.defaultValue),g===void 0&&S.tfDeprecatedName&&(g=B0(t.attr,S.tfDeprecatedName,S.defaultValue));break;case"string[]":g=X0(t.attr,S.tfName,S.defaultValue),g===void 0&&S.tfDeprecatedName&&(g=X0(t.attr,S.tfDeprecatedName,S.defaultValue));break;case"number":g=z0(t.attr,S.tfName,S.defaultValue||0),g===void 0&&S.tfDeprecatedName&&(g=z0(t.attr,S.tfDeprecatedName,S.defaultValue));break;case"number[]":g=W0(t.attr,S.tfName,S.defaultValue),g===void 0&&S.tfDeprecatedName&&(g=W0(t.attr,S.tfDeprecatedName,S.defaultValue));break;case"bool":g=k0(t.attr,S.tfName,S.defaultValue),g===void 0&&S.tfDeprecatedName&&(g=k0(t.attr,S.tfDeprecatedName,S.defaultValue));break;case"bool[]":g=Y0(t.attr,S.tfName,S.defaultValue),g===void 0&&S.tfDeprecatedName&&(g=Y0(t.attr,S.tfDeprecatedName,S.defaultValue));break;case"shape":g=U0(t.attr,S.tfName,S.defaultValue),g===void 0&&S.tfDeprecatedName&&(g=U0(t.attr,S.tfDeprecatedName,S.defaultValue));break;case"shape[]":g=H0(t.attr,S.tfName,S.defaultValue),g===void 0&&S.tfDeprecatedName&&(g=H0(t.attr,S.tfDeprecatedName,S.defaultValue));break;case"dtype":g=V0(t.attr,S.tfName,S.defaultValue),g===void 0&&S.tfDeprecatedName&&(g=V0(t.attr,S.tfDeprecatedName,S.defaultValue));break;case"dtype[]":g=G0(t.attr,S.tfName,S.defaultValue),g===void 0&&S.tfDeprecatedName&&(g=G0(t.attr,S.tfDeprecatedName,S.defaultValue));break;case"func":g=mw(t.attr,S.tfName,S.defaultValue),g===void 0&&S.tfDeprecatedName&&(g=mw(t.attr,S.tfDeprecatedName,S.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${S.type} for op: ${t.op}`)}return d[S.name]={value:g,type:i},d},{})),r}mapFunction(t){const s=t.nodeDef,r=[],d=[];let S={};s!=null&&(S=s.reduce((u,o)=>(u[o.name]=this.mapNode(o),o.op==="Const"&&d.push(u[o.name]),u),{}));const i=[],g=[];t.signature.inputArg.forEach(u=>{const[o]=ar(u.name),c={name:o,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:Q2(u.type),type:"dtype"}},children:[]};c.signatureKey=u.name,i.push(c),S[o]=c}),Object.keys(S).forEach(u=>{const o=S[u];o.inputNames.forEach((c,l)=>{const[f,,m]=ar(c),h=S[f];if(h.outputs!=null){const p=h.outputs.indexOf(m);if(p!==-1){const y=`${f}:${p}`;o.inputNames[l]=y}}o.inputs.push(h),h.children.push(o)})});const a=t.ret;t.signature.outputArg.forEach(u=>{const[o,c]=ar(a[u.name]),l=S[o];l!=null&&(l.defaultOutput=c,g.push(l))});const v=this.mapArgsToSignature(t);return{nodes:S,inputs:i,outputs:g,weights:d,placeholders:r,signature:v}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((s,r)=>(s[r.name]=this.mapArgToTensorInfo(r),s),{}),outputs:t.signature.outputArg.reduce((s,r)=>(s[r.name]=this.mapArgToTensorInfo(r,t.ret),s),{})}}mapArgToTensorInfo(t,s){let r=t.name;return s!=null&&(r=s[r]),{name:r,dtype:t.type}}}function ZX(n){const t=dt().global;if(typeof t.atob<"u")return t.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function AP(n,t){const s=Array.isArray(n)?String.fromCharCode.apply(null,n):ZX(n);return t?s:s.toLowerCase()}function B0(n,t,s,r=!1){const d=n[t];return d!=null?AP(d.s,r):s}function k0(n,t,s){const r=n[t];return r?r.b:s}function z0(n,t,s){const r=n[t]||{},d=r.i!=null?r.i:r.f!=null?r.f:s;return typeof d=="number"?d:parseInt(d,10)}function Q2(n){switch(typeof n=="string"&&(n=ks[n]),n){case ks.DT_FLOAT:case ks.DT_HALF:return"float32";case ks.DT_INT32:case ks.DT_INT64:case ks.DT_INT8:case ks.DT_UINT8:return"int32";case ks.DT_BOOL:return"bool";case ks.DT_DOUBLE:return"float32";case ks.DT_STRING:return"string";default:return null}}function mw(n,t,s){const r=n[t];return r&&r.func?r.func.name:s}function V0(n,t,s){const r=n[t];return r&&r.type?Q2(r.type):s}function G0(n,t,s){const r=n[t];return r&&r.list&&r.list.type?r.list.type.map(d=>Q2(d)):s}function bP(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function U0(n,t,s){const r=n[t];return r&&r.shape?bP(r.shape):s}function W0(n,t,s){const r=n[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(d=>typeof d=="number"?d:parseInt(d,10)):s}function X0(n,t,s,r=!1){const d=n[t];return d&&d.list&&d.list.s?d.list.s.map(S=>AP(S,r)):s}function H0(n,t,s){const r=n[t];return r&&r.list&&r.list.shape?r.list.shape.map(d=>bP(d)):s}function Y0(n,t,s){const r=n[t];return r&&r.list&&r.list.b?r.list.b:s}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QX{constructor(t,s,r){this.node=t,this.tensorMap=s,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(d=>this.getInput(d)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((d,S)=>(d[S]=this.getAttr(S),d),{}))}getInput(t){return gn(t,this.tensorMap,this.context)}getAttr(t,s){const r=this.node.rawAttrs[t];if(r.tensor!=null)return gn(t,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return z0(this.node.rawAttrs,t,s);if(r.s!=null)return B0(this.node.rawAttrs,t,s);if(r.b!=null)return k0(this.node.rawAttrs,t,s);if(r.shape!=null)return U0(this.node.rawAttrs,t,s);if(r.type!=null)return V0(this.node.rawAttrs,t,s);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return W0(this.node.rawAttrs,t,s);if(r.list.s!=null)return X0(this.node.rawAttrs,t,s);if(r.list.shape!=null)return H0(this.node.rawAttrs,t,s);if(r.list.b!=null)return Y0(this.node.rawAttrs,t,s);if(r.list.type!=null)return G0(this.node.rawAttrs,t,s)}return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wn=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:Zb,abs:Je,acos:cI,acosh:fI,add:St,addN:T$,all:f1,any:Cd,argMax:Cl,argMin:dI,asin:pI,asinh:mI,atan:vI,atan2:gI,atanh:xI,avgPool:fm,avgPool3d:yI,basicLSTMCell:W$,batchNorm:yc,batchNorm2d:TI,batchNorm3d:SI,batchNorm4d:CI,batchToSpaceND:dm,bincount:wI,bitwiseAnd:q$,booleanMaskAsync:M8,broadcastArgs:tB,broadcastTo:ll,buffer:jt,cast:Nt,ceil:EI,clipByValue:ms,clone:dr,complex:ea,concat:Ze,concat1d:AI,concat2d:bI,concat3d:II,concat4d:RI,conv1d:p1,conv2d:sa,conv2dTranspose:v1,conv3d:NI,conv3dTranspose:FI,cos:pm,cosh:g1,cosineWindow:j1,cumprod:wd,cumsum:x1,denseBincount:C0,depthToSpace:DI,depthwiseConv2d:Tc,diag:wB,dilation2d:OI,div:$t,divNoNan:LI,dot:MI,dropout:lR,einsum:ko,elu:Sc,enclosingPowerOfTwo:uR,ensureShape:OB,equal:Ei,erf:$I,euclideanNorm:zI,exp:Rs,expandDims:zn,expm1:VI,eye:T1,fft:Im,fill:Vl,floor:wc,floorDiv:c1,fused:s7,gather:Ec,gatherND:H8,greater:Ts,greaterEqual:ya,ifft:ah,imag:mm,image:zi,inTopKAsync:Z8,irfft:U1,isFinite:GI,isInf:UI,isNaN:WI,leakyRelu:vm,less:sh,lessEqual:po,linalg:gR,linspace:r9,localResponseNormalization:XI,log:Ns,log1p:gm,logSigmoid:HI,logSoftmax:S1,logSumExp:C1,logicalAnd:Zi,logicalNot:xm,logicalOr:w1,logicalXor:YI,losses:Lz,lowerBound:S9,matMul:qt,max:ei,maxPool:ym,maxPool3d:KI,maxPoolWithArgmax:A9,maximum:Ar,mean:$e,meshgrid:R9,min:nh,minimum:no,mirrorPad:jI,mod:ZI,moments:Tm,movingAverage:k8,mul:rt,multiRNNCell:L9,multinomial:$9,neg:Ee,norm:Cc,notEqual:Al,oneHot:A1,ones:Es,onesLike:Ps,op:st,outerProduct:G9,pad:Ta,pad1d:X9,pad2d:Y9,pad3d:j9,pad4d:Q9,pool:QI,pow:ia,prelu:Cm,print:uI,prod:JI,raggedGather:ik,raggedRange:ak,raggedTensorToTensor:lk,rand:hk,randomGamma:Pk,randomNormal:O1,randomStandardNormal:Ok,randomUniform:vo,randomUniformInt:$k,range:bl,real:ih,reciprocal:_I,relu:Ji,relu6:L1,reshape:at,reverse:ri,reverse1d:Wk,reverse2d:Hk,reverse3d:Kk,reverse4d:Zk,rfft:Rm,round:M1,rsqrt:$1,scalar:Vt,scatterND:V8,searchSorted:E1,selu:B1,separableConv2d:k1,setdiff1dAsync:e8,sigmoid:Hi,sign:tR,signal:Oz,sin:z1,sinh:V1,slice:ne,slice1d:Em,slice2d:G1,slice3d:Am,slice4d:rh,softmax:bm,softplus:Gl,spaceToBatchND:Sm,sparse:Mz,sparseToDense:W8,spectral:Dz,split:ds,sqrt:Fn,square:me,squaredDifference:W1,squeeze:go,stack:Fs,step:Ul,stridedSlice:eR,string:$z,sub:Ft,sum:Ot,tan:nR,tanh:wl,tensor:ti,tensor1d:Gn,tensor2d:Mu,tensor3d:S8,tensor4d:C8,tensor5d:w8,tensor6d:E8,tensorScatterUpdate:b8,tile:Zs,topk:iR,transpose:se,truncatedNormal:H1,unique:rR,unsortedSegmentSum:Y1,unstack:ai,upperBound:D8,variable:aR,where:Rn,whereAsync:oR,zeros:_e,zerosLike:ie},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JX=(n,t,s,r=wn)=>{switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(j("a",n,t,s),j("b",n,t,s))];case"AddN":return[r.addN(j("tensors",n,t,s))];case"FloorMod":case"Mod":return[r.mod(j("a",n,t,s),j("b",n,t,s))];case"Mul":return[r.mul(j("a",n,t,s),j("b",n,t,s))];case"RealDiv":case"Div":return[r.div(j("a",n,t,s),j("b",n,t,s))];case"DivNoNan":return[r.divNoNan(j("a",n,t,s),j("b",n,t,s))];case"FloorDiv":return[r.floorDiv(j("a",n,t,s),j("b",n,t,s))];case"Sub":return[r.sub(j("a",n,t,s),j("b",n,t,s))];case"Minimum":return[r.minimum(j("a",n,t,s),j("b",n,t,s))];case"Maximum":return[r.maximum(j("a",n,t,s),j("b",n,t,s))];case"Pow":return[r.pow(j("a",n,t,s),j("b",n,t,s))];case"SquaredDifference":return[r.squaredDifference(j("a",n,t,s),j("b",n,t,s))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qX=(n,t,s,r=wn)=>{switch(n.op){case"Abs":case"ComplexAbs":return[r.abs(j("x",n,t,s))];case"Acos":return[r.acos(j("x",n,t,s))];case"Acosh":return[r.acosh(j("x",n,t,s))];case"Asin":return[r.asin(j("x",n,t,s))];case"Asinh":return[r.asinh(j("x",n,t,s))];case"Atan":return[r.atan(j("x",n,t,s))];case"Atan2":return[r.atan2(j("x",n,t,s),j("y",n,t,s))];case"Atanh":return[r.atanh(j("x",n,t,s))];case"Ceil":return[r.ceil(j("x",n,t,s))];case"Complex":return[r.complex(j("real",n,t,s),j("imag",n,t,s))];case"Cos":return[r.cos(j("x",n,t,s))];case"Cosh":return[r.cosh(j("x",n,t,s))];case"Elu":return[r.elu(j("x",n,t,s))];case"Erf":return[r.erf(j("x",n,t,s))];case"Exp":return[r.exp(j("x",n,t,s))];case"Expm1":return[r.expm1(j("x",n,t,s))];case"Floor":return[r.floor(j("x",n,t,s))];case"Log":return[r.log(j("x",n,t,s))];case"Log1p":return[r.log1p(j("x",n,t,s))];case"Imag":return[r.imag(j("x",n,t,s))];case"Neg":return[r.neg(j("x",n,t,s))];case"Reciprocal":return[r.reciprocal(j("x",n,t,s))];case"Real":return[r.real(j("x",n,t,s))];case"Relu":return[r.relu(j("x",n,t,s))];case"Round":return[r.round(j("x",n,t,s))];case"Selu":return[r.selu(j("x",n,t,s))];case"Sigmoid":return[r.sigmoid(j("x",n,t,s))];case"Sin":return[r.sin(j("x",n,t,s))];case"Sign":return[r.sign(j("x",n,t,s))];case"Sinh":return[r.sinh(j("x",n,t,s))];case"Softplus":return[r.softplus(j("x",n,t,s))];case"Sqrt":return[r.sqrt(j("x",n,t,s))];case"Square":return[r.square(j("x",n,t,s))];case"Tanh":return[r.tanh(j("x",n,t,s))];case"Tan":return[r.tan(j("x",n,t,s))];case"ClipByValue":return[r.clipByValue(j("x",n,t,s),j("clipValueMin",n,t,s),j("clipValueMax",n,t,s))];case"Relu6":return[r.relu6(j("x",n,t,s))];case"Rsqrt":return[r.rsqrt(gn(n.inputNames[0],t,s))];case"LeakyRelu":return[r.leakyRelu(j("x",n,t,s),j("alpha",n,t,s))];case"Prelu":return[r.prelu(j("x",n,t,s),j("alpha",n,t,s))];case"IsNan":return[r.isNaN(gn(n.inputNames[0],t,s))];case"IsInf":return[r.isInf(gn(n.inputNames[0],t,s))];case"IsFinite":return[r.isFinite(gn(n.inputNames[0],t,s))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vs(n,t,s=""){if(!(typeof n=="number"||typeof t=="number")){q(n.length===t.length,()=>s+` Shapes ${n} and ${t} must match`);for(let r=0;r<n.length;r++){const d=n[r],S=t[r];q(d<0||S<0||d===S,()=>s+` Shapes ${n} and ${t} must match`)}}}function vw(n){return!(typeof n=="number"||n.some(t=>t<0))}function mu(n,t,s){let r=K0(n,s);const d=!vw(r);if(d&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(d&&t.forEach(S=>{r=K0(S.shape,r)}),!vw(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function K0(n,t){if(typeof n=="number")return t;if(typeof t=="number")return n;if(n.length!==t.length)throw new Error(`Incompatible ranks during merge: ${n} vs. ${t}`);const s=[];for(let r=0;r<n.length;++r){const d=n[r],S=t[r];if(d>=0&&S>=0&&d!==S)throw new Error(`Incompatible shape during merge: ${n} vs. ${t}`);s[r]=d>=0?d:S}return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _X{constructor(t,s,r,d,S,i,g){this.name=t,this.dtype=s,this.maxSize=r,this.elementShape=d,this.identicalElementShapes=S,this.dynamicSize=i,this.clearAfterRead=g,this.tensors=[],this.closed_=!1,this.idTensor=Vt(0),fn(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(s=>{(t==null||!t.has(s.tensor.id))&&s.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const s=this.tensors[t];if(s.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(s.cleared=!0),s.read=!0,s.tensor}readMany(t){return t.map(s=>this.read(s))}write(t,s){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[t]||{};if(s.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${s.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=s.shape),Vs(this.elementShape,s.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);r.tensor=s,fn(s),r.written=!0,this.tensors[t]=r}writeMany(t,s){if(t.length!==s.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${s.length}.`);t.forEach((r,d)=>this.write(r,s[d]))}gather(t,s){if(s&&s!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${s}`);if(t)t=t.slice(0,this.size());else{t=[];for(let d=0;d<this.size();d++)t.push(d)}if(t.length===0)return ti([],[0].concat(this.elementShape));const r=this.readMany(t);return Vs(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Fs(r,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return ti([],[0].concat(this.elementShape));const s=[];for(let d=0;d<this.size();d++)s.push(d);const r=this.readMany(s);return Vs(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Ze(r,0)}scatter(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);if(t.length!==s.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${s.shape[0]}`);const r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,ai(s,0))}split(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);let r=0;const d=t.map(e=>(r+=e,r));if(r!==s.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${s.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const S=r===0?0:s.size/r,i=[];ft(()=>{s=at(s,[1,r,S]);for(let e=0;e<t.length;++e){const v=[0,e===0?0:d[e-1],0],u=[1,t[e],S];i[e]=at(ne(s,v,u),this.elementShape)}return i});const g=[];for(let e=0;e<t.length;e++)g[e]=e;this.writeMany(g,i)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ro{get id(){return this.idTensor.id}constructor(t,s,r,d=-1){this.tensors=t,this.elementShape=s,this.elementDtype=r,t!=null&&t.forEach(S=>{if(r!==S.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${S.dtype}`);Vs(s,S.shape,"TensorList shape mismatch: "),fn(S)}),this.idTensor=Vt(0),this.maxNumElements=d,fn(this.idTensor)}copy(){return new ro([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(s=>{(t==null||!t.has(s.id))&&s.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,s,r=-1){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Vs(t,this.elementShape,"TensorList shape mismatch: ");const d=mu(this.elementShape,this.tensors,t);return ft(()=>{const S=this.tensors.map(i=>at(i,d));return Fs(S,0)})}popBack(t,s){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=mu(this.elementShape,this.tensors,t),d=this.tensors.pop();return d.kept=!1,Vs(d.shape,t,"TensorList shape mismatch: "),at(d,r)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(Vs(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");fn(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);const s=new ro([],this.elementShape,this.elementDtype,this.maxNumElements);s.tensors.length=t;for(let r=0;r<Math.min(this.tensors.length,t);++r)s.tensors[r]=this.tensors[r];return s}getItem(t,s,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);Vs(this.tensors[t].shape,s,"TensorList shape mismatch: ");const d=mu(this.elementShape,this.tensors,s);return at(this.tensors[t],d)}setItem(t,s){if(s.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);Vs(this.elementShape,s.shape,"TensorList shape mismatch: "),fn(s),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=s}gather(t,s,r){if(s!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s}, but list elements ${this.elementDtype}`);Vs(this.elementShape,r,"TensorList shape mismatch: "),t=t.slice(0,this.size());const d=mu(this.elementShape,this.tensors,r);return t.length===0?ti([],[0].concat(d)):ft(()=>{const S=t.map(i=>at(this.tensors[i],d));return Fs(S,0)})}concat(t,s){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);Vs(this.elementShape,s,"TensorList shape mismatch: ");const r=mu(this.elementShape,this.tensors,s);return this.size()===0?ti([],[0].concat(r)):ft(()=>{const d=this.tensors.map(S=>at(S,r));return Ze(d,0)})}}function tH(n,t,s){const r=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==s)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${s}`);const d=n.shape.slice(1);Vs(d,t,"TensorList shape mismatch: ");const S=ai(n);return new ro(S,t,r)}function eH(n,t,s,r){return new ro([],n,t,r)}function nH(n,t,s,r){if(t.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${n.shape[0]}`);const d=Math.max(...t);if(r!=null&&r!==-1&&d>=r)throw new Error(`Max index must be < array size (${d}  vs. ${r})`);const S=new ro([],s,n.dtype,r),i=ai(n,0);return t.forEach((g,e)=>{S.setItem(g,i[e])}),S}function sH(n,t,s){let r=0;const d=t.map(v=>(r+=v,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);const S=n.shape.slice(1),i=K0(S,s),g=r===0?0:n.size/r,e=ft(()=>{const v=[];n=at(n,[1,r,g]);for(let u=0;u<t.length;++u){const c=[0,u===0?0:d[u-1],0],l=[1,t[u],g];v[u]=at(ne(n,c,l),i)}return n.dispose(),v}),a=new ro([],s,n.dtype,t.length);for(let v=0;v<e.length;v++)a.setItem(v,e[v]);return a}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iH=async(n,t,s)=>{switch(n.op){case"If":case"StatelessIf":{const r=j("thenBranch",n,t,s),d=j("elseBranch",n,t,s),S=j("cond",n,t,s),i=j("args",n,t,s);return(await S.data())[0]?s.functionMap[r].executeFunctionAsync(i,s.tensorArrayMap,s.tensorListMap):s.functionMap[d].executeFunctionAsync(i,s.tensorArrayMap,s.tensorListMap)}case"While":case"StatelessWhile":{const r=j("body",n,t,s),d=j("cond",n,t,s),S=j("args",n,t,s),i=await s.functionMap[d].executeFunctionAsync(S,s.tensorArrayMap,s.tensorListMap),g=S.map(v=>v.id);let e=await i[0].data();i.forEach(v=>{!v.kept&&g.indexOf(v.id)===-1&&v.dispose()});let a=S;for(;e[0];){const v=a;a=await s.functionMap[r].executeFunctionAsync(a,s.tensorArrayMap,s.tensorListMap);const u=a.map(c=>c.id);v.forEach(c=>{!c.kept&&g.indexOf(c.id)===-1&&u.indexOf(c.id)===-1&&c.dispose()});const o=await s.functionMap[d].executeFunctionAsync(a,s.tensorArrayMap,s.tensorListMap);e=await o[0].data(),o.forEach(c=>{!c.kept&&g.indexOf(c.id)===-1&&u.indexOf(c.id)===-1&&c.dispose()})}return a}case"LoopCond":{const r=j("pred",n,t,s);return[or(r)]}case"Switch":{const r=j("pred",n,t,s);let d=j("data",n,t,s);return d.kept||(d=or(d)),(await r.data())[0]?[void 0,d]:[d,void 0]}case"Merge":{const r=n.inputNames.find(d=>gn(d,t,s)!==void 0);if(r){const d=gn(r,t,s);return[or(d)]}return}case"Enter":{const r=j("frameName",n,t,s),d=j("tensor",n,t,s);return s.enterFrame(r),[or(d)]}case"Exit":{const r=j("tensor",n,t,s);return s.exitFrame(),[or(r)]}case"NextIteration":{const r=j("tensor",n,t,s);return s.nextIteration(),[or(r)]}case"TensorArrayV3":{const r=j("size",n,t,s),d=j("dtype",n,t,s),S=j("elementShape",n,t,s),i=j("dynamicSize",n,t,s),g=j("clearAfterRead",n,t,s),e=j("identicalElementShapes",n,t,s),a=j("name",n,t,s),v=new _X(a,d,r,S,e,i,g);return s.addTensorArray(v),[v.idTensor,Vt(1)]}case"TensorArrayWriteV3":{const r=j("tensorArrayId",n,t,s),d=j("index",n,t,s),S=j("tensor",n,t,s),i=s.getTensorArray(r.id);return i.write(d,S),[i.idTensor]}case"TensorArrayReadV3":{const r=j("tensorArrayId",n,t,s),d=j("index",n,t,s);return[s.getTensorArray(r.id).read(d)]}case"TensorArrayGatherV3":{const r=j("tensorArrayId",n,t,s),d=j("indices",n,t,s),S=j("dtype",n,t,s);return[s.getTensorArray(r.id).gather(d,S)]}case"TensorArrayScatterV3":{const r=j("tensorArrayId",n,t,s),d=j("indices",n,t,s),S=j("tensor",n,t,s),i=s.getTensorArray(r.id);return i.scatter(d,S),[i.idTensor]}case"TensorArrayConcatV3":{const r=j("tensorArrayId",n,t,s),d=s.getTensorArray(r.id),S=j("dtype",n,t,s);return[d.concat(S)]}case"TensorArraySplitV3":{const r=j("tensorArrayId",n,t,s),d=j("tensor",n,t,s),S=j("lengths",n,t,s),i=s.getTensorArray(r.id);return i.split(S,d),[i.idTensor]}case"TensorArraySizeV3":{const r=j("tensorArrayId",n,t,s),d=s.getTensorArray(r.id);return[Vt(d.size(),"int32")]}case"TensorArrayCloseV3":{const r=j("tensorArrayId",n,t,s),d=s.getTensorArray(r.id);return d.clearAndClose(),[d.idTensor]}case"TensorListSetItem":{const r=j("tensorListId",n,t,s),d=j("index",n,t,s),S=j("tensor",n,t,s),i=s.getTensorList(r.id);return i.setItem(d,S),[i.idTensor]}case"TensorListGetItem":{const r=j("tensorListId",n,t,s),d=j("index",n,t,s),S=j("elementShape",n,t,s),i=j("elementDType",n,t,s);return[s.getTensorList(r.id).getItem(d,S,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=j("indices",n,t,s),d=j("tensor",n,t,s),S=j("elementShape",n,t,s),i=j("numElements",n,t,s),g=nH(d,r,S,i);return s.addTensorList(g),[g.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=j("elementShape",n,t,s),d=j("elementDType",n,t,s);let S;n.op==="TensorListReserve"?S="numElements":S="maxNumElements";const i=j(S,n,t,s),g=n.op==="TensorListReserve"?-1:i,e=eH(r,d,i,g);return s.addTensorList(e),[e.idTensor]}case"TensorListGather":{const r=j("tensorListId",n,t,s),d=j("indices",n,t,s),S=j("elementShape",n,t,s),i=j("elementDType",n,t,s);return[s.getTensorList(r.id).gather(d,i,S)]}case"TensorListStack":{const r=j("tensorListId",n,t,s),d=j("elementShape",n,t,s),S=j("elementDType",n,t,s),i=j("numElements",n,t,s);return[s.getTensorList(r.id).stack(d,S,i)]}case"TensorListFromTensor":{const r=j("tensor",n,t,s),d=j("elementShape",n,t,s),S=j("elementDType",n,t,s),i=tH(r,d,S);return s.addTensorList(i),[i.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=j("tensorListId",n,t,s),d=s.getTensorList(r.id),S=j("dtype",n,t,s),i=j("elementShape",n,t,s);return[d.concat(S,i)]}case"TensorListPushBack":{const r=j("tensorListId",n,t,s),d=j("tensor",n,t,s),S=s.getTensorList(r.id);return S.pushBack(d),[S.idTensor]}case"TensorListPopBack":{const r=j("tensorListId",n,t,s),d=j("elementShape",n,t,s),S=j("elementDType",n,t,s);return[s.getTensorList(r.id).popBack(d,S)]}case"TensorListSplit":{const r=j("tensor",n,t,s),d=j("elementShape",n,t,s),S=j("lengths",n,t,s),i=sH(r,S,d);return s.addTensorList(i),[i.idTensor]}case"TensorListLength":{const r=j("tensorListId",n,t,s),d=s.getTensorList(r.id);return[Vt(d.size(),"int32")]}case"TensorListResize":{const r=j("tensorListId",n,t,s),d=j("size",n,t,s),i=s.getTensorList(r.id).resize(d);return s.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gw(n,t,s){const[r,d]=j("fusedOps",n,t,s),S=r==="biasadd",i=!S,g=d==="prelu",e=r==="fusedbatchnorm",a=j("numArgs",n,t,s);if(S){if(g&&a!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!g&&S&&a!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(e)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const v=j("strides",n,t,s),u=zf(n,t,s),o=j("dataFormat",n,t,s).toUpperCase(),c=j("dilations",n,t,s);let[l,f]=j("args",n,t,s);i&&(f=l,l=void 0);const m=j("leakyreluAlpha",n,t,s);return{stride:v,pad:u,dataFormat:o,dilations:c,biasArg:l,preluArg:f,activationFunc:d,leakyreluAlpha:m}}const rH=(n,t,s,r=wn)=>{switch(n.op){case"Conv1D":{const d=j("stride",n,t,s),S=j("pad",n,t,s),i=j("dataFormat",n,t,s).toUpperCase(),g=j("dilation",n,t,s);return[r.conv1d(j("x",n,t,s),j("filter",n,t,s),d,S,i,g)]}case"Conv2D":{const d=j("strides",n,t,s),S=zf(n,t,s),i=j("dataFormat",n,t,s).toUpperCase(),g=j("dilations",n,t,s);return[r.conv2d(j("x",n,t,s),j("filter",n,t,s),[d[1],d[2]],S,i,[g[1],g[2]])]}case"_FusedConv2D":{const{stride:d,pad:S,dataFormat:i,dilations:g,biasArg:e,preluArg:a,activationFunc:v,leakyreluAlpha:u}=gw(n,t,s);return[r.fused.conv2d({x:j("x",n,t,s),filter:j("filter",n,t,s),strides:[d[1],d[2]],pad:S,dataFormat:i,dilations:[g[1],g[2]],bias:e,activation:v,preluActivationWeights:a,leakyreluAlpha:u})]}case"FusedDepthwiseConv2dNative":{const{stride:d,pad:S,dataFormat:i,dilations:g,biasArg:e,preluArg:a,activationFunc:v,leakyreluAlpha:u}=gw(n,t,s);return[r.fused.depthwiseConv2d({x:j("x",n,t,s),filter:j("filter",n,t,s),strides:[d[1],d[2]],pad:S,dataFormat:i,dilations:[g[1],g[2]],bias:e,activation:v,preluActivationWeights:a,leakyreluAlpha:u})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const d=j("outputShape",n,t,s),S=j("strides",n,t,s),i=zf(n,t,s);return[r.conv2dTranspose(j("x",n,t,s),j("filter",n,t,s),d,[S[1],S[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const d=j("strides",n,t,s),S=zf(n,t,s),i=j("dilations",n,t,s),g=j("dataFormat",n,t,s).toUpperCase();return[r.depthwiseConv2d(j("input",n,t,s),j("filter",n,t,s),[d[1],d[2]],S,g,[i[1],i[2]])]}case"Conv3D":{const d=j("strides",n,t,s),S=j("pad",n,t,s),i=j("dataFormat",n,t,s).toUpperCase(),g=j("dilations",n,t,s);return[r.conv3d(j("x",n,t,s),j("filter",n,t,s),[d[1],d[2],d[3]],S,i,[g[1],g[2],g[3]])]}case"AvgPool":{const d=j("strides",n,t,s),S=j("pad",n,t,s),i=j("kernelSize",n,t,s);return[r.avgPool(j("x",n,t,s),[i[1],i[2]],[d[1],d[2]],S)]}case"MaxPool":{const d=j("strides",n,t,s),S=j("pad",n,t,s),i=j("kernelSize",n,t,s);return[r.maxPool(j("x",n,t,s),[i[1],i[2]],[d[1],d[2]],S)]}case"MaxPoolWithArgmax":{const d=j("strides",n,t,s),S=j("pad",n,t,s),i=j("kernelSize",n,t,s),g=j("includeBatchInIndex",n,t,s),{result:e,indexes:a}=r.maxPoolWithArgmax(j("x",n,t,s),[i[1],i[2]],[d[1],d[2]],S,g);return[e,a]}case"AvgPool3D":{const d=j("strides",n,t,s),S=j("pad",n,t,s),i=j("kernelSize",n,t,s);return[r.avgPool3d(j("x",n,t,s),[i[1],i[2],i[3]],[d[1],d[2],d[3]],S)]}case"MaxPool3D":{const d=j("strides",n,t,s),S=j("pad",n,t,s),i=j("kernelSize",n,t,s);return[r.maxPool3d(j("x",n,t,s),[i[1],i[2],i[3]],[d[1],d[2],d[3]],S)]}case"Dilation2D":{const d=j("strides",n,t,s),S=j("pad",n,t,s),i=j("dilations",n,t,s),g=d[1],e=d[2],a=i[1],v=i[2];return[r.dilation2d(j("x",n,t,s),j("filter",n,t,s),[g,e],S,[a,v],"NHWC")]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aH=(n,t,s,r=wn)=>{switch(n.op){case"Fill":{const d=j("shape",n,t,s),S=j("dtype",n,t,s),i=j("value",n,t,s);return[r.fill(d,i,S)]}case"LinSpace":{const d=j("start",n,t,s),S=j("stop",n,t,s),i=j("num",n,t,s);return[r.linspace(d,S,i)]}case"Multinomial":{const d=j("logits",n,t,s),S=j("numSamples",n,t,s),i=j("seed",n,t,s);return[r.multinomial(d,S,i)]}case"OneHot":{const d=j("indices",n,t,s),S=j("depth",n,t,s),i=j("onValue",n,t,s),g=j("offValue",n,t,s),e=j("dtype",n,t,s);return[r.oneHot(d,S,i,g,e)]}case"Ones":return[r.ones(j("shape",n,t,s),j("dtype",n,t,s))];case"OnesLike":return[r.onesLike(j("x",n,t,s))];case"RandomStandardNormal":return[r.randomStandardNormal(j("shape",n,t,s),j("dtype",n,t,s),j("seed",n,t,s))];case"RandomUniform":return[r.randomUniform(j("shape",n,t,s),j("minval",n,t,s),j("maxval",n,t,s),j("dtype",n,t,s))];case"RandomUniformInt":return[r.randomUniformInt(j("shape",n,t,s),j("minval",n,t,s),j("maxval",n,t,s),j("seed",n,t,s))];case"Range":{const d=j("start",n,t,s),S=j("stop",n,t,s),i=j("step",n,t,s);return[r.range(d,S,i,j("dtype",n,t,s))]}case"TruncatedNormal":{const d=j("shape",n,t,s),S=j("mean",n,t,s),i=j("stdDev",n,t,s),g=j("seed",n,t,s);return[r.truncatedNormal(d,S,i,j("dtype",n,t,s),g)]}case"Zeros":return[r.zeros(j("shape",n,t,s),j("dtype",n,t,s))];case"ZerosLike":return[r.zerosLike(j("x",n,t,s))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jv(n,t,s){const r=j("boxes",n,t,s),d=j("scores",n,t,s),S=j("maxOutputSize",n,t,s),i=j("iouThreshold",n,t,s),g=j("scoreThreshold",n,t,s),e=j("softNmsSigma",n,t,s);return{boxes:r,scores:d,maxOutputSize:S,iouThreshold:i,scoreThreshold:g,softNmsSigma:e}}const oH=async(n,t,s,r,d=wn)=>{switch(n.op){case"NonMaxSuppressionV5":{const{boxes:S,scores:i,maxOutputSize:g,iouThreshold:e,scoreThreshold:a,softNmsSigma:v}=jv(n,t,s),u=await d.image.nonMaxSuppressionWithScoreAsync(S,i,g,e,a,v);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:S,scores:i,maxOutputSize:g,iouThreshold:e,scoreThreshold:a}=jv(n,t,s),v=j("padToMaxOutputSize",n,t,s),u=await d.image.nonMaxSuppressionPaddedAsync(S,i,g,e,a,v);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:S,scores:i,maxOutputSize:g,iouThreshold:e,scoreThreshold:a}=jv(n,t,s);return[await d.image.nonMaxSuppressionAsync(S,i,g,e,a)]}case"Where":{const S=d.cast(j("condition",n,t,s),"bool"),i=[await d.whereAsync(S)];return S.dispose(),i}case"ListDiff":return d.setdiff1dAsync(j("x",n,t,s),j("y",n,t,s));default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lH=(n,t,s,r=wn)=>{switch(n.op){case"LowerBound":{const d=j("sortedSequence",n,t,s),S=j("values",n,t,s);return[r.lowerBound(d,S)]}case"TopKV2":{const d=j("x",n,t,s),S=j("k",n,t,s),i=j("sorted",n,t,s),g=r.topk(d,S,i);return[g.values,g.indices]}case"UpperBound":{const d=j("sortedSequence",n,t,s),S=j("values",n,t,s);return[r.upperBound(d,S)]}case"Unique":{const d=j("x",n,t,s),S=r.unique(d);return[S.values,S.indices]}case"UniqueV2":{const d=j("x",n,t,s),S=j("axis",n,t,s),i=r.unique(d,S);return[i.values,i.indices]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uH=(n,t,s,r=wn)=>{switch(n.op){case"Const":return t[n.name];case"PlaceholderWithDefault":const d=j("default",n,t,s);return[gn(n.name,t,s)||d];case"Placeholder":return[gn(n.name,t,s)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const v=j("x",n,t,s);return[or(v)]}case"IdentityN":return j("x",n,t,s).map(v=>or(v));case"Snapshot":const S=j("x",n,t,s);return[or(S)];case"Shape":return[r.tensor1d(j("x",n,t,s).shape,"int32")];case"ShapeN":return j("x",n,t,s).map(v=>r.tensor1d(v.shape));case"Size":return[r.scalar(j("x",n,t,s).size,"int32")];case"Rank":return[r.scalar(j("x",n,t,s).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const i=j("x",n,t,s),g=j("data",n,t,s),e=j("message",n,t,s),a=j("summarize",n,t,s);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(e);for(let v=0;v<g.length;v++)console.log(Array.prototype.slice.call(g[v].dataSync()).slice(0,a));return[i];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hH{get id(){return this.handle.id}constructor(t,s){this.keyDType=t,this.valueDType=s,this.handle=Vt(0),this.tensorMap=new Map,fn(this.handle)}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Vt(this.size(),"int32")}async import(t,s){this.checkKeyAndValueTensor(t,s);const r=await t.data();return this.tensorMap.forEach(d=>d.dispose()),this.tensorMap.clear(),ft(()=>{const d=ai(s),S=r.length,i=d.length;q(S===i,()=>`The number of elements doesn't match, keys has ${S} elements, the values has ${i} elements.`);for(let g=0;g<S;g++){const e=r[g],a=d[g];fn(a),this.tensorMap.set(e,a)}return this.handle})}async find(t,s){this.checkKeyAndValueTensor(t,s);const r=await t.data();return ft(()=>{const d=[];for(let S=0;S<r.length;S++){const i=r[S],g=this.findWithDefault(i,s);d.push(g)}return Fs(d)})}findWithDefault(t,s){const r=this.tensorMap.get(t);return r??s}checkKeyAndValueTensor(t,s){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(s.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${s.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cH=async(n,t,s,r)=>{switch(n.op){case"HashTable":case"HashTableV2":{const d=r.getHashTableHandleByName(n.name);if(d!=null)return[d];{const S=j("keyDType",n,t,s),i=j("valueDType",n,t,s),g=new hH(S,i);return r.addHashTable(n.name,g),[g.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const d=j("tableHandle",n,t,s,r),S=j("keys",n,t,s),i=j("values",n,t,s);return[await r.getHashTableById(d.id).import(S,i)]}case"LookupTableFind":case"LookupTableFindV2":{const d=j("tableHandle",n,t,s,r),S=j("keys",n,t,s),i=j("defaultValue",n,t,s);return[await r.getHashTableById(d.id).find(S,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const d=j("tableHandle",n,t,s,r);return[r.getHashTableById(d.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fH=(n,t,s,r=wn)=>{switch(n.op){case"ResizeBilinear":{const d=j("images",n,t,s),S=j("size",n,t,s),i=j("alignCorners",n,t,s),g=j("halfPixelCenters",n,t,s);return[r.image.resizeBilinear(d,[S[0],S[1]],i,g)]}case"ResizeNearestNeighbor":{const d=j("images",n,t,s),S=j("size",n,t,s),i=j("alignCorners",n,t,s),g=j("halfPixelCenters",n,t,s);return[r.image.resizeNearestNeighbor(d,[S[0],S[1]],i,g)]}case"CropAndResize":{const d=j("image",n,t,s),S=j("boxes",n,t,s),i=j("boxInd",n,t,s),g=j("cropSize",n,t,s),e=j("method",n,t,s),a=j("extrapolationValue",n,t,s);return[r.image.cropAndResize(d,S,i,g,e,a)]}case"ImageProjectiveTransformV3":{const d=j("images",n,t,s),S=j("transforms",n,t,s),i=j("outputShape",n,t,s),g=j("fillValue",n,t,s),e=j("interpolation",n,t,s),a=j("fillMode",n,t,s);return[r.image.transform(d,S,e.toLowerCase(),a.toLowerCase(),g,i)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dH=(n,t,s,r=wn)=>{switch(n.op){case"Equal":return[r.equal(j("a",n,t,s),j("b",n,t,s))];case"NotEqual":return[r.notEqual(j("a",n,t,s),j("b",n,t,s))];case"Greater":return[r.greater(j("a",n,t,s),j("b",n,t,s))];case"GreaterEqual":return[r.greaterEqual(j("a",n,t,s),j("b",n,t,s))];case"Less":return[r.less(j("a",n,t,s),j("b",n,t,s))];case"LessEqual":return[r.lessEqual(j("a",n,t,s),j("b",n,t,s))];case"LogicalAnd":return[r.logicalAnd(j("a",n,t,s),j("b",n,t,s))];case"LogicalNot":return[r.logicalNot(j("a",n,t,s))];case"LogicalOr":return[r.logicalOr(j("a",n,t,s),j("b",n,t,s))];case"Select":case"SelectV2":return[r.where(j("condition",n,t,s),j("a",n,t,s),j("b",n,t,s))];case"BitwiseAnd":return[r.bitwiseAnd(j("a",n,t,s),j("b",n,t,s))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pH=(n,t,s,r=wn)=>{switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(j("a",n,t,s),j("b",n,t,s),j("transposeA",n,t,s),j("transposeB",n,t,s))];case"Einsum":return[r.einsum(j("equation",n,t,s),...j("tensors",n,t,s))];case"Transpose":return[r.transpose(j("x",n,t,s),j("perm",n,t,s))];case"_FusedMatMul":const[d,S]=j("fusedOps",n,t,s),i=d==="biasadd",g=S==="prelu",e=j("numArgs",n,t,s),a=j("leakyreluAlpha",n,t,s);if(i){if(g&&e!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!g&&e!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[v,u]=j("args",n,t,s);return[r.fused.matMul({a:j("a",n,t,s),b:j("b",n,t,s),transposeA:j("transposeA",n,t,s),transposeB:j("transposeB",n,t,s),bias:v,activation:S,preluActivationWeights:u,leakyreluAlpha:a})];case"MatrixBandPart":return[r.linalg.bandPart(j("a",n,t,s),j("numLower",n,t,s),j("numUpper",n,t,s))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mH=(n,t,s,r=wn)=>{switch(n.op){case"EuclideanNorm":return[r.euclideanNorm(j("x",n,t,s),j("axis",n,t,s),j("keepDims",n,t,s))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(j("x",n,t,s),j("mean",n,t,s),j("variance",n,t,s),j("offset",n,t,s),j("scale",n,t,s),j("epsilon",n,t,s))];case"FusedBatchNormV3":return[r.batchNorm(j("x",n,t,s),j("mean",n,t,s),j("variance",n,t,s),j("offset",n,t,s),j("scale",n,t,s),j("epsilon",n,t,s))];case"LRN":return[r.localResponseNormalization(j("x",n,t,s),j("radius",n,t,s),j("bias",n,t,s),j("alpha",n,t,s),j("beta",n,t,s))];case"Softmax":return[r.softmax(j("x",n,t,s))];case"LogSoftmax":return[r.logSoftmax(j("x",n,t,s))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vH=(n,t,s,r=wn)=>{switch(n.op){case"RaggedGather":{const{outputNestedSplits:d,outputDenseValues:S}=r.raggedGather(j("paramsNestedSplits",n,t,s),j("paramsDenseValues",n,t,s),j("indices",n,t,s),j("outputRaggedRank",n,t,s));return d.concat(S)}case"RaggedRange":{const{rtNestedSplits:d,rtDenseValues:S}=r.raggedRange(j("starts",n,t,s),j("limits",n,t,s),j("splits",n,t,s));return[d,S]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(j("shape",n,t,s),j("values",n,t,s),j("defaultValue",n,t,s),j("rowPartitionTensors",n,t,s),j("rowPartitionTypes",n,t,s))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gH=(n,t,s,r=wn)=>{switch(n.op){case"Max":{const g=j("axis",n,t,s),e=j("keepDims",n,t,s);return[r.max(j("x",n,t,s),g,e)]}case"Mean":{const g=j("axis",n,t,s),e=j("keepDims",n,t,s);return[r.mean(j("x",n,t,s),g,e)]}case"Min":{const g=j("axis",n,t,s),e=j("keepDims",n,t,s);return[r.min(j("x",n,t,s),g,e)]}case"Sum":{const g=j("axis",n,t,s),e=j("keepDims",n,t,s);return[r.sum(j("x",n,t,s),g,e)]}case"All":{const g=j("axis",n,t,s),e=j("keepDims",n,t,s);return[r.all(j("x",n,t,s),g,e)]}case"Any":{const g=j("axis",n,t,s),e=j("keepDims",n,t,s);return[r.any(j("x",n,t,s),g,e)]}case"ArgMax":{const g=j("axis",n,t,s);return[r.argMax(j("x",n,t,s),g)]}case"ArgMin":{const g=j("axis",n,t,s);return[r.argMin(j("x",n,t,s),g)]}case"Prod":{const g=j("axis",n,t,s),e=j("keepDims",n,t,s);return[r.prod(j("x",n,t,s),g,e)]}case"Cumprod":{const g=j("axis",n,t,s),e=j("exclusive",n,t,s),a=j("reverse",n,t,s);return[r.cumprod(j("x",n,t,s),g,e,a)]}case"Cumsum":{const g=j("axis",n,t,s),e=j("exclusive",n,t,s),a=j("reverse",n,t,s);return[r.cumsum(j("x",n,t,s),g,e,a)]}case"Bincount":const d=j("x",n,t,s),S=j("weights",n,t,s),i=j("size",n,t,s);return[r.bincount(d,S,i)];case"DenseBincount":{const g=j("x",n,t,s),e=j("weights",n,t,s),a=j("size",n,t,s),v=j("binaryOutput",n,t,s);return[r.denseBincount(g,e,a,v)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xH=(n,t,s,r=wn)=>{switch(n.op){case"ConcatV2":case"Concat":{const d=j("n",n,t,s),S=j("axis",n,t,s);let i=j("tensors",n,t,s);return i=i.slice(0,d),[r.concat(i,S)]}case"Gather":{const d=j("x",n,t,s),S=j("indices",n,t,s);return[r.gather(d,r.cast(S,"int32"),0)]}case"GatherV2":{const d=j("axis",n,t,s),S=j("batchDims",n,t,s),i=j("x",n,t,s),g=j("indices",n,t,s);return[r.gather(i,r.cast(g,"int32"),d,S)]}case"Reverse":{const d=j("dims",n,t,s),S=[];for(let g=0;g<d.length;g++)d[g]&&S.push(g);const i=j("x",n,t,s);return[r.reverse(i,S)]}case"ReverseV2":{const d=j("axis",n,t,s),S=j("x",n,t,s);return[r.reverse(S,d)]}case"Slice":{const d=j("begin",n,t,s),S=j("size",n,t,s);return[r.slice(j("x",n,t,s),d,S)]}case"StridedSlice":{const d=j("begin",n,t,s),S=j("end",n,t,s),i=j("strides",n,t,s),g=j("beginMask",n,t,s),e=j("endMask",n,t,s),a=j("ellipsisMask",n,t,s),v=j("newAxisMask",n,t,s),u=j("shrinkAxisMask",n,t,s),o=j("x",n,t,s);return[r.stridedSlice(o,d,S,i,g,e,a,v,u)]}case"Pack":return ft(()=>{const d=j("axis",n,t,s),S=j("tensors",n,t,s),i=S[0].shape,g=r.squeeze(S[0]).shape,e=S.map(a=>{const v=ee(a.shape,i);if(!v&&!ee(r.squeeze(a).shape,g))throw new Error("the input tensors shape does not match");return v?a:r.reshape(a,i)});return[r.stack(e,d)]});case"Unpack":{const d=j("axis",n,t,s),S=j("tensor",n,t,s);return r.unstack(S,d)}case"Tile":{const d=j("reps",n,t,s);return[r.tile(j("x",n,t,s),d)]}case"Split":case"SplitV":{const d=j("axis",n,t,s),S=j("numOrSizeSplits",n,t,s),i=j("x",n,t,s);return r.split(i,S,d)}case"ScatterNd":{const d=j("indices",n,t,s),S=j("values",n,t,s),i=j("shape",n,t,s);return[r.scatterND(d,S,i)]}case"GatherNd":{const d=j("x",n,t,s),S=j("indices",n,t,s);return[r.gatherND(d,S)]}case"SparseToDense":{const d=j("sparseIndices",n,t,s),S=j("outputShape",n,t,s),i=j("sparseValues",n,t,s),g=j("defaultValue",n,t,s);return[r.sparseToDense(d,i,S,i.dtype===g.dtype?g:r.cast(g,i.dtype))]}case"TensorScatterUpdate":{const d=j("indices",n,t,s),S=j("values",n,t,s),i=j("tensor",n,t,s);return[r.tensorScatterUpdate(i,d,S)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yH=(n,t,s,r=wn)=>{switch(n.op){case"SparseFillEmptyRows":{const{outputIndices:d,outputValues:S,emptyRowIndicator:i,reverseIndexMap:g}=r.sparse.sparseFillEmptyRows(j("indices",n,t,s),j("values",n,t,s),j("denseShape",n,t,s),j("defaultValue",n,t,s));return[d,S,i,g]}case"SparseReshape":{const{outputIndices:d,outputShape:S}=r.sparse.sparseReshape(j("inputIndices",n,t,s),j("inputShape",n,t,s),j("newShape",n,t,s));return[d,S]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(j("data",n,t,s),j("indices",n,t,s),j("segmentIds",n,t,s))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(j("data",n,t,s),j("indices",n,t,s),j("segmentIds",n,t,s))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TH=(n,t,s,r=wn)=>{switch(n.op){case"FFT":return[r.fft(j("x",n,t,s))];case"IFFT":return[r.ifft(j("x",n,t,s))];case"RFFT":return[r.rfft(j("x",n,t,s))];case"IRFFT":return[r.irfft(j("x",n,t,s))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SH=(n,t,s,r=wn)=>{switch(n.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(j("input",n,t,s),j("pattern",n,t,s),j("rewrite",n,t,s),j("replaceGlobal",n,t,s))];case"StringNGrams":{const{nGrams:d,nGramsSplits:S}=r.string.stringNGrams(j("data",n,t,s),j("dataSplits",n,t,s),j("separator",n,t,s),j("nGramWidths",n,t,s),j("leftPad",n,t,s),j("rightPad",n,t,s),j("padWidth",n,t,s),j("preserveShortSequences",n,t,s));return[d,S]}case"StringSplit":{const{indices:d,values:S,shape:i}=r.string.stringSplit(j("input",n,t,s),j("delimiter",n,t,s),j("skipEmpty",n,t,s));return[d,S,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(j("input",n,t,s),j("numBuckets",n,t,s))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CH=(n,t,s,r=wn)=>{switch(n.op){case"Cast":return[r.cast(j("x",n,t,s),j("dtype",n,t,s))];case"ExpandDims":{const d=j("axis",n,t,s);return[r.expandDims(j("x",n,t,s),d)]}case"Squeeze":{const d=j("axis",n,t,s);return[r.squeeze(j("x",n,t,s),d)]}case"Reshape":return[r.reshape(j("x",n,t,s),j("shape",n,t,s))];case"EnsureShape":return[r.ensureShape(j("x",n,t,s),j("shape",n,t,s))];case"MirrorPad":return[r.mirrorPad(j("x",n,t,s),j("padding",n,t,s),j("mode",n,t,s))];case"PadV2":case"Pad":return[r.pad(j("x",n,t,s),j("padding",n,t,s),j("constantValue",n,t,s))];case"SpaceToBatchND":{const d=j("blockShape",n,t,s),S=j("paddings",n,t,s);return[r.spaceToBatchND(j("x",n,t,s),d,S)]}case"BatchToSpaceND":{const d=j("blockShape",n,t,s),S=j("crops",n,t,s);return[r.batchToSpaceND(j("x",n,t,s),d,S)]}case"DepthToSpace":{const d=j("blockSize",n,t,s),S=j("dataFormat",n,t,s).toUpperCase();return[r.depthToSpace(j("x",n,t,s),d,S)]}case"BroadcastTo":return[r.broadcastTo(j("x",n,t,s),j("shape",n,t,s))];case"BroadcastArgs":return[r.broadcastArgs(j("s0",n,t,s),j("s1",n,t,s))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xw(n,t,s,r,d=ft){const S=((i,g,e)=>{switch(i.category){case"arithmetic":return d(()=>JX(i,g,e));case"basic_math":return d(()=>qX(i,g,e));case"control":return iH(i,g,e);case"convolution":return d(()=>rH(i,g,e));case"creation":return d(()=>aH(i,g,e));case"dynamic":return oH(i,g,e);case"evaluation":return d(()=>lH(i,g,e));case"image":return d(()=>fH(i,g,e));case"graph":return d(()=>uH(i,g,e));case"logical":return d(()=>dH(i,g,e));case"matrices":return d(()=>pH(i,g,e));case"normalization":return d(()=>mH(i,g,e));case"ragged":return d(()=>vH(i,g,e));case"reduction":return d(()=>gH(i,g,e));case"slice_join":return d(()=>xH(i,g,e));case"sparse":return d(()=>yH(i,g,e));case"spectral":return d(()=>TH(i,g,e));case"string":return d(()=>SH(i,g,e));case"transformation":return d(()=>CH(i,g,e));case"hash_table":return cH(i,g,e,r);case"custom":const a=EP(i.op);if(a&&a.customExecutor)return a.customExecutor(new QX(i,g,e));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(n,t,s);return Ja(S)?S.then(i=>[].concat(i)):[].concat(S)}class yw{constructor(t={},s={},r={},d={},S){this.weightMap=t,this.tensorArrayMap=s,this.tensorListMap=r,this.functionMap=d,this.parseNodeNameCache=S,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,s){return{id:t,frameName:s,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let s=0;s<this.contexts.length-1;s++){const r=this.contexts.slice(0,this.contexts.length-s);t.push(this.contextIdforContexts(r))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(s=>s.id===0&&s.iterationId===0?"":`${s.frameName}-${s.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const s in this.tensorArrayMap)this.tensorArrayMap[s].clearAndClose(t);for(const s in this.tensorListMap)this.tensorListMap[s].clearAndClose(t)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tw(n,t,s,r){const d=new Set,S=[];let i=null,g=null;const e=new Set,a=new Set(Object.keys(n).map(o=>rs(o)[0]));r=r||[];const v=new Set(r.map(o=>rs(o.name)[0])),u=[...t];for(;u.length>0;){const o=u.pop();if((Oa(o)||PH(o)||FH(o))&&i==null&&(i=o,g=i.children.map(c=>c.name).filter(c=>d.has(c))),d.add(o.name),s[o.name]==null&&!a.has(o.name)&&!v.has(o.name)){if(o.inputs.length===0){S.push(o.name);continue}o.inputs.forEach(c=>{e.has(c.name)||(e.add(c.name),u.push(c))})}}return{inputs:n,outputs:t,usedNodes:d,missingInputs:S,dynamicNode:i,syncInputs:g}}function wH(n,t){const{usedNodes:s,inputs:r}=t,d=Object.keys(r).map(m=>rs(m)[0]).map(m=>n.nodes[m]),S=n.initNodes||[],i=m=>s.has(typeof m=="string"?m:m.name);function g(m){return[...new Map(m.map(h=>[h.name,h])).values()]}const e=g([...d,...n.weights,...S]).filter(i),a=g([...e,...Object.values(n.nodes)]).filter(i),v=new Map(a.map(m=>[m.name,m])),u={};for(const m of a){u[m.name]=u[m.name]||0;for(const h of m.children)i(h)||(u[h.name]=Number.POSITIVE_INFINITY),u[h.name]=(u[h.name]||0)+1}const o=Object.entries(u).filter(([,m])=>m===0).map(([m])=>m),c=[...o];for(;o.length>0;){const m=o.pop(),h=v.get(m);for(const p of h.children.filter(i))--u[p.name]===0&&(c.push(p.name),o.push(p.name))}const l=c.map(m=>v.get(m)),f=EH(l,e);return AH(f,e),f}function EH(n,t){const s=new Map(n.map(i=>[i.name,i])),r=t.map(i=>i.name),d=new Set(r);for(;r.length>0;){const i=r.pop(),g=s.get(i);for(const e of g.children)!s.has(e.name)||d.has(e.name)||(d.add(e.name),r.push(e.name))}return n.filter(i=>d.has(i.name))}class vf extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}}function AH(n,t){const s=new Map(n.map((g,e)=>[g.name,e])),r=new Set(t.map(g=>g.name)),d=g=>r.has(typeof g=="string"?g:g.name),S=new Set(n.map(g=>g.name)),i=g=>S.has(typeof g=="string"?g:g.name);for(const g of n){for(const e of g.children.filter(i)){if(!s.has(e.name))throw new vf(`Child ${e.name} of node ${g.name} is unreachable.`);if(s.get(g.name)>s.get(e.name))throw new vf(`Node ${g.name} is scheduled to run after its child ${e.name}.`)}if(!d(g))for(const e of g.inputs){if(!s.has(e.name))throw new vf(`Input ${e.name} of node ${g.name} is unreachable.`);if(s.get(e.name)>s.get(g.name))throw new vf(`Node ${g.name} is scheduled to run before its input ${e.name}.`)}}}function bH(n){const t=new Map(n.map((g,e)=>[g.name,e])),s=Number.MAX_SAFE_INTEGER,r=n.map((g,e)=>Oa(g)?s:e),d=g=>{const e=r[t.get(g.name)];return e??-1},S=n.map((g,e)=>g.children.map(d).reduce((a,v)=>Math.max(a,v),r[e])),i=new Map;for(let g=0;g<n.length;++g){const e=S[g];if(e===s)continue;const a=n[g],v=n[e];i.has(v.name)||i.set(v.name,[]),i.get(v.name).push(a)}return i}const IH=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),RH=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),NH=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Oa(n){return IH.has(n.op)}function PH(n){return RH.has(n.op)}function FH(n){return NH.has(n.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ld{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const s=Object.keys(t).map(r=>t[r].map(d=>d.id));this._weightIds=[].concat(...s),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const s=t.signatureKey||t.name;return t.defaultOutput?`${s}:${t.defaultOutput}`:s})}get functions(){return Object.keys(this._functions).reduce((t,s)=>(t[s]=this._functions[s].signature,t),{})}constructor(t,s){this.graph=t,this.parent=s,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(r=>{this._functionExecutorMap[r]=new Ld(t.functions[r],this)})}getCompilationKey(t,s){const r=t.map(S=>S.name).sort(),d=s.map(S=>S.name).sort();return r.join(this.SEPARATOR)+"--"+d.join(this.SEPARATOR)}compile(t,s){const r=Tw(t,s,this.weightMap,this._initNodes),{missingInputs:d,dynamicNode:S,syncInputs:i}=r;if(S!=null)throw new Error(`This execution contains the node '${S.name}', which has the dynamic op '${S.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(d.length>0){const a=s.map(u=>u.name),v=Object.keys(t);throw new Error(`Cannot compute the outputs [${a}] from the provided inputs [${v}]. Missing the following inputs: [${d}]`)}const g=wH(this.graph,r),e=bH(g);return{orderedNodes:g,nodeLiveUntilMap:e}}cloneAndKeepTensor(t){if(t==null)return null;const s=t.clone();return fn(s),s}cloneTensorList(t){return t?t.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([s,r])=>[s,this.cloneTensorList(r)]))}execute(t,s){this.disposeIntermediateTensors(),t=this.mapInputs(t);const r=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),s=this.mapOutputs(s),this.checkOutputs(s);const d=r.map(o=>this.graph.nodes[rs(o)[0]]),S=s.map(o=>rs(o)[0]),i=new Set(S);let g=S.map(o=>this.graph.nodes[o]);g.length===0&&(g=this._outputs);const e=this.getCompilationKey(d,g);let a=this.compiledMap.get(e);a==null&&(a=this.compile(t,g),this.compiledMap.set(e,a));try{this.keepIntermediateTensors=dt().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(o){this.keepIntermediateTensors=!1,console.warn(o.message)}const v={},u={};return ft(()=>{const o=new yw(this.weightMap,v,u,this.functionExecutorMap,this.parseNodeNameCache),c=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(h=>{const[p,y]=rs(h,o),x=[];x[y]=t[h],c[p]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(x))});const l=this.getFrozenTensorIds(c),{orderedNodes:f,nodeLiveUntilMap:m}=a;for(const h of f){if(c[h.name])continue;const p=xw(h,c,o,this._resourceManager);if(Ja(p))throw new Error(`The execution of the op '${h.op}' returned a promise. Please use model.executeAsync() instead.`);c[h.name]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[h.name]=this.cloneTensorList(p)),this.checkTensorForDisposalWithNodeLiveUntilInfo(h,c,o,l,i,m.get(h.name))}return this.parent==null&&o.dispose(l),s.map(h=>gn(h,c,o))})}getFrozenTensorIds(t){const s=[].concat.apply([],Object.keys(t).map(r=>t[r]).map(r=>r.map(d=>d.id)));return new Set(s)}checkTensorForDisposal(t,s,r,d,S,i,g){if(!(Oa(s)||i.has(t))){for(const e of r[t])e!=null&&(g[e.id]=(g[e.id]||0)+s.children.length);for(const e of s.inputs){if(Oa(e))continue;const a=dw(e.name,r,d);if(a!=null)for(const v of a){if(!v||v.kept||S.has(v.id))continue;const u=g[v.id];u===1?(v.dispose(),delete g[v.id]):u!=null&&g[v.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,s,r,d,S,i){function g(e){return Oa(e)||S.has(e.name)}if(!(Oa(t)||i==null))for(const e of i){if(g(e))continue;const a=dw(e.name,s,r);for(const v of a)!v||v.kept||d.has(v.id)||v.dispose()}}async executeAsync(t,s){return this._executeAsync(t,s)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(const s of t)s&&!s.isDisposed&&s.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(t,s,r=!1,d={},S={}){this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),s=this.mapOutputs(s),this.checkOutputs(s));try{this.keepIntermediateTensors=dt().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(o){this.keepIntermediateTensors=!1,console.warn(o.message)}const i=new yw(this.weightMap,d,S,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const g=await this.executeWithControlFlow(t,i,s,r),e=s.map(o=>gn(o,g,i)),a=e.map(o=>o.id),v=Object.keys(t).map(o=>t[o].id),u=new Set([...a,...v,...this.weightIds]);return Object.values(g).forEach(o=>{o.forEach(c=>{c&&!c.isDisposed&&!u.has(c.id)&&c.dispose()})}),this.parent==null&&i.dispose(u),e}async executeFunctionAsync(t,s,r){const d=t.reduce((S,i,g)=>(S[this.inputs[g].name]=i,S),{});return this._executeAsync(d,this.outputNodes,!0,s,r)}async executeWithControlFlow(t,s,r,d){const S=Object.keys(t),i=S.map(x=>this.graph.nodes[rs(x)[0]]),g=r.map(x=>rs(x)[0]),e=new Set(g);let a=g.map(x=>this.graph.nodes[x]);a.length===0&&(a=this._outputs);const{usedNodes:v,missingInputs:u,dynamicNode:o,syncInputs:c}=Tw(t,a,this.weightMap,this._initNodes),l=[...i,...this.graph.weights,...this._initNodes||[]].map(x=>({node:x,contexts:s.currentContext})),f=Object.assign({},this.weightMap);Object.keys(t).forEach(x=>{const[T,C]=rs(x),E=[];E[C]=t[x],f[T]=E});const m={},h=this.getFrozenTensorIds(f),p={};for(;l.length>0;){const x=this.processStack(i,l,s,f,p,h,e,m,v);await Promise.all(x)}o==null&&!d&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const y=a.filter(x=>!Oa(x)&&!gn(x.name,f,s)).map(x=>x.name);if(y.length>0){let x="";throw o!=null&&(x=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${c}]`),new Error(`Cannot compute the outputs [${y}] from the provided inputs [${S}]. Consider providing the following inputs: [${u}]. ${x}`)}return f}processStack(t,s,r,d,S,i,g,e,a){const v=[];for(;s.length>0;){const u=s.pop();r.currentContext=u.contexts;let o="";if(u.node.op==="Enter"&&j("isConstant",u.node,d,r)&&([o]=ar(u.node.name,r)),d[u.node.name]==null){const c=xw(u.node,d,r,this._resourceManager);o||([o]=ar(u.node.name,r));const l=r.currentContext;Ja(c)?v.push(c.then(f=>(d[o]=f,this.keepIntermediateTensors&&(this.clonedTensorsMap[o]=this.cloneTensorList(f)),r.currentContext=l,this.checkTensorForDisposal(o,u.node,d,r,i,g,e),this.processChildNodes(u.node,s,r,d,S,a),f))):(d[o]=c,this.keepIntermediateTensors&&(this.clonedTensorsMap[o]=this.cloneTensorList(c)),this.checkTensorForDisposal(o,u.node,d,r,i,g,e),this.processChildNodes(u.node,s,r,d,S,a))}else this.processChildNodes(u.node,s,r,d,S,a)}return v}processChildNodes(t,s,r,d,S,i){t.children.forEach(g=>{const[e]=ar(g.name,r);S[e]||!i.has(g.name)||(g.op==="Merge"?g.inputNames.some(a=>!!gn(a,d,r))&&(S[e]=!0,s.push({contexts:r.currentContext,node:g})):g.inputNames.every(a=>!!gn(a,d,r))&&(S[e]=!0,s.push({contexts:r.currentContext,node:g})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(s=>s.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(s=>{const r=t[s],[d]=rs(s),S=this.graph.nodes[d];if(S.attrParams.shape&&S.attrParams.shape.value){const i=S.attrParams.shape.value,g=i.length===r.shape.length&&r.shape.every((e,a)=>i[a]===-1||i[a]===e);q(g,()=>`The shape of dict['${S.name}'] provided in model.execute(dict) must be [${i}], but was [${r.shape}]`)}S.attrParams.dtype&&S.attrParams.dtype.value&&q(r.dtype===S.attrParams.dtype.value,()=>`The dtype of dict['${S.name}'] provided in model.execute(dict) must be ${S.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(t){var s,r;const d={};for(const S in t){const i=(r=(s=this._signature)===null||s===void 0?void 0:s.inputs)===null||r===void 0?void 0:r[S];i!=null?d[i.name]=t[S]:d[S]=t[S]}return d}checkInputs(t){const s=Object.keys(t).filter(r=>{const[d]=rs(r);return this.graph.nodes[d]==null});if(s.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${s}] that are not part of graph`)}mapOutputs(t){return t.map(s=>{var r,d;const S=(d=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||d===void 0?void 0:d[s];return S!=null?S.name:s},{})}checkOutputs(t){t.forEach(s=>{const[r]=rs(s);if(!this.graph.nodes[r])throw new Error(`The output '${s}' is not found in the graph`)})}}class DH{constructor(t={},s={}){this.hashTableNameToHandle=t,this.hashTableMap=s}addHashTable(t,s){this.hashTableNameToHandle[t]=s.handle,this.hashTableMap[s.id]=s}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(const t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(const t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OH="?tfjs-format=file",LH="model.json";class MH{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,s={},r=NR){this.modelUrl=t,this.loadOptions=s,this.version="n/a",this.io=r,s==null&&(this.loadOptions={}),this.resourceManager=new DH}findIOHandler(){const t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{const s=this.io.getLoadHandlers(t,this.loadOptions);if(s.length===0)s.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(s.length>1)throw new Error(`Found more than one (${s.length}) load handlers for URL '${[t]}'`);this.handler=s[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=this.handler.load();return Ja(t)?t.then(s=>this.loadSync(s)):this.loadSync(t)}loadSync(t){this.artifacts=t;const s=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const S=this.artifacts.userDefinedMetadata;S.signature!=null&&(r=S.signature),S.structuredOutputKeys!=null&&(this.structuredOutputKeys=S.structuredOutputKeys)}this.signature=r,this.version=`${s.versions.producer}.${s.versions.minConsumer}`;const d=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Ld(pw.Instance.transformGraph(s,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(d),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){const S=pw.Instance.transformGraph(t.modelInitializer);this.initializer=new Ld(S),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}async save(t,s){if(typeof t=="string"){const r=this.io.getSaveHandlers(t);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${t}'`);t=r[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}addStructuredOutputNames(t){if(this.structuredOutputKeys){const s=t instanceof be?[t]:t,r={};return s.forEach((d,S)=>r[this.structuredOutputKeys[S]]=d),r}return t}predict(t,s){const r=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(t,s){const r=await this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(t){var s;if(!(t instanceof be)&&!Array.isArray(t)){const S=(s=this.signature)===null||s===void 0?void 0:s.inputs;if(S!=null)for(const i in S){const g=S[i];g.resourceId!=null&&(t[i]=this.resourceIdToCapturedInput[g.resourceId])}return t}t=Array.isArray(t)?t:[t];const r=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${t.length} input tensors provided.`);let d=0;return this.inputNodes.reduce((S,i)=>{var g,e,a;const v=(a=(e=(g=this.signature)===null||g===void 0?void 0:g.inputs)===null||e===void 0?void 0:e[i])===null||a===void 0?void 0:a.resourceId;return v!=null?S[i]=this.resourceIdToCapturedInput[v]:S[i]=t[d++],S},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){const s=this.initializerSignature.outputs,r=Object.keys(s);for(let d=0;d<r.length;d++){const S=r[d],i=s[S];this.resourceIdToCapturedInput[i.resourceId]=t[d]}}}execute(t,s){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),s=this.normalizeOutputs(s);const r=this.executor.execute(t,s);return r.length>1?r:r[0]}async executeAsync(t,s){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),s=this.normalizeOutputs(s);const r=await this.executor.executeAsync(t,s);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((s,r)=>(s[r]=[t[r]],s),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Zt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function $H(n,t={},s=NR){if(n==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof n=="string"&&(n=BH(n));const r=new MH(n,t,s);return await r.load(),r}function BH(n){return n.endsWith("/")||(n=n+"/"),`${n}${LH}${OH}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Sw;(function(n){n[n.FAIL=0]="FAIL",n[n.SHORTEST=1]="SHORTEST",n[n.LONGEST=2]="LONGEST"})(Sw||(Sw={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lt(n,t){Array.isArray(n)||(n=[n]),n.forEach(s=>{s!=null&&q(s.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kH=K1;class Km extends _x{nextDataId(){return Km.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Cb(this,Oi())}write(t,s,r){this.firstUse&&(this.firstUse=!1,dt().get("IS_NODE")&&Cs(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const d={id:this.nextDataId()};return this.data.set(d,{values:t,dtype:r,refCount:1}),d}makeTensorInfo(t,s,r){let d;if(s==="string"&&r!=null&&r.length>0&&Sh(r[0])){const S=r.map(i=>Zr(i));d=this.write(S,t,s)}else d=this.write(r,t,s);return{dataId:d,shape:t,dtype:s}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const s=this.data.get(t);s.refCount++}decRef(t){if(this.data.has(t)){const s=this.data.get(t);s.refCount--}}move(t,s,r,d,S){this.data.set(t,{values:s,dtype:d,refCount:S})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:s,complexTensorInfos:r}=this.data.get(t);if(s==="complex64"){const d=this.readSync(r.real.dataId),S=this.readSync(r.imag.dataId);return Tr(d,S)}return Q5(this.data.get(t).values,s)}bufferSync(t){const s=this.readSync(t.dataId);if(t.dtype==="string")try{const r=s.map(d=>ta(d));return jt(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return jt(t.shape,t.dtype,s)}makeOutput(t,s,r){return Oi().makeTensorFromTensorInfo(this.makeTensorInfo(s,r,t),this)}disposeData(t,s=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!s&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(t);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const s=jn();return t(),{kernelMs:jn()-s}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){Lt([t],"where");const s=this.readSync(t.dataId);return kH(t.shape,s)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Km.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IP(n){const t=new Float32Array(n.length);for(let s=0;s<n.length;++s)t[s]=Math.abs(n[s]);return t}const zH=n=>{const{x:t}=n.inputs,s=n.backend;Lt(t,"abs");let r=new Float32Array(mt(t.shape));const d=s.data.get(t.dataId).values;return r=IP(d),s.makeOutput(r,t.shape,t.dtype)},VH={kernelName:lp,backendName:"cpu",kernelFunc:zH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function He(n){return(t,s,r,d,S)=>{const i=Ht(t,s),g=i.length,e=kt(i),a=mt(i),v=Tn(S,a),u=t.length,o=s.length,c=kt(t),l=kt(s),f=El(t,i),m=El(s,i);if(f.length+m.length===0)for(let h=0;h<v.length;++h)v[h]=n(r[h%r.length],d[h%d.length]);else for(let h=0;h<v.length;++h){const p=kl(h,g,e),y=p.slice(-u);f.forEach(E=>y[E]=0);const x=Xi(y,u,c),T=p.slice(-o);m.forEach(E=>T[E]=0);const C=Xi(T,o,l);v[h]=n(r[x],d[C])}return[v,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function os(n){const{inputs:t,backend:s}=n,{real:r,imag:d}=t,S=s.data.get(r.dataId).values,i=s.data.get(d.dataId).values,g=s.makeTensorInfo(r.shape,"complex64"),e=s.data.get(g.dataId);return e.complexTensorInfos={real:s.makeTensorInfo(r.shape,"float32",S),imag:s.makeTensorInfo(d.shape,"float32",i)},g}const GH={kernelName:uy,backendName:"cpu",kernelFunc:os};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Md(n,t,s="float32"){if(s==="complex64"){const d=Md(n,t,"float32"),S=Md(n,t,"float32");return os({inputs:{real:d,imag:S},backend:n})}const r=Pn(mt(t),s);return n.makeTensorInfo(t,s,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qi(n){const{inputs:t,backend:s}=n,{x:r}=t;return s.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const UH={kernelName:Uh,backendName:"cpu",kernelFunc:Qi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ao(n){const{inputs:t,backend:s}=n,{input:r}=t,d=s.data.get(r.dataId).complexTensorInfos.real,S=s.data.get(d.dataId).values;return s.makeTensorInfo(d.shape,d.dtype,S)}const WH={kernelName:Gy,backendName:"cpu",kernelFunc:ao};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RP(n,t,s,r){if(r==="int32"){const d=Int32Array.from(n);return[t,"int32",d]}if(r==="bool"){const d=fo([0],s),[S,i]=He((g,e)=>g!==e?1:0)(t,[],n,d,"bool");return[i,"bool",S]}throw new Error(`Error in Cast: failed to cast ${s} to ${r}`)}function ua(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{dtype:S}=r;if(S==="complex64"){if(d.dtype==="complex64")return Qi({inputs:{x:d},backend:s});const v=Md(s,d.shape,d.dtype),u=ua({inputs:{x:d},backend:s,attrs:{dtype:"float32"}}),o=os({inputs:{real:u,imag:v},backend:s});return s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(u),o}if(d.dtype==="complex64"){const v=ao({inputs:{input:d},backend:s}),u=ua({inputs:{x:v},backend:s,attrs:{dtype:S}});return s.disposeIntermediateTensorInfo(v),u}if(!Eb(d.dtype,S)){const v=Qi({inputs:{x:d},backend:s});return{dataId:v.dataId,shape:v.shape,dtype:S}}const i=s.data.get(d.dataId).values,[g,e,a]=RP(i,d.shape,d.dtype,S);return s.makeTensorInfo(g,e,a)}const XH={kernelName:Nh,backendName:"cpu",kernelFunc:ua};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function on(n,t,s,r){return s==null?({inputs:d,backend:S})=>{const{a:i,b:g}=d,e=S;Lt([i,g],n);const a=e.data.get(i.dataId).values,v=e.data.get(g.dataId).values,u=i.dtype==="string"?Sr(a):a,o=i.dtype==="string"?Sr(v):v,c=r||i.dtype,[l,f]=t(i.shape,g.shape,u,o,c);return e.makeTensorInfo(f,c,l)}:({inputs:d,backend:S})=>{const{a:i,b:g}=d,e=S;if(i.dtype==="complex64"||g.dtype==="complex64"){const a=ua({inputs:{x:i},backend:e,attrs:{dtype:"complex64"}}),v=e.data.get(a.dataId),u=v.complexTensorInfos.real,o=v.complexTensorInfos.imag,c=e.data.get(u.dataId).values,l=e.data.get(o.dataId).values,f=ua({inputs:{x:g},backend:e,attrs:{dtype:"complex64"}}),m=e.data.get(f.dataId),h=m.complexTensorInfos.real,p=m.complexTensorInfos.imag,y=e.data.get(h.dataId).values,x=e.data.get(p.dataId).values,[T,C,E]=s(i.shape,g.shape,c,l,y,x),A=e.makeTensorInfo(E,"float32",T),w=e.makeTensorInfo(E,"float32",C),b=os({inputs:{real:A,imag:w},backend:e});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(A),e.disposeIntermediateTensorInfo(w),b}else{const a=e.data.get(i.dataId).values,v=e.data.get(g.dataId).values,u=r||i.dtype,[o,c]=t(i.shape,g.shape,a,v,u);return e.makeTensorInfo(c,u,o)}}}function J2(n){return(t,s,r,d,S,i)=>{const g=Ht(t,s),e=mt(g),a=g.length,v=kt(g),u=Tn("float32",e),o=Tn("float32",e),c=El(t,g),l=El(s,g),f=Tr(r,d),m=Tr(S,i),h=t.length,p=kt(t),y=s.length,x=kt(s);if(c.length+l.length===0)for(let T=0;T<u.length;T++){const C=T%f.length,E=T%m.length,A=n(f[C*2],f[C*2+1],m[E*2],m[E*2+1]);u[T]=A.real,o[T]=A.imag}else for(let T=0;T<u.length;T++){const C=kl(T,a,v),E=C.slice(-h);c.forEach(R=>E[R]=0);const A=Xi(E,h,p),w=C.slice(-y);l.forEach(R=>w[R]=0);const b=Xi(w,y,x),I=n(f[A*2],f[A*2+1],m[b*2],m[b*2+1]);u[T]=I.real,o[T]=I.imag}return[u,o,g]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NP=He((n,t)=>n+t),HH=J2((n,t,s,r)=>({real:n+s,imag:t+r})),Rl=on(zl,NP,HH),YH={kernelName:zl,backendName:"cpu",kernelFunc:Rl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2(n,t,s,r,d){const S=mt(r),i=Pn(d,s);for(let g=0;g<n.length;g++){const e=n[g];if(e<0)throw new Error("Input x must be non-negative!");e>=d||(S>0?i[e]+=t[g]:i[e]+=1)}return i}function PP(n,t,s,r=!1){const d=n.shape[0],S=n.shape[1],i=jt([d,s],t.dtype);for(let g=0;g<d;g++)for(let e=0;e<S;e++){const a=n.get(g,e);if(a<0)throw new Error("Input x must be non-negative!");a>=s||(r?i.set(1,g,a):t.size>0?i.set(i.get(g,a)+t.get(g,e),g,a):i.set(i.get(g,a)+1,g,a))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FP=He((n,t)=>n&t),KH=on(vp,FP),jH={kernelName:vp,backendName:"cpu",kernelFunc:KH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qi(n){return(t,s,r)=>{const d=Ge(s,t.length);for(let S=0;S<t.length;++S)d[S]=n(t[S],r);return d}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ce(n,t,s){const r=qi(t);return wa(n,r,s)}function wa(n,t,s){return({inputs:r,attrs:d,backend:S})=>{const{x:i}=r;Lt(i,n);const g=S,e=g.data.get(i.dataId).values;let a;if(i.dtype==="string"){if(!Array.isArray(e))throw new Error("String tensor's value was not an instance of Array");a=Sr(e)}else a=e;const v=s||i.dtype,u=t(a,v,d);return g.makeTensorInfo(i.shape,v,u)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DP=qi(n=>Math.ceil(n)),ZH=wa(Ph,DP),QH={kernelName:Ph,backendName:"cpu",kernelFunc:ZH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OP(n,t,s,r){const d=Ge(s,mt(t));if(r&&s!=="string"){let S=0;n.forEach(i=>{const g=mt(i.shape);d.set(i.vals,S),S+=g})}else{let S=0;n.forEach(i=>{const g=s==="string"?Sr(i.vals):i.vals;let e=0;for(let a=0;a<i.shape[0];++a){const v=a*t[1]+S;for(let u=0;u<i.shape[1];++u)d[v+u]=g[e++]}S+=i.shape[1]})}return d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LP=He((n,t)=>n===t?1:0),MP=on(Ap,LP,null,"bool"),JH={kernelName:Ap,backendName:"cpu",kernelFunc:MP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $P=qi(n=>Math.exp(n)),BP=wa(Bh,$P,"float32"),qH={kernelName:Bh,backendName:"cpu",kernelFunc:BP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kP=qi(n=>Math.expm1(n)),_H=wa(kh,kP),tY={kernelName:kh,backendName:"cpu",kernelFunc:_H};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zP=qi(n=>Math.floor(n)),eY=wa(zh,zP),nY={kernelName:zh,backendName:"cpu",kernelFunc:eY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VP=He((n,t)=>Math.floor(n/t)),sY=on(Vh,VP,null,"int32"),iY={kernelName:Vh,backendName:"cpu",kernelFunc:sY};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GP(n,t,s,r,d,S,i,g,e){const a=jt([r,S],s);for(let v=0;v<r;v++){const u=[];let o=0;for(let c=0;c<d;c++){const l=n[v*d+c];o+=l*i[c],u.push(l)}if(o<0||o>=e/S)throw new Error(`Invalid indices: ${u} does not index into ${g}`);for(let c=0;c<S;c++)a.values[v*S+c]=t.get(...t.indexToLoc(o*S+c))}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UP(n,t,s){const r=jt(s,n.dtype);for(let d=0;d<r.size;++d){const i=r.indexToLoc(d).slice(),g=i[0],e=i[2],a=t.locToIndex([g,e]);i[2]=t.values[a];const v=n.locToIndex(i);0<=v&&v<n.values.length&&(r.values[d]=n.values[v])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WP=He((n,t)=>n>t?1:0),rY=on(Np,WP,null,"bool"),aY={kernelName:Np,backendName:"cpu",kernelFunc:rY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XP=He((n,t)=>n>=t?1:0),oY=on(Gh,XP,null,"bool"),lY={kernelName:Gh,backendName:"cpu",kernelFunc:oY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HP=He((n,t)=>n<t?1:0),uY=on(Fp,HP,null,"bool"),hY={kernelName:Fp,backendName:"cpu",kernelFunc:uY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YP=He((n,t)=>n<=t?1:0),cY=on(Dp,YP,null,"bool"),fY={kernelName:Dp,backendName:"cpu",kernelFunc:cY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KP(n,t,s){const r=(t-n)/(s-1),d=Pn(s,"float32");d[0]=n;for(let S=1;S<d.length;S++)d[S]=d[S-1]+r;return d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jP=qi(n=>Math.log(n)),dY=wa(Yh,jP),pY={kernelName:Yh,backendName:"cpu",kernelFunc:dY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZP(n,t,s,r){const d=Tn(r,mt(s));for(let S=0;S<d.length;++S){const i=S*t;let g=n[i];for(let e=0;e<t;++e){const a=n[i+e];(Number.isNaN(a)||a>g)&&(g=a)}d[S]=g}return d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QP=He((n,t)=>Math.max(n,t)),mY=on(jh,QP),vY={kernelName:jh,backendName:"cpu",kernelFunc:mY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JP=He((n,t)=>Math.min(n,t)),gY=on(Zh,JP),xY={kernelName:Zh,backendName:"cpu",kernelFunc:gY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _2=He((n,t)=>n*t),yY=J2((n,t,s,r)=>({real:n*s-t*r,imag:n*r+t*s})),jm=on(Jh,_2,yY),TY={kernelName:Jh,backendName:"cpu",kernelFunc:jm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qP(n,t,s){const r=pa(-1,s);return _2([],t,r,n,s)}function SY(n){const{inputs:t,backend:s}=n,{x:r}=t;Lt(r,"neg");const d=s.data.get(r.dataId).values,[S,i]=qP(d,r.shape,r.dtype);return s.makeTensorInfo(i,r.dtype,S)}const CY={kernelName:Wp,backendName:"cpu",kernelFunc:SY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _P=He((n,t)=>n!==t?1:0),wY=on(Xp,_P,null,"bool"),EY={kernelName:Xp,backendName:"cpu",kernelFunc:wY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tT(n,t,s,r,d){const S=t.length,i=mt(t),g=kt(t),e=kt(d),a=Tn(s,mt(d));for(let v=0;v<i;++v){const u=kl(v,S,g),o=new Array(u.length);for(let l=0;l<o.length;l++)o[l]=u[r[l]];const c=Xi(o,S,e);a[c]=n[v]}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _n(n){const{inputs:t,attrs:s,backend:r}=n,{x:d}=t,{perm:S}=s;Lt(d,"transpose");const i=d.shape.length,g=new Array(i);for(let u=0;u<g.length;u++)g[u]=d.shape[S[u]];const e=r.data.get(d.dataId).values,a=tT(e,d.shape,d.dtype,S,g);return{dataId:r.write(a,g,d.dtype),shape:g,dtype:d.dtype}}const AY={kernelName:rl,backendName:"cpu",kernelFunc:_n};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tF(n,t,s,r){const[d,S]=mn(n,r),i=ps(t,"int32"),g=Pn(mt(d),i),e=mt(S);for(let a=0;a<g.length;++a){const v=a*e;let u=1;for(let o=0;o<e;++o)u*=s[v+o];g[a]=u}return{outVals:g,outShape:d,outDtype:i}}function bY(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,keepDims:i}=r;Lt(d,"prod");const g=d.shape.length,e=Qt(S,d.shape),a=Oe(e,g);let v=e,u=d;const o=[];a!=null&&(u=_n({inputs:{x:d},backend:s,attrs:{perm:a}}),o.push(u),v=We(v.length,g));const c=s.data.get(u.dataId).values,{outVals:l,outShape:f,outDtype:m}=tF(u.shape,u.dtype,c,v);let h=f;return i&&(h=Ue(f,e)),o.forEach(p=>s.disposeIntermediateTensorInfo(p)),s.makeTensorInfo(h,m,l)}const IY={kernelName:Qp,backendName:"cpu",kernelFunc:bY};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RY(n,t,s){n.forEach((r,d)=>{if(r<0||r>=s){const S=kl(d,t.length,kt(t)).join(",");throw new Error(`indices[${S}] = ${r} is not in [0, ${s})`)}})}function NY(n,t){for(let s=0;s<n.length;++s){const r=n[s],d=s===n.length-1?t:n[s+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>d)throw new Error("Ragged splits must not point past values");for(let S=1;S<r.length;++S)if(r[S-1]>r[S])throw new Error("Ragged splits must be sorted in ascending order")}}function PY(n,t,s,r){const d=[];let S=0;const i=t.length-1+s.length,g=new Array(i).fill(null).map(()=>[0]);NY(s,r);let e=1;for(let a=0;a<t.length-1;++a){e*=t[a];const v=t[a+1];for(let u=1;u<e+1;++u)g[a].push(u*v)}for(let a=0;a<n.length;++a){let v=n[a],u=n[a]+1;for(let o=0;o<s.length;++o){const c=s[o],l=o+t.length-1;if(l>=0){const f=g[l],m=f[f.length-1]-c[v];for(let h=v;h<u;++h)g[l].push(c[h+1]+m)}v=c[v],u=c[u]}u!==v&&(d.push([v,u]),S+=u-v)}return{outSplits:g,valueSlices:d,numValues:S}}function FY(n){const t=[];for(let s=0;s<n.length;++s){const r=n[s].length,d=Ge("int32",r);t.push(d),n[s].forEach((S,i)=>d[i]=S)}return t}function Cw(n,t){const s=n.slice(0,t);for(;s.length<t;)s.push(1);for(let r=t;r<n.length;r++)s[t-1]*=n[r];return s}function DY(n,t,s,r,d,S){const i=Cw(t,2)[1],g=Cw(S,2)[1];let e=0;for(const a of s)for(let v=a[0];v<a[1];++v){for(let u=0;u<r;++u)d[e*g+u]=n[v*i+u];++e}}function OY(n,t,s,r,d){const S=t.slice();S[0]=d;const i=Ge(s,mt(S)),g=n.length,e=g===0?0:g/t[0];return DY(n,t,r,e,i,S),[i,S]}function eF(n,t,s,r,d,S,i,g){if(n.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");const e=t[0][0]-1;if(RY(S,i,e),r.length===0)throw new Error("params.rank must be nonzero");const a=r[0],{outSplits:v,valueSlices:u,numValues:o}=PY(S,i,n,a),c=FY(v),l=OY(s,r,d,u,o);return[c,l[0],l[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ww=2147483647;function nF(n,t,s,r,d,S,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(d.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const g=t.length===0,e=d.length===0,a=i.length===0,v=[];g||v.push(t[0]),e||v.push(d[0]),a||v.push(i[0]);for(let m=1;m<v.length;++m)if(v[m]!==v[m-1])throw new Error("starts, limits, and deltas must have the same shape");const u=v.length===0?1:v[0],o=Ge("int32",u+1);o[0]=0;for(let m=0;m<u;++m){const h=g?n[0]:n[m],p=e?r[0]:r[m],y=a?S[0]:S[m];if(y===0)throw new Error("Requires delta != 0");let x;if(y>0&&p<h||y<0&&p>h)x=0;else if(x=Math.ceil(Math.abs((p-h)/y)),x>ww)throw new Error(`Requires ((limit - start) / delta) <= ${ww}`);o[m+1]=o[m]+x}const c=o[u],l=Ge(s,c);let f=0;for(let m=0;m<u;++m){const h=o[m+1]-o[m];let p=g?n[0]:n[m];const y=a?S[0]:S[m];for(let x=0;x<h;++x)l[f++]=p,p+=y}return[o,l]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Bs=xi;class $d{constructor(t,s,r,d,S,i,g,e,a,v){this.shape=t,this.shapeShape=s,this.values=r,this.valuesShape=d,this.valuesDType=S,this.defaultValue=i,this.defaultValueShape=g,this.rowPartitionValues=e,this.rowPartitionValuesShapes=a,this.rowPartitionTypes=VR(v),this.raggedRank=GR(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===Bs.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===Bs.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const s=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case Bs.VALUE_ROWIDS:return $d.getMaxWidthValueRowID(s);case Bs.ROW_SPLITS:return $d.getMaxWidthRowSplit(s);default:throw new Error(`Cannot handle partition type ${Bs[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){const s=t.length;if(s===0||s===1)return 0;let r=0;for(let d=0;d<s-1;++d){const S=t[d+1]-t[d];S>r&&(r=S)}return r}static getMaxWidthValueRowID(t){const s=t.length;if(s===0)return 0;let r=0,d=t[0],S=0;for(let i=1;i<s;++i){const g=t[i];g!==d&&(d=g,S=Math.max(i-r,S),r=i)}return Math.max(s-r,S)}tensorShapeFromTensor(t,s,r=!0){if(s.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Aw(t,r)}calculateOutputSize(t){const s=this.valuesShape,r=this.defaultValueShape;UR(r,s);const d=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=zR(this.raggedRank,d,s);i[0]<0&&(i[0]=t);for(let g=1;g<=this.raggedRank;++g)i[g]<0&&(i[g]=this.getMaxWidth(g));return i}calculateFirstParentOutputIndex(t,s,r){const d=Math.min(t,r),S=[];let i=0;for(let g=0;g<d;++g,i+=s)S.push(i);for(let g=d;g<t;++g)S.push(-1);return q(S.length===t,()=>"Final length of result must be equal to firstDimension."),S}calculateOutputIndexRowSplit(t,s,r,d){const S=t.length,i=[];for(let g=0;g<S-1;++g){const e=t[g+1]-t[g];let a=Math.min(d,e),v=s[g];v===-1&&(a=0);for(let u=0;u<a;++u)i.push(v),v+=r;for(let u=0;u<e-a;++u)i.push(-1)}if(S>0&&i.length!==t[S-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(t,s,r,d){const S=t.length,i=[];if(S===0)return[];let g=0,e=t[0];if(e>=s.length)throw new Error(`Got currentValueRowId=${e}, which is not less than ${s.length}`);let a=s[e];i.push(a);for(let v=1;v<S;++v){const u=t[v];if(u===e)a>=0&&(++g,g<d?a+=r:a=-1);else{if(g=0,e=u,u>=s.length)throw new Error(`Got nextValueRowId=${u} which is not less than ${s.length}`);a=s[u]}i.push(a)}if(i.length!==t.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(t,s,r,d){const S=this.getRowPartitionTensor(t),i=this.getRowPartitionTypeByDimension(t);switch(i){case Bs.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(S,s,r,d);case Bs.ROW_SPLITS:if(S.length-1>s.length)throw new Error(`Row partition size is greater than output size: ${S.length-1} > ${s.length}`);return this.calculateOutputIndexRowSplit(S,s,r,d);default:throw new Error(`Unsupported partition type: ${Bs[i]}`)}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const s=this.rowPartitionTypes[0];switch(s){case Bs.FIRST_DIM_SIZE:return t[0];case Bs.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Bs.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Bs[s]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const s=this.getFirstDimensionSize(),r=this.calculateOutputSize(s),d=new Array(this.raggedRank+1);d[d.length-1]=1;for(let e=d.length-2;e>=0;--e)d[e]=d[e+1]*r[e+1];const S=Aw(r,!1),i=Ge(this.valuesDType,mt(S));if(d[0]*r[0]>0){let e=this.calculateFirstParentOutputIndex(s,d[0],r[0]);for(let a=1;a<=this.raggedRank;++a)e=this.calculateOutputIndex(a-1,e,d[a],r[a]);this.setOutput(this.raggedRank,e,i,S)}return[S,i]}setOutput(t,s,r,d){if(r.length===0)return;const S=this.values,i=r;let g=d.slice();g=g.slice(t+1);const e=mt(g),a=s.length;let v=this.defaultValue;if(v.length!==e&&v.length!==1){const l=this.defaultValueShape;ft(()=>{const f=at(v,l);v=ll(f,g).dataSync()})}let u=0,o=0,c=0;for(let l=0;l<=a;++l){let f=l<a?s[l]:-1;if(f===c){++c;continue}if(o<c){const m=S.subarray(u*e),h=i.subarray(o*e),p=(c-o)*e;Ew(h,m,p)}if(l>=a){const m=r.length;f=Math.floor(m/e)}if(f>c)if(this.defaultValue.length===1)i.subarray(c*e,f*e).fill(this.defaultValue[0]),c=f;else for(;f>c;){const m=i.slice(c*e);Ew(m,v,e),++c}f<0?(u=l+1,o=c):(u=l,o=c,c=o+1)}}}function Ew(n,t,s){for(let r=0;r<s;r++)n[r]=t[r]}function Aw(n,t){const s=[];for(let r of n){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}s.push(r)}return s}function sF(n,t,s,r,d,S,i,g,e,a){return new $d(n,t,s,r,d,S,i,g,e,a).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iF(n,t,s,r){const d=n===t,S=n<t&&s<0,i=t<n&&s>1;if(d||S||i)return Pn(0,r);const g=Math.abs(Math.ceil((t-n)/s)),e=Pn(g,r);t<n&&s===1&&(s=-1),e[0]=n;for(let a=1;a<e.length;a++)e[a]=e[a-1]+s;return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rF=qi(n=>1/Math.sqrt(n)),LY=wa(sc,rF),MY={kernelName:sc,backendName:"cpu",kernelFunc:LY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Va(n,t,s,r,d,S,i,g,e,a){const v=[r/d,d],u=n.values,o=t.values;if(r===0)return jt(s,t.dtype);const c=e instanceof nn?e:jt(v,t.dtype);typeof e=="string"||typeof e=="number"?c.values.fill(e):typeof e=="boolean"&&c.values.fill(+e);for(let l=0;l<S;l++){const f=[];let m=0;for(let h=0;h<i;h++){const p=u[l*i+h];f.push(p),m+=p*g[h]}if(m<0||m>=r/d)throw new Error(`Invalid indices: ${f} does not index into ${s}`);for(let h=0;h<d;h++)a?c.values[m*d+h]+=o[l*d+h]:c.values[m*d+h]=t.rank===0?o[0]:o[l*d+h]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Y=qi(n=>1/(1+Math.exp(-n))),aF=ce(lc,n=>1/(1+Math.exp(-n))),BY={kernelName:lc,backendName:"cpu",kernelFunc:aF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oF(n,t,s,r,d){const S=a2(r,t,s),i=mt(s),g=kt(r);if(S){const u=o2(t,g);return d==="string"?n.slice(u,u+i):n.subarray(u,u+i)}const e=d==="string"?Sr(n):n,a=jt(r,d,e),v=jt(s,d);for(let u=0;u<v.size;++u){const o=v.indexToLoc(u),c=o.map((l,f)=>l+t[f]);v.set(a.get(...c),...o)}return d==="string"?lN(v.values):v.values}function oo(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{begin:S,size:i}=r;Lt(d,"slice");const[g,e]=Om(d,S,i);i2(d,g,e);const a=s.data.get(d.dataId).values,v=oF(a,g,e,d.shape,d.dtype);return s.makeTensorInfo(e,d.dtype,v)}const kY={kernelName:nm,backendName:"cpu",kernelFunc:oo};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lF(n,t,s,r,d,S,i){const g=t[0],e=S[0],a=new Array(e),v=new Array(g),u=t[1];if(e===0){if(g!==0)throw new Error(ZR(g));const m=Ge(s,0),h=Ge(d,0);return[m,[0,u],h,a,v]}let o=!0,c=0;const l=new Array(e).fill(0);for(let m=0;m<g;++m){const h=n[m*u];if(h<0)throw new Error(QR(m,h));if(h>=e)throw new Error(JR(m,h,e));++l[h],o=o&&h>=c,c=h}let f=!0;for(let m=0;m<e;++m){const h=l[m]===0;a[m]=h,f=f&&!h,l[m]=Math.max(l[m],1),m>0&&(l[m]+=l[m-1])}if(f&&o){const m=n,h=r;for(let p=0;p<g;++p)v[p]=p;return[m,[g,u],h,a,v]}else{const m=l[e-1],h=Ge(s,m*u),p=Ge(d,m),y=new Array(e).fill(0);for(let x=0;x<g;++x){const T=n[x*u],C=y[T],E=(T===0?0:l[T-1])+C;y[T]++;for(let A=0;A<u;++A)h[E*u+A]=n[x*u+A];p[E]=r[x],v[x]=E}for(let x=0;x<e;++x)if(y[x]===0){const C=x===0?0:l[x-1];h[C*u+0]=x;for(let E=1;E<u;++E)h[C*u+E]=0;p[C]=i}return[h,[m,u],p,a,v]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uF(n,t,s,r,d){const S=mt(r),i=t[0],g=d.length,e=[];let a=1,v=-1;for(let m=0;m<g;++m){const h=d[m];if(h===-1){if(v!==-1)throw new Error(qR(v,m));v=m,e.push(1)}else{if(h<0)throw new Error(_R(m,h));a*=h,e.push(h)}}if(v!==-1){if(a<=0)throw new Error(tN());const m=Math.trunc(S/a);if(a*m!==S)throw new Error(eN(r,e));e[v]=m}if(mt(e)!==S)throw new Error(nN(r,e));const o=r.length,c=[];if(o>0){c[o-1]=1;for(let m=o-2;m>=0;--m)c[m]=c[m+1]*r[m+1]}const l=[];if(g>0){l[g-1]=1;for(let m=g-2;m>=0;--m)l[m]=l[m+1]*e[m+1]}const f=Ge(s,i*g);for(let m=0;m<i;++m){let h=0;for(let p=0;p<o;++p)h+=n[m*o+p]*c[p];for(let p=0;p<g;++p)f[m*g+p]=Math.trunc(h/l[p]),h%=l[p]}return[f,[i,g],e]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eT(n,t,s,r,d,S=!1,i=0){const g=r.length,e=[t[0],n.length/t[0]],a=e[1],u=g>0?d[g-1]+1:0;if(u<0)throw new Error(b0());const o=t.slice();o[0]=u;const c=o.reduce((y,x)=>y*x,1),l=Ge(s,c);if(g===0)return u>0&&l.fill(i),[l,o];if(u<=0)throw new Error(b0());let f=0,m=1,h=0,p=d[f];for(;;){let y=0;if(m<g){if(y=d[m],p===y){++m;continue}if(p>=y)throw new Error(sN())}if(p<0||p>=u)throw new Error(iN(p,u));p>h&&l.fill(i,h*a,p*a);for(let x=f;x<m;++x){const T=r[x];if(T<0||T>=e[0])throw new Error(rN(x,r[x],e[0]));for(let C=0;C<a;C++)l[p*a+C]+=n[T*a+C]}if(S)for(let x=0;x<a;x++)l[p*a+x]/=m-f;if(f=m,++m,h=p+1,p=y,m>g)break}return h<u&&l.fill(i,h*a,u*a),[l,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zY=qi(n=>Math.sqrt(n)),VY=ce(hc,n=>Math.sqrt(n)),GY={kernelName:hc,backendName:"cpu",kernelFunc:VY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hF=He((n,t)=>{const s=n-t;return s*s}),UY=on(cc,hF),WY={kernelName:cc,backendName:"cpu",kernelFunc:UY};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cF=qi((n,t)=>{const{pattern:s,replaceGlobal:r,rewrite:d}=t;return n.replace(new RegExp(s,r?"g":""),d)}),XY=wa(om,cF),HY={kernelName:om,backendName:"cpu",kernelFunc:XY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fF(n,t,s,r){const d=jt(n,t.dtype);for(let S=0;S<d.size;S++){const i=d.indexToLoc(S),g=new Array(i.length);for(let e=0;e<g.length;e++)g[e]=i[e]*s[e]+r[e];d.set(t.get(...g),...i)}return d}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YY{constructor(t,s,r,d,S,i){this.separator=Zr(t),this.nGramWidths=s,this.leftPad=Zr(r),this.rightPad=Zr(d),this.padWidth=S,this.preserveShort=i}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,s){const r=this.getPadWidth(s);return Math.max(0,t+2*r-s+1)}createNGrams(t,s,r,d,S,i){for(let g=0;g<S;++g){const e=this.getPadWidth(i),a=Math.max(0,e-g),v=Math.max(0,e-(S-(g+1))),u=i-(a+v),o=s+(a>0?0:g-e);let c=0;c+=a*this.leftPad.length;for(let p=0;p<u;++p)c+=t[o+p].length;c+=v*this.rightPad.length;const l=a+v+u-1;c+=l*this.separator.length,r[d+g]=new Uint8Array(c);const f=r[d+g];let m=0;const h=p=>p.forEach(y=>f[m++]=y);for(let p=0;p<a;++p)h(this.leftPad),h(this.separator);for(let p=0;p<u-1;++p)h(t[o+p]),h(this.separator);if(u>0){h(t[o+u-1]);for(let p=0;p<v;++p)h(this.separator),h(this.rightPad)}else{for(let p=0;p<v-1;++p)h(this.rightPad),h(this.separator);h(this.rightPad)}}}compute(t,s){const r=t.length,d=s.length;if(d>0){let e=s[0];if(e!==0)throw new Error(`First split value must be 0, got ${e}`);for(let a=1;a<d;++a){let v=s[a]>=e;if(v=v&&s[a]<=r,!v)throw new Error(`Invalid split value ${s[a]}, must be in [${e}, ${r}]`);e=s[a]}if(e!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${e}`)}const S=d-1,i=Ge("int32",d);if(r===0||d===0){const e=new Array(r);for(let a=0;a<=S;++a)i[a]=0;return[e,i]}i[0]=0;for(let e=1;e<=S;++e){const a=s[e]-s[e-1];let v=0;this.nGramWidths.forEach(u=>{v+=this.getNumNGrams(a,u)}),this.preserveShort&&a>0&&v===0&&(v=1),i[e]=i[e-1]+v}const g=new Array(i[S]);for(let e=0;e<S;++e){const a=s[e];let v=i[e];if(this.nGramWidths.forEach(u=>{const o=s[e+1]-s[e],c=this.getNumNGrams(o,u);this.createNGrams(t,a,g,v,c,u),v+=c}),this.preserveShort&&v===i[e]){const u=s[e+1]-s[e];if(u===0)continue;const o=u+2*this.padWidth,c=1;this.createNGrams(t,a,g,v,c,o)}}return[g,i]}}function dF(n,t,s,r,d,S,i,g){return new YY(s,r,d,S,i,g).compute(n,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KY(n,t,s,r){if(!n.length)return;if(t.length===0){for(let S=0;S<n.length;++S)r.push(n.subarray(S,S+1));return}if(t.length===1){const S=t[0];let i=n.indexOf(S);for(;i!==-1;){const g=n.subarray(0,i);(!s||g.length!==0)&&r.push(g),n=n.subarray(i+1),i=n.indexOf(S)}(!s||n.length!==0)&&r.push(n);return}let d=0;for(let S=0;S<n.length+1;S++)if(S===n.length||t.indexOf(n[S])!==-1){const i=n.subarray(d,S);(!s||i.length!==0)&&r.push(i),d=S+1}}function pF(n,t,s){const r=n.length,d=[];let S=0,i=0;const g=new Array(r);for(let o=0;o<r;++o){const c=d.length;KY(n[o],t,s,d);const l=d.length-c;g[o]=l,S+=l,i=Math.max(i,l)}const e=Ge("int32",S*2),a=new Array(S),v=[r,i];let u=0;for(let o=0;o<r;++o)for(let c=0;c<g[o];++c)e[u*2]=o,e[u*2+1]=c,a[u]=d[u],++u;return[e,a,v]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mF(n,t){const s=Ge("int32",n.length);for(let r=0;r<n.length;++r)s[r]=m6(n[r]).modulo(t).getLowBitsUnsigned();return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vF=He((n,t)=>n-t),jY=J2((n,t,s,r)=>({real:n-s,imag:t-r})),nT=on(fc,vF,jY),ZY={kernelName:fc,backendName:"cpu",kernelFunc:nT};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gF(n,t){const s=new Array(n.rank);for(let d=0;d<s.length;d++)s[d]=n.shape[d]*t[d];const r=jt(s,n.dtype);for(let d=0;d<r.values.length;++d){const S=r.indexToLoc(d),i=new Array(n.rank);for(let e=0;e<i.length;e++)i[e]=S[e]%n.shape[e];const g=n.locToIndex(i);r.values[d]=n.values[g]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wu=(n,t)=>{const s=t.value-n.value;return s===0?n.index-t.index:s};function xF(n,t,s=0,r=n.length-1){for(;r>s;){if(r-s>600){const g=r-s+1,e=t-s+1,a=Math.log(g),v=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*v*(g-v)/g)*Math.sign(e-g/2),o=Math.max(s,Math.floor(t-e*v/g+u)),c=Math.min(r,Math.floor(t+(g-e)*v/g+u));xF(n,t,o,c)}const d=n[t];let S=s,i=r;for(Mo(n,s,t),wu(n[r],d)>0&&Mo(n,s,r);S<i;){for(Mo(n,S,i),S++,i--;wu(n[S],d)<0;)S=S+1;for(;wu(n[i],d)>0;)i=i-1}wu(n[s],d)===0?Mo(n,s,i):(i=i+1,Mo(n,i,r)),i<=t&&(s=i+1),t<=i&&(r=i-1)}}function yF(n,t,s,r,d){const S=t[t.length-1],[i,g]=[n.length/S,S],e=Tn(s,i*r),a=Tn("int32",i*r);for(let u=0;u<i;u++){const o=u*g,c=n.subarray(o,o+g);let l=new Array(c.length);c.forEach((p,y)=>l[y]={value:p,index:y}),r<l.length&&(xF(l,r),l=l.slice(0,r)),d&&l.sort(wu);const f=u*r,m=e.subarray(f,f+r),h=a.subarray(f,f+r);for(let p=0;p<r;p++)m[p]=l[p].value,h[p]=l[p].index}const v=t.slice();return v[v.length-1]=r,[jt(v,s,e),jt(v,"int32",a)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TF(n,t,s,r){const d=Qt(t,s)[0],S=[1,s[0],1];for(let l=0;l<d;l++)S[0]*=s[l];S[1]=s[d];for(let l=d+1;l<s.length;l++)S[2]*=s[l];const i=new Map,g=new Int32Array(s[d]),e=new nn(S,r,n),a=[],v=S[0]===1&&S[2]===1;for(let l=0;l<s[d];l++){let f;if(v)f=n[l].toString();else{const h=[];for(let p=0;p<S[0];p++)for(let y=0;y<S[2];y++)h.push(e.get(p,l,y));f=h.join(",")}const m=i.get(f);if(m!=null)g[l]=m;else{const h=i.size;i.set(f,h),g[l]=h,a.push(l)}}const u=S.slice();u[1]=i.size;const o=new nn(u,r);a.forEach((l,f)=>{for(let m=0;m<S[0];m++)for(let h=0;h<S[2];h++)o.set(e.get(m,l,h),m,f,h)});const c=s.slice();return c[d]=u[1],{outputValues:o.values,outputShape:c,indices:g}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QY=Object.freeze(Object.defineProperty({__proto__:null,addImpl:NP,bincountImpl:q2,bincountReduceImpl:PP,bitwiseAndImpl:FP,castImpl:RP,ceilImpl:DP,concatImpl:OP,equalImpl:LP,expImpl:$P,expm1Impl:kP,floorDivImpl:VP,floorImpl:zP,gatherNdImpl:GP,gatherV2Impl:UP,greaterEqualImpl:XP,greaterImpl:WP,lessEqualImpl:YP,lessImpl:HP,linSpaceImpl:KP,logImpl:jP,maxImpl:ZP,maximumImpl:QP,minimumImpl:JP,multiplyImpl:_2,negImpl:qP,notEqualImpl:_P,prodImpl:tF,raggedGatherImpl:eF,raggedRangeImpl:nF,raggedTensorToTensorImpl:sF,rangeImpl:iF,rsqrtImpl:rF,scatterImpl:Va,sigmoidImpl:$Y,simpleAbsImpl:IP,sliceImpl:oF,sparseFillEmptyRowsImpl:lF,sparseReshapeImpl:uF,sparseSegmentReductionImpl:eT,sqrtImpl:zY,squaredDifferenceImpl:hF,staticRegexReplaceImpl:cF,stridedSliceImpl:fF,stringNGramsImpl:dF,stringSplitImpl:pF,stringToHashBucketFastImpl:mF,subImpl:vF,tileImpl:gF,topKImpl:yF,transposeImpl:tT,uniqueImpl:TF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */hI("cpu",()=>new Km,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SF=ce(Mh,n=>n>=0?n:Math.exp(n)-1),JY={kernelName:Mh,backendName:"cpu",kernelFunc:SF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CF(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{alpha:S}=r;Lt([d],"leakyRelu");const i=mt(d.shape),g=s.data.get(d.dataId).values,e=Tn("float32",i);for(let a=0;a<g.length;a++)e[a]=g[a]<0?S*g[a]:g[a];return s.makeTensorInfo(d.shape,"float32",e)}const qY={kernelName:Pp,backendName:"cpu",kernelFunc:CF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Y=He((n,t)=>n<0?t*n:n);function wF(n){const{inputs:t,backend:s}=n,{x:r,alpha:d}=t;Lt([r,d],"prelu");const S=s.data.get(r.dataId).values,i=s.data.get(d.dataId).values,[g,e]=_Y(r.shape,d.shape,S,i,"float32");return s.makeTensorInfo(e,"float32",g)}const tK={kernelName:Zp,backendName:"cpu",kernelFunc:wF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EF=ce(tc,n=>Math.max(0,n)),eK={kernelName:tc,backendName:"cpu",kernelFunc:EF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AF=ce(ec,n=>Math.min(Math.max(0,n),6)),nK={kernelName:ec,backendName:"cpu",kernelFunc:AF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bd(n,t,s,r,d){if(s==="linear")return Qi({inputs:{x:t},backend:n});if(s==="relu")return EF({inputs:{x:t},backend:n});if(s==="elu")return SF({inputs:{x:t},backend:n});if(s==="relu6")return AF({inputs:{x:t},backend:n});if(s==="prelu")return wF({inputs:{x:t,alpha:r},backend:n});if(s==="leakyrelu")return CF({inputs:{x:t},backend:n,attrs:{alpha:d}});if(s==="sigmoid")return aF({inputs:{x:t},backend:n});throw new Error(`Activation ${s} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xe(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{shape:S}=r,i=mt(d.shape),g=wb(S,i),e=mt(g);q(i===e,()=>`The new shape (${g}) has ${e} elements and the old shape (${d.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),s.incRef(d.dataId);const a=s.data.get(d.dataId);if(a.complexTensorInfos!=null){const v=a.complexTensorInfos.real,u=a.complexTensorInfos.imag;v.shape=g,u.shape=g}return{dataId:d.dataId,shape:g,dtype:d.dtype}}const sK={kernelName:Jp,backendName:"cpu",kernelFunc:xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bF(n){const{inputs:t,backend:s,attrs:r}=n,{a:d,b:S}=t,{transposeA:i,transposeB:g}=r;Lt([d,S],"matMul");const e=d.shape.length,a=S.shape.length,v=i?d.shape[e-2]:d.shape[e-1],u=g?S.shape[a-1]:S.shape[a-2],o=i?d.shape[e-1]:d.shape[e-2],c=g?S.shape[a-2]:S.shape[a-1],l=d.shape.slice(0,-2),f=S.shape.slice(0,-2),m=mt(l),h=mt(f),y=Ht(d.shape.slice(0,-2),S.shape.slice(0,-2)).concat([o,c]);q(v===u,()=>`Error in matMul: inner shapes (${v}) and (${u}) of Tensors with shapes ${d.shape} and ${S.shape} and transposeA=${i} and transposeB=${g} must match.`);const x=i?[m,v,o]:[m,o,v],T=g?[h,c,u]:[h,u,c],C=xe({inputs:{x:d},backend:s,attrs:{shape:x}}),E=xe({inputs:{x:S},backend:s,attrs:{shape:T}}),A=i?C.shape[1]:C.shape[2],w=i?C.shape[2]:C.shape[1],b=g?E.shape[1]:E.shape[2],I=Math.max(m,h),R=s.data.get(C.dataId).values,N=s.data.get(E.dataId).values,F=kt(C.shape),P=kt(E.shape),[O,M,L]=i?[F[0],1,F[1]]:[F[0],F[1],1],[k,V,W]=g?[1,P[1],P[0]]:[P[1],1,P[0]],K=w*b,B=jt([I,w,b],C.dtype),G=B.values,D=s.blockSize;for(let $=0;$<I;$++){const z=$%m,H=$%h;for(let Y=0;Y<w;Y+=D){const Z=Math.min(Y+D,w);for(let Q=0;Q<b;Q+=D){const tt=Math.min(Q+D,b);for(let et=0;et<A;et+=D){const lt=Math.min(et+D,A);for(let ut=Y;ut<Z;ut++)for(let ct=Q;ct<tt;ct++){let ht=0;for(let gt=et;gt<lt;gt++){const yt=R[z*O+ut*M+gt*L],Et=N[gt*k+ct*V+H*W];ht+=yt*Et}G[$*K+(ut*b+ct)]+=ht}}}}}return s.disposeIntermediateTensorInfo(C),s.disposeIntermediateTensorInfo(E),s.makeTensorInfo(y,B.dtype,B.values)}const iK={kernelName:pp,backendName:"cpu",kernelFunc:bF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rK(n){const{inputs:t,backend:s,attrs:r}=n,{a:d,b:S,bias:i,preluActivationWeights:g}=t,{transposeA:e,transposeB:a,activation:v,leakyreluAlpha:u}=r;let o,c,l;const f=[];o=bF({inputs:{a:d,b:S},attrs:{transposeA:e,transposeB:a},backend:s}),i&&(c=Rl({inputs:{a:o,b:i},backend:s}),f.push(o),o=c),v&&(l=Bd(s,o,v,g,u),f.push(o),o=l);for(const h of f)s.disposeIntermediateTensorInfo(h);return o}const aK={kernelName:pd,backendName:"cpu",kernelFunc:rK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oK=ce(Ch,n=>Math.acos(n)),lK={kernelName:Ch,backendName:"cpu",kernelFunc:oK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uK=ce(wh,n=>Math.acosh(n)),hK={kernelName:wh,backendName:"cpu",kernelFunc:uK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cK(n){const{inputs:t,backend:s}=n,r=t;Lt(t,"addN");const d=r.map(g=>s.data.get(g.dataId).values),S=jt(r[0].shape,r[0].dtype),i=S.values;for(let g=0;g<r.length;g++){const e=d[g];for(let a=0;a<i.length;a++)i[a]+=e[a]}return s.makeTensorInfo(S.shape,S.dtype,S.values)}const fK={kernelName:up,backendName:"cpu",kernelFunc:cK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dK(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,keepDims:i}=r;Lt(d,"all");const g=Qt(S,d.shape);let e=g;const a=Oe(e,d.shape.length);let v=d;a!=null&&(v=_n({inputs:{x:d},backend:s,attrs:{perm:a}}),e=We(e.length,d.shape.length)),Cn("all",e,v.shape.length);const[u,o]=mn(v.shape,e),c=mt(o),l=Pn(mt(u),v.dtype),f=s.data.get(v.dataId).values;for(let h=0;h<l.length;++h){const p=h*c;let y=f[p];for(let x=0;x<c;++x){const T=f[p+x];y=y&&T}l[h]=y}a!=null&&s.disposeIntermediateTensorInfo(v);const m=s.makeTensorInfo(u,v.dtype,l);if(i){const h=Ue(u,g),p=xe({inputs:{x:m},backend:s,attrs:{shape:h}});return s.disposeIntermediateTensorInfo(m),p}return m}const pK={kernelName:sy,backendName:"cpu",kernelFunc:dK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mK(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,keepDims:i}=r;Lt(d,"any");const g=Qt(S,d.shape);let e=g;const a=Oe(e,d.shape.length);let v=d;a!=null&&(v=_n({inputs:{x:d},backend:s,attrs:{perm:a}}),e=We(e.length,d.shape.length)),Cn("any",e,v.shape.length);const[u,o]=mn(v.shape,e),c=mt(o),l=Pn(mt(u),v.dtype),f=s.data.get(v.dataId).values;for(let h=0;h<l.length;++h){const p=h*c;let y=f[p];for(let x=0;x<c;++x){const T=f[p+x];y=y||T}l[h]=y}a!=null&&s.disposeIntermediateTensorInfo(v);const m=s.makeTensorInfo(u,v.dtype,l);if(i){const h=Ue(u,g),p=xe({inputs:{x:m},backend:s,attrs:{shape:h}});return s.disposeIntermediateTensorInfo(m),p}return m}const vK={kernelName:iy,backendName:"cpu",kernelFunc:mK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gK(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S}=r;Lt(d,"argMax");let i=Qt(S,d.shape);const g=Oe(i,d.shape.length);let e=d;const a=[];g!=null&&(e=_n({inputs:{x:d},backend:s,attrs:{perm:g}}),a.push(e),i=We(i.length,e.shape.length)),i=[i[0]],Cn("argMax",i,e.shape.length);const[v,u]=mn(e.shape,i),o=mt(v),c=Pn(o,"int32"),l=mt(u),f=s.data.get(e.dataId).values;for(let m=0;m<c.length;++m){const h=m*l;let p=f[h],y=0;for(let x=0;x<l;++x){const T=f[h+x];T>p&&(p=T,y=x)}c[m]=y}return a.forEach(m=>s.disposeIntermediateTensorInfo(m)),s.makeTensorInfo(v,"int32",c)}const xK={kernelName:hp,backendName:"cpu",kernelFunc:gK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yK(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S}=r;Lt(d,"argMin");let i=Qt(S,d.shape);const g=Oe(i,d.shape.length);let e=d;const a=[];g!=null&&(e=_n({inputs:{x:d},backend:s,attrs:{perm:g}}),a.push(e),i=We(i.length,e.shape.length)),i=[i[0]],Cn("argMin",i,e.shape.length);const[v,u]=mn(e.shape,i),o=mt(v),c=Pn(o,"int32"),l=mt(u),f=s.data.get(e.dataId).values;for(let m=0;m<c.length;++m){const h=m*l;let p=f[h],y=0;for(let x=0;x<l;++x){const T=f[h+x];T<p&&(p=T,y=x)}c[m]=y}return a.forEach(m=>s.disposeIntermediateTensorInfo(m)),s.makeTensorInfo(v,"int32",c)}const TK={kernelName:cp,backendName:"cpu",kernelFunc:yK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SK=ce(Eh,n=>Math.asin(n)),CK={kernelName:Eh,backendName:"cpu",kernelFunc:SK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wK=ce(Ah,n=>Math.asinh(n)),EK={kernelName:Ah,backendName:"cpu",kernelFunc:wK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AK=ce(bh,n=>Math.atan(n)),bK={kernelName:bh,backendName:"cpu",kernelFunc:AK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IK=He((n,t)=>Math.atan2(n,t)),RK=on(Rh,IK),NK={kernelName:Rh,backendName:"cpu",kernelFunc:RK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PK=ce(Ih,n=>Math.atanh(n)),FK={kernelName:Ih,backendName:"cpu",kernelFunc:PK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sT(n,t,s,r,d,S){const i=d.strideHeight,g=d.strideWidth,e=d.dilationHeight,a=d.dilationWidth,v=d.effectiveFilterHeight,u=d.effectiveFilterWidth,o=d.padInfo.top,c=d.padInfo.left,l=S==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=jt(d.outShape,s),m=f.values,h=d.outShape[1]*d.outShape[2]*d.outShape[3],p=d.outShape[2]*d.outShape[3],y=d.outShape[3];for(let x=0;x<d.batchSize;++x){const T=x*h,C=x*r[0];for(let E=0;E<d.inChannels;++E)for(let A=0;A<d.outHeight;++A){const w=A*i-o,b=Math.max(0,w),I=Math.min(d.inHeight,v+w),R=T+A*p;for(let N=0;N<d.outWidth;++N){const F=N*g-c,P=Math.max(0,F),O=Math.min(d.inWidth,u+F);let M=l,L=0,k=0;for(let W=b;W<I;W+=e){const K=C+W*r[1];for(let B=P;B<O;B+=a){const G=K+B*r[2],D=n[G+E];S==="max"&&D>M?M=D:S==="avg"&&(L+=D,k++)}if(isNaN(M))break}const V=R+N*y+E;m[V]=S==="avg"?L/k:M}}}return f}function IF(n,t,s,r,d=!1,S=!1){const i=jt(r.outShape,"int32"),g=r.strideHeight,e=r.strideWidth,a=r.dilationHeight,v=r.dilationWidth,u=r.effectiveFilterHeight,o=r.effectiveFilterWidth,c=r.padInfo.top,l=r.padInfo.left,f=jt(t,s,n);for(let m=0;m<r.batchSize;++m)for(let h=0;h<r.inChannels;++h)for(let p=0;p<r.outHeight;++p){const y=p*g-c;let x=y;for(;x<0;)x+=a;const T=Math.min(r.inHeight,u+y);for(let C=0;C<r.outWidth;++C){const E=C*e-l;let A=E;for(;A<0;)A+=v;const w=Math.min(r.inWidth,o+E);let b=Number.NEGATIVE_INFINITY,I=-1;for(let R=x;R<T;R+=a){const N=R-y;for(let F=A;F<w;F+=v){const P=F-E,O=f.get(m,R,F,h);O>b&&(b=O,d?I=S?((m*r.inHeight+R)*r.inWidth+F)*r.inChannels+h:(R*r.inWidth+F)*r.inChannels+h:I=N*o+P)}}i.set(I,m,p,C,h)}}return i}function RF(n,t,s,r,d,S){const i=d.strideDepth,g=d.strideHeight,e=d.strideWidth,a=d.dilationDepth,v=d.dilationHeight,u=d.dilationWidth,o=d.effectiveFilterDepth,c=d.effectiveFilterHeight,l=d.effectiveFilterWidth,f=d.padInfo.front,m=d.padInfo.top,h=d.padInfo.left,p=S==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=jt(d.outShape,s),x=y.values,T=d.outShape[1]*d.outShape[2]*d.outShape[3]*d.outShape[4],C=d.outShape[2]*d.outShape[3]*d.outShape[4],E=d.outShape[3]*d.outShape[4],A=d.outShape[4];for(let w=0;w<d.batchSize;++w){const b=w*T,I=w*r[0];for(let R=0;R<d.inChannels;++R)for(let N=0;N<d.outDepth;++N){const F=N*i-f;let P=F;for(;P<0;)P+=a;const O=Math.min(d.inDepth,o+F),M=b+N*C;for(let L=0;L<d.outHeight;++L){const k=L*g-m;let V=k;for(;V<0;)V+=v;const W=Math.min(d.inHeight,c+k),K=M+L*E;for(let B=0;B<d.outWidth;++B){const G=B*e-h;let D=G;for(;D<0;)D+=u;const $=Math.min(d.inWidth,l+G),z=K+B*A;let H=p,Y=0,Z=0;for(let tt=P;tt<O;tt+=a){const et=I+tt*r[1];for(let lt=V;lt<W;lt+=v){const ut=et+lt*r[2];for(let ct=D;ct<$;ct+=u){const ht=ut+ct*r[3],gt=n[ht+R];if(S==="max"&&gt>H?H=gt:S==="avg"&&(Y+=gt,Z++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}const Q=z+R;x[Q]=S==="avg"?Y/Math.max(Z,1):H}}}}return y}function DK(n,t){const s=jt(t.outShape,"int32"),r=t.strideDepth,d=t.strideHeight,S=t.strideWidth,i=t.dilationDepth,g=t.dilationHeight,e=t.dilationWidth,a=t.effectiveFilterDepth,v=t.effectiveFilterHeight,u=t.effectiveFilterWidth,o=t.padInfo.front,c=t.padInfo.top,l=t.padInfo.left;for(let f=0;f<t.batchSize;++f)for(let m=0;m<t.inChannels;++m)for(let h=0;h<t.outDepth;++h){const p=h*r-o;let y=p;for(;y<0;)y+=i;const x=Math.min(t.inDepth,a+p);for(let T=0;T<t.outHeight;++T){const C=T*d-c;let E=C;for(;E<0;)E+=g;const A=Math.min(t.inHeight,v+C);for(let w=0;w<t.outWidth;++w){const b=w*S-l;let I=b;for(;I<0;)I+=e;const R=Math.min(t.inWidth,u+b);let N=Number.NEGATIVE_INFINITY,F=-1;for(let P=y;P<x;P+=i){const O=P-p;for(let M=E;M<A;M+=g){const L=M-C;for(let k=I;k<R;k+=e){const V=k-b,W=n.get(f,P,M,k,m);W>=N&&(N=W,F=O*v*u+L*v+V)}}}s.set(F,f,h,T,w,m)}}}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OK(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t;Lt(d,"avgPool");const{filterSize:S,strides:i,pad:g,dimRoundingMode:e}=r,a=1;q(Sn(i,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const v=oi(d.shape,S,i,a,g,e);let u;if(v.filterWidth===1&&v.filterHeight===1&&ee(v.inShape,v.outShape))u=Qi({inputs:{x:d},backend:s});else{const o=s.data.get(d.dataId).values,c=kt(d.shape),l=sT(o,d.shape,d.dtype,c,v,"avg");u=s.makeTensorInfo(v.outShape,d.dtype,l.values)}return u}const LK={kernelName:fp,backendName:"cpu",kernelFunc:OK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MK(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{filterSize:S,strides:i,pad:g,dimRoundingMode:e,dataFormat:a}=r;Lt(d,"avgPool3d");const v=wr(d.shape,S,i,1,g,e,a),u=s.data.get(d.dataId).values,o=RF(u,d.shape,d.dtype,kt(d.shape),v,"avg");return s.makeTensorInfo(o.shape,"float32",o.values)}const $K={kernelName:dp,backendName:"cpu",kernelFunc:MK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BK(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,input:S}=t,{filterSize:i,strides:g,pad:e,dimRoundingMode:a}=r;Lt([d,S],"avgPool3DGrad");const v=wr(S.shape,i,g,1,e,a),u=v.strideDepth,o=v.strideHeight,c=v.strideWidth,l=v.filterDepth,f=v.filterHeight,m=v.filterWidth,h=v.dilationDepth,p=v.dilationHeight,y=v.dilationWidth,x=v.effectiveFilterDepth,T=v.effectiveFilterHeight,C=v.effectiveFilterWidth,E=x-1-v.padInfo.front,A=C-1-v.padInfo.left,w=T-1-v.padInfo.top,b=jt(S.shape,"float32"),I=1/(l*f*m),R=s.bufferSync(d);for(let N=0;N<v.batchSize;++N)for(let F=0;F<v.inChannels;++F)for(let P=0;P<v.inDepth;++P)for(let O=0;O<v.inHeight;++O)for(let M=0;M<v.inWidth;++M){const L=P-E,k=O-w,V=M-A;let W=0;for(let K=0;K<x;K+=h){const B=(L+K)/u;if(!(B<0||B>=v.outDepth||Math.floor(B)!==B))for(let G=0;G<T;G+=p){const D=(k+G)/o;if(!(D<0||D>=v.outHeight||Math.floor(D)!==D))for(let $=0;$<C;$+=y){const z=(V+$)/c;if(z<0||z>=v.outWidth||Math.floor(z)!==z)continue;const H=R.get(N,B,D,z,F);W+=H}}}b.set(W*I,N,P,O,M,F)}return s.makeTensorInfo(b.shape,b.dtype,b.values)}const kK={kernelName:ay,backendName:"cpu",kernelFunc:BK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zK(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,input:S}=t,i=S;Lt([d,S],"avgPoolGrad");const{filterSize:g,strides:e,pad:a}=r,v=oi(i.shape,g,e,1,a),u=v.strideHeight,o=v.strideWidth,c=v.filterHeight,l=v.filterWidth,f=v.dilationHeight,m=v.dilationWidth,h=v.effectiveFilterHeight,p=v.effectiveFilterWidth,y=p-1-v.padInfo.left,x=h-1-v.padInfo.top,T=jt(i.shape,"float32"),C=1/(c*l),E=s.data.get(d.dataId).values,A=jt(d.shape,"float32",E);for(let w=0;w<v.batchSize;++w)for(let b=0;b<v.inChannels;++b)for(let I=0;I<v.inHeight;++I)for(let R=0;R<v.inWidth;++R){const N=I-x,F=R-y;let P=0;for(let O=0;O<h;O+=f){const M=(N+O)/u;if(!(M<0||M>=v.outHeight||Math.floor(M)!==M))for(let L=0;L<p;L+=m){const k=(F+L)/o;if(k<0||k>=v.outWidth||Math.floor(k)!==k)continue;const V=A.get(w,M,k,b);P+=V}}T.set(P*C,w,I,R,b)}return s.makeTensorInfo(T.shape,T.dtype,T.values)}const VK={kernelName:ry,backendName:"cpu",kernelFunc:zK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GK(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,scale:S,offset:i,mean:g,variance:e}=t;q(g.shape.length===e.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(i==null||g.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(S==null||g.shape.length===S.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Lt([d,g,e,S,i],"batchNorm");let{varianceEpsilon:a}=r;a==null&&(a=.001);const v=s.data.get(d.dataId).values,u=s.data.get(g.dataId).values,o=s.data.get(e.dataId).values,c=S?s.data.get(S.dataId).values:new Float32Array([1]),l=i?s.data.get(i.dataId).values:new Float32Array([0]),f=new Float32Array(v.length),m=l.length,h=c.length,p=o.length,y=u.length;let x=0,T=0,C=0,E=0;for(let A=0;A<v.length;++A)f[A]=l[x++]+(v[A]-u[T++])*c[C++]/Math.sqrt(o[E++]+a),x>=m&&(x=0),T>=y&&(T=0),C>=h&&(C=0),E>=p&&(E=0);return s.makeTensorInfo(d.shape,d.dtype,f)}const UK={kernelName:Ip,backendName:"cpu",kernelFunc:GK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WK(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{blockShape:S,crops:i}=r;Lt([d],"batchToSpaceND");const g=S.reduce((h,p)=>h*p),e=Ac(d.shape,S,g),a=bc(e.length,S.length),v=Ic(d.shape,S,g),u=f2(i,S.length),o=d2(v,i,S.length),c=xe({inputs:{x:d},backend:s,attrs:{shape:e}}),l=_n({inputs:{x:c},backend:s,attrs:{perm:a}}),f=xe({inputs:{x:l},backend:s,attrs:{shape:v}}),m=oo({inputs:{x:f},backend:s,attrs:{begin:u,size:o}});return s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(f),m}const XK={kernelName:mp,backendName:"cpu",kernelFunc:WK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HK(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,weights:S}=t,{size:i}=r,g=s.data.get(d.dataId).values,e=s.data.get(S.dataId).values,a=q2(g,e,S.dtype,S.shape,i);return s.makeTensorInfo([i],S.dtype,a)}const YK={kernelName:oy,backendName:"cpu",kernelFunc:HK};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KK(n){const{inputs:t,backend:s}=n,{s0:r,s1:d}=t,S=s.data.get(r.dataId).values,i=s.data.get(d.dataId).values,g=Ht(Array.from(S),Array.from(i));return s.makeTensorInfo([g.length],"int32",Int32Array.from(g))}const jK={kernelName:ly,backendName:"cpu",kernelFunc:KK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZK=ce(Fh,(n,t)=>{const s=t;return n>s.clipValueMax?s.clipValueMax:n<s.clipValueMin?s.clipValueMin:n}),QK={kernelName:Fh,backendName:"cpu",kernelFunc:ZK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JK=n=>{const{x:t}=n.inputs,s=n.backend,r=new Float32Array(mt(t.shape)),d=s.data.get(t.dataId),S=d.complexTensorInfos.real,i=d.complexTensorInfos.imag,g=s.data.get(S.dataId).values,e=s.data.get(i.dataId).values;for(let a=0;a<g.length;a++){const v=g[a],u=e[a];r[a]=Math.hypot(v,u)}return s.makeOutput(r,t.shape,"float32")},qK={kernelName:gp,backendName:"cpu",kernelFunc:JK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nl(n){const{inputs:t,backend:s}=n,{input:r}=t,d=s.data.get(r.dataId).complexTensorInfos.imag,S=s.data.get(d.dataId).values;return s.makeTensorInfo(d.shape,d.dtype,S)}const _K={kernelName:Iy,backendName:"cpu",kernelFunc:Nl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pl(n){const{inputs:t,backend:s,attrs:r}=n,{axis:d}=r,S=Qt(d,t[0].shape)[0],i=t.map(f=>f.shape);u2(i,S);let g=Yi(t.map(f=>f.shape),S);if(mt(g)===0)return s.makeTensorInfo(g,t[0].dtype,[]);const e=t.filter(f=>mt(f.shape)>0);if(e.length===1)return Qi({inputs:{x:e[0]},backend:s});if(e[0].dtype==="complex64"){const f=e.map(x=>ao({inputs:{input:x},backend:s})),m=e.map(x=>Nl({inputs:{input:x},backend:s})),h=Pl({inputs:f,backend:s,attrs:{axis:S}}),p=Pl({inputs:m,backend:s,attrs:{axis:S}}),y=os({inputs:{real:h,imag:p},backend:s});return f.forEach(x=>s.disposeIntermediateTensorInfo(x)),m.forEach(x=>s.disposeIntermediateTensorInfo(x)),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(p),y}const a=e.map(f=>{const h=[-1,mt(f.shape.slice(S))];return xe({inputs:{x:f},backend:s,attrs:{shape:h}})}),v=a.map(f=>({vals:s.data.get(f.dataId).values,shape:f.shape}));g=Yi(a.map(f=>f.shape),1);const u=a[0].shape[0]===1,o=OP(v,g,t[0].dtype,u),c=Yi(e.map(f=>f.shape),S),l=s.makeTensorInfo(c,t[0].dtype,o);return a.forEach(f=>s.disposeIntermediateTensorInfo(f)),l}const tj={kernelName:xp,backendName:"cpu",kernelFunc:Pl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NF(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,filter:S}=t,{strides:i,pad:g,dataFormat:e,dilations:a,dimRoundingMode:v}=r;Lt([d,S],"conv2d");const u=Er(e),o=pn(d.shape,S.shape,i,a,g,v,!1,u),c=o.filterHeight,l=o.filterWidth,f=o.dilationHeight,m=o.dilationWidth,h=o.padInfo.left,p=o.padInfo.top,y=o.dataFormat==="channelsLast",x=new nn(o.outShape,d.dtype),T=kt(d.shape),C=kt(S.shape),E=T[0],A=y?T[1]:T[2],w=y?T[2]:1,b=y?1:T[1],I=x.strides[0],R=y?x.strides[1]:x.strides[2],N=y?x.strides[2]:1,F=y?1:x.strides[1],P=s.data.get(d.dataId).values,O=s.data.get(S.dataId).values,M=x.values;for(let L=0;L<o.batchSize;++L){const k=L*E,V=L*I;for(let W=0;W<o.outHeight;++W){const K=V+W*R,B=W*o.strideHeight-p;for(let G=0;G<c;++G){const D=B+G*f;if(D<0||D>=o.inHeight)continue;const $=G*C[0],z=k+D*A;for(let H=0;H<o.outWidth;++H){const Y=K+H*N,Z=H*o.strideWidth-h;for(let Q=0;Q<l;++Q){const tt=Z+Q*m;if(tt<0||tt>=o.inWidth)continue;const et=$+Q*C[1],lt=z+tt*w;let ut=et;for(let ct=0;ct<o.inChannels;++ct){const ht=P[lt+ct*b];for(let gt=0;gt<o.outChannels;++gt)M[Y+gt*F]+=ht*O[ut+gt];ut+=o.outChannels}}}}}}return s.makeTensorInfo(x.shape,x.dtype,M)}const ej={kernelName:yp,backendName:"cpu",kernelFunc:NF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nj(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,dy:S}=t,{strides:i,pad:g,dataFormat:e,dimRoundingMode:a,filterShape:v}=r;Lt([d,S],"conv2dBackpropFilter");const u=Er(e),o=pn(d.shape,v,i,1,g,a,!1,u),{strideHeight:c,strideWidth:l,filterHeight:f,filterWidth:m}=o,h=o.dataFormat==="channelsLast",p=new nn(o.filterShape,"float32"),y=o.padInfo.left,x=o.padInfo.top,T=s.data.get(d.dataId).values,C=s.data.get(S.dataId).values,E=new nn(d.shape,d.dtype,T),A=new nn(S.shape,S.dtype,C);for(let w=0;w<f;++w){const b=Math.max(0,Math.ceil((x-w)/c)),I=Math.min(o.outHeight,(o.inHeight+x-w)/c);for(let R=0;R<m;++R){const N=Math.max(0,Math.ceil((y-R)/l)),F=Math.min(o.outWidth,(o.inWidth+y-R)/l);for(let P=0;P<o.inChannels;++P)for(let O=0;O<o.outChannels;++O){let M=0;for(let L=0;L<o.batchSize;++L)for(let k=b;k<I;++k){const V=w+k*c-x;for(let W=N;W<F;++W){const K=R+W*l-y;h?M+=E.get(L,V,K,P)*A.get(L,k,W,O):M+=E.get(L,P,V,K)*A.get(L,O,k,W)}}p.set(M,w,R,P,O)}}}return s.makeTensorInfo(p.shape,p.dtype,p.values)}const sj={kernelName:hy,backendName:"cpu",kernelFunc:nj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ij(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,filter:S}=t,{inputShape:i,strides:g,pad:e,dataFormat:a,dimRoundingMode:v}=r;Lt([d,S],"conv2dBackpropInput");const u=kt(S.shape),o=kt(d.shape);let c=Er(a);const l=pn(i,S.shape,g,1,e,v,!1,c),f=new nn(l.inShape,"float32"),m=f.values,h=s.data.get(d.dataId).values,p=s.data.get(S.dataId).values,[y,x,T]=u,{batchSize:C,filterHeight:E,filterWidth:A,inChannels:w,inHeight:b,inWidth:I,outChannels:R,outHeight:N,outWidth:F,strideHeight:P,strideWidth:O}=l;c=l.dataFormat;const M=E-1-l.padInfo.top,L=A-1-l.padInfo.left,k=c==="channelsLast",V=f.strides[0],W=k?f.strides[1]:f.strides[2],K=k?f.strides[2]:1,B=k?1:f.strides[1],G=o[0],D=k?o[1]:o[2],$=k?o[2]:1,z=k?1:o[1];for(let H=0;H<C;++H)for(let Y=0;Y<w;++Y)for(let Z=0;Z<b;++Z){const Q=Z-M,tt=Math.max(0,Math.ceil(Q/P)),et=Math.min(N,(E+Q)/P);for(let lt=0;lt<I;++lt){const ut=lt-L,ct=Math.max(0,Math.ceil(ut/O)),ht=Math.min(F,(A+ut)/O);let gt=0;for(let Et=tt;Et<et;++Et){const bt=Et*P-Q;for(let pt=ct;pt<ht;++pt){const wt=pt*O-ut,Tt=G*H+D*Et+$*pt,Gt=y*(E-1-bt)+x*(A-1-wt)+T*Y;for(let Bt=0;Bt<R;++Bt){const Xt=h[Tt+z*Bt],te=p[Gt+Bt];gt+=Xt*te}}}const yt=V*H+W*Z+K*lt+B*Y;m[yt]=gt}}return s.makeTensorInfo(f.shape,f.dtype,f.values)}const rj={kernelName:Tp,backendName:"cpu",kernelFunc:ij};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aj(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,filter:S}=t,{strides:i,pad:g,dilations:e}=r;Lt([d,S],"conv3d");const a=ga(d.shape,S.shape,i,e,g),{filterDepth:v,filterHeight:u,filterWidth:o,dilationDepth:c,dilationHeight:l,dilationWidth:f,padInfo:m}=a,h=m.front,p=m.left,y=m.top,x=new nn(a.outShape,d.dtype),T=s.data.get(d.dataId).values,C=s.data.get(S.dataId).values,E=x.values,A=kt(d.shape),w=kt(S.shape);for(let b=0;b<a.batchSize;++b){const I=b*A[0],R=b*x.strides[0];for(let N=0;N<a.outDepth;++N){const F=R+N*x.strides[1],P=N*a.strideDepth-h;for(let O=0;O<v;++O){const M=P+O*c;if(M<0||M>=a.inDepth)continue;const L=O*w[0],k=I+M*A[1];for(let V=0;V<a.outHeight;++V){const W=F+V*x.strides[2],K=V*a.strideHeight-y;for(let B=0;B<u;++B){const G=K+B*l;if(G<0||G>=a.inHeight)continue;const D=L+B*w[1],$=k+G*A[2];for(let z=0;z<a.outWidth;++z){const H=W+z*a.outChannels,Y=z*a.strideWidth-p;for(let Z=0;Z<o;++Z){const Q=Y+Z*f;if(Q<0||Q>=a.inWidth)continue;const tt=D+Z*w[2],et=$+Q*a.inChannels;let lt=tt;for(let ut=0;ut<a.inChannels;++ut){const ct=T[et+ut];for(let ht=0;ht<a.outChannels;++ht)E[H+ht]+=ct*C[lt+ht];lt+=a.outChannels}}}}}}}}return s.makeTensorInfo(x.shape,x.dtype,x.values)}const oj={kernelName:Sp,backendName:"cpu",kernelFunc:aj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lj(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,dy:S}=t,{strides:i,pad:g,filterShape:e}=r;Lt([d,S],"conv3dBackpropFilterV2");const a=kt(d.shape),v=kt(S.shape),u=ga(d.shape,e,i,1,g),o=u.strideDepth,c=u.strideHeight,l=u.strideWidth,f=u.filterDepth,m=u.filterHeight,h=u.filterWidth,p=new nn(u.filterShape,"float32"),y=p.values,[x,T,C,E]=p.strides,A=s.data.get(S.dataId).values,[w,b,I,R]=v,N=s.data.get(d.dataId).values,[F,P,O,M]=a,L=u.padInfo.front,k=u.padInfo.left,V=u.padInfo.top;for(let W=0;W<f;++W){const K=Math.max(0,Math.ceil((L-W)/o)),B=Math.min(u.outDepth,(u.inDepth+L-W)/o),G=W*x;for(let D=0;D<m;++D){const $=Math.max(0,Math.ceil((V-D)/c)),z=Math.min(u.outHeight,(u.inHeight+V-D)/c),H=D*T+G;for(let Y=0;Y<h;++Y){const Z=Math.max(0,Math.ceil((k-Y)/l)),Q=Math.min(u.outWidth,(u.inWidth+k-Y)/l),tt=Y*C+H;for(let et=0;et<u.inChannels;++et){const lt=et*E+tt;for(let ut=0;ut<u.outChannels;++ut){let ct=0;for(let ht=0;ht<u.batchSize;++ht){const gt=ht*F,yt=ht*w;for(let Et=K;Et<B;++Et){const pt=(W+Et*o-L)*P+gt,wt=Et*b+yt;for(let Tt=$;Tt<z;++Tt){const Bt=(D+Tt*c-V)*O+pt,Xt=Tt*I+wt;for(let te=Z;te<Q;++te){const Wt=(Y+te*l-k)*M+Bt,oe=te*R+Xt;ct+=N[Wt+et]*A[oe+ut]}}}}y[lt+ut]=ct}}}}}return s.makeTensorInfo(p.shape,p.dtype,p.values)}const uj={kernelName:cy,backendName:"cpu",kernelFunc:lj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hj(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,filter:S}=t,{pad:i,strides:g,inputShape:e}=r;Lt([d],"conv3dBackpropInputV2");const a=kt(d.shape),v=kt(S.shape),u=ga(e,S.shape,g,1,i),o=new nn(u.inShape,"float32"),c=o.values,[l,f,m,h]=o.strides,p=s.data.get(d.dataId).values,[y,x,T,C]=a,E=s.data.get(S.dataId).values,[A,w,b,I]=v,{batchSize:R,filterDepth:N,filterHeight:F,filterWidth:P,inChannels:O,inDepth:M,inHeight:L,inWidth:k,outChannels:V,outDepth:W,outHeight:K,outWidth:B,strideDepth:G,strideHeight:D,strideWidth:$}=u,z=N-1-u.padInfo.front,H=F-1-u.padInfo.top,Y=P-1-u.padInfo.left;for(let Z=0;Z<R;++Z)for(let Q=0;Q<O;++Q)for(let tt=0;tt<M;++tt){const et=tt-z,lt=Math.max(0,Math.ceil(et/G)),ut=Math.min(W,(N+et)/G);for(let ct=0;ct<L;++ct){const ht=ct-H,gt=Math.max(0,Math.ceil(ht/D)),yt=Math.min(K,(F+ht)/D);for(let Et=0;Et<k;++Et){const bt=Et-Y,pt=Math.max(0,Math.ceil(bt/$)),wt=Math.min(B,(P+bt)/$);let Tt=0;for(let Gt=lt;Gt<ut;++Gt){const Bt=Gt*G-et;for(let Xt=gt;Xt<yt;++Xt){const te=Xt*D-ht;for(let Kt=pt;Kt<wt;++Kt){const Wt=Kt*$-bt,oe=y*Z+x*Gt+T*Xt+C*Kt,Le=A*(N-1-Bt)+w*(F-1-te)+b*(P-1-Wt)+I*Q;for(let ye=0;ye<V;++ye){const Ye=p[oe+ye],An=E[Le+ye];Tt+=Ye*An}}}}c[l*Z+f*tt+m*ct+h*Et+Q]=Tt}}}return s.makeTensorInfo(o.shape,o.dtype,o.values)}const cj={kernelName:fy,backendName:"cpu",kernelFunc:hj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fj=ce(Dh,n=>Math.cos(n)),dj={kernelName:Dh,backendName:"cpu",kernelFunc:fj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pj=ce(Oh,n=>Math.cosh(n)),mj={kernelName:Oh,backendName:"cpu",kernelFunc:pj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vj(n){const{inputs:t,backend:s,attrs:r}=n,{image:d,boxes:S,boxInd:i}=t,{cropSize:g,method:e,extrapolationValue:a}=r,[v,u,o,c]=d.shape,l=S.shape[0],[f,m]=g,h=jt([l,f,m,c],"float32"),p=s.data.get(S.dataId).values,y=s.data.get(i.dataId).values,x=s.data.get(d.dataId).values,T=kt(d.shape),C=kt(h.shape);for(let E=0;E<l;E++){const A=E*4,w=p[A],b=p[A+1],I=p[A+2],R=p[A+3],N=y[E];if(N>=v)continue;const F=f>1?(I-w)*(u-1)/(f-1):0,P=m>1?(R-b)*(o-1)/(m-1):0;for(let O=0;O<f;O++){const M=f>1?w*(u-1)+O*F:.5*(w+I)*(u-1);if(M<0||M>u-1){for(let L=0;L<m;L++)for(let k=0;k<c;k++){const V=k+L*C[2]+O*C[1]+E*C[0];h.values[V]=a}continue}if(e==="bilinear"){const L=Math.floor(M),k=Math.ceil(M),V=M-L;for(let W=0;W<m;W++){const K=m>1?b*(o-1)+W*P:.5*(b+R)*(o-1);if(K<0||K>o-1){for(let $=0;$<c;$++){const z=$+W*C[2]+O*C[1]+E*C[0];h.values[z]=a}continue}const B=Math.floor(K),G=Math.ceil(K),D=K-B;for(let $=0;$<c;$++){let z=$+B*T[2]+L*T[1]+N*T[0];const H=x[z];z=$+G*T[2]+L*T[1]+N*T[0];const Y=x[z];z=$+B*T[2]+k*T[1]+N*T[0];const Z=x[z];z=$+G*T[2]+k*T[1]+N*T[0];const Q=x[z],tt=H+(Y-H)*D,et=Z+(Q-Z)*D;z=$+W*C[2]+O*C[1]+E*C[0],h.values[z]=tt+(et-tt)*V}}}else for(let L=0;L<m;++L){const k=m>1?b*(o-1)+L*P:.5*(b+R)*(o-1);if(k<0||k>o-1){for(let K=0;K<c;K++){const B=K+L*C[2]+O*C[1]+E*C[0];h.values[B]=a}continue}const V=Math.round(k),W=Math.round(M);for(let K=0;K<c;K++){const B=K+V*T[2]+W*T[1]+N*T[0],G=K+L*C[2]+O*C[1]+E*C[0];h.values[G]=x[B]}}}}return s.makeTensorInfo(h.shape,h.dtype,h.values)}const gj={kernelName:py,backendName:"cpu",kernelFunc:vj};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xj(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,exclusive:i,reverse:g}=r;Lt(d,"cumprod");const e=Oe([S],d.shape.length);let a=d;e!=null&&(a=_n({inputs:{x:d},backend:s,attrs:{perm:e}}));const v=We(1,d.shape.length)[0];if(v!==a.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${a.shape.length-1} but got axis=${v}`);const u=ps(a.dtype,"int32"),o=ey(mt(a.shape),u),c=s.data.get(a.dataId).values,l=a.shape[a.shape.length-1],f=g?(h,p)=>h+l-p-1:(h,p)=>h+p;for(let h=0;h<c.length;h+=l)for(let p=0;p<l;p++){const y=f(h,p);if(p===0)o[y]=i?1:c[y];else{const x=f(h,p-1);o[y]=i?c[x]*o[x]:c[y]*o[x]}}const m=s.makeTensorInfo(a.shape,u,o);if(e!=null){const h=xa(e),p=_n({inputs:{x:m},backend:s,attrs:{perm:h}});return s.disposeIntermediateTensorInfo(m),s.disposeIntermediateTensorInfo(a),p}return m}const yj={kernelName:dy,backendName:"cpu",kernelFunc:xj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tj(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,exclusive:i,reverse:g}=r;Lt(d,"cumsum");const e=Oe([S],d.shape.length);let a=d;e!=null&&(a=_n({inputs:{x:d},backend:s,attrs:{perm:e}}));const v=We(1,d.shape.length)[0];if(v!==a.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${a.shape.length-1} but got axis=${v}`);const u=ps(a.dtype,"int32"),o=Pn(mt(a.shape),u),c=s.data.get(a.dataId).values,l=a.shape[a.shape.length-1],f=g?(h,p)=>h+l-p-1:(h,p)=>h+p;for(let h=0;h<c.length;h+=l)for(let p=0;p<l;p++){const y=f(h,p);if(p===0)o[y]=i?0:c[y];else{const x=f(h,p-1);o[y]=i?c[x]+o[x]:c[y]+o[x]}}const m=s.makeTensorInfo(a.shape,u,o);if(e!=null){const h=xa(e),p=_n({inputs:{x:m},backend:s,attrs:{perm:h}});return s.disposeIntermediateTensorInfo(m),s.disposeIntermediateTensorInfo(a),p}return m}const Sj={kernelName:Cp,backendName:"cpu",kernelFunc:Tj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cj(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,weights:S}=t,{size:i,binaryOutput:g}=r;if(d.shape.length===1){const e=s.data.get(d.dataId).values,a=s.data.get(S.dataId).values,v=q2(e,a,S.dtype,S.shape,i);return s.makeTensorInfo([i],S.dtype,v)}else if(d.shape.length===2){const e=s.bufferSync(d),a=s.bufferSync(S),v=PP(e,a,i,g);return s.makeTensorInfo(v.shape,S.dtype,v.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${d.shape.length}.`)}const wj={kernelName:my,backendName:"cpu",kernelFunc:Cj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ej(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{blockSize:S,dataFormat:i}=r;q(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const g=d.shape[0],e=d.shape[1],a=d.shape[2],v=d.shape[3],u=e*S,o=a*S,c=v/(S*S),l=s.data.get(d.dataId).values,f=new Float32Array(g*u*o*c);let m=0;for(let h=0;h<g;++h)for(let p=0;p<u;++p){const y=Math.floor(p/S),x=p%S;for(let T=0;T<o;++T){const C=Math.floor(T/S),E=T%S,A=(x*S+E)*c;for(let w=0;w<c;++w){const I=w+A+v*(C+a*(y+e*h));f[m++]=l[I]}}}return s.makeTensorInfo([g,u,o,c],d.dtype,f)}const Aj={kernelName:vy,backendName:"cpu",kernelFunc:Ej};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PF(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,filter:S}=t,{strides:i,pad:g,dilations:e,dimRoundingMode:a}=r;Lt([d,S],"depthwiseConv2DNative");const v=kt(d.shape),u=kt(S.shape);let o=e;o==null&&(o=[1,1]),q(Sn(i,o),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);const c=pn(d.shape,S.shape,i,o,g,a,!0),{filterHeight:l,filterWidth:f,dilationHeight:m,dilationWidth:h,padInfo:p}=c,y=p.left,x=p.top,T=c.outChannels/c.inChannels,C=new nn(c.outShape,d.dtype),E=s.data.get(d.dataId).values,A=s.data.get(S.dataId).values,w=C.values;for(let b=0;b<c.batchSize;++b){const I=b*v[0],R=b*C.strides[0];for(let N=0;N<c.outHeight;++N){const F=R+N*C.strides[1],P=N*c.strideHeight-x;for(let O=0;O<l;++O){const M=P+O*m;if(M<0||M>=c.inHeight)continue;const L=O*u[0],k=I+M*v[1];for(let V=0;V<c.outWidth;++V){const W=F+V*C.strides[2],K=V*c.strideWidth-y;for(let B=0;B<f;++B){const G=K+B*h;if(G<0||G>=c.inWidth)continue;const D=L+B*u[1],$=k+G*c.inChannels;let z=W,H=D;for(let Y=0;Y<c.inChannels;++Y){const Z=E[$+Y];for(let Q=0;Q<T;++Q)w[z+Q]+=Z*A[H+Q];z+=T,H+=T}}}}}}return s.makeTensorInfo(C.shape,C.dtype,C.values)}const bj={kernelName:wp,backendName:"cpu",kernelFunc:PF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ij(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,dy:S}=t,{strides:i,dilations:g,pad:e,dimRoundingMode:a,filterShape:v}=r;Lt([d,S],"depthwiseConv2dNativeBackpropFilter");const u=pn(d.shape,v,i,g,e,a,!0),{strideHeight:o,strideWidth:c,filterHeight:l,filterWidth:f}=u,m=new nn(u.filterShape,"float32"),h=u.padInfo.left,p=u.padInfo.top,y=u.outChannels/u.inChannels,x=s.data.get(d.dataId).values,T=new nn(d.shape,d.dtype,x),C=s.data.get(S.dataId).values,E=new nn(S.shape,S.dtype,C);for(let A=0;A<l;++A){const w=Math.max(0,Math.ceil((p-A)/o)),b=Math.min(u.outHeight,(u.inHeight+p-A)/o);for(let I=0;I<f;++I){const R=Math.max(0,Math.ceil((h-I)/c)),N=Math.min(u.outWidth,(u.inWidth+h-I)/c);for(let F=0;F<u.outChannels;++F){const P=Math.trunc(F/y),O=F%y;let M=0;for(let L=0;L<u.batchSize;++L)for(let k=w;k<b;++k){const V=A+k*o-p;for(let W=R;W<N;++W){const K=I+W*c-h;M+=T.get(L,V,K,P)*E.get(L,k,W,F)}}m.set(M,A,I,P,O)}}}return s.makeTensorInfo(m.shape,m.dtype,m.values)}const Rj={kernelName:gy,backendName:"cpu",kernelFunc:Ij};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nj(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,filter:S}=t,{strides:i,dilations:g,pad:e,dimRoundingMode:a,inputShape:v}=r;Lt([d,S],"depthwiseConv2DNativeBackpropInput");const u=kt(d.shape),o=kt(S.shape),c=pn(v,S.shape,i,g,e,a,!0),l=new nn(c.inShape,"float32"),f=l.values,[m,h,p]=l.strides,y=s.data.get(d.dataId).values,[x,T,C]=u,E=s.data.get(S.dataId).values,[A,w,b]=o,{batchSize:I,filterHeight:R,filterWidth:N,inChannels:F,inHeight:P,inWidth:O,outChannels:M,outHeight:L,outWidth:k,strideHeight:V,strideWidth:W}=c,K=R-1-c.padInfo.top,B=N-1-c.padInfo.left,G=M/F;for(let D=0;D<I;++D)for(let $=0;$<F;++$)for(let z=0;z<P;++z){const H=z-K,Y=Math.max(0,Math.ceil(H/V)),Z=Math.min(L,(R+H)/V);for(let Q=0;Q<O;++Q){const tt=Q-B,et=Math.max(0,Math.ceil(tt/W)),lt=Math.min(k,(N+tt)/W);let ut=0;for(let ct=Y;ct<Z;++ct){const ht=ct*V-H;for(let gt=et;gt<lt;++gt){const yt=gt*W-tt,Et=x*D+T*ct+C*gt,bt=A*(R-1-ht)+w*(N-1-yt)+b*$;for(let pt=0;pt<G;++pt){const wt=$*G+pt,Tt=y[Et+wt],Gt=E[bt+pt];ut+=Tt*Gt}}}f[m*D+h*z+p*Q+$]=ut}}return s.makeTensorInfo(l.shape,l.dtype,l.values)}const Pj={kernelName:xy,backendName:"cpu",kernelFunc:Nj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fj(n){const{inputs:t,backend:s}=n,{x:r}=t,d=mt(r.shape),S=s.data.get(r.dataId).values,i=jt([d,d],r.dtype),g=i.values;for(let a=0;a<S.length;a++)g[a*d+a]=S[a];const e=[...r.shape,...r.shape];return s.makeTensorInfo(e,i.dtype,i.values)}const Dj={kernelName:yy,backendName:"cpu",kernelFunc:Fj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oj={kernelName:Ep,backendName:"cpu",kernelFunc:({inputs:n,backend:t,attrs:s})=>{const{x:r,filter:d}=n,{strides:S,pad:i,dilations:g}=s,e=t,a=e.data.get(r.dataId).values,v=r.shape.length,u=e.data.get(d.dataId).values,o=d.shape.length,{batchSize:c,inHeight:l,inWidth:f,inChannels:m,outHeight:h,outWidth:p,padInfo:y,strideHeight:x,strideWidth:T,filterHeight:C,filterWidth:E,dilationHeight:A,dilationWidth:w,outShape:b}=xc(r.shape,d.shape,S,i,"NHWC",g),I=mt(b),R=b.length,N=Ge(r.dtype,I);for(let P=0;P<c;++P)for(let O=0;O<h;++O){const M=O*x-y.top;for(let L=0;L<p;++L){const k=L*T-y.left;for(let V=0;V<m;++V){let W=Number.MIN_SAFE_INTEGER;for(let B=0;B<C;++B){const G=M+B*A;if(G>=0&&G<l)for(let D=0;D<E;++D){const $=k+D*w;if($>=0&&$<f){const z=Xi([P,G,$,V],v,kt(r.shape)),H=Xi([B,D,V],o,kt(d.shape)),Y=a[z]+u[H];Y>W&&(W=Y)}}}const K=Xi([P,O,L,V],R,kt(b));N[K]=W}}}return{dataId:e.write(fo(N,r.dtype),b,r.dtype),shape:b,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lj={kernelName:o0,backendName:"cpu",kernelFunc:({inputs:n,backend:t,attrs:s})=>{const{x:r,filter:d,dy:S}=n,{strides:i,pad:g,dilations:e}=s,a=t,v=_s(r.shape,a.data.get(r.dataId).values),u=_s(d.shape,a.data.get(d.dataId).values),{batchSize:o,inHeight:c,inWidth:l,inChannels:f,outHeight:m,outWidth:h,padInfo:p,strideHeight:y,strideWidth:x,filterHeight:T,filterWidth:C,dilationHeight:E,dilationWidth:A,outShape:w}=xc(r.shape,d.shape,i,g,"NHWC",e);q(S.rank===w.length,()=>`Error in ${o0}, dy must have the same rank as output ${w.length}, but got ${S.rank}`);const b=_s(w,a.data.get(S.dataId).values),I=bb(d.shape,d.dtype);for(let N=0;N<o;++N)for(let F=0;F<m;++F){const P=F*y-p.top;for(let O=0;O<h;++O){const M=O*x-p.left;for(let L=0;L<f;++L){let k=Number.MIN_SAFE_INTEGER,V=0,W=0;for(let K=0;K<T;++K){const B=P+K*E;if(B>=0&&B<c)for(let G=0;G<C;++G){const D=M+G*A;if(D>=0&&D<l){const $=v[N][B][D][L]+u[K][G][L];$>k&&(k=$,V=K,W=G)}}}I[V][W][L]+=b[N][F][O][L]}}}return{dataId:a.write(fo(I,r.dtype),d.shape,d.dtype),shape:d.shape,dtype:d.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mj={kernelName:a0,backendName:"cpu",kernelFunc:({inputs:n,backend:t,attrs:s})=>{const{x:r,filter:d,dy:S}=n,{strides:i,pad:g,dilations:e}=s,a=t,v=_s(r.shape,a.data.get(r.dataId).values),u=_s(d.shape,a.data.get(d.dataId).values),{batchSize:o,inHeight:c,inWidth:l,inChannels:f,outHeight:m,outWidth:h,padInfo:p,strideHeight:y,strideWidth:x,filterHeight:T,filterWidth:C,dilationHeight:E,dilationWidth:A,outShape:w}=xc(r.shape,d.shape,i,g,"NHWC",e);q(S.rank===w.length,()=>`Error in ${a0}, dy must have the same rank as output ${w.length}, but got ${S.rank}`);const b=_s(w,a.data.get(S.dataId).values),I=bb(r.shape,r.dtype);for(let N=0;N<o;++N)for(let F=0;F<m;++F){const P=F*y-p.top;for(let O=0;O<h;++O){const M=O*x-p.left;for(let L=0;L<f;++L){let k=Number.MIN_SAFE_INTEGER,V=P<0?0:P,W=M<0?0:M;for(let K=0;K<T;++K){const B=P+K*E;if(B>=0&&B<c)for(let G=0;G<C;++G){const D=M+G*A;if(D>=0&&D<l){const $=v[N][B][D][L]+u[K][G][L];$>k&&(k=$,V=B,W=D)}}}I[N][V][W][L]+=b[N][F][O][L]}}}return{dataId:a.write(fo(I,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $j(n){const{inputs:t,backend:s,attrs:r}=n,{image:d}=t,{canvas:S,options:i}=r,{contextOptions:g,imageOptions:e}=i||{},a=(e==null?void 0:e.alpha)||1,v=(g==null?void 0:g.contextType)||"2d";if(v!=="2d")throw new Error(`Context type ${g.contextType} is not supported by the CPU backend.`);const u=S.getContext(v,(g==null?void 0:g.contextAttributes)||{});if(u==null)throw new Error(`Could not get the context with ${v} type.`);const[o,c]=d.shape.slice(0,2),l=d.shape.length===2?1:d.shape[2],f=s.data.get(d.dataId).values,m=d.dtype==="float32"?255:1,h=new Uint8ClampedArray(c*o*4);for(let y=0;y<o*c;++y){const x=[0,0,0,255*a];for(let C=0;C<l;C++){const E=f[y*l+C];if(d.dtype==="float32"){if(E<0||E>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${E}.`)}else if(d.dtype==="int32"&&(E<0||E>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${E}.`);l===1?(x[0]=E*m,x[1]=E*m,x[2]=E*m):x[C]=E*m}const T=y*4;h[T+0]=Math.round(x[0]),h[T+1]=Math.round(x[1]),h[T+2]=Math.round(x[2]),h[T+3]=Math.round(x[3])}S.width=c,S.height=o;const p=new ImageData(h,c,o);return u.putImageData(p,0,0),d}const Bj={kernelName:i6,backendName:"cpu",kernelFunc:$j};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $c(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,keepDims:i}=r;Lt(d,"sum");let g;d.dtype==="bool"?g=ua({inputs:{x:d},backend:s,attrs:{dtype:"int32"}}):g=Qi({inputs:{x:d},backend:s});const e=g.shape.length,a=Qt(S,g.shape),v=Oe(a,e);let u=a,o=g;v!=null&&(o=_n({inputs:{x:g},backend:s,attrs:{perm:v}}),u=We(u.length,e)),Cn("sum",u,o.shape.length);const[c,l]=mn(o.shape,u),f=ps(o.dtype,"int32");let m=Md(s,c,f);const h=mt(l),p=s.data.get(m.dataId).values,y=s.data.get(o.dataId).values;for(let x=0;x<p.length;++x){const T=x*h;let C=0;for(let E=0;E<h;++E)C+=y[T+E];p[x]=C}if(i){const x=Ue(m.shape,a),T=m;m=xe({inputs:{x:m},backend:s,attrs:{shape:x}}),s.disposeIntermediateTensorInfo(T)}return s.disposeIntermediateTensorInfo(g),v!=null&&s.disposeIntermediateTensorInfo(o),m}const kj={kernelName:sm,backendName:"cpu",kernelFunc:$c};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zj(n){const{inputs:t,backend:s,attrs:r}=n,{equation:d}=r,S=t,{allDims:i,summedDims:g,idDims:e}=S2(d,S.length);w2(i.length,e,S);const{path:a,steps:v}=E2(g,e),u=v.length;let o=null,c=i.length;const l=[];for(let f=0;f<u;++f){for(const m of v[f]){const{permutationIndices:h,expandDims:p}=C2(c,e[m]);let y;A2(h)?y=S[m]:(y=_n({inputs:{x:S[m]},backend:s,attrs:{perm:h}}),l.push(y));const x=y.shape.slice();for(let T=0;T<p.length;++T)x.splice(p[T],0,1);ee(y.shape,x)||(y=xe({inputs:{x:y},backend:s,attrs:{shape:x}}),l.push(y)),o===null?o=y:(o=jm({inputs:{a:y,b:o},backend:s}),l.push(o))}f<u-1&&(a[f]>=0&&(o=$c({inputs:{x:o},backend:s,attrs:{axis:a[f]-(i.length-c),keepDims:!1}}),l.push(o)),c--)}for(const f of l)f!==o&&s.disposeIntermediateTensorInfo(f);return o}const Vj={kernelName:Ty,backendName:"cpu",kernelFunc:zj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gj(n){const{inputs:t,backend:s}=n,{dy:r,y:d}=t;Lt([r,d],"eluGrad");const S=new Float32Array(mt(d.shape)),i=s.data.get(d.dataId).values,g=s.data.get(r.dataId).values;for(let e=0;e<i.length;++e){const a=i[e];a>=0?S[e]=g[e]:S[e]=g[e]*(a+1)}return s.makeTensorInfo(d.shape,"float32",S)}const Uj={kernelName:Sy,backendName:"cpu",kernelFunc:Gj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wj=p2,Xj=m2,Hj=v2,Yj=g2,Kj=x2,jj=y2,Zj=ce($h,n=>{const t=Math.sign(n),s=Math.abs(n),r=1/(1+Wj*s);return t*(1-((((jj*r+Kj)*r+Yj)*r+Hj)*r+Xj)*r*Math.exp(-s*s))}),Qj={kernelName:$h,backendName:"cpu",kernelFunc:Zj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kd(n){const{inputs:t,backend:s,attrs:r}=n,{input:d}=t,{dim:S}=r,i=d.shape.length,g=d.shape.slice();let e=S;return S<0&&(q(-(i+1)<=S,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),e=i+S+1),g.splice(e,0,1),xe({inputs:{x:d},backend:s,attrs:{shape:g}})}const Jj={kernelName:bp,backendName:"cpu",kernelFunc:kd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qj=He((n,t)=>n/t),iT=on(Lh,qj),j0={kernelName:Lh,backendName:"cpu",kernelFunc:iT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FF(n,t,s){const r=n.shape,d=r[0],S=r[1],i=s.data.get(n.dataId),g=i.complexTensorInfos.real,e=i.complexTensorInfos.imag,a=[d,S],v=mt(a),u=Tn("float32",v),o=Tn("float32",v);for(let m=0;m<d;m++){const h=oo({inputs:{x:g},backend:s,attrs:{begin:[m,0],size:[1,S]}}),p=oo({inputs:{x:e},backend:s,attrs:{begin:[m,0],size:[1,S]}}),y=os({inputs:{real:h,imag:p},backend:s}),{real:x,imag:T}=_j(y,t,s),C=Tr(x,T);for(let E=0;E<S;E++){const A=T2(C,E);u[m*S+E]=A.real,o[m*S+E]=A.imag}s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(y)}const c=s.makeTensorInfo(a,"float32",u),l=s.makeTensorInfo(a,"float32",o),f=os({inputs:{real:c,imag:l},backend:s});return s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(l),f}function _j(n,t,s){const r=mt(n.shape),d=s.data.get(n.dataId),S=s.data.get(d.complexTensorInfos.real.dataId).values,i=s.data.get(d.complexTensorInfos.imag.dataId).values;if(tZ(r)){const g=Z0(S,i,r,t,s),e=[n.shape[0],n.shape[1]];if(t){const a=s.makeTensorInfo(e,"float32",g.real),v=s.makeTensorInfo(e,"float32",g.imag),u=s.makeTensorInfo([],"float32",pa(r,"float32")),o=Qi({inputs:{x:u},backend:s}),c=j0.kernelFunc({inputs:{a,b:u},backend:s}),l=j0.kernelFunc({inputs:{a:v,b:o},backend:s}),f=s.data.get(c.dataId).values,m=s.data.get(l.dataId).values;return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(l),{real:f,imag:m}}return g}else{const g=Tr(S,i),e=eZ(g,r,t);return WR(e)}}function tZ(n){return(n&n-1)===0}function Z0(n,t,s,r,d){if(s===1)return{real:n,imag:t};const S=Tr(n,t),i=s/2,g=XR(S),e=g.real,a=g.imag,v=[e.length],u=d.makeTensorInfo(v,"float32",e),o=d.makeTensorInfo(v,"float32",a),c=os({inputs:{real:u,imag:o},backend:d}),l=HR(S),f=l.real,m=l.imag,h=[f.length],p=d.makeTensorInfo(h,"float32",f),y=d.makeTensorInfo(h,"float32",m),x=os({inputs:{real:p,imag:y},backend:d}),T=Z0(e,a,i,r,d),C=T.real,E=T.imag,A=[C.length],w=d.makeTensorInfo(A,"float32",C),b=d.makeTensorInfo(A,"float32",E),I=os({inputs:{real:w,imag:b},backend:d}),R=Z0(f,m,i,r,d),N=R.real,F=R.imag,P=[N.length],O=d.makeTensorInfo(P,"float32",N),M=d.makeTensorInfo(P,"float32",F),L=os({inputs:{real:O,imag:M},backend:d}),k=KR(s,r),V=[k.real.length],W=d.makeTensorInfo(V,"float32",k.real),K=d.makeTensorInfo(V,"float32",k.imag),B=os({inputs:{real:W,imag:K},backend:d}),G=jm({inputs:{a:B,b:L},backend:d}),D=Rl({inputs:{a:I,b:G},backend:d}),$=nT({inputs:{a:I,b:G},backend:d}),z=ao({inputs:{input:D},backend:d}),H=ao({inputs:{input:$},backend:d}),Y=Nl({inputs:{input:D},backend:d}),Z=Nl({inputs:{input:$},backend:d}),Q=Pl({inputs:[z,H],backend:d,attrs:{axis:0}}),tt=Pl({inputs:[Y,Z],backend:d,attrs:{axis:0}}),et=d.data.get(Q.dataId).values,lt=d.data.get(tt.dataId).values;return d.disposeIntermediateTensorInfo(u),d.disposeIntermediateTensorInfo(o),d.disposeIntermediateTensorInfo(c),d.disposeIntermediateTensorInfo(p),d.disposeIntermediateTensorInfo(y),d.disposeIntermediateTensorInfo(x),d.disposeIntermediateTensorInfo(w),d.disposeIntermediateTensorInfo(b),d.disposeIntermediateTensorInfo(I),d.disposeIntermediateTensorInfo(O),d.disposeIntermediateTensorInfo(M),d.disposeIntermediateTensorInfo(L),d.disposeIntermediateTensorInfo(W),d.disposeIntermediateTensorInfo(K),d.disposeIntermediateTensorInfo(B),d.disposeIntermediateTensorInfo(G),d.disposeIntermediateTensorInfo(D),d.disposeIntermediateTensorInfo($),d.disposeIntermediateTensorInfo(z),d.disposeIntermediateTensorInfo(Y),d.disposeIntermediateTensorInfo(H),d.disposeIntermediateTensorInfo(Z),d.disposeIntermediateTensorInfo(Q),d.disposeIntermediateTensorInfo(tt),{real:et,imag:lt}}function eZ(n,t,s){const r=new Float32Array(t*2);for(let d=0;d<t;d++){let S=0,i=0;for(let g=0;g<t;g++){const e=jR(d*g,t,s),a=T2(n,g);S+=a.real*e.real-a.imag*e.imag,i+=a.real*e.imag+a.imag*e.real}s&&(S/=t,i/=t),YR(r,S,i,d)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nZ(n){const{inputs:t,backend:s}=n,{input:r}=t,d=mt(r.shape),S=r.shape[r.shape.length-1],i=d/S,g=xe({inputs:{x:r},backend:s,attrs:{shape:[i,S]}}),e=FF(g,!1,s),a=xe({inputs:{x:e},backend:s,attrs:{shape:r.shape}});return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(e),a}const sZ={kernelName:Cy,backendName:"cpu",kernelFunc:nZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rT(n){const{backend:t,attrs:s}=n,{shape:r,value:d,dtype:S}=s,i=S||Bl(d),g=Ge(i,mt(r));return rZ(g,d,i),t.makeTensorInfo(r,i,g)}const iZ={kernelName:wy,backendName:"cpu",kernelFunc:rT};function rZ(n,t,s){n.fill(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aZ={kernelName:Ey,backendName:"cpu",kernelFunc:({inputs:n,attrs:t,backend:s})=>{const{image:r}=n,d=s,S=Tn(r.dtype,mt(r.shape)),[i,g,e,a]=r.shape,v=d.data.get(r.dataId).values;for(let o=0;o<i;o++){const c=o*e*g*a;for(let l=0;l<g;l++){const f=l*(e*a);for(let m=0;m<e;m++){const h=m*a;for(let p=0;p<a;p++){const y=Math.round(e-m-1),x=c+f+h+p;let T=v[x];if(y>=0&&y<e){const C=y*a,E=c+f+C+p;T=v[E]}S[x]=T}}}}return{dataId:d.write(S,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oZ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,filter:S,bias:i,preluActivationWeights:g}=t,{strides:e,pad:a,dataFormat:v,dilations:u,dimRoundingMode:o,activation:c,leakyreluAlpha:l}=r;let f=NF({inputs:{x:d,filter:S},backend:s,attrs:{strides:e,pad:a,dataFormat:v,dilations:u,dimRoundingMode:o}});if(i){const m=f;if(v==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const h=xe({inputs:{x:i},backend:s,attrs:{shape:[i.shape[0],1,1]}});f=Rl({inputs:{a:f,b:h},backend:s}),s.disposeIntermediateTensorInfo(h)}else f=Rl({inputs:{a:f,b:i},backend:s});s.disposeIntermediateTensorInfo(m)}if(c){const m=f;if(v==="NCHW"&&c==="prelu"&&g.shape.length===1&&g.shape[0]!==1){const h=xe({inputs:{x:g},backend:s,attrs:{shape:[g.shape[0],1,1]}});f=Bd(s,f,c,h,l),s.disposeIntermediateTensorInfo(h)}else f=Bd(s,f,c,g,l);s.disposeIntermediateTensorInfo(m)}return f}const lZ={kernelName:md,backendName:"cpu",kernelFunc:oZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uZ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,filter:S,bias:i,preluActivationWeights:g}=t,{strides:e,pad:a,dataFormat:v,dilations:u,dimRoundingMode:o,activation:c,leakyreluAlpha:l}=r;let f=PF({inputs:{x:d,filter:S},backend:s,attrs:{strides:e,pad:a,dataFormat:v,dilations:u,dimRoundingMode:o}});if(i){const m=f;f=Rl({inputs:{a:f,b:i},backend:s}),s.disposeIntermediateTensorInfo(m)}if(c){const m=f;f=Bd(s,f,c,g,l),s.disposeIntermediateTensorInfo(m)}return f}const hZ={kernelName:vd,backendName:"cpu",kernelFunc:uZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cZ(n){const{inputs:t,backend:s}=n,{params:r,indices:d}=t,S=mt(r.shape),i=d.shape,g=i[i.length-1],[e,a,v,u]=s2(r,d);if(a===0)return s.makeTensorInfo(e,r.dtype,[]);const o=s.data.get(d.dataId).values,c=s.bufferSync(r),l=GP(o,c,r.dtype,a,g,v,u,r.shape,S);return s.makeTensorInfo(e,r.dtype,l.values)}const fZ={kernelName:Ay,backendName:"cpu",kernelFunc:cZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dZ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,indices:S}=t,{axis:i,batchDims:g}=r;Lt([d,S],"gatherV2");const e=Qt(i,d.shape)[0],a=s.data.get(S.dataId).values,v=d.shape[e];for(let x=0;x<a.length;++x){const T=a[x];q(T<=v-1&&T>=0,()=>`GatherV2: the index value ${T} is not in [0, ${v-1}]`)}let u=g;g==null&&(u=0);const o=mt(S.shape),c=I2(d,S,e,u),l=xe({inputs:{x:d},backend:s,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=xe({inputs:{x:S},backend:s,attrs:{shape:[c.batchSize,o/c.batchSize]}}),m=[c.batchSize,c.outerSize,o/c.batchSize,c.sliceSize],h=s.bufferSync(f),p=s.bufferSync(l),y=UP(p,h,m);return s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(f),s.makeTensorInfo(c.outputShape,y.dtype,y.values)}const pZ={kernelName:Rp,backendName:"cpu",kernelFunc:dZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mZ(n){const{inputs:t,backend:s}=n,{input:r}=t,d=mt(r.shape),S=r.shape[r.shape.length-1],i=d/S,g=xe({inputs:{x:r},backend:s,attrs:{shape:[i,S]}}),e=FF(g,!0,s),a=xe({inputs:{x:e},backend:s,attrs:{shape:r.shape}});return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(e),a}const vZ={kernelName:by,backendName:"cpu",kernelFunc:mZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gZ=ce(Wh,n=>Number.isFinite(n)?1:0,"bool"),xZ={kernelName:Wh,backendName:"cpu",kernelFunc:gZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yZ=ce(Xh,n=>Math.abs(n)===1/0?1:0,"bool"),TZ={kernelName:Xh,backendName:"cpu",kernelFunc:yZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SZ=ce(Hh,n=>Number.isNaN(n)?1:0,"bool"),CZ={kernelName:Hh,backendName:"cpu",kernelFunc:SZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wZ(n){const{backend:t,attrs:s}=n,{start:r,stop:d,num:S}=s,i=KP(r,d,S);return t.makeTensorInfo([i.length],"float32",i)}const EZ={kernelName:Ry,backendName:"cpu",kernelFunc:wZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AZ=ce(Kh,n=>Math.log1p(n)),bZ={kernelName:Kh,backendName:"cpu",kernelFunc:AZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IZ=He((n,t)=>n&&t),RZ=on(Op,IZ,null,"bool"),NZ={kernelName:Op,backendName:"cpu",kernelFunc:RZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PZ=ce(Lp,n=>n?0:1,"bool"),FZ={kernelName:Lp,backendName:"cpu",kernelFunc:PZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DZ=He((n,t)=>n||t),OZ=on(Mp,DZ,null,"bool"),LZ={kernelName:Mp,backendName:"cpu",kernelFunc:OZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MZ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{depthRadius:S,bias:i,alpha:g,beta:e}=r;Lt(d,"LRN");const a=d.shape[3],v=a-1,u=s.data.get(d.dataId).values,o=mt(d.shape),c=new Float32Array(o);function l(f){const m=f%a;let h=f-m+Math.max(0,m-S);const p=f-m+Math.min(m+S,v);let y=0;for(;h<=p;h++){const x=u[h];y+=x*x}return y}for(let f=0;f<o;f++){const m=l(f),h=u[f]*Math.pow(i+g*m,-e);c[f]=h}return s.makeTensorInfo(d.shape,d.dtype,c)}const $Z={kernelName:$p,backendName:"cpu",kernelFunc:MZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BZ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,y:S,dy:i}=t,{depthRadius:g,bias:e,alpha:a,beta:v}=r;Lt(i,"LRNGrad");const u=mt(i.shape),o=i.shape[3],c=s.data.get(i.dataId).values,l=s.data.get(d.dataId).values,f=s.data.get(S.dataId).values,m=new Float32Array(u),h=u;for(let p=0;p<h;p++){const y=p%o,x=p-y+Math.max(0,y-g),T=p-y+Math.min(o,y+g+1);let C=0;for(let E=x;E<T;E++)C+=Math.pow(l[E],2);C=a*C+e;for(let E=x;E<T;E++){let A=-2*a*v*l[E]*f[p]/C;p===E&&(A+=Math.pow(C,-v)),A*=c[p],m[E]+=A}}return s.makeTensorInfo(i.shape,d.dtype,m)}const kZ={kernelName:Ny,backendName:"cpu",kernelFunc:BZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DF(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{reductionIndices:S,keepDims:i}=r,g=s;let e=d.shape;const a=e.length,v=Qt(S,e);let u=v;const o=Oe(u,a);let c=g.data.get(d.dataId).values;if(o!=null){const x=new Array(a);for(let T=0;T<x.length;T++)x[T]=e[o[T]];c=tT(c,e,d.dtype,o,x),u=We(u.length,a),e=x}Lt(d,"max"),Cn("max",u,a);const[l,f]=mn(e,u),m=mt(f),h=ZP(c,m,l,d.dtype),p=g.write(h,l,d.dtype);let y=l;return i&&(y=Ue(l,v)),{dataId:p,shape:y,dtype:d.dtype}}const zZ={kernelName:Bp,backendName:"cpu",kernelFunc:DF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VZ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t;Lt(d,"maxPool");const{filterSize:S,strides:i,pad:g,dimRoundingMode:e}=r,a=1;q(Sn(i,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const v=oi(d.shape,S,i,a,g,e);let u;if(v.filterWidth===1&&v.filterHeight===1&&ee(v.inShape,v.outShape))u=Qi({inputs:{x:d},backend:s});else{const o=s.data.get(d.dataId).values,c=kt(d.shape),l=sT(o,d.shape,d.dtype,c,v,"max");u=s.makeTensorInfo(v.outShape,d.dtype,l.values)}return u}const GZ={kernelName:kp,backendName:"cpu",kernelFunc:VZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UZ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{filterSize:S,strides:i,pad:g,dimRoundingMode:e,dataFormat:a}=r;Lt(d,"maxPool3d");const v=wr(d.shape,S,i,1,g,e,a),u=s.data.get(d.dataId).values,o=RF(u,d.shape,d.dtype,kt(d.shape),v,"max");return s.makeTensorInfo(o.shape,"float32",o.values)}const WZ={kernelName:zp,backendName:"cpu",kernelFunc:UZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XZ(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,input:S}=t,{filterSize:i,strides:g,pad:e,dimRoundingMode:a}=r;Lt([d,S],"maxPool3DGrad");const v=wr(S.shape,i,g,1,e,a),u=s.bufferSync(S),o=DK(u,v),c=v.strideDepth,l=v.strideHeight,f=v.strideWidth,m=v.dilationDepth,h=v.dilationHeight,p=v.dilationWidth,y=v.effectiveFilterDepth,x=v.effectiveFilterHeight,T=v.effectiveFilterWidth,C=y-1-v.padInfo.front,E=T-1-v.padInfo.left,A=x-1-v.padInfo.top,w=jt(S.shape,"float32"),b=s.bufferSync(d);for(let I=0;I<v.batchSize;++I)for(let R=0;R<v.inChannels;++R)for(let N=0;N<v.inDepth;++N)for(let F=0;F<v.inHeight;++F)for(let P=0;P<v.inWidth;++P){const O=N-C,M=F-A,L=P-E;let k=0;for(let V=0;V<y;V+=m){const W=(O+V)/c;if(!(W<0||W>=v.outDepth||Math.floor(W)!==W))for(let K=0;K<x;K+=h){const B=(M+K)/l;if(!(B<0||B>=v.outHeight||Math.floor(B)!==B))for(let G=0;G<T;G+=p){const D=(L+G)/f;if(D<0||D>=v.outWidth||Math.floor(D)!==D)continue;const $=y*x*T-1-o.get(I,W,B,D,R),z=V*x*T+K*T+G,H=$===z?1:0;if(H===0)continue;const Y=b.get(I,W,B,D,R);k+=Y*H}}}w.set(k,I,N,F,P,R)}return s.makeTensorInfo(w.shape,w.dtype,w.values)}const HZ={kernelName:Fy,backendName:"cpu",kernelFunc:XZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YZ(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,input:S,output:i}=t,g=S;Lt([S,i],"maxPoolGrad");const{filterSize:e,strides:a,pad:v,dimRoundingMode:u}=r,o=oi(g.shape,e,a,1,v,u),c=s.data.get(g.dataId).values,l=jt(o.outShape,g.dtype,IF(c,g.shape,g.dtype,o).values),f=o.strideHeight,m=o.strideWidth,h=o.dilationHeight,p=o.dilationWidth,y=o.effectiveFilterHeight,x=o.effectiveFilterWidth,T=x-1-o.padInfo.left,C=y-1-o.padInfo.top,E=jt(g.shape,"float32"),A=s.data.get(d.dataId).values,w=jt(d.shape,"float32",A);for(let b=0;b<o.batchSize;++b)for(let I=0;I<o.inChannels;++I)for(let R=0;R<o.inHeight;++R)for(let N=0;N<o.inWidth;++N){const F=R-C,P=N-T;let O=0;for(let M=0;M<y;M+=h){const L=(F+M)/f;if(!(L<0||L>=o.outHeight||Math.floor(L)!==L))for(let k=0;k<x;k+=p){const V=(P+k)/m;if(V<0||V>=o.outWidth||Math.floor(V)!==V)continue;const W=y*x-1-l.get(b,L,V,I),K=M*x+k,B=W===K?1:0;if(B===0)continue;const G=w.get(b,L,V,I);O+=G*B}}E.set(O,b,R,N,I)}return s.makeTensorInfo(E.shape,E.dtype,E.values)}const KZ={kernelName:Py,backendName:"cpu",kernelFunc:YZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jZ(n,t,s,r,d){const S=kt(t),i=sT(n,t,s,S,d,"max"),g=IF(n,t,s,d,!0,r);return[i.values,g.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZZ={kernelName:Dy,backendName:"cpu",kernelFunc:({inputs:n,attrs:t,backend:s})=>{const{x:r}=n,{filterSize:d,strides:S,pad:i,includeBatchInIndex:g}=t,e=s;Lt(r,"MaxPoolWithArgmax");const a=e.data.get(r.dataId).values,v=oi(r.shape,d,S,[1,1],i),[u,o]=jZ(a,r.shape,r.dtype,g,v),c=e.write(u,v.outShape,r.dtype),l=e.write(o,v.outShape,r.dtype);return[{dataId:c,shape:v.outShape,dtype:r.dtype},{dataId:l,shape:v.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QZ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,keepDims:i}=r,g=Qt(S,d.shape),a=mn(d.shape,g)[1],v=mt(a),u=[],o=s.makeTensorInfo([],"float32",new Float32Array([v]));u.push(o);const c=ua({inputs:{x:d},backend:s,attrs:{dtype:"float32"}});u.push(c);const l=iT({inputs:{a:c,b:o},backend:s});u.push(l);const f=$c({inputs:{x:l},backend:s,attrs:{axis:S,keepDims:i}});return u.forEach(m=>s.disposeIntermediateTensorInfo(m)),f}const JZ={kernelName:Vp,backendName:"cpu",kernelFunc:QZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qZ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,keepDims:i}=r;Lt(d,"min");const g=Qt(S,d.shape);let e=g;const a=Oe(e,d.shape.length);let v=d;a!=null&&(v=_n({inputs:{x:d},backend:s,attrs:{perm:a}}),e=We(e.length,d.shape.length)),Cn("min",e,v.shape.length);const[u,o]=mn(v.shape,e),c=mt(o),l=Pn(mt(u),v.dtype),f=s.data.get(v.dataId).values;for(let h=0;h<l.length;++h){const p=h*c;let y=f[p];for(let x=0;x<c;++x){const T=f[p+x];(Number.isNaN(T)||T<y)&&(y=T)}l[h]=y}a!=null&&s.disposeIntermediateTensorInfo(v);const m=s.makeTensorInfo(u,v.dtype,l);if(i){const h=Ue(u,g),p=xe({inputs:{x:m},backend:s,attrs:{shape:h}});return s.disposeIntermediateTensorInfo(m),p}return m}const _Z={kernelName:Gp,backendName:"cpu",kernelFunc:qZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tQ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{paddings:S,mode:i}=r;Lt(d,"mirrorPad");const g=S.map((y,x)=>y[0]+d.shape[x]+y[1]),e=S.map(y=>y[0]),a=S.map((y,x)=>y[0]+d.shape[x]),v=i==="reflect"?0:1,u=s.data.get(d.dataId).values,o=d.shape.length,c=kt(d.shape),l=mt(g),f=g.length,m=kt(g),h=Tn(d.dtype,l);for(let y=0;y<l;y++){let x=kl(y,f,m);for(let C=0;C<f;C++)x[C]<e[C]?x[C]=e[C]*2-x[C]-v:x[C]>=a[C]&&(x[C]=(a[C]-1)*2-x[C]+v);x=x.map((C,E)=>C-e[E]);const T=Xi(x,o,c);h[y]=u[T]}return{dataId:s.write(h,g,d.dtype),shape:g,dtype:d.dtype}}const eQ={kernelName:Up,backendName:"cpu",kernelFunc:tQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nQ=He((n,t)=>{const s=n%t;return n<0&&t<0||n>=0&&t>=0?s:(s+t)%t}),sQ=on(Qh,nQ),iQ={kernelName:Qh,backendName:"cpu",kernelFunc:sQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OF(n){const{inputs:t,backend:s,attrs:r}=n,{logits:d}=t,{dim:S}=r,i=d.shape.length;let g=S;if(g===-1&&(g=i-1),g!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${g}`);const e=Qt([g],d.shape),a=DF({inputs:{x:d},backend:s,attrs:{reductionIndices:e,keepDims:!1}}),v=Ue(a.shape,e),u=xe({inputs:{x:a},backend:s,attrs:{shape:v}}),o=nT({inputs:{a:d,b:u},backend:s}),c=BP({inputs:{x:o},backend:s}),l=$c({inputs:{x:c},backend:s,attrs:{axis:e,keepDims:!1}}),f=xe({inputs:{x:l},backend:s,attrs:{shape:v}}),m=iT({inputs:{a:c,b:f},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(f),m}const rQ={kernelName:am,backendName:"cpu",kernelFunc:OF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aQ(n){const{inputs:t,backend:s,attrs:r}=n,{logits:d}=t,{numSamples:S,seed:i,normalized:g}=r;Lt(d,"multinomial");const e=g?d:OF({inputs:{logits:d},backend:s,attrs:{dim:-1}}),a=e.shape[0],v=e.shape[1],u=s.data.get(e.dataId).values,o=[a,S],c=Pn(mt(o),"int32");for(let l=0;l<a;++l){const f=l*v,m=new Float32Array(v-1);m[0]=u[f];for(let y=1;y<m.length;++y)m[y]=m[y-1]+u[f+y];const h=wm.alea(i.toString()),p=l*S;for(let y=0;y<S;++y){const x=h();c[p+y]=m.length;for(let T=0;T<m.length;T++)if(x<m[T]){c[p+y]=T;break}}}return g||s.disposeIntermediateTensorInfo(e),s.makeTensorInfo(o,"int32",c)}const oQ={kernelName:Oy,backendName:"cpu",kernelFunc:aQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lQ=Q1;function uQ(n){const{inputs:t,backend:s,attrs:r}=n,{boxes:d,scores:S}=t,{maxOutputSize:i,iouThreshold:g,scoreThreshold:e}=r;Lt(d,"NonMaxSuppression");const a=s.data.get(d.dataId).values,v=s.data.get(S.dataId).values,{selectedIndices:u}=lQ(a,v,i,g,e);return s.makeTensorInfo([u.length],"int32",new Int32Array(u))}const hQ={kernelName:Ly,backendName:"cpu",kernelFunc:uQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cQ=J1;function fQ(n){const{inputs:t,backend:s,attrs:r}=n,{boxes:d,scores:S}=t,{maxOutputSize:i,iouThreshold:g,scoreThreshold:e,padToMaxOutputSize:a}=r;Lt(d,"NonMaxSuppressionPadded");const v=s.data.get(d.dataId).values,u=s.data.get(S.dataId).values,{selectedIndices:o,validOutputs:c}=cQ(v,u,i,g,e,a);return[s.makeTensorInfo([o.length],"int32",new Int32Array(o)),s.makeTensorInfo([],"int32",new Int32Array([c]))]}const dQ={kernelName:My,backendName:"cpu",kernelFunc:fQ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pQ=q1;function mQ(n){const{inputs:t,backend:s,attrs:r}=n,{boxes:d,scores:S}=t,{maxOutputSize:i,iouThreshold:g,scoreThreshold:e,softNmsSigma:a}=r;Lt(d,"NonMaxSuppressionWithScore");const v=s.data.get(d.dataId).values,u=s.data.get(S.dataId).values,o=i,c=g,l=e,f=a,{selectedIndices:m,selectedScores:h}=pQ(v,u,o,c,l,f);return[s.makeTensorInfo([m.length],"int32",new Int32Array(m)),s.makeTensorInfo([h.length],"float32",new Float32Array(h))]}const vQ={kernelName:$y,backendName:"cpu",kernelFunc:mQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gQ(n){const{inputs:t,backend:s,attrs:r}=n,{indices:d}=t,{dtype:S,depth:i,onValue:g,offValue:e}=r;Lt(d,"oneHot");const a=mt(d.shape),v=new Float32Array(a*i);v.fill(e);const u=s.data.get(d.dataId).values;for(let o=0;o<a;++o)u[o]>=0&&u[o]<i&&(v[o*i+u[o]]=g);return s.makeTensorInfo([...d.shape,i],S,v)}const xQ={kernelName:Yp,backendName:"cpu",kernelFunc:gQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zd(n){const{inputs:t,backend:s}=n,{x:r}=t;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const d=ao({inputs:{input:r},backend:s}),S=zd({inputs:{x:d},backend:s}),i=Nl({inputs:{input:r},backend:s}),g=zd({inputs:{x:i},backend:s}),e=os({inputs:{real:S,imag:g},backend:s});return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo(i),s.disposeIntermediateTensorInfo(g),e}else return rT({backend:s,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const yQ={kernelName:hm,backendName:"cpu",kernelFunc:zd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LF(n){const{inputs:t,backend:s}=n,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const d=ao({inputs:{input:r},backend:s}),S=LF({inputs:{x:d},backend:s}),i=Nl({inputs:{input:r},backend:s}),g=zd({inputs:{x:i},backend:s}),e=os({inputs:{real:S,imag:g},backend:s});return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo(i),s.disposeIntermediateTensorInfo(g),e}else return rT({backend:s,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const TQ={kernelName:Hp,backendName:"cpu",kernelFunc:LF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MF(n){const{inputs:t,backend:s,attrs:r}=n,{axis:d}=r;if(t.length===1)return kd({inputs:{input:t[0]},backend:s,attrs:{dim:d}});const S=t[0].shape,i=t[0].dtype;t.forEach(v=>{xs(S,v.shape,"All tensors passed to stack must have matching shapes"),q(i===v.dtype,()=>"All tensors passed to stack must have matching dtypes")});const g=[],e=t.map(v=>{const u=kd({inputs:{input:v},backend:s,attrs:{dim:d}});return g.push(u),u}),a=Pl({inputs:e,backend:s,attrs:{axis:d}});return g.forEach(v=>s.disposeIntermediateTensorInfo(v)),a}const SQ={kernelName:Kp,backendName:"cpu",kernelFunc:MF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CQ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{paddings:S,constantValue:i}=r;Lt(d,"pad");const g=S.map((p,y)=>p[0]+d.shape[y]+p[1]),e=S.map(p=>p[0]),a=s.data.get(d.dataId).values,v=mt(d.shape),u=d.shape.length,o=kt(d.shape),c=mt(g),l=g.length,f=kt(g),m=Tn(d.dtype,c);i!==0&&m.fill(i);for(let p=0;p<v;p++){const x=kl(p,u,o).map((C,E)=>C+e[E]),T=Xi(x,l,f);m[T]=a[p]}return{dataId:s.write(m,g,d.dtype),shape:g,dtype:d.dtype}}const $F={kernelName:jp,backendName:"cpu",kernelFunc:CQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wQ=He((n,t)=>Math.pow(n,t)),EQ=on(qh,wQ),AQ={kernelName:qh,backendName:"cpu",kernelFunc:EQ};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bQ(n){const{inputs:t,backend:s,attrs:r}=n,{paramsNestedSplits:d,paramsDenseValues:S,indices:i}=t,g=d.map(m=>s.data.get(m.dataId).values),e=d.map(m=>m.shape),a=s.data.get(S.dataId).values,v=s.data.get(i.dataId).values,[u,o,c]=eF(g,e,a,S.shape,S.dtype,v,i.shape),l=u.map(m=>s.makeTensorInfo([m.length],"int32",m)),f=s.makeTensorInfo(c,S.dtype,o);return l.concat([f])}const IQ={kernelName:By,backendName:"cpu",kernelFunc:bQ};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RQ(n){const{inputs:t,backend:s}=n,{starts:r,limits:d,deltas:S}=t,i=s.data.get(r.dataId).values,g=s.data.get(d.dataId).values,e=s.data.get(S.dataId).values,[a,v]=nF(i,r.shape,r.dtype,g,d.shape,e,S.shape),u=s.makeTensorInfo([a.length],"int32",a),o=s.makeTensorInfo([v.length],r.dtype,v);return[u,o]}const NQ={kernelName:ky,backendName:"cpu",kernelFunc:RQ};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PQ(n){const{inputs:t,backend:s,attrs:r}=n,{shape:d,values:S,defaultValue:i,rowPartitionTensors:g}=t,{rowPartitionTypes:e}=r,a=s.data.get(d.dataId).values,v=s.data.get(S.dataId).values,u=s.data.get(i.dataId).values,o=g.map(m=>s.data.get(m.dataId).values),c=g.map(m=>m.shape),[l,f]=sF(a,d.shape,v,S.shape,S.dtype,u,i.shape,o,c,e);return s.makeTensorInfo(l,S.dtype,f)}const FQ={kernelName:zy,backendName:"cpu",kernelFunc:PQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DQ(n){const{backend:t,attrs:s}=n,{start:r,stop:d,dtype:S,step:i}=s,g=iF(r,d,i,S);return t.makeTensorInfo([g.length],S,g)}const OQ={kernelName:Vy,backendName:"cpu",kernelFunc:DQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LQ=ce(_h,n=>1/n),MQ={kernelName:_h,backendName:"cpu",kernelFunc:LQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Q(n){const{inputs:t,backend:s,attrs:r}=n,{images:d}=t,{alignCorners:S,halfPixelCenters:i,size:g}=r;Lt(d,"resizeBilinear");const e=kt(d.shape),[a,v]=g,[u,o,c,l]=d.shape,f=s.data.get(d.dataId).values,m=new Float32Array(mt([u,a,v,l])),h=[S&&a>1?o-1:o,S&&v>1?c-1:c],p=[S&&a>1?a-1:a,S&&v>1?v-1:v];let y=0;const x=h[0]/p[0],T=h[1]/p[1];for(let C=0;C<u;C++)for(let E=0;E<a;E++){let A;i?A=x*(E+.5)-.5:A=x*E;const w=Math.max(0,Math.floor(A)),b=A-w,I=Math.min(o-1,Math.ceil(A)),R=C*e[0]+w*e[1],N=C*e[0]+I*e[1];for(let F=0;F<v;F++){let P;i?P=T*(F+.5)-.5:P=T*F;const O=Math.max(0,Math.floor(P)),M=P-O,L=Math.min(c-1,Math.ceil(P)),k=R+O*e[2],V=N+O*e[2],W=R+L*e[2],K=N+L*e[2];for(let B=0;B<l;B++){const G=f[k+B],D=f[V+B],$=f[W+B],z=f[K+B],H=G+($-G)*M,Y=D+(z-D)*M,Z=H+(Y-H)*b;m[y++]=Z}}}return s.makeTensorInfo([u,a,v,l],"float32",m)}const BQ={kernelName:_p,backendName:"cpu",kernelFunc:$Q};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQ(n){const{inputs:t,backend:s,attrs:r}=n,{images:d,dy:S}=t,{alignCorners:i}=r;Lt([S,d],"resizeBilinearGrad");const g=kt(d.shape),[e,a,v,u]=d.shape,[,o,c]=S.shape,l=new Float32Array(e*a*v*u),f=[i&&o>1?a-1:a,i&&c>1?v-1:v],m=[i&&o>1?o-1:o,i&&c>1?c-1:c],h=f[0]/m[0],p=f[1]/m[1],y=s.data.get(S.dataId).values;let x=0;for(let T=0;T<e;T++){const C=T*g[0];for(let E=0;E<o;E++){const A=E*h,w=Math.floor(A),b=Math.min(Math.ceil(A),a-1),I=C+w*g[1],R=C+b*g[1],N=A-w,F=1-N;for(let P=0;P<c;P++){const O=P*p,M=Math.floor(O),L=Math.min(Math.ceil(O),v-1),k=O-M,V=1-k,W=I+M*g[2],K=I+L*g[2],B=R+M*g[2],G=R+L*g[2],D=F*V,$=F*k,z=N*V,H=N*k;for(let Y=0;Y<u;Y++){const Z=y[x++];l[W+Y]+=Z*D,l[K+Y]+=Z*$,l[B+Y]+=Z*z,l[G+Y]+=Z*H}}}}return s.makeTensorInfo([e,v,a,u],"float32",l)}const zQ={kernelName:Wy,backendName:"cpu",kernelFunc:kQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VQ(n){const{inputs:t,backend:s,attrs:r}=n,{images:d}=t,{alignCorners:S,halfPixelCenters:i,size:g}=r;Lt(d,"resizeNearestNeighbor");const e=kt(d.shape),[a,v]=g,[u,o,c,l]=d.shape,f=s.data.get(d.dataId).values,m=new Float32Array(u*a*v*l),h=[S&&a>1?o-1:o,S&&v>1?c-1:c],p=[S&&a>1?a-1:a,S&&v>1?v-1:v],y=h[0]/p[0],x=h[1]/p[1];let T=0;for(let C=0;C<u;C++){const E=C*e[0];for(let A=0;A<a;A++){const w=i?y*(A+.5):y*A;let b=Math.min(o-1,S?Math.round(w):Math.floor(w));i&&(b=Math.max(0,b));const I=E+b*e[1];for(let R=0;R<v;R++){const N=i?x*(R+.5):x*R;let F=Math.min(c-1,S?Math.round(N):Math.floor(N));i&&(F=Math.max(0,F));const P=I+F*e[2];for(let O=0;O<l;O++){const M=f[P+O];m[T++]=M}}}}return s.makeTensorInfo([u,a,v,l],d.dtype,m)}const GQ={kernelName:qp,backendName:"cpu",kernelFunc:VQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UQ(n){const{inputs:t,backend:s,attrs:r}=n,{images:d,dy:S}=t,{alignCorners:i}=r;Lt([S,d],"resizeNearestNeighborGrad");const g=kt(d.shape),e=kt(S.shape),[a,v,u,o]=d.shape,[,c,l]=S.shape,f=new Float32Array(a*v*u*o),m=s.data.get(S.dataId).values,h=[i&&c>1?v-1:v,i&&l>1?u-1:u],p=[i&&c>1?c-1:c,i&&l>1?l-1:l],y=h[0]/p[0],x=h[1]/p[1],T=1/y,C=1/x,E=Math.ceil(T)*2+2,A=Math.ceil(C)*2+2;for(let w=0;w<a;w++){const b=w*g[0];for(let I=0;I<v;I++){const R=b+I*g[1],N=Math.floor(I*T),F=Math.floor(N-E/2);for(let P=0;P<u;P++){const O=R+P*g[2],M=Math.floor(P*C),L=Math.floor(M-A/2);for(let k=0;k<o;k++){let V=0;for(let W=0;W<E;W++){const K=W+F;if(K<0||K>=c)continue;const B=b+K*e[1],G=K*y,D=Math.min(v-1,i?Math.round(G):Math.floor(G));if(I===D)for(let $=0;$<A;$++){const z=$+L;if(z<0||z>=l)continue;const H=B+z*e[2],Y=z*x,Z=Math.min(u-1,i?Math.round(Y):Math.floor(Y));P===Z&&(V+=m[H+k])}}f[O+k]=V}}}}return s.makeTensorInfo(d.shape,d.dtype,f)}const WQ={kernelName:Uy,backendName:"cpu",kernelFunc:UQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XQ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{dims:S}=r;Lt(d,"reverse");const i=d.shape.length,g=Qt(S,d.shape);if(i===0)return Qi({inputs:{x:d},backend:s});const e=new nn(d.shape,d.dtype),a=s.bufferSync(d);for(let v=0;v<e.size;v++){const u=e.indexToLoc(v),o=u.slice();g.forEach(c=>o[c]=d.shape[c]-1-o[c]),e.set(a.get(...o),...u)}return s.makeTensorInfo(e.shape,e.dtype,e.values)}const HQ={kernelName:tm,backendName:"cpu",kernelFunc:XQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YQ={kernelName:a1,backendName:"cpu",kernelFunc:({inputs:n,attrs:t,backend:s})=>{const{image:r}=n,{radians:d,fillValue:S,center:i}=t,g=s,e=Tn(r.dtype,mt(r.shape)),[a,v,u,o]=r.shape,[c,l]=c2(i,v,u),f=255,m=Math.sin(d),h=Math.cos(d),p=g.data.get(r.dataId).values;for(let x=0;x<a;x++){const T=x*u*v*o;for(let C=0;C<v;C++){const E=C*(u*o);for(let A=0;A<u;A++){const w=A*o;for(let b=0;b<o;b++){const I=[a,C,A,b],R=I[2],N=I[1];let F=(R-c)*h-(N-l)*m,P=(R-c)*m+(N-l)*h;F=Math.round(F+c),P=Math.round(P+l);let O=S;if(typeof S!="number"&&(b===3?O=f:O=S[b]),F>=0&&F<u&&P>=0&&P<v){const L=P*(u*o),k=F*o,V=T+L+k+b;O=p[V]}const M=T+E+w+b;e[M]=O}}}}return{dataId:g.write(e,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KQ=ce(nc,n=>{const t=Math.floor(n);return n-t<.5?Math.floor(n):n-t>.5?Math.ceil(n):t%2===0?t:t+1}),jQ={kernelName:nc,backendName:"cpu",kernelFunc:KQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZQ(n){const{inputs:t,backend:s,attrs:r}=n,{indices:d,updates:S}=t,{shape:i}=r,{sliceRank:g,numUpdates:e,sliceSize:a,strides:v,outputSize:u}=xo(S,d,i),o=!0,c=s.bufferSync(d),l=s.bufferSync(S),f=Va(c,l,i,u,a,e,g,v,0,o);return s.makeTensorInfo(i,f.dtype,f.values)}const QQ={kernelName:Xy,backendName:"cpu",kernelFunc:ZQ};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JQ(n,t){let s=0,r=n.length,d=0;for(;s<r;)d=Math.floor((s+r)/2),n[d]<t?s=d+1:r=d;return r}function qQ(n,t){let s=0,r=n.length,d=0;for(;s<r;)d=Math.floor((s+r)/2),n[d]<=t?s=d+1:r=d;return r}function _Q(n,t,s,r,d,S){const i=Ge("int32",s*d);for(let g=0;g<s;++g){const e=n.slice(g*r,(g+1)*r),a=g*d;for(let v=0;v<d;++v)i[a+v]=S==="left"?JQ(e,t[v+a]):qQ(e,t[v+a])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tJ(n){const{inputs:t,backend:s,attrs:r}=n,{sortedSequence:d,values:S}=t,{side:i}=r,g=s.data.get(d.dataId).values,e=s.data.get(S.dataId).values,a=_Q(g,e,d.shape[0],d.shape[1],S.shape[1],i);return s.makeTensorInfo(S.shape,"int32",a)}const eJ={kernelName:Yy,backendName:"cpu",kernelFunc:tJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nJ(n){const{inputs:t,backend:s}=n,{condition:r,t:d,e:S}=t;Lt([r,d,S],"select");const i=r.shape.length,g=s.data.get(r.dataId).values,e=s.data.get(d.dataId).values,a=s.data.get(S.dataId).values,v=ps(d.dtype,S.dtype),u=Pn(mt(d.shape),v);let o=0;const c=i===0||i>1||d.shape.length===1?1:mt(d.shape.slice(1));for(let l=0;l<g.length;l++)for(let f=0;f<c;f++)g[l]===1?u[o++]=e[l]:u[o++]=a[l];return s.makeTensorInfo(d.shape,v,u)}const sJ={kernelName:em,backendName:"cpu",kernelFunc:nJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iJ=Mm,rJ=$m,aJ=ce(ic,n=>n>=0?rJ*n:iJ*(Math.exp(n)-1)),oJ={kernelName:ic,backendName:"cpu",kernelFunc:aJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lJ=ce(oc,n=>n<0?-1:n>0?1:0),uJ={kernelName:oc,backendName:"cpu",kernelFunc:lJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hJ=ce(rc,n=>Math.sin(n)),cJ={kernelName:rc,backendName:"cpu",kernelFunc:hJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fJ=ce(ac,n=>Math.sinh(n)),dJ={kernelName:ac,backendName:"cpu",kernelFunc:fJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pJ=11920928955078125e-23,bw=Math.log(pJ)+2,mJ=ce(uc,n=>{const t=n>-bw,s=n<bw,r=Math.exp(n);let d;return s?d=r:t?d=n:d=Math.log(1+r),d}),vJ={kernelName:uc,backendName:"cpu",kernelFunc:mJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gJ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{blockShape:S,paddings:i}=r;Lt([d],"spaceToBatchND");const g=mt(S),e=[[0,0]];e.push(...i);for(let C=1+S.length;C<d.shape.length;++C)e.push([0,0]);const a=$F.kernelFunc({inputs:{x:d},backend:s,attrs:{paddings:e,constantValue:0}}),v=Ac(a.shape,S,g,!1),u=bc(v.length,S.length,!1),o=Ic(a.shape,S,g,!1),f=xe({inputs:{x:a},backend:s,attrs:{shape:v}}),p=_n({inputs:{x:f},backend:s,attrs:{perm:u}}),T=xe({inputs:{x:p},backend:s,attrs:{shape:o}});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(p),T}const xJ={kernelName:im,backendName:"cpu",kernelFunc:gJ};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yJ(n){const{inputs:t,backend:s}=n,{indices:r,values:d,denseShape:S,defaultValue:i}=t;if(S.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${S.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(d.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${d.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const g=s.data.get(r.dataId).values,e=s.data.get(d.dataId).values,a=s.data.get(S.dataId).values,v=s.data.get(i.dataId).values[0],[u,o,c,l,f]=lF(g,r.shape,r.dtype,e,d.dtype,a,v);return[s.makeTensorInfo(o,r.dtype,u),s.makeTensorInfo([o[0]],d.dtype,c),s.makeTensorInfo([l.length],"bool",new Uint8Array(l.map(m=>Number(m)))),s.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}const TJ={kernelName:Ky,backendName:"cpu",kernelFunc:yJ};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SJ(n){const{inputs:t,backend:s}=n,{inputIndices:r,inputShape:d,newShape:S}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(d.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${d.shape}`);if(S.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${S.shape}`);const i=Array.from(s.data.get(d.dataId).values),g=s.data.get(r.dataId).values,e=Array.from(s.data.get(S.dataId).values),[a,v,u]=uF(g,r.shape,r.dtype,i,e);return[s.makeTensorInfo(v,r.dtype,a),s.makeTensorInfo([u.length],S.dtype,new Int32Array(u))]}const CJ={kernelName:jy,backendName:"cpu",kernelFunc:SJ};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wJ(n){const{inputs:t,backend:s}=n,{data:r,indices:d,segmentIds:S}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(d.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${d.shape}`);if(S.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${S.shape}`);if(d.shape[0]!==S.shape[0])throw new Error("segmentIds and indices should have same size.");const i=s.data.get(r.dataId).values,g=s.data.get(d.dataId).values,e=s.data.get(S.dataId).values,[a,v]=eT(i,r.shape,r.dtype,g,e,!0);return s.makeTensorInfo(v,r.dtype,a)}const EJ={kernelName:Zy,backendName:"cpu",kernelFunc:wJ};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AJ(n){const{inputs:t,backend:s}=n,{data:r,indices:d,segmentIds:S}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(d.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${d.shape}`);if(S.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${S.shape}`);if(d.shape[0]!==S.shape[0])throw new Error("segmentIds and indices should have same size.");const i=s.data.get(r.dataId).values,g=s.data.get(d.dataId).values,e=s.data.get(S.dataId).values,[a,v]=eT(i,r.shape,r.dtype,g,e);return s.makeTensorInfo(v,r.dtype,a)}const bJ={kernelName:Qy,backendName:"cpu",kernelFunc:AJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IJ(n){const{inputs:t,backend:s,attrs:r}=n,{sparseIndices:d,sparseValues:S,defaultValue:i}=t,{outputShape:g}=r,{sliceRank:e,numUpdates:a,sliceSize:v,strides:u,outputSize:o}=xo(S,d,g),c=!1,l=s.bufferSync(d);let f;switch(S.dtype){case"bool":{const m=s.bufferSync(S),h=!!s.data.get(i.dataId).values[0];f=Va(l,m,g,o,v,a,e,u,h,c);break}case"float32":{const m=s.bufferSync(S),h=s.data.get(i.dataId).values[0];f=Va(l,m,g,o,v,a,e,u,h,c);break}case"int32":{const m=s.bufferSync(S),h=s.data.get(i.dataId).values[0];f=Va(l,m,g,o,v,a,e,u,h,c);break}case"string":{const m=s.bufferSync(S),h=ta(s.data.get(i.dataId).values[0]);f=Va(l,m,g,o,v,a,e,u,h,c);break}default:throw new Error(`Unsupported type ${S.dtype}`)}return s.makeTensorInfo(g,f.dtype,f.values)}const RJ={kernelName:Jy,backendName:"cpu",kernelFunc:IJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NJ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{numOrSizeSplits:S,axis:i}=r,g=Qt(i,d.shape)[0],e=b2(d,S,g),a=new Array(d.shape.length).fill(0),v=d.shape.slice();return e.map(u=>{const o=[...v];o[g]=u;const c=oo({inputs:{x:d},backend:s,attrs:{begin:a,size:o}});return a[g]+=u,c})}const PJ={kernelName:rm,backendName:"cpu",kernelFunc:NJ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FJ={kernelName:qy,backendName:"cpu",kernelFunc:({inputs:n,backend:t})=>{const{x:s}=n,r=t;Lt(s,"square");const d=r.data.get(s.dataId).values,S=new Float32Array(d.length);for(let g=0;g<d.length;++g){const e=d[g];S[g]=e*e}return{dataId:r.write(S,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DJ=ce(vc,(n,t)=>{const s=t;return isNaN(n)?NaN:n>0?1:s.alpha}),OJ={kernelName:vc,backendName:"cpu",kernelFunc:DJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LJ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{begin:S,end:i,strides:g,beginMask:e,endMask:a,ellipsisMask:v,newAxisMask:u,shrinkAxisMask:o}=r;Lt(d,"stridedSlice");const{finalShapeSparse:c,finalShape:l,isIdentity:f,sliceDim0:m,isSimpleSlice:h,begin:p,end:y,strides:x}=l2(d.shape,S,i,g,e,a,v,u,o);let T;if(f)T=xe({inputs:{x:d},backend:s,attrs:{shape:l}});else if(m||h){q(d.shape.length>=1,()=>`Input must have rank at least 1, got: ${d.shape.length}`);const C=r2(p,y,x),E=oo({inputs:{x:d},backend:s,attrs:{begin:p,size:C}});T=xe({inputs:{x:E},backend:s,attrs:{shape:l}}),s.disposeIntermediateTensorInfo(E)}else{const C=s.bufferSync(d),E=fF(c,C,x,p);T=s.makeTensorInfo(l,E.dtype,E.values)}return T}const MJ={kernelName:_y,backendName:"cpu",kernelFunc:LJ};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $J(n){const{inputs:t,backend:s,attrs:r}=n,{separator:d,nGramWidths:S,leftPad:i,rightPad:g,padWidth:e,preserveShortSequences:a}=r,{data:v,dataSplits:u}=t,o=s.data.get(v.dataId).values,c=s.data.get(u.dataId).values,[l,f]=dF(o,c,d,S,i,g,e,a);return[s.makeTensorInfo([l.length],"string",l),s.makeTensorInfo(u.shape,"int32",f)]}const BJ={kernelName:t1,backendName:"cpu",kernelFunc:$J};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kJ(n){const{inputs:t,backend:s,attrs:r}=n,{skipEmpty:d}=r,{input:S,delimiter:i}=t;if(S.dtype!=="string")throw new Error("Input must be of datatype string");if(S.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${S.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const g=s.data.get(S.dataId).values,e=s.data.get(i.dataId).values[0],[a,v,u]=pF(g,e,d),o=v.length;return[s.makeTensorInfo([o,2],"int32",a),s.makeTensorInfo([o],"string",v),s.makeTensorInfo([2],"int32",new Int32Array(u))]}const zJ={kernelName:e1,backendName:"cpu",kernelFunc:kJ};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VJ(n){const{inputs:t,backend:s,attrs:r}=n,{numBuckets:d}=r,{input:S}=t;if(S.dtype!=="string")throw new Error("Input must be of datatype string");if(d<=0)throw new Error("Number of buckets must be at least 1");const i=s.data.get(S.dataId).values,g=mF(i,d);return s.makeTensorInfo(S.shape,"int32",g)}const GJ={kernelName:n1,backendName:"cpu",kernelFunc:VJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UJ=ce(dc,n=>Math.tan(n)),WJ={kernelName:dc,backendName:"cpu",kernelFunc:UJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XJ=ce(pc,n=>Math.tanh(n)),HJ={kernelName:pc,backendName:"cpu",kernelFunc:XJ};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YJ(n){const{inputs:t,backend:s}=n,{tensor:r,indices:d,updates:S}=t,{sliceRank:i,numUpdates:g,sliceSize:e,strides:a,outputSize:v}=xo(S,d,r.shape),u=!1,o=s.bufferSync(d),c=s.bufferSync(S),l=s.bufferSync(r),f=Va(o,c,r.shape,v,e,g,i,a,l,u);return s.makeTensorInfo(r.shape,f.dtype,f.values)}const KJ={kernelName:Hy,backendName:"cpu",kernelFunc:YJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jJ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{reps:S}=r;Lt(d,"tile");const i=gF(s.bufferSync(d),S);return s.makeTensorInfo(i.shape,i.dtype,i.values)}const ZJ={kernelName:mc,backendName:"cpu",kernelFunc:jJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QJ(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{k:S,sorted:i}=r;Lt(d,"topk");const g=s.data.get(d.dataId).values,[e,a]=yF(g,d.shape,d.dtype,S,i);return[s.makeTensorInfo(e.shape,e.dtype,e.values),s.makeTensorInfo(a.shape,a.dtype,a.values)]}const JJ={kernelName:s1,backendName:"cpu",kernelFunc:QJ};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qJ(n){const{inputs:t,attrs:s,backend:r}=n,{image:d,transforms:S}=t,{interpolation:i,fillMode:g,fillValue:e,outputShape:a}=s,[v,u,o,c]=d.shape,[l,f]=a??[u,o],m=[v,l,f,c],h=kt(d.shape),p=h[0],y=h[1],x=h[2],T=kt(m),C=T[0],E=T[1],A=T[2],w=Tn(d.dtype,mt(m));w.fill(e);const b=r.data.get(d.dataId).values,I=r.data.get(S.dataId).values;for(let N=0;N<v;++N){const F=S.shape[0]===1?I:I.subarray(N*8,N*8+8);for(let P=0;P<l;++P)for(let O=0;O<f;++O)for(let M=0;M<c;++M){let L;const k=F[6]*O+F[7]*P+1;if(k===0)continue;const V=(F[0]*O+F[1]*P+F[2])/k,W=(F[3]*O+F[4]*P+F[5])/k,K=Iw(V,o,g),B=Iw(W,u,g);switch(i){case"nearest":L=iq(b,u,o,p,y,x,N,B,K,M,e);break;case"bilinear":L=rq(b,u,o,p,y,x,N,B,K,M,e);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const G=N*C+P*E+O*A+M;w[G]=L}return r.makeTensorInfo(m,d.dtype,w)}return{dataId:r.write(w,m,d.dtype),shape:d.shape,dtype:d.dtype}}const _J={kernelName:i1,backendName:"cpu",kernelFunc:qJ};function Iw(n,t,s){switch(s){case"reflect":return tq(n,t);case"wrap":return eq(n,t);case"nearest":return sq(n,t);case"constant":default:return nq(n)}}function tq(n,t){let s=n;if(s<0)if(t<=1)s=0;else{const r=2*t;s<r&&(s=r*Math.trunc(-s/r)+s),s=s<-t?s+r:-s-1}else if(s>t-1)if(t<=1)s=0;else{const r=2*t;s-=r*Math.trunc(s/r),s>=t&&(s=r-s-1)}return Qa(0,s,t-1)}function eq(n,t){let s=n;if(s<0)if(t<=1)s=0;else{const r=t-1;s+=t*(Math.trunc(-s/r)+1)}else if(s>t-1)if(t<=1)s=0;else{const r=t-1;s-=t*Math.trunc(s/r)}return Qa(0,s,t-1)}function nq(n,t){return n}function sq(n,t){return Qa(0,n,t-1)}function Eu(n,t,s,r,d,S,i,g,e,a,v){const u=i*r+g*d+e*S+a;return 0<=g&&g<t&&0<=e&&e<s?n[u]:v}function iq(n,t,s,r,d,S,i,g,e,a,v){const u=Math.round(g),o=Math.round(e);return Eu(n,t,s,r,d,S,i,u,o,a,v)}function rq(n,t,s,r,d,S,i,g,e,a,v){const u=Math.floor(g),o=Math.floor(e),c=u+1,l=o+1,f=(l-e)*Eu(n,t,s,r,d,S,i,u,o,a,v)+(e-o)*Eu(n,t,s,r,d,S,i,u,l,a,v),m=(l-e)*Eu(n,t,s,r,d,S,i,c,o,a,v)+(e-o)*Eu(n,t,s,r,d,S,i,c,l,a,v);return(c-g)*f+(g-u)*m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aq(n){const{inputs:t,attrs:s,backend:r}=n,{axis:d}=s,{x:S}=t;Lt(S,"unique");const i=r.data.get(S.dataId).values,{outputValues:g,outputShape:e,indices:a}=TF(i,d,S.shape,S.dtype);return[r.makeTensorInfo(e,S.dtype,g),r.makeTensorInfo([a.length],"int32",a)]}const oq={kernelName:r1,backendName:"cpu",kernelFunc:aq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lq(n){const{inputs:t,backend:s,attrs:r}=n,{value:d}=t;let{axis:S}=r;S<0&&(S+=d.shape.length);const i=d.shape.length,g=d.shape[S],e=new Array(i-1);let a=0;for(let c=0;c<i;c++)c!==S&&(e[a++]=d.shape[c]);const v=new Array(i).fill(0),u=d.shape.slice();u[S]=1;const o=new Array(g);for(let c=0;c<o.length;c++){v[S]=c;const l=oo({inputs:{x:d},backend:s,attrs:{begin:v,size:u}});o[c]=xe({inputs:{x:l},backend:s,attrs:{shape:e}}),s.disposeIntermediateTensorInfo(l)}return o}const uq={kernelName:lm,backendName:"cpu",kernelFunc:lq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hq(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,segmentIds:S}=t,{numSegments:i}=r;Lt(d,"unsortedSegmentSum");const g=d.shape.length,e=S.shape.length,a=[],v=[],u=g-e;let o=S;for(let l=0;l<u;++l){const f=kd({inputs:{input:o},backend:s,attrs:{dim:l+1}});o=f,v.push(f)}for(let l=0;l<i;++l){const f=pa(l,"int32"),m=s.makeTensorInfo([],"int32",f),h=MP({inputs:{a:m,b:o},backend:s}),p=ua({inputs:{x:h},backend:s,attrs:{dtype:"float32"}}),y=jm({inputs:{a:p,b:d},backend:s}),x=$c({inputs:{x:y},backend:s,attrs:{axis:0,keepDims:!1}});a.push(x),v.push(m),v.push(h),v.push(p),v.push(y),v.push(x)}const c=MF({inputs:a,backend:s,attrs:{axis:0}});return v.forEach(l=>s.disposeIntermediateTensorInfo(l)),c}const cq={kernelName:um,backendName:"cpu",kernelFunc:hq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fq=[aK,VH,lK,hK,YH,fK,pK,vK,xK,TK,CK,EK,bK,NK,FK,LK,$K,kK,VK,iK,UK,XK,YK,jH,jK,XH,QH,QK,GH,qK,tj,ej,sj,rj,oj,uj,cj,dj,mj,gj,yj,Sj,wj,Aj,bj,Rj,Pj,Dj,Oj,Lj,Mj,Bj,Vj,JY,Uj,JH,Qj,qH,Jj,tY,sZ,iZ,aZ,nY,iY,lZ,hZ,fZ,pZ,aY,lY,UH,vZ,_K,xZ,TZ,CZ,qY,hY,fY,EZ,pY,bZ,NZ,FZ,LZ,$Z,kZ,zZ,vY,GZ,WZ,HZ,KZ,ZZ,JZ,_Z,xY,eQ,iQ,oQ,TY,CY,hQ,dQ,vQ,EY,xQ,TQ,SQ,$F,AQ,tK,IY,IQ,NQ,FQ,OQ,WH,j0,MQ,eK,nK,sK,BQ,zQ,GQ,WQ,HQ,YQ,jQ,MY,QQ,eJ,sJ,oJ,BY,uJ,cJ,dJ,kY,rQ,vJ,xJ,TJ,CJ,EJ,bJ,RJ,PJ,GY,FJ,WY,HY,OJ,MJ,BJ,zJ,GJ,ZY,kj,WJ,HJ,KJ,ZJ,JJ,_J,AY,oq,uq,cq,yQ];for(const n of fq)Nb(n);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const La={},gf={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function dq(n,t){La[n]=t}function Ii(n,t){if(!(n in La)||t!=null){const r=mq(n,t);if(r!==null)La[n]=r;else return console.log("Could not get context for WebGL version",n),null}const s=La[n];return s==null||s.isContextLost()?(delete La[n],Ii(n)):(s.disable(s.DEPTH_TEST),s.disable(s.STENCIL_TEST),s.disable(s.BLEND),s.disable(s.DITHER),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SAMPLE_COVERAGE),s.enable(s.SCISSOR_TEST),s.enable(s.CULL_FACE),s.cullFace(s.BACK),La[n])}function pq(n){if(!dt().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&n===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function mq(n,t){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const s=t??pq(n);return s.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete La[n]},!1),dt().getBool("SOFTWARE_WEBGL_ENABLED")&&(gf.failIfMajorPerformanceCaveat=!1),n===1?s.getContext("webgl",gf)||s.getContext("experimental-webgl",gf):s.getContext("webgl2",gf)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ch;(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(ch||(ch={}));var As;(function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"})(As||(As={}));var xn;(function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(xn||(xn={}));function Bc(n,t){return[t,n]}function vq(n,t){return n*t}function xf(n){const t=mt(n),s=Math.ceil(t/4);return n0(s)}function Yl(n,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(n/2))]}function gq(n,t){const[s,r]=Yl(n,t);return s*r*4}function aT(n,t){const s=n;let r,d,S,i,g,e,a,v,u,o;return dt().getNumber("WEBGL_VERSION")===2?(r=s.R32F,d=s.R16F,S=s.RGBA16F,i=s.RGBA32F,g=s.RED,a=4,v=1,u=s.HALF_FLOAT,o=s.FLOAT,e=s.RGBA8):(r=n.RGBA,d=n.RGBA,S=n.RGBA,i=s.RGBA,g=n.RGBA,a=4,v=4,u=t!=null?t.HALF_FLOAT_OES:null,o=n.FLOAT,e=n.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:d,internalFormatPackedHalfFloat:S,internalFormatPackedFloat:i,textureFormatFloat:g,downloadTextureFormat:e,downloadUnpackNumChannels:a,defaultNumChannels:v,textureTypeHalfFloat:u,textureTypeFloat:o}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pt(n,t){const s=t();return dt().getBool("DEBUG")&&xq(n),s}function xq(n){const t=n.getError();if(t!==n.NO_ERROR)throw new Error("WebGL Error: "+Cq(n,t))}const yq=596e-10,Tq=65504;function Sq(n){return!!(dt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||yq<Math.abs(n)&&Math.abs(n)<Tq)}function Cq(n,t){switch(t){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function yf(n,t){return Ir(n,()=>n.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function wq(n,t){const s=Ir(n,()=>n.createShader(n.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Pt(n,()=>n.shaderSource(s,t)),Pt(n,()=>n.compileShader(s)),n.getShaderParameter(s,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(s)),new Error("Failed to compile vertex shader.");return s}function Eq(n,t){const s=Ir(n,()=>n.createShader(n.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Pt(n,()=>n.shaderSource(s,t)),Pt(n,()=>n.compileShader(s)),dt().get("ENGINE_COMPILE_ONLY"))return s;if(n.getShaderParameter(s,n.COMPILE_STATUS)===!1)throw BF(t,n.getShaderInfoLog(s)),new Error("Failed to compile fragment shader.");return s}const Aq=/ERROR: [0-9]+:([0-9]+):/g;function BF(n,t){const s=Aq.exec(t);if(s==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(n);return}const r=+s[1],d=n.split(`
`),S=d.length.toString().length+2,i=d.map((u,o)=>il((o+1).toString(),S)+u);let g=0;for(let u=0;u<i.length;u++)g=Math.max(i[u].length,g);const e=i.slice(0,r-1),a=i.slice(r-1,r),v=i.slice(r);console.log(e.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${il(a[0],g)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(v.join(`
`))}function bq(n){return Ir(n,()=>n.createProgram(),"Unable to create WebGLProgram.")}function Iq(n,t){if(Pt(n,()=>n.linkProgram(t)),!dt().get("ENGINE_COMPILE_ONLY")&&n.getProgramParameter(t,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Zv(n,t){if(Pt(n,()=>n.validateProgram(t)),n.getProgramParameter(t,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Rq(n,t){const s=Ir(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return Pt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,s)),Pt(n,()=>n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW)),s}function Nq(n,t){const s=Ir(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return Pt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s)),Pt(n,()=>n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW)),s}function Pq(n){return Ir(n,()=>n.createTexture(),"Unable to create WebGLTexture.")}function Fq(n,t){const s=dt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||t<=0){const r=`[${n}x${t}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(n>s||t>s){const r=`[${n}x${t}]`,d=`[${s}x${s}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+d+".")}}function Dq(n){return Ir(n,()=>n.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function Rw(n,t,s,r,d,S,i){const g=n.getAttribLocation(t,s);return g===-1?!1:(Pt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,r)),Pt(n,()=>n.vertexAttribPointer(g,d,n.FLOAT,!1,S,i)),Pt(n,()=>n.enableVertexAttribArray(g)),!0)}function Oq(n,t,s){kq(n,s),Pt(n,()=>n.activeTexture(n.TEXTURE0+s)),Pt(n,()=>n.bindTexture(n.TEXTURE_2D,t))}function Lq(n,t,s){return Ir(n,()=>n.getUniformLocation(t,s),'uniform "'+s+'" not present in program.')}function Mq(n,t,s){return n.getUniformLocation(t,s)}function $q(n,t,s,r){Pt(n,()=>Oq(n,t,r)),Pt(n,()=>n.uniform1i(s,r))}function Qv(n,t,s){Pt(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,s)),Pt(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}function Nw(n,t){Pt(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,t)),Pt(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0))}function Tf(n){const t=n.checkFramebufferStatus(n.FRAMEBUFFER);if(t!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Bq(n,t))}function Bq(n,t){switch(t){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function Ir(n,t,s){const r=Pt(n,()=>t());if(r==null)throw new Error(s);return r}function kq(n,t){const s=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+n.TEXTURE0;if(r<n.TEXTURE0||r>s){const d=`[gl.TEXTURE0, gl.TEXTURE${s}]`;throw new Error(`textureUnit must be in ${d}.`)}}function Fl(n,t=2){return mt(n.slice(0,n.length-t))}function Dl(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function Sf(n){let t=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(t=[Fl(n),...Dl(n)]),t}function zq(n,t=!1){let s=dt().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=dt().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&dt().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=s/2),t&&(s=s*2,r=r*2,n=n.map((g,e)=>e>=n.length-2?ty(n[e]):n[e]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=da(n).newShape);let d=mt(n),S=null;n.length<=1&&d<=s?S=[1,d]:n.length===2&&n[0]<=s&&n[1]<=s?S=n:n.length===3&&n[0]*n[1]<=s&&n[2]<=s?S=[n[0]*n[1],n[2]]:n.length===3&&n[0]<=s&&n[1]*n[2]<=s?S=[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=s&&n[3]<=s?S=[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=s&&n[1]*n[2]*n[3]<=s&&(S=[n[0],n[1]*n[2]*n[3]]);const i=S!=null&&Math.max(...S)>r&&Math.min(...S)<=(t?2:1)&&Math.min(...S)>0;if(S==null||i)if(t){const g=Fl(n);let e=2,a=2;n.length&&([e,a]=Dl(n)),d=g*(e/2)*(a/2),S=n0(d).map(v=>v*2)}else S=n0(d);return S}function Cf(n){return n%2===0}function Vd(n,t){if(n=n.slice(-2),t=t.slice(-2),ee(n,t)||!n.length||!t.length||n[0]===0||n[1]===0||t[0]===0||t[1]===0)return!0;if(n.length!==t.length){const s=n[n.length-1],r=t[t.length-1];if(s===r||Cf(s)&&Cf(r)&&(n[0]===1||t[0]===1))return!0}return n[1]===t[1]&&Cf(n[0])&&Cf(t[0])}let Jv,qv;function Vq(n){if(Jv==null){const t=Ii(n);Jv=t.getParameter(t.MAX_TEXTURE_SIZE)}return Jv}function Gq(n){if(qv==null){const t=Ii(n);qv=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,qv)}function Uq(n){if(n===0)return 0;let t;const s=Ii(n);return Js(s,"EXT_disjoint_timer_query_webgl2")&&n===2?t=2:Js(s,"EXT_disjoint_timer_query")?t=1:t=0,t}function Js(n,t){return n.getExtension(t)!=null}function Pw(n){try{if(Ii(n)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Wq(n){if(n===0)return!1;const t=Ii(n);if(n===1){if(!Js(t,"OES_texture_float"))return!1}else if(!Js(t,"EXT_color_buffer_float"))return!1;return Q0(t)}function Xq(n){if(n===0)return!1;const t=Ii(n);if(n===1){if(!Js(t,"OES_texture_float")||!Js(t,"WEBGL_color_buffer_float"))return!1}else{if(Js(t,"EXT_color_buffer_float"))return Q0(t);const r="EXT_color_buffer_half_float";if(Js(t,r)){const d=t.getExtension(r);return Hq(t,d)}return!1}return Q0(t)}function Q0(n){const t=aT(n),s=n.createTexture();n.bindTexture(n.TEXTURE_2D,s);const r=1,d=1;n.texImage2D(n.TEXTURE_2D,0,t.internalFormatFloat,r,d,0,t.textureFormatFloat,t.textureTypeFloat,null);const S=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,S),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,s,0);const i=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(s),n.deleteFramebuffer(S),i}function Hq(n,t){const s=aT(n,t),r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r);const d=1,S=1;n.texImage2D(n.TEXTURE_2D,0,s.internalFormatHalfFloat,d,S,0,s.textureFormatFloat,s.textureTypeHalfFloat,null);const i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0);const g=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(r),n.deleteFramebuffer(i),g}function Yq(n){return n!==2?!1:Ii(n).fenceSync!=null}function kc(n,t){Array.isArray(n)||(n=[n]),n.forEach(s=>{s!=null&&q(s.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mt=dt();Mt.registerFlag("HAS_WEBGL",()=>Mt.getNumber("WEBGL_VERSION")>0);Mt.registerFlag("WEBGL_VERSION",()=>Pw(2)?2:Pw(1)?1:0);Mt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Mt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Mt.get("WEBGL_VERSION")===2);Mt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Mt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Mt.registerFlag("WEBGL_PACK",()=>Mt.getBool("HAS_WEBGL"));Mt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_CLIP",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_PACK_REDUCE",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_LAZILY_UNPACK",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_CONV_IM2COL",()=>Mt.getBool("WEBGL_PACK"));Mt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Vq(Mt.getNumber("WEBGL_VERSION")));Mt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Gq(Mt.getNumber("WEBGL_VERSION")));Mt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const n=Mt.getNumber("WEBGL_VERSION");return n===0?0:Uq(n)});Mt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Mt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Yb());Mt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Wq(Mt.getNumber("WEBGL_VERSION")));Mt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Mt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Mt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Mt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Xq(Mt.getNumber("WEBGL_VERSION")));Mt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Yq(Mt.getNumber("WEBGL_VERSION")));Mt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Mt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Mt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,n=>{if(n<0&&n!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${n}.`)});Mt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Yb()?1:-1,n=>{if(n<0&&n!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${n}.`)});Mt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Mt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Mt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Mt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Mt.registerFlag("WEBGL_EXP_CONV",()=>!1);Mt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Mt.getBool("IS_TEST"));Mt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Mt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Mt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Mt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hn(){let n,t,s,r,d,S,i,g,e,a;return dt().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",t="in",s="out",r="in",d="texture",S="outputColor",i="out vec4 outputColor;",g=dt().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",e="",a=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",t="attribute",s="varying",r="varying",d="texture2D",S="gl_FragColor",i="",g=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,e=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,a=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:t,varyingVs:s,varyingFs:r,texture2D:d,output:S,defineOutput:i,defineSpecialNaN:g,defineSpecialInf:e,defineRound:a}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function So(n,t,s="index"){const r=kt(t);return r.map((d,S)=>{const i=`int ${n[S]} = ${s} / ${d}`,g=S===r.length-1?`int ${n[S+1]} = ${s} - ${n[S]} * ${d}`:`index -= ${n[S]} * ${d}`;return`${i}; ${g};`}).join("")}function Zm(n,t,s="index"){const r=kt(t);return r.map((d,S)=>{const i=`int ${n[S]} = ${s} / outShapeStrides[${S}]`,g=S===r.length-1?`int ${n[S+1]} = ${s} - ${n[S]} * outShapeStrides[${S}]`:`index -= ${n[S]} * outShapeStrides[${S}]`;return`${i}; ${g};`}).join("")}function Kq(n,t){const s=n.length,r=n.map(S=>`${t}[${S}]`),d=new Array(s-1);d[s-2]=r[s-1];for(let S=s-3;S>=0;--S)d[S]=`(${d[S+1]} * ${r[S+1]})`;return d}function jq(n,t,s="index"){const r=n.map((S,i)=>i),d=Kq(r,t);return d.map((S,i)=>{const g=`int ${n[i]} = ${s} / ${d[i]}`,e=i===d.length-1?`int ${n[i+1]} = ${s} - ${n[i]} * ${d[i]}`:`index -= ${n[i]} * ${d[i]}`;return`${g}; ${e};`}).join("")}function oT(n){const t=kt(n).map(s=>s.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function lT(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const kF=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:zF}=dV;function Zq(n,t,s){const r=[];if(n.forEach(c=>{const l=mt(c.shapeInfo.logicalShape);if(c.shapeInfo.isUniform?r.push(`uniform float ${c.name}${l>1?`[${l}]`:""};`):(r.push(`uniform sampler2D ${c.name};`),r.push(`uniform int offset${c.name};`)),s.enableShapeUniforms){const{uniformShape:f}=uT(s.packedInputs,c.shapeInfo.logicalShape,c.shapeInfo.texShape);switch(f.length){case 1:r.push(`uniform int ${c.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${c.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${c.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${c.name}Shape;`);break}r.push(`uniform ivec2 ${c.name}TexShape;`)}}),s.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}s.customUniforms&&s.customUniforms.forEach(c=>{r.push(`uniform ${c.type} ${c.name}${c.arrayIndex?`[${c.arrayIndex}]`:""};`)});const d=r.join(`
`),S=n.map(c=>Qq(c,t,s.packedInputs,s.enableShapeUniforms)).join(`
`),i=t.texShape,g=Hn(),e=_q(g);let a,v,u=n_(g);return t.isPacked?(a=Jq(t.logicalShape,i,s.enableShapeUniforms),v=e_(g)):(a=qq(t.logicalShape,i,s.enableShapeUniforms),v=t_(g)),s.packedInputs&&(u+=a_),[u,e,v,d,a,S,s.userCode].join(`
`)}function Kl(n,t=!1){const s=n.shapeInfo.logicalShape;switch(s.length){case 0:return x_(n,t);case 1:return T_(n,t);case 2:return C_(n,t);case 3:return E_(n,t);case 4:return b_(n,t);case 5:return I_(n);case 6:return R_(n);default:throw new Error(`${s.length}-D input sampling is not yet supported`)}}function VF(n,t){switch(n.shapeInfo.logicalShape.length){case 0:return g_(n);case 1:return y_(n,t);case 2:return S_(n,t);case 3:return w_(n,t);default:return A_(n,t)}}function Qq(n,t,s=!1,r){let d="";s?d+=VF(n,r):d+=Kl(n,r);const S=n.shapeInfo.logicalShape,i=t.logicalShape;return S.length<=i.length&&(s?d+=N_(n,t):d+=P_(n,t)),d}function Jq(n,t,s){switch(n.length){case 0:return GF();case 1:return o_(n,t,s);case 2:return m_(n,t,s);case 3:return u_(n,t,s);default:return c_(n,t,s)}}function qq(n,t,s){switch(n.length){case 0:return GF();case 1:return l_(n,t,s);case 2:return v_(n,t,s);case 3:return h_(n,t,s);case 4:return f_(n,t,s);case 5:return d_(n,t);case 6:return p_(n,t);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function _q(n){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${n.texture2D}(textureSampler, uv).r;
    }
  `}function t_(n){return`
    void setOutput(float val) {
      ${n.output} = vec4(val, 0, 0, 0);
    }
  `}function e_(n){return`
    void setOutput(vec4 val) {
      ${n.output} = val;
    }
  `}function n_(n){return`${n.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${n.varyingFs} vec2 resultUV;
    ${n.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${n.defineSpecialNaN}
    ${n.defineSpecialInf}
    ${n.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${s_}
    ${i_}
    ${r_}
  `}const s_=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,i_=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,r_=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,a_=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function GF(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function o_(n,t,s){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?s?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?s?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:s?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function l_(n,t,s){return t[0]===1?s?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?s?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:s?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function u_(n,t,s){if(s)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],d=Math.ceil(n[2]/2),S=d*Math.ceil(n[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${S};
      index -= b * ${S};

      int r = 2 * (index / ${d});
      int c = imod(index, ${d}) * 2;

      return ivec3(b, r, c);
    }
  `}function h_(n,t,s){if(s)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Zm(["r","c","d"],n)}
    return ivec3(r, c, d);
  }
`;const r=So(["r","c","d"],n);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function c_(n,t,s){if(s)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],d=Math.ceil(n[n.length-1]/2),S=d*Math.ceil(n[n.length-2]/2);let i=S,g="",e="b, r, c";for(let a=2;a<n.length-1;a++)i*=n[n.length-a-1],g=`
      int b${a} = index / ${i};
      index -= b${a} * ${i};
    `+g,e=`b${a}, `+e;return`
    ivec${n.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${g}

      int b = index / ${S};
      index -= b * ${S};

      int r = 2 * (index / ${d});
      int c = imod(index, ${d}) * 2;

      return ivec${n.length}(${e});
    }
  `}function f_(n,t,s){if(s)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Zm(["r","c","d","d2"],n)}
      return ivec4(r, c, d, d2);
    }
  `;const r=So(["r","c","d","d2"],n);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function d_(n,t){const s=So(["r","c","d","d2","d3"],n);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${s}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function p_(n,t){const s=So(["r","c","d","d2","d3","d4"],n);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${s}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function m_(n,t,s){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(ee(n,t))return s?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const d=Math.ceil(n[1]/2);return s?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${d});
      int c = imod(index, ${d}) * 2;

      return ivec2(r, c);
    }
  `}function v_(n,t,s){return ee(n,t)?s?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:n[1]===1?s?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:n[0]===1?s?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:s?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${n[1]};
      int c = index - r * ${n[1]};
      return ivec2(r, c);
    }
  `}function Co(n){return`offset${n}`}function g_(n){const t=n.name,s="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Hn();return`
    vec4 ${s}() {
      return ${r.texture2D}(${t}, halfCR);
    }
  `}function x_(n,t){const s=n.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1);if(n.shapeInfo.isUniform)return`float ${r}() {return ${s};}`;const[d,S]=n.shapeInfo.texShape;if(d===1&&S===1)return`
      float ${r}() {
        return sampleTexture(${s}, halfCR);
      }
    `;const i=Co(s);if(t)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], ${i});
      return sampleTexture(${s}, uv);
    }
  `;const[g,e]=n.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${g}, ${e}, ${i});
      return sampleTexture(${s}, uv);
    }
  `}function y_(n,t){const s=n.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),d=n.shapeInfo.texShape,S=Hn();if(t)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${S.texture2D}(${s}, uv);
    }
  `;const i=[Math.ceil(d[0]/2),Math.ceil(d[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${S.texture2D}(${s}, uv);
    }
  `}function T_(n,t){const s=n.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1);if(n.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${jl(n)}
      }
    `;const d=n.shapeInfo.texShape,S=d[0],i=d[1];if(i===1&&S===1)return`
      float ${r}(int index) {
        return sampleTexture(${s}, halfCR);
      }
    `;const g=Co(s);return i===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${g}) + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${g}) + 0.5) / ${S}.0);
        return sampleTexture(${s}, uv);
      }
    `:S===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${g}) + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${g}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${s}, uv);
      }
    `:t?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${g});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${S}, ${i}, index + ${g});
      return sampleTexture(${s}, uv);
    }
  `}function S_(n,t){const s=n.shapeInfo.logicalShape,r=n.name,d="get"+r.charAt(0).toUpperCase()+r.slice(1),S=n.shapeInfo.texShape,i=S[0],g=S[1],e=Hn();if(S!=null&&ee(s,S))return t?`
      vec4 ${d}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${e.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${d}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${i}.0);

        return ${e.texture2D}(${r}, uv);
      }
    `;if(t)return`
    vec4 ${d}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${e.texture2D}(${r}, uv);
    }
  `;const a=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)],v=Math.ceil(s[1]/2);return`
    vec4 ${d}(int row, int col) {
      vec2 uv = packedUVfrom2D(${v}, ${a[0]}, ${a[1]}, row, col);
      return ${e.texture2D}(${r}, uv);
    }
  `}function C_(n,t){const s=n.shapeInfo.logicalShape,r=n.name,d="get"+r.charAt(0).toUpperCase()+r.slice(1),S=n.shapeInfo.texShape;if(S!=null&&ee(s,S)){if(t)return`
      float ${d}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const o=S[0],c=S[1];return`
    float ${d}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${c}.0, ${o}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:g}=da(s),e=i;if(e.length<s.length){const o=Zl(n,e),c=["row","col"];return`
      ${Kl(o,t)}
      float ${d}(int row, int col) {
        return ${d}(${Ql(c,g)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${d}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${s[1]}, 1)));
        ${jl(n)}
      }
    `;const a=S[0],v=S[1],u=Co(r);return v===1?t?`
      float ${d}(int row, int col) {
        float index = dot(vec3(row, col, ${u}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${d}(int row, int col) {
      float index = dot(vec3(row, col, ${u}), vec3(${s[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${a}.0);
      return sampleTexture(${r}, uv);
    }
  `:a===1?t?`
      float ${d}(int row, int col) {
        float index = dot(vec3(row, col, ${u}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${d}(int row, int col) {
      float index = dot(vec3(row, col, ${u}), vec3(${s[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${v}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:t?`
      float ${d}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${u};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${d}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${s[1]} + col + ${u};
    vec2 uv = uvFromFlat(${a}, ${v}, index);
    return sampleTexture(${r}, uv);
  }
`}function w_(n,t){const s=n.shapeInfo.logicalShape,r=n.name,d="get"+r.charAt(0).toUpperCase()+r.slice(1),S=n.shapeInfo.texShape,i=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)];if(s[0]===1){const o=s.slice(1),c=[1,2],l=Zl(n,o),f=["b","row","col"];return`
        ${VF(l,t)}
        vec4 ${d}(int b, int row, int col) {
          return ${d}(${Ql(f,c)});
        }
      `}const g=Hn();if(t)return`
    vec4 ${d}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${g.texture2D}(${r}, uv);
    }
  `;const e=i[0],a=i[1],v=Math.ceil(s[2]/2),u=v*Math.ceil(s[1]/2);return`
    vec4 ${d}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${e}, ${a}, ${u}, ${v}, b, row, col);
      return ${g.texture2D}(${r}, uv);
    }
  `}function E_(n,t){const s=n.shapeInfo.logicalShape,r=n.name,d="get"+r.charAt(0).toUpperCase()+r.slice(1),S=s[1]*s[2],i=s[2],{newShape:g,keptDims:e}=da(s),a=g;if(a.length<s.length){const f=Zl(n,a),m=["row","col","depth"];return`
        ${Kl(f,t)}
        float ${d}(int row, int col, int depth) {
          return ${d}(${Ql(m,e)});
        }
      `}if(n.shapeInfo.isUniform)return`
      float ${d}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${S}, ${i}, 1)));
        ${jl(n)}
      }
    `;const v=n.shapeInfo.texShape,u=v[0],o=v[1],c=n.shapeInfo.flatOffset;if(o===S&&c==null)return t?`
      float ${d}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${d}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${o}.0, ${u}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(o===i&&c==null)return t?`
      float ${d}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${d}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${s[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `;const l=Co(r);return t?`
    float ${d}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${l};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${d}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${S} + col * ${i} + depth + ${l};
        vec2 uv = uvFromFlat(${u}, ${o}, index);
        return sampleTexture(${r}, uv);
      }
  `}function A_(n,t){const s=n.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),d=Hn();if(t)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${s}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${s}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${d.texture2D}(${s}, uv);
    }
  `;const S=n.shapeInfo.logicalShape,i=S.length,g=n.shapeInfo.texShape,e=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],a=e[0],v=e[1],u=Math.ceil(S[i-1]/2);let o=u*Math.ceil(S[i-2]/2),c="int b, int row, int col",l=`b * ${o} + (row / 2) * ${u} + (col / 2)`;for(let f=2;f<i-1;f++)c=`int b${f}, `+c,o*=S[i-f-1],l=`b${f} * ${o} + `+l;return`
    vec4 ${r}(${c}) {
      int index = ${l};
      int texR = index / ${v};
      int texC = index - texR * ${v};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${v}, ${a});
      return ${d.texture2D}(${s}, uv);
    }
  `}function b_(n,t){const s=n.shapeInfo.logicalShape,r=n.name,d="get"+r.charAt(0).toUpperCase()+r.slice(1),S=s[3],i=s[2]*S,g=s[1]*i,{newShape:e,keptDims:a}=da(s);if(e.length<s.length){const p=Zl(n,e),y=["row","col","depth","depth2"];return`
      ${Kl(p,t)}
      float ${d}(int row, int col, int depth, int depth2) {
        return ${d}(${Ql(y,a)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${d}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${g}, ${i}, ${S}, 1)));
        ${jl(n)}
      }
    `;const v=n.shapeInfo.flatOffset,u=n.shapeInfo.texShape,o=u[0],c=u[1],l=`int stride2 = ${r}Shape[3];`,f=`int stride1 = ${r}Shape[2] * stride2;`,m=`int stride0 = ${r}Shape[1] * stride1;`;if(c===g&&v==null)return t?`
      float ${d}(int row, int col, int depth, int depth2) {
        ${l}
        ${f}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${d}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${S}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${c}.0, ${o}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(c===S&&v==null)return t?`
      float ${d}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${d}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s[1]*s[2]}, ${s[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${c}.0, ${o}.0);
        return sampleTexture(${r}, uv);
      }
    `;const h=Co(r);return t?`
    float ${d}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${l}
      ${f}
      ${m}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${h});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${d}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${g} + col * ${i} +
          depth * ${S} + depth2;
      vec2 uv = uvFromFlat(${o}, ${c}, index + ${h});
      return sampleTexture(${r}, uv);
    }
  `}function I_(n){const t=n.shapeInfo.logicalShape,s=n.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),d=t[4],S=t[3]*d,i=t[2]*S,g=t[1]*i,{newShape:e,keptDims:a}=da(t);if(e.length<t.length){const f=Zl(n,e),m=["row","col","depth","depth2","depth3"];return`
      ${Kl(f)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Ql(m,a)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${g}, ${i}, ${S}, ${d})) +
          depth3;
        ${jl(n)}
      }
    `;const v=n.shapeInfo.flatOffset,u=n.shapeInfo.texShape,o=u[0],c=u[1];if(c===g&&v==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${S}, ${d}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${c}.0, ${o}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(c===d&&v==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${c}.0, ${o}.0);
        return sampleTexture(${s}, uv);
      }
    `;const l=Co(s);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${g} + col * ${i} + depth * ${S} +
          depth2 * ${d} + depth3 + ${l};
      vec2 uv = uvFromFlat(${o}, ${c}, index);
      return sampleTexture(${s}, uv);
    }
  `}function R_(n){const t=n.shapeInfo.logicalShape,s=n.name,r="get"+s.charAt(0).toUpperCase()+s.slice(1),{newShape:d,keptDims:S}=da(t);if(d.length<t.length){const m=Zl(n,d),h=["row","col","depth","depth2","depth3","depth4"];return`
      ${Kl(m)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Ql(h,S)});
      }
    `}const i=t[5],g=t[4]*i,e=t[3]*g,a=t[2]*e,v=t[1]*a;if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${v}, ${a}, ${e}, ${g})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${jl(n)}
      }
    `;const u=n.shapeInfo.flatOffset,o=n.shapeInfo.texShape,c=o[0],l=o[1];if(l===v&&u==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${a}, ${e}, ${g}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${l}.0, ${c}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(l===i&&u==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${l}.0, ${c}.0);
        return sampleTexture(${s}, uv);
      }
    `;const f=Co(s);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${v} + col * ${a} + depth * ${e} +
          depth2 * ${g} + depth3 * ${i} + depth4 + ${f};
      vec2 uv = uvFromFlat(${c}, ${l}, index);
      return sampleTexture(${s}, uv);
    }
  `}function jl(n){const t=n.name,s=mt(n.shapeInfo.logicalShape);return s<2?`return ${t};`:`
    for (int i = 0; i < ${s}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function N_(n,t){const s=n.name,r=s.charAt(0).toUpperCase()+s.slice(1),d="get"+r+"AtOutCoords",S=n.shapeInfo.logicalShape.length,i=t.logicalShape.length,g=zF(n.shapeInfo.logicalShape,t.logicalShape),e=pe(i),a=i-S;let v;const u=["x","y","z","w","u","v"];S===0?v="":i<2&&g.length>=1?v="coords = 0;":v=g.map(p=>`coords.${u[p+a]} = 0;`).join(`
`);let o="";i<2&&S>0?o="coords":o=n.shapeInfo.logicalShape.map((p,y)=>`coords.${u[y+a]}`).join(", ");let c="return outputValue;";const f=mt(n.shapeInfo.logicalShape)===1,h=mt(t.logicalShape)===1;if(S===1&&!f&&!h)c=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(f&&!h)i===1?c=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:c=`
        return vec4(outputValue.x);
      `;else if(g.length){const p=S-2,y=S-1;g.indexOf(p)>-1&&g.indexOf(y)>-1?c="return vec4(outputValue.x);":g.indexOf(p)>-1?c="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":g.indexOf(y)>-1&&(c="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${d}() {
      ${e} coords = getOutputCoords();
      ${v}
      vec4 outputValue = get${r}(${o});
      ${c}
    }
  `}function P_(n,t){const s=n.name,r=s.charAt(0).toUpperCase()+s.slice(1),d="get"+r+"AtOutCoords",S=t.texShape,i=n.shapeInfo.texShape,g=n.shapeInfo.logicalShape.length,e=t.logicalShape.length;if(!n.shapeInfo.isUniform&&g===e&&n.shapeInfo.flatOffset==null&&ee(i,S))return`
      float ${d}() {
        return sampleTexture(${s}, resultUV);
      }
    `;const a=pe(e),v=zF(n.shapeInfo.logicalShape,t.logicalShape),u=e-g;let o;const c=["x","y","z","w","u","v"];g===0?o="":e<2&&v.length>=1?o="coords = 0;":o=v.map(f=>`coords.${c[f+u]} = 0;`).join(`
`);let l="";return e<2&&g>0?l="coords":l=n.shapeInfo.logicalShape.map((f,m)=>`coords.${c[m+u]}`).join(", "),`
    float ${d}() {
      ${a} coords = getOutputCoords();
      ${o}
      return get${r}(${l});
    }
  `}function pe(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function uT(n,t,s){const{newShape:r,keptDims:d}=da(t),S=t.length,i=n&&S===3&&t[0]===1,g=i?t.slice(1):r,e=!n&&S>1&&!ee(t,s)&&r.length<S||i;return{useSqueezeShape:e,uniformShape:e?g:t,keptDims:d}}function Zl(n,t){const s=JSON.parse(JSON.stringify(n));return s.shapeInfo.logicalShape=t,s}function Ql(n,t){return t.map(s=>n[s]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F_(n,t,s,r){const d=s.map((v,u)=>{const o={logicalShape:v.shape,texShape:v.isUniform?null:v.texData.texShape,isUniform:v.isUniform,isPacked:v.isUniform?!1:v.texData.isPacked,flatOffset:null};return v.texData!=null&&v.texData.slice!=null&&v.texData.slice.flatOffset>0&&(o.flatOffset=v.texData.slice.flatOffset),{name:t.variableNames[u],shapeInfo:o}}),S=d.map(v=>v.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},g=Zq(d,i,t),e=Eq(n.gl,g),a=n.createProgram(e);return dt().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:e,source:g,webGLProgram:a,inShapeInfos:S,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(n.buildVao(a),Object.assign({program:t,fragmentShader:e,source:g,webGLProgram:a,inShapeInfos:S,outShapeInfo:i},UF(n,t,a)))}function UF(n,t,s){const r=[],d=[];let S,i,g,e=null,a=null;a=n.getUniformLocation(s,"NAN",!1),dt().getNumber("WEBGL_VERSION")===1&&(e=n.getUniformLocation(s,"INFINITY",!1));const v=!1;for(const u of t.variableNames){const o={name:u,uniform:n.getUniformLocation(s,u,v),offset:n.getUniformLocation(s,`offset${u}`,v)};t.enableShapeUniforms&&(o.shape=n.getUniformLocation(s,`${u}Shape`,v),o.texShape=n.getUniformLocation(s,`${u}TexShape`,v)),r.push(o)}if(t.enableShapeUniforms&&(S=n.getUniformLocation(s,"outShape",v),g=n.getUniformLocation(s,"outShapeStrides",v),i=n.getUniformLocation(s,"outTexShape",v)),t.customUniforms)for(const u of t.customUniforms)d.push(n.getUniformLocation(s,u.name,v));return{variablesLocations:r,customUniformLocations:d,infLoc:e,nanLoc:a,outShapeLocation:S,outShapeStridesLocation:g,outTexShapeLocation:i}}function Fw(n,t){if(n.length!==t.length)throw Error(`Binary was compiled with ${n.length} inputs, but was executed with ${t.length} inputs`);n.forEach((s,r)=>{const d=s.logicalShape,S=t[r],i=S.shape;if(!ee(d,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${d} and ${i} must match`);if(s.isUniform&&S.isUniform)return;const g=s.texShape,e=S.isUniform?null:S.texData.texShape;if(!ee(g,e))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${g} and ${e} must match`)})}function D_(n,t,s,r,d){t.program.enableShapeUniforms||(Fw(t.inShapeInfos,s),Fw([t.outShapeInfo],[r]));const S=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?n.setOutputPackedMatrixTexture(S.texture,i[0],i[1]):n.setOutputMatrixTexture(S.texture,i[0],i[1]),n.setProgram(t.webGLProgram),n.bindVertexArray(t.webGLProgram.vao),dt().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&n.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&n.gl.uniform1f(t.nanLoc,NaN);for(let e=0;e<s.length;++e){const a=s[e],{uniform:v,offset:u,shape:o,texShape:c}=t.variablesLocations[e];if(o){const{uniformShape:l}=uT(t.program.packedInputs,a.shape,a.texData.texShape);switch(l.length){case 1:n.gl.uniform1iv(o,new Int32Array(l));break;case 2:n.gl.uniform2iv(o,new Int32Array(l));break;case 3:n.gl.uniform3iv(o,new Int32Array(l));break;case 4:n.gl.uniform4iv(o,new Int32Array(l));break}}if(c&&n.gl.uniform2i(c,a.texData.texShape[0],a.texData.texShape[1]),v!=null){if(a.isUniform){if(mt(a.shape)<2)n.gl.uniform1f(v,a.uniformValues[0]);else{let l=a.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),n.gl.uniform1fv(v,l)}continue}a.texData.slice!=null&&u!=null&&n.gl.uniform1i(u,a.texData.slice.flatOffset),n.setInputMatrixTexture(a.texData.texture.texture,v,e)}}const g=t.outShapeLocation;if(g)switch(r.shape.length){case 1:n.gl.uniform1iv(g,new Int32Array(r.shape));break;case 2:n.gl.uniform2iv(g,new Int32Array(r.shape));break;case 3:n.gl.uniform3iv(g,new Int32Array(r.shape));break;case 4:n.gl.uniform4iv(g,new Int32Array(r.shape));break}if(t.outShapeStridesLocation){const e=kt(r.shape);switch(r.shape.length){case 2:n.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(e));break;case 3:n.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(e));break;case 4:n.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(e));break}}if(t.outTexShapeLocation&&n.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&d)for(let e=0;e<t.program.customUniforms.length;++e){const a=t.program.customUniforms[e],v=t.customUniformLocations[e],u=d[e];if(a.type==="float")n.gl.uniform1fv(v,u);else if(a.type==="vec2")n.gl.uniform2fv(v,u);else if(a.type==="vec3")n.gl.uniform3fv(v,u);else if(a.type==="vec4")n.gl.uniform4fv(v,u);else if(a.type==="int")n.gl.uniform1iv(v,u);else if(a.type==="ivec2")n.gl.uniform2iv(v,u);else if(a.type==="ivec3")n.gl.uniform3iv(v,u);else if(a.type==="ivec4")n.gl.uniform4iv(v,u);else throw Error(`uniform type ${a.type} is not supported yet.`)}n.executeProgram()}function O_(n,t,s){let r="";t.concat(s).forEach(i=>{const g=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(n.enableShapeUniforms&&!i.isUniform){const e=i.texData.texShape,{useSqueezeShape:a,uniformShape:v,keptDims:u}=uT(n.packedInputs,i.shape,e);let o="",c="",l="";if(v.length===1&&n.packedInputs){const T=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];o=`${T[0]>1}_${T[1]>1}`}else if(v.length===2&&!n.packedInputs)c=`${v[0]>1}_${v[1]>1}`;else if(v.length>2&&!n.packedInputs){const T=kt(v);l=`${T[0]===e[1]}_${T[T.length-1]===e[1]}`}const f=i.shape.length,m=v.length===2&&ee(i.shape,e),h=mt(i.shape)===1,p=El(i.shape,s.shape),y=!n.packedInputs&&f===s.shape.length&&ee(e,s.texData.texShape),x=n.packedInputs||v.length>2?"":`${e[0]>1}_${e[1]>1}`;r+=`${f}_${y}_${a?u:""}_${v.length}_${h}_${p}_${m}_${o}_${c}_${l}_${x}_${g}`}else{const e=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${e}_${g}`}});const d=n.userCode;let S=n.constructor.name;return S+="_"+r+"_"+d+`${dt().getNumber("WEBGL_VERSION")}`,S}function Dn(n){return dt().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&n<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L_{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ch.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Hn();this.outputShape=t,this.enableShapeUniforms=Dn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Zm(["r","c","d"],t):So(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M_{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ch.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Hn();this.outputShape=t,this.enableShapeUniforms=Dn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Zm(["r","c","d"],t):So(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $_{constructor(t){this.variableNames=["A"],this.outTexUsage=As.DOWNLOAD;const s=Hn();this.outputShape=t,this.userCode=`
      ${kF}

      void main() {
        float x = getAAtOutCoords();
        ${s.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B_{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=As.DOWNLOAD;const s=Hn();this.outputShape=t,this.userCode=`
      ${kF}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${s.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k_={R:0,G:1,B:2,A:3};class Dw{constructor(t,s=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const d=Hn();this.outputShape=t,this.enableShapeUniforms=Dn(this.outputShape.length);let S="result";s&&(S="floor(result * 255. + 0.5)");let i="";for(let g=0;g<r.length;g++){const e=r[g];i+=`
          if(offset == ${g}) {
            result = values[${k_[e]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?lT():oT(t)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${d.texture2D}(A, uv);
          ${i}
        }
        ${d.output} = vec4(${S}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z_{constructor(t,s=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Hn();this.outputShape=t,this.enableShapeUniforms=Dn(this.outputShape.length);let d="",S="result";s&&(S="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let g=0;g<=1;g++){const e=i*2+g;d+=`
          localCoords = coords;
          if(localCoords[2] + ${g} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${g};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${e}] = values[0];
            } else if (offset == 1) {
              result[${e}] = values[1];
            } else if (offset == 2) {
              result[${e}] = values[2];
            } else {
              result[${e}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?lT():oT(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${d}

          ${r.output} = ${S};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V_(n){const t=Hn(),s=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return wq(n,s)}function G_(n){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Rq(n,t)}function U_(n){const t=new Uint16Array([0,1,2,2,1,3]);return Nq(n,t)}function zc(n,t,s,r,d,S){Fq(t,s);const i=Pq(n),g=n.TEXTURE_2D;return Pt(n,()=>n.bindTexture(g,i)),Pt(n,()=>n.texParameteri(g,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)),Pt(n,()=>n.texParameteri(g,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),Pt(n,()=>n.texParameteri(g,n.TEXTURE_MIN_FILTER,n.NEAREST)),Pt(n,()=>n.texParameteri(g,n.TEXTURE_MAG_FILTER,n.NEAREST)),dt().getNumber("WEBGL_VERSION")===1?Pt(n,()=>n.texImage2D(g,0,r,t,s,0,d,S,null)):Pt(n,()=>n.texStorage2D(g,1,r,t,s)),Pt(n,()=>n.bindTexture(n.TEXTURE_2D,null)),{texture:i,texShape:[s,t]}}function WF(n){return n.internalFormatFloat}function W_(n,t,s,r){const[d,S]=Bc(t,s);return zc(n,d,S,WF(r),r.textureFormatFloat,n.FLOAT)}function XF(n){return n.internalFormatHalfFloat}function X_(n,t,s,r){const[d,S]=Bc(t,s);return zc(n,d,S,XF(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function HF(n){return n.downloadTextureFormat}function H_(n,t,s,r){const[d,S]=Bc(t,s);return zc(n,d,S,HF(r),n.RGBA,n.UNSIGNED_BYTE)}function YF(n){return n.internalFormatPackedFloat}function Y_(n,t,s,r){const[d,S]=Yl(t,s);return zc(n,d,S,YF(r),n.RGBA,n.FLOAT)}function KF(n){return n.internalFormatPackedHalfFloat}function K_(n,t,s,r){const[d,S]=Yl(t,s);return zc(n,d,S,KF(r),n.RGBA,r.textureTypeHalfFloat)}function j_(n,t,s){return Pt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,s)),Rw(n,t,"clipSpacePos",s,3,20,0)&&Rw(n,t,"uv",s,2,20,12)}function Z_(n,t,s,r,d,S){Pt(n,()=>n.bindTexture(n.TEXTURE_2D,t));let i,g,e;d instanceof Uint8Array?(i=new Uint8Array(s*r*4),g=n.UNSIGNED_BYTE,e=n.RGBA):(i=new Float32Array(s*r*4),g=n.FLOAT,e=S.internalFormatPackedFloat),i.set(d),dt().getNumber("WEBGL_VERSION")===2?Pt(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,s,r,n.RGBA,g,i)):Pt(n,()=>n.texImage2D(n.TEXTURE_2D,0,e,s,r,0,n.RGBA,g,i)),Pt(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function Q_(n,t,s){Pt(n,()=>n.bindTexture(n.TEXTURE_2D,t)),s.data instanceof Uint8Array?dt().getNumber("WEBGL_VERSION")===2?Pt(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,s.width,s.height,n.RGBA,n.UNSIGNED_BYTE,s.data)):Pt(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,s.width,s.height,0,n.RGBA,n.UNSIGNED_BYTE,s.data)):dt().getNumber("WEBGL_VERSION")===2?Pt(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,s)):Pt(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,s)),Pt(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function J_(n,t,s,r){const d=n.createBuffer();Pt(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,d));const g=4*4*t*s;return Pt(n,()=>n.bufferData(n.PIXEL_PACK_BUFFER,g,n.STREAM_READ)),Pt(n,()=>n.readPixels(0,0,s,t,n.RGBA,n.FLOAT,0)),Pt(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,null)),d}function q_(n,t,s){const r=n,d=new Float32Array(s);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,d),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),d}function __(n,t,s,r){const[d,S]=Bc(t,s),i=4,g=new Uint8Array(vq(t*s,i));return Pt(n,()=>n.readPixels(0,0,d,S,r.downloadTextureFormat,n.UNSIGNED_BYTE,g)),new Float32Array(g.buffer)}function ttt(n,t,s,r,d,S,i,g){const e=n,a=new Float32Array(gq(S,i));return e.bindBuffer(e.PIXEL_PACK_BUFFER,t),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,a),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),a}function ett(n,t,s){const r=new Float32Array(t*s*4);return Pt(n,()=>n.readPixels(0,0,s,t,n.RGBA,n.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _v{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const s=dt().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,dq(s,t)):this.gl=Ii(s),t=this.gl,dt().getNumber("WEBGL_VERSION")===2){const S=t;this.createVertexArray=()=>Pt(S,()=>S.createVertexArray()),this.bindVertexArray=i=>Pt(S,()=>S.bindVertexArray(i)),this.deleteVertexArray=i=>Pt(S,()=>S.deleteVertexArray(i)),this.getVertexArray=()=>Pt(S,()=>S.getParameter(S.VERTEX_ARRAY_BINDING))}else if(t!=null){const S=t.getExtension("OES_vertex_array_object");if(S==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Pt(t,()=>S.createVertexArrayOES()),this.bindVertexArray=i=>Pt(t,()=>S.bindVertexArrayOES(i)),this.deleteVertexArray=i=>Pt(t,()=>S.deleteVertexArrayOES(i)),this.getVertexArray=()=>Pt(t,()=>t.getParameter(S.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const d="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),dt().getNumber("WEBGL_VERSION")===1){const S="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=yf(this.gl,S),Js(this.gl,i))this.textureHalfFloatExtension=yf(this.gl,i);else if(dt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Js(this.gl,d))this.colorBufferHalfFloatExtension=yf(this.gl,d);else if(dt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Js(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Js(this.gl,d))this.colorBufferHalfFloatExtension=this.gl.getExtension(d);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=G_(this.gl),this.indexBuffer=U_(this.gl),this.framebuffer=Dq(this.gl),this.textureConfig=aT(this.gl,this.textureHalfFloatExtension)}get debug(){return dt().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;Pt(t,()=>t.finish()),Pt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Pt(t,()=>t.deleteFramebuffer(this.framebuffer)),Pt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Pt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Pt(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,s){return this.throwIfDisposed(),W_(this.gl,t,s,this.textureConfig)}createFloat16MatrixTexture(t,s){return this.throwIfDisposed(),X_(this.gl,t,s,this.textureConfig)}createUnsignedBytesMatrixTexture(t,s){return this.throwIfDisposed(),H_(this.gl,t,s,this.textureConfig)}uploadPixelDataToTexture(t,s){this.throwIfDisposed(),Q_(this.gl,t,s)}uploadDenseMatrixToTexture(t,s,r,d){this.throwIfDisposed(),Z_(this.gl,t,s,r,d,this.textureConfig)}createFloat16PackedMatrixTexture(t,s){return this.throwIfDisposed(),K_(this.gl,t,s,this.textureConfig)}createPackedMatrixTexture(t,s){return this.throwIfDisposed(),Y_(this.gl,t,s,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(Nw(this.gl,this.framebuffer),this.outputTexture=null),Pt(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,s,r){return this.downloadMatrixDriver(t,()=>__(this.gl,s,r,this.textureConfig))}downloadPackedMatrixFromBuffer(t,s,r,d,S,i){return ttt(this.gl,t,s,r,d,S,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,s){return q_(this.gl,t,s)}createBufferFromTexture(t,s,r){this.bindTextureToFrameBuffer(t);const d=J_(this.gl,s,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),d}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let s,r;if(dt().getBool("WEBGL_FENCE_API_ENABLED")){const d=t,S=d.fenceSync(d.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=()=>{const i=d.clientWaitSync(S,0,0);return i===d.ALREADY_SIGNALED||i===d.CONDITION_SATISFIED},s=S}else dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(s=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(s,dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:s,isFencePassed:r}}downloadMatrixFromPackedTexture(t,s,r){return this.downloadMatrixDriver(t,()=>ett(this.gl,s,r))}createProgram(t){this.throwIfDisposed();const s=this.gl;this.vertexShader==null&&(this.vertexShader=V_(s));const r=bq(s);Pt(s,()=>s.attachShader(r,this.vertexShader)),Pt(s,()=>s.attachShader(r,t)),Iq(s,r);const d=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&Zv(s,d),d}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);const s=this.gl;Pt(s,()=>s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),j_(s,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(Pt(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&Zv(this.gl,this.program),Pt(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,s,r=!0){return this.throwIfDisposed(),r?Lq(this.gl,t,s):Mq(this.gl,t,s)}getAttributeLocation(t,s){return this.throwIfDisposed(),Pt(this.gl,()=>this.gl.getAttribLocation(t,s))}getUniformLocationNoThrow(t,s){return this.throwIfDisposed(),this.gl.getUniformLocation(t,s)}setInputMatrixTexture(t,s,r){this.throwIfDisposed(),this.throwIfNoProgram(),$q(this.gl,t,s,r)}setOutputMatrixTexture(t,s,r){this.setOutputMatrixTextureDriver(t,r,s)}setOutputPackedMatrixTexture(t,s,r){this.throwIfDisposed();const[d,S]=Yl(s,r);this.setOutputMatrixTextureDriver(t,d,S)}setOutputMatrixWriteRegion(t,s,r,d){this.setOutputMatrixWriteRegionDriver(r,t,d,s)}setOutputPackedMatrixWriteRegion(t,s,r,d){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Zv(this.gl,this.program),Tf(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;if(this.debug){const s=this.getVertexArray();console.assert(s===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Pt(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Pt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=yf(this.gl,dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,d=this.getQueryTimerExtensionWebGL2(),S=r.createQuery();return r.beginQuery(d.TIME_ELAPSED_EXT,S),S}const t=this.getQueryTimerExtensionWebGL1(),s=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,s),s}endQuery(){if(dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,r=this.getQueryTimerExtensionWebGL2();s.endQuery(r.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await pC(()=>this.disposed||this.isQueryAvailable(t,dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,s){if(s===0)return null;if(s===2){const r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,s){if(s===0)return!0;if(s===2){const r=this.gl,d=this.getQueryTimerExtensionWebGL2(),S=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(d.GPU_DISJOINT_EXT)),S&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),d=r.getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),d&&!this.disjoint}}pollFence(t){return new Promise(s=>{this.addItemToPoll(()=>t.isFencePassed(),()=>s())})}pollItems(){const t=ntt(this.itemsToPoll.map(s=>s.isDoneFn));for(let s=0;s<=t;++s){const{resolveFn:r}=this.itemsToPoll[s];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,s){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:s}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in dt().platform&&(r=dt().platform.setTimeoutCustom.bind(dt().platform)),pC(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),Qv(this.gl,t,this.framebuffer),this.debug&&Tf(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Qv(this.gl,this.outputTexture,this.framebuffer),this.debug&&Tf(this.gl)):Nw(this.gl,this.framebuffer)}downloadMatrixDriver(t,s){this.bindTextureToFrameBuffer(t);const r=s();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(t,s,r){this.throwIfDisposed();const d=this.gl;Qv(d,t,this.framebuffer),this.debug&&Tf(d),this.outputTexture=t,Pt(d,()=>d.viewport(0,0,s,r)),Pt(d,()=>d.scissor(0,0,s,r))}setOutputMatrixWriteRegionDriver(t,s,r,d){this.throwIfDisposed(),Pt(this.gl,()=>this.gl.scissor(t,s,r,d))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function ntt(n){let t=0;for(;t<n.length&&n[t]();++t);return t-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:stt,bincountImpl:jF,bincountReduceImpl:itt,bitwiseAndImpl:rtt,castImpl:att,ceilImpl:ott,concatImpl:ltt,equalImpl:utt,expImpl:htt,expm1Impl:ctt,floorImpl:ftt,gatherNdImpl:dtt,gatherV2Impl:ptt,greaterImpl:mtt,greaterEqualImpl:vtt,lessImpl:gtt,lessEqualImpl:xtt,linSpaceImpl:ytt,logImpl:Ttt,maxImpl:Stt,maximumImpl:Ctt,minimumImpl:wtt,multiplyImpl:Ett,negImpl:Att,notEqualImpl:btt,prodImpl:Itt,raggedGatherImpl:Rtt,raggedRangeImpl:Ntt,raggedTensorToTensorImpl:Ptt,rangeImpl:Ftt,rsqrtImpl:Dtt,scatterImpl:Ott,sigmoidImpl:Ltt,simpleAbsImpl:ZF,sliceImpl:Mtt,sparseFillEmptyRowsImpl:$tt,sparseReshapeImpl:Btt,sparseSegmentReductionImpl:QF,sqrtImpl:ktt,staticRegexReplaceImpl:ztt,stridedSliceImpl:Vtt,stringNGramsImpl:Gtt,stringSplitImpl:Utt,stringToHashBucketFastImpl:Wtt,subImpl:Xtt,tileImpl:Htt,topKImpl:Ytt,transposeImpl:hT,uniqueImpl:Ktt}=QY;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JF(n,t){return["x","y","z","w","u","v"].slice(0,t).map(s=>`${n}.${s}`)}function Vn(n,t){return t===1?[n]:JF(n,t)}function jtt(n,t){if(n===1)return"rc";let s="";for(let r=0;r<n;r++)s+=t[r],r<n-1&&(s+=",");return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ztt{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=Dn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const s=Vn("rc",this.rank),r=pe(this.rank),d=this.getOutOfBoundsCondition(s),S=this.getSetup(s),i=this.getOutput(s);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${d}) {
            setOutput(vec4(0));
          } else {
            ${S}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(t){const s=[];for(let r=0;r<=1;r++)for(let d=0;d<=1;d++){let S=`${r===0?"r":"rp1"}, ${d===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)S=`${t[t.length-1-i]},`+S;s.push(S)}return s}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let s="";for(let r=this.rank-2;r<this.rank;r++)s+=`${t[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(s+="||");return s}getSetup(t){if(this.rank===1)return"";const s=t.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],d=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${s[0]};
      int c = ${s[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${d};
    `}getOutput(t){const s=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${s[0]}),
            cEdge ? 0. : getA(${s[1]}),
            rEdge ? 0. : getA(${s[2]}),
            rEdge || cEdge ? 0. : getA(${s[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qF{constructor(t,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=Dn(this.outputShape.length);let r="";for(let d=0;d<4;d++){let S="thisRC = rc;";d%2===1&&(S+="thisRC.z += 1;"),d>1&&(S+="thisRC.y += 1;"),r+=`
        ${S}
        ${d>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${d}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${d>0?"}":""}
      `}this.userCode=`
      ${Qtt(s,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?lT():oT(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${r}

        setOutput(result);
      }
    `}}function Qtt(n,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?jq(["r","c","d"],"inputShape"):So(["r","c","d"],n)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jtt{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,s,r){const d=Lw(s,r),S=Mw(t,d,r);S in this.freeTextures||(this.freeTextures[S]=[]),S in this.usedTextures||(this.usedTextures[S]=[]);const i=Ow(t,d,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[S].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const e=this.freeTextures[S].pop();return this.usedTextures[S].push(e),e}let g;return d===xn.PACKED_2X2_FLOAT32?g=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):d===xn.PACKED_2X2_FLOAT16?g=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):d===xn.UNPACKED_FLOAT32?g=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):d===xn.UNPACKED_FLOAT16?g=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):d===xn.PACKED_4X1_UNSIGNED_BYTE&&(g=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[S].push(g),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),g}releaseTexture(t,s,r,d){if(this.freeTextures==null)return;const S=Lw(r,d),i=Mw(s,S,d);i in this.freeTextures||(this.freeTextures[i]=[]);const g=Ow(s,S,this.gpgpu.gl,this.gpgpu.textureConfig,d),e=dt().get("WEBGL_DELETE_TEXTURE_THRESHOLD");e!==-1&&this._numBytesAllocated>e?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=g):(this.freeTextures[i].push(t),this.numFreeTextures++,this._numBytesFree+=g),this.numUsedTextures--;const a=this.usedTextures[i],v=a&&a.indexOf(t);if(v==null||v<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a[v]=a[a.length-1],a.pop(),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const s=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*s)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(s=>{this.gpgpu.deleteMatrixTexture(s.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(s=>{this.gpgpu.deleteMatrixTexture(s.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function qtt(n,t){const s=n;if(t===s.R32F)return 4;if(t===s.R16F)return 2;if(t===s.RGBA32F)return 16;if(t===n.RGBA)return 16;if(t===s.RGBA16F)return 8;if(t===s.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function Ow(n,t,s,r,d){const S=_tt(t,r);let i;if(d){const[e,a]=Yl(n[0],n[1]);i=e*a}else{const[e,a]=Bc(n[0],n[1]);i=e*a}const g=qtt(s,S);return i*g}function _tt(n,t){switch(n){case xn.PACKED_2X2_FLOAT32:return YF(t);case xn.PACKED_2X2_FLOAT16:return KF(t);case xn.UNPACKED_FLOAT32:return WF(t);case xn.UNPACKED_FLOAT16:return XF(t);case xn.PACKED_4X1_UNSIGNED_BYTE:return HF(t);default:throw new Error(`Unknown physical texture type ${n}`)}}function tet(n){return dt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?xn.PACKED_2X2_FLOAT32:xn.UNPACKED_FLOAT32:n?xn.PACKED_2X2_FLOAT16:xn.UNPACKED_FLOAT16}function Lw(n,t){if(n===As.UPLOAD)return xn.PACKED_2X2_FLOAT32;if(n===As.RENDER||n==null)return tet(t);if(n===As.DOWNLOAD||n===As.PIXELS)return xn.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${n}`)}function Mw(n,t,s){return`${n[0]}_${n[1]}_${t}_${s}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gi{constructor(t,s){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=Dn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${s}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const ui="if (isnan(x)) return x;",eet="return x;",$w="return abs(x);",net="return (x >= 0.0) ? x : (exp(x) - 1.0);",set=ui+`
  return (x < 0.0) ? 0.0 : x;
`,iet=ui+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Dr="return x;",ret="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aet="return x;",oet=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,uet=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,het=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cet="return 1.0 / (1.0 + exp(-1.0 * x));";class zr{constructor(t,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=Dn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${s}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fet{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=Dn(this.outputShape.length);const s=t.length,r=Vn("rc",s),d=pe(s),S=jtt(s,r),i=r.slice(-2),g=s<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${d} rc = getOutputCoords();
        vec4 packedInput = getA(${S});

        setOutput(getChannel(packedInput, ${g}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const det=K1,pet=1e-7,met=1e-4,wf={};function vet(n){return n in wf||(wf[n]={}),wf[n]}const get=dt().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),xet=600;function yet(){return dt().global.screen==null?1024:dt().global.screen.height*dt().global.screen.width*window.devicePixelRatio*xet/1024/1024}class Qm extends _x{nextDataId(){return Qm.nextDataId++}constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!dt().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let s;if(t!=null){if(t instanceof _v)s=t;else{const r=Ii(dt().getNumber("WEBGL_VERSION"),t);s=new _v(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Ii(dt().getNumber("WEBGL_VERSION"));s=new _v(r),this.binaryCache=vet(dt().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=s,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Jtt(this.gpgpu),this.numMBBeforeWarning=yet(),this.texData=new Cb(this,Oi())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(t,s,r,d,S,i){const g=this.makeTensorInfo(s,r),e=this.texData.get(g.dataId);e.isPacked=!1,e.texture={texture:t,texShape:[d,S]},e.texShape=[d,S];const a=Sf(s),v=new Dw(a,!1,i),u=this.runWebGLProgram(v,[g],r,[[d,S]]);return u.shape=s,e.texture=null,this.disposeIntermediateTensorInfo(g),u.dataId}write(t,s,r){if((dt().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||dt().getBool("DEBUG"))&&this.checkNumericalProblems(t),r==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const d={id:this.nextDataId()};return this.texData.set(d,{shape:s,dtype:r,values:t,usage:As.UPLOAD,refCount:1}),d}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const s=this.texData.get(t);s.refCount++}decRef(t){if(this.texData.has(t)){const s=this.texData.get(t);s.refCount--}}move(t,s,r,d,S){if(dt().getBool("DEBUG")&&this.checkNumericalProblems(s),d==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:r,dtype:d,values:s,usage:As.UPLOAD,refCount:S})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const s=this.texData.get(t),{values:r,dtype:d,complexTensorInfos:S,slice:i,shape:g,isPacked:e}=s;if(i!=null){let o;e?o=new zr(g,Dr):o=new Gi(g,Dr);const c=this.runWebGLProgram(o,[{dataId:t,shape:g,dtype:d}],d),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(r!=null)return this.convertAndCacheOnCPU(t);if(d==="string")return r;const a=this.activeTimers!=null;let v;a&&(v=jn());let u;if(d==="complex64"){const o=this.readSync(S.real.dataId),c=this.readSync(S.imag.dataId);u=Tr(o,c)}else u=this.getValuesFromTexture(t);return a&&(this.downloadWaitMs+=jn()-v),this.convertAndCacheOnCPU(t,u)}async read(t){if(this.pendingRead.has(t)){const l=this.pendingRead.get(t);return new Promise(f=>l.push(f))}const s=this.texData.get(t),{values:r,shape:d,slice:S,dtype:i,complexTensorInfos:g,isPacked:e}=s;if(S!=null){let l;e?l=new zr(d,Dr):l=new Gi(d,Dr);const f=this.runWebGLProgram(l,[{dataId:t,shape:d,dtype:i}],i),m=this.read(f.dataId);return this.disposeIntermediateTensorInfo(f),m}if(r!=null)return this.convertAndCacheOnCPU(t);if(dt().getBool("DEBUG")&&!dt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&dt().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let a=null,v;if(i!=="complex64"&&dt().get("WEBGL_BUFFER_SUPPORTED")){v=this.decode(t);const l=this.texData.get(v.dataId);a=this.gpgpu.createBufferFromTexture(l.texture.texture,...xf(d))}this.pendingRead.set(t,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let u;if(i==="complex64"){const l=await Promise.all([this.read(g.real.dataId),this.read(g.imag.dataId)]),f=l[0],m=l[1];u=Tr(f,m)}else if(a==null)u=this.getValuesFromTexture(t);else{const l=mt(d);u=this.gpgpu.downloadFloat32MatrixFromBuffer(a,l)}if(v!=null&&this.disposeIntermediateTensorInfo(v),a!=null){const l=this.gpgpu.gl;Pt(l,()=>l.deleteBuffer(a))}const o=this.convertAndCacheOnCPU(t,u),c=this.pendingRead.get(t);return this.pendingRead.delete(t),c.forEach(l=>l(o)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Oi().removeDataId(t,this),this.pendingDeletes--),o}readToGPU(t,s={}){const r=this.texData.get(t),{values:d,shape:S,slice:i,dtype:g,isPacked:e,texture:a}=r;if(g==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let c;e?c=new zr(S,Dr):c=new Gi(S,Dr);const l=this.runWebGLProgram(c,[{dataId:t,shape:S,dtype:g}],g),f=this.readToGPU(l,s);return this.disposeIntermediateTensorInfo(l),f}if(a==null)throw d!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const v=this.decode(t,s.customTexShape),u=Oi().makeTensorFromTensorInfo(v),o=this.texData.get(v.dataId);return Object.assign({tensorRef:u},o.texture)}bufferSync(t){const s=this.readSync(t.dataId);if(t.dtype==="string")try{const r=s.map(d=>ta(d));return jt(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return jt(t.shape,t.dtype,s)}checkNumericalProblems(t){if(t!=null)for(let s=0;s<t.length;s++){const r=t[s];if(!Sq(r))throw dt().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:s,dtype:r,isPacked:d}=this.texData.get(t),S=mt(s);if(dt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const o=this.decode(t),c=this.texData.get(o.dataId),l=this.gpgpu.downloadMatrixFromPackedTexture(c.texture.texture,...xf(s)).subarray(0,S);return this.disposeIntermediateTensorInfo(o),l}const i=dt().getBool("WEBGL_PACK")&&d===!0,g=i?Sf(s):s,e=i?new B_(g):new $_(g),a=this.runWebGLProgram(e,[{shape:g,dtype:r,dataId:t}],"float32"),v=this.texData.get(a.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture.texture,v.texShape[0],v.texShape[1]).subarray(0,S);return this.disposeIntermediateTensorInfo(a),u}timerAvailable(){return dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const s=this.activeTimers,r=[];let d=!1;this.programTimersStack==null?(this.programTimersStack=r,d=!0):this.activeTimers.push(r),this.activeTimers=r,t();const S=qa(this.activeTimers.map(e=>e.query)).filter(e=>e!=null),i=qa(this.activeTimers.map(e=>e.name)).filter(e=>e!=null);this.activeTimers=s,d&&(this.programTimersStack=null);const g={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(S);g.kernelMs=X5(e),g.getExtraProfileInfo=()=>e.map((a,v)=>({name:i[v],ms:a})).map(a=>`${a.name}: ${a.ms}`).join(", ")}else g.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,g})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:jn(),endMs:null}}endTimer(t){return dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=jn(),t)}async getQueryTime(t){if(dt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const s=t;return s.endMs-s.startMs}disposeData(t,s=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(s?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!s&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:r}=this.texData.get(t);return r!=null&&(this.disposeData(r.real.dataId,s),this.disposeData(r.imag.dataId,s)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:s,dtype:r,texShape:d,usage:S,isPacked:i,slice:g}=this.texData.get(t),e=g&&g.origDataId||t,a=this.dataRefCount.get(e);a>1?this.dataRefCount.set(e,a-1):(this.dataRefCount.delete(e),s!=null&&(this.numBytesInGPU-=this.computeBytes(d,r),this.textureManager.releaseTexture(s,d,S,i)));const v=this.texData.get(t);v.texture=null,v.texShape=null,v.isPacked=!1,v.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,s=get){return dt().getBool("WEBGL_CPU_FORWARD")&&t.every(r=>this.texData.get(r.dataId).texture==null&&mt(r.shape)<s)}getGPGPUContext(){return this.gpgpu}where(t){Cs("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const s=t.dataSync();return det(t.shape,s)}packedUnaryOp(t,s,r){const d=new zr(t.shape,s),S=this.compileAndRun(d,[t],r);return Oi().makeTensorFromTensorInfo(S)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const d=ZF(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,d)}if(dt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,$w,t.dtype);const s=new Gi(t.shape,$w),r=this.compileAndRun(s,[t]);return Oi().makeTensorFromTensorInfo(r)}makeTensorInfo(t,s,r){let d;if(s==="string"&&r!=null&&r.length>0&&Sh(r[0])){const S=r.map(i=>Zr(i));d=this.write(S,t,s)}else d=this.write(r,t,s);return this.texData.get(d).usage=null,{dataId:d,shape:t,dtype:s}}makeOutput(t,s,r){return Oi().makeTensorFromTensorInfo(this.makeTensorInfo(t,s,r),this)}unpackTensor(t){const s=new fet(t.shape);return this.runWebGLProgram(s,[t],t.dtype)}packTensor(t){const s=new Ztt(t.shape),r=!0;return this.runWebGLProgram(s,[t],t.dtype,null,r)}packedReshape(t,s){const r=[Fl(t.shape),...Dl(t.shape)],d={dtype:t.dtype,shape:r,dataId:t.dataId},S=[Fl(s),...Dl(s)],i=new qF(S,r),g=!0,e=[r],a=this.runWebGLProgram(i,[d],t.dtype,e,g);return{dataId:a.dataId,shape:s,dtype:a.dtype}}decode(t,s){const r=this.texData.get(t),{isPacked:d,shape:S,dtype:i}=r;if(s!=null){const o=mt(S),c=s[0]*s[1]*4;q(o<=c,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const g=Sf(S);let e;d?e=new M_(g):e=new L_(g);const a=!0,v=[s??xf(g)],u=this.runWebGLProgram(e,[{shape:g,dtype:i,dataId:t}],i,v,a,s);return{dtype:i,shape:S,dataId:u.dataId}}runWebGLProgram(t,s,r,d,S=!1,i){const g=this.makeTensorInfo(t.outputShape,r),e=this.texData.get(g.dataId);if(t.packedOutput&&(e.isPacked=!0),t.outPackingScheme===ch.DENSE){const h=i??xf(t.outputShape);e.texShape=h.map(p=>p*2)}if(t.outTexUsage!=null&&(e.usage=t.outTexUsage),mt(g.shape)===0)return e.values=Tn(g.dtype,0),g;const a=[],v=s.map(h=>{if(h.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let p=this.texData.get(h.dataId);if(p.texture==null){if(!t.packedInputs&&mt(h.shape)<=dt().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:h.shape,texData:null,isUniform:!0,uniformValues:p.values};t.packedInputs&&(p.isPacked=!0,p.shape=h.shape)}if(this.uploadToGPU(h.dataId),!!p.isPacked!=!!t.packedInputs)h=p.isPacked?this.unpackTensor(h):this.packTensor(h),a.push(h),p=this.texData.get(h.dataId);else if(p.isPacked&&!Vd(p.shape,h.shape)){const y=h,x=h.shape;h.shape=p.shape,h=this.packedReshape(h,x),a.push(h),p=this.texData.get(h.dataId),y.shape=x}return{shape:h.shape,texData:p,isUniform:!1}});this.uploadToGPU(g.dataId);const u={shape:g.shape,texData:e,isUniform:!1},o=O_(t,v,u),c=this.getAndSaveBinary(o,()=>F_(this.gpgpu,t,v,u)),l=this.activeTimers!=null;let f;l&&(f=this.startTimer()),dt().get("ENGINE_COMPILE_ONLY")||D_(this.gpgpu,c,v,u,d),a.forEach(h=>this.disposeIntermediateTensorInfo(h)),l&&(f=this.endTimer(f),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(f)}));const m=dt().get("WEBGL_FLUSH_THRESHOLD");if(m>0){const h=jn();h-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=h)}if(!dt().getBool("WEBGL_LAZILY_UNPACK")&&e.isPacked&&S===!1){const h=this.unpackTensor(g);return this.disposeIntermediateTensorInfo(g),h}return g}compileAndRun(t,s,r,d,S=!1){return r=r||s[0].dtype,this.runWebGLProgram(t,s,r,d,S)}getAndSaveBinary(t,s){return t in this.binaryCache||(this.binaryCache[t]=s()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(dt().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(s=>{this.gpgpu.deleteProgram(this.binaryCache[s].webGLProgram),delete this.binaryCache[s]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ft(()=>{if(!dt().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=dt().getBool("DEBUG");dt().set("DEBUG",!1);const s=this.abs(Vt(1e-8)).dataSync()[0];if(dt().set("DEBUG",t),s>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?pet:met}uploadToGPU(t){const s=this.texData.get(t),{shape:r,dtype:d,values:S,texture:i,usage:g,isPacked:e}=s;if(i!=null)return;const a=this.activeTimers!=null;let v;a&&(v=jn());let u=s.texShape;if(u==null&&(u=zq(r,e),s.texShape=u),S!=null){const o=Sf(r);let c,l=u[1],f=u[0];const m=S instanceof Uint8Array||S instanceof Uint8ClampedArray;(e||!m)&&([l,f]=Yl(u[0],u[1])),e?c=new z_(o,m):c=new Dw(o,m);const h=m?[f,l]:u,p=this.makeTensorInfo(h,d),y=this.texData.get(p.dataId);m?y.usage=As.PIXELS:y.usage=As.UPLOAD,y.texShape=h,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(p.dataId),l,f,S);const x=[[f,l]],T=!0,C=this.runWebGLProgram(c,[p],d,x,T),E=this.texData.get(C.dataId);s.texShape=E.texShape,s.isPacked=E.isPacked,s.usage=E.usage,dt().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(s.texture=E.texture,s.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(p),a&&(this.uploadWaitMs+=jn()-v)}else{const o=this.acquireTexture(u,g,d,e);s.texture=o}}convertAndCacheOnCPU(t,s){const r=this.texData.get(t),{dtype:d}=r;return s!=null&&(r.values=Tet(s,d)),r.values}acquireTexture(t,s,r,d){if(this.numBytesInGPU+=this.computeBytes(t,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const S=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${S} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,s,d)}computeBytes(t,s){return t[0]*t[1]*dd(s)}checkCompileCompletion(){for(const[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){const t=[];if(this.gpgpu.parallelCompilationExtension){for(const[,s]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(s));return Promise.all(t)}else{for(const[,s]of Object.entries(this.binaryCache)){const r=new Promise(d=>{try{this.checkCompletion_(s),d(!0)}catch(S){throw S}});t.push(r)}return Promise.all(t)}}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await kR(),this.checkCompletionAsync_(t))}checkCompletion_(t){if(this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(BF(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const t of Object.values(this.binaryCache)){this.gpgpu.buildVao(t.webGLProgram);const{variablesLocations:s,customUniformLocations:r,infLoc:d,nanLoc:S,outShapeLocation:i,outShapeStridesLocation:g,outTexShapeLocation:e}=UF(this.gpgpu,t.program,t.webGLProgram);t.variablesLocations=s,t.customUniformLocations=r,t.infLoc=d,t.nanLoc=S,t.outShapeLocation=i,t.outShapeStridesLocation=g,t.outTexShapeLocation=e}}createTensorFromGPUData(t,s,r){t.channels=t.channels||"RGBA";const{texture:d,height:S,width:i,channels:g}=t,e=Oi().backend;if(!e.gpgpu.gl.isTexture(d))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const a=e.writeTexture(d,s,r,S,i,g);return Oi().makeTensorFromDataId(a,s,r,e)}}Qm.nextDataId=0;function Tet(n,t){if(t==="float32"||t==="complex64")return n;if(t==="int32"||t==="bool"){const s=t==="int32"?new Int32Array(n.length):new Uint8Array(n.length);for(let r=0;r<s.length;++r)s[r]=Math.round(n[r]);return s}else throw new Error(`Unknown dtype ${t}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Kb()&&hI("webgl",()=>new Qm,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cT=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class lo{constructor(t,s,r){this.variableNames=["A","B"],this.outputShape=Ht(s,r),this.enableShapeUniforms=Dn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wo=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Jl{constructor(t,s,r,d=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ht(s,r);const S=this.outputShape.length;this.enableShapeUniforms=Dn(S);let i="";if(d)if(S===0||mt(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${pe(S)} coords = getOutputCoords();
        `,S===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const e=Vn("coords",S);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${e[S-2]} + 1) >= outShape[${S} - 2];
            bool nextColOutOfBounds =
              (${e[S-1]} + 1) >= outShape[${S} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${e[S-2]} + 1) >= ${this.outputShape[S-2]};
            bool nextColOutOfBounds =
              (${e[S-1]} + 1) >= ${this.outputShape[S-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gs(n){const{inputs:t,backend:s}=n,{x:r}=t;return s.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Cet={kernelName:Uh,backendName:"webgl",kernelFunc:gs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ea(n){const{inputs:t,backend:s}=n,{real:r,imag:d}=t,S=s.makeTensorInfo(r.shape,"complex64"),i=s.texData.get(S.dataId),g=gs({inputs:{x:r},backend:s}),e=gs({inputs:{x:d},backend:s});return i.complexTensorInfos={real:g,imag:e},S}const wet={kernelName:uy,backendName:"webgl",kernelFunc:Ea};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _F="return (a < 0.) ? b * a : a;",tD=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Eet(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{alpha:S}=r,i=s.makeTensorInfo([],"float32",pa(S,"float32")),g=dt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Jl(tD,d.shape,i.shape):new lo(_F,d.shape,i.shape),e=s.runWebGLProgram(g,[d,i],"float32");return s.disposeIntermediateTensorInfo(i),e}const Aet={kernelName:Pp,backendName:"webgl",kernelFunc:Eet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eD="return (a < 0.) ? b * a : a;",nD=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function bet(n){const{inputs:t,backend:s}=n,{x:r,alpha:d}=t,S=dt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Jl(nD,r.shape,d.shape):new lo(eD,r.shape,d.shape);return s.runWebGLProgram(S,[r,d],"float32")}const Iet={kernelName:Zp,backendName:"webgl",kernelFunc:bet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ql="if (isnan(x)) return x;";function ae({opSnippet:n,packedOpSnippet:t,cpuKernelImpl:s,dtype:r}){return({inputs:d,backend:S})=>{const{x:i}=d,g=S,e=r||i.dtype;if(g.shouldExecuteOnCPU([i])&&s!=null){const u=g.texData.get(i.dataId),o=s(u.values,e);return g.makeTensorInfo(i.shape,e,o)}const a=dt().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let v;return a?v=new zr(i.shape,t):v=new Gi(i.shape,n),g.runWebGLProgram(v,[i],e)}}function En({opSnippet:n,packedOpSnippet:t,checkOutOfBounds:s=!1,supportsComplex:r=!1,cpuKernelImpl:d,dtype:S}){return({inputs:i,backend:g})=>{const{a:e,b:a}=i,v=g;if(r&&e.dtype==="complex64"){const l=v.texData.get(e.dataId),f=v.texData.get(a.dataId),[m,h]=[[l.complexTensorInfos.real,f.complexTensorInfos.real],[l.complexTensorInfos.imag,f.complexTensorInfos.imag]].map(y=>{const[x,T]=y,C={dataId:x.dataId,dtype:x.dtype,shape:e.shape},E={dataId:T.dataId,dtype:T.dtype,shape:a.shape},A=new lo(n,e.shape,a.shape);return v.runWebGLProgram(A,[C,E],ps(x.dtype,T.dtype))}),p=Ea({inputs:{real:m,imag:h},backend:v});return v.disposeIntermediateTensorInfo(m),v.disposeIntermediateTensorInfo(h),p}const u=S||ps(e.dtype,a.dtype);if((e.dtype==="string"||a.dtype==="string"||v.shouldExecuteOnCPU([e,a]))&&d!=null){const l=v.texData.get(e.dataId).values,f=v.texData.get(a.dataId).values,m=e.dtype==="string"?Sr(l):l,h=e.dtype==="string"?Sr(f):f,[p,y]=d(e.shape,a.shape,m,h,u),x=v.makeTensorInfo(y,u),T=v.texData.get(x.dataId);return T.values=p,x}const o=dt().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let c;return o?c=new Jl(t,e.shape,a.shape,s):c=new lo(n,e.shape,a.shape),v.runWebGLProgram(c,[e,a],u)}}function fh(n,t=!1){if(n==="linear")return t?aet:eet;if(n==="relu")return t?uet:set;if(n==="elu")return t?oet:net;if(n==="relu6")return t?het:iet;if(n==="prelu")return t?nD:eD;if(n==="leakyrelu")return t?tD:_F;if(n==="sigmoid")return t?cet:ret;throw new Error(`Activation ${n} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sD{constructor(t,s,r,d=!1,S=!1,i=!1,g=null,e=!1,a=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Dn(this.outputShape.length);const v=d?t[1]:t[2],u=Math.ceil(v/2),o=d?"i * 2, rc.y":"rc.y, i * 2",c=S?"rc.z, i * 2":"i * 2, rc.z",l=d?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=S?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",h="";g&&(e?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${g}
        }`:a?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${g}
        }`:m=`vec4 activation(vec4 x) {
          ${g}
        }`,h="result = activation(result);");const p=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),e&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha");let y="rc.x",x="rc.x";t[0]<s[0]?y=`imod(rc.x, ${t[0]})`:s[0]<t[0]&&(x=`imod(rc.x, ${s[0]})`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${u}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${y};
        int batchB = ${x};
        for (int i = 0; i < ${u}; i++) {
          vec4 a = getMatrixA(batchA, ${o});
          vec4 b = getMatrixB(batchB, ${c});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${l[0]} * ${f[0]});
          result += (${l[1]} * ${f[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${p}

        ${h}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bw={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class kw{constructor(t,s,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ht(s,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zw="return a * b;";function fT(n){const{inputs:t,backend:s}=n,{a:r,b:d}=t,S=ps(r.dtype,d.dtype);if(r.dtype==="complex64"){const g=s.texData.get(r.dataId),e=s.texData.get(d.dataId),a=new kw(Bw.REAL,r.shape,d.shape),v=new kw(Bw.IMAG,r.shape,d.shape),u=[{dataId:g.complexTensorInfos.real.dataId,dtype:g.complexTensorInfos.real.dtype,shape:r.shape},{dataId:g.complexTensorInfos.imag.dataId,dtype:g.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:d.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:d.shape}],o=s.runWebGLProgram(a,u,"float32"),c=s.runWebGLProgram(v,u,"float32"),l=Ea({inputs:{real:o,imag:c},backend:s});return s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(c),l}if(s.shouldExecuteOnCPU([r,d])){const g=s.texData.get(r.dataId),e=s.texData.get(d.dataId),[a,v]=Ett(r.shape,d.shape,g.values,e.values,S),u=s.makeTensorInfo(v,S),o=s.texData.get(u.dataId);return o.values=a,u}let i;return dt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new Jl(zw,r.shape,d.shape):i=new lo(zw,r.shape,d.shape),s.runWebGLProgram(i,[r,d],S)}const Ret={kernelName:Jh,backendName:"webgl",kernelFunc:fT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Net(n,t,s){const r=[Fl(n.shape),...Dl(n.shape)],d={dtype:n.dtype,shape:r,dataId:n.dataId},S=[Fl(t),...Dl(t)],i=new qF(S,r),g=!0,e=[r],a=s.runWebGLProgram(i,[d],n.dtype,e,g);return{dataId:a.dataId,shape:t,dtype:a.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function It(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{shape:S}=r,i=s,g=mt(d.shape),e=wb(S,g),a=mt(e);q(g===a,()=>`The new shape (${e}) has ${a} elements and the old shape (${d.shape}) has ${g} elements. The new shape and old shape must have the same number of elements.`);const v=i.texData.get(d.dataId);return v.isPacked&&!Vd(d.shape,e)&&!(v.texture!==null&&Vd(v.shape,e))?Net(d,e,i):(i.incRef(d.dataId),{dataId:d.dataId,shape:e,dtype:d.dtype})}const Pet={kernelName:Jp,backendName:"webgl",kernelFunc:It};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vw{constructor(t,s){this.variableNames=["x"];const{windowSize:r,batchSize:d,inSize:S,outSize:i}=t;this.outputShape=[d,i];const g=Math.floor(r/4)*4,e=r%4;let a="sumValue += dot(values, ones);";if(s!=null){const u=1/s;a=`sumValue += dot(values * ${yl(u)?u.toPrecision(2):u}, ones);`}let v="";S%r>0&&(v=`
        if (inIdx < 0 || inIdx >= ${S}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${v}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${g}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${a}
        }

        int inIdx = inOffset + ${g};
        if (${e===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${a}
        } else if (${e===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${a}
        } else if (${e===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${a}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fet{constructor(t,s){this.variableNames=["x"];const{windowSize:r,batchSize:d,inSize:S,outSize:i}=t;this.outputShape=[d,i];let g="0.0",e="";s==="prod"?g="1.0":s==="min"?(g="1.0 / 1e-20",e="min"):s==="max"&&(g="-1.0 / 1e-20",e="max");let a=`${s}(${s}(${s}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;s==="sum"?a="sumValue":s==="prod"?a="prodValue":s==="all"?a="allValue":s==="any"&&(a="anyValue");const v=Math.floor(r/4)*4,u=r%4;let o=`
      if (${s==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${s==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${e}(values, minMaxValue);
        if (${s==="min"} || ${s==="max"}) {
          minMaxValue = ${e}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,c="vec4";s==="all"?(g="1.0",o=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,c="bvec4"):s==="any"&&(g="0.0",o=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,c="bvec4");let l="";S%r>0&&(l=`
        if (inIdx < 0 || inIdx >= ${S}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${g};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${l}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${g});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${v}; i += 4) {
          int inIdx = inOffset + i;
          ${c} values = ${c}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${o}
        }

        int inIdx = inOffset + ${v};
        if (${u===1}) {
          ${c} values = ${c}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${o}
        } else if (${u===2}) {
          ${c} values = ${c}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${o}
        } else if (${u===3}) {
          ${c} values = ${c}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${o}
        }
        setOutput(${a});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Det(n){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const s=t.length?t[t.length-1].outSize:n[1],r=Lm(s);t.push({inSize:s,windowSize:r,outSize:Math.ceil(s/r)})}return t}function Eo(n,t,s,r){const d=Det(n.shape);let S=n;for(let i=0;i<d.length;i++){const{inSize:g,windowSize:e,outSize:a}=d[i];let v,u;s==="mean"?v=i===0?new Vw({windowSize:e,inSize:g,batchSize:n.shape[0],outSize:a},g):new Vw({windowSize:e,inSize:g,batchSize:n.shape[0],outSize:a}):v=new Fet({windowSize:e,inSize:g,batchSize:n.shape[0],outSize:a},s),u=S,S=r.runWebGLProgram(v,[S],t),u.dataId!==n.dataId&&r.disposeIntermediateTensorInfo(u)}return S}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oet{constructor(t,s){this.variableNames=["A"];const r=new Array(t.length);for(let i=0;i<r.length;i++)r[i]=t[s[i]];this.outputShape=r,this.rank=r.length;const d=pe(this.rank),S=Let(s);this.userCode=`
    void main() {
      ${d} resRC = getOutputCoords();
      setOutput(getA(${S}));
    }
    `}}function Let(n){const t=n.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const s=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let d=0;d<n.length;d++)r[n[d]]=s[d];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Met{constructor(t,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(t.length);for(let v=0;v<r.length;v++)r[v]=t[s[v]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const d=pe(this.rank),S=JF("rc",this.rank),i=new Array(this.rank);for(let v=0;v<s.length;v++)i[s[v]]=S[v];const g=`vec2(${i.slice(-2).join()})`,e=`++${S[this.rank-1]} < ${r[this.rank-1]}`,a=`getChannel(getA(${i.join()}), ${g})`;this.userCode=`
    void main() {
      ${d} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${a};
      if(${e}) {
        result[1] = ${a};
      }
      --${S[this.rank-1]};
      if(++${S[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${a};
        if(${e}) {
          result[3] = ${a};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jm(n,t,s){const r=dt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Met(n.shape,t):new Oet(n.shape,t);return s.runWebGLProgram(r,[n],n.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $et(n,t,s,r){const d=t,S=n.shape.length,i=Qt(d,n.shape);let g=i;const e=Oe(g,S),a=e!=null;let v=n;a&&(v=Jm(n,e,r),g=We(g.length,S)),Cn("sum",g,S);const[u,o]=mn(v.shape,g);let c=u;s&&(c=Ue(u,i));const l=mt(o),m=mt(n.shape)/l,h=It({inputs:{x:v},attrs:{shape:[m,l]},backend:r}),p=l1(n.dtype),y=Eo(h,p,"sum",r),x=It({inputs:{x:y},attrs:{shape:c},backend:r});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(y),a&&r.disposeIntermediateTensorInfo(v),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qm(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,keepDims:i}=r;return $et(d,S,i,s)}const Bet={kernelName:sm,backendName:"webgl",kernelFunc:qm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wn(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{perm:S}=r,i=s,g=d.shape.length,e=new Array(g);for(let v=0;v<e.length;v++)e[v]=d.shape[S[v]];let a;if(i.shouldExecuteOnCPU([d])){const u=i.texData.get(d.dataId).values,o=hT(u,d.shape,d.dtype,S,e);a=i.makeTensorInfo(e,d.dtype);const c=i.texData.get(a.dataId);c.values=o}else a=Jm(d,S,i);return a}const ket={kernelName:rl,backendName:"webgl",kernelFunc:Wn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iD=1e3;function Gd({a:n,b:t,transposeA:s,transposeB:r,backend:d,bias:S=null,preluActivationWeights:i=null,leakyreluAlpha:g=0,activation:e=null}){const a=n.shape.length,v=t.shape.length,u=s?n.shape[a-2]:n.shape[a-1],o=r?t.shape[v-1]:t.shape[v-2],c=s?n.shape[a-1]:n.shape[a-2],l=r?t.shape[v-2]:t.shape[v-1],f=n.shape.slice(0,-2),m=t.shape.slice(0,-2),h=mt(f),p=mt(m),x=Ht(n.shape.slice(0,-2),t.shape.slice(0,-2)).concat([c,l]);q(u===o,()=>`Error in matMul: inner shapes (${u}) and (${o}) of Tensors with shapes ${n.shape} and ${t.shape} and transposeA=${s} and transposeB=${r} must match.`);const T=s?[h,u,c]:[h,c,u],C=r?[p,l,o]:[p,o,l],E=It({inputs:{x:n},backend:d,attrs:{shape:T}}),A=It({inputs:{x:t},backend:d,attrs:{shape:C}}),w=[E,A],b=Math.max(h,p),I=s?E.shape[1]:E.shape[2],R=S!=null,N=i!=null,F=e==="leakyrelu",P=e!=null?fh(e,!0):null,O=R||N||F||P!=null;let M;if((c===1||l===1)&&I>iD&&O===!1){let k=E,V=A;s&&(k=Wn({inputs:{x:E},backend:d,attrs:{perm:[0,2,1]}}),w.push(k)),r&&(V=Wn({inputs:{x:A},backend:d,attrs:{perm:[0,2,1]}}),w.push(V));const W=l!==1,K=l===1;let B=k;W&&(B=It({inputs:{x:k},backend:d,attrs:{shape:[b,I,1]}}),w.push(B));const G=l===1?2:1;let D=V;K&&(D=It({inputs:{x:V},backend:d,attrs:{shape:[b,1,I]}}),w.push(D));const $=fT({inputs:{a:B,b:D},backend:d});M=qm({inputs:{x:$},backend:d,attrs:{axis:G,keepDims:!0}}),w.push($)}else{const k=ps(n.dtype,t.dtype),V=new sD(T,C,[b,c,l],s,r,R,P,N,F),W=[E,A];if(S!=null&&W.push(S),N&&W.push(i),F){const K=d.makeTensorInfo([],"float32",pa(g,"float32"));W.push(K),w.push(K)}M=d.runWebGLProgram(V,W,k)}const L=It({inputs:{x:M},backend:d,attrs:{shape:x}});w.push(M);for(const k of w)d.disposeIntermediateTensorInfo(k);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zet(n){const{inputs:t,backend:s,attrs:r}=n,{a:d,b:S,bias:i,preluActivationWeights:g}=t,{transposeA:e,transposeB:a,activation:v,leakyreluAlpha:u}=r;return Gd({a:d,b:S,transposeA:e,transposeB:a,backend:s,bias:i,preluActivationWeights:g,leakyreluAlpha:u,activation:v})}const Vet={kernelName:pd,backendName:"webgl",kernelFunc:zet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gw="return abs(x);";function Get(n){const{inputs:t,backend:s}=n,{x:r}=t;if(s.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const S=s.texData.get(r.dataId),i=ZF(S.values);return s.makeTensorInfo(r.shape,r.dtype,i)}let d;return dt().getBool("WEBGL_PACK_UNARY_OPERATIONS")?d=new zr(r.shape,Gw):d=new Gi(r.shape,Gw),s.runWebGLProgram(d,[r],r.dtype)}const Uet={kernelName:lp,backendName:"webgl",kernelFunc:Get};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wet=ui+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Xet=ae({opSnippet:Wet}),Het={kernelName:Ch,backendName:"webgl",kernelFunc:Xet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yet=ui+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,Ket=ae({opSnippet:Yet}),jet={kernelName:wh,backendName:"webgl",kernelFunc:Ket};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uw="return a + b;",Zet=En({opSnippet:Uw,packedOpSnippet:Uw,supportsComplex:!0,cpuKernelImpl:stt}),Qet={kernelName:zl,backendName:"webgl",kernelFunc:Zet};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jet{constructor(t,s){this.outputShape=[],this.outputShape=t,this.variableNames=s.map((S,i)=>`T${i}`);const r=[];this.variableNames.forEach(S=>{r.push(`float v${S} = get${S}AtOutCoords();`)});const d=this.variableNames.map(S=>`v${S}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${d};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qet{constructor(t,s){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=s.map((S,i)=>`T${i}`);const r=[];this.variableNames.forEach(S=>{r.push(`vec4 v${S} = get${S}AtOutCoords();`)});const d=this.variableNames.map(S=>`v${S}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${d};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vf(n){const{inputs:t,backend:s}=n,r=t;if(r.length===1)return gs({inputs:{x:r[0]},backend:s});if(r.length>dt().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(r.length/2),a=Vf({inputs:r.slice(0,e),backend:s}),v=Vf({inputs:r.slice(e),backend:s});return Vf({inputs:[a,v],backend:s})}const d=r.map(e=>e.dtype).reduce((e,a)=>ps(e,a)),S=r.map(e=>e.shape),g=dt().getBool("WEBGL_PACK")?new qet(r[0].shape,S):new Jet(r[0].shape,S);return s.runWebGLProgram(g,r,d)}const _et={kernelName:up,backendName:"webgl",kernelFunc:Vf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tnt(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,keepDims:i}=r,g=d.shape.length,e=Qt(S,d.shape);let a=e;const v=Oe(a,g);let u=d;v!=null&&(u=Wn({inputs:{x:d},backend:s,attrs:{perm:v}}),a=We(a.length,g)),Cn("all",a,g);const[o,c]=mn(u.shape,a),l=mt(c),f=It({inputs:{x:u},backend:s,attrs:{shape:[-1,l]}}),m=Eo(f,f.dtype,"all",s);let h;if(i){const p=Ue(o,e);h=It({inputs:{x:m},backend:s,attrs:{shape:p}})}else h=It({inputs:{x:m},backend:s,attrs:{shape:o}});return s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(m),v!=null&&s.disposeIntermediateTensorInfo(u),h}const ent={kernelName:sy,backendName:"webgl",kernelFunc:tnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nnt(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,keepDims:i}=r,g=d.shape.length,e=Qt(S,d.shape);let a=e;const v=Oe(a,g);let u=d;v!=null&&(u=Wn({inputs:{x:d},backend:s,attrs:{perm:v}}),a=We(a.length,g)),Cn("any",a,g);const[o,c]=mn(u.shape,a),l=mt(c),f=It({inputs:{x:u},backend:s,attrs:{shape:[-1,l]}}),m=Eo(f,f.dtype,"any",s);let h;if(i){const p=Ue(o,e);h=It({inputs:{x:m},backend:s,attrs:{shape:p}})}else h=It({inputs:{x:m},backend:s,attrs:{shape:o}});return s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(m),v!=null&&s.disposeIntermediateTensorInfo(u),h}const snt={kernelName:iy,backendName:"webgl",kernelFunc:nnt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class int{constructor(t,s,r){this.variableNames=["A"];const{windowSize:d,batchSize:S,outSize:i}=t;r||this.variableNames.push("bestIndicesA"),this.outputShape=[S,i];const g=s==="max"?">":"<",e=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${d};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${d}; i++) {
          int inIdx = ${e};
          float candidate = getA(batch, inIdx);
          if (candidate ${g} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rnt{constructor(t,s,r,d){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,q(t.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const S=t[t.length-1],i=Math.ceil(S/s);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),d||this.variableNames.push("bestIndicesA");const g=this.outputShape,e=g.length,a=pe(e),v=Vn("coords",e);let u,o;if(i===1){o=e+1;const A=pe(o);u=`
        ${A} sourceLocR = ${A}(${v.join()}, 0);
        ++${v[e-1]};
        ${A} sourceLocG = ${A}(${v.join()}, 0);
        ++${v[e-2]};
        ${A} sourceLocA = ${A}(${v.join()}, 0);
        --${v[e-1]};
        ${A} sourceLocB = ${A}(${v.join()}, 0);
        --${v[e-2]};`}else o=e,u=`
        ${a} sourceLocR = coords;
        ++${v[e-1]};
        ${a} sourceLocG = coords;
        ++${v[e-2]};
        ${a} sourceLocA = coords;
        --${v[e-1]};
        ${a} sourceLocB = coords;
        --${v[e-2]};`;const c=["x","y","z","w","u","v"].slice(0,o),l="."+c[o-1],f=c.map(A=>"int "+A),m=Vn("sourceLocR",o-1).concat("inIdx.r"),h=Vn("sourceLocG",o-1).concat("inIdx.g"),p=Vn("sourceLocB",o-1).concat("inIdx.b"),y=Vn("sourceLocA",o-1).concat("inIdx.a"),x=r==="max"?"greaterThan":"lessThan",T=d?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${h.join()}),
                             getBestIndicesAChannel(${p.join()}),
                             getBestIndicesAChannel(${y.join()})));`,C=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${h.join()}) : 0.,
            hasNextRow ? getAChannel(${p.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,E=d?"":`
      float getBestIndicesAChannel(${f.join()}) {
        return getChannel(getBestIndicesA(${c.join()}),
                                          vec2(${c.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${f.join()}) {
        return getChannel(getA(${c.join()}),
                               vec2(${c.slice(-2).join()}));
      }
      ${E}
      void main() {
        ${a} coords = getOutputCoords();
        bool hasNextCol = ${v[e-1]} < ${g[e-1]-1};
        bool hasNextRow = ${v[e-2]} < ${g[e-2]-1};
        ${u}
        ivec4 srcIdx = ivec4(sourceLocR${l}, sourceLocG${l},
          sourceLocB${l}, sourceLocA${l}) * ${s};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${s}; i++) {
          inIdx = srcIdx;
          ${T}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rD(n,t,s,r=null){let d=t.shape[0],S=t.shape[1];r!=null&&(d=r.shape[0],S=r.shape[1]);const i=Lm(S),g={windowSize:i,inSize:S,batchSize:d,outSize:Math.ceil(S/i)},e=new int(g,s,r==null),a=[t];r!=null&&a.push(r);const v=n.runWebGLProgram(e,a,"int32");if(v.shape[1]===1)return v;const u=rD(n,t,s,v);return n.disposeIntermediateTensorInfo(v),u}function aD(n,t,s,r=null){const d=r!=null?r.shape:t.shape,S=d[d.length-1],i=Lm(S),g=new rnt(d,i,s,r==null),e=r==null?[t]:[t,r],a=n.runWebGLProgram(g,e,"int32");if(a.shape.length===t.shape.length){const v=aD(n,t,s,a);return n.disposeIntermediateTensorInfo(a),v}return a}function oD(n,t,s,r){const d=[s];if(Cn("arg"+r.charAt(0).toUpperCase()+r.slice(1),d,t.shape.length),!dt().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const S=[],i=n.texData.get(t.dataId),g=i!==null&&i.isPacked;let e=t;g&&(e=n.unpackTensor(t),S.push(e));const[a,v]=mn(e.shape,d),u=mt(v),o=It({inputs:{x:e},backend:n,attrs:{shape:[-1,u]}});S.push(o);const c=rD(n,o,r);S.push(c);const l=It({inputs:{x:c},backend:n,attrs:{shape:a}});return S.forEach(f=>n.disposeIntermediateTensorInfo(f)),l}return aD(n,t,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ant(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S}=r;let i=Qt(S,d.shape);const g=Oe(i,d.shape.length);let e=d;const a=[];g!=null&&(e=Wn({inputs:{x:d},backend:s,attrs:{perm:g}}),a.push(e),i=We(i.length,e.shape.length)),Cn("argMax",[i[0]],e.shape.length);const v=oD(s,e,i[0],"max");return a.forEach(u=>s.disposeIntermediateTensorInfo(u)),v}const ont={kernelName:hp,backendName:"webgl",kernelFunc:ant};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lnt(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S}=r;let i=Qt(S,d.shape);const g=Oe(i,d.shape.length);let e=d;const a=[];g!=null&&(e=Wn({inputs:{x:d},backend:s,attrs:{perm:g}}),a.push(e),i=We(i.length,e.shape.length)),Cn("argMin",[i[0]],e.shape.length);const v=oD(s,e,i[0],"min");return a.forEach(u=>s.disposeIntermediateTensorInfo(u)),v}const unt={kernelName:cp,backendName:"webgl",kernelFunc:lnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hnt=ui+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,cnt=ae({opSnippet:hnt}),fnt={kernelName:Eh,backendName:"webgl",kernelFunc:cnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dnt=ui+"return log(x + sqrt(x * x + 1.0));",pnt=ae({opSnippet:dnt}),mnt={kernelName:Ah,backendName:"webgl",kernelFunc:pnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vnt=ui+`
  return atan(x);
`,gnt=ae({opSnippet:vnt}),xnt={kernelName:bh,backendName:"webgl",kernelFunc:gnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ynt=cT+`
  return atan(a, b);
`,Tnt=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+wo+`
  return result;
`,Snt=En({opSnippet:ynt,packedOpSnippet:Tnt}),Cnt={kernelName:Rh,backendName:"webgl",kernelFunc:Snt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wnt=ui+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Ent=ae({opSnippet:wnt}),Ant={kernelName:Ih,backendName:"webgl",kernelFunc:Ent};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dh{constructor(t,s,r,d=!1,S=!1){if(this.variableNames=["x"],s==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,g=t.strideHeight,e=t.strideWidth,a=t.dilationHeight,v=t.dilationWidth,u=t.effectiveFilterHeight,o=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left;this.outputShape=t.outShape;const f=s==="avg",m=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,h=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let p="0.0";if(f||(p="-1.0 / 1e-20"),r){const A=">=";this.userCode=`
        const ivec2 strides = ivec2(${g}, ${e});
        const ivec2 pads = ivec2(${c}, ${l});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${u};
              wR += ${a}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${o};
                wC += ${v}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${A} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${d?S?m:h:`wR * ${o} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const y="max";let x=`${s}(${s}(${s}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;s==="avg"&&(x="avgValue / max(count, 1.0)");const T=Math.floor(i/4)*4,C=i%4,E=`
      if (${f}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${y}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${g}, ${e});
      const ivec2 pads = ivec2(${c}, ${l});
      const float initializationValue = ${p};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${p});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${u};
            wR += ${a}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${T}; wC += 4) {
            int xC = xCCorner + wC * ${v};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${v}, d),
              getValue(batch, xR, xC + 2 * ${v}, d),
              getValue(batch, xR, xC + 3 * ${v}, d)
            );

            ${E}
          }

          int xC = xCCorner + ${T};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${v}, d),
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${v}, d),
              getValue(batch, xR, xC + 2 * ${v}, d),
              initializationValue
            );

            ${E}
          }
        }
        setOutput(${x});
      }
    `}}class dT{constructor(t,s,r,d=!1,S=!1){if(this.variableNames=["x"],s==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,g=t.strideDepth,e=t.strideHeight,a=t.strideWidth,v=t.dilationDepth,u=t.dilationHeight,o=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,m=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;const y=s==="avg";let x="0.0";if(y||(x="-1.0 / 1e-20"),r){const b=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${g}, ${e}, ${a});
        const ivec3 pads = ivec3(${m}, ${h}, ${p});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${c};
              wD += ${v}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${l};
                wR += ${u}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${f};
                  wC += ${o}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${b} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${d?S?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${l} * ${f} +
                      wR * ${f} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const T="max";let C=`${s}(${s}(${s}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;s==="avg"&&(C="avgValue / max(count, 1.0)");const E=Math.floor(i/4)*4,A=i%4,w=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${T}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${g}, ${e}, ${a});
      const ivec3 pads = ivec3(${m}, ${h}, ${p});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${c};
            wD += ${v}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${l};
            wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${E}; wC += 4) {
              int xC = xCCorner + wC * ${o};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${o}, ch),
                getValue(batch, xD, xR, xC + 2 * ${o}, ch),
                getValue(batch, xD, xR, xC + 3 * ${o}, ch)
              );

              ${w}
            }

            int xC = xCCorner + ${E};
            if (${A===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${w}
            } else if (${A===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${o}, ch),
                initializationValue,
                initializationValue
              );

              ${w}
            } else if (${A===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${o}, ch),
                getValue(batch, xD, xR, xC + 2 * ${o}, ch),
                initializationValue
              );

              ${w}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bnt(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t;kc(d,"avgPool");const{filterSize:S,strides:i,pad:g,dimRoundingMode:e}=r,a=1;q(Sn(i,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const v=oi(d.shape,S,i,a,g,e);if(v.filterWidth===1&&v.filterHeight===1&&ee(v.inShape,v.outShape))return gs({inputs:{x:d},backend:s});const u=new dh(v,"avg",!1);return s.runWebGLProgram(u,[d],"float32")}const Int={kernelName:fp,backendName:"webgl",kernelFunc:bnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rnt(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{filterSize:S,strides:i,pad:g,dimRoundingMode:e,dataFormat:a}=r,v=[1,1,1],u=wr(d.shape,S,i,v,g,e,a),o=new dT(u,"avg",!1);return s.runWebGLProgram(o,[d],"float32")}const Nnt={kernelName:dp,backendName:"webgl",kernelFunc:Rnt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pnt{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const s=t.filterHeight,r=t.filterWidth,d=t.strideHeight,S=t.strideWidth,i=t.dilationHeight,g=t.dilationWidth,e=t.effectiveFilterHeight,a=t.effectiveFilterWidth,v=e-1-t.padInfo.top,u=a-1-t.padInfo.left,o=1/(s*r);this.userCode=`
      const ivec2 pads = ivec2(${v}, ${u});
      const float avgMultiplier = float(${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${e};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${d}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a};
            wC+= ${g}) {
            float dyC = float(dyCCorner + wC) / ${S}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Fnt{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const s=t.filterDepth,r=t.filterHeight,d=t.filterWidth,S=t.strideDepth,i=t.strideHeight,g=t.strideWidth,e=t.dilationDepth,a=t.dilationHeight,v=t.dilationWidth,u=t.effectiveFilterDepth,o=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.front,f=o-1-t.padInfo.top,m=c-1-t.padInfo.left,h=1/(s*r*d);this.userCode=`
      const ivec3 pads = ivec3(${l}, ${f}, ${m});
      const float avgMultiplier = float(${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
            wD += ${e}) {
          float dyD = float(dyDCorner + wD) / ${S}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${o};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${v}) {
              float dyC = float(dyCCorner + wC) / ${g}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dnt(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,input:S}=t,i=S,{filterSize:g,strides:e,pad:a,dimRoundingMode:v}=r,u=[1,1,1],o=wr(i.shape,g,e,u,a,v),c=new Fnt(o);return s.runWebGLProgram(c,[d],i.dtype)}const Ont={kernelName:ay,backendName:"webgl",kernelFunc:Dnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lnt(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,input:S}=t,i=S;kc([d,S],"avgPoolGrad");const{filterSize:g,strides:e,pad:a}=r,v=oi(i.shape,g,e,1,a),u=new Pnt(v);return s.runWebGLProgram(u,[d],i.dtype)}const Mnt={kernelName:ry,backendName:"webgl",kernelFunc:Lnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $nt(n){const{inputs:t,backend:s,attrs:r}=n,{a:d,b:S}=t,{transposeA:i,transposeB:g}=r;return Gd({a:d,b:S,transposeA:i,transposeB:g,backend:s})}const Bnt={kernelName:pp,backendName:"webgl",kernelFunc:$nt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class knt{constructor(t,s,r,d,S,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Ht(t,s),Ht(t,r);let g="0.0";d!=null&&(Ht(t,d),this.variableNames.push("offset"),g="getOffsetAtOutCoords()");let e="1.0";S!=null&&(Ht(t,S),this.variableNames.push("scale"),e="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${g};
        float scale = ${e};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class znt{constructor(t,s,r,d,S,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ht(t,s),Ht(t,r);let g="vec4(0.0)";d!=null&&(Ht(t,d),this.variableNames.push("offset"),g="getOffsetAtOutCoords()");let e="vec4(1.0)";S!=null&&(Ht(t,S),this.variableNames.push("scale"),e="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${g};
        vec4 scale = ${e};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vnt=({inputs:n,backend:t,attrs:s})=>{const{x:r,mean:d,variance:S,offset:i,scale:g}=n;q(d.shape.length===S.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),q(i==null||d.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),q(g==null||d.shape.length===g.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:e}=s;e==null&&(e=.001);const a=[r,d,S];let v=null;i!=null&&(v=i.shape,a.push(i));let u=null;g!=null&&(u=g.shape,a.push(g));const o=dt().getBool("WEBGL_PACK_NORMALIZATION")?new znt(r.shape,d.shape,S.shape,v,u,e):new knt(r.shape,d.shape,S.shape,v,u,e);return t.runWebGLProgram(o,a,a[0].dtype)},Gnt={kernelName:Ip,backendName:"webgl",kernelFunc:Vnt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Unt{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const s=pe(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=Wnt(this.rank);let d;const S=t.map((i,g)=>`sourceLoc.${J0[g]} = start[${g}] + coords.${J0[g]};`);d=`
        ${s} sourceLoc;
        ${s} coords = getOutputCoords();
        ${S.join(`
`)}
      `,this.userCode=`
      void main() {
        ${d}
        setOutput(getSource(${r}));
      }
    `}}const J0=["x","y","z","w","u","v"];function Wnt(n){if(n===1)return"sourceLoc";if(n<=6)return J0.slice(0,n).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xnt{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=pe(this.rank),r=Vn("coords",this.rank),d=Vn("sourceLoc",this.rank),S=this.rank===1?"sourceLoc":`vec2(${d.slice(-2).join()})`,i=`getChannel(getSource(${d.join()}), ${S})`,g=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
        ++${d[this.rank-1]};
        result.y = ${i};
        --${d[this.rank-1]};
      }
    `,e=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${t[this.rank-2]}) {
        ++${d[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
          ++${d[this.rank-1]};
          result.w = ${i};
        }
      }
    `,a=this.rank<=4?`sourceLoc = coords +
            ${s}(${t.map((v,u)=>`start[${u}]`).join()});`:t.map((v,u)=>`${d[u]} = ${r[u]} + start[${u}];`).join(`
`);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        ${s} sourceLoc;
        ${a}
        vec4 result = vec4(0.);
        ${g}
        ${e}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hnt(n,t,s,r){const d=r.texData.get(n.dataId),S=r.makeTensorInfo(s,n.dtype),i=r.texData.get(S.dataId);Object.assign(i,d),i.refCount=1,i.shape=s,i.dtype=n.dtype;let g=o2(t,kt(n.shape));d.slice&&(g+=d.slice.flatOffset),i.slice={flatOffset:g,origDataId:d.slice&&d.slice.origDataId||n.dataId};const e=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,e+1),S}function _l(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{begin:S,size:i}=r,[g,e]=Om(d,S,i);if(i2(d,g,e),mt(e)===0)return s.makeTensorInfo(e,d.dtype,[]);if(s.shouldExecuteOnCPU([d])||d.dtype==="string"){const u=s.texData.get(d.dataId),o=Mtt(u.values,g,e,d.shape,d.dtype);return s.makeTensorInfo(e,d.dtype,o)}const{isPacked:a}=s.texData.get(d.dataId),v=a2(d.shape,g,e);if(a||!v){const u=dt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Xnt(e):new Unt(e),o=[g];return s.runWebGLProgram(u,[d],d.dtype,o)}return s.uploadToGPU(d.dataId),Hnt(d,g,e,s)}const Ynt={kernelName:nm,backendName:"webgl",kernelFunc:_l};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Knt=n=>{const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{blockShape:S,crops:i}=r;q(d.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const g=S.reduce((p,y)=>p*y),e=Ac(d.shape,S,g),a=bc(e.length,S.length),v=Ic(d.shape,S,g),u=f2(i,S.length),o=d2(v,i,S.length),c=[],l=It({inputs:{x:d},backend:s,attrs:{shape:e}}),f=Wn({inputs:{x:l},backend:s,attrs:{perm:a}}),m=It({inputs:{x:f},backend:s,attrs:{shape:v}}),h=_l({inputs:{x:m},backend:s,attrs:{begin:u,size:o}});return c.push(l),c.push(f),c.push(m),c.forEach(p=>s.disposeIntermediateTensorInfo(p)),h},jnt={kernelName:mp,backendName:"webgl",kernelFunc:Knt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Znt(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,weights:S}=t,{size:i}=r,g=s.readSync(d.dataId),e=s.readSync(S.dataId),a=jF(g,e,S.dtype,S.shape,i);return s.makeTensorInfo([i],S.dtype,a)}const Qnt={kernelName:oy,backendName:"webgl",kernelFunc:Znt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jnt=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,qnt=`
  return float(int(a.r) & int(b.r));
`;function _nt(n){const{inputs:t,backend:s}=n,{a:r,b:d}=t,S=dt().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=dt().getNumber("WEBGL_VERSION");if(s.shouldExecuteOnCPU([r,d])||i===1){const e=s.texData.get(r.dataId).values,a=s.texData.get(d.dataId).values,[v,u]=rtt(r.shape,d.shape,e,a,r.dtype),o=s.makeTensorInfo(u,r.dtype),c=s.texData.get(o.dataId);return c.values=v,o}let g;return S?g=new Jl(Jnt,r.shape,d.shape,!1):g=new lo(qnt,r.shape,d.shape),s.runWebGLProgram(g,[r,d],r.dtype)}const tst={kernelName:vp,backendName:"webgl",kernelFunc:_nt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function est(n){const{inputs:t,backend:s}=n,{s0:r,s1:d}=t,S=s.readSync(r.dataId),i=s.readSync(d.dataId),g=Ht(Array.from(S),Array.from(i));return s.makeTensorInfo([g.length],"int32",Int32Array.from(g))}const nst={kernelName:ly,backendName:"webgl",kernelFunc:est};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sst="return float(a != b);",lD=En({opSnippet:sst,cpuKernelImpl:btt,dtype:"bool"}),ist={kernelName:Xp,backendName:"webgl",kernelFunc:lD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vc(n){const{inputs:t,backend:s}=n,{input:r}=t,d=s.texData.get(r.dataId);return gs({inputs:{x:d.complexTensorInfos.real},backend:s})}const rst={kernelName:Gy,backendName:"webgl",kernelFunc:Vc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ast="return float(int(x));";function ost(n,t){const s=new Gi(n.shape,ast),r=t.runWebGLProgram(s,[n],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q0(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{dtype:S}=r;if(S==="complex64"){if(d.dtype==="complex64")return gs({inputs:{x:d},backend:s});const i=_e(d.shape),g=q0({inputs:{x:d},backend:s,attrs:{dtype:"float32"}}),e=Ea({inputs:{real:g,imag:i},backend:s});return i.dispose(),s.disposeIntermediateTensorInfo(g),e}if(d.dtype==="complex64"){const i=Vc({inputs:{input:d},backend:s}),g=q0({inputs:{x:i},backend:s,attrs:{dtype:S}});return s.disposeIntermediateTensorInfo(i),g}if(!Eb(d.dtype,S)){const i=gs({inputs:{x:d},backend:s});return{dataId:i.dataId,shape:i.shape,dtype:S}}if(s.shouldExecuteOnCPU([d])){const i=s.texData.get(d.dataId).values,[g,e,a]=att(i,d.shape,d.dtype,S);return s.makeTensorInfo(g,e,a)}if(S==="int32")return ost(d,s);if(S==="bool"){const i=s.makeTensorInfo([],"bool",Tn("bool",1)),e=lD({inputs:{a:d,b:i},backend:s});return s.disposeIntermediateTensorInfo(i),e}throw new Error(`Error in Cast: failed to cast ${d.dtype} to ${S}`)}const lst={kernelName:Nh,backendName:"webgl",kernelFunc:q0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ww="return ceil(x);",ust=ae({opSnippet:Ww,packedOpSnippet:Ww,cpuKernelImpl:ott}),hst={kernelName:Ph,backendName:"webgl",kernelFunc:ust};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cst{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fst{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dst(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{clipValueMin:S,clipValueMax:i}=r;let g;dt().getBool("WEBGL_PACK_CLIP")?g=new fst(d.shape):g=new cst(d.shape);const e=[[S],[i]];return s.runWebGLProgram(g,[d],d.dtype,e)}const pst={kernelName:Fh,backendName:"webgl",kernelFunc:dst};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mst{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xw(n,t){return{dataId:t.dataId,dtype:t.dtype,shape:n.shape}}function vst(n){const{inputs:t,backend:s}=n,{x:r}=t,d=s.texData.get(r.dataId),S=new mst(r.shape),i=[Xw(r,d.complexTensorInfos.real),Xw(r,d.complexTensorInfos.imag)];return s.runWebGLProgram(S,i,i[0].dtype)}const gst={kernelName:gp,backendName:"webgl",kernelFunc:vst};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xst{constructor(t){this.outputShape=[],this.outputShape=Yi(t,1),this.variableNames=t.map((i,g)=>`T${g}`);const s=new Array(t.length-1);s[0]=t[0][1];for(let i=1;i<s.length;i++)s[i]=s[i-1]+t[i][1];const r=[`if (yC < ${s[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<s.length;i++){const g=s[i-1];r.push(`else if (yC < ${s[i]}) setOutput(getT${i}(yR, yC-${g}));`)}const d=s.length,S=s[s.length-1];r.push(`else setOutput(getT${d}(yR, yC-${S}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yst{constructor(t,s){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Yi(t,s);const r=this.outputShape,d=r.length,S=pe(d),i=Vn("coords",d),g=["x","y","z","w","u","v"].slice(0,d);this.variableNames=t.map((f,m)=>`T${m}`);const e=new Array(t.length-1);e[0]=t[0][s];for(let f=1;f<e.length;f++)e[f]=e[f-1]+t[f][s];const a=g[s],v=g.slice(-2),u=g.join();let o=`if (${a} < ${e[0]}) {
        return getChannel(
            getT0(${u}), vec2(${v.join()}));
        }`;for(let f=1;f<e.length;f++){const m=e[f-1];o+=`
        if (${a} < ${e[f]}  && ${a} >= ${e[f-1]}) {
          return getChannel(
            getT${f}(${Ef(g,a,m)}),
            vec2(${Ef(v,a,m)}));
        }`}const c=e.length,l=e[e.length-1];o+=`
        return getChannel(
          getT${c}(${Ef(g,a,l)}),
          vec2(${Ef(v,a,l)}));`,this.userCode=`
      float getValue(${g.map(f=>"int "+f)}) {
        ${o}
      }

      void main() {
        ${S} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[d-1]} = ${i[d-1]} + 1;
        if (${i[d-1]} < ${r[d-1]}) {
          result.g = getValue(${i});
        }

        ${i[d-2]} = ${i[d-2]} + 1;
        if (${i[d-2]} < ${r[d-2]}) {
          result.a = getValue(${i});
        }

        ${i[d-1]} = ${i[d-1]} - 1;
        if (${i[d-2]} < ${r[d-2]} &&
            ${i[d-1]} < ${r[d-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function Ef(n,t,s){const r=n.indexOf(t);return n.map((S,i)=>i===r?`${S} - ${s}`:S).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _m(n){const{inputs:t,backend:s}=n,{input:r}=t,d=s.texData.get(r.dataId);return gs({inputs:{x:d.complexTensorInfos.imag},backend:s})}const Tst={kernelName:Iy,backendName:"webgl",kernelFunc:_m};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Au(n,t,s){const r=n[0].dtype;if(r==="complex64"){const c=n.map(p=>Vc({inputs:{input:p},backend:s})),l=n.map(p=>_m({inputs:{input:p},backend:s})),f=Au(c,t,s),m=Au(l,t,s),h=Ea({inputs:{real:f,imag:m},backend:s});return c.forEach(p=>s.disposeIntermediateTensorInfo(p)),l.forEach(p=>s.disposeIntermediateTensorInfo(p)),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(m),h}let d=s.shouldExecuteOnCPU(n);if(r==="string"&&(d=!0),d){const c=n.map(x=>{const C=[-1,mt(x.shape.slice(t))];return It({inputs:{x},backend:s,attrs:{shape:C}})}),l=c.map(x=>({vals:s.readSync(x.dataId),shape:x.shape})),f=Yi(c.map(x=>x.shape),1),m=c[0].shape[0]===1,h=ltt(l,f,r,m),p=Yi(n.map(x=>x.shape),t),y=s.makeTensorInfo(p,r,h);return c.forEach(x=>s.disposeIntermediateTensorInfo(x)),y}const S=n.filter(c=>mt(c.shape)>0),i=dt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&S[0].shape.length>1;if(S.length===1){const c=i?new Gi(n[0].shape,Dr):new zr(n[0].shape,Dr);return s.runWebGLProgram(c,n,r)}const g=dt().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(S.length>g){const c=[];for(let f=0;f<S.length;f+=g){const m=S.slice(f,f+g);c.push(Au(m,t,s))}const l=Au(c,t,s);for(const f of c)s.disposeIntermediateTensorInfo(f);return l}if(i){const c=new yst(S.map(l=>l.shape),t);return s.runWebGLProgram(c,S,r)}const{tensors2D:e,outShape:a}=Sst(S,t,s),v=new xst(e.map(c=>c.shape)),u=s.runWebGLProgram(v,e,r);e.forEach(c=>s.disposeIntermediateTensorInfo(c));const o=It({inputs:{x:u},attrs:{shape:a},backend:s});return s.disposeIntermediateTensorInfo(u),o}function Sst(n,t,s){const r=Yi(n.map(S=>S.shape),t);return{tensors2D:n.map(S=>It({inputs:{x:S},attrs:{shape:[-1,mt(S.shape.slice(t))]},backend:s})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uD(n){const{inputs:t,backend:s,attrs:r}=n,{axis:d}=r,S=Qt(d,t[0].shape)[0],i=t.map(a=>a.shape);u2(i,S);const g=Yi(t.map(a=>a.shape),S);if(mt(g)===0)return s.makeTensorInfo(g,t[0].dtype,[]);const e=t.filter(a=>mt(a.shape)>0);return e.length===1?gs({inputs:{x:e[0]},backend:s}):Au(e,S,s)}const Cst={kernelName:xp,backendName:"webgl",kernelFunc:uD};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hD{constructor(t,s=!1,r=null,d=!1,S=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.padInfo.top,g=t.padInfo.left,e=t.strideHeight,a=t.strideWidth,v=t.dilationHeight,u=t.dilationWidth,o=t.filterHeight,c=t.filterWidth,l=Math.floor(t.inChannels/4)*4,f=t.inChannels%4,m=t.dataFormat==="channelsLast",h=m?1:2,p=m?2:3,y=m?3:1;let x="",T="";r&&(d?x=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:S?x=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:x=`
          float activation(float x) {
            ${r}
          }
        `,T="result = activation(result);");const C=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),d&&this.variableNames.push("preluActivationWeights"),S&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${e}, ${a});
      const ivec2 pads = ivec2(${i}, ${g});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${y}];

        ivec2 xRCCorner =
            ivec2(coords[${h}], coords[${p}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * ${v};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${c}; wC++) {
            int xC = xCCorner + wC * ${u};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${l}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${f===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${l}) *
                    getW(wR, wC, ${l}, d2);
              } else {
                dotProd +=
                    getX(batch, ${l}, xR, xC) *
                    getW(wR, wC, ${l}, d2);
              }

            } else if (${f===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${l}, d2),
                getW(wR, wC, ${l} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${l}),
                  getX(batch, xR, xC, ${l} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${l}, xR, xC),
                  getX(batch, ${l} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${f===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${l}, d2),
                getW(wR, wC, ${l} + 1, d2),
                getW(wR, wC, ${l} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${l}),
                  getX(batch, xR, xC, ${l} + 1),
                  getX(batch, xR, xC, ${l} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${l}, xR, xC),
                  getX(batch, ${l} + 1, xR, xC),
                  getX(batch, ${l} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${T}
        setOutput(result);
      }
    `}}class wst{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const s=t.padInfo.front,r=t.padInfo.top,d=t.padInfo.left,S=t.strideDepth,i=t.strideHeight,g=t.strideWidth,e=t.dilationDepth,a=t.dilationHeight,v=t.dilationWidth,u=t.filterDepth,o=t.filterHeight,c=t.filterWidth,l=Math.floor(t.inChannels/4)*4,f=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${S}, ${i}, ${g});
      const ivec3 pads = ivec3(${s}, ${r}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${u}; wF++) {
          int xF = xFCorner + wF * ${e};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${o}; wR++) {
            int xR = xRCorner + wR * ${a};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${c}; wC++) {
              int xC = xCCorner + wC * ${v};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${l}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${f===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${l}) *
                  getW(wF, wR, wC, ${l}, d2);
              } else if (${f===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${l}),
                  getX(batch, xF, xR, xC, ${l} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${l}, d2),
                  getW(wF, wR, wC, ${l} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${f===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${l}),
                  getX(batch, xF, xR, xC, ${l} + 1),
                  getX(batch, xF, xR, xC, ${l} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${l}, d2),
                  getW(wF, wR, wC, ${l} + 1, d2),
                  getW(wF, wR, wC, ${l} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cD{constructor(t,s=!1,r=null,d=!1,S=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Dn(this.outputShape.length);const i=t.padInfo.left,g=t.strideWidth,e=t.dilationWidth,a=t.filterHeight,v=t.filterWidth,u=v;let o=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let m=0;m<v;m++)o+=`
           vec4 xTexelC${m*2};
           int xTexelC${m*2}Ready;
           vec4 xTexelC${m*2+1};
           int xTexelC${m*2+1}Ready;
           vec4 xC${m};`;o+=`
     for (int r = 0; r < ${a}; r++) {
      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {
       `;for(let m=0;m<v;m++)o+=`
           xTexelC${m*2} = vec4(0.0);
           xTexelC${m*2}Ready = 0;
           xTexelC${m*2+1} = vec4(0.0);
           xTexelC${m*2+1}Ready = 0;
           xC${m} = vec4(0.0);`;o+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let m=0;m<(u+1)/2;m++){const h=m*2;if(o+=`
           xC = xCCorner + ${h*e};
           `,g===1){if(h<v&&(i%2===1?(o+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${h}Ready == 0) {
                   xTexelC${h} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${h}.zw = vec2(0.0);
                   }
                   xTexelC${h}Ready = 1;
                 }
               `,e===1&&h>0?o+=`
                 xC${h} = vec4(xTexelC${h-2}.zw, xTexelC${h}.xy);
                 `:o+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${h} = vec4(previous.zw, xTexelC${h}.xy);
                   } else {
                     xC${h} = vec4(0.0, 0.0, xTexelC${h}.xy);
                   }
                   `):o+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${h}Ready == 0) {
                   xTexelC${h} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${h}.zw = vec2(0.0);
                   }
                   xTexelC${h}Ready = 1;
                 }

                 xC${h} = xTexelC${h};
                 `,h+1<v)){const p=i%2===0?ty(e):e;e%2===0&&i%2===1||e%2!==0&&i%2!==1?(o+=`
                   xCOffset = xC + imod(pads[1], 2) + ${p};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${h+1}Ready == 0) {
                     xTexelC${h+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${h+1}.zw = vec2(0.0);
                     }
                     xTexelC${h+1}Ready = 1;
                   }
                   `,e>1?o+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${h+1} = vec4(previous.zw, xTexelC${h+1}.xy);
                     } else {
                      xC${h+1} = vec4(0.0, 0.0, xTexelC${h+1}.xy);
                     }
                     `:o+=`
                     xC${h+1} = vec4(xTexelC${h}.zw, xTexelC${h+1}.xy);
                     `):p===1?o+=`
                     xC${h+1} = xTexelC${h};
                     `:o+=`
                     xCOffset = xC + ${p};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${h+1}Ready == 0) {
                       xTexelC${h+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${h+1}.zw = vec2(0.0);
                       }
                       xTexelC${h+1}Ready = 1;
                     }

                     xC${h+1} = xTexelC${h+1};
                     `}}else h<v&&(i%2===1?(o+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${h}Ready == 0) {
                   xTexelC${h} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${h}.zw = vec2(0.0);
                   }
                   xTexelC${h}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${h+1}Ready == 0) {
                   xTexelC${h+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${h+1}.zw = vec2(0.0);
                   }
                   xTexelC${h+1}Ready = 1;
                 }

                 xC${h} = vec4(xTexelC${h}.zw, xTexelC${h+1}.zw);
               `,h+1<v&&(o+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${h+1} = vec4(xTexelC${h+1}.xy, final.xy);
                 `)):(o+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${h}Ready == 0) {
                   xTexelC${h} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${h}.zw = vec2(0.0);
                   }
                   xTexelC${h}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${h+1}Ready == 0) {
                   xTexelC${h+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${h+1}.zw = vec2(0.);
                   }
                   xTexelC${h+1}Ready = 1;
                 }

                 xC${h} = vec4(
                   xTexelC${h}.xy, xTexelC${h+1}.xy);
               `,h+1<v&&(o+=`
                   xC${h+1} = vec4(xTexelC${h}.zw, xTexelC${h+1}.zw);
                 `)));h<v&&(o+=`
             wTexel = getW(r, ${h}, d1, d2);
             dotProd += xC${h}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${t.inChannels}) {
               dotProd += xC${h}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,h+1<v&&(o+=`
               wTexel = getW(r, ${h+1}, d1, d2);
               dotProd += xC${h+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${t.inChannels}) {
                 dotProd += xC${h+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}o+=`
     }
   `,o+=`
     }
   `,o+=`
     }
   `;let c="",l="";r&&(d?c=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:S?c=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:c=`vec4 activation(vec4 x) {
           ${r}
         }`,l="result = activation(result);");const f=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),d&&this.variableNames.push("preluActivationWeights"),S&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${c}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${o}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${f}
         ${l}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Est{constructor(t,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=Dn(this.outputShape.length);const{dataFormat:r}=s,d=Hn(),S=r==="channelsLast",i=S?1:2,g=S?2:3,e=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`;let a="";for(let v=0;v<=1;v++)for(let u=0;u<=1;u++)a+=`
          blockIndex = rc.z + ${u};
          pos = rc.y + ${v};

          ${e}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${g}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${S}) {
                  innerDims = vec2(d1, ch);
                  result[${v*2+u}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${v*2+u}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${a}

        ${d.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ud(n,t){const s=n.length;return s>=3?t?[...n.slice(0,-3),n[s-3]*n[s-2],n[s-1]]:[...n.slice(0,-3),n[s-3],n[s-2]*n[s-1]]:!t&&s===1&&n[0]>1?[n[0],1]:null}function fD({x:n,filter:t,convInfo:s,backend:r,bias:d=null,preluActivationWeights:S=null,leakyreluAlpha:i=0,activation:g=null}){const e=n.shape,a=r.texData.get(n.dataId),v=s.inChannels,u=e[0]*e[1]*e[2],o=s.outChannels,c=s.dataFormat==="channelsLast",l=!1,f=!1;let m;const h=[];if(S!=null){const x=Ud(S.shape,c);x!=null&&(S=It({inputs:{x:S},backend:r,attrs:{shape:x}}),h.push(S))}if(d!=null){const x=Ud(d.shape,c);x!=null&&(d=It({inputs:{x:d},backend:r,attrs:{shape:x}}),h.push(d))}if(!((u===1||o===1)&&v>iD)&&a.isPacked&&c&&a.texture!=null&&e[2]%2!==0&&ee(a.shape.slice(-3),e.slice(-3))){const x=e[0]*e[1]*(e[2]+1),T={dataId:n.dataId,shape:[1,x,s.inChannels],dtype:n.dtype},C=a.shape;a.shape=a.shape.slice(),a.shape[a.shape.length-2]++,q(Vd(a.shape,T.shape),()=>`packed reshape ${a.shape} to ${T.shape} isn't free`);const E=It({inputs:{x:t},backend:r,attrs:{shape:[1,s.inChannels,s.outChannels]}});h.push(E);const A=Gd({a:T,b:E,backend:r,transposeA:l,transposeB:f,bias:d,activation:g,preluActivationWeights:S,leakyreluAlpha:i}),w=r.texData.get(A.dataId);q(w.isPacked,()=>"batchMatMul result is expected to be packed"),a.shape=C,w.shape=s.outShape,m=gs({inputs:{x:A},backend:r}),m.shape=s.outShape,h.push(A)}else{const x=s.outHeight*s.outWidth,T=It({inputs:{x:n},backend:r,attrs:{shape:c?[s.batchSize,x,s.inChannels]:[s.batchSize,s.inChannels,x]}}),C=It({inputs:{x:t},backend:r,attrs:{shape:[1,s.inChannels,s.outChannels]}}),E=Gd({a:c?T:C,b:c?C:T,transposeA:!c,transposeB:f,backend:r,bias:d,activation:g,preluActivationWeights:S,leakyreluAlpha:i});m=It({inputs:{x:E},backend:r,attrs:{shape:s.outShape}}),h.push(T),h.push(C),h.push(E)}for(const x of h)r.disposeIntermediateTensorInfo(x);return m}function dD({x:n,filter:t,convInfo:s,backend:r,bias:d=null,preluActivationWeights:S=null,leakyreluAlpha:i=0,activation:g=null}){const{filterWidth:e,filterHeight:a,inChannels:v,outWidth:u,outHeight:o,dataFormat:c}=s,l=c==="channelsLast",f=e*a*v,m=o*u,h=[s.batchSize,f,m],p=!0,y=!1,x=[];if(S!=null){const L=Ud(S.shape,l);L!=null&&(S=It({inputs:{x:S},backend:r,attrs:{shape:L}}),x.push(S))}if(d!=null){const L=Ud(d.shape,l);L!=null&&(d=It({inputs:{x:d},backend:r,attrs:{shape:L}}),x.push(d))}const T=It({inputs:{x:t},backend:r,attrs:{shape:[1,f,mt(t.shape)/f]}});x.push(T);const C=new Est(h,s),E=[n.shape,[s.padInfo.top,s.padInfo.left],[s.strideHeight,s.strideWidth],[s.dilationHeight,s.dilationWidth],[s.inChannels],[s.filterWidth*s.inChannels],[s.outWidth]],A=r.runWebGLProgram(C,[n],"float32",E),w=It({inputs:{x:A},backend:r,attrs:{shape:h}});x.push(A),x.push(w);const b=d!=null,I=S!=null,R=g==="leakyrelu",N=g?fh(g,!0):null,F=new sD(l?w.shape:T.shape,l?T.shape:w.shape,l?[s.batchSize,m,s.outChannels]:[s.batchSize,s.outChannels,m],p,y,b,N,I,R),P=l?[w,T]:[T,w];if(d&&P.push(d),I&&P.push(S),R){const L=r.makeTensorInfo([],"float32",pa(i,"float32"));P.push(L),x.push(L)}const O=r.runWebGLProgram(F,P,"float32"),M=It({inputs:{x:O},backend:r,attrs:{shape:s.outShape}});x.push(O);for(const L of x)r.disposeIntermediateTensorInfo(L);return M}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ast(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,filter:S}=t,{strides:i,pad:g,dataFormat:e,dilations:a,dimRoundingMode:v}=r,u=Er(e),o=pn(d.shape,S.shape,i,a,g,v,!1,u);let c;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))c=fD({x:d,filter:S,convInfo:o,backend:s});else if(o.strideWidth<=2&&u==="channelsLast"&&dt().getBool("WEBGL_EXP_CONV")){const f=new cD(o),m=[[o.padInfo.top,o.padInfo.left],[o.strideHeight,o.strideWidth],[o.dilationHeight,o.dilationWidth],[o.inHeight,o.inWidth]];c=s.runWebGLProgram(f,[d,S],"float32",m)}else if(dt().getBool("WEBGL_CONV_IM2COL"))c=dD({x:d,filter:S,convInfo:o,backend:s});else{const f=new hD(o);c=s.runWebGLProgram(f,[d,S],"float32")}const l=It({inputs:{x:c},backend:s,attrs:{shape:o.outShape}});return s.disposeIntermediateTensorInfo(c),l}const bst={kernelName:yp,backendName:"webgl",kernelFunc:Ast};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ist{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const s=t.strideHeight,r=t.strideWidth,d=t.padInfo.top,S=t.padInfo.left,i=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${s} - ${d};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${S};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Rst{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const s=t.filterHeight,r=t.filterWidth,d=t.strideHeight,S=t.strideWidth,i=t.dataFormat==="channelsLast",g=s-1-t.padInfo.top,e=r-1-t.padInfo.left,a=i?1:2,v=i?2:3,u=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${g}, ${e});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${u}];

        ivec2 dyCorner = ivec2(coords[${a}], coords[${v}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s}; wR++) {
          float dyR = float(dyRCorner + wR) / ${d}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${s} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${S}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Nst{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const s=t.strideDepth,r=t.strideHeight,d=t.strideWidth,S=t.padInfo.front,i=t.padInfo.top,g=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${s} - ${S};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${d} - ${g};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Pst{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const s=t.filterDepth,r=t.filterHeight,d=t.filterWidth,S=t.strideDepth,i=t.strideHeight,g=t.strideWidth,e=s-1-t.padInfo.front,a=r-1-t.padInfo.top,v=d-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${e}, ${a}, ${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${s}; wF++) {
          float dyF = float(dyFCorner + wF) / ${S}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${s} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${d}; wC++) {
              float dyC = float(dyCCorner + wC) / ${g}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${d} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fst(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,dy:S}=t,{strides:i,pad:g,dataFormat:e,dimRoundingMode:a,filterShape:v}=r,u=Er(e),o=pn(d.shape,v,i,1,g,a,!1,u),c=new Ist(o);return s.runWebGLProgram(c,[d,S],"float32")}const Dst={kernelName:hy,backendName:"webgl",kernelFunc:Fst};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ost{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=Dn(this.outputShape.length);const s=t.filterHeight,r=t.filterWidth,d=s-1-t.padInfo.top,S=r-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${d}, ${S});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${s}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${s} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${t.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${t.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lst(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,filter:S}=t,{inputShape:i,strides:g,pad:e,dataFormat:a,dimRoundingMode:v}=r,u=Er(a),o=pn(i,S.shape,g,1,e,v,!1,u);if(dt().getBool("WEBGL_PACK")&&u==="channelsLast"){const c=[[o.strideHeight,o.strideWidth]],l=new Ost(o);return s.runWebGLProgram(l,[d,S],"float32",c)}else{const c=new Rst(o);return s.runWebGLProgram(c,[d,S],"float32")}}const Mst={kernelName:Tp,backendName:"webgl",kernelFunc:Lst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $st(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,filter:S}=t,{strides:i,pad:g,dilations:e}=r,a=ga(d.shape,S.shape,i,e,g),v=new wst(a);return s.runWebGLProgram(v,[d,S],"float32")}const Bst={kernelName:Sp,backendName:"webgl",kernelFunc:$st};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kst(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,dy:S}=t,{strides:i,pad:g,filterShape:e}=r,a=ga(d.shape,e,i,1,g),v=new Nst(a);return s.runWebGLProgram(v,[d,S],"float32")}const zst={kernelName:cy,backendName:"webgl",kernelFunc:kst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vst(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,filter:S}=t,{pad:i,strides:g,inputShape:e}=r,a=ga(e,S.shape,g,1,i),v=new Pst(a);return s.runWebGLProgram(v,[d,S],"float32")}const Gst={kernelName:fy,backendName:"webgl",kernelFunc:Vst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ust=ql+`
  return cos(x);
`,Wst=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${wo}
  return result;
`,Xst=ae({opSnippet:Ust,packedOpSnippet:Wst}),Hst={kernelName:Dh,backendName:"webgl",kernelFunc:Xst};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yst=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,Kst=ae({opSnippet:Yst}),jst={kernelName:Oh,backendName:"webgl",kernelFunc:Kst};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zst{constructor(t,s,r,d,S){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,g,e,a]=t,[v]=s,[u,o]=r;this.outputShape=[v,u,o,a];const c=d==="bilinear"?1:0,[l,f]=[`${g-1}.0`,`${e-1}.0`],[m,h,p]=u>1?[`${(g-1)/(u-1)}`,"(y2-y1) * height_ratio",`y1*${l} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${l}`],[y,x,T]=o>1?[`${(e-1)/(o-1)}`,"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${y});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${h};
        float width_scale = ${x};

        float in_y = ${p};
        if( in_y < 0.0 || in_y > ${l} ) {
          setOutput(float(${S}));
          return;
        }
        float in_x = ${T};
        if( in_x < 0.0 || in_x > ${f} ) {
          setOutput(float(${S}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${c} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qst=n=>{const{inputs:t,backend:s,attrs:r}=n,{image:d,boxes:S,boxInd:i}=t,{cropSize:g,method:e,extrapolationValue:a}=r,v=new Zst(d.shape,S.shape,g,e,a);return s.runWebGLProgram(v,[d,S,i],"float32")},Jst={kernelName:py,backendName:"webgl",kernelFunc:Qst};var ph;(function(n){n.Prod="*",n.Sum="+"})(ph||(ph={}));class Hw{constructor(t,s,r,d){this.op=t,this.outputShape=s,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const S=this.outputShape.length,i=this.op===ph.Prod?"1.0":"0.0",g=r?i:`getX(${Yw(S,"coords",this.op)})`,e=this.outputShape[this.outputShape.length-1];let a="",v="";r?(a=d?`end != ${e-1}`:"end != 0",v=d?"end + 1":"end - 1"):(a=d?`end + pow2 < ${e}`:"end >= pow2",v=d?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${pe(S)} coords = getOutputCoords();
        int end = ${Kw(S,"coords",this.op)};
        float val = ${g};
        int pow2 = int(pow(2.0, index));
        if (${a}) {
          int idx = ${v};
          ${Kw(S,"coords",this.op)} = idx;
          val ${this.op}= getX(${Yw(S,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function Yw(n,t,s){if(n===1)return`${t}`;if(n===2)return`${t}.x, ${t}.y`;if(n===3)return`${t}.x, ${t}.y, ${t}.z`;if(n===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${s} for rank ${n} is not yet supported`)}function Kw(n,t,s){if(n===1)return`${t}`;if(n===2)return`${t}.y`;if(n===3)return`${t}.z`;if(n===4)return`${t}.w`;throw new Error(`Cumulative ${s} for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pD(n,t,s,r,d,S){const i=t.shape.length,g=Oe([r],i);let e=t;g!=null&&(e=Wn({inputs:{x:t},backend:s,attrs:{perm:g}}));const a=We(1,i)[0];if(a!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const v=e.shape[a];let u=gs({inputs:{x:e},backend:s});for(let o=0;o<=Math.ceil(Math.log2(v))-1;o++){const c=new Hw(n,e.shape,!1,S),l=[[o]],f=u;u=s.runWebGLProgram(c,[u],u.dtype,l),s.disposeIntermediateTensorInfo(f)}if(d){const o=new Hw(n,e.shape,d,S),c=u;u=s.runWebGLProgram(o,[u],u.dtype),s.disposeIntermediateTensorInfo(c)}if(g!=null){const o=xa(g),c=Wn({inputs:{x:u},backend:s,attrs:{perm:o}});return s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(e),c}return u}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qst(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,exclusive:i,reverse:g}=r;return pD(ph.Prod,d,s,S,i,g)}const _st={kernelName:dy,backendName:"webgl",kernelFunc:qst};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tit(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,exclusive:i,reverse:g}=r;return pD(ph.Sum,d,s,S,i,g)}const eit={kernelName:Cp,backendName:"webgl",kernelFunc:tit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nit(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,weights:S}=t,{size:i,binaryOutput:g}=r;if(d.shape.length===1){const e=s.readSync(d.dataId),a=s.readSync(S.dataId),v=jF(e,a,S.dtype,S.shape,i);return s.makeTensorInfo([i],S.dtype,v)}else if(d.shape.length===2){const e=s.bufferSync(d),a=s.bufferSync(S),v=itt(e,a,i,g);return s.makeTensorInfo(v.shape,S.dtype,v.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${d.shape.length}.`)}const sit={kernelName:my,backendName:"webgl",kernelFunc:nit};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iit{constructor(t,s,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=s,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${s};
      int offset_h = imod(h, ${s});
      int in_w = w / ${s};
      int offset_w = imod(w, ${s});
      int offset_d = (offset_h * ${s} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rit(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{blockSize:S,dataFormat:i}=r,g=d.shape[0],e=i==="NHWC"?d.shape[1]:d.shape[2],a=i==="NHWC"?d.shape[2]:d.shape[3],v=i==="NHWC"?d.shape[3]:d.shape[1],u=e*S,o=a*S,c=v/(S*S),l=i==="NHWC"?[g,u,o,c]:[g,c,u,o],f=new iit(l,S,i);return s.runWebGLProgram(f,[d],d.dtype)}const ait={kernelName:vy,backendName:"webgl",kernelFunc:rit};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mD{constructor(t,s=!1,r=null,d=!1,S=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Dn(this.outputShape.length);const i=t.filterHeight,g=t.filterWidth,e=t.outChannels/t.inChannels;let a="",v="";r&&(d?a=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:S?a=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:a=`
          float activation(float x) {
            ${r}
          }
        `,v="result = activation(result);");const u=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),d&&this.variableNames.push("preluActivationWeights"),S&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${a}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${e};
        int q = d2 - d1 * ${e};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${u}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vD{constructor(t,s=!1,r=null,d=!1,S=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Dn(this.outputShape.length);const i=t.outChannels/t.inChannels,g=t.padInfo.left,e=t.strideWidth,a=t.dilationWidth,v=t.filterHeight,u=t.filterWidth,o=u;let c=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let h=0;h<u;h++)c+=`
          vec4 xTexelC${h*2};
          int xTexelC${h*2}Ready;
          vec4 xTexelC${h*2+1};
          int xTexelC${h*2+1}Ready;
          vec4 xC${h};`;c+=`
    for (int r = 0; r < ${v}; r++) {
      `;for(let h=0;h<u;h++)c+=`
          xTexelC${h*2} = vec4(0.0);
          xTexelC${h*2}Ready = 0;
          xTexelC${h*2+1} = vec4(0.0);
          xTexelC${h*2+1}Ready = 0;
          xC${h} = vec4(0.0);`;c+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let h=0;h<(o+1)/2;h++){const p=h*2;if(c+=`
          xC = xCCorner + ${p*a};
          `,e===1){if(p<u&&(g%2===1?(c+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }
              `,a===1&&p>0?c+=`
                xC${p} = vec4(xTexelC${p-2}.zw, xTexelC${p}.xy);
                `:c+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${p} = vec4(previous.zw, xTexelC${p}.xy);
                  } else {
                    xC${p} = vec4(0.0, 0.0, xTexelC${p}.xy);
                  }
                  `):c+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }

                xC${p} = xTexelC${p};
                `,p+1<u)){const y=g%2===0?ty(a):a;a%2===0&&g%2===1||a%2!==0&&g%2!==1?(c+=`
                  xCOffset = xC + imod(pads[1], 2) + ${y};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p+1}Ready == 0) {
                    xTexelC${p+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${p+1}.zw = vec2(0.0);
                    }
                    xTexelC${p+1}Ready = 1;
                  }
                  `,a>1?c+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${p+1} = vec4(previous.zw, xTexelC${p+1}.xy);
                    } else {
                     xC${p+1} = vec4(0.0, 0.0, xTexelC${p+1}.xy);
                    }
                    `:c+=`
                    xC${p+1} = vec4(xTexelC${p}.zw, xTexelC${p+1}.xy);
                    `):y===1?c+=`
                    xC${p+1} = xTexelC${p};
                    `:c+=`
                    xCOffset = xC + ${y};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p+1}Ready == 0) {
                      xTexelC${p+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${p+1}.zw = vec2(0.0);
                      }
                      xTexelC${p+1}Ready = 1;
                    }

                    xC${p+1} = xTexelC${p+1};
                    `}}else p<u&&(g%2===1?(c+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${p+1}Ready == 0) {
                  xTexelC${p+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${p+1}.zw = vec2(0.0);
                  }
                  xTexelC${p+1}Ready = 1;
                }

                xC${p} = vec4(xTexelC${p}.zw, xTexelC${p+1}.zw);
              `,p+1<u&&(c+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${p+1} = vec4(xTexelC${p+1}.xy, final.xy);
                `)):(c+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${p}Ready == 0) {
                  xTexelC${p} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${p}.zw = vec2(0.0);
                  }
                  xTexelC${p}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${p+1}Ready == 0) {
                  xTexelC${p+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${p+1}.zw = vec2(0.);
                  }
                  xTexelC${p+1}Ready = 1;
                }

                xC${p} = vec4(
                  xTexelC${p}.xy, xTexelC${p+1}.xy);
              `,p+1<u&&(c+=`
                  xC${p+1} = vec4(xTexelC${p}.zw, xTexelC${p+1}.zw);
                `)));p<u&&(c+=`
            wTexel = getW(r, ${p}, d1, q);
            dotProd += xC${p} * vec4(wTexel.xz, wTexel.xz);
          `,p+1<u&&(c+=`
              wTexel = getW(r, ${p+1}, d1, q);
              dotProd += xC${p+1} * vec4(wTexel.xz, wTexel.xz);
            `))}c+=`
    }
  `,c+=`
      }
    `;let l="",f="";r&&(d?l=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:S?l=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:l=`vec4 activation(vec4 x) {
          ${r}
        }`,f="result = activation(result);");const m=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),d&&this.variableNames.push("preluActivationWeights"),S&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${c}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oit(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,filter:S}=t,{strides:i,pad:g,dilations:e,dimRoundingMode:a}=r;let v=e;v==null&&(v=[1,1]),q(Sn(i,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${v}'`);const u=pn(d.shape,S.shape,i,v,g,a,!0);let o;dt().getBool("WEBGL_PACK_DEPTHWISECONV")&&u.strideWidth<=2&&u.outChannels/u.inChannels===1?o=new vD(u):o=new mD(u);const c=[[u.padInfo.top,u.padInfo.left],[u.strideHeight,u.strideWidth],[u.dilationHeight,u.dilationWidth],[u.inHeight,u.inWidth]];return s.runWebGLProgram(o,[d,S],"float32",c)}const lit={kernelName:wp,backendName:"webgl",kernelFunc:oit};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uit{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const s=t.strideHeight,r=t.strideWidth,d=t.padInfo.top,S=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${s} - ${d};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${S};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class hit{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const s=t.filterHeight,r=t.filterWidth,d=t.strideHeight,S=t.strideWidth,i=s-1-t.padInfo.top,g=r-1-t.padInfo.left,e=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${g});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${s}; wR++) {
          float dyR = float(dyRCorner + wR) / ${d}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${s} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${S}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${e}; dm++) {
              int d2 = d1 * ${e} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cit(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,dy:S}=t,{strides:i,dilations:g,pad:e,dimRoundingMode:a,filterShape:v}=r,u=pn(d.shape,v,i,g,e,a,!0),o=new uit(u);return s.runWebGLProgram(o,[d,S],"float32")}const fit={kernelName:gy,backendName:"webgl",kernelFunc:cit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dit(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,filter:S}=t,{strides:i,dilations:g,pad:e,dimRoundingMode:a,inputShape:v}=r,u=pn(v,S.shape,i,g,e,a,!0),o=new hit(u);return s.runWebGLProgram(o,[d,S],"float32")}const pit={kernelName:xy,backendName:"webgl",kernelFunc:dit};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mit{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vit(n){const{inputs:t,backend:s}=n,{x:r}=t,d=[...r.shape,...r.shape],S=mt(r.shape),i=It({inputs:{x:r},backend:s,attrs:{shape:[S]}}),g=new mit(S),e=s.runWebGLProgram(g,[i],i.dtype),a=It({inputs:{x:e},backend:s,attrs:{shape:d}});return s.disposeIntermediateTensorInfo(i),s.disposeIntermediateTensorInfo(e),a}const git={kernelName:yy,backendName:"webgl",kernelFunc:vit};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xit{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:s,inWidth:r,padInfo:d,strideHeight:S,strideWidth:i,filterHeight:g,filterWidth:e,dilationHeight:a,dilationWidth:v}=t,{top:u,left:o}=d;this.userCode=`
      const ivec2 strides = ivec2(${S}, ${i});
      const ivec2 pads = ivec2(${u}, ${o});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${g}; h++) {
          int hIn = hBeg + h * ${a};

          if (hIn >= 0 && hIn < ${s}) {
            for (int w = 0; w < ${e}; w++) {
              int wIn = wBeg + w * ${v};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yit(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,filter:S}=t,{strides:i,pad:g,dilations:e}=r,a=xc(d.shape,S.shape,i,g,"NHWC",e);let v;const u=new xit(a);v=s.runWebGLProgram(u,[d,S],"float32");const o=It({inputs:{x:v},backend:s,attrs:{shape:a.outShape}});return s.disposeIntermediateTensorInfo(v),o}const Tit={kernelName:Ep,backendName:"webgl",kernelFunc:yit};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sit(n){const{inputs:t,backend:s,attrs:r}=n,{equation:d}=r,S=t,{allDims:i,summedDims:g,idDims:e}=S2(d,S.length);w2(i.length,e,S);const{path:a,steps:v}=E2(g,e),u=v.length;let o=null,c=i.length;const l=[];for(let f=0;f<u;++f){for(const m of v[f]){const{permutationIndices:h,expandDims:p}=C2(c,e[m]);let y;A2(h)?y=S[m]:(y=Wn({inputs:{x:S[m]},backend:s,attrs:{perm:h}}),l.push(y));const x=y.shape.slice();for(let T=0;T<p.length;++T)x.splice(p[T],0,1);ee(y.shape,x)||(y=It({inputs:{x:y},backend:s,attrs:{shape:x}}),l.push(y)),o===null?o=y:(o=fT({inputs:{a:y,b:o},backend:s}),l.push(o))}f<u-1&&(a[f]>=0&&(o=qm({inputs:{x:o},backend:s,attrs:{axis:a[f]-(i.length-c),keepDims:!1}}),l.push(o)),c--)}for(const f of l)f!==o&&s.disposeIntermediateTensorInfo(f);return o}const Cit={kernelName:Ty,backendName:"webgl",kernelFunc:Sit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wit="return (x >= 0.0) ? x : (exp(x) - 1.0);",Eit=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Ait=ae({opSnippet:wit,packedOpSnippet:Eit}),bit={kernelName:Mh,backendName:"webgl",kernelFunc:Ait};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iit="return (b >= 0.0) ? a : a * (b + 1.0);",Rit=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Nit=n=>{const{inputs:t,backend:s}=n,{dy:r,y:d}=t,S=dt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Jl(Rit,r.shape,d.shape):new lo(Iit,r.shape,d.shape);return s.runWebGLProgram(S,[r,d],r.dtype)},Pit={kernelName:Sy,backendName:"webgl",kernelFunc:Nit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fit=`
  return vec4(equal(a, b));
`,Dit="return float(a == b);",Oit=En({opSnippet:Dit,packedOpSnippet:Fit,dtype:"bool",cpuKernelImpl:utt}),Lit={kernelName:Ap,backendName:"webgl",kernelFunc:Oit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mit=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${p2};
  float a1 = ${m2};
  float a2 = ${v2};
  float a3 = ${g2};
  float a4 = ${x2};
  float a5 = ${y2};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,$it=ae({opSnippet:Mit}),Bit={kernelName:$h,backendName:"webgl",kernelFunc:$it};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kit=ql+`
  return exp(x);
`,zit=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,gD=ae({opSnippet:kit,packedOpSnippet:zit,cpuKernelImpl:htt,dtype:"float32"}),Vit={kernelName:Bh,backendName:"webgl",kernelFunc:gD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _0(n){const{inputs:t,attrs:s,backend:r}=n,{dim:d}=s,{input:S}=t,i=S.shape.length,g=S.shape.slice();let e=d;return d<0&&(q(-(i+1)<=d,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),e=i+d+1),g.splice(e,0,1),It({inputs:{x:S},backend:r,attrs:{shape:g}})}const Git={kernelName:bp,backendName:"webgl",kernelFunc:_0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jw="return exp(x) - 1.0;",Uit=ae({opSnippet:jw,packedOpSnippet:jw,cpuKernelImpl:ctt}),Wit={kernelName:kh,backendName:"webgl",kernelFunc:Uit};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zw{constructor(t,s,r){this.variableNames=["real","imag"];const d=s[1];this.outputShape=s;const S=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${d}.0`:"1.0";let g;if(t==="real")g="return real * expR - imag * expI;";else if(t==="imag")g="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${S};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${g}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${d});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${d}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xD(n,t,s){const r=s.texData.get(n.dataId),d=mt(n.shape),S=n.shape[n.shape.length-1],i=d/S,g=It({inputs:{x:n},backend:s,attrs:{shape:[i,S]}}),e=g.shape,a=new Zw("real",e,t),v=new Zw("imag",e,t),u=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:e},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:e}],o=s.runWebGLProgram(a,u,"float32"),c=s.runWebGLProgram(v,u,"float32"),l=Ea({inputs:{real:o,imag:c},backend:s});s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(c);const f=It({inputs:{x:l},backend:s,attrs:{shape:n.shape}});return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(l),f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xit(n){const{inputs:t,backend:s}=n,{input:r}=t;return xD(r,!1,s)}const Hit={kernelName:Cy,backendName:"webgl",kernelFunc:Xit};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yit{constructor(t,s){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gc(n){const{backend:t,attrs:s}=n,{shape:r,value:d}=s;let{dtype:S}=s;if(S=S||Bl(d),S==="string"){const i=Ge(S,mt(r));return i.fill(d),t.makeTensorInfo(r,S,i)}else{const i=new Yit(r,d),g=[[d]];return t.runWebGLProgram(i,[],S,g)}}const Kit={kernelName:wy,backendName:"webgl",kernelFunc:Gc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jit{constructor(t){this.variableNames=["Image"],this.outputShape=[];const s=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${s} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${s}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zit={kernelName:Ey,backendName:"webgl",kernelFunc:({inputs:n,backend:t})=>{const{image:s}=n,r=t,d=new jit(s.shape);return r.runWebGLProgram(d,[s],s.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qw="return floor(x);",Qit=ae({opSnippet:Qw,packedOpSnippet:Qw,cpuKernelImpl:ftt}),Jit={kernelName:zh,backendName:"webgl",kernelFunc:Qit};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qit=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,_it=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,trt=En({opSnippet:qit,packedOpSnippet:_it,dtype:"int32"}),ert={kernelName:Vh,backendName:"webgl",kernelFunc:trt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nrt{constructor(t){this.variableNames=["A"];const s=Hn(),[r,d]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${r}.0);

        vec4 values = ${s.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class srt{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const s=Hn(),[r,d]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${d}.0, ${r}.0);
            vec4 values = ${s.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const irt={kernelName:a6,backendName:"webgl",kernelFunc:rrt};let Lo,tg=dt().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function rrt(n){const{inputs:t,backend:s,attrs:r}=n;let{pixels:d}=t;const{numChannels:S}=r,i=typeof HTMLVideoElement<"u"&&d instanceof HTMLVideoElement,g=typeof HTMLImageElement<"u"&&d instanceof HTMLImageElement,[e,a]=i?[d.videoWidth,d.videoHeight]:[d.width,d.height],v=[a,e],u=[a,e,S];if(g||i){const f=dt().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Lo==null||f!==tg)&&(tg=f,Lo=document.createElement("canvas").getContext("2d",{willReadFrequently:tg})),Lo.canvas.width=e,Lo.canvas.height=a,Lo.drawImage(d,0,0,e,a),d=Lo.canvas}const o=s.makeTensorInfo(v,"int32");s.texData.get(o.dataId).usage=As.PIXELS,s.gpgpu.uploadPixelDataToTexture(s.getTexture(o.dataId),d);const c=dt().getBool("WEBGL_PACK")?new srt(u):new nrt(u),l=s.runWebGLProgram(c,[o],"int32");return s.disposeData(o.dataId),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function art(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,filter:S,bias:i,preluActivationWeights:g}=t,{strides:e,pad:a,dataFormat:v,dilations:u,dimRoundingMode:o,activation:c,leakyreluAlpha:l}=r,f=Er(v),m=pn(d.shape,S.shape,e,u,a,o,!1,f);let h;const p=[],y=i!=null,x=g!=null,T=c==="leakyrelu",C=()=>{const A=[d,S],w=(b,I)=>{if(I==="NCHW"&&b.shape.length===1&&b.shape[0]!==1){const R=It({inputs:{x:b},backend:s,attrs:{shape:[b.shape[0],1,1]}});return p.push(R),R}return b};if(y&&A.push(w(i,v)),x&&A.push(w(g,v)),T){const b=s.makeTensorInfo([],"float32",pa(l,"float32"));A.push(b),p.push(b)}return A};if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))h=fD({x:d,filter:S,convInfo:m,backend:s,bias:i,activation:c,preluActivationWeights:g,leakyreluAlpha:l});else if(m.strideWidth<=2&&f==="channelsLast"&&dt().getBool("WEBGL_EXP_CONV")){const A=c?fh(c,!0):null,w=new cD(m,y,A,x,T),b=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],I=C();h=s.runWebGLProgram(w,I,"float32",b)}else if(dt().getBool("WEBGL_CONV_IM2COL"))h=dD({x:d,filter:S,convInfo:m,backend:s,bias:i,activation:c,preluActivationWeights:g,leakyreluAlpha:l});else{const A=c?fh(c,!1):null,w=new hD(m,y,A,x,T),b=C();h=s.runWebGLProgram(w,b,"float32")}const E=It({inputs:{x:h},backend:s,attrs:{shape:m.outShape}});return p.push(h),p.forEach(A=>s.disposeIntermediateTensorInfo(A)),E}const ort={kernelName:md,backendName:"webgl",kernelFunc:art};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lrt(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,filter:S,bias:i,preluActivationWeights:g}=t,{strides:e,pad:a,dilations:v,dimRoundingMode:u,activation:o,leakyreluAlpha:c}=r,l=[];let f=v;f==null&&(f=[1,1]),q(Sn(e,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${e} and dilations '${f}'`);const m=pn(d.shape,S.shape,e,f,a,u,!0),h=dt().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,p=o?fh(o,h):null,y=[d,S],x=i!=null,T=g!=null,C=o==="leakyrelu";if(x&&y.push(i),T&&y.push(g),C){const b=s.makeTensorInfo([],"float32",pa(c,"float32"));y.push(b),l.push(b)}let E;h?E=new vD(m,x,p,T,C):E=new mD(m,x,p,T,C);const A=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],w=s.runWebGLProgram(E,y,"float32",A);return l.forEach(b=>s.disposeIntermediateTensorInfo(b)),w}const urt={kernelName:vd,backendName:"webgl",kernelFunc:lrt};class hrt{constructor(t,s,r,d){this.sliceDim=t,this.strides=s,this.paramsShape=d,this.variableNames=["x","indices"],this.outputShape=r;const S=pe(r.length);let i=`
    int index;`;for(let g=0;g<this.sliceDim;g++)i+=`
          index = round(getIndices(coords[0], ${g}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[g]};
          flattenIndex += index * ${this.strides[g]};`;this.userCode=`
         void main() {
          ${S} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function crt(n){const{inputs:t,backend:s}=n,{params:r,indices:d}=t,S=d.shape,i=S[S.length-1],g=mt(r.shape),[e,a,v,u]=s2(r,d),o=It({inputs:{x:d},backend:s,attrs:{shape:[a,i]}}),c=It({inputs:{x:r},backend:s,attrs:{shape:[mt(r.shape)/v,v]}});if(s.shouldExecuteOnCPU([r,d])||r.dtype==="string"){const h=s.readSync(d.dataId),p=s.bufferSync(r),y=dtt(h,p,r.dtype,a,i,v,u,r.shape,g);return s.makeTensorInfo(e,r.dtype,y.values)}const l=new hrt(i,u,[a,v],r.shape),f=s.runWebGLProgram(l,[c,o],c.dtype),m=It({inputs:{x:f},backend:s,attrs:{shape:e}});return s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(f),m}const frt={kernelName:Ay,backendName:"webgl",kernelFunc:crt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class drt{constructor(t,s){this.variableNames=["A","indices"],this.outputShape=s,this.rank=s.length;const r=pe(this.rank),d=prt(t);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${d}));
      }
    `}}function prt(n,t){const s=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let d=0;d<n.length;d++)d===2?r.push("index"):r.push(`${s[d]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yD(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,indices:S}=t,{axis:i,batchDims:g}=r,e=Qt(i,d.shape)[0];if(dt().get("DEBUG")){const p=s.readSync(S.dataId),y=d.shape[e];for(let x=0;x<p.length;++x){const T=p[x];q(T<=y-1&&T>=0,()=>`GatherV2: the index value ${T} is not in [0, ${y-1}]`)}}const a=I2(d,S,e,g),v=mt(S.shape),u=[],o=It({inputs:{x:d},backend:s,attrs:{shape:[a.batchSize,a.outerSize,a.dimSize,a.sliceSize]}}),c=It({inputs:{x:S},backend:s,attrs:{shape:[a.batchSize,v/a.batchSize]}});u.push(o),u.push(c);const l=[a.batchSize,a.outerSize,v/a.batchSize,a.sliceSize];if(s.shouldExecuteOnCPU([d,S])||d.dtype==="string"){const p=s.bufferSync(c),y=s.bufferSync(o),x=ptt(y,p,l);return u.forEach(T=>s.disposeIntermediateTensorInfo(T)),s.makeTensorInfo(a.outputShape,x.dtype,x.values)}const f=new drt(o.shape,l),m=s.runWebGLProgram(f,[o,c],o.dtype);u.push(m);const h=It({inputs:{x:m},backend:s,attrs:{shape:a.outputShape}});return u.forEach(p=>s.disposeIntermediateTensorInfo(p)),h}const mrt={kernelName:Rp,backendName:"webgl",kernelFunc:yD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vrt="return float(a > b);",grt=`
  return vec4(greaterThan(a, b));
`,xrt=En({opSnippet:vrt,packedOpSnippet:grt,cpuKernelImpl:mtt,dtype:"bool"}),yrt={kernelName:Np,backendName:"webgl",kernelFunc:xrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Trt="return float(a >= b);",Srt=`
  return vec4(greaterThanEqual(a, b));
`,Crt=En({opSnippet:Trt,packedOpSnippet:Srt,dtype:"bool",cpuKernelImpl:vtt}),wrt={kernelName:Gh,backendName:"webgl",kernelFunc:Crt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ert(n){const{inputs:t,backend:s}=n,{input:r}=t;return xD(r,!0,s)}const Art={kernelName:by,backendName:"webgl",kernelFunc:Ert};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const brt="return float(!isnan(x) && !isinf(x));",Irt=ae({opSnippet:brt,dtype:"bool"}),Rrt={kernelName:Wh,backendName:"webgl",kernelFunc:Irt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nrt="return float(isinf(x));",Prt=ae({opSnippet:Nrt,dtype:"bool"}),Frt={kernelName:Xh,backendName:"webgl",kernelFunc:Prt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Drt="return float(isnan(x));",Ort=ae({opSnippet:Drt,dtype:"bool"}),Lrt={kernelName:Hh,backendName:"webgl",kernelFunc:Ort};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mrt="return float(a < b);",$rt=`
  return vec4(lessThan(a, b));
`,Brt=En({opSnippet:Mrt,packedOpSnippet:$rt,cpuKernelImpl:gtt,dtype:"bool"}),krt={kernelName:Fp,backendName:"webgl",kernelFunc:Brt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zrt="return float(a <= b);",Vrt=`
  return vec4(lessThanEqual(a, b));
`,Grt=En({opSnippet:zrt,packedOpSnippet:Vrt,cpuKernelImpl:xtt,dtype:"bool"}),Urt={kernelName:Dp,backendName:"webgl",kernelFunc:Grt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wrt(n){const{backend:t,attrs:s}=n,{start:r,stop:d,num:S}=s,i=ytt(r,d,S);return t.makeTensorInfo([i.length],"float32",i)}const Xrt={kernelName:Ry,backendName:"webgl",kernelFunc:Wrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hrt=ql+`
  return x < 0.0 ? 0./0. : log(x);
`,Yrt=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,Krt=ae({opSnippet:Hrt,packedOpSnippet:Yrt,cpuKernelImpl:Ttt}),jrt={kernelName:Yh,backendName:"webgl",kernelFunc:Krt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zrt=ql+`
  return log(1.0 + x);
`,Qrt=ae({opSnippet:Zrt}),Jrt={kernelName:Kh,backendName:"webgl",kernelFunc:Qrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qrt="return float(a >= 1.0 && b >= 1.0);",_rt=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,tat=En({opSnippet:qrt,packedOpSnippet:_rt,dtype:"bool"}),eat={kernelName:Op,backendName:"webgl",kernelFunc:tat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nat="return float(!(x >= 1.0));",sat=ae({opSnippet:nat}),iat={kernelName:Lp,backendName:"webgl",kernelFunc:sat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rat="return float(a >= 1.0 || b >= 1.0);",aat=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,oat=En({opSnippet:rat,packedOpSnippet:aat,dtype:"bool"}),lat={kernelName:Mp,backendName:"webgl",kernelFunc:oat};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uat{constructor(t,s,r,d,S){this.variableNames=["x"],this.outputShape=[];const i=s,g=t[3]-1;this.outputShape=t;let e;const a=`float(${r}) + float(${d}) * sum`;S===.5?e=`inversesqrt(${a})`:S===1?e=`1.0/(${a})`:e=`exp(log(${a}) * float(-${S}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${g}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${e};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hat{constructor(t,s,r,d,S){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=s,g=t[3]-1;this.outputShape=t;let e;const a=`float(${r}) + float(${d}) * sum`;S===.5?e=`inversesqrt(${a})`:S===1?e=`1.0/(${a})`:e=`exp(log(${a}) * float(-${S}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${g}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${e};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cat=n=>{const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{depthRadius:S,bias:i,alpha:g,beta:e}=r,a=dt().getBool("WEBGL_PACK_NORMALIZATION")?new hat(d.shape,S,i,g,e):new uat(d.shape,S,i,g,e);return s.runWebGLProgram(a,[d],d.dtype)},fat={kernelName:$p,backendName:"webgl",kernelFunc:cat};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dat{constructor(t,s,r,d,S){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=s,this.bias=r,this.alpha=d,this.beta=S,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${s})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${s} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${d}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${d})
                * float(${S})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${S});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pat=n=>{const{inputs:t,backend:s,attrs:r}=n,{x:d,y:S,dy:i}=t,{depthRadius:g,bias:e,alpha:a,beta:v}=r,u=new dat(d.shape,g,e,a,v);return s.runWebGLProgram(u,[d,S,i],d.dtype)},mat={kernelName:Ny,backendName:"webgl",kernelFunc:pat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vat(n,t,s,r){const d=mt(t),i=mt(n.shape)/d,g=It({inputs:{x:n},attrs:{shape:[i,d]},backend:r}),e=Eo(g,n.dtype,"max",r),a=It({inputs:{x:e},attrs:{shape:s},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(e),a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TD(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{reductionIndices:S,keepDims:i}=r,g=d.shape.length,e=Qt(S,d.shape);let a=e;const v=Oe(a,g),u=v!=null,o=s.shouldExecuteOnCPU([d]);let c=d;if(u){if(o){const y=s.texData.get(c.dataId).values,x=new Array(g);for(let E=0;E<x.length;E++)x[E]=d.shape[v[E]];const T=hT(y,d.shape,d.dtype,v,x);c=s.makeTensorInfo(x,d.dtype);const C=s.texData.get(c.dataId);C.values=T}else c=Jm(d,v,s);a=We(a.length,g)}Cn("max",a,g);const[l,f]=mn(c.shape,a);let m=l;i&&(m=Ue(l,e));let h;if(o){const y=s.texData.get(c.dataId).values,x=Stt(y,mt(f),m,d.dtype);h=s.makeTensorInfo(m,d.dtype);const T=s.texData.get(h.dataId);T.values=x}else h=vat(c,f,m,s);return u&&s.disposeIntermediateTensorInfo(c),h}const gat={kernelName:Bp,backendName:"webgl",kernelFunc:TD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xat=cT+`
  return max(a, b);
`,yat=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+wo+`
  return result;
`,Tat=En({opSnippet:xat,packedOpSnippet:yat,cpuKernelImpl:Ctt}),Sat={kernelName:jh,backendName:"webgl",kernelFunc:Tat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cat(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t;kc(d,"maxPool");const{filterSize:S,strides:i,pad:g,dimRoundingMode:e}=r,a=1;q(Sn(i,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const v=oi(d.shape,S,i,a,g,e);if(v.filterWidth===1&&v.filterHeight===1&&ee(v.inShape,v.outShape))return gs({inputs:{x:d},backend:s});const u=new dh(v,"max",!1);return s.runWebGLProgram(u,[d],d.dtype)}const wat={kernelName:kp,backendName:"webgl",kernelFunc:Cat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eat(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{filterSize:S,strides:i,pad:g,dataFormat:e,dimRoundingMode:a}=r,v=[1,1,1],u=wr(d.shape,S,i,v,g,a,e),o=new dT(u,"max",!1);return s.runWebGLProgram(o,[d],d.dtype)}const Aat={kernelName:zp,backendName:"webgl",kernelFunc:Eat};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bat{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const s=t.strideHeight,r=t.strideWidth,d=t.dilationHeight,S=t.effectiveFilterHeight,i=t.effectiveFilterWidth,g=S-1-t.padInfo.top,e=i-1-t.padInfo.left,a=S*i-1;this.userCode=`
      const ivec2 pads = ivec2(${g}, ${e});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${S};
          wR += ${d}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${a} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Iat{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const s=t.strideDepth,r=t.strideHeight,d=t.strideWidth,S=t.dilationDepth,i=t.dilationHeight,g=t.dilationWidth,e=t.effectiveFilterDepth,a=t.effectiveFilterHeight,v=t.effectiveFilterWidth,u=e-1-t.padInfo.front,o=a-1-t.padInfo.top,c=v-1-t.padInfo.left,l=e*a*v-1;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${o}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${e};
           wD += ${S}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${a};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${v};
                wC += ${g}) {
              float dyC = float(dyCCorner + wC) / ${d}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${l} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${a} * ${v} +
                  wR * ${v} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rat(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,input:S}=t,i=S,{filterSize:g,strides:e,pad:a,dimRoundingMode:v}=r,u=[1,1,1],o=wr(i.shape,g,e,u,a,v),c=new dT(o,"max",!0),l=s.runWebGLProgram(c,[i],i.dtype),f=new Iat(o),m=s.runWebGLProgram(f,[d,l],i.dtype);return s.disposeIntermediateTensorInfo(l),m}const Nat={kernelName:Fy,backendName:"webgl",kernelFunc:Rat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pat(n){const{inputs:t,backend:s,attrs:r}=n,{dy:d,input:S,output:i}=t,g=S;kc([S,i],"maxPoolGrad");const{filterSize:e,strides:a,pad:v,dimRoundingMode:u}=r,o=oi(g.shape,e,a,1,v,u),c=!0,l=new dh(o,"max",c),f=s.runWebGLProgram(l,[g],g.dtype),m=new bat(o),h=s.runWebGLProgram(m,[d,f],g.dtype);return s.disposeIntermediateTensorInfo(f),h}const Fat={kernelName:Py,backendName:"webgl",kernelFunc:Pat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dat(n,t,s,r){let d=new dh(s,"max",!1);const S=r.runWebGLProgram(d,[n],"float32");d=new dh(s,"max",!0,!0,t);const i=r.runWebGLProgram(d,[n],"float32");return[S,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oat={kernelName:Dy,backendName:"webgl",kernelFunc:({inputs:n,attrs:t,backend:s})=>{const{x:r}=n,{filterSize:d,strides:S,pad:i,includeBatchInIndex:g}=t,e=s;q(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const a=[1,1];q(Sn(S,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${S} and dilations '${a}'`);const v=oi(r.shape,d,S,a,i),[u,o]=Dat(r,g,v,e);return[u,o]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lat(n,t,s,r){const d=mt(t),i=mt(n.shape)/d,g=It({inputs:{x:n},attrs:{shape:[i,d]},backend:r}),e=Eo(g,"float32","mean",r),a=It({inputs:{x:e},attrs:{shape:s},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(e),a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mat={kernelName:Vp,backendName:"webgl",kernelFunc:({inputs:n,attrs:t,backend:s})=>{const{x:r}=n,{keepDims:d,axis:S}=t,i=s,g=r.shape.length,e=Qt(S,r.shape);let a=e;const v=Oe(a,g),u=v!=null,o=i.shouldExecuteOnCPU([r]),c=[];let l=r;if(u){if(o){const x=i.texData.get(l.dataId).values,T=new Array(g);for(let A=0;A<T.length;A++)T[A]=r.shape[v[A]];const C=hT(x,r.shape,r.dtype,v,T);l=i.makeTensorInfo(T,r.dtype);const E=i.texData.get(l.dataId);E.values=C}else l=Jm(r,v,i);c.push(l),a=We(a.length,g)}Cn("sum",a,g);const[f,m]=mn(l.shape,a);let h=f;d&&(h=Ue(f,e));const p=Lat(l,m,h,i);for(const y of c)i.disposeIntermediateTensorInfo(y);return p}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $at(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,keepDims:i}=r,g=d.shape.length,e=Qt(S,d.shape);let a=e;const v=Oe(a,g);let u=d;v!=null&&(u=Wn({inputs:{x:d},backend:s,attrs:{perm:v}}),a=We(a.length,d.shape.length)),Cn("min",a,g);const[o,c]=mn(u.shape,a),l=mt(c),f=It({inputs:{x:u},backend:s,attrs:{shape:[-1,l]}}),m=Eo(f,f.dtype,"min",s);let h;if(i){const p=Ue(o,e);h=It({inputs:{x:m},backend:s,attrs:{shape:p}})}else h=It({inputs:{x:m},backend:s,attrs:{shape:o}});return s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(m),v!=null&&s.disposeIntermediateTensorInfo(u),h}const Bat={kernelName:Gp,backendName:"webgl",kernelFunc:$at};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kat=cT+`
  return min(a, b);
`,zat=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+wo+`
  return result;
`,Vat=En({opSnippet:kat,packedOpSnippet:zat,cpuKernelImpl:wtt}),Gat={kernelName:Zh,backendName:"webgl",kernelFunc:Vat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uat{constructor(t,s,r){this.variableNames=["x"],this.outputShape=s.map((v,u)=>v[0]+t[u]+v[1]);const d=t.length,S=pe(d),i=s.map(v=>v[0]).join(","),g=s.map((v,u)=>v[0]+t[u]).join(","),e=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,d),a=r==="reflect"?0:1;if(d===1){this.userCode=`
        int start = ${i};
        int end = ${g};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${a};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${a};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${S} start = ${S}(${i});
      ${S} end = ${S}(${g});

      void main() {
        ${S} outC = getOutputCoords();
        for (int i = 0; i < ${d}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${a};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${a};
          }
        }
        ${S} coords = outC - start;
        setOutput(getX(${e}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wat{constructor(t,s,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s.map((l,f)=>l[0]+t[f]+l[1]);const d=t.length,S=pe(d),i=s.map(l=>l[0]).join(","),g=s.map((l,f)=>l[0]+t[f]).join(","),e=Vn("rc",d),a=Vn("source",d),v=`${e[d-1]} < ${this.outputShape[d-1]}`,u=d===1?"source":`vec2(${a.slice(-2).join()})`,o=r==="reflect"?0:1;let c="";if(d===1){const l=`
        ${S} source = rc;
        if (source < start) {
          source = start * 2 - source - ${o};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${o};
        }
        source -= start;
      `;c=`
        ${S} rc = outputLoc;
        ${l}
        result[0] = getChannel(getX(${a.join()}), ${u});
        ${e[d-1]} += 1;
        if(${v}) {
          ${l}
          result[1] = getChannel(getX(${a.join()}), ${u});
        }
      `}else{const l=`
        ${S} source = rc;
        ${S} lt = ${S}(lessThan(source, start));
        ${S} gte = ${S}(greaterThanEqual(source, end));
        ${S} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${o}) +
                gte * ((end - 1) * 2 - source + ${o});
        source -= start;
      `;c=`
        ${S} rc = outputLoc;
        ${l}
        result[0] = getChannel(getX(${a.join()}), ${u});
        ${e[d-1]} += 1;
        if(${v}) {
          ${l}
          result[1] = getChannel(getX(${a.join()}), ${u});
        }
        rc = outputLoc;
        ${e[d-2]} += 1;
        if(${e[d-2]} < ${this.outputShape[d-2]}) {
          ${l}
          result[2] = getChannel(getX(${a.join()}), ${u});
          ${e[d-1]} += 1;
          if(${v}) {
            ${l}
            result[3] = getChannel(getX(${a.join()}), ${u});
          }
        }
      `}this.userCode=`
      const ${S} start = ${S}(${i});
      const ${S} end = ${S}(${g});

      void main() {
        ${S} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xat=({inputs:n,backend:t,attrs:s})=>{const{x:r}=n,{paddings:d,mode:S}=s,i=dt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wat(r.shape,d,S):new Uat(r.shape,d,S);return t.runWebGLProgram(i,[r],r.dtype)},Hat={kernelName:Up,backendName:"webgl",kernelFunc:Xat};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yat=`if (b == 0.0) return NAN;
  return mod(a, b);`,Kat=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+wo+`
  return result;
`,jat=En({opSnippet:Yat,packedOpSnippet:Kat}),Zat={kernelName:Qh,backendName:"webgl",kernelFunc:jat};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qat{constructor(t,s,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${s-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${s-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jat=`
if (a == b) {
  return 1.0;
};
return a / b;`,qat=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,SD=En({opSnippet:Jat,packedOpSnippet:qat,checkOutOfBounds:!0}),_at={kernelName:Lh,backendName:"webgl",kernelFunc:SD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jw="return a - b;",CD=En({opSnippet:Jw,packedOpSnippet:Jw,supportsComplex:!0,cpuKernelImpl:Xtt}),tot={kernelName:fc,backendName:"webgl",kernelFunc:CD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wD(n){const{inputs:t,backend:s,attrs:r}=n,{logits:d}=t,{dim:S}=r,i=Qt([S],d.shape),g=TD({inputs:{x:d},backend:s,attrs:{reductionIndices:i,keepDims:!1}}),e=Ue(g.shape,i),a=It({inputs:{x:g},backend:s,attrs:{shape:e}}),v=CD({inputs:{a:d,b:a},backend:s}),u=gD({inputs:{x:v},backend:s}),o=qm({inputs:{x:u},backend:s,attrs:{axis:i,keepDims:!1}}),c=It({inputs:{x:o},backend:s,attrs:{shape:e}}),l=SD({inputs:{a:u,b:c},backend:s});return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(o),s.disposeIntermediateTensorInfo(c),l}const eot={kernelName:am,backendName:"webgl",kernelFunc:wD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function not(n){const{inputs:t,backend:s,attrs:r}=n,{logits:d}=t,{numSamples:S,seed:i,normalized:g}=r,e=g?d:wD({inputs:{logits:d},backend:s,attrs:{dim:d.shape.length-1}}),a=e.shape[0],v=e.shape[1],u=new Qat(a,v,S),o=[[i]],c=s.runWebGLProgram(u,[e],"int32",o);return g||s.disposeIntermediateTensorInfo(e),c}const sot={kernelName:Oy,backendName:"webgl",kernelFunc:not};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iot=ui+`
  return -x;
`,rot=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function aot(n){const{inputs:t,backend:s}=n,{x:r}=t;if(s.shouldExecuteOnCPU([r])){const S=s.texData.get(r.dataId),[i,g]=Att(S.values,r.shape,r.dtype);return s.makeTensorInfo(g,r.dtype,i)}let d;return dt().getBool("WEBGL_PACK_UNARY_OPERATIONS")?d=new zr(r.shape,rot):d=new Gi(r.shape,iot),s.runWebGLProgram(d,[r],r.dtype)}const oot={kernelName:Wp,backendName:"webgl",kernelFunc:aot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lot=Q1;function uot(n){Cs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:s,attrs:r}=n,{boxes:d,scores:S}=t,{maxOutputSize:i,iouThreshold:g,scoreThreshold:e}=r,a=s.readSync(d.dataId),v=s.readSync(S.dataId),{selectedIndices:u}=lot(a,v,i,g,e);return s.makeTensorInfo([u.length],"int32",new Int32Array(u))}const hot={kernelName:Ly,backendName:"webgl",kernelFunc:uot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cot=J1;function fot(n){Cs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:s,attrs:r}=n,{boxes:d,scores:S}=t,{maxOutputSize:i,iouThreshold:g,scoreThreshold:e,padToMaxOutputSize:a}=r,v=s.readSync(d.dataId),u=s.readSync(S.dataId),{selectedIndices:o,validOutputs:c}=cot(v,u,i,g,e,a);return[s.makeTensorInfo([o.length],"int32",new Int32Array(o)),s.makeTensorInfo([],"int32",new Int32Array([c]))]}const dot={kernelName:My,backendName:"webgl",kernelFunc:fot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pot=q1;function mot(n){Cs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:s,attrs:r}=n,{boxes:d,scores:S}=t,{maxOutputSize:i,iouThreshold:g,scoreThreshold:e,softNmsSigma:a}=r,v=s.readSync(d.dataId),u=s.readSync(S.dataId),o=i,c=g,l=e,f=a,{selectedIndices:m,selectedScores:h}=pot(v,u,o,c,l,f);return[s.makeTensorInfo([m.length],"int32",new Int32Array(m)),s.makeTensorInfo([h.length],"float32",new Float32Array(h))]}const vot={kernelName:$y,backendName:"webgl",kernelFunc:mot};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class got{constructor(t,s,r,d){this.variableNames=["indices"],this.outputShape=[t,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${d}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xot=n=>{const{inputs:t,backend:s,attrs:r}=n,{indices:d}=t,{dtype:S,depth:i,onValue:g,offValue:e}=r,a=mt(d.shape),v=new got(a,i,g,e),u=It({inputs:{x:d},backend:s,attrs:{shape:[a]}}),o=s.runWebGLProgram(v,[u],S);s.disposeIntermediateTensorInfo(u);const c=[...d.shape,i],l=It({inputs:{x:o},backend:s,attrs:{shape:c}});return s.disposeIntermediateTensorInfo(o),l},yot={kernelName:Yp,backendName:"webgl",kernelFunc:xot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wd(n){const{inputs:t,backend:s}=n,{x:r}=t;if(r.dtype==="complex64"){const d=Vc({inputs:{input:r},backend:s}),S=Wd({inputs:{x:d},backend:s}),i=_m({inputs:{input:r},backend:s}),g=Wd({inputs:{x:i},backend:s}),e=Ea({inputs:{real:S,imag:g},backend:s});return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo(i),s.disposeIntermediateTensorInfo(g),e}else return Gc({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:s})}const Tot={kernelName:hm,backendName:"webgl",kernelFunc:Wd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ED(n){const{inputs:t,backend:s}=n,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const d=Vc({inputs:{input:r},backend:s}),S=ED({inputs:{x:d},backend:s}),i=_m({inputs:{input:r},backend:s}),g=Wd({inputs:{x:i},backend:s}),e=Ea({inputs:{real:S,imag:g},backend:s});return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo(i),s.disposeIntermediateTensorInfo(g),e}else return Gc({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:s})}const Sot={kernelName:Hp,backendName:"webgl",kernelFunc:ED};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cot(n){const{inputs:t,backend:s,attrs:r}=n,{axis:d}=r;if(t.length===1)return _0({inputs:{input:t[0]},backend:s,attrs:{dim:d}});const S=t[0].shape,i=t[0].dtype;t.forEach(v=>{xs(S,v.shape,"All tensors passed to stack must have matching shapes"),q(i===v.dtype,()=>"All tensors passed to stack must have matching dtypes")});const g=[],e=t.map(v=>{const u=_0({inputs:{input:v},backend:s,attrs:{dim:d}});return g.push(u),u}),a=uD({inputs:e,backend:s,attrs:{axis:d}});return g.forEach(v=>s.disposeIntermediateTensorInfo(v)),a}const wot={kernelName:Kp,backendName:"webgl",kernelFunc:Cot};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eot{constructor(t,s,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=s.map((a,v)=>a[0]+t[v]+a[1]);const d=t.length,S=pe(d),i=s.map(a=>a[0]).join(","),g=s.map((a,v)=>a[0]+t[v]).join(","),e=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,d);if(d===1){this.userCode=`
        int start = ${i};
        int end = ${g};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${S} start = ${S}(${i});
      ${S} end = ${S}(${g});

      void main() {
        ${S} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${S} coords = outC - start;
          setOutput(getX(${e}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aot{constructor(t,s,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=s.map((f,m)=>f[0]+t[m]+f[1]);const d=t.length,S=pe(d),i=s.map(f=>f[0]).join(","),g=s.map((f,m)=>f[0]+t[m]).join(","),e=Vn("rc",d),a=Vn("source",d),v=`${e[d-1]} < ${this.outputShape[d-1]}`,u=d===1?"source":`vec2(${a.slice(-2).join()})`,o=[`${S} rc = outputLoc;`,`${e[d-1]} += 1;
       if(${v}) {
      `,d===1?"":`}
       rc = outputLoc;
       ${e[d-2]} += 1;
       if(${e[d-2]} < ${this.outputShape[d-2]}) {`,d===1?"":`  ${e[d-1]} += 1;
         if(${v}) {`],c=d===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let l="";for(let f=0,m=d===1?2:4;f<m;f++)l+=`
        ${o[f]}
        if (${c}) {
          result[${f}] = float(value);
        } else {
          ${S} source = rc - start;
          result[${f}] = getChannel(getX(${a.join()}), ${u});
        }
      `;l+=d===1?"} ":"}}",this.userCode=`
      const ${S} start = ${S}(${i});
      const ${S} end = ${S}(${g});

      void main() {
        ${S} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AD=n=>{const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{paddings:S,constantValue:i}=r;if(mt(d.shape)===0){const a=S.map((v,u)=>v[0]+d.shape[u]+v[1]);return Gc({backend:s,attrs:{shape:a,value:i,dtype:d.dtype}})}const g=dt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Aot(d.shape,S,i):new Eot(d.shape,S,i),e=[[i]];return s.runWebGLProgram(g,[d],d.dtype,e)},bot={kernelName:jp,backendName:"webgl",kernelFunc:AD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iot=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Rot=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+wo+`
  return result;
`,Not=En({opSnippet:Iot,packedOpSnippet:Rot}),Pot={kernelName:qh,backendName:"webgl",kernelFunc:Not};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fot(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{axis:S,keepDims:i}=r,g=d.shape.length,e=[],a=Qt(S,d.shape);let v=a;const u=Oe(v,g);let o=d;u!=null&&(o=Wn({inputs:{x:d},backend:s,attrs:{perm:u}}),v=We(v.length,g),e.push(o)),Cn("prod",v,g);let c;if(s.shouldExecuteOnCPU([o])){const l=s.texData.get(o.dataId).values,{outVals:f,outShape:m,outDtype:h}=Itt(o.shape,o.dtype,l,v);c=s.makeTensorInfo(m,h,f)}else{const[l,f]=mn(o.shape,v),m=mt(f),h=It({inputs:{x:o},backend:s,attrs:{shape:[-1,m]}}),p=l1(d.dtype),y=Eo(h,p,"prod",s);c=It({inputs:{x:y},backend:s,attrs:{shape:l}}),e.push(h),e.push(y)}if(i){e.push(c);const l=Ue(c.shape,a);c=It({inputs:{x:c},backend:s,attrs:{shape:l}})}return e.forEach(l=>s.disposeIntermediateTensorInfo(l)),c}const Dot={kernelName:Qp,backendName:"webgl",kernelFunc:Fot};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oot(n){const{inputs:t,backend:s,attrs:r}=n,{paramsNestedSplits:d,paramsDenseValues:S,indices:i}=t,{outputRaggedRank:g}=r,e=d.map(h=>s.readSync(h.dataId)),a=d.map(h=>h.shape),v=s.readSync(S.dataId),u=s.readSync(i.dataId),[o,c,l]=Rtt(e,a,v,S.shape,S.dtype,u,i.shape,g),f=o.map(h=>s.makeTensorInfo([h.length],"int32",h)),m=s.makeTensorInfo(l,S.dtype,c);return f.concat([m])}const Lot={kernelName:By,backendName:"webgl",kernelFunc:Oot};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mot(n){const{inputs:t,backend:s}=n,{starts:r,limits:d,deltas:S}=t,i=s.readSync(r.dataId),g=s.readSync(d.dataId),e=s.readSync(S.dataId),[a,v]=Ntt(i,r.shape,r.dtype,g,d.shape,e,S.shape),u=s.makeTensorInfo([a.length],"int32",a),o=s.makeTensorInfo([v.length],r.dtype,v);return[u,o]}const $ot={kernelName:ky,backendName:"webgl",kernelFunc:Mot};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bot(n){const{inputs:t,backend:s,attrs:r}=n,{shape:d,values:S,defaultValue:i,rowPartitionTensors:g}=t,{rowPartitionTypes:e}=r,a=s.readSync(d.dataId),v=s.readSync(S.dataId),u=s.readSync(i.dataId),o=g.map(m=>s.readSync(m.dataId)),c=g.map(m=>m.shape),[l,f]=Ptt(a,d.shape,v,S.shape,S.dtype,u,i.shape,o,c,e);return s.makeTensorInfo(l,S.dtype,f)}const kot={kernelName:zy,backendName:"webgl",kernelFunc:Bot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bD=n=>{const{backend:t,attrs:s}=n,{start:r,stop:d,step:S,dtype:i}=s,g=Ftt(r,d,S,i);return t.makeTensorInfo([g.length],i,g)},zot={kernelName:Vy,backendName:"webgl",kernelFunc:bD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vot="return 1.0 / x;",Got=ae({opSnippet:Vot}),Uot={kernelName:_h,backendName:"webgl",kernelFunc:Got};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wot=ui+`
  return (x < 0.0) ? 0.0 : x;
`,Xot=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Hot=ae({opSnippet:Wot,packedOpSnippet:Xot}),Yot={kernelName:tc,backendName:"webgl",kernelFunc:Hot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kot=ui+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,jot=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Zot=ae({opSnippet:Kot,packedOpSnippet:jot}),Qot={kernelName:ec,backendName:"webgl",kernelFunc:Zot};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jot{constructor(t,s,r,d,S){this.variableNames=["A"],this.outputShape=[];const[i,g,e,a]=t;this.outputShape=[i,s,r,a];const v=[d&&s>1?g-1:g,d&&r>1?e-1:e],u=[d&&s>1?s-1:s,d&&r>1?r-1:r];let o;S?o="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":o="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${v[0]/u[0]},
          ${v[1]/u[1]});
      const vec2 inputShapeRC = vec2(${g}.0, ${e}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${o};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qot{constructor(t,s,r,d,S){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,g,e,a]=t;this.outputShape=[i,s,r,a];const v=[d&&s>1?g-1:g,d&&r>1?e-1:e],u=[d&&s>1?s-1:s,d&&r>1?r-1:r];let o;S?o="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":o="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${v[0]/u[0]},
          ${v[1]/u[1]},
          ${v[1]/u[1]});
      const vec3 inputShapeRC = vec3(${g}.0, ${e}.0,
                                     ${e}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${o};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${a-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ot(n){const{inputs:t,backend:s,attrs:r}=n,{images:d}=t,{alignCorners:S,halfPixelCenters:i,size:g}=r,[e,a]=g,v=dt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new qot(d.shape,e,a,S,i):new Jot(d.shape,e,a,S,i);return s.runWebGLProgram(v,[d],"float32")}const tlt={kernelName:_p,backendName:"webgl",kernelFunc:_ot};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class elt{constructor(t,s,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=s;const[,d,S]=s,[,i,g]=t,e=[r&&i>1?d-1:d,r&&g>1?S-1:S],a=[r&&i>1?i-1:i,r&&g>1?g-1:g],v=e[0]/a[0],u=e[1]/a[1],o=1/v,c=1/u,l=Math.ceil(o)*2+2,f=Math.ceil(c)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${v});
        const float widthScale = float(${u});

        const float invHeightScale = float(${o});
        const float invWidthScale = float(${c});

        const int winHeight = int(${l});
        const int winWidth = int(${f});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${g}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${d-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${S-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nlt(n){const{inputs:t,backend:s,attrs:r}=n,{images:d,dy:S}=t,{alignCorners:i}=r,g=new elt(S.shape,d.shape,i);return s.runWebGLProgram(g,[S],S.dtype)}const slt={kernelName:Wy,backendName:"webgl",kernelFunc:nlt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ilt{constructor(t,s,r,d,S){this.variableNames=["A"],this.outputShape=[];const[i,g,e,a]=t;this.outputShape=[i,s,r,a];const v=[d&&s>1?g-1:g,d&&r>1?e-1:e],u=[d&&s>1?s-1:s,d&&r>1?r-1:r],o=d?"0.5":"0.0";let c;S?c="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":c="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${v[0]/u[0]},
          ${v[1]/u[1]});
      const vec2 inputShapeRC = vec2(${g}.0, ${e}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${c};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${o})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rlt{constructor(t,s,r,d,S){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,g,e,a]=t;this.outputShape=[i,s,r,a];const v=[d&&s>1?g-1:g,d&&r>1?e-1:e],u=[d&&s>1?s-1:s,d&&r>1?r-1:r],o=d?"0.5":"0.0";let c;S?c="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":c="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${v[0]/u[0]},
          ${v[1]/u[1]},
          ${v[1]/u[1]});
      const vec3 inputShapeRC = vec3(${g}.0, ${e}.0,
                                     ${e}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${c};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${o})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${a-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function alt(n){const{inputs:t,backend:s,attrs:r}=n,{images:d}=t,{alignCorners:S,halfPixelCenters:i,size:g}=r,[e,a]=g,v=dt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new rlt(d.shape,e,a,S,i):new ilt(d.shape,e,a,S,i);return s.runWebGLProgram(v,[d],d.dtype)}const olt={kernelName:qp,backendName:"webgl",kernelFunc:alt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class llt{constructor(t,s,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=s;const[,d,S]=s,[,i,g]=t,e=[r&&i>1?d-1:d,r&&g>1?S-1:S],a=[r&&i>1?i-1:i,r&&g>1?g-1:g],v=e[0]/a[0],u=e[1]/a[1],o=1/v,c=1/u,l=Math.ceil(o)*2+2,f=Math.ceil(c)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${v});
        const float widthScale = float(${u});

        const float invHeightScale = float(${o});
        const float invWidthScale = float(${c});

        const int winHeight = int(${l});
        const int winWidth = int(${f});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${g}) {
              continue;
            }

            float sourceFracRow =
              float(${e[0]}) *
                (float(dyR) / float(${a[0]}));

            float sourceFracCol =
                float(${e[1]}) *
                  (float(dyC) / float(${a[1]}));

            int sourceNearestRow = int(min(
                float(int(${d}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${S}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ult(n){const{inputs:t,backend:s,attrs:r}=n,{images:d,dy:S}=t,{alignCorners:i}=r,g=new llt(S.shape,d.shape,i);return s.runWebGLProgram(g,[S],S.dtype)}const hlt={kernelName:Uy,backendName:"webgl",kernelFunc:ult};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class clt{constructor(t,s){this.variableNames=["x"];const r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=t,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const d=g=>s.indexOf(g)!==-1&&t[g]!==1?`${t[g]} - coords[${g}] - 1`:`coords[${g}]`,S=t.map((g,e)=>d(e)).join(","),i=pe(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${S}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class flt{constructor(t,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=t;const d=Vn("rc",r),S=`${d[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${d[r-2]} + 1 < ${this.outputShape[r-2]}`,g=pe(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${S}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${g} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${e(d.slice())};
          if(${S}){
            result.g = ${a(d.slice())};
          }
          if(${i}) {
            result.b = ${v(d.slice())};
            if(${S}) {
              result.a = ${u(d.slice())};
            }
          }
          setOutput(result);
        }
    `;function e(l){return o(l)}function a(l){return l[r-1]="("+l[r-1]+" + 1)",o(l)}function v(l){return l[r-2]="("+l[r-2]+" + 1)",o(l)}function u(l){return l[r-1]="("+l[r-1]+" + 1)",l[r-2]="("+l[r-2]+" + 1)",o(l)}function o(l){const f=t.map((p,y)=>c(y,l)),m=f.join(","),h=f.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${h}))`}function c(l,f){return s.indexOf(l)!==-1&&t[l]!==1?`${t[l]} - ${f[l]} - 1`:`${f[l]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dlt(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{dims:S}=r,i=d.shape.length,g=Qt(S,d.shape);if(i===0)return gs({inputs:{x:d},backend:s});const e=dt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new flt(d.shape,g):new clt(d.shape,g);return s.runWebGLProgram(e,[d],d.dtype)}const plt={kernelName:tm,backendName:"webgl",kernelFunc:dlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mlt{constructor(t,s){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=t[1],d=t[2];this.outputShape=t;let S="";typeof s=="number"?S=`float outputValue = ${s.toFixed(2)};`:S=`
        vec3 fill = vec3(${s.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${S}
          if(coordX >= 0 && coordX < ${d} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vlt={kernelName:a1,backendName:"webgl",kernelFunc:({inputs:n,attrs:t,backend:s})=>{const{image:r}=n,{radians:d,fillValue:S,center:i}=t,g=s,e=new mlt(r.shape,S),[a,v]=c2(i,r.shape[1],r.shape[2]),u=[[a,v,Math.sin(d),Math.cos(d)]];return g.runWebGLProgram(e,[r],r.dtype,u)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const glt=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,xlt=ae({opSnippet:glt}),ylt={kernelName:nc,backendName:"webgl",kernelFunc:xlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tlt="return inversesqrt(x);",Slt=ae({opSnippet:Tlt,cpuKernelImpl:Dtt}),Clt={kernelName:sc,backendName:"webgl",kernelFunc:Slt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pT{constructor(t,s,r,d,S,i,g=!0,e=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const a=pe(S.length),v=pe(i.length);let u="";r===1?u="i":r===2&&(u="i, j");const o=`getIndices(${u})`;let c="";d===1?c="i":d===2&&(c="i, coords[1]");const l=`getUpdates(${c})`;let f="";e&&(f="coords[0], coords[1]");const m=`getDefaultValue(${f})`,h=s>1?"strides[j]":"strides";this.userCode=`
        ${a} strides = ${a}(${S});

        void main() {
          ${v} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${s}; j++) {
              int index = round(${o});
              flattenedIndex += index * ${h};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${l};
              found = true;
            }
          }
          setOutput(mix(${m}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wlt{constructor(t,s,r,d,S,i,g=!0,e=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const a=pe(S.length),v=pe(i.length);let u="";r===1?u="i":r===2&&(u="i, j");const o=`getIndices(${u})`;let c="";d===1?c="i":d===2&&(c="i, coords[1]");const l=`getUpdates(${c})`;let f="";e&&(f="coords[0], coords[1]");const m=`getDefaultValue(${f})`,h=s>1?"strides[j]":"strides",p=s>1?"strides[j + 1]":"strides";this.userCode=`
        ${a} strides = ${a}(${S});

        void main() {
          ${v} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${t}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${s}; j+=2) {
              ivec4 index = round(${o});
              flattenedIndex += index.xz * ${h};
              if (j + 1 < ${s}) {
                flattenedIndex += index.yw * ${p};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${l};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${m}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Elt(n){const{inputs:t,backend:s,attrs:r}=n,{indices:d,updates:S}=t,{shape:i}=r,{sliceRank:g,numUpdates:e,sliceSize:a,strides:v,outputSize:u}=xo(S,d,i),o=[u/a,a];if(u===0)return s.makeTensorInfo(i,d.dtype);const c=It({inputs:{x:d},backend:s,attrs:{shape:[e,g]}}),l=It({inputs:{x:S},backend:s,attrs:{shape:[e,a]}}),f=s.makeTensorInfo([],"float32",new Float32Array([0]));let m;dt().getBool("WEBGL_PACK")?m=new wlt(e,g,c.shape.length,l.shape.length,v,o):m=new pT(e,g,c.shape.length,l.shape.length,v,o);const h=s.runWebGLProgram(m,[l,c,f],l.dtype),p=It({inputs:{x:h},backend:s,attrs:{shape:i}});return s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(f),p}const Alt={kernelName:Xy,backendName:"webgl",kernelFunc:Elt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class blt{constructor(t,s,r,d){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];const S="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(s+1))}; ++i) { if (left >= right) break;`,g=dt().getNumber("WEBGL_VERSION")===2?S:i,e=d==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${g}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${e} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ilt(n){const{inputs:t,backend:s,attrs:r}=n,{sortedSequence:d,values:S}=t,{side:i}=r,g=new blt(d.shape[0],d.shape[1],S.shape[1],i),e=[[d.shape[1]]];return s.runWebGLProgram(g,[d,S],"int32",e)}const Rlt={kernelName:Yy,backendName:"webgl",kernelFunc:Ilt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nlt{constructor(t,s,r){this.variableNames=["c","a","b"],this.outputShape=s;let d,S;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)S="resRC",d="resRC";else{const g=["resRC.x","resRC.y","resRC.z","resRC.w"],e=[],a=[];for(let v=0;v<s.length;v++)a.push(`${g[v]}`),v<t&&e.push(`${g[v]}`);d=e.join(),S=a.join()}const i=pe(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${d});
        if (cVal >= 1.0) {
          setOutput(getA(${S}));
        } else {
          setOutput(getB(${S}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Plt(n){const{inputs:t,backend:s}=n,{condition:r,t:d,e:S}=t,i=new Nlt(r.shape.length,d.shape,d.shape.length);return s.runWebGLProgram(i,[r,d,S],ps(d.dtype,S.dtype))}const Flt={kernelName:em,backendName:"webgl",kernelFunc:Plt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dlt=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Mm};
  float scale = ${$m};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Olt=ae({opSnippet:Dlt}),Llt={kernelName:ic,backendName:"webgl",kernelFunc:Olt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mlt=ql+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,$lt=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Blt=ae({opSnippet:Mlt,packedOpSnippet:$lt,cpuKernelImpl:Ltt}),klt={kernelName:lc,backendName:"webgl",kernelFunc:Blt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zlt=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,Vlt=ae({opSnippet:zlt}),Glt={kernelName:oc,backendName:"webgl",kernelFunc:Vlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ult=ql+`
  return sin(x);
`,Wlt=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${wo}
  return result;
`,Xlt=ae({opSnippet:Ult,packedOpSnippet:Wlt}),Hlt={kernelName:rc,backendName:"webgl",kernelFunc:Xlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ylt=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,Klt=ae({opSnippet:Ylt}),jlt={kernelName:ac,backendName:"webgl",kernelFunc:Klt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zlt=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Qlt=ae({opSnippet:Zlt}),Jlt={kernelName:uc,backendName:"webgl",kernelFunc:Qlt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qlt=n=>{const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{blockShape:S,paddings:i}=r;q(d.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const g=S.reduce((h,p)=>h*p),e=[[0,0]];e.push(...i);for(let h=1+S.length;h<d.shape.length;++h)e.push([0,0]);const a=[],v=AD({inputs:{x:d},backend:s,attrs:{paddings:e,constantValue:0}}),u=Ac(v.shape,S,g,!1),o=bc(u.length,S.length,!1),c=Ic(v.shape,S,g,!1),l=It({inputs:{x:v},backend:s,attrs:{shape:u}}),f=Wn({inputs:{x:l},backend:s,attrs:{perm:o}}),m=It({inputs:{x:f},backend:s,attrs:{shape:c}});return a.push(v),a.push(l),a.push(f),a.forEach(h=>s.disposeIntermediateTensorInfo(h)),m},_lt={kernelName:im,backendName:"webgl",kernelFunc:qlt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tut(n){const{inputs:t,backend:s}=n,{indices:r,values:d,denseShape:S,defaultValue:i}=t;if(S.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${S.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(d.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${d.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const g=s.readSync(r.dataId),e=s.readSync(d.dataId),a=s.readSync(S.dataId),v=s.readSync(i.dataId)[0],[u,o,c,l,f]=$tt(g,r.shape,r.dtype,e,d.dtype,a,v);return[s.makeTensorInfo(o,r.dtype,u),s.makeTensorInfo([o[0]],d.dtype,c),s.makeTensorInfo([l.length],"bool",new Uint8Array(l.map(m=>Number(m)))),s.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}const eut={kernelName:Ky,backendName:"webgl",kernelFunc:tut};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nut(n){const{inputs:t,backend:s}=n,{inputIndices:r,inputShape:d,newShape:S}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(d.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${d.shape}`);if(S.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${S.shape}`);const i=Array.from(s.readSync(d.dataId)),g=s.readSync(r.dataId),e=Array.from(s.readSync(S.dataId)),[a,v,u]=Btt(g,r.shape,r.dtype,i,e);return[s.makeTensorInfo(v,r.dtype,a),s.makeTensorInfo([u.length],S.dtype,new Int32Array(u))]}const sut={kernelName:jy,backendName:"webgl",kernelFunc:nut};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iut(n){const{inputs:t,backend:s}=n,{data:r,indices:d,segmentIds:S}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(d.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${d.shape}`);if(S.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${S.shape}`);const i=s.readSync(r.dataId),g=s.readSync(d.dataId),e=s.readSync(S.dataId),[a,v]=QF(i,r.shape,r.dtype,g,e,!0);return s.makeTensorInfo(v,r.dtype,a)}const rut={kernelName:Zy,backendName:"webgl",kernelFunc:iut};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aut(n){const{inputs:t,backend:s}=n,{data:r,indices:d,segmentIds:S}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(d.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${d.shape}`);if(S.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${S.shape}`);const i=s.readSync(r.dataId),g=s.readSync(d.dataId),e=s.readSync(S.dataId),[a,v]=QF(i,r.shape,r.dtype,g,e);return s.makeTensorInfo(v,r.dtype,a)}const out={kernelName:Qy,backendName:"webgl",kernelFunc:aut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lut(n){const{inputs:t,backend:s,attrs:r}=n,{sparseIndices:d,sparseValues:S,defaultValue:i}=t,{outputShape:g}=r,{sliceRank:e,numUpdates:a,sliceSize:v,strides:u,outputSize:o}=xo(S,d,g),c=!1;if(S.dtype==="string"){const h=s.bufferSync(d),p=s.bufferSync(S),y=ta(s.readSync(i.dataId)[0]),x=Ott(h,p,g,o,v,a,e,u,y,c);return s.makeTensorInfo(g,x.dtype,x.values)}const l=new pT(a,e,d.shape.length,S.shape.length,u,[o,1],c),f=s.runWebGLProgram(l,[S,d,i],S.dtype),m=It({inputs:{x:f},backend:s,attrs:{shape:g}});return s.disposeIntermediateTensorInfo(f),m}const uut={kernelName:Jy,backendName:"webgl",kernelFunc:lut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hut(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{numOrSizeSplits:S,axis:i}=r,g=Qt(i,d.shape)[0],e=b2(d,S,g),a=d.shape.length,v=new Array(a).fill(0),u=d.shape.slice();return e.map(o=>{const c=[...u];c[g]=o;const l=_l({inputs:{x:d},backend:s,attrs:{begin:v,size:c}});return v[g]+=o,l})}const cut={kernelName:rm,backendName:"webgl",kernelFunc:hut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qw="return sqrt(x);",fut=ae({opSnippet:qw,packedOpSnippet:qw,cpuKernelImpl:ktt}),dut={kernelName:hc,backendName:"webgl",kernelFunc:fut};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const put="return x * x;",mut=ae({opSnippet:put}),vut={kernelName:qy,backendName:"webgl",kernelFunc:mut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _w="return (a - b) * (a - b);",gut=En({opSnippet:_w,packedOpSnippet:_w}),xut={kernelName:cc,backendName:"webgl",kernelFunc:gut};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yut(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t;if(d.dtype!=="string")throw new Error("Input must be of datatype string");const S=s.readSync(d.dataId),i=Sr(S),g=ztt(i,"string",r);return s.makeTensorInfo(d.shape,"string",g)}const Tut={kernelName:om,backendName:"webgl",kernelFunc:yut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sut({inputs:n,attrs:t,backend:s}){const{x:r}=n,d=ui+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,S=new Gi(r.shape,d);return s.runWebGLProgram(S,[r],r.dtype)}const Cut={kernelName:vc,backendName:"webgl",kernelFunc:Sut};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wut{constructor(t,s,r){this.variableNames=["x"],this.outputShape=r;const d=r.length,S=pe(r.length),i=pe(r.length);let g="";if(d===1)g="coords * strides + begin";else{let e=0;g=r.map((a,v)=>(e++,r.length===1?`coords * strides[${v}] + begin[${v}]`:`coords[${e-1}] * strides[${v}] + begin[${v}]`)).join(",")}this.userCode=`
      ${S} begin = ${S}(${t});
      ${S} strides = ${S}(${s});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${g}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eut(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{begin:S,end:i,strides:g,beginMask:e,endMask:a,ellipsisMask:v,newAxisMask:u,shrinkAxisMask:o}=r,{finalShapeSparse:c,finalShape:l,isIdentity:f,sliceDim0:m,isSimpleSlice:h,begin:p,end:y,strides:x}=l2(d.shape,S,i,g,e,a,v,u,o);let T;if(f)T=It({inputs:{x:d},backend:s,attrs:{shape:l}});else if(m||h){q(d.shape.length>=1,()=>`Input must have rank at least 1, got: ${d.shape.length}`);const E=r2(p,y,x),A=_l({inputs:{x:d},backend:s,attrs:{begin:p,size:E}});T=It({inputs:{x:A},backend:s,attrs:{shape:l}}),s.disposeIntermediateTensorInfo(A)}else if(s.shouldExecuteOnCPU([d])){const A=s.readSync(d.dataId),w=jt(d.shape,d.dtype,A),b=Vtt(c,w,x,p);T=s.makeTensorInfo(l,d.dtype,b.values)}else{const A=new wut(p,x,c);T=s.runWebGLProgram(A,[d],d.dtype)}const C=It({inputs:{x:T},backend:s,attrs:{shape:l}});return s.disposeIntermediateTensorInfo(T),C}const Aut={kernelName:_y,backendName:"webgl",kernelFunc:Eut};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function but(n){const{inputs:t,backend:s,attrs:r}=n,{separator:d,nGramWidths:S,leftPad:i,rightPad:g,padWidth:e,preserveShortSequences:a}=r,{data:v,dataSplits:u}=t,o=s.readSync(v.dataId),c=s.readSync(u.dataId),[l,f]=Gtt(o,c,d,S,i,g,e,a);return[s.makeTensorInfo([l.length],"string",l),s.makeTensorInfo(u.shape,"int32",f)]}const Iut={kernelName:t1,backendName:"webgl",kernelFunc:but};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rut(n){const{inputs:t,backend:s,attrs:r}=n,{skipEmpty:d}=r,{input:S,delimiter:i}=t;if(S.dtype!=="string")throw new Error("Input must be of datatype string");if(S.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${S.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const g=s.readSync(S.dataId),e=s.readSync(i.dataId)[0],[a,v,u]=Utt(g,e,d),o=v.length;return[s.makeTensorInfo([o,2],"int32",a),s.makeTensorInfo([o],"string",v),s.makeTensorInfo([2],"int32",new Int32Array(u))]}const Nut={kernelName:e1,backendName:"webgl",kernelFunc:Rut};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Put(n){const{inputs:t,backend:s,attrs:r}=n,{numBuckets:d}=r,{input:S}=t;if(S.dtype!=="string")throw new Error("Input must be of datatype string");if(d<=0)throw new Error("Number of buckets must be at least 1");const i=s.readSync(S.dataId),g=Wtt(i,d);return s.makeTensorInfo(S.shape,"int32",g)}const Fut={kernelName:n1,backendName:"webgl",kernelFunc:Put};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dut="return tan(x);",Out=ae({opSnippet:Dut}),Lut={kernelName:dc,backendName:"webgl",kernelFunc:Out};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mut=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,$ut=ae({opSnippet:Mut}),But={kernelName:pc,backendName:"webgl",kernelFunc:$ut};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kut(n){const{inputs:t,backend:s,attrs:r}=n,{tensor:d,indices:S,updates:i}=t,{sliceRank:g,numUpdates:e,sliceSize:a,strides:v,outputSize:u}=xo(i,S,d.shape),o=[u/a,a];if(u===0)return s.makeTensorInfo(d.shape,S.dtype);const c=It({inputs:{x:S},backend:s,attrs:{shape:[e,g]}}),l=It({inputs:{x:i},backend:s,attrs:{shape:[e,a]}}),f=It({inputs:{x:d},backend:s,attrs:{shape:o}}),m=new pT(e,g,c.shape.length,l.shape.length,v,o,!1,!0),h=s.runWebGLProgram(m,[l,c,f],f.dtype),p=It({inputs:{x:h},backend:s,attrs:{shape:d.shape}});return s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(h),p}const zut={kernelName:Hy,backendName:"webgl",kernelFunc:kut};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vut{constructor(t,s){this.variableNames=["A"];const r=new Array(t.length);for(let i=0;i<r.length;i++)r[i]=t[i]*s[i];this.outputShape=r,this.rank=r.length;const d=pe(this.rank),S=Gut(t);this.userCode=`
      void main() {
        ${d} resRC = getOutputCoords();
        setOutput(getA(${S}));
      }
    `}}function Gut(n){const t=n.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${n[0]})`;const s=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let d=0;d<n.length;d++)r.push(`imod(${s[d]}, ${n[d]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ID(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{reps:S}=r;if(d.dtype==="string"||d.shape.length>5){const e=s.readSync(d.dataId),a=d.dtype==="string"?e.map(o=>ta(o)):e,v=jt(d.shape,d.dtype,a),u=Htt(v,S);return s.makeTensorInfo(u.shape,u.dtype,u.values)}const i=new Vut(d.shape,S);return s.runWebGLProgram(i,[d],d.dtype)}const Uut={kernelName:mc,backendName:"webgl",kernelFunc:ID};class Wut{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class Xut{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ia(n,t){t!==null&&n.disposeIntermediateTensorInfo(t)}function tE(n){let t=1;for(;t<n;)t*=2;return t}function Hut(n){const{inputs:t,backend:s,attrs:r}=n,{x:d}=t,{k:S,sorted:i}=r,g=dt().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),e=dt().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),a=d.shape,v=a[a.length-1];if(s.shouldExecuteOnCPU([d])||v<g||S>e){const b=s.readSync(d.dataId),[I,R]=Ytt(b,a,d.dtype,S,i);return[s.makeTensorInfo(I.shape,I.dtype,I.values),s.makeTensorInfo(R.shape,R.dtype,R.values)]}if(S===0)return a[a.length-1]=0,[s.makeTensorInfo(a,d.dtype,[]),s.makeTensorInfo(a,"int32",[])];if(v===1)return[d,Gc({attrs:{shape:a,dtype:"int32",value:0},backend:s})];const u=s.texData.get(d.dataId),o=u!==null&&u.isPacked,c=o?s.unpackTensor(d):d,f=mt(a)/v,m=It({inputs:{x:c},attrs:{shape:[f,v]},backend:s});o&&Ia(s,c);const h=tE(S),p=tE(v);let y=null;const x=()=>y===null?[m,m]:[m,y],T=(b,I,R)=>{const N=x(),F=new Wut(R),O=[[v],[y===null?1:0],[Number.NEGATIVE_INFINITY],[b],[I]],M=y;y=s.runWebGLProgram(F,N,"int32",O),Ia(s,M)};for(let b=1;b<h;b*=2){const I=b*2;for(let R=b;R>=1;R/=2)T(I,R,[f,p])}for(let b=p;b>h;b/=2){const I=x(),R=new Xut([f,b/2]),F=[[v],[y===null?1:0],[h]],P=y;y=s.runWebGLProgram(R,I,"int32",F),Ia(s,P);const O=h/2,M=O*2;for(let L=O;L>=1;L/=2)T(M,L,y.shape)}let C=y;y=_l({inputs:{x:y},backend:s,attrs:{begin:0,size:[f,S]}}),Ia(s,C);let E=yD({inputs:{x:m,indices:y},backend:s,attrs:{axis:1,batchDims:1}});Ia(s,m);const A=a.slice(0,-1);A.push(S),C=y,y=It({inputs:{x:y},attrs:{shape:A},backend:s}),Ia(s,C);const w=E;return E=It({inputs:{x:E},attrs:{shape:A},backend:s}),Ia(s,w),[E,y]}const Yut={kernelName:s1,backendName:"webgl",kernelFunc:Hut};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kut{constructor(t,s,r,d,S,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const g=r==="nearest"?1:2;let e;switch(d){case"constant":e=1;break;case"reflect":e=2;break;case"wrap":e=3;break;case"nearest":e=4;break;default:e=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${e} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${e} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${e} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${s}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${S});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${S});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${s}));
                float mapY = mapCoord(inY, float(${t}));

                if (${g} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jut(n){const{inputs:t,backend:s,attrs:r}=n,{image:d,transforms:S}=t,{interpolation:i,fillMode:g,fillValue:e,outputShape:a}=r,[v,u,o,c]=d.shape,[l,f]=a??[u,o],m=[v,l,f,c],h=new Kut(u,o,i,g,e,m);return s.runWebGLProgram(h,[d,S],"float32")}const Zut={kernelName:i1,backendName:"webgl",kernelFunc:jut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qut(n){const{inputs:t,attrs:s,backend:r}=n,{axis:d}=s,{x:S}=t;kc(S,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(S.dataId),{outputValues:g,outputShape:e,indices:a}=Ktt(i,d,S.shape,S.dtype);return[r.makeTensorInfo(e,S.dtype,g),r.makeTensorInfo([a.length],"int32",a)]}const Jut={kernelName:r1,backendName:"webgl",kernelFunc:Qut};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qut(n){const{inputs:t,backend:s,attrs:r}=n,{value:d}=t;let{axis:S}=r;S<0&&(S+=d.shape.length);const i=d,g=i.shape.length,e=d.shape[S],a=new Array(g-1);let v=0;for(let f=0;f<g;f++)f!==S&&(a[v++]=i.shape[f]);const u=[],o=new Array(g).fill(0),c=i.shape.slice();c[S]=1;const l=new Array(e);for(let f=0;f<l.length;f++){o[S]=f;const m=_l({inputs:{x:i},backend:s,attrs:{begin:o,size:c}}),h=It({inputs:{x:m},backend:s,attrs:{shape:a}});l[f]=h,u.push(m)}return u.forEach(f=>s.disposeIntermediateTensorInfo(f)),l}const _ut={kernelName:lm,backendName:"webgl",kernelFunc:qut};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tht{constructor(t,s){this.variableNames=["x","segmentIds"];const r=t.windowSize,d=t.batchSize,S=t.inSize,i=t.numSegments,g=i*Math.ceil(S/r);this.outputShape=[d,g];const e="0.0",a="sumValue",v=Math.floor(r/4)*4,u=r%4,o=`
        sumValue += dot(values, segFilter);
    `;let c="";S%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${S}) {
          return initializationValue;
        }
      `);let l="";S%r>0&&(l=`
        if (inIdx < 0 || inIdx >= ${S}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${e};

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${l}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${v}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${o}
        }

        int inIdx = inOffset + ${v};
        if (${u===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${o}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${o}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${o}
        }
        setOutput(${a});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eht(n){const{inputs:t,backend:s,attrs:r}=n,{x:d,segmentIds:S}=t,{numSegments:i}=r,g=d.shape.length,e=[];let a=0;const v=Oe([a],g);let u=d;v!=null&&(u=Wn({inputs:{x:d},backend:s,attrs:{perm:v}}),e.push(u),a=We(1,g)[0]);const o=oN(u.shape,a,i),c=mt([u.shape[a]]),l=It({inputs:{x:u},backend:s,attrs:{shape:[-1,c]}});e.push(l);const f=l1(d.dtype),m=(x,T,C,E,A)=>{const w=x.shape[0],b=x.shape[1],I=aN(b,A),R={windowSize:I,inSize:b,batchSize:w,numSegments:A},N=new tht(R,T),F=s.compileAndRun(N,[x,C],E);if(e.push(F),F.shape[1]===A)return F;const P=bD({backend:s,attrs:{start:0,stop:A,step:1,dtype:"float32"}}),O=ID({inputs:{x:P},backend:s,attrs:{reps:[b/I]}});return e.push(P),e.push(O),m(F,T,O,E,A)},h=m(l,"unsortedSegmentSum",S,f,i),p=It({inputs:{x:h},backend:s,attrs:{shape:o}});let y=p;if(v!=null){e.push(p);const x=xa(v);y=Wn({inputs:{x:y},backend:s,attrs:{perm:x}})}return e.forEach(x=>s.disposeIntermediateTensorInfo(x)),y}const nht={kernelName:um,backendName:"webgl",kernelFunc:eht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sht=[Vet,Uet,Het,jet,Qet,_et,ent,snt,ont,unt,fnt,mnt,xnt,Cnt,Ant,Int,Nnt,Ont,Mnt,Bnt,Gnt,jnt,Qnt,tst,nst,lst,hst,pst,wet,gst,Cst,bst,Dst,Mst,Bst,zst,Gst,Hst,jst,Jst,_st,eit,sit,ait,lit,fit,pit,git,Tit,Cit,bit,Pit,Lit,Bit,Vit,Git,Wit,Hit,Kit,Zit,Jit,ert,irt,ort,urt,frt,mrt,yrt,wrt,Cet,Art,Tst,Rrt,Frt,Lrt,Aet,krt,Urt,Xrt,jrt,Jrt,eat,iat,lat,fat,mat,gat,Sat,wat,Aat,Nat,Fat,Oat,Mat,Bat,Gat,Hat,Zat,sot,Ret,oot,hot,dot,vot,ist,yot,Sot,wot,bot,Pot,Iet,Dot,Lot,$ot,kot,zot,rst,_at,Uot,Yot,Qot,Pet,tlt,slt,olt,hlt,plt,vlt,ylt,Clt,Alt,Rlt,Flt,Llt,klt,Glt,Hlt,jlt,Ynt,eot,Jlt,_lt,eut,sut,rut,out,uut,cut,dut,vut,xut,Tut,Cut,Aut,Iut,Nut,Fut,tot,Bet,Lut,But,zut,Uut,Yut,Zut,ket,Jut,_ut,nht,Tot];for(const n of sht)Nb(n);const iht=100;function rht(n){const t=[he.first,he.second];return ti([t.map(s=>n.mapPiece(({value:r})=>+(r==s)).map(r=>[...r,...new Array(n.length-r.length).fill([0]).map(()=>new Array(r.length).fill(0))].map(d=>[...d,...new Array(n.length-d.length).fill(0)])))])}function aht(n,t){const s=t.length;return ft(()=>{const r=rht(t),[d,S]=n.predict(r),i=d.arraySync()[0][0];let g=S.arraySync()[0];g=t.legalActions().map(({i:a,j:v,k:u})=>g[a*s**2+v*s+u]);const e=gb(g);return g=g.map(a=>a/e),[i,g]})}class mT{constructor(t,s){_t(this,"board");_t(this,"p");_t(this,"w");_t(this,"n");_t(this,"childNodes",[]);this.board=t,this.p=s,this.w=0,this.n=0}evaluate(t){const s=this.board.isWin(he.first),r=this.board.isWin(he.second);let d=0,S=[];return s||r?d=s?r?0:1:-1:this.childNodes.length==0?([d,S]=aht(t,this.board),this.childNodes=this.board.nextAll(he.first).map((i,g)=>new mT(i.flip(),S[g]))):d=-this.nextChildNode().evaluate(t),this.w+=d,this.n+=1,d}nextChildNode(){const s=gb(this.childNodes.map(d=>d.n)),r=this.childNodes.map(d=>(d.n==0?0:-d.w/d.n)+1*d.p*s**.5/(1+d.n));return this.childNodes[xb(r)]}}function oht(n,t){const s=new mT(t,0);for(let r=0;r<iht;r++)s.evaluate(n);return s.childNodes.map(r=>r.n)}function lht(n){return t=>{const s=oht(n,t);return t.legalActions()[xb(s)]}}async function uht(n,t){const s=Date.now(),r=await $H(`/tfjs_models/size_${n}/model.json`),d=lht(r);t&&d(t);const S=Date.now();return console.log("loadModel:",S-s,"ms"),d}const Ci=new B5([!1,!0]),hht=Ci.scene,cht={type:ap.AUTO,parent:"phaser-container",backgroundColor:Hs.bg,width:t0,height:e0,scene:[hht]};function fht(){const n=new ap.Game(cht);return n.scene,()=>{n==null||n.destroy(!0)}}class dht extends vh.Component{render(){return lr.jsx("button",{id:this.props.id,onClick:this.props.onClick,children:this.props.label})}}class eE extends vh.Component{render(){const t=this.props.buttons.map(s=>lr.jsx(dht,{...s},s.id));return lr.jsx("div",{children:t})}}function pht(){Ci.scene.setInteractive(!1),D5("Save",n=>{const t=`${n||"_temp"}.${Qx}`;localStorage.setItem(t,Ci.exportData())},()=>{Ci.scene.setInteractive(!0)})}function mht(){Ci.scene.setInteractive(!1);const n=Object.keys(localStorage).filter(s=>/^.*\.mof$/.test(s)).map(s=>s.replace(/^(.*)\.mof$/,"$1"));if(n.length==0)return;const t=n.reduce((s,r,d)=>({...s,[d]:r}),{});Sb("Load",t,s=>{const r=localStorage.getItem(`${t[s]||"_temp"}.${Qx}`);if(r!=null)Ci.importData(r);else throw new Error("error")},()=>{Ci.scene.allRerender()})}function vht(){Ci.scene.setInteractive(!1);const n=Object.keys(localStorage).filter(s=>/^.*\.mof$/.test(s)).map(s=>s.replace(/^(.*)\.mof$/,"$1"));if(n.length==0)return;const t=n.reduce((s,r,d)=>({...s,[d]:r}),{});Sb("Remove",t,s=>{localStorage.removeItem(`${t[s]}.${Qx}`)},()=>{Ci.scene.setInteractive(!0)})}function ght(){return vh.useEffect(fht,[]),lr.jsxs(lr.Fragment,{children:[lr.jsx("div",{id:"phaser-container"}),lr.jsx(eE,{buttons:[{id:"prev-button",label:"<prev",onClick:()=>Ci.prev()},{id:"next-button",label:"next>",onClick:()=>Ci.next()}]}),lr.jsx(eE,{buttons:[{id:"saveData",label:"save",onClick:pht},{id:"loadData",label:"load",onClick:mht},{id:"removeData",label:"remove",onClick:vht}]})]})}const eg=document.getElementById("root");eg!==null&&eg.childNodes.length===0&&ng.createRoot(eg).render(lr.jsx(ght,{}));
